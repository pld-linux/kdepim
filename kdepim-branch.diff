Index: akregator/ChangeLog
===================================================================
--- akregator/ChangeLog	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ akregator/ChangeLog	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -2,6 +2,14 @@
 ===================
 (c) 2004-2006 the Akregator authors.
 
+Changes after 1.2.6:
+-----------------------------
+
+Bug fixes:
+
+ 2007/02/24 fix crash when using "Load the full website when reading articles" and an error (e.g. 404) 
+            is returned (2nd try) (#126812) -fo 
+
 Changes after 1.2.5:
 -----------------------------
 
Index: akregator/src/feedlist.cpp
===================================================================
--- akregator/src/feedlist.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ akregator/src/feedlist.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -112,7 +112,7 @@
     {
         QString title = e.hasAttribute("text") ? e.attribute("text") : e.attribute("title");
 
-        if (e.hasAttribute("xmlUrl") || e.hasAttribute("xmlurl"))
+        if (e.hasAttribute("xmlUrl") || e.hasAttribute("xmlurl") || e.hasAttribute("xmlURL") )
         {
             Feed* feed = Feed::fromOPML(e);
             if (feed)
Index: akregator/src/articleviewer.cpp
===================================================================
--- akregator/src/articleviewer.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ akregator/src/articleviewer.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -160,6 +160,10 @@
 ArticleViewer::ArticleViewer(QWidget *parent, const char *name)
     : Viewer(parent, name), m_htmlFooter(), m_currentText(), m_node(0), m_viewMode(NormalView)
 {
+    setJScriptEnabled(false);
+    setJavaEnabled(false);
+    setPluginsEnabled(false);
+    
     m_showSummaryVisitor = new ShowSummaryVisitor(this);
     setXMLFile(locate("data", "akregator/articleviewer.rc"), true);
 
Index: akregator/src/feed.cpp
===================================================================
--- akregator/src/feed.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ akregator/src/feed.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -127,11 +127,13 @@
 
     Feed* feed = 0;
 
-    if( e.hasAttribute("xmlUrl") || e.hasAttribute("xmlurl") )
+    if( e.hasAttribute("xmlUrl") || e.hasAttribute("xmlurl") || e.hasAttribute("xmlURL") )
     {
         QString title = e.hasAttribute("text") ? e.attribute("text") : e.attribute("title");
 
         QString xmlUrl = e.hasAttribute("xmlUrl") ? e.attribute("xmlUrl") : e.attribute("xmlurl");
+        if (xmlUrl.isEmpty())
+            xmlUrl = e.attribute("xmlURL");
 
         bool useCustomFetchInterval = e.attribute("useCustomFetchInterval") == "true" || e.attribute("autoFetch") == "true"; 
         // "autoFetch" is used in 3.4
Index: akregator/src/mk4storage/akregator_mk4storage_plugin.desktop
===================================================================
--- akregator/src/mk4storage/akregator_mk4storage_plugin.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ akregator/src/mk4storage/akregator_mk4storage_plugin.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -19,10 +19,12 @@
 Name[is]=Metakit geymslu bakendi
 Name[it]=Backend archiviazione metakit
 Name[ja]=メタキットストレージバックエンド
+Name[kk]=Metakit архивтеу бағдарламасы
 Name[km]=កម្មវិធី​ខាង​ក្រោយ​សម្រាប់​រក្សាទុក (Metakit)
 Name[ms]=Hujung belakang storan Metakit 
 Name[nb]=Metakit lagringsbakstykke
 Name[nds]=Metakit-Archivmoduul
+Name[ne]=मेटाकिट भण्डारण ब्याकइन्ड
 Name[nl]=Metakit-opslagbackend
 Name[nn]=Metakit-lagringsbakstykke
 Name[pl]=System przechowywania Metakit
@@ -39,9 +41,10 @@
 X-KDE-Library=libakregator_mk4storage_plugin
 Comment=Plugin for Akregator
 Comment[af]=Inprop module vir Akregator
+Comment[be]=Утулка для Akregator
 Comment[bg]=Приставка за Akregator
 Comment[br]=Lugent evit Akregator
-Comment[ca]=Endollable per a Akregator
+Comment[ca]=Endollable per a l'Akregator
 Comment[cs]=Modul pro Akregator
 Comment[de]=Modul für Akregator
 Comment[el]=Πρόσθετο για το Akregator
@@ -58,11 +61,14 @@
 Comment[is]=Íforrit fyrir Akregator
 Comment[it]=Plugin per Akregator
 Comment[ja]=Akregator 用プラグイン
+Comment[kk]=Akregator-дың плагин модулі
 Comment[km]=កម្មវិធី​ជំនួយ Akregator
 Comment[lt]=Akregator skirtas priedas
+Comment[mk]=Приклучок за Akregator
 Comment[ms]=Plugin untuk Akregator
 Comment[nb]=Programtillegg for Akregator
 Comment[nds]=Moduul för Akregator
+Comment[ne]=एक्रिगेटरका लागि प्लगइन
 Comment[nl]=Plugin voor Akregator
 Comment[nn]=Programtillegg til Akregator
 Comment[pl]=Wtyczka dla Akregatora
Index: akregator/src/akregator_part.cpp
===================================================================
--- akregator/src/akregator_part.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ akregator/src/akregator_part.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -513,13 +513,21 @@
     {
         if (!factory())
         {
-            kdDebug() << "Akregator::Part::mergePart(): factory() returns NULL" << endl;
-            return false;
+          if (m_mergedPart)
+            removeChildClient(m_mergedPart);
+          else
+            insertChildClient(part);
         }
-        if (m_mergedPart)
+        else
+        {
+          if (m_mergedPart) {
             factory()->removeClient(m_mergedPart);
-        if (part)
+            if (childClients()->containsRef(m_mergedPart))
+              removeChildClient(m_mergedPart);
+          }
+          if (part)
             factory()->addClient(part);
+        }
 
         m_mergedPart = part;
     }
Index: akregator/src/akregator_view.h
===================================================================
--- akregator/src/akregator_view.h	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ akregator/src/akregator_view.h	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -277,13 +277,9 @@
             void disconnectFromFeedList(FeedList* feedList);
 
             void updateTagActions();
-            
+
         protected slots:
 
-            /** this is called by the ctor, does init steps which need a properly created view and part */
-
-            void delayedInit();
-
             void connectFrame(Frame *);
 
             void setTabIcon(const QPixmap&);
Index: akregator/src/pageviewer.cpp
===================================================================
--- akregator/src/pageviewer.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ akregator/src/pageviewer.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -356,15 +356,22 @@
 
 void PageViewer::urlSelected(const QString &url, int button, int state, const QString &_target, KParts::URLArgs args)
 {
-    if (button == LeftButton)
+    if (url.startsWith(QString::fromLatin1( "javascript:" ), /*case-sensitive=*/false) )
     {
-        m_url = completeURL(url);
-        browserExtension()->setURLArgs(args); 
-        slotOpenLinkInThisTab();
+        KHTMLPart::urlSelected(url,button,state,_target,args);
     }
     else
     {
-        Viewer::urlSelected(url,button,state,_target,args);
+        if (button == LeftButton)
+        {
+            m_url = completeURL(url);
+            browserExtension()->setURLArgs(args); 
+            slotOpenLinkInThisTab();
+        }
+        else
+        {
+            Viewer::urlSelected(url,button,state,_target,args);
+        }
     }
 }
 
Index: akregator/src/viewer.cpp
===================================================================
--- akregator/src/viewer.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ akregator/src/viewer.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -51,10 +51,7 @@
     : KHTMLPart(parent, name), m_url(0)
 {
     setZoomFactor(100);
-    setJScriptEnabled(false);
-    setJavaEnabled(true);
     setMetaRefreshEnabled(true);
-    setPluginsEnabled(true);
     setDNDEnabled(true);
     setAutoloadImages(true);
     setStatusMessagesEnabled(true);
Index: akregator/src/akregator_plugin.desktop
===================================================================
--- akregator/src/akregator_plugin.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ akregator/src/akregator_plugin.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -3,9 +3,10 @@
 X-KDE-ServiceType=Akregator/Plugin
 Comment=Plugin for Akregator
 Comment[af]=Inprop module vir Akregator
+Comment[be]=Утулка для Akregator
 Comment[bg]=Приставка за Akregator
 Comment[br]=Lugent evit Akregator
-Comment[ca]=Endollable per a Akregator
+Comment[ca]=Endollable per a l'Akregator
 Comment[cs]=Modul pro Akregator
 Comment[de]=Modul für Akregator
 Comment[el]=Πρόσθετο για το Akregator
@@ -22,11 +23,14 @@
 Comment[is]=Íforrit fyrir Akregator
 Comment[it]=Plugin per Akregator
 Comment[ja]=Akregator 用プラグイン
+Comment[kk]=Akregator-дың плагин модулі
 Comment[km]=កម្មវិធី​ជំនួយ Akregator
 Comment[lt]=Akregator skirtas priedas
+Comment[mk]=Приклучок за Akregator
 Comment[ms]=Plugin untuk Akregator
 Comment[nb]=Programtillegg for Akregator
 Comment[nds]=Moduul för Akregator
+Comment[ne]=एक्रिगेटरका लागि प्लगइन
 Comment[nl]=Plugin voor Akregator
 Comment[nn]=Programtillegg til Akregator
 Comment[pl]=Wtyczka dla Akregatora
Index: akregator/src/akregator.desktop
===================================================================
--- akregator/src/akregator.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ akregator/src/akregator.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,6 +1,7 @@
 [Desktop Entry]
 Encoding=UTF-8
 Name=Akregator
+Name[ne]=एक्रिगेटर
 Exec=akregator %i %m -caption "%c"
 Icon=akregator
 Type=Application
@@ -26,11 +27,13 @@
 GenericName[is]=RSS fréttaforrit
 GenericName[it]=Lettore Fonti RSS
 GenericName[ja]=RSS ニュースリーダー
+GenericName[kk]=RSS жаңалықтарын оқу
 GenericName[km]=កម្មវិធី​អាន​មតិព័ត៌មាន RSS
 GenericName[lt]=RSS kanalų skaityklė
 GenericName[ms]= Pembaca Suapan RSS 
 GenericName[nb]=Leser for RSS-kanal
 GenericName[nds]=Kieker för RSS-Mellenströöm
+GenericName[ne]=आरएसएस फिड रिडर
 GenericName[nl]=RSS-feedlezer
 GenericName[nn]=RSS-lesar
 GenericName[pl]=Program do przeglądania kanałów RSS
@@ -68,10 +71,12 @@
 Comment[is]=RSS fréttaforrit fyrir KDE
 Comment[it]=Un concentratore KDE per RSS
 Comment[ja]=KDE 用 RSS アグリゲータ
+Comment[kk]=KDE-нің RSS жаңалық агрегаторы
 Comment[km]=កម្មវិធី​អាន RSS សម្រាប់ KDE
 Comment[ms]=Pengagregat RSS untuk KDE
 Comment[nb]=En RSS-oppsamler for KDE
 Comment[nds]=Tosamensteller för RSS-Mellenströöm vun KDE
+Comment[ne]=केडीई का लागि एउटा आरएसएस एक्रिगेटर
 Comment[nl]=Een RSS-agregator voor KDE
 Comment[nn]=Ein RSS-lesar for KDE
 Comment[pl]=Program podsumowujący kanały RSS dla KDE
Index: akregator/src/article.h
===================================================================
--- akregator/src/article.h	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ akregator/src/article.h	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -133,7 +133,12 @@
         private:
             void initialize(RSS::Article article, Backend::FeedStorage* archive);
             static QString buildTitle(const QString& description);
-            
+
+            int statusBits() const; // returns all of the status bits for the article.  this
+                                    // differs from status() which only returns the most relevant
+                                    // status flag.
+                                    
+
             struct Private;
             Private *d;
     };
Index: akregator/src/eventsrc
===================================================================
--- akregator/src/eventsrc	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ akregator/src/eventsrc	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -2,6 +2,7 @@
 IconName=akregator
 Comment=Akregator
 Comment[da]=Akregator Plugin
+Comment[ne]=एक्रिगेटर
 Comment[sv]=aKregator
 
 [feed_added]
@@ -26,11 +27,13 @@
 Name[is]=Straum bætt við
 Name[it]=Aggiunta fonte
 Name[ja]=フィード追加
+Name[kk]=Қор қосылды
 Name[km]=បាន​បន្ថែម​មតិព័ត៌មាន
 Name[lt]=Kanalas pridėtas
 Name[ms]=Suapan ditambah
 Name[nb]=Kanal lagt til
 Name[nds]=Narichtenstroom toföögt
+Name[ne]=फिड थपियो
 Name[nl]=Feed toegevoegd
 Name[nn]=Kanal lagd til
 Name[pl]=Kanał dodany
@@ -51,7 +54,7 @@
 Comment=A new feed was remotely added to Akregator
 Comment[af]='n Nuwe stroom was vanaf 'n afgeleë ligging by Akregator bygevoeg.
 Comment[bg]=Отдалечено е добавена нова новина към Akregator
-Comment[ca]=S'ha afegit remotament un enllaç a Akregator
+Comment[ca]=S'ha afegit remotament un enllaç a l'Akregator
 Comment[cs]=Byl přidán nový kanál do Akregatoru
 Comment[da]=En ny kilde blev tilføjet eksternt til Akregator
 Comment[de]=Eine neue Nachrichtenquelle wurde von extern zu Akregator hinzugefügt
@@ -68,11 +71,13 @@
 Comment[is]=Nýjum straum var bætt við Akregator
 Comment[it]=Una nuova fonte è stata aggiunta ad Akregator da remoto
 Comment[ja]=新規フィードがリモートで Akregator に追加されました
+Comment[kk]=Akregator-ға қашықтан жаңа қор қосылды
 Comment[km]=បាន​បន្ថែម​មតិព័ត៌មាន​ថ្មី​មួយ​ពី​ចម្ងាយ​ទៅ Akregator
 Comment[lt]=Naujas nutolęs naujienų kanalas buvo įdėtas į Akregator
 Comment[ms]=Suapan baru ditambah dari jauh kepada Akregator
 Comment[nb]=En ny kanal ble lagt til Akgregator utenfra 
 Comment[nds]=En nieg Stroom wöör Akregator vun buten toföögt
+Comment[ne]=एक्रिगेटरमा एउटा नयाँ फिड टाढाबाट थपिएको थियो
 Comment[nl]=Er was extern een nieuwe feed toegevoegd aan Akregator
 Comment[nn]=Ein ny kanal vart lagd til Akregator
 Comment[pl]=Nowy kanał został zdalnie dodany do Akregatora
@@ -95,6 +100,8 @@
 [new_articles]
 Name=New Articles
 Name[af]=Nuwe Artikels
+Name[ar]=المقالات الجديدة
+Name[be]=Новыя артыкулы
 Name[bg]=Нови статии
 Name[br]=Pennadoù nevez
 Name[ca]=Nous articles
@@ -115,11 +122,14 @@
 Name[is]=Nýjar greinar
 Name[it]=Nuovi articoli
 Name[ja]=新規記事
+Name[kk]=Жаңа мақалалар
 Name[km]=អត្ថបទ​ថ្មី
 Name[lt]=Nauji straipsniai
+Name[mk]=Нови написи
 Name[ms]=Artikel Baru
 Name[nb]=Nye artikler
 Name[nds]=Niege Artikeln
+Name[ne]=नयाँ लेख
 Name[nl]=Nieuwe artikelen
 Name[nn]=Nye artiklar
 Name[pl]=Nowe artykuły
@@ -140,6 +150,7 @@
 Name[zh_TW]=新文章
 Comment=New articles were fetched
 Comment[af]=Nuwe artikels was afgelaai
+Comment[ar]=تمّ جلب المقالات الجديدة
 Comment[bg]=Пристигнали са нови статии
 Comment[ca]=S'han obtingut nous articles
 Comment[cs]=Byly staženy nové články
@@ -159,11 +170,14 @@
 Comment[is]=Nýjar greinar voru sóttar
 Comment[it]=I nuovi articoli sono stati recuperati
 Comment[ja]=新規記事を取得しました
+Comment[kk]=Жаңа мақалалар қабылданды
 Comment[km]=បាន​ប្រមូល​អត្ថបទ​ថ្មី
 Comment[lt]=Nauji straipsniai parsiųsti
+Comment[mk]=Беа земени нови написи
 Comment[ms]=Artikel baru telah dikutip
 Comment[nb]=Nye artikler ble hentet
 Comment[nds]=Niege Artikeln wöörn haalt
+Comment[ne]=नयाँ लेख तानिएका थिय
 Comment[nl]=Nieuw artikelen zijn opgehaald
 Comment[nn]=Nye artiklar vart henta
 Comment[pl]=Pobrano nowe artykuły
Index: akregator/src/akregator_view.cpp
===================================================================
--- akregator/src/akregator_view.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ akregator/src/akregator_view.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -367,20 +367,9 @@
     }
 
     QTimer::singleShot(1000, this, SLOT(slotDeleteExpiredArticles()) );
-    QTimer::singleShot(0, this, SLOT(delayedInit()));
+    m_part->mergePart(m_articleViewer);
 }
 
-void View::delayedInit()
-{
-    // HACK, FIXME:
-    // for some reason, m_part->factory() is NULL at startup of kontact,
-    // and thus the article viewer GUI can't be merged when creating the view.
-    // Even the delayed init didn't help. Well, we retry every half a second until
-    // it works. This is kind of creative, but a dirty hack nevertheless.
-    if ( !m_part->mergePart(m_articleViewer) )
-        QTimer::singleShot(500, this, SLOT(delayedInit()));
-}
-
 void View::slotSettingsChanged()
 {
     // if tagging is hidden, show only feed list
@@ -695,8 +684,6 @@
     emit setProgress(f->progress());
     emit setStatusBarText(f->statusText());
 
-    m_part->mergePart(m_articleViewer);
-
     if (f->part() == m_part)
         m_part->mergePart(m_articleViewer);
     else
Index: akregator/src/article.cpp
===================================================================
--- akregator/src/article.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ akregator/src/article.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -57,12 +57,18 @@
 
     enum Status {Deleted=0x01, Trash=0x02, New=0x04, Read=0x08, Keep=0x10};
 
-    int status;
     QString guid;
-    uint hash;
     Backend::FeedStorage* archive;
-    QDateTime pubDate;
     Feed* feed;
+
+    // the variables below are initialized to null values in the Article constructor 
+    // and then loaded on demand instead.
+    //
+    // to read their values, you should therefore use the accessor methods of the Article
+    // hash(), pubDate(), statusBits() rather than accessing them directly.
+    uint hash;
+    QDateTime pubDate;  
+    int status;
 };
 
 Article::Article() : d(new Private)
@@ -71,18 +77,20 @@
     d->status = 0;
     d->feed = 0;
     d->archive = 0;
-    d->pubDate.setTime_t(1);
-
 }
 
 Article::Article(const QString& guid, Feed* feed) : d(new Private)
 {
+    // this constructor should be as cheap as possible, so avoid calls to 
+    // read information from the archive in here if possible
+    //
+    // d->hash, d->pubDate and d->status are loaded on-demand by
+    // the hash(), pubDate() and statusBits() methods respectively
+
     d->feed = feed;
     d->guid = guid;
     d->archive = Backend::Storage::getInstance()->archiveFor(feed->xmlUrl());
-    d->status = d->archive->status(d->guid);
-    d->pubDate.setTime_t(d->archive->pubDate(d->guid));
-    d->hash = d->archive->hash(d->guid);
+    d->status = 0;
 }
 
 void Article::initialize(RSS::Article article, Backend::FeedStorage* archive)
@@ -106,7 +114,7 @@
         else
         { // article is not deleted, let's add it to the archive
         
-            d->archive->setHash(d->guid, d->hash);
+            d->archive->setHash(d->guid, hash() );
             QString title = article.title().isEmpty() ? buildTitle(article.description()) :  article.title();
             d->archive->setTitle(d->guid, title);
             d->archive->setDescription(d->guid, article.description());
@@ -158,10 +166,10 @@
     {
         // always update comments count, as it's not used for hash calculation
         d->archive->setComments(d->guid, article.comments());
-        if (d->hash != d->archive->hash(d->guid)) //article is in archive, was it modified?
+        if ( hash() != d->archive->hash(d->guid)) //article is in archive, was it modified?
         { // if yes, update
             d->pubDate.setTime_t(d->archive->pubDate(d->guid));
-            d->archive->setHash(d->guid, d->hash);
+            d->archive->setHash(d->guid, hash() );
             QString title = article.title().isEmpty() ? buildTitle(article.description()) :  article.title();
             d->archive->setTitle(d->guid, title);
             d->archive->setDescription(d->guid, article.description());
@@ -192,7 +200,7 @@
 
 void Article::offsetPubDate(int secs)
 {
-   d->pubDate = d->pubDate.addSecs(secs);
+   d->pubDate = pubDate().addSecs(secs);
    d->archive->setPubDate(d->guid, d->pubDate.toTime_t());
 
 }
@@ -213,7 +221,7 @@
 
 bool Article::isDeleted() const
 {
-    return (d->status & Private::Deleted) != 0;
+    return (statusBits() & Private::Deleted) != 0;
 }
 
 Article::Article(const Article &other) : d(new Private)
@@ -269,12 +277,23 @@
     return d->guid == other.guid();
 }
 
+int Article::statusBits() const
+{
+    // delayed loading of status information from archive
+    if ( d->status == 0 ) 
+    {
+        d->status = d->archive->status(d->guid);
+    }
+
+    return d->status;
+}
+
 int Article::status() const
 {
-    if ((d->status & Private::Read) != 0)
+    if ((statusBits() & Private::Read) != 0)
         return Read;
 
-    if ((d->status & Private::New) != 0)
+    if ((statusBits() & Private::New) != 0)
         return New;
     else
         return Unread;
@@ -282,6 +301,8 @@
 
 void Article::setStatus(int stat)
 {
+    // use status() rather than statusBits() here to filter out status flags that we are not
+    // interested in
     int oldStatus = status();
 
     if (oldStatus != stat)
@@ -289,13 +310,13 @@
         switch (stat)
         {
             case Read:
-                d->status = (d->status | Private::Read) & ~Private::New;
+                d->status = ( d->status | Private::Read) & ~Private::New;
                 break;
             case Unread:
-                d->status = (d->status & ~Private::Read) & ~Private::New;
+                d->status = ( d->status & ~Private::Read) & ~Private::New;
                 break;
             case New:
-                d->status = (d->status | Private::New) & ~Private::Read;
+                d->status = ( d->status | Private::New) & ~Private::Read;
                 break;
         }
         d->archive->setStatus(d->guid, d->status);
@@ -354,12 +375,18 @@
 
 uint Article::hash() const
 {
+    // delayed loading of hash from archive
+    if ( d->hash == 0 )
+    {
+        d->hash = d->archive->hash(d->guid);
+    }
+
     return d->hash;
 }
 
 bool Article::keep() const
 {
-    return (d->status & Private::Keep) != 0;
+    return ( statusBits() & Private::Keep) != 0;
 }
 
 RSS::Enclosure Article::enclosure() const
@@ -376,7 +403,7 @@
 
 void Article::setKeep(bool keep)
 {
-    d->status = keep ? (d->status | Private::Keep) : (d->status & ~Private::Keep);
+    d->status = keep ? ( statusBits() | Private::Keep) : ( statusBits() & ~Private::Keep);
     d->archive->setStatus(d->guid, d->status);
     if (d->feed)
         d->feed->setArticleChanged(*this);
@@ -411,6 +438,12 @@
 
 const QDateTime& Article::pubDate() const
 {
+    // delayed loading of publication date information from archive
+    if ( d->pubDate.isNull() )
+    {
+        d->pubDate.setTime_t(d->archive->pubDate(d->guid));
+    }
+
     return d->pubDate;
 }
 
Index: kmobile/libkmobile.desktop
===================================================================
--- kmobile/libkmobile.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kmobile/libkmobile.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -24,11 +24,13 @@
 Name[is]=Hrár KDE vélbúnaðarrekill fyrir farsíma og lófatölvur
 Name[it]=KDE driver hardware di basso livello per dispositivi portatili
 Name[ja]=KDE モバイル機器低レベルハードウェアドライバ
+Name[kk]=KDE-нің қалта құрылғы жабдықтың төмен деңгейлі драйвері
 Name[km]=កម្មវិធី​បញ្ជា​ផ្នែករឹង​កម្រិត​ទាប​របស់​ឧបករណ៍​ចល័ត KDE
 Name[lt]=KDE mobiliųjų įrenginių žemo lygmens aparatinės įrangos tvarkyklė
 Name[ms]=Pemacu Perkakasan Tahap Rendah Peranti Mudah Alih KDE 
 Name[nb]=KDE lavnivå maskinvaredriver for mobile enheter
 Name[nds]=Sietstoop-Driever för Mobilreedschappen
+Name[ne]=केडीई मोबाइल यन्त्रको न्यूनस्तर हार्डवेयर ड्राइभर
 Name[nl]=Hardware-stuurprogramma voor mobiele apparaten
 Name[nn]=Lågnivå maskinvaredrivar for mobileiningar i KDE
 Name[pl]=Niskopoziomowy sterownik sprzętu urządzenia przenośnego dla KDE
Index: kmobile/devices/gnokii/libkmobile_gnokii.desktop
===================================================================
--- kmobile/devices/gnokii/libkmobile_gnokii.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kmobile/devices/gnokii/libkmobile_gnokii.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -2,6 +2,7 @@
 Encoding=UTF-8
 Name=Mobile Phone or Organizer (gnokii)
 Name[af]=Selfoon of Digitale Dagboek (gnokii)
+Name[ar]=الهاتف النقّال أو المنظم (gnokii)
 Name[be]=Мабільны тэлефон ці арганізатар (gnokii)
 Name[bg]=Мобилни телефони или организатори (gnokii)
 Name[bs]=Mobilni telefon ili organizer (gnokii)
@@ -26,11 +27,13 @@
 Name[is]=Farsími eða lófatölva (gnokii)
 Name[it]=Telefono cellulare o organizer (gnokii)
 Name[ja]=携帯電話またはスケジュール管理 (gnokii)
+Name[kk]=Қалта телефон не Ұйымдастырғыш (gnokii)
 Name[km]=កម្មវិធី​រៀបចំ​ទូរស័ព្ទ​ចល័ត (gnokii)
 Name[lt]=Mobilus telefonas ar asmeninės info tvarkyklė (gnokii)
 Name[ms]=Telefon Bimbit atau Penyusun  (gnokii)
 Name[nb]=Mobiltelefon eller PDA (gnokii)
 Name[nds]=Mobiltelefoon oder Handreekner (gnokii)
+Name[ne]=मोबाइल फोन वा आयोजक (जिनोकी)
 Name[nl]=Mobiele telefoon of Organizer (gnokii)
 Name[nn]=Mobiltelefon eller organisator (gnokii)
 Name[pl]=Telefon komórkowy lub organizer (gnokii)
@@ -51,9 +54,9 @@
 Name[zh_TW]=行動電話或數位助理(gnokii)
 Comment=This driver supports many NOKIA and other mobile phones via the gnokii library
 Comment[af]=Hierdie drywer ondersteun baie Nokia en ander selfone d.m.v. die gnokii biblioteek
-Comment[bg]=Драйвер за поддръжка на мобилни телефони, предимно Нокия, чрез библиотеката gnokii
+Comment[bg]=Драйвер за поддръжка на мобилни телефони, предимно Нокиа, чрез библиотеката gnokii
 Comment[bs]=Ovaj drajver podržava mnoge NOKIA i druge mobilne telefone putem gnokii biblioteke
-Comment[ca]=Aquest controlador acepta molts NOKIA i d'altres telèfons mòbils mitjançant la biblioteca «gnokii»
+Comment[ca]=Aquest controlador accepta molts NOKIA i d'altres telèfons mòbils mitjançant la biblioteca «gnokii»
 Comment[cs]=Tento ovladač podporuje mnoho mobilních telefonů NOKIA a dalších pomocí knihovny gnokii
 Comment[cy]=Cynhala'r gyrrydd yma lawer o ffoniau NOKIA a ffoniau symudol eraill drwy'r rhaglengell gnokii
 Comment[da]=Denne driver understøtter mange NOKIA og andre mobiltelefoner via gnokii-biblioteket
@@ -71,12 +74,14 @@
 Comment[hu]=Ez a meghajtó mobiltelefonok (elsősorban Nokia gyártmányúak) kezelését teszi lehetővé a Gnokii programkönyvtáron keresztül
 Comment[is]=Þessi rekill styður marga farsíma frá NOKIA og fleiri gegnum gnokii aðgerðasafnið
 Comment[it]=Questo driver supporta molti NOKIA e altri telefoni cellulari tramite la libreria gnokii
-Comment[ja]=本ドライバは gnokii ライブラリ経由で多種の NOKIA 並びに他社製の携帯電話をサポートします
+Comment[ja]=このドライバは gnokii ライブラリ経由で多種の NOKIA ならびに他社製の携帯電話をサポートします
+Comment[kk]=Бұл көп NOKIA мен басқа қалта құрылғыларды, gnokii жиыны арқылы, қамтитын драйвер
 Comment[km]=កម្មវិធី​បញ្ជា​នេះ​គាំទ្រ​ប្រភេទ​ទូរស័ព្ទ​ណូគៀ និង ទូរស័ព្ទ​ផ្សេងៗ​ទៀត​ជាច្រើន​តាម​រយៈ​បណ្ណាល័យ gnokii
 Comment[lt]=Ši tvarkyklė palaiko daugelį NOKIA ir kitų telefonų pasinaudodama gnokii biblioteka
 Comment[ms]=Pemacu ini menyokong banyak NOKIA dan telefon bimbit lain melalui pustaka gnokii 
 Comment[nb]=Denne driveren støtter mange NOKIA og andre mobiltelefoner via gnokii-biblioteket
 Comment[nds]=Disse Driever ünnerstütt vele Nokia- un anner Mobiltelefonen över de gnokii-Bibliotheek
+Comment[ne]=यो ड्राइभरले जिनोकी लाइब्रेरीबाट धेरै नोकिया र अन्य मोबाइल फोन समर्थन गर्छ
 Comment[nl]=Dit stuurprogramma biedt ondersteuning voor veel Nokia- en andere mobiele telefoons via de gnokii-bibliotheek
 Comment[nn]=Denne drivaren støttar mange NOKIA og andre mobiltelefonar via gnokii-biblioteket
 Comment[pl]=Ten sterownik obsługuje wiele telefonów komórkowychNokia i innych za pomocą biblioteki gnokii
Index: kmobile/devices/skeleton/libkmobile_skeleton.desktop
===================================================================
--- kmobile/devices/skeleton/libkmobile_skeleton.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kmobile/devices/skeleton/libkmobile_skeleton.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -25,11 +25,13 @@
 Name[is]=Grunntæki
 Name[it]=Dispositivo skeleton
 Name[ja]=スケルトンデバイス
+Name[kk]=Қаңқалы құрылғы
 Name[km]=ឧបករណ៍​គ្រោង
 Name[lt]=Įrenginio skeletas
 Name[ms]=Peranti Rangka
 Name[nb]=Ramme-enhet
 Name[nds]=Skeleton-Reedschap
+Name[ne]=ढाँचा यन्त्र
 Name[nl]=Voorbeeldapparaat
 Name[nn]=Skjeletteining
 Name[pl]=Urządzenie szkieletowe
@@ -72,11 +74,13 @@
 Comment[is]=Grunn farsími eða lófatölva
 Comment[it]=Ddispositivo portatile skeleton
 Comment[ja]=モバイルスケルトンデバイス
+Comment[kk]=Қалта қаңқалы құрылғы
 Comment[km]=ឧបករណ៍​គ្រោង​ចល័ត
 Comment[lt]=Mobilaus įrenginio skeletas
 Comment[ms]=Peranti Rangka Mudah Alih
 Comment[nb]=Mobil ramme-enhet
 Comment[nds]=Mobil Skeleton-Reedschap
+Comment[ne]=मोबाइल ढाँचा यन्त्र
 Comment[nl]=Mobiel voorbeeldapparaat
 Comment[nn]=Mobil skjeletteining
 Comment[pl]=Szkieletowe urządzenie przenośne
Index: kmobile/devices/gammu/libkmobile_gammu.desktop
===================================================================
--- kmobile/devices/gammu/libkmobile_gammu.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kmobile/devices/gammu/libkmobile_gammu.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -2,6 +2,7 @@
 Encoding=UTF-8
 Name=Mobile Phone or Organizer (gammu)
 Name[af]=Selfoon of Digitale Dagboek (gammu)
+Name[ar]=الهاتف النقّال أو المنظم (gammu)
 Name[be]=Мабільны тэлефон ці арганізатар (gammu)
 Name[bg]=Мобилни телефони или организатори (gammu)
 Name[bs]=Mobilni telefon ili organizer (gammu)
@@ -26,11 +27,13 @@
 Name[is]=Farsími eða lófatölva (gammu)
 Name[it]=Organizer o telefono cellulare (gammu)
 Name[ja]=携帯電話またはスケジュール管理 (gammu)
+Name[kk]=Қалта телефон не Ұйымдастырғыш (gammu)
 Name[km]=កម្មវិធី​រៀបចំ​ទូរស័ព្ទ​ចល័ត (gammu)
 Name[lt]=Mobilus telefonas ar asmeninės info tvarkyklė (gammu)
 Name[ms]=Telefon Bimbit atau  Penyusun (gammu)
 Name[nb]=Mobiltelefon eller PDA (gammu)
 Name[nds]=Mobiltelefoon oder Handreekner (gammu)
+Name[ne]=मोबाइल फोन वा आयोजक (गामु)
 Name[nl]=Mobiele telefoon of Organizer (gammu)
 Name[nn]=Mobiltelefon eller organisator (gammu)
 Name[pl]=Telefon komórkowy lub organizer (gammu)
@@ -51,7 +54,7 @@
 Name[zh_TW]=行動電話或數位助理(gammu)
 Comment=This driver supports many NOKIA and other mobile phones via the gammu library
 Comment[af]=Hierdie drywer ondersteun baie Nokia en ander selfone d.m.v. die gammu biblioteek
-Comment[bg]=Драйвер за поддръжка на мобилни телефони, предимно Нокия, чрез библиотеката gammu
+Comment[bg]=Драйвер за поддръжка на мобилни телефони, предимно Нокиа, чрез библиотеката gammu
 Comment[bs]=Ovaj drajver podržava mnoge NOKIA i druge mobilne telefone putem gammu biblioteke
 Comment[ca]=Aquest controlador accepta molts NOKIA i d'altres telèfons mòbils mitjançant la biblioteca «gammu»
 Comment[cs]=Tento ovladač podporuje mnoho mobilních telefonů NOKIA a dalších pomocí knihovny gammu
@@ -71,12 +74,14 @@
 Comment[hu]=Ez a meghajtó mobiltelefonok (elsősorban Nokia gyártmányúak) kezelését teszi lehetővé a Gammu programkönyvtáron keresztül
 Comment[is]=Þessi rekill styður marga NOKIA og aðra farsíma gegnum gammu aðgerðasafnið
 Comment[it]=Questo driver supporta molti NOKIA e altri telefoni cellulari tramite la libreria gammu.
-Comment[ja]=本ドライバは gammu ライブラリ経由で多種の NOKIA 並びに他社製の携帯電話をサポートします
+Comment[ja]=このドライバは gammu ライブラリ経由で多種の NOKIA ならびに他社製の携帯電話をサポートします
+Comment[kk]=Бұл көп NOKIA мен басқа қалта құрылғыларды, gammu жиыны арқылы, қамтитын драйвер
 Comment[km]=កម្មវិធី​បញ្ជា​នេះ​គាំទ្រ​ប្រភេទ​ទូរស័ព្ទ​ណូគៀ និង ទូរស័ព្ទ​ផ្សេងៗ​ទៀត​ជាច្រើន​តាម​រយៈ​បណ្ណាល័យ gammu
 Comment[lt]=Ši tvarkyklė palaiko daugelį NOKIA ir kitų telefonų pasinaudodama gammu biblioteka
 Comment[ms]=Pemacu ini menyokong banyak NOKIA dan telefon bimbit lain melalui pustaka gammu
 Comment[nb]=Denne driveren støtter mange NOKIA og andre mobiltelefoner via gammu-biblioteket
 Comment[nds]=Disse Driever ünnerstütt vele Nokia- un anner Mobiltelefonen över de gammu-Bibliotheek
+Comment[ne]=यो ड्राइभरले गामु लाइब्रेरीबाट धेरै नोकिया र अन्य मोबाइल फोन समर्थन गर्छ
 Comment[nl]=Dit stuurprogramma biedt ondersteuning voor veel Nokia- en andere mobiele telefoons via de gammu-bibliotheek
 Comment[nn]=Denne drivaren støttar mange NOKIA og andre mobiltelefonar via gammu-biblioteket
 Comment[pl]=Ten sterownik obsługuje wiele telefonów komórkowychNokia i innych za pomocą biblioteki gammu
Index: kmobile/devices/digicam/libkmobile_digicam.desktop
===================================================================
--- kmobile/devices/digicam/libkmobile_digicam.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kmobile/devices/digicam/libkmobile_digicam.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -26,11 +26,14 @@
 Name[is]=Stafræn myndavél
 Name[it]=Macchina fotografica digitale
 Name[ja]=デジタルカメラ
+Name[kk]=Цифрлық камера
 Name[km]=ម៉ាស៊ីន​ថត​រូប​ឌីជីថល
 Name[lt]=Skaitmeninė kamera
+Name[mk]=Дигитална камера
 Name[ms]=Kamera Digital 
 Name[nb]=Digitalkamera
 Name[nds]=Digitaalkamera
+Name[ne]=डिजिटल क्यामेरा
 Name[nl]=Digitale camera
 Name[nn]=Digitalt kamera
 Name[pa]=ਡਿਜ਼ੀਟਲ ਕੈਮਰਾ
@@ -74,12 +77,15 @@
 Comment[hu]=Ez a meghajtó különféle digitális fényképezőgépek kezelését teszi lehetővé
 Comment[is]=Þessi rekill styður margar stafrænar myndavélar
 Comment[it]=Questo driver supporta molte fotocamere digitali
-Comment[ja]=本ドライバは多種のデジタルカメラをサポートします
+Comment[ja]=このドライバは多種のデジタルカメラをサポートします
+Comment[kk]=Бұл бірспыра цифрлық камераларды қамтитын драйвер
 Comment[km]=កម្មវិធី​បញ្ជា​នេះ​គាំទ្រ​ម៉ាស៊ីន​ថត​រូប​ឌីជីថល​ជាច្រើន
 Comment[lt]=Ši tvarkyklė palaiko daugelį skaitmeninių kamerų
+Comment[mk]=Овој управувач поддржува многу дигитални камери
 Comment[ms]=Pemacu ini menyokong banyak kamera digital 
 Comment[nb]=Denne driveren støtter mange digitalkameraer
 Comment[nds]=Ein Driever, de vele Digitaalkameras ünnerstütt
+Comment[ne]=यो ड्राइभरले धेरै डिजिटल क्यामेरा समर्थन गर्छ
 Comment[nl]=Dit stuurprogramma biedt ondersteuning voor veel camera's
 Comment[nn]=Denne drivaren støttar mange digitale kamera
 Comment[pl]=Ten sterownik obsługuje wiele aparatów cyfrowych
Index: kmobile/kmobile.desktop
===================================================================
--- kmobile/kmobile.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kmobile/kmobile.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -9,6 +9,7 @@
 Name=KMobile
 Name[cy]=KSymudol
 Name[hi]=के-मोबाइल
+Name[ne]=केडीई मोबाइल
 Name[nn]=KMobil
 Name[sv]=Kmobile
 Name[ta]=கேநடமாடும் தொலைபேசி
@@ -16,7 +17,8 @@
 
 GenericName=Manage Mobile Devices
 GenericName[af]=Bestuur draagbare toestelle
-GenericName[be]=Кіраваньне мабільнымі прыладамі
+GenericName[ar]=تسيير الأجهزة النقّالة
+GenericName[be]=Кіраванне мабільнымі прыладамі
 GenericName[bg]=Мобилни устройства
 GenericName[br]=Merañ an trobarhelloù lem-laka
 GenericName[bs]=Upravljajte mobilnim uređajima
@@ -40,11 +42,14 @@
 GenericName[is]=Sýsla með lófatölvur og farsíma
 GenericName[it]=Gestisce dispositivi portatili
 GenericName[ja]=モバイル機器の管理
+GenericName[kk]=Қалта құрылғыларды басқару
 GenericName[km]=គ្រប់គ្រង​ឧបករណ៍​ចល័ត
 GenericName[lt]=Mobiliųjų įrenginių tvarkymas
+GenericName[mk]=Менаџирање мобилни уреди
 GenericName[ms]=Menguruskan Peranti Mudah Alih
 GenericName[nb]=Håndtere mobile enheter
 GenericName[nds]=Mobilreedschappen plegen
+GenericName[ne]=मोबाइल यन्त्र व्यवस्थापन गर्नुहोस्
 GenericName[nl]=Mobiele apparaten beheren
 GenericName[nn]=Handtera mobileiningar
 GenericName[pl]=Zarządzanie urządzeniami przenośnymi
@@ -67,7 +72,7 @@
 
 Comment=A KDE Mobile Devices Manager
 Comment[af]='n KDE draagbare toestel bestuurder
-Comment[be]=Кіраваньне мабільнымі прыладамі KDE
+Comment[be]=Кіраванне мабільнымі прыладамі KDE
 Comment[bg]=Управление на мобилни устройства
 Comment[bs]=KDE upravitelj mobilnim uređajima
 Comment[ca]=Un gestor de KDE per a dispositius mòbils
@@ -90,11 +95,14 @@
 Comment[is]=KDE stjórnforrit fyrir lófatölvur og farsíma
 Comment[it]=Un gestore di dispositivi portatili di KDE
 Comment[ja]=KDE モバイル機器マネージャ
+Comment[kk]=KDE-нің қалта құрылғылар менеджері
 Comment[km]=កម្មវិធី​គ្រប់គ្រង​ឧបករណ៍​ចល័ត KDE
 Comment[lt]=KDE mobiliųjų įrenginių tvarkyklė
+Comment[mk]=Менаџер на мобилни уреди во KDE
 Comment[ms]=Pengurus Peranti Mudah Alih   KDE 
 Comment[nb]=En KDE-håndterer for mobile enheter
 Comment[nds]=En Pleger för Mobilreedschappen
+Comment[ne]=केडीई मोबाइल यन्त्र प्रबन्धक
 Comment[nl]=Beheer van mobiele apparaten in KDE
 Comment[nn]=Ein einingshandterar for mobiltelefon i KDE
 Comment[pl]=Program obsługujący urządzenia przenośne dla KDE
Index: kmobile/kioslave/mimetypes/mobile_addressbook.desktop
===================================================================
--- kmobile/kioslave/mimetypes/mobile_addressbook.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kmobile/kioslave/mimetypes/mobile_addressbook.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -2,6 +2,7 @@
 Encoding=UTF-8
 Comment=Contacts in Mobile Device
 Comment[af]=Kontakte op die draagbare toestel
+Comment[ar]=المراسلون في الجهاز النقّال
 Comment[be]=Кантакты ў мабільнай прыладзе
 Comment[bg]=Контакти в мобилни устройства
 Comment[bs]=Kontakti u mobilnom uređaju
@@ -25,11 +26,14 @@
 Comment[is]=Tengiliðir í farsíma eða lófatölvu
 Comment[it]=Contatti nel dispositivo portatile
 Comment[ja]=モバイル機器内の連絡先
+Comment[kk]=Қалта құрылғыдағы контакттар
 Comment[km]=ទំនាក់​ទំនង​ក្នុង​ឧបករណ៍​ចល័ត
 Comment[lt]=Kontaktai mobiliajame įrenginyje
+Comment[mk]=Контакти од мобилен уред
 Comment[ms]=Orang hubungan di dalam Peranti Mudah Alih
 Comment[nb]=Kontaktliste i mobil enhet
 Comment[nds]=Kontakten op de Mobilreedschap
+Comment[ne]=मोबाइल यन्त्रमा सम्पर्क गर्छ
 Comment[nl]=Contactpersonen in mobiel apparaat
 Comment[nn]=Kontaktar i mobileiningar
 Comment[pl]=Wizytówki w urządzeniu przenośnym
Index: kmobile/kioslave/mimetypes/mobile_notes.desktop
===================================================================
--- kmobile/kioslave/mimetypes/mobile_notes.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kmobile/kioslave/mimetypes/mobile_notes.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -25,11 +25,14 @@
 Comment[is]=Áminningar í farsíma eða lófatölvu
 Comment[it]=Note nel dispositivo portatile
 Comment[ja]=モバイル機器内のメモ
+Comment[kk]=Қалта құрылғыдағы жазбалар
 Comment[km]=ចំណាំ​ក្នុង​ឧបករណ៍​ចល័ត
 Comment[lt]=Užrašai mobiliajame įrenginyje
+Comment[mk]=Белешки од мобилен уред
 Comment[ms]=Nota dalam Peranti Mudah Alih
 Comment[nb]=Notater i mobil enhet
 Comment[nds]=Notizen op Mobilreedschap
+Comment[ne]=मोबाइल यन्त्र भित्रका द्रष्टव्य
 Comment[nl]=Notities in mobiel apparaat
 Comment[nn]=Notat i mobileiningar
 Comment[pl]=Notatki w urządzeniu przenośnym
Index: kmobile/kioslave/mimetypes/mobile_calendar.desktop
===================================================================
--- kmobile/kioslave/mimetypes/mobile_calendar.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kmobile/kioslave/mimetypes/mobile_calendar.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -25,11 +25,14 @@
 Comment[is]=Dagatal í farsíma eða lófatölvu
 Comment[it]=Calendari nel dispositivo portatile
 Comment[ja]=モバイル機器内のカレンダー
+Comment[kk]=Қалта құрылғыдағы күнтізбе
 Comment[km]=ប្រតិទិន​ក្នុង​ឧបករណ៍​ចល័ត
 Comment[lt]=Kalendorius mobiliajame įrenginyje
+Comment[mk]=Календар од мобилен уред
 Comment[ms]=Kalendar dalam Peranti Mudah Alih
 Comment[nb]=Kalender i mobil enhet
 Comment[nds]=Kalenner op Mobilreedschap
+Comment[ne]=मोबाइल यन्त्रको क्यालेन्डर
 Comment[nl]=Agenda in mobiel apparaat
 Comment[nn]=Kalender i mobileiningar
 Comment[pl]=Kalendarz w urządzeniu przenośnym
@@ -46,7 +49,7 @@
 Comment[tg]=Тақвим дар дастгоҳи мобилӣ
 Comment[tr]=Cep Telefonu Takvimi
 Comment[uk]=Календар у мобільному пристрої
-Comment[zh_CN]=移动电话中的日历
+Comment[zh_CN]=移动设备中的日历
 Comment[zh_TW]=行動裝置中的行事曆
 Icon=korganizer
 Type=MimeType
Index: kmobile/kioslave/mimetypes/mobile_device.desktop
===================================================================
--- kmobile/kioslave/mimetypes/mobile_device.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kmobile/kioslave/mimetypes/mobile_device.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -2,6 +2,7 @@
 Encoding=UTF-8
 Comment=Mobile Device
 Comment[af]=Draagbare Toestel
+Comment[ar]=الجهاز النقّال
 Comment[be]=Мабільная прылада
 Comment[bg]=Мобилни устройства
 Comment[br]=Trobarzhell lem-laka
@@ -26,11 +27,14 @@
 Comment[is]=Farsími eða lófatölva
 Comment[it]=Dispositivo portatile
 Comment[ja]=モバイル機器
+Comment[kk]=Қалта құрылғысы
 Comment[km]=ឧបករណ៍​ចល័ត
 Comment[lt]=Mobilusis įrenginys
+Comment[mk]=Мобилен уред
 Comment[ms]=Peranti Mudah Alih
 Comment[nb]=Mobil enhet
 Comment[nds]=Mobilreedschap
+Comment[ne]=मोबाइल यन्त्र
 Comment[nl]=Mobiel apparaat
 Comment[nn]=Mobileining
 Comment[pa]=ਮੋਬਾਇਲ ਜੰਤਰ
Index: wizards/kolabkmailchanges.cpp
===================================================================
--- wizards/kolabkmailchanges.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ wizards/kolabkmailchanges.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -104,22 +104,50 @@
   c->value = "0"; // TODO: Fix the language
   changes.append( c );
 
-  CreateDisconnectedImapAccount *account =
-    new CreateDisconnectedImapAccount( i18n("Kolab Server") );
-
   QString email;
+  QString defaultDomain = KolabConfig::self()->server();
   const QString server = KolabConfig::self()->server();
   QString user = KolabConfig::self()->user();
   int pos = user.find( "@" );
   // with kolab the userid _is_ the full email
-  if ( pos > 0 )
+  if ( pos > 0 ) {
     // The user typed in a full email address. Assume it's correct
     email = user;
+    const QString h = user.mid( pos+1 );
+    if ( !h.isEmpty() )
+      // The user did type in a domain on the email address. Use that
+      defaultDomain = h;
+  }
   else
     // Construct the email address. And use it for the username also
     user = email = user+"@"+KolabConfig::self()->server();
 
+  if ( KolabConfig::self()->useOnlineForNonGroupware() ) {
+    c = new KConfigPropagator::ChangeConfig;
+    c->file = "kmailrc";
+    c->group = "IMAP Resource";
+    c->name = "ShowOnlyGroupwareFoldersForGroupwareAccount";
+    c->value = "true";
+    changes.append( c );
 
+    CreateOnlineImapAccount *account = new CreateOnlineImapAccount( i18n("Kolab Server Mail") );
+
+    account->setServer( server );
+    account->setUser( user );
+    account->setPassword( KolabConfig::self()->password() );
+    account->setRealName( KolabConfig::self()->realName() );
+    account->setEmail( email );
+    account->enableSieve( true );
+    account->enableSavePassword( KolabConfig::self()->savePassword() );
+    account->setEncryption( CreateImapAccount::SSL );
+    account->setDefaultDomain( defaultDomain );
+
+    changes.append( account );
+  }
+
+  CreateDisconnectedImapAccount *account =
+    new CreateDisconnectedImapAccount( i18n("Kolab Server") );
+
   account->setServer( server );
   account->setUser( user );
   account->setPassword( KolabConfig::self()->password() );
@@ -128,9 +156,11 @@
   account->enableSieve( true );
   account->setSieveVacationFileName( "kolab-vacation.siv" );
   account->enableSavePassword( KolabConfig::self()->savePassword() );
-  account->setEncryption( CreateDisconnectedImapAccount::SSL );
+  account->setEncryption( CreateImapAccount::SSL );
   account->setAuthenticationSend( CreateDisconnectedImapAccount::PLAIN );
   account->setSmtpPort( 465 );
+  account->setDefaultDomain( defaultDomain );
+  account->enableLocalSubscription( KolabConfig::self()->useOnlineForNonGroupware() );
 
   account->setCustomWriter( new KolabCustomWriter );
 
Index: wizards/kolabwizard.h
===================================================================
--- wizards/kolabwizard.h	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ wizards/kolabwizard.h	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -46,6 +46,7 @@
     KLineEdit *mPasswordEdit;
     QCheckBox *mSavePasswordCheck;
     QRadioButton *mKolab1, *mKolab2;
+    QCheckBox *mUseOnlineForNonGroupwareCheck;
 };
 
 #endif
Index: wizards/kolab.kcfg
===================================================================
--- wizards/kolab.kcfg	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ wizards/kolab.kcfg	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -26,6 +26,12 @@
       <label>Save Password</label>
       <default>false</default>
     </entry>
+
+    <entry name="UseOnlineForNonGroupware" type="Bool">
+      <label>Use Online IMAP account for non groupware folders</label>
+      <default>false</default>
+    </entry>
+
     <entry name="Kolab1Legacy" type="Bool">
       <label>Enable Kolab 1 Legacy settings</label>
       <default>false</default>
Index: wizards/groupwarewizard.desktop
===================================================================
--- wizards/groupwarewizard.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ wizards/groupwarewizard.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -16,16 +16,18 @@
 Name[fa]=جادوگر KDE Groupware
 Name[fi]=KDE Groupwaren ohjattu toiminto
 Name[fr]=Assistant KDE de travail collaboratif
-Name[ga]=Draoi Groupware KDE
+Name[ga]=Treoraí Groupware KDE
 Name[gl]=Asistente de Traballo en Grupo de KDE
 Name[hu]=KDE csoportmunka-varázsló
 Name[is]=KDE hópvinnukerfisálfur
 Name[it]=Assistente configurazione di KDE Groupware
 Name[ja]=KDE グループウェアウィザード
+Name[kk]=KDE бірікен жұмыс шебері
 Name[km]=អ្នក​ជំនួយការ​កម្មវិធី​ពហុ​អ្នក​ប្រើ​របស់ KDE
 Name[lt]=KDE Groupware vedlys
 Name[nb]=KDE gruppevareveiviser
 Name[nds]=Groupware-Hölper vun KDE
+Name[ne]=केडीई ग्रुपवेयर विजार्ड
 Name[nl]=KDE Groupware-wizard
 Name[nn]=KDE-vegvisar for gruppevare
 Name[pl]=Asystent KDE Groupware
Index: wizards/kmailchanges.h
===================================================================
--- wizards/kmailchanges.h	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ wizards/kmailchanges.h	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -25,7 +25,7 @@
 #include <kconfigpropagator.h>
 #include <kconfig.h>
 
-class CreateDisconnectedImapAccount : public KConfigPropagator::Change
+class CreateImapAccount : public KConfigPropagator::Change
 {
   public:
     class CustomWriter
@@ -35,11 +35,9 @@
         virtual void writeIds( int accountId, int transportId ) = 0;
     };
 
-    CreateDisconnectedImapAccount( const QString &accountName );
-    ~CreateDisconnectedImapAccount();
+    CreateImapAccount( const QString &accountName, const QString &title );
+    ~CreateImapAccount();
 
-    void apply();
-
     void setServer( const QString & );
     void setUser( const QString & );
     void setPassword( const QString & );
@@ -49,6 +47,8 @@
     */
     void setEmail( const QString & );
 
+    void setDefaultDomain( const QString & );
+
     void enableSieve( bool );
     void setSieveVacationFileName( const QString& );
     void enableSavePassword( bool );
@@ -67,12 +67,12 @@
     void setExistingTransportId( int );
 
     /**
-      Set custom writer. CreateDisconnectedImapAccount takes ownerhsip of the
+      Set custom writer. CreateImapAccount takes ownerhsip of the
       object.
     */
     void setCustomWriter( CustomWriter * );
 
-  private:
+  protected:
     QString mAccountName;
 
     QString mServer;
@@ -80,6 +80,7 @@
     QString mPassword;
     QString mRealName;
     QString mEmail;
+    QString mDefaultDomain;
 
     QString mSieveVacationFileName;
     bool mEnableSieve;
@@ -96,4 +97,23 @@
     CustomWriter *mCustomWriter;
 };
 
+class CreateDisconnectedImapAccount : public CreateImapAccount
+{
+  public:
+    CreateDisconnectedImapAccount( const QString &accountName );
+    virtual void apply();
+
+    void enableLocalSubscription( bool b ) { mLocalSubscription = b; }
+
+  private:
+    bool mLocalSubscription;
+};
+
+class CreateOnlineImapAccount : public CreateImapAccount
+{
+  public:
+    CreateOnlineImapAccount( const QString &accountName );
+    virtual void apply();
+};
+
 #endif
Index: wizards/kolabwizard.cpp
===================================================================
--- wizards/kolabwizard.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ wizards/kolabwizard.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -283,16 +283,24 @@
   topLayout->addWidget( mPasswordEdit, 3, 1 );
 
   mSavePasswordCheck = new QCheckBox( i18n("Save password"), page );
-  topLayout->addWidget( mSavePasswordCheck, 4, 1 );
+  topLayout->addMultiCellWidget( mSavePasswordCheck, 4, 4, 0, 1 );
 
   topLayout->setRowStretch( 4, 1 );
 
+  mUseOnlineForNonGroupwareCheck = new QCheckBox( i18n("Use an online IMAP account for non-groupware folders"), page );
+  topLayout->addMultiCellWidget( mUseOnlineForNonGroupwareCheck, 5, 5, 0, 1 );
+  topLayout->setRowStretch( 5, 1 );
+
   QButtonGroup *bg = new QHButtonGroup(i18n("Server Version"), page );
   QWhatsThis::add( bg, i18n("Choose the version of the Kolab Server you are using.") );
   mKolab1 = new QRadioButton( i18n ( "Kolab 1" ), bg );
   mKolab2 = new QRadioButton( i18n ( "Kolab 2" ), bg );
-  topLayout->addMultiCellWidget( bg, 5, 5, 0, 1 );
+  topLayout->addMultiCellWidget( bg, 6, 6, 0, 1 );
 
+  //DF: I don't see the point in showing the user those pages.
+  //They are very 'internal' and of no use to anyone other than developers.
+  //(This is even more true for the rules page. The changes page is sort of OK)
+
   setupRulesPage();
   setupChangesPage();
 
@@ -322,6 +330,7 @@
   mSavePasswordCheck->setChecked( KolabConfig::self()->savePassword() );
   mKolab1->setChecked( KolabConfig::self()->kolab1Legacy() );
   mKolab2->setChecked( !KolabConfig::self()->kolab1Legacy() );
+  mUseOnlineForNonGroupwareCheck->setChecked( KolabConfig::self()->useOnlineForNonGroupware() );
 }
 
 void KolabWizard::usrWriteConfig()
@@ -332,4 +341,5 @@
   KolabConfig::self()->setPassword( mPasswordEdit->text() );
   KolabConfig::self()->setSavePassword( mSavePasswordCheck->isChecked() );
   KolabConfig::self()->setKolab1Legacy( mKolab1->isChecked() );
+  KolabConfig::self()->setUseOnlineForNonGroupware( mUseOnlineForNonGroupwareCheck->isChecked() );
 }
Index: wizards/kmailchanges.cpp
===================================================================
--- wizards/kmailchanges.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ wizards/kmailchanges.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -31,8 +31,16 @@
 #include <kdebug.h>
 #include <kstringhandler.h>
 
-CreateDisconnectedImapAccount::CreateDisconnectedImapAccount( const QString &accountName )
-  : KConfigPropagator::Change( i18n("Create Disconnected IMAP Account for KMail") ),
+static const char* s_folderContentsType[] = {
+  I18N_NOOP( "Calendar" ),
+  I18N_NOOP( "Contacts" ),
+  I18N_NOOP( "Notes" ),
+  I18N_NOOP( "Tasks" ),
+  I18N_NOOP( "Journal" ) };
+
+
+CreateImapAccount::CreateImapAccount( const QString &accountName, const QString &title )
+  : KConfigPropagator::Change( title ),
     mAccountName( accountName ), mEnableSieve( false ), mEnableSavePassword( true ),
     mEncryption( None ), mAuthenticationSend( PLAIN ), mSmtpPort( 25 ),
     mExistingAccountId( -1 ), mExistingTransportId( -1 ),
@@ -40,90 +48,103 @@
 {
 }
 
-CreateDisconnectedImapAccount::~CreateDisconnectedImapAccount()
+CreateImapAccount::~CreateImapAccount()
 {
   delete mCustomWriter;
 }
 
-void CreateDisconnectedImapAccount::setServer( const QString &s )
+void CreateImapAccount::setServer( const QString &s )
 {
   mServer = s;
 }
 
-void CreateDisconnectedImapAccount::setUser( const QString &s )
+void CreateImapAccount::setUser( const QString &s )
 {
   mUser = s;
 }
 
-void CreateDisconnectedImapAccount::setPassword( const QString &s )
+void CreateImapAccount::setPassword( const QString &s )
 {
   mPassword = s;
 }
 
-void CreateDisconnectedImapAccount::setRealName( const QString &s )
+void CreateImapAccount::setRealName( const QString &s )
 {
   mRealName = s;
 }
 
-void CreateDisconnectedImapAccount::setEmail( const QString &s )
+void CreateImapAccount::setEmail( const QString &s )
 {
   mEmail = s;
 }
 
-void CreateDisconnectedImapAccount::enableSieve( bool b )
+void CreateImapAccount::enableSieve( bool b )
 {
   mEnableSieve = b;
 }
 
-void CreateDisconnectedImapAccount::setSieveVacationFileName( const QString& f )
+void CreateImapAccount::setSieveVacationFileName( const QString& f )
 {
   mSieveVacationFileName = f;
 }
 
-void CreateDisconnectedImapAccount::enableSavePassword( bool b )
+void CreateImapAccount::enableSavePassword( bool b )
 {
   mEnableSavePassword = b;
 }
 
-void CreateDisconnectedImapAccount::setEncryption(
-  CreateDisconnectedImapAccount::Encryption e )
+void CreateImapAccount::setEncryption(
+  CreateImapAccount::Encryption e )
 {
   mEncryption = e;
 }
 
-void CreateDisconnectedImapAccount::setAuthenticationSend(
-  CreateDisconnectedImapAccount::Authentication a )
+void CreateImapAccount::setDefaultDomain(const QString &d)
 {
+  mDefaultDomain = d;
+}
+
+void CreateImapAccount::setAuthenticationSend(
+  CreateImapAccount::Authentication a )
+{
   mAuthenticationSend = a;
 }
 
-void CreateDisconnectedImapAccount::setSmtpPort( int port )
+void CreateImapAccount::setSmtpPort( int port )
 {
   mSmtpPort = port;
 }
 
-void CreateDisconnectedImapAccount::setExistingAccountId( int id )
+void CreateImapAccount::setExistingAccountId( int id )
 {
   mExistingAccountId = id;
 }
 
-void CreateDisconnectedImapAccount::setExistingTransportId( int id )
+void CreateImapAccount::setExistingTransportId( int id )
 {
   mExistingTransportId = id;
 }
 
-void CreateDisconnectedImapAccount::setCustomWriter(
-  CreateDisconnectedImapAccount::CustomWriter *writer )
+void CreateImapAccount::setCustomWriter(
+  CreateImapAccount::CustomWriter *writer )
 {
   mCustomWriter = writer;
 }
 
+
+CreateDisconnectedImapAccount::CreateDisconnectedImapAccount(const QString & accountName) :
+    CreateImapAccount( accountName, i18n("Create Disconnected IMAP Account for KMail") ),
+    mLocalSubscription( false )
+{
+}
+
 void CreateDisconnectedImapAccount::apply()
 {
   if ( mEmail.isEmpty() ) mEmail = mUser + "@" + mServer;
 
   KConfig c( "kmailrc" );
   c.setGroup( "General" );
+  c.writeEntry( "Default domain", mDefaultDomain );
   int accountId;
   if ( mExistingAccountId < 0 ) {
     uint accCnt = c.readNumEntry( "accounts", 0 );
@@ -156,6 +177,9 @@
   c.writeEntry( "host", mServer );
   c.writeEntry( "port", "993" );
 
+  // in case the user wants to get rid of some groupware folders
+  c.writeEntry( "locally-subscribed-folders", mLocalSubscription );
+
   c.writeEntry( "login", mUser );
 
   c.writeEntry( "sieve-support", mEnableSieve ? "true" : "false" );
@@ -231,3 +255,58 @@
     mCustomWriter->writeIds( accountId, transportId );
   }
 }
+
+CreateOnlineImapAccount::CreateOnlineImapAccount(const QString & accountName) :
+    CreateImapAccount( accountName, i18n("Create Online IMAP Account for KMail") )
+{
+}
+
+void CreateOnlineImapAccount::apply()
+{
+  KConfig c( "kmailrc" );
+  c.setGroup( "General" );
+  uint accCnt = c.readNumEntry( "accounts", 0 );
+  c.writeEntry( "accounts", accCnt+1 );
+
+  c.setGroup( QString("Account %1").arg(accCnt+1) );
+  int uid = kapp->random();
+  c.writeEntry( "Folder", uid );
+  c.writeEntry( "Id", uid );
+  c.writeEntry( "Type", "imap" );
+  c.writeEntry( "auth", true );
+  c.writeEntry( "Name", mAccountName );
+  c.writeEntry( "host", mServer );
+
+  c.writeEntry( "login", mUser );
+
+  if ( mEnableSavePassword ) {
+    c.writeEntry( "pass", KStringHandler::obscure( mPassword ) );
+    c.writeEntry( "store-passwd", true );
+  }
+  c.writeEntry( "port", "993" );
+
+  if ( mEncryption == SSL ) {
+    c.writeEntry( "encryption", "SSL" );
+  } else if ( mEncryption == TLS ) {
+    c.writeEntry( "encryption", "TLS" );
+  }
+
+  if ( mAuthenticationSend == PLAIN ) {
+    c.writeEntry( "authtype", "PLAIN" );
+  } else if ( mAuthenticationSend == LOGIN ) {
+    c.writeEntry( "authtype", "LOGIN" );
+  }
+
+  c.writeEntry( "sieve-support", mEnableSieve );
+
+  // locally unsubscribe the default folders
+  c.writeEntry( "locally-subscribed-folders", true );
+  QString groupwareFolders = QString("/INBOX/%1/,/INBOX/%2/,/INBOX/%3/,/INBOX/%4/,/INBOX/%5/")
+      .arg( i18n(s_folderContentsType[0]) ).arg( i18n(s_folderContentsType[1]) )
+      .arg( i18n(s_folderContentsType[2]) ).arg( i18n(s_folderContentsType[3]) )
+      .arg( i18n(s_folderContentsType[4]) );
+  c.writeEntry( "locallyUnsubscribedFolders", groupwareFolders );
+
+  c.setGroup( QString("Folder-%1").arg( uid ) );
+  c.writeEntry( "isOpen", true );
+}
Index: kresources/egroupware/kabc_xmlrpc.desktop
===================================================================
--- kresources/egroupware/kabc_xmlrpc.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kresources/egroupware/kabc_xmlrpc.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -20,11 +20,13 @@
 Name[is]=eGroupware þjónn (gegnum XML-RPC)
 Name[it]=Server eGroupware (via XML-RPC)
 Name[ja]=eGroupware サーバ (XML-RPC 経由)
+Name[kk]=eGroupware сервері (XML-RPC арқылы)
 Name[km]=ម៉ាស៊ីន​បម្រើ eGroupware (តាម​រយៈ XML-RPC)
 Name[lt]=eGroupware serveris (per XML-RPC)
 Name[ms]=Pelayan eGroupware (melalui  XML-RPC)
 Name[nb]=eGroupware-tjener (via XML-RPPC)
 Name[nds]=eGroupware-Server (över XML-RPC)
+Name[ne]=(XML-RPC मार्फत) eGroupware सर्भर 
 Name[nl]=eGroupware-server (via XML-RPC)
 Name[nn]=eGroupware-tenar (via XML-RPC)
 Name[pl]=Serwer eGroupware (poprzez XML-RPC)
Index: kresources/egroupware/knotes_xmlrpc.desktop
===================================================================
--- kresources/egroupware/knotes_xmlrpc.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kresources/egroupware/knotes_xmlrpc.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -20,11 +20,13 @@
 Name[is]=eGroupware þjónn (gegnum XML-RPC)
 Name[it]=Server eGroupware (via XML-RPC)
 Name[ja]=eGroupware サーバ (XML-RPC 経由)
+Name[kk]=eGroupware сервері (XML-RPC арқылы)
 Name[km]=ម៉ាស៊ីន​បម្រើ eGroupware (តាម​រយៈ XML-RPC)
 Name[lt]=eGroupware serveris (per XML-RPC)
 Name[ms]=Pelayan eGroupware (melalui  XML-RPC)
 Name[nb]=eGroupware-tjener (via XML-RPPC)
 Name[nds]=eGroupware-Server (över XML-RPC)
+Name[ne]=(XML-RPC मार्फत) eGroupware सर्भर 
 Name[nl]=eGroupware-server (via XML-RPC)
 Name[nn]=eGroupware-tenar (via XML-RPC)
 Name[pl]=Serwer eGroupware (poprzez XML-RPC)
Index: kresources/egroupware/kcal_xmlrpc.desktop
===================================================================
--- kresources/egroupware/kcal_xmlrpc.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kresources/egroupware/kcal_xmlrpc.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -20,11 +20,13 @@
 Name[is]=eGroupware þjónn (gegnum XML-RPC)
 Name[it]=Server eGroupware (via XML-RPC)
 Name[ja]=eGroupware サーバ (XML-RPC 経由)
+Name[kk]=eGroupware сервері (XML-RPC арқылы)
 Name[km]=ម៉ាស៊ីន​បម្រើ eGroupware (តាម​រយៈ XML-RPC)
 Name[lt]=eGroupware serveris (per XML-RPC)
 Name[ms]=Pelayan eGroupware (melalui  XML-RPC)
 Name[nb]=eGroupware-tjener (via XML-RPPC)
 Name[nds]=eGroupware-Server (över XML-RPC)
+Name[ne]=(XML-RPC मार्फत) eGroupware सर्भर 
 Name[nl]=eGroupware-server (via XML-RPC)
 Name[nn]=eGroupware-tenar (via XML-RPC)
 Name[pl]=Serwer eGroupware (poprzez XML-RPC)
Index: kresources/tvanytime/kcal_tvanytime.desktop
===================================================================
--- kresources/tvanytime/kcal_tvanytime.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kresources/tvanytime/kcal_tvanytime.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -2,6 +2,7 @@
 Encoding=UTF-8
 Name=TV Schedules
 Name[af]=TV skedules
+Name[ar]=جداول التلفزة
 Name[bg]=Разписание TV
 Name[ca]=Programació de la TV
 Name[cs]=TV programy
@@ -19,11 +20,14 @@
 Name[hu]=TV-műsorok
 Name[is]=Sjónvarpsdagskrár
 Name[it]=Programmi TV
-Name[ja]=TV スケジュール
+Name[ja]=TV 番組予定
+Name[kk]=TV кестелері
 Name[km]=កាលវិភាគ​ទូរទស្សន៍
 Name[lt]=TV tvarkaraščiai
+Name[mk]=ТВ програми
 Name[nb]=TV-program
 Name[nds]=Feernsehprogramm
+Name[ne]=टीभी कार्यतालिका
 Name[nl]=Televisieprogrammering
 Name[nn]=TV-program
 Name[pl]=Program telewizyjny
Index: kresources/exchange/exchange.desktop
===================================================================
--- kresources/exchange/exchange.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kresources/exchange/exchange.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -26,11 +26,14 @@
 Name[is]=Exchange 2000 þjónn
 Name[it]=Server Exchange 2000
 Name[ja]=Exchange 2000 サーバ
+Name[kk]=MS Exchange 2000 сервері
 Name[km]=ម៉ាស៊ីន​បម្រើ Exchange ២០០០
 Name[lt]=Exchange 2000 serveris
+Name[mk]=Exchange 2000-сервер
 Name[ms]=Pelayan Exchange 2000 
 Name[nb]=Exchange 2000-tjener
 Name[nds]=Exchange2000-Server
+Name[ne]=एक्सचेन्ज 2000 सर्भर
 Name[nl]=Exchange2000-server
 Name[nn]=Exchange 2000-tenar
 Name[pl]=Serwer Exchange 2000
Index: kresources/exchange/exchange_deprecated.desktop
===================================================================
--- kresources/exchange/exchange_deprecated.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kresources/exchange/exchange_deprecated.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -21,11 +21,14 @@
 Name[is]=Exchange 2000 þjónn (úrelt)
 Name[it]=Server Exchange 2000 (deprecato)
 Name[ja]=Exchange 2000 サーバ (廃止予定)
+Name[kk]=MS Exchange 2000 сервері (ескірген)
 Name[km]=ម៉ាស៊ីន​បម្រើ Exchange ២០០០ (មិន​សូវ​ល្អ)
 Name[lt]=Exchange 2000 serveris (deprecated)
+Name[mk]=Exchange 2000-сервер (застарено)
 Name[ms]=Pelayan Exchange 2000  (tidak disetujui)
 Name[nb]=Exchange 2000-tjener (frarådet)
 Name[nds]=Exchange2000-Server (utlopen Ünnerstütten)
+Name[ne]=एक्सचेन्ज २००० सर्भर (अनुचित ठानिएको)
 Name[nl]=Exchange 2000-server (afgeraden)
 Name[nn]=Exchange 2000-tenar (frårådd)
 Name[pl]=Serwer Exchange 2000 (przestarzałe)
Index: kresources/groupwise/kcal_groupwise.desktop
===================================================================
--- kresources/groupwise/kcal_groupwise.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kresources/groupwise/kcal_groupwise.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -20,11 +20,13 @@
 Name[is]=Novell GroupWise þjónn
 Name[it]=Server Novell GroupWise
 Name[ja]=Novell GroupWise サーバ
+Name[kk]=Novell GroupWise сервері
 Name[km]=ម៉ាស៊ីន​បម្រើ GroupWise របស់​ណូវែល
 Name[lt]=Novell GroupWise serveris
 Name[ms]=Pelayan Novell GroupWise 
 Name[nb]=Novell GroupWise-tjener
 Name[nds]=Novell-GroupWise-Server
+Name[ne]=नोभेल समूहगत सर्भर
 Name[nl]=Novell GroupWise-server
 Name[nn]=Novell GroupWise-tenar
 Name[pl]=Serwer Novell GroupWise
Index: kresources/groupwise/soap/stdsoap2.h
===================================================================
--- kresources/groupwise/soap/stdsoap2.h	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kresources/groupwise/soap/stdsoap2.h	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -507,7 +507,9 @@
 # endif
 #endif
 
+#ifdef I_KNOW_WHAT_IM_DOING
 #define DEBUG  /* Uncomment to debug sending (in file SENT.log) receiving (in file RECV.log) and messages (in file TEST.log) */
+#endif
 
 #ifdef __cplusplus
 extern "C" {
Index: kresources/groupwise/soap/gwconverter.cpp
===================================================================
--- kresources/groupwise/soap/gwconverter.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kresources/groupwise/soap/gwconverter.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -131,3 +131,41 @@
   QDateTime utc = charToQDateTime( str );
   return KPimPrefs::utcToLocalTime( utc, timezone );
 }
+
+bool GWConverter::emailsMatch( const QString & email1, const QString & email2 )
+{
+    // eg demo3.po1.dom1@dmz1.provo.novell.com == demo3@dmz1.provo.novell.com
+    if ( email1 == email2 )
+        return true;
+
+    QString shorter, longer;
+    if ( email1.length() < email2.length() )
+    {
+        shorter = email1;
+        longer = email2;
+    }
+    else
+    {
+        shorter = email2;
+        longer = email1;
+    }
+
+    QString shortStem = shorter.section( '@', 0, 0 );
+    QString longStem = longer.section( '@', 0, 0 );
+    QString shortHost = shorter.section( '@', 1, 1 );
+    QString longHost = longer.section( '@', 1, 1 );
+
+    QString extension = longStem.right( longStem.length() - shortStem.length() );
+
+    kdDebug() << "gwconverter::emailsMatch(): " << shorter << " = " << longer << endl;
+    kdDebug() << "shortStem: " << shortStem << ", longStem: " << longStem << ", extension: " << extension << endl;
+
+    if ( longStem.startsWith( shortStem ) && extension.startsWith( "." ) && (
+    shortHost == longHost ) )
+    {
+        kdDebug() << "Looks like a match!" << endl;
+        return true;
+    }
+    return false;
+}
+
Index: kresources/groupwise/soap/incidenceconverter.cpp
===================================================================
--- kresources/groupwise/soap/incidenceconverter.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kresources/groupwise/soap/incidenceconverter.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -626,20 +626,20 @@
     std::vector<ngwt__Recipient*>::const_iterator it;
 
     for ( it = recipients.begin(); it != recipients.end(); ++it ) {
-      kdDebug() << "---- recipient " << endl;
-    ngwt__Recipient *recipient = *it;
+      ngwt__Recipient *recipient = *it;
+      kdDebug() << "---- recipient " << recipient->email->c_str() << endl;
       KCal::Attendee *attendee = new KCal::Attendee(
         stringToQString( recipient->displayName ),
         stringToQString( recipient->email ) );
 
       // set our status
-      if ( *(recipient->email) == *(qStringToString( mFromEmail )) )
+      if ( emailsMatch( stringToQString(recipient->email), mFromEmail ) )
         if ( item->status->accepted )
           attendee->setStatus( ( *item->status->accepted ) ? KCal::Attendee::Accepted : KCal::Attendee::NeedsAction );
         else 
-          kdDebug() << "---- not accepted" << endl;
+          kdDebug() << "---- found ourselves, but not accepted" << endl;
       else
-        kdDebug() << "---- '" << recipient->email->c_str() << "' != '" << (qStringToString( mFromEmail ))->c_str() << "'" << endl;
+        kdDebug() << "---- '" <<  "' != '" << (qStringToString( mFromEmail ))->c_str() << "'" << endl;
 
       incidence->addAttendee( attendee );
     }
Index: kresources/groupwise/soap/groupwiseserver.cpp
===================================================================
--- kresources/groupwise/soap/groupwiseserver.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kresources/groupwise/soap/groupwiseserver.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1023,11 +1023,12 @@
   }
   else  // If I am not the organizer restrict my changes to accept or decline requests or task completion
   {
-    // find myself as attendee.   
+    // find myself as attendee.
+    GWConverter conv( mSoap );
     KCal::Attendee::List attendees = incidence->attendees();
     KCal::Attendee::List::ConstIterator it;
     for( it = attendees.begin(); it != attendees.end(); ++it ) {
-      if ( (*it)->email() == mUserEmail ) {
+      if ( conv.emailsMatch( (*it)->email(), mUserEmail ) ) {
         if ( (*it)->status() == KCal::Attendee::Accepted )
           success &= acceptIncidence( incidence );
         else if ( (*it)->status() == KCal::Attendee::Declined )
Index: kresources/groupwise/soap/gwconverter.h
===================================================================
--- kresources/groupwise/soap/gwconverter.h	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kresources/groupwise/soap/gwconverter.h	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -56,7 +56,7 @@
     
     QDateTime stringToQDateTime( const std::string* );
 
-
+    bool emailsMatch( const QString & email1, const QString & email2 );
   private:
     struct soap* mSoap;
 };
Index: kresources/groupwise/kabc_groupwise.desktop
===================================================================
--- kresources/groupwise/kabc_groupwise.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kresources/groupwise/kabc_groupwise.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -20,11 +20,13 @@
 Name[is]=Novell GroupWise þjónn
 Name[it]=Server Novell GroupWise
 Name[ja]=Novell GroupWise サーバ
+Name[kk]=Novell GroupWise сервері
 Name[km]=ម៉ាស៊ីន​បម្រើ GroupWise របស់​ណូវែល
 Name[lt]=Novell GroupWise serveris
 Name[ms]=Pelayan Novell GroupWise 
 Name[nb]=Novell GroupWise-tjener
 Name[nds]=Novell-GroupWise-Server
+Name[ne]=नोभेल समूहगत सर्भर
 Name[nl]=Novell GroupWise-server
 Name[nn]=Novell GroupWise-tenar
 Name[pl]=Serwer Novell GroupWise
Index: kresources/slox/kcal_slox.desktop
===================================================================
--- kresources/slox/kcal_slox.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kresources/slox/kcal_slox.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -20,11 +20,14 @@
 Name[is]=SUSE LINUX Openexchange þjónn
 Name[it]=Server SUSE LINUX Openexchange
 Name[ja]=SUSE LINUX Openexchange サーバ
+Name[kk]=SUSE LINUX Openexchange сервері
 Name[km]=ម៉ាស៊ីន​បម្រើ Openexchange របស់​ស៊ូស៊ីលីនីក
 Name[lt]=SUSE LINUX Openexchange serveris
+Name[mk]=SUSE LINUX Openexchange-сервер
 Name[ms]=Pelayan SUSE LINUX Openexchange
 Name[nb]=SUSE LINUX Openexchange-tjener
 Name[nds]=SUSE-Openexchangeserver
+Name[ne]=SUSE LINUX ओपन एक्सचेन्ज सर्भर
 Name[nl]=SUSE LINUX Openexchange-server
 Name[nn]=SUSE LINUX Openexchange-tenar
 Name[pl]=Server SUSE LINUX Openexchange
Index: kresources/slox/kcal_ox.desktop
===================================================================
--- kresources/slox/kcal_ox.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kresources/slox/kcal_ox.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -18,10 +18,13 @@
 Name[hu]=OpenXchange-kiszolgáló
 Name[is]=OpenXchange þjónn
 Name[ja]=OpenXchange サーバ
+Name[kk]=OpenXchange сервері
 Name[km]=ម៉ាស៊ីន​បម្រើ OpenXchange
 Name[lt]=OpenXchange serveris
+Name[mk]=OpenXchange-сервер
 Name[nb]=OpenExchange-tjener
 Name[nds]=OpenXchange-Server
+Name[ne]=ओपन एक्सचेन्ज सर्भर
 Name[nl]=OpenXchange-server
 Name[nn]=OpenXchange-tenar
 Name[pl]=Server OpenXchange
Index: kresources/slox/kabc_slox.desktop
===================================================================
--- kresources/slox/kabc_slox.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kresources/slox/kabc_slox.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -20,11 +20,14 @@
 Name[is]=SUSE LINUX Openexchange þjónn
 Name[it]=Server SUSE LINUX Openexchange
 Name[ja]=SUSE LINUX Openexchange サーバ
+Name[kk]=SUSE LINUX Openexchange сервері
 Name[km]=ម៉ាស៊ីន​បម្រើ Openexchange របស់​ស៊ូស៊ីលីនីក
 Name[lt]=SUSE LINUX Openexchange serveris
+Name[mk]=SUSE LINUX Openexchange-сервер
 Name[ms]=Pelayan SUSE LINUX Openexchange
 Name[nb]=SUSE LINUX Openexchange-tjener
 Name[nds]=SUSE-Openexchangeserver
+Name[ne]=SUSE LINUX ओपन एक्सचेन्ज सर्भर
 Name[nl]=SUSE LINUX Openexchange-server
 Name[nn]=SUSE LINUX Openexchange-tenar
 Name[pl]=Server SUSE LINUX Openexchange
Index: kresources/slox/kabc_ox.desktop
===================================================================
--- kresources/slox/kabc_ox.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kresources/slox/kabc_ox.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -18,10 +18,13 @@
 Name[hu]=OpenXchange-kiszolgáló
 Name[is]=OpenXchange þjónn
 Name[ja]=OpenXchange サーバ
+Name[kk]=OpenXchange сервері
 Name[km]=ម៉ាស៊ីន​បម្រើ OpenXchange
 Name[lt]=OpenXchange serveris
+Name[mk]=OpenXchange-сервер
 Name[nb]=OpenExchange-tjener
 Name[nds]=OpenXchange-Server
+Name[ne]=ओपन एक्सचेन्ज सर्भर
 Name[nl]=OpenXchange-server
 Name[nn]=OpenXchange-tenar
 Name[pl]=Server OpenXchange
Index: kresources/featureplan/kcal_resourcefeatureplan.desktop
===================================================================
--- kresources/featureplan/kcal_resourcefeatureplan.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kresources/featureplan/kcal_resourcefeatureplan.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -20,6 +20,7 @@
 Name[lt]=XML bruožų planas
 Name[ms]=Pelan Cirian XML 
 Name[nds]=XML-Funkschonenplaan
+Name[ne]=एक्सएमएल विशेषता योजना
 Name[nl]=Functionaliteitsplanning in XML
 Name[pl]=Plan funkcjonalności XML
 Name[pt]=Plano de Funcionalidades em XML
Index: kresources/groupdav/kabc_groupdav.desktop
===================================================================
--- kresources/groupdav/kabc_groupdav.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kresources/groupdav/kabc_groupdav.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -21,11 +21,13 @@
 Name[is]=GroupDAV þjónn (t.d. OpenGroupware)
 Name[it]=Server GroupDAV (per es. OpenGroupware)
 Name[ja]=GroupDAV サーバ (例 OpenGroupware)
+Name[kk]=GroupDAV сервері (мысалы OpenGroupware)
 Name[km]=ម៉ាស៊ីន​បម្រើ GroupDAV (ឧ. OpenGroupware)
 Name[lt]=GroupDAV serveris (pvz.: OpenGroupware)
 Name[ms]=Pelayan GroupDAV  (misalnya OpenGroupware)
 Name[nb]=GroupDAV-tjener (f.eks. OpenGroupware)
 Name[nds]=GroupDAV-Server (t.B. OpenGroupware)
+Name[ne]=समूह DAV सर्भर (जस्तै: खुला ग्रुपवेयर)
 Name[nl]=GroupDAV-server (OpenGroupware)
 Name[nn]=GroupDAV-tenar (t.d. OpenGroupware)
 Name[pl]=Serwer GroupDAV (np. OpenGroupware)
Index: kresources/groupdav/kcal_groupdav.desktop
===================================================================
--- kresources/groupdav/kcal_groupdav.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kresources/groupdav/kcal_groupdav.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -21,11 +21,13 @@
 Name[is]=GroupDAV þjónn (t.d. OpenGroupware)
 Name[it]=Server GroupDAV (per es. OpenGroupware)
 Name[ja]=GroupDAV サーバ (例 OpenGroupware)
+Name[kk]=GroupDAV сервері (мысалы OpenGroupware)
 Name[km]=ម៉ាស៊ីន​បម្រើ GroupDAV (ឧ. OpenGroupware)
 Name[lt]=GroupDAV serveris (pvz.: OpenGroupware)
 Name[ms]=Pelayan GroupDAV  (misalnya OpenGroupware)
 Name[nb]=GroupDAV-tjener (f.eks. OpenGroupware)
 Name[nds]=GroupDAV-Server (t.B. OpenGroupware)
+Name[ne]=समूह DAV सर्भर (जस्तै: खुला ग्रुपवेयर)
 Name[nl]=GroupDAV-server (OpenGroupware)
 Name[nn]=GroupDAV-tenar (t.d. OpenGroupware)
 Name[pl]=Serwer GroupDAV (np. OpenGroupware)
Index: kresources/blogging/blogging.desktop
===================================================================
--- kresources/blogging/blogging.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kresources/blogging/blogging.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -18,11 +18,13 @@
 Name[is]=Dagbækur sem blogg á þjóni
 Name[it]=Diari come blog su un server
 Name[ja]=サーバ上のブログとしてのジャーナル
+Name[kk]=Сервердегі күнделік блог ретінде
 Name[km]=ទិនានុប្បវត្តិ​ជា​កំណត់ហេតុ​បណ្ដាញ​នៅ​លើ​ម៉ាស៊ីន​បម្រើ
 Name[lt]=Dienynai kaip Blog'ai serveryje
 Name[ms]=Jurnal sebagai Blog pada pelayan
 Name[nb]=Dagbok som blogg på en tjener
 Name[nds]=Daagbookindräag as Blog op en Server
+Name[ne]=सर्भरमा बल्गका रुपका पत्रिका
 Name[nl]=Journalen als blogs op een server
 Name[nn]=Dagbøker som bloggar på ein tenar
 Name[pl]=Dzienniki jako blogi na serwerze
Index: kresources/kolab/kabc/kolab.desktop
===================================================================
--- kresources/kolab/kabc/kolab.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kresources/kolab/kabc/kolab.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -21,11 +21,14 @@
 Name[is]=Vistfangaskrá á IMAP þjóni gegnum KMail
 Name[it]=Rubrica indirizzi su server IMAP via KMail
 Name[ja]=KMail 経由 IMAP サーバのアドレス帳
+Name[kk]=KMail арқылы IMAP серверіндегі адрестік кітапша
 Name[km]=សៀវភៅ​អាសយដ្ឋាន​លើ​ម៉ាស៊ីន​បម្រើ IMAP តាម​រយៈ KMail
 Name[lt]=Adresų knygelė IMAP serveryje per KMail
+Name[mk]=Адресар на IMAP-сервер преку КПошта
 Name[ms]=Buku alamat pada pelayan IMAP melalui KMail
 Name[nb]=Adressebok på IMAP-tjener via KMail
 Name[nds]=Adressbook op IMAP-Server över KMail
+Name[ne]=केडीई मेल मार्फत IMAP सर्भरमा ठेगाना पुस्तिका
 Name[nl]=Adresboek op IMAP-server via KMail
 Name[nn]=Adressebok på IMAP-tenar via KMail
 Name[pl]=Książka adresowa na serwerze IMAP za pośrednictwem KMail
Index: kresources/kolab/kabc/contact.h
===================================================================
--- kresources/kolab/kabc/contact.h	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kresources/kolab/kabc/contact.h	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -57,6 +57,7 @@
   public:
     QString type;
     QString street;
+    QString pobox;
     QString locality;
     QString region;
     QString postalCode;
Index: kresources/kolab/kabc/contact.cpp
===================================================================
--- kresources/kolab/kabc/contact.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kresources/kolab/kabc/contact.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -510,6 +510,8 @@
         address.type = e.text();
       else if ( tagName == "street" )
         address.street = e.text();
+      else if ( tagName == "pobox" )
+        address.pobox = e.text();
       else if ( tagName == "locality" )
         address.locality = e.text();
       else if ( tagName == "region" )
@@ -537,11 +539,18 @@
     element.appendChild( e );
     const Address& a = *it;
     writeString( e, "type", a.type );
-    writeString( e, "street", a.street );
+    if ( !a.street.isEmpty() )
+      writeString( e, "street", a.street );
+    if ( !a.pobox.isEmpty() )
+      writeString( e, "pobox", a.pobox );
+    if ( !a.locality.isEmpty() )
     writeString( e, "locality", a.locality );
-    writeString( e, "region", a.region );
-    writeString( e, "postal-code", a.postalCode );
-    writeString( e, "country", a.country );
+    if ( !a.region.isEmpty() )
+      writeString( e, "region", a.region );
+    if ( !a.postalCode.isEmpty() )
+      writeString( e, "postal-code", a.postalCode );
+    if ( !a.country.isEmpty() )
+      writeString( e, "country", a.country );
   }
 }
 
@@ -1038,6 +1047,7 @@
     Address address;
     address.type = addressTypeToString( (*it).type() );
     address.street = (*it).street();
+    address.pobox = (*it).postOfficeBox();
     address.locality = (*it).locality();
     address.region = (*it).region();
     address.postalCode = (*it).postalCode();
@@ -1202,6 +1212,7 @@
       type |= KABC::Address::Pref;
     address.setType( type );
     address.setStreet( (*it).street );
+    address.setPostOfficeBox( (*it).pobox );
     address.setLocality( (*it).locality );
     address.setRegion( (*it).region );
     address.setPostalCode( (*it).postalCode );
Index: kresources/kolab/knotes/kolabresource.desktop
===================================================================
--- kresources/kolab/knotes/kolabresource.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kresources/kolab/knotes/kolabresource.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -21,11 +21,14 @@
 Name[is]=IMAP þjónn gegnum KMail
 Name[it]=Server IMAP via KMail
 Name[ja]=KMail 経由 IMAP サーバ
+Name[kk]=KMail арқылы IMAP сервері
 Name[km]=ម៉ាស៊ីន​បម្រើ IMAP តាម​រយៈ KMail
 Name[lt]=IMAP serveris per KMail
+Name[mk]=IMAP-сервер преку КПошта
 Name[ms]=Pelayan IMAP melalui  KMail
 Name[nb]=IMAP-tjener via KMail
 Name[nds]=IMAP-Server över KMail
+Name[ne]=केडीई मेल मार्फत IMAP सर्भर
 Name[nl]=IMAP-server via KMail
 Name[nn]=IMAP-tenar via KMail
 Name[pl]=Serwer IMAP za pośrednictwem KMail
Index: kresources/kolab/shared/kmailconnection.cpp
===================================================================
--- kresources/kolab/shared/kmailconnection.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kresources/kolab/shared/kmailconnection.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -118,7 +118,7 @@
                                              int format,
                                              const QString& data )
 {
-  if ( format != KMailICalIface::StorageXML 
+  if ( format != KMailICalIface::StorageXML
       && format != KMailICalIface::StorageIcalVcard )
     return false;
 //   kdDebug(5650) << "KMailConnection::fromKMailAddIncidence( " << type << ", "
@@ -244,7 +244,7 @@
                                    const QStringList& attachmentNames,
                                    const QStringList& deletedAttachments )
 {
-  kdDebug(5006) << kdBacktrace() << endl;
+  //kdDebug(5006) << kdBacktrace() << endl;
   if ( connectToKMail() ) {
     sernum = mKMailIcalIfaceStub->update( resource, sernum, subject, plainTextBody, customHeaders,
                                           attachmentURLs, attachmentMimetypes, attachmentNames,
@@ -254,7 +254,7 @@
     return false;
 }
 
-bool KMailConnection::kmailStorageFormat( KMailICalIface::StorageFormat& type, 
+bool KMailConnection::kmailStorageFormat( KMailICalIface::StorageFormat& type,
                                           const QString& folder )
 {
   bool ok = connectToKMail();
Index: kresources/kolab/kcal/kolab.desktop
===================================================================
--- kresources/kolab/kcal/kolab.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kresources/kolab/kcal/kolab.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -21,11 +21,14 @@
 Name[is]=Dagatal á IMAP þjóni gegnum KMail
 Name[it]=Calendario su server IMAP via KMail
 Name[ja]=KMail 経由 IMAP サーバのカレンダー
+Name[kk]=KMail арқылы IMAP серверіндегі күнтізбе
 Name[km]=ប្រតិទិន​លើ​ម៉ាស៊ីន​បម្រើ IMAP តាម​រយៈ KMail
 Name[lt]=Kalendorius IMAP serveryje per KMail
+Name[mk]=Календар на IMAP-сервер преку КПошта
 Name[ms]=Kalendar pada pelayan IMAP melalui KMail
 Name[nb]=Kalender på IMAP-tjener via KMail
 Name[nds]=Kalenner op IMAP-Server över KMail
+Name[ne]=केडीई मेल मार्फत IMAP सर्भरमा क्यालेन्डर
 Name[nl]=Agenda op IMAP-server via KMail
 Name[nn]=Kalender på IMAP-tenar via KMail
 Name[pl]=Kalendarz na serwerze IMAP za pośrednictwem KMail
Index: kresources/birthdays/kabc.desktop
===================================================================
--- kresources/birthdays/kabc.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kresources/birthdays/kabc.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -2,7 +2,8 @@
 Encoding=UTF-8
 Name=Birthdays From KAddressBook
 Name[af]=Verjaarsdae uit KAddressBook
-Name[be]=Дні нараджэньня з K Адраснай кнігі
+Name[ar]=تواريخ الميلد من KAddressBook
+Name[be]=Дні нараджэння з K Адраснай кнігі
 Name[bg]=Рождени дни от адресника
 Name[br]=Deizioù-ha-bloazioù eus KAddressBook
 Name[bs]=Rođendani iz KAddressBook adresara
@@ -26,11 +27,14 @@
 Name[is]=Afmælisdagar úr KAddressBook
 Name[it]=Compleanni da KAddessBook
 Name[ja]=アドレス帳の誕生日
+Name[kk]=KAddressBook-тағы туған күндер
 Name[km]=ថ្ងៃ​ខួប​កំណើត​ពី KAddressBook
 Name[lt]=Gimtadieniai iš KAddressBook
+Name[mk]=Родендени од КАдресар
 Name[ms]=Tarikh Lahir dari  KAddressBook
 Name[nb]=Bursdagsimport fra KAddressbook
 Name[nds]=Geboortsdaag ut KAdressbook
+Name[ne]=केडीई ठेगाना पुस्तिकामा भएका जन्मदिन
 Name[nl]=Verjaardagen uit KAddressBook
 Name[nn]=Fødselsdagar frå KDE-adresseboka
 Name[pl]=Urodziny z Książki adresowej
Index: kresources/groupware/kabc_groupware.desktop
===================================================================
--- kresources/groupware/kabc_groupware.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kresources/groupware/kabc_groupware.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -20,11 +20,13 @@
 Name[is]=Groupware þjónn
 Name[it]=Server Groupware
 Name[ja]=グループウェアサーバ
+Name[kk]=Groupware сервері
 Name[km]=ម៉ាស៊ីន​បម្រើ​កម្មវិធី​ពហុ​អ្នកប្រើ
 Name[lt]=Grupinio darbo serveris
 Name[ms]=Pelayan Groupware 
 Name[nb]=Groupware-tjener
 Name[nds]=Groupware-Server
+Name[ne]=ग्रुपवेयर सर्भर
 Name[nl]=Groupware-server
 Name[nn]=Groupware-tenar
 Name[pl]=Serwer Groupware
Index: kresources/groupware/kcal_groupware.desktop
===================================================================
--- kresources/groupware/kcal_groupware.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kresources/groupware/kcal_groupware.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -20,11 +20,13 @@
 Name[is]=Groupware þjónn
 Name[it]=Server Groupware
 Name[ja]=グループウェアサーバ
+Name[kk]=Groupware сервері
 Name[km]=ម៉ាស៊ីន​បម្រើ​កម្មវិធី​ពហុ​អ្នកប្រើ
 Name[lt]=Grupinio darbo serveris
 Name[ms]=Pelayan Groupware 
 Name[nb]=Groupware-tjener
 Name[nds]=Groupware-Server
+Name[ne]=ग्रुपवेयर सर्भर
 Name[nl]=Groupware-server
 Name[nn]=Groupware-tenar
 Name[pl]=Serwer Groupware
Index: kresources/remote/remote.desktop
===================================================================
--- kresources/remote/remote.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kresources/remote/remote.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -24,11 +24,14 @@
 Name[is]=Dagatal í fjarlægri skrá
 Name[it]=Calendario in file remoto
 Name[ja]=リモートファイルのカレンダー
+Name[kk]=Қашықтағы файлдағы күнтізбе
 Name[km]=ប្រតិទិន​នៅ​ក្នុង​ឯកសារ​នៅ​ឆ្ងាយ
 Name[lt]=Kalendorius nutolusioje byloje
+Name[mk]=Календар во оддалечена датотека
 Name[ms]=Kalendar dalam Fail Jauh
 Name[nb]=Kalender i fil på nettverk
 Name[nds]=Kalenner as Datei op en anner Reekner
+Name[ne]=टाढाको फाइलको क्यालेन्डर
 Name[nl]=Agenda in extern bestand
 Name[nn]=Kalender i ekstern fil
 Name[pl]=Kalendarz w pliku zdalnym
Index: kresources/remote/resourceremote.cpp
===================================================================
--- kresources/remote/resourceremote.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kresources/remote/resourceremote.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -40,7 +40,7 @@
 #include <libkcal/journal.h>
 #include <libkcal/filestorage.h>
 
-#include <kabc/locknull.h>
+#include <kabc/lock.h>
 
 #include <kresources/configwidget.h>
 
@@ -93,7 +93,7 @@
 
   setType( "remote" );
 
-  mLock = new KABC::LockNull( true );
+  mLock = new KABC::Lock( cacheFile() );
 
   enableChangeNotification();
 }
@@ -188,21 +188,25 @@
 
   emit resourceChanged( this );
 
-  kdDebug() << "Download from: " << mDownloadUrl << endl;
+  if ( mLock->lock() )
+  {
+    kdDebug() << "Download from: " << mDownloadUrl << endl;
 
-  mDownloadJob = KIO::file_copy( mDownloadUrl, KURL( cacheFile() ), -1, true,
-                                 false, !mUseProgressManager );
-  connect( mDownloadJob, SIGNAL( result( KIO::Job * ) ),
-           SLOT( slotLoadJobResult( KIO::Job * ) ) );
-  if ( mUseProgressManager ) {
-    connect( mDownloadJob, SIGNAL( percent( KIO::Job *, unsigned long ) ),
-             SLOT( slotPercent( KIO::Job *, unsigned long ) ) );
-    mProgress = KPIM::ProgressManager::createProgressItem(
-        KPIM::ProgressManager::getUniqueID(), i18n("Downloading Calendar") );
+    mDownloadJob = KIO::file_copy( mDownloadUrl, KURL( cacheFile() ), -1, true,
+                                    false, !mUseProgressManager );
+    connect( mDownloadJob, SIGNAL( result( KIO::Job * ) ),
+            SLOT( slotLoadJobResult( KIO::Job * ) ) );
+    if ( mUseProgressManager ) {
+        connect( mDownloadJob, SIGNAL( percent( KIO::Job *, unsigned long ) ),
+                SLOT( slotPercent( KIO::Job *, unsigned long ) ) );
+        mProgress = KPIM::ProgressManager::createProgressItem(
+            KPIM::ProgressManager::getUniqueID(), i18n("Downloading Calendar") );
 
-    mProgress->setProgress( 0 );
+        mProgress->setProgress( 0 );
+    }
   }
-
+  else
+    kdDebug() << "ResourceRemote::load(): cache file is locked - something else must be loading the file" << endl;
   return true;
 }
 
@@ -234,6 +238,7 @@
     mProgress = 0;
   }
 
+  mLock->unlock();
   emit resourceLoaded( this );
 }
 
Index: kresources/newexchange/kabc_newexchange.desktop
===================================================================
--- kresources/newexchange/kabc_newexchange.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kresources/newexchange/kabc_newexchange.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -20,11 +20,14 @@
 Name[is]=Vistfangaskrá Exchange þjóni (á tilraunarstigi)
 Name[it]=Rubrica indirizzi su un server Exchange (sperimentale)
 Name[ja]=Exchange サーバのアドレス帳 (実験版)
+Name[kk]=Exchange серверіндегі адрестік кітапша (сынақтағы)
 Name[km]=សៀវភៅ​អាសយដ្ឋាន​លើ​ម៉ាស៊ីន​បម្រើ Exchange (សម្រាប់​អ្នក​មាន​បទពិសោធន៍)
 Name[lt]=Adresų knygelė Exchange serveryje (eksperimentine tvarka)
+Name[mk]=Адресар на Exchange-сервер (експериментално)
 Name[ms]=Buku  Alamat pada pelayan Exchange (ujikaji)
 Name[nb]=Adressebok på en Exchange-tjener (forsøksvis)
 Name[nds]=Adressbook op en Exchange-Server (warrt utprobeert)
+Name[ne]=एक्सचेन्ज सर्भरमा ठेगाना पुस्तिका (प्रयोगात्मक)
 Name[nl]=Adresboek op een Exchange-server (experimenteel)
 Name[nn]=Adressebok på ein Exchange-tenar (eksperimentelt)
 Name[pl]=Książka adresowa na serwerze Exchange (eksperymentalne)
Index: kresources/newexchange/kabc_newexchange_final.desktop
===================================================================
--- kresources/newexchange/kabc_newexchange_final.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kresources/newexchange/kabc_newexchange_final.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -22,11 +22,14 @@
 Name[is]=Vistfangaskrá á Exchange þjóni
 Name[it]=Rubrica indirizzi su un server Exchange
 Name[ja]=Exchange サーバのアドレス帳
+Name[kk]=Exchange серверіндегі адрестік кітапша
 Name[km]=សៀវភៅ​អាសយដ្ឋាន​លើ​ម៉ាស៊ីន​បម្រើ Exchange
 Name[lt]=Adresų knygelė Exchange serveryje
+Name[mk]=Адресар на Exchange-сервер
 Name[ms]=Buku alamat pada pelayan Exchange 
 Name[nb]=Adressebok på en Exchange-tjener
 Name[nds]=Adressbook op en Exchange-Server
+Name[ne]=एक्सचेन्ज सर्भरमा ठेगाना पुस्तिका
 Name[nl]=Adresboek op een Exchange-server
 Name[nn]=Adressebok på ein Exchange-tenar
 Name[pl]=Książka adresowa na serwerze Exchange
Index: kresources/newexchange/kcal_newexchange.desktop
===================================================================
--- kresources/newexchange/kcal_newexchange.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kresources/newexchange/kcal_newexchange.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -20,11 +20,14 @@
 Name[is]=Dagatal á Exchange þjóni (á tilraunarstigi)
 Name[it]=Calendario su un server Exchange (sperimentale)
 Name[ja]=Exchange サーバのカレンダー (実験版)
+Name[kk]=Exchange серверіндегі күнтізбе (сынақтағы)
 Name[km]=ប្រតិទិន​លើ​ម៉ាស៊ីន​បម្រើ Exchange (សម្រាប់​អ្នក​មាន​បទពិសោធន៍)
 Name[lt]=Kalendorius Exchange serveryje (eksperimentine tvarka)
+Name[mk]=Календар на Exchange-сервер (експериментално)
 Name[ms]=Kalendar pada pelayan Exchange  (ujikaji)
 Name[nb]=Kalender på en Exchange-tjener (forsøksvis)
 Name[nds]=Kalenner op en Exchange-Server (warrt utprobeert)
+Name[ne]=एक्सचेन्ज सर्भरमा क्यालेन्डर (प्रयोगात्मक)
 Name[nl]=Agenda op een Exchange-server (experimenteel)
 Name[nn]=Kalender på ein Exchange-tenar (eksperimentelt)
 Name[pl]=Kalendarz na serwerze Exchange (eksperymentalne)
Index: kresources/newexchange/kcal_newexchange_final.desktop
===================================================================
--- kresources/newexchange/kcal_newexchange_final.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kresources/newexchange/kcal_newexchange_final.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -22,11 +22,14 @@
 Name[is]=Dagatal á Exchange þjóni
 Name[it]=Calendario su un server Exchange
 Name[ja]=Exchange サーバのカレンダー
+Name[kk]=Exchange серверіндегі күнтізбе
 Name[km]=ប្រតិទិន​លើ​ម៉ាស៊ីន​បម្រើ Exchange
 Name[lt]=Kalendorius Exchange serveryje
+Name[mk]=Календар на Exchange-сервер
 Name[ms]=Kalendar pada pelayan Exchange
 Name[nb]=Kalender på en Exchange-tjener
 Name[nds]=Kalenner op en Exchange-Server
+Name[ne]=एक्सचेन्ज सर्भरमा क्यालेन्डर
 Name[nl]=Agenda op een Exchange-server
 Name[nn]=Kalender på ein Exchange-tenar
 Name[pl]=Kalendarz na serwerze Exchange
Index: certmanager/kleopatra_import.desktop
===================================================================
--- certmanager/kleopatra_import.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ certmanager/kleopatra_import.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,8 +1,9 @@
 [Desktop Entry]
 Encoding=UTF-8
 Name=Kleopatra
-Name[be]=Клеапатра
 Name[is]=Kleópatra
+Name[mk]=Клеопатра
+Name[ne]=क्लेओपत्र
 Name[ta]=க்ளியோபட்ரா
 Type=Application
 Exec=kleopatra --import-certificate %u
Index: certmanager/conf/kleopatra_config_appear.desktop
===================================================================
--- certmanager/conf/kleopatra_config_appear.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ certmanager/conf/kleopatra_config_appear.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -14,7 +14,8 @@
 X-KDE-CfgDlgHierarchy=Kleopatra
 
 Name=Appearance
-Name[be]=Зьнешні выгляд
+Name[ar]=المظهر
+Name[be]=Знешні выгляд
 Name[bg]=Външен вид
 Name[br]=Neuziadur
 Name[bs]=Izgled
@@ -38,12 +39,14 @@
 Name[is]=Útlit
 Name[it]=Aspetto
 Name[ja]=外観
+Name[kk]=Сыртқы көрінісі
 Name[km]=រូបរាង
 Name[lt]=Išvaizda
 Name[mk]=Изглед
 Name[ms]=Rupa
 Name[nb]=Utseende
 Name[nds]=Utsehn
+Name[ne]=मोहडा
 Name[nl]=Uiterlijk
 Name[nn]=Utsjånad
 Name[pl]=Wygląd
@@ -65,7 +68,8 @@
 Name[zh_CN]=外观
 Comment=Colors & Fonts Configuration
 Comment[af]=Kleur en skrif tipe opstelling
-Comment[be]=Канфігурацыя колераў і шрыфтоў
+Comment[ar]=إعدادات الألوان و المحارف
+Comment[be]=Настаўленні колераў і шрыфтоў
 Comment[bg]=Настройки на цветовете и шрифтовете
 Comment[bs]=Podešavanje boja i fontova
 Comment[ca]=Configuració de colors i fonts
@@ -87,12 +91,14 @@
 Comment[is]=Stilling lita & leturgerða
 Comment[it]=Configurazione tipi di carattere e colori
 Comment[ja]=色とフォントの設定
+Comment[kk]=Түс & Қаріп параметрлері
 Comment[km]=ការ​កំណត់​រចនាសម្ព័ន្ធ​ពណ៌ & ពុម្ពអក្សរ
 Comment[lt]=Spalvų ir šriftų konfigūravimas
 Comment[mk]=Конфигурација на бои и фонтови
 Comment[ms]=Warna & Konfigurasi fon
 Comment[nb]=Oppsett av farger og skrifttyper
 Comment[nds]=Klören un Schriftoorden instellen
+Comment[ne]=रङ र फन्ट कन्फिगरेसन
 Comment[nl]=Kleur- en lettertype-instellingen
 Comment[nn]=Oppsett av fargar og skrifter
 Comment[pl]=Konfiguracja czcionek i kolorów
@@ -113,6 +119,7 @@
 Comment[zh_TW]=設定顏色與字型
 Keywords=color,font, configuration
 Keywords[af]=kleur,skrif tipe,opstelling,color,font
+Keywords[ar]=لون,حرف, إعدادات,محرف,ألوان
 Keywords[be]=колер, шрыфт, канфігурацыя, color, font, configuration
 Keywords[bg]=цвят, шрифт, конфигуриране, настройки color, font, configuration
 Keywords[br]=liv,nodrezh, kefluniadur
@@ -138,10 +145,11 @@
 Keywords[ja]=色 フォント 設定
 Keywords[km]=ពណ៌,ពុម្ពអក្សរ,ការ​កំណត់​រចនាសម្ព័ន្ធ
 Keywords[lt]=color,font, configuration, spalvų, šriftų konfigūravimas
-Keywords[mk]=color,font,configuration
+Keywords[mk]=color,font,configuration,боја,фонт,конфигурација
 Keywords[ms]=warna,fon, konfigurasi
 Keywords[nb]=farge,skrifttype,oppsett
 Keywords[nds]=Klöör,Schriftoort,instellen
+Keywords[ne]=रङ, फन्ट, कन्फिगरेसन
 Keywords[nl]=kleur,kleuren,font,lettertype,configuratie,instellingen,setup
 Keywords[nn]=farge,skrift,oppsett
 Keywords[pl]=kolor,czcionki,kolory,konfiguracja
Index: certmanager/conf/kleopatra_config_dnorder.desktop
===================================================================
--- certmanager/conf/kleopatra_config_dnorder.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ certmanager/conf/kleopatra_config_dnorder.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -20,7 +20,7 @@
 Name[cs]=Pořadí DN atributů
 Name[da]=DN-Attributrækkefølge
 Name[de]=DN-Attribut-Ordnung
-Name[el]=Σειρά Ιδιότητας DN
+Name[el]=Σειρά ιδιότητας DN
 Name[es]=Orden de atributos DN
 Name[et]=DN-atribuutide järjekord
 Name[eu]=DN-atributu ordena
@@ -33,11 +33,14 @@
 Name[is]=DN eiginleikaröðun
 Name[it]=Attributi DN, ordine
 Name[ja]=DN 属性順位
+Name[kk]=DN-атрибуттер реті
 Name[km]=លំដាប់​គុណលក្ខណៈ DN
 Name[lt]=DN-Savybių tvarka
+Name[mk]=Редослед на DN-атрибути
 Name[ms]=Tertib atribut DN
 Name[nb]=DN-Attributtrekkefølge
 Name[nds]=DN-Egenschappenreeg
+Name[ne]=डीएन विशेषता आदेश
 Name[nl]=DN-Attribuutvolgorde
 Name[nn]=DN-attributtrekkjefølgje
 Name[pl]=Porządek atrybutów DN
@@ -77,11 +80,14 @@
 Comment[is]=Stilla röð DN eiginleikanna
 Comment[it]=Configura l'ordine in cui sono mostrati gli attributi DN
 Comment[ja]=DN 属性を表示する順位を設定
+Comment[kk]=DN атрибуттерді көрсету ретін баптау
 Comment[km]=កំណត់​រចនាសម្ព័ន្ធ​លំដាប់ ដែល​ត្រូវ​បង្ហាញ​គុណលក្ខណៈ DN
 Comment[lt]=Konfigūruoti DN savybių rodymo tvarką
+Comment[mk]=Конфигурирајте го редоследот по кој се покажуваат DN-атрибутите
 Comment[ms]=Konfigur tertib yang atribut DN dipaparkan
 Comment[nb]=Still inn rekkefølgen DN-attributtene er sortert i
 Comment[nds]=De Reeg bi't Wiesen vun DN-Egenschappen fastleggen
+Comment[ne]=डीएन विशेषता देखिने आदेश कन्फिगर गर्नुहोस्
 Comment[nl]=Stel de volgorde in van de DN-attributen
 Comment[nn]=Vel kva rekkjefølgje DN-attributtane er sorterte i
 Comment[pl]=Konfiguracja kolejności wyświetlania atrybutów DN
@@ -125,9 +131,11 @@
 Keywords[ja]=DN,順位,RDN,属性
 Keywords[km]=DN,លំដាប់,RDN,គុណលក្ខណៈ
 Keywords[lt]=DN,order,RDN,attribute,savybė,tvarka
+Keywords[mk]=DN,order,RDN,attribute,редослед,атрибут
 Keywords[ms]=DN,susunan,RDN,atribut
 Keywords[nb]=DN,orden,RDN,attributt
 Keywords[nds]=DN,Reeg,RDN,Egenschap
+Keywords[ne]=डीएन,क्रम,आरडीएन, विशेषता
 Keywords[nl]=DN,volgorde,RDN,attribuut
 Keywords[nn]=DN,rekkjefølgje,RDN,attributt
 Keywords[pl]=DN,kolejność,RDN,atrybuty
Index: certmanager/conf/kleopatra_config_dirserv.desktop
===================================================================
--- certmanager/conf/kleopatra_config_dirserv.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ certmanager/conf/kleopatra_config_dirserv.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -14,6 +14,7 @@
 X-KDE-CfgDlgHierarchy=Kleopatra
 
 Name=Directory Services
+Name[ar]=خدمات الدليل
 Name[bg]=Директорийни услуги
 Name[bs]=Imenički servisi
 Name[ca]=Serveis de directori
@@ -34,11 +35,14 @@
 Name[is]=Nafnaþjónustur
 Name[it]=Servizi Directory
 Name[ja]=ディレクトリ サービス
+Name[kk]=Каталог қызметтері
 Name[km]=សេវា​ថត
 Name[lt]=Aplankų tarnybos
+Name[mk]=Именички сервиси
 Name[ms]=Servis Direktori 
 Name[nb]=Katalogtjenere
 Name[nds]=Vertekendeensten
+Name[ne]=डाइरेक्टरी कार्य
 Name[nl]=Mapdiensten
 Name[nn]=Katalogtenester
 Name[pa]=ਡਾਇਰੈਕਟਰੀ ਸੇਵਾਵਾਂ
@@ -62,7 +66,7 @@
 Comment[af]=Opstelling van LDAP gids diens
 Comment[bg]=Настройки на директорийните услуги LDAP
 Comment[bs]=Podešavanje LDAP usluge imenika
-Comment[ca]=Configuractió dels serveis de directori LDAP
+Comment[ca]=Configuració dels serveis de directori LDAP
 Comment[cs]=Nastavení adresářových služeb LDAP
 Comment[da]=Indstilling af LDAP opslagstjeneste
 Comment[de]=Einrichtung von LDAP-Verzeichnisdiensten
@@ -79,11 +83,14 @@
 Comment[is]=Stillingar LDAP uppflettingaþjónustunnar
 Comment[it]=Configurazione servizi LDAP
 Comment[ja]=LDAP ディレクトリ サービスの設定
+Comment[kk]=LDAP каталог қызметтер параметрлері
 Comment[km]=ការ​កំណត់​រចនាសម្ព័ន្ធ​របស់​សេវា​ថត LDAP
 Comment[lt]=LDAP aplankų tarnybų konfigūravimas
+Comment[mk]=Конфигурација на LDAP-именички сервиси
 Comment[ms]=Konfigurasi LDAP servis direktori
 Comment[nb]=Oppsett av LDAP katalogtjenester
 Comment[nds]=LDAP-Vertekendeensten instellen
+Comment[ne]=LDAP डाइरेक्टरी कार्यको कन्फिगरेसन
 Comment[nl]=Configuratie voor LDAP-diensten
 Comment[nn]=Oppsett av LDAP-katalogtenester
 Comment[pl]=Konfiguracja usług katalogowych LDAP
@@ -125,12 +132,14 @@
 Keywords[hu]=ldap,címtár,szolgáltatások
 Keywords[is]=ldap,directory,services,nafnaþjónusta
 Keywords[it]=ldap, servizi, directory
-Keywords[ja]=ldap,ディレクトリー,サービス
+Keywords[ja]=ldap,ディレクトリ,サービス
 Keywords[km]=ldap,ថត,សេវា
 Keywords[lt]=ldap,directory,services,aplankai,tarnybos
+Keywords[mk]=ldap,directory,services,именик,сервиси
 Keywords[ms]=ldap,direktori,servis
 Keywords[nb]=ldap,mappe,tjenester
 Keywords[nds]=LDAP,Verteken,Deensten
+Keywords[ne]=ldap,डाइरेक्टरी,कार्य
 Keywords[nn]=ldap,katalog,tenester
 Keywords[pl]=ldap,katalog,usługi katalogowe,usługi,LDAP
 Keywords[pt]=ldap,directório,serviços
Index: certmanager/lib/libkleopatrarc.desktop
===================================================================
--- certmanager/lib/libkleopatrarc.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ certmanager/lib/libkleopatrarc.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -20,11 +20,13 @@
 Name[is]=Ekki staðfestur lykill
 Name[it]=Chiave non convalidata
 Name[ja]=認証されていない鍵
+Name[kk]=Тексерілмеген кілт
 Name[km]=កូនសោ​គ្មាន​សុពលភាព
 Name[lt]=Nevaliduotas raktas
 Name[ms]=Kekunci Tidak Disahkan
 Name[nb]=Nøkkel ikke sjekket for gyldighet
 Name[nds]=Nich pröövt Slötel
+Name[ne]=प्रमाणीत नगरिएको कुञ्जी
 Name[nl]=Geen gevalideerde sleutel
 Name[nn]=Ikkje-validert nøkkel
 Name[pl]=Niesprawdzony klucz
@@ -68,11 +70,14 @@
 Name[is]=Útrunninn lykill
 Name[it]=Chiave scaduta
 Name[ja]=期限切れの鍵
+Name[kk]=Ескірген кілт
 Name[km]=កូនសោ​បាន​ផុតកំណត់
 Name[lt]=Baigęs galioti raktas
+Name[mk]=Истечен клуч
 Name[ms]=Kekunci Luput
 Name[nb]=Utgått nøkkel
 Name[nds]=Aflopen Slötel
+Name[ne]=म्याद समाप्त भएको कुञ्जी
 Name[nl]=Verlopen sleutel
 Name[nn]=Forelda nøkkel
 Name[pl]=Klucz, który stracił ważność
@@ -113,11 +118,14 @@
 Name[is]=Afturkallaður lykill
 Name[it]=Chiave revocata
 Name[ja]=破棄された鍵
+Name[kk]=Күші жойылған кілт
 Name[km]=កូនសោ​ត្រូវ​បាន​ដកហូត
 Name[lt]=Atšauktas raktas
+Name[mk]=Отповикан клуч
 Name[ms]=Kekunci Dibatalkan
 Name[nb]=Tilbakekalt nøkkel
 Name[nds]=Torüchropen Slötel
+Name[ne]=रद्द गरिएको कुञ्जी
 Name[nl]=Ingetrokken sleutel
 Name[nn]=Tilbakekalla nøkkel
 Name[pl]=Odwołany klucz
@@ -141,12 +149,13 @@
 is-validity=ultimate
 Name=Trusted Root Certificate
 Name[af]=Vertroude 'Root' sertifikaat
+Name[ar]=شهادة جذر موثوق بها
 Name[bg]=Надеждно удостоверение
 Name[ca]=Certificat arrel de confiança
 Name[cs]=Důvěryhodný kořenový certifikát
 Name[da]=Root-certifikat der stoles på
 Name[de]=Vertrauenswürdiges Stammzertifikat
-Name[el]=Έμπιστο Βασικό Πιστοποιητικό
+Name[el]=Έμπιστο βασικό πιστοποιητικό
 Name[es]=Certificado raíz de confianza
 Name[et]=Usaldusväärne juursertifikaat
 Name[eu]=Konfidantzazko erro ziurtagiria
@@ -158,11 +167,14 @@
 Name[is]=Treyst rótarskilríki
 Name[it]=Certificato radice affidabile
 Name[ja]=信頼されたルート証明書
+Name[kk]=Сенім артылған түбір куәлігі
 Name[km]=វិញ្ញាបនបត្រ Root ដែល​អាច​ជឿទុកចិត្ត
 Name[lt]=Patikimas root sertifikatas
+Name[mk]=Доверлив коренов сертификат
 Name[ms]=Sijil Root Dipercaya
 Name[nb]=Tiltrodd rot-sertifikat
 Name[nds]=Vertroonswöördig Wörtelzertifikaat
+Name[ne]=विश्वास गरिएका मूल प्रमाणपत्र
 Name[nl]=Vertrouwd hoofdcertificaat
 Name[nn]=Tiltrudd rotsertifikat
 Name[pl]=Zaufany certyfikat bazowy
@@ -186,12 +198,13 @@
 is-not-validity=ultimate
 Name=Not Trusted Root Certificate
 Name[af]=Nie vertroude 'root' sertifikaat
+Name[ar]=شهادة جذر غير موثوق بها
 Name[bg]=Ненадеждно удостоверение
 Name[ca]=Certificat arrel sense confiança
 Name[cs]=Nedůvěryhodný kořenový certifikát
 Name[da]=Root-certifikat der ikke stoles på
 Name[de]=Nicht vertrauenswürdiges Stammzertifikat
-Name[el]=Μη έμπιστο Βασικό Πιστοποιητικό
+Name[el]=Μη έμπιστο βασικό πιστοποιητικό
 Name[es]=Certificado raíz no de confianza
 Name[et]=Ebausaldusväärne juursertifikaat
 Name[eu]=Konfidantza gabeko erro ziurtagiria
@@ -203,11 +216,14 @@
 Name[is]=Ekki traust rótarskilríki
 Name[it]=Certificato radice non affidabile
 Name[ja]=信頼されてないルート証明書
+Name[kk]=Сенім артылмаған түбір куәлігі
 Name[km]=វិញ្ញាបនបត្រ Root ដែល​មិន​អាច​ជឿទុកចិត្ត
 Name[lt]=Nepatikimas root sertifikatas
+Name[mk]=Недоверлив коренов сертификат
 Name[ms]=Sijil Root Tak Dipercaya
 Name[nb]=Ikke tiltrodd rot-sertifikat
 Name[nds]=Nich vertroonswöördig Wörtelzertifikaat
+Name[ne]=विश्वास नगरिएका मूल प्रमाणपत्र
 Name[nl]=Niet vertrouwd hoofdcertificaat
 Name[nn]=Ikkje tiltrudd rotsertifikat
 Name[pl]=Nie zaufany certyfikat bazowy
@@ -229,6 +245,7 @@
 was-validated=true
 Name=Other Keys
 Name[af]=Ander Sleutels
+Name[ar]=مفاتيح آخرى
 Name[bg]=Други ключове
 Name[br]=Alc'hwezioù all
 Name[ca]=Altres claus
@@ -249,11 +266,14 @@
 Name[is]=Aðrir lyklar
 Name[it]=Altre chiavi
 Name[ja]=他の鍵
+Name[kk]=Басқа кілттер
 Name[km]=កូនសោ​ផ្សេង​ទៀត
 Name[lt]=Kiti raktai
+Name[mk]=Други клучеви
 Name[ms]=Kekunci Lain
 Name[nb]=Andre nøkler
 Name[nds]=Anner Slötels
+Name[ne]=अन्य कुञ्जी
 Name[nl]=Andere sleutels
 Name[nn]=Andre nøklar
 Name[pa]=ਹੋਰ ਕੁੰਜੀਆਂ
Index: libkmime/kmime_util.cpp
===================================================================
--- libkmime/kmime_util.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkmime/kmime_util.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -360,7 +360,7 @@
 
 QCString extractHeader(const QCString &src, const char *name)
 {
-  QCString n=QCString(name)+": ";
+  QCString n=QCString(name)+":";
   int pos1=-1, pos2=0, len=src.length()-1;
   bool folded(false);
 
@@ -373,6 +373,9 @@
 
   if (pos1>-1) {    //there is a header with the given name
     pos1+=n.length(); //skip the name
+    // skip the usual space after the colon
+    if ( src.at( pos1 ) == ' ' )
+      ++pos1;
     pos2=pos1;
 
     if (src[pos2]!='\n') {  // check if the header is not empty
Index: karm/taskview.cpp
===================================================================
--- karm/taskview.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ karm/taskview.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -360,7 +360,7 @@
 Preferences* TaskView::preferences() { return _preferences; }
 
 QString TaskView::save()
-// This saves the not-running tasks.
+// This saves the tasks. If they do not yet have an endDate, their startDate is also not saved.
 {
   kdDebug(5970) << "Entering TaskView::save" << endl;
   QString err = _storage->save(this);
@@ -382,16 +382,21 @@
 
 void TaskView::startTimerFor(Task* task, QDateTime startTime )
 {
-  if (task != 0 && activeTasks.findRef(task) == -1) {
-    _idleTimeDetector->startIdleDetection();
-    task->setRunning(true, _storage, startTime);
-    activeTasks.append(task);
-    emit updateButtons();
-    if ( activeTasks.count() == 1 )
+  kdDebug(5970) << "Entering TaskView::startTimerFor" << endl;
+  if (save()==QString())
+  {
+    if (task != 0 && activeTasks.findRef(task) == -1) 
+    {
+      _idleTimeDetector->startIdleDetection();
+      task->setRunning(true, _storage, startTime);
+      activeTasks.append(task);
+      emit updateButtons();
+      if ( activeTasks.count() == 1 )
         emit timersActive();
-
-    emit tasksChanged( activeTasks);
+      emit tasksChanged( activeTasks);
+    }
   }
+  else KMessageBox::error(0,i18n("Saving is impossible, so timing is useless. \nSaving problems may result from a full harddisk, a directory name instead of a file name, or stale locks. Check that your harddisk has enough space, that your calendar file exists and is a file and remove stale locks, typically from ~/.kde/share/apps/kabc/lock."));
 }
 
 void TaskView::clearActiveTasks()
Index: karm/karm_part.cpp
===================================================================
--- karm/karm_part.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ karm/karm_part.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -502,7 +502,7 @@
 
 QString karmPart::setPerCentComplete( const QString& taskName, int perCent )
 {
-  int index;
+  int index = 0;
   QString err="no such task";
   for (int i=0; i<_taskView->count(); i++)
   {
Index: karm/karmstorage.cpp
===================================================================
--- karm/karmstorage.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ karm/karmstorage.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -308,7 +308,7 @@
 QString KarmStorage::save(TaskView* taskview)
 {
   kdDebug(5970) << "entering KarmStorage::save" << endl;
-  QString err;
+  QString err=QString();
 
   QPtrStack< KCal::Todo > parents;
 
@@ -1219,12 +1219,14 @@
 {
   kdDebug(5970) << "KarmStorage::saveCalendar" << endl;
 
+#if 0
   Event::List evl=_calendar->rawEvents();
   kdDebug(5970) << "summary - dtStart - dtEnd" << endl;
   for (unsigned int i=0; i<evl.count(); i++) 
   {
     kdDebug() << evl[i]->summary() << evl[i]->dtStart() << evl[i]->dtEnd() << endl;
   }
+#endif
   KABC::Lock *lock = _calendar->lock();
   if ( !lock || !lock->lock() )
     return false;
Index: karm/support/karm.desktop
===================================================================
--- karm/support/karm.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ karm/support/karm.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -4,7 +4,6 @@
 Name[af]=Karm
 Name[eo]=Tempomezurilo
 Name[hi]=के-आर्म
-Name[mk]=КРака
 Name[sv]=Karm
 Name[ta]=Kஅம்
 Name[xh]=KAlrm
@@ -35,15 +34,17 @@
 GenericName[id]=Tracker Waktu Pribadi
 GenericName[is]=Fylgjast með í hvað tíminn fer
 GenericName[it]=Segnatempo personale
+GenericName[kk]=Дербес уақыт қадағалағышы
 GenericName[km]=កម្មវិធី​តាមដាន​ពេលវេលា​ផ្ទាល់​ខ្លួន
 GenericName[ko]=일하는 시간을 잴 수 있습니다
 GenericName[lt]=Asmeninis laiko sekėjas
 GenericName[lv]=Personālais Laika Atsekotājs
-GenericName[mk]=Водење сметка за вашето слободно време
+GenericName[mk]=Следење на личното време
 GenericName[ms]=Penjejak Waktu Peribadi
 GenericName[mt]=Żomm il-ħin personali
 GenericName[nb]=Personlig tidsoversikt
 GenericName[nds]=Persöönlich Tietlogbook
+GenericName[ne]=व्यक्तिगत समय ट्र्याकर
 GenericName[nl]=Tijdsregistratie
 GenericName[nn]=Personleg tidsmålar
 GenericName[nso]=Seswaranako sa Nako ya Botho
Index: kmail/kmfoldersearch.h
===================================================================
--- kmail/kmfoldersearch.h	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kmail/kmfoldersearch.h	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -169,12 +169,11 @@
 
 public:
   //See base class for documentation
-  virtual QCString& getMsgString(int idx, QCString& mDest);
   virtual int addMsg(KMMessage* msg, int* index_return = 0);
-  virtual int open();
+  virtual int open(const char *owner);
   virtual int canAccess();
   virtual void sync();
-  virtual void close(bool force=FALSE);
+  virtual void close(const char *owner, bool force=FALSE);
   virtual int create();
   virtual int compact( bool );
   virtual bool isReadOnly() const;
Index: kmail/searchwindow.h
===================================================================
--- kmail/searchwindow.h	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kmail/searchwindow.h	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -127,6 +127,8 @@
   void slotSaveMsg();
   void slotSaveAttachments();
   void slotPrintMsg();
+  void slotCopyMsgs();
+  void slotCutMsgs();
 
   /** GUI cleanup after search */
   virtual void searchDone();
@@ -170,7 +172,8 @@
   QMap<int,KMFolder*> mMenuToFolder;
   KAction *mReplyAction, *mReplyAllAction, *mReplyListAction, *mSaveAsAction,
     *mForwardInlineAction, *mForwardAttachedAction, *mForwardDigestAction,
-    *mRedirectAction, *mPrintAction, *mClearAction, *mSaveAtchAction;
+    *mRedirectAction, *mPrintAction, *mClearAction, *mSaveAtchAction,
+    *mCopyAction, *mCutAction;
   KActionMenu *mForwardActionMenu;
   QValueList<QGuardedPtr<KMFolder> > mFolders;
 
Index: kmail/folderstorage.h
===================================================================
--- kmail/folderstorage.h	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kmail/folderstorage.h	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -145,9 +145,6 @@
   */
   virtual KMMessage* readTemporaryMsg(int idx);
 
-  /** Read a message and return a referece to a string */
-  virtual QCString& getMsgString(int idx, QCString& mDest) = 0;
-
   /** Read a message and returns a DwString */
   virtual DwString getDwString(int idx) = 0;
 
@@ -200,9 +197,9 @@
     return addMsg(msg, index_return);
   }
 
-  /** 
-   * Adds the given messages to the folder. Behaviour is identical 
-   * to addMsg(msg) 
+  /**
+   * Adds the given messages to the folder. Behaviour is identical
+   * to addMsg(msg)
    */
   virtual int addMsg( QPtrList<KMMessage>&, QValueList<int>& index_return );
 
@@ -251,7 +248,7 @@
     call close() first.
     Returns zero on success and an error code equal to the c-library
     fopen call otherwise (errno). */
-  virtual int open() = 0;
+  virtual int open(const char *owner) = 0;
 
   /** Check folder for permissions
     Returns zero if readable and writable. */
@@ -259,7 +256,7 @@
 
   /** Close folder. If force is TRUE the files are closed even if
     others still use it (e.g. other mail reader windows). */
-  virtual void close(bool force=FALSE) = 0;
+  virtual void close(const char * owner,bool force=FALSE) = 0;
 
   /** Try releasing @p folder if possible, something is attempting an exclusive access to it.
       Currently used for KMFolderSearch and the background tasks like expiry. */
@@ -360,7 +357,7 @@
   virtual void setStatus(QValueList<int>& ids, KMMsgStatus status, bool toggle=false);
 
   void removeJobs();
-  
+
   /** Escape a leading dot */
   static QString dotEscape(const QString&);
 
@@ -386,7 +383,10 @@
   bool compactable() const { return mCompactable; }
 
   /// Set the type of contents held in this folder (mail, calendar, etc.)
-  virtual void setContentsType( KMail::FolderContentsType type );
+  // If quiet is true, the KMailIcalIface is not informed of the changed. That's usefull
+  // for folder that are being copied around, should retain their type, but not cause
+  // conflicts on copy because events are identical in two folders.
+  virtual void setContentsType( KMail::FolderContentsType type, bool quiet = false );
   /// @return the type of contents held in this folder (mail, calendar, etc.)
   KMail::FolderContentsType contentsType() const { return mContentsType; }
 
@@ -403,7 +403,7 @@
   virtual void search( const KMSearchPattern*, Q_UINT32 serNum );
 
   /** Returns true if this folder can be moved */
-  virtual bool isMoveable() const;  
+  virtual bool isMoveable() const;
 
 signals:
   /** Emitted when the status, name, or associated accounts of this
@@ -418,9 +418,12 @@
       emmitted first. */
   void expunged( KMFolder* );
 
+  /** Emitted when the folder was closed and ticket owners have to reopen */
+  void closed( KMFolder* );
+  
   /** Emitted when the serial numbers of this folder were invalidated. */
   void invalidated( KMFolder * );
-  
+
   /** Emitted when the name of the folder changes. */
   void nameChanged();
 
@@ -467,7 +470,7 @@
    * The matching serial numbers are included
    * If @p complete is true the search is done
    */
-  void searchResult( KMFolder*, QValueList<Q_UINT32>, 
+  void searchResult( KMFolder*, QValueList<Q_UINT32>,
                      const KMSearchPattern*, bool complete );
 
   /**
@@ -488,7 +491,7 @@
   /** Add a copy of the message to the folder after it has been retrieved
       from an IMAP server */
   virtual void reallyAddCopyOfMsg(KMMessage* aMsg);
-  
+
   /** Emit changed signal if mQuite <=0 */
   void slotEmitChangedTimer();
 
@@ -552,7 +555,7 @@
   /** Replaces the serial number for the message @p msg at index @p idx with
    * @p sernum */
   void replaceMsgSerNum( unsigned long sernum, KMMsgBase* msg, int idx );
-  
+
    /** Called when serial numbers for a folder are invalidated,
   invalidates/recreates data structures dependent on the
   serial numbers for this folder */
@@ -567,7 +570,7 @@
     At the time of the call the folder has already been closed, and
     the various index files deleted.  Returns 0 on success. */
   virtual int expungeContents() = 0;
-  
+
   /** Read index file and fill the message-info list mMsgList. */
   virtual bool readIndex() = 0;
   virtual KMMsgBase* takeIndexEntry( int idx ) = 0;
@@ -587,7 +590,7 @@
   bool mDirty :1;
   /** TRUE if the files of the folder are locked (writable) */
   bool mFilesLocked :1;
-  
+
   /** number of unread messages, -1 if not yet set */
   int mUnreadMsgs, mGuessedUnreadMsgs;
   int mTotalMsgs;
Index: kmail/kmfolderdir.h
===================================================================
--- kmail/kmfolderdir.h	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kmail/kmfolderdir.h	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -52,7 +52,7 @@
   /** Returns the folder whose children we are holding */
   KMFolder* owner() const { return mOwner; }
 
-  virtual KMFolderDirType type() { return mDirType; }
+  virtual KMFolderDirType type() const { return mDirType; }
 
 protected:
   KMFolder * mOwner;
Index: kmail/kmheaders.h
===================================================================
--- kmail/kmheaders.h	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kmail/kmheaders.h	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -176,6 +176,19 @@
   QFont todoFont() const { return mTodoFont; }
   QFont dateFont() const { return mDateFont; }
 
+  /**
+    Sets the list of copied/cutted messages.
+    @param msgs A list of serial numbers.
+    @param move if true, the messages were cutted
+  */
+  void setCopiedMessages( const QValueList<Q_UINT32> &msgs, bool move );
+
+  /**
+    Returns true if the message with the given serial number has been cut.
+    @param serNum A message serial number.
+  */
+  bool isMessageCut( Q_UINT32 serNum ) const;
+
 signals:
   /** emitted when the list view item corresponding to this message
       has been selected */
@@ -188,10 +201,10 @@
   /** emitted when the list of messages has been completely rebuilt */
   void messageListUpdated();
 
-  /** emitted after a new item has been fully built and added to the 
+  /** emitted after a new item has been fully built and added to the
    * list view. We can't use KListView::itemAdded, as that is emitted
    * from the ctor of the item, at which point the building of the item
-   * is not yet far enough along to update the quick search, which is 
+   * is not yet far enough along to update the quick search, which is
    * what is connected to this signal. */
   void msgAddedToListView( QListViewItem* );
 
@@ -208,6 +221,8 @@
   void msgChanged();
   /** For when the folder has been cleared */
   void folderCleared();
+  /** For when the folder has been cleared */
+  void folderClosed();
   /** For when the message with the given message id has been added to a folder */
   void msgAdded(int);
   /** For when the message with the given id has been removed for a folder */
@@ -336,6 +351,12 @@
 private slots:
   void slotMoveCompleted( KMCommand * );
 
+  void copyMessages();
+  void cutMessages();
+  void pasteMessages();
+
+  void updateActions();
+
 private:
   /** Is equivalent to clearing the list and inserting an item for
       each message in the current folder */
@@ -429,5 +450,8 @@
   /** popup to switch columns */
   KPopupMenu* mPopup;
 
+  // copied messages
+  QValueList<Q_UINT32> mCopiedMessages;
+  bool mMoveMessages;
 }; // class
 #endif
Index: kmail/kmail.antispamrc
===================================================================
--- kmail/kmail.antispamrc	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kmail/kmail.antispamrc	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -216,7 +216,7 @@
 Version=1
 Priority=65
 VisibleName=CRM114
-Executeable=crm -v | grep "CRM114"
+Executable=crm -v | grep "CRM114"
 URL=http://crm114.sourceforge.net
 PipeFilterName=CRM114 Check
 PipeCmdDetect=crm -u $HOME/.crm114 mailreaver.crm
Index: kmail/accountdialog.cpp
===================================================================
--- kmail/accountdialog.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kmail/accountdialog.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -964,6 +964,11 @@
     i18n("Show only s&ubscribed folders"), page1);
   grid->addMultiCellWidget( mImap.subscribedFoldersCheck, row, row, 0, 1 );
 
+  ++row;
+  mImap.locallySubscribedFoldersCheck = new QCheckBox(
+    i18n("Show only &locally subscribed folders"), page1);
+  grid->addMultiCellWidget( mImap.locallySubscribedFoldersCheck, row, row, 0, 1 );
+
   if ( !connected ) {
     // not implemented for disconnected yet
     ++row;
@@ -1221,6 +1226,7 @@
     mImap.autoExpungeCheck->setChecked( ai.autoExpunge() );
     mImap.hiddenFoldersCheck->setChecked( ai.hiddenFolders() );
     mImap.subscribedFoldersCheck->setChecked( ai.onlySubscribedFolders() );
+    mImap.locallySubscribedFoldersCheck->setChecked( ai.onlyLocallySubscribedFolders() );
     mImap.loadOnDemandCheck->setChecked( ai.loadOnDemand() );
     mImap.listOnlyOpenCheck->setChecked( ai.listOnlyOpenFolders() );
     mImap.storePasswordCheck->setChecked( ai.storePasswd() );
@@ -1274,6 +1280,7 @@
 #endif
     mImap.hiddenFoldersCheck->setChecked( ai.hiddenFolders() );
     mImap.subscribedFoldersCheck->setChecked( ai.onlySubscribedFolders() );
+    mImap.locallySubscribedFoldersCheck->setChecked( ai.onlyLocallySubscribedFolders() );
     mImap.storePasswordCheck->setChecked( ai.storePasswd() );
     mImap.intervalCheck->setChecked( interval >= 1 );
     mImap.intervalSpin->setValue( QMAX(1, interval) );
@@ -1816,6 +1823,7 @@
     epa.setAutoExpunge( mImap.autoExpungeCheck->isChecked() );
     epa.setHiddenFolders( mImap.hiddenFoldersCheck->isChecked() );
     epa.setOnlySubscribedFolders( mImap.subscribedFoldersCheck->isChecked() );
+    epa.setOnlyLocallySubscribedFolders( mImap.locallySubscribedFoldersCheck->isChecked() );
     epa.setLoadOnDemand( mImap.loadOnDemandCheck->isChecked() );
     epa.setListOnlyOpenFolders( mImap.listOnlyOpenCheck->isChecked() );
     KMFolder *t = mImap.trashCombo->folder();
@@ -1847,6 +1855,9 @@
     KMAcctCachedImap &epa = *(KMAcctCachedImap*)mAccount;
     epa.setHiddenFolders( mImap.hiddenFoldersCheck->isChecked() );
     epa.setOnlySubscribedFolders( mImap.subscribedFoldersCheck->isChecked() );
+    epa.setOnlyLocallySubscribedFolders( mImap.locallySubscribedFoldersCheck->isChecked() );
+    epa.setStorePasswd( mImap.storePasswordCheck->isChecked() );
+    epa.setPasswd( mImap.passwordEdit->text(), epa.storePasswd() );
     KMFolder *t = mImap.trashCombo->folder();
     if ( t )
       epa.setTrash( mImap.trashCombo->folder()->idString() );
Index: kmail/kmmainwin.rc
===================================================================
--- kmail/kmmainwin.rc	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kmail/kmmainwin.rc	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -2,7 +2,7 @@
      the same menu entries at the same place in KMail and Kontact  -->
 
 <!DOCTYPE kpartgui>
-<kpartgui version="92" name="kmmainwin" >
+<kpartgui version="94" name="kmmainwin" >
  <MenuBar>
   <Menu noMerge="1" name="file" >
    <text>&amp;File</text>
@@ -43,6 +43,14 @@
    <Separator/>
    <Action name="kmail_copy" />
    <Separator/>
+   <Action name="copy_folder"/>
+   <Action name="cut_folder"/>
+   <Action name="paste_folder"/>
+   <Separator/>
+   <Action name="copy_messages"/>
+   <Action name="cut_messages"/>
+   <Action name="paste_messages"/>
+   <Separator/>
    <Action name="move_to_trash" />
    <Action name="move_thread_to_trash" />
    <Separator/>
@@ -128,14 +136,14 @@
    <Separator/>
    <Action name="copy_to" />
    <Action name="move_to" />
-   <Separator/> 
+   <Separator/>
    <Action name="set_status" />
    <Action name="thread_status" />
    <Separator/>
    <Action name="create_filter"/>
    <Menu name="apply_filter_actions" >
      <text>A&amp;pply Filter</text>
-     <Action name="apply_filters" /> 
+     <Action name="apply_filters" />
      <ActionList name="menu_filter_actions" />
    </Menu>
   </Menu>
Index: kmail/messagecopyhelper.h
===================================================================
--- kmail/messagecopyhelper.h	(.../tags/KDE/3.5.6/kdepim)	(wersja 0)
+++ kmail/messagecopyhelper.h	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -0,0 +1,74 @@
+/*
+    Copyright (c) 2007 Volker Krause <vkrause@kde.org>
+
+    This library is free software; you can redistribute it and/or modify it
+    under the terms of the GNU Library General Public License as published by
+    the Free Software Foundation; either version 2 of the License, or (at your
+    option) any later version.
+
+    This library is distributed in the hope that it will be useful, but WITHOUT
+    ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
+    FITNESS FOR A PARTICULAR PURPOSE.  See the GNU Library General Public
+    License for more details.
+
+    You should have received a copy of the GNU Library General Public License
+    along with this library; see the file COPYING.LIB.  If not, write to the
+    Free Software Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA
+    02110-1301, USA.
+*/
+
+#ifndef KMAIL_MESSAGECOPYHELPER_H
+#define KMAIL_MESSAGECOPYHELPER_H
+
+#include <qguardedptr.h>
+#include <qobject.h>
+#include <qptrlist.h>
+
+#include <maillistdrag.h>
+
+class KMCommand;
+class KMFolder;
+class KMMsgBase;
+
+namespace KMail {
+
+/**
+  Helper class to copy/move a set of messages defined by their serial
+  numbers from arbitrary folders into a common destination folder.
+*/
+class MessageCopyHelper : public QObject
+{
+  Q_OBJECT
+
+  public:
+    /**
+      Creates new MessageCopyHelper object to copy the given messages
+      to the specified destination folder.
+      @param msgs List of serial numbers.
+      @param dest Destination folder.
+      @param move If set to true, messages will be moved instead of copied
+      @param parent The parent object.
+    */
+    MessageCopyHelper( const QValueList<Q_UINT32> &msgs, KMFolder *dest,
+                       bool move, QObject *parent = 0 );
+
+    /**
+      Converts a MailList into a serial number list.
+    */
+    static QValueList<Q_UINT32> serNumListFromMailList( const KPIM::MailList &list );
+
+    /**
+      Converts a KMMsgsBase* list into a serial number list.
+    */
+    static QValueList<Q_UINT32> serNumListFromMsgList( QPtrList<KMMsgBase> list );
+
+  private slots:
+    void copyCompleted( KMCommand *cmd );
+
+  private:
+    QMap<QGuardedPtr<KMFolder>, int> mOpenFolders;
+};
+
+}
+
+#endif
Index: kmail/expirejob.cpp
===================================================================
--- kmail/expirejob.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kmail/expirejob.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -73,7 +73,7 @@
   Q_ASSERT( mCancellable );
   // We must close the folder if we opened it and got interrupted
   if ( mFolderOpen && mSrcFolder && mSrcFolder->storage() )
-    mSrcFolder->storage()->close();
+    mSrcFolder->storage()->close("expirejob");
   FolderJob::kill();
 }
 
@@ -102,7 +102,7 @@
 
   FolderStorage* storage = mSrcFolder->storage();
   mOpeningFolder = true; // Ignore open-notifications while opening the folder
-  storage->open();
+  storage->open("expirejob");
   mOpeningFolder = false;
   mFolderOpen = true;
   mCurrentIndex = storage->count()-1;
@@ -196,7 +196,7 @@
   group.writeEntry( "Current", -1 ); // i.e. make it invalid, the serial number will be used
 
   if ( !moving ) {
-    mSrcFolder->storage()->close();
+    mSrcFolder->storage()->close("expirejob");
     mFolderOpen = false;
     delete this;
   }
@@ -204,7 +204,7 @@
 
 void ExpireJob::slotMessagesMoved( KMCommand *command )
 {
-  mSrcFolder->storage()->close();
+  mSrcFolder->storage()->close("expirejob");
   mFolderOpen = false;
   QString msg;
   switch ( command->result() ) {
Index: kmail/imapaccountbase.cpp
===================================================================
--- kmail/imapaccountbase.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kmail/imapaccountbase.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -87,6 +87,7 @@
       mAutoExpunge( true ),
       mHiddenFolders( false ),
       mOnlySubscribedFolders( false ),
+      mOnlyLocallySubscribedFolders( false ),
       mLoadOnDemand( true ),
       mListOnlyOpenFolders( false ),
       mProgressEnabled( false ),
@@ -94,6 +95,7 @@
       mPasswordDialogIsActive( false ),
       mACLSupport( true ),
       mAnnotationSupport( true ),
+      mQuotaSupport( true ),
       mSlaveConnected( false ),
       mSlaveConnectionError( false ),
       mCheckingSingleFolder( false ),
@@ -118,6 +120,7 @@
     mAutoExpunge = true;
     mHiddenFolders = false;
     mOnlySubscribedFolders = false;
+    mOnlyLocallySubscribedFolders = false;
     mLoadOnDemand = true;
     mListOnlyOpenFolders = false;
     mProgressEnabled = false;
@@ -132,10 +135,12 @@
     setAutoExpunge( i->autoExpunge() );
     setHiddenFolders( i->hiddenFolders() );
     setOnlySubscribedFolders( i->onlySubscribedFolders() );
+    setOnlyLocallySubscribedFolders( i->onlyLocallySubscribedFolders() );
     setLoadOnDemand( i->loadOnDemand() );
     setListOnlyOpenFolders( i->listOnlyOpenFolders() );
     setNamespaces( i->namespaces() );
     setNamespaceToDelimiter( i->namespaceToDelimiter() );
+    localBlacklistFromStringList( i->locallyBlacklistedFolders() );
   }
 
   unsigned short int ImapAccountBase::defaultPort() const {
@@ -164,6 +169,10 @@
     mOnlySubscribedFolders = show;
   }
 
+  void ImapAccountBase::setOnlyLocallySubscribedFolders( bool show ) {
+    mOnlyLocallySubscribedFolders = show;
+  }
+
   void ImapAccountBase::setLoadOnDemand( bool load ) {
     mLoadOnDemand = load;
   }
@@ -184,6 +193,7 @@
     setAutoExpunge( config.readBoolEntry( "auto-expunge", false ) );
     setHiddenFolders( config.readBoolEntry( "hidden-folders", false ) );
     setOnlySubscribedFolders( config.readBoolEntry( "subscribed-folders", false ) );
+    setOnlyLocallySubscribedFolders( config.readBoolEntry( "locally-subscribed-folders", false ) );
     setLoadOnDemand( config.readBoolEntry( "loadondemand", false ) );
     setListOnlyOpenFolders( config.readBoolEntry( "listOnlyOpenFolders", false ) );
     // read namespaces
@@ -213,6 +223,7 @@
     if ( !mOldPrefix.isEmpty() ) {
       makeConnection();
     }
+    localBlacklistFromStringList( config.readListEntry( "locallyUnsubscribedFolders" ) );
   }
 
   void ImapAccountBase::writeConfig( KConfig/*Base*/ & config ) /*const*/ {
@@ -221,6 +232,7 @@
     config.writeEntry( "auto-expunge", autoExpunge() );
     config.writeEntry( "hidden-folders", hiddenFolders() );
     config.writeEntry( "subscribed-folders", onlySubscribedFolders() );
+    config.writeEntry( "locally-subscribed-folders", onlyLocallySubscribedFolders() );
     config.writeEntry( "loadondemand", loadOnDemand() );
     config.writeEntry( "listOnlyOpenFolders", listOnlyOpenFolders() );
     QString data;
@@ -236,6 +248,7 @@
       key = "Namespace:" + it.key();
       config.writeEntry( key, it.data() );
     }
+    config.writeEntry( "locallyUnsubscribedFolders", locallyBlacklistedFolders() );
   }
 
   //
@@ -473,7 +486,36 @@
     if (mSlave) removeJob(job);
   }
 
+  //-----------------------------------------------------------------------------
+  // Do not remove imapPath, FolderDiaQuotaTab needs to call this with parent==0.
+  void ImapAccountBase::getStorageQuotaInfo( KMFolder* parent, const QString& imapPath )
+  {
+    if ( !mSlave ) return;
+    KURL url = getUrl();
+    url.setPath(imapPath);
 
+    QuotaJobs::GetStorageQuotaJob* job = QuotaJobs::getStorageQuota( mSlave, url );
+    jobData jd( url.url(), parent );
+    jd.cancellable = true;
+    insertJob(job, jd);
+
+    connect(job, SIGNAL(result(KIO::Job *)),
+            SLOT(slotGetStorageQuotaInfoResult(KIO::Job *)));
+  }
+
+  void ImapAccountBase::slotGetStorageQuotaInfoResult( KIO::Job* _job )
+  {
+    QuotaJobs::GetStorageQuotaJob* job = static_cast<QuotaJobs::GetStorageQuotaJob *>( _job );
+    JobIterator it = findJob( job );
+    if ( it == jobsEnd() ) return;
+    if ( job->error() && job->error() == KIO::ERR_UNSUPPORTED_ACTION )
+      setHasNoQuotaSupport();
+
+    KMFolder* folder = (*it).parent; // can be 0
+    emit receivedStorageQuotaInfo( folder, job, job->storageQuotaInfo() );
+    if (mSlave) removeJob(job);
+  }
+
   void ImapAccountBase::slotNoopTimeout()
   {
     if ( mSlave ) {
@@ -1314,6 +1356,40 @@
     return createImapPath( path, folderName );
   }
 
+
+  bool ImapAccountBase::locallySubscribedTo( const QString& imapPath )
+  {
+      return mLocalSubscriptionBlackList.find( imapPath ) == mLocalSubscriptionBlackList.end();
+  }
+
+  void ImapAccountBase::changeLocalSubscription( const QString& imapPath, bool subscribe )
+  {
+    if ( subscribe ) {
+      // find in blacklist and remove from it
+      mLocalSubscriptionBlackList.erase( imapPath );
+    } else {
+      // blacklist
+      mLocalSubscriptionBlackList.insert( imapPath );
+    }
+  }
+
+
+  QStringList ImapAccountBase::locallyBlacklistedFolders() const
+  {
+      QStringList list;
+      std::set<QString>::const_iterator it = mLocalSubscriptionBlackList.begin();
+      std::set<QString>::const_iterator end = mLocalSubscriptionBlackList.end();
+      for ( ; it != end ; ++it )
+        list.append( *it );
+      return list;
+  }
+
+  void ImapAccountBase::localBlacklistFromStringList( const QStringList &list )
+  {
+    for( QStringList::ConstIterator it = list.constBegin( ); it != list.constEnd( ); ++it )
+      mLocalSubscriptionBlackList.insert( *it );
+  }
+
 } // namespace KMail
 
 #include "imapaccountbase.moc"
Index: kmail/kmailicalifaceimpl.cpp
===================================================================
--- kmail/kmailicalifaceimpl.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kmail/kmailicalifaceimpl.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -70,6 +70,8 @@
 #include <kurl.h>
 #include <ktempfile.h>
 
+using namespace KMail;
+
 // Local helper methods
 static void vPartMicroParser( const QString& str, QString& s );
 static void reloadFolderTree();
@@ -480,9 +482,9 @@
     return 0;
   }
 
-  f->open();
+  f->open("kolabcount");
   int n = f->count();
-  f->close();
+  f->close("kolabcount");
   kdDebug(5006) << "KMailICalIfaceImpl::incidencesKolabCount( " << mimetype << ", "
                 << resource << " ) returned " << n << endl;
   return n;
@@ -507,7 +509,7 @@
     return aMap;
   }
 
-  f->open();
+  f->open("incidences");
 
   int stopIndex = nbMessages == -1 ? f->count() :
                   QMIN( f->count(), startIndex + nbMessages );
@@ -553,6 +555,7 @@
 #endif
     }
   }
+  f->close( "incidences" );
   return aMap;
 }
 
@@ -634,7 +637,7 @@
   kdDebug(5006) << k_funcinfo << endl;
   QValueList<KMailICalIfaceImpl::SubResource> folderList = subresourcesKolab( contentsType );
   for ( QValueList<KMailICalIfaceImpl::SubResource>::const_iterator it( folderList.begin() ),
-                                                                    end( folderList.end() ); 
+                                                                    end( folderList.end() );
         it != end ; ++it ) {
     KMFolder * const f = findResourceFolder( (*it).location );
     if ( !f ) continue;
@@ -723,7 +726,7 @@
     return rc;
   }
 
-  f->open();
+  f->open("ifaceupdate");
 
   KMMessage* msg = 0;
   if ( sernum != 0 ) {
@@ -751,7 +754,7 @@
     const KMail::FolderContentsType t = f->storage()->contentsType();
     const QCString type = msg->typeStr();
     const QCString subtype = msg->subtypeStr();
-    const bool messageWasIcalVcardFormat = ( type.lower() == "text" && 
+    const bool messageWasIcalVcardFormat = ( type.lower() == "text" &&
         ( subtype.lower() == "calendar" || subtype.lower() == "x-vcard" ) );
 
     if ( storageFormat( f ) == StorageIcalVcard ) {
@@ -806,7 +809,7 @@
                             attachmentMimetypes );
   }
 
-  f->close();
+  f->close("ifaceupdate");
   return rc;
 }
 
@@ -1079,6 +1082,16 @@
   return mHideFolders && isResourceFolder( folder );
 }
 
+bool KMailICalIfaceImpl::hideResourceAccountRoot( KMFolder* folder ) const
+{
+  KMFolderCachedImap *dimapFolder = dynamic_cast<KMFolderCachedImap*>( folder->storage() );
+  bool hide = dimapFolder && mHideFolders 
+       && (int)dimapFolder->account()->id() == GlobalSettings::self()->theIMAPResourceAccount()
+       && GlobalSettings::self()->showOnlyGroupwareFoldersForGroupwareAccount();
+  return hide;
+
+}
+
 KFolderTreeItem::Type KMailICalIfaceImpl::folderType( KMFolder* folder ) const
 {
   if( mUseResourceIMAP && folder ) {
@@ -1691,7 +1704,7 @@
   folder->storage()->setContentsType( contentsType );
   folder->setSystemFolder( true );
   folder->storage()->writeConfig();
-  folder->open();
+  folder->open("ifacefolder");
   connectFolder( folder );
   return folder;
 }
@@ -1733,7 +1746,7 @@
   if( folder ) {
     folder->setSystemFolder( false );
     folder->disconnect( _this );
-    folder->close();
+    folder->close("ifacefolder");
   }
 }
 
Index: kmail/kmheaders.cpp
===================================================================
--- kmail/kmheaders.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kmail/kmheaders.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -15,10 +15,13 @@
 #include "kmmsgdict.h"
 #include "kmdebug.h"
 #include "kmfoldertree.h"
+#include "kmfolderimap.h"
 #include "folderjob.h"
 using KMail::FolderJob;
 #include "actionscheduler.h"
 using KMail::ActionScheduler;
+#include "messagecopyhelper.h"
+using KMail::MessageCopyHelper;
 #include "broadcaststatus.h"
 using KPIM::BroadcastStatus;
 #include "progressmanager.h"
@@ -205,6 +208,9 @@
   resetCurrentTime();
 
   mSubjectLists.setAutoDelete( true );
+
+  mMoveMessages = false;
+  connect( this, SIGNAL(selectionChanged()), SLOT(updateActions()) );
 }
 
 
@@ -215,7 +221,12 @@
   {
     writeFolderConfig();
     writeSortOrder();
-    mFolder->close();
+    if (mFolder->folderType() == KMFolderTypeImap)
+    {
+      KMFolderImap *imap = static_cast<KMFolderImap*>(mFolder->storage());
+      imap->setSelected( false );
+    }
+    mFolder->close("kmheaders");
   }
   writeConfig();
   delete mRoot;
@@ -662,11 +673,13 @@
                  this, SLOT(folderCleared()));
       disconnect(mFolder, SIGNAL(expunged( KMFolder* )),
                  this, SLOT(folderCleared()));
+      disconnect(mFolder, SIGNAL(closed()),
+                 this, SLOT(folderClosed()));
       disconnect( mFolder, SIGNAL( statusMsg( const QString& ) ),
                   BroadcastStatus::instance(), SLOT( setStatusMsg( const QString& ) ) );
       disconnect(mFolder, SIGNAL(viewConfigChanged()), this, SLOT(reset()));
       writeSortOrder();
-      mFolder->close();
+      mFolder->close("kmheaders");
       // System folders remain open but we also should write the index from
       // time to time
       if (mFolder->dirty()) mFolder->writeIndex();
@@ -695,6 +708,8 @@
               this, SLOT(folderCleared()));
       connect(mFolder, SIGNAL(expunged( KMFolder* )),
                  this, SLOT(folderCleared()));
+      connect(mFolder, SIGNAL(closed()),
+                 this, SLOT(folderClosed()));
       connect(mFolder, SIGNAL(statusMsg(const QString&)),
               BroadcastStatus::instance(), SLOT( setStatusMsg( const QString& ) ) );
       connect(mFolder, SIGNAL(numUnreadMsgsChanged(KMFolder*)),
@@ -715,7 +730,7 @@
 
       CREATE_TIMER(kmfolder_open);
       START_TIMER(kmfolder_open);
-      mFolder->open();
+      mFolder->open("kmheaders");
       END_TIMER(kmfolder_open);
       SHOW_TIMER(kmfolder_open);
 
@@ -751,6 +766,8 @@
     setColumnText( mPaintInfo.subCol, colText);
   }
 
+  updateActions();
+
   END_TIMER(set_folder);
   SHOW_TIMER(set_folder);
 }
@@ -1725,6 +1742,9 @@
 
 void KMHeaders::selectNextMessage()
 {
+  KMMessage *cm = currentMsg();
+  if ( cm && cm->isBeingParsed() )
+    return;
   QListViewItem *lvi = currentItem();
   if( lvi ) {
     QListViewItem *below = lvi->itemBelow();
@@ -1759,6 +1779,9 @@
 
 void KMHeaders::selectPrevMessage()
 {
+  KMMessage *cm = currentMsg();
+  if ( cm && cm->isBeingParsed() )
+    return;
   QListViewItem *lvi = currentItem();
   if( lvi ) {
     QListViewItem *above = lvi->itemAbove();
@@ -1782,6 +1805,9 @@
 
 void KMHeaders::incCurrentMessage()
 {
+  KMMessage *cm = currentMsg();
+  if ( cm && cm->isBeingParsed() )
+    return;
   QListViewItem *lvi = currentItem();
   if ( lvi && lvi->itemBelow() ) {
 
@@ -1797,6 +1823,9 @@
 
 void KMHeaders::decCurrentMessage()
 {
+  KMMessage *cm = currentMsg();
+  if ( cm && cm->isBeingParsed() )
+    return;
   QListViewItem *lvi = currentItem();
   if ( lvi && lvi->itemAbove() ) {
     disconnect(this,SIGNAL(currentChanged(QListViewItem*)),
@@ -2017,20 +2046,18 @@
   }
 
   int idx = item->msgId();
-  if (mReaderWindowActive) {
-    KMMessage *msg = mFolder->getMsg(idx);
-    if (!msg ) {
-      emit selected( 0 );
-      mPrevCurrent = 0;
-      return;
-    }
+  KMMessage *msg = mFolder->getMsg(idx);
+  if (mReaderWindowActive && !msg) {
+    emit selected( 0 );
+    mPrevCurrent = 0;
+    return;
   }
 
   BroadcastStatus::instance()->setStatusMsg("");
   if (markitread && idx >= 0) setMsgRead(idx);
   mItems[idx]->irefresh();
   mItems[idx]->repaint();
-  emit selected( mFolder->getMsg(idx) );
+  emit selected( msg );
   setFolderInfoStatus();
 }
 
@@ -2537,6 +2564,13 @@
     emit selected(0);
 }
 
+
+void KMHeaders::folderClosed()
+{
+    mFolder->open( "kmheaders" );
+    folderCleared();
+}
+
 bool KMHeaders::writeSortOrder()
 {
   QString sortFile = KMAIL_SORT_FILE(mFolder);
@@ -3332,4 +3366,70 @@
   kdDebug(5006) << "KMHeaders::setCurrentItem item with serial number " << serialNum << " NOT FOUND" << endl;
 }
 
+void KMHeaders::copyMessages()
+{
+  mCopiedMessages.clear();
+  KMMessageList* list = selectedMsgs();
+  for ( uint i = 0; i < list->count(); ++ i )
+    mCopiedMessages << list->at( i )->getMsgSerNum();
+  mMoveMessages = false;
+  updateActions();
+  triggerUpdate();
+}
+
+void KMHeaders::cutMessages()
+{
+  mCopiedMessages.clear();
+  KMMessageList* list = selectedMsgs();
+  for ( uint i = 0; i < list->count(); ++ i )
+    mCopiedMessages << list->at( i )->getMsgSerNum();
+  mMoveMessages = true;
+  updateActions();
+  triggerUpdate();
+}
+
+void KMHeaders::pasteMessages()
+{
+  new MessageCopyHelper( mCopiedMessages, folder(), mMoveMessages, this );
+  if ( mMoveMessages ) {
+    mCopiedMessages.clear();
+    updateActions();
+  }
+}
+
+void KMHeaders::updateActions()
+{
+  KAction *copy = owner()->action( "copy_messages" );
+  KAction *cut = owner()->action( "cut_messages" );
+  KAction *paste = owner()->action( "paste_messages" );
+
+  if ( selectedItems().isEmpty() ) {
+    copy->setEnabled( false );
+    cut->setEnabled( false );
+  } else {
+    copy->setEnabled( true );
+    if ( folder() && folder()->isReadOnly() )
+      cut->setEnabled( false );
+    else
+      cut->setEnabled( true );
+  }
+
+  if ( mCopiedMessages.isEmpty() || !folder() || folder()->isReadOnly() )
+    paste->setEnabled( false );
+  else
+    paste->setEnabled( true );
+}
+
+void KMHeaders::setCopiedMessages(const QValueList< Q_UINT32 > & msgs, bool move)
+{
+  mCopiedMessages = msgs;
+  mMoveMessages = move;
+  updateActions();
+}
+
+bool KMHeaders::isMessageCut(Q_UINT32 serNum) const
+{
+  return mMoveMessages && mCopiedMessages.contains( serNum );
+}
+
 #include "kmheaders.moc"
Index: kmail/subscriptiondialog.h
===================================================================
--- kmail/subscriptiondialog.h	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kmail/subscriptiondialog.h	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -41,64 +41,79 @@
 
 namespace KMail {
 
-  class SubscriptionDialog : public KSubscription
+  // Abstract base class for the server side and client side subscription dialogs.
+  // Scott Meyers says: "Make non-leaf classes abstract" and he is right, I think.
+  // (More Effective C++, Item 33)
+  class SubscriptionDialogBase : public KSubscription
   {
     Q_OBJECT
 
     public:
-      SubscriptionDialog( QWidget *parent, const QString &caption, KAccount* acct,
-         QString startPath = QString::null );
+      SubscriptionDialogBase( QWidget *parent,
+                              const QString &caption,
+                              KAccount* acct,
+                              QString startPath = QString::null );
+      virtual ~SubscriptionDialogBase() {}
 
       void show();
 
     protected:
       /**
-       * Find the parent item 
-       */ 
+       * Find the parent item
+       */
       void findParentItem ( QString &name, QString &path, QString &compare,
                        GroupItem **parent, GroupItem **oldItem );
 
       /**
        * Process the next prefix in mPrefixList
-       */ 
+       */
       void processNext();
 
       /**
        * Fill mPrefixList
-       */ 
+       */
       void initPrefixList();
 
+      virtual void loadingComplete();
+
     public slots:
       /**
        * get the listing from the imap-server
-       */ 
+       */
       void slotListDirectory(const QStringList&, const QStringList&,
           const QStringList&, const QStringList&, const ImapAccountBase::jobData &);
 
-      /** 
+      /**
        * called by Ok-button, saves the changes
-       */ 
+       */
       void slotSave();
 
       /**
        * Called from the account when a connection was established
        */
-      void slotConnectionResult( int errorCode, const QString& errorMsg );      
+      void slotConnectionResult( int errorCode, const QString& errorMsg );
 
     protected slots:
       /**
        * Loads the folders
-       */ 
+       */
       void slotLoadFolders();
 
-      /**
-       * Create or update the listitems
-       */ 
-      void createItems();
+    protected:
+      virtual void listAllAvailableAndCreateItems() = 0;
+      virtual void processFolderListing() = 0;
+      virtual void doSave() = 0;
 
-    private:
+      // helpers
+      /** Move all child items of @param oldItem under @param item */
+      void moveChildrenToNewParent( GroupItem *oldItem, GroupItem *item  );
+
+      /** Create a listview item for the i-th entry in the list of available
+       * folders. */
+      void createListViewItem( int i );
+
       QString mDelimiter;
-      QStringList mFolderNames, mFolderPaths, 
+      QStringList mFolderNames, mFolderPaths,
                   mFolderMimeTypes, mFolderAttributes;
       ImapAccountBase::jobData mJobData;
       uint mCount;
@@ -109,6 +124,33 @@
       QString mCurrentNamespace;
   };
 
+  class SubscriptionDialog : public SubscriptionDialogBase
+  {
+    Q_OBJECT
+    public:
+
+      SubscriptionDialog( QWidget *parent,
+                          const QString &caption,
+                          KAccount* acct,
+                          QString startPath = QString::null );
+      virtual ~SubscriptionDialog();
+     protected:
+      /** reimpl */
+      virtual void listAllAvailableAndCreateItems();
+      /** reimpl */
+      virtual void processFolderListing();
+      /** reimpl */
+      virtual void doSave();
+
+    private:
+      /**
+       * Create or update the listitems, depending on whether we are listing
+       * all available folders, or only subscribed ones.
+       */
+      void processItems();
+
+  };
+
 } // namespace KMail
 
 #endif
Index: kmail/kmacctlocal.cpp
===================================================================
--- kmail/kmacctlocal.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kmail/kmacctlocal.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -146,7 +146,7 @@
     return false;
   }
   
-  const int rc = mMailFolder->open();
+  const int rc = mMailFolder->open("acctlocalMail");
   if ( rc != 0 ) {
     QString aStr;
     aStr = i18n("Cannot open file:");
@@ -161,7 +161,7 @@
 
   if (!mboxStorage->isLocked()) {
     kdDebug(5006) << "mailFolder could not be locked" << endl;
-    mMailFolder->close();
+    mMailFolder->close("acctlocalMail");
     checkDone( mHasNewMail, CheckError );
     QString errMsg = i18n( "Transmission failed: Could not lock %1." )
       .arg( mMailFolder->location() );
@@ -169,7 +169,7 @@
     return false;
   }
 
-  mFolder->open();
+  mFolder->open("acctlocalFold");
 
   mNumMsgs = mMailFolder->count();
 
@@ -259,10 +259,10 @@
   }
   // else warning is written already
 
-  mMailFolder->close();
+  mMailFolder->close("acctlocalMail");
   delete mMailFolder; mMailFolder = 0;
 
-  mFolder->close();
+  mFolder->close("acctlocalFold");
 
   checkDone( mHasNewMail, CheckOK );
 }
Index: kmail/util.cpp
===================================================================
--- kmail/util.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kmail/util.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -39,6 +39,7 @@
 
 #include <stdlib.h>
 #include <qcstring.h>
+#include <mimelib/string.h>
 
 size_t KMail::Util::crlf2lf( char* str, const size_t strLen )
 {
@@ -72,7 +73,7 @@
 
 QCString KMail::Util::lf2crlf( const QCString & src )
 {
-    QCString result( 1 + 2*src.length() );  // maximal possible length
+    QCString result( 1 + 2*src.size() );  // maximal possible length
 
     QCString::ConstIterator s = src.begin();
     QCString::Iterator d = result.begin();
@@ -87,3 +88,107 @@
     result.truncate( d - result.begin() ); // adds trailing NUL
     return result;
 }
+
+QByteArray KMail::Util::lf2crlf( const QByteArray & src )
+{
+    const char* s = src.data();
+    if ( !s )
+      return QByteArray();
+
+    QByteArray result( 2 * src.size() );  // maximal possible length
+    QByteArray::Iterator d = result.begin();
+    // we use cPrev to make sure we insert '\r' only there where it is missing
+    char cPrev = '?';
+    const char* end = src.end();
+    while ( s != end ) {
+        if ( ('\n' == *s) && ('\r' != cPrev) )
+            *d++ = '\r';
+        cPrev = *s;
+        *d++ = *s++;
+    }
+    result.truncate( d - result.begin() ); // does not add trailing NUL, as expected
+    return result;
+}
+
+QCString KMail::Util::CString( const DwString& str )
+{
+  const int strLen = str.size();
+  QCString cstr( strLen + 1 );
+  memcpy( cstr.data(), str.data(), strLen );
+  cstr[ strLen ] = 0;
+  return cstr;
+}
+
+QByteArray KMail::Util::ByteArray( const DwString& str )
+{
+  const int strLen = str.size();
+  QByteArray arr( strLen );
+  memcpy( arr.data(), str.data(), strLen );
+  return arr;
+}
+
+DwString KMail::Util::dwString( const QCString& str )
+{
+  if ( !str.data() ) // DwString doesn't like char*=0
+    return DwString();
+  return DwString( str.data(), str.size() - 1 );
+}
+
+DwString KMail::Util::dwString( const QByteArray& str )
+{
+  if ( !str.data() ) // DwString doesn't like char*=0
+    return DwString();
+  return DwString( str.data(), str.size() );
+}
+
+void KMail::Util::append( QByteArray& that, const QByteArray& str )
+{
+  that.detach();
+  uint len1 = that.size();
+  uint len2 = str.size();
+  if ( that.resize( len1 + len2, QByteArray::SpeedOptim ) )
+    memcpy( that.data() + len1, str.data(), len2 );
+}
+
+void KMail::Util::append( QByteArray& that, const char* str )
+{
+  if ( !str )
+    return; // nothing to append
+  that.detach();
+  uint len1 = that.size();
+  uint len2 = qstrlen(str);
+  if ( that.resize( len1 + len2, QByteArray::SpeedOptim ) )
+    memcpy( that.data() + len1, str, len2 );
+}
+
+void KMail::Util::append( QByteArray& that, const QCString& str )
+{
+  that.detach();
+  uint len1 = that.size();
+  uint len2 = str.size() - 1;
+  if ( that.resize( len1 + len2, QByteArray::SpeedOptim ) )
+    memcpy( that.data() + len1, str.data(), len2 );
+}
+
+// Code taken from QCString::insert, but trailing nul removed
+void KMail::Util::insert( QByteArray& that, uint index, const char* s )
+{
+  int len = qstrlen(s);
+  if ( len == 0 )
+    return;
+  uint olen = that.size();
+  int nlen = olen + len;
+  if ( index >= olen ) {                      // insert after end of string
+    that.detach();
+    if ( that.resize(nlen+index-olen, QByteArray::SpeedOptim ) ) {
+      memset( that.data()+olen, ' ', index-olen );
+      memcpy( that.data()+index, s, len );
+    }
+  } else {
+    that.detach();
+    if ( that.resize(nlen, QByteArray::SpeedOptim ) ) {    // normal insert
+      memmove( that.data()+index+len, that.data()+index, olen-index );
+      memcpy( that.data()+index, s, len );
+    }
+  }
+}
Index: kmail/dcopimap.desktop
===================================================================
--- kmail/dcopimap.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kmail/dcopimap.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -5,7 +5,7 @@
 Comment=Mail program with a DCOP interface
 Comment[af]=E-pos program met 'n DCOP koppelvlak
 Comment[be]=Паштовая праграма з DCOP інтэрфэйсам
-Comment[bg]=Клиент на електронна поща за КДЕ
+Comment[bg]=Клиент на електронна поща за KDE
 Comment[bs]=Mail program sa DCOP interfejsom
 Comment[ca]=Un programa de correu amb una interfície DCOP
 Comment[cs]=Poštvní program s DCOP rozhraním
@@ -25,11 +25,14 @@
 Comment[is]=Póstforrit með DCOP viðmóti
 Comment[it]=Programma di posta con un'interfaccia DCOP
 Comment[ja]=DCOP インターフェース付のメールプログラム
+Comment[kk]=DCOP интерфейсті пошта бағдарламасы
 Comment[km]=កម្មវិធី​អ៊ីមែល​ដែល​មាន​ចំណុច​ប្រទាក់ DCOP
 Comment[lt]=Pašto programa su DCOP sąsaja
+Comment[mk]=Програма за е-пошта, со DCOP-интерфејс
 Comment[ms]=Program Mel dengan antara muka  DCOP 
 Comment[nb]=E-postprogram med DCOP grensesnitt
 Comment[nds]=Nettpostprogramm mit DCOP-Koppelsteed
+Comment[ne]=DCOP इन्टरफेसमा मेल कार्यक्रम
 Comment[nl]=E-mailprogramma met een DCOP-interface
 Comment[nn]=E-postprogram med eit DCOP-grensesnitt
 Comment[pl]=Program pocztowy z interfejsem DCOP
Index: kmail/localsubscriptiondialog.h
===================================================================
--- kmail/localsubscriptiondialog.h	(.../tags/KDE/3.5.6/kdepim)	(wersja 0)
+++ kmail/localsubscriptiondialog.h	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -0,0 +1,67 @@
+/*  -*- c++ -*-
+    localsubscriptiondialog.h
+
+    This file is part of KMail, the KDE mail client.
+    Copyright (C) 2006 Till Adam <adam@kde.org>
+
+    KMail is free software; you can redistribute it and/or modify it
+    under the terms of the GNU General Public License, version 2, as
+    published by the Free Software Foundation.
+
+    KMail is distributed in the hope that it will be useful, but
+    WITHOUT ANY WARRANTY; without even the implied warranty of
+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
+    General Public License for more details.
+
+    You should have received a copy of the GNU General Public License
+    along with this program; if not, write to the Free Software
+    Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA
+
+    In addition, as a special exception, the copyright holders give
+    permission to link the code of this program with any edition of
+    the Qt library by Trolltech AS, Norway (or with modified versions
+    of Qt that use the same license as Qt), and distribute linked
+    combinations including the two.  You must obey the GNU General
+    Public License in all respects for all of the code used other than
+    Qt.  If you modify this file, you may extend this exception to
+    your version of the file, but you are not obligated to do so.  If
+    you do not wish to do so, delete this exception statement from
+    your version.
+*/
+
+#ifndef __LOCALSUBSCRIPTIONDIALOG
+#define __LOCALSUBSCRIPTIONDIALOG
+
+#include "subscriptiondialog.h"
+
+namespace KMail {
+  class ImapAccountBase;
+
+  class LocalSubscriptionDialog: public SubscriptionDialog
+  {
+    Q_OBJECT
+
+    public:
+      LocalSubscriptionDialog( QWidget *parent, const QString &caption,
+                               ImapAccountBase* acct,
+                               QString startPath = QString::null );
+      virtual ~LocalSubscriptionDialog();
+
+    protected:
+      /** reimpl */
+      virtual void listAllAvailableAndCreateItems();
+      /** reimpl */
+      virtual void processFolderListing();
+      /**  reimpl */
+      virtual void doSave();
+      virtual void loadingComplete();
+
+    private:
+      void setCheckedStateOfAllItems();
+
+      ImapAccountBase* mAccount;
+  };
+
+} // namespace KMail
+
+#endif
Index: kmail/profiles/profile-high-contrast-rc.desktop
===================================================================
--- kmail/profiles/profile-high-contrast-rc.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kmail/profiles/profile-high-contrast-rc.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -25,11 +25,14 @@
 Name[is]=Mikil birtuskil
 Name[it]=Alto contrasto
 Name[ja]=ハイコントラスト
+Name[kk]=Контрастығы жоғары
 Name[km]=កម្រិត​ពណ៌​ខ្ពស់
 Name[lt]=Didelis kontrastas
+Name[mk]=Висок контраст
 Name[ms]=Kontras Tinggi
 Name[nb]=Høy kontrast
 Name[nds]=Hoge Kontrast
+Name[ne]=उच्च ब्यतिरेक
 Name[nl]=Hoog contrast
 Name[nn]=Høg kontrast
 Name[pl]=Wysoki kontrast
@@ -75,12 +78,14 @@
 Comment[is]=Stærra letur fyrir notendur með slæma sjón
 Comment[it]=Dimensioni più grandi dei caratteri per chi ha problemi di vista
 Comment[ja]=視力障害者のために大きなフォントを使用します
+Comment[kk]=Көру қабілеті нашарларға арналған ірі қаріпті көрініс
 Comment[km]=បង្កើន​ទំហំពុម្ពអក្សរ ដើម្បី​បង្ក​លក្ខណៈ​ងាយស្រួល​ដល់​ជន​ពិការ​ភ្នែក
 Comment[lt]=Padidinti šriftų dydžiai blogai matantiems naudotojams
 Comment[lv]=Palielināti fontu izmēri lietotājiem ar redzes traucējumiem
 Comment[ms]=Saiz fon ditambah untuk pengguna cacat penglihatan 
 Comment[nb]=Økte skriftstørrelser for svaksynte brukere
 Comment[nds]=Grötter Tekens för kiekbehinnert Brukers
+Comment[ne]=दृश्यात्मक विकृत प्रयोगकर्ताका लागि बढाइएको फन्ट साइज
 Comment[nl]=Groter lettertype voor slechtziende gebruikers
 Comment[nn]=Auka skriftstorleik for synshemma brukarar
 Comment[pl]=Zwiększone rozmiary czcionek dla osób mających problemy ze wzrokiem
Index: kmail/profiles/profile-default-rc.desktop
===================================================================
--- kmail/profiles/profile-default-rc.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kmail/profiles/profile-default-rc.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -3,7 +3,7 @@
 Name[af]=Standaard
 Name[ar]=الإفتراضي
 Name[az]=Əsas
-Name[be]=Па ўмаўчаньні
+Name[be]=Па ўмаўчанні
 Name[bg]=Стандартен
 Name[br]=Dre ziouer
 Name[bs]=Podrazumijevano
@@ -30,13 +30,16 @@
 Name[is]=Sjálfgefið
 Name[it]=Predefinito
 Name[ja]=標準
+Name[kk]=Әдетті
 Name[km]=លំនាំដើម
 Name[lt]=Numatytasis
 Name[lv]=Noklusētais
+Name[mk]=Стандарден
 Name[ms]=Piawai
 Name[mt]=Normali
 Name[nb]=Standard
 Name[nds]=Standard
+Name[ne]=पूर्वनिर्धारित
 Name[nl]=Standaard
 Name[nn]=Standard
 Name[pa]=ਮੂਲ
@@ -92,12 +95,15 @@
 Comment[is]=Venjulegt snið
 Comment[it]=Profilo standard
 Comment[ja]=標準プロファイル
+Comment[kk]=Стандартты профилі
 Comment[km]=ទម្រង់​ខ្នាត​គំរូ
 Comment[lt]=Standartinis profilis
 Comment[lv]=Standarta profils
+Comment[mk]=Стандарден профил
 Comment[ms]=Profail Standard
 Comment[nb]=Standardprofil
 Comment[nds]=Standardprofil
+Comment[ne]=मानक प्रोफाइल
 Comment[nl]=Standaard profiel
 Comment[nn]=Standardprofil
 Comment[pl]=Profil standardowy
Index: kmail/profiles/profile-html-rc.desktop
===================================================================
--- kmail/profiles/profile-html-rc.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kmail/profiles/profile-html-rc.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,10 +1,12 @@
 [KMail Profile]
 Name=HTML
+Name[ar]=لغة علامات النص الفائق
 Name[bg]=Поддръжка на HTML
 Name[fa]=زنگام
+Name[ne]=एचटीएमएल
 Comment=Standard profile with HTML preview enabled - less secure!
 Comment[af]=Standaard profiel, met HTML voorskou geaktiveer. Dis minder veilig!
-Comment[ar]=تشكيل قياسي مع تمكين استعراض HTML - أقل أمانا!
+Comment[ar]=الشاكلة المعيارية مع تمكين معاينة لغة  علامة النص الفائق HTML - أقل أمناً !
 Comment[az]=HTML nümayişli standard - ən az etibarlı!
 Comment[bg]=Стандартен профил с поддръжка на HTML в писмата (по-малко сигурен)
 Comment[bs]=Standardni profil sa omogućenim HTML pregledom - manje siguran!
@@ -27,13 +29,16 @@
 Comment[hu]=Standard profil, HTML-előnézettel (kevésbé biztonságos)
 Comment[is]=Staðlað snið með HTML forsýn - minna öryggi!
 Comment[it]=Profilo standard con l'anteprima HTML abilitata - meno sicuro!
-Comment[ja]=HTMLプレビューを有効にした標準プロファイル - 安全度は下がります!
+Comment[ja]=HTML プレビューを有効にした標準プロファイル - 安全度は下がります!
+Comment[kk]=Стандартты, HTML көрінісі бар профилі - қауіпсізігі төмен!
 Comment[km]=ទម្រង់​ខ្នាត​គំរូ​ដែល​អាច​មើល HTML ជាមុន - មិន​សូវ​មាន​សុវត្ថិភាព​ឡើយ !
 Comment[lt]=Standartinis profilis su HTML peržiūra – mažiau saugus!
 Comment[lv]=Standarta profils ar atļautu HTML apskati - nedrošāks!
+Comment[mk]=Стандарден профил со овозможен преглед на HTML - помалку безбедно!
 Comment[ms]=Profil piawai dengan paparan HTML diaktifkan - kurang selamat!
 Comment[nb]=Standardprofil med forhåndsvisning av HTML - mindre sikkert!
 Comment[nds]=Standardprofil mit aktiveert HTML-Vöransicht - weniger seker
+Comment[ne]=एचटीएमएल पूर्वावलोकनको मानक प्रोफाइल सक्षम पारियो - कम सुरक्षित!
 Comment[nl]=Standaardprofiel met HTML-voorbeeld geactiveerd - minder veilig!
 Comment[nn]=Standard profil med HTML-vising slått på - mindre trygt!
 Comment[pl]=Standardowy profil z włączonym podglądem HTML - mniej bezpieczny!
Index: kmail/profiles/profile-purist-rc.desktop
===================================================================
--- kmail/profiles/profile-purist-rc.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kmail/profiles/profile-purist-rc.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -18,11 +18,13 @@
 Name[hu]=Egyszerűsített
 Name[it]=Purista
 Name[ja]=純正
+Name[kk]=Пурист
 Name[km]=បរិសុទ្ធ
 Name[lt]=Itin paprastas
 Name[lv]=Puritānis
 Name[ms]=Mementingkan Istilah Yang Betul
 Name[nds]=Reen
+Name[ne]=संस्कारक
 Name[nn]=Enkel
 Name[pl]=Czysty
 Name[pt]=Purista
@@ -67,13 +69,16 @@
 Comment[hu]=A legtöbb extra kikapcsolva, a KDE alapértelmezéseinek felhasználásával
 Comment[is]=Slökkt á flestum aukahlutum, notast við víðværar stillingar KDE
 Comment[it]=La maggior parte delle funzioni sono disabilitate, vengono usate le impostazioni globali di KDE
-Comment[ja]=ほとんどの機能を無効にし、KDEの全体設定を使用します
+Comment[ja]=ほとんどの機能を無効にし、KDE の全体設定を使用します
+Comment[kk]=Мүмкіндіктердің көбі, KDE жалпылары ғана қалдырып, өшірілген
 Comment[km]=លក្ខណៈ​ពិសេស​ភាគ​ច្រើន​ត្រូវ​បាន​បិទ ដោយ​ប្រើ​តែ​ការ​កំណត់​សកល​របស់ KDE ប៉ុណ្ណោះ
 Comment[lt]=Dauguma savybių išjungta, naudojami globalūs KDE nustatymai
 Comment[lv]=Vairums īpašību izslēgtas, tiek izmantoti KDE globālie uzstādījumi
+Comment[mk]=Повеќето карактеристики се исклучени, се користат глобалните поставувања на KDE
 Comment[ms]=Kebanyakan cirian ditutup, seting global KDE digunakan
 Comment[nb]=De fleste funksjoner slått av, KDEs globale innstillinger er i bruk
 Comment[nds]=Mehrste Funkschonen utmaakt, globaal KDE-Vörinstellen warrt bruukt
+Comment[ne]=धेरै विशेषता बन्द गरिएका छन, केडीई विश्वव्यापी सेटिङ प्रयोग गरिएका छन्
 Comment[nl]=Meeste mogelijkheden uitgezet, de globale KDE-instellingen worden gebruikt
 Comment[nn]=Dei fleste funksjonar er slått av, globale KDE-innstillingar vert brukt
 Comment[pl]=Większość opcji wyłączona, używane są domyślne ustawienia KDE
@@ -90,7 +95,7 @@
 Comment[tg]=Бисёри имкониятҳои иловагӣ ғайрифаъол шудаанд, танзимотҳои глобалии KDE истифода шуда истодаанд
 Comment[th]=คุณสมบัติส่วนมากถูกปิดการใช้ และใช้ค่าทั่วไปของ KDE แทน
 Comment[tr]=Bir çok özellik kapatılmış, KDE'nin küresel ayarları kullanılır
-Comment[uk]=Більшість функцій вимкнено, вживаються глобальні установки KDE
+Comment[uk]=Більшість функцій вимкнено, вживаються глобальні параметри KDE
 Comment[ven]=Zwithu zwinzhi zwo tsimiwa, mavhekanyelo a KDE a hothe na hothe a khu shumiswa
 Comment[vi]=Hầu hết các chức năng tắt, Thiết lập toàn cục của KDE được dùng 
 Comment[xh]=Imisebenzi emininzi icinyiwe, izicwangciso ezingqukuva ze KDE ziyasetyenziswa
Index: kmail/profiles/profile-secure-rc.desktop
===================================================================
--- kmail/profiles/profile-secure-rc.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kmail/profiles/profile-secure-rc.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,6 +1,7 @@
 [KMail Profile]
 Name=Most Secure
 Name[af]=Veiligste
+Name[ar]=الأكثر آمن
 Name[bg]=Сигурност
 Name[bs]=Najsigurniji
 Name[ca]=Més segur
@@ -23,11 +24,14 @@
 Name[is]=Öruggast
 Name[it]=Massima sicurezza
 Name[ja]=最も安全
+Name[kk]=Ең қауіпсіз
 Name[km]=សុវត្ថិភាព​បំផុត
 Name[lt]=Saugiausias
+Name[mk]=Најбезбедно
 Name[ms]=Paling Selamat
 Name[nb]=Sikrest
 Name[nds]=Sekerst
+Name[ne]=सबैभन्दा सुरक्षित
 Name[nl]=Meest veilig
 Name[nn]=Tryggast
 Name[pa]=ਜਿਆਦਾ ਸੁਰੱਖਿਅਤ
@@ -71,11 +75,14 @@
 Comment[is]=Setur allar stillingar þannig að öryggið sé mest
 Comment[it]=Imposta tutte le opzioni necessario per ottenere la massima sicurezza
 Comment[ja]=最大のセキュリティ確保のために必要なすべてのオプションを設定します
+Comment[kk]=Қауіпсіздігі мейілінше арттырып бапталғаны
 Comment[km]=កំណត់​ជម្រើស​ចាំបាច់​ទាំងអស់ ដើម្បី​ទទួល​បាន​សុវត្ថិភាព​ខ្ពស់​បំផុត
 Comment[lt]=Nustato visas būtinas maksimaliam saugumui parinktis
+Comment[mk]=Ги поставува сите потребни опции за да се постигне максимална безбедност
 Comment[ms]=Mengeset semua opsyen yang perlu untuk mencapai keselamatan maksimum 
 Comment[nb]=Setter opp alle nødvendige innstillinger for å oppnå høyeste sikkerhet
 Comment[nds]=All Optschonen op maximale Sekerheit
+Comment[ne]=अधिकतम सुरक्षा प्राप्त गर्न सबै आवश्यक विकल्प सेट गर्छ
 Comment[nl]=Stelt alle benodigde opties in voor maximale veiligheid
 Comment[nn]=Set alle nødvendige innstillingar for maksimal tryggleik
 Comment[pl]=Włącza wszystkie opcje zapewniające najwięcej bezpieczeństwa
Index: kmail/kmacctmaildir.cpp
===================================================================
--- kmail/kmacctmaildir.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kmail/kmacctmaildir.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -127,7 +127,7 @@
     return;
   }
 
-  rc = mailFolder.open();
+  rc = mailFolder.open("acctmaildirMail");
   if (rc)
   {
     QString aStr = i18n("<qt>Cannot open folder <b>%1</b>.</qt>").arg( mailFolder.location() );
@@ -138,7 +138,7 @@
     return;
   }
 
-  mFolder->open();
+  mFolder->open("acctmaildirFold");
 
 
   num = mailFolder.count();
@@ -203,8 +203,8 @@
   }
   // else warning is written already
 
-  mailFolder.close();
-  mFolder->close();
+  mailFolder.close("acctmaildirMail");
+  mFolder->close("acctmaildirFold");
 
   checkDone( hasNewMail, CheckOK );
 
Index: kmail/application_octetstream.desktop
===================================================================
--- kmail/application_octetstream.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kmail/application_octetstream.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -13,9 +13,11 @@
 Name[gl]=Aplicación Octetstream
 Name[hu]=Alkalmazás-adatfolyam
 Name[ja]=アプリケーション オクテット ストリーム
+Name[kk]=Қолданбаның бинарлы ағымы
 Name[km]=Octetstream កម្មវិធី
 Name[ms]=Aliran Oktet  Aplikasi
 Name[nb]=Program Octetstrøm
+Name[ne]=अक्टेस्ट्रिम अनुप्रयोग
 Name[nl]=Applicatie octetstroom
 Name[nn]=Oktettstraum frå program
 Name[pl]=Dane binarne
@@ -50,10 +52,12 @@
 Comment[is]=Sniðmátstól fyrir application/octet-stream
 Comment[it]=Un plugin per formattare application/octet-stream
 Comment[ja]=application/octet-stream の Bodypart フォーマッタプラグイン
+Comment[kk]=Application/octet-stream үшін пішімдегіш модулі
 Comment[km]=កម្មវិធី​ជំនួយ​កម្មវិធី​ធ្វើ​ទ្រង់ទ្រាយ​ផ្នែក​តួ សម្រាប់​កម្មវិធី/octet-stream
 Comment[ms]=Plugin pemformat bahagian isi untuk alpikasi/aliran oktet
 Comment[nb]=Et programtillegg for meldingstekst-formatering for application/octet-stream
 Comment[nds]=En Hööftdeel-Formateermoduul för application/octet-stream
+Comment[ne]=अनुप्रयोग/अक्टेट-स्ट्रिमका लागि एउटा मूख्यभाग ढाँचाकार
 Comment[nl]=Een opmaakplugin voor application/octet-stream
 Comment[nn]=Eit programtillegg for formatering av meldingstekst i application/octet-stream
 Comment[pl]=Wtyczka formatowania danych typu application/octet-stream
Index: kmail/kmmsgpart.cpp
===================================================================
--- kmail/kmmsgpart.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kmail/kmmsgpart.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -10,6 +10,7 @@
 #include "kmkernel.h"
 #include "kmmessage.h"
 #include "globalsettings.h"
+#include "util.h"
 
 #include <kasciistringtools.h>
 #include <kmime_charfreq.h>
@@ -102,7 +103,7 @@
 //-----------------------------------------------------------------------------
 void KMMessagePart::setBody(const QCString &aStr)
 {
-  mBody.duplicate( aStr.data(), aStr.length() );
+  KMail::Util::setFromQCString( mBody, aStr );
 
   int enc = cte();
   if (enc == DwMime::kCte7bit || enc == DwMime::kCte8bit || enc == DwMime::kCteBinary)
@@ -111,6 +112,28 @@
     mBodyDecodedSize = -1; // Can't know the decoded size
 }
 
+void KMMessagePart::setBody(const DwString &aStr)
+{
+  mBody.duplicate( aStr.c_str(), aStr.length() );
+
+  int enc = cte();
+  if (enc == DwMime::kCte7bit || enc == DwMime::kCte8bit || enc == DwMime::kCteBinary)
+    mBodyDecodedSize = mBody.size();
+  else
+    mBodyDecodedSize = -1; // Can't know the decoded size
+}
+
+void KMMessagePart::setBody(const QByteArray &aStr)
+{
+  mBody = aStr;
+
+  int enc = cte();
+  if (enc == DwMime::kCte7bit || enc == DwMime::kCte8bit || enc == DwMime::kCteBinary)
+    mBodyDecodedSize = mBody.size();
+  else
+    mBodyDecodedSize = -1; // Can't know the decoded size
+}
+
 void KMMessagePart::setBodyFromUnicode( const QString & str ) {
   QCString encoding = KMMsgBase::autoDetectCharset( charset(), KMMessage::preferredCharsets(), str );
   if ( encoding.isEmpty() )
@@ -161,8 +184,7 @@
 //-----------------------------------------------------------------------------
 void KMMessagePart::setBodyEncoded(const QCString& aStr)
 {
-  mBodyDecodedSize = aStr.length();
-
+  mBodyDecodedSize = aStr.size() - 1; // same as aStr.length() but faster - assuming no embedded nuls
   switch (cte())
   {
   case DwMime::kCteQuotedPrintable:
@@ -191,6 +213,7 @@
   case DwMime::kCte7bit:
   case DwMime::kCte8bit:
   case DwMime::kCteBinary:
+    // This is slow and memory hungry - consider using setBodyEncodedBinary instead!
     mBody.duplicate( aStr.data(), mBodyDecodedSize );
     break;
   }
@@ -224,7 +247,7 @@
 				       bool allow8Bit,
                                        bool willBeSigned )
 {
-  mBodyDecodedSize = aBuf.length();
+  mBodyDecodedSize = aBuf.size() - 1; // same as aStr.length() but faster - assuming no embedded nuls
 
   CharFreq cf( aBuf.data(), mBodyDecodedSize ); // save to pass null strings
 
@@ -270,12 +293,38 @@
   case DwMime::kCte7bit:
   case DwMime::kCte8bit:
   case DwMime::kCteBinary:
-    mBody.duplicate( aStr );
+    //mBody.duplicate( aStr );
+    mBody = aStr;
+    // Caller has to detach before it modifies aStr!
     break;
   }
 }
 
+//-----------------------------------------------------------------------------
+void KMMessagePart::setMessageBody( const QByteArray& aBuf )
+{
+  CharFreq cf( aBuf ); // it's safe to pass null arrays
+  mBodyDecodedSize = aBuf.size();
 
+  int cte;
+  switch ( cf.type() ) {
+  case CharFreq::SevenBitText:
+  case CharFreq::SevenBitData:
+     cte = DwMime::kCte7bit;
+     break;
+  case CharFreq::EightBitText:
+  case CharFreq::EightBitData:
+     cte = DwMime::kCte8bit;
+     break;
+  default:
+     kdWarning(5006) << "Calling " << k_funcinfo
+         << " with something containing neither 7 nor 8 bit text!"
+         << " Fix this caller: " << kdBacktrace() << endl;
+  }
+  setCte( cte );
+  setBodyEncodedBinary( aBuf );
+}
+
 //-----------------------------------------------------------------------------
 QByteArray KMMessagePart::bodyDecodedBinary() const
 {
@@ -348,13 +397,12 @@
 
   if ( decodeBinary ) {
     len = mBody.size();
-    result.resize( len+1 /* trailing NUL */ );
-    memcpy(result.data(), mBody.data(), len);
-    result[len] = 0;
+    KMail::Util::setFromByteArray( result, mBody );
   }
 
-  kdWarning( result.length() != (unsigned int)len, 5006 )
-    << "KMMessagePart::bodyDecoded(): body is binary but used as text!" << endl;
+  // Calls length -> slow
+  //kdWarning( result.length() != (unsigned int)len, 5006 )
+  //  << "KMMessagePart::bodyDecoded(): body is binary but used as text!" << endl;
 
   result = result.replace( "\r\n", "\n" ); // CRLF -> LF conversion
 
@@ -505,17 +553,17 @@
 QString KMMessagePart::fileName(void) const
 {
   QCString str;
-  
-  // Allow for multiple filname*0, filename*1, ... params (defined by RFC 2231) 
+
+  // Allow for multiple filname*0, filename*1, ... params (defined by RFC 2231)
   // in the Content-Disposision
   if ( mContentDisposition.contains( "filename*", FALSE ) ) {
-  
+
     // It's RFC 2231 encoded, so extract the file name with the 2231 method
     str = KMMsgBase::extractRFC2231HeaderField( mContentDisposition, "filename" );
     return KMMsgBase::decodeRFC2231String(str);
-  
+
   } else {
-    
+
     // Standard RFC 2047-encoded
     // search the start of the filename
     int startOfFilename = mContentDisposition.find("filename=", 0, FALSE);
@@ -540,14 +588,16 @@
                            .stripWhiteSpace();
     return KMMsgBase::decodeRFC2047String(str, charset());
   }
-  
+
   return QString::null;
 }
 
-
-
 QCString KMMessagePart::body() const
 {
   return QCString( mBody.data(), mBody.size() + 1 ); // space for trailing NUL
 }
 
+DwString KMMessagePart::dwBody() const
+{
+  return KMail::Util::dwString( mBody );
+}
Index: kmail/kmedit.cpp
===================================================================
--- kmail/kmedit.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kmail/kmedit.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -60,6 +60,8 @@
 {
     if (e->provides(MailListDrag::format()))
         e->accept(true);
+    else if (e->provides("image/png"))
+        e->accept();
     else
         return KEdit::contentsDragEnterEvent(e);
 }
@@ -68,6 +70,8 @@
 {
     if (e->provides(MailListDrag::format()))
         e->accept();
+    else if (e->provides("image/png"))
+        e->accept();
     else
         return KEdit::contentsDragMoveEvent(e);
 }
@@ -164,6 +168,9 @@
                                          identity, mComposer);
         command->start();
     }
+    else if( e->provides("image/png") ) {
+        emit attachPNGImageData(e->encodedData("image/png"));
+    }
     else if( KURLDrag::canDecode( e ) ) {
         KURL::List urlList;
         if( KURLDrag::decode( e, urlList ) ) {
Index: kmail/kmmessage.h
===================================================================
--- kmail/kmmessage.h	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kmail/kmmessage.h	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -208,7 +208,7 @@
   /** Parse the string and create this message from it. */
   void fromDwString(const DwString& str, bool setStatus=FALSE);
   void fromString(const QCString& str, bool setStatus=FALSE);
-  void fromByteArray( const QByteArray & ba, bool setStatus=false );
+  void fromByteArray(const QByteArray & ba, bool setStatus=false);
 
   /** Return the entire message contents in the DwString. This function
       is *fast* even for large message since it does *not* involve a
@@ -230,7 +230,7 @@
    * Return the message contents with the headers that should not be
    * sent stripped off.
    */
-  QCString asSendableString() const;
+  QByteArray asSendableString() const;
 
   /**
    * Return the message header with the headers that should not be
@@ -526,6 +526,8 @@
 
   /** Set the message body. Does not encode the body. */
   void setBody(const QCString& aStr);
+  void setBody(const DwString& aStr);
+  void setBody(const char* aStr); // avoid ambiguous calls
 
   /** Hack to enable structured body parts to be set as flat text... */
   void setMultiPartBody( const QCString & aStr );
@@ -853,10 +855,16 @@
   /** Set cursor position as offset from message start */
   void setCursorPos(int pos) { mCursorPos = pos; };
 
+  /* This is set in kmreaderwin if a message is being parsed to avoid
+     other parts of kmail (e.g. kmheaders) destroying the message. 
+     Parsing can take longer and can be async (in case of gpg mails) */
+  bool isBeingParsed() const { return mIsParsed; }
+  void setIsBeingParsed( bool t ) { mIsParsed = t; }
+
 private:
 
   /** Initialization shared by the ctors. */
-  void init();
+  void init( DwMessage* aMsg = 0 );
   /** Assign the values of @param other to this message. Used in the copy c'tor. */
   void assign( const KMMessage& other );
 
@@ -867,6 +875,7 @@
   bool mDecodeHTML :1;
   bool mReadyToShow :1;
   bool mComplete :1;
+  bool mIsParsed : 1;
   static const KMail::HeaderStrategy * sHeaderStrategy;
   static QString sForwardStr;
   const QTextCodec * mOverrideCodec;
Index: kmail/kmmsgdict.cpp
===================================================================
--- kmail/kmmsgdict.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kmail/kmmsgdict.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -16,6 +16,7 @@
 #include <stdio.h>
 #include <unistd.h>
 
+#include <string.h>
 #include <errno.h>
 
 #include <config.h>
@@ -73,8 +74,7 @@
   KMMsgDictREntry(int size = 0)
   {
     array.resize(size);
-    for (int i = 0; i < size; i++)
-      array.at(i) = 0;
+    memset(array.data(), 0, array.size() * sizeof(KMMsgDictEntry *));  // faster than a loop
     fp = 0;
     swapByteOrder = false;
     baseOffset = 0;
@@ -412,6 +412,19 @@
   if (swapByteOrder)
      count = kmail_swap_32(count);
 
+  // quick consistency check to avoid allocating huge amount of memory
+  // due to reading corrupt file (#71549)
+  long pos = ftell(fp);       // store current position
+  fseek(fp, 0, SEEK_END);
+  long fileSize = ftell(fp);  // how large is the file ?
+  fseek(fp, pos, SEEK_SET);   // back to previous position
+
+  // the file must at least contain what we try to read below
+  if ( (fileSize - pos) < (long)(count * sizeof(Q_UINT32)) ) {
+    fclose(fp);
+    return -1;
+  }
+
   KMMsgDictREntry *rentry = new KMMsgDictREntry(count);
 
   for (unsigned int index = 0; index < count; index++) {
Index: kmail/kmail_config_misc.desktop
===================================================================
--- kmail/kmail_config_misc.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kmail/kmail_config_misc.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -36,11 +36,14 @@
 Name[is]=Ýmislegt
 Name[it]=Varie
 Name[ja]=その他
+Name[kk]=Басқалары
 Name[km]=ផ្សេងៗ
 Name[lt]=Įvairūs
+Name[mk]=Разно
 Name[ms]=Pelbagai
 Name[nb]=Div
 Name[nds]=Anner Saken
+Name[ne]=विविध
 Name[nl]=Diversen
 Name[nn]=Ymse
 Name[pa]=ਫੁਟਕਲ
@@ -82,11 +85,14 @@
 Comment[is]=Stillingar sem passa ekki annars staðar
 Comment[it]=Impostazioni che non rientrano in altre categorie
 Comment[ja]=その他の設定
+Comment[kk]=Басқа параметрлері
 Comment[km]=ការ​កំណត់​ដែល​មិន​ត្រូវ​នឹង​កន្លែង​ផ្សេង
 Comment[lt]=Kiti nustatymai
+Comment[mk]=Поставувања што не се вклопуваат на друго место
 Comment[ms]=Seting yang tidak muat di tempat lain
 Comment[nb]=Instillinger som ikke passer andre steder
 Comment[nds]=Verscheden Instellen
+Comment[ne]=कतै पनि नमिल्ने सेटिङ
 Comment[nl]=Instellingen die nergens echt passen
 Comment[nn]=Innstillingar som ikkje passar andre stader
 Comment[pl]=Ustawienia, które nie pasują gdzie indziej
@@ -128,9 +134,11 @@
 Keywords[ja]=kmail,その他
 Keywords[km]=kmail,ផ្សេងៗ
 Keywords[lt]=kmail,misc,įvairūs
+Keywords[mk]=kmail,misc,кпошта,разно
 Keywords[ms]=kmail,pelbagai
 Keywords[nb]=kmail,div
 Keywords[nds]=KMail,anner,saken
+Keywords[ne]=केडीई मेल, विविध
 Keywords[nl]=kmail,diversen
 Keywords[nn]=KMail,ymse
 Keywords[pl]=kmail,różne,inne
Index: kmail/annotationjobs.cpp
===================================================================
--- kmail/annotationjobs.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kmail/annotationjobs.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -184,4 +184,70 @@
   return new MultiSetAnnotationJob( slave, url, annotations, false /*showProgressInfo*/ );
 }
 
+
+AnnotationJobs::MultiUrlGetAnnotationJob::MultiUrlGetAnnotationJob( KIO::Slave* slave,
+                                                                    const KURL& baseUrl,
+                                                                    const QStringList& paths,
+                                                                    const QString& annotation )
+  : KIO::Job( false ),
+    mSlave( slave ),
+    mUrl( baseUrl ),
+    mPathList( paths ),
+    mPathListIterator( mPathList.begin() ),
+    mAnnotation( annotation )
+{
+  QTimer::singleShot(0, this, SLOT(slotStart()));
+}
+
+
+void AnnotationJobs::MultiUrlGetAnnotationJob::slotStart()
+{
+  if ( mPathListIterator != mPathList.end() ) {
+    QStringList attributes;
+    attributes << "value";
+    KURL url(mUrl);
+    url.setPath( *mPathListIterator );
+    KIO::Job* job = getAnnotation( mSlave, url, mAnnotation, attributes );
+    addSubjob( job );
+  } else { // done!
+    emitResult();
+  }
+}
+
+void AnnotationJobs::MultiUrlGetAnnotationJob::slotResult( KIO::Job *job )
+{
+  if ( job->error() ) {
+    KIO::Job::slotResult( job ); // will set the error and emit result(this)
+    return;
+  }
+  subjobs.remove( job );
+  const QString& path = *mPathListIterator;
+  GetAnnotationJob* getJob = static_cast<GetAnnotationJob *>( job );
+  const AnnotationList& lst = getJob->annotations();
+  for ( unsigned int i = 0 ; i < lst.size() ; ++ i ) {
+    kdDebug(5006) << "MultiURL: found annotation " << lst[i].name << " = " << lst[i].value << " for path: " << path << endl;
+    if ( lst[i].name.startsWith( "value." ) ) { // value.priv or value.shared
+      mAnnotations.insert( path, lst[i].value );
+      break;
+    }
+  }
+  // Move on to next one
+  ++mPathListIterator;
+  slotStart();
+}
+
+QMap<QString, QString> AnnotationJobs::MultiUrlGetAnnotationJob::annotations() const
+{
+  return mAnnotations;
+}
+
+AnnotationJobs::MultiUrlGetAnnotationJob* AnnotationJobs::multiUrlGetAnnotation( KIO::Slave* slave,
+                                                                                 const KURL& baseUrl,
+                                                                                 const QStringList& paths,
+                                                                                 const QString& annotation )
+{
+  return new MultiUrlGetAnnotationJob( slave, baseUrl, paths, annotation );
+}
+
+
 #include "annotationjobs.moc"
Index: kmail/kmfoldermaildir.cpp
===================================================================
--- kmail/kmfoldermaildir.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kmail/kmfoldermaildir.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -28,7 +28,6 @@
 #include <kstaticdeleter.h>
 #include <kmessagebox.h>
 
-#include <ctype.h>
 #include <dirent.h>
 #include <errno.h>
 #include <stdlib.h>
@@ -59,7 +58,7 @@
 //-----------------------------------------------------------------------------
 KMFolderMaildir::~KMFolderMaildir()
 {
-  if (mOpenCount>0) close(true);
+  if (mOpenCount>0) close("~foldermaildir", true);
   if (kmkernel->undoStack()) kmkernel->undoStack()->folderDestroyed( folder() );
 }
 
@@ -97,7 +96,7 @@
 }
 
 //-----------------------------------------------------------------------------
-int KMFolderMaildir::open()
+int KMFolderMaildir::open(const char *)
 {
   int rc = 0;
 
@@ -220,7 +219,7 @@
 
 
 //-----------------------------------------------------------------------------
-void KMFolderMaildir::close(bool aForced)
+void KMFolderMaildir::close(const char *, bool aForced)
 {
   if (mOpenCount <= 0) return;
   if (mOpenCount > 0) mOpenCount--;
@@ -406,7 +405,7 @@
   if ( !uidHeader.isEmpty() && stripUid )
     aMsg->removeHeaderField( "X-UID" );
 
-  msgText = aMsg->asString();
+  msgText = aMsg->asString(); // TODO use asDwString instead
   len = msgText.length();
 
   // Re-add the uid so that the take can make use of it, in case the
@@ -435,7 +434,7 @@
   if (!isOpened())
   {
     opened = true;
-    rc = open();
+    rc = open("maildir");
     kdDebug(5006) << "KMFolderMaildir::addMsg-open: " << rc << " of folder: " << label() << endl;
     if (rc) return rc;
   }
@@ -446,7 +445,7 @@
   if (moveInternal(tmp_file, new_loc, filename, aMsg->status()).isNull())
   {
     file.remove();
-    if (opened) close();
+    if (opened) close("maildir");
     return -1;
   }
 
@@ -544,7 +543,7 @@
   emitMsgAddedSignals(idx);
   needsCompact = true;
 
-  if (opened) close();
+  if (opened) close("maildir" );
 /*
 QFile fileD1( "testdat_xx-kmfoldermaildir-1" );
 if( fileD1.open( IO_WriteOnly ) ) {
@@ -594,29 +593,6 @@
 }
 
 
-QCString& KMFolderMaildir::getMsgString(int idx, QCString& mDest)
-{
-  KMMsgInfo* mi = (KMMsgInfo*)mMsgList[idx];
-
-  assert(mi!=0);
-
-  QString abs_file(location() + "/cur/");
-  abs_file += mi->fileName();
-
-  if (QFile::exists(abs_file) == false)
-  {
-    kdDebug(5006) << "The " << abs_file << " file doesn't exist!" << endl;
-    return mDest;
-  }
-
-  QFileInfo fi( abs_file );
-  mDest.resize(fi.size()+2);
-  mDest = KPIM::kFileToString(abs_file, false, false);
-  size_t newMsgSize = KMail::Util::crlf2lf( mDest.data(), fi.size() );
-  mDest[newMsgSize] = '\0';
-  return mDest;
-}
-
 void KMFolderMaildir::readFileHeaderIntern(const QString& dir, const QString& file, KMMsgStatus status)
 {
   // we keep our current directory to restore it later
@@ -734,7 +710,7 @@
         int cidx = contentTypeStr.find( "charset=" );
         if ( cidx != -1 ) {
           charset = contentTypeStr.mid( cidx + 8 );
-          if ( charset[0] == '"' ) {
+          if ( !charset.isEmpty() && ( charset[0] == '"' ) ) {
             charset = charset.mid( 1 );
           }
           cidx = 0;
Index: kmail/folderdiaquotatab_p.cpp
===================================================================
--- kmail/folderdiaquotatab_p.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 0)
+++ kmail/folderdiaquotatab_p.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -0,0 +1,111 @@
+/**
+ * folderdiaquotatab.cpp
+ *
+ * Copyright (c) 2006 Till Adam <adam@kde.org>
+ *
+ *
+ *  This program is free software; you can redistribute it and/or modify
+ *  it under the terms of the GNU General Public License as published by
+ *  the Free Software Foundation; version 2 of the License
+ *
+ *  This program is distributed in the hope that it will be useful,
+ *  but WITHOUT ANY WARRANTY; without even the implied warranty of
+ *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+ *  GNU General Public License for more details.
+ *
+ *  You should have received a copy of the GNU General Public License
+ *  along with this program; if not, write to the Free Software
+ *  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA.
+ *
+ *  In addition, as a special exception, the copyright holders give
+ *  permission to link the code of this program with any edition of
+ *  the Qt library by Trolltech AS, Norway (or with modified versions
+ *  of Qt that use the same license as Qt), and distribute linked
+ *  combinations including the two.  You must obey the GNU General
+ *  Public License in all respects for all of the code used other than
+ *  Qt.  If you modify this file, you may extend this exception to
+ *  your version of the file, but you are not obligated to do so.  If
+ *  you do not wish to do so, delete this exception statement from
+ *  your version.
+ */
+
+#include "folderdiaquotatab_p.h"
+
+#include <qlayout.h>
+#include <qlabel.h>
+#include <qprogressbar.h>
+#include <qwhatsthis.h>
+#include <qcombobox.h>
+
+#include <math.h>
+
+#include "kmkernel.h"
+#include "klocale.h"
+#include "kconfig.h"
+#include "kdebug.h"
+#include "kdialog.h"
+#include "globalsettings.h"
+#include "quotajobs.h"
+
+using namespace KMail;
+
+struct QuotaInfo;
+
+QuotaWidget::QuotaWidget( QWidget* parent, const char* name )
+        :QWidget( parent, name )
+{
+      QVBoxLayout *box = new QVBoxLayout(this);
+      QWidget *stuff = new QWidget( this );
+      QGridLayout* layout =
+          new QGridLayout( stuff, 3, 3,
+                           KDialog::marginHint(),
+                           KDialog::spacingHint() );
+      mInfoLabel = new QLabel("", stuff );
+      mRootLabel = new QLabel("", stuff );
+      mProgressBar = new QProgressBar( stuff );
+      layout->addWidget( new QLabel( i18n("Root:" ), stuff ), 0, 0 );
+      layout->addWidget( mRootLabel, 0, 1 );
+      layout->addWidget( new QLabel( i18n("Usage:"), stuff ), 1, 0 );
+      //layout->addWidget( new QLabel( i18n("Status:"), stuff ), 2, 0 );
+      layout->addWidget( mInfoLabel, 1, 1 );
+      layout->addWidget( mProgressBar, 2, 1 );
+      box->addWidget( stuff );
+      box->addStretch( 2 );
+
+      readConfig();
+}
+
+void QuotaWidget::setQuotaInfo( const QuotaInfo& info )
+{
+      // we are assuming only to get STORAGE type info here, thus
+      // casting to int is safe
+      int current = info.current().toInt();
+      int max = info.max().toInt();
+      int factor = static_cast<int> ( pow( 1000, mFactor ) );
+      mProgressBar->setProgress( current, max );
+      mInfoLabel->setText( i18n("%1 of %2 %3 used").arg( current/factor )
+                                .arg( max/factor ).arg( mUnits ) );
+      mRootLabel->setText( info.root() );
+}
+
+void QuotaWidget::readConfig()
+{
+      if( GlobalSettings::self()->quotaUnit() == GlobalSettings::EnumQuotaUnit::KB )
+      {
+            mUnits = QString( i18n("KB") );
+            mFactor = 0;
+      }
+      else if( GlobalSettings::self()->quotaUnit() == GlobalSettings::EnumQuotaUnit::MB )
+           {
+                mUnits = QString( i18n("MB") );
+                mFactor = 1;
+           }
+      else if( GlobalSettings::self()->quotaUnit() == GlobalSettings::EnumQuotaUnit::GB )
+           {
+               mUnits = QString( i18n("GB") );
+               mFactor = 2;
+           }
+}
+
+
+#include "folderdiaquotatab_p.moc"
Index: kmail/kmreadermainwin.cpp
===================================================================
--- kmail/kmreadermainwin.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kmail/kmreadermainwin.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -132,13 +132,13 @@
   KMMsgDict::instance()->getLocation( mMsg->getMsgSerNum(), &parent, &index );
   if ( parent && !parent->isTrash() ) {
     // open the folder (ref counted)
-    parent->open();
+    parent->open("trashmsg");
     KMMessage *msg = parent->getMsg( index );
     if (msg) {
       KMDeleteMsgCommand *command = new KMDeleteMsgCommand( parent, msg );
       command->start();
     }
-    parent->close();
+    parent->close("trashmsg");
   }
   close();
 }
Index: kmail/Makefile.am
===================================================================
--- kmail/Makefile.am	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kmail/Makefile.am	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -14,6 +14,7 @@
 	-I$(top_srcdir)/certmanager/lib \
         -I$(top_srcdir)/certmanager/lib/ui \
         -I$(top_srcdir)/indexlib \
+        -I$(top_srcdir)/ktnef \
         -I$(top_srcdir) \
         $(GPGME_CFLAGS) \
         $(all_includes)
@@ -109,6 +110,7 @@
                 keyresolver.cpp globalsettings.cpp globalsettings_base.kcfgc \
                 regexplineedit.cpp rulewidgethandlermanager.cpp \
                 headerlistquicksearch.cpp acljobs.cpp folderdiaacltab.cpp \
+                quotajobs.cpp folderdiaquotatab.cpp folderdiaquotatab_p.cpp \
                 partnodebodypart.cpp \
                 expirejob.cpp compactionjob.cpp jobscheduler.cpp callback.cpp \
                 searchjob.cpp renamejob.cpp \
@@ -129,7 +131,10 @@
                 customtemplates_kfg.kcfgc \
                 templatesconfiguration_base.ui templatesconfiguration.cpp \
                 templatesconfiguration_kfg.kcfgc \
-                templateparser.cpp
+                templateparser.cpp \
+                copyfolderjob.cpp \
+                messagecopyhelper.cpp \
+                localsubscriptiondialog.cpp
 
 kmail_SOURCES = main.cpp
 
Index: kmail/undostack.cpp
===================================================================
--- kmail/undostack.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kmail/undostack.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -88,7 +88,7 @@
     UndoInfo *info = mStack.take(0);
     emit undoStackChanged();
     QValueList<ulong>::iterator itr;
-    info->destFolder->open();
+    info->destFolder->open("undodest");
     for( itr = info->serNums.begin(); itr != info->serNums.end(); ++itr ) {
       serNum = *itr;
       KMMsgDict::instance()->getLocation(serNum, &curFolder, &idx);
@@ -102,7 +102,7 @@
       if ( info->srcFolder->count() > 1 )
         info->srcFolder->unGetMsg( info->srcFolder->count() - 1 );
     }
-    info->destFolder->close();
+    info->destFolder->close("undodest");
     delete info;
   }
   else
Index: kmail/messagecomposer.h
===================================================================
--- kmail/messagecomposer.h	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kmail/messagecomposer.h	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -92,6 +92,7 @@
     return mMessageList;
   }
 
+  bool isPerformingSignOperation() const { return mPerformingSignOperation; }
 signals:
   void done( bool );
 
@@ -135,9 +136,7 @@
    * Get message ready for sending or saving.
    * This must be done _before_ signing and/or encrypting it.
    */
-  QCString breakLinesAndApplyCodec();
-  /// Same as above but ensure \n termination
-  QCString bodyText();
+  QByteArray breakLinesAndApplyCodec();
 
   /**
    * Create a plain text version of a marked up mail for use as the plain
@@ -149,13 +148,13 @@
    * Get signature for a message (into mMessage).
    * To build nice S/MIME objects signing and encoding must be separated.
    */
-  void pgpSignedMsg( const QCString & cText, Kleo::CryptoMessageFormat f );
+  void pgpSignedMsg( const QByteArray& cText, Kleo::CryptoMessageFormat f );
   /**
    * Get encrypted message.
    * To build nice S/MIME objects signing and encrypting must be separate.
    */
   Kpgp::Result pgpEncryptedMsg( QByteArray& rEncryptedBody,
-                                const QCString & cText,
+                                const QByteArray& cText,
                                 const std::vector<GpgME::Key> & encryptionKeys,
 				Kleo::CryptoMessageFormat f );
 
@@ -164,7 +163,7 @@
    * To build nice S/MIME objects signing and encrypting must be separate.
    */
   Kpgp::Result pgpSignedAndEncryptedMsg( QByteArray& rEncryptedBody,
-					 const QCString & cText,
+					 const QByteArray& cText,
 					 const std::vector<GpgME::Key> & signingKeys,
 					 const std::vector<GpgME::Key> & encryptionKeys,
 					 Kleo::CryptoMessageFormat f );
@@ -192,7 +191,7 @@
                                const QCString contentSubtypeClear,
                                const QCString contentDispClear,
                                const QCString contentTEncClear,
-                               const QCString& bodytext,
+                               const QByteArray& bodytext,
                                const QString contentDescriptionCiph,
                                const QByteArray& ciphertext,
                                KMMessagePart& resultingPart,
@@ -213,6 +212,7 @@
 
 private:
   void doNextJob();
+  void emitDone( bool ok );
 
   int encryptionPossible( const QStringList & recipients, bool openPGP );
   bool determineWhetherToSign( bool doSignCompletely );
@@ -256,14 +256,14 @@
   bool mRc; // Set this to false, if something fails during the processes
   bool mHoldJobs; // Don't run the next job yet
 
-  QCString mText; // textual representation of the message text, encoded
+  QByteArray mText; // textual representation of the message text, encoded
   unsigned int mLineBreakColumn; // used for line breaking
 
   // These are the variables of the big composeMessage(X,Y,Z) message
   KMMessagePart* mNewBodyPart;
   QByteArray mSignature;
 
-  QCString mEncodedBody; // Only needed if signing and/or encrypting
+  QByteArray mEncodedBody; // Only needed if signing and/or encrypting
   bool mEarlyAddAttachments, mAllAttachmentsAreInBody;
   KMMessagePart mOldBodyPart;
   int mPreviousBoundaryLevel;
@@ -274,6 +274,7 @@
 
   QValueList<MessageComposerJob*> mJobs;
   bool mEncryptWithChiasmus;
+  bool mPerformingSignOperation;
 };
 
 #endif /* MESSAGECOMPOSER_H */
Index: kmail/subscriptiondialog.cpp
===================================================================
--- kmail/subscriptiondialog.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kmail/subscriptiondialog.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -45,7 +45,7 @@
 
 namespace KMail {
 
-SubscriptionDialog::SubscriptionDialog( QWidget *parent, const QString &caption,
+SubscriptionDialogBase::SubscriptionDialogBase( QWidget *parent, const QString &caption,
     KAccount *acct, QString startPath )
   : KSubscription( parent, caption, acct, User1, QString::null, false ),
     mStartPath( startPath ), mSubscribed( false ), mForceSubscriptionEnable( false)
@@ -60,12 +60,13 @@
   // reload-list button
   connect(this, SIGNAL(user1Clicked()), SLOT(slotLoadFolders()));
 
-  // get the folders
-  slotLoadFolders();
+  // get the folders, delayed execution style, otherwise there's bother
+  // with virtuals from ctors and whatnot
+  QTimer::singleShot(0, this, SLOT(slotLoadFolders()));
 }
 
 //------------------------------------------------------------------------------
-void SubscriptionDialog::slotListDirectory( const QStringList& subfolderNames,
+void SubscriptionDialogBase::slotListDirectory( const QStringList& subfolderNames,
                                             const QStringList& subfolderPaths,
                                             const QStringList& subfolderMimeTypes,
                                             const QStringList& subfolderAttributes,
@@ -79,149 +80,125 @@
 
   mCount = 0;
 
-  createItems();
+  processFolderListing();
 }
 
-//------------------------------------------------------------------------------
-void SubscriptionDialog::createItems()
+void SubscriptionDialogBase::moveChildrenToNewParent( GroupItem *oldItem, GroupItem *item  )
 {
-  bool onlySubscribed = mJobData.onlySubscribed;
+  if ( !oldItem || !item ) return;
 
+  QPtrList<QListViewItem> itemsToMove;
+  QListViewItem * myChild = oldItem->firstChild();
+  while (myChild)
+  {
+    itemsToMove.append(myChild);
+    myChild = myChild->nextSibling();
+  }
+  QPtrListIterator<QListViewItem> it( itemsToMove );
+  QListViewItem *cur;
+  while ((cur = it.current()))
+  {
+    oldItem->takeItem(cur);
+    item->insertItem(cur);
+    if ( cur->isSelected() ) // we have new parents so open them
+      folderTree()->ensureItemVisible( cur );
+    ++it;
+  }
+  delete oldItem;
+  itemsToMove.clear();
+}
+
+void SubscriptionDialogBase::createListViewItem( int i )
+{
+  GroupItem *item = 0;
   GroupItem *parent = 0;
-  uint done = 0;
-//  kdDebug(5006) << "createItems subscribed=" << onlySubscribed <<",folders="
-//    << mFolderNames.join(",") << endl;
 
-  for (uint i = mCount; i < mFolderNames.count(); ++i)
+  // get the parent
+  GroupItem *oldItem = 0;
+  QString parentPath;
+  findParentItem( mFolderNames[i], mFolderPaths[i], parentPath, &parent, &oldItem );
+
+  if (!parent && parentPath != "/")
   {
-    // give the dialog a chance to repaint
-    if (done == 1000)
+    // the parent is not available and it's no root-item
+    // this happens when the folders do not arrive in hierarchical order
+    // so we create each parent in advance
+    QStringList folders = QStringList::split(mDelimiter, parentPath);
+    uint i = 0;
+    for ( QStringList::Iterator it = folders.begin(); it != folders.end(); ++it )
     {
-      emit listChanged();
-      QTimer::singleShot(0, this, SLOT(createItems()));
-      return;
-    }
-    ++mCount;
-    ++done;
-    GroupItem *item = 0;
-    if (!onlySubscribed && mFolderPaths.size() > 0)
-    {
-      // get the parent
-      GroupItem *oldItem = 0;
-      QString parentPath;
-      findParentItem( mFolderNames[i], mFolderPaths[i], parentPath, &parent, &oldItem );
+      QString name = *it;
+      if (name.startsWith("/"))
+        name = name.right(name.length()-1);
+      if (name.endsWith("/"))
+        name.truncate(name.length()-1);
+      KGroupInfo info(name);
+      info.subscribed = false;
 
-      if (!parent && parentPath != "/")
+      QStringList tmpPath;
+      for ( uint j = 0; j <= i; ++j )
+        tmpPath << folders[j];
+      QString path = tmpPath.join(mDelimiter);
+      if (!path.startsWith("/"))
+        path = "/" + path;
+      if (!path.endsWith("/"))
+        path = path + "/";
+      info.path = path;
+      item = 0;
+      if (folders.count() > 1)
       {
-        // the parent is not available and it's no root-item
-        // this happens when the folders do not arrive in hierarchical order
-        // so we create each parent in advance
-        QStringList folders = QStringList::split(mDelimiter, parentPath);
-        uint i = 0;
-        for ( QStringList::Iterator it = folders.begin(); it != folders.end(); ++it ) 
-        {
-          QString name = *it;
-          if (name.startsWith("/"))
-            name = name.right(name.length()-1);
-          if (name.endsWith("/"))
-            name.truncate(name.length()-1);
-          KGroupInfo info(name);
-          info.subscribed = false;
+        // we have to create more then one level, so better check if this
+        // folder already exists somewhere
+        item = mItemDict[path];
+      }
+      // as these items are "dummies" we create them non-checkable
+      if (!item)
+      {
+        if (parent)
+          item = new GroupItem(parent, info, this, false);
+        else
+          item = new GroupItem(folderTree(), info, this, false);
+        mItemDict.insert(info.path, item);
+      }
 
-          QStringList tmpPath;
-          for ( uint j = 0; j <= i; ++j )
-            tmpPath << folders[j];
-          QString path = tmpPath.join(mDelimiter);
-          if (!path.startsWith("/"))
-            path = "/" + path;
-          if (!path.endsWith("/"))
-            path = path + "/";
-          info.path = path;
-          item = 0;
-          if (folders.count() > 1)
-          {
-            // we have to create more then one level, so better check if this
-            // folder already exists somewhere
-            item = mItemDict[path];
-          }
-          // as these items are "dummies" we create them non-checkable
-          if (!item)
-          {
-            if (parent)
-              item = new GroupItem(parent, info, this, false);
-            else
-              item = new GroupItem(folderTree(), info, this, false);
-            mItemDict.insert(info.path, item);
-          }
+      parent = item;
+      ++i;
+    } // folders
+  } // parent
 
-          parent = item;
-          ++i;
-        } // folders
-      } // parent
-    
-      KGroupInfo info(mFolderNames[i]);
-      info.path = mFolderPaths[i];
+  KGroupInfo info(mFolderNames[i]);
+  if (mFolderNames[i].upper() == "INBOX" &&
+      mFolderPaths[i] == "/INBOX/")
+    info.name = i18n("inbox");
+  info.subscribed = false;
+  info.path = mFolderPaths[i];
+  // only checkable when the folder is selectable
+  bool checkable = ( mFolderMimeTypes[i] == "inode/directory" ) ? false : true;
+  // create a new item
+  if (parent)
+    item = new GroupItem(parent, info, this, checkable);
+  else
+    item = new GroupItem(folderTree(), info, this, checkable);
 
-      if ( info.path == "/INBOX/" )
-        info.name = i18n("inbox");
+  if (oldItem) // remove old item
+    mItemDict.remove(info.path);
 
-      // only checkable when the folder is selectable
-      bool checkable = ( mFolderMimeTypes[i] == "inode/directory" ) ? false : true;
-      // create a new item
-      if (parent)
-        item = new GroupItem(parent, info, this, checkable);
-      else
-        item = new GroupItem(folderTree(), info, this, checkable);
+  mItemDict.insert(info.path, item);
+  if (oldItem)
+    moveChildrenToNewParent( oldItem, item );
 
-      if (oldItem) // remove old item
-        mItemDict.remove(info.path);
-      
-      mItemDict.insert(info.path, item);
-      if (oldItem)
-      {
-        // move the old childs to the new item
-        QPtrList<QListViewItem> itemsToMove;
-        QListViewItem * myChild = oldItem->firstChild();
-        while (myChild)
-        {
-          itemsToMove.append(myChild);
-          myChild = myChild->nextSibling();
-        }
-        QPtrListIterator<QListViewItem> it( itemsToMove );
-        QListViewItem *cur;
-        while ((cur = it.current()))
-        {
-          oldItem->takeItem(cur);
-          item->insertItem(cur);
-          if ( cur->isSelected() ) // we have new parents so open them
-            folderTree()->ensureItemVisible( cur );
-          ++it;
-        }
-        delete oldItem;
-        itemsToMove.clear();
-      }
-      // select the start item
-      if ( mFolderPaths[i] == mStartPath )
-      {
-        item->setSelected( true );
-        folderTree()->ensureItemVisible( item );
-      }
-
-    } else if (onlySubscribed)
-    {
-      // find the item
-      if ( mItemDict[mFolderPaths[i]] )
-      {
-        GroupItem* item = mItemDict[mFolderPaths[i]];
-        item->setOn( true );
-      }
-    }
+  // select the start item
+  if ( mFolderPaths[i] == mStartPath )
+  {
+    item->setSelected( true );
+    folderTree()->ensureItemVisible( item );
   }
-  processNext();
 }
 
+
+
 //------------------------------------------------------------------------------
-void SubscriptionDialog::findParentItem( QString &name, QString &path, QString &parentPath,
+void SubscriptionDialogBase::findParentItem( QString &name, QString &path, QString &parentPath,
     GroupItem **parent, GroupItem **oldItem )
 {
   // remove the name (and the separator) from the path to get the parent path
@@ -233,54 +210,19 @@
 
   // find the parent by it's path
   *parent = mItemDict[parentPath];
-  
+
   // check if the item already exists
   *oldItem = mItemDict[path];
 }
 
 //------------------------------------------------------------------------------
-void SubscriptionDialog::slotSave()
+void SubscriptionDialogBase::slotSave()
 {
-  KMail::ImapAccountBase *account = static_cast<KMail::ImapAccountBase*>(mAcct);
-  if( !account->onlySubscribedFolders() ) {
-      int result = KMessageBox::questionYesNoCancel( this,
-              i18n("Currently subscriptions are not used for server %1\ndo you want to enable subscriptions?")
-              .arg( account->name() ),
-              i18n("Enable Subscriptions?"), i18n("Enable"), i18n("Do Not Enable"));
-      switch(result) {
-          case KMessageBox::Yes:
-              mForceSubscriptionEnable = true;
-              break;
-          case KMessageBox::No:
-              break;
-          case KMessageBox::Cancel:
-              cancel();
-      }
-  }
-
-  // subscribe
-  QListViewItemIterator it(subView);
-  for ( ; it.current(); ++it)
-  {
-    account->changeSubscription(true,
-        static_cast<GroupItem*>(it.current())->info().path);
-  }
-
-  // unsubscribe
-  QListViewItemIterator it2(unsubView);
-  for ( ; it2.current(); ++it2)
-  {
-    account->changeSubscription(false,
-        static_cast<GroupItem*>(it2.current())->info().path);
-  }
-
-  if ( mForceSubscriptionEnable ) {
-    account->setOnlySubscribedFolders(true);
-  }
+  doSave();
 }
 
 //------------------------------------------------------------------------------
-void SubscriptionDialog::slotLoadFolders()
+void SubscriptionDialogBase::slotLoadFolders()
 {
   ImapAccountBase* ai = static_cast<ImapAccountBase*>(account());
   // we need a connection
@@ -302,15 +244,15 @@
   mSubscribed = false;
   mLoading = true;
 
-  initPrefixList();
-
-  processNext();
+  // first step is to load a list of all available folders and create listview
+  // items for them
+  listAllAvailableAndCreateItems();
 }
 
 //------------------------------------------------------------------------------
-void SubscriptionDialog::processNext()
+void SubscriptionDialogBase::processNext()
 {
-  if ( mPrefixList.isEmpty() ) 
+  if ( mPrefixList.isEmpty() )
   {
     if ( !mSubscribed )
     {
@@ -319,16 +261,16 @@
       if ( mPrefixList.isEmpty() )
       {
           // still empty? then we have nothing to do here as this is an error
-          slotLoadingComplete();
+          loadingComplete();
           return;
       }
     } else {
-      slotLoadingComplete();
+      loadingComplete();
       return;
     }
   }
   ImapAccountBase* ai = static_cast<ImapAccountBase*>(account());
-  ImapAccountBase::ListType type = ( mSubscribed ? 
+  ImapAccountBase::ListType type = ( mSubscribed ?
       ImapAccountBase::ListSubscribedNoCheck : ImapAccountBase::List );
 
   bool completeListing = true;
@@ -337,7 +279,7 @@
   mPrefixList.pop_front();
   if ( mCurrentNamespace == "/INBOX/" )
   {
-    type = mSubscribed ? 
+    type = mSubscribed ?
       ImapAccountBase::ListFolderOnlySubscribed : ImapAccountBase::ListFolderOnly;
     completeListing = false;
   }
@@ -351,9 +293,38 @@
   job->start();
 }
 
+void SubscriptionDialogBase::loadingComplete()
+{
+  slotLoadingComplete();
+}
+
+
 //------------------------------------------------------------------------------
-void SubscriptionDialog::initPrefixList()
+// implementation for server side subscription
+//------------------------------------------------------------------------------
+
+SubscriptionDialog::SubscriptionDialog( QWidget *parent, const QString &caption,
+    KAccount *acct, QString startPath )
+  : SubscriptionDialogBase( parent, caption, acct, startPath )
 {
+}
+
+/* virtual */
+SubscriptionDialog::~SubscriptionDialog()
+{
+
+}
+
+/* virtual */
+void SubscriptionDialog::listAllAvailableAndCreateItems()
+{
+  initPrefixList();
+  processNext();
+}
+
+//------------------------------------------------------------------------------
+void SubscriptionDialogBase::initPrefixList()
+{
   ImapAccountBase* ai = static_cast<ImapAccountBase*>(account());
   ImapAccountBase::nsMap map = ai->namespaces();
   mPrefixList.clear();
@@ -365,30 +336,109 @@
     if ( (*it).isEmpty() )
       hasInbox = true;
   }
-  if ( !hasInbox && !ns.isEmpty() ) 
+  if ( !hasInbox && !ns.isEmpty() )
   {
     // the namespaces includes no listing for the root so start a special
     // listing for the INBOX to make sure we get it
     mPrefixList += "/INBOX/";
   }
-  
+
   mPrefixList += map[ImapAccountBase::PersonalNS];
   mPrefixList += map[ImapAccountBase::OtherUsersNS];
   mPrefixList += map[ImapAccountBase::SharedNS];
 }
 
-void SubscriptionDialog::slotConnectionResult( int errorCode, const QString& errorMsg )
+void SubscriptionDialogBase::slotConnectionResult( int errorCode, const QString& errorMsg )
 {
   Q_UNUSED( errorMsg );
   if ( !errorCode )
     slotLoadFolders();
 }
 
-void SubscriptionDialog::show()
+void SubscriptionDialogBase::show()
 {
   KDialogBase::show();
 }
 
+// =======
+/* virtual */
+void SubscriptionDialog::processFolderListing()
+{
+    processItems();
+}
+
+/* virtual */
+void SubscriptionDialog::doSave()
+{
+  KMail::ImapAccountBase *a = static_cast<KMail::ImapAccountBase*>(mAcct);
+  if( !a->onlySubscribedFolders() ) {
+      int result = KMessageBox::questionYesNoCancel( this,
+              i18n("Currently subscriptions are not used for server %1\ndo you want to enable subscriptions?")
+              .arg( a->name() ),
+              i18n("Enable Subscriptions?"), i18n("Enable"), i18n("Do Not Enable"));
+      switch(result) {
+          case KMessageBox::Yes:
+              mForceSubscriptionEnable = true;
+              break;
+          case KMessageBox::No:
+              break;
+          case KMessageBox::Cancel:
+              cancel();
+      }
+  }
+
+  // subscribe
+  QListViewItemIterator it(subView);
+  for ( ; it.current(); ++it)
+  {
+    static_cast<ImapAccountBase*>(account())->changeSubscription(true,
+        static_cast<GroupItem*>(it.current())->info().path);
+  }
+
+  // unsubscribe
+  QListViewItemIterator it2(unsubView);
+  for ( ; it2.current(); ++it2)
+  {
+    static_cast<ImapAccountBase*>(account())->changeSubscription(false,
+        static_cast<GroupItem*>(it2.current())->info().path);
+  }
+
+  if ( mForceSubscriptionEnable ) {
+    a->setOnlySubscribedFolders(true);
+  }
+}
+
+void SubscriptionDialog::processItems()
+{
+  bool onlySubscribed = mJobData.onlySubscribed;
+  uint done = 0;
+  for (uint i = mCount; i < mFolderNames.count(); ++i)
+  {
+    // give the dialog a chance to repaint
+    if (done == 1000)
+    {
+      emit listChanged();
+      QTimer::singleShot(0, this, SLOT(processItems()));
+      return;
+    }
+    ++mCount;
+    ++done;
+    if (!onlySubscribed && mFolderPaths.size() > 0)
+    {
+      createListViewItem( i );
+    } else if (onlySubscribed)
+    {
+      // find the item
+      if ( mItemDict[mFolderPaths[i]] )
+      {
+        GroupItem* item = mItemDict[mFolderPaths[i]];
+        item->setOn( true );
+      }
+    }
+  }
+
+  processNext();
+}
 } // namespace
 
 #include "subscriptiondialog.moc"
Index: kmail/headeritem.cpp
===================================================================
--- kmail/headeritem.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kmail/headeritem.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -393,6 +393,11 @@
     font = headers->dateFont();
   }
 
+  QColor cdisabled = KGlobalSettings::inactiveTextColor();
+  if ( headers->isMessageCut( msgSerNum() ) ) {
+    color = &cdisabled;
+  }
+
   // set color and font
   _cg.setColor( QColorGroup::Text, *color );
   font.setWeight( weight );
Index: kmail/kmail_config_composer.desktop
===================================================================
--- kmail/kmail_config_composer.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kmail/kmail_config_composer.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -22,7 +22,7 @@
 Name[cy]=Cyfansoddydd
 Name[da]=Brevskriver
 Name[de]=Komposer
-Name[el]=Συνταξη μηνυμάτων
+Name[el]=Σύνταξη μηνυμάτων
 Name[es]=Editor
 Name[et]=Koostaja
 Name[eu]=Editorea
@@ -35,11 +35,14 @@
 Name[hu]=Szerkesztő
 Name[it]=Compositore
 Name[ja]=メール作成
+Name[kk]=Құрастарғыш
 Name[km]=កម្មវិធី​តែង
 Name[lt]=Redaktorius
+Name[mk]=Составувач
 Name[ms]=Penggubah
 Name[nb]=Komposer
 Name[nds]=Nettbreef-Editor
+Name[ne]=कम्पोजर
 Name[nl]=Opsteller
 Name[nn]=Skrivefelt
 Name[pa]=ਲੇਖਕ
@@ -61,6 +64,7 @@
 Name[zh_TW]=編寫器
 Comment=Templates & General Behavior
 Comment[af]=Voorbeelde & Algemene Gedrag
+Comment[bg]=Шаблони и поведение
 Comment[ca]=Plantilles i comportament general
 Comment[cs]=Šablony a obecné chování
 Comment[da]=Skabeloner & Generel opførsel
@@ -74,8 +78,11 @@
 Comment[hu]=Sablonok, általános működési jellemzők
 Comment[it]=Modelli e comportamento generale
 Comment[ja]=テンプレートと全般的な動作
-Comment[km]= ពុម្ព & ឥរិយាបថ​ទូទៅ
+Comment[kk]=Үлгілер мен Жалпы тәртібі
+Comment[km]= ពុម្ព និង​ឥរិយាបថ​ទូទៅ
+Comment[mk]=Обрасци и општо однесување
 Comment[nds]=Vörlagen un allgemeen Bedregen
+Comment[ne]=टेम्प्लेट र साधारण व्यवहार
 Comment[nl]=Sjablonen en algemeen gedrag
 Comment[pl]=Szablony i ogólne zachowanie
 Comment[pt]=Modelos e Comportamento Geral
@@ -87,6 +94,7 @@
 Comment[sr@Latn]=Šabloni i opšte ponašanje
 Comment[sv]=Mallar och allmänt uppträdande
 Comment[uk]=Шаблони та загальна поведінка
+Comment[zh_CN]=模板和常规行为
 Comment[zh_TW]=樣本與一般行為
 Keywords=kmail,composer
 Keywords[bg]=пощенски, клиент, е-поща, редактор, съставител, форматиране, текст, kmail, komposer
@@ -109,9 +117,11 @@
 Keywords[it]=kmail,compositore
 Keywords[km]=kmail កម្មវិធី​តែង
 Keywords[lt]=kmail,composer,redaktorius
+Keywords[mk]=kmail,composer,кпошта,составувач
 Keywords[ms]=kmail,penggubah
 Keywords[nb]=kmail,komposer
 Keywords[nds]=KMail,Editor,Nettbreefeditor
+Keywords[ne]=केडीई मेल, कम्पोजर
 Keywords[nl]=kmail,opsteller
 Keywords[nn]=KMail,skrivefelt
 Keywords[pl]=kmail,kompozytor,edytor
Index: kmail/kmsearchpattern.cpp
===================================================================
--- kmail/kmsearchpattern.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kmail/kmsearchpattern.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -762,7 +762,7 @@
 
   bool opened = folder->isOpened();
   if ( !opened )
-    folder->open();
+    folder->open("searchptr");
   KMMsgBase *msgBase = folder->getMsgBase(idx);
   if (requiresBody() && !ignoreBody) {
     bool unGet = !msgBase->isMessage();
@@ -774,7 +774,7 @@
     res = matches( folder->getDwString(idx), ignoreBody );
   }
   if ( !opened )
-    folder->close();
+    folder->close("searchptr");
   return res;
 }
 
Index: kmail/searchwindow.cpp
===================================================================
--- kmail/searchwindow.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kmail/searchwindow.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -28,9 +28,12 @@
 #include "kmfoldermgr.h"
 #include "kmfoldersearch.h"
 #include "kmfoldertree.h"
+#include "kmheaders.h"
 #include "kmsearchpatternedit.h"
 #include "kmsearchpattern.h"
 #include "folderrequester.h"
+#include "messagecopyhelper.h"
+#include "textsource.h"
 
 #include <kapplication.h>
 #include <kdebug.h>
@@ -38,6 +41,7 @@
 #include <kwin.h>
 #include <kconfig.h>
 #include <kstdaction.h>
+#include <kiconloader.h>
 
 #include <qcheckbox.h>
 #include <qlayout.h>
@@ -50,6 +54,9 @@
 #include <qcursor.h>
 #include <qpopupmenu.h>
 
+#include <maillistdrag.h>
+using namespace KPIM;
+
 #include <mimelib/enum.h>
 #include <mimelib/boyermor.h>
 
@@ -60,6 +67,44 @@
 
 const int SearchWindow::MSGID_COLUMN = 4;
 
+// KListView sub-class for dnd support
+class MatchListView : public KListView
+{
+  public:
+    MatchListView( QWidget *parent, SearchWindow* sw, const char* name = 0 ) :
+      KListView( parent, name ),
+      mSearchWindow( sw )
+    {}
+
+  protected:
+    virtual QDragObject* dragObject()
+    {
+      KMMessageList list = mSearchWindow->selectedMessages();
+      MailList mailList;
+      for ( KMMsgBase* msg = list.first(); msg; msg = list.next() ) {
+        if ( !msg )
+          continue;
+        MailSummary mailSummary( msg->getMsgSerNum(), msg->msgIdMD5(),
+                                 msg->subject(), msg->fromStrip(),
+                                 msg->toStrip(), msg->date() );
+        mailList.append( mailSummary );
+      }
+      MailListDrag *d = new MailListDrag( mailList, viewport(), new KMTextSource );
+
+      QPixmap pixmap;
+      if( mailList.count() == 1 )
+        pixmap = QPixmap( DesktopIcon("message", KIcon::SizeSmall) );
+      else
+        pixmap = QPixmap( DesktopIcon("kmultiple", KIcon::SizeSmall) );
+
+      d->setPixmap( pixmap );
+      return d;
+    }
+
+  private:
+    SearchWindow* mSearchWindow;
+};
+
 //-----------------------------------------------------------------------------
 SearchWindow::SearchWindow(KMMainWidget* w, const char* name,
                          KMFolder *curFolder, bool modal):
@@ -157,7 +202,7 @@
   connect( mChkbxAllFolders, SIGNAL(toggled(bool)),
            this, SLOT(setEnabledSearchButton(bool)) );
 
-  mLbxMatches = new KListView(searchWidget, "Find Messages");
+  mLbxMatches = new MatchListView(searchWidget, this, "Find Messages");
 
   /*
      Default is to sort by date. TODO: Unfortunately this sorts *while*
@@ -190,6 +235,8 @@
   mLbxMatches->setColumnWidth(MSGID_COLUMN, 0);
   mLbxMatches->header()->setResizeEnabled(false, MSGID_COLUMN);
 
+  mLbxMatches->setDragEnabled( true );
+
   connect(mLbxMatches, SIGNAL(doubleClicked(QListViewItem *)),
           this, SLOT(slotShowMsg(QListViewItem *)));
   connect( mLbxMatches, SIGNAL( contextMenuRequested( QListViewItem*, const QPoint &, int )),
@@ -256,6 +303,7 @@
 
   //set up actions
   KActionCollection *ac = actionCollection();
+  ac->setWidget( this );
   mReplyAction = new KAction( i18n("&Reply..."), "mail_reply", 0, this,
                               SLOT(slotReplyToMsg()), ac, "search_reply" );
   mReplyAllAction = new KAction( i18n("Reply to &All..."), "mail_replyall",
@@ -297,6 +345,10 @@
   mPrintAction = KStdAction::print( this, SLOT(slotPrintMsg()), ac, "search_print" );
   mClearAction = new KAction( i18n("Clear Selection"), 0, 0, this,
                               SLOT(slotClearSelection()), ac, "search_clear_selection" );
+
+  mCopyAction = KStdAction::copy( this, SLOT(slotCopyMsgs()), ac, "search_copy_messages" );
+  mCutAction = KStdAction::cut( this, SLOT(slotCutMsgs()), ac, "search_cut_messages" );
+
   connect(mTimer, SIGNAL(timeout()), this, SLOT(updStatus()));
   connect(kmkernel->searchFolderMgr(), SIGNAL(folderInvalidated(KMFolder*)),
           this, SLOT(folderInvalidated(KMFolder*)));
@@ -313,7 +365,7 @@
   for ( fit = mFolders.begin(); fit != mFolders.end(); ++fit ) {
     if (!(*fit))
       continue;
-    (*fit)->close();
+    (*fit)->close("searchwindow");
   }
 
   KConfig* config = KMKernel::config();
@@ -470,7 +522,7 @@
     enableGUI();
 
     if (mFolder && !mFolders.contains(mFolder.operator->()->folder())) {
-        mFolder->open();
+        mFolder->open("searchwindow");
         mFolders.append(mFolder.operator->()->folder());
     }
     mTimer->start(200);
@@ -502,7 +554,7 @@
     KMFolder *pFolder = msg->parent();
     if (!mFolders.contains(pFolder)) {
         mFolders.append(pFolder);
-        pFolder->open();
+        pFolder->open("searchwindow");
     }
     if(pFolder->whoField() == "To")
         from = msg->to();
@@ -717,6 +769,8 @@
     mPrintAction->setEnabled( single_actions );
     mForwardDigestAction->setEnabled( !single_actions );
     mRedirectAction->setEnabled( single_actions );
+    mCopyAction->setEnabled( count > 0 );
+    mCutAction->setEnabled( count > 0 );
 }
 
 //-----------------------------------------------------------------------------
@@ -746,8 +800,11 @@
     mReplyListAction->plug(menu);
     mForwardActionMenu->plug(menu);
     menu->insertSeparator();
+    mCopyAction->plug(menu);
+    mCutAction->plug(menu);
     menu->insertItem(i18n("&Copy To"), msgCopyMenu);
     menu->insertItem(i18n("&Move To"), msgMoveMenu);
+    menu->insertSeparator();
     mSaveAsAction->plug(menu);
     mSaveAtchAction->plug(menu);
     mPrintAction->plug(menu);
@@ -838,5 +895,17 @@
     command->start();
 }
 
+void SearchWindow::slotCopyMsgs()
+{
+  QValueList<Q_UINT32> list = MessageCopyHelper::serNumListFromMsgList( selectedMessages() );
+  mKMMainWidget->headers()->setCopiedMessages( list, false );
+}
+
+void SearchWindow::slotCutMsgs()
+{
+  QValueList<Q_UINT32> list = MessageCopyHelper::serNumListFromMsgList( selectedMessages() );
+  mKMMainWidget->headers()->setCopiedMessages( list, true );
+}
+
 } // namespace KMail
 #include "searchwindow.moc"
Index: kmail/quotajobs.cpp
===================================================================
--- kmail/quotajobs.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 0)
+++ kmail/quotajobs.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -0,0 +1,147 @@
+/**
+ * quotajobs.cpp
+ *
+ * Copyright (c) 2006 Till Adam <adam@kde.org>
+ *
+ *
+ *  This program is free software; you can redistribute it and/or modify
+ *  it under the terms of the GNU General Public License as published by
+ *  the Free Software Foundation; version 2 of the License
+ *
+ *  This program is distributed in the hope that it will be useful,
+ *  but WITHOUT ANY WARRANTY; without even the implied warranty of
+ *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+ *  GNU General Public License for more details.
+ *
+ *  You should have received a copy of the GNU General Public License
+ *  along with this program; if not, write to the Free Software
+ *  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA.
+ *
+ *  In addition, as a special exception, the copyright holders give
+ *  permission to link the code of this program with any edition of
+ *  the Qt library by Trolltech AS, Norway (or with modified versions
+ *  of Qt that use the same license as Qt), and distribute linked
+ *  combinations including the two.  You must obey the GNU General
+ *  Public License in all respects for all of the code used other than
+ *  Qt.  If you modify this file, you may extend this exception to
+ *  your version of the file, but you are not obligated to do so.  If
+ *  you do not wish to do so, delete this exception statement from
+ *  your version.
+ */
+#include "quotajobs.h"
+#include <kio/scheduler.h>
+#include <kdebug.h>
+
+using namespace KMail;
+
+QuotaJobs::GetQuotarootJob* QuotaJobs::getQuotaroot(
+    KIO::Slave* slave, const KURL& url )
+{
+  QByteArray packedArgs;
+  QDataStream stream( packedArgs, IO_WriteOnly );
+  stream << (int)'Q' << (int)'R' << url;
+
+  GetQuotarootJob* job = new GetQuotarootJob( url, packedArgs, false );
+  KIO::Scheduler::assignJobToSlave( slave, job );
+  return job;
+}
+
+QuotaJobs::GetQuotarootJob::GetQuotarootJob( const KURL& url,
+                                             const QByteArray &packedArgs,
+                                             bool showProgressInfo )
+  : KIO::SimpleJob( url, KIO::CMD_SPECIAL, packedArgs, showProgressInfo )
+{
+  connect( this, SIGNAL(infoMessage(KIO::Job*,const QString&)),
+           SLOT(slotInfoMessage(KIO::Job*,const QString&)) );
+}
+
+void QuotaJobs::GetQuotarootJob::slotInfoMessage( KIO::Job*, const QString& str )
+{
+  // Parse the result
+  QStringList results = QStringList::split("\r", str);
+  QStringList roots;
+  QuotaInfoList quotas;
+  if ( results.size() > 0 ) {
+    // the first line is the available roots
+    roots = QStringList::split(" ", results.front() );
+    results.pop_front();
+    // the rest are pairs of root -> list of triplets
+    while ( results.size() > 0 ) {
+      QString root = results.front(); results.pop_front();
+      // and the quotas
+      if ( results.size() > 0 ) {
+        QStringList triplets = QStringList::split(" ", results.front() );
+        results.pop_front();
+        while ( triplets.size() > 0 ) {
+          // there's always three, the label, current and max values
+          QString name = triplets.front(); triplets.pop_front();
+          QString current = triplets.front(); triplets.pop_front();
+          QString max = triplets.front(); triplets.pop_front();
+          QuotaInfo info( name, root, current, max );
+          quotas.append( info );
+        }
+      }
+    }
+  }
+  if ( !quotas.isEmpty() ) {
+    emit quotaInfoReceived( quotas );
+  }
+  emit quotaRootResult( roots );
+}
+
+QuotaJobs::GetStorageQuotaJob* QuotaJobs::getStorageQuota(
+    KIO::Slave* slave, const KURL& url )
+{
+  GetStorageQuotaJob* job = new GetStorageQuotaJob( slave, url );
+  return job;
+}
+
+
+QuotaJobs::GetStorageQuotaJob::GetStorageQuotaJob( KIO::Slave* slave, const KURL& url )
+  : KIO::Job( false )
+{
+    QByteArray packedArgs;
+    QDataStream stream( packedArgs, IO_WriteOnly );
+    stream << (int)'Q' << (int)'R' << url;
+
+    QuotaJobs::GetQuotarootJob *job =
+        new QuotaJobs::GetQuotarootJob( url, packedArgs, false );
+    connect(job, SIGNAL(quotaInfoReceived(const QuotaInfoList&)),
+            SLOT(slotQuotaInfoReceived(const QuotaInfoList&)));
+    connect(job, SIGNAL(quotaRootResult(const QStringList&)),
+            SLOT(slotQuotarootResult(const QStringList&)));
+    KIO::Scheduler::assignJobToSlave( slave, job );
+    addSubjob( job );
+}
+
+void QuotaJobs::GetStorageQuotaJob::slotQuotarootResult( const QStringList& roots )
+{
+    Q_UNUSED(roots); // we only support one for now
+    if ( !mStorageQuotaInfo.isValid() && !error() ) {
+      // No error, so the account supports quota, but no usable info
+      // was transmitted => no quota set on the folder. Make the info
+      // valid, bit leave it empty.
+      mStorageQuotaInfo.setName( "STORAGE" );
+    }
+    if ( mStorageQuotaInfo.isValid() )
+      emit storageQuotaResult( mStorageQuotaInfo );
+}
+
+void QuotaJobs::GetStorageQuotaJob::slotQuotaInfoReceived( const QuotaInfoList& infos )
+{
+    QuotaInfoList::ConstIterator it( infos.begin() );
+    while ( it != infos.end() ) {
+      // FIXME we only use the first storage quota, for now
+      if ( it->name() == "STORAGE" && !mStorageQuotaInfo.isValid() ) {
+          mStorageQuotaInfo = *it;
+      }
+      ++it;
+    }
+}
+
+QuotaInfo QuotaJobs::GetStorageQuotaJob::storageQuotaInfo() const
+{
+  return mStorageQuotaInfo;
+}
+
+#include "quotajobs.moc"
Index: kmail/kmreaderwin.cpp
===================================================================
--- kmail/kmreaderwin.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kmail/kmreaderwin.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -636,13 +636,13 @@
   mSelectEncodingAction->setItems( encodings );
   mSelectEncodingAction->setCurrentItem( 0 );
 
-  mMailToComposeAction = new KAction( i18n("New Message To..."), 0, this,
-                                      SLOT(slotMailtoCompose()), ac,
+  mMailToComposeAction = new KAction( i18n("New Message To..."), "mail_new",
+                                      0, this, SLOT(slotMailtoCompose()), ac,
                                       "mailto_compose" );
-  mMailToReplyAction = new KAction( i18n("Reply To..."), 0, this,
-				    SLOT(slotMailtoReply()), ac,
+  mMailToReplyAction = new KAction( i18n("Reply To..."), "mail_reply",
+                                    0, this, SLOT(slotMailtoReply()), ac,
 				    "mailto_reply" );
-  mMailToForwardAction = new KAction( i18n("Forward To..."),
+  mMailToForwardAction = new KAction( i18n("Forward To..."), "mail_forward",
                                       0, this, SLOT(slotMailtoForward()), ac,
                                       "mailto_forward" );
   mAddAddrBookAction = new KAction( i18n("Add to Address Book"),
@@ -1354,7 +1354,7 @@
 	     "<p style='margin-bottom: 0px'>&nbsp; &nbsp; The KMail Team</p>")
     .arg(KMAIL_VERSION) // KMail version
     .arg("help:/kmail/index.html") // KMail help:// URL
-    .arg("http://kmail.kde.org/") // KMail homepage URL
+    .arg("http://kontact.kde.org/kmail/") // KMail homepage URL
     .arg("1.8").arg("3.4"); // prior KMail and KDE version
 
   QString featureItems;
@@ -1504,7 +1504,14 @@
 
   assert(aMsg!=0);
 
-  delete mRootNode;
+  aMsg->setIsBeingParsed( true );
+
+  if ( mRootNode && !mRootNode->processed() )
+  {
+    kdWarning() << "The root node is not yet processed! Danger!\n";
+    return;
+  } else
+    delete mRootNode;
   mRootNode = partNode::fromMessage( aMsg );
   const QCString mainCntTypeStr = mRootNode->typeString() + '/' + mRootNode->subTypeString();
 
@@ -1614,13 +1621,13 @@
       unencryptedMessage->setParent( 0 );
       // because this did not work:
       /*
-      DwMessage dwMsg( DwString( aMsg->asString() ) );
+      DwMessage dwMsg( aMsg->asDwString() );
       dwMsg.Body() = DwBody( DwString( resultString.data() ) );
       dwMsg.Body().Parse();
       KMMessage* unencryptedMessage = new KMMessage( &dwMsg );
       */
-kdDebug(5006) << "KMReaderWin  -  resulting message:" << unencryptedMessage->asString() << endl;
-kdDebug(5006) << "KMReaderWin  -  attach unencrypted message to aMsg" << endl;
+      //kdDebug(5006) << "KMReaderWin  -  resulting message:" << unencryptedMessage->asString() << endl;
+      kdDebug(5006) << "KMReaderWin  -  attach unencrypted message to aMsg" << endl;
       aMsg->setUnencryptedMsg( unencryptedMessage );
       emitReplaceMsgByUnencryptedVersion = true;
     }
@@ -1642,6 +1649,8 @@
     showHideMimeTree( rootNodeCntType == DwMime::kTypeText &&
 		      rootNodeCntSubtype == DwMime::kSubtypePlain );
   }
+
+  aMsg->setIsBeingParsed( false );
 }
 
 
@@ -1670,21 +1679,10 @@
     fileName = aMsgPart->name();
 
   //--- Sven's save attachments to /tmp start ---
-  KTempFile *tempFile = new KTempFile( QString::null,
-                                       "." + QString::number( aPartNum ) );
-  tempFile->setAutoDelete( true );
-  QString fname = tempFile->name();
-  delete tempFile;
+  QString fname = createTempDir( QString::number( aPartNum ) );
+  if ( fname.isEmpty() )
+    return QString();
 
-  if( ::access( QFile::encodeName( fname ), W_OK ) != 0 )
-    // Not there or not writable
-    if( ::mkdir( QFile::encodeName( fname ), 0 ) != 0
-        || ::chmod( QFile::encodeName( fname ), S_IRWXU ) != 0 )
-      return QString::null; //failed create
-
-  assert( !fname.isNull() );
-
-  mTempDirs.append( fname );
   // strip off a leading path
   int slashPos = fileName.findRev( '/' );
   if( -1 != slashPos )
@@ -1710,7 +1708,25 @@
   return fname;
 }
 
+QString KMReaderWin::createTempDir( const QString &param )
+{
+  KTempFile *tempFile = new KTempFile( QString::null, "." + param );
+  tempFile->setAutoDelete( true );
+  QString fname = tempFile->name();
+  delete tempFile;
 
+  if( ::access( QFile::encodeName( fname ), W_OK ) != 0 )
+    // Not there or not writable
+    if( ::mkdir( QFile::encodeName( fname ), 0 ) != 0
+        || ::chmod( QFile::encodeName( fname ), S_IRWXU ) != 0 )
+      return QString::null; //failed create
+
+  assert( !fname.isNull() );
+
+  mTempDirs.append( fname );
+  return fname;
+}
+
 //-----------------------------------------------------------------------------
 void KMReaderWin::showVCard( KMMessagePart * msgPart ) {
   const QString vCard = msgPart->bodyToUnicode( overrideCodec() );
Index: kmail/kmmessage.cpp
===================================================================
--- kmail/kmmessage.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kmail/kmmessage.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -64,6 +64,7 @@
 #include <klocale.h>
 #include <stdlib.h>
 #include <unistd.h>
+#include "util.h"
 
 #if ALLOW_GUI
 #include <kmessagebox.h>
@@ -87,21 +88,11 @@
 
 //-----------------------------------------------------------------------------
 KMMessage::KMMessage(DwMessage* aMsg)
-  : KMMsgBase(),
-    mMsg(aMsg),
-    mNeedsAssembly(true),
-    mDecodeHTML(false),
-    mOverrideCodec(0),
-    mFolderOffset( 0 ),
-    mMsgSize(0),
-    mMsgLength( 0 ),
-    mDate( 0 ),
-    mEncryptionState( KMMsgEncryptionStateUnknown ),
-    mSignatureState( KMMsgSignatureStateUnknown ),
-    mMDNSentState( KMMsgMDNStateUnknown ),
-    mUnencryptedMsg(0),
-    mLastUpdated( 0 )
+  : KMMsgBase()
 {
+  init( aMsg );
+  // aMsg might need assembly
+  mNeedsAssembly = true;
 }
 
 //-----------------------------------------------------------------------------
@@ -138,10 +129,14 @@
   assign( other );
 }
 
-void KMMessage::init()
+void KMMessage::init( DwMessage* aMsg )
 {
   mNeedsAssembly = false;
+  if ( aMsg ) {
+    mMsg = aMsg;
+  } else {
   mMsg = new DwMessage;
+  }
   mOverrideCodec = 0;
   mDecodeHTML = false;
   mComplete = true;
@@ -157,6 +152,7 @@
   mUnencryptedMsg = 0;
   mLastUpdated = 0;
   mCursorPos = 0;
+  mIsParsed = false;
 }
 
 void KMMessage::assign( const KMMessage& other )
@@ -179,6 +175,7 @@
   mEncryptionState = other.mEncryptionState;
   mSignatureState = other.mSignatureState;
   mMDNSentState = other.mMDNSentState;
+  mIsParsed = other.mIsParsed;
   mDate    = other.mDate;
   if( other.hasUnencryptedMsg() )
     mUnencryptedMsg = new KMMessage( *other.unencryptedMsg() );
@@ -212,7 +209,7 @@
 {
   DwHeaders& header = mMsg->Headers();
   if (header.HasMessageId())
-    return header.MessageId().AsString().c_str();
+    return KMail::Util::CString( header.MessageId().AsString() );
   else
     return "";
 }
@@ -294,7 +291,7 @@
 }
 
 //-----------------------------------------------------------------------------
-const DwMessage *KMMessage::asDwMessage()
+const DwMessage* KMMessage::asDwMessage()
 {
   if (mNeedsAssembly)
   {
@@ -306,23 +303,21 @@
 
 //-----------------------------------------------------------------------------
 QCString KMMessage::asString() const {
-  return asDwString().c_str();
+  return KMail::Util::CString( asDwString() );
 }
 
 
-QCString KMMessage::asSendableString() const
+QByteArray KMMessage::asSendableString() const
 {
-  KMMessage msg;
-  msg.fromString(asString());
+  KMMessage msg( new DwMessage( *this->mMsg ) );
   msg.removePrivateHeaderFields();
   msg.removeHeaderField("Bcc");
-  return msg.asString();
+  return KMail::Util::ByteArray( msg.asDwString() ); // and another copy again!
 }
 
 QCString KMMessage::headerAsSendableString() const
 {
-  KMMessage msg;
-  msg.fromString(asString());
+  KMMessage msg( new DwMessage( *this->mMsg ) );
   msg.removePrivateHeaderFields();
   msg.removeHeaderField("Bcc");
   return msg.headerAsString().latin1();
@@ -392,7 +387,7 @@
 }
 
 void KMMessage::fromString( const QCString & str, bool aSetStatus ) {
-  return fromDwString( DwString( str.data() ), aSetStatus );
+  return fromDwString( KMail::Util::dwString( str ), aSetStatus );
 }
 
 void KMMessage::fromDwString(const DwString& str, bool aSetStatus)
@@ -1105,12 +1100,10 @@
 
 KMMessage* KMMessage::createRedirect( const QString &toStr )
 {
-  KMMessage* msg = new KMMessage;
+  // copy the message 1:1
+  KMMessage* msg = new KMMessage( new DwMessage( *this->mMsg ) );
   KMMessagePart msgPart;
 
-  // copy the message 1:1
-  msg->fromDwString(this->asDwString());
-
   uint id = 0;
   QString strId = msg->headerField( "X-KMail-Identity" ).stripWhiteSpace();
   if ( !strId.isEmpty())
@@ -1195,6 +1188,7 @@
   // preserved
   if ( type() == DwMime::kTypeMultipart ||
      ( type() == DwMime::kTypeText && subtype() == DwMime::kSubtypePlain ) ) {
+    // ## slow, we could probably use: delete msg->mMsg; msg->mMsg = new DwMessage( this->mMsg );
     msg->fromDwString( this->asDwString() );
     // remember the type and subtype, initFromMessage sets the contents type to
     // text/plain, via initHeader, for unclear reasons
@@ -1250,7 +1244,7 @@
     KMMessagePart secondPart;
     secondPart.setType( type() );
     secondPart.setSubtype( subtype() );
-    secondPart.setBody( mMsg->Body().AsString().c_str() );
+    secondPart.setBody( mMsg->Body().AsString() );
     // use the headers of the original mail
     applyHeadersToMessagePart( mMsg->Headers(), &secondPart );
     msg->addBodyPart(&secondPart);
@@ -1761,10 +1755,10 @@
   unixTime = header.Date().AsUnixTime();
 
   QCString result = ctime(&unixTime);
+  int len = result.length();
+  if (result[len-1]=='\n')
+    result.truncate(len-1);
 
-  if (result[result.length()-1]=='\n')
-    result.truncate(result.length()-1);
-
   return result;
 }
 
@@ -2469,10 +2463,11 @@
 //-----------------------------------------------------------------------------
 QCString KMMessage::body() const
 {
-  DwString body = mMsg->Body().AsString();
-  QCString str = body.c_str();
-  kdWarning( str.length() != body.length(), 5006 )
-    << "KMMessage::body(): body is binary but used as text!" << endl;
+  const DwString& body = mMsg->Body().AsString();
+  QCString str = KMail::Util::CString( body );
+  // Calls length() -> slow
+  //kdWarning( str.length() != body.length(), 5006 )
+  //  << "KMMessage::body(): body is binary but used as text!" << endl;
   return str;
 }
 
@@ -2481,7 +2476,7 @@
 QByteArray KMMessage::bodyDecodedBinary() const
 {
   DwString dwstr;
-  DwString dwsrc = mMsg->Body().AsString();
+  const DwString& dwsrc = mMsg->Body().AsString();
 
   switch (cte())
   {
@@ -2522,13 +2517,13 @@
     break;
   }
 
-  unsigned int len = dwstr.size();
-  QCString result(len+1);
-  memcpy(result.data(),dwstr.data(),len);
-  result[len] = 0;
-  kdWarning(result.length() != len, 5006)
-    << "KMMessage::bodyDecoded(): body is binary but used as text!" << endl;
-  return result;
+  return KMail::Util::CString( dwstr );
+
+  // Calling QCString::length() is slow
+  //QCString result = KMail::Util::CString( dwstr );
+  //kdWarning(result.length() != len, 5006)
+  //  << "KMMessage::bodyDecoded(): body is binary but used as text!" << endl;
+  //return result;
 }
 
 
@@ -2609,7 +2604,7 @@
                                     bool allow8Bit,
                                     bool willBeSigned )
 {
-  CharFreq cf( aBuf.data(), aBuf.length() ); // it's safe to pass null strings
+  CharFreq cf( aBuf.data(), aBuf.size()-1 ); // it's safe to pass null strings
 
   allowedCte = determineAllowedCtes( cf, allow8Bit, willBeSigned );
 
@@ -2676,9 +2671,19 @@
 //-----------------------------------------------------------------------------
 void KMMessage::setBody(const QCString& aStr)
 {
-  mMsg->Body().FromString(aStr.data());
+  mMsg->Body().FromString(KMail::Util::dwString(aStr));
   mNeedsAssembly = TRUE;
 }
+void KMMessage::setBody(const DwString& aStr)
+{
+  mMsg->Body().FromString(aStr);
+  mNeedsAssembly = TRUE;
+}
+void KMMessage::setBody(const char* aStr)
+{
+  mMsg->Body().FromString(aStr);
+  mNeedsAssembly = TRUE;
+}
 
 void KMMessage::setMultiPartBody( const QCString & aStr ) {
   setBody( aStr );
@@ -2874,14 +2879,14 @@
 
 void applyHeadersToMessagePart( DwHeaders& headers, KMMessagePart* aPart )
 {
-  // TODO: Instead of manually implementing RFC2231 header encoding (i.e. 
-  //       possibly multiple values given as paramname*0=..; parmaname*1=..;... 
+  // TODO: Instead of manually implementing RFC2231 header encoding (i.e.
+  //       possibly multiple values given as paramname*0=..; parmaname*1=..;...
   //       or par as paramname*0*=..; parmaname*1*=..;..., which should be
   //       concatenated), use a generic method to decode the header, using RFC
   //       2047 or 2231, or whatever future RFC might be appropriate!
   //       Right now, some fields are decoded, while others are not. E.g.
   //       Content-Disposition is not decoded here, rather only on demand in
-  //       KMMsgPart::fileName; Name however is decoded here and stored as a 
+  //       KMMsgPart::fileName; Name however is decoded here and stored as a
   //       decoded String in KMMsgPart...
   // Content-type
   QCString additionalCTypeParams;
@@ -2964,9 +2969,9 @@
 
     // Body
     if (withBody)
-      aPart->setBody( aDwBodyPart->Body().AsString().c_str() );
+      aPart->setBody( aDwBodyPart->Body().AsString() );
     else
-      aPart->setBody( "" );
+      aPart->setBody( QCString("") );
 
     // Content-id
     if ( headers.HasContentId() ) {
@@ -2987,7 +2992,7 @@
     //aPart->setName(" ");
     aPart->setContentDescription("");
     aPart->setContentDisposition("");
-    aPart->setBody("");
+    aPart->setBody(QCString(""));
     aPart->setContentId("");
   }
 }
@@ -3135,8 +3140,9 @@
   if (!contDisp.isEmpty())
     headers.ContentDisposition().FromString(contDisp);
 
-  if (!aPart->body().isNull())
-    part->Body().FromString(aPart->body());
+  const DwString bodyStr = aPart->dwBody();
+  if (!bodyStr.empty())
+    part->Body().FromString(bodyStr);
   else
     part->Body().FromString("");
 
@@ -3194,7 +3200,7 @@
 //-----------------------------------------------------------------------------
 QCString KMMessage::html2source( const QCString & src )
 {
-  QCString result( 1 + 6*src.length() );  // maximal possible length
+  QCString result( 1 + 6*(src.size()-1) );  // maximal possible length
 
   QCString::ConstIterator s = src.begin();
   QCString::Iterator d = result.begin();
@@ -4134,11 +4140,23 @@
     return;
   }
 
+  bool filenameEmpty = true;
+  if ( part->hasHeaders() ) {
+    if ( part->Headers().HasContentDisposition() ) {
+      DwDispositionType cd = part->Headers().ContentDisposition();
+      filenameEmpty = cd.Filename().empty();
+      if ( filenameEmpty ) {
+        // let's try if it is rfc 2231 encoded which mimelib can't handle
+        filenameEmpty = KMMsgBase::decodeRFC2231String( KMMsgBase::extractRFC2231HeaderField( cd.AsString().c_str(), "filename" ) ).isEmpty();
+      }
+    }
+  }
+
   if ( part->hasHeaders() &&
        ( ( part->Headers().HasContentDisposition() &&
            !part->Headers().ContentDisposition().Filename().empty() ) ||
          ( part->Headers().HasContentType() &&
-           !part->Headers().ContentType().Name().empty() ) ) )
+           !filenameEmpty ) ) )
   {
     // now blacklist certain ContentTypes
     if ( !part->Headers().HasContentType() ||
Index: kmail/partNode.cpp
===================================================================
--- kmail/partNode.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kmail/partNode.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -37,6 +37,7 @@
 #include <mimelib/utility.h>
 #include <qregexp.h>
 #include <kasciistricmp.h>
+#include "util.h"
 
 /*
   ===========================================================================
@@ -179,7 +180,7 @@
     return mEncodedBody;
 
   if ( mDwPart )
-    mEncodedBody = mDwPart->Body().AsString().c_str();
+    mEncodedBody = KMail::Util::CString( mDwPart->Body().AsString() );
   else
     mEncodedBody = 0;
   mEncodedOk = true;
Index: kmail/configuredialog_p.h
===================================================================
--- kmail/configuredialog_p.h	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kmail/configuredialog_p.h	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -349,6 +349,7 @@
   Q_OBJECT
 public:
   AccountsPageReceivingTab( QWidget * parent=0, const char * name=0 );
+  ~AccountsPageReceivingTab();
   QString helpAnchor() const;
   void save();
 
@@ -384,7 +385,7 @@
     QGuardedPtr< KMAccount > oldAccount;
     QGuardedPtr< KMAccount > newAccount;
   };
-  // ### make this a qptrlist:
+  // ### make this value-based:
   QValueList< ModifiedAccountsType* >  mModifiedAccounts;
 };
 
@@ -972,6 +973,7 @@
   KIntSpinBox  *mDelayedMarkTime;
   QCheckBox    *mShowPopupAfterDnD;
   KMail::FolderRequester *mOnStartupOpenFolder;
+  QComboBox    *mQuotaCmbBox;
 };
 
 class MiscPageGroupwareTab : public ConfigModuleTab  {
@@ -1004,6 +1006,7 @@
   KMail::AccountComboBox* mAccountCombo; // in the widgetstack
 
   QCheckBox* mHideGroupwareFolders;
+  QCheckBox* mOnlyShowGroupwareFolders;
   QCheckBox* mAutoResCB;
   QCheckBox* mAutoDeclConflCB;
   QCheckBox* mAutoDeclRecurCB;
Index: kmail/kmailicalifaceimpl.h
===================================================================
--- kmail/kmailicalifaceimpl.h	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kmail/kmailicalifaceimpl.h	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -51,7 +51,7 @@
 class KMFolderDir;
 class KMFolderTreeItem;
 
-namespace {
+namespace KMail {
 
   // Local helper class
 class ExtraFolder {
@@ -150,6 +150,13 @@
   bool hideResourceFolder( KMFolder* folder ) const;
 
   /**
+   * Returns true if the given folder is the root of the groupware account,
+   * groupware folders are hidden, and only groupware folders shown in this
+   * account.
+   */
+  bool hideResourceAccountRoot( KMFolder* folder ) const;
+
+  /**
    * Returns the resource folder type. Other is returned if resource
    * isn't enabled or it isn't a resource folder.
    */
@@ -276,9 +283,9 @@
 
   // The extra IMAP resource folders
   // Key: folder location. Data: folder.
-  QDict<ExtraFolder> mExtraFolders;
+  QDict<KMail::ExtraFolder> mExtraFolders;
   // used for collecting incidences during async loading
-  QDict<Accumulator> mAccumulators;
+  QDict<KMail::Accumulator> mAccumulators;
   // More info for each folder we care about (mContacts etc. as well as the extra folders)
   // The reason for storing it here is that it can be shared between
   // kmfoldercachedimap and kmfolderimap, and that it's groupware data anyway.
Index: kmail/headerstrategy.cpp
===================================================================
--- kmail/headerstrategy.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kmail/headerstrategy.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -60,7 +60,8 @@
 
   static const char * richHeaders[] = {
     "subject", "date", "from", "cc", "bcc", "to",
-    "organization", "organisation", "reply-to"
+    "organization", "organisation", "reply-to",
+    "user-agent", "x-mailer"
   };
   static const int numRichHeaders = sizeof richHeaders / sizeof *richHeaders;
 
Index: kmail/folderdiaquotatab_p.h
===================================================================
--- kmail/folderdiaquotatab_p.h	(.../tags/KDE/3.5.6/kdepim)	(wersja 0)
+++ kmail/folderdiaquotatab_p.h	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -0,0 +1,66 @@
+/**
+ * folderdiaquotatab.h
+ *
+ * Copyright (c) 2006 Till Adam <adam@kde.org>
+ *
+ *
+ *  This program is free software; you can redistribute it and/or modify
+ *  it under the terms of the GNU General Public License as published by
+ *  the Free Software Foundation; version 2 of the License
+ *
+ *  This program is distributed in the hope that it will be useful,
+ *  but WITHOUT ANY WARRANTY; without even the implied warranty of
+ *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+ *  GNU General Public License for more details.
+ *
+ *  You should have received a copy of the GNU General Public License
+ *  along with this program; if not, write to the Free Software
+ *  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA.
+ *
+ *  In addition, as a special exception, the copyright holders give
+ *  permission to link the code of this program with any edition of
+ *  the Qt library by Trolltech AS, Norway (or with modified versions
+ *  of Qt that use the same license as Qt), and distribute linked
+ *  combinations including the two.  You must obey the GNU General
+ *  Public License in all respects for all of the code used other than
+ *  Qt.  If you modify this file, you may extend this exception to
+ *  your version of the file, but you are not obligated to do so.  If
+ *  you do not wish to do so, delete this exception statement from
+ *  your version.
+ */
+
+
+#ifndef FOLDERDIAQUOTA_P_H
+#define FOLDERDIAQUOTA_P_H
+
+
+#include <qlabel.h>
+#include <qprogressbar.h>
+#include <qwhatsthis.h>
+
+#include "quotajobs.h"
+
+namespace KMail {
+
+class QuotaWidget : public QWidget {
+
+ Q_OBJECT
+public:
+    QuotaWidget( QWidget* parent, const char* name = 0 );
+    virtual ~QuotaWidget() { }
+    void setQuotaInfo( const KMail::QuotaInfo& info );
+
+private:
+    void readConfig();
+
+private:
+    QLabel* mInfoLabel;
+    QLabel* mRootLabel;
+    QProgressBar* mProgressBar;
+    QString mUnits;
+    int mFactor;
+};
+
+}//end of namespace KMail
+
+#endif /* FOLDERDIAQUOTA_H */
Index: kmail/kmail_config_identity.desktop
===================================================================
--- kmail/kmail_config_identity.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kmail/kmail_config_identity.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -14,7 +14,7 @@
 
 Name=Identities
 Name[ar]=الهويات
-Name[be]=Увасабленьні
+Name[be]=Увасабленні
 Name[bg]=Самоличност
 Name[br]=Anvelezhioù
 Name[bs]=Identiteti
@@ -36,11 +36,14 @@
 Name[is]=Auðkenni
 Name[it]=Identità
 Name[ja]=個人情報
+Name[kk]=Іс-әлпеттері
 Name[km]=អត្តសញ្ញាណ
 Name[lt]=Tapatybės
+Name[mk]=Идентитети
 Name[ms]=Identiti
 Name[nb]=Identiteter
 Name[nds]=Identiteten
+Name[ne]=परिचय
 Name[nl]=Identiteiten
 Name[nn]=Identitetar
 Name[pl]=Tożsamości
@@ -63,7 +66,7 @@
 Comment=Manage Identities
 Comment[af]=Bestuur identiteite
 Comment[ar]=تدبير الهويات
-Comment[be]=Кіраваньне увасабленьнямі
+Comment[be]=Кіраванне увасабленнямі
 Comment[bg]=Настройки на самоличността
 Comment[br]=Merañ an anvelezhioù
 Comment[bs]=Upravljaj identitetima
@@ -84,11 +87,14 @@
 Comment[is]=Stjórna auðkennum
 Comment[it]=Gestisce le identità
 Comment[ja]=個人情報の管理
+Comment[kk]=Іс-әлпеттерді басқару
 Comment[km]=គ្រប់គ្រង​អត្តសញ្ញាណ
 Comment[lt]=Tvarkyti tapatybes
+Comment[mk]=Менаџирајте ги идентитетите
 Comment[ms]=Uruskan identiti
 Comment[nb]=Identitetsbehandling
 Comment[nds]=Identiteten plegen
+Comment[ne]=परिचय व्यवस्थापन गर्नुहोस्
 Comment[nl]=Identiteiten beheren
 Comment[nn]=Handter identitetar
 Comment[pl]=Zarządzanie tożsamościami
@@ -108,7 +114,7 @@
 Comment[zh_CN]=管理身份
 Comment[zh_TW]=管理身份
 Keywords=kmail,identity
-Keywords[be]=K Пошта,увасабленьне,kmail,identity
+Keywords[be]=K Пошта,увасабленне,kmail,identity
 Keywords[bg]=пощенски, клиент, е-поща, самоличност, информация, kmail, identity
 Keywords[br]=kmail,anvelezh
 Keywords[bs]=kmail,identity,identitet
@@ -132,9 +138,11 @@
 Keywords[ja]=kmail,個人情報
 Keywords[km]=kmail,អត្តសញ្ញាណ
 Keywords[lt]=kmail,identity,tapatybė
+Keywords[mk]=kmail,identity,кпошта,идентитет,идентитети
 Keywords[ms]=kmail,identiti
 Keywords[nb]=kmail,identitet
 Keywords[nds]=KMail,Identiteet,Identiteten
+Keywords[ne]=केडीई मेल, परिचय
 Keywords[nl]=kmail,identiteit
 Keywords[nn]=KMail,identitet
 Keywords[pl]=kmail,tożsamość,tożsamości
Index: kmail/kmaccount.cpp
===================================================================
--- kmail/kmaccount.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kmail/kmaccount.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -151,6 +151,11 @@
   {
     setFolder(kmkernel->folderMgr()->findIdString(folderName), true);
   }
+
+  if (mInterval == 0)
+    deinstallTimer();
+  else
+    installTimer();
 }
 
 
@@ -278,15 +283,10 @@
 void KMAccount::setCheckInterval(int aInterval)
 {
   if (aInterval <= 0)
-  {
     mInterval = 0;
-    deinstallTimer();
-  }
   else
-  {
     mInterval = aInterval;
-    installTimer();
-  }
+  // Don't call installTimer from here! See #117935.
 }
 
 //----------------------------------------------------------------------------
Index: kmail/kmcommands.cpp
===================================================================
--- kmail/kmcommands.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kmail/kmcommands.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -182,7 +182,7 @@
   for ( fit = mFolders.begin(); fit != mFolders.end(); ++fit ) {
     if (!(*fit))
       continue;
-    (*fit)->close();
+    (*fit)->close("kmcommand");
   }
 }
 
@@ -440,7 +440,7 @@
 
 void KMCommand::keepFolderOpen( KMFolder *folder )
 {
-  folder->open();
+  folder->open("kmcommand");
   mFolders.append( folder );
 }
 
@@ -481,6 +481,9 @@
 {
   //TODO : consider factoring createReply into this method.
   KMMessage *msg = retrievedMessage();
+  if ( !msg || !msg->codec() ) {
+    return Failed;
+  }
   KMMessage *rmsg = msg->createReply( KMail::ReplyNone, mSelection );
   rmsg->setTo( KMMessage::decodeMailtoUrl( mUrl.path() ) );
 
@@ -503,6 +506,9 @@
 {
   //TODO : consider factoring createForward into this method.
   KMMessage *msg = retrievedMessage();
+  if ( !msg || !msg->codec() ) {
+    return Failed;
+  }
   KMMessage *fmsg = msg->createForward();
   fmsg->setTo( KMMessage::decodeMailtoUrl( mUrl.path() ) );
 
@@ -690,9 +696,8 @@
     return Failed;
 
   // Take a copy of the original message, which remains unchanged.
-  KMMessage *newMsg = new KMMessage;
+  KMMessage *newMsg = new KMMessage( new DwMessage( *msg->asDwMessage() ) );
   newMsg->setComplete( msg->isComplete() );
-  newMsg->fromString( msg->asString() );
 
   KMail::Composer *win = KMail::makeComposer();
   newMsg->setTransferInProgress( false ); // From here on on, the composer owns the message.
@@ -713,6 +718,9 @@
 KMCommand::Result KMShowMsgSrcCommand::execute()
 {
   KMMessage *msg = retrievedMessage();
+  if ( !msg || !msg->codec() ) {
+    return Failed;
+  }
   if ( msg->isComplete() && !mMsgWasComplete )
     msg->notify(); // notify observers as msg was transfered
   QString str = msg->codec()->toUnicode( msg->asString() );
@@ -742,7 +750,7 @@
 static KURL subjectToUrl( const QString & subject ) {
     return KFileDialog::getSaveURL( subject.stripWhiteSpace()
                                            .replace( QDir::separator(), '_' ),
-                                    QString::null );
+                                    "*.mbox" );
 }
 
 KMSaveMsgCommand::KMSaveMsgCommand( QWidget *parent, KMMessage * msg )
@@ -787,7 +795,7 @@
     mMsgList.append( (*it)->getMsgSerNum() );
     mTotalSize += (*it)->msgSize();
     if ((*it)->parent() != 0)
-      (*it)->parent()->open();
+      (*it)->parent()->open("kmcommand");
     ++it;
   }
   mMsgListIndex = 0;
@@ -876,13 +884,11 @@
 void KMSaveMsgCommand::slotMessageRetrievedForSaving(KMMessage *msg)
 {
   if ( msg ) {
-    QCString str( msg->mboxMessageSeparator() );
-    str += KMFolderMbox::escapeFrom( msg->asString() );
-    str += '\n';
+    mData = KMFolderMbox::escapeFrom( msg->asDwString() );
+    KMail::Util::insert( mData, 0, msg->mboxMessageSeparator() );
+    KMail::Util::append( mData, "\n" );
     msg->setTransferInProgress(false);
 
-    mData = str;
-    mData.resize(mData.size() - 1);
     mOffset = 0;
     QByteArray data;
     int size;
@@ -904,7 +910,7 @@
     KMMsgDict::instance()->getLocation( msg, &p, &idx );
     assert( p == msg->parent() ); assert( idx >= 0 );
     p->unGetMsg( idx );
-    p->close();
+    p->close("kmcommand");
   }
 }
 
@@ -958,7 +964,7 @@
 KMCommand::Result KMOpenMsgCommand::execute()
 {
   if ( mUrl.isEmpty() ) {
-    mUrl = KFileDialog::getOpenURL( ":OpenMessage", "message/rfc822",
+    mUrl = KFileDialog::getOpenURL( ":OpenMessage", "message/rfc822 application/mbox",
                                     parentWidget(), i18n("Open Message") );
   }
   if ( mUrl.isEmpty() ) {
@@ -1065,6 +1071,9 @@
 {
   KCursorSaver busy(KBusyPtr::busy());
   KMMessage *msg = retrievedMessage();
+  if ( !msg || !msg->codec() ) {
+    return Failed;
+  }
   KMMessage *reply = msg->createReply( KMail::ReplySmart, mSelection );
   KMail::Composer * win = KMail::makeComposer( reply );
   win->setCharset( msg->codec()->mimeName(), TRUE );
@@ -1085,6 +1094,9 @@
 {
   KCursorSaver busy(KBusyPtr::busy());
   KMMessage *msg = retrievedMessage();
+  if ( !msg || !msg->codec() ) {
+    return Failed;
+  }
   KMMessage *reply = msg->createReply( KMail::ReplySmart, "", TRUE);
   KMail::Composer * win = KMail::makeComposer( reply );
   win->setCharset(msg->codec()->mimeName(), TRUE);
@@ -1105,6 +1117,9 @@
 {
   KCursorSaver busy(KBusyPtr::busy());
   KMMessage *msg = retrievedMessage();
+  if ( !msg || !msg->codec() ) {
+    return Failed;
+  }
   KMMessage *reply = msg->createReply( KMail::ReplyList, mSelection);
   KMail::Composer * win = KMail::makeComposer( reply );
   win->setCharset(msg->codec()->mimeName(), TRUE);
@@ -1125,6 +1140,9 @@
 {
   KCursorSaver busy(KBusyPtr::busy());
   KMMessage *msg = retrievedMessage();
+  if ( !msg || !msg->codec() ) {
+    return Failed;
+  }
   KMMessage *reply = msg->createReply( KMail::ReplyAll, mSelection );
   KMail::Composer * win = KMail::makeComposer( reply );
   win->setCharset( msg->codec()->mimeName(), TRUE );
@@ -1145,6 +1163,9 @@
 {
   KCursorSaver busy(KBusyPtr::busy());
   KMMessage *msg = retrievedMessage();
+  if ( !msg || !msg->codec() ) {
+    return Failed;
+  }
   KMMessage *reply = msg->createReply( KMail::ReplyAuthor, mSelection );
   KMail::Composer * win = KMail::makeComposer( reply );
   win->setCharset( msg->codec()->mimeName(), TRUE );
@@ -1176,7 +1197,6 @@
   if (msgList.count() >= 2) { // Multiple forward
 
     uint id = 0;
-    // QCString msgText = "";
     QPtrList<KMMessage> linklist;
     for ( KMMessage *msg = msgList.first(); msg; msg = msgList.next() ) {
       // set the identity
@@ -1197,7 +1217,7 @@
     for ( KMMessage *msg = linklist.first(); msg; msg = linklist.next() ) {
       TemplateParser parser( fwdMsg, TemplateParser::Forward,
         msg->body(), false, false, false, false);
-        parser.process( msg, 0, true );
+        parser.process( msg, false, true );
 
       fwdMsg->link( msg, KMMsgStatusForwarded );
     }
@@ -1280,8 +1300,7 @@
     msgPart->setContentDescription(msg->from()+": "+msg->subject());
     msgPart->setContentDisposition( "inline" );
     // THIS HAS TO BE AFTER setCte()!!!!
-    QValueList<int> dummy;
-    msgPart->setBodyAndGuessCte(msg->asString(), dummy, true);
+    msgPart->setMessageBody( KMail::Util::ByteArray( msg->asDwString() ) );
     msgPart->setCharset("");
 
     fwdMsg->link(msg, KMMsgStatusForwarded);
@@ -1422,6 +1441,9 @@
 {
   KCursorSaver busy(KBusyPtr::busy());
   KMMessage *msg = retrievedMessage();
+  if ( !msg || !msg->codec() ) {
+    return Failed;
+  }
   KMMessage *reply = msg->createReply( KMail::ReplySmart, mSelection,
                                        false, true, false, mTemplate );
   KMail::Composer * win = KMail::makeComposer( reply );
@@ -1444,6 +1466,9 @@
 {
   KCursorSaver busy(KBusyPtr::busy());
   KMMessage *msg = retrievedMessage();
+  if ( !msg || !msg->codec() ) {
+    return Failed;
+  }
   KMMessage *reply = msg->createReply( KMail::ReplyAll, mSelection,
                                        false, true, false, mTemplate );
   KMail::Composer * win = KMail::makeComposer( reply );
@@ -1476,7 +1501,6 @@
   if (msgList.count() >= 2) { // Multiple forward
 
     uint id = 0;
-    // QCString msgText = "";
     QPtrList<KMMessage> linklist;
     for ( KMMessage *msg = msgList.first(); msg; msg = msgList.next() ) {
       // set the identity
@@ -1497,7 +1521,7 @@
     for ( KMMessage *msg = linklist.first(); msg; msg = linklist.next() ) {
       TemplateParser parser( fwdMsg, TemplateParser::Forward,
         msg->body(), false, false, false, false);
-        parser.process( msg, 0, true );
+        parser.process( msg, false, true );
 
       fwdMsg->link( msg, KMMsgStatusForwarded );
     }
@@ -1888,15 +1912,15 @@
   QPtrList<KMMessage> list;
   QPtrList<KMMessage> localList;
 
-  if (mDestFolder && mDestFolder->open() != 0)
+  if (mDestFolder && mDestFolder->open("kmcommand") != 0)
   {
     deleteLater();
     return Failed;
   }
 
+  setEmitsCompletedItself( true );
   KCursorSaver busy(KBusyPtr::busy());
 
-  mWaitingForMsgs.clear();
   for (msgBase = mMsgList.first(); msgBase; msgBase = mMsgList.next() )
   {
     KMFolder *srcFolder = msgBase->parent();
@@ -1918,27 +1942,24 @@
       // imap => imap with same account
       list.append(msg);
     } else {
-      newMsg = new KMMessage;
+      newMsg = new KMMessage( new DwMessage( *msg->asDwMessage() ) );
       newMsg->setComplete(msg->isComplete());
       // make sure the attachment state is only calculated when it's complete
       if (!newMsg->isComplete())
         newMsg->setReadyToShow(false);
-      newMsg->fromString(msg->asString());
       newMsg->setStatus(msg->status());
 
       if (srcFolder && !newMsg->isComplete())
       {
         // imap => others
-        mWaitingForMsgs.append( msg->getMsgSerNum() );
-        disconnect(mDestFolder, SIGNAL(msgAdded(KMFolder*, Q_UINT32)),
-            this, SLOT(slotMsgAdded(KMFolder*, Q_UINT32)));
-        connect(mDestFolder, SIGNAL(msgAdded(KMFolder*, Q_UINT32)),
-            this, SLOT(slotMsgAdded(KMFolder*, Q_UINT32)));
         newMsg->setParent(msg->parent());
         FolderJob *job = srcFolder->createJob(newMsg);
         job->setCancellable( false );
+        mPendingJobs << job;
         connect(job, SIGNAL(messageRetrieved(KMMessage*)),
                 mDestFolder, SLOT(reallyAddCopyOfMsg(KMMessage*)));
+        connect( job, SIGNAL(result(KMail::FolderJob*)),
+                 this, SLOT(slotJobFinished(KMail::FolderJob*)) );
         job->start();
       } else {
         // local => others
@@ -1963,14 +1984,14 @@
       mDestFolder->unGetMsg( *it );
     }
     if ( mDestFolder->folderType() == KMFolderTypeImap ) {
-      if ( mWaitingForMsgs.isEmpty() ) {
+      if ( mPendingJobs.isEmpty() ) {
         // wait for the end of the copy before closing the folder
         KMFolderImap *imapDestFolder = static_cast<KMFolderImap*>(mDestFolder->storage());
         connect( imapDestFolder, SIGNAL( folderComplete( KMFolderImap*, bool ) ),
-            this, SLOT( slotFolderComplete() ) );
+            this, SLOT( slotFolderComplete( KMFolderImap*, bool ) ) );
       }
     } else {
-      deleteNow = true; // we're done
+      deleteNow = list.isEmpty() && mPendingJobs.isEmpty(); // we're done if there are no other mails we need to fetch
     }
   }
 
@@ -1981,7 +2002,7 @@
     // copy the message(s); note: the list is empty afterwards!
     KMFolderImap *imapDestFolder = static_cast<KMFolderImap*>(mDestFolder->storage());
     connect( imapDestFolder, SIGNAL( folderComplete( KMFolderImap*, bool ) ),
-        this, SLOT( slotFolderComplete() ) );
+        this, SLOT( slotFolderComplete( KMFolderImap*, bool ) ) );
     imapDestFolder->copyMsg(list);
     imapDestFolder->getFolder();
   }
@@ -1990,26 +2011,45 @@
   // otherwise this is done in slotMsgAdded or slotFolderComplete
   if ( deleteNow )
   {
-    mDestFolder->close();
+    mDestFolder->close("kmcommand");
+    setResult( OK );
+    emit completed( this );
     deleteLater();
   }
 
   return OK;
 }
 
-void KMCopyCommand::slotMsgAdded( KMFolder*, Q_UINT32 serNum )
+void KMCopyCommand::slotJobFinished(KMail::FolderJob * job)
 {
-  mWaitingForMsgs.remove( serNum );
-  if ( mWaitingForMsgs.isEmpty() )
+  mPendingJobs.remove( job );
+  if ( job->error() ) {
+    kdDebug(5006) << k_funcinfo << "folder job failed: " << job->error() << endl;
+    // kill all pending jobs
+    for ( QValueList<KMail::FolderJob*>::Iterator it = mPendingJobs.begin(); it != mPendingJobs.end(); ++it ) {
+      disconnect( (*it), SIGNAL(result(KMail::FolderJob*)),
+                  this, SLOT(slotJobFinished(KMail::FolderJob*)) );
+      (*it)->kill();
+    }
+    mPendingJobs.clear();
+    setResult( Failed );
+  }
+
+  if ( mPendingJobs.isEmpty() )
   {
-    mDestFolder->close();
+    mDestFolder->close("kmcommand");
+    emit completed( this );
     deleteLater();
   }
 }
 
-void KMCopyCommand::slotFolderComplete()
+void KMCopyCommand::slotFolderComplete( KMFolderImap*, bool success )
 {
-  mDestFolder->close();
+  kdDebug(5006) << k_funcinfo << success << endl;
+  if ( !success )
+    setResult( Failed );
+  mDestFolder->close("kmcommand");
+  emit completed( this );
   deleteLater();
 }
 
@@ -2046,7 +2086,7 @@
   typedef QMap< KMFolder*, QPtrList<KMMessage>* > FolderToMessageListMap;
   FolderToMessageListMap folderDeleteList;
 
-  if (mDestFolder && mDestFolder->open() != 0) {
+  if (mDestFolder && mDestFolder->open("kmcommand") != 0) {
     completeMove( Failed );
     return Failed;
   }
@@ -2216,11 +2256,11 @@
 void KMMoveCommand::completeMove( Result result )
 {
   if ( mDestFolder )
-    mDestFolder->close();
+    mDestFolder->close("kmcommand");
   while ( !mOpenedFolders.empty() ) {
     KMFolder *folder = mOpenedFolders.back();
     mOpenedFolders.pop_back();
-    folder->close();
+    folder->close("kmcommand");
   }
   if ( mProgressItem ) {
     mProgressItem->setComplete();
@@ -2241,14 +2281,14 @@
   const QPtrList<KMMsgBase> &msgList )
 :KMMoveCommand( findTrashFolder( srcFolder ), msgList)
 {
-  srcFolder->open();
+  srcFolder->open("kmcommand");
   mOpenedFolders.push_back( srcFolder );
 }
 
 KMDeleteMsgCommand::KMDeleteMsgCommand( KMFolder* srcFolder, KMMessage * msg )
 :KMMoveCommand( findTrashFolder( srcFolder ), msg)
 {
-  srcFolder->open();
+  srcFolder->open("kmcommand");
   mOpenedFolders.push_back( srcFolder );
 }
 
@@ -2260,7 +2300,7 @@
   KMMsgDict::instance()->getLocation( sernum, &srcFolder, &idx );
   if ( srcFolder ) {
     KMMsgBase *msg = srcFolder->getMsgBase( idx );
-    srcFolder->open();
+    srcFolder->open("kmcommand");
     mOpenedFolders.push_back( srcFolder );
     addMsg( msg );
   }
@@ -2563,9 +2603,7 @@
   {
     // This does not decode the Message Content-Transfer-Encoding
     // but saves the _original_ content of the message part
-    QCString cstr( node->msgPart().body() );
-    data = cstr;
-    data.resize(data.size() - 1);
+    data = KMail::Util::ByteArray( node->msgPart().dwBody() );
   }
   else
   {
@@ -2635,7 +2673,11 @@
           i18n( "KMail Error" ) );
       return Failed;
     }
-    fchmod( file.handle(), S_IRUSR | S_IWUSR );
+
+    // #79685 by default use the umask the user defined, but let it be configurable
+    if ( GlobalSettings::self()->disregardUmask() )
+      fchmod( file.handle(), S_IRUSR | S_IWUSR );
+
     ds.setDevice( &file );
   } else
   {
@@ -2743,7 +2785,9 @@
 KMCommand::Result KMResendMessageCommand::execute()
 {
   KMMessage *msg = retrievedMessage();
-
+  if ( !msg || !msg->codec() ) {
+    return Failed;
+  }
   KMMessage *newMsg = new KMMessage(*msg);
   newMsg->setCharset(msg->codec()->mimeName());
   // the message needs a new Message-Id
Index: kmail/kmstartup.cpp
===================================================================
--- kmail/kmstartup.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kmail/kmstartup.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -36,10 +36,12 @@
 
 #include <errno.h>
 #include <sys/types.h>
+#include <sys/param.h>
 #include <signal.h>
 #include <stdio.h>
 #include <stdlib.h>
 #include <unistd.h>
+#include <qfile.h>
 
 #undef Status // stupid X headers
 
@@ -154,12 +156,34 @@
   bool first_instance = false;
   if ( oldPid == -1 )
       first_instance = true;
-  // check if the lock file is stale by trying to see if
-  // the other pid is currently running.
-  // Not 100% correct but better safe than sorry
   else if (hostName == oldHostName && oldPid != getpid()) {
-      if ( kill(oldPid, 0) == -1 )
-          first_instance = ( errno == ESRCH );
+      // check if the lock file is stale
+#ifdef Q_OS_LINUX
+      if ( ::access("/proc", X_OK ) == 0 ) {
+          // On linux with /proc we can even check that it's really kmail and not something else
+          char path_buffer[MAXPATHLEN + 1];
+          path_buffer[MAXPATHLEN] = 0;
+          const QString procPath = QString("/proc/%1/exe").arg(oldPid);
+          const int length = readlink (procPath.latin1(), path_buffer, MAXPATHLEN);
+          if ( length == -1 ) // not such pid
+              first_instance = true;
+          else {
+              path_buffer[length] = '\0';
+              const QString path = QFile::decodeName(path_buffer);
+              kdDebug() << k_funcinfo << path << endl;
+              const int pos = path.findRev('/');
+              const QString fileName = path.mid(pos+1);
+              kdDebug() << "Found process " << oldPid << " running. It's: " << fileName << endl;
+              first_instance = fileName != "kmail" && fileName != "kontact";
+          }
+      } else
+#endif
+      {
+          // Otherwise we just check if the other pid is currently running.
+          // Not 100% correct but better safe than sorry.
+          if ( kill(oldPid, 0) == -1 )
+              first_instance = ( errno == ESRCH );
+      }
   }
 
   if ( !first_instance ) {
Index: kmail/messagecomposer.cpp
===================================================================
--- kmail/messagecomposer.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kmail/messagecomposer.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -287,13 +287,14 @@
 
 MessageComposer::MessageComposer( KMComposeWin* win, const char* name )
   : QObject( win, name ), mComposeWin( win ), mCurrentJob( 0 ),
-    mKeyResolver( 0 ), mIdentityUid( 0 )
+    mKeyResolver( 0 ), mIdentityUid( 0 ), mPerformingSignOperation( false )
 {
 }
 
 MessageComposer::~MessageComposer()
 {
   delete mKeyResolver; mKeyResolver = 0;
+  delete mNewBodyPart; mNewBodyPart = 0;
 }
 
 void MessageComposer::applyChanges( bool disableCrypto )
@@ -338,7 +339,7 @@
 
   if( mJobs.isEmpty() ) {
     // No more jobs. Signal that we're done
-    emit done( mRc );
+    emitDone( mRc );
     return;
   }
 
@@ -348,7 +349,7 @@
       delete mJobs.front();
       mJobs.pop_front();
     }
-    emit done( false );
+    emitDone( false );
     return;
   }
 
@@ -356,6 +357,15 @@
   QTimer::singleShot( 0, this, SLOT( slotDoNextJob() ) );
 }
 
+void MessageComposer::emitDone( bool b )
+{
+  // Save memory - before sending the mail
+  mEncodedBody = QByteArray();
+  delete mNewBodyPart; mNewBodyPart = 0;
+  mOldBodyPart.clear();
+  emit done( b );
+}
+
 void MessageComposer::slotDoNextJob()
 {
   assert( !mCurrentJob );
@@ -495,6 +505,7 @@
   mIsRichText = mComposeWin->mEditor->textFormat() == Qt::RichText;
   mIdentityUid = mComposeWin->identityUid();
   mText = breakLinesAndApplyCodec();
+  assert( mText.isEmpty() || mText[mText.size()-1] == '\n' );
   // Hopefully we can get rid of this eventually, it's needed to be able
   // to break the plain/text version of a multipart/alternative (html) mail
   // according to the line breaks of the richtext version.
@@ -1055,7 +1066,7 @@
 static inline const char * nestedContentType( Kleo::CryptoMessageFormat f, bool signing ) {
   switch ( f ) {
   case Kleo::OpenPGPMIMEFormat:
-    return signing ? "application/pgp-signature" : "application/octet-stream" ;
+    return signing ? "application/pgp-signature; name=signature.asc \nContent-Description: This is a digitally signed message part." : "application/octet-stream" ;
   case Kleo::SMIMEFormat:
     if ( signing )
       return "application/pkcs7-signature; name=\"smime.p7s\"";
@@ -1115,18 +1126,18 @@
 class EncryptMessageJob : public MessageComposerJob {
 public:
   EncryptMessageJob( KMMessage* msg, const Kleo::KeyResolver::SplitInfo & si,
-                     bool doSign, bool doEncrypt, const QCString& encodedBody,
-                     int boundaryLevel, const KMMessagePart& oldBodyPart,
+                     bool doSign, bool doEncrypt, const QByteArray& encodedBody,
+                     int boundaryLevel, /*const KMMessagePart& oldBodyPart,*/
                      KMMessagePart* newBodyPart, Kleo::CryptoMessageFormat format,
 		     MessageComposer* composer )
     : MessageComposerJob( composer ), mMsg( msg ), mSplitInfo( si ),
       mDoSign( doSign ), mDoEncrypt( doEncrypt ), mEncodedBody( encodedBody ),
-      mBoundaryLevel( boundaryLevel ), mOldBodyPart( oldBodyPart ),
+      mBoundaryLevel( boundaryLevel ), /*mOldBodyPart( oldBodyPart ),*/
       mNewBodyPart( newBodyPart ), mFormat( format ) {}
 
   void execute() {
     KMMessagePart tmpNewBodyPart;
-    tmpNewBodyPart.duplicate( *mNewBodyPart );
+    tmpNewBodyPart.duplicate( *mNewBodyPart ); // slow - we duplicate everything again
 
     // TODO: Async call
 
@@ -1143,9 +1154,9 @@
   KMMessage* mMsg;
   Kleo::KeyResolver::SplitInfo mSplitInfo;
   bool mDoSign, mDoEncrypt;
-  QCString mEncodedBody;
+  QByteArray mEncodedBody;
   int mBoundaryLevel;
-  KMMessagePart mOldBodyPart;
+  //KMMessagePart mOldBodyPart;
   KMMessagePart* mNewBodyPart;
   Kleo::CryptoMessageFormat mFormat;
 };
@@ -1162,38 +1173,12 @@
   }
 };
 
-QCString MessageComposer::bodyText()
-{
-  QCString body = mText;
-
-  if (body.isNull()) return body;
-
-  if (body.isEmpty()) body = "\n"; // don't crash
-
-  // From RFC 3156:
-  //  Note: The accepted OpenPGP convention is for signed data to end
-  //  with a <CR><LF> sequence.  Note that the <CR><LF> sequence
-  //  immediately preceding a MIME boundary delimiter line is considered
-  //  to be part of the delimiter in [3], 5.1.  Thus, it is not part of
-  //  the signed data preceding the delimiter line.  An implementation
-  //  which elects to adhere to the OpenPGP convention has to make sure
-  //  it inserts a <CR><LF> pair on the last line of the data to be
-  //  signed and transmitted (signed message and transmitted message
-  //  MUST be identical).
-  // So make sure that the body ends with a <LF>.
-  if( body[body.length()-1] != '\n' ) {
-    kdDebug(5006) << "Added an <LF> on the last line" << endl;
-    body += "\n";
-  }
-  return body;
-}
-
 void MessageComposer::composeInlineOpenPGPMessage( KMMessage& theMessage,
                                                    bool doSign, bool doEncrypt )
 {
   // preprocess the body text
-  QCString body = bodyText();
-  if (body.isNull()) {
+  const QByteArray bodyData = mText;
+  if (bodyData.isNull()) {
     mRc = false;
     return;
   }
@@ -1222,10 +1207,10 @@
       QByteArray encryptedBody;
       if ( doSign ) {  // Sign and encrypt
         const std::vector<GpgME::Key> signingKeys = mKeyResolver->signingKeys( Kleo::InlineOpenPGPFormat );
-        result = pgpSignedAndEncryptedMsg( encryptedBody, body, signingKeys,
+        result = pgpSignedAndEncryptedMsg( encryptedBody, bodyData, signingKeys,
                                            splitInfo.keys, Kleo::InlineOpenPGPFormat );
       } else { // Encrypt but don't sign
-        result = pgpEncryptedMsg( encryptedBody, body,
+        result = pgpEncryptedMsg( encryptedBody, bodyData,
                                   splitInfo.keys, Kleo::InlineOpenPGPFormat );
       }
       if ( result != Kpgp::Ok ) {
@@ -1236,15 +1221,15 @@
       mOldBodyPart.setBodyEncodedBinary( encryptedBody );
     } else {
       if ( doSign ) { // Sign but don't encrypt
-        pgpSignedMsg( body, Kleo::InlineOpenPGPFormat );
+        pgpSignedMsg( bodyData, Kleo::InlineOpenPGPFormat );
         if ( mSignature.isNull() ) {
           mRc = false;
           return;
         }
         mOldBodyPart.setBodyEncodedBinary( mSignature );
       } else { // don't sign nor encrypt -> nothing to do
-        assert( !body.isNull() );
-        mOldBodyPart.setBodyEncoded( body );
+        assert( !bodyData.isNull() );
+        mOldBodyPart.setBodyEncodedBinary( bodyData );
       }
     }
     mOldBodyPart.setContentDisposition( "inline" );
@@ -1254,7 +1239,7 @@
     mMessageList.push_back( msg );
     if ( it == splitInfos.begin() ) {
       if ( doEncrypt && !saveMessagesEncrypted() ) {
-        mOldBodyPart.setBodyEncoded( body );
+        mOldBodyPart.setBodyEncodedBinary( bodyData );
         KMMessage* msgUnenc = new KMMessage( theMessage );
         addBodyAndAttachments( msgUnenc, splitInfo, false, false, mOldBodyPart, Kleo::InlineOpenPGPFormat );
         msg->setUnencryptedMsg( msgUnenc );
@@ -1274,8 +1259,8 @@
   assert( chiasmus ); // kmcomposewin code should have made sure
 
   // preprocess the body text
-  QCString body = bodyText();
-  if (body.isNull()) {
+  const QByteArray bodyData = mText;
+  if (bodyData.isNull()) {
     mRc = false;
     return;
   }
@@ -1290,9 +1275,6 @@
   theMessage.removeHeaderField("Content-Type");
   theMessage.removeHeaderField("Content-Transfer-Encoding");
 
-  QByteArray plainText;
-  plainText.duplicate( body.data(), body.length() ); // hrmpf...
-
   // This reads strange, but we know that AdjustCryptFlagsJob created a single splitinfo,
   // under the given "format" (usually openpgp/mime; doesn't matter)
   const std::vector<Kleo::KeyResolver::SplitInfo> splitInfos
@@ -1304,7 +1286,7 @@
     KMMessage* msg = new KMMessage( theMessage );
     QByteArray encryptedBody;
 
-    if ( !encryptWithChiasmus( chiasmus, plainText, encryptedBody ) ) {
+    if ( !encryptWithChiasmus( chiasmus, bodyData, encryptedBody ) ) {
       mRc = false;
       return;
     }
@@ -1330,7 +1312,7 @@
     mMessageList.push_back( msg );
 
     if ( it == splitInfos.begin() && !saveMessagesEncrypted() ) {
-      mOldBodyPart.setBodyEncoded( body );
+      mOldBodyPart.setBodyEncodedBinary( bodyData );
       KMMessage* msgUnenc = new KMMessage( theMessage );
       addBodyAndAttachments( msgUnenc, splitInfo, false, false, mOldBodyPart, Kleo::InlineOpenPGPFormat );
       msg->setUnencryptedMsg( msgUnenc );
@@ -1361,8 +1343,8 @@
   theMessage.setBody( "This message is in MIME format." );
 
   // preprocess the body text
-  QCString body = bodyText();
-  if (body.isNull()) {
+  QByteArray bodyData = mText;
+  if (bodyData.isNull()) {
     mRc = false;
     return;
   }
@@ -1430,14 +1412,14 @@
     QCString newbody;
     DwMediaType tmpCT;
     tmpCT.CreateBoundary( ++mPreviousBoundaryLevel );
-    boundaryCStr = tmpCT.Boundary().c_str();
+    boundaryCStr = KMail::Util::CString( tmpCT.Boundary() );
     QValueList<int> allowedCTEs;
 
     KMMessagePart textBodyPart;
     textBodyPart.setTypeStr("text");
     textBodyPart.setSubtypeStr("plain");
 
-    QCString textbody = plainTextFromMarkup( mText );
+    QCString textbody = plainTextFromMarkup( mText /* converted to QString */ );
 
     // the signed body must not be 8bit encoded
     textBodyPart.setBodyAndGuessCte( textbody, allowedCTEs,
@@ -1457,13 +1439,13 @@
     KMMessagePart htmlBodyPart;
     htmlBodyPart.setTypeStr("text");
     htmlBodyPart.setSubtypeStr("html");
-    QCString htmlbody = mText;
+    QByteArray htmlbody = mText;
     // the signed body must not be 8bit encoded
     htmlBodyPart.setBodyAndGuessCte( htmlbody, allowedCTEs,
                                      !kmkernel->msgSender()->sendQuotedPrintable() && !doSign,
 				     doSign );
     htmlBodyPart.setCharset( mCharset );
-    htmlBodyPart.setBodyEncoded( htmlbody );
+    htmlBodyPart.setBodyEncodedBinary( htmlbody );
     DwBodyPart* htmlDwPart = theMessage.createDWBodyPart( &htmlBodyPart );
     htmlDwPart->Assemble();
     newbody += "\n--";
@@ -1476,8 +1458,8 @@
     newbody += "--";
     newbody +=     boundaryCStr;
     newbody +=                 "--\n";
-    body = newbody;
-    mOldBodyPart.setBodyEncoded( newbody );
+    bodyData = KMail::Util::byteArrayFromQCStringNoDetach( newbody );
+    mOldBodyPart.setBodyEncodedBinary( bodyData );
 
     mSaveBoundary = tmpCT.Boundary();
   }
@@ -1493,7 +1475,7 @@
     // eventually get rid of this:
     if( it->sign || it->encrypt ) {
       QCString cte = it->part->cteStr().lower();
-      if( ( "8bit" == cte )
+      if( ( "8bit" == cte && it->part->type() != DwMime::kTypeMessage )
           || ( ( it->part->type() == DwMime::kTypeText )
                && ( "7bit" == cte ) ) ) {
         const QByteArray body = it->part->bodyDecodedBinary();
@@ -1518,28 +1500,30 @@
     innerBodyPart.setContentDisposition( "inline" );
     QValueList<int> allowedCTEs;
     // the signed body must not be 8bit encoded
-    innerBodyPart.setBodyAndGuessCte( body, allowedCTEs,
+    innerBodyPart.setBodyAndGuessCte( bodyData, allowedCTEs,
                                       !kmkernel->msgSender()->sendQuotedPrintable() && !doSign,
                                       doSign );
     if ( !mIsRichText )
       innerBodyPart.setCharset( mCharset );
-    innerBodyPart.setBodyEncoded( body ); // do we need this, since setBodyAndGuessCte does this already?
+    innerBodyPart.setBodyEncodedBinary( bodyData ); // do we need this, since setBodyAndGuessCte does this already?
     DwBodyPart* innerDwPart = theMessage.createDWBodyPart( &innerBodyPart );
     innerDwPart->Assemble();
+    QByteArray tmpbody = KMail::Util::ByteArray( innerDwPart->AsString() );
     if ( mIsRichText ) { // and add our mp/a boundary
-        QCString tmpbody = innerDwPart->AsString().c_str();
         int boundPos = tmpbody.find( '\n' );
         if( -1 < boundPos ) {
           QCString bStr( ";\n  boundary=\"" );
           bStr += mSaveBoundary.c_str();
           bStr += "\"";
-          body = innerDwPart->AsString().c_str();
-          body.insert( boundPos, bStr );
-          body = "--" + mMultipartMixedBoundary + "\n" + body;
+          bodyData = tmpbody;
+          KMail::Util::insert( bodyData, boundPos, bStr );
+          KMail::Util::insert( bodyData, 0, "--" + mMultipartMixedBoundary + "\n" ); // prepend
         }
     }
-    else
-      body = "--" + mMultipartMixedBoundary + "\n" + innerDwPart->AsString().c_str();
+    else {
+      bodyData = tmpbody;
+      KMail::Util::insert( bodyData, 0, "--" + mMultipartMixedBoundary + "\n" ); // prepend
+    }
     delete innerDwPart;
     innerDwPart = 0;
     // add all matching Attachments
@@ -1548,22 +1532,23 @@
       if ( it->encrypt == doEncryptBody && it->sign == doSignBody ) {
         innerDwPart = theMessage.createDWBodyPart( it->part );
         innerDwPart->Assemble();
-        body += "\n--" + mMultipartMixedBoundary + "\n" + innerDwPart->AsString().c_str();
+        KMail::Util::append( bodyData, QCString( "\n--" + mMultipartMixedBoundary + "\n" ) );
+        KMail::Util::append( bodyData, innerDwPart->AsString().c_str() );
         delete innerDwPart;
         innerDwPart = 0;
       }
     }
-    body += "\n--" + mMultipartMixedBoundary + "--\n";
+    KMail::Util::append( bodyData, QCString( "\n--" + mMultipartMixedBoundary + "--\n" ) );
   } else { // !earlyAddAttachments
     QValueList<int> allowedCTEs;
     // the signed body must not be 8bit encoded
-    mOldBodyPart.setBodyAndGuessCte(body, allowedCTEs, !kmkernel->msgSender()->sendQuotedPrintable() && !doSign,
+    mOldBodyPart.setBodyAndGuessCte(bodyData, allowedCTEs, !kmkernel->msgSender()->sendQuotedPrintable() && !doSign,
                                    doSign);
     if ( !mIsRichText )
       mOldBodyPart.setCharset(mCharset);
   }
   // create S/MIME body part for signing and/or encrypting
-  mOldBodyPart.setBodyEncoded( body );
+  mOldBodyPart.setBodyEncodedBinary( bodyData );
 
   if( doSignBody || doEncryptBody ) {
     // get string representation of body part (including the attachments)
@@ -1577,13 +1562,12 @@
       DwMediaType& ct = headers.ContentType();
       ct.SetBoundary(mSaveBoundary);
       dwPart->Assemble();
-      mEncodedBody = dwPart->AsString().c_str();
     }
     else {
       dwPart = theMessage.createDWBodyPart( &mOldBodyPart );
       dwPart->Assemble();
-      mEncodedBody = dwPart->AsString().c_str();
     }
+    mEncodedBody = KMail::Util::ByteArray( dwPart->AsString() );
     delete dwPart;
     dwPart = 0;
 
@@ -1595,7 +1579,7 @@
         QCString bStr( ";\n  boundary=\"" );
         bStr += mMultipartMixedBoundary;
         bStr += "\"";
-        mEncodedBody.insert( boundPos, bStr );
+        KMail::Util::insert( mEncodedBody, boundPos, bStr.data() );
       }
     }
 
@@ -1606,8 +1590,10 @@
   }
 
   if ( doSignBody ) {
+    mPerformingSignOperation = true;  // this lets the KMComposeWin know if it is safe to close the window.
     pgpSignedMsg( mEncodedBody, format );
-
+    mPerformingSignOperation = false;
+    
     if ( mSignature.isEmpty() ) {
       kdDebug() << "signature was empty" << endl;
       mRc = false;
@@ -1655,7 +1641,7 @@
 					     Kleo::KeyResolver::SplitInfo( splitInfos.front().recipients ), doSign,
 					     false, mEncodedBody,
 					     mPreviousBoundaryLevel,
-					     mOldBodyPart, mNewBodyPart,
+					     /*mOldBodyPart,*/ mNewBodyPart,
 					     format, this ) );
   }
 
@@ -1663,7 +1649,7 @@
     mJobs.push_front( new EncryptMessageJob( new KMMessage( theMessage ), *it, doSign,
 					     doEncrypt, mEncodedBody,
 					     mPreviousBoundaryLevel,
-					     mOldBodyPart, mNewBodyPart,
+					     /*mOldBodyPart,*/ mNewBodyPart,
 					     format, this ) );
 }
 
@@ -1684,16 +1670,17 @@
   const bool doSignBody = doSign && mSignBody;
 
   if ( doEncryptBody ) {
-    QCString innerContent;
+    QByteArray innerContent;
     if ( doSignBody ) {
       // extract signed body from newBodyPart
       DwBodyPart* dwPart = msg->createDWBodyPart( &newBodyPart );
       dwPart->Assemble();
-      innerContent = dwPart->AsString().c_str();
+      innerContent = KMail::Util::ByteArray( dwPart->AsString() );
       delete dwPart;
       dwPart = 0;
-    } else
+    } else {
       innerContent = mEncodedBody;
+    }
 
     // now do the encrypting:
     // replace simple LFs by CRLFs for all MIME supporting CryptPlugs
@@ -1784,7 +1771,7 @@
 
       DwBodyPart* innerDwPart = msg->createDWBodyPart( it->part );
       innerDwPart->Assemble();
-      QCString encodedAttachment = innerDwPart->AsString().c_str();
+      QByteArray encodedAttachment = KMail::Util::ByteArray( innerDwPart->AsString() );
       delete innerDwPart;
       innerDwPart = 0;
 
@@ -1795,10 +1782,8 @@
 
       // sign this attachment
       if( signThisNow ) {
-
         pgpSignedMsg( encodedAttachment, format );
-        QByteArray signature = mSignature;
-        mRc = !signature.isEmpty();
+        mRc = !mSignature.isEmpty();
         if( mRc ) {
           mRc = processStructuringInfo( "http://www.gnupg.org/aegypten/",
                                         it->part->contentDescription(),
@@ -1808,14 +1793,14 @@
                                         it->part->contentTransferEncodingStr(),
                                         encodedAttachment,
                                         "signature",
-                                        signature,
+                                        mSignature,
                                         newAttachPart, true, format );
           if( mRc ) {
             if( encryptThisNow ) {
               rEncryptMessagePart = newAttachPart;
               DwBodyPart* dwPart = msg->createDWBodyPart( &newAttachPart );
               dwPart->Assemble();
-              encodedAttachment = dwPart->AsString().c_str();
+              encodedAttachment = KMail::Util::ByteArray( dwPart->AsString() );
               delete dwPart;
               dwPart = 0;
             }
@@ -1880,7 +1865,7 @@
       kdDebug(5006) << "MessageComposer::addBodyAndAttachments() : top level headers and body adjusted" << endl;
 
     // set body content
-    msg->setBody(ourFineBodyPart.body() );
+    msg->setBody( ourFineBodyPart.dwBody() );
 
   }
 
@@ -1902,12 +1887,13 @@
                                               const QCString contentSubtypeClear,
                                               const QCString contentDispClear,
                                               const QCString contentTEncClear,
-                                              const QCString& clearCStr,
+                                              const QByteArray& clearCStr,
                                               const QString /*contentDescCiph*/,
                                               const QByteArray& ciphertext,
                                               KMMessagePart& resultingPart,
 					      bool signing, Kleo::CryptoMessageFormat format )
 {
+  assert( clearCStr.isEmpty() || clearCStr[clearCStr.size()-1] != '\0' ); // I was called with a QCString !?
   bool bOk = true;
 
   if ( makeMimeObject( format, signing ) ) {
@@ -1955,12 +1941,13 @@
     KMMessage::bodyPart( &mainDwPa, &resultingPart );
     if( !makeMultiMime( format, signing ) ) {
       if ( signing && includeCleartextWhenSigning( format ) ) {
-        QCString bodyText( clearCStr );
-        bodyText += '\n';
-        bodyText += QCString( ciphertext.data(), ciphertext.size() + 1 );
-        resultingPart.setBodyEncoded( bodyText );
-      } else
+        QByteArray bodyText( clearCStr );
+        KMail::Util::append( bodyText, "\n" );
+        KMail::Util::append( bodyText, ciphertext );
+        resultingPart.setBodyEncodedBinary( bodyText );
+      } else {
         resultingPart.setBodyEncodedBinary( ciphertext );
+      }
     } else {
       // Build the encapsulated MIME parts.
       // Build a MIME part holding the version information
@@ -1993,18 +1980,24 @@
 	codeCStr += '\n' + QCString( ciphertext.data(), ciphertext.size() + 1 );
 
 
-      QCString mainStr = "--" + boundaryCStr;
+      QByteArray mainStr;
+      KMail::Util::append( mainStr, "--" );
+      KMail::Util::append( mainStr, boundaryCStr );
       if ( signing && includeCleartextWhenSigning( format ) &&
-	   !clearCStr.isEmpty() )
-        mainStr += "\n" + clearCStr + "\n--" + boundaryCStr;
+	   !clearCStr.isEmpty() ) {
+        KMail::Util::append( mainStr, "\n" );
+        // clearCStr is the one that can be very big for large attachments, don't merge with the other lines
+        KMail::Util::append( mainStr, clearCStr );
+        KMail::Util::append( mainStr, "\n--" + boundaryCStr );
+      }
       if ( !versCStr.isEmpty() )
-        mainStr += "\n" + versCStr + "\n--" + boundaryCStr;
+        KMail::Util::append( mainStr, "\n" + versCStr + "\n--" + boundaryCStr );
       if( !codeCStr.isEmpty() )
-        mainStr += "\n" + codeCStr + "\n--" + boundaryCStr;
-      mainStr += "--\n";
+        KMail::Util::append( mainStr, "\n" + codeCStr + "\n--" + boundaryCStr );
+      KMail::Util::append( mainStr, "--\n" );
 
       //kdDebug(5006) << "processStructuringInfo: mainStr=" << mainStr << endl;
-      resultingPart.setBodyEncoded( mainStr );
+      resultingPart.setBodyEncodedBinary( mainStr );
     }
 
   } else { //  not making a mime object, build a plain message body.
@@ -2014,14 +2007,14 @@
     resultingPart.setSubtypeStr( contentSubtypeClear );
     resultingPart.setContentDisposition( contentDispClear );
     resultingPart.setContentTransferEncodingStr( contentTEncClear );
-    QCString resultingBody;
+    QByteArray resultingBody;
 
     if ( signing && includeCleartextWhenSigning( format ) ) {
       if( !clearCStr.isEmpty() )
-        resultingBody += clearCStr;
+        KMail::Util::append( resultingBody, clearCStr );
     }
     if ( !ciphertext.isEmpty() )
-      resultingBody += QCString( ciphertext.data(), ciphertext.size() + 1 ); // null-terminate
+      KMail::Util::append( resultingBody, ciphertext );
     else {
       // Plugin error!
       KMessageBox::sorry( mComposeWin,
@@ -2031,7 +2024,7 @@
                           .arg( bugURL ) );
       bOk = false;
     }
-    resultingPart.setBodyEncoded( resultingBody );
+    resultingPart.setBodyEncodedBinary( resultingBody );
   }
 
   return bOk;
@@ -2065,7 +2058,7 @@
 }
 
 //-----------------------------------------------------------------------------
-QCString MessageComposer::breakLinesAndApplyCodec()
+QByteArray MessageComposer::breakLinesAndApplyCodec()
 {
   QString text;
   QCString cText;
@@ -2103,17 +2096,33 @@
                                                i18n("Lose Characters"), i18n("Change Encoding") ) == KMessageBox::Yes );
     if( !anyway ) {
       mComposeWin->mEditor->setText(oldText);
-      return QCString();
+      return QByteArray();
     }
   }
 
-  return cText;
+  // From RFC 3156:
+  //  Note: The accepted OpenPGP convention is for signed data to end
+  //  with a <CR><LF> sequence.  Note that the <CR><LF> sequence
+  //  immediately preceding a MIME boundary delimiter line is considered
+  //  to be part of the delimiter in [3], 5.1.  Thus, it is not part of
+  //  the signed data preceding the delimiter line.  An implementation
+  //  which elects to adhere to the OpenPGP convention has to make sure
+  //  it inserts a <CR><LF> pair on the last line of the data to be
+  //  signed and transmitted (signed message and transmitted message
+  //  MUST be identical).
+  // So make sure that the body ends with a <LF>.
+  if( cText.isEmpty() || cText[cText.length()-1] != '\n' ) {
+    kdDebug(5006) << "Added an <LF> on the last line" << endl;
+    cText += "\n";
+  }
+  return KMail::Util::byteArrayFromQCStringNoDetach( cText );
 }
 
 
 //-----------------------------------------------------------------------------
-void MessageComposer::pgpSignedMsg( const QCString & cText, Kleo::CryptoMessageFormat format ) {
+void MessageComposer::pgpSignedMsg( const QByteArray& cText, Kleo::CryptoMessageFormat format ) {
 
+  assert( cText.isEmpty() || cText[cText.size()-1] != '\0' ); // I was called with a QCString !?
   mSignature = QByteArray();
 
   const std::vector<GpgME::Key> signingKeys = mKeyResolver->signingKeys( format );
@@ -2139,11 +2148,9 @@
     return;
   }
 
-  QByteArray plainText;
-  plainText.duplicate( cText.data(), cText.length() ); // hrmpf...
   QByteArray signature;
   const GpgME::SigningResult res =
-    job->exec( signingKeys, plainText, signingMode( format ), signature );
+    job->exec( signingKeys, cText, signingMode( format ), signature );
   if ( res.error().isCanceled() ) {
     kdDebug() << "signing was canceled by user" << endl;
     return;
@@ -2165,7 +2172,7 @@
 
 //-----------------------------------------------------------------------------
 Kpgp::Result MessageComposer::pgpEncryptedMsg( QByteArray & encryptedBody,
-                                               const QCString & cText,
+                                               const QByteArray& cText,
                                                const std::vector<GpgME::Key> & encryptionKeys,
 					       Kleo::CryptoMessageFormat format )
 {
@@ -2187,11 +2194,8 @@
     return Kpgp::Failure;
   }
 
-  QByteArray plainText;
-  plainText.duplicate( cText.data(), cText.length() ); // hrmpf...
-
   const GpgME::EncryptionResult res =
-    job->exec( encryptionKeys, plainText, false, encryptedBody );
+    job->exec( encryptionKeys, cText, false, encryptedBody );
   if ( res.error().isCanceled() ) {
     kdDebug() << "encryption was canceled by user" << endl;
     return Kpgp::Canceled;
@@ -2205,7 +2209,7 @@
 }
 
 Kpgp::Result MessageComposer::pgpSignedAndEncryptedMsg( QByteArray & encryptedBody,
-							const QCString & cText,
+							const QByteArray& cText,
 							const std::vector<GpgME::Key> & signingKeys,
 							const std::vector<GpgME::Key> & encryptionKeys,
 							Kleo::CryptoMessageFormat format )
@@ -2228,11 +2232,8 @@
     return Kpgp::Failure;
   }
 
-  QByteArray plainText;
-  plainText.duplicate( cText.data(), cText.length() ); // hrmpf...
-
   const std::pair<GpgME::SigningResult,GpgME::EncryptionResult> res =
-    job->exec( signingKeys, encryptionKeys, plainText, false, encryptedBody );
+    job->exec( signingKeys, encryptionKeys, cText, false, encryptedBody );
   if ( res.first.error().isCanceled() || res.second.error().isCanceled() ) {
     kdDebug() << "encrypt/sign was canceled by user" << endl;
     return Kpgp::Canceled;
Index: kmail/kmfoldercachedimap.cpp
===================================================================
--- kmail/kmfoldercachedimap.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kmail/kmfoldercachedimap.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -35,6 +35,9 @@
 
 #include <errno.h>
 
+#include <qvaluevector.h>
+
+#include "kmkernel.h"
 #include "kmfoldercachedimap.h"
 #include "undostack.h"
 #include "kmfoldermgr.h"
@@ -71,6 +74,7 @@
 #include <qlayout.h>
 #include <qvaluelist.h>
 #include "annotationjobs.h"
+#include "quotajobs.h"
 using namespace KMail;
 #include <globalsettings.h>
 
@@ -149,10 +153,12 @@
     uidWriteTimer( -1 ), mLastUid( 0 ), mTentativeHighestUid( 0 ),
     mFoundAnIMAPDigest( false ),
     mUserRights( 0 ), mSilentUpload( false ),
+    /*mHoldSyncs( false ),*/
     mFolderRemoved( false ),
-    /*mHoldSyncs( false ),*/ mRecurse( true ),
+    mRecurse( true ),
     mStatusChangedLocally( false ), mAnnotationFolderTypeChanged( false ),
-    mIncidencesForChanged( false ), mPersonalNamespacesCheckDone( true )
+    mIncidencesForChanged( false ), mPersonalNamespacesCheckDone( true ),
+    mQuotaInfo()
 {
   setUidValidity("");
   // if we fail to read a uid file but there is one, nuke it
@@ -216,6 +222,21 @@
 //  kdDebug(5006) << ( mImapPath.isEmpty() ? label() : mImapPath )
 //                << " readConfig: mIncidencesFor=" << mIncidencesFor << endl;
 
+  mUserRights = config->readNumEntry( "UserRights", 0 ); // default is we don't know
+
+  int storageQuotaUsage = config->readNumEntry( "StorageQuotaUsage", -1 );
+  int storageQuotaLimit = config->readNumEntry( "StorageQuotaLimit", -1 );
+  QString storageQuotaRoot = config->readEntry( "StorageQuotaRoot", QString::null );
+  if ( !storageQuotaRoot.isNull() ) { // isEmpty() means we know there is no quota set
+      mQuotaInfo.setName( "STORAGE" );
+      mQuotaInfo.setRoot( storageQuotaRoot );
+
+      if ( storageQuotaUsage > -1 )
+        mQuotaInfo.setCurrent( storageQuotaUsage );
+      if ( storageQuotaLimit > -1 )
+        mQuotaInfo.setMax( storageQuotaLimit );
+  }
+
   KMFolderMaildir::readConfig();
 
   mStatusChangedLocally =
@@ -242,11 +263,11 @@
       configGroup.deleteEntry( "ImapPathCreation" );
     }
   }
-  writeAnnotationConfig();
+  writeConfigKeysWhichShouldNotGetOverwrittenByReadConfig();
   KMFolderMaildir::writeConfig();
 }
 
-void KMFolderCachedImap::writeAnnotationConfig()
+void KMFolderCachedImap::writeConfigKeysWhichShouldNotGetOverwrittenByReadConfig()
 {
   KConfigGroup configGroup( KMKernel::config(), "Folder-" + folder()->idString() );
   if ( !folder()->noContent() )
@@ -255,6 +276,21 @@
     configGroup.writeEntry( "Annotation-FolderType", mAnnotationFolderType );
     configGroup.writeEntry( "IncidencesForChanged", mIncidencesForChanged );
     configGroup.writeEntry( "IncidencesFor", incidencesForToString( mIncidencesFor ) );
+    configGroup.writeEntry( "UserRights", mUserRights );
+
+    if ( mQuotaInfo.isValid() ) {
+      if ( mQuotaInfo.current().isValid() ) {
+        configGroup.writeEntry( "StorageQuotaUsage", mQuotaInfo.current().toInt() );
+      }
+      if ( mQuotaInfo.max().isValid() ) {
+        configGroup.writeEntry( "StorageQuotaLimit", mQuotaInfo.max().toInt() );
+      }
+      configGroup.writeEntry( "StorageQuotaRoot", mQuotaInfo.root() );
+    } else {
+      configGroup.deleteEntry( "StorageQuotaUsage");
+      configGroup.deleteEntry( "StorageQuotaRoot");
+      configGroup.deleteEntry( "StorageQuotaLimit");
+    }
   }
 }
 
@@ -348,7 +384,7 @@
 {
   //kdDebug(5006) << "Reloading Uid Map " << endl;
   uidMap.clear();
-  open();
+  open("reloadUdi");
   for( int i = 0; i < count(); ++i ) {
     KMMsgBase *msg = getMsgBase( i );
     if( !msg ) continue;
@@ -356,7 +392,7 @@
     //kdDebug(5006) << "Inserting: " << i << " with uid: " << uid << endl;
     uidMap.insert( uid, i );
   }
-  close();
+  close("reloadUdi");
   uidMapDirty = false;
 }
 
@@ -618,6 +654,7 @@
   case SYNC_STATE_SET_ANNOTATIONS:   return "SYNC_STATE_SET_ANNOTATIONS";
   case SYNC_STATE_GET_ACLS:          return "SYNC_STATE_GET_ACLS";
   case SYNC_STATE_SET_ACLS:          return "SYNC_STATE_SET_ACLS";
+  case SYNC_STATE_GET_QUOTA:         return "SYNC_STATE_GET_QUOTA";
   case SYNC_STATE_FIND_SUBFOLDERS:   return "SYNC_STATE_FIND_SUBFOLDERS";
   case SYNC_STATE_SYNC_SUBFOLDERS:   return "SYNC_STATE_SYNC_SUBFOLDERS";
   case SYNC_STATE_RENAME_FOLDER:     return "SYNC_STATE_RENAME_FOLDER";
@@ -676,7 +713,7 @@
     foldersForDeletionOnServer.clear();
     newState( mProgress, i18n("Synchronizing"));
 
-    open();
+    open("cachedimap");
     if ( !noContent() )
         mAccount->addLastUnreadMsgCount( this, countUnread() );
 
@@ -687,7 +724,7 @@
       // kdDebug(5006) << "makeConnection said Error, aborting." << endl;
       // We stop here. We're already in SYNC_STATE_INITIAL for the next time.
       newState( mProgress, i18n( "Error connecting to server %1" ).arg( mAccount->host() ) );
-      close();
+      close("cachedimap");
       emit folderComplete(this, false);
       break;
     } else if ( cs == ImapAccountBase::Connecting ) {
@@ -1027,8 +1064,7 @@
     }
 
   case SYNC_STATE_GET_ACLS:
-    // Continue with the subfolders
-    mSyncState = SYNC_STATE_FIND_SUBFOLDERS;
+    mSyncState = SYNC_STATE_GET_QUOTA;
 
     if( !noContent() && mAccount->hasACLSupport() ) {
       newState( mProgress, i18n( "Retrieving permissions" ) );
@@ -1037,7 +1073,22 @@
                this, SLOT(slotReceivedACL( KMFolder*, KIO::Job*, const KMail::ACLList& )) );
       break;
     }
-
+  case SYNC_STATE_GET_QUOTA:
+    // Continue with the subfolders
+    mSyncState = SYNC_STATE_FIND_SUBFOLDERS;
+    if( !noContent() && mAccount->hasQuotaSupport() ) {
+      newState( mProgress, i18n("Getting quota information"));
+      KURL url = mAccount->getUrl();
+      url.setPath( imapPath() );
+      KIO::Job* job = KMail::QuotaJobs::getStorageQuota( mAccount->slave(), url );
+      ImapAccountBase::jobData jd( url.url(), folder() );
+      mAccount->insertJob(job, jd);
+      connect( job, SIGNAL( storageQuotaResult( const QuotaInfo& ) ),
+          SLOT( slotStorageQuotaResult( const QuotaInfo& ) ) );
+      connect( job, SIGNAL(result(KIO::Job *)),
+          SLOT(slotQuotaResult(KIO::Job *)) );
+      break;
+    }
   case SYNC_STATE_FIND_SUBFOLDERS:
     {
       mProgress = 98;
@@ -1088,7 +1139,7 @@
       if( mSubfoldersForSync.isEmpty() ) {
         mSyncState = SYNC_STATE_INITIAL;
         mAccount->addUnreadMsgCount( this, countUnread() ); // before closing
-        close();
+        close("cachedimap");
         emit folderComplete( this, true );
       } else {
         mCurrentSubfolder = mSubfoldersForSync.front();
@@ -1404,8 +1455,13 @@
 /* This will only list the messages in a folder.
    No directory listing done*/
 void KMFolderCachedImap::listMessages() {
-  if( imapPath() == "/" ) {
-    // Don't list messages on the root folder
+  bool groupwareOnly = GlobalSettings::self()->showOnlyGroupwareFoldersForGroupwareAccount()
+               && GlobalSettings::self()->theIMAPResourceAccount() == (int)mAccount->id()
+               && folder()->isSystemFolder() 
+               && mImapPath == "/INBOX/";
+  // Don't list messages on the root folder, and skip the inbox, if this is
+  // the inbox of a groupware-only dimap account
+  if( imapPath() == "/" || groupwareOnly ) {
     serverSyncInternal();
     return;
   }
@@ -1688,7 +1744,7 @@
         f->setImapPath( mAccount->addPathToNamespace( name ) );
         f->setNoContent( true );
         f->setAccount( mAccount );
-        f->close();
+        f->close("cachedimap");
         kmkernel->dimapFolderMgr()->contentsChanged();
       }
     }
@@ -1722,6 +1778,7 @@
   if ( mAccount->onlySubscribedFolders() )
     type = ImapAccountBase::ListSubscribed;
   KMail::ListJob* job = new KMail::ListJob( mAccount, type, this );
+  job->setHonorLocalSubscription( true );
   connect( job, SIGNAL(receivedFolders(const QStringList&, const QStringList&,
           const QStringList&, const QStringList&, const ImapAccountBase::jobData&)),
       this, SLOT(slotListResult(const QStringList&, const QStringList&,
@@ -1797,13 +1854,13 @@
 void KMFolderCachedImap::listDirectory2()
 {
   QString path = folder()->path();
-  KMFolderCachedImap *f = 0;
   kmkernel->dimapFolderMgr()->quiet(true);
 
-  KMFolderNode *node;
   bool root = ( this == mAccount->rootFolder() );
-  if ( root && !mAccount->hasInbox() ) {
-    //kdDebug(5006) << "check INBOX" << endl;
+  if ( root && !mAccount->hasInbox() )
+  {
+    KMFolderCachedImap *f = 0;
+    KMFolderNode *node;
     // create the INBOX
     for (node = folder()->child()->first(); node; node = folder()->child()->next())
       if (!node->isDir() && node->name() == "INBOX") break;
@@ -1822,7 +1879,7 @@
     }
     if (!node) {
       if ( f )
-        f->close();
+        f->close("cachedimap");
       kmkernel->dimapFolderMgr()->contentsChanged();
     }
     // so we have an INBOX
@@ -1840,9 +1897,12 @@
   }
 
   // Find all subfolders present on server but not on disk
+  QValueVector<int> foldersNewOnServer;
   for (uint i = 0; i < mSubfolderNames.count(); i++) {
 
     // Find the subdir, if already present
+    KMFolderCachedImap *f = 0;
+    KMFolderNode *node = 0;
     for (node = folder()->child()->first(); node;
          node = folder()->child()->next())
       if (!node->isDir() && node->name() == mSubfolderNames[i]) break;
@@ -1868,35 +1928,77 @@
         foldersForDeletionOnServer += mAccount->deletedFolderPaths( subfolderPath ); // grab all subsubfolders too
       } else {
         kdDebug(5006) << subfolderPath << " is a new folder on the server => create local cache" << endl;
-        KMFolder* newFolder = folder()->child()->createFolder(mSubfolderNames[i], false, KMFolderTypeCachedImap);
-        if ( newFolder ) {
-          f = static_cast<KMFolderCachedImap*>(newFolder->storage());
-        }
-        if (f) {
-          f->close();
-          f->setAccount(mAccount);
-          kmkernel->dimapFolderMgr()->contentsChanged();
-          f->mAnnotationFolderType = "FROMSERVER";
-          //kdDebug(5006) << subfolderPath << ": mAnnotationFolderType set to FROMSERVER" << endl;
-        } else {
-          kdDebug(5006) << "can't create folder " << mSubfolderNames[i] <<endl;
-        }
+        foldersNewOnServer.append( i );
       }
     } else { // Folder found locally
       if( static_cast<KMFolder*>(node)->folderType() == KMFolderTypeCachedImap )
-        f = static_cast<KMFolderCachedImap*>(static_cast<KMFolder*>(node)->storage());
+        f = dynamic_cast<KMFolderCachedImap*>(static_cast<KMFolder*>(node)->storage());
+      if( f ) {
+        // kdDebug(5006) << "folder("<<f->name()<<")->imapPath()=" << f->imapPath()
+        //               << "\nSetting imapPath " << mSubfolderPaths[i] << endl;
+        // Write folder settings
+        f->setAccount(mAccount);
+        f->setNoContent(mSubfolderMimeTypes[i] == "inode/directory");
+        f->setNoChildren(mSubfolderMimeTypes[i] == "message/digest");
+        f->setImapPath(mSubfolderPaths[i]);
+      }
     }
+  }
 
-    if( f ) {
-      // kdDebug(5006) << "folder("<<f->name()<<")->imapPath()=" << f->imapPath()
-      //               << "\nSetting imapPath " << mSubfolderPaths[i] << endl;
-      // Write folder settings
+  /* In case we are ignoring non-groupware folders, and this is the groupware
+   * main account, find out the contents types of folders that have newly
+   * appeared on the server. Otherwise just create them and finish listing.
+   * If a folder is already known to be locally unsubscribed, it won't be
+   * listed at all, on this level, so these are only folders that we are
+   * seeing for the first time. */
+     
+  /*  Note: We ask the globalsettings, and not the current state of the
+   *  kmkernel->iCalIface().isEnabled(), since that is false during the 
+   *  very first sync, where we already want to filter. */
+  if ( GlobalSettings::self()->showOnlyGroupwareFoldersForGroupwareAccount() 
+     && GlobalSettings::self()->theIMAPResourceAccount() == (int)mAccount->id()
+     && mAccount->hasAnnotationSupport()
+     && GlobalSettings::self()->theIMAPResourceEnabled()
+     && !foldersNewOnServer.isEmpty() ) {
+
+    QStringList paths;
+    for ( uint i = 0; i < foldersNewOnServer.count(); ++i )
+      paths << mSubfolderPaths[ foldersNewOnServer[i] ];
+
+    AnnotationJobs::MultiUrlGetAnnotationJob* job =
+      AnnotationJobs::multiUrlGetAnnotation( mAccount->slave(), mAccount->getUrl(), paths, KOLAB_FOLDERTYPE );
+    ImapAccountBase::jobData jd( QString::null, folder() );
+    jd.cancellable = true;
+    mAccount->insertJob(job, jd);
+    connect( job, SIGNAL(result(KIO::Job *)),
+        SLOT(slotMultiUrlGetAnnotationResult(KIO::Job *)) );
+
+  } else {
+    createFoldersNewOnServerAndFinishListing( foldersNewOnServer );
+  }
+}
+
+void KMFolderCachedImap::createFoldersNewOnServerAndFinishListing( const QValueVector<int> foldersNewOnServer )
+{
+  for ( uint i = 0; i < foldersNewOnServer.count(); ++i ) {
+    int idx = foldersNewOnServer[i];
+    KMFolder* newFolder = folder()->child()->createFolder( mSubfolderNames[idx], false, KMFolderTypeCachedImap);
+    if (newFolder) {
+      KMFolderCachedImap *f = dynamic_cast<KMFolderCachedImap*>(newFolder->storage());
+      kdDebug(5006) << " ####### Locally creating folder " << mSubfolderNames[idx] <<endl;
+      f->close("cachedimap");
       f->setAccount(mAccount);
-      f->setNoContent(mSubfolderMimeTypes[i] == "inode/directory");
-      f->setNoChildren(mSubfolderMimeTypes[i] == "message/digest");
-      f->setImapPath(mSubfolderPaths[i]);
+      f->mAnnotationFolderType = "FROMSERVER";
+      f->setNoContent(mSubfolderMimeTypes[idx] == "inode/directory");
+      f->setNoChildren(mSubfolderMimeTypes[idx] == "message/digest");
+      f->setImapPath(mSubfolderPaths[idx]);
+      //kdDebug(5006) << subfolderPath << ": mAnnotationFolderType set to FROMSERVER" << endl;
+      kmkernel->dimapFolderMgr()->contentsChanged();
+    } else {
+      kdDebug(5006) << "can't create folder " << mSubfolderNames[idx] <<endl;
     }
   }
+
   kmkernel->dimapFolderMgr()->quiet(false);
   emit listComplete(this);
   if ( !mPersonalNamespacesCheckDone ) {
@@ -1954,7 +2056,7 @@
 
     mSubfoldersForSync.clear();
     mSyncState = SYNC_STATE_INITIAL;
-    close();
+    close("cachedimap");
     emit folderComplete( this, false );
   }
 }
@@ -1996,6 +2098,7 @@
 KMFolderCachedImap::setUserRights( unsigned int userRights )
 {
   mUserRights = userRights;
+  writeConfigKeysWhichShouldNotGetOverwrittenByReadConfig();
 }
 
 void
@@ -2034,6 +2137,13 @@
 }
 
 void
+KMFolderCachedImap::slotStorageQuotaResult( const QuotaInfo& info )
+{
+    mQuotaInfo = info;
+    writeConfigKeysWhichShouldNotGetOverwrittenByReadConfig();
+}
+
+void
 KMFolderCachedImap::setACLList( const ACLList& arr )
 {
   mACLList = arr;
@@ -2079,7 +2189,7 @@
   if ( mSyncState == SYNC_STATE_INITIAL ) return;
   mSubfoldersForSync.clear();
   mSyncState = SYNC_STATE_INITIAL;
-  close();
+  close("cachedimap");
   // Don't use newState here, it would revert to mProgress (which is < current value when listing messages)
   KPIM::ProgressItem *progressItem = mAccount->mailCheckProgressItem();
   QString str = i18n("Aborted");
@@ -2169,7 +2279,7 @@
     kdDebug(5006) << mImapPath << ": updateAnnotationFolderType: '" << mAnnotationFolderType << "', was (" << oldType << " " << oldSubType << ") => mAnnotationFolderTypeChanged set to TRUE" << endl;
   }
   // Ensure that further readConfig()s don't lose mAnnotationFolderType
-  writeAnnotationConfig();
+  writeConfigKeysWhichShouldNotGetOverwrittenByReadConfig();
 }
 
 void KMFolderCachedImap::setIncidencesFor( IncidencesFor incfor )
@@ -2225,7 +2335,7 @@
             markUnreadAsRead();
 
           // Ensure that further readConfig()s don't lose mAnnotationFolderType
-          writeAnnotationConfig();
+          writeConfigKeysWhichShouldNotGetOverwrittenByReadConfig();
           break;
         }
       }
@@ -2275,6 +2385,86 @@
   serverSyncInternal();
 }
 
+void KMFolderCachedImap::slotMultiUrlGetAnnotationResult( KIO::Job* job )
+{
+  KMAcctCachedImap::JobIterator it = mAccount->findJob(job);
+  Q_ASSERT( it != mAccount->jobsEnd() );
+  if ( it == mAccount->jobsEnd() ) return; // Shouldn't happen
+  Q_ASSERT( (*it).parent == folder() );
+  if ( (*it).parent != folder() ) return; // Shouldn't happen
+
+  QValueVector<int> folders;
+  AnnotationJobs::MultiUrlGetAnnotationJob* annjob
+    = static_cast<AnnotationJobs::MultiUrlGetAnnotationJob *>( job );
+  if ( annjob->error() ) {
+    if ( job->error() == KIO::ERR_UNSUPPORTED_ACTION ) {
+      // that's when the imap server doesn't support annotations
+      if ( GlobalSettings::self()->theIMAPResourceStorageFormat() == GlobalSettings::EnumTheIMAPResourceStorageFormat::XML
+           && (uint)GlobalSettings::self()->theIMAPResourceAccount() == mAccount->id() )
+        KMessageBox::error( 0, i18n( "The IMAP server %1 doesn't have support for imap annotations. The XML storage cannot be used on this server, please re-configure KMail differently" ).arg( mAccount->host() ) );
+      mAccount->setHasNoAnnotationSupport();
+    }
+    else
+      kdWarning(5006) << "slotGetMultiUrlAnnotationResult: " << job->errorString() << endl;
+  } else {
+    // we got the annotation allright, let's filter out the ones with the wrong type
+    QMap<QString, QString> annotations = annjob->annotations();
+    QMap<QString, QString>::Iterator it = annotations.begin();
+    for ( ; it != annotations.end(); ++it ) {
+      const QString folderPath = it.key();
+      const QString annotation = it.data();
+      kdDebug(5006) << k_funcinfo << "Folder: " << folderPath << " has type: " << annotation << endl;
+      // we're only interested in the main type
+      QString type(annotation);
+      int dot = annotation.find( '.' );
+      if ( dot != -1 ) type.truncate( dot );
+      type = type.simplifyWhiteSpace();
+
+      const int idx = mSubfolderPaths.findIndex( folderPath );
+      const bool isNoContent =  mSubfolderMimeTypes[idx] == "inode/directory";
+      if ( ( isNoContent && type.isEmpty() )
+        || ( !type.isEmpty() && type != KMailICalIfaceImpl::annotationForContentsType( ContentsTypeMail ) ) ) {
+        folders.append( idx );
+        kdDebug(5006) << k_funcinfo << " subscribing to: " << folderPath << endl;
+      } else {
+        kdDebug(5006) << k_funcinfo << " automatically unsubscribing from: " << folderPath << endl;
+        mAccount->changeLocalSubscription( folderPath, false );
+      }
+    }
+  }
+
+  if (mAccount->slave()) mAccount->removeJob(job);
+  createFoldersNewOnServerAndFinishListing( folders );
+}
+
+
+void KMFolderCachedImap::slotQuotaResult( KIO::Job* job )
+{
+  KMAcctCachedImap::JobIterator it = mAccount->findJob(job);
+  Q_ASSERT( it != mAccount->jobsEnd() );
+  if ( it == mAccount->jobsEnd() ) return; // Shouldn't happen
+  Q_ASSERT( (*it).parent == folder() );
+  if ( (*it).parent != folder() ) return; // Shouldn't happen
+
+  QuotaJobs::GetStorageQuotaJob* quotajob = static_cast<QuotaJobs::GetStorageQuotaJob *>( job );
+  QuotaInfo empty;
+  if ( quotajob->error() ) {
+    if ( job->error() == KIO::ERR_UNSUPPORTED_ACTION ) {
+      // that's when the imap server doesn't support quota
+      mAccount->setHasNoQuotaSupport();
+      mQuotaInfo = empty;
+    }
+    else
+      kdWarning(5006) << "slotGetQuotaResult: " << job->errorString() << endl;
+  }
+
+  if (mAccount->slave()) mAccount->removeJob(job);
+  mProgress += 2;
+  serverSyncInternal();
+}
+
+
+
 void
 KMFolderCachedImap::slotAnnotationChanged( const QString& entry, const QString& attribute, const QString& value )
 {
Index: kmail/renamejob.cpp
===================================================================
--- kmail/renamejob.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kmail/renamejob.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -27,6 +27,7 @@
  */
 
 #include "renamejob.h"
+#include "copyfolderjob.h"
 #include "kmfolderimap.h"
 #include "kmfoldercachedimap.h"
 #include "folderstorage.h"
@@ -36,9 +37,7 @@
 #include "imapaccountbase.h"
 #include "kmacctimap.h"
 #include "kmacctcachedimap.h"
-#include "kmcommands.h"
 #include "kmmsgbase.h"
-#include "undostack.h"
 
 #include <kdebug.h>
 #include <kurl.h>
@@ -56,7 +55,7 @@
     KMFolderDir* newParent )
  : FolderJob( 0, tOther, (storage ? storage->folder() : 0) ),
    mStorage( storage ), mNewParent( newParent ),
-   mNewName( newName ), mNewFolder( 0 )
+   mNewName( newName ), mNewFolder( 0 ), mCopyFolderJob( 0 )
 {
   mStorageTempOpened = 0;
   if ( storage ) {
@@ -73,6 +72,7 @@
 {
 }
 
+// FIXME: move on the server for online imap given source and target are on the same server
 void RenameJob::execute()
 {
   if ( mNewParent )
@@ -89,62 +89,11 @@
       deleteLater();
       return;
     }
-    // first create the new folder
-    KMFolderMgr* folderMgr = kmkernel->folderMgr();
-    if ( mNewParent->type() == KMImapDir ) {
-      folderMgr = kmkernel->imapFolderMgr();
-    } else if ( mNewParent->type() == KMDImapDir ) {
-      folderMgr = kmkernel->dimapFolderMgr();
-    }
+    // copy to the new folder
+    mCopyFolderJob = new CopyFolderJob( mStorage, mNewParent );
+    connect( mCopyFolderJob, SIGNAL(folderCopyComplete(bool)), SLOT(folderCopyComplete(bool)) );
+    mCopyFolderJob->execute();
 
-    // get the default mailbox type
-    KConfig *config = KMKernel::config();
-    KConfigGroupSaver saver(config, "General");
-    int deftype = config->readNumEntry("default-mailbox-format", 1);
-    if ( deftype < 0 || deftype > 1 ) deftype = 1;
-
-    // the type of the new folder
-    KMFolderType typenew =
-      ( deftype == 0 ) ? KMFolderTypeMbox : KMFolderTypeMaildir;
-    if ( mNewParent->owner() )
-      typenew = mNewParent->owner()->folderType();
-
-    mNewFolder = folderMgr->createFolder( mNewName, false, typenew, mNewParent );
-    if ( !mNewFolder )
-    {
-      kdWarning(5006) << k_funcinfo << "could not create folder" << endl;
-      emit renameDone( mNewName, false );
-      deleteLater();
-      return;
-    }
-    kdDebug(5006)<< "RenameJob::rename - " << mStorage->folder()->idString()
-      << " |=> " << mNewFolder->idString() << endl;
-
-    if ( mNewParent->type() == KMImapDir )
-    {
-      // online imap
-      // create it on the server and wait for the folderAdded signal
-      // do not ask the user what kind of folder should be created
-      connect( kmkernel->imapFolderMgr(), SIGNAL( changed() ),
-          this, SLOT( slotMoveMessages() ) );
-      KMFolderImap* imapFolder =
-        static_cast<KMFolderImap*>(mNewParent->owner()->storage());
-      imapFolder->createFolder( mNewName, QString::null, false ); 
-    } else if ( mNewParent->type() == KMDImapDir )
-    {
-      KMFolderCachedImap* newStorage = static_cast<KMFolderCachedImap*>(mNewFolder->storage());
-      KMFolderCachedImap* owner = static_cast<KMFolderCachedImap*>(mNewParent->owner()->storage());
-      newStorage->initializeFrom( owner );
-      moveSubFoldersBeforeMessages();
-    } else if ( mStorage->folderType() == KMFolderTypeCachedImap )
-    {
-      // from (d)IMAP to local account
-      moveSubFoldersBeforeMessages();
-    } else
-    {
-      // local
-      slotMoveMessages();
-    }
   } else
   {
     // only rename the folder
@@ -219,131 +168,65 @@
   deleteLater();
 }
 
-void RenameJob::slotMoveMessages()
+void RenameJob::folderCopyComplete(bool success)
 {
-  kdDebug(5006) << k_funcinfo << endl;
-  disconnect( kmkernel->imapFolderMgr(), SIGNAL( changed() ),
-      this, SLOT( slotMoveMessages() ) );
-  mStorage->blockSignals( true );
-  // move all messages to the new folder
-  QPtrList<KMMsgBase> msgList;
-  if ( !mStorage->isOpened() )
-    mStorageTempOpened = mStorage->open() ? mStorage : 0;
-  for ( int i = 0; i < mStorage->count(); i++ )
-  {
-    KMMsgBase* msgBase = mStorage->getMsgBase( i );
-    assert( msgBase );
-    msgList.append( msgBase );
+  kdDebug(5006) << k_funcinfo << success << endl;
+  if ( !success ) {
+    kdWarning(5006) << k_funcinfo << "could not copy folder" << endl;
+    emit renameDone( mNewName, false );
+    deleteLater();
+    return;
   }
-  if ( msgList.count() == 0 )
-  {
-    slotMoveCompleted( 0 );
-  } else
-  {
-    KMCommand *command = new KMMoveCommand( mNewFolder, msgList );
-    connect( command, SIGNAL( completed( KMCommand * ) ),
-        this, SLOT( slotMoveCompleted( KMCommand * ) ) );
-    command->start();
-  }
-}
+  mNewFolder = mCopyFolderJob->targetFolder();
+  mCopyFolderJob = 0;
 
-void RenameJob::slotMoveCompleted( KMCommand* command )
-{
-  kdDebug(5006) << k_funcinfo << (command?command->result():0) << endl;
   if ( mStorageTempOpened ) {
-    mStorageTempOpened->close();
+    mStorageTempOpened->close("renamejob");
     mStorageTempOpened = 0;
   }
-  if ( command ) {
-    // just make sure nothing bounces
-    disconnect( command, SIGNAL( completed( KMCommand * ) ),
-        this, SLOT( slotMoveCompleted( KMCommand * ) ) );
-  }
-  if ( !command || command->result() == KMCommand::OK )
-  {
-    kdDebug(5006) << "deleting old folder" << endl;
-    // move complete or not necessary
-    // save our settings
-    QString oldconfig = "Folder-" + mStorage->folder()->idString();
-    KConfig* config = KMKernel::config();
-    QMap<QString, QString> entries = config->entryMap( oldconfig );
-    KConfigGroupSaver saver(config, "Folder-" + mNewFolder->idString());
-    for ( QMap<QString, QString>::Iterator it = entries.begin();
-          it != entries.end(); ++it )
-    {
-      if ( it.key() == "Id" || it.key() == "ImapPath" ||
-           it.key() == "UidValidity" )
-        continue;
-      config->writeEntry( it.key(), it.data() );
-    }
-    mNewFolder->readConfig( config );
-    // make sure the children state is correct
-    if ( mNewFolder->child() &&
-         ( mNewFolder->storage()->hasChildren() == FolderStorage::HasNoChildren ) )
-      mNewFolder->storage()->updateChildrenState();
 
-    // delete the old folder
-    mStorage->blockSignals( false );
-    if ( mStorage->folderType() == KMFolderTypeImap )
-    {
-      kmkernel->imapFolderMgr()->remove( mStorage->folder() );
-    } else if ( mStorage->folderType() == KMFolderTypeCachedImap )
-    {
-      // tell the account (see KMFolderCachedImap::listDirectory2)
-      KMAcctCachedImap* acct = static_cast<KMFolderCachedImap*>(mStorage)->account();
-      if ( acct )
-        acct->addDeletedFolder( mOldImapPath );
-      kmkernel->dimapFolderMgr()->remove( mStorage->folder() );
-    } else if ( mStorage->folderType() == KMFolderTypeSearch )
-    {
-      // invalid
-      kdWarning(5006) << k_funcinfo << "cannot remove a search folder" << endl;
-    } else {
-      kmkernel->folderMgr()->remove( mStorage->folder() );
-    }
-
-    emit renameDone( mNewName, true );
-  } else
+  kdDebug(5006) << "deleting old folder" << endl;
+  // move complete or not necessary
+  // save our settings
+  QString oldconfig = "Folder-" + mStorage->folder()->idString();
+  KConfig* config = KMKernel::config();
+  QMap<QString, QString> entries = config->entryMap( oldconfig );
+  KConfigGroupSaver saver(config, "Folder-" + mNewFolder->idString());
+  for ( QMap<QString, QString>::Iterator it = entries.begin();
+        it != entries.end(); ++it )
   {
-    // move failed - rollback the last transaction
-    kmkernel->undoStack()->undo();
-
-    emit renameDone( mNewName, false );
+    if ( it.key() == "Id" || it.key() == "ImapPath" ||
+          it.key() == "UidValidity" )
+      continue;
+    config->writeEntry( it.key(), it.data() );
   }
-  delete this;
-}
+  mNewFolder->readConfig( config );
+  // make sure the children state is correct
+  if ( mNewFolder->child() &&
+        ( mNewFolder->storage()->hasChildren() == FolderStorage::HasNoChildren ) )
+    mNewFolder->storage()->updateChildrenState();
 
-void RenameJob::slotMoveSubFolders( QString newName, bool success )
-{
-  if ( !success ) {
-      emit renameDone( newName, false );
+  // delete the old folder
+  mStorage->blockSignals( false );
+  if ( mStorage->folderType() == KMFolderTypeImap )
+  {
+    kmkernel->imapFolderMgr()->remove( mStorage->folder() );
+  } else if ( mStorage->folderType() == KMFolderTypeCachedImap )
+  {
+    // tell the account (see KMFolderCachedImap::listDirectory2)
+    KMAcctCachedImap* acct = static_cast<KMFolderCachedImap*>(mStorage)->account();
+    if ( acct )
+      acct->addDeletedFolder( mOldImapPath );
+    kmkernel->dimapFolderMgr()->remove( mStorage->folder() );
+  } else if ( mStorage->folderType() == KMFolderTypeSearch )
+  {
+    // invalid
+    kdWarning(5006) << k_funcinfo << "cannot remove a search folder" << endl;
   } else {
-    KMFolderDir* child = mStorage->folder()->child();
-    if ( child && child->first() )
-    {
-      KMFolderNode* node = child->first();
-      {
-        FolderStorage* childStorage = static_cast<KMFolder*>(node)->storage();
-        if ( !mNewFolder->child() )
-          mNewFolder->createChildFolder();
-        RenameJob* job = new RenameJob( childStorage, childStorage->name(),
-                                        mNewFolder->child() );
-        connect( job, SIGNAL( renameDone( QString, bool ) ),
-            this, SLOT( slotMoveSubFolders( QString, bool ) ) );
-        job->start();
-      }
-    }
-    else slotMoveMessages();
+    kmkernel->folderMgr()->remove( mStorage->folder() );
   }
-}
 
-void RenameJob::moveSubFoldersBeforeMessages()
-{
-  // move child folders recursive if present - else simply move the messages
-  KMFolderDir* child = mStorage->folder()->child();
-  if ( child )
-    slotMoveSubFolders( "", true );
-  else slotMoveMessages();
+  emit renameDone( mNewName, true );
 }
 
 #include "renamejob.moc"
Index: kmail/kmail_part.rc
===================================================================
--- kmail/kmail_part.rc	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kmail/kmail_part.rc	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -2,7 +2,7 @@
      the same menu entries at the same place in KMail and Kontact  -->
 
 <!DOCTYPE kpartgui>
-<kpartgui version="11" name="kmail_part" >
+<kpartgui version="13" name="kmail_part" >
  <MenuBar>
   <Menu noMerge="1" name="file" >
    <text>&amp;File</text>
@@ -40,6 +40,14 @@
    <Separator/>
    <Action name="kmail_copy" />
    <Separator/>
+   <Action name="copy_folder"/>
+   <Action name="cut_folder"/>
+   <Action name="paste_folder"/>
+   <Separator/>
+   <Action name="copy_messages"/>
+   <Action name="cut_messages"/>
+   <Action name="paste_messages"/>
+   <Separator/>
    <Action name="move_to_trash" />
    <Action name="move_thread_to_trash" />
    <Separator/>
@@ -125,14 +133,14 @@
    <Separator/>
    <Action name="copy_to" />
    <Action name="move_to" />
-   <Separator/> 
+   <Separator/>
    <Action name="set_status" />
    <Action name="thread_status" />
    <Separator/>
    <Action name="create_filter"/>
    <Menu name="apply_filter_actions" >
      <text>A&amp;pply Filter</text>
-     <Action name="apply_filters" /> 
+     <Action name="apply_filters" />
      <ActionList name="menu_filter_actions" />
    </Menu>
   </Menu>
Index: kmail/folderjob.cpp
===================================================================
--- kmail/folderjob.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kmail/folderjob.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -38,6 +38,7 @@
 #include "folderstorage.h"
 
 #include <kdebug.h>
+#include <kio/global.h>
 
 namespace KMail {
 
@@ -113,6 +114,7 @@
 //----------------------------------------------------------------------------
 void FolderJob::kill()
 {
+  mErrorCode = KIO::ERR_USER_CANCELED;
   delete this;
 }
 
Index: kmail/index.cpp
===================================================================
--- kmail/index.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kmail/index.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -4,12 +4,12 @@
  * KMail is free software; you can redistribute it and/or modify it
  * under the terms of the GNU General Public License, version 2, as
  * published by the Free Software Foundation.
- * 
+ *
  * KMail is distributed in the hope that it will be useful, but
  * WITHOUT ANY WARRANTY; without even the implied warranty of
  * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
  * General Public License for more details.
- * 
+ *
  * You should have received a copy of the GNU General Public License
  * along with this program; if not, write to the Free Software
  * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301  USA
@@ -58,6 +58,7 @@
 const char* const folderIndexDisabledKey = "fulltextIndexDisabled";
 }
 
+#ifdef HAVE_INDEXLIB
 static
 QValueList<int> vectorToQValueList( const std::vector<Q_UINT32>& input ) {
 	QValueList<int> res;
@@ -65,7 +66,6 @@
 	return res;
 }
 
-
 static
 std::vector<Q_UINT32> QValueListToVector( const QValueList<int>& input ) {
 	std::vector<Q_UINT32> res;
@@ -75,6 +75,7 @@
 	}
 	return res;
 }
+#endif
 
 KMMsgIndex::KMMsgIndex( QObject* parent ):
 	QObject( parent, "index" ),
@@ -89,12 +90,12 @@
 	//mSyncTimer( new QTimer( this ) ),
 	mSlowDown( false ) {
 	kdDebug( 5006 ) << "KMMsgIndex::KMMsgIndex()" << endl;
-	
-	connect( kmkernel->folderMgr(), SIGNAL( msgRemoved( KMFolder*, Q_UINT32 ) ), SLOT( slotRemoveMessage( KMFolder*, Q_UINT32 ) ) );
-	connect( kmkernel->folderMgr(), SIGNAL( msgAdded( KMFolder*, Q_UINT32 ) ), SLOT( slotAddMessage( KMFolder*, Q_UINT32 ) ) );
-	connect( kmkernel->dimapFolderMgr(), SIGNAL( msgRemoved( KMFolder*, Q_UINT32 ) ), SLOT( slotRemoveMessage( KMFolder*, Q_UINT32 ) ) );
-	connect( kmkernel->dimapFolderMgr(), SIGNAL( msgAdded( KMFolder*, Q_UINT32 ) ), SLOT( slotAddMessage( KMFolder*, Q_UINT32 ) ) );
 
+	connect( kmkernel->folderMgr(), SIGNAL( msgRemoved( KMFolder*, Q_UINT32 ) ), SLOT( slotRemoveMessage( Q_UINT32 ) ) );
+	connect( kmkernel->folderMgr(), SIGNAL( msgAdded( KMFolder*, Q_UINT32 ) ), SLOT( slotAddMessage( Q_UINT32 ) ) );
+	connect( kmkernel->dimapFolderMgr(), SIGNAL( msgRemoved( KMFolder*, Q_UINT32 ) ), SLOT( slotRemoveMessage( Q_UINT32 ) ) );
+	connect( kmkernel->dimapFolderMgr(), SIGNAL( msgAdded( KMFolder*, Q_UINT32 ) ), SLOT( slotAddMessage( Q_UINT32 ) ) );
+
 	connect( mTimer, SIGNAL( timeout() ), SLOT( act() ) );
 	//connect( mSyncTimer, SIGNAL( timeout() ), SLOT( syncIndex() ) );
 
@@ -226,7 +227,7 @@
 				//else  fall-through
 			case s_idle:
 			case s_processing:
-				
+
 			case s_error:
 			case s_disabled:
 				// nothing can be done
@@ -250,7 +251,7 @@
 	mExisting.clear();
 	mState = s_disabled;
 	for ( std::set<KMFolder*>::const_iterator first = mOpenedFolders.begin(), past = mOpenedFolders.end(); first != past; ++first ) {
-		( *first )->close();
+		( *first )->close("msgindex");
 	}
 	mOpenedFolders.clear();
 	for ( std::vector<Search*>::const_iterator first = mSearches.begin(), past = mSearches.end(); first != past; ++first ) {
@@ -284,7 +285,7 @@
 	if ( !folder || idx == -1 ) return -1;
 	if ( !mOpenedFolders.count( folder ) ) {
 		mOpenedFolders.insert( folder );
-		folder->open();
+		folder->open("msgindex");
 	}
 	KMMessage* msg = folder->getMsg( idx );
 	/* I still don't know whether we should allow decryption or not.
@@ -324,7 +325,7 @@
 		mPendingFolders.pop_back();
 		if ( !mOpenedFolders.count( f ) ) {
 			mOpenedFolders.insert( f );
-			f->open();
+			f->open("msgindex");
 		}
 		const KMMsgDict* dict = KMMsgDict::instance();
 		KConfig* config = KMKernel::config();
@@ -344,7 +345,7 @@
 	for ( std::set<KMFolder*>::const_iterator first = mOpenedFolders.begin(), past = mOpenedFolders.end();
 			first != past;
 			++first ) {
-		( *first )->close();
+		( *first )->close("msgindex");
 	}
 	mOpenedFolders.clear();
 	mState = s_idle;
@@ -367,7 +368,7 @@
 
 void KMMsgIndex::create() {
 	kdDebug( 5006 ) << "KMMsgIndex::create()" << endl;
-	
+
 #ifdef HAVE_INDEXLIB
 	if ( !QFileInfo( mIndexPath ).exists() ) {
 		::mkdir( mIndexPath, S_IRWXU );
@@ -428,7 +429,7 @@
 //}
 //
 //void KMMsgIndex::finishSync() {
-//	
+//
 //}
 
 void KMMsgIndex::removeSearch( QObject* destroyed ) {
@@ -481,10 +482,10 @@
 	return false;
 }
 
-void KMMsgIndex::slotAddMessage( KMFolder* folder, Q_UINT32 serNum ) {
+void KMMsgIndex::slotAddMessage( Q_UINT32 serNum ) {
 	kdDebug( 5006 ) << "KMMsgIndex::slotAddMessage( . , " << serNum << " )" << endl;
 	if ( mState == s_error || mState == s_disabled ) return;
-	
+
 	if ( mState == s_creating ) mAddedMsgs.push_back( serNum );
 	else mPendingMsgs.push_back( serNum );
 
@@ -492,7 +493,7 @@
 	scheduleAction();
 }
 
-void KMMsgIndex::slotRemoveMessage( KMFolder* folder, Q_UINT32 serNum ) {
+void KMMsgIndex::slotRemoveMessage( Q_UINT32 serNum ) {
 	kdDebug( 5006 ) << "KMMsgIndex::slotRemoveMessage( . , " << serNum << " )" << endl;
 	if ( mState == s_error || mState == s_disabled ) return;
 
@@ -511,7 +512,7 @@
 void KMMsgIndex::removeMessage( Q_UINT32 serNum ) {
 	kdDebug( 5006 ) << "KMMsgIndex::removeMessage( " << serNum << " )" << endl;
 	if ( mState == s_error || mState == s_disabled ) return;
-	
+
 #ifdef HAVE_INDEXLIB
 	mIndex->remove_doc( QString::number( serNum ).latin1() );
 	++mMaintenanceCount;
Index: kmail/eventsrc
===================================================================
--- kmail/eventsrc	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kmail/eventsrc	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,8 +1,9 @@
 [!Global!]
 IconName=kmail
 Comment=KMail
-Comment[be]=K Пошта
 Comment[hi]=के-मेल
+Comment[mk]=КПошта
+Comment[ne]=केडीई मेल
 Comment[pa]=ਕੇ-ਪੱਤਰ
 Comment[sv]=Kmail
 Comment[ta]=kஅஞ்சல்
@@ -31,11 +32,14 @@
 Name[is]=Nýr póstur
 Name[it]=Nuova posta arrivata
 Name[ja]=新規メール着信
+Name[kk]=Жаңа пошта келді
 Name[km]=មាន​អ៊ីមែល​ថ្មី​មក​ដល់
 Name[lt]=Atėjo naujas paštas
+Name[mk]=Пристигната е нова е-пошта
 Name[ms]=Mel Baru Sampai
 Name[nb]=Ny e-post ankommet
 Name[nds]=Niege Narichten sünd ankamen
+Name[ne]=नयाँ पत्र आइपुग्यो
 Name[nl]=Nieuwe berichten gearriveerd
 Name[nn]=Ny e-post er komen
 Name[pa]=ਨਵਾਂ ਪੱਤਰ ਆਇਆ
@@ -80,11 +84,14 @@
 Comment[is]=Nýr póstur
 Comment[it]=Nuova posta
 Comment[ja]=新規メール着信
+Comment[kk]=Жаңа пошта келді
 Comment[km]=មាន​អ៊ីមែល​ថ្មី​មក​ដល់
 Comment[lt]=Atėjo naujas paštas
+Comment[mk]=Пристигната е нова е-пошта
 Comment[ms]=Mel baru sampai
 Comment[nb]=Ny e-post ankommet
 Comment[nds]=Niege Narichten sünd ankamen
+Comment[ne]=नयाँ पत्र आइपुग्यो
 Comment[nl]=Nieuw bericht ontvangen
 Comment[nn]=Ny e-post er komen
 Comment[pa]=ਨਵਾਂ ਪੱਤਰ ਆਇਆ
Index: kmail/kmkernel.cpp
===================================================================
--- kmail/kmkernel.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kmail/kmkernel.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -866,7 +866,7 @@
 
         int i;
 
-        mAddMsgCurrentFolder->open();
+        mAddMsgCurrentFolder->open("dcopadd");
         for( i=0; i<mAddMsgCurrentFolder->count(); i++) {
           KMMsgBase *mb = mAddMsgCurrentFolder->getMsgBase(i);
 	  QString id = mb->msgIdMD5();
@@ -885,7 +885,7 @@
             mAddMessageMsgIds.append(id);
           }
         }
-        mAddMsgCurrentFolder->close();
+        mAddMsgCurrentFolder->close("dcopadd");
       }
 
       QString msgId = msg->msgIdMD5();
@@ -1101,7 +1101,7 @@
     KMMsgDict::instance()->getLocation(serialNumber, &folder, &idx);
     if (!folder || (idx == -1))
       return false;
-    folder->open();
+    folder->open("showmail");
     KMMsgBase *msgBase = folder->getMsgBase(idx);
     if (!msgBase)
       return false;
@@ -1118,7 +1118,7 @@
 
     if (unGet)
       folder->unGetMsg(idx);
-    folder->close();
+    folder->close("showmail");
     return true;
   }
 
@@ -1132,7 +1132,7 @@
   KMMsgDict::instance()->getLocation(serialNumber, &folder, &idx);
   if (!folder || (idx == -1))
     return QString::null;
-  folder->open();
+  folder->open("getFrom");
   KMMsgBase *msgBase = folder->getMsgBase(idx);
   if (!msgBase)
     return QString::null;
@@ -1141,7 +1141,7 @@
   QString result = msg->from();
   if (unGet)
     folder->unGetMsg(idx);
-  folder->close();
+  folder->close("getFrom");
   return result;
 }
 
@@ -1163,7 +1163,7 @@
     // different folder
     if (folder && (idx != -1)) {
       // everything is ok
-      folder->open();
+      folder->open("debugser");
       msg = folder->getMsgBase( idx );
       if (msg) {
 	res.append( QString( " subject %s,\n sender %s,\n date %s.\n" )
@@ -1173,7 +1173,7 @@
       } else {
 	res.append( QString( "Invalid serial number." ) );
       }
-      folder->close();
+      folder->close("debugser");
     } else {
       res.append( QString( "Invalid serial number." ) );
     }
@@ -1335,7 +1335,7 @@
     return;
 
   KMFolder folder( 0, pathName + "autosave", KMFolderTypeMaildir, false /* no index */ );
-  const int rc = folder.open();
+  const int rc = folder.open("recover");
   if ( rc ) {
     perror( "cannot open autosave folder" );
     return;
@@ -1351,7 +1351,7 @@
       win->show();
     }
   }
-  folder.close();
+  folder.close("recover");
 }
 
 //-----------------------------------------------------------------------------
@@ -1395,7 +1395,7 @@
    * the index on each start to be on the save side. */
   //if ( the_outboxFolder->folderType() == KMFolderTypeMaildir )
   //  unlink( QFile::encodeName( the_outboxFolder->indexLocation() ) );
-  the_outboxFolder->open();
+  the_outboxFolder->open("kmkernel");
 
   the_sentFolder = the_folderMgr->findOrCreate(cfg->readEntry("sentFolder", I18N_NOOP("sent-mail")));
   if (the_sentFolder->canAccess() != 0) {
@@ -1422,7 +1422,7 @@
   the_draftsFolder->setSystemFolder( TRUE );
   if ( the_draftsFolder->userWhoField().isEmpty() )
     the_draftsFolder->setUserWhoField( QString::null );
-  the_draftsFolder->open();
+  the_draftsFolder->open("kmkernel");
 
   the_templatesFolder =
     the_folderMgr->findOrCreate( cfg->readEntry( "templatesFolder",
@@ -1433,7 +1433,7 @@
   the_templatesFolder->setSystemFolder( TRUE );
   if ( the_templatesFolder->userWhoField().isEmpty() )
     the_templatesFolder->setUserWhoField( QString::null );
-  the_templatesFolder->open();
+  the_templatesFolder->open("kmkernel");
 }
 
 
@@ -1581,7 +1581,7 @@
     imapAcct = static_cast<KMAcctImap*>(acct);
     fld->setAccount(imapAcct);
     imapAcct->setImapFolder(fld);
-    fld->close();
+    fld->close( "kernel", true );
   }
   the_imapFolderMgr->quiet(false);
 
@@ -1612,7 +1612,7 @@
     cachedImapAcct = static_cast<KMAcctCachedImap*>(acct);
     cfld->setAccount(cachedImapAcct);
     cachedImapAcct->setImapFolder(cfld);
-    cfld->close();
+    cfld->close("kmkernel");
   }
   the_dimapFolderMgr->quiet( false );
 }
@@ -1676,7 +1676,7 @@
 
   if (the_trashFolder) {
 
-    the_trashFolder->close(TRUE);
+    the_trashFolder->close("kmkernel", TRUE);
 
     if (config->readBoolEntry("empty-trash-on-exit", true))
     {
@@ -1695,7 +1695,7 @@
   {
     folder = *folders.at(i);
     if (!folder || folder->isDir()) continue;
-    folder->close(TRUE);
+    folder->close("kmkernel", TRUE);
   }
   strList.clear();
   folders.clear();
@@ -1704,7 +1704,7 @@
   {
     folder = *folders.at(i);
     if (!folder || folder->isDir()) continue;
-    folder->close(TRUE);
+    folder->close("kmkernel", TRUE);
   }
 
   delete the_msgIndex;
@@ -1952,6 +1952,15 @@
              this, SLOT( slotConfigChanged() ) );
   }
 
+  if( KMKernel::getKMMainWidget() == 0 )
+  {
+    // ensure that there is a main widget available
+    // as parts of the configure dialog (identity) rely on this
+    // and this slot can be called when there is only a KMComposeWin showing
+    KMMainWin * win = new KMMainWin;
+    win->show();
+  }
+
   if( mConfigureDialog->isHidden() )
     mConfigureDialog->show();
   else
Index: kmail/headerstyle.cpp
===================================================================
--- kmail/headerstyle.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kmail/headerstyle.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -541,7 +541,7 @@
         if ( facestring.length() < 993 ) {
           QByteArray facearray;
           KCodecs::base64Decode(facestring, facearray);
-    
+
           QImage faceimage;
           if ( faceimage.loadFromData( facearray, "png" ) ) {
             // Spec says image must be 48x48 pixels
@@ -659,31 +659,51 @@
     // to line
     if ( strategy->showHeader( "to" ) )
       headerStr.append(QString("<tr><th>%1</th>\n"
-                   "<td>%2</td></tr>\n")
-                            .arg(i18n("To: "))
-                            .arg(KMMessage::emailAddrAsAnchor(message->to(),FALSE)));
+                               "<td>%2</td></tr>\n")
+                       .arg(i18n("To: "))
+                       .arg(KMMessage::emailAddrAsAnchor(message->to(),FALSE)));
 
     // cc line, if any
     if ( strategy->showHeader( "cc" ) && !message->cc().isEmpty())
       headerStr.append(QString("<tr><th>%1</th>\n"
-                   "<td>%2</td></tr>\n")
-                              .arg(i18n("CC: "))
-                              .arg(KMMessage::emailAddrAsAnchor(message->cc(),FALSE)));
+                               "<td>%2</td></tr>\n")
+                       .arg(i18n("CC: "))
+                       .arg(KMMessage::emailAddrAsAnchor(message->cc(),FALSE)));
 
     // Bcc line, if any
     if ( strategy->showHeader( "bcc" ) && !message->bcc().isEmpty())
       headerStr.append(QString("<tr><th>%1</th>\n"
-                   "<td>%2</td></tr>\n")
-                              .arg(i18n("BCC: "))
-                              .arg(KMMessage::emailAddrAsAnchor(message->bcc(),FALSE)));
+                               "<td>%2</td></tr>\n")
+                       .arg(i18n("BCC: "))
+                       .arg(KMMessage::emailAddrAsAnchor(message->bcc(),FALSE)));
 
     if ( strategy->showHeader( "date" ) )
       headerStr.append(QString("<tr><th>%1</th>\n"
-                   "<td dir=\"%2\">%3</td></tr>\n")
-                            .arg(i18n("Date: "))
-                    .arg( directionOf( message->dateStr() ) )
-                            .arg(strToHtml(dateString)));
+                               "<td dir=\"%2\">%3</td></tr>\n")
+                       .arg(i18n("Date: "))
+                       .arg( directionOf( message->dateStr() ) )
+                       .arg(strToHtml(dateString)));
 
+    if ( GlobalSettings::self()->showUserAgent() ) {
+      if ( strategy->showHeader( "user-agent" ) ) {
+        if ( !message->headerField("User-Agent").isEmpty() ) {
+          headerStr.append(QString("<tr><th>%1</th>\n"
+                                   "<td>%2</td></tr>\n")
+                           .arg(i18n("User-Agent: "))
+                           .arg( strToHtml( message->headerField("User-Agent") ) ) );
+        }
+      }
+
+      if ( strategy->showHeader( "x-mailer" ) ) {
+        if ( !message->headerField("X-Mailer").isEmpty() ) {
+          headerStr.append(QString("<tr><th>%1</th>\n"
+                                   "<td>%2</td></tr>\n")
+                           .arg(i18n("X-Mailer: "))
+                           .arg( strToHtml( message->headerField("X-Mailer") ) ) );
+        }
+      }
+    }
+
     // FIXME: Show status in synthetic header style field.  Decide whether this or current in brackets style is best and remove one.
     /*    if( strategy->showHeader( "status" ) )
       headerStr.append( QString( "<tr><th>%1</th>\n"
Index: kmail/kmail.kcfg
===================================================================
--- kmail/kmail.kcfg	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kmail/kmail.kcfg	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -66,7 +66,6 @@
         </choices>
         <default>DontSendOnCheck</default>
       </entry>
-
     </group>
 
     <group name="FolderSelectionDialog">
@@ -74,9 +73,24 @@
         <whatsthis>The most recently selected folder in the folder selection dialog.</whatsthis>
         <default>inbox</default>
       </entry>
+
+      <entry name="QuotaUnit"  type="Enum">
+        <label></label>
+        <whatsthis></whatsthis>
+        <choices>
+          <choice name="KB"/>
+          <choice name="MB"/>
+          <choice name="GB"/>
+        </choices>
+        <default>KB</default>
+      </entry>
     </group>
 
     <group name="General">
+      <entry name="disregardUmask" type="Bool">
+        <label>Disregard the users umask setting and use "read-write for the user only" instead</label>
+        <default>false</default>
+      </entry>
       <entry name="SystemTrayEnabled" type="Bool">
         <label>Enable system tray icon</label>
         <default>false</default>
@@ -155,6 +169,14 @@
         <default>true</default>
       </entry>
 
+      <entry name="ShowOnlyGroupwareFoldersForGroupwareAccount" type="Bool">
+        <default>false</default>
+        <whatsthis>&lt;p&gt;If the account used for storing groupware information "
+          "is not used to manage normal mail, set this option to make KMail only "
+          "show groupware folders in it. This is useful if you are handling regular "
+          "mail via an additional online IMAP account.&lt;/p&gt;</whatsthis>
+      </entry>
+
       <entry name="TheIMAPResourceStorageFormat" type="Enum">
         <whatsthis>&lt;p&gt;Choose the storage format of the groupware folders. &lt;ul&gt;&lt;li&gt;The default format is to use the ical (for calendar folders) and vcard (for addressbook folders) standards. This format makes all Kontact features available.&lt;/li&gt;&lt;li&gt;The Kolab XML format uses a custom model that matches more closely the one used in Outlook. This format gives better Outlook compatibility, when using a Kolab server or a compatible solution.&lt;/li&gt;&lt;/ul&gt;&lt;/p&gt;</whatsthis>
         <choices>
@@ -436,6 +458,12 @@
      <entry name="ChiasmusDecryptionOptions" type="String">
      </entry>
 
+     <entry name="ShowUserAgent" type="Bool">
+       <default>false</default>
+       <label>Show user agent in fancy headers</label>
+       <whatsthis>Enable this option to get the User-Agent and X-Mailer header lines displayed when using fancy headers.</whatsthis>
+     </entry>
+
     </group>
 
     <group name="TextIndex">
Index: kmail/annotationjobs.h
===================================================================
--- kmail/annotationjobs.h	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kmail/annotationjobs.h	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -92,6 +92,18 @@
  */
 MultiGetAnnotationJob* multiGetAnnotation( KIO::Slave* slave, const KURL& url, const QStringList& entries );
 
+class MultiUrlGetAnnotationJob;
+/**
+ * Get annotation entries for multiple folders.
+ * @param paths The paths to get the annotation for 
+ * @param annotation The annotation to get
+ */
+MultiUrlGetAnnotationJob* multiUrlGetAnnotation( KIO::Slave* slave,
+                                              const KURL& baseUrl,
+                                              const QStringList& paths,
+                                              const QString& annotation );
+
+
 /// for getAnnotation()
 class GetAnnotationJob : public KIO::SimpleJob
 {
@@ -132,6 +144,30 @@
   QStringList::const_iterator mEntryListIterator;
 };
 
+/// for multiUrlGetAnnotation
+class MultiUrlGetAnnotationJob : public KIO::Job
+{
+  Q_OBJECT
+
+public:
+  MultiUrlGetAnnotationJob( KIO::Slave* slave, const KURL& baseUrl,
+                            const QStringList& paths, const QString& annotation );
+
+  QMap<QString, QString> annotations() const;
+
+protected slots:
+  virtual void slotStart();
+  virtual void slotResult( KIO::Job *job );
+
+private:
+  KIO::Slave* mSlave;
+  const KURL mUrl;
+  const QStringList mPathList;
+  QStringList::const_iterator mPathListIterator;
+  QString mAnnotation;
+  QMap<QString, QString> mAnnotations;
+};
+
 /// for multiSetAnnotation
 class MultiSetAnnotationJob : public KIO::Job
 {
Index: kmail/aboutdata.cpp
===================================================================
--- kmail/aboutdata.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kmail/aboutdata.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -212,7 +212,7 @@
     : KAboutData( "kmail", I18N_NOOP("KMail"),KMAIL_VERSION,
                   I18N_NOOP("KDE Email Client"), License_GPL,
                   I18N_NOOP("(c) 1997-2005, The KMail developers"), 0,
-                  "http://kmail.kde.org" )
+                  "http://kontact.kde.org/kmail/" )
   {
     using KMail::authors;
     using KMail::credits;
Index: kmail/kmfoldercachedimap.h
===================================================================
--- kmail/kmfoldercachedimap.h	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kmail/kmfoldercachedimap.h	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -45,8 +45,10 @@
 #include "kmfoldertype.h"
 #include "folderjob.h"
 #include "cachedimapjob.h"
+#include "quotajobs.h"
 
 using KMail::FolderJob;
+using KMail::QuotaInfo;
 class KMAcctCachedImap;
 
 namespace KMail {
@@ -93,7 +95,7 @@
   virtual void readConfig();
   virtual void writeConfig();
 
-  void writeAnnotationConfig();
+  void writeConfigKeysWhichShouldNotGetOverwrittenByReadConfig();
 
   /** Returns the type of this folder */
   virtual KMFolderType folderType() const { return KMFolderTypeCachedImap; }
@@ -214,6 +216,17 @@
   /// Set the user's rights on this folder - called by getUserRights
   void setUserRights( unsigned int userRights );
 
+  /**
+   * The quota information for this folder.
+   * @return an invalid info if we haven't synced yet, or the server
+   * doesn't support quota. The difference can be figured out by
+   * asking the account whether it supports quota. If we have
+   * synced, the account supports quota, but there is no quota
+   * on the folder, the return info will be valid, but empty.
+   * @see QuotaInfo::isEmpty(), QuotaInfo::isValid()
+   */
+  const QuotaInfo quotaInfo() const { return mQuotaInfo; }
+
   /// Return the list of ACL for this folder
   typedef QValueVector<KMail::ACLListEntry> ACLList;
   const ACLList& aclList() const { return mACLList; }
@@ -277,6 +290,7 @@
   void slotCheckUidValidityResult( KMail::FolderJob* job );
   void slotTestAnnotationResult(KIO::Job *job);
   void slotGetAnnotationResult( KIO::Job* );
+  void slotMultiUrlGetAnnotationResult( KIO::Job* );
   void slotSetAnnotationResult(KIO::Job *job);
   void slotReceivedUserRights( KMFolder* );
   void slotReceivedACL( KMFolder*, KIO::Job*, const KMail::ACLList& );
@@ -287,6 +301,8 @@
   void slotAnnotationChanged( const QString& entry, const QString& attribute, const QString& value );
   void slotDeleteMessagesResult(KMail::FolderJob *);
   void slotImapStatusChanged(KMFolder* folder, const QString&, bool);
+  void slotStorageQuotaResult( const QuotaInfo& );
+  void slotQuotaResult( KIO::Job* job );
 
 protected:
   /* returns true if there were messages to delete
@@ -298,6 +314,7 @@
   void createNewFolders();
 
   void listDirectory2();
+  void createFoldersNewOnServerAndFinishListing( const QValueVector<int> foldersNewOnServer );
 
 
   /** Utility methods for syncing. Finds new messages
@@ -389,6 +406,7 @@
     SYNC_STATE_SET_ANNOTATIONS,
     SYNC_STATE_GET_ACLS,
     SYNC_STATE_SET_ACLS,
+    SYNC_STATE_GET_QUOTA,
     SYNC_STATE_FIND_SUBFOLDERS,
     SYNC_STATE_SYNC_SUBFOLDERS,
     SYNC_STATE_CHECK_UIDVALIDITY,
@@ -471,6 +489,8 @@
   int mNamespacesToCheck;
   bool mPersonalNamespacesCheckDone;
   QString mImapPathCreation;
+
+  QuotaInfo mQuotaInfo;
 };
 
 #endif /*kmfoldercachedimap_h*/
Index: kmail/renamejob.h
===================================================================
--- kmail/renamejob.h	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kmail/renamejob.h	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -41,6 +41,8 @@
 
 namespace KMail {
 
+class CopyFolderJob;
+
 /**
  * Rename and move (d)imap folders
  * They can be moved everywhere (except search folders) as a new folder is
@@ -67,21 +69,14 @@
   /** Rename the folder */
   void slotRenameResult( KIO::Job* job );
 
-  /** Move all messages from the original folder to mNewFolder */
-  void slotMoveMessages();
+  /** All messages are copied so remove the original folder */
+  void folderCopyComplete( bool success );
 
-  /** All messages are moved so remove the original folder */
-  void slotMoveCompleted( KMCommand *command );
-
-  void slotMoveSubFolders( QString newName, bool success );
-
 signals:
   /** Emitted when the job is done, check the success bool */
   void renameDone( QString newName, bool success );
 
 protected:
-  void moveSubFoldersBeforeMessages();
-
   FolderStorage* mStorage;
   FolderStorage* mStorageTempOpened;
   KMFolderDir* mNewParent;
@@ -90,6 +85,7 @@
   QString mOldName;
   QString mOldImapPath;
   KMFolder* mNewFolder;
+  CopyFolderJob *mCopyFolderJob;
 };
 
 } // namespace KMail
Index: kmail/kmmsgbase.cpp
===================================================================
--- kmail/kmmsgbase.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kmail/kmmsgbase.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -118,7 +118,7 @@
 //-----------------------------------------------------------------------------
 bool KMMsgBase::isMessage(void) const
 {
-  return FALSE;
+  return false;
 }
 //-----------------------------------------------------------------------------
 void KMMsgBase::toggleStatus(const KMMsgStatus aStatus, int idx)
@@ -152,7 +152,7 @@
 //-----------------------------------------------------------------------------
 void KMMsgBase::setStatus(const KMMsgStatus aStatus, int idx)
 {
-  mDirty = TRUE;
+  mDirty = true;
   KMMsgStatus oldStatus = status();
   switch (aStatus) {
     case KMMsgStatusRead:
@@ -300,7 +300,7 @@
 void KMMsgBase::setEncryptionState( const KMMsgEncryptionState /*status*/, int idx )
 {
     //kdDebug(5006) << "***setEncryptionState1( " << status << " )" << endl;
-    mDirty = TRUE;
+    mDirty = true;
     if (storage())
         storage()->headerOfMsgChanged(this, idx);
 }
@@ -325,7 +325,7 @@
 void KMMsgBase::setSignatureState( const KMMsgSignatureState /*status*/, int idx )
 {
     //kdDebug(5006) << "***setSignatureState1( " << status << " )" << endl;
-    mDirty = TRUE;
+    mDirty = true;
     if (storage())
          storage()->headerOfMsgChanged(this, idx);
 }
@@ -542,7 +542,7 @@
   QString str = aStr;
 
   while (str[0] == ' ') str.remove(0,1);
-  if (hasKeyword) *hasKeyword=FALSE;
+  if (hasKeyword) *hasKeyword=false;
 
   unsigned int strLength(str.length());
   for (i=0; i < strLength && i < maxChars; i++)
@@ -555,7 +555,7 @@
     do {
       i++;
     } while (str[i] == ' ');
-    if (hasKeyword) *hasKeyword=TRUE;
+    if (hasKeyword) *hasKeyword=true;
     return str.mid(i);
   }
   return str;
@@ -604,7 +604,7 @@
     {
       encodings.append(KGlobal::charsets()->languageForEncoding(*it)
         + " ( " + mimeName + " )");
-      mimeNames.insert(mimeName, TRUE);
+      mimeNames.insert(mimeName, true);
     }
   }
   encodings.sort();
@@ -686,7 +686,7 @@
     if (pos[0]!='=' || pos[1]!='?') {
       result += LWSP_buffer + pos[0];
       LWSP_buffer = 0;
-      lastWasEncodedWord = FALSE;
+      lastWasEncodedWord = false;
       continue;
     }
     // found possible encoded-word
@@ -789,7 +789,7 @@
 
   unsigned int start, stop, p, pos = 0, encLength;
   QCString result;
-  bool breakLine = FALSE;
+  bool breakLine = false;
   const unsigned int maxLen = 75 - 7 - cset.length();
 
   while (pos < strLength)
@@ -960,8 +960,8 @@
       pattern += QString::number(n) + "[*]?";
     }
     pattern += "=";
-    
-    QRegExp fnamePart( pattern, FALSE );
+
+    QRegExp fnamePart( pattern, false );
     int startPart = fnamePart.search( aStr );
     int endPart;
     found = ( startPart >= 0 );
@@ -1112,19 +1112,19 @@
   QString ret;
 
   g_chunk_offset = 0;
-  bool using_mmap = FALSE;
+  bool using_mmap = false;
   bool swapByteOrder = storage()->indexSwapByteOrder();
   if (storage()->indexStreamBasePtr()) {
     if (g_chunk)
-	free(g_chunk);
-    using_mmap = TRUE;
+      free(g_chunk);
+    using_mmap = true;
     g_chunk = storage()->indexStreamBasePtr() + mIndexOffset;
     g_chunk_length = mIndexLength;
   } else {
     if(!storage()->mIndexStream)
       return ret;
     if (g_chunk_length < mIndexLength)
-	g_chunk = (uchar *)realloc(g_chunk, g_chunk_length = mIndexLength);
+      g_chunk = (uchar *)realloc(g_chunk, g_chunk_length = mIndexLength);
     off_t first_off=ftell(storage()->mIndexStream);
     fseek(storage()->mIndexStream, mIndexOffset, SEEK_SET);
     fread( g_chunk, mIndexLength, 1, storage()->mIndexStream);
@@ -1181,13 +1181,13 @@
   off_t ret = 0;
 
   g_chunk_offset = 0;
-  bool using_mmap = FALSE;
+  bool using_mmap = false;
   int sizeOfLong = storage()->indexSizeOfLong();
   bool swapByteOrder = storage()->indexSwapByteOrder();
   if (storage()->indexStreamBasePtr()) {
     if (g_chunk)
       free(g_chunk);
-    using_mmap = TRUE;
+    using_mmap = true;
     g_chunk = storage()->indexStreamBasePtr() + mIndexOffset;
     g_chunk_length = mIndexLength;
   } else {
@@ -1371,7 +1371,7 @@
 bool KMMsgBase::syncIndexString() const
 {
   if(!dirty())
-    return TRUE;
+    return true;
   int len;
   const uchar *buffer = asIndexString(len);
   if (len == mIndexLength) {
@@ -1379,9 +1379,9 @@
     fseek(storage()->mIndexStream, mIndexOffset, SEEK_SET);
     assert( mIndexOffset > 0 );
     fwrite( buffer, len, 1, storage()->mIndexStream);
-    return TRUE;
+    return true;
   }
-  return FALSE;
+  return false;
 }
 
 static QStringList sReplySubjPrefixes, sForwardSubjPrefixes;
Index: kmail/listjob.h
===================================================================
--- kmail/listjob.h	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kmail/listjob.h	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -71,6 +71,20 @@
 
   virtual ~ListJob();
 
+  /**
+   * Set whether the listing should include only folders that the
+   * account is subscribed to locally. This is different from the server
+   * side subscription managed by the ctor parameter.
+   */
+  void setHonorLocalSubscription( bool value );
+  
+  /**
+   * Return whether the listing includes only folders that the
+   * account is subscribed to locally. This is different from the server
+   * side subscription managed by the ctor parameter.
+   */
+  bool honorLocalSubscription() const;
+
   virtual void execute();
 
   /** Path */
@@ -124,6 +138,7 @@
   ImapAccountBase* mAccount;
   ImapAccountBase::ListType mType;
   bool mComplete;
+  bool mHonorLocalSubscription;
   QString mPath;
   QStringList mSubfolderNames, mSubfolderPaths,
               mSubfolderMimeTypes, mSubfolderAttributes;
Index: kmail/kmmainwidget.cpp
===================================================================
--- kmail/kmmainwidget.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kmail/kmmainwidget.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -80,6 +80,8 @@
 
 #include "subscriptiondialog.h"
 using KMail::SubscriptionDialog;
+#include "localsubscriptiondialog.h"
+using KMail::LocalSubscriptionDialog;
 #include "attachmentstrategy.h"
 using KMail::AttachmentStrategy;
 #include "headerstrategy.h"
@@ -164,6 +166,7 @@
   mJob = 0;
   mConfig = config;
   mGUIClient = aGUIClient;
+  mOpenedImapFolder = false;
 
   mCustomReplyActionMenu = 0;
   mCustomReplyAllActionMenu = 0;
@@ -210,6 +213,8 @@
   // display the full path to the folder in the caption
   connect(mFolderTree, SIGNAL(currentChanged(QListViewItem*)),
       this, SLOT(slotChangeCaption(QListViewItem*)));
+  connect(mFolderTree, SIGNAL(selectionChanged()),
+          SLOT(updateFolderMenu()) );
 
   connect(kmkernel->folderMgr(), SIGNAL(folderRemoved(KMFolder*)),
           this, SLOT(slotFolderRemoved(KMFolder*)));
@@ -265,11 +270,15 @@
 void KMMainWidget::readPreConfig(void)
 {
   const KConfigGroup geometry( KMKernel::config(), "Geometry" );
-  const KConfigGroup general( KMKernel::config(), "General" );
+  const KConfigGroup reader( KMKernel::config(), "Reader" );
 
   mLongFolderList = geometry.readEntry( "FolderList", "long" ) != "short";
   mReaderWindowActive = geometry.readEntry( "readerWindowMode", "below" ) != "hide";
   mReaderWindowBelow = geometry.readEntry( "readerWindowMode", "below" ) == "below";
+  mThreadPref = geometry.readBoolEntry( "nestedMessages", false );
+
+  mHtmlPref = reader.readBoolEntry( "htmlMail", false );
+  mHtmlLoadExtPref = reader.readBoolEntry( "htmlLoadExternal", false );
 }
 
 
@@ -336,14 +345,8 @@
 
   }
 
-  // read "Reader" config options
-  KConfigGroup readerConfig( config, "Reader" );
-  mHtmlPref = readerConfig.readBoolEntry( "htmlMail", false );
-  mHtmlLoadExtPref = readerConfig.readBoolEntry( "htmlLoadExternal", false );
-
   { // area for config group "Geometry"
     KConfigGroupSaver saver(config, "Geometry");
-    mThreadPref = config->readBoolEntry( "nestedMessages", false );
     // size of the mainwin
     QSize defaultSize(750,560);
     siz = config->readSizeEntry("MainWin", &defaultSize);
@@ -464,7 +467,6 @@
   QString s;
   KConfig *config = KMKernel::config();
   KConfigGroup geometry( config, "Geometry" );
-  KConfigGroup general( config, "General" );
 
   if (mMsgView)
     mMsgView->writeConfig();
@@ -629,7 +631,7 @@
           this, SLOT(slotFolderTreeColumnsChanged()));
 
   //Commands not worthy of menu items, but that deserve configurable keybindings
-  action = new KAction(
+  mRemoveDuplicatesAction = new KAction(
     i18n("Remove Duplicate Messages"), CTRL+Key_Asterisk, this,
     SLOT(removeDuplicates()), actionCollection(), "remove_duplicate_messages");
   action->plugAccel( actionCollection()->kaccel() );
@@ -856,7 +858,7 @@
 
     KMFolder *folder = kmkernel->findFolderById( *it );
 
-    if ( !folder->ignoreNewMail() ) {
+    if ( folder && !folder->ignoreNewMail() ) {
       showNotification = true;
       if ( GlobalSettings::self()->verboseNewMailNotification() ) {
         summary += "<br>" + i18n( "1 new message in %1",
@@ -1872,14 +1874,34 @@
   slotChangeCaption( mFolderTree->currentItem() );
 }
 
+void KMMainWidget::openFolder()
+{
+  if ( !mFolder || mFolder->folderType() != KMFolderTypeImap )
+    return;
+  KMFolderImap *imap = static_cast<KMFolderImap*>(mFolder->storage());
+  assert( !mOpenedImapFolder );
+  imap->open("mainwidget"); // will be closed in the folderSelected slot
+  mOpenedImapFolder = true;
+  // first get new headers before we select the folder
+  imap->setSelected( true );
+}
+
+void KMMainWidget::closeFolder()
+{
+  if ( !mFolder || mFolder->folderType() != KMFolderTypeImap )
+    return;
+  assert( mOpenedImapFolder );
+  KMFolderImap *imap = static_cast<KMFolderImap*>(mFolder->storage());
+  imap->setSelected( false );
+  mFolder->close( "mainwidget" );
+  mOpenedImapFolder = false;
+}
+
 //-----------------------------------------------------------------------------
 void KMMainWidget::folderSelected()
 {
   folderSelected( mFolder );
   updateFolderMenu();
-  // opened() before the getAndCheckFolder() in folderSelected
-  if ( mFolder && mFolder->folderType() == KMFolderTypeImap )
-    mFolder->close();
 }
 
 //-----------------------------------------------------------------------------
@@ -1907,7 +1929,7 @@
   bool newFolder = ( mFolder != aFolder );
   bool isNewImapFolder = aFolder && aFolder->folderType() == KMFolderTypeImap && newFolder;
   if( !mFolder
-      || ( !isNewImapFolder && mShowBusySplashTimer && !mShowBusySplashTimer->isActive() )
+      || ( !isNewImapFolder && mShowBusySplashTimer )
       || ( newFolder && mShowingOfflineScreen && !( isNewImapFolder && kmkernel->isOffline() ) ) ) {
     if ( mMsgView ) {
       mMsgView->enableMsgDisplay();
@@ -1935,8 +1957,14 @@
            this, SLOT( updateMarkAsReadAction() ) );
   }
 
+  if ( newFolder )
+      closeFolder();
+
   mFolder = aFolder;
 
+  if ( newFolder )
+    openFolder();
+
   if ( aFolder && aFolder->folderType() == KMFolderTypeImap )
   {
     if ( kmkernel->isOffline() ) {
@@ -1946,9 +1974,6 @@
     KMFolderImap *imap = static_cast<KMFolderImap*>(aFolder->storage());
     if ( newFolder && !mFolder->noContent() )
     {
-      imap->open(); // will be closed in the folderSelected slot
-      // first get new headers before we select the folder
-      imap->setSelected( true );
       connect( imap, SIGNAL( folderComplete( KMFolderImap*, bool ) ),
           this, SLOT( folderSelected() ) );
       imap->getAndCheckFolder();
@@ -2436,7 +2461,7 @@
   delete mCustomForwardMapper;
 
   mCustomForwardActionMenu =
-    new KActionMenu( i18n("Forward with custom template"),
+    new KActionMenu( i18n("Forward With Custom Template"),
                      "mail_custom_forward",
                      actionCollection(), "custom_forward" );
   QSignalMapper *mCustomForwardMapper = new QSignalMapper( this );
@@ -2445,7 +2470,7 @@
   mForwardActionMenu->insert( mCustomForwardActionMenu );
 
   mCustomReplyActionMenu =
-    new KActionMenu( i18n("Reply with custom template"), "mail_custom_reply",
+    new KActionMenu( i18n("Reply With Custom Template"), "mail_custom_reply",
                      actionCollection(), "custom_reply" );
   QSignalMapper *mCustomReplyMapper = new QSignalMapper( this );
   connect( mCustomReplyMapper, SIGNAL( mapped( int ) ),
@@ -2453,7 +2478,7 @@
   mReplyActionMenu->insert( mCustomReplyActionMenu );
 
   mCustomReplyAllActionMenu =
-    new KActionMenu( i18n("Reply to All with custom template"),
+    new KActionMenu( i18n("Reply to All With Custom Template"),
                      "mail_custom_reply_all",
                      actionCollection(), "custom_reply_all" );
   QSignalMapper *mCustomReplyAllMapper = new QSignalMapper( this );
@@ -2694,7 +2719,7 @@
 		      SLOT(slotMarkAll()), actionCollection(), "mark_all_messages" );
 
   //----- Folder Menu
-  (void) new KAction( i18n("&New Folder..."), "folder_new", 0, mFolderTree,
+  mNewFolderAction = new KAction( i18n("&New Folder..."), "folder_new", 0, mFolderTree,
 		      SLOT(addChildFolder()), actionCollection(), "new_folder" );
 
   mModifyFolderAction = new KAction( i18n("&Properties"), "configure", 0, this,
@@ -2724,10 +2749,10 @@
                                       actionCollection(), "refresh_folder" );
   mTroubleshootFolderAction = 0; // set in initializeIMAPActions
 
-  mEmptyFolderAction = new KAction( "foo", "edittrash", 0, this,
+  mEmptyFolderAction = new KAction( "foo" /*set in updateFolderMenu*/, "edittrash", 0, this,
 		      SLOT(slotEmptyFolder()), actionCollection(), "empty" );
 
-  mRemoveFolderAction = new KAction( "foo", "editdelete", 0, this,
+  mRemoveFolderAction = new KAction( "foo" /*set in updateFolderMenu*/, "editdelete", 0, this,
 		      SLOT(slotRemoveFolder()), actionCollection(), "delete_folder" );
 
   mPreferHtmlAction = new KToggleAction( i18n("Prefer &HTML to Plain Text"), 0, this,
@@ -2742,7 +2767,20 @@
   mThreadBySubjectAction = new KToggleAction( i18n("Thread Messages also by &Subject"), 0, this,
 		      SLOT(slotToggleSubjectThreading()), actionCollection(), "thread_messages_by_subject" );
 
+  new KAction( i18n("Copy Folder"), "editcopy", SHIFT+CTRL+Key_C, folderTree(),
+               SLOT(copyFolder()), actionCollection(), "copy_folder" );
+  new KAction( i18n("Cut Folder"), "editcut", SHIFT+CTRL+Key_X, folderTree(),
+               SLOT(cutFolder()), actionCollection(), "cut_folder" );
+  new KAction( i18n("Paste Folder"), "editpaste", SHIFT+CTRL+Key_V, folderTree(),
+               SLOT(pasteFolder()), actionCollection(), "paste_folder" );
 
+  new KAction( i18n("Copy Messages"), "editcopy", ALT+CTRL+Key_C, headers(),
+               SLOT(copyMessages()), actionCollection(), "copy_messages" );
+  new KAction( i18n("Cut Messages"), "editcut", ALT+CTRL+Key_X, headers(),
+               SLOT(cutMessages()), actionCollection(), "cut_messages" );
+  new KAction( i18n("Paste Messages"), "editpaste", ALT+CTRL+Key_V, headers(),
+               SLOT(pasteMessages()), actionCollection(), "paste_messages" );
+
   //----- Message Menu
   (void) new KAction( i18n("&New Message..."), "mail_new", KStdAccel::shortcut(KStdAccel::New), this,
 		      SLOT(slotCompose()), actionCollection(), "new_message" );
@@ -3127,6 +3165,7 @@
   initializeIMAPActions( false ); // don't set state, config not read yet
   updateMessageActions();
   updateCustomTemplateMenus();
+  updateFolderMenu();
 }
 
 //-----------------------------------------------------------------------------
@@ -3380,9 +3419,10 @@
 void KMMainWidget::updateFolderMenu()
 {
   bool folderWithContent = mFolder && !mFolder->noContent();
-  mModifyFolderAction->setEnabled( folderWithContent );
-  mFolderMailingListPropertiesAction->setEnabled( folderWithContent );
-  mCompactFolderAction->setEnabled( folderWithContent );
+  bool multiFolder = folderTree()->selectedFolders().count() > 1;
+  mModifyFolderAction->setEnabled( folderWithContent && !multiFolder );
+  mFolderMailingListPropertiesAction->setEnabled( folderWithContent && !multiFolder );
+  mCompactFolderAction->setEnabled( folderWithContent && !multiFolder );
 
   // This is the refresh-folder action in the menu. See kmfoldertree for the one in the RMB...
   bool imap = mFolder && mFolder->folderType() == KMFolderTypeImap;
@@ -3390,18 +3430,16 @@
   // For dimap, check that the imap path is known before allowing "check mail in this folder".
   bool knownImapPath = cachedImap && !static_cast<KMFolderCachedImap*>( mFolder->storage() )->imapPath().isEmpty();
   mRefreshFolderAction->setEnabled( folderWithContent && ( imap
-                                                           || ( cachedImap && knownImapPath ) ) );
+                                                           || ( cachedImap && knownImapPath ) ) && !multiFolder );
   if ( mTroubleshootFolderAction )
-    mTroubleshootFolderAction->setEnabled( folderWithContent && ( cachedImap && knownImapPath ) );
-  mEmptyFolderAction->setEnabled( folderWithContent && ( mFolder->count() > 0 ) && !mFolder->isReadOnly() );
+    mTroubleshootFolderAction->setEnabled( folderWithContent && ( cachedImap && knownImapPath ) && !multiFolder );
+  mEmptyFolderAction->setEnabled( folderWithContent && ( mFolder->count() > 0 ) && !mFolder->isReadOnly() && !multiFolder );
   mEmptyFolderAction->setText( (mFolder && kmkernel->folderIsTrash(mFolder))
     ? i18n("E&mpty Trash") : i18n("&Move All Messages to Trash") );
-  mRemoveFolderAction->setEnabled( mFolder && !mFolder->isSystemFolder() && !mFolder->isReadOnly() );
-  if(mFolder) {
-    mRemoveFolderAction->setText( mFolder->folderType() == KMFolderTypeSearch
+  mRemoveFolderAction->setEnabled( mFolder && !mFolder->isSystemFolder() && !mFolder->isReadOnly() && !multiFolder);
+  mRemoveFolderAction->setText( mFolder && mFolder->folderType() == KMFolderTypeSearch
         ? i18n("&Delete Search") : i18n("&Delete Folder") );
-  }
-  mExpireFolderAction->setEnabled( mFolder && mFolder->isAutoExpire() );
+  mExpireFolderAction->setEnabled( mFolder && mFolder->isAutoExpire() && !multiFolder );
   updateMarkAsReadAction();
   // the visual ones only make sense if we are showing a message list
   mPreferHtmlAction->setEnabled( mHeaders->folder() ? true : false );
@@ -3415,6 +3453,10 @@
   mThreadBySubjectAction->setEnabled(
       mHeaders->folder() ? ( mThreadMessagesAction->isChecked()) : false );
   mThreadBySubjectAction->setChecked( mFolderThreadSubjPref );
+
+  mNewFolderAction->setEnabled( !multiFolder );
+  mRemoveDuplicatesAction->setEnabled( !multiFolder );
+  mFolderShortCutCommandAction->setEnabled( !multiFolder );
 }
 
 
@@ -3465,6 +3507,7 @@
 
   mMsgView->displayAboutPage();
 
+  closeFolder();
   mFolder = 0;
 }
 
@@ -3533,7 +3576,7 @@
   QMap< QString, QValueList<int> > idMD5s;
   QValueList<int> redundantIds;
   QValueList<int>::Iterator kt;
-  mFolder->open();
+  mFolder->open("removedups");
   for (int i = mFolder->count() - 1; i >= 0; --i) {
     QString id = (*mFolder)[i]->msgIdMD5();
     if ( !id.isEmpty() ) {
@@ -3572,7 +3615,7 @@
   }
   while (kt != redundantIds.begin());
 
-  mFolder->close();
+  mFolder->close("removedups");
   mHeaders->setFolder(oFolder);
   QString msg;
   if ( numDuplicates )
@@ -3743,34 +3786,66 @@
 }
 
 //-----------------------------------------------------------------------------
-void KMMainWidget::slotSubscriptionDialog()
+QString KMMainWidget::findCurrentImapPath()
 {
-  if (!mFolder) return;
-
-  if ( !kmkernel->askToGoOnline() ) {
-    return;
+  QString startPath;
+  if (!mFolder) return startPath;
+  if (mFolder->folderType() == KMFolderTypeImap)
+  {
+    startPath = static_cast<KMFolderImap*>(mFolder->storage())->imapPath();
+  } else if (mFolder->folderType() == KMFolderTypeCachedImap)
+  {
+    startPath = static_cast<KMFolderCachedImap*>(mFolder->storage())->imapPath();
   }
+  return startPath;
+}
 
-  ImapAccountBase* account;
-  QString startPath;
+//-----------------------------------------------------------------------------
+ImapAccountBase* KMMainWidget::findCurrentImapAccountBase()
+{
+  ImapAccountBase* account = 0;
+  if (!mFolder) return account;
   if (mFolder->folderType() == KMFolderTypeImap)
   {
-    startPath = static_cast<KMFolderImap*>(mFolder->storage())->imapPath();
     account = static_cast<KMFolderImap*>(mFolder->storage())->account();
   } else if (mFolder->folderType() == KMFolderTypeCachedImap)
   {
-    startPath = static_cast<KMFolderCachedImap*>(mFolder->storage())->imapPath();
     account = static_cast<KMFolderCachedImap*>(mFolder->storage())->account();
-  } else
+  }
+  return account;
+}
+
+//-----------------------------------------------------------------------------
+void KMMainWidget::slotSubscriptionDialog()
+{
+  if ( !kmkernel->askToGoOnline() )
     return;
+  ImapAccountBase* account = findCurrentImapAccountBase();
+  if ( !account ) return;
+  const QString startPath = findCurrentImapPath();
 
+  // KSubscription sets "DestruciveClose"
+  SubscriptionDialog * dialog =
+      new SubscriptionDialog(this, i18n("Subscription"), account, startPath);
+  if ( dialog->exec() ) {
+    // start a new listing
+    if (mFolder->folderType() == KMFolderTypeImap)
+      static_cast<KMFolderImap*>(mFolder->storage())->account()->listDirectory();
+  }
+}
+
+//-----------------------------------------------------------------------------
+void KMMainWidget::slotLocalSubscriptionDialog()
+{
+  ImapAccountBase* account = findCurrentImapAccountBase();
   if ( !account ) return;
 
-  SubscriptionDialog *dialog = new SubscriptionDialog(this,
-      i18n("Subscription"),
-      account, startPath);
-  // start a new listing
+  const QString startPath = findCurrentImapPath();
+  // KSubscription sets "DestruciveClose"
+  LocalSubscriptionDialog *dialog =
+      new LocalSubscriptionDialog(this, i18n("Local Subscription"), account, startPath);
   if ( dialog->exec() ) {
+    // start a new listing
     if (mFolder->folderType() == KMFolderTypeImap)
       static_cast<KMFolderImap*>(mFolder->storage())->account()->listDirectory();
   }
Index: kmail/imapjob.cpp
===================================================================
--- kmail/imapjob.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kmail/imapjob.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -84,12 +84,12 @@
   mDestFolder = folder? folder->folder() : 0;
   // refcount++
   if (folder) {
-    folder->open();
+    folder->open("imapjobdest");
   }
   KMFolder *msg_parent = msg->parent();
   if (msg_parent) {
     if (!folder || folder!= msg_parent->storage()) {
-      msg_parent->open();
+      msg_parent->open("imapjobsrc");
     }
   }
   mSrcFolder = msg_parent;
@@ -241,7 +241,7 @@
       }
       account->mJobList.remove( this );
     }
-    mDestFolder->close();
+    mDestFolder->close("imapjobdest");
   }
 
   if ( mSrcFolder ) {
@@ -266,7 +266,7 @@
         account->mJobList.remove( this ); // remove the folderjob
       }
     }
-    mSrcFolder->close();
+    mSrcFolder->close("imapjobsrc");
   }
 }
 
@@ -502,6 +502,12 @@
 void ImapJob::slotPutMessageDataReq( KIO::Job *job, QByteArray &data )
 {
   KMAcctImap *account = static_cast<KMFolderImap*>(mDestFolder->storage())->account();
+  if ( !account )
+  {
+    emit finished();
+    deleteLater();
+    return;
+  }
   ImapAccountBase::JobIterator it = account->findJob( job );
   if ( it == account->jobsEnd() ) return;
 
@@ -522,6 +528,12 @@
 void ImapJob::slotPutMessageResult( KIO::Job *job )
 {
   KMAcctImap *account = static_cast<KMFolderImap*>(mDestFolder->storage())->account();
+  if ( !account )
+  {
+    emit finished();
+    deleteLater();
+    return;
+  }
   ImapAccountBase::JobIterator it = account->findJob( job );
   if ( it == account->jobsEnd() ) return;
   bool deleteMe = false;
@@ -562,6 +574,12 @@
 {
   KMFolderImap * imapFolder = static_cast<KMFolderImap*>(mDestFolder->storage());
   KMAcctImap *account = imapFolder->account();
+  if ( !account )
+  {
+    emit finished();
+    deleteLater();
+    return;
+  }
   ImapAccountBase::JobIterator it = account->findJob( job );
   if ( it == account->jobsEnd() ) return;
 
@@ -595,6 +613,12 @@
 {
   KMFolderImap * imapFolder = static_cast<KMFolderImap*>(mDestFolder->storage());
   KMAcctImap *account = imapFolder->account();
+  if ( !account )
+  {
+    emit finished();
+    deleteLater();
+    return;
+  }
   ImapAccountBase::JobIterator it = account->findJob( job );
   if ( it == account->jobsEnd() ) return;
 
@@ -613,6 +637,12 @@
 void ImapJob::slotCopyMessageResult( KIO::Job *job )
 {
   KMAcctImap *account = static_cast<KMFolderImap*>(mDestFolder->storage())->account();
+  if ( !account )
+  {
+    emit finished();
+    deleteLater();
+    return;
+  }
   ImapAccountBase::JobIterator it = account->findJob( job );
   if ( it == account->jobsEnd() ) return;
 
Index: kmail/avscripts/kmail_clamav.sh
===================================================================
--- kmail/avscripts/kmail_clamav.sh	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kmail/avscripts/kmail_clamav.sh	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -39,7 +39,7 @@
     chmod a+r $TEMPFILE
     CLAMCOMANDO="clamdscan --stdout --no-summary "
 else
-    CLAMCOMANDO="clamscan --stdout --no-summary --mbox"
+    CLAMCOMANDO="clamscan --stdout --no-summary"
 fi
 
 # analyze the message
Index: kmail/messagecopyhelper.cpp
===================================================================
--- kmail/messagecopyhelper.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 0)
+++ kmail/messagecopyhelper.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -0,0 +1,101 @@
+/*
+    Copyright (c) 2007 Volker Krause <vkrause@kde.org>
+
+    This library is free software; you can redistribute it and/or modify it
+    under the terms of the GNU Library General Public License as published by
+    the Free Software Foundation; either version 2 of the License, or (at your
+    option) any later version.
+
+    This library is distributed in the hope that it will be useful, but WITHOUT
+    ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
+    FITNESS FOR A PARTICULAR PURPOSE.  See the GNU Library General Public
+    License for more details.
+
+    You should have received a copy of the GNU Library General Public License
+    along with this library; see the file COPYING.LIB.  If not, write to the
+    Free Software Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA
+    02110-1301, USA.
+*/
+
+#include "messagecopyhelper.h"
+
+#include "kmcommands.h"
+#include "kmfolder.h"
+#include "kmmsgdict.h"
+
+using namespace KMail;
+using namespace KPIM;
+
+MessageCopyHelper::MessageCopyHelper( const QValueList< Q_UINT32 > & msgs,
+                                      KMFolder * dest, bool move, QObject * parent ) :
+    QObject( parent )
+{
+  if ( msgs.isEmpty() || !dest )
+    return;
+
+  KMFolder *f = 0;
+  int index;
+  QPtrList<KMMsgBase> list;
+
+  for ( QValueList<Q_UINT32>::ConstIterator it = msgs.constBegin(); it != msgs.constEnd(); ++it ) {
+    KMMsgDict::instance()->getLocation( *it, &f, &index );
+    if ( !f ) // not found
+      continue;
+    if ( f == dest )
+      continue; // already there
+    if ( !mOpenFolders.contains( f ) ) {// not yet opened
+      f->open("messagecopyhelper");
+      mOpenFolders.insert( f, 0 );
+    }
+    KMMsgBase *msgBase = f->getMsgBase( index );
+    if ( msgBase )
+      list.append( msgBase );
+  }
+
+  if ( list.isEmpty() )
+    return; // nothing to do
+
+  KMCommand *command;
+  if ( move ) {
+    command = new KMMoveCommand( dest, list );
+  } else {
+    command = new KMCopyCommand( dest, list );
+  }
+
+  connect( command, SIGNAL(completed(KMCommand*)), SLOT(copyCompleted(KMCommand*)) );
+  command->start();
+}
+
+void MessageCopyHelper::copyCompleted(KMCommand * cmd)
+{
+  Q_UNUSED( cmd );
+
+  // close all folders we opened
+  for ( QMap<QGuardedPtr<KMFolder>, int>::ConstIterator it = mOpenFolders.constBegin();
+        it != mOpenFolders.constEnd(); ++it ) {
+    it.key()->close("messagecopyhelper");
+  }
+  mOpenFolders.clear();
+  deleteLater();
+}
+
+QValueList< Q_UINT32 > MessageCopyHelper::serNumListFromMailList(const KPIM::MailList & list)
+{
+  QValueList<Q_UINT32> rv;
+  for ( MailList::ConstIterator it = list.constBegin(); it != list.constEnd(); ++it )
+    rv.append( (*it).serialNumber() );
+  return rv;
+}
+
+QValueList< Q_UINT32 > MessageCopyHelper::serNumListFromMsgList(QPtrList< KMMsgBase > list)
+{
+  QValueList<Q_UINT32> rv;
+  KMMsgBase* msg = list.first();
+  while( msg ) {
+    rv.append( msg->getMsgSerNum() );
+    msg = list.next();
+  }
+  return rv;
+}
+
+#include "messagecopyhelper.moc"
Index: kmail/kmcomposewin.h
===================================================================
--- kmail/kmcomposewin.h	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kmail/kmcomposewin.h	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -284,6 +284,7 @@
   void slotPasteAsAttachment();
   void slotAddQuotes();
   void slotRemoveQuotes();
+  void slotAttachPNGImageData(const QByteArray &image);
 
   void slotMarkAll();
 
@@ -462,12 +463,6 @@
   void addAttach(const KMMessagePart* msgPart);
 
 private:
-  /**
-   * Add an image from the clipboard as attachment
-   */
-  void addImageFromClipboard();
-
-private:
   const KPIM::Identity & identity() const;
   uint identityUid() const;
   Kleo::CryptoMessageFormat cryptoMessageFormat() const;
@@ -838,6 +833,15 @@
 
   QPopupMenu *mActNowMenu;
   QPopupMenu *mActLaterMenu;
+
+  /** If the message in this composer has a cursor position set (for
+   *   instance because it comes from a template containing %CURSOR)
+   *   then we need to preserve that cursor position even when auto-
+   *   appending (or prepending) the signature during composer setup.
+   *   Set to true *once* (and only in setMsg() at that) to avoid
+   *   accidentally moving the cursor.
+   */
+  bool mPreserveUserCursorPosition;
 };
 
 #endif
Index: kmail/kmfiltermgr.cpp
===================================================================
--- kmail/kmfiltermgr.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kmail/kmfiltermgr.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -239,7 +239,7 @@
     }
     bool opened = folder->isOpened();
     if ( !opened )
-      folder->open();
+      folder->open("filtermgr");
     KMMsgBase *msgBase = folder->getMsgBase( idx );
     bool unGet = !msgBase->isMessage();
     KMMessage *msg = folder->getMsg( idx );
@@ -248,14 +248,14 @@
       if ( unGet )
         folder->unGetMsg( idx );
       if ( !opened )
-        folder->close();
+        folder->close("filtermgr");
       return 1;
     }
     if ( filter->execActions( msg, stopIt ) == KMFilter::CriticalError ) {
       if ( unGet )
         folder->unGetMsg( idx );
       if ( !opened )
-        folder->close();
+        folder->close("filtermgr");
       return 2;
     }
 
@@ -271,7 +271,7 @@
     if ( unGet )
       folder->unGetMsg( idx );
     if ( !opened )
-      folder->close();
+      folder->close("filtermgr");
   } else {
     result = 1;
   }
@@ -423,7 +423,7 @@
     return;
   QValueVector< KMFolder *>::const_iterator it;
   for ( it = mOpenFolders.constBegin(); it != mOpenFolders.constEnd(); ++it )
-    (*it)->close();
+    (*it)->close("filtermgr");
   mOpenFolders.clear();
 }
 
@@ -433,7 +433,7 @@
 {
   assert( aFolder );
 
-  int rc = aFolder->open();
+  int rc = aFolder->open("filermgr");
   if (rc) return rc;
 
   mOpenFolders.append( aFolder );
Index: kmail/kmsender_p.h
===================================================================
--- kmail/kmsender_p.h	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kmail/kmsender_p.h	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -6,7 +6,6 @@
 #define __KMAIL_SENDER_P_H__
 #include "kmsender.h"
 
-#include <qcstring.h>
 #include <qstring.h>
 #include <qstringlist.h>
 #include <qobject.h>
@@ -33,7 +32,7 @@
   void start() { emit started( doStart() ); }
 
   /** Send given message. May return before message is sent. */
-  bool send( const QString & sender, const QStringList & to, const QStringList & cc, const QStringList & bcc, const QCString & message ) {
+  bool send( const QString & sender, const QStringList & to, const QStringList & cc, const QStringList & bcc, const QByteArray & message ) {
     reset(); return doSend( sender, to, cc, bcc, message );
   }
 
@@ -72,7 +71,7 @@
 
 private:
   virtual void doFinish() = 0;
-  virtual bool doSend( const QString & sender, const QStringList & to, const QStringList & cc, const QStringList & bcc, const QCString & message ) = 0;
+  virtual bool doSend( const QString & sender, const QStringList & to, const QStringList & cc, const QStringList & bcc, const QByteArray & message ) = 0;
   virtual bool doStart() = 0;
 
 protected:
@@ -102,12 +101,12 @@
   /** implemented from KMSendProc */
   void doFinish();
   /** implemented from KMSendProc */
-  bool doSend( const QString & sender, const QStringList & to, const QStringList & cc, const QStringList & bcc, const QCString & message );
+  bool doSend( const QString & sender, const QStringList & to, const QStringList & cc, const QStringList & bcc, const QByteArray & message );
   /** implemented from KMSendProc */
   bool doStart();
 
 private:
-  QCString mMsgStr;
+  QByteArray mMsgStr;
   char* mMsgPos;
   int mMsgRest;
   KProcess* mMailerProc;
@@ -132,14 +131,14 @@
   /** implemented from KMSendProc */
   void doFinish();
   /** implemented from KMSendProc */
-  bool doSend( const QString & sender, const QStringList & to, const QStringList & cc, const QStringList & bcc, const QCString & message );
+  bool doSend( const QString & sender, const QStringList & to, const QStringList & cc, const QStringList & bcc, const QByteArray & message );
   /** implemented from KMSendProc */
   bool doStart() { return true; }
 
   void cleanup();
 
 private:
-  QCString mMessage;
+  QByteArray mMessage;
   uint mMessageLength;
   uint mMessageOffset;
 
Index: kmail/kmcommands.h
===================================================================
--- kmail/kmcommands.h	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kmail/kmcommands.h	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -28,7 +28,10 @@
 class KMReaderWin;
 class partNode;
 namespace KIO { class Job; }
-namespace KMail { class Composer; }
+namespace KMail {
+  class Composer;
+  class FolderJob;
+}
 namespace GpgME { class Error; }
 namespace Kleo { class SpecialJob; }
 
@@ -733,18 +736,16 @@
   KMCopyCommand( KMFolder* destFolder, KMMessage *msg );
 
 protected slots:
-  void slotMsgAdded( KMFolder*, Q_UINT32 );
+  void slotJobFinished( KMail::FolderJob *job );
 
-  void slotFolderComplete();
+  void slotFolderComplete( KMFolderImap*, bool success );
 
 private:
   virtual Result execute();
 
   KMFolder *mDestFolder;
   QPtrList<KMMsgBase> mMsgList;
-  // List of serial numbers that need to be loaded
-  // Ticked off as they come in via msgAdded signals.
-  QValueList<Q_UINT32> mWaitingForMsgs;
+  QValueList<KMail::FolderJob*> mPendingJobs;
 };
 
 namespace KPIM {
Index: kmail/imapaccountbase.h
===================================================================
--- kmail/imapaccountbase.h	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kmail/imapaccountbase.h	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -24,6 +24,8 @@
 #ifndef __KMAIL_IMAPACCOUNTBASE_H__
 #define __KMAIL_IMAPACCOUNTBASE_H__
 
+#include <set>
+
 #include "networkaccount.h"
 
 #include <qtimer.h>
@@ -49,6 +51,7 @@
 
 namespace KMail {
   struct ACLListEntry;
+  struct QuotaInfo;
   typedef QValueVector<KMail::ACLListEntry> ACLList;
 
   class AttachmentStrategy;
@@ -79,6 +82,11 @@
     bool onlySubscribedFolders() const { return mOnlySubscribedFolders; }
     virtual void setOnlySubscribedFolders( bool show );
 
+    /** @return whether to show only locally subscribed folders */
+    bool onlyLocallySubscribedFolders() const { return mOnlyLocallySubscribedFolders; }
+    virtual void setOnlyLocallySubscribedFolders( bool show );
+
+
     /** @return whether to load attachments on demand */
     bool loadOnDemand() const { return mLoadOnDemand; }
     virtual void setLoadOnDemand( bool load );
@@ -185,7 +193,20 @@
      */
     void changeSubscription(bool subscribe, const QString& imapPath);
 
+    /** 
+     * Returns whether the account is locally subscribed to the
+     * folder @param imapPath. No relation to server side subscription above.
+     */
+    bool locallySubscribedTo( const QString& imapPath );
+
     /**
+     * Locally subscribe (@p subscribe = TRUE) / Unsubscribe the folder
+     * identified by @p imapPath.
+     */
+    void changeLocalSubscription( const QString& imapPath, bool subscribe );
+
+
+    /**
      * Retrieve the users' right on the folder
      * identified by @p folder and @p imapPath.
      * Emits receivedUserRights signal on success/error.
@@ -200,6 +221,13 @@
     void getACL( KMFolder* folder, const QString& imapPath );
 
     /**
+     * Retrieve the the quota inforamiton on the folder
+     * identified by @p imapPath.
+     * Emits receivedQuotaInfo signal on success/error.
+     */
+    void getStorageQuotaInfo( KMFolder* folder, const QString& imapPath );
+
+    /**
      * Set the status on the server
      * Emits imapStatusChanged signal on success/error.
      */
@@ -273,6 +301,17 @@
     void setHasNoAnnotationSupport() { mAnnotationSupport = false; }
 
     /**
+     * Returns false if the IMAP server for this account doesn't support quotas.
+     * (and true if it does, or if we didn't try yet).
+     */
+    bool hasQuotaSupport() const { return mQuotaSupport; }
+
+    /**
+     * Called if the quota command failed due to 'unsupported'
+     */
+    void setHasNoQuotaSupport() { mQuotaSupport = false; }
+
+    /**
      * React to an error from the job. Uses job->error and job->errorString and calls
      * the protected virtual handleJobError with them. See handleError below for details.
      */
@@ -400,6 +439,9 @@
     /// Result of getACL() job
     void slotGetACLResult( KIO::Job* _job );
 
+    /// Result of getStorageQuotaInfo() job
+    void slotGetStorageQuotaInfoResult( KIO::Job* _job );
+
     /**
      * Send a NOOP command regularly to keep the slave from disconnecting
      */
@@ -467,6 +509,9 @@
     /** Migrate the prefix */
     void migratePrefix();
 
+    // used for writing the blacklist out to the config file
+    QStringList locallyBlacklistedFolders() const;
+    void localBlacklistFromStringList( const QStringList & );
 
   protected:
     QPtrList<QGuardedPtr<KMFolder> > mOpenFolders;
@@ -482,6 +527,7 @@
     bool mAutoExpunge : 1;
     bool mHiddenFolders : 1;
     bool mOnlySubscribedFolders : 1;
+    bool mOnlyLocallySubscribedFolders : 1;
     bool mLoadOnDemand : 1;
     bool mListOnlyOpenFolders : 1;
     bool mProgressEnabled : 1;
@@ -490,6 +536,7 @@
     bool mPasswordDialogIsActive : 1;
     bool mACLSupport : 1;
     bool mAnnotationSupport : 1;
+    bool mQuotaSupport : 1;
     bool mSlaveConnected : 1;
     bool mSlaveConnectionError : 1;
     bool mCheckingSingleFolder : 1;
@@ -517,6 +564,8 @@
     // capabilities
     QStringList mCapabilities;
 
+    std::set<QString> mLocalSubscriptionBlackList;
+
   signals:
     /**
      * Emitted when the slave managed or failed to connect
@@ -556,6 +605,16 @@
     void receivedACL( KMFolder* folder, KIO::Job* job, const KMail::ACLList& entries );
 
     /**
+     * Emitted when the getQuotaInfo job is done,
+     * as a result of a getQuotaInfo call.
+     * @param folder The folder for which we were getting quota info (can be 0)
+     * @param job The job that was used for doing so (can be used to display errors)
+     * @param info The quota information for this folder. Make your copy of it,
+     * it comes from the job.
+     */
+    void receivedStorageQuotaInfo( KMFolder* folder, KIO::Job* job, const KMail::QuotaInfo& entries );
+
+    /**
      * Emitted when we got the namespaces
      */
     void namespacesFetched( const ImapAccountBase::nsDelimMap& );
Index: kmail/kmfilteraction.cpp
===================================================================
--- kmail/kmfilteraction.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kmail/kmfilteraction.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -22,6 +22,7 @@
 #include <libkdepim/kfileio.h>
 #include <libkdepim/collectingprocess.h>
 using KPIM::CollectingProcess;
+#include <mimelib/message.h>
 #include "kmfawidgets.h"
 #include "folderrequester.h"
 using KMail::FolderRequester;
@@ -1377,18 +1378,18 @@
   // TODO opening and closing the folder is a trade off.
   // Perhaps Copy is a seldomly used action for now,
   // but I gonna look at improvements ASAP.
-  if ( !mFolder && mFolder->open() != 0 )
+  if ( !mFolder || mFolder->open( "filtercopy" ) != 0 ) {
     return ErrorButGoOn;
+  }
 
   // copy the message 1:1
-  KMMessage* msgCopy = new KMMessage;
-  msgCopy->fromDwString(msg->asDwString());
+  KMMessage* msgCopy = new KMMessage( new DwMessage( *msg->asDwMessage() ) );
 
   int index;
   int rc = mFolder->addMsg(msgCopy, &index);
   if (rc == 0 && index != -1)
     mFolder->unGetMsg( index );
-  mFolder->close();
+  mFolder->close("filtercopy");
 
   return GoOn;
 }
@@ -1454,11 +1455,11 @@
   msg->initFromMessage( aMsg );
 
   // QString st = QString::fromUtf8( aMsg->createForwardBody() );
-  
-  TemplateParser parser( msg, TemplateParser::Forward, 
+
+  TemplateParser parser( msg, TemplateParser::Forward,
     aMsg->body(), false, false, false, false);
   parser.process( aMsg );
-  
+
   QCString
     encoding = KMMsgBase::autoDetectCharset( aMsg->charset(),
                                              KMMessage::preferredCharsets(),
Index: kmail/kmcomposewin.cpp
===================================================================
--- kmail/kmcomposewin.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kmail/kmcomposewin.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -176,7 +176,8 @@
     mEncryptWithChiasmus( false ),
     mComposer( 0 ),
     mLabelWidth( 0 ),
-    mAutoSaveTimer( 0 ), mLastAutoSaveErrno( 0 )
+    mAutoSaveTimer( 0 ), mLastAutoSaveErrno( 0 ),
+    mPreserveUserCursorPosition( false )
 {
   mClassicalRecipients = GlobalSettings::self()->recipientsEditorType() ==
     GlobalSettings::EnumRecipientsEditorType::Classic;
@@ -379,6 +380,8 @@
     this, SLOT (slotSpellcheckDone (int)));
   connect (mEditor, SIGNAL( pasteImage() ),
     this, SLOT (slotPaste() ) );
+  connect (mEditor, SIGNAL( attachPNGImageData(const QByteArray &) ),
+    this, SLOT ( slotAttachPNGImageData(const QByteArray &) ) );
   connect (mEditor, SIGNAL( focusChanged(bool) ),
     this, SLOT (editorFocusChanged(bool)) );
 
@@ -476,9 +479,13 @@
   if (!data.isEmpty()) {
     KMMessagePart *msgPart = new KMMessagePart;
     msgPart->setName(name);
-    QValueList<int> dummy;
-    msgPart->setBodyAndGuessCte(data, dummy,
-                                kmkernel->msgSender()->sendQuotedPrintable());
+    if( type == "message" && subType == "rfc822" ) {
+       msgPart->setMessageBody( data );
+    } else {
+       QValueList<int> dummy;
+       msgPart->setBodyAndGuessCte(data, dummy,
+              kmkernel->msgSender()->sendQuotedPrintable());
+    }
     msgPart->setTypeStr(type);
     msgPart->setSubtypeStr(subType);
     msgPart->setParameter(paramAttr,paramValue);
@@ -486,33 +493,21 @@
     addAttach(msgPart);
   }
 }
+
 //-----------------------------------------------------------------------------
-void KMComposeWin::addImageFromClipboard()
+void KMComposeWin::slotAttachPNGImageData(const QByteArray &image)
 {
   bool ok;
-  QFile *tmpFile;
 
   QString attName = KInputDialog::getText( "KMail", i18n("Name of the attachment:"), QString::null, &ok, this );
   if ( !ok )
     return;
 
-  mTempDir = new KTempDir();
-  mTempDir->setAutoDelete( true );
+  if ( !attName.lower().endsWith(".png") ) attName += ".png";
 
-  if ( attName.lower().endsWith(".png") )
-    tmpFile = new QFile(mTempDir->name() + attName );
-  else
-    tmpFile = new QFile(mTempDir->name() + attName + ".png" );
+  addAttachment( attName, "base64", image, "image", "png", QCString(), QString(), QCString() );
+}
 
-  if ( !QApplication::clipboard()->image().save( tmpFile->name(), "PNG" ) ) {
-    KMessageBox::error( this, i18n("Unknown error trying to save image."), i18n("Attaching Image Failed") );
-    delete mTempDir;
-    mTempDir = 0;
-    return;
-  }
-
-  addAttach( tmpFile->name() );
-}
 //-----------------------------------------------------------------------------
 void KMComposeWin::setBody(QString body)
 {
@@ -706,8 +701,8 @@
   if ( status == 0 ) { // no error
     kdDebug(5006) << "autosaving message in " << filename << endl;
     int fd = autoSaveFile.handle();
-    QCString msgStr = msg->asString();
-    if ( ::write( fd, msgStr, msgStr.length() ) == -1 )
+    const DwString& msgStr = msg->asDwString();
+    if ( ::write( fd, msgStr.data(), msgStr.length() ) == -1 )
       status = errno;
   }
   if ( status == 0 ) {
@@ -1701,6 +1696,7 @@
       return;
     }
   mMsg = newMsg;
+  KPIM::IdentityManager * im = kmkernel->identityManager();
 
   mEdtFrom->setText(mMsg->from());
   mEdtReplyTo->setText(mMsg->replyTo());
@@ -1712,6 +1708,7 @@
     mRecipientsEditor->setRecipientString( mMsg->to(), Recipient::To );
     mRecipientsEditor->setRecipientString( mMsg->cc(), Recipient::Cc );
     mRecipientsEditor->setRecipientString( mMsg->bcc(), Recipient::Bcc );
+    mRecipientsEditor->setFocusBottom();
   }
   mEdtSubject->setText(mMsg->subject());
 
@@ -1733,10 +1730,14 @@
     // make sure the header values are overwritten with the values of the
     // sticky identity (the slot isn't called by the signal for new messages
     // since the identity has already been set before the signal was connected)
-    slotIdentityChanged( mId );
+    uint savedId = mId;
+    if ( !newMsg->headerField("X-KMail-Identity").isEmpty() )
+      mId = newMsg->headerField("X-KMail-Identity").stripWhiteSpace().toUInt();
+    else
+      mId = im->defaultIdentity().uoid();
+    slotIdentityChanged( savedId );
   }
 
-  KPIM::IdentityManager * im = kmkernel->identityManager();
 
   const KPIM::Identity & ident = im->identityForUoid( mIdentity->currentIdentity() );
 
@@ -1839,20 +1840,32 @@
 
   mEditor->setText( otp.textualContent() );
   mCharset = otp.textualContentCharset();
-  if ( mCharset.isEmpty() )
-    mCharset = mMsg->charset();
-  if ( mCharset.isEmpty() )
-    mCharset = mDefCharset;
-  setCharset( mCharset );
-
   if ( partNode * n = root->findType( DwMime::kTypeText, DwMime::kSubtypeHtml ) )
     if ( partNode * p = n->parentNode() )
       if ( p->hasType( DwMime::kTypeMultipart ) &&
            p->hasSubType( DwMime::kSubtypeAlternative ) )
         if ( mMsg->headerField( "X-KMail-Markup" ) == "true" ) {
           toggleMarkup( true );
-          mEditor->setText(n->encodedBody() );
+
+          // get cte decoded body part
+          mCharset = n->msgPart().charset();
+          QCString bodyDecoded = n->msgPart().bodyDecoded();
+
+          // respect html part charset
+          const QTextCodec *codec = KMMsgBase::codecForName( mCharset );
+          if ( codec ) {
+            mEditor->setText( codec->toUnicode( bodyDecoded ) );
+          } else {
+            mEditor->setText( QString::fromLocal8Bit( bodyDecoded ) );
+          }
         }
+
+  if ( mCharset.isEmpty() )
+    mCharset = mMsg->charset();
+  if ( mCharset.isEmpty() )
+    mCharset = mDefCharset;
+  setCharset( mCharset );
+
   /* Handle the special case of non-mime mails */
   if ( mMsg->numBodyParts() == 0 && otp.textualContent().isEmpty() ) {
     mCharset=mMsg->charset();
@@ -1870,8 +1883,6 @@
     } else
       mEditor->setText(QString::fromLocal8Bit(bodyDecoded));
   }
-
-
 #ifdef BROKEN_FOR_OPAQUE_SIGNED_OR_ENCRYPTED_MAILS
   const int num = mMsg->numBodyParts();
   kdDebug(5006) << "KMComposeWin::setMsg() mMsg->numBodyParts="
@@ -1973,6 +1984,12 @@
     //
     QTimer::singleShot( 200, this, SLOT(slotAppendSignature()) );
   }
+
+  if ( mMsg->getCursorPos() > 0 ) {
+    // The message has a cursor position explicitly set, so avoid
+    // changing it when appending the signature.
+    mPreserveUserCursorPosition = true;
+  }
   setModified( isModified );
 
   // do this even for new messages
@@ -2034,6 +2051,8 @@
     return false;
   if ( kmkernel->shuttingDown() || kapp->sessionSaving() )
     return true;
+  if ( mComposer && mComposer->isPerformingSignOperation() ) // since the non-gpg-agent gpg plugin gets a passphrase using QDialog::exec()
+    return false;                                            // the user can try to close the window, which destroys mComposer mid-call.
 
   if ( isModified() ) {
     bool istemplate = ( mFolder!=0 && mFolder->isTemplates() );
@@ -2637,9 +2656,15 @@
   msgPart = new KMMessagePart;
   msgPart->setName(name);
   QValueList<int> allowedCTEs;
-  msgPart->setBodyAndGuessCte((*it).data, allowedCTEs,
-                              !kmkernel->msgSender()->sendQuotedPrintable());
-  kdDebug(5006) << "autodetected cte: " << msgPart->cteStr() << endl;
+  if ( mimeType == "message/rfc822" ) {
+    msgPart->setMessageBody( (*it).data );
+    allowedCTEs << DwMime::kCte7bit;
+    allowedCTEs << DwMime::kCte8bit;
+  } else {
+    msgPart->setBodyAndGuessCte((*it).data, allowedCTEs,
+                               !kmkernel->msgSender()->sendQuotedPrintable());
+    kdDebug(5006) << "autodetected cte: " << msgPart->cteStr() << endl;
+  }
   int slash = mimeType.find( '/' );
   if( slash == -1 )
     slash = mimeType.length();
@@ -3375,7 +3400,11 @@
     return;
   }
 
-  if ( QApplication::clipboard()->image().isNull() )  {
+  QMimeSource *mimeSource = QApplication::clipboard()->data();
+  if ( QImageDrag::canDecode(mimeSource) ) {
+    slotAttachPNGImageData(mimeSource->encodedData("image/png"));
+  }
+  else {
     bool ok;
     QString attName = KInputDialog::getText( "KMail", i18n("Name of the attachment:"), QString::null, &ok, this );
     if ( !ok )
@@ -3387,9 +3416,6 @@
                                 kmkernel->msgSender()->sendQuotedPrintable());
     addAttach(msgPart);
   }
-  else
-    addImageFromClipboard();
-
 }
 
 void KMComposeWin::slotAddQuotes()
@@ -3522,8 +3548,9 @@
   QWidget* fw = focusWidget();
   if (!fw) return;
 
-  if ( ! QApplication::clipboard()->image().isNull() )  {
-    addImageFromClipboard();
+  QMimeSource *mimeSource = QApplication::clipboard()->data();
+  if ( mimeSource->provides("image/png") )  {
+    slotAttachPNGImageData(mimeSource->encodedData("image/png"));
   }
   else {
 
@@ -3766,13 +3793,23 @@
                                "not have to enter it for each message.") );
       return;
     }
-    if (to().isEmpty() && cc().isEmpty() && bcc().isEmpty())
-    {
-      if ( mEdtTo ) mEdtTo->setFocus();
-      KMessageBox::information( this,
-                                i18n("You must specify at least one receiver,"
-                                     "either in the To: field or as CC or as BCC.") );
-      return;
+    if ( to().isEmpty() ) {
+      if (  cc().isEmpty() && bcc().isEmpty()) {
+        if ( mEdtTo ) mEdtTo->setFocus();
+        KMessageBox::information( this,
+                                  i18n("You must specify at least one receiver,"
+                                       "either in the To: field or as CC or as BCC.") );
+        return;
+      } else {
+        if ( mEdtTo )mEdtTo->setFocus();
+        int rc = KMessageBox::questionYesNo( this,
+                                             i18n("To: field is empty. "
+                                                  "Send message anyway?"),
+                                             i18n("No To: specified") );
+        if ( rc == KMessageBox::No ) {
+          return;
+        }
+      }
     }
 
     // Validate the To:, CC: and BCC fields
@@ -3891,12 +3928,12 @@
   if ( imapTheFolder && imapTheFolder->noContent() )
     imapTheFolder = 0;
 
-  if ( theFolder == 0 ) {
+  if ( theFolder == 0 )
     theFolder = ( mSaveIn==KMComposeWin::Drafts ?
                   kmkernel->draftsFolder() : kmkernel->templatesFolder() );
-  } else {
-    theFolder->open();
-  }
+
+  theFolder->open("composer");
+
   kdDebug(5006) << k_funcinfo << "theFolder=" << theFolder->name() << endl;
   if ( imapTheFolder )
     kdDebug(5006) << k_funcinfo << "imapTheFolder=" << imapTheFolder->name() << endl;
@@ -3914,6 +3951,7 @@
     (static_cast<KMFolderImap*>( imapTheFolder->storage() ))->getFolder();
   }
 
+  theFolder->close( "composer" );
   return sentOk;
 }
 
@@ -4049,7 +4087,14 @@
     mEditor->append(mOldSigText);
     mEditor->setModified(mod);
     // mEditor->setContentsPos( 0, 0 );
-    mEditor->setCursorPositionFromStart( (unsigned int) mMsg->getCursorPos() );
+    if (  mPreserveUserCursorPosition ) {
+      mEditor->setCursorPositionFromStart( (unsigned int) mMsg->getCursorPos() );
+      // Only keep the cursor from the mMsg *once* based on the
+      // preserve-cursor-position setting; this handles the case where
+      // the message comes from a template with a specific cursor
+      // position set and the signature is appended automatically.
+      mPreserveUserCursorPosition = false;
+    }
     mEditor->sync();
   }
 }
@@ -4283,6 +4328,7 @@
     if ( oldIdentity.bcc() != ident.bcc() ) {
       mRecipientsEditor->removeRecipient( oldIdentity.bcc(), Recipient::Bcc );
       mRecipientsEditor->addRecipient( ident.bcc(), Recipient::Bcc );
+      mRecipientsEditor->setFocusBottom();
     }
   }
 
Index: kmail/kmreaderwin.h
===================================================================
--- kmail/kmreaderwin.h	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kmail/kmreaderwin.h	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -65,7 +65,7 @@
   struct URLArgs;
 }
 
-/** 
+/**
    This class implements a "reader window", that is a window
    used for reading or viewing messages.
 */
@@ -406,6 +406,13 @@
   */
   QString writeMessagePartToTempFile( KMMessagePart* msgPart, int partNumber );
 
+  /**
+    Creates a temporary dir for saving attachments, etc.
+    Will be automatically deleted when another message is viewed.
+    @param param Optional part of the directory name.
+  */
+  QString createTempDir( const QString &param = QString() );
+
   /** show window containing infos about a vCard. */
   void showVCard(KMMessagePart *msgPart);
 
Index: kmail/kmail_view.desktop
===================================================================
--- kmail/kmail_view.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kmail/kmail_view.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,10 +1,11 @@
 [Desktop Entry]
 Encoding=UTF-8
 Name=KMail
-Name[be]=K Пошта
 Name[eo]=Retpoŝto
 Name[hi]=के-मेल
 Name[lv]=KPasts
+Name[mk]=КПошта
+Name[ne]=केडीई मेल
 Name[pa]=ਕੇ-ਪੱਤਰ
 Name[sv]=Kmail
 Name[ta]=Kஅஞ்சல்
@@ -15,7 +16,7 @@
 Icon=kmail
 DocPath=kmail/index.html
 NoDisplay=true
-MimeType=message/rfc822
+MimeType=message/rfc822;application/mbox
 
 X-KDE-StartupNotify=true
 X-DCOP-ServiceType=Unique
Index: kmail/localsubscriptiondialog.cpp
===================================================================
--- kmail/localsubscriptiondialog.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 0)
+++ kmail/localsubscriptiondialog.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -0,0 +1,148 @@
+/*  -*- c++ -*-
+    localsubscriptiondialog.cpp
+
+    This file is part of KMail, the KDE mail client.
+    Copyright (C) 2006 Till Adam <adam@kde.org>
+
+    KMail is free software; you can redistribute it and/or modify it
+    under the terms of the GNU General Public License, version 2, as
+    published by the Free Software Foundation.
+
+    KMail is distributed in the hope that it will be useful, but
+    WITHOUT ANY WARRANTY; without even the implied warranty of
+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
+    General Public License for more details.
+
+    You should have received a copy of the GNU General Public License
+    along with this program; if not, write to the Free Software
+    Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA
+
+    In addition, as a special exception, the copyright holders give
+    permission to link the code of this program with any edition of
+    the Qt library by Trolltech AS, Norway (or with modified versions
+    of Qt that use the same license as Qt), and distribute linked
+    combinations including the two.  You must obey the GNU General
+    Public License in all respects for all of the code used other than
+    Qt.  If you modify this file, you may extend this exception to
+    your version of the file, but you are not obligated to do so.  If
+    you do not wish to do so, delete this exception statement from
+    your version.
+*/
+
+#ifdef HAVE_CONFIG_H
+#include <config.h>
+#endif
+
+#include <kdebug.h>
+#include <klocale.h>
+#include <kmessagebox.h>
+
+#include "localsubscriptiondialog.h"
+#include "kmkernel.h"
+#include "accountmanager.h"
+#include "kmmessage.h"
+#include "imapaccountbase.h"
+#include "listjob.h"
+
+namespace KMail {
+
+LocalSubscriptionDialog::LocalSubscriptionDialog( QWidget *parent, const QString &caption,
+    ImapAccountBase *acct, QString startPath )
+  : SubscriptionDialog( parent, caption, acct, startPath ),
+    mAccount( acct )
+{
+}
+
+/* virtual */
+LocalSubscriptionDialog::~LocalSubscriptionDialog()
+{
+
+}
+
+void LocalSubscriptionDialog::listAllAvailableAndCreateItems()
+{
+  if ( mAccount->onlySubscribedFolders() )
+    mSubscribed = true;
+  SubscriptionDialog::listAllAvailableAndCreateItems();
+}
+
+/* virtual */
+void LocalSubscriptionDialog::processFolderListing()
+{
+  uint done = 0;
+  for (uint i = mCount; i < mFolderNames.count(); ++i)
+  {
+    // give the dialog a chance to repaint
+    if (done == 1000)
+    {
+      emit listChanged();
+      QTimer::singleShot(0, this, SLOT(processItems()));
+      return;
+    }
+    ++mCount;
+    ++done;
+    createListViewItem( i );
+  }
+
+  if ( mPrefixList.isEmpty() && !mSubscribed )
+    loadingComplete(); // no need to load subscribed folders
+  else
+    processNext();
+}
+
+void LocalSubscriptionDialog::setCheckedStateOfAllItems()
+{
+   // iterate over all items and check them, unless they are
+   // in the account's local subscription blacklist
+   QDictIterator<GroupItem> it( mItemDict );
+   for ( ; it.current(); ++it ) {
+     GroupItem *item = it.current();
+     QString path = it.currentKey();
+     item->setOn( mAccount->locallySubscribedTo( path ) );
+   }
+}
+
+/*virtual*/
+void LocalSubscriptionDialog::doSave()
+{
+  bool somethingHappened = false;
+  // subscribe
+  QListViewItemIterator it(subView);
+  for ( ; it.current(); ++it) {
+    static_cast<ImapAccountBase*>(account())->changeLocalSubscription(
+        static_cast<GroupItem*>(it.current())->info().path, true );
+    somethingHappened = true;
+  }
+
+  // unsubscribe
+  QListViewItemIterator it2(unsubView);
+  if ( unsubView->childCount() > 0 ) {
+    const QString message = i18n("Locally unsubscribing from folders will remove all "
+        "information that is present locally about those folders. The folders will "
+        "not be changed on the server. Press cancel now if you want to make sure "
+        "all local changes have been written to the server by checking mail first.");
+    const QString caption = i18n("Local changes will be lost when unsubscribing");
+    if ( KMessageBox::warningContinueCancel( this, message, caption )
+        != KMessageBox::Cancel ) {
+      somethingHappened = true;
+      for ( ; it2.current(); ++it2) {
+        static_cast<ImapAccountBase*>(account())->changeLocalSubscription(
+            static_cast<GroupItem*>(it2.current())->info().path, false );
+      }
+
+    }
+  }
+  if ( somethingHappened ) {
+    kmkernel->acctMgr()->singleCheckMail( mAccount, true);
+  }
+}
+
+void LocalSubscriptionDialog::loadingComplete()
+{
+  setCheckedStateOfAllItems();
+  SubscriptionDialog::loadingComplete();
+}
+
+} // namespace
+
+#include "localsubscriptiondialog.moc"
Index: kmail/popaccount.h
===================================================================
--- kmail/popaccount.h	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kmail/popaccount.h	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -160,7 +160,7 @@
   QDataStream *curMsgStrm;
 
   int curMsgLen;
-  int stage;
+  Stage stage;
   QTimer processMsgsTimer;
   int processingDelay;
   int numMsgs, numBytes, numBytesToRead, numBytesRead, numMsgBytesRead;
Index: kmail/kmfolderdia.cpp
===================================================================
--- kmail/kmfolderdia.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kmail/kmfolderdia.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -43,6 +43,7 @@
 #include "kmcommands.h"
 #include "kmfoldertree.h"
 #include "folderdiaacltab.h"
+#include "folderdiaquotatab.h"
 #include "kmailicalifaceimpl.h"
 #include "globalsettings.h"
 #include "folderrequester.h"
@@ -121,7 +122,7 @@
   tab = new FolderDiaGeneralTab( this, aName, box );
   addTab( tab );
   box = addVBoxPage( i18n("Templates") );
-  tab = new FolderDiaTemplatesTab( this, aName, box );
+  tab = new FolderDiaTemplatesTab( this, box );
   addTab( tab );
 
   KMFolder* refFolder = mFolder ? mFolder : mParentFolder;
@@ -134,6 +135,13 @@
       addTab( tab );
     }
   }
+  if ( !noContent && refFolder && ( folderType == KMFolderTypeImap || folderType == KMFolderTypeCachedImap ) ) {
+    if ( FolderDiaQuotaTab::supports( refFolder ) ) {
+      box = addVBoxPage( i18n("Quota") );
+      tab = new FolderDiaQuotaTab( this, box );
+      addTab( tab );
+    }
+  }
 
   for ( unsigned int i = 0 ; i < mTabs.count() ; ++i )
     mTabs[i]->load();
@@ -267,6 +275,16 @@
     if (!aName.isEmpty())
             mNameEdit->setText(aName);
     mNameEdit->setMinimumSize(mNameEdit->sizeHint());
+    // prevent renaming of IMAP inbox
+    if ( mDlg->folder() && mDlg->folder()->isSystemFolder() ) {
+      QString imapPath;
+      if ( mDlg->folder()->folderType() == KMFolderTypeImap )
+        imapPath = static_cast<KMFolderImap*>( mDlg->folder()->storage() )->imapPath();
+      if ( mDlg->folder()->folderType() == KMFolderTypeCachedImap )
+        imapPath = static_cast<KMFolderCachedImap*>( mDlg->folder()->storage() )->imapPath();
+      if ( imapPath == "/INBOX/" )
+        mNameEdit->setEnabled( false );
+    }
     label->setBuddy( mNameEdit );
     hl->addWidget( mNameEdit );
     connect( mNameEdit, SIGNAL( textChanged( const QString & ) ),
@@ -658,9 +676,8 @@
 
 //----------------------------------------------------------------------------
 KMail::FolderDiaTemplatesTab::FolderDiaTemplatesTab( KMFolderDialog* dlg,
-                                                 const QString& aName,
-                                                 QWidget* parent, const char* name )
-  : FolderDiaTab( parent, name ), mDlg( dlg )
+                                                 QWidget* parent )
+  : FolderDiaTab( parent, 0 ), mDlg( dlg )
 {
 
   mIsLocalSystemFolder = mDlg->folder()->isSystemFolder() &&
@@ -668,24 +685,24 @@
        mDlg->folder()->folderType() != KMFolderTypeCachedImap;
 
   QVBoxLayout *topLayout = new QVBoxLayout( this, 0, KDialog::spacingHint() );
-  
+
   mCustom = new QCheckBox( i18n("&Use custom message templates"), this );
   topLayout->addWidget( mCustom );
-  
+
   mWidget = new TemplatesConfiguration( this , "folder-templates" );
   mWidget->setEnabled( false );
   topLayout->addWidget( mWidget );
-  
+
   QHBoxLayout *btns = new QHBoxLayout( topLayout, KDialog::spacingHint() );
   mCopyGlobal = new KPushButton( i18n("&Copy global templates"), this );
   mCopyGlobal->setEnabled( false );
   btns->addWidget( mCopyGlobal );
-  
+
   connect( mCustom, SIGNAL(toggled(bool)),
         mWidget, SLOT(setEnabled(bool)) );
   connect( mCustom, SIGNAL(toggled(bool)),
         mCopyGlobal, SLOT(setEnabled(bool)) );
-  
+
   connect( mCopyGlobal, SIGNAL(clicked()),
         this, SLOT(slotCopyGlobal()) );
 
@@ -697,23 +714,23 @@
 
 void FolderDiaTemplatesTab::load()
 {
-  
+
 }
 
 void FolderDiaTemplatesTab::initializeWithValuesFromFolder( KMFolder* folder ) {
   if ( !folder )
     return;
-  
+
   mFolder = folder;
 
   QString fid = folder->idString();
-  
+
   Templates t( fid );
 
   mCustom->setChecked(t.useCustomTemplates());
-  
+
   mIdentity = folder->identity();
-  
+
   mWidget->loadFromFolder( fid, mIdentity );
 }
 
@@ -721,16 +738,16 @@
 bool FolderDiaTemplatesTab::save()
 {
   KMFolder* folder = mDlg->folder();
-  
+
   QString fid = folder->idString();
   Templates t(fid);
-  
+
   kdDebug() << "use custom templates for folder " << fid << ": " << mCustom->isChecked() << endl;
   t.setUseCustomTemplates(mCustom->isChecked());
   t.writeConfig();
-  
+
   mWidget->saveToFolder(fid);
-  
+
   return true;
 }
 
Index: kmail/tests/signedmail.mbox
===================================================================
--- kmail/tests/signedmail.mbox	(.../tags/KDE/3.5.6/kdepim)	(wersja 0)
+++ kmail/tests/signedmail.mbox	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -0,0 +1,111 @@
+From wilde@intevation.de Thu Mar 15 15:16:02 2007
+Return-Path: <nobody@example.org>
+Received: from localhost (localhost [127.0.0.1])
+	 by smykowski.kdab.net (Cyrus v2.2.12) with LMTPA;
+	 Tue, 03 Apr 2007 10:38:19 +0200
+X-Sieve: CMU Sieve 2.2
+Received: from localhost (localhost [127.0.0.1])
+	by smykowski.kdab.net (Postfix) with ESMTP id 0DEF8E6C750
+	for <dfaure@kdab.net>; Tue,  3 Apr 2007 10:38:19 +0200 (CEST)
+Received: from smykowski.kdab.net ([127.0.0.1])
+ by localhost (smykowski.kdab.net [127.0.0.1]) (amavisd-new, port 10024)
+ with ESMTP id 16175-09 for <dfaure@kdab.net>;
+ Tue,  3 Apr 2007 10:38:17 +0200 (CEST)
+Received: from localhost (localhost [127.0.0.1])
+	by smykowski.kdab.net (Postfix) with ESMTP id F1D4DE6C751
+	for <dfaure@kdab.net>; Tue,  3 Apr 2007 10:38:16 +0200 (CEST)
+Received: from smtp4-g19.free.fr (smtp4-g19.free.fr [212.27.42.30])
+	by smykowski.kdab.net (Postfix) with ESMTP id D7976E6C750
+	for <dfaure@kdab.net>; Tue,  3 Apr 2007 10:38:10 +0200 (CEST)
+Received: from [192.168.0.1] (lns-bzn-51f-81-56-143-51.adsl.proxad.net [81.56.143.51])
+	by smtp4-g19.free.fr (Postfix) with ESMTP id C961269606
+	for <dfaure@kdab.net>; Tue,  3 Apr 2007 10:41:56 +0200 (CEST)
+Subject: Test for aegpyten/issue734-1, OpenPGP signed
+From: Sascha Wilde <wilde@intevation.de>
+Date: Thu, 15 Mar 2007 15:16:02 +0100
+MIME-Version: 1.0
+Content-Type: multipart/signed;
+  boundary="==-=-=";
+  micalg=pgp-sha1;
+  protocol="application/pgp-signature"
+Message-Id: <20070403084156.C961269606@smtp4-g19.free.fr>
+To: undisclosed-recipients:;
+X-Virus-Scanned: by amavisd-new at kdab.net
+X-Spam-Status: Yes, score=7.598 tagged_above=3 required=6.3
+ tests=[BAYES_50=0.001, DATE_IN_PAST_96_XX=2.02, DNS_FROM_AHBL_RHSBL=0.231,
+ DNS_FROM_RFC_ABUSE=0.2, DNS_FROM_RFC_DSN=2.597, DNS_FROM_RFC_POST=1.708,
+ UNDISC_RECIPS=0.841]
+X-Spam-Score: 7.598
+X-Spam-Level: *******
+X-Spam-Flag: YES
+X-Kolab-Scheduling-Message: FALSE
+X-UID: 68768
+X-Length: 3235
+Status: RO
+X-Status: RPT
+X-KMail-EncryptionState:  
+X-KMail-SignatureState:  
+X-KMail-MDN-Sent:  
+
+--==-=-=
+Content-Type: multipart/mixed; boundary="=-=-="
+
+--=-=-=
+
+
+Hallo Bernhard
+
+hier also die mail....
+jetzt kommt gleich der Anhang...
+3 ...
+2 ...
+1 ...
+BOOOM
+
+
+--=-=-=
+Content-Type: text/plain; charset=iso-8859-1
+Content-Disposition: attachment; filename=x.txt
+Content-Transfer-Encoding: quoted-printable
+Content-Description: Anhang
+
+
+Ein Anhang mit Text.
+Weil das wohl auch in der urspr=FCnglichen Mail so war
+
+und nicht ein wenig mehr Text, damit es nicht so langweilig ist...
+
+
+
+--=-=-=
+Content-Type: text/plain; charset=iso-8859-1
+Content-Transfer-Encoding: quoted-printable
+
+
+und hier geht der Text weiter...
+sch=F6n mit Umlaut, wie besprochen!
+
+Und das ganz nat=FCrlich signiert...
+
+und? hilft's?
+sascha
+=2D-=20
+Sascha Wilde                                      OpenPGP key: 4BB86568
+Intevation GmbH, Osnabr=FCck             http://www.intevation.de/~wilde/
+Amtsgericht Osnabr=FCck, HR B 18998             http://www.intevation.de/
+Gesch=E4ftsf=FChrer: Frank Koormann, Bernhard Reiter, Dr. Jan-Oliver Wagner
+
+--=-=-=--
+
+--==-=-=
+Content-Type: application/pgp-signature
+
+-----BEGIN PGP SIGNATURE-----
+Version: GnuPG v1.4.6 (GNU/Linux)
+
+iD8DBQFF+VUtuyGFFEu4ZWgRApmZAKCGHUi440uPEggdKZoE1WHWO0ah6QCfaqLv
+HYelJfvqQQJkoW99SKRUVec=
+=AmlK
+-----END PGP SIGNATURE-----
+--==-=-=--
+
Index: kmail/tests/utiltests.cpp
===================================================================
--- kmail/tests/utiltests.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 0)
+++ kmail/tests/utiltests.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -0,0 +1,207 @@
+/**
+ * Copyright (C)  2007 David Faure <faure@kde.org>
+ * This file is subject to the GPL version 2.
+ */
+
+#include <kdebug.h>
+#include <kunittest/runner.h>
+#include <kunittest/module.h>
+#include "utiltests.h"
+
+using namespace KUnitTest;
+
+KUNITTEST_MODULE( kunittest_utilmodule, "KMail::Util Tests" );
+KUNITTEST_MODULE_REGISTER_TESTER( UtilTester );
+
+#include "util.h"
+#include <mimelib/string.h>
+
+
+void UtilTester::setUp()
+{
+  kdDebug() << "setUp" << endl;
+}
+
+void UtilTester::tearDown()
+{
+  kdDebug() << "tearDown" << endl;
+}
+
+static QString makePrintable( const QCString& str )
+{
+  QString a = str;
+  a = a.replace( '\r', "\\r" );
+  a = a.replace( '\n', "\\n" );
+  return a;
+}
+static QString makePrintable( const QByteArray& arr )
+{
+  QCString str;
+  KMail::Util::setFromByteArray( str, arr );
+  return makePrintable( str );
+}
+
+void UtilTester::test_lf2crlf()
+{
+  QCString src = "\nfoo\r\n\nbar\rblah\n\r\r\n\n\r";
+  QCString conv = KMail::Util::lf2crlf( src );
+  COMPARE( makePrintable( conv ), makePrintable("\r\nfoo\r\n\r\nbar\rblah\r\n\r\r\n\r\n\r") );
+  COMPARE( KMail::Util::lf2crlf( QCString("") ), QCString("") );
+
+  // QByteArray version
+  QByteArray arr;  KMail::Util::setFromQCString( arr, src );
+  COMPARE( arr[arr.size()-1], '\r' );
+  QByteArray arrConv = KMail::Util::lf2crlf( arr );
+  COMPARE( arrConv[arrConv.size()-1], '\r' );
+  COMPARE( makePrintable( arrConv ), makePrintable("\r\nfoo\r\n\r\nbar\rblah\r\n\r\r\n\r\n\r") );
+  QByteArray empty;
+  arrConv = KMail::Util::lf2crlf( empty );
+  COMPARE( makePrintable( arrConv ), QString("") );
+}
+
+void UtilTester::test_crlf2lf()
+{
+  QCString src = "\r\n\r\nfoo\r\n\r\nbar\rblah\r\n\r\r\n\r\n\r";
+  int len = src.length();
+  COMPARE( src[len], '\0' );
+  int newLen = KMail::Util::crlf2lf( src.data(), len );
+  VERIFY( newLen <= len );
+  QCString cstr( src.data(), newLen + 1 );
+  COMPARE( makePrintable( cstr ), makePrintable("\n\nfoo\n\nbar\rblah\n\r\n\n\r") );
+}
+
+void UtilTester::test_escapeFrom()
+{
+  // TODO should take a DwString, then fix kmfoldermbox.cpp:1021      msgText = escapeFrom( aMsg->asString() );
+
+}
+
+void UtilTester::test_append()
+{
+  QCString test;
+  QCString str = "foo";
+  COMPARE( (int)str.size(), 4 ); // trailing nul included
+  QByteArray s1 = KMail::Util::byteArrayFromQCStringNoDetach( str );
+  COMPARE( (int)s1.size(), 3 );
+  COMPARE( (int)str.size(), 3 ); // trailing nul got removed
+  COMPARE( s1.data(), str.data() ); // yes, no detach
+  COMPARE( s1[2], 'o' );
+
+  QCString bar( "bar" );
+  QByteArray s2 = KMail::Util::byteArrayFromQCStringNoDetach( bar );
+  COMPARE( (int)s2.size(), 3 );
+
+  KMail::Util::append( s1, s2 );
+  COMPARE( (int)s1.size(), 6 );
+  KMail::Util::setFromByteArray( test, s1 );
+  COMPARE( test, QCString( "foobar" ) );
+
+  KMail::Util::append( s1, 0 ); // no-op
+  COMPARE( (int)s1.size(), 6 );
+  KMail::Util::setFromByteArray( test, s1 );
+  COMPARE( test, QCString( "foobar" ) );
+
+  KMail::Util::append( s1, "blah" );
+  COMPARE( (int)s1.size(), 10 );
+  KMail::Util::setFromByteArray( test, s1 );
+  COMPARE( test, QCString( "foobarblah" ) );
+
+  KMail::Util::append( s1, QCString( " str" ) );
+  COMPARE( (int)s1.size(), 14 );
+  KMail::Util::setFromByteArray( test, s1 );
+  COMPARE( test, QCString( "foobarblah str" ) );
+
+  QByteArray empty;
+  KMail::Util::append( empty, "a" );
+  COMPARE( (int)empty.size(), 1 );
+  COMPARE( empty[0], 'a' );
+}
+
+void UtilTester::test_insert()
+{
+  QCString test;
+  QCString str = "foo";
+  COMPARE( (int)str.size(), 4 ); // trailing nul included
+  QByteArray s1;
+  KMail::Util::setFromQCString( s1, str );
+
+  KMail::Util::insert( s1, 1, "bar" );
+  COMPARE( (int)s1.size(), 6 );
+  COMPARE( makePrintable(s1), QString( "fbaroo" ) );
+
+  KMail::Util::insert( s1, 6, "END" );
+  COMPARE( (int)s1.size(), 9 );
+  COMPARE( makePrintable(s1), QString( "fbarooEND" ) );
+
+  KMail::Util::insert( s1, 0, "BEGIN" );
+  COMPARE( (int)s1.size(), 14 );
+  COMPARE( makePrintable(s1), QString( "BEGINfbarooEND" ) );
+}
+
+void UtilTester::test_DwStringConversions( const QCString& cstr )
+{
+  // QCString->DwString->QCString
+  COMPARE( (int)cstr.size(), 8 );
+  DwString dwstr = KMail::Util::dwString( cstr );
+  COMPARE( (int)dwstr.size(), 7 );
+  COMPARE( dwstr[6], 'r' );
+  QCString cstr2 = KMail::Util::CString( dwstr );
+  COMPARE( (int)cstr2.size(), 8 );
+  COMPARE( cstr2, cstr );
+  COMPARE( cstr2[6], 'r' );
+
+  // And also QCString->QByteArray
+  QByteArray arr;
+  KMail::Util::setFromQCString( arr, cstr );
+  COMPARE( (int)arr.size(), 7 );
+  COMPARE( arr[6], 'r' );
+
+  KMail::Util::setFromQCString( arr, QCString() );
+  COMPARE( (int)arr.size(), 0 );
+
+  // DwString->QByteArray
+  QByteArray ba = KMail::Util::ByteArray( dwstr );
+  COMPARE( (int)ba.size(), 7 );
+  COMPARE( ba[6], 'r' );
+
+  ba = KMail::Util::ByteArray( DwString() );
+  COMPARE( (int)ba.size(), 0 );
+}
+
+void UtilTester::test_DwStringConversions()
+{
+  QCString cstr = "foo&bar";
+  test_DwStringConversions( cstr );
+  // now embed a nul. Note that cstr="foo\0bar" wouldn't work.
+  cstr[3] = '\0';
+  test_DwStringConversions( cstr );
+
+  cstr = QCString();
+  DwString dwstr = KMail::Util::dwString( cstr );
+  COMPARE( (int)dwstr.size(), 0 );
+  VERIFY( dwstr.empty() );
+
+  dwstr = KMail::Util::dwString( QByteArray() );
+  COMPARE( (int)dwstr.size(), 0 );
+  VERIFY( dwstr.empty() );
+}
+
+void UtilTester::test_QByteArrayQCString()
+{
+  QCString str = "foobar";
+  COMPARE( (int)str.size(), 7 ); // trailing nul included
+  QByteArray s1 = KMail::Util::byteArrayFromQCStringNoDetach( str );
+  COMPARE( (int)str.size(), 6 ); // trailing nul got removed
+  COMPARE( s1.data(), str.data() ); // yes, no detach
+  COMPARE( s1[5], 'r' );
+  COMPARE( str[5], 'r' );
+
+  KMail::Util::restoreQCString( str );
+  COMPARE( (int)str.size(), 7 ); // trailing nul included
+  COMPARE( str[5], 'r' );
+  COMPARE( str[6], '\0' );
+
+}
+
+#include "utiltests.moc"
+
Index: kmail/tests/mimelibtests.cpp
===================================================================
--- kmail/tests/mimelibtests.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 0)
+++ kmail/tests/mimelibtests.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -0,0 +1,117 @@
+/* This file is part of the KDE project
+   Copyright (C) 2007 David Faure <faure@kde.org>
+
+   This library is free software; you can redistribute it and/or
+   modify it under the terms of the GNU Library General Public
+   License as published by the Free Software Foundation; either
+   version 2 of the License, or (at your option) any later version.
+
+   This library is distributed in the hope that it will be useful,
+   but WITHOUT ANY WARRANTY; without even the implied warranty of
+   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
+   Library General Public License for more details.
+
+   You should have received a copy of the GNU Library General Public License
+   along with this library; see the file COPYING.LIB.  If not, write to
+   the Free Software Foundation, Inc., 51 Franklin Street, Fifth Floor,
+   Boston, MA 02110-1301, USA.
+*/
+
+#include "mimelibtests.h"
+#include "mimelibtests.moc"
+
+#include <kdebug.h>
+#include <kunittest/runner.h>
+#include <kunittest/module.h>
+
+using namespace KUnitTest;
+
+KUNITTEST_MODULE( kunittest_mimelibmodule, "Mimelib Tests" );
+KUNITTEST_MODULE_REGISTER_TESTER( MimeLibTester );
+
+#include <mimelib/string.h>
+#include <mimelib/message.h>
+#include "util.h"
+#include <qfile.h>
+#include <assert.h>
+
+#if 0
+static QString makePrintable( const QCString& str )
+{
+  QString a = str;
+  a = a.replace( '\r', "\\r" );
+  a = a.replace( '\n', "\\n" );
+  return a;
+}
+#endif
+
+static QString makePrintable( const DwString& str )
+{
+  QString a = KMail::Util::CString( str ); // ## we assume latin1
+  a = a.replace( '\r', "\\r" );
+  a = a.replace( '\n', "\\n" );
+  return a;
+}
+
+QCString MimeLibTester::readFile(const QString& fileName)
+{
+  QFile file( fileName );
+  // #!@#$& kunittest... VERIFY() does nothing in setUp. Using assert instead.
+  bool ok = file.open( IO_ReadOnly );
+  if ( !ok ) {
+    kdError() << fileName << " not found!" << endl;
+    abort();
+  }
+  QByteArray data = file.readAll();
+  assert( data.size() > 1 );
+  QCString result;
+  KMail::Util::setFromByteArray( result, data );
+  return result;
+}
+
+void MimeLibTester::setUp()
+{
+  // This multipart-mixed mail has a part that starts without headers;
+  // the newline after the (empty) headers must be preserved.
+  mMultipartMixedMail = readFile( KDESRCDIR "/multipartmixed.mbox" );
+  // This is the full signed mail which was simplified to above.
+  // Kept around in case we want to do anything else with a signed mail later :)
+  mSignedMail = readFile( KDESRCDIR "/signedmail.mbox" );
+}
+
+void MimeLibTester::tearDown()
+{
+}
+
+// Simply test creating a DwMessage and then calling AsString on it.
+// Then the same with Parse+Assemble
+bool MimeLibTester::test_dwMessage_AsString( const DwString& text )
+{
+  VERIFY( text.size() > 0 );
+
+  // First without Parse + Assemble
+  {
+    DwMessage* msg = new DwMessage( text, 0 );
+    COMPARE( makePrintable( msg->AsString() ), makePrintable( text ) );
+    delete msg;
+  }
+  // Then with Parse + Assemble
+  {
+    DwMessage* msg = new DwMessage( text, 0 );
+    msg->Parse();
+    msg->Assemble();
+    COMPARE( makePrintable( msg->AsString() ), makePrintable( text ) );
+    if ( msg->AsString() != text )
+      return false;
+    delete msg;
+  }
+  return true;
+}
+
+void MimeLibTester::test_dwMessage_AsString()
+{
+  if ( !test_dwMessage_AsString( mMultipartMixedMail.data() ) )
+    return;
+  if ( !test_dwMessage_AsString( mSignedMail.data() ) )
+    return;
+}
Index: kmail/tests/utiltests.h
===================================================================
--- kmail/tests/utiltests.h	(.../tags/KDE/3.5.6/kdepim)	(wersja 0)
+++ kmail/tests/utiltests.h	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -0,0 +1,30 @@
+/*
+ * Copyright (C)  2007  David Faure <faure@kde.org>
+ *
+ * This file is subject to the GPL version 2.
+ */
+
+#ifndef UTILTESTS_H
+#define UTILTESTS_H
+
+#include <kunittest/tester.h>
+
+class UtilTester : public KUnitTest::SlotTester
+{
+  Q_OBJECT
+
+public slots:
+  void setUp();
+  void tearDown();
+  void test_lf2crlf();
+  void test_crlf2lf();
+  void test_escapeFrom();
+  void test_append();
+  void test_insert();
+  void test_DwStringConversions();
+  void test_QByteArrayQCString();
+private:
+  void test_DwStringConversions( const QCString& cstr );
+};
+
+#endif
Index: kmail/tests/mimelibtests.h
===================================================================
--- kmail/tests/mimelibtests.h	(.../tags/KDE/3.5.6/kdepim)	(wersja 0)
+++ kmail/tests/mimelibtests.h	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -0,0 +1,44 @@
+/* This file is part of the KDE project
+   Copyright (C) 2007 David Faure <faure@kde.org>
+
+   This library is free software; you can redistribute it and/or
+   modify it under the terms of the GNU Library General Public
+   License as published by the Free Software Foundation; either
+   version 2 of the License, or (at your option) any later version.
+
+   This library is distributed in the hope that it will be useful,
+   but WITHOUT ANY WARRANTY; without even the implied warranty of
+   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
+   Library General Public License for more details.
+
+   You should have received a copy of the GNU Library General Public License
+   along with this library; see the file COPYING.LIB.  If not, write to
+   the Free Software Foundation, Inc., 51 Franklin Street, Fifth Floor,
+   Boston, MA 02110-1301, USA.
+*/
+
+#ifndef MIMELIBTEST_H
+#define MIMELIBTEST_H
+
+#include <kunittest/tester.h>
+class DwString;
+
+class MimeLibTester : public KUnitTest::SlotTester
+{
+  Q_OBJECT
+
+public slots:
+  void setUp();
+  void tearDown();
+  void test_dwMessage_AsString();
+
+private:
+  QCString readFile(const QString& fileName);
+  bool test_dwMessage_AsString( const DwString& );
+
+  QCString mMultipartMixedMail;
+  QCString mSignedMail;
+};
+
+#endif /* MIMELIBTEST_H */
+
Index: kmail/tests/Makefile.am
===================================================================
--- kmail/tests/Makefile.am	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kmail/tests/Makefile.am	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +1,20 @@
-INCLUDES = -I$(top_srcdir)/include -I$(top_srcdir)/kmail $(all_includes)
+INCLUDES = -I$(top_srcdir)/kmail $(all_includes)
+AM_CPPFLAGS = -DKDESRCDIR=\"$(srcdir)\"
 METASOURCES = AUTO
 
-noinst_HEADERS = messagedicttests.h ../kmdict.h
+check_LTLIBRARIES = kunittest_storagelayermodule.la \
+        kunittest_utilmodule.la \
+        kunittest_mimelibmodule.la
 
-check_LTLIBRARIES = kunittest_storagelayermodule.la 
-
 kunittest_storagelayermodule_la_SOURCES = storagelayermodule.cpp messagedicttests.cpp ../kmdict.cpp
-kunittest_storagelayermodule_la_LIBADD = -lkunittest
-kunittest_storagelayermodule_la_LDFLAGS = -module $(KDE_CHECK_PLUGIN) $(all_libraries)
+kunittest_utilmodule_la_SOURCES = utiltests.cpp ../util.cpp
+kunittest_utilmodule_la_LIBADD = -lkunittest ../../mimelib/libmimelib.la
+kunittest_mimelibmodule_la_SOURCES = mimelibtests.cpp ../util.cpp
+kunittest_mimelibmodule_la_LIBADD = -lkunittest ../../mimelib/libmimelib.la
 
+LIBADD = -lkunittest
+LDFLAGS = -module $(KDE_CHECK_PLUGIN) $(all_libraries)
+
 check-local:
 	kunittestmodrunner
 
Index: kmail/tests/multipartmixed.mbox
===================================================================
--- kmail/tests/multipartmixed.mbox	(.../tags/KDE/3.5.6/kdepim)	(wersja 0)
+++ kmail/tests/multipartmixed.mbox	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -0,0 +1,10 @@
+From wilde@intevation.de Thu Mar 15 15:16:02 2007
+Subject: aegpyten/issue734
+MIME-Version: 1.0
+Content-Type: multipart/mixed; boundary="==-=-=";
+
+--==-=-=
+
+One empty line above this line.
+--==-=-=--
+
Index: kmail/templatesinsertcommand.cpp
===================================================================
--- kmail/templatesinsertcommand.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kmail/templatesinsertcommand.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -34,7 +34,7 @@
                                                 const char *name )
   : QPushButton( parent, name )
 {
-  setText( i18n( "&Insert command..." ) );
+  setText( i18n( "&Insert Command..." ) );
   connect( this, SIGNAL( clicked() ),
            this, SLOT( slotClicked() ) );
 
@@ -45,21 +45,21 @@
   connect( mapper, SIGNAL( mapped(int) ),
            this, SLOT( slotMapped(int) ) );
 
-  mMenu = new KActionMenu( i18n( "Insert command" ), this );
+  mMenu = new KActionMenu( i18n( "Insert Command..." ), this );
 
   // ******************************************************
-  menu = new KActionMenu( i18n( "Original message" ), mMenu );
+  menu = new KActionMenu( i18n( "Original Message" ), mMenu );
   mMenu->insert( menu );
 
-  action = new KAction( i18n("Quoted message"),
+  action = new KAction( i18n("Quoted Message"),
                         0, mapper, SLOT( map() ), menu );
   mapper->setMapping( action, CQuote );
   menu->insert( action );
-  action = new KAction( i18n("Message text as is"),
+  action = new KAction( i18n("Message Text as Is"),
                         0, mapper, SLOT( map() ), menu );
   mapper->setMapping( action, CText );
   menu->insert( action );
-  action = new KAction( i18n("Message id"),
+  action = new KAction( i18n("Message Id"),
                         0, mapper, SLOT( map() ), menu );
   mapper->setMapping( action, COMsgId );
   menu->insert( action );
@@ -67,15 +67,15 @@
                         0, mapper, SLOT( map() ), menu );
   mapper->setMapping( action, CODate );
   menu->insert( action );
-  action = new KAction( i18n("Date in short format"),
+  action = new KAction( i18n("Date in Short Format"),
                         0, mapper, SLOT( map() ), menu );
   mapper->setMapping( action, CODateShort );
   menu->insert( action );
-  action = new KAction( i18n("Date in C locale"),
+  action = new KAction( i18n("Date in C Locale"),
                         0, mapper, SLOT( map() ), menu );
   mapper->setMapping( action, CODateEn );
   menu->insert( action );
-  action = new KAction( i18n("Day of week"),
+  action = new KAction( i18n("Day of Week"),
                         0, mapper, SLOT( map() ), menu );
   mapper->setMapping( action, CODow );
   menu->insert( action );
@@ -83,59 +83,59 @@
                         0, mapper, SLOT( map() ), menu );
   mapper->setMapping( action, COTime );
   menu->insert( action );
-  action = new KAction( i18n("Time in long format"),
+  action = new KAction( i18n("Time in Long Format"),
                         0, mapper, SLOT( map() ), menu );
   mapper->setMapping( action, COTimeLong );
   menu->insert( action );
-  action = new KAction( i18n("Time in C locale"),
+  action = new KAction( i18n("Time in C Locale"),
                         0, mapper, SLOT( map() ), menu );
   mapper->setMapping( action, COTimeLongEn );
   menu->insert( action );
-  action = new KAction( i18n("To field address"),
+  action = new KAction( i18n("To Field Address"),
                         0, mapper, SLOT( map() ), menu );
   mapper->setMapping( action, COToAddr );
   menu->insert( action );
-  action = new KAction( i18n("To field name"),
+  action = new KAction( i18n("To Field Name"),
                         0, mapper, SLOT( map() ), menu );
   mapper->setMapping( action, COToName );
   menu->insert( action );
-  action = new KAction( i18n("To field first name"),
+  action = new KAction( i18n("To Field First Name"),
                         0, mapper, SLOT( map() ), menu );
   mapper->setMapping( action, COToFName );
   menu->insert( action );
-  action = new KAction( i18n("To field last name"),
+  action = new KAction( i18n("To Field Last Name"),
                         0, mapper, SLOT( map() ), menu );
   mapper->setMapping( action, COToLName );
   menu->insert( action );
-  action = new KAction( i18n( "CC field address" ),
+  action = new KAction( i18n( "CC Field Address" ),
                         0, mapper, SLOT( map() ), menu );
   mapper->setMapping( action, COCCAddr );
   menu->insert( action );
-  action = new KAction( i18n( "CC field name" ),
+  action = new KAction( i18n( "CC Field Name" ),
                         0, mapper, SLOT( map() ), menu );
   mapper->setMapping( action, COCCName );
   menu->insert( action );
-  action = new KAction( i18n( "CC field first name" ),
+  action = new KAction( i18n( "CC Field First Name" ),
                         0, mapper, SLOT( map() ), menu );
   mapper->setMapping( action, COCCFName );
   menu->insert( action );
-  action = new KAction( i18n( "CC field last name" ),
+  action = new KAction( i18n( "CC Field Last Name" ),
                         0, mapper, SLOT( map() ), menu );
   mapper->setMapping( action, COCCLName );
   menu->insert( action );
-  action = new KAction( i18n( "From field address" ),
+  action = new KAction( i18n( "From Field Address" ),
                         0, mapper, SLOT( map() ), menu );
   mapper->setMapping( action, COFromAddr );
   menu->insert( action );
-  action = new KAction( i18n( "From field name" ),
+  action = new KAction( i18n( "From Field Name" ),
                         0, mapper, SLOT( map() ), menu );
   mapper->setMapping( action, COFromName );
   menu->insert( action );
-  action = new KAction( i18n( "From field first name" ),
+  action = new KAction( i18n( "From Field First Name" ),
                         0, mapper, SLOT( map() ), menu );
   mapper->setMapping( action, COFromFName );
   menu->insert( action );
-  action = new KAction( i18n( "From field last name" ),
+  action = new KAction( i18n( "From Field Last Name" ),
                         0, mapper, SLOT( map() ), menu );
   mapper->setMapping( action, COFromLName );
   menu->insert( action );
@@ -143,24 +143,24 @@
                         0, mapper, SLOT( map() ), menu );
   mapper->setMapping( action, COFullSubject );
   menu->insert( action );
-  action = new KAction( i18n( "Quoted headers" ),
+  action = new KAction( i18n( "Quoted Headers" ),
                         0, mapper, SLOT( map() ), menu );
   mapper->setMapping( action, CQHeaders );
   menu->insert( action );
-  action = new KAction( i18n( "Headers as is" ),
+  action = new KAction( i18n( "Headers as Is" ),
                         0, mapper, SLOT( map() ), menu );
   mapper->setMapping( action, CHeaders );
   menu->insert( action );
-  action = new KAction( i18n( "Header content" ),
+  action = new KAction( i18n( "Header Content" ),
                         0, mapper, SLOT( map() ), menu );
   mapper->setMapping( action, COHeader );
   menu->insert( action );
 
   // ******************************************************
-  menu = new KActionMenu( i18n( "Current message" ), mMenu );
+  menu = new KActionMenu( i18n( "Current Message" ), mMenu );
   mMenu->insert( menu );
 
-  action = new KAction( i18n( "Message id" ),
+  action = new KAction( i18n( "Message Id" ),
                         0, mapper, SLOT( map() ), menu );
   mapper->setMapping( action, CMsgId );
   menu->insert( action );
@@ -168,15 +168,15 @@
                         0, mapper, SLOT( map() ), menu );
   mapper->setMapping( action, CDate );
   menu->insert( action );
-  action = new KAction( i18n( "Date in short format" ),
+  action = new KAction( i18n( "Date in Short Format" ),
                         0, mapper, SLOT( map() ), menu );
   mapper->setMapping( action, CDateShort );
   menu->insert( action );
-  action = new KAction( i18n( "Date in C locale" ),
+  action = new KAction( i18n( "Date in C Locale" ),
                         0, mapper, SLOT( map() ), menu );
   mapper->setMapping( action, CDateEn );
   menu->insert( action );
-  action = new KAction( i18n( "Day of week" ),
+  action = new KAction( i18n( "Day of Week" ),
                         0, mapper, SLOT( map() ), menu );
   mapper->setMapping( action, CDow );
   menu->insert( action );
@@ -184,59 +184,59 @@
                         0, mapper, SLOT( map() ), menu );
   mapper->setMapping( action, CTime );
   menu->insert( action );
-  action = new KAction( i18n( "Time in long format" ),
+  action = new KAction( i18n( "Time in Long Format" ),
                         0, mapper, SLOT( map() ), menu );
   mapper->setMapping( action, CTimeLong );
   menu->insert( action );
-  action = new KAction( i18n( "Time in C locale" ),
+  action = new KAction( i18n( "Time in C Locale" ),
                         0, mapper, SLOT( map() ), menu );
   mapper->setMapping( action, CTimeLongEn );
   menu->insert( action );
-  action = new KAction( i18n( "To field address" ),
+  action = new KAction( i18n( "To Field Address" ),
                         0, mapper, SLOT( map() ), menu );
   mapper->setMapping( action, CToAddr );
   menu->insert( action );
-  action = new KAction( i18n( "To field name" ),
+  action = new KAction( i18n( "To Field Name" ),
                         0, mapper, SLOT( map() ), menu );
   mapper->setMapping( action, CToName );
   menu->insert( action );
-  action = new KAction( i18n( "To field first name" ),
+  action = new KAction( i18n( "To Field First Name" ),
                         0, mapper, SLOT( map() ), menu );
   mapper->setMapping( action, CToFName );
   menu->insert( action );
-  action = new KAction( i18n( "To field last name" ),
+  action = new KAction( i18n( "To Field Last Name" ),
                         0, mapper, SLOT( map() ), menu );
   mapper->setMapping( action, CToLName );
   menu->insert( action );
-  action = new KAction( i18n( "CC field address" ),
+  action = new KAction( i18n( "CC Field Address" ),
                         0, mapper, SLOT( map() ), menu );
   mapper->setMapping( action, CCCAddr );
   menu->insert( action );
-  action = new KAction( i18n( "CC field name" ),
+  action = new KAction( i18n( "CC Field Name" ),
                         0, mapper, SLOT( map() ), menu );
   mapper->setMapping( action, CCCName );
   menu->insert( action );
-  action = new KAction( i18n( "CC field first name" ),
+  action = new KAction( i18n( "CC Field First Name" ),
                         0, mapper, SLOT( map() ), menu );
   mapper->setMapping( action, CCCFName );
   menu->insert( action );
-  action = new KAction( i18n( "CC field last name" ),
+  action = new KAction( i18n( "CC Field Last Name" ),
                         0, mapper, SLOT( map() ), menu );
   mapper->setMapping( action, CCCLName );
   menu->insert( action );
-  action = new KAction( i18n( "From field address" ),
+  action = new KAction( i18n( "From Field Address" ),
                         0, mapper, SLOT( map() ), menu );
   mapper->setMapping( action, CFromAddr );
   menu->insert( action );
-  action = new KAction( i18n( "From field name" ),
+  action = new KAction( i18n( "From Field Name" ),
                         0, mapper, SLOT( map() ), menu );
   mapper->setMapping( action, CFromName );
   menu->insert( action );
-  action = new KAction( i18n( "From field first name" ),
+  action = new KAction( i18n( "From Field First Name" ),
                         0, mapper, SLOT( map() ), menu );
   mapper->setMapping( action, CFromFName );
   menu->insert( action );
-  action = new KAction( i18n( "From field last name" ),
+  action = new KAction( i18n( "From Field Last Name" ),
                         0, mapper, SLOT( map() ), menu );
   mapper->setMapping( action, CFromLName );
   menu->insert( action );
@@ -244,36 +244,36 @@
                         0, mapper, SLOT( map() ), menu );
   mapper->setMapping( action, CFullSubject );
   menu->insert( action );
-  action = new KAction( i18n( "Header content" ),
+  action = new KAction( i18n( "Header Content" ),
                         0, mapper, SLOT( map() ), menu );
   mapper->setMapping( action, CHeader );
   menu->insert( action );
 
   // ******************************************************
-  menu = new KActionMenu( i18n( "Process with external programs" ), mMenu );
+  menu = new KActionMenu( i18n( "Process With External Programs" ), mMenu );
   mMenu->insert( menu );
 
-  action = new KAction( i18n( "Insert result of command" ),
+  action = new KAction( i18n( "Insert Result of Command" ),
                         0, mapper, SLOT( map() ), menu );
   mapper->setMapping( action, CSystem );
   menu->insert( action );
-  action = new KAction( i18n( "Pipe original message body and insert result as quoted text" ),
+  action = new KAction( i18n( "Pipe Original Message Body and Insert Result as Quoted Text" ),
                         0, mapper, SLOT( map() ), menu );
   mapper->setMapping( action, CQuotePipe );
   menu->insert( action );
-  action = new KAction( i18n( "Pipe original message body and insert result as is" ),
+  action = new KAction( i18n( "Pipe Original Message Body and Insert Result as Is" ),
                         0, mapper, SLOT( map() ), menu );
   mapper->setMapping( action, CTextPipe );
   menu->insert( action );
-  action = new KAction( i18n( "Pipe original message with headers and insert result as is" ),
+  action = new KAction( i18n( "Pipe Original Message with Headers and Insert Result as Is" ),
                         0, mapper, SLOT( map() ), menu );
   mapper->setMapping( action, CMsgPipe );
   menu->insert( action );
-  action = new KAction( i18n( "Pipe current message body and insert result as is" ),
+  action = new KAction( i18n( "Pipe Current Message Body and Insert Result as Is" ),
                         0, mapper, SLOT( map() ), menu );
   mapper->setMapping( action, CBodyPipe );
   menu->insert( action );
-  action = new KAction( i18n( "Pipe current message body and replace with result" ),
+  action = new KAction( i18n( "Pipe Current Message Body and Replace with Result" ),
                         0, mapper, SLOT( map() ), menu );
   mapper->setMapping( action, CClearPipe );
   menu->insert( action );
@@ -282,11 +282,11 @@
   menu = new KActionMenu( i18n( "Miscellaneous" ), mMenu );
   mMenu->insert( menu );
 
-  action = new KAction( i18n( "Set cursor position" ),
+  action = new KAction( i18n( "Set Cursor Position" ),
                         0, mapper, SLOT( map() ), menu );
   mapper->setMapping( action, CCursor );
   menu->insert( action );
-  action = new KAction( i18n( "Insert file content" ),
+  action = new KAction( i18n( "Insert File Content" ),
                         0, mapper, SLOT( map() ), menu );
   mapper->setMapping( action, CInsert );
   menu->insert( action );
@@ -294,23 +294,23 @@
                         0, mapper, SLOT( map() ), menu );
   mapper->setMapping( action, CDnl );
   menu->insert( action );
-  action = new KAction( i18n( "Template comment" ),
+  action = new KAction( i18n( "Template Comment" ),
                         0, mapper, SLOT( map() ), menu );
   mapper->setMapping( action, CRem );
   menu->insert( action );
-  action = new KAction( i18n( "No operation" ),
+  action = new KAction( i18n( "No Operation" ),
                         0, mapper, SLOT( map() ), menu );
   mapper->setMapping( action, CNop );
   menu->insert( action );
-  action = new KAction( i18n( "Clear generated message" ),
+  action = new KAction( i18n( "Clear Generated Message" ),
                         0, mapper, SLOT( map() ), menu );
   mapper->setMapping( action, CClear );
   menu->insert( action );
-  action = new KAction( i18n( "Turn debug on" ),
+  action = new KAction( i18n( "Turn Debug On" ),
                         0, mapper, SLOT( map() ), menu );
   mapper->setMapping( action, CDebug );
   menu->insert( action );
-  action = new KAction( i18n( "Turn debug off" ),
+  action = new KAction( i18n( "Turn Debug Off" ),
                         0, mapper, SLOT( map() ), menu );
   mapper->setMapping( action, CDebugOff );
   menu->insert( action );
Index: kmail/signatureconfigurator.cpp
===================================================================
--- kmail/signatureconfigurator.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kmail/signatureconfigurator.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -56,7 +56,7 @@
 
     // "enable signatue" checkbox:
     mEnableCheck = new QCheckBox( i18n("&Enable signature"), this );
-    QWhatsThis::add(mEnableCheck, 
+    QWhatsThis::add(mEnableCheck,
         i18n("Check this box if you want KMail to append a signature to mails "
              "written with this identity."));
     vlay->addWidget( mEnableCheck );
@@ -102,7 +102,7 @@
     int pageno = 0;
     // page 0: input field for direct entering:
     mTextEdit = new QTextEdit( widgetStack );
-    QWhatsThis::add(mTextEdit, 
+    QWhatsThis::add(mTextEdit,
         i18n("Use this field to enter an arbitrary static signature."));
     widgetStack->addWidget( mTextEdit, pageno );
     mTextEdit->setFont( KGlobalSettings::fixedFont() );
@@ -118,7 +118,7 @@
     page_vlay = new QVBoxLayout( page, 0, KDialog::spacingHint() );
     hlay = new QHBoxLayout( page_vlay ); // inherits spacing
     mFileRequester = new KURLRequester( page );
-    QWhatsThis::add(mFileRequester, 
+    QWhatsThis::add(mFileRequester,
         i18n("Use this requester to specify a text file that contains your "
              "signature. It will be read every time you create a new mail or "
              "append a new signature."));
@@ -145,7 +145,7 @@
     mCommandEdit = new KLineEdit( page );
     mCommandEdit->setCompletionObject( new KShellCompletion() );
     mCommandEdit->setAutoDeleteCompletionObject( true );
-    QWhatsThis::add(mCommandEdit, 
+    QWhatsThis::add(mCommandEdit,
         i18n("You can add an arbitrary command here, either with or without path "
              "depending on whether or not the command is in your Path. For every "
              "new mail, KMail will execute the command and use what it outputs (to "
@@ -228,25 +228,19 @@
 
 
   Signature SignatureConfigurator::signature() const {
-    switch ( signatureType() ) {
-    case Signature::Inlined:
-      return Signature( inlineText() );
-    case Signature::FromCommand:
-      return Signature( commandURL(), true );
-    case Signature::FromFile:
-      return Signature( fileURL(), false );
-    case Signature::Disabled:
-    default:
-      return Signature();
-    };
+    Signature sig;
+    sig.setType( signatureType() );
+    sig.setText( inlineText() );
+    if ( signatureType() == Signature::FromCommand )
+      sig.setUrl( commandURL(), true );
+    if ( signatureType() == Signature::FromFile )
+      sig.setUrl( fileURL(), false );
+    return sig;
   }
 
   void SignatureConfigurator::setSignature( const Signature & sig ) {
     setSignatureType( sig.type() );
-    if ( sig.type() == Signature::Inlined )
-      setInlineText( sig.text() );
-    else
-      setInlineText( QString::null );
+    setInlineText( sig.text() );
     if ( sig.type() == Signature::FromFile )
       setFileURL( sig.url() );
     else
Index: kmail/folderstorage.cpp
===================================================================
--- kmail/folderstorage.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kmail/folderstorage.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -84,6 +84,8 @@
 
   mHasChildren = HasNoChildren;
   mContentsType = KMail::ContentsTypeMail;
+ 
+  connect(this, SIGNAL(closed(KMFolder*)), mFolder, SIGNAL(closed()));  
 }
 
 //-----------------------------------------------------------------------------
@@ -584,14 +586,14 @@
   KMFolder* msgParent = aMsg->parent();
 
   if (msgParent)
-    msgParent->open();
+    msgParent->open("moveMsgSrc");
 
-  open();
+  open("moveMsgDest");
   int rc = addMsg(aMsg, aIndex_ret);
-  close();
+  close("moveMsgDest");
 
   if (msgParent)
-    msgParent->close();
+    msgParent->close("moveMsgSrc");
 
   return rc;
 }
@@ -604,18 +606,18 @@
   KMFolder* msgParent = aMsg->parent();
 
   if (msgParent)
-    msgParent->open();
+    msgParent->open("foldermovemsg");
 
   QValueList<int> index;
-  open();
+  open("moveMsg");
   int rc = addMsg(msglist, index);
-  close();
+  close("moveMsg");
   // FIXME: we want to have a QValueList to pass it back, so change this method
   if ( !index.isEmpty() )
     aIndex_ret = &index.first();
 
   if (msgParent)
-    msgParent->close();
+    msgParent->close("foldermovemsg");
 
   return rc;
 }
@@ -627,7 +629,7 @@
   QString oldLoc, oldIndexLoc, oldIdsLoc, newLoc, newIndexLoc, newIdsLoc;
   QString oldSubDirLoc, newSubDirLoc;
   QString oldName;
-  int rc=0, openCount=mOpenCount;
+  int rc=0;
   KMFolderDir *oldParent;
 
   assert(!newName.isEmpty());
@@ -638,7 +640,7 @@
   oldIdsLoc =  KMMsgDict::instance()->getFolderIdsLocation( *this );
   QString oldConfigString = "Folder-" + folder()->idString();
 
-  close(true);
+  close("rename", true);
 
   oldName = folder()->fileName();
   oldParent = folder()->parent();
@@ -697,11 +699,6 @@
     }
   }
 
-  if (openCount > 0)
-  {
-    open();
-    mOpenCount = openCount;
-  }
   writeConfig();
 
   // delete the old entry as we get two entries with the same ID otherwise
@@ -711,6 +708,7 @@
   emit locationChanged( oldLoc, newLoc );
   emit nameChanged();
   kmkernel->folderMgr()->contentsChanged();
+  emit closed(folder()); // let the ticket owners regain
   return rc;
 }
 
@@ -721,10 +719,12 @@
   assert(!folder()->name().isEmpty());
 
   clearIndex( true, mExportsSernums ); // delete and remove from dict if necessary
-  close(true);
+  close("remove", true);
 
-  if ( mExportsSernums )
+  if ( mExportsSernums ) {
     KMMsgDict::mutableInstance()->removeFolderIds( *this );
+    mExportsSernums = false;	// do not writeFolderIds after removal
+  }
   unlink(QFile::encodeName(indexLocation()) + ".sorted");
   unlink(QFile::encodeName(indexLocation()));
 
@@ -736,6 +736,7 @@
   KConfig* config = KMKernel::config();
   config->deleteGroup( "Folder-" + folder()->idString() );
 
+  emit closed(folder());
   emit removed(folder(), (rc ? false : true));
 }
 
@@ -743,12 +744,10 @@
 //-----------------------------------------------------------------------------
 int FolderStorage::expunge()
 {
-  int openCount = mOpenCount;
-
   assert(!folder()->name().isEmpty());
 
   clearIndex( true, mExportsSernums );   // delete and remove from dict, if needed
-  close( true );
+  close( "expunge", true );
 
   if ( mExportsSernums )
     KMMsgDict::mutableInstance()->removeFolderIds( *this );
@@ -762,12 +761,6 @@
   mDirty = false;
   needsCompact = false; //we're cleared and truncated no need to compact
 
-  if (openCount > 0)
-  {
-    open();
-    mOpenCount = openCount;
-  }
-
   mUnreadMsgs = 0;
   mTotalMsgs = 0;
   emit numUnreadMsgsChanged( folder() );
@@ -806,9 +799,9 @@
   if (mUnreadMsgs > -1)
     return mUnreadMsgs;
 
-  open(); // will update unreadMsgs
+  open("countunread"); // will update unreadMsgs
   int unread = mUnreadMsgs;
-  close();
+  close("countunread");
   return (unread > 0) ? unread : 0;
 }
 
@@ -905,8 +898,8 @@
 //-----------------------------------------------------------------------------
 void FolderStorage::correctUnreadMsgsCount()
 {
-  open();
-  close();
+  open("countunreadmsg");
+  close("countunreadmsg");
   emit numUnreadMsgsChanged( folder() );
 }
 
@@ -1062,11 +1055,12 @@
 }
 
 //-----------------------------------------------------------------------------
-void FolderStorage::setContentsType( KMail::FolderContentsType type )
+void FolderStorage::setContentsType( KMail::FolderContentsType type, bool quiet )
 {
   if ( type != mContentsType ) {
     mContentsType = type;
-    emit contentsTypeChanged( type );
+    if ( !quiet )
+       emit contentsTypeChanged( type );
   }
 }
 
Index: kmail/copyfolderjob.cpp
===================================================================
--- kmail/copyfolderjob.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 0)
+++ kmail/copyfolderjob.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -0,0 +1,277 @@
+/**
+ *  Copyright (c) 2005 Till Adam <adam@kde.org>
+ *
+ *  This program is free software; you can redistribute it and/or modify
+ *  it under the terms of the GNU General Public License as published by
+ *  the Free Software Foundation; version 2 of the License
+ *
+ *  This program is distributed in the hope that it will be useful,
+ *  but WITHOUT ANY WARRANTY; without even the implied warranty of
+ *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+ *  GNU General Public License for more details.
+ *
+ *  You should have received a copy of the GNU General Public License
+ *  along with this program; if not, write to the Free Software
+ *  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA.
+ *
+ *  In addition, as a special exception, the copyright holders give
+ *  permission to link the code of this program with any edition of
+ *  the Qt library by Trolltech AS, Norway (or with modified versions
+ *  of Qt that use the same license as Qt), and distribute linked
+ *  combinations including the two.  You must obey the GNU General
+ *  Public License in all respects for all of the code used other than
+ *  Qt.  If you modify this file, you may extend this exception to
+ *  your version of the file, but you are not obligated to do so.  If
+ *  you do not wish to do so, delete this exception statement from
+ *  your version.
+ */
+
+#include "copyfolderjob.h"
+#include "folderstorage.h"
+#include "kmacctcachedimap.h"
+#include "kmfoldercachedimap.h"
+#include "kmfolder.h"
+#include "kmfolderdir.h"
+#include "kmfoldertype.h"
+#include "kmfoldermgr.h"
+#include "kmcommands.h"
+#include "kmmsgbase.h"
+#include "undostack.h"
+
+#include <kdebug.h>
+#include <klocale.h>
+#include <config.h>
+
+using namespace KMail;
+
+CopyFolderJob::CopyFolderJob( FolderStorage* const storage, KMFolderDir* const newParent )
+ : FolderJob( 0, tOther, (storage ? storage->folder() : 0) ),
+   mStorage( storage ), mNewParent( newParent ),
+   mNewFolder( 0 ), mChildFolderNodeIterator( *mStorage->folder()->createChildFolder() ),
+   mNextChildFolder( 0 )
+{
+  mStorage->open("copyfolder");
+}
+
+CopyFolderJob::~CopyFolderJob()
+{
+  kdDebug(5006) << k_funcinfo << endl;
+  if ( mNewFolder )
+    mNewFolder->setMoveInProgress( false );
+  if ( mStorage )
+    mStorage->close("copyfolder");
+}
+
+/*
+ * The basic strategy is to first create the target folder, then copy all the mail
+ * from the source to the target folder, then recurse for each of the folder's children
+ */
+void CopyFolderJob::execute()
+{
+  if ( createTargetDir() ) {
+    copyMessagesToTargetDir();
+  }
+}
+
+void CopyFolderJob::copyMessagesToTargetDir()
+{
+  // Hmmmm. Tasty hack. Can I have fries with that?
+  mStorage->blockSignals( true );
+  // move all messages to the new folder
+  QPtrList<KMMsgBase> msgList;
+  for ( int i = 0; i < mStorage->count(); i++ )
+  {
+    const KMMsgBase* msgBase = mStorage->getMsgBase( i );
+    assert( msgBase );
+    msgList.append( msgBase );
+  }
+  if ( msgList.count() == 0 ) {
+    slotCopyNextChild(); // no contents, check subfolders
+    mStorage->blockSignals( false );
+  } else {
+    KMCommand *command = new KMCopyCommand( mNewFolder, msgList );
+    connect( command, SIGNAL( completed( KMCommand * ) ),
+        this, SLOT( slotCopyCompleted( KMCommand * ) ) );
+    command->start();
+  }
+}
+
+void CopyFolderJob::slotCopyCompleted( KMCommand* command )
+{
+  kdDebug(5006) << k_funcinfo << (command?command->result():0) << endl;
+  disconnect( command, SIGNAL( completed( KMCommand * ) ),
+      this, SLOT( slotCopyCompleted( KMCommand * ) ) );
+
+  mStorage->blockSignals( false );
+
+  if ( command && command->result() != KMCommand::OK ) {
+    rollback();
+    return;
+  }
+  // if we have children, recurse
+  if ( mStorage->folder()->child() ) {
+    slotCopyNextChild();
+  } else {
+    emit folderCopyComplete( true );
+    deleteLater();
+  }
+}
+
+void CopyFolderJob::slotCopyNextChild( bool success )
+{
+  //kdDebug(5006) << k_funcinfo << endl;
+  if ( mNextChildFolder )
+    mNextChildFolder->close("copyfoldernext"); // refcount
+  // previous sibling failed
+  if ( !success ) {
+    kdDebug(5006) << "Failed to copy one subfolder, let's not continue:  " << mNewFolder->prettyURL() << endl;
+    rollback();
+    emit folderCopyComplete( false );
+    deleteLater();
+  }
+
+  KMFolderNode* node = mChildFolderNodeIterator.current();
+  while ( node && node->isDir() ) {
+    ++mChildFolderNodeIterator;
+    node = mChildFolderNodeIterator.current();
+  }
+  if ( node ) {
+    mNextChildFolder = static_cast<KMFolder*>(node);
+    ++mChildFolderNodeIterator;
+  } else {
+    // no more children, we are done
+    emit folderCopyComplete( true );
+    deleteLater();
+    return;
+  }
+
+  KMFolderDir * const dir = mNewFolder->createChildFolder();
+  if ( !dir ) {
+    kdDebug(5006) << "Failed to create subfolders of:  " << mNewFolder->prettyURL() << endl;
+    emit folderCopyComplete( false );
+    deleteLater();
+    return;
+  }
+  // let it do its thing and report back when we are ready to do the next sibling
+  mNextChildFolder->open("copyfoldernext"); // refcount
+  FolderJob* job = new CopyFolderJob( mNextChildFolder->storage(), dir);
+  connect( job, SIGNAL( folderCopyComplete( bool ) ),
+           this, SLOT( slotCopyNextChild( bool ) ) );
+  job->start();
+}
+
+
+// FIXME factor into CreateFolderJob and make async, so it works with online imap
+// (create folder code taken from newfolderdialog.cpp)
+bool CopyFolderJob::createTargetDir()
+{
+  // get the default mailbox type
+  KConfig * const config = KMKernel::config();
+  KConfigGroupSaver saver(config, "General");
+  int deftype = config->readNumEntry("default-mailbox-format", 1);
+  if ( deftype < 0 || deftype > 1 ) deftype = 1;
+
+  // the type of the new folder
+  KMFolderType typenew =
+    ( deftype == 0 ) ? KMFolderTypeMbox : KMFolderTypeMaildir;
+  if ( mNewParent->owner() )
+    typenew = mNewParent->owner()->folderType();
+
+  bool success = false, waitForFolderCreation = false;
+
+  if ( mNewParent->owner() && mNewParent->owner()->folderType() == KMFolderTypeImap ) {
+    KMFolderImap* selectedStorage = static_cast<KMFolderImap*>( mNewParent->owner()->storage() );
+    KMAcctImap *anAccount = selectedStorage->account();
+    // check if a connection is available BEFORE creating the folder
+    if (anAccount->makeConnection() == ImapAccountBase::Connected) {
+      mNewFolder = kmkernel->imapFolderMgr()->createFolder( mStorage->folder()->name(), false, typenew, mNewParent );
+      if ( mNewFolder ) {
+        QString imapPath;
+        imapPath = anAccount->createImapPath( selectedStorage->imapPath(), mStorage->folder()->name() );
+        KMFolderImap* newStorage = static_cast<KMFolderImap*>( mNewFolder->storage() );
+        connect( selectedStorage, SIGNAL(folderCreationResult(const QString&, bool)),
+                 this, SLOT(folderCreationDone(const QString&, bool)) );
+        selectedStorage->createFolder(mStorage->folder()->name(), QString::null); // create it on the server
+        newStorage->initializeFrom( selectedStorage, imapPath, QString::null );
+        static_cast<KMFolderImap*>(mNewParent->owner()->storage())->setAccount( selectedStorage->account() );
+        waitForFolderCreation = true;
+        success = true;
+      }
+    }
+  } else if ( mNewParent->owner() && mNewParent->owner()->folderType() == KMFolderTypeCachedImap ) {
+    mNewFolder = kmkernel->dimapFolderMgr()->createFolder( mStorage->folder()->name(), false, typenew, mNewParent );
+    if ( mNewFolder ) {
+      KMFolderCachedImap* selectedStorage = static_cast<KMFolderCachedImap*>( mNewParent->owner()->storage() );
+      KMFolderCachedImap* newStorage = static_cast<KMFolderCachedImap*>( mNewFolder->storage() );
+      newStorage->initializeFrom( selectedStorage );
+      success = true;
+    }
+  } else {
+    // local folder
+    mNewFolder = kmkernel->folderMgr()->createFolder(mStorage->folder()->name(), false, typenew, mNewParent );
+    if ( mNewFolder )
+      success = true;
+  }
+
+  if ( !success ) {
+      kdWarning(5006) << k_funcinfo << "could not create folder" << endl;
+      emit folderCopyComplete( false );
+      deleteLater();
+      return false;
+  }
+
+  mNewFolder->setMoveInProgress( true );
+
+  // inherit the folder type
+  // FIXME we should probably copy over most if not all settings
+  mNewFolder->storage()->setContentsType( mStorage->contentsType(), true /*quiet*/ );
+  mNewFolder->storage()->writeConfig();
+  kdDebug(5006)<< "CopyJob::createTargetDir - " << mStorage->folder()->idString()
+    << " |=> " << mNewFolder->idString() << endl;
+  return !waitForFolderCreation;
+}
+
+
+void CopyFolderJob::rollback()
+{
+  // copy failed - rollback the last transaction
+//   kmkernel->undoStack()->undo();
+  // .. and delete the new folder
+  if ( mNewFolder ) {
+    if ( mNewFolder->folderType() == KMFolderTypeImap )
+    {
+      kmkernel->imapFolderMgr()->remove( mNewFolder );
+    } else if ( mNewFolder->folderType() == KMFolderTypeCachedImap )
+    {
+      // tell the account (see KMFolderCachedImap::listDirectory2)
+      KMFolderCachedImap* folder = static_cast<KMFolderCachedImap*>(mNewFolder->storage());
+      KMAcctCachedImap* acct = folder->account();
+      if ( acct )
+        acct->addDeletedFolder( folder->imapPath() );
+      kmkernel->dimapFolderMgr()->remove( mNewFolder );
+    } else if ( mNewFolder->folderType() == KMFolderTypeSearch )
+    {
+      // invalid
+      kdWarning(5006) << k_funcinfo << "cannot remove a search folder" << endl;
+    } else {
+      kmkernel->folderMgr()->remove( mNewFolder );
+    }
+  }
+
+  emit folderCopyComplete( false );
+  deleteLater();
+}
+
+void CopyFolderJob::folderCreationDone(const QString & name, bool success)
+{
+  if ( mStorage->folder()->name() != name )
+    return; // not our business
+  kdDebug(5006) << k_funcinfo << success << endl;
+
+  if ( !success ) {
+    rollback();
+  } else {
+    copyMessagesToTargetDir();
+  }
+}
+#include "copyfolderjob.moc"

Zmiany atrybutów dla: kmail/copyfolderjob.cpp
___________________________________________________________________
Nazwa: svn:mime-type
   + text/x-c++src
Nazwa: svn:keywords
   + Author Date Id Revision
Nazwa: svn:eol-style
   + native

Index: kmail/configuredialog.cpp
===================================================================
--- kmail/configuredialog.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kmail/configuredialog.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1147,7 +1147,29 @@
            this, SLOT(slotEditNotifications()) );
 }
 
+AccountsPageReceivingTab::~AccountsPageReceivingTab()
+{
+  // When hitting Cancel or closing the dialog with the window-manager-button,
+  // we have a number of things to clean up:
 
+  // The newly created accounts
+  QValueList< QGuardedPtr<KMAccount> >::Iterator it;
+  for (it = mNewAccounts.begin(); it != mNewAccounts.end(); ++it ) {
+    delete (*it);
+  }
+  mNewAccounts.clear();
+
+  // The modified accounts
+  QValueList<ModifiedAccountsType*>::Iterator j;
+  for ( j = mModifiedAccounts.begin() ; j != mModifiedAccounts.end() ; ++j ) {
+    delete (*j)->newAccount;
+    delete (*j);
+  }
+  mModifiedAccounts.clear();
+
+
+}
+
 void AccountsPage::ReceivingTab::slotAccountSelected()
 {
   QListViewItem * item = mAccountList->selectedItem();
@@ -1398,8 +1420,7 @@
   // Add accounts marked as new
   QValueList< QGuardedPtr<KMAccount> >::Iterator it;
   for (it = mNewAccounts.begin(); it != mNewAccounts.end(); ++it ) {
-    kmkernel->acctMgr()->add( *it );
-    (*it)->installTimer();
+    kmkernel->acctMgr()->add( *it ); // calls installTimer too
   }
 
   // Update accounts that have been modified
@@ -2600,7 +2621,7 @@
 
   // recent addresses
   hlay = new QHBoxLayout( vlay ); // inherits spacing
-  QPushButton *recentAddressesBtn = new QPushButton( i18n( "Edit Recent Addresses" ), this );
+  QPushButton *recentAddressesBtn = new QPushButton( i18n( "Edit Recent Addresses..." ), this );
   connect( recentAddressesBtn, SIGNAL( clicked() ),
            this, SLOT( slotConfigureRecentAddresses() ) );
   hlay->addWidget( recentAddressesBtn );
@@ -4469,9 +4490,10 @@
            this, SLOT( slotEmitChanged( void ) ) );
 
   // "Empty &trash on program exit" option:
+  hlay = new QHBoxLayout( vlay ); // inherits spacing
   mEmptyTrashCheck = new QCheckBox( i18n("Empty local &trash folder on program exit"),
                                     this );
-  vlay->addWidget( mEmptyTrashCheck );
+  hlay->addWidget( mEmptyTrashCheck );
   connect( mEmptyTrashCheck, SIGNAL( stateChanged( int ) ),
            this, SLOT( slotEmitChanged( void ) ) );
 
@@ -4483,8 +4505,19 @@
            this, SLOT( slotEmitChanged( void ) ) );
 #endif
 
+  // "Quota Units"
+  hlay = new QHBoxLayout( vlay ); // inherits spacing
+  mQuotaCmbBox = new QComboBox( false, this );
+  label = new QLabel( mQuotaCmbBox,
+                      i18n("Quota units: "), this );
+  mQuotaCmbBox->insertStringList( QStringList()
+                   << i18n("KB")
+                   << i18n("MB")
+                   << i18n("GB") );
+  hlay->addWidget( label );
+  hlay->addWidget( mQuotaCmbBox, 1 );
+  connect( mQuotaCmbBox, SIGNAL( activated( int )  ), this, SLOT( slotEmitChanged( void ) ) );
 
-
   vlay->addStretch( 1 );
 
   // and now: add QWhatsThis:
@@ -4545,6 +4578,7 @@
   mDelayedMarkAsRead->setChecked( GlobalSettings::self()->delayedMarkAsRead() );
   mDelayedMarkTime->setValue( GlobalSettings::self()->delayedMarkTime() );
   mShowPopupAfterDnD->setChecked( GlobalSettings::self()->showPopupAfterDnD() );
+  mQuotaCmbBox->setCurrentItem( GlobalSettings::self()->quotaUnit() );
 }
 
 void MiscPage::FolderTab::doLoadOther() {
@@ -4580,6 +4614,7 @@
   GlobalSettings::self()->setShowPopupAfterDnD( mShowPopupAfterDnD->isChecked() );
   GlobalSettings::self()->setExcludeImportantMailFromExpiry(
         mExcludeImportantFromExpiry->isChecked() );
+  GlobalSettings::self()->setQuotaUnit( mQuotaCmbBox->currentItem() );
 #ifdef HAVE_INDEXLIB
   if ( kmkernel->msgIndex() ) kmkernel->msgIndex()->setEnabled( mIndexingEnabled->isChecked() );
 #endif
@@ -4686,7 +4721,7 @@
 
   mHideGroupwareFolders = new QCheckBox( i18n( "&Hide groupware folders" ),
                                          mBox, "HideGroupwareFoldersBox" );
-  grid->addMultiCellWidget( mHideGroupwareFolders, 3, 3, 0, 1 );
+  grid->addMultiCellWidget( mHideGroupwareFolders, 3, 3, 0, 0 );
   QToolTip::add( mHideGroupwareFolders,
                  i18n( "When this is checked, you will not see the IMAP "
                        "resource folders in the folder tree." ) );
@@ -4695,6 +4730,18 @@
   connect( mHideGroupwareFolders, SIGNAL( toggled( bool ) ),
            this, SLOT( slotEmitChanged() ) );
 
+  mOnlyShowGroupwareFolders = new QCheckBox( i18n( "&Only show groupware folders for this account" ),
+                                         mBox, "OnlyGroupwareFoldersBox" );
+  grid->addMultiCellWidget( mOnlyShowGroupwareFolders, 3, 3, 1, 1 );
+  QToolTip::add( mOnlyShowGroupwareFolders,
+                 i18n( "When this is checked, you will not see normal  "
+                       "mail folders in the folder tree for the account "
+                       "configured for groupware." ) );
+  QWhatsThis::add( mOnlyShowGroupwareFolders, i18n( GlobalSettings::self()
+           ->showOnlyGroupwareFoldersForGroupwareAccountItem()->whatsThis().utf8() ) );
+  connect( mOnlyShowGroupwareFolders, SIGNAL( toggled( bool ) ),
+           this, SLOT( slotEmitChanged() ) );
+
   // Groupware functionality compatibility setup
   b1 = new QVGroupBox( i18n("Groupware Compatibility && Legacy Options"), this );
 
@@ -4779,6 +4826,7 @@
   i = GlobalSettings::self()->theIMAPResourceStorageFormat();
   mStorageFormatCombo->setCurrentItem(i);
   slotStorageFormatChanged( i );
+  mOnlyShowGroupwareFolders->setChecked( GlobalSettings::self()->showOnlyGroupwareFoldersForGroupwareAccount() );
 
   QString folderId( GlobalSettings::self()->theIMAPResourceFolderParent() );
   if( !folderId.isNull() && kmkernel->findFolderById( folderId ) ) {
@@ -4828,6 +4876,7 @@
 
   // Write the IMAP resource config
   GlobalSettings::self()->setHideGroupwareFolders( mHideGroupwareFolders->isChecked() );
+  GlobalSettings::self()->setShowOnlyGroupwareFoldersForGroupwareAccount( mOnlyShowGroupwareFolders->isChecked() );
 
   // If there is a leftover folder in the foldercombo, getFolder can
   // return 0. In that case we really don't have it enabled
Index: kmail/kmfolder.h
===================================================================
--- kmail/kmfolder.h	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kmail/kmfolder.h	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -183,9 +183,6 @@
   /** Checks if the message is already "gotten" with getMsg */
   bool isMessage(int idx);
 
-  /** Read a message and return a referece to a string */
-  QCString& getMsgString(int idx, QCString& mDest);
-
   /** Read a message and returns a DwString */
   DwString getDwString(int idx);
 
@@ -286,7 +283,7 @@
     call close() first.
     Returns zero on success and an error code equal to the c-library
     fopen call otherwise (errno). */
-  int open();
+  int open(const char *owner);
 
   /** Check folder for permissions
     Returns zero if readable and writable. */
@@ -294,7 +291,7 @@
 
   /** Close folder. If force is true the files are closed even if
     others still use it (e.g. other mail reader windows). */
-  void close(bool force=false);
+  void close(const char *owner, bool force=false);
 
   /** fsync buffers to disk */
   void sync();
@@ -527,11 +524,23 @@
   /** Returns true if this folder can be moved */
   bool isMoveable() const;
 
+  /** Returns true if there is currently a move or copy operation going
+      on with this folder as target.
+  */
+  bool moveInProgress() const { return mMoveInProgress; }
+
+  /** Sets the move-in-progress flag. */
+  void setMoveInProgress( bool b ) { mMoveInProgress = b; }
+
 signals:
   /** Emitted when the status, name, or associated accounts of this
     folder changed. */
   void changed();
 
+  /** Emitted when the folder is closed for real - ticket holders should
+   * discard any messages */
+  void closed();
+
   /** Emitted when the contents of a folder have been cleared
      (new search in a search folder, for example) */
   void cleared();
@@ -600,6 +609,7 @@
   bool mIsSystemFolder;
   bool mHasIndex :1;
   bool mExportsSernums :1;
+  bool mMoveInProgress :1;
 
   /** nationalized label or QString::null (then name() should be used) */
   QString mLabel;
@@ -647,10 +657,11 @@
 */
 class KMFolderCloser {
   KMFolder * f;
+  QString mOwner;
 public:
-  KMFolderCloser( KMFolder * folder ) : f( folder ) {}
+  KMFolderCloser( const char *owner, KMFolder * folder ) : f( folder ), mOwner( owner ) {}
   ~KMFolderCloser() {
-    if ( f ) f->close();
+    if ( f ) f->close(mOwner.latin1());
   }
   KMFolder * folder() const { return f; }
 };
Index: kmail/kmfoldermgr.cpp
===================================================================
--- kmail/kmfoldermgr.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kmail/kmfoldermgr.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -29,7 +29,10 @@
 #include "kmfoldermgr.h"
 #include "folderstorage.h"
 #include "renamejob.h"
+#include "copyfolderjob.h"
+
 using KMail::RenameJob;
+using KMail::CopyFolderJob;
 
 //-----------------------------------------------------------------------------
 KMFolderMgr::KMFolderMgr(const QString& aBasePath, KMFolderDirType dirType):
@@ -538,6 +541,14 @@
 }
 
 //-----------------------------------------------------------------------------
+void KMFolderMgr::copyFolder( KMFolder* folder, KMFolderDir *newParent )
+{
+  kdDebug(5006) << "Copy folder: " << folder->prettyURL() << endl;
+  CopyFolderJob* job = new CopyFolderJob( folder->storage(), newParent );
+  job->start();
+}
+
+//-----------------------------------------------------------------------------
 void KMFolderMgr::slotRenameDone( QString, bool success )
 {
   kdDebug(5006) << k_funcinfo << success << endl;
Index: kmail/kmfolderimap.cpp
===================================================================
--- kmail/kmfolderimap.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kmail/kmfolderimap.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -106,19 +106,25 @@
 
 
 //-----------------------------------------------------------------------------
-void KMFolderImap::close(bool aForced)
+void KMFolderImap::close(const char *owner, bool aForced)
 {
-  if (mOpenCount <= 0 ) return;
   if (mOpenCount > 0) mOpenCount--;
-  if (mOpenCount > 0 && !aForced) return;
-  if (isSelected() && !aForced) {
+  if (mOpenCount == 0 && isSelected() && !aForced) {
       kdWarning(5006) << "Trying to close the selected folder " << label() <<
-          " - ignoring!" << endl;
+        " - ignoring! " << kdBacktrace() << endl;
+      mOpenCount++;
       return;
   }
+  if (mOpenCount > 0 && !aForced) {
+    // The inherited close will decrement again, so we have to adjust.
+    mOpenCount++;
+    KMFolderMbox::close(owner, aForced);
+    return;
+  }
+
   // FIXME is this still needed?
-  if (mAccount)
-    mAccount->ignoreJobsForFolder( folder() );
+  if (account())
+    account()->ignoreJobsForFolder( folder() );
   int idx = count();
   while (--idx >= 0) {
     if ( mMsgList[idx]->isMessage() ) {
@@ -127,9 +133,12 @@
           msg->setTransferInProgress( false );
     }
   }
+
+  mCheckingValidity = false;
+
   // The inherited close will decrement again, so we have to adjust.
   mOpenCount++;
-  KMFolderMbox::close(aForced);
+  KMFolderMbox::close(owner, aForced);
 }
 
 KMFolder* KMFolderImap::trashFolder() const
@@ -158,6 +167,26 @@
 }
 
 //-----------------------------------------------------------------------------
+KMAcctImap* KMFolderImap::account() const
+{
+  if ( !mAccount ) {
+    KMFolderDir *parentFolderDir = dynamic_cast<KMFolderDir*>( folder()->parent() );
+    if ( !parentFolderDir ) {
+      kdWarning() << k_funcinfo << "No parent folder dir found for " << name() << endl;
+      return 0;
+    }
+    KMFolder *parentFolder = parentFolderDir->owner();
+    if ( !parentFolder ) {
+      kdWarning() << k_funcinfo << "No parent folder found for " << name() << endl;
+      return 0;
+    }
+    KMFolderImap *parentStorage = dynamic_cast<KMFolderImap*>( parentFolder->storage() );
+    if ( parentStorage )
+      mAccount = parentStorage->account();
+  }
+  return mAccount;
+}
+
 void KMFolderImap::setAccount(KMAcctImap *aAccount)
 {
   mAccount = aAccount;
@@ -209,30 +238,30 @@
 //-----------------------------------------------------------------------------
 void KMFolderImap::remove()
 {
-  if ( mAlreadyRemoved || !mAccount )
+  if ( mAlreadyRemoved || !account() )
   {
     // override
     FolderStorage::remove();
     return;
   }
-  KURL url = mAccount->getUrl();
+  KURL url = account()->getUrl();
   url.setPath(imapPath());
-  if ( mAccount->makeConnection() == ImapAccountBase::Error ||
+  if ( account()->makeConnection() == ImapAccountBase::Error ||
        imapPath().isEmpty() )
   {
     emit removed(folder(), false);
     return;
   }
   KIO::SimpleJob *job = KIO::file_delete(url, FALSE);
-  KIO::Scheduler::assignJobToSlave(mAccount->slave(), job);
+  KIO::Scheduler::assignJobToSlave(account()->slave(), job);
   ImapAccountBase::jobData jd(url.url());
   jd.progressItem = ProgressManager::createProgressItem(
                       "ImapFolderRemove" + ProgressManager::getUniqueID(),
                       i18n("Removing folder"),
                       i18n( "URL: %1" ).arg( QStyleSheet::escape( folder()->prettyURL() ) ),
                       false,
-                      mAccount->useSSL() || mAccount->useTLS() );
-  mAccount->insertJob(job, jd);
+                      account()->useSSL() || account()->useTLS() );
+  account()->insertJob(job, jd);
   connect(job, SIGNAL(result(KIO::Job *)),
           this, SLOT(slotRemoveFolderResult(KIO::Job *)));
 }
@@ -240,14 +269,14 @@
 //-----------------------------------------------------------------------------
 void KMFolderImap::slotRemoveFolderResult(KIO::Job *job)
 {
-  ImapAccountBase::JobIterator it = mAccount->findJob(job);
-  if ( it == mAccount->jobsEnd() ) return;
+  ImapAccountBase::JobIterator it = account()->findJob(job);
+  if ( it == account()->jobsEnd() ) return;
   if (job->error())
   {
-    mAccount->handleJobError( job, i18n("Error while removing a folder.") );
+    account()->handleJobError( job, i18n("Error while removing a folder.") );
     emit removed(folder(), false);
   } else {
-    mAccount->removeJob(it);
+    account()->removeJob(it);
     FolderStorage::remove();
   }
 
@@ -317,7 +346,7 @@
   } else {
     kdDebug(5006) << k_funcinfo << "no parent" << endl;
   }
-  if ( !mAccount->hasCapability("uidplus") ) {
+  if ( !account()->hasCapability("uidplus") ) {
     // Remember the status with the MD5 as key
     // so it can be transfered to the new message
     mMetaDataMap.insert( aMsg->msgIdMD5(),
@@ -339,7 +368,7 @@
   }
   KMFolder *aFolder = msgList.first()->parent();
   int undoId = -1;
-  bool uidplus = mAccount->hasCapability("uidplus");
+  bool uidplus = account()->hasCapability("uidplus");
   for ( KMMessage* msg = msgList.first(); msg; msg = msgList.next() )
   {
     if ( undoId == -1 )
@@ -405,6 +434,8 @@
             imapJob = new ImapJob(msg, ImapJob::tPutMessage, this);
             connect(imapJob, SIGNAL(messageStored(KMMessage*)),
                      SLOT(addMsgQuiet(KMMessage*)));
+            connect(imapJob, SIGNAL(result(KMail::FolderJob*)),
+                SLOT(slotCopyMsgResult(KMail::FolderJob*)));
             imapJob->start();
           }
 
@@ -474,14 +505,16 @@
           i18n("Uploading message data"),
           i18n("Destination folder: %1").arg( QStyleSheet::escape( folder()->prettyURL() ) ),
           true,
-          mAccount->useSSL() || mAccount->useTLS() );
+          account()->useSSL() || account()->useTLS() );
       mAddMessageProgressItem->setTotalItems( msgList.count() );
       connect ( mAddMessageProgressItem, SIGNAL( progressItemCanceled( KPIM::ProgressItem*)),
-          mAccount, SLOT( slotAbortRequested( KPIM::ProgressItem* ) ) );
+          account(), SLOT( slotAbortRequested( KPIM::ProgressItem* ) ) );
       imapJob->setParentProgressItem( mAddMessageProgressItem );
     }
     connect( imapJob, SIGNAL( messageCopied(QPtrList<KMMessage>) ),
         SLOT( addMsgQuiet(QPtrList<KMMessage>) ) );
+    connect( imapJob, SIGNAL(result(KMail::FolderJob*)),
+             SLOT(slotCopyMsgResult(KMail::FolderJob*)) );
     imapJob->start();
   }
 
@@ -491,6 +524,7 @@
 //-----------------------------------------------------------------------------
 void KMFolderImap::slotCopyMsgResult( KMail::FolderJob* job )
 {
+  kdDebug(5006) << k_funcinfo << job->error() << endl;
   if ( job->error() ) // getFolder() will not be called in this case
     emit folderComplete( this, false );
 }
@@ -498,7 +532,7 @@
 //-----------------------------------------------------------------------------
 void KMFolderImap::copyMsg(QPtrList<KMMessage>& msgList)
 {
-  if ( !mAccount->hasCapability("uidplus") ) {
+  if ( !account()->hasCapability("uidplus") ) {
     for ( KMMessage *msg = msgList.first(); msg; msg = msgList.next() ) {
       // Remember the status with the MD5 as key
       // so it can be transfered to the new message
@@ -515,6 +549,10 @@
     QPtrList<KMMessage> temp_msgs = splitMessageList(*it, msgList);
 
     ImapJob *job = new ImapJob(temp_msgs, *it, ImapJob::tCopyMessage, this);
+    connect(job, SIGNAL(messageCopied(QPtrList<KMMessage>)),
+            SLOT(addMsgQuiet(QPtrList<KMMessage>)));
+    connect(job, SIGNAL(result(KMail::FolderJob*)),
+            SLOT(slotCopyMsgResult(KMail::FolderJob*)));
     job->start();
   }
 }
@@ -582,17 +620,17 @@
 //-----------------------------------------------------------------------------
 void KMFolderImap::slotListNamespaces()
 {
-  disconnect( mAccount, SIGNAL( connectionResult(int, const QString&) ),
+  disconnect( account(), SIGNAL( connectionResult(int, const QString&) ),
       this, SLOT( slotListNamespaces() ) );
-  if ( mAccount->makeConnection() == ImapAccountBase::Error )
+  if ( account()->makeConnection() == ImapAccountBase::Error )
   {
     kdWarning(5006) << "slotListNamespaces - got no connection" << endl;
     return;
-  } else if ( mAccount->makeConnection() == ImapAccountBase::Connecting )
+  } else if ( account()->makeConnection() == ImapAccountBase::Connecting )
   {
     // wait for the connectionResult
     kdDebug(5006) << "slotListNamespaces - waiting for connection" << endl;
-    connect( mAccount, SIGNAL( connectionResult(int, const QString&) ),
+    connect( account(), SIGNAL( connectionResult(int, const QString&) ),
         this, SLOT( slotListNamespaces() ) );
     return;
   }
@@ -600,19 +638,19 @@
   // reset subfolder states recursively
   setSubfolderState( imapNoInformation );
   mSubfolderState = imapListingInProgress;
-  mAccount->setHasInbox( false );
+  account()->setHasInbox( false );
 
   ImapAccountBase::ListType type = ImapAccountBase::List;
-  if ( mAccount->onlySubscribedFolders() )
+  if ( account()->onlySubscribedFolders() )
     type = ImapAccountBase::ListSubscribed;
 
-  ImapAccountBase::nsMap map = mAccount->namespaces();
+  ImapAccountBase::nsMap map = account()->namespaces();
   QStringList personal = map[ImapAccountBase::PersonalNS];
   // start personal namespace listing and send it directly to slotListResult
   for ( QStringList::Iterator it = personal.begin(); it != personal.end(); ++it )
   {
-    KMail::ListJob* job = new KMail::ListJob( mAccount, type, this,
-	mAccount->addPathToNamespace( *it ) );
+    KMail::ListJob* job = new KMail::ListJob( account(), type, this,
+	account()->addPathToNamespace( *it ) );
     job->setNamespace( *it );
     connect( job, SIGNAL(receivedFolders(const QStringList&, const QStringList&,
             const QStringList&, const QStringList&, const ImapAccountBase::jobData&)),
@@ -626,7 +664,7 @@
   ns += map[ImapAccountBase::SharedNS];
   for ( QStringList::Iterator it = ns.begin(); it != ns.end(); ++it )
   {
-    KMail::ListJob* job = new  KMail::ListJob( mAccount, type, this, mAccount->addPathToNamespace( *it ) );
+    KMail::ListJob* job = new  KMail::ListJob( account(), type, this, account()->addPathToNamespace( *it ) );
     connect( job, SIGNAL(receivedFolders(const QStringList&, const QStringList&,
             const QStringList&, const QStringList&, const ImapAccountBase::jobData&)),
         this, SLOT(slotCheckNamespace(const QStringList&, const QStringList&,
@@ -647,7 +685,7 @@
   // get a correct foldername:
   // strip / and make sure it does not contain the delimiter
   QString name = jobData.path.mid( 1, jobData.path.length()-2 );
-  name.remove( mAccount->delimiterForNamespace( name ) );
+  name.remove( account()->delimiterForNamespace( name ) );
   if ( name.isEmpty() ) {
     // happens when an empty namespace is defined
     slotListResult( subfolderNames, subfolderPaths,
@@ -678,7 +716,7 @@
     {
       // folder exists so pass on the attributes
       kdDebug(5006) << "found namespace folder " << name << endl;
-      if ( !mAccount->listOnlyOpenFolders() )
+      if ( !account()->listOnlyOpenFolders() )
       {
         KMFolderImap* nsFolder =
           static_cast<KMFolderImap*>(static_cast<KMFolder*>(node)->storage());
@@ -692,10 +730,9 @@
       KMFolder *fld = folder()->child()->createFolder( name );
       if ( fld ) {
         KMFolderImap* f = static_cast<KMFolderImap*> ( fld->storage() );
-        f->initializeFrom( this, mAccount->addPathToNamespace( name ),
+        f->initializeFrom( this, account()->addPathToNamespace( name ),
             "inode/directory" );
-        f->close();
-        if ( !mAccount->listOnlyOpenFolders() )
+        if ( !account()->listOnlyOpenFolders() )
         {
           f->slotListResult( subfolderNames, subfolderPaths,
               subfolderMimeTypes, subfolderAttributes, jobData );
@@ -709,14 +746,14 @@
 //-----------------------------------------------------------------------------
 bool KMFolderImap::listDirectory()
 {
-  if ( !mAccount ||
-       ( mAccount && mAccount->makeConnection() == ImapAccountBase::Error ) )
+  if ( !account() ||
+       ( account() && account()->makeConnection() == ImapAccountBase::Error ) )
   {
     kdDebug(5006) << "KMFolderImap::listDirectory - got no connection" << endl;
     return false;
   }
 
-  if ( this == mAccount->rootFolder() )
+  if ( this == account()->rootFolder() )
   {
     // a new listing started
     slotListNamespaces();
@@ -726,10 +763,11 @@
 
   // get the folders
   ImapAccountBase::ListType type = ImapAccountBase::List;
-  if ( mAccount->onlySubscribedFolders() )
+  if ( account()->onlySubscribedFolders() )
     type = ImapAccountBase::ListSubscribed;
-  KMail::ListJob* job = new  KMail::ListJob( mAccount, type, this );
+  KMail::ListJob* job = new  KMail::ListJob( account(), type, this );
   job->setParentProgressItem( account()->listDirProgressItem() );
+  job->setHonorLocalSubscription( true );
   connect( job, SIGNAL(receivedFolders(const QStringList&, const QStringList&,
           const QStringList&, const QStringList&, const ImapAccountBase::jobData&)),
       this, SLOT(slotListResult(const QStringList&, const QStringList&,
@@ -754,9 +792,9 @@
   // don't react on changes
   kmkernel->imapFolderMgr()->quiet(true);
 
-  bool root = ( this == mAccount->rootFolder() );
+  bool root = ( this == account()->rootFolder() );
   folder()->createChildFolder();
-  if ( root && !mAccount->hasInbox() )
+  if ( root && !account()->hasInbox() )
   {
     // create the INBOX
     initInbox();
@@ -810,7 +848,6 @@
       KMFolder *fld = folder()->child()->createFolder(subfolderNames[i]);
       if ( fld ) {
         f = static_cast<KMFolderImap*> ( fld->storage() );
-        f->close();
         settingsChanged = true;
       } else {
         kdWarning(5006) << "can't create folder " << subfolderNames[i] << endl;
@@ -829,7 +866,7 @@
 
       f->initializeFrom( this, subfolderPaths[i], subfolderMimeTypes[i] );
       f->setChildrenState( subfolderAttributes[i] );
-      if ( mAccount->listOnlyOpenFolders() &&
+      if ( account()->listOnlyOpenFolders() &&
            f->hasChildren() != FolderStorage::ChildrenUnknown )
       {
         settingsChanged = true;
@@ -842,7 +879,7 @@
       }
       if ( ( subfolderMimeTypes[i] == "message/directory" ||
              subfolderMimeTypes[i] == "inode/directory" ) &&
-           !mAccount->listOnlyOpenFolders() )
+           !account()->listOnlyOpenFolders() )
       {
         f->listDirectory();
       }
@@ -875,7 +912,6 @@
     if ( f )
     {
       f->folder()->setLabel( i18n("inbox") );
-      f->close();
     }
     kmkernel->imapFolderMgr()->contentsChanged();
   }
@@ -884,7 +920,7 @@
     f->setChildrenState( QString::null );
   }
   // so we have an INBOX
-  mAccount->setHasInbox( true );
+  account()->setHasInbox( true );
 }
 
 //-----------------------------------------------------------------------------
@@ -919,6 +955,9 @@
     const QString& myNamespace )
 {
   QPtrList<KMFolder> toRemove;
+  if (!folder()->child())
+    return;
+
   KMFolderNode *node = folder()->child()->first();
   while ( node )
   {
@@ -929,14 +968,14 @@
       // as more than one namespace can be listed in the root folder we need to make sure
       // that the folder is within the current namespace
       bool isInNamespace = ( myNamespace.isEmpty() ||
-          myNamespace == mAccount->namespaceForFolder( imapFld ) );
+          myNamespace == account()->namespaceForFolder( imapFld ) );
       kdDebug(5006) << node->name() << " in namespace " << myNamespace << ":" <<
         isInNamespace << endl;
       // ignore some cases
       QString name = node->name();
-      bool ignore = ( ( this == mAccount->rootFolder() ) &&
+      bool ignore = ( ( this == account()->rootFolder() ) &&
           ( imapFld->imapPath() == "/INBOX/" ||
-            mAccount->isNamespaceFolder( name ) ||
+            account()->isNamespaceFolder( name ) ||
 	    !isInNamespace ) );
       // additional sanity check for broken folders
       if ( imapFld->imapPath().isEmpty() ) {
@@ -982,7 +1021,7 @@
     setHasChildren( FolderStorage::HasNoChildren );
   } else
   {
-    if ( mAccount->listOnlyOpenFolders() ) {
+    if ( account()->listOnlyOpenFolders() ) {
       setHasChildren( FolderStorage::HasChildren );
     } else {
       setHasChildren( FolderStorage::ChildrenUnknown );
@@ -993,38 +1032,35 @@
 //-----------------------------------------------------------------------------
 void KMFolderImap::checkValidity()
 {
-  if (!mAccount) {
+  if (!account()) {
     emit folderComplete(this, false);
-    close();
     return;
   }
-  KURL url = mAccount->getUrl();
+  KURL url = account()->getUrl();
   url.setPath(imapPath() + ";UID=0:0");
   kdDebug(5006) << "KMFolderImap::checkValidity of: " << imapPath() << endl;
 
   // Start with a clean slate
-  disconnect( mAccount, SIGNAL( connectionResult(int, const QString&) ),
+  disconnect( account(), SIGNAL( connectionResult(int, const QString&) ),
               this, SLOT( checkValidity() ) );
 
-  KMAcctImap::ConnectionState connectionState = mAccount->makeConnection();
+  KMAcctImap::ConnectionState connectionState = account()->makeConnection();
   if ( connectionState == ImapAccountBase::Error ) {
     kdDebug(5006) << "KMFolderImap::checkValidity - got no connection" << endl;
     emit folderComplete(this, FALSE);
     mContentState = imapNoInformation;
-    close();
     return;
   } else if ( connectionState == ImapAccountBase::Connecting ) {
     // We'll wait for the connectionResult signal from the account. If it
     // errors, the above will catch it.
     kdDebug(5006) << "CheckValidity - waiting for connection" << endl;
-    connect( mAccount, SIGNAL( connectionResult(int, const QString&) ),
+    connect( account(), SIGNAL( connectionResult(int, const QString&) ),
         this, SLOT( checkValidity() ) );
     return;
   }
   // Only check once at a time.
   if (mCheckingValidity) {
     kdDebug(5006) << "KMFolderImap::checkValidity - already checking" << endl;
-    close();
     return;
   }
   // otherwise we already are inside a mailcheck
@@ -1044,10 +1080,11 @@
   if ( account()->mailCheckProgressItem() ) {
     account()->mailCheckProgressItem()->setStatus( folder()->prettyURL() );
   }
+  open( "checkvalidity" );
   ImapAccountBase::jobData jd( url.url() );
   KIO::SimpleJob *job = KIO::get(url, FALSE, FALSE);
-  KIO::Scheduler::assignJobToSlave(mAccount->slave(), job);
-  mAccount->insertJob(job, jd);
+  KIO::Scheduler::assignJobToSlave(account()->slave(), job);
+  account()->insertJob(job, jd);
   connect(job, SIGNAL(result(KIO::Job *)),
           SLOT(slotCheckValidityResult(KIO::Job *)));
   connect(job, SIGNAL(data(KIO::Job *, const QByteArray &)),
@@ -1062,13 +1099,13 @@
 {
   if ( mLastUid > 0 )
       return mLastUid;
-  open();
+  open("lastuid");
   if (count() > 0)
   {
     KMMsgBase * base = getMsgBase(count()-1);
     mLastUid = base->UID();
   }
-  close();
+  close("lastuid");
   return mLastUid;
 }
 
@@ -1076,20 +1113,28 @@
 //-----------------------------------------------------------------------------
 void KMFolderImap::slotCheckValidityResult(KIO::Job * job)
 {
+  // if we closed the folder in between, we don't want this results
+  if (!mCheckingValidity)
+    return;
+
   kdDebug(5006) << "KMFolderImap::slotCheckValidityResult of: " << fileName() << endl;
   mCheckingValidity = false;
-  ImapAccountBase::JobIterator it = mAccount->findJob(job);
-  if ( it == mAccount->jobsEnd() ) return;
-  if (job->error()) {
-    if ( job->error() != KIO::ERR_ACCESS_DENIED ) {
+  ImapAccountBase::JobIterator it = account()->findJob(job);
+  if ( it == account()->jobsEnd() )
+  {
+    // the job has been killed internally, so we're not interested in its results
+    job = 0;
+  }
+  if (!job || job->error()) {
+    if ( job && job->error() != KIO::ERR_ACCESS_DENIED ) {
       // we suppress access denied messages because they are normally a result of
       // explicitely set ACLs. Do not save this information (e.g. setNoContent) so that
       // we notice when this changes
-      mAccount->handleJobError( job, i18n("Error while querying the server status.") );
+      account()->handleJobError( job, i18n("Error while querying the server status.") );
     }
     mContentState = imapNoInformation;
     emit folderComplete(this, FALSE);
-    close();
+    close("checkvalidity");
   } else {
     QCString cstr((*it).data.data(), (*it).data.size() + 1);
     int a = cstr.find("X-uidValidity: ");
@@ -1118,7 +1163,7 @@
        << uidValidity() << " to " << uidv << endl;
       if ( !uidValidity().isEmpty() )
       {
-        mAccount->ignoreJobsForFolder( folder() );
+        account()->ignoreJobsForFolder( folder() );
         mUidMetaDataMap.clear();
       }
       mLastUid = 0;
@@ -1128,7 +1173,7 @@
       if (!mCheckFlags)
         startUid = QString::number(lastUid() + 1);
     }
-    mAccount->removeJob(it);
+    account()->removeJob(it);
     if ( mMailCheckProgressItem )
     {
       if ( startUid.isEmpty() ) {
@@ -1143,6 +1188,7 @@
       mMailCheckProgressItem->setCompletedItems( 0 );
     }
     reallyGetFolder(startUid);
+    close("checkvalidity");
   }
 }
 
@@ -1152,8 +1198,8 @@
   if (mNoContent)
     return getFolder(force);
 
-  if ( mAccount )
-    mAccount->processNewMailSingleFolder( folder() );
+  if ( account() )
+    account()->processNewMailSingleFolder( folder() );
   if (force) {
     // force an update
     mCheckFlags = TRUE;
@@ -1170,25 +1216,25 @@
     emit folderComplete(this, true);
     return;
   }
-  open();
+  open("getfolder");
   mContentState = imapListingInProgress;
   if (force) {
     // force an update
     mCheckFlags = TRUE;
   }
   checkValidity();
+  close( "getfolder" );
 }
 
 
 //-----------------------------------------------------------------------------
 void KMFolderImap::reallyGetFolder(const QString &startUid)
 {
-  KURL url = mAccount->getUrl();
-  if ( mAccount->makeConnection() != ImapAccountBase::Connected )
+  KURL url = account()->getUrl();
+  if ( account()->makeConnection() != ImapAccountBase::Connected )
   {
     mContentState = imapNoInformation;
     emit folderComplete(this, FALSE);
-    close();
     return;
   }
   quiet(true);
@@ -1198,10 +1244,11 @@
       mMailCheckProgressItem->setStatus( i18n("Retrieving message status") );
     url.setPath(imapPath() + ";SECTION=UID FLAGS");
     KIO::SimpleJob *job = KIO::listDir(url, FALSE);
-    KIO::Scheduler::assignJobToSlave(mAccount->slave(), job);
+    open( "listfolder" );
+    KIO::Scheduler::assignJobToSlave(account()->slave(), job);
     ImapAccountBase::jobData jd( url.url(), folder() );
     jd.cancellable = true;
-    mAccount->insertJob(job, jd);
+    account()->insertJob(job, jd);
     connect(job, SIGNAL(result(KIO::Job *)),
             this, SLOT(slotListFolderResult(KIO::Job *)));
     connect(job, SIGNAL(entries(KIO::Job *, const KIO::UDSEntryList &)),
@@ -1214,10 +1261,11 @@
     url.setPath(imapPath() + ";UID=" + startUid
       + ":*;SECTION=ENVELOPE");
     KIO::SimpleJob *newJob = KIO::get(url, FALSE, FALSE);
-    KIO::Scheduler::assignJobToSlave(mAccount->slave(), newJob);
+    KIO::Scheduler::assignJobToSlave(account()->slave(), newJob);
     ImapAccountBase::jobData jd( url.url(), folder() );
     jd.cancellable = true;
-    mAccount->insertJob(newJob, jd);
+    open( "getMessage" );
+    account()->insertJob(newJob, jd);
     connect(newJob, SIGNAL(result(KIO::Job *)),
             this, SLOT(slotGetLastMessagesResult(KIO::Job *)));
     connect(newJob, SIGNAL(data(KIO::Job *, const QByteArray &)),
@@ -1229,15 +1277,15 @@
 //-----------------------------------------------------------------------------
 void KMFolderImap::slotListFolderResult(KIO::Job * job)
 {
-  ImapAccountBase::JobIterator it = mAccount->findJob(job);
-  if ( it == mAccount->jobsEnd() ) return;
+  ImapAccountBase::JobIterator it = account()->findJob(job);
+  if ( it == account()->jobsEnd() ) return;
   QString uids;
   if (job->error())
   {
-    mAccount->handleJobError( job,
+    account()->handleJobError( job,
          i18n("Error while listing the contents of the folder %1.").arg( label() ) );
-    mAccount->removeJob(it);
-    finishMailCheck( imapNoInformation );
+    account()->removeJob(it);
+    finishMailCheck( "listfolder", imapNoInformation );
     return;
   }
   mCheckFlags = FALSE;
@@ -1290,8 +1338,8 @@
   jd.total = (*it).items.count();
   if (jd.total == 0)
   {
-    finishMailCheck( imapFinished );
-    mAccount->removeJob(it);
+    finishMailCheck( "listfolder", imapFinished );
+    account()->removeJob(it);
     return;
   }
   if ( mMailCheckProgressItem )
@@ -1307,18 +1355,23 @@
   uid = (*it).items.begin();
   if (jd.total == 1) sets.append(*uid + ":" + *uid);
   else sets = makeSets( (*it).items );
-  mAccount->removeJob(it); // don't use *it below
+  account()->removeJob(it); // don't use *it below
 
+  if ( !sets.isEmpty() )
+    open( "getMessage" );
+
+  close( "listfolder" );
+
   // Now kick off the getting of envelopes for the new mails in the folder
   for (QStringList::Iterator i = sets.begin(); i != sets.end(); ++i)
   {
     mContentState = imapDownloadInProgress;
-    KURL url = mAccount->getUrl();
+    KURL url = account()->getUrl();
     url.setPath(imapPath() + ";UID=" + *i + ";SECTION=ENVELOPE");
     KIO::SimpleJob *newJob = KIO::get(url, FALSE, FALSE);
     jd.url = url.url();
-    KIO::Scheduler::assignJobToSlave(mAccount->slave(), newJob);
-    mAccount->insertJob(newJob, jd);
+    KIO::Scheduler::assignJobToSlave(account()->slave(), newJob);
+    account()->insertJob(newJob, jd);
     connect(newJob, SIGNAL(result(KIO::Job *)),
         this, (i == sets.at(sets.count() - 1))
         ? SLOT(slotGetLastMessagesResult(KIO::Job *))
@@ -1333,8 +1386,8 @@
 void KMFolderImap::slotListFolderEntries(KIO::Job * job,
   const KIO::UDSEntryList & uds)
 {
-  ImapAccountBase::JobIterator it = mAccount->findJob(job);
-  if ( it == mAccount->jobsEnd() ) return;
+  ImapAccountBase::JobIterator it = account()->findJob(job);
+  if ( it == account()->jobsEnd() ) return;
   QString mimeType, name;
   long int flags = 0;
   for (KIO::UDSEntryList::ConstIterator udsIt = uds.begin();
@@ -1452,8 +1505,8 @@
 void KMFolderImap::slotGetMessagesData(KIO::Job * job, const QByteArray & data)
 {
   if ( data.isEmpty() ) return; // optimization
-  ImapAccountBase::JobIterator it = mAccount->findJob(job);
-  if ( it == mAccount->jobsEnd() ) return;
+  ImapAccountBase::JobIterator it = account()->findJob(job);
+  if ( it == account()->jobsEnd() ) return;
   (*it).cdata += QCString(data, data.size() + 1);
   int pos = (*it).cdata.find("\r\n--IMAPDIGEST");
   if ( pos == -1 ) {
@@ -1475,7 +1528,7 @@
       if ( ok && exists < count() ) {
         kdDebug(5006) << "KMFolderImap::slotGetMessagesData - server has less messages (" <<
           exists << ") then folder (" << count() << "), so reload" << endl;
-        open();
+        open("getMessage");
         reallyGetFolder( QString::null );
         (*it).cdata.remove(0, pos);
         return;
@@ -1488,6 +1541,7 @@
     }
     (*it).cdata.remove(0, pos);
   }
+  open("digestsplit");
   pos = (*it).cdata.find("\r\n--IMAPDIGEST", 1);
   int flags;
   while (pos >= 0)
@@ -1527,7 +1581,7 @@
         // Transfer the status, if it is cached.
         if ( md ) {
           msg->setStatus( md->status() );
-        } else if ( !mAccount->hasCapability("uidplus") ) {
+        } else if ( !account()->hasCapability("uidplus") ) {
           // see if we have cached the msgIdMD5 and get the status +
           // serial number from there
           QString id = msg->msgIdMD5();
@@ -1552,8 +1606,8 @@
         }
         // Filter messages that have arrived in the inbox folder
         if ( folder()->isSystemFolder() && imapPath() == "/INBOX/"
-            && kmkernel->filterMgr()->atLeastOneIncomingFilterAppliesTo( mAccount->id() ) )
-            mAccount->execFilters( msg->getMsgSerNum() );
+            && kmkernel->filterMgr()->atLeastOneIncomingFilterAppliesTo( account()->id() ) )
+            account()->execFilters( msg->getMsgSerNum() );
 
         if ( count() > 1 ) {
           unGetMsg(count() - 1);
@@ -1569,6 +1623,7 @@
     (*it).done++;
     pos = (*it).cdata.find("\r\n--IMAPDIGEST", 1);
   } // while
+  close("digestsplit");
 }
 
 //-------------------------------------------------------------
@@ -1579,7 +1634,7 @@
 {
   KMFolderImap* kmfi = folder? dynamic_cast<KMFolderImap*>(folder->storage()) : 0;
   if ( jt == FolderJob::tGetMessage && partSpecifier == "STRUCTURE" &&
-       mAccount && mAccount->loadOnDemand() &&
+       account() && account()->loadOnDemand() &&
        ( msg->msgSizeServer() > 5000 || msg->msgSizeServer() == 0 ) &&
        ( msg->signatureState() == KMMsgNotSigned ||
          msg->signatureState() == KMMsgSignatureStateUnknown ) &&
@@ -1619,16 +1674,16 @@
 //-----------------------------------------------------------------------------
 void KMFolderImap::getMessagesResult(KIO::Job * job, bool lastSet)
 {
-  ImapAccountBase::JobIterator it = mAccount->findJob(job);
-  if ( it == mAccount->jobsEnd() ) return;
+  ImapAccountBase::JobIterator it = account()->findJob(job);
+  if ( it == account()->jobsEnd() ) return;
   if (job->error()) {
-    mAccount->handleJobError( job, i18n("Error while retrieving messages.") );
-    finishMailCheck( imapNoInformation );
+    account()->handleJobError( job, i18n("Error while retrieving messages.") );
+    finishMailCheck( "getMessage", imapNoInformation );
     return;
   }
   if (lastSet) {
-    finishMailCheck( imapFinished );
-    mAccount->removeJob(it);
+    finishMailCheck( "getMessage", imapFinished );
+    account()->removeJob(it);
   }
 }
 
@@ -1653,23 +1708,23 @@
 {
   kdDebug(5006) << "KMFolderImap::createFolder - name=" << name << ",parent=" <<
     parentPath << ",askUser=" << askUser << endl;
-  if ( mAccount->makeConnection() != ImapAccountBase::Connected ) {
+  if ( account()->makeConnection() != ImapAccountBase::Connected ) {
     kdWarning(5006) << "KMFolderImap::createFolder - got no connection" << endl;
     return;
   }
-  KURL url = mAccount->getUrl();
+  KURL url = account()->getUrl();
   QString parent = ( parentPath.isEmpty() ? imapPath() : parentPath );
-  QString path = mAccount->createImapPath( parent, name );
+  QString path = account()->createImapPath( parent, name );
   if ( askUser ) {
     path += "/;INFO=ASKUSER";
   }
   url.setPath( path );
 
   KIO::SimpleJob *job = KIO::mkdir(url);
-  KIO::Scheduler::assignJobToSlave(mAccount->slave(), job);
+  KIO::Scheduler::assignJobToSlave(account()->slave(), job);
   ImapAccountBase::jobData jd( url.url(), folder() );
   jd.items = name;
-  mAccount->insertJob(job, jd);
+  account()->insertJob(job, jd);
   connect(job, SIGNAL(result(KIO::Job *)),
           this, SLOT(slotCreateFolderResult(KIO::Job *)));
 }
@@ -1678,18 +1733,25 @@
 //-----------------------------------------------------------------------------
 void KMFolderImap::slotCreateFolderResult(KIO::Job * job)
 {
-  ImapAccountBase::JobIterator it = mAccount->findJob(job);
-  if ( it == mAccount->jobsEnd() ) return;
+  ImapAccountBase::JobIterator it = account()->findJob(job);
+  if ( it == account()->jobsEnd() ) return;
+
+  QString name;
+  if ( it.data().items.count() > 0 )
+    name = it.data().items.first();
+
   if (job->error())
   {
     if ( job->error() == KIO::ERR_COULD_NOT_MKDIR ) {
       // Creating a folder failed, remove it from the tree.
-      mAccount->listDirectory( );
+      account()->listDirectory( );
     }
-    mAccount->handleJobError( job, i18n("Error while creating a folder.") );
+    account()->handleJobError( job, i18n("Error while creating a folder.") );
+    emit folderCreationResult( name, false );
   } else {
     listDirectory();
-    mAccount->removeJob(job);
+    account()->removeJob(job);
+    emit folderCreationResult( name, true );
   }
 }
 
@@ -1722,8 +1784,8 @@
 //-----------------------------------------------------------------------------
 bool KMFolderImap::autoExpunge()
 {
-  if (mAccount)
-    return mAccount->autoExpunge();
+  if (account())
+    return account()->autoExpunge();
 
   return false;
 }
@@ -1733,8 +1795,8 @@
 void KMFolderImap::slotSimpleData(KIO::Job * job, const QByteArray & data)
 {
   if ( data.isEmpty() ) return; // optimization
-  ImapAccountBase::JobIterator it = mAccount->findJob(job);
-  if ( it == mAccount->jobsEnd() ) return;
+  ImapAccountBase::JobIterator it = account()->findJob(job);
+  if ( it == account()->jobsEnd() ) return;
   QBuffer buff((*it).data);
   buff.open(IO_WriteOnly | IO_Append);
   buff.writeBlock(data.data(), data.size());
@@ -1746,7 +1808,7 @@
 {
   mUidMetaDataMap.remove( msg->UID() );
   mMetaDataMap.remove( msg->msgIdMD5() );
-  KURL url = mAccount->getUrl();
+  KURL url = account()->getUrl();
   KMFolderImap *msg_parent = static_cast<KMFolderImap*>(msg->storage());
   ulong uid = msg->UID();
   /* If the uid is empty the delete job below will nuke all mail in the
@@ -1758,14 +1820,14 @@
      return;
   }
   url.setPath(msg_parent->imapPath() + ";UID=" + QString::number(uid) );
-  if ( mAccount->makeConnection() != ImapAccountBase::Connected )
+  if ( account()->makeConnection() != ImapAccountBase::Connected )
     return;
   KIO::SimpleJob *job = KIO::file_delete(url, FALSE);
-  KIO::Scheduler::assignJobToSlave(mAccount->slave(), job);
+  KIO::Scheduler::assignJobToSlave(account()->slave(), job);
   ImapAccountBase::jobData jd( url.url(), 0 );
-  mAccount->insertJob(job, jd);
+  account()->insertJob(job, jd);
   connect(job, SIGNAL(result(KIO::Job *)),
-          mAccount, SLOT(slotSimpleResult(KIO::Job *)));
+          account(), SLOT(slotSimpleResult(KIO::Job *)));
 }
 
 void KMFolderImap::deleteMessage(const QPtrList<KMMessage>& msgList)
@@ -1782,7 +1844,7 @@
   getUids(msgList, uids);
   QStringList sets = makeSets(uids);
 
-  KURL url = mAccount->getUrl();
+  KURL url = account()->getUrl();
   KMFolderImap *msg_parent = static_cast<KMFolderImap*>(msgList.getFirst()->storage());
   for ( QStringList::Iterator it = sets.begin(); it != sets.end(); ++it )
   {
@@ -1791,14 +1853,14 @@
     // better safe than sorry.
     if ( uid.isEmpty() ) continue;
     url.setPath(msg_parent->imapPath() + ";UID=" + uid);
-    if ( mAccount->makeConnection() != ImapAccountBase::Connected )
+    if ( account()->makeConnection() != ImapAccountBase::Connected )
       return;
     KIO::SimpleJob *job = KIO::file_delete(url, FALSE);
-    KIO::Scheduler::assignJobToSlave(mAccount->slave(), job);
+    KIO::Scheduler::assignJobToSlave(account()->slave(), job);
     ImapAccountBase::jobData jd( url.url(), 0 );
-    mAccount->insertJob(job, jd);
+    account()->insertJob(job, jd);
     connect(job, SIGNAL(result(KIO::Job *)),
-        mAccount, SLOT(slotSimpleResult(KIO::Job *)));
+        account(), SLOT(slotSimpleResult(KIO::Job *)));
   }
 }
 
@@ -1811,6 +1873,7 @@
 
 void KMFolderImap::setStatus(QValueList<int>& ids, KMMsgStatus status, bool toggle)
 {
+  open( "setstatus" );
   FolderStorage::setStatus(ids, status, toggle);
   if (mReadOnly) return;
 
@@ -1842,7 +1905,7 @@
      // Send off a status setting job for each set.
      for (  QStringList::Iterator slit = sets.begin(); slit != sets.end(); ++slit ) {
        QString imappath = imapPath() + ";UID=" + ( *slit );
-       mAccount->setImapStatus(folder(), imappath, flags);
+       account()->setImapStatus(folder(), imappath, flags);
      }
   }
   if ( mContentState == imapListingInProgress ) {
@@ -1854,6 +1917,7 @@
     quiet( false );
     reallyGetFolder( QString::null );
   }
+  close( "setstatus" );
 }
 
 //-----------------------------------------------------------------------------
@@ -1948,24 +2012,24 @@
 void KMFolderImap::expungeFolder(KMFolderImap * aFolder, bool quiet)
 {
   aFolder->setNeedsCompacting(FALSE);
-  KURL url = mAccount->getUrl();
+  KURL url = account()->getUrl();
   url.setPath(aFolder->imapPath() + ";UID=*");
-  if ( mAccount->makeConnection() != ImapAccountBase::Connected )
+  if ( account()->makeConnection() != ImapAccountBase::Connected )
     return;
   KIO::SimpleJob *job = KIO::file_delete(url, FALSE);
-  KIO::Scheduler::assignJobToSlave(mAccount->slave(), job);
+  KIO::Scheduler::assignJobToSlave(account()->slave(), job);
   ImapAccountBase::jobData jd( url.url(), 0 );
   jd.quiet = quiet;
-  mAccount->insertJob(job, jd);
+  account()->insertJob(job, jd);
   connect(job, SIGNAL(result(KIO::Job *)),
-          mAccount, SLOT(slotSimpleResult(KIO::Job *)));
+          account(), SLOT(slotSimpleResult(KIO::Job *)));
 }
 
 //-----------------------------------------------------------------------------
 void KMFolderImap::slotProcessNewMail( int errorCode, const QString &errorMsg )
 {
   Q_UNUSED( errorMsg );
-  disconnect( mAccount, SIGNAL( connectionResult(int, const QString&) ),
+  disconnect( account(), SIGNAL( connectionResult(int, const QString&) ),
               this, SLOT( slotProcessNewMail(int, const QString&) ) );
   if ( !errorCode )
     processNewMail( false );
@@ -1977,7 +2041,7 @@
 bool KMFolderImap::processNewMail(bool)
 {
    // a little safety
-  if ( !mAccount ) {
+  if ( !account() ) {
     kdDebug(5006) << "KMFolderImap::processNewMail - account is null!" << endl;
     return false;
   }
@@ -1989,18 +2053,18 @@
     return false;
   }
   // check the connection
-  if ( mAccount->makeConnection() == ImapAccountBase::Error ) {
+  if ( account()->makeConnection() == ImapAccountBase::Error ) {
     kdDebug(5006) << "KMFolderImap::processNewMail - got no connection!" << endl;
     return false;
-  } else if ( mAccount->makeConnection() == ImapAccountBase::Connecting )
+  } else if ( account()->makeConnection() == ImapAccountBase::Connecting )
   {
     // wait
     kdDebug(5006) << "KMFolderImap::processNewMail - waiting for connection: " << label() << endl;
-    connect( mAccount, SIGNAL( connectionResult(int, const QString&) ),
+    connect( account(), SIGNAL( connectionResult(int, const QString&) ),
         this, SLOT( slotProcessNewMail(int, const QString&) ) );
     return true;
   }
-  KURL url = mAccount->getUrl();
+  KURL url = account()->getUrl();
   if (mReadOnly)
     url.setPath(imapPath() + ";SECTION=UIDNEXT");
   else
@@ -2015,10 +2079,10 @@
               account()->useSSL() || account()->useTLS() );
 
   KIO::SimpleJob *job = KIO::stat(url, FALSE);
-  KIO::Scheduler::assignJobToSlave(mAccount->slave(), job);
+  KIO::Scheduler::assignJobToSlave(account()->slave(), job);
   ImapAccountBase::jobData jd(url.url(), folder() );
   jd.cancellable = true;
-  mAccount->insertJob(job, jd);
+  account()->insertJob(job, jd);
   connect(job, SIGNAL(result(KIO::Job *)),
           SLOT(slotStatResult(KIO::Job *)));
   return true;
@@ -2029,12 +2093,12 @@
 void KMFolderImap::slotStatResult(KIO::Job * job)
 {
   slotCompleteMailCheckProgress();
-  ImapAccountBase::JobIterator it = mAccount->findJob(job);
-  if ( it == mAccount->jobsEnd() ) return;
-  mAccount->removeJob(it);
+  ImapAccountBase::JobIterator it = account()->findJob(job);
+  if ( it == account()->jobsEnd() ) return;
+  account()->removeJob(it);
   if (job->error())
   {
-    mAccount->handleJobError( job, i18n("Error while getting folder information.") );
+    account()->handleJobError( job, i18n("Error while getting folder information.") );
   } else {
     KIO::UDSEntry uds = static_cast<KIO::StatJob*>(job)->statResult();
     for (KIO::UDSEntry::ConstIterator it = uds.begin(); it != uds.end(); it++)
@@ -2120,17 +2184,17 @@
   int rc = KMFolderMbox::expungeContents();
 
   // set the deleted flag for all messages in the folder
-  KURL url = mAccount->getUrl();
+  KURL url = account()->getUrl();
   url.setPath( imapPath() + ";UID=1:*");
-  if ( mAccount->makeConnection() == ImapAccountBase::Connected )
+  if ( account()->makeConnection() == ImapAccountBase::Connected )
   {
     KIO::SimpleJob *job = KIO::file_delete(url, FALSE);
-    KIO::Scheduler::assignJobToSlave(mAccount->slave(), job);
+    KIO::Scheduler::assignJobToSlave(account()->slave(), job);
     ImapAccountBase::jobData jd( url.url(), 0 );
     jd.quiet = true;
-    mAccount->insertJob(job, jd);
+    account()->insertJob(job, jd);
     connect(job, SIGNAL(result(KIO::Job *)),
-            mAccount, SLOT(slotSimpleResult(KIO::Job *)));
+            account(), SLOT(slotSimpleResult(KIO::Job *)));
   }
   /* Is the below correct? If we are expunging (in the folder sense, not the imap sense),
      why delete but not (imap-)expunge? Since the folder is not active there is no concept
@@ -2210,7 +2274,7 @@
 void KMFolderImap::slotCreatePendingFolders( int errorCode, const QString& errorMsg )
 {
   Q_UNUSED( errorMsg );
-  disconnect( mAccount, SIGNAL( connectionResult( int, const QString& ) ),
+  disconnect( account(), SIGNAL( connectionResult( int, const QString& ) ),
               this, SLOT( slotCreatePendingFolders( int, const QString& ) ) );
   if ( !errorCode ) {
     QStringList::Iterator it = mFoldersPendingCreation.begin();
@@ -2231,7 +2295,7 @@
     emit searchResult( folder(), serNums, pattern, true );
     return;
   }
-  SearchJob* job = new SearchJob( this, mAccount, pattern );
+  SearchJob* job = new SearchJob( this, account(), pattern );
   connect( job, SIGNAL( searchDone( QValueList<Q_UINT32>, const KMSearchPattern*, bool ) ),
            this, SLOT( slotSearchDone( QValueList<Q_UINT32>, const KMSearchPattern*, bool ) ) );
   job->start();
@@ -2254,7 +2318,7 @@
     emit searchDone( folder(), serNum, pattern, false );
     return;
   }
-  SearchJob* job = new SearchJob( this, mAccount, pattern, serNum );
+  SearchJob* job = new SearchJob( this, account(), pattern, serNum );
   connect( job, SIGNAL( searchDone( Q_UINT32, const KMSearchPattern*, bool ) ),
            this, SLOT( slotSearchDone( Q_UINT32, const KMSearchPattern*, bool ) ) );
   job->start();
@@ -2306,12 +2370,12 @@
   }
 }
 
-void KMFolderImap::finishMailCheck( imapState state )
+void KMFolderImap::finishMailCheck( const char *dbg, imapState state )
 {
   quiet( false );
   mContentState = state;
   emit folderComplete( this, mContentState == imapFinished );
-  close();
+  close(dbg);
 }
 
 #include "kmfolderimap.moc"
Index: kmail/popaccount.cpp
===================================================================
--- kmail/popaccount.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kmail/popaccount.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -285,7 +285,6 @@
 //-----------------------------------------------------------------------------
 void PopAccount::connectJob() {
   KIO::Scheduler::assignJobToSlave(mSlave, job);
-  if (stage != Dele)
   connect(job, SIGNAL( data( KIO::Job*, const QByteArray &)),
          SLOT( slotData( KIO::Job*, const QByteArray &)));
   connect(job, SIGNAL( result( KIO::Job * ) ),
Index: kmail/kmail_config_appearance.desktop
===================================================================
--- kmail/kmail_config_appearance.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kmail/kmail_config_appearance.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -13,7 +13,8 @@
 X-KDE-CfgDlgHierarchy=KMail
 
 Name=Appearance
-Name[be]=Зьнешні выгляд
+Name[ar]=المظهر
+Name[be]=Знешні выгляд
 Name[bg]=Външен вид
 Name[br]=Neuziadur
 Name[bs]=Izgled
@@ -37,12 +38,14 @@
 Name[is]=Útlit
 Name[it]=Aspetto
 Name[ja]=外観
+Name[kk]=Сыртқы көрінісі
 Name[km]=រូបរាង
 Name[lt]=Išvaizda
 Name[mk]=Изглед
 Name[ms]=Rupa
 Name[nb]=Utseende
 Name[nds]=Utsehn
+Name[ne]=मोहडा
 Name[nl]=Uiterlijk
 Name[nn]=Utsjånad
 Name[pl]=Wygląd
@@ -71,7 +74,7 @@
 Comment[cy]=Addasu Golwg
 Comment[da]=Brugerindstil visuelt udseende
 Comment[de]=Erscheinungsbild anpassen
-Comment[el]=Προσαρμογή Εμφάνισης
+Comment[el]=Προσαρμογή εμφάνισης
 Comment[en_GB]=Customise Visual Appearance
 Comment[es]=Apariencia visual personalizada
 Comment[et]=Välimuse seadistused
@@ -85,11 +88,14 @@
 Comment[is]=Stilla útlit
 Comment[it]=Personalizza l'aspetto
 Comment[ja]=外観をカスタマイズ
+Comment[kk]=Сыртқы көрінісін ыңғайлау
 Comment[km]=ប្ដូរ​រូបរាង​មើល​ឃើញ​តាម​បំណង
 Comment[lt]=Derinti vizualinę išvaizdą
+Comment[mk]=Приспособете ја визуелната појава
 Comment[ms]=Suaikan Rupa Visual
 Comment[nb]=Tilpass visuelt utseende
 Comment[nds]=Utsehn topassen
+Comment[ne]=दृश्यात्मक मोहडा अनुकूल गर्नुहोस्
 Comment[nl]=Pas het uiterlijk aan
 Comment[nn]=Tilpass utsjånad
 Comment[pl]=Zmiana wyglądu
@@ -109,7 +115,6 @@
 Comment[zh_CN]=自定义视觉外观
 Comment[zh_TW]=調整視覺顯示
 Keywords=kmail,appearance
-Keywords[be]=K Пошта,зьнешні выгляд,kmail,appearance
 Keywords[bg]=пощенски, клиент, е-поща, външен, вид, външност, появяване kmail, appearance
 Keywords[br]=kmail,neuziadur
 Keywords[bs]=kmail,appearance,izgled
@@ -133,9 +138,11 @@
 Keywords[ja]=kmail,外観
 Keywords[km]=kmail,រូបរាង
 Keywords[lt]=kmail,appearance,išvaizda
+Keywords[mk]=kmail,appearance,кпошта,појава,изглед,визуелно
 Keywords[ms]=kmail,rupa
 Keywords[nb]=kmail,utseende
 Keywords[nds]=KMail,Utsehn
+Keywords[ne]=केडीई मेल, मोहडा
 Keywords[nl]=kmail,uiterlijk
 Keywords[nn]=KMail,utsjånad
 Keywords[pl]=kmail,wygląd
Index: kmail/kmfoldermbox.cpp
===================================================================
--- kmail/kmfoldermbox.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kmail/kmfoldermbox.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -84,19 +84,22 @@
 //-----------------------------------------------------------------------------
 KMFolderMbox::~KMFolderMbox()
 {
-  if (mOpenCount>0) close(true);
+  if (mOpenCount>0) close("~kmfoldermbox", true);
   if (kmkernel->undoStack()) kmkernel->undoStack()->folderDestroyed( folder() );
 }
 
 //-----------------------------------------------------------------------------
-int KMFolderMbox::open()
+int KMFolderMbox::open(const char *owner)
 {
   int rc = 0;
 
   mOpenCount++;
   kmkernel->jobScheduler()->notifyOpeningFolder( folder() );
 
-  if (mOpenCount > 1) return 0;  // already open
+  if (mOpenCount > 1) {
+     assert(mStream);
+     return 0;  // already open
+  }
 
   assert(!folder()->name().isEmpty());
 
@@ -253,11 +256,15 @@
 
 
 //-----------------------------------------------------------------------------
-void KMFolderMbox::close(bool aForced)
+void KMFolderMbox::close(const char *owner, bool aForced)
 {
-  if (mOpenCount <= 0 || !mStream) return;
+  if (!aForced)
+     assert(mOpenCount >= 0);
+
+  if (mOpenCount <= 0 || !mStream) { mOpenCount = 0; return; }
   if (mOpenCount > 0) mOpenCount--;
-  if (mOpenCount > 0 && !aForced) return;
+  if (mOpenCount > 0 && !aForced) { assert(mStream); return; }
+
 #if 0 // removed hack that prevented closing system folders (see kmail-devel discussion about mail expiring)
   if ( (folder() != kmkernel->inboxFolder())
         && folder()->isSystemFolder() && !aForced )
@@ -661,7 +668,7 @@
             int cidx = contentTypeStr.find( "charset=" );
             if ( cidx != -1 ) {
               charset = contentTypeStr.mid( cidx + 8 );
-              if ( charset[0] == '"' ) {
+              if ( !charset.isEmpty() && ( charset[0] == '"' ) ) {
                 charset = charset.mid( 1 );
               }
               cidx = 0;
@@ -870,12 +877,12 @@
 }
 
 //static
-QCString KMFolderMbox::escapeFrom( const QCString & str ) {
+QByteArray KMFolderMbox::escapeFrom( const DwString & str ) {
   const unsigned int strLen = str.length();
   if ( strLen <= STRDIM("From ") )
-    return str;
+    return KMail::Util::ByteArray( str );
   // worst case: \nFrom_\nFrom_\nFrom_... => grows to 7/6
-  QCString result( int( strLen + 5 ) / 6 * 7 + 1 );
+  QByteArray result( int( strLen + 5 ) / 6 * 7 + 1 );
 
   const char * s = str.data();
   const char * const e = s + strLen - STRDIM("From ");
@@ -909,29 +916,6 @@
 #undef STRDIM
 
 //-----------------------------------------------------------------------------
-QCString& KMFolderMbox::getMsgString(int idx, QCString &mDest)
-{
-  unsigned long msgSize;
-  KMMsgInfo* mi = (KMMsgInfo*)mMsgList[idx];
-
-  assert(mi!=0);
-  assert(mStream != 0);
-
-  msgSize = mi->msgSize();
-  mDest.resize(msgSize+2);
-
-  fseek(mStream, mi->folderOffset(), SEEK_SET);
-  fread(mDest.data(), msgSize, 1, mStream);
-  mDest[msgSize] = '\0';
-
-  size_t newMsgSize = unescapeFrom( mDest.data(), msgSize );
-  newMsgSize = KMail::Util::crlf2lf( mDest.data(), newMsgSize );
-
-  return mDest;
-}
-
-
-//-----------------------------------------------------------------------------
 DwString KMFolderMbox::getDwString(int idx)
 {
   KMMsgInfo* mi = (KMMsgInfo*)mMsgList[idx];
@@ -961,7 +945,7 @@
 {
   if (!canAddMsgNow(aMsg, aIndex_ret)) return 0;
   bool opened = false;
-  QCString msgText;
+  QByteArray msgText;
   char endStr[3];
   int idx = -1, rc;
   KMFolder* msgParent;
@@ -971,7 +955,7 @@
   if (!mStream)
   {
     opened = true;
-    rc = open();
+    rc = open("mboxaddMsg");
     kdDebug(5006) << "KMFolderMBox::addMsg-open: " << rc << " of folder: " << label() << endl;
     if (rc) return rc;
   }
@@ -1018,15 +1002,15 @@
     if (aMsg->headerField("Content-Type").isEmpty())  // This might be added by
       aMsg->removeHeaderField("Content-Type");        // the line above
   }
-  msgText = escapeFrom( aMsg->asString() );
-  size_t len = msgText.length();
+  msgText = escapeFrom( aMsg->asDwString() );
+  size_t len = msgText.size();
 
   assert(mStream != 0);
   clearerr(mStream);
   if (len <= 0)
   {
     kdDebug(5006) << "Message added to folder `" << name() << "' contains no data. Ignoring it." << endl;
-    if (opened) close();
+    if (opened) close("mboxaddMsg");
     return 0;
   }
 
@@ -1052,14 +1036,14 @@
   int error = ferror(mStream);
   if (error)
   {
-    if (opened) close();
+    if (opened) close("mboxaddMsg");
     return error;
   }
 
   QCString messageSeparator( aMsg->mboxMessageSeparator() );
   fwrite( messageSeparator.data(), messageSeparator.length(), 1, mStream );
   off_t offs = ftell(mStream);
-  fwrite(msgText, len, 1, mStream);
+  fwrite(msgText.data(), len, 1, mStream);
   if (msgText[(int)len-1]!='\n') fwrite("\n\n", 1, 2, mStream);
   fflush(mStream);
   size_t size = ftell(mStream) - offs;
@@ -1173,7 +1157,7 @@
   // some "paper work"
   if (aIndex_ret) *aIndex_ret = idx;
   emitMsgAddedSignals(idx);
-  if (opened) close();
+  if (opened) close("mboxaddMsg");
 
   // All streams have been flushed without errors if we arrive here
   // Return success!
@@ -1262,17 +1246,11 @@
 {
   // This is called only when the user explicitely requests compaction,
   // so we don't check needsCompact.
-  int openCount = mOpenCount;
 
   KMail::MboxCompactionJob* job = new KMail::MboxCompactionJob( folder(), true /*immediate*/ );
   int rc = job->executeNow( silent );
   // Note that job autodeletes itself.
 
-  if (openCount > 0)
-  {
-    open();
-    mOpenCount = openCount;
-  }
   // If this is the current folder, the changed signal will ultimately call
   // KMHeaders::setFolderInfoStatus which will override the message, so save/restore it
   QString statusMsg = BroadcastStatus::instance()->statusMsg();
Index: kmail/folderdiaquotatab.cpp
===================================================================
--- kmail/folderdiaquotatab.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 0)
+++ kmail/folderdiaquotatab.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -0,0 +1,215 @@
+// -*- mode: C++; c-file-style: "gnu" -*-
+/**
+ * folderdiaquotatab.cpp
+ *
+ * Copyright (c) 2006 Till Adam <adam@kde.org>
+ *
+ *
+ *  This program is free software; you can redistribute it and/or modify
+ *  it under the terms of the GNU General Public License as published by
+ *  the Free Software Foundation; version 2 of the License
+ *
+ *  This program is distributed in the hope that it will be useful,
+ *  but WITHOUT ANY WARRANTY; without even the implied warranty of
+ *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+ *  GNU General Public License for more details.
+ *
+ *  You should have received a copy of the GNU General Public License
+ *  along with this program; if not, write to the Free Software
+ *  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA.
+ *
+ *  In addition, as a special exception, the copyright holders give
+ *  permission to link the code of this program with any edition of
+ *  the Qt library by Trolltech AS, Norway (or with modified versions
+ *  of Qt that use the same license as Qt), and distribute linked
+ *  combinations including the two.  You must obey the GNU General
+ *  Public License in all respects for all of the code used other than
+ *  Qt.  If you modify this file, you may extend this exception to
+ *  your version of the file, but you are not obligated to do so.  If
+ *  you do not wish to do so, delete this exception statement from
+ *  your version.
+ */
+
+#include "folderdiaquotatab.h"
+#include "kmfolder.h"
+#include "kmfoldertype.h"
+#include "kmfolderimap.h"
+#include "kmfoldercachedimap.h"
+#include "kmacctcachedimap.h"
+#include "imapaccountbase.h"
+
+#include <qwidgetstack.h>
+#include <qlayout.h>
+#include <qlabel.h>
+#include <qprogressbar.h>
+#include <qwhatsthis.h>
+
+#include "folderdiaquotatab_p.h"
+
+#include <assert.h>
+
+using namespace KMail;
+
+KMail::FolderDiaQuotaTab::FolderDiaQuotaTab( KMFolderDialog* dlg, QWidget* parent, const char* name )
+  : FolderDiaTab( parent, name ),
+    mImapAccount( 0 ),
+    mDlg( dlg )
+{
+  QVBoxLayout* topLayout = new QVBoxLayout( this );
+  // We need a widget stack to show either a label ("no qutoa support", "please wait"...)
+  // or quota info
+  mStack = new QWidgetStack( this );
+  topLayout->addWidget( mStack );
+
+  mLabel = new QLabel( mStack );
+  mLabel->setAlignment( AlignHCenter | AlignVCenter | WordBreak );
+  mStack->addWidget( mLabel );
+
+  mQuotaWidget = new KMail::QuotaWidget( mStack );
+}
+
+
+void KMail::FolderDiaQuotaTab::initializeWithValuesFromFolder( KMFolder* folder )
+{
+  // This can be simplified once KMFolderImap and KMFolderCachedImap have a common base class
+  mFolderType = folder->folderType();
+  if ( mFolderType == KMFolderTypeImap ) {
+    KMFolderImap* folderImap = static_cast<KMFolderImap*>( folder->storage() );
+    mImapAccount = folderImap->account();
+    mImapPath = folderImap->imapPath();
+  }
+  else if ( mFolderType == KMFolderTypeCachedImap ) {
+    KMFolderCachedImap* folderImap = static_cast<KMFolderCachedImap*>( folder->storage() );
+    mImapAccount = folderImap->account();
+    mQuotaInfo = folderImap->quotaInfo();
+  }
+  else
+    assert( 0 ); // see KMFolderDialog constructor
+}
+
+void KMail::FolderDiaQuotaTab::load()
+{
+  if ( mDlg->folder() ) {
+    // existing folder
+    initializeWithValuesFromFolder( mDlg->folder() );
+  } else if ( mDlg->parentFolder() ) {
+    // new folder
+    initializeWithValuesFromFolder( mDlg->parentFolder() );
+  }
+
+  if ( mFolderType == KMFolderTypeCachedImap ) {
+    showQuotaWidget();
+    return;
+  }
+
+  assert( mFolderType == KMFolderTypeImap );
+
+  // Loading, for online IMAP, consists of two steps:
+  // 1) connect
+  // 2) get quota info
+
+  // First ensure we are connected
+  mStack->raiseWidget( mLabel );
+  if ( !mImapAccount ) { // hmmm?
+    mLabel->setText( i18n( "Error: no IMAP account defined for this folder" ) );
+    return;
+  }
+  KMFolder* folder = mDlg->folder() ? mDlg->folder() : mDlg->parentFolder();
+  if ( folder && folder->storage() == mImapAccount->rootFolder() )
+    return; // nothing to be done for the (virtual) account folder
+  mLabel->setText( i18n( "Connecting to server %1, please wait..." ).arg( mImapAccount->host() ) );
+  ImapAccountBase::ConnectionState state = mImapAccount->makeConnection();
+  if ( state == ImapAccountBase::Error ) { // Cancelled by user, or slave can't start
+    slotConnectionResult( -1, QString::null );
+  } else if ( state == ImapAccountBase::Connecting ) {
+    connect( mImapAccount, SIGNAL( connectionResult(int, const QString&) ),
+             this, SLOT( slotConnectionResult(int, const QString&) ) );
+  } else { // Connected
+    slotConnectionResult( 0, QString::null );
+  }
+
+}
+
+void KMail::FolderDiaQuotaTab::slotConnectionResult( int errorCode, const QString& errorMsg )
+{
+  disconnect( mImapAccount, SIGNAL( connectionResult(int, const QString&) ),
+              this, SLOT( slotConnectionResult(int, const QString&) ) );
+  if ( errorCode ) {
+    if ( errorCode == -1 )  // unspecified error
+      mLabel->setText( i18n( "Error connecting to server %1" ).arg( mImapAccount->host() ) );
+    else
+      // Connection error (error message box already shown by the account)
+      mLabel->setText( KIO::buildErrorString( errorCode, errorMsg ) );
+    return;
+  }
+  connect( mImapAccount, SIGNAL( receivedStorageQuotaInfo( KMFolder*, KIO::Job*, const KMail::QuotaInfo& ) ),
+          this, SLOT( slotReceivedQuotaInfo( KMFolder*, KIO::Job*, const KMail::QuotaInfo& ) ) );
+  KMFolder* folder = mDlg->folder() ? mDlg->folder() : mDlg->parentFolder();
+  mImapAccount->getStorageQuotaInfo( folder, mImapPath );
+}
+
+void KMail::FolderDiaQuotaTab::slotReceivedQuotaInfo( KMFolder* folder,
+                                                      KIO::Job* job,
+                                                      const KMail::QuotaInfo& info )
+{
+  if ( folder == mDlg->folder() ? mDlg->folder() : mDlg->parentFolder() ) {
+    //KMFolderImap* folderImap = static_cast<KMFolderImap*>( folder->storage() );
+
+    disconnect( mImapAccount, SIGNAL(receivedStorageQuotaInfo( KMFolder*, KIO::Job*, const KMail::QuotaInfo& )),
+                this, SLOT(slotReceivedQuotaInfo( KMFolder*, KIO::Job*, const KMail::QuotaInfo& )) );
+
+    if ( job && job->error() ) {
+      if ( job->error() == KIO::ERR_UNSUPPORTED_ACTION )
+        mLabel->setText( i18n( "This account does not have support for quota information." ) );
+      else
+        mLabel->setText( i18n( "Error retrieving quota information from server\n%1" ).arg( job->errorString() ) );
+    } else {
+      mQuotaInfo = info;
+    }
+    showQuotaWidget();
+  }
+}
+
+void KMail::FolderDiaQuotaTab::showQuotaWidget()
+{
+  if ( !mQuotaInfo.isValid() ) {
+    if ( !mImapAccount->hasQuotaSupport() ) {
+      mLabel->setText( i18n( "This account does not have support for quota information." ) );
+    }
+  } else {
+    if ( !mQuotaInfo.isEmpty() ) {
+      mStack->raiseWidget( mQuotaWidget );
+      mQuotaWidget->setQuotaInfo( mQuotaInfo );
+    } else {
+      mLabel->setText( i18n( "No quota is set for this folder." ) );
+    }
+  }
+}
+
+
+KMail::FolderDiaTab::AcceptStatus KMail::FolderDiaQuotaTab::accept()
+{
+  if ( mFolderType == KMFolderTypeCachedImap || mFolderType == KMFolderTypeImap )
+    return Accepted;
+  else
+    assert(0);
+  return Accepted; // our code sanity checker doesn't know there is no coming back from assert(0)
+}
+
+bool KMail::FolderDiaQuotaTab::save()
+{
+  // nothing to do, we are read-only
+  return true;
+}
+
+bool KMail::FolderDiaQuotaTab::supports( KMFolder* refFolder )
+{
+  ImapAccountBase* imapAccount = 0;
+  if ( refFolder->folderType() == KMFolderTypeImap )
+    imapAccount = static_cast<KMFolderImap*>( refFolder->storage() )->account();
+  else if ( refFolder->folderType() == KMFolderTypeCachedImap )
+    imapAccount = static_cast<KMFolderCachedImap*>( refFolder->storage() )->account();
+  return imapAccount && imapAccount->hasQuotaSupport(); // support for Quotas (or not tried connecting yet)
+}
+
+#include "folderdiaquotatab.moc"
Index: kmail/kmfolderindex.cpp
===================================================================
--- kmail/kmfolderindex.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kmail/kmfolderindex.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -463,11 +463,11 @@
 
 void KMFolderIndex::fillMessageDict()
 {
-  open();
+  open("fillDict");
   for (unsigned int idx = 0; idx < mMsgList.high(); idx++)
     if ( mMsgList.at( idx ) )
       KMMsgDict::mutableInstance()->insert(0, mMsgList.at( idx ), idx);
-  close();
+  close("fillDict");
 }
 
 
Index: kmail/kmfolder.cpp
===================================================================
--- kmail/kmfolder.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kmail/kmfolder.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -51,6 +51,7 @@
     mIsSystemFolder( false ),
     mHasIndex( withIndex ),
     mExportsSernums( exportedSernums ),
+    mMoveInProgress( false ),
     mExpireMessages( false ), mUnreadExpireAge( 28 ),
     mReadExpireAge( 14 ), mUnreadExpireUnits( expireNever ),
     mReadExpireUnits( expireNever ),
@@ -320,11 +321,6 @@
   return mStorage->isMessage( idx );
 }
 
-QCString& KMFolder::getMsgString( int idx, QCString& mDest )
-{
-  return mStorage->getMsgString( idx,  mDest );
-}
-
 DwString KMFolder::getDwString( int idx )
 {
   return mStorage->getDwString( idx );
@@ -374,7 +370,7 @@
   return mStorage->take( idx );
 }
 
-void KMFolder::take( QPtrList<KMMessage> msgList )
+void KMFolder::take( QPtrList<KMMessage> msgList ) // TODO const ref
 {
   mStorage->take( msgList );
 }
@@ -404,7 +400,7 @@
   mStorage->removeMsg( i, imapQuiet );
 }
 
-void KMFolder::removeMsg( QPtrList<KMMessage> msgList, bool imapQuiet )
+void KMFolder::removeMsg( QPtrList<KMMessage> msgList, bool imapQuiet ) // TODO const ref
 {
   mStorage->removeMsg( msgList, imapQuiet );
 }
@@ -426,12 +422,12 @@
 
 int KMFolder::find( const KMMsgBase* msg ) const
 {
-  return mStorage->find( msg );
+  return mStorage ? mStorage->find( msg ) : 0;
 }
 
 int KMFolder::find( const KMMessage* msg ) const
 {
-  return mStorage->find( msg );
+  return mStorage ? mStorage->find( msg ) : 0;
 }
 
 int KMFolder::count( bool cache ) const
@@ -468,9 +464,9 @@
   mStorage->msgStatusChanged( oldStatus, newStatus, idx );
 }
 
-int KMFolder::open()
+int KMFolder::open(const char *owner)
 {
-  return mStorage->open();
+  return mStorage->open(owner);
 }
 
 int KMFolder::canAccess()
@@ -478,9 +474,10 @@
   return mStorage->canAccess();
 }
 
-void KMFolder::close( bool force )
+void KMFolder::close( const char *owner, bool force )
 {
-  mStorage->close( force );
+  // do not emit closed() in here - as this would regain too early
+  mStorage->close( owner, force );
 }
 
 void KMFolder::sync()
@@ -631,11 +628,13 @@
         mWhoField = "From";
       if ( this == kmkernel->outboxFolder() ||
            this == kmkernel->sentFolder() ||
-           this == kmkernel->draftsFolder() )
+           this == kmkernel->draftsFolder() ||
+           this == kmkernel->templatesFolder() )
         mWhoField = "To";
-    } else if ( identity.drafts() == idString()
-                || identity.fcc() == idString() )
-      // drafts or sent of the identity
+    } else if ( identity.drafts() == idString() ||
+                identity.templates() == idString() ||
+                identity.fcc() == idString() )
+      // drafts, templates or sent of the identity
       mWhoField = "To";
     else
       mWhoField = "From";
@@ -836,7 +835,7 @@
 
 bool KMFolder::isMoveable() const
 {
-  return mStorage->isMoveable();
+  return !isSystemFolder();
 }
 
 void KMFolder::slotContentsTypeChanged( KMail::FolderContentsType type )
Index: kmail/quotajobs.h
===================================================================
--- kmail/quotajobs.h	(.../tags/KDE/3.5.6/kdepim)	(wersja 0)
+++ kmail/quotajobs.h	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -0,0 +1,188 @@
+/**
+ * quotajobs.h
+ *
+ * Copyright (c) 2006 Till Adam <adam@kde.org>
+ *
+ *
+ *  This program is free software; you can redistribute it and/or modify
+ *  it under the terms of the GNU General Public License as published by
+ *  the Free Software Foundation; version 2 of the License
+ *
+ *  This program is distributed in the hope that it will be useful,
+ *  but WITHOUT ANY WARRANTY; without even the implied warranty of
+ *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+ *  GNU General Public License for more details.
+ *
+ *  You should have received a copy of the GNU General Public License
+ *  along with this program; if not, write to the Free Software
+ *  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA.
+ *
+ *  In addition, as a special exception, the copyright holders give
+ *  permission to link the code of this program with any edition of
+ *  the Qt library by Trolltech AS, Norway (or with modified versions
+ *  of Qt that use the same license as Qt), and distribute linked
+ *  combinations including the two.  You must obey the GNU General
+ *  Public License in all respects for all of the code used other than
+ *  Qt.  If you modify this file, you may extend this exception to
+ *  your version of the file, but you are not obligated to do so.  If
+ *  you do not wish to do so, delete this exception statement from
+ *  your version.
+ */
+
+#ifndef QUOTAJOBS_H
+#define QUOTAJOBS_H
+
+#include <qvariant.h>
+
+#include <kio/job.h>
+#include <klocale.h>
+#include <qvaluevector.h>
+
+#include <math.h>
+
+#include "globalsettings.h"
+
+namespace KMail {
+
+// One quota entry consisting of a name, the quota root,
+// the current value and the maximal value
+class QuotaInfo {
+  public :
+  QuotaInfo() {} // for QValueVector
+  QuotaInfo( const QString& _name, const QString& _root, const QVariant& _current, const QVariant& _max )
+    : mName( _name ), mRoot( _root ), mCurrent( _current ),mMax( _max )  {}
+  bool isValid() const { return !mName.isEmpty(); }
+  bool isEmpty() const { return mName.isEmpty() || ( mRoot.isEmpty() && !mCurrent.isValid() && !mMax.isValid() ); }
+
+  QString name() const { return mName; }
+  void setName( const QString& n ) { mName = n; }
+  QString root() const { return mRoot; }
+  void setRoot( const QString& r ) { mRoot = r; }
+  QVariant max() const { return mMax; }
+  void setMax( const QVariant& m ) { mMax = m; }
+  QVariant current() const { return mCurrent; }
+  void setCurrent( const QVariant& c ) { mCurrent = c; }
+
+  QString toString() const {
+    if ( isValid() && !isEmpty() ) {
+      readConfig();
+      int factor = static_cast<int> ( pow( 1000, mFactor ) );
+      return i18n("%1 of %2 %3 used").arg( mCurrent.toInt() / factor )
+                                .arg( mMax.toInt() / factor ).arg( mUnits );
+    }
+    return QString();
+  }
+
+ private:
+  void readConfig() const {
+      if( GlobalSettings::self()->quotaUnit() == GlobalSettings::EnumQuotaUnit::KB )
+      {
+            mUnits = i18n("KB");
+            mFactor = 0;
+      }
+      else if( GlobalSettings::self()->quotaUnit() == GlobalSettings::EnumQuotaUnit::MB )
+           {
+                mUnits = i18n("MB");
+                mFactor = 1;
+           }
+      else if( GlobalSettings::self()->quotaUnit() == GlobalSettings::EnumQuotaUnit::GB )
+           {
+               mUnits = i18n("GB");
+               mFactor = 2;
+           }
+   }
+
+  QString mName;  // e.g. STORAGE
+  QString mRoot; /// e.g. INBOX
+  QVariant mCurrent;
+  QVariant mMax;
+  mutable QString mUnits; //used by readConfig (const) privately and is modified
+  mutable int mFactor;
+};
+
+typedef QValueVector<QuotaInfo> QuotaInfoList;
+
+/**
+ * This namespace contains functions that return jobs for quota operations.
+ *
+ * The current implementation is tied to IMAP.
+ * If someone wants to extend this to other protocols, turn the namespace into a class
+ * and use virtual methods.
+ */
+namespace QuotaJobs {
+
+class GetQuotarootJob;
+/**
+ * Get the quotaroots for a mailbox
+ * @param slave Slave object the job should be assigned to
+ * @param url URL for which to get the quotaroot
+ */
+GetQuotarootJob* getQuotaroot( KIO::Slave* slave, const KURL& url );
+
+class GetStorageQuotaJob;
+/**
+ * Get the storage quota for a mailbox, if there is one.
+ * @param slave Slave object the job should be assigned to
+ * @param url URL for which to get the storage quota
+ */
+GetStorageQuotaJob* getStorageQuota( KIO::Slave* slave, const KURL& url );
+
+/// for getQuotaroot()
+class GetQuotarootJob : public KIO::SimpleJob
+{
+  Q_OBJECT
+public:
+  GetQuotarootJob( const KURL& url, const QByteArray &packedArgs, bool showProgressInfo );
+
+signals:
+  /** Emitted when the server returns a (potentially empty) list of
+   * quota roots for the specified mailbox.
+   * @param roots List of quota roots for the mailbox
+   */
+  void quotaRootResult( const QStringList& roots );
+
+  /**
+   * Emitted when the server returns a list of quota infos for the specified
+   * mailbox. This is an aggregate of all quotas for all applicable roots for
+   * the mailbox. It happens as a side effect of root listing.
+   * @param info List of quota infos for the mailbox
+   */
+  void quotaInfoReceived( const QuotaInfoList& info );
+
+protected slots:
+  void slotInfoMessage( KIO::Job*, const QString& );
+};
+
+/// for getStorageQuota()
+class GetStorageQuotaJob : public KIO::Job
+{
+  Q_OBJECT
+public:
+  GetStorageQuotaJob( KIO::Slave* slave, const KURL& url );
+
+  /**  Returns the storage quota info, if any, can be queried on result(). */
+  QuotaInfo storageQuotaInfo() const;
+
+signals:
+  /** Emitted to indicate that storage quota information has
+   * been received. Is not emitted if there is no such info
+   * on the server, so users need to rely on the normal
+   * result() signal to be informed when the job is done.
+   */
+  void storageQuotaResult( const QuotaInfo& info );
+
+
+protected slots:
+  void slotQuotarootResult( const QStringList& roots );
+  void slotQuotaInfoReceived( const QuotaInfoList& roots );
+private:
+  QuotaInfo mStorageQuotaInfo;
+};
+
+} // QuotaJobs namespace
+
+} // KMail namespace
+
+
+#endif /* QUOTAJOBS_H */
+
Index: kmail/recipientseditor.cpp
===================================================================
--- kmail/recipientseditor.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kmail/recipientseditor.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -318,8 +318,9 @@
 // ------------ RecipientsView ---------------------
 
 RecipientsView::RecipientsView( QWidget *parent )
-  : QScrollView( parent ), mCurDelLine( 0 ), mModified( false ),
-    mFirstColumnWidth( 0 ), mLineHeight( 0 )
+  : QScrollView( parent ), mCurDelLine( 0 ),
+    mLineHeight( 0 ), mFirstColumnWidth( 0 ),
+    mModified( false )
 {
   mCompletionMode = KGlobalSettings::completionMode();
   setHScrollBarMode( AlwaysOff );
@@ -609,7 +610,7 @@
     ++it;
   }
   if ( line )
-    line->clear();
+    line->slotPropagateDeletion();
 }
 
 bool RecipientsView::isModified()
Index: kmail/accountwizard.cpp
===================================================================
--- kmail/accountwizard.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kmail/accountwizard.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -491,7 +491,10 @@
 void AccountWizard::accountCreated()
 {
   if ( mAccount )
+  {
     mKernel->acctMgr()->add( mAccount );
+    mKernel->cleanupImapFolders();
+  }
 
   finished();
 }
Index: kmail/kmfolderimap.h
===================================================================
--- kmail/kmfolderimap.h	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kmail/kmfolderimap.h	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -109,7 +109,7 @@
   virtual KMMessage* getMsg(int idx);
   /** The path to the imap folder on the server */
   void setImapPath( const QString &path );
-  QString imapPath() { return mImapPath; }
+  QString imapPath() const { return mImapPath; }
 
   /** The highest UID in the folder */
   ulong lastUid();
@@ -120,7 +120,7 @@
 
   /** The imap account associated with this folder */
   void setAccount(KMAcctImap *acct);
-  KMAcctImap* account() const { return mAccount; }
+  KMAcctImap* account() const;
 
   /** Remove (first occurrence of) given message from the folder. */
   virtual void removeMsg(int i, bool quiet = FALSE);
@@ -131,6 +131,11 @@
   /** Remove the IMAP folder on the server and if successful also locally */
   virtual void remove();
 
+  /** Close folder. If force is TRUE the files are closed even if
+    others still use it (e.g. other mail reader windows). This also
+    cancels all pending jobs. */
+  virtual void close(const char *owner, bool force=FALSE);
+
   /** Automatically expunge deleted messages when leaving the folder */
   bool autoExpunge();
 
@@ -169,7 +174,7 @@
    * that contain messages _or_ folders the new folder is set to "contains messages"
    * by default
    */
-  void createFolder(const QString &name, 
+  void createFolder(const QString &name,
       const QString& imapPath = QString::null, bool askUser = true);
 
   /**
@@ -244,7 +249,7 @@
   /**
    * Return the filename of the folder (reimplemented from KFolder)
    */
-  virtual QString fileName() const { 
+  virtual QString fileName() const {
     return encodeFileName( KMFolderMbox::fileName() ); }
 
   /**
@@ -256,7 +261,7 @@
    * Save the metadata for the UID
    * If the UID is not supplied the one from the message is taken
    */
-  void saveMsgMetaData( KMMessage* msg, ulong uid = 0 ); 
+  void saveMsgMetaData( KMMessage* msg, ulong uid = 0 );
 
   /**
    * Splits a uid-set into single uids
@@ -277,11 +282,6 @@
   /** imap folders cannot expire */
   virtual bool isAutoExpire() const { return false; }
 
-  /** Close folder. If force is TRUE the files are closed even if
-    others still use it (e.g. other mail reader windows). This also
-    cancels all pending jobs. */
-  virtual void close(bool force=FALSE);
-
   void setCheckingValidity( bool val ) { mCheckingValidity = val; }
 
   /** Return the trash folder. */
@@ -306,7 +306,7 @@
   /** Set the user's rights on this folder - called by getUserRights */
   void setUserRights( unsigned int userRights );
 
-  /** 
+  /**
     * Search for messages
     * The actual search is done in slotSearch and the end
     * is signaled with searchDone()
@@ -333,6 +333,13 @@
    */
   void directoryListingFinished(KMFolderImap*);
 
+  /**
+   * Emitted when a folder creation has finished.
+   * @param name The name of the folder that should have been created.
+   * @param success True if the folder was created, false otherwise.
+   */
+  void folderCreationResult( const QString &name, bool success );
+
 public slots:
   /** Add a message to a folder after is has been added on an IMAP server */
   virtual void addMsgQuiet(KMMessage *);
@@ -369,7 +376,7 @@
 
   /**
    * Connected to the result signal of the copy/move job
-   */ 
+   */
   void slotCopyMsgResult( KMail::FolderJob* job );
 
   /**
@@ -382,7 +389,7 @@
   /**
    * Called from the SearchJob when the message was searched
    */
-  void slotSearchDone( Q_UINT32 serNum, const KMSearchPattern* pattern, bool matches ); 
+  void slotSearchDone( Q_UINT32 serNum, const KMSearchPattern* pattern, bool matches );
 
   /**
    * Connected to ListJob::receivedFolders
@@ -423,7 +430,7 @@
   /** See if all folders are still present on server, otherwise delete them */
   void checkFolders( const QStringList& folderNames, const QString& ns );
 
-  void finishMailCheck( imapState state );
+  void finishMailCheck( const char *func, imapState state );
 
 protected slots:
 
@@ -486,7 +493,7 @@
 
   /**
    * Starts a namespace listing
-   */ 
+   */
   void slotListNamespaces();
 
 protected:
@@ -497,7 +504,7 @@
   bool        mCheckFlags;
   bool        mReadOnly;
   bool        mCheckMail;
-  QGuardedPtr<KMAcctImap> mAccount;
+  mutable QGuardedPtr<KMAcctImap> mAccount;
   // the current uidvalidity
   QString mUidValidity;
   unsigned int mUserRights;
Index: kmail/util.h
===================================================================
--- kmail/util.h	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kmail/util.h	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -41,6 +41,7 @@
 #include <stdlib.h>
 #include <qobject.h>
 #include <qcstring.h>
+class DwString;
 
 namespace KMail
 {
@@ -66,10 +67,103 @@
      * @return The result string.
      */
     QCString lf2crlf( const QCString & src );
+    /**
+     * Convert "\n" line endings to "\r\n".
+     * @param src The source string to convert. NOT null-terminated.
+     * @return The result string. NOT null-terminated.
+     */
+    QByteArray lf2crlf( const QByteArray & src );
 
     /**
+     * Construct a QCString from a DwString
+     */
+    QCString CString( const DwString& str );
+
+    /**
+     * Construct a QByteArray from a DwString
+     */
+    QByteArray ByteArray( const DwString& str );
+
+    /**
+     * Construct a DwString from a QCString
+     */
+    DwString dwString( const QCString& str );
+
+    /**
+     * Construct a DwString from a QByteArray
+     */
+    DwString dwString( const QByteArray& str );
+
+    /**
+     * Fills a QByteArray from a QCString - removing the trailing null.
+     */
+    void setFromQCString( QByteArray& arr, const QCString& cstr );
+
+    inline void setFromQCString( QByteArray& arr, const QCString& cstr )
+    {
+      if ( cstr.size() )
+        arr.duplicate( cstr.data(), cstr.size()-1 );
+      else
+        arr.resize(0);
+    }
+
+    /**
+     * Creates a QByteArray from a QCString without detaching (duplicating the data).
+     * Fast, but be careful, the QCString gets modified by this; this is only good for
+     * the case where the QCString is going to be thrown away afterwards anyway.
+     */
+    QByteArray byteArrayFromQCStringNoDetach( QCString& cstr );
+    inline QByteArray byteArrayFromQCStringNoDetach( QCString& cstr )
+    {
+      QByteArray arr = cstr;
+      if ( arr.size() )
+        arr.resize( arr.size() - 1 );
+      return arr;
+    }
+
+    /**
+     * Restore the QCString after byteArrayFromQCStringNoDetach modified it
+     */
+    void restoreQCString( QCString& str );
+    inline void restoreQCString( QCString& str )
+    {
+      if ( str.data() )
+        str.resize( str.size() + 1 );
+    }
+
+    /**
+     * Fills a QCString from a QByteArray - adding the trailing null.
+     */
+    void setFromByteArray( QCString& cstr, const QByteArray& arr );
+
+    inline void setFromByteArray( QCString& result, const QByteArray& arr )
+    {
+      const int len = arr.size();
+      result.resize( len + 1 /* trailing NUL */ );
+      memcpy(result.data(), arr.data(), len);
+      result[len] = 0;
+    }
+
+    /**
+     * Append a bytearray to a bytearray. No trailing nuls anywhere.
+     */
+    void append( QByteArray& that, const QByteArray& str );
+
+    /**
+     * Append a char* to a bytearray. Trailing nul not copied.
+     */
+    void append( QByteArray& that, const char* str );
+
+    /**
+     * Append a QCString to a bytearray. Trailing nul not copied.
+     */
+    void append( QByteArray& that, const QCString& str );
+
+    void insert( QByteArray& that, uint index, const char* s );
+
+    /**
      * A LaterDeleter is intended to be used with the RAII ( Resource
-     * Acquisiation is Initialization ) paradigm. When an instance of it
+     * Acquisition is Initialization ) paradigm. When an instance of it
      * goes out of scope it deletes the associated object  It can be 
      * disabled, in case the deletion needs to be avoided for some 
      * reason, since going out-of-scope cannot be avoided.
Index: kmail/KMail.desktop
===================================================================
--- kmail/KMail.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kmail/KMail.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,10 +1,11 @@
 [Desktop Entry]
 Encoding=UTF-8
 Name=KMail
-Name[be]=K Пошта
 Name[eo]=Retpoŝto
 Name[hi]=के-मेल
 Name[lv]=KPasts
+Name[mk]=КПошта
+Name[ne]=केडीई मेल
 Name[pa]=ਕੇ-ਪੱਤਰ
 Name[sv]=Kmail
 Name[ta]=Kஅஞ்சல்
@@ -45,13 +46,16 @@
 GenericName[is]=Póstforrit
 GenericName[it]=Programma di posta elettronica
 GenericName[ja]=メールクライアント
+GenericName[kk]=Эл.пошта клиент бағдарламасы
 GenericName[km]=កម្មវិធី​អ៊ីមែល
 GenericName[lt]=Pašto klientas
 GenericName[lv]=Pasta Klients
+GenericName[mk]=Клиент за електронска пошта
 GenericName[ms]=Pelanggan Mel
 GenericName[mt]=Klijent tal-imejl
 GenericName[nb]=E-postklient
 GenericName[nds]=Nettpostprogramm
+GenericName[ne]=मेल क्लाइन्ट
 GenericName[nl]=E-mailclient
 GenericName[nn]=E-postklient
 GenericName[pa]=ਪੱਤਰ ਕਲਾਂਇਟ
Index: kmail/compactionjob.cpp
===================================================================
--- kmail/compactionjob.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kmail/compactionjob.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -65,7 +65,7 @@
   Q_ASSERT( mCancellable );
   // We must close the folder if we opened it and got interrupted
   if ( mFolderOpen && mSrcFolder && mSrcFolder->storage() )
-    mSrcFolder->storage()->close();
+    mSrcFolder->storage()->close("mboxcompactjob");
 
   if ( mTmpFile )
     fclose( mTmpFile );
@@ -124,7 +124,7 @@
     return errno;
   }
   mOpeningFolder = true; // Ignore open-notifications while opening the folder
-  storage->open();
+  storage->open("mboxcompactjob");
   mOpeningFolder = false;
   mFolderOpen = true;
   mOffset = 0;
@@ -170,13 +170,13 @@
     mbox->writeIndex();
     mbox->writeConfig();
     mbox->setAutoCreateIndex( false );
-    mbox->close(true);
+    mbox->close("mboxcompact", true);
     mbox->setAutoCreateIndex( autoCreate );
     mbox->setNeedsCompacting( false );            // We are clean now
     str = i18n( "Folder \"%1\" successfully compacted" ).arg( mSrcFolder->label() );
     kdDebug(5006) << str << endl;
   } else {
-    mbox->close();
+    mbox->close("mboxcompact");
     str = i18n( "Error occurred while compacting \"%1\". Compaction aborted." ).arg( mSrcFolder->label() );
     kdDebug(5006) << "Error occurred while compacting " << mbox->location() << endl;
     kdDebug(5006) << "Compaction aborted." << endl;
@@ -208,7 +208,7 @@
   Q_ASSERT( mCancellable );
   // We must close the folder if we opened it and got interrupted
   if ( mFolderOpen && mSrcFolder && mSrcFolder->storage() )
-    mSrcFolder->storage()->close();
+    mSrcFolder->storage()->close("maildircompact");
 
   FolderJob::kill();
 }
@@ -220,7 +220,7 @@
   kdDebug(5006) << "Compacting " << mSrcFolder->idString() << endl;
 
   mOpeningFolder = true; // Ignore open-notifications while opening the folder
-  storage->open();
+  storage->open("maildircompact");
   mOpeningFolder = false;
   mFolderOpen = true;
   QString subdirNew(storage->location() + "/new/");
@@ -262,7 +262,7 @@
   }
   mErrorCode = rc;
   storage->setNeedsCompacting( false );
-  storage->close();
+  storage->close("maildircompact");
   if ( storage->isOpened() )
     storage->updateIndex();
   if ( !mSilent )
Index: kmail/kmfoldersearch.cpp
===================================================================
--- kmail/kmfoldersearch.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kmail/kmfoldersearch.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -146,6 +146,15 @@
 
 void KMSearch::start()
 {
+    //close all referenced folders
+    QValueListIterator<QGuardedPtr<KMFolder> > fit;
+    for (fit = mFolders.begin(); fit != mFolders.end(); ++fit) {
+        if (!(*fit))
+            continue;
+        (*fit)->close("kmsearch");
+    }
+    mFolders.clear();
+
     if ( running() )
         return;
 
@@ -220,7 +229,7 @@
             }
             folder->storage()->search( 0 );
             mSearchCount += folder->count();
-            folder->close();
+            folder->close("kmsearch");
         }
     }
     mRemainingFolders = -1;
@@ -248,7 +257,7 @@
         if ( folder )
         {
             mLastFolder = folder->label();
-            folder->open();
+            folder->open("kmsearch");
             mOpenedFolders.append( folder );
             connect( folder->storage(),
                 SIGNAL( searchResult( KMFolder*, QValueList<Q_UINT32>, const KMSearchPattern*, bool ) ),
@@ -286,7 +295,7 @@
                                         const KMSearchPattern*, bool ) ) );
       --mRemainingFolders;
       mSearchCount += folder->count();
-      folder->close();
+      folder->close("kmsearch");
       mOpenedFolders.remove( folder );
       if ( mRemainingFolders <= 0 )
       {
@@ -369,7 +378,7 @@
     delete mSearch;
     mSearch = 0;
     if (mOpenCount > 0)
-        close(TRUE);
+        close("~foldersearch", TRUE);
 }
 
 void KMFolderSearch::setSearch(KMSearch *search)
@@ -403,7 +412,7 @@
     /* TODO There is KMFolder::cleared signal now. Adjust. */
     if (mSearch)
         mSearch->start();
-    open(); // will be closed in searchFinished
+    open("foldersearch"); // will be closed in searchFinished
 }
 
 void KMFolderSearch::executeSearch()
@@ -423,7 +432,7 @@
 {
     if (!success)
         mSerNums.clear();
-    close();
+    close("foldersearch");
 }
 
 void KMFolderSearch::addSerNum(Q_UINT32 serNum)
@@ -435,7 +444,7 @@
     KMMsgDict::instance()->getLocation(serNum, &aFolder, &idx);
     assert(aFolder && (idx != -1));
     if(mFolders.findIndex(aFolder) == -1) {
-        aFolder->open();
+        aFolder->open("foldersearch");
         // Exceptional case, for when folder has invalid ids
         if (mInvalid)
             return;
@@ -477,13 +486,6 @@
     }
 }
 
-QCString& KMFolderSearch::getMsgString(int idx, QCString& mDest)
-{
-    KMFolder *folder = getMsgBase(idx)->parent();
-    assert(folder);
-    return folder->getMsgString(folder->find(getMsgBase(idx)), mDest);
-}
-
 int KMFolderSearch::addMsg(KMMessage*, int* index_return)
 {
     //Not supported search folder can't own messages
@@ -499,7 +501,7 @@
     return mSearch->read(location());
 }
 
-int KMFolderSearch::open()
+int KMFolderSearch::open(const char *)
 {
     mOpenCount++;
     kmkernel->jobScheduler()->notifyOpeningFolder( folder() );
@@ -537,7 +539,7 @@
     }
 }
 
-void KMFolderSearch::close(bool force)
+void KMFolderSearch::close(const char *, bool force)
 {
     if (mOpenCount <= 0) return;
     if (mOpenCount > 0) mOpenCount--;
@@ -557,7 +559,7 @@
     for (fit = mFolders.begin(); fit != mFolders.end(); ++fit) {
         if (!(*fit))
             continue;
-        (*fit)->close();
+        (*fit)->close("foldersearch");
     }
     mFolders.clear();
 
@@ -852,7 +854,7 @@
         }
         mSerNums.push_back(serNum);
         if(mFolders.findIndex(folder) == -1) {
-            folder->open();
+            folder->open("foldersearch");
             if (mInvalid) //exceptional case for when folder has invalid ids
                 return false;
             mFolders.append(folder);
@@ -910,7 +912,16 @@
 
 void KMFolderSearch::clearIndex(bool, bool)
 {
-    mSerNums.clear();
+  //close all referenced folders
+  QValueListIterator<QGuardedPtr<KMFolder> > fit;
+  for (fit = mFolders.begin(); fit != mFolders.end(); ++fit) {
+    if (!(*fit))
+      continue;
+    (*fit)->close("foldersearch");
+  }
+  mFolders.clear();
+
+  mSerNums.clear();
 }
 
 void KMFolderSearch::truncateIndex()
@@ -925,7 +936,7 @@
     if (!search()->inScope(aFolder))
         return;
     if (!mTempOpened) {
-        open();
+        open( "foldersearch" );
         mTempOpened = true;
     }
 
@@ -937,7 +948,7 @@
     KMMsgDict::instance()->getLocation(serNum, &folder, &idx);
     assert(folder && (idx != -1));
     assert(folder == aFolder);
-    folder->open();
+    folder->open("examineAddedMessage");
 
     // if we are already checking this folder, refcount
     if ( mFoldersCurrentlyBeingSearched.contains( folder ) ) {
@@ -952,6 +963,7 @@
       mFoldersCurrentlyBeingSearched.insert( folder, 1 );
     }
     folder->storage()->search( search()->searchPattern(), serNum );
+    folder->close("examineAddedMessage");
 }
 
 void KMFolderSearch::slotSearchExamineMsgDone( KMFolder* folder,
@@ -962,6 +974,7 @@
     if ( search()->searchPattern() != pattern ) return;
     kdDebug(5006) << folder->label() << ": serNum " << serNum
      << " matches?" << matches << endl;
+    folder->open("SearchExamineMsgDone");
 
     if ( mFoldersCurrentlyBeingSearched.contains( folder ) ) {
       unsigned int count = mFoldersCurrentlyBeingSearched[folder];
@@ -979,7 +992,7 @@
     } else {
       Q_ASSERT( 0 ); // Can't happen (TM)
     }
-    folder->close();
+    folder->close("SearchExamineMsgDone");
 
     if ( !matches ) {
         QValueVector<Q_UINT32>::const_iterator it;
@@ -1009,7 +1022,7 @@
     if (!search()->inScope(folder))
         return;
     if (!mTempOpened) {
-        open();
+        open("foldersearch");
         mTempOpened = true;
     }
 
@@ -1027,7 +1040,7 @@
     if (!search()->inScope(aFolder))
         return;
     if (!mTempOpened) {
-        open();
+        open("foldersearch");
         mTempOpened = true;
     }
     QValueVector<Q_UINT32>::const_iterator it;
@@ -1046,7 +1059,7 @@
     if (!search()->inScope(folder))
         return;
     if (mTempOpened) {
-        close();
+        close("foldersearch");
         mTempOpened = false;
     }
 
@@ -1063,7 +1076,7 @@
         return;
 
     if (!mTempOpened) {
-        open();
+        open("foldersearch");
         mTempOpened = true;
     }
     mExecuteSearchTimer->start(0, true);
@@ -1086,7 +1099,7 @@
     if (!search()->inScope(aFolder))
         return;
     if (!mTempOpened) {
-        open();
+        open("foldersearch");
         mTempOpened = true;
     }
 
@@ -1100,7 +1113,7 @@
         ++pos;
     }
     // let's try if the message matches our search
-    aFolder->open();
+    aFolder->open("foldersearch");
 
     // if we are already checking this folder, refcount
     if ( mFoldersCurrentlyBeingSearched.contains( aFolder ) ) {
Index: kmail/folderdiaquotatab.h
===================================================================
--- kmail/folderdiaquotatab.h	(.../tags/KDE/3.5.6/kdepim)	(wersja 0)
+++ kmail/folderdiaquotatab.h	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -0,0 +1,91 @@
+// -*- mode: C++; c-file-style: "gnu" -*-
+/**
+ * folderdiaquotatab.h
+ *
+ * Copyright (c) 2006 Till Adam <adam@kde.org>
+ *
+ *
+ *  This program is free software; you can redistribute it and/or modify
+ *  it under the terms of the GNU General Public License as published by
+ *  the Free Software Foundation; version 2 of the License
+ *
+ *  This program is distributed in the hope that it will be useful,
+ *  but WITHOUT ANY WARRANTY; without even the implied warranty of
+ *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+ *  GNU General Public License for more details.
+ *
+ *  You should have received a copy of the GNU General Public License
+ *  along with this program; if not, write to the Free Software
+ *  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA.
+ *
+ *  In addition, as a special exception, the copyright holders give
+ *  permission to link the code of this program with any edition of
+ *  the Qt library by Trolltech AS, Norway (or with modified versions
+ *  of Qt that use the same license as Qt), and distribute linked
+ *  combinations including the two.  You must obey the GNU General
+ *  Public License in all respects for all of the code used other than
+ *  Qt.  If you modify this file, you may extend this exception to
+ *  your version of the file, but you are not obligated to do so.  If
+ *  you do not wish to do so, delete this exception statement from
+ *  your version.
+ */
+#ifndef FOLDERDIAQUOTA_H
+#define FOLDERDIAQUOTA_H
+
+#include "kmfolderdia.h"
+#include "kmfoldertype.h"
+#include "quotajobs.h"
+
+namespace KMail {
+  class QuotaWidget;
+}
+class QVBox;
+class QWidgetStack;
+
+namespace KMail {
+
+class ImapAccountBase;
+
+/**
+ * "Quota" tab in the folder dialog
+ * Internal class, only used by KMFolderDialog
+ */
+class FolderDiaQuotaTab : public FolderDiaTab
+{
+  Q_OBJECT
+
+public:
+  FolderDiaQuotaTab( KMFolderDialog* dlg, QWidget* parent, const char* name = 0 );
+
+  virtual void load();
+  virtual bool save();
+  virtual AcceptStatus accept();
+
+  static bool supports( KMFolder* refFolder );
+
+private:
+  void initializeWithValuesFromFolder( KMFolder* folder );
+  void showQuotaWidget();
+private slots:
+  // Network (KIO) slots
+  void slotConnectionResult( int, const QString& );
+  void slotReceivedQuotaInfo( KMFolder*, KIO::Job*, const KMail::QuotaInfo& );
+
+
+private:
+
+  QLabel* mLabel;
+  KMail::QuotaWidget* mQuotaWidget;
+  QWidgetStack* mStack;
+  ImapAccountBase* mImapAccount;
+  QString mImapPath;
+  KMFolderDialog* mDlg;
+
+  QuotaInfo mQuotaInfo;
+  KMFolderType mFolderType;
+};
+
+} // end of namespace KMail
+
+#endif /* FOLDERDIAQUOTA_H */
+
Index: kmail/bodypartformatter.cpp
===================================================================
--- kmail/bodypartformatter.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kmail/bodypartformatter.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -114,6 +114,7 @@
   CREATE_BODY_PART_FORMATTER(ApplicationPkcs7Mime)
   CREATE_BODY_PART_FORMATTER(ApplicationChiasmusText)
   //CREATE_BODY_PART_FORMATTER(ApplicationPgp)
+  CREATE_BODY_PART_FORMATTER(ApplicationMsTnef)
 
   CREATE_BODY_PART_FORMATTER(MessageRfc822)
 
@@ -147,6 +148,7 @@
   { "x-pkcs7-mime", &ApplicationPkcs7MimeBodyPartFormatter::create },
   { "vnd.de.bund.bsi.chiasmus-text", &ApplicationChiasmusTextBodyPartFormatter::create },
   { "pgp", &ApplicationPgpBodyPartFormatter::create },
+  { "ms-tnef", &ApplicationMsTnefBodyPartFormatter::create }
 };
 
 static const SubtypeBuiltin textSubtypeBuiltins[] = {
@@ -286,8 +288,8 @@
       break;
     case 'm':
     case 'M':
-      //if ( kasciistricmp( subtype, "ms-tnef" ) == 0 )
-      //  return ApplicationMsTnefBodyPartFormatter::create();
+      if ( kasciistricmp( subtype, "ms-tnef" ) == 0 )
+        return ApplicationMsTnefBodyPartFormatter::create();
       break;
     case 'v':
     case 'V':
Index: kmail/kmacctimap.cpp
===================================================================
--- kmail/kmacctimap.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kmail/kmacctimap.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -66,13 +66,13 @@
   connect(kmkernel->imapFolderMgr(), SIGNAL(changed()),
       this, SLOT(slotUpdateFolderList()));
   connect(&mErrorTimer, SIGNAL(timeout()), SLOT(slotResetConnectionError()));
-  
-  QString serNumUri = locateLocal( "data", "kmail/unfiltered." + 
+
+  QString serNumUri = locateLocal( "data", "kmail/unfiltered." +
 				   QString("%1").arg(KAccount::id()) );
   KConfig config( serNumUri );
   QStringList serNums = config.readListEntry( "unfiltered" );
   mFilterSerNumsToSave.setAutoDelete( false );
-  
+
   for ( QStringList::ConstIterator it = serNums.begin();
 	it != serNums.end(); ++it ) {
       mFilterSerNums.append( (*it).toUInt() );
@@ -85,8 +85,8 @@
 KMAcctImap::~KMAcctImap()
 {
   killAllJobs( true );
-  
-  QString serNumUri = locateLocal( "data", "kmail/unfiltered." + 
+
+  QString serNumUri = locateLocal( "data", "kmail/unfiltered." +
 				   QString("%1").arg(KAccount::id()) );
   KConfig config( serNumUri );
   QStringList serNums;
@@ -175,7 +175,16 @@
   }
   // remove the jobs
   mapJobData.clear();
+  // KMAccount::deleteFolderJobs(); doesn't work here always, it deletes jobs from
+  // its own mJobList instead of our mJobList...
   KMAccount::deleteFolderJobs();
+  QPtrListIterator<ImapJob> it2( mJobList );
+  while ( it2.current() ) {
+    ImapJob *job = it2.current();
+    ++it2;
+    job->kill();
+  }
+  mJobList.clear();
   // make sure that no new-mail-check is blocked
   if (mCountRemainChecks > 0)
   {
@@ -265,9 +274,10 @@
   if (!mFolder || !mFolder->folder() || !mFolder->folder()->child() ||
       makeConnection() == ImapAccountBase::Error)
   {
+    // checks for mCountRemainChecks
+    checkDone( false, CheckError );
     mCountRemainChecks = 0;
     mCheckingSingleFolder = false;
-    checkDone( false, CheckError );
     return;
   }
   // if necessary then initialize the list of folders which should be checked
@@ -330,9 +340,9 @@
               this, SLOT(postProcessNewMail(KMFolderImap*, bool)));
           imapFolder->getFolder();
         } else if ( kmkernel->filterMgr()->atLeastOneIncomingFilterAppliesTo( id() ) &&
-                    imapFolder->folder()->isSystemFolder() && 
+                    imapFolder->folder()->isSystemFolder() &&
                     imapFolder->imapPath() == "/INBOX/" ) {
-          imapFolder->open(); // will be closed in the folderSelected slot
+          imapFolder->open("acctimap"); // will be closed in the folderSelected slot
           // first get new headers before we select the folder
           imapFolder->setSelected( true );
           connect( imapFolder, SIGNAL( folderComplete( KMFolderImap*, bool ) ),
@@ -342,7 +352,7 @@
         else {
           connect(imapFolder, SIGNAL(numUnreadMsgsChanged(KMFolder*)),
               this, SLOT(postProcessNewMail(KMFolder*)));
-          bool ok = imapFolder->processNewMail(interactive);
+          bool ok = imapFolder->processNewMail(interactive); // this removes the local kmfolderimap if its imapPath is somehow empty, and removing it calls createFolderList, invalidating mMailCheckFolders, and causing a crash
           if (!ok)
           {
             // there was an error so cancel
@@ -352,6 +362,8 @@
               mMailCheckProgressItem->incCompletedItems();
               mMailCheckProgressItem->updateProgress();
             }
+            // since the list of folders might have been updated at this point, mMailCheckFolders may be invalid, so break
+            break;
           }
         }
       }
@@ -377,7 +389,7 @@
   postProcessNewMail(static_cast<KMFolder*>(folder->folder()));
 }
 
-void KMAcctImap::postProcessNewMail( KMFolder * folder ) 
+void KMAcctImap::postProcessNewMail( KMFolder * folder )
 {
   disconnect( folder->storage(), SIGNAL(numUnreadMsgsChanged(KMFolder*)),
               this, SLOT(postProcessNewMail(KMFolder*)) );
@@ -403,7 +415,7 @@
   QValueListIterator<Q_UINT32> filterIt = mFilterSerNums.begin();
   QValueList<Q_UINT32> inTransit;
 
-  if (ActionScheduler::isEnabled() || 
+  if (ActionScheduler::isEnabled() ||
       kmkernel->filterMgr()->atLeastOneOnlineImapFolderTarget()) {
     KMFilterMgr::FilterSet set = KMFilterMgr::Inbound;
     QValueList<KMFilter*> filters = kmkernel->filterMgr()->filters();
@@ -428,7 +440,7 @@
       ++filterIt;
       continue;
     }
-    
+
     KMFolderImap *imapFolder = dynamic_cast<KMFolderImap*>(folder->storage());
     if (!imapFolder ||
 	!imapFolder->folder()->isSystemFolder() ||
@@ -447,7 +459,7 @@
         continue;
       }
 
-      if (ActionScheduler::isEnabled() || 
+      if (ActionScheduler::isEnabled() ||
 	  kmkernel->filterMgr()->atLeastOneOnlineImapFolderTarget()) {
 	mScheduler->execFilters( msg );
       } else {
@@ -471,7 +483,7 @@
     ++filterIt;
   }
   mFilterSerNums = inTransit;
-  
+
   if (mCountRemainChecks == 0)
   {
     // all checks are done
@@ -542,7 +554,7 @@
   return mFolder;
 }
 
-ImapAccountBase::ConnectionState KMAcctImap::makeConnection() 
+ImapAccountBase::ConnectionState KMAcctImap::makeConnection()
 {
   if ( mSlaveConnectionError )
   {
@@ -557,14 +569,14 @@
   mSlaveConnectionError = false;
   kdDebug(5006) << k_funcinfo << endl;
 }
-    
+
 void KMAcctImap::slotFolderSelected( KMFolderImap* folder, bool )
 {
   folder->setSelected( false );
   disconnect( folder, SIGNAL( folderComplete( KMFolderImap*, bool ) ),
 	      this, SLOT( slotFolderSelected( KMFolderImap*, bool) ) );
   postProcessNewMail( static_cast<KMFolder*>(folder->folder()) );
-  folder->close();
+  folder->close( "acctimap" );
 }
 
 void KMAcctImap::execFilters(Q_UINT32 serNum)
@@ -588,7 +600,7 @@
   if ( serNum )
     mFilterSerNumsToSave.remove( QString( "%1" ).arg( serNum ) );
 
-  int filterResult = kmkernel->filterMgr()->process(msg, 
+  int filterResult = kmkernel->filterMgr()->process(msg,
 						    KMFilterMgr::Inbound,
 						    true,
 						    id() );
Index: kmail/kmmsgpart.h
===================================================================
--- kmail/kmmsgpart.h	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kmail/kmmsgpart.h	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -27,6 +27,7 @@
 template <typename T>
 class QValueList;
 class QTextCodec;
+class DwString;
 
 class KMMessagePart
 {
@@ -45,6 +46,10 @@
   /** Get or set the message body */
   QCString body(void) const;
   void setBody(const QCString &aStr);
+  DwString dwBody() const;
+  void setBody(const DwString &aStr);
+  // warning, doesn't detach from 'arr'
+  void setBody(const QByteArray &arr);
 
   /** Sets this body part's content to @p str. @p str is subject to
       automatic charset and CTE detection.
@@ -58,11 +63,11 @@
   /** Returns body as decoded string. Assumes that content-transfer-encoding
     contains the correct encoding. This routine is meant for binary data.
     No trailing 0 is appended. */
-  virtual QByteArray bodyDecodedBinary(void) const;
+  QByteArray bodyDecodedBinary(void) const;
 
   /** Returns body as decoded string. Assumes that content-transfer-encoding
       contains the correct encoding. This routine is meant for text strings! */
-  virtual QCString bodyDecoded(void) const;
+  QCString bodyDecoded(void) const;
 
   /** Sets body, encoded in the best fitting
       content-transfer-encoding, which is determined by character
@@ -73,26 +78,39 @@
       @param allow8Bit  whether "8bit" is allowed as cte.
       @param willBeSigned whether "7bit"/"8bit" is allowed as cte according to RFC 3156
   */
-  virtual void setBodyAndGuessCte(const QByteArray& aBuf,
+  void setBodyAndGuessCte(const QByteArray& aBuf,
 				  QValueList<int>& allowedCte,
 				  bool allow8Bit = false,
                                   bool willBeSigned = false);
   /** Same for text */
-  virtual void setBodyAndGuessCte(const QCString& aBuf,
+  void setBodyAndGuessCte(const QCString& aBuf,
 				  QValueList<int>& allowedCte,
 				  bool allow8Bit = false,
                                   bool willBeSigned = false);
 
   /** Sets body, encoded according to the content-transfer-encoding.
-      BEWARE: The entire aStr is used including trailing 0 of text strings! */
-  virtual void setBodyEncodedBinary(const QByteArray& aStr);
+      BEWARE: The entire aStr is used including trailing 0 of text strings!
+      This version is faster than setBodyEncoded, no duplication necessary.
+    */
+  void setBodyEncodedBinary(const QByteArray& aStr);
 
   /** Sets body, encoded according to the content-transfer-encoding.
-      This one is for text strings, the trailing 0 is not used. */
-  virtual void setBodyEncoded(const QCString& aStr);
+      This one is for text strings, the trailing 0 is not used.
 
+      For speed reasons, prefer setBodyEncodedBinary.
+      When possible (the QCString isn't used afterwards), change setBodyEncoded(myQCString) into:
+       setBodyEncodedBinary(byteArrayFromQCStringNoDetach(myQCString));
+  */
+ void setBodyEncoded(const QCString& aStr);
+
+  /** Set a full message string as the body of the message part,
+      disallowing anything but 7bit or 8bit encoding.
+      (RFC 1521 section 7.3)
+  */
+ void setMessageBody( const QByteArray & aBuf );
+
   /** Returns decoded length of body. */
-  virtual int decodedSize(void) const;
+  int decodedSize(void) const;
 
   /** Get or set the 'Content-Type' header field
    The member functions that involve enumerated types (ints)
Index: kmail/dcopmail.desktop
===================================================================
--- kmail/dcopmail.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kmail/dcopmail.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -5,7 +5,7 @@
 Comment=Mail program with a DCOP interface
 Comment[af]=E-pos program met 'n DCOP koppelvlak
 Comment[be]=Паштовая праграма з DCOP інтэрфэйсам
-Comment[bg]=Клиент на електронна поща за КДЕ
+Comment[bg]=Клиент на електронна поща за KDE
 Comment[bs]=Mail program sa DCOP interfejsom
 Comment[ca]=Un programa de correu amb una interfície DCOP
 Comment[cs]=Poštvní program s DCOP rozhraním
@@ -25,11 +25,14 @@
 Comment[is]=Póstforrit með DCOP viðmóti
 Comment[it]=Programma di posta con un'interfaccia DCOP
 Comment[ja]=DCOP インターフェース付のメールプログラム
+Comment[kk]=DCOP интерфейсті пошта бағдарламасы
 Comment[km]=កម្មវិធី​អ៊ីមែល​ដែល​មាន​ចំណុច​ប្រទាក់ DCOP
 Comment[lt]=Pašto programa su DCOP sąsaja
+Comment[mk]=Програма за е-пошта, со DCOP-интерфејс
 Comment[ms]=Program Mel dengan antara muka  DCOP 
 Comment[nb]=E-postprogram med DCOP grensesnitt
 Comment[nds]=Nettpostprogramm mit DCOP-Koppelsteed
+Comment[ne]=DCOP इन्टरफेसमा मेल कार्यक्रम
 Comment[nl]=E-mailprogramma met een DCOP-interface
 Comment[nn]=E-postprogram med eit DCOP-grensesnitt
 Comment[pl]=Program pocztowy z interfejsem DCOP
Index: kmail/accountdialog.h
===================================================================
--- kmail/accountdialog.h	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kmail/accountdialog.h	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -165,6 +165,7 @@
       QCheckBox    *autoExpungeCheck;     // only used by normal (online) IMAP
       QCheckBox    *hiddenFoldersCheck;
       QCheckBox    *subscribedFoldersCheck;
+      QCheckBox    *locallySubscribedFoldersCheck;
       QCheckBox    *loadOnDemandCheck;
       QCheckBox    *storePasswordCheck;
       QCheckBox    *progressDialogCheck;  // only used by Disconnected IMAP
Index: kmail/kmedit.h
===================================================================
--- kmail/kmedit.h	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kmail/kmedit.h	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -75,6 +75,7 @@
 
 signals:
   void spellcheck_done(int result);
+  void attachPNGImageData(const QByteArray &image);
   void pasteImage();
   void focusUp();
   void focusChanged( bool );
Index: kmail/kmmainwidget.h
===================================================================
--- kmail/kmmainwidget.h	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kmail/kmmainwidget.h	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -69,6 +69,7 @@
   class FolderJob;
   class HeaderListQuickSearch;
   class SearchWindow;
+  class ImapAccountBase;
 }
 
 typedef QMap<int,KMFolder*> KMMenuToFolder;
@@ -208,9 +209,12 @@
   /** Update message actions */
   void updateMessageActions();
 
-  /** Launch subscription-dialog */
+  /** Launch subscription-dialog (server side) */
   void slotSubscriptionDialog();
 
+  /** Launch dialog for local (client side) subscription configuration */
+  void slotLocalSubscriptionDialog();
+
   /** The columns of the foldertree changed */
   void slotFolderTreeColumnsChanged();
 
@@ -241,6 +245,10 @@
   void updateFileMenu();
   void newFromTemplate( KMMessage *msg );
 
+  // helper functions for keeping reference to mFolder
+  void openFolder();
+  void closeFolder();
+
   KActionCollection * actionCollection() const { return mActionCollection; }
 
   /** @return the correct config dialog depending on whether the parent of the mainWidget
@@ -417,6 +425,16 @@
 
   void initializeIMAPActions( bool setState );
 
+  /** Helper which finds the associated account if there is a current
+   * folder and it is an imap or disconnected imap one.
+   */
+  KMail::ImapAccountBase* findCurrentImapAccountBase();
+
+  /** Helper which finds the associated IMAP path if there is a current
+   * folder and it is an imap or disconnected imap one.
+   */
+  QString findCurrentImapPath();
+
 private:
   // Message actions
   KAction *mTrashAction, *mDeleteAction, *mTrashThreadAction,
@@ -498,10 +516,11 @@
 //  QPopupMenu *mMessageMenu;
   KMail::SearchWindow *mSearchWin;
 
-  KAction *mModifyFolderAction, *mRemoveFolderAction, *mExpireFolderAction,
+  KAction *mNewFolderAction, *mModifyFolderAction, *mRemoveFolderAction, *mExpireFolderAction,
       *mCompactFolderAction, *mRefreshFolderAction, *mEmptyFolderAction,
       *mMarkAllAsReadAction, *mFolderMailingListPropertiesAction,
-      *mFolderShortCutCommandAction, *mTroubleshootFolderAction;
+      *mFolderShortCutCommandAction, *mTroubleshootFolderAction,
+      *mRemoveDuplicatesAction;
   KToggleAction *mPreferHtmlAction, *mPreferHtmlLoadExtAction, *mThreadMessagesAction;
   KToggleAction *mThreadBySubjectAction;
   KToggleAction *mFolderAction, *mHeaderAction, *mMimeAction;
@@ -531,6 +550,7 @@
   KXMLGUIClient *mGUIClient;
 
   static QValueList<KMMainWidget*>* s_mainWidgetList;
+  bool mOpenedImapFolder;
 };
 
 #endif
Index: kmail/kmfolderdia.h
===================================================================
--- kmail/kmfolderdia.h	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kmail/kmfolderdia.h	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -55,7 +55,7 @@
 class KPushButton;
 
 namespace KMail {
-  class FolderRequester; 
+  class FolderRequester;
 /**
  * This is the base class for tabs in the folder dialog.
  * It uses the API from ConfigModuleTab (basically: it's a widget that can load and save)
@@ -161,16 +161,14 @@
   Q_OBJECT
 
 public:
-  FolderDiaTemplatesTab( KMFolderDialog* dlg,
-                       const QString& aName,
-                       QWidget* parent, const char* name = 0 );
+  FolderDiaTemplatesTab( KMFolderDialog *dlg, QWidget *parent );
 
   virtual void load();
   virtual bool save();
 
 public slots:
   void slotEmitChanged(); // do nothing for now
-  
+
   void slotCopyGlobal();
 
 private:
Index: kmail/kmfoldertree.h
===================================================================
--- kmail/kmfoldertree.h	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kmail/kmfoldertree.h	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -22,6 +22,7 @@
 #include <kfoldertree.h>
 #include <kdepimmacros.h>
 
+#include <qguardedptr.h>
 #include <qwidget.h>
 #include <qtimer.h>
 #include <qheader.h>
@@ -38,7 +39,7 @@
 class KMMainWidget;
 class KMAccount;
 // duplication from kmcommands.h, to avoid the include
-typedef QMap<int,KMFolder*> KMMenuToFolder; 
+typedef QMap<int,KMFolder*> KMMenuToFolder;
 template <typename T> class QGuardedPtr;
 
 class KDE_EXPORT KMFolderTreeItem : public QObject, public KFolderTreeItem
@@ -73,7 +74,7 @@
   void adjustUnreadCount( int newUnreadCount );
 
   /** dnd */
-  virtual bool acceptDrag(QDropEvent* ) const;
+  virtual bool acceptDrag(QDropEvent* e) const;
 
 signals:
   /** Our icon changed */
@@ -122,7 +123,7 @@
      else
        return 0;
   }
-  
+
   /** create a folderlist */
   void createFolderList( QStringList *str,
                          QValueList<QGuardedPtr<KMFolder> > *folders,
@@ -150,6 +151,8 @@
 
   KMFolder *currentFolder() const;
 
+  QValueList<QGuardedPtr<KMFolder> > selectedFolders();
+
   enum ColumnMode {unread=15, total=16};
 
   /** toggles the unread and total columns on/off */
@@ -179,13 +182,14 @@
   enum MenuAction {
     CopyMessage,
     MoveMessage,
+    CopyFolder,
     MoveFolder
   };
-  
+
   /** Generate a popup menu that contains all folders that can have content */
-  void folderToPopupMenu( MenuAction action, QObject *receiver, KMMenuToFolder *, 
+  void folderToPopupMenu( MenuAction action, QObject *receiver, KMMenuToFolder *,
       QPopupMenu *menu, QListViewItem *start = 0 );
-  
+
 signals:
   /** The selected folder has changed */
   void folderSelected(KMFolder*);
@@ -231,7 +235,7 @@
   void slotAccountRemoved(KMAccount*);
 
   /** Select the item and switch to the folder */
-  void doFolderSelected(QListViewItem*);
+  void doFolderSelected(QListViewItem *qlvi, bool keepSelection = false);
 
   /**
    * Reset current folder and all childs
@@ -243,6 +247,15 @@
   /** Create a child folder */
   void addChildFolder( KMFolder *folder = 0, QWidget * parent = 0 );
 
+  /** Copies the currently selected folder. */
+  void copyFolder();
+
+  /** Cuts the currently selected folder. */
+  void cutFolder();
+
+  /** Pastes a previously copied/cutted folder below the currently selected folder. */
+  void pasteFolder();
+
 protected slots:
   //  void slotRMB(int, int);
   /** called by the folder-manager when the list of folders changed */
@@ -287,11 +300,17 @@
 
   /** For RMB move folder */
   virtual void moveSelectedToFolder( int menuId );
+  /** For RMB copy folder */
+  virtual void copySelectedToFolder( int menuId );
 
+  /** Updates copy/cut/paste actions */
+  void updateCopyActions();
+
 protected:
   /** Catch palette changes */
   virtual bool event(QEvent *e);
 
+  virtual void contentsMousePressEvent( QMouseEvent *e );
   virtual void contentsMouseReleaseEvent(QMouseEvent* me);
 
   /** Updates the number of unread messages for all folders */
@@ -310,6 +329,7 @@
   void contentsDragMoveEvent( QDragMoveEvent *e );
   void contentsDragLeaveEvent( QDragLeaveEvent *e );
   void contentsDropEvent( QDropEvent *e );
+  virtual QDragObject* dragObject();
 
   /** Drag and drop variables */
   QListViewItem *oldCurrent, *oldSelected;
@@ -326,8 +346,8 @@
   /** connect all signals */
   void connectSignals();
 
-  /** Move the current folder to destination */
-  void moveFolder( KMFolder* destination );
+  /** Move or copy the folder @p source to @p destination. */
+  void moveOrCopyFolder( QValueList<QGuardedPtr<KMFolder> > sources, KMFolder* destination, bool move=false );
 
 private:
   /** total column */
@@ -341,6 +361,8 @@
   KMMainWidget *mMainWidget;
   bool mReloading;
   QMap<const KMFolder*, KMFolderTreeItem*> mFolderToItem;
+  QValueList<QGuardedPtr<KMFolder> > mCopySourceFolders;
+  bool mCutFolder;
 
   QTimer *mUpdateCountTimer;
   QMap<QString,KMFolder*> mFolderToUpdateCount;
Index: kmail/customtemplates.cpp
===================================================================
--- kmail/customtemplates.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kmail/customtemplates.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -300,9 +300,10 @@
   if ( mCurrentItem ) {
     // mCurrentItem->setText( 0, indexToType( index ) );
     CustomTemplateItem *vitem = mItemList[ mCurrentItem->text( 1 ) ];
-    if ( vitem ) {
-      vitem->mType = static_cast<Type>(index);
+    if ( !vitem ) {
+      return;
     }
+    vitem->mType = static_cast<Type>(index);
     switch ( vitem->mType ) {
     case TReply:
       mCurrentItem->setPixmap( 0, mReplyPix );
Index: kmail/copyfolderjob.h
===================================================================
--- kmail/copyfolderjob.h	(.../tags/KDE/3.5.6/kdepim)	(wersja 0)
+++ kmail/copyfolderjob.h	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -0,0 +1,110 @@
+/**
+ *  Copyright (c) 2005 Till Adam <adam@kde.org>
+ *
+ *  This program is free software; you can redistribute it and/or modify
+ *  it under the terms of the GNU General Public License as published by
+ *  the Free Software Foundation; version 2 of the License
+ *
+ *  This program is distributed in the hope that it will be useful,
+ *  but WITHOUT ANY WARRANTY; without even the implied warranty of
+ *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+ *  GNU General Public License for more details.
+ *
+ *  You should have received a copy of the GNU General Public License
+ *  along with this program; if not, write to the Free Software
+ *  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA.
+ *
+ *  In addition, as a special exception, the copyright holders give
+ *  permission to link the code of this program with any edition of
+ *  the Qt library by Trolltech AS, Norway (or with modified versions
+ *  of Qt that use the same license as Qt), and distribute linked
+ *  combinations including the two.  You must obey the GNU General
+ *  Public License in all respects for all of the code used other than
+ *  Qt.  If you modify this file, you may extend this exception to
+ *  your version of the file, but you are not obligated to do so.  If
+ *  you do not wish to do so, delete this exception statement from
+ *  your version.
+ */
+#ifndef COPYFOLDERJOB_H
+#define COPYFOLDERJOB_H
+
+#include "folderjob.h"
+
+#include <qguardedptr.h>
+
+class FolderStorage;
+class KMFolderDir;
+class KMFolder;
+class KMCommand;
+
+class KMFolderNode;
+
+namespace KMail {
+
+/**
+ * Copy a hierarchy of folders somewhere else in the folder tree.  Currently
+ * online imap folders are not supported as target folders, and the same is
+ * true for search folders where it does not make much sense for them to be
+ * target folders.
+ */
+class CopyFolderJob : public FolderJob
+{
+  Q_OBJECT
+public:
+  /**
+   * Create a new job
+   * @param storage of the folder that should be copied
+   * @param newParent the target parent folder
+   */
+  CopyFolderJob( FolderStorage* const storage, KMFolderDir* const newParent = 0 );
+
+  virtual ~CopyFolderJob();
+
+  virtual void execute();
+
+  /**
+    Returns the newly created target folder.
+  */
+  KMFolder* targetFolder() const { return mNewFolder; }
+
+protected slots:
+
+  /** Create the target directory under the new parent. Returns success or failure.*/
+  bool createTargetDir();
+
+  /** Copy all messages from the original folder to mNewFolder */
+  void copyMessagesToTargetDir();
+
+  /** Called when the CopyCommand has either succesfully completed copying
+   * the contents of our folder to the new location or failed. */
+  void slotCopyCompleted( KMCommand *command );
+
+  /** Called when the previous sibling's copy operation completed.
+   * @param success indicates whether the last copy was successful. */
+  void slotCopyNextChild( bool success = true );
+
+  /** Called when one of the operations of the foldre itself or one of it's
+   * child folders failed and the already created target folder needs to be
+   * removed again. */
+  void rollback();
+
+  /**
+    Called when the online IMAP folder creation finished.
+  */
+  void folderCreationDone( const QString &name, bool success );
+
+signals:
+  /** Emitted when the job is done, check the success bool */
+  void folderCopyComplete( bool success );
+
+protected:
+  QGuardedPtr<FolderStorage> const mStorage;
+  KMFolderDir* const mNewParent;
+  QGuardedPtr<KMFolder> mNewFolder;
+  QPtrListIterator<KMFolderNode> mChildFolderNodeIterator;
+  KMFolder* mNextChildFolder;
+};
+
+} // namespace KMail
+
+#endif /* COPYFOLDERJOB_H */

Zmiany atrybutów dla: kmail/copyfolderjob.h
___________________________________________________________________
Nazwa: svn:mime-type
   + text/x-chdr
Nazwa: svn:keywords
   + Author Date Id Revision
Nazwa: svn:eol-style
   + native

Index: kmail/objecttreeparser.h
===================================================================
--- kmail/objecttreeparser.h	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kmail/objecttreeparser.h	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -2,7 +2,7 @@
     objecttreeparser.h
 
     This file is part of KMail, the KDE mail client.
-    Copyright (c) 2002-2003 Klarlvdalens Datakonsult AB
+    Copyright (c) 2002-2003 Klarälvdalens Datakonsult AB
     Copyright (c) 2003      Marc Mutz <mutz@kde.org>
 
     KMail is free software; you can redistribute it and/or modify it
@@ -222,6 +222,7 @@
     bool processApplicationOctetStreamSubtype( partNode * node, ProcessResult & result );
     bool processApplicationPkcs7MimeSubtype( partNode * node, ProcessResult & result );
     bool processApplicationChiasmusTextSubtype( partNode * node, ProcessResult & result );
+    bool processApplicationMsTnefSubtype( partNode *node, ProcessResult &result );
 
   private:
     bool decryptChiasmus( const QByteArray& data, QByteArray& bodyDecoded, QString& errorText );
Index: kmail/kmfoldermaildir.h
===================================================================
--- kmail/kmfoldermaildir.h	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kmail/kmfoldermaildir.h	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -28,8 +28,7 @@
   /** Returns the type of this folder */
   virtual KMFolderType folderType() const { return KMFolderTypeMaildir; }
 
-  /** Read a message and return a referece to a string */
-  virtual QCString& getMsgString(int idx, QCString& mDest);
+  /** Read a message and return it as a string */
   virtual DwString getDwString(int idx);
 
   /** Detach message from this folder. Usable to call addMsg() afterwards.
@@ -60,7 +59,7 @@
     call close() first.
     Returns zero on success and an error code equal to the c-library
     fopen call otherwise (errno). */
-  virtual int open();
+  virtual int open(const char *owner);
 
   virtual int canAccess();
 
@@ -69,7 +68,7 @@
 
   /** Close folder. If force is TRUE the files are closed even if
     others still use it (e.g. other mail reader windows). */
-  virtual void close(bool force=FALSE);
+  virtual void close(const char *owner, bool force=FALSE);
 
   /** Create the necessary folders for a maildir folder. Usually you will
       want to use create() instead.
Index: kmail/index.h
===================================================================
--- kmail/index.h	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kmail/index.h	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -8,16 +8,16 @@
  * KMail is free software; you can redistribute it and/or modify it
  * under the terms of the GNU General Public License, version 2, as
  * published by the Free Software Foundation.
- * 
+ *
  * KMail is distributed in the hope that it will be useful, but
  * WITHOUT ANY WARRANTY; without even the implied warranty of
  * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
  * General Public License for more details.
- * 
+ *
  * You should have received a copy of the GNU General Public License
  * along with this program; if not, write to the Free Software
  * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301  USA
- * 
+ *
  * In addition, as a special exception, the copyright holders give
  * permission to link the code of this program with any edition of
  * the Qt library by Trolltech AS, Norway (or with modified versions
@@ -56,11 +56,11 @@
 		~KMMsgIndex();
 
 	public:
-		
+
 		/**
 		 * Starts a query.
 		 * Results will be returned assyncronously by signals.
-		 * 
+		 *
 		 * @return false if the query cannot be handled
 		 */
 		bool startQuery( KMSearch* );
@@ -133,8 +133,8 @@
 
 		void continueCreation();
 
-		void slotAddMessage( KMFolder*, Q_UINT32 message );
-		void slotRemoveMessage( KMFolder*, Q_UINT32 message );
+		void slotAddMessage( Q_UINT32 message );
+		void slotRemoveMessage( Q_UINT32 message );
 	private:
 		static QString defaultPath();
 
Index: kmail/kmfoldermgr.h
===================================================================
--- kmail/kmfoldermgr.h	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kmail/kmfoldermgr.h	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -117,6 +117,9 @@
   /** Rename or move a folder */
   void renameFolder( KMFolder* folder, const QString& newName, 
       KMFolderDir* newParent = 0 );
+  
+  /** Copy a folder */
+  void copyFolder( KMFolder* folder, KMFolderDir* newParent );
 
 public slots:
   /** GUI action: compact all folders that need to be compacted */
Index: kmail/kmfoldertree.cpp
===================================================================
--- kmail/kmfoldertree.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kmail/kmfoldertree.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -10,6 +10,7 @@
 #include "kmfolderimap.h"
 #include "kmfoldercachedimap.h"
 #include "kmfolderdia.h"
+#include "kmheaders.h"
 #include "kmmainwidget.h"
 #include "kmailicalifaceimpl.h"
 #include "accountmanager.h"
@@ -20,6 +21,8 @@
 #include "expirypropertiesdialog.h"
 #include "newfolderdialog.h"
 #include "acljobs.h"
+#include "messagecopyhelper.h"
+using KMail::MessageCopyHelper;
 
 #include <maillistdrag.h>
 using namespace KPIM;
@@ -258,16 +261,29 @@
 
 
 //-----------------------------------------------------------------------------
-bool KMFolderTreeItem::acceptDrag(QDropEvent*) const
+bool KMFolderTreeItem::acceptDrag(QDropEvent* e) const
 {
-  if ( !mFolder || mFolder->isReadOnly() ||
-      (mFolder->noContent() && childCount() == 0) ||
-       (mFolder->noContent() && isOpen()) ) {
-    return false;
-  }
-  else {
+  if ( protocol() == KFolderTreeItem::Search )
+    return false; // nothing can be dragged into search folders
+
+  if ( e->provides( KPIM::MailListDrag::format() ) ) {
+    if ( !mFolder || mFolder->isReadOnly() ||
+        (mFolder->noContent() && childCount() == 0) ||
+        (mFolder->noContent() && isOpen()) ) {
+      return false;
+    }
+    else {
+      return true;
+    }
+  } else if ( e->provides("application/x-qlistviewitem") ) {
+    // wtf: protocol() is NONE instead of Local for the local root folder
+    if ( !mFolder && protocol() == KFolderTreeItem::NONE && type() == KFolderTreeItem::Root )
+      return true; // local top-level folder
+    if ( !mFolder || mFolder->isReadOnly() || mFolder->noContent() )
+      return false;
     return true;
   }
+  return false;
 }
 
 //-----------------------------------------------------------------------------
@@ -321,11 +337,16 @@
   mLastItem = 0;
   mMainWidget = mainWidget;
   mReloading = false;
+  mCutFolder = false;
 
   mUpdateCountTimer= new QTimer( this );
 
+  setDragEnabled( true );
   addAcceptableDropMimetype(MailListDrag::format(), false);
+  addAcceptableDropMimetype( "application/x-qlistviewitem", false );
 
+  setSelectionModeExt( Extended );
+
   int namecol = addColumn( i18n("Folder"), 250 );
   header()->setStretchEnabled( true, namecol );
 
@@ -393,6 +414,8 @@
 
   connect( this, SIGNAL( itemRenamed( QListViewItem*, int, const QString &)),
            this, SLOT( slotRenameFolder( QListViewItem*, int, const QString &)));
+
+  connect( this, SIGNAL(folderSelected(KMFolder*)), SLOT(updateCopyActions()) );
 }
 
 //-----------------------------------------------------------------------------
@@ -489,9 +512,9 @@
     if (!folderNode->isDir()) {
       folder = static_cast<KMFolder*>(folderNode);
 
-      folder->open();
+      folder->open("updateunread");
       folder->countUnread();
-      folder->close();
+      folder->close("updateunread");
     }
   }
 
@@ -648,10 +671,10 @@
 
   // open the folder and update the count
   bool open = fti->folder()->isOpened();
-  if (!open) fti->folder()->open();
+  if (!open) fti->folder()->open("updatecount");
   slotUpdateCounts(fti->folder());
   // restore previous state
-  if (!open) fti->folder()->close();
+  if (!open) fti->folder()->close("updatecount");
 
   QTimer::singleShot( 0, this, SLOT(slotUpdateOneCount()) );
 }
@@ -668,7 +691,10 @@
     KMFolderTreeItem * fti = 0;
     if (!parent)
     {
-      // create new root-item
+      // create new root-item, but only if this is not the root of a 
+      // "groupware folders only" account
+      if ( kmkernel->iCalIface().hideResourceAccountRoot( folder ) )
+        continue;
       // it needs a folder e.g. to save it's state (open/close)
       fti = new KMFolderTreeItem( this, folder->label(), folder );
       fti->setExpandable( true );
@@ -762,6 +788,7 @@
   }
   removeFromFolderToItemMap( aFolder );
   delete fti;
+  updateCopyActions();
 }
 
 //-----------------------------------------------------------------------------
@@ -903,14 +930,26 @@
         return 0;
 }
 
+QValueList<QGuardedPtr<KMFolder> > KMFolderTree::selectedFolders()
+{
+  QValueList<QGuardedPtr<KMFolder> > rv;
+  for ( QListViewItemIterator it( this ); it.current(); ++it ) {
+    if ( it.current()->isSelected() ) {
+      KMFolderTreeItem *fti = static_cast<KMFolderTreeItem*>( it.current() );
+      rv.append( fti->folder() );
+    }
+  }
+  return rv;
+}
+
 //-----------------------------------------------------------------------------
 // When not dragging and dropping a change in the selected item
 // indicates the user has changed the active folder emit a signal
 // so that the header list and reader window can be udpated.
-void KMFolderTree::doFolderSelected( QListViewItem* qlvi )
+void KMFolderTree::doFolderSelected( QListViewItem* qlvi, bool keepSelection )
 {
   if (!qlvi) return;
-  if ( mLastItem && mLastItem == qlvi )
+  if ( mLastItem && mLastItem == qlvi && (keepSelection || selectedFolders().count() == 1) )
     return;
 
   KMFolderTreeItem* fti = static_cast< KMFolderTreeItem* >(qlvi);
@@ -926,9 +965,11 @@
   }
   mLastItem = fti;
 
-  clearSelection();
+  if ( !keepSelection )
+    clearSelection();
   setCurrentItem( qlvi );
-  setSelected( qlvi, TRUE );
+  if ( !keepSelection )
+    setSelected( qlvi, TRUE );
   ensureItemVisible( qlvi );
   if (!folder) {
     emit folderSelected(0); // Root has been selected
@@ -958,18 +999,20 @@
   if (!lvi)
     return;
   setCurrentItem( lvi );
-  setSelected( lvi, TRUE );
 
   if (!mMainWidget) return; // safe bet
 
   KMFolderTreeItem* fti = static_cast<KMFolderTreeItem*>(lvi);
-  if ( fti != mLastItem )
+  if ( !isSelected( fti ) )
     doFolderSelected( fti );
+  else if ( fti != mLastItem )
+    doFolderSelected( fti, true );
 
   if (!fti )
     return;
 
   KPopupMenu *folderMenu = new KPopupMenu;
+  bool multiFolder = selectedFolders().count() > 1;
   if (fti->folder()) folderMenu->insertTitle(fti->folder()->label());
 
   // outbox specific, but there it's the most used action
@@ -986,7 +1029,7 @@
     QString createChild = i18n("&New Subfolder...");
     if (!fti->folder()) createChild = i18n("&New Folder...");
 
-    if (fti->folder() || (fti->text(0) != i18n("Searches")))
+    if (fti->folder() || (fti->text(0) != i18n("Searches")) && !multiFolder)
         folderMenu->insertItem(SmallIconSet("folder_new"),
                                createChild, this,
                                SLOT(addChildFolder()));
@@ -1002,12 +1045,17 @@
   } else { // regular folders
 
     folderMenu->insertSeparator();
-    if ( !fti->folder()->noChildren() ) {
+    if ( !fti->folder()->noChildren() && !multiFolder ) {
       folderMenu->insertItem(SmallIconSet("folder_new"),
                              i18n("&New Subfolder..."), this,
                              SLOT(addChildFolder()));
     }
 
+    // copy folder
+    QPopupMenu *copyMenu = new QPopupMenu( folderMenu );
+    folderToPopupMenu( CopyFolder, this, &mMenuToFolder, copyMenu );
+    folderMenu->insertItem( i18n("&Copy Folder To"), copyMenu );
+
     if ( fti->folder()->isMoveable() )
     {
       QPopupMenu *moveMenu = new QPopupMenu( folderMenu );
@@ -1020,7 +1068,8 @@
     // -- smp.
     if (!fti->folder()->noContent())
     {
-      mMainWidget->action("search_messages")->plug(folderMenu);
+      if ( !multiFolder )
+        mMainWidget->action("search_messages")->plug(folderMenu);
 
       mMainWidget->action("compact")->plug(folderMenu);
 
@@ -1041,16 +1090,19 @@
     folderMenu->insertItem(SmallIconSet("bookmark_folder"),
         i18n("Subscription..."), mMainWidget,
         SLOT(slotSubscriptionDialog()));
+    folderMenu->insertItem(SmallIcon("bookmark_folder"),
+        i18n("Local Subscription..."), mMainWidget,
+        SLOT(slotLocalSubscriptionDialog()));
 
     if (!fti->folder()->noContent())
     {
       mMainWidget->action("refresh_folder")->plug(folderMenu);
-      if ( fti->folder()->folderType() == KMFolderTypeImap ) {
+      if ( fti->folder()->folderType() == KMFolderTypeImap && !multiFolder ) {
         folderMenu->insertItem(SmallIconSet("reload"), i18n("Refresh Folder List"), this,
             SLOT(slotResetFolderList()));
       }
     }
-    if ( fti->folder()->folderType() == KMFolderTypeCachedImap ) {
+    if ( fti->folder()->folderType() == KMFolderTypeCachedImap && !multiFolder ) {
       KMFolderCachedImap * folder = static_cast<KMFolderCachedImap*>( fti->folder()->storage() );
       folderMenu->insertItem( SmallIconSet("wizard"),
                               i18n("&Troubleshoot IMAP Cache..."),
@@ -1059,11 +1111,11 @@
     folderMenu->insertSeparator();
   }
 
-  if ( fti->folder() && fti->folder()->isMailingListEnabled() ) {
+  if ( fti->folder() && fti->folder()->isMailingListEnabled() && !multiFolder ) {
     mMainWidget->action("post_message")->plug(folderMenu);
   }
 
-  if (fti->folder() && fti->parent())
+  if (fti->folder() && fti->parent() && !multiFolder)
   {
     folderMenu->insertItem(SmallIconSet("configure_shortcuts"),
         i18n("&Assign Shortcut..."),
@@ -1087,12 +1139,18 @@
 }
 
 //-----------------------------------------------------------------------------
+void KMFolderTree::contentsMousePressEvent(QMouseEvent * e)
+{
+  // KFolderTree messes around with the selection mode
+  KListView::contentsMousePressEvent( e );
+}
+
 // If middle button and folder holds mailing-list, create a message to that list
 void KMFolderTree::contentsMouseReleaseEvent(QMouseEvent* me)
 {
   QListViewItem *lvi = currentItem(); // Needed for when branches are clicked on
   ButtonState btn = me->button();
-  doFolderSelected(lvi);
+  doFolderSelected(lvi, true);
 
   // get underlying folder
   KMFolderTreeItem* fti = dynamic_cast<KMFolderTreeItem*>(lvi);
@@ -1267,8 +1325,11 @@
     if (folderMap.find(name) == folderMap.end())
     {
       KMFolder* folder = kmkernel->findFolderById( name );
-      if ( folder && kmkernel->iCalIface().hideResourceFolder( folder ) )
+      if ( folder ) {
+          if ( kmkernel->iCalIface().hideResourceFolder( folder )
+           ||  kmkernel->iCalIface().hideResourceAccountRoot( folder ) )
         continue; // hidden IMAP resource folder, don't delete info
+      }
 
       //KMessageBox::error( 0, "cleanupConfigFile: Deleting group " + *grpIt );
       config->deleteGroup(*grpIt, TRUE);
@@ -1382,39 +1443,52 @@
 
     QListViewItem *item = itemAt( contentsToViewport(e->pos()) );
     KMFolderTreeItem *fti = static_cast<KMFolderTreeItem*>(item);
-    if (fti && (fti != oldSelected) && (fti->folder()) && acceptDrag(e))
+    if (fti && acceptDrag(e) && ( fti != oldSelected || e->source() != mMainWidget->headers()->viewport() ) )
     {
+      int action = -1;
       int keybstate = kapp->keyboardModifiers();
       if ( keybstate & KApplication::ControlModifier ) {
-        emit folderDropCopy(fti->folder());
+        action = DRAG_COPY;
       } else if ( keybstate & KApplication::ShiftModifier ) {
-        emit folderDrop(fti->folder());
+        action = DRAG_MOVE;
       } else {
-        if ( GlobalSettings::self()->showPopupAfterDnD() ) {
+        if ( GlobalSettings::self()->showPopupAfterDnD() || e->provides("application/x-qlistviewitem") ) {
           KPopupMenu *menu = new KPopupMenu( this );
           menu->insertItem( i18n("&Move Here"), DRAG_MOVE, 0 );
           menu->insertItem( SmallIcon("editcopy"), i18n("&Copy Here"), DRAG_COPY, 1 );
           menu->insertSeparator();
           menu->insertItem( SmallIcon("cancel"), i18n("C&ancel"), DRAG_CANCEL, 3 );
-          int id = menu->exec( QCursor::pos(), 0 );
-          switch(id) {
-            case DRAG_COPY:
-              emit folderDropCopy(fti->folder());
-              break;
-            case DRAG_MOVE:
-              emit folderDrop(fti->folder());
-              break;
-            case DRAG_CANCEL: // cancelled by menuitem
-            case -1: // cancelled by Esc
-              //just chill, doing nothing
-              break;
-            default:
-              kdDebug(5006) << "Unknown dnd-type! " << id << endl;
-          }
+          action = menu->exec( QCursor::pos(), 0 );
         }
         else
-          emit folderDrop(fti->folder());
+          action = DRAG_MOVE;
       }
+      if ( e->provides("application/x-qlistviewitem") ) {
+        if ( (action == DRAG_COPY || action == DRAG_MOVE) && !mCopySourceFolders.isEmpty() ) {
+          for ( QValueList<QGuardedPtr<KMFolder> >::ConstIterator it = mCopySourceFolders.constBegin();
+                it != mCopySourceFolders.constEnd(); ++it ) {
+            if ( ! (*it)->isMoveable() )
+              action = DRAG_COPY;
+          }
+          moveOrCopyFolder( mCopySourceFolders, fti->folder(), (action == DRAG_MOVE) );
+        }
+      } else {
+        if ( e->source() == mMainWidget->headers()->viewport() ) {
+          // KMHeaders does copy/move itself
+          if ( action == DRAG_MOVE && fti->folder() )
+            emit folderDrop( fti->folder() );
+          else if ( action == DRAG_COPY && fti->folder() )
+            emit folderDropCopy( fti->folder() );
+        } else if ( action == DRAG_COPY || action == DRAG_MOVE ) {
+          MailList list;
+          if ( !MailListDrag::decode( e, list ) ) {
+            kdWarning() << k_funcinfo << "Could not decode drag data!" << endl;
+          } else {
+            QValueList<Q_UINT32> serNums = MessageCopyHelper::serNumListFromMailList( list );
+            new MessageCopyHelper( serNums, fti->folder(), action == DRAG_MOVE, this );
+          }
+        }
+      }
       e->accept( true );
     } else
       e->accept( false );
@@ -1428,6 +1502,8 @@
       clearSelection();
       setSelected( oldSelected, TRUE );
     }
+
+    mCopySourceFolders.clear();
 }
 
 //-----------------------------------------------------------------------------
@@ -1790,18 +1866,6 @@
       item = item->nextSibling();
       continue;
     }
-    if ( action == MoveFolder ) {
-      // FIXME remove in KDE 4
-      // skip all but local folders if a folder is to be moved
-      // because moving of nested folders to IMAP and DIMAP
-      // looses all messages in the subfolders
-      if ( fti->protocol() != KFolderTreeItem::Local
-        && fti->protocol() != KFolderTreeItem::NONE )
-      {
-        item = item->nextSibling();
-        continue;
-      }
-    }
     QString label = fti->text( 0 );
     label.replace( "&","&&" );
     if ( fti->firstChild() )
@@ -1813,9 +1877,21 @@
       if ( ( action == MoveMessage || action == CopyMessage ) &&
            fti->folder() && !fti->folder()->noContent() )
         subMenu = true;
-      if ( action == MoveFolder && ( !fti->folder() ||
-            ( fti->folder() && !fti->folder()->noChildren() ) ) )
+      if ( ( action == MoveFolder || action == CopyFolder )
+          && ( !fti->folder() || ( fti->folder() && !fti->folder()->noChildren() ) ) )
         subMenu = true;
+
+      QString sourceFolderName;
+      KMFolderTreeItem* srcItem = dynamic_cast<KMFolderTreeItem*>( currentItem() );
+      if ( srcItem )
+        sourceFolderName = srcItem->text( 0 );
+
+      if ( (action == MoveFolder || action == CopyFolder)
+              && fti->folder() && fti->folder()->child()
+              && fti->folder()->child()->hasNamedFolder( sourceFolderName ) ) {
+        subMenu = false;
+      }
+
       if ( subMenu )
       {
         int menuId;
@@ -1847,55 +1923,183 @@
 //-----------------------------------------------------------------------------
 void KMFolderTree::moveSelectedToFolder( int menuId )
 {
-  moveFolder( mMenuToFolder[menuId] );
+  moveOrCopyFolder( selectedFolders(), mMenuToFolder[ menuId ], true /*move*/ );
 }
 
 //-----------------------------------------------------------------------------
-void KMFolderTree::moveFolder( KMFolder* destination )
+void KMFolderTree::copySelectedToFolder( int menuId )
 {
-  KMFolder* folder = currentFolder();
-  if (!folder)
-	return;
+  moveOrCopyFolder( selectedFolders(), mMenuToFolder[ menuId ], false /*copy, don't move*/ );
+}
 
+//-----------------------------------------------------------------------------
+void KMFolderTree::moveOrCopyFolder( QValueList<QGuardedPtr<KMFolder> > sources, KMFolder* destination, bool move )
+{
+  kdDebug(5006) << k_funcinfo << "source: " << sources << " destination: " << destination << " move: " << move << endl;
+
   KMFolderDir* parent = &(kmkernel->folderMgr()->dir());
   if ( destination )
     parent = destination->createChildFolder();
-  QString message =
-    i18n( "<qt>Cannot move folder <b>%1</b> into a subfolder below itself.</qt>" ).
-        arg( folder->label() );
 
-  KMFolderDir* folderDir = parent;
-  // check that the folder can be moved
-  if ( folder->child() )
-  {
-    while ( folderDir && ( folderDir != &kmkernel->folderMgr()->dir() ) &&
-        ( folderDir != folder->parent() ) )
+  QStringList sourceFolderNames;
+
+  // check if move/copy is possible at all
+  for ( QValueList<QGuardedPtr<KMFolder> >::ConstIterator it = sources.constBegin(); it != sources.constEnd(); ++it ) {
+    KMFolder* source = *it;
+
+    // check if folder with same name already exits
+    QString sourceFolderName;
+    if ( source )
+      sourceFolderName = source->label();
+
+    if ( parent->hasNamedFolder( sourceFolderName ) || sourceFolderNames.contains( sourceFolderName ) ) {
+      KMessageBox::error( this, i18n("<qt>Cannot move or copy folder <b>%1</b> here because a folder with the same name already exists.</qt>")
+          .arg( sourceFolderName ) );
+      return;
+    }
+    sourceFolderNames.append( sourceFolderName );
+
+    // don't move/copy a folder that's still not completely moved/copied
+    KMFolder *f = source;
+    while ( f ) {
+      if ( f->moveInProgress() ) {
+        KMessageBox::error( this, i18n("<qt>Cannot move or copy folder <b>%1</b> because it is not completely copied itself.</qt>")
+            .arg( sourceFolderName ) );
+        return;
+      }
+      if ( f->parent() )
+        f = f->parent()->owner();
+    }
+
+    QString message =
+      i18n( "<qt>Cannot move or copy folder <b>%1</b> into a subfolder below itself.</qt>" ).
+          arg( sourceFolderName );
+    KMFolderDir* folderDir = parent;
+    // check that the folder can be moved
+    if ( source && source->child() )
     {
-      if ( folderDir->findRef( folder ) != -1 )
+      while ( folderDir && ( folderDir != &kmkernel->folderMgr()->dir() ) &&
+          ( folderDir != source->parent() ) )
       {
-        KMessageBox::error( this, message );
-        return;
+        if ( folderDir->findRef( source ) != -1 )
+        {
+          KMessageBox::error( this, message );
+          return;
+        }
+        folderDir = folderDir->parent();
       }
-      folderDir = folderDir->parent();
     }
+
+    if( source && source->child() && parent &&
+        ( parent->path().find( source->child()->path() + "/" ) == 0 ) ) {
+      KMessageBox::error( this, message );
+      return;
+    }
+
+    if( source && source->child()
+        && ( parent == source->child() ) ) {
+      KMessageBox::error( this, message );
+      return;
+    }
   }
 
-  if( folder->child() && parent &&
-      ( parent->path().find( folder->child()->path() + "/" ) == 0 ) ) {
-    KMessageBox::error( this, message );
-    return;
+  // check if the source folders are independent of each other
+  for ( QValueList<QGuardedPtr<KMFolder> >::ConstIterator it = sources.constBegin(); move && it != sources.constEnd(); ++it ) {
+    KMFolderDir *parentDir = (*it)->child();
+    if ( !parentDir )
+      continue;
+    for ( QValueList<QGuardedPtr<KMFolder> >::ConstIterator it2 = sources.constBegin(); it2 != sources.constEnd(); ++it2 ) {
+      if ( *it == *it2 )
+        continue;
+      KMFolderDir *childDir = (*it2)->parent();
+      do {
+        if ( parentDir == childDir || parentDir->findRef( childDir->owner() ) != -1 ) {
+          KMessageBox::error( this, i18n("Moving the selected folders is not possible") );
+          return;
+        }
+        childDir = childDir->parent();
+      }
+      while ( childDir && childDir != &kmkernel->folderMgr()->dir() );
+    }
   }
 
-  if( folder->child()
-      && ( parent == folder->child() ) ) {
-    KMessageBox::error( this, message );
-    return;
+  // do the actual move/copy
+  for ( QValueList<QGuardedPtr<KMFolder> >::ConstIterator it = sources.constBegin(); it != sources.constEnd(); ++it ) {
+    KMFolder* source = *it;
+    if ( move ) {
+      kdDebug(5006) << "move folder " << (source ? source->label(): "Unknown") << " to "
+        << ( destination ? destination->label() : "Local Folders" ) << endl;
+      kmkernel->folderMgr()->moveFolder( source, parent );
+    } else {
+      kmkernel->folderMgr()->copyFolder( source, parent );
+    }
   }
+}
 
-  kdDebug(5006) << "move folder " << currentFolder()->label() << " to "
-    << ( destination ? destination->label() : "Local Folders" ) << endl;
-  kmkernel->folderMgr()->moveFolder( folder, parent );
+QDragObject * KMFolderTree::dragObject()
+{
+  KMFolderTreeItem *item = static_cast<KMFolderTreeItem*>
+      (itemAt(viewport()->mapFromGlobal(QCursor::pos())));
+  if ( !item || !item->parent() || !item->folder() ) // top-level items or something invalid
+    return 0;
+  mCopySourceFolders = selectedFolders();
+
+  QDragObject *drag = KFolderTree::dragObject();
+  if ( drag )
+    drag->setPixmap( SmallIcon("folder") );
+  return drag;
 }
 
+void KMFolderTree::copyFolder()
+{
+  KMFolderTreeItem *item = static_cast<KMFolderTreeItem*>( currentItem() );
+  if ( item ) {
+    mCopySourceFolders = selectedFolders();
+    mCutFolder = false;
+  }
+  updateCopyActions();
+}
+
+void KMFolderTree::cutFolder()
+{
+  KMFolderTreeItem *item = static_cast<KMFolderTreeItem*>( currentItem() );
+  if ( item ) {
+    mCopySourceFolders = selectedFolders();
+    mCutFolder = true;
+  }
+  updateCopyActions();
+}
+
+void KMFolderTree::pasteFolder()
+{
+  KMFolderTreeItem *item = static_cast<KMFolderTreeItem*>( currentItem() );
+  if ( !mCopySourceFolders.isEmpty() && item && !mCopySourceFolders.contains( item->folder() ) ) {
+    moveOrCopyFolder( mCopySourceFolders, item->folder(), mCutFolder );
+    if ( mCutFolder )
+      mCopySourceFolders.clear();
+  }
+  updateCopyActions();
+}
+
+void KMFolderTree::updateCopyActions()
+{
+  KAction *copy = mMainWidget->action("copy_folder");
+  KAction *cut = mMainWidget->action("cut_folder");
+  KAction *paste = mMainWidget->action("paste_folder");
+  KMFolderTreeItem *item = static_cast<KMFolderTreeItem*>( currentItem() );
+
+  if ( !item ||  !item->folder() ) {
+    copy->setEnabled( false );
+    cut->setEnabled( false );
+  } else {
+    copy->setEnabled( true );
+    cut->setEnabled( item->folder()->isMoveable() );
+  }
+
+  if ( mCopySourceFolders.isEmpty() )
+    paste->setEnabled( false );
+  else
+    paste->setEnabled( true );
+}
+
 #include "kmfoldertree.moc"
-
Index: kmail/kmtransport.cpp
===================================================================
--- kmail/kmtransport.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kmail/kmtransport.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -126,15 +126,15 @@
   if ( storePasswd() ) {
     // write password into the wallet if possible and necessary
     bool passwdStored = false;
+    Wallet *wallet = kmkernel->wallet();
     if ( mPasswdDirty ) {
-      Wallet *wallet = kmkernel->wallet();
       if ( wallet && wallet->writePassword( "transport-" + QString::number(mId), passwd() ) == 0 ) {
         passwdStored = true;
         mPasswdDirty = false;
         mStorePasswdInConfig = false;
       }
     } else {
-      passwdStored = !mStorePasswdInConfig; // already in the wallet
+      passwdStored = wallet ? !mStorePasswdInConfig /*already in the wallet*/ : config->hasKey("pass");
     }
     // wallet not available, ask the user if we should use the config file instead
     if ( !passwdStored && ( mStorePasswdInConfig ||  KMessageBox::warningYesNo( 0,
Index: kmail/kmfoldermbox.h
===================================================================
--- kmail/kmfoldermbox.h	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kmail/kmfoldermbox.h	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -60,8 +60,7 @@
   /** Returns the type of this folder */
   virtual KMFolderType folderType() const { return KMFolderTypeMbox; }
 
-  /** Read a message and return a referece to a string */
-  virtual QCString& getMsgString(int idx, QCString& mDest);
+  /** Read a message and return it as a string */
   DwString getDwString(int idx);
 
   /** Add the given message to the folder. Usually the message
@@ -77,11 +76,11 @@
     call close() first.
     Returns zero on success and an error code equal to the c-library
     fopen call otherwise (errno). */
-  virtual int open();
+  virtual int open(const char *owner);
 
   /** Close folder. If force is TRUE the files are closed even if
     others still use it (e.g. other mail reader windows). */
-  virtual void close(bool force=FALSE);
+  virtual void close(const char *owner, bool force=FALSE);
 
   virtual int canAccess();
 
@@ -109,7 +108,7 @@
 
   void setProcmailLockFileName( const QString& );
 
-  static QCString escapeFrom( const QCString & str );
+  static QByteArray escapeFrom( const DwString & str );
 
   virtual IndexStatus indexStatus();
 
Index: kmail/kmail_config_security.desktop
===================================================================
--- kmail/kmail_config_security.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kmail/kmail_config_security.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -37,11 +37,14 @@
 Name[is]=Öryggi
 Name[it]=Sicurezza
 Name[ja]=セキュリティ
+Name[kk]=Қауіпсіздік
 Name[km]=សុវត្ថិភាព
 Name[lt]=Saugumas
+Name[mk]=Безбедност
 Name[ms]=Keselamatan
 Name[nb]=Sikkerhet
 Name[nds]=Sekerheit
+Name[ne]=सूरक्षा
 Name[nl]=Beveiliging
 Name[nn]=Tryggleik
 Name[pa]=ਸੁਰੱਖਿਆ
@@ -64,7 +67,7 @@
 Name[zh_TW]=安全性
 Comment=Security & Privacy Settings
 Comment[af]=Sekuriteit en provaatheid opstelling
-Comment[be]=Настройкі бясьпекі і прыватнасьці
+Comment[be]=Настаўленні бясьпекі і прыватнасьці
 Comment[bg]=Настройки на сигурността
 Comment[br]=Kefluniadur surentez ar buhez prevez
 Comment[bs]=Postavke sigurnosti i privatnosti
@@ -85,11 +88,14 @@
 Comment[is]=Öryggis & einkalífsstillingar
 Comment[it]=Impostazioni sicurezza e privacy
 Comment[ja]=セキュリティ & プライバシーの設定
+Comment[kk]=Қауіпсіздігі пен Дербестік параметрлері
 Comment[km]=ការ​កំណត់​សុវត្ថិភាព & ភាព​ឯកជន
 Comment[lt]=Saugumo ir privatumo nustatymai
+Comment[mk]=Поставувања за безбедност и приватност
 Comment[ms]=Seting Keselamatan & Peribadi
 Comment[nb]=Sikkerhet og personvern-instillinger
 Comment[nds]=Sekerheit- un Privaatrebeet-Instellen
+Comment[ne]=सुरक्षा र गोप्यता सेटिङ
 Comment[nl]=Beveiligings- en privacy-instellingen
 Comment[nn]=Innstillingar for tryggleik og personvern
 Comment[pl]=Ustawienia bezpieczeństwa i prywatności
@@ -110,7 +116,7 @@
 Comment[zh_TW]=安全性與隱私設定
 Keywords=kmail,security
 Keywords[be]=K Пошта,бясьпека,kmail,security
-Keywords[bg]=пощенски, клиент, е-поща, сигурност, конфиденциалност, kmail, security
+Keywords[bg]=пощенски, клиент, е-поща, сигурност, поверителност, kmail, security
 Keywords[br]=kmail,surentez
 Keywords[bs]=kmail,security,sigurnost
 Keywords[ca]=kmail,seguretat
@@ -133,9 +139,11 @@
 Keywords[ja]=kmail,セキュリティ
 Keywords[km]=kmail,សុវត្ថិភាព
 Keywords[lt]=kmail,security,saugumas
+Keywords[mk]=kmail,security,кпошта,безбедност
 Keywords[ms]=kmail,keselamatan
 Keywords[nb]=kmail,sikkerhet
 Keywords[nds]=KMail,Sekerheit,Privaatrebeet
+Keywords[ne]=केडीई मेल, सुरक्षा
 Keywords[nl]=kmail,beveiliging
 Keywords[nn]=KMail,tryggleik
 Keywords[pl]=kmail,bezpieczeństwo,prywatność
Index: kmail/searchjob.cpp
===================================================================
--- kmail/searchjob.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kmail/searchjob.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -222,7 +222,12 @@
     for ( QStringList::Iterator it = mImapSearchHits.begin(); 
         it != mImapSearchHits.end(); ++it ) 
     {
-      serNums.append( mFolder->serNumForUID( (*it).toULong() ) );
+      ulong serNum = mFolder->serNumForUID( (*it).toULong() );
+      // we need to check that the local folder does contain a message for this UID. 
+      // scenario: server responds with a list of UIDs.  While the search was running, filtering or bad juju moved a message locally
+      // serNumForUID will happily return 0 for the missing message, and KMFolderSearch::addSerNum() will fail its assertion.
+      if ( serNum != 0 ) 
+        serNums.append( serNum );
     }
     emit searchDone( serNums, mSearchPattern, true );
   } else {
Index: kmail/objecttreeparser.cpp
===================================================================
--- kmail/objecttreeparser.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kmail/objecttreeparser.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -72,9 +72,14 @@
 #include <kpgp.h>
 #include <linklocator.h>
 
+#include <ktnef/ktnefparser.h>
+#include <ktnef/ktnefmessage.h>
+#include <ktnef/ktnefattach.h>
+
 // other KDE headers
 #include <kdebug.h>
 #include <klocale.h>
+#include <kmimetype.h>
 #include <kglobal.h>
 #include <khtml_part.h>
 #include <ktempfile.h>
@@ -86,6 +91,7 @@
 
 // other Qt headers
 #include <qtextcodec.h>
+#include <qdir.h>
 #include <qfile.h>
 #include <qapplication.h>
 #include <kstyle.h>
@@ -401,7 +407,7 @@
 
     if ( doCheck && cryptPlug ) {
       if ( data ) {
-        cleartext = data->dwPart()->AsString().c_str();
+        cleartext = KMail::Util::CString( data->dwPart()->AsString() );
 
         dumpToFile( "dat_01_reader_signedtext_before_canonicalization",
                     cleartext.data(), cleartext.length() );
@@ -970,9 +976,8 @@
   }
 
   bool ObjectTreeParser::processTextPlainSubtype( partNode * curNode, ProcessResult & result ) {
-    const QCString cstr = curNode->msgPart().bodyDecoded();
     if ( !mReader ) {
-      mRawReplyString = cstr;
+      mRawReplyString = curNode->msgPart().bodyDecoded();
       if ( curNode->isFirstTextPart() ) {
         mTextualContent += curNode->msgPart().bodyToUnicode();
         mTextualContentCharset = curNode->msgPart().charset();
@@ -980,13 +985,12 @@
       return true;
     }
 
-    //resultingRawData += cstr;
     if ( !curNode->isFirstTextPart() &&
          attachmentStrategy()->defaultDisplay( curNode ) != AttachmentStrategy::Inline &&
          !showOnlyOneMimePart() )
       return false;
 
-    mRawReplyString = cstr;
+    mRawReplyString = curNode->msgPart().bodyDecoded();
     if ( curNode->isFirstTextPart() ) {
       mTextualContent += curNode->msgPart().bodyToUnicode();
       mTextualContentCharset = curNode->msgPart().charset();
@@ -1029,7 +1033,7 @@
     // enable verification of the embedded messages' signatures
     if ( !isMailmanMessage( curNode ) ||
          !processMailmanMessage( curNode ) )
-      writeBodyString( cstr, curNode->trueFromAddress(),
+      writeBodyString( mRawReplyString, curNode->trueFromAddress(),
                        codecFor( curNode ), result, !bDrawFrame );
     if ( bDrawFrame )
       htmlWriter()->queue( "</td></tr></table>" );
@@ -1705,6 +1709,73 @@
   return true;
 }
 
+bool ObjectTreeParser::processApplicationMsTnefSubtype( partNode *node, ProcessResult &result )
+{
+  Q_UNUSED( result );
+  if ( !mReader )
+    return false;
+
+  const QString fileName = mReader->writeMessagePartToTempFile( &node->msgPart(), node->nodeId() );
+  KTNEFParser parser;
+  if ( !parser.openFile( fileName ) || !parser.message()) {
+    kdDebug() << k_funcinfo << "Could not parse " << fileName << endl;
+    return false;
+  }
+
+  QPtrList<KTNEFAttach> tnefatts = parser.message()->attachmentList();
+  if ( tnefatts.isEmpty() ) {
+    kdDebug() << k_funcinfo << "No attachments found in " << fileName << endl;
+    return false;
+  }
+
+  if ( !showOnlyOneMimePart() ) {
+    QString label = node->msgPart().fileName().stripWhiteSpace();
+    if ( label.isEmpty() )
+      label = node->msgPart().name().stripWhiteSpace();
+    label = KMMessage::quoteHtmlChars( label, true );
+    const QString comment = KMMessage::quoteHtmlChars( node->msgPart().contentDescription(), true );
+    const QString dir = QApplication::reverseLayout() ? "rtl" : "ltr" ;
+
+    QString htmlStr = "<table cellspacing=\"1\" class=\"textAtm\">"
+                "<tr class=\"textAtmH\"><td dir=\"" + dir + "\">";
+    if ( !fileName.isEmpty() )
+      htmlStr += "<a href=\"" + QString("file:")
+        + KURL::encode_string( fileName ) + "\">"
+        + label + "</a>";
+    else
+      htmlStr += label;
+    if ( !comment.isEmpty() )
+      htmlStr += "<br>" + comment;
+    htmlStr += "</td></tr><tr class=\"textAtmB\"><td>";
+    htmlWriter()->queue( htmlStr );
+  }
+
+  for ( uint i = 0; i < tnefatts.count(); ++i ) {
+    KTNEFAttach *att = tnefatts.at( i );
+    QString label = att->displayName();
+    if( label.isEmpty() )
+      label = att->name();
+    label = KMMessage::quoteHtmlChars( label, true );
+
+    QString dir = mReader->createTempDir( "ktnef-" + QString::number( i ) );
+    parser.extractFileTo( att->name(), dir );
+    mReader->mTempFiles.append( dir + QDir::separator() + att->name() );
+    QString href = "file:" + KURL::encode_string( dir + QDir::separator() + att->name() );
+
+    KMimeType::Ptr mimeType = KMimeType::mimeType( att->mimeTag() );
+    QString iconName = KGlobal::instance()->iconLoader()->iconPath( mimeType->icon( QString(), false ), KIcon::Desktop );
+
+    htmlWriter()->queue( "<div><a href=\"" + href + "\"><img src=\"" +
+                          iconName + "\" border=\"0\" style=\"max-width: 100%\">" + label +
+                          "</a></div><br>" );
+  }
+
+  if ( !showOnlyOneMimePart() )
+    htmlWriter()->queue( "</td></tr></table>" );
+
+  return true;
+}
+
   void ObjectTreeParser::writeBodyString( const QCString & bodyString,
                                           const QString & fromAddress,
                                           const QTextCodec * codec,
Index: kmail/listjob.cpp
===================================================================
--- kmail/listjob.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kmail/listjob.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -55,7 +55,8 @@
     KPIM::ProgressItem* item )
  : FolderJob( 0, tOther, (storage ? storage->folder() : 0) ),
    mStorage( storage ), mAccount( account ), mType( type ),
-   mComplete( complete ), mPath( path ),
+   mComplete( complete ),
+   mHonorLocalSubscription( false ), mPath( path ),
    mParentProgressItem( item )
 {
 }
@@ -101,7 +102,7 @@
   jd.total = 1; jd.done = 0;
   jd.cancellable = true;
   jd.parent = mDestFolder;
-  jd.onlySubscribed = ( mType == ImapAccountBase::ListSubscribed || 
+  jd.onlySubscribed = ( mType == ImapAccountBase::ListSubscribed ||
                         mType == ImapAccountBase::ListSubscribedNoCheck ||
                         mType == ImapAccountBase::ListFolderOnlySubscribed );
   jd.path = mPath;
@@ -131,12 +132,12 @@
   QString section;
   if ( mComplete )
     section = ";SECTION=COMPLETE";
-  else if ( mType == ImapAccountBase::ListFolderOnly || 
+  else if ( mType == ImapAccountBase::ListFolderOnly ||
             mType == ImapAccountBase::ListFolderOnlySubscribed )
     section = ";SECTION=FOLDERONLY";
-  
+
   KURL url = mAccount->getUrl();
-  url.setPath( mPath 
+  url.setPath( mPath
       + ";TYPE=" + ltype
       + section );
   // go
@@ -221,6 +222,11 @@
           || mimeType == "message/directory")
          && name != ".." && (mAccount->hiddenFolders() || name.at(0) != '.') )
     {
+      if ( mHonorLocalSubscription && mAccount->onlyLocallySubscribedFolders()
+        && !mAccount->locallySubscribedTo( url.path() ) ) {
+          continue;
+      }
+
       // Some servers send _lots_ of duplicates
       // This check is too slow for huge lists
       if ( mSubfolderPaths.count() > 100 ||
@@ -235,4 +241,15 @@
   }
 }
 
+
+void KMail::ListJob::setHonorLocalSubscription( bool value )
+{
+  mHonorLocalSubscription = value;
+}
+
+bool KMail::ListJob::honorLocalSubscription() const
+{
+  return mHonorLocalSubscription;
+}
+
 #include "listjob.moc"
Index: kmail/kmail_config_accounts.desktop
===================================================================
--- kmail/kmail_config_accounts.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kmail/kmail_config_accounts.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -38,11 +38,14 @@
 Name[is]=Tengingar
 Name[it]=Account
 Name[ja]=アカウント
+Name[kk]=Тіркелгілері
 Name[km]=គណនី
 Name[lt]=Paskyros
+Name[mk]=Сметки
 Name[ms]=Akaun
 Name[nb]=Kontoer
 Name[nds]=Kontos
+Name[ne]=खाता
 Name[nn]=Kontoar
 Name[pa]=ਖਾਤੇ
 Name[pl]=Konta
@@ -83,11 +86,14 @@
 Comment[is]=Uppsetning fyrir sendingu og móttöku af tölvupósti
 Comment[it]=Impostazioni per spedire e ricevere messaggi
 Comment[ja]=メッセージを送受信するための設定
+Comment[kk]=Хаттарды жіберу мен қабылдауды баптау
 Comment[km]=រៀបចំ​ដើម្បី​ផ្ញើ និង ទទួល​សារ
 Comment[lt]=Laiškų siuntimo ir gavimo sąranka
+Comment[mk]=Конфигурација за примање и испраќање пораки
 Comment[ms]=Setup untuk Menghantar dan Menerima Mesej
 Comment[nb]=Oppset for mottak og sending av meldinger
 Comment[nds]=Instellen för dat Sennen un Kriegen vun Narichten
+Comment[ne]=सन्देश पठाउन वा प्राप्त गर्न सेटअप गर्नुहोस्
 Comment[nl]=Instellingen voor het verzenden en ontvangen van berichten
 Comment[nn]=Oppsett av sending og mottak av meldingar
 Comment[pl]=Ustawienia wysyłania i odbierania wiadomości
@@ -128,9 +134,11 @@
 Keywords[it]=kmail,account
 Keywords[km]=kmail,គណនី
 Keywords[lt]=kmail,accounts,paskyros
+Keywords[mk]=kmail,accounts,кпошта,сметка,сметки
 Keywords[ms]=kmail,akaun
 Keywords[nb]=kmail,kontoer
 Keywords[nds]=KMail,Kontos
+Keywords[ne]=केडीई मेल,खाता
 Keywords[nn]=KMail,kontoar
 Keywords[pl]=kmail,konta
 Keywords[pt]=kmail,contas
Index: kmail/kmsender.cpp
===================================================================
--- kmail/kmsender.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kmail/kmsender.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -161,8 +161,8 @@
 
   if (sendNow==-1) sendNow = mSendImmediate;
 
-  kmkernel->outboxFolder()->open();
-  const KMFolderCloser openOutbox( kmkernel->outboxFolder() );
+  kmkernel->outboxFolder()->open("outbox");
+  const KMFolderCloser openOutbox( "outbox", kmkernel->outboxFolder() );
 
   aMsg->setStatus(KMMsgStatusQueued);
 
@@ -219,11 +219,11 @@
 
   // open necessary folders
   mOutboxFolder = kmkernel->outboxFolder();
-  mOutboxFolder->open();
+  mOutboxFolder->open("dosendoutbox");
   mTotalMessages = mOutboxFolder->count();
   if (mTotalMessages == 0) {
     // Nothing in the outbox. We are done.
-    mOutboxFolder->close();
+    mOutboxFolder->close("dosendoutbox");
     mOutboxFolder = 0;
     return TRUE;
   }
@@ -236,7 +236,7 @@
   mCurrentMsg = 0;
 
   mSentFolder = kmkernel->sentFolder();
-  mSentFolder->open();
+  mSentFolder->open("dosendsent");
   kmkernel->filterMgr()->ref();
 
   // start sending the messages
@@ -352,7 +352,7 @@
       sentFolder = kmkernel->sentFolder();
 
     if ( sentFolder ) {
-      if ( const int err = sentFolder->open() ) {
+      if ( const int err = sentFolder->open("sentFolder") ) {
         Q_UNUSED( err );
         cleanup();
         return;
@@ -375,7 +375,7 @@
                    "Moving failing message to \"sent-mail\" folder."));
       if ( sentFolder ) {
         sentFolder->moveMsg(mCurrentMsg);
-        sentFolder->close();
+        sentFolder->close("sentFolder");
       }
       cleanup();
       return;
@@ -446,7 +446,7 @@
     	mCurrentMsg = 0;
     // no more message: cleanup and done
     if ( sentFolder != 0 )
-        sentFolder->close();
+        sentFolder->close("sentFolder");
     if ( someSent ) {
       if ( mSentMessages == mTotalMessages ) {
         setStatusMsg(i18n("%n queued message successfully sent.",
@@ -605,7 +605,7 @@
   if ( messageIsDispositionNotificationReport( mCurrentMsg ) && GlobalSettings::self()->sendMDNsWithEmptySender() )
     sender = "<>";
 
-  const QCString message = mCurrentMsg->asSendableString();
+  const QByteArray message = mCurrentMsg->asSendableString();
   if ( sender.isEmpty() || !mSendProc->send( sender, to, cc, bcc, message ) ) {
     if ( mCurrentMsg )
       mCurrentMsg->setTransferInProgress( false );
@@ -636,13 +636,13 @@
     mCurrentMsg = 0;
   }
   if ( mSentFolder ) {
-    mSentFolder->close();
+    mSentFolder->close("dosendsent");
     mSentFolder = 0;
   }
   if ( mOutboxFolder ) {
     disconnect( mOutboxFolder, SIGNAL(msgAdded(int)),
                 this, SLOT(outboxMsgAdded(int)) );
-    mOutboxFolder->close();
+    mOutboxFolder->close("dosendoutbox");
     if ( mOutboxFolder->count( true ) == 0 ) {
       mOutboxFolder->expunge();
     }
@@ -854,7 +854,7 @@
     int index = -1;
     KMMsgDict::instance()->getLocation(msn, &folder, &index);
     if (folder && index != -1) {
-      folder->open();
+      folder->open("setstatus");
       if ( status == KMMsgStatusDeleted ) {
         // Move the message to the trash folder
         KMDeleteMsgCommand *cmd =
@@ -863,7 +863,7 @@
       } else {
         folder->setStatus(index, status);
       }
-      folder->close();
+      folder->close("setstatus");
     } else {
       kdWarning(5006) << k_funcinfo << "Cannot update linked message, it could not be found!" << endl;
     }
@@ -963,7 +963,7 @@
   idle();
 }
 
-bool KMSendSendmail::doSend( const QString & sender, const QStringList & to, const QStringList & cc, const QStringList & bcc, const QCString & message ) {
+bool KMSendSendmail::doSend( const QString & sender, const QStringList & to, const QStringList & cc, const QStringList & bcc, const QByteArray & message ) {
   mMailerProc->clearArguments();
   *mMailerProc << mSender->transportInfo()->host
                << "-i" << "-f" << sender
@@ -977,7 +977,7 @@
     return false;
   }
   mMsgPos  = mMsgStr.data();
-  mMsgRest = mMsgStr.length();
+  mMsgRest = mMsgStr.size();
   wroteStdin( mMailerProc );
 
   return true;
@@ -1048,7 +1048,7 @@
   if (mJob) mJob->kill();
 }
 
-bool KMSendSMTP::doSend( const QString & sender, const QStringList & to, const QStringList & cc, const QStringList & bcc, const QCString & message ) {
+bool KMSendSMTP::doSend( const QString & sender, const QStringList & to, const QStringList & cc, const QStringList & bcc, const QByteArray & message ) {
   QString query = "headers=0&from=";
   query += KURL::encode_string( sender );
 
@@ -1119,7 +1119,7 @@
 
   // dotstuffing is now done by the slave (see setting of metadata)
   mMessage = message;
-  mMessageLength = mMessage.length();
+  mMessageLength = mMessage.size();
   mMessageOffset = 0;
 
   if ( mMessageLength )
Index: kmail/actionscheduler.cpp
===================================================================
--- kmail/actionscheduler.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kmail/actionscheduler.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -122,7 +122,7 @@
 {
   schedulerList->remove( this );
   tempCloseFolders();
-  mSrcFolder->close();
+  mSrcFolder->close("actionschedsrc");
 
   if (mDeleteSrcFolder)
     tempFolderMgr->remove(mSrcFolder);
@@ -151,11 +151,11 @@
 
 void ActionScheduler::setSourceFolder( KMFolder *srcFolder )
 {
-  srcFolder->open();
+  srcFolder->open("actionschedsrc");
   if (mSrcFolder) {
     disconnect( mSrcFolder, SIGNAL(msgAdded(KMFolder*, Q_UINT32)),
 		this, SLOT(msgAdded(KMFolder*, Q_UINT32)) );
-    mSrcFolder->close();
+    mSrcFolder->close("actionschedsrc");
   }
   mSrcFolder = srcFolder;
   int i = 0;
@@ -170,7 +170,7 @@
 {
   mFiltersAreQueued = true;
   mQueuedFilters.clear();
-  
+
   QValueList<KMFilter*>::Iterator it = filters.begin();
   for (; it != filters.end(); ++it)
     mQueuedFilters.append( **it );
@@ -188,7 +188,7 @@
   if ( aFolder == mSrcFolder.operator->() )
     return 0;
 
-  int rc = aFolder->open();
+  int rc = aFolder->open("actionsched");
   if (rc)
     return rc;
 
@@ -203,7 +203,7 @@
   for (it = mOpenFolders.begin(); it != mOpenFolders.end(); ++it) {
     KMFolder *folder = *it;
     if (folder)
-      folder->close();
+      folder->close("actionsched");
   }
   mOpenFolders.clear();
 }
@@ -231,7 +231,7 @@
 void ActionScheduler::execFilters(Q_UINT32 serNum)
 {
   if (mResult != ResultOk) {
-      if ((mResult != ResultCriticalError) && 
+      if ((mResult != ResultCriticalError) &&
 	  !mExecuting && !mExecutingLock && !mFetchExecuting) {
 	  mResult = ResultOk; // Recoverable error
 	  if (!mFetchSerNums.isEmpty()) {
@@ -420,10 +420,10 @@
       fetchMessageTimer->start( 0, true );
       return;
   }
-	
+
   mFetchSerNums.remove( msg->getMsgSerNum() );
 
-  // Note: This may not be necessary. What about when it's time to 
+  // Note: This may not be necessary. What about when it's time to
   //       delete the original message?
   //       Is the new serial number being set correctly then?
   if ((mSet & KMFilterMgr::Explicit) ||
@@ -500,7 +500,7 @@
 
   //If we got this far then there's a valid message to work with
   KMMsgBase *msgBase = messageBase( *mMessageIt );
-  if (mResult != ResultOk) {
+  if (!msgBase || mResult != ResultOk) {
     mExecuting = false;
     return;
   }
@@ -580,7 +580,7 @@
     if (mAlwaysMatch ||
 	(*mFilterIt).pattern()->matches( *mMessageIt )) {
       if ( FilterLog::instance()->isLogging() ) {
-        FilterLog::instance()->add( i18n( "<b>Filter rules have matched.</b>" ), 
+        FilterLog::instance()->add( i18n( "<b>Filter rules have matched.</b>" ),
                                     FilterLog::patternResult );
       }
       mFilterAction = (*mFilterIt).actions()->first();
@@ -694,7 +694,7 @@
     msg = message( mOriginalSerNum );
     emit filtered( mOriginalSerNum );
   }
-  
+
   mResult = mOldReturnCode; // ignore errors in deleting original message
   KMCommand *cmd = 0;
   if (msg && msg->parent()) {
@@ -710,7 +710,7 @@
     else
 	processMessageTimer->start( 0, true );
   } else {
-    // Note: An alternative to consider is just calling 
+    // Note: An alternative to consider is just calling
     //       finishTimer->start and returning
     if (cmd)
 	connect( cmd, SIGNAL( completed( KMCommand * ) ),
@@ -727,7 +727,7 @@
 {
   if ( command->result() != KMCommand::OK )
     actionMessage( KMFilterAction::ErrorButGoOn );
-  else 
+  else
     actionMessage();
 }
 
@@ -786,7 +786,7 @@
 	    res.append( QString( "ResultCriticalError.\n" ) );
 	else
 	    res.append( QString( "Unknown.\n" ) );
-	    
+
 	++i;
     }
     return res;

Zmiany atrybutów dla: kmail
___________________________________________________________________
Nazwa: svn:ignore
   - Makefile
Makefile.in
kmail
   + composercryptoconfiguration.cpp
composercryptoconfiguration.h
custommimeheader.cpp
custommimeheader.h
customtemplates_base.cpp
customtemplates_base.h
customtemplates_kfg.cpp
customtemplates_kfg.h
.deps
encryptionconfigurationdialog.cpp
encryptionconfigurationdialog.h
folderIface.kidl
folderIface_skel.cpp
folderpropertiesdialog.cpp
folderpropertiesdialog.h
globalsettings_base.cpp
globalsettings_base.h
interfaces/Makefile
kmail
kmailicalIface.kidl
kmailicalIface_skel.cpp
kmailIface.kidl
kmailIface_skel.cpp
kmailpartIface.kidl
kmailpartIface_skel.cpp
korganizeriface.kidl
korganizeriface_stub.cpp
korganizeriface_stub.h
.libs
mailcomposerIface.kidl
mailcomposerIface_skel.cpp
Makefile
Makefile.in
*.moc
replyphrases.cpp
replyphrases.h
signatureconfigurationdialog.cpp
signatureconfigurationdialog.h
smimeconfiguration.cpp
smimeconfiguration.h
templatesconfiguration_base.cpp
templatesconfiguration_base.h
templatesconfiguration_kfg.cpp
templatesconfiguration_kfg.h
warningconfiguration.cpp
warningconfiguration.h


Index: networkstatus/networkstatus.desktop
===================================================================
--- networkstatus/networkstatus.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ networkstatus/networkstatus.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -2,6 +2,7 @@
 Encoding=UTF-8
 Name=Network Status Daemon
 Name[af]=Netwerk status bediener
+Name[ar]=مراقب القرص و التنفيذ لحالة الشبكة
 Name[bg]=Демон за състояние на мрежата
 Name[ca]=Dimoni de l'estat de la xarxa
 Name[cs]=Démon stavu sítě
@@ -19,11 +20,14 @@
 Name[is]=Netstöðupúki
 Name[it]=Demone dello stato della rete
 Name[ja]=ネットワークステータスデーモン
+Name[kk]=Желі күйінің қызметі
 Name[km]=ដេមិន​ស្ថានភាព​បណ្ដាញ
 Name[lt]=Tinklo statuso tarnyba
+Name[mk]=Даемон за мрежен статус
 Name[ms]=Daemon Berstatus Rangkaian
 Name[nb]=Statusnisse for nettverket
 Name[nds]=Nettwarkstatus-Dämoon
+Name[ne]=सञ्जाल स्थिति डेइमोन
 Name[nl]=Netwerkstatusdaemon
 Name[nn]=Statusnisse for nettverket
 Name[pl]=Usługa stanu sieci
@@ -58,12 +62,15 @@
 Comment[hu]=Figyeli a hálózati csatolók állapotát és értesítési lehetőséget biztosít hálózati alkalmazások számára.
 Comment[is]=Fylgist með stöðu netkorta og sendir tilkynningar til forrita sem nota netið.
 Comment[it]=Controlla lo stato delle interfacce di rete e fornisce notifiche alle applicazioni che usano al rete.
-Comment[ja]=ネットワークインターフェイスの状態を追跡し、ネットワークを用いるアプリケーションに通知します
+Comment[ja]=ネットワークインターフェースの状態を追跡し、ネットワークを用いるアプリケーションに通知します
+Comment[kk]=Желі интерфейстерінің күйін бақылап, желіні қолданатын бағдарламаларын құлақтандыру қызметі.
 Comment[km]=តាមដាន​ស្ថានភាព​របស់​ចំណុច​ប្រទាក់​បណ្ដាញ ព្រម​ទាំង​ផ្ដល់​នូវ​ការ​ជូនដំណឹង​ទៅ​កម្មវិធី ដែល​ប្រើ​បណ្ដាញ ។
 Comment[lt]=Seka tinklo sąsajų būseną ir informuoja apie jas programas, naudojančias tinklą
+Comment[mk]=Го следи статусот на мрежните интерфејси и дава известувања на апликациите што ја користат мрежата.
 Comment[ms]=Menjejak status antara muka rangkaian dan memberitahu aplikasi yang menggunakan rangkaian tersebut.
 Comment[nb]=Overvåker status for nettverksgrensesnitt og varsler programmer som bruker nettverket.
 Comment[nds]=Överwacht den Tostand vun Nettwark-Koppelsteden un sendt Narichten na Programmen, de dat Nettwark bruukt.
+Comment[ne]=सञ्जाल इन्टरफेसको स्थिति ट्र्याक गर्दछ र सञ्जाल प्रयोग गरेर अनुप्रयोगमा जानकारी उपलब्ध गराउछ ।
 Comment[nl]=Houdt de status bij van de netwerkinterfaces en houdt daar de toepassingen van op de hoogte.
 Comment[nn]=Overvakar status for nettverksgrensesnitt og varslar program som brukar nettverket.
 Comment[pl]=Śledzi stan interfejsów sieciowych i powiadamia programy używające sieci.
Index: knode/knode_config_identity.desktop
===================================================================
--- knode/knode_config_identity.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ knode/knode_config_identity.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -14,7 +14,8 @@
 
 Name=Identity
 Name[af]=Identiteit
-Name[be]=Увасабленьне
+Name[ar]=الهوية
+Name[be]=Увасабленне
 Name[bg]=Самоличност
 Name[br]=Anvelezh
 Name[bs]=Identitet
@@ -36,11 +37,14 @@
 Name[is]=Auðkenni
 Name[it]=Identità
 Name[ja]=個人情報
+Name[kk]=Іс-әлпеті
 Name[km]=អត្តសញ្ញាណ
 Name[lt]=Tapatybė
+Name[mk]=Идентитет
 Name[ms]=Identiti
 Name[nb]=Identitet
 Name[nds]=Persoon
+Name[ne]=पहिचान
 Name[nl]=Identiteit
 Name[nn]=Identitet
 Name[pl]=Tożsamość
@@ -85,11 +89,14 @@
 Comment[is]=Persónuupplýsingar
 Comment[it]=Informazioni personali
 Comment[ja]=個人の情報
+Comment[kk]=Дербес мәліметтер
 Comment[km]=ព័ត៌មាន​ផ្ទាល់​ខ្លួន
 Comment[lt]=Asmeninė informacija
+Comment[mk]=Лични информации
 Comment[ms]=Maklumat Peribadi
 Comment[nb]=Personlig informasjon
 Comment[nds]=Persöönlich Informatschonen
+Comment[ne]=व्यक्तिगत सूचना
 Comment[nl]=Persoonlijke informatie
 Comment[nn]=Personleg informasjon
 Comment[pa]=ਨਿੱਜੀ ਜਾਣਕਾਰੀ
Index: knode/knode_config_accounts.desktop
===================================================================
--- knode/knode_config_accounts.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ knode/knode_config_accounts.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -38,11 +38,14 @@
 Name[is]=Tengingar
 Name[it]=Account
 Name[ja]=アカウント
+Name[kk]=Тіркелгілері
 Name[km]=គណនី
 Name[lt]=Paskyros
+Name[mk]=Сметки
 Name[ms]=Akaun
 Name[nb]=Kontoer
 Name[nds]=Kontos
+Name[ne]=खाता
 Name[nn]=Kontoar
 Name[pa]=ਖਾਤੇ
 Name[pl]=Konta
@@ -82,11 +85,14 @@
 Comment[is]=Uppsetning fyrir fréttahópa og póstþjóna
 Comment[it]=Impostazioni per newsgroup e server di posta
 Comment[ja]=ニュースグループとメールサーバの設定
+Comment[kk]=Жаңалық топтар мен Пошта серверлері
 Comment[km]=រៀបចំម៉ាស៊ីន​បម្រើ​វេទិកា​ព័ត៌មាន និង សំបុត្រ
 Comment[lt]=Naujienų grupių ir pašto serverių nustatymai
+Comment[mk]=Поставување за сервери за групи вести и за е-пошта
 Comment[ms]=Setup untuk Kumpulan Berita dan Pelayan Mel 
 Comment[nb]=Oppsett av njusgruppe- og e-post tjenere
 Comment[nds]=Narichtenkrink- und Nettpostservers instellen
+Comment[ne]=समाचार समूह र पत्र सर्भरका लागि सेटअप गर्नुहोस्
 Comment[nl]=Instellingen voor nieuws- en mailservers
 Comment[nn]=Oppsett av Usenet- og e-post-tenarar
 Comment[pl]=Ustawienia serwerów poczty i grup dyskusyjnych
Index: knode/knode_config_read_news.desktop
===================================================================
--- knode/knode_config_read_news.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ knode/knode_config_read_news.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -14,7 +14,8 @@
 
 Name=Reading News
 Name[af]=Lees Nuus
-Name[be]=Чытаньне навін
+Name[ar]=قراءة الأخبار
+Name[be]=Чытанне навін
 Name[bg]=Четене
 Name[bs]=Čitanje Useneta
 Name[ca]=Lectura de notícies
@@ -34,11 +35,14 @@
 Name[is]=Lestur frétta
 Name[it]=Lettura News
 Name[ja]=ニュースを読む
+Name[kk]=Жаңалықтарды оқу
 Name[km]=អាន​ព័ត៌មាន
 Name[lt]=Naujienų skaitymas
+Name[mk]=Читање вести
 Name[ms]=Membaca Berita
 Name[nb]=Lese Njus
 Name[nds]=Narichten lesen
+Name[ne]=समाचार वाचन गर्दैछ
 Name[nl]=Nieuws lezen
 Name[nn]=Les innlegg
 Name[pl]=Odczytywanie wiadomości
Index: knode/knode_config_privacy.desktop
===================================================================
--- knode/knode_config_privacy.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ knode/knode_config_privacy.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -14,6 +14,7 @@
 
 Name=Signing/Verifying
 Name[af]=Teken/Bevestig
+Name[ar]=التوقيع/التحقق
 Name[bg]=Подпис/проверка
 Name[bs]=Potpisivanje/Provjera
 Name[ca]=Signat/Verificació
@@ -33,11 +34,14 @@
 Name[is]=Undirrita/staðfesta
 Name[it]=Firma/verifica
 Name[ja]=署名/検証
+Name[kk]=Қолтаңбалау/Тексеру
 Name[km]=ចុះហត្ថលេខា/ផ្ទៀងផ្ទាត់
 Name[lt]=Pasirašoma/tikrinama
+Name[mk]=Потпишување/верификација
 Name[ms]=Menandatangan/Menentu sah
 Name[nb]=Signering/Verifisering
 Name[nds]=Ünnerschrieven / Pröven
+Name[ne]=साइनिङ/रुजु गर्दैछ
 Name[nl]=Ondertekening/Verifiëring
 Name[nn]=Signering/stadfesting
 Name[pl]=Podpisywanie/Weryfikacja podpisów
@@ -75,11 +79,13 @@
 Comment[is]=Verndaðu einkalífið þitt með því að undirrita og staðfesta sendingar
 Comment[it]=Proteggi la tua privacy firmando e verificando i messaggi
 Comment[ja]=投稿の署名と検証によりあなたのプライバシーを保護します
+Comment[kk]=Жарияланғанды қолтаңбалап/тексеріп қорғану
 Comment[km]=ការពារ​ភាព​ឯកជន​របស់​អ្នក​ដោយ​ចុះហត្ថលេខា និង ផ្ទៀងផ្ទាត់​ការ​ប្រកាស
 Comment[lt]=Saugokite savo privatumą pasirašydami ir patikrindami skelbimus
 Comment[ms]=Melindungi ruang privasi anda dengan menandatangan dan menentusah pengeposan
 Comment[nb]=Beskytt privatlivet ditt ved å signere og verifisere oppslag
 Comment[nds]=Dör dat Ünnerschrieven un Överpröven vun Narichten warrt Dien Privaatrebeet schuult.
+Comment[ne]=तपाईँको नीजिपना साइन गरेर र पोष्टिङ रुजु गरेर सुरक्षा गर्नुहोस्
 Comment[nl]=Bescherm uw privacy door uw berichten te ondertekenen en te verifiëren
 Comment[nn]=Vern om privatlivet med signerte og stadfesta innlegg
 Comment[pl]=Ochrona prywatności poprzez podpisywanie i weryfikację podpisów wiadomości
Index: knode/knode_config_cleanup.desktop
===================================================================
--- knode/knode_config_cleanup.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ knode/knode_config_cleanup.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -13,6 +13,7 @@
 X-KDE-CfgDlgHierarchy=KNode
 
 Name=Cleanup
+Name[ar]=التنظيف
 Name[bg]=Изчистване
 Name[bs]=Čišćenje
 Name[ca]=Neteja
@@ -33,11 +34,14 @@
 Name[is]=Hreinsun
 Name[it]=Pulizia
 Name[ja]=整理
+Name[kk]=Тазалау
 Name[km]=សម្អាត
 Name[lt]=Išvalymas
+Name[mk]=Расчистување
 Name[ms]=Pembersihan
 Name[nb]=Rydd opp
 Name[nds]=Oprümen
+Name[ne]=हटाउनुहोस्
 Name[nl]=Opschoning
 Name[nn]=Rydd opp
 Name[pl]=Porządkowanie
@@ -77,11 +81,14 @@
 Comment[is]=Varðveita diskpláss
 Comment[it]=Risparmia lo spazio su disco
 Comment[ja]=ディスクスペースを維持
+Comment[kk]=Дискідегі орынды үнемдеу
 Comment[km]=បង្ការ​ទំហំ​ថាស
 Comment[lt]=Disko erdvės išsaugojimas
+Comment[mk]=Зачувување простор на дискот
 Comment[ms]=Memelihara Ruang Cakera
 Comment[nb]=Bevarer disk plass
 Comment[nds]=Platz op de Fastplaat wohren
+Comment[ne]=चक्का खाली स्थान संचित गर्दैछ
 Comment[nl]=Besparing van schrijfruimte
 Comment[nn]=Frigjer diskplass
 Comment[pl]=Kontrolowanie użytej przestrzeni dyskowej
Index: knode/knode_config_appearance.desktop
===================================================================
--- knode/knode_config_appearance.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ knode/knode_config_appearance.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -13,7 +13,8 @@
 X-KDE-CfgDlgHierarchy=KNode
 
 Name=Appearance
-Name[be]=Зьнешні выгляд
+Name[ar]=المظهر
+Name[be]=Знешні выгляд
 Name[bg]=Външен вид
 Name[br]=Neuziadur
 Name[bs]=Izgled
@@ -37,12 +38,14 @@
 Name[is]=Útlit
 Name[it]=Aspetto
 Name[ja]=外観
+Name[kk]=Сыртқы көрінісі
 Name[km]=រូបរាង
 Name[lt]=Išvaizda
 Name[mk]=Изглед
 Name[ms]=Rupa
 Name[nb]=Utseende
 Name[nds]=Utsehn
+Name[ne]=मोहडा
 Name[nl]=Uiterlijk
 Name[nn]=Utsjånad
 Name[pl]=Wygląd
@@ -71,7 +74,7 @@
 Comment[cy]=Addasu Golwg
 Comment[da]=Brugerindstil visuelt udseende
 Comment[de]=Erscheinungsbild anpassen
-Comment[el]=Προσαρμογή Εμφάνισης
+Comment[el]=Προσαρμογή εμφάνισης
 Comment[en_GB]=Customise Visual Appearance
 Comment[es]=Apariencia visual personalizada
 Comment[et]=Välimuse seadistused
@@ -85,11 +88,14 @@
 Comment[is]=Stilla útlit
 Comment[it]=Personalizza l'aspetto
 Comment[ja]=外観をカスタマイズ
+Comment[kk]=Сыртқы көрінісін ыңғайлау
 Comment[km]=ប្ដូរ​រូបរាង​មើល​ឃើញ​តាម​បំណង
 Comment[lt]=Derinti vizualinę išvaizdą
+Comment[mk]=Приспособете ја визуелната појава
 Comment[ms]=Suaikan Rupa Visual
 Comment[nb]=Tilpass visuelt utseende
 Comment[nds]=Utsehn topassen
+Comment[ne]=दृश्यात्मक मोहडा अनुकूल गर्नुहोस्
 Comment[nl]=Pas het uiterlijk aan
 Comment[nn]=Tilpass utsjånad
 Comment[pl]=Zmiana wyglądu
Index: knode/knode_config_post_news.desktop
===================================================================
--- knode/knode_config_post_news.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ knode/knode_config_post_news.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -33,11 +33,14 @@
 Name[is]=Senda fréttir
 Name[it]=Invio news
 Name[ja]=ニュースを投稿
+Name[kk]=Жариялау
 Name[km]=ប្រកាស​ព័ត៌មាន​
 Name[lt]=Naujienų skelbimas
+Name[mk]=Испраќање вести
 Name[ms]=Menampal Berita
 Name[nb]=Legge inn Njus
 Name[nds]=Narichten sennen
+Name[ne]=समाचार पोष्ट गर्दैछ
 Name[nl]=Nieuws posten
 Name[nn]=Send innlegg
 Name[pl]=Publikowanie wiadomości
Index: knode/KNode.desktop
===================================================================
--- knode/KNode.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ knode/KNode.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -8,6 +8,7 @@
 Name=KNode
 Name[eo]=Diskutrondoj
 Name[hi]=के-नोड
+Name[ne]=केडीई नोड
 Name[ro]=Ştiri Internet
 Name[sv]=Knode
 Name[ta]=Kநோடு
@@ -43,13 +44,16 @@
 GenericName[is]=Fréttaforrit
 GenericName[it]=Lettore newsgroup
 GenericName[ja]=ニュースリーダー
+GenericName[kk]=Жаңалықтарды оқу құралы
 GenericName[km]=កម្មវិធី​អាន​ព័ត៌មាន
 GenericName[lt]=Naujienų skaityklė
 GenericName[lv]=Ziņu Lasītājs
+GenericName[mk]=Читач на вести
 GenericName[ms]=Pembaca Berita
 GenericName[mt]=Qarrej tal-aħbarijiet (news)
 GenericName[nb]=Njusleser
 GenericName[nds]=Usenet-Narichtenkieker
+GenericName[ne]=समाचार वाचक
 GenericName[nl]=Nieuwslezer
 GenericName[nn]=Nyheitslesar
 GenericName[pl]=Program do czytania list dyskusyjnych
Index: kioslaves/imap4/mimeheader.cc
===================================================================
--- kioslaves/imap4/mimeheader.cc	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kioslaves/imap4/mimeheader.cc	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -339,35 +339,47 @@
     {
       val = rfcDecoder::encodeRFC2231String (aValue);
     }
+    //kdDebug(7116) << "mimeHeader::setParameter() - val = '" << val << "'" << endl;
     //see if it needs to be truncated
     vlen = val.length();
     llen = aLabel.length();
-    if (vlen + llen + 4 > 80 && llen < 80 - 8 )
+    if (vlen + llen + 4 > 80 && llen < 80 - 8 - 2 )
     {
-      int limit = 80 - 8 - (int)llen;
+      const int limit = 80 - 8 - 2 - (int)llen;
+      // the -2 is there to allow extending the length of a part of val
+      // by 1 or 2 in order to prevent an encoded character from being
+      // split in half
       int i = 0;
       QString shortValue;
       QCString shortLabel;
 
       while (!val.isEmpty ())
       {
-        //don't truncate the encoded chars
-        int offset = 0;
-        if (limit > int(vlen))
-          limit = vlen;
-        offset = val.findRev ('%', limit);
-        if (offset == limit - 1 || offset == limit - 2)
-        {
-//          cout << "offset " << offset << "-" << limit << "=" << limit-offset << endl;
-          offset = limit - offset;
+        int partLen; // the length of the next part of the value
+        if ( limit >= int(vlen) ) {
+          // the rest of the value fits completely into one continued header
+          partLen = vlen;
         }
-        else
-          offset = 0;
-        shortValue = val.left (limit - offset);
+        else {
+          partLen = limit;
+          // make sure that we don't split an encoded char in half
+          if ( val[partLen-1] == '%' ) {
+            partLen += 2;
+          }
+          else if ( partLen > 1 && val[partLen-2] == '%' ) {
+            partLen += 1;
+          }
+          // make sure partLen does not exceed vlen (could happen in case of
+          // an incomplete encoded char)
+          if ( partLen > int(vlen) ) {
+            partLen = vlen;
+          }
+        }
+        shortValue = val.left( partLen );
         shortLabel.setNum (i);
         shortLabel = aLabel + "*" + shortLabel;
-        val = val.right (vlen - limit + offset);
-        vlen = vlen - limit + offset;
+        val = val.right( vlen - partLen );
+        vlen = vlen - partLen;
         if (encoded)
         {
           if (i == 0)
@@ -376,7 +388,9 @@
           }
           shortLabel += "*";
         }
-//        cout << shortLabel << "-" << shortValue << endl;
+        //kdDebug(7116) << "mimeHeader::setParameter() - shortLabel = '" << shortLabel << "'" << endl;
+        //kdDebug(7116) << "mimeHeader::setParameter() - shortValue = '" << shortValue << "'" << endl;
+        //kdDebug(7116) << "mimeHeader::setParameter() - val        = '" << val << "'" << endl;
         aDict->insert (shortLabel, new QString (shortValue));
         i++;
       }
Index: kioslaves/imap4/imapparser.cc
===================================================================
--- kioslaves/imap4/imapparser.cc	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kioslaves/imap4/imapparser.cc	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -114,7 +114,9 @@
            || command == "LISTRIGHTS"
            || command == "MYRIGHTS"
            || command == "GETANNOTATION"
-           || command == "NAMESPACE")
+           || command == "NAMESPACE"
+           || command == "GETQUOTAROOT"
+           || command == "GETQUOTA")
   {
     lastResults.clear ();
   }
@@ -430,6 +432,16 @@
       parseAnnotation (result);
     }
     break;
+  case 'Q': // QUOTA or QUOTAROOT
+    if ( what.size() > 5 && qstrncmp(what, "QUOTAROOT", what.size()) == 0)
+    {
+      parseQuotaRoot( result );
+    }
+    else if (qstrncmp(what, "QUOTA", what.size()) == 0)
+    {
+      parseQuota( result );
+    }
+
   default:
     //better be a number
     {
@@ -707,6 +719,48 @@
   }
 }
 
+
+void imapParser::parseQuota (parseString & result)
+{
+  // quota_response  ::= "QUOTA" SP astring SP quota_list
+  // quota_list      ::= "(" #quota_resource ")"
+  // quota_resource  ::= atom SP number SP number
+  QCString root = parseOneWordC( result );
+  if ( root.isEmpty() ) {
+    lastResults.append( "" );
+  } else {
+    lastResults.append( root );
+  }
+  if (result.isEmpty() || result[0] != '(')
+    return;
+  result.pos++;
+  skipWS (result);
+  QStringList triplet;
+  int outlen = 1;
+  while ( outlen && !result.isEmpty() && result[0] != ')' ) {
+    QCString word = parseLiteralC (result, false, false, &outlen);
+    triplet.append(word);
+  }
+  lastResults.append( triplet.join(" ") );
+}
+
+void imapParser::parseQuotaRoot (parseString & result)
+{
+  //    quotaroot_response
+  //         ::= "QUOTAROOT" SP astring *(SP astring)
+  parseOneWordC (result); // skip mailbox name
+  skipWS (result);
+  if ( result.isEmpty() )
+    return;
+  QStringList roots;
+  int outlen = 1;
+  while ( outlen && !result.isEmpty() ) {
+    QCString word = parseLiteralC (result, false, false, &outlen);
+    roots.append (word);
+  }
+  lastResults.append( roots.join(" ") );
+}
+
 void imapParser::parseMyRights (parseString & result)
 {
   parseOneWordC (result); // skip mailbox name
Index: kioslaves/imap4/imapparser.h
===================================================================
--- kioslaves/imap4/imapparser.h	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kioslaves/imap4/imapparser.h	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -290,6 +290,10 @@
   void parseAnnotation (parseString & result);
   /** @brief parse a NAMESPACE line */
   void parseNamespace (parseString & result);
+  /** @brief parse a QUOTAROOT line */
+  void parseQuotaRoot (parseString & result);
+  /** @brief parse a QUOTA line */
+  void parseQuota (parseString & result);
 
   /**
    * parses the results of a fetch command
Index: kioslaves/imap4/imap4.cc
===================================================================
--- kioslaves/imap4/imap4.cc	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kioslaves/imap4/imap4.cc	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1219,6 +1219,7 @@
  * ACL commands: data = 'A' + command + URL (KURL) + command-dependent args
  * AnnotateMore commands: data = 'M' + 'G'et/'S'et + URL + entry + command-dependent args
  * Search: data = 'E' + URL (KURL)
+ * Quota commands: data = 'Q' + 'R'oot/'G'et/'S'et + URL + entry + command-dependent args
  */
 void
 IMAP4Protocol::special (const QByteArray & aData)
@@ -1337,6 +1338,18 @@
     }
     break;
   }
+  case 'Q':
+  {
+    // quota
+    int cmd;
+    stream >> cmd;
+    if ( hasCapability( "QUOTA" ) ) {
+      specialQuotaCommand( cmd, stream );
+    } else {
+      error( ERR_UNSUPPORTED_ACTION, "QUOTA" );
+    }
+    break;
+  }
   case 'S':
   {
     // status
@@ -1586,6 +1599,50 @@
 }
 
 void
+IMAP4Protocol::specialQuotaCommand( int command, QDataStream& stream )
+{
+  // All commands start with the URL to the box
+  KURL _url;
+  stream >> _url;
+  QString aBox, aSequence, aLType, aSection, aValidity, aDelimiter, aInfo;
+  parseURL (_url, aBox, aSection, aLType, aSequence, aValidity, aDelimiter, aInfo);
+
+  switch( command ) {
+    case 'R': // GETQUOTAROOT
+      {
+        kdDebug(7116) << "QUOTAROOT " << aBox << endl;
+        imapCommand *cmd = doCommand(imapCommand::clientGetQuotaroot( aBox ) );
+        if (cmd->result () != "OK")
+        {
+          error(ERR_SLAVE_DEFINED, i18n("Retrieving the quota root information on folder %1 "
+                "failed. The server returned: %2")
+              .arg(_url.prettyURL())
+              .arg(cmd->resultInfo()));
+          return;
+        }
+        infoMessage(getResults().join( "\r" ));
+        finished();
+        break;
+      }
+    case 'G': // GETQUOTA
+      {
+        kdDebug(7116) << "GETQUOTA command" << endl;
+        kdWarning(7116) << "UNIMPLEMENTED" << endl;
+        break;
+      }
+    case 'S': // SETQUOTA
+      {
+        kdDebug(7116) << "SETQUOTA command" << endl;
+        kdWarning(7116) << "UNIMPLEMENTED" << endl;
+        break;
+      }
+    default:
+      kdWarning(7116) << "Unknown special quota command:" << command << endl;
+      error( ERR_UNSUPPORTED_ACTION, QString(QChar(command)) );
+  }
+}
+
+void
 IMAP4Protocol::rename (const KURL & src, const KURL & dest, bool overwrite)
 {
   kdDebug(7116) << "IMAP4::rename - [" << (overwrite ? "Overwrite" : "NoOverwrite") << "] " << src.prettyURL() << " -> " << dest.prettyURL() << endl;
Index: kioslaves/imap4/imap4.h
===================================================================
--- kioslaves/imap4/imap4.h	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kioslaves/imap4/imap4.h	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -171,6 +171,7 @@
 
   /** Send an annotation command which is identified by @p command */
   void specialAnnotateMoreCommand( int command, QDataStream& stream );
+  void specialQuotaCommand( int command, QDataStream& stream );
 
   /** Search current folder, the search string is passed as SECTION */
   void specialSearchCommand( QDataStream& );
Index: kioslaves/imap4/imaps.protocol
===================================================================
--- kioslaves/imap4/imaps.protocol	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kioslaves/imap4/imaps.protocol	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -24,7 +24,7 @@
 source=true
 
 # List of capabilities (e.g. special() commands)
-Capabilities=Subscription,ACL
+Capabilities=Subscription,ACL,Quota
 
 Icon=folder_inbox
 DocPath=kioslave/imaps.html
Index: kioslaves/imap4/imapcommand.cc
===================================================================
--- kioslaves/imap4/imapcommand.cc	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kioslaves/imap4/imapcommand.cc	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -393,3 +393,10 @@
   return new imapCommand("NAMESPACE", "");
 }
 
+imapCommand *
+imapCommand::clientGetQuotaroot( const QString& box )
+{
+  QString parameter = rfcDecoder::toIMAP (box);
+  return new imapCommand ("GETQUOTAROOT", parameter);
+}
+
Index: kioslaves/imap4/imap4.protocol
===================================================================
--- kioslaves/imap4/imap4.protocol	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kioslaves/imap4/imap4.protocol	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -23,7 +23,7 @@
 source=true
 
 # List of capabilities (e.g. special() commands)
-Capabilities=Subscription,ACL
+Capabilities=Subscription,ACL,Quota
 
 Icon=folder_inbox
 DocPath=kioslave/imap.html
Index: kioslaves/imap4/imapcommand.h
===================================================================
--- kioslaves/imap4/imapcommand.h	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kioslaves/imap4/imapcommand.h	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -364,6 +364,13 @@
    */
   static imapCommand *clientNamespace ();
 
+  /**
+   * @brief Create a GETQUOTAROOT command
+   * @param box mailbox name
+   * @return a GETQUOTAROOT imapCommand
+   */
+  static imapCommand *clientGetQuotaroot ( const QString& box );
+
 protected:
   QString aCommand;
   QString mId;
Index: kioslaves/sieve/sieve.cpp
===================================================================
--- kioslaves/sieve/sieve.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kioslaves/sieve/sieve.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -273,7 +273,7 @@
 			setMetaData("tlsSupported", "true");
 			
 		} else {
-			ksDebug() << "Unrecognised key." << endl;
+			ksDebug() << "Unrecognised key " << r.getKey() << endl;
 		}
 	}
 	
@@ -1055,7 +1055,7 @@
 
 		if (r.getType() != kio_sieveResponse::QUANTITY) {
       sasl_dispose( &conn );
-			error(ERR_UNSUPPORTED_PROTOCOL,
+			error(ERR_SLAVE_DEFINED,
 					i18n("A protocol error occurred during authentication.\n"
 							"Choose a different authentication method to %1.").arg(mechusing));
 			return false;
Index: kioslaves/sieve/sieve.protocol
===================================================================
--- kioslaves/sieve/sieve.protocol	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kioslaves/sieve/sieve.protocol	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -29,10 +29,12 @@
 Description[is]=Ioslave fyrir Sieve tölvupóstsíu samskiptaregluna
 Description[it]=Un ioslave per il protocollo di filtraggio posta Sieve
 Description[ja]=Sieve メールフィルタプロトコル用 ioslave
+Description[kk]=Sieve поштаны сүзгілеу протоколының ioslave модулі
 Description[km]=ioslave សម្រាប់​ពិធីការ​ត្រង​សំបុត្រ Sieve
 Description[ms]=Hamba io untuk protokol tapisan mel saringan 
 Description[nb]=En i/u-slave for e-postfilterprotokollen Sieve
 Description[nds]=In-/Utgaavmoduul för't Nettpostfilter-Protokoll Sieve
+Description[ne]=मेल फिल्टरिङ प्रोटोकल सिभ गर्नका लागि एउटा आइओस्लेभ
 Description[nl]=Een ioslave voor het Sieve-mailfilterprotocol
 Description[nn]=Ein i/u-slave for e-postfilterprotokollen Sieve
 Description[pl]=Wtyczka protokołu filtrowania poczty Sieve
Index: dependency-graph.dot
===================================================================
--- dependency-graph.dot	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ dependency-graph.dot	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -32,7 +32,6 @@
         "libkcal" -> "korganizer";
         "libkcal" -> "kpilot";
         "libkcal" -> "kresources";
-        "libkcal" -> "ksync";
         "libkcal" -> "libkdepim";
         "libkcal" -> "libkpimexchange";
         "libkcal" -> "plugins";
Index: libkdenetwork/gpgmepp/importresult.cpp
===================================================================
--- libkdenetwork/gpgmepp/importresult.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkdenetwork/gpgmepp/importresult.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -27,6 +27,7 @@
 #include "result_p.h"
 
 #include <gpgme.h>
+#include <cstdlib>
 
 class GpgME::ImportResult::Private : public GpgME::Shared {
 public:
Index: libkdenetwork/gpgmepp/callbacks.cpp
===================================================================
--- libkdenetwork/gpgmepp/callbacks.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkdenetwork/gpgmepp/callbacks.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -31,6 +31,7 @@
 #include <cassert>
 #include <cerrno>
 #include <unistd.h>
+#include <stdlib.h>
 
 static inline gpg_error_t makeErrorFromErrno() {
   return gpg_err_make_from_errno( (gpg_err_source_t)22, errno );
Index: libkdenetwork/qgpgme/dataprovider.cpp
===================================================================
--- libkdenetwork/qgpgme/dataprovider.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkdenetwork/qgpgme/dataprovider.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -46,7 +46,7 @@
 
 ssize_t QGpgME::QByteArrayDataProvider::read( void * buffer, size_t bufSize ) {
 #ifndef NDEBUG
-  qDebug( "QGpgME::QByteArrayDataProvider::read( %p, %d )", buffer, bufSize );
+  //qDebug( "QGpgME::QByteArrayDataProvider::read( %p, %d )", buffer, bufSize );
 #endif
   if ( bufSize == 0 )
     return 0;
Index: libkdenetwork/libgpg-error-copy/mkerrcodes.c
===================================================================
--- libkdenetwork/libgpg-error-copy/mkerrcodes.c	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkdenetwork/libgpg-error-copy/mkerrcodes.c	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -15,8 +15,8 @@
  
    You should have received a copy of the GNU Lesser General Public
    License along with libgpg-error; if not, write to the Free
-   Software Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA
-   02110-1301, USA.  */
+   Software Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
+   02111-1307, USA.  */
 
 /* This file must not include config.h, as that is for the host
    system, while this file will be run on the build system.  */
@@ -42,12 +42,12 @@
 "\n"
 "   You should have received a copy of the GNU Lesser General Public\n"
 "   License along with libgpg-error; if not, write to the Free\n"
-"   Software Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA\n"
-"   02110-1301, USA.  */\n"
+"   Software Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA\n"
+"   02111-1307, USA.  */\n"
 "\n";
 
 int
-main (int argc, char *argv)
+main (int argc, char **argv)
 {
   int sorted;
   int i;
@@ -73,4 +73,6 @@
       
   for (i = 0; i < sizeof (err_table) / sizeof (err_table[0]); i++)
     printf ("%i\t%s\n", err_table[i].err, err_table[i].err_sym);
+
+  return 0;
 }
Index: libkdenetwork/libgpg-error-copy/mkerrcodes.awk
===================================================================
--- libkdenetwork/libgpg-error-copy/mkerrcodes.awk	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkdenetwork/libgpg-error-copy/mkerrcodes.awk	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,5 +1,5 @@
 # mkerrcodes.awk
-# Copyright (C) 2004 g10 Code GmbH
+# Copyright (C) 2004, 2005 g10 Code GmbH
 # 
 # This program is free software; you can redistribute it and/or
 # modify it under the terms of the GNU General Public License as
@@ -13,7 +13,7 @@
 #
 # You should have received a copy of the GNU General Public License
 # along with this program; if not, write to the Free Software
-# Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA.
+# Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA 02111-1307 USA.
 #
 # As a special exception, g10 Code GmbH gives unlimited permission to
 # copy, distribute and modify the C source files that are the output
@@ -41,14 +41,20 @@
 # data portions.)  If your modification has such potential, you must delete
 # any notice of this special exception to the GPL from your modified version.
 
-# This script outputs an intermediate file that contains the following block
-# for each error value symbol in the input file (example for EINVAL):
+# This script outputs an intermediate file that contains the following output:
+# static struct
+#   {
+#     int err;
+#     const char *err_sym;
+#   } err_table[] =
+# {
+#   { 7, "GPG_ERR_E2BIG" },
+#   [...]
+# };
 #
-# #ifdef EINVAL
-# EINVAL GPG_ERR_EINVAL
-# #endif
+# The input file is a list of possible system errors, followed by a GPG_ERR_* name:
 #
-# The input file is a list of possible system errors.
+# 7 GPG_ERR_E2BIG
 #
 # Comments (starting with # and ending at the end of the line) are removed,
 # as is trailing whitespace.
@@ -63,7 +69,7 @@
 /^#/ { next; }
 
 header {
-  if ($0 ~ /^[0-9]+/)
+  if (! /^[ \t]*$/)
     {
       header = 0;
 
Index: libkdenetwork/libgpg-error-copy/code-from-errno.c
===================================================================
--- libkdenetwork/libgpg-error-copy/code-from-errno.c	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkdenetwork/libgpg-error-copy/code-from-errno.c	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -15,13 +15,15 @@
  
    You should have received a copy of the GNU Lesser General Public
    License along with libgpg-error; if not, write to the Free
-   Software Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA
-   02110-1301, USA.  */
+   Software Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
+   02111-1307, USA.  */
 
 #if HAVE_CONFIG_H
 #include <config.h>
 #endif
 
+#include <errno.h> 
+
 #include <gpg-error.h>
 
 #include "code-from-errno.h"
@@ -32,13 +34,36 @@
 gpg_err_code_t
 gpg_err_code_from_errno (int err)
 {
-  int idx = errno_to_idx (err);
+  int idx;
 
   if (!err)
     return GPG_ERR_NO_ERROR;
 
+  idx = errno_to_idx (err);
+
   if (idx < 0)
     return GPG_ERR_UNKNOWN_ERRNO;
 
   return GPG_ERR_SYSTEM_ERROR | err_code_from_index[idx];
 }
+
+
+/* Retrieve the error code directly from the ERRNO variable.  This
+   returns GPG_ERR_UNKNOWN_ERRNO if the system error is not mapped
+   (report this) and GPG_ERR_MISSING_ERRNO if ERRNO has the value 0. */
+gpg_err_code_t
+gpg_err_code_from_syserror (void)
+{
+  int err = errno;
+  int idx;
+
+  if (!err)
+    return GPG_ERR_MISSING_ERRNO;
+
+  idx = errno_to_idx (err);
+
+  if (idx < 0)
+    return GPG_ERR_UNKNOWN_ERRNO;
+
+  return GPG_ERR_SYSTEM_ERROR | err_code_from_index[idx];
+}
Index: libkdenetwork/libgpg-error-copy/mkerrnos.awk
===================================================================
--- libkdenetwork/libgpg-error-copy/mkerrnos.awk	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkdenetwork/libgpg-error-copy/mkerrnos.awk	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -13,7 +13,7 @@
 #
 # You should have received a copy of the GNU General Public License
 # along with this program; if not, write to the Free Software
-# Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA.
+# Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA 02111-1307 USA.
 #
 # As a special exception, g10 Code GmbH gives unlimited permission to
 # copy, distribute and modify the C source files that are the output
Index: libkdenetwork/libgpg-error-copy/mkstrtable.awk
===================================================================
--- libkdenetwork/libgpg-error-copy/mkstrtable.awk	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkdenetwork/libgpg-error-copy/mkstrtable.awk	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -13,7 +13,7 @@
 #
 # You should have received a copy of the GNU General Public License
 # along with this program; if not, write to the Free Software
-# Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA.
+# Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA 02111-1307 USA.
 #
 # As a special exception, g10 Code GmbH gives unlimited permission to
 # copy, distribute and modify the C source files that are the output
Index: libkdenetwork/libgpg-error-copy/code-to-errno.c
===================================================================
--- libkdenetwork/libgpg-error-copy/code-to-errno.c	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkdenetwork/libgpg-error-copy/code-to-errno.c	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -15,8 +15,8 @@
  
    You should have received a copy of the GNU Lesser General Public
    License along with libgpg-error; if not, write to the Free
-   Software Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA
-   02110-1301, USA.  */
+   Software Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
+   02111-1307, USA.  */
 
 #if HAVE_CONFIG_H
 #include <config.h>
Index: libkdenetwork/libgpg-error-copy/gpg-error.h.in
===================================================================
--- libkdenetwork/libgpg-error-copy/gpg-error.h.in	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkdenetwork/libgpg-error-copy/gpg-error.h.in	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -15,8 +15,8 @@
  
    You should have received a copy of the GNU Lesser General Public
    License along with libgpg-error; if not, write to the Free
-   Software Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA
-   02110-1301, USA.  */
+   Software Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
+   02111-1307, USA.  */
 
 #ifndef GPG_ERROR_H
 #define GPG_ERROR_H	1
@@ -33,6 +33,7 @@
 #endif 
 #endif
 
+
 #ifdef __cplusplus
 extern "C" {
 #if 0 /* just to make Emacs auto-indent happy */
@@ -113,6 +114,37 @@
 #define GPG_ERR_SOURCE_SHIFT	24
 
 
+/* GCC feature test.  */
+#undef _GPG_ERR_HAVE_CONSTRUCTOR
+#if __GNUC__
+#define _GPG_ERR_GCC_VERSION (__GNUC__ * 10000 \
+                            + __GNUC_MINOR__ * 100 \
+                            + __GNUC_PATCHLEVEL__)
+
+#if _GPG_ERR_GCC_VERSION > 30100
+#define _GPG_ERR_CONSTRUCTOR	__attribute__ ((__constructor__))
+#define _GPG_ERR_HAVE_CONSTRUCTOR
+#endif
+#endif
+
+#ifndef _GPG_ERR_CONSTRUCTOR
+#define _GPG_ERR_CONSTRUCTOR
+#endif
+
+
+/* Initialization function.  */
+
+/* Initialize the library.  This function should be run early.  */
+gpg_error_t gpg_err_init (void) _GPG_ERR_CONSTRUCTOR;
+
+/* If this is defined, the library is already initialized by the
+   constructor and does not need to be initialized explicitely.  */
+#undef GPG_ERR_INITIALIZED
+#ifdef _GPG_ERR_HAVE_CONSTRUCTOR
+#define GPG_ERR_INITIALIZED	1
+#endif
+
+
 /* Constructor and accessor functions.  */
 
 /* Construct an error value from an error code and source.  Within a
@@ -180,7 +212,7 @@
 
 /* Retrieve the error code for the system error ERR.  This returns
    GPG_ERR_UNKNOWN_ERRNO if the system error is not mapped (report
-   this).  */
+   this). */
 gpg_err_code_t gpg_err_code_from_errno (int err);
 
 
@@ -188,6 +220,14 @@
    if CODE is not a system error code.  */
 int gpg_err_code_to_errno (gpg_err_code_t code);
 
+
+/* Retrieve the error code directly from the ERRNO variable.  This
+   returns GPG_ERR_UNKNOWN_ERRNO if the system error is not mapped
+   (report this) and GPG_ERR_MISSING_ERRNO if ERRNO has the value 0. */
+gpg_err_code_t gpg_err_code_from_syserror (void);
+
+
+
 
 /* Self-documenting convenience functions.  */
 
@@ -204,8 +244,15 @@
   return gpg_error (gpg_err_code_from_errno (err));
 }
 
+static GPG_ERR_INLINE gpg_error_t
+gpg_error_from_syserror (void)
+{
+  return gpg_error (gpg_err_code_from_syserror ());
+}
+
 #ifdef __cplusplus
 }
 #endif
 
+
 #endif	/* GPG_ERROR_H */
Index: libkdenetwork/libgpg-error-copy/mkerrcodes1.awk
===================================================================
--- libkdenetwork/libgpg-error-copy/mkerrcodes1.awk	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkdenetwork/libgpg-error-copy/mkerrcodes1.awk	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -13,7 +13,7 @@
 #
 # You should have received a copy of the GNU General Public License
 # along with this program; if not, write to the Free Software
-# Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA.
+# Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA 02111-1307 USA.
 #
 # As a special exception, g10 Code GmbH gives unlimited permission to
 # copy, distribute and modify the C source files that are the output
Index: libkdenetwork/libgpg-error-copy/mkheader.awk
===================================================================
--- libkdenetwork/libgpg-error-copy/mkheader.awk	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkdenetwork/libgpg-error-copy/mkheader.awk	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -13,7 +13,7 @@
 #
 # You should have received a copy of the GNU General Public License
 # along with this program; if not, write to the Free Software
-# Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA.
+# Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA 02111-1307 USA.
 #
 # As a special exception, g10 Code GmbH gives unlimited permission to
 # copy, distribute and modify the C source files that are the output
Index: libkdenetwork/libgpg-error-copy/mkerrcodes2.awk
===================================================================
--- libkdenetwork/libgpg-error-copy/mkerrcodes2.awk	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkdenetwork/libgpg-error-copy/mkerrcodes2.awk	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -13,7 +13,7 @@
 #
 # You should have received a copy of the GNU General Public License
 # along with this program; if not, write to the Free Software
-# Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA.
+# Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA 02111-1307 USA.
 #
 # As a special exception, g10 Code GmbH gives unlimited permission to
 # copy, distribute and modify the C source files that are the output
Index: libkdenetwork/libgpg-error-copy/strerror.c
===================================================================
--- libkdenetwork/libgpg-error-copy/strerror.c	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkdenetwork/libgpg-error-copy/strerror.c	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -15,8 +15,8 @@
  
    You should have received a copy of the GNU Lesser General Public
    License along with libgpg-error; if not, write to the Free
-   Software Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA
-   02110-1301, USA.  */
+   Software Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
+   02111-1307, USA.  */
 
 #if HAVE_CONFIG_H
 #include <config.h>
@@ -61,7 +61,7 @@
    to a resource shortage, set *STR to NULL and return 1.  If this
    call fails because the error number is not valid, don't set *STR
    and return 0.  */
-int
+static int
 system_strerror_r (int no, char *buf, size_t buflen)
 {
   char *errstr;
@@ -89,7 +89,7 @@
 #else	/* STRERROR_R_CHAR_P */
 /* Now the POSIX version.  */
 
-int
+static int
 system_strerror_r (int no, char *buf, size_t buflen)
 {
   return strerror_r (no, buf, buflen);
@@ -102,7 +102,7 @@
    version.  Maybe we are even lucky and the system's strerror() is
    already thread-safe.  */
 
-int
+static int
 system_strerror_r (int no, char *buf, size_t buflen)
 {
   char *errstr = strerror (no);
Index: libkdenetwork/libgpg-error-copy/err-sources.h.in
===================================================================
--- libkdenetwork/libgpg-error-copy/err-sources.h.in	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkdenetwork/libgpg-error-copy/err-sources.h.in	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -16,8 +16,8 @@
  
    You should have received a copy of the GNU Lesser General Public
    License along with libgpg-error; if not, write to the Free
-   Software Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA
-   02110-1301, USA.  */
+   Software Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
+   02111-1307, USA.  */
 
 # Everything up to the first line that starts with a number in the
 # first column is copied into the output verbatim.  Then, empty lines
@@ -40,9 +40,11 @@
 8	GPG_ERR_SOURCE_KEYBOX		Keybox
 9	GPG_ERR_SOURCE_KSBA		KSBA
 10	GPG_ERR_SOURCE_DIRMNGR		Dirmngr
+11	GPG_ERR_SOURCE_GSTI		GSTI
 
-# 11 to 31 are free to be used.
+# 11 to 30 are free to be used.
 
+31	GPG_ERR_SOURCE_ANY		Any source
 32	GPG_ERR_SOURCE_USER_1		User defined source 1
 33	GPG_ERR_SOURCE_USER_2		User defined source 2
 34	GPG_ERR_SOURCE_USER_3		User defined source 3
Index: libkdenetwork/libgpg-error-copy/gettext.h
===================================================================
--- libkdenetwork/libgpg-error-copy/gettext.h	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkdenetwork/libgpg-error-copy/gettext.h	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -13,7 +13,7 @@
 
    You should have received a copy of the GNU Library General Public
    License along with this program; if not, write to the Free Software
-   Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301,
+   Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA 02111-1307,
    USA.  */
 
 #ifndef _LIBGETTEXT_H
@@ -22,8 +22,14 @@
 /* NLS can be disabled through the configure --disable-nls option.  */
 #if ENABLE_NLS
 
+#if HAVE_W32_SYSTEM
+/* Redirect the gettext calls to an internal implementation on W32
+   targets.  */
+# include "w32-gettext.h"
+#else
 /* Get declarations of GNU message catalog functions.  */
 # include <libintl.h>
+#endif
 
 #else
 
Index: libkdenetwork/libgpg-error-copy/strsource.c
===================================================================
--- libkdenetwork/libgpg-error-copy/strsource.c	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkdenetwork/libgpg-error-copy/strsource.c	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -15,8 +15,8 @@
  
    You should have received a copy of the GNU Lesser General Public
    License along with libgpg-error; if not, write to the Free
-   Software Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA
-   02110-1301, USA.  */
+   Software Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
+   02111-1307, USA.  */
 
 #if HAVE_CONFIG_H
 #include <config.h>
Index: libkdenetwork/libgpg-error-copy/errnos.in
===================================================================
--- libkdenetwork/libgpg-error-copy/errnos.in	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkdenetwork/libgpg-error-copy/errnos.in	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -16,8 +16,8 @@
  
    You should have received a copy of the GNU Lesser General Public
    License along with libgpg-error; if not, write to the Free
-   Software Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA
-   02110-1301, USA.  */
+   Software Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
+   02111-1307, USA.  */
 
 # Everything up to the first line that starts with a number in the
 # first column is copied into the output verbatim.  Then, empty lines
Index: libkdenetwork/libgpg-error-copy/err-codes.h.in
===================================================================
--- libkdenetwork/libgpg-error-copy/err-codes.h.in	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkdenetwork/libgpg-error-copy/err-codes.h.in	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -16,8 +16,8 @@
  
    You should have received a copy of the GNU Lesser General Public
    License along with libgpg-error; if not, write to the Free
-   Software Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA
-   02110-1301, USA.  */
+   Software Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
+   02111-1307, USA.  */
 
 # Everything up to the first line that starts with a number in the
 # first column is copied into the output verbatim.  Then, empty lines
@@ -109,8 +109,8 @@
 77	GPG_ERR_NO_AGENT		No agent running
 78	GPG_ERR_AGENT			agent error
 79	GPG_ERR_INV_DATA		Invalid data
-80	GPG_ERR_ASSUAN_SERVER_FAULT	Assuan server fault
-81	GPG_ERR_ASSUAN			Assuan error
+80	GPG_ERR_ASSUAN_SERVER_FAULT	Unspecific Assuan server fault
+81	GPG_ERR_ASSUAN			General Assuan error
 82	GPG_ERR_INV_SESSION_KEY		Invalid session key
 83	GPG_ERR_INV_SEXP		Invalid S-expression
 84	GPG_ERR_UNSUPPORTED_ALGORITHM	Unsupported algorithm
@@ -138,7 +138,7 @@
 106	GPG_ERR_CORRUPTED_PROTECTION	Corrupted protection
 107	GPG_ERR_AMBIGUOUS_NAME		Ambiguous name
 108	GPG_ERR_CARD			Card error
-109	GPG_ERR_CARD_RESET		Card reset
+109	GPG_ERR_CARD_RESET		Card reset required
 110	GPG_ERR_CARD_REMOVED		Card removed
 111	GPG_ERR_INV_CARD		Invalid card
 112	GPG_ERR_CARD_NOT_PRESENT	Card not present
@@ -196,10 +196,17 @@
 164	GPG_ERR_INV_CERT_OBJ		Invalid certificate object
 165	GPG_ERR_UNKNOWN_NAME		Unknown name
 166	GPG_ERR_LOCALE_PROBLEM		A locale function failed
-167	GPG_ERR_NOT_LOCKED		Not locked                                             
+167	GPG_ERR_NOT_LOCKED		Not locked
+168	GPG_ERR_PROTOCOL_VIOLATION	Protocol violation
+169	GPG_ERR_INV_MAC			Invalid MAC
+170	GPG_ERR_INV_REQUEST		Invalid request
+171	GPG_ERR_UNKNOWN_EXTN		Unknown extension
+172	GPG_ERR_UNKNOWN_CRIT_EXTN	Unknown critical extension
+173	GPG_ERR_LOCKED			Locked
+174	GPG_ERR_UNKNOWN_OPTION		Unknown option
+175	GPG_ERR_UNKNOWN_COMMAND		Unknown command
+# 176 to 199 are free to be used.
 
-# 168 to 199 are free to be used.
-
 200	GPG_ERR_BUFFER_TOO_SHORT	Buffer too short
 
 # Error codes pertaining to S-expressions.
@@ -218,8 +225,39 @@
 212	GPG_ERR_SEXP_ODD_HEX_NUMBERS	Odd hexadecimal numbers in S-expression
 213	GPG_ERR_SEXP_BAD_OCT_CHAR	Bad octadecimal character in S-expression
 
-# 214 to 1023 are free to be used.
+# 214 to 254 are free to be used. 255 and 256 are RFU.
 
+# Error codes pertaining to the Assuan IPC interface
+257	GPG_ERR_ASS_GENERAL		General IPC error
+258	GPG_ERR_ASS_ACCEPT_FAILED	IPC accept call failed
+259	GPG_ERR_ASS_CONNECT_FAILED	IPC connect call failed
+260	GPG_ERR_ASS_INV_RESPONSE	Invalid IPC response
+261	GPG_ERR_ASS_INV_VALUE		Invalid value passed to IPC
+262	GPG_ERR_ASS_INCOMPLETE_LINE	Incomplete line passed to IPC
+263	GPG_ERR_ASS_LINE_TOO_LONG	Line passed to IPC too long
+264	GPG_ERR_ASS_NESTED_COMMANDS	Nested IPC commands
+265	GPG_ERR_ASS_NO_DATA_CB		No data callback in IPC
+266	GPG_ERR_ASS_NO_INQUIRE_CB	No inquire callback in IPC
+267	GPG_ERR_ASS_NOT_A_SERVER	Not an IPC server
+268	GPG_ERR_ASS_NOT_A_CLIENT	Not an IPC client
+269	GPG_ERR_ASS_SERVER_START	Problem starting IPC server
+270	GPG_ERR_ASS_READ_ERROR		IPC read error
+271	GPG_ERR_ASS_WRITE_ERROR		IPC write error
+# reserved
+273	GPG_ERR_ASS_TOO_MUCH_DATA	Too much data for IPC layer
+274	GPG_ERR_ASS_UNEXPECTED_CMD	Unexpected IPC command
+275	GPG_ERR_ASS_UNKNOWN_CMD		Unknown IPC command
+276	GPG_ERR_ASS_SYNTAX		IPC syntax error
+277	GPG_ERR_ASS_CANCELED		IPC call has been cancelled
+278	GPG_ERR_ASS_NO_INPUT		No input source for IPC
+279	GPG_ERR_ASS_NO_OUTPUT		No output source for IPC
+280	GPG_ERR_ASS_PARAMETER		IPC parameter error 
+281	GPG_ERR_ASS_UNKNOWN_INQUIRE	Unknown IPC inquire
+
+# 282 to 299 are reserved for future assuan codes.
+
+# 300 to 1023 are free to be used.
+
 # For free use by non-GnuPG components.
 1024	GPG_ERR_USER_1			User defined error code 1
 1025	GPG_ERR_USER_2			User defined error code 2
@@ -238,8 +276,9 @@
 1038	GPG_ERR_USER_15			User defined error code 15
 1039	GPG_ERR_USER_16			User defined error code 16
 
-# 1040 to 16381 are free to be used.
+# 1040 to 16380 are free to be used.
 
+16381	GPG_ERR_MISSING_ERRNO		System error w/o errno
 16382	GPG_ERR_UNKNOWN_ERRNO		Unknown system error
 16383	GPG_ERR_EOF			End of file
 
Index: libkdenetwork/libgpgme-copy/gpgme/ath-compat.c
===================================================================
--- libkdenetwork/libgpgme-copy/gpgme/ath-compat.c	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkdenetwork/libgpgme-copy/gpgme/ath-compat.c	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,185 +0,0 @@
-/* ath.c - self-adapting thread-safeness library
- *      Copyright (C) 2002 g10 Code GmbH
- *
- * This file is part of GPGME.
- *
- * GPGME is free software; you can redistribute it and/or modify
- * it under the terms of the GNU General Public License as published by
- * the Free Software Foundation; either version 2 of the License, or
- * (at your option) any later version.
- *
- * GPGME is distributed in the hope that it will be useful,
- * but WITHOUT ANY WARRANTY; without even the implied warranty of
- * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
- * GNU General Public License for more details.
- *
- * You should have received a copy of the GNU General Public License
- * along with this program; if not, write to the Free Software
- * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301, USA
- */
-
-#ifdef HAVE_CONFIG_H
-#include <config.h>
-#endif
-
-#include <unistd.h>
-#ifdef HAVE_SYS_SELECT_H
-# include <sys/select.h>
-#else
-# include <sys/time.h>
-#endif
-#include <sys/types.h>
-#ifndef _WIN32
-#include <sys/wait.h>
-#endif
-
-#include "ath.h"
-
-static struct ath_ops *ath_ops;
-
-void
-ath_init (void)
-{
-  if (0)
-    ;
-#ifdef HAVE_PTHREAD
-  else if (!ath_ops)
-    ath_ops = ath_pthread_available ();
-#endif
-#ifdef HAVE_PTH
-  else if (!ath_ops)
-    ath_ops = ath_pth_available ();
-#endif
-}
-
-
-int
-ath_mutex_init (ath_mutex_t *lock)
-{
-  if (!ath_ops)
-    return 0;
-
-  return ath_ops->mutex_init (lock, 0);
-}
-
-
-int
-ath_mutex_destroy (ath_mutex_t *lock)
-{
-  int err;
-  if (!ath_ops)
-    return 0;
-  err = ath_ops->mutex_init (lock, 1);
-  if (!err)
-    err = ath_ops->mutex_destroy (*lock);
-  return err;
-}
-
-
-int
-ath_mutex_lock (ath_mutex_t *lock)
-{
-  int err;
-
-  if (!ath_ops)
-    return 0;
-  err = ath_ops->mutex_init (lock, 1);
-  if (!err)
-    err = ath_ops->mutex_lock (*lock);
-  return err;
-}
-
-
-int
-ath_mutex_unlock (ath_mutex_t *lock)
-{
-  int err;
-
-  if (!ath_ops)
-    return 0;
-  err = ath_ops->mutex_init (lock, 1);
-  if (!err)
-    err = ath_ops->mutex_unlock (*lock);
-  return err;
-}
-
-
-ssize_t
-ath_read (int fd, void *buf, size_t nbytes)
-{
-  if (ath_ops && ath_ops->read)
-    return ath_ops->read (fd, buf, nbytes);
-  else
-    return read (fd, buf, nbytes);
-}
-
-
-ssize_t
-ath_write (int fd, const void *buf, size_t nbytes)
-{
-  if (ath_ops && ath_ops->write)
-    return ath_ops->write (fd, buf, nbytes);
-  else
-    return write (fd, buf, nbytes);
-}
-
-
-ssize_t
-ath_select (int nfd, fd_set *rset, fd_set *wset, fd_set *eset,
-	    struct timeval *timeout)
-{
-  if (ath_ops && ath_ops->select)
-    return ath_ops->select (nfd, rset, wset, eset, timeout);
-  else
-    return select (nfd, rset, wset, eset, timeout);
-}
-
- 
-ssize_t
-ath_waitpid (pid_t pid, int *status, int options)
-{
-  if (ath_ops && ath_ops->waitpid)
-    return ath_ops->waitpid (pid, status, options);
-  else
-    return waitpid (pid, status, options);
-}
-
-
-int
-ath_accept (int s, struct sockaddr *addr, socklen_t *length_ptr)
-{
-  if (ath_ops && ath_ops->accept)
-    return ath_ops->accept (s, addr, length_ptr);
-  else
-    return accept (s, addr, length_ptr);
-}
-
-
-int
-ath_connect (int s, const struct sockaddr *addr, socklen_t length)
-{
-  if (ath_ops && ath_ops->connect)
-    return ath_ops->connect (s, addr, length);
-  else
-    return connect (s, addr, length);
-}
-
-
-int
-ath_sendmsg (int s, const struct msghdr *msg, int flags)
-{
-  if (ath_ops && ath_ops->sendmsg)
-    return ath_ops->sendmsg (s, msg, flags);
-  else
-    return sendmsg (s, msg, flags);
-}
-
-
-int
-ath_recvmsg (int s, struct msghdr *msg, int flags)
-{
-  if (ath_ops && ath_ops->recvmsg)
-    return ath_ops->recvmsg (s, msg, flags);
-  else
-    return recvmsg (s, msg, flags);
-}
Index: libkdenetwork/libgpgme-copy/gpgme/sign.c
===================================================================
--- libkdenetwork/libgpgme-copy/gpgme/sign.c	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkdenetwork/libgpgme-copy/gpgme/sign.c	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,22 +1,23 @@
 /* sign.c - Signing function.
    Copyright (C) 2000 Werner Koch (dd9jn)
-   Copyright (C) 2001, 2002, 2003 g10 Code GmbH
+   Copyright (C) 2001, 2002, 2003, 2004 g10 Code GmbH
 
    This file is part of GPGME.
  
    GPGME is free software; you can redistribute it and/or modify it
-   under the terms of the GNU General Public License as published by
-   the Free Software Foundation; either version 2 of the License, or
-   (at your option) any later version.
- 
+   under the terms of the GNU Lesser General Public License as
+   published by the Free Software Foundation; either version 2.1 of
+   the License, or (at your option) any later version.
+   
    GPGME is distributed in the hope that it will be useful, but
    WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
-   General Public License for more details.
- 
-   You should have received a copy of the GNU General Public License
-   along with GPGME; if not, write to the Free Software Foundation,
-   Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301, USA.  */
+   Lesser General Public License for more details.
+   
+   You should have received a copy of the GNU Lesser General Public
+   License along with this program; if not, write to the Free Software
+   Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
+   02111-1307, USA.  */
 
 #if HAVE_CONFIG_H
 #include <config.h>
Index: libkdenetwork/libgpgme-copy/gpgme/engine.c
===================================================================
--- libkdenetwork/libgpgme-copy/gpgme/engine.c	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkdenetwork/libgpgme-copy/gpgme/engine.c	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,22 +1,23 @@
 /* engine.c - GPGME engine support.
    Copyright (C) 2000 Werner Koch (dd9jn)
-   Copyright (C) 2001, 2002, 2003 g10 Code GmbH
+   Copyright (C) 2001, 2002, 2003, 2004, 2006 g10 Code GmbH
  
    This file is part of GPGME.
  
    GPGME is free software; you can redistribute it and/or modify it
-   under the terms of the GNU General Public License as published by
-   the Free Software Foundation; either version 2 of the License, or
-   (at your option) any later version.
- 
+   under the terms of the GNU Lesser General Public License as
+   published by the Free Software Foundation; either version 2.1 of
+   the License, or (at your option) any later version.
+   
    GPGME is distributed in the hope that it will be useful, but
    WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
-   General Public License for more details.
- 
-   You should have received a copy of the GNU General Public License
-   along with GPGME; if not, write to the Free Software Foundation,
-   Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301, USA.  */
+   Lesser General Public License for more details.
+   
+   You should have received a copy of the GNU Lesser General Public
+   License along with this program; if not, write to the Free Software
+   Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
+   02111-1307, USA.  */
 
 #ifdef HAVE_CONFIG_H
 #include <config.h>
@@ -24,6 +25,7 @@
 #include <stdlib.h>
 #include <string.h>
 #include <errno.h>
+#include <assert.h>
 
 #include "gpgme.h"
 #include "util.h"
@@ -51,6 +53,11 @@
 #endif
   };
 
+
+/* The engine info.  */
+static gpgme_engine_info_t engine_info;
+DEFINE_STATIC_LOCK (engine_info_lock);
+
 
 /* Get the file name of the engine for PROTOCOL.  */
 static const char *
@@ -66,15 +73,16 @@
 }
 
 
-/* Get the version number of the engine for PROTOCOL.  */
-static const char *
-engine_get_version (gpgme_protocol_t proto)
+/* Get a malloced string containing the version number of the engine
+   for PROTOCOL.  */
+static char *
+engine_get_version (gpgme_protocol_t proto, const char *file_name)
 {
   if (proto > DIM (engine_ops))
     return NULL;
 
   if (engine_ops[proto] && engine_ops[proto]->get_version)
-    return (*engine_ops[proto]->get_version) ();
+    return (*engine_ops[proto]->get_version) (file_name);
   else
     return NULL;
 }
@@ -98,21 +106,64 @@
 gpgme_error_t
 gpgme_engine_check_version (gpgme_protocol_t proto)
 {
-  return _gpgme_compare_versions (engine_get_version (proto),
-				  engine_get_req_version (proto))
-    ? 0 : gpg_error (GPG_ERR_INV_ENGINE);
+  gpgme_error_t err;
+  gpgme_engine_info_t info;
+  int result;
+
+  LOCK (engine_info_lock);
+  info = engine_info;
+  if (!info)
+    {
+      /* Make sure it is initialized.  */
+      UNLOCK (engine_info_lock);
+      err = gpgme_get_engine_info (&info);
+      if (err)
+	return err;
+
+      LOCK (engine_info_lock);
+    }
+
+  while (info && info->protocol != proto)
+    info = info->next;
+
+  if (!info)
+    result = 0;
+  else
+    result = _gpgme_compare_versions (info->version,
+				      info->req_version);
+
+  UNLOCK (engine_info_lock);
+  return result ? 0 : gpg_error (GPG_ERR_INV_ENGINE);
 }
 
 
+/* Release the engine info INFO.  */
+void
+_gpgme_engine_info_release (gpgme_engine_info_t info)
+{
+  while (info)
+    {
+      gpgme_engine_info_t next_info = info->next;
+
+      assert (info->file_name);
+      free (info->file_name);
+      if (info->home_dir)
+	free (info->home_dir);
+      if (info->version)
+	free (info->version);
+      free (info);
+      info = next_info;
+    }
+}
+
+
 /* Get the information about the configured and installed engines.  A
    pointer to the first engine in the statically allocated linked list
-   is returned in *INFO.  If an error occurs, it is returned.  */
+   is returned in *INFO.  If an error occurs, it is returned.  The
+   returned data is valid until the next gpgme_set_engine_info.  */
 gpgme_error_t
 gpgme_get_engine_info (gpgme_engine_info_t *info)
 {
-  static gpgme_engine_info_t engine_info;
-  DEFINE_STATIC_LOCK (engine_info_lock);
-
   LOCK (engine_info_lock);
   if (!engine_info)
     {
@@ -123,70 +174,238 @@
 
       for (proto = 0; proto < DIM (proto_list); proto++)
 	{
-	  const char *file_name = engine_get_file_name (proto_list[proto]);
+	  const char *ofile_name = engine_get_file_name (proto_list[proto]);
+	  char *file_name;
 
-	  if (!file_name)
+	  if (!ofile_name)
 	    continue;
 
+	  file_name = strdup (ofile_name);
+
 	  *lastp = malloc (sizeof (*engine_info));
-	  if (!*lastp)
+	  if (!*lastp || !file_name)
 	    {
 	      int saved_errno = errno;
 
-	      while (engine_info)
-		{
-		  gpgme_engine_info_t next_info = engine_info->next;
-		  free (engine_info);
-		  engine_info = next_info;
-		}
+	      _gpgme_engine_info_release (engine_info);
+	      engine_info = NULL;
+
+	      if (file_name)
+		free (file_name);
+
 	      UNLOCK (engine_info_lock);
 	      return gpg_error_from_errno (saved_errno);
 	    }
 
 	  (*lastp)->protocol = proto_list[proto];
 	  (*lastp)->file_name = file_name;
-	  (*lastp)->version = engine_get_version (proto_list[proto]);
+	  (*lastp)->home_dir = NULL;
+	  (*lastp)->version = engine_get_version (proto_list[proto], NULL);
 	  (*lastp)->req_version = engine_get_req_version (proto_list[proto]);
 	  (*lastp)->next = NULL;
 	  lastp = &(*lastp)->next;
 	}
     }
+
+  *info = engine_info;
   UNLOCK (engine_info_lock);
-  *info = engine_info;
   return 0;
 }
 
-
+
+/* Get a deep copy of the engine info and return it in INFO.  */
 gpgme_error_t
-_gpgme_engine_new (gpgme_protocol_t proto, engine_t *r_engine,
-		   const char *lc_ctype, const char *lc_messages)
+_gpgme_engine_info_copy (gpgme_engine_info_t *r_info)
 {
-  engine_t engine;
+  gpgme_error_t err = 0;
+  gpgme_engine_info_t info;
+  gpgme_engine_info_t new_info;
+  gpgme_engine_info_t *lastp;
 
-  const char *file_name;
-  const char *version;
+  LOCK (engine_info_lock);
+  info = engine_info;
+  if (!info)
+    {
+      /* Make sure it is initialized.  */
+      UNLOCK (engine_info_lock);
+      err = gpgme_get_engine_info (&info);
+      if (err)
+	return err;
 
+      LOCK (engine_info_lock);
+    }
+
+  new_info = NULL;
+  lastp = &new_info;
+
+  while (info)
+    {
+      char *file_name;
+      char *home_dir;
+      char *version;
+
+      assert (info->file_name);
+      file_name = strdup (info->file_name);
+
+      if (info->home_dir)
+	{
+	  home_dir = strdup (info->home_dir);
+	  if (!home_dir)
+	    err = gpg_error_from_errno (errno);
+	}
+      else
+	home_dir = NULL;
+
+      if (info->version)
+	{
+	  version = strdup (info->version);
+	  if (!version)
+	    err = gpg_error_from_errno (errno);
+	}
+      else
+	version = NULL;
+
+      *lastp = malloc (sizeof (*engine_info));
+      if (!*lastp || !file_name || err)
+	{
+	  int saved_errno = errno;
+
+	  _gpgme_engine_info_release (new_info);
+
+	  if (file_name)
+	    free (file_name);
+	  if (home_dir)
+	    free (home_dir);
+	  if (version)
+	    free (version);
+
+	  UNLOCK (engine_info_lock);
+	  return gpg_error_from_errno (saved_errno);
+	}
+
+      (*lastp)->protocol = info->protocol;
+      (*lastp)->file_name = file_name;
+      (*lastp)->home_dir = home_dir;
+      (*lastp)->version = version;
+      (*lastp)->req_version = info->req_version;
+      (*lastp)->next = NULL;
+      lastp = &(*lastp)->next;
+
+      info = info->next;
+    }
+
+  *r_info = new_info;
+  UNLOCK (engine_info_lock);
+  return 0;
+}
+
+
+/* Set the engine info for the info list INFO, protocol PROTO, to the
+   file name FILE_NAME and the home directory HOME_DIR.  */
+gpgme_error_t
+_gpgme_set_engine_info (gpgme_engine_info_t info, gpgme_protocol_t proto,
+			const char *file_name, const char *home_dir)
+{
+  char *new_file_name;
+  char *new_home_dir;
+
+  /* FIXME: Use some PROTO_MAX definition.  */
   if (proto > DIM (engine_ops))
     return gpg_error (GPG_ERR_INV_VALUE);
 
-  if (!engine_ops[proto])
+  while (info && info->protocol != proto)
+    info = info->next;
+
+  if (!info)
     return gpg_error (GPG_ERR_INV_ENGINE);
 
-  file_name = engine_get_file_name (proto);
-  version = engine_get_version (proto);
-  if (!file_name || !version)
+  /* Prepare new members.  */
+  if (file_name)
+    new_file_name = strdup (file_name);
+  else
+    {
+      const char *ofile_name = engine_get_file_name (proto);
+      assert (ofile_name);
+      new_file_name = strdup (ofile_name);
+    }
+  if (!new_file_name)
+    return gpg_error_from_errno (errno);
+
+  if (home_dir)
+    {
+      new_home_dir = strdup (home_dir);
+      if (!new_home_dir)
+	{
+	  free (new_file_name);
+	  return gpg_error_from_errno (errno);
+	}
+    }
+  else
+    new_home_dir = NULL;
+
+  /* Remove the old members.  */
+  assert (info->file_name);
+  free (info->file_name);
+  if (info->home_dir)
+    free (info->home_dir);
+  if (info->version)
+    free (info->version);
+
+  /* Install the new members.  */
+  info->file_name = new_file_name;
+  info->home_dir = new_home_dir;
+  info->version = engine_get_version (proto, new_file_name);
+
+  return 0;
+}
+
+
+/* Set the default engine info for the protocol PROTO to the file name
+   FILE_NAME and the home directory HOME_DIR.  */
+gpgme_error_t
+gpgme_set_engine_info (gpgme_protocol_t proto,
+		       const char *file_name, const char *home_dir)
+{
+  gpgme_error_t err;
+  gpgme_engine_info_t info;
+
+  LOCK (engine_info_lock);
+  info = engine_info;
+  if (!info)
+    {
+      /* Make sure it is initialized.  */
+      UNLOCK (engine_info_lock);
+      err = gpgme_get_engine_info (&info);
+      if (err)
+	return err;
+
+      LOCK (engine_info_lock);
+    }
+
+  err = _gpgme_set_engine_info (info, proto, file_name, home_dir);
+  UNLOCK (engine_info_lock);
+  return err;
+}
+
+
+gpgme_error_t
+_gpgme_engine_new (gpgme_engine_info_t info, engine_t *r_engine)
+{
+  engine_t engine;
+
+  if (!info->file_name || !info->version)
     return gpg_error (GPG_ERR_INV_ENGINE);
 
   engine = calloc (1, sizeof *engine);
   if (!engine)
     return gpg_error_from_errno (errno);
 
-  engine->ops = engine_ops[proto];
-  if (engine_ops[proto]->new)
+  engine->ops = engine_ops[info->protocol];
+  if (engine->ops->new)
     {
-      gpgme_error_t err = (*engine_ops[proto]->new) (&engine->engine,
-						     lc_ctype,
-						     lc_messages);
+      gpgme_error_t err;
+      err = (*engine->ops->new) (&engine->engine,
+				 info->file_name, info->home_dir);
       if (err)
 	{
 	  free (engine);
@@ -201,6 +420,19 @@
 }
 
 
+gpgme_error_t
+_gpgme_engine_reset (engine_t engine)
+{
+  if (!engine)
+    return gpg_error (GPG_ERR_INV_VALUE);
+
+  if (!engine->ops->reset)
+    return gpg_error (GPG_ERR_NOT_IMPLEMENTED);
+
+  return (*engine->ops->reset) (engine->engine);
+}
+
+
 void
 _gpgme_engine_release (engine_t engine)
 {
@@ -257,6 +489,19 @@
 }
 
 gpgme_error_t
+_gpgme_engine_set_locale (engine_t engine, int category,
+			  const char *value)
+{
+  if (!engine)
+    return gpg_error (GPG_ERR_INV_VALUE);
+
+  if (!engine->ops->set_locale)
+    return gpg_error (GPG_ERR_NOT_IMPLEMENTED);
+
+  return (*engine->ops->set_locale) (engine->engine, category, value);
+}
+
+gpgme_error_t
 _gpgme_engine_op_decrypt (engine_t engine, gpgme_data_t ciph,
 			  gpgme_data_t plain)
 {
Index: libkdenetwork/libgpgme-copy/gpgme/posix-io.c
===================================================================
--- libkdenetwork/libgpgme-copy/gpgme/posix-io.c	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkdenetwork/libgpgme-copy/gpgme/posix-io.c	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,22 +1,23 @@
 /* posix-io.c - Posix I/O functions
    Copyright (C) 2000 Werner Koch (dd9jn)
-   Copyright (C) 2001, 2002 g10 Code GmbH
+   Copyright (C) 2001, 2002, 2004, 2005 g10 Code GmbH
 
    This file is part of GPGME.
  
    GPGME is free software; you can redistribute it and/or modify it
-   under the terms of the GNU General Public License as published by
-   the Free Software Foundation; either version 2 of the License, or
-   (at your option) any later version.
- 
+   under the terms of the GNU Lesser General Public License as
+   published by the Free Software Foundation; either version 2.1 of
+   the License, or (at your option) any later version.
+   
    GPGME is distributed in the hope that it will be useful, but
    WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
-   General Public License for more details.
- 
-   You should have received a copy of the GNU General Public License
-   along with GPGME; if not, write to the Free Software Foundation,
-   Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301, USA.  */
+   Lesser General Public License for more details.
+   
+   You should have received a copy of the GNU Lesser General Public
+   License along with this program; if not, write to the Free Software
+   Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
+   02111-1307, USA.  */
 
 #ifdef HAVE_CONFIG_H
 #include <config.h>
@@ -34,7 +35,7 @@
 #include <sys/wait.h>
 
 #include "util.h"
-#include "io.h"
+#include "priv-io.h"
 #include "sema.h"
 #include "ath.h"
 #include "debug.h"
@@ -55,6 +56,16 @@
     }
 }
 
+
+/* Write the printable version of FD to the buffer BUF of length
+   BUFLEN.  The printable version is the representation on the command
+   line that the child process expects.  */
+int
+_gpgme_io_fd2str (char *buf, int buflen, int fd)
+{
+  return snprintf (buf, buflen, "%d", fd);
+}
+
 
 static struct
 {
@@ -173,6 +184,30 @@
 }
 
 
+static int
+_gpgme_io_waitpid (int pid, int hang, int *r_status, int *r_signal)
+{
+  int status;
+
+  *r_status = 0;
+  *r_signal = 0;
+  if (_gpgme_ath_waitpid (pid, &status, hang? 0 : WNOHANG) == pid)
+    {
+      if (WIFSIGNALED (status))
+	{
+	  *r_status = 4; /* Need some value here.  */
+	  *r_signal = WTERMSIG (status);
+	}
+      else if (WIFEXITED (status))
+	*r_status = WEXITSTATUS (status);
+      else
+	*r_status = 4; /* Oops.  */
+      return 1;
+    }
+  return 0;
+}
+
+
 /* Returns 0 on success, -1 on error.  */
 int
 _gpgme_io_spawn (const char *path, char **argv,
@@ -272,37 +307,6 @@
 }
 
 
-int
-_gpgme_io_waitpid (int pid, int hang, int *r_status, int *r_signal)
-{
-  int status;
-
-  *r_status = 0;
-  *r_signal = 0;
-  if (_gpgme_ath_waitpid (pid, &status, hang? 0 : WNOHANG) == pid)
-    {
-      if (WIFSIGNALED (status))
-	{
-	  *r_status = 4; /* Need some value here.  */
-	  *r_signal = WTERMSIG (status);
-	}
-      else if (WIFEXITED (status))
-	*r_status = WEXITSTATUS (status);
-      else
-	*r_status = 4; /* Oops.  */
-      return 1;
-    }
-  return 0;
-}
-
-
-int
-_gpgme_io_kill (int pid, int hard)
-{
-  return kill (pid, hard ? SIGKILL : SIGTERM);
-}
-
-
 /*
  * Select on the list of fds.
  * Returns: -1 = error
@@ -408,3 +412,86 @@
     }
   return count;
 }
+
+
+int
+_gpgme_io_recvmsg (int fd, struct msghdr *msg, int flags)
+{
+  int nread;
+  int saved_errno;
+  struct iovec *iov;
+
+  nread = 0;
+  iov = msg->msg_iov;
+  while (iov < msg->msg_iov + msg->msg_iovlen)
+    {
+      nread += iov->iov_len;
+      iov++;
+    }
+  
+  DEBUG2 ("fd %d: about to receive %d bytes\n",
+	  fd, (int) nread);
+  do
+    {
+      nread = _gpgme_ath_recvmsg (fd, msg, flags);
+    }
+  while (nread == -1 && errno == EINTR);
+  saved_errno = errno;
+  DEBUG2 ("fd %d: got %d bytes\n", fd, nread);
+  if (nread > 0)
+    {
+      int nr = nread;
+
+      iov = msg->msg_iov;
+      while (nr > 0)
+	{
+	  int len = nr > iov->iov_len ? iov->iov_len : nr;
+	  _gpgme_debug (2, "fd %d: got `%.*s'\n", fd, len,
+			msg->msg_iov->iov_base);
+	  iov++;
+	  nr -= len;
+	}
+    }
+  errno = saved_errno;
+  return nread;
+}
+
+
+int
+_gpgme_io_sendmsg (int fd, const struct msghdr *msg, int flags)
+{
+  int saved_errno;
+  int nwritten;
+  struct iovec *iov;
+
+  nwritten = 0;
+  iov = msg->msg_iov;
+  while (iov < msg->msg_iov + msg->msg_iovlen)
+    {
+      nwritten += iov->iov_len;
+      iov++;
+    }
+
+  DEBUG2 ("fd %d: about to write %d bytes\n", fd, (int) nwritten);
+  iov = msg->msg_iov;
+  while (nwritten > 0)
+    {
+      int len = nwritten > iov->iov_len ? iov->iov_len : nwritten;
+      _gpgme_debug (2, "fd %d: write `%.*s'\n", fd, len,
+		    msg->msg_iov->iov_base);
+      iov++;
+      nwritten -= len;
+    }
+
+  do
+    {
+      nwritten = _gpgme_ath_sendmsg (fd, msg, flags);
+    }
+  while (nwritten == -1 && errno == EINTR);
+  saved_errno = errno;
+  DEBUG2 ("fd %d:          wrote %d bytes\n", fd, (int) nwritten);
+  errno = saved_errno;
+  return nwritten;
+}
+
+
Index: libkdenetwork/libgpgme-copy/gpgme/engine.h
===================================================================
--- libkdenetwork/libgpgme-copy/gpgme/engine.h	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkdenetwork/libgpgme-copy/gpgme/engine.h	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,22 +1,23 @@
-/* engine.h -  GPGME engine interface.
+/* engine.h - GPGME engine interface.
    Copyright (C) 2000 Werner Koch (dd9jn)
-   Copyright (C) 2001, 2002, 2003 g10 Code GmbH
+   Copyright (C) 2001, 2002, 2003, 2004 g10 Code GmbH
  
    This file is part of GPGME.
  
    GPGME is free software; you can redistribute it and/or modify it
-   under the terms of the GNU General Public License as published by
-   the Free Software Foundation; either version 2 of the License, or
-   (at your option) any later version.
- 
+   under the terms of the GNU Lesser General Public License as
+   published by the Free Software Foundation; either version 2.1 of
+   the License, or (at your option) any later version.
+   
    GPGME is distributed in the hope that it will be useful, but
    WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
-   General Public License for more details.
- 
-   You should have received a copy of the GNU General Public License
-   along with GPGME; if not, write to the Free Software Foundation,
-   Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301, USA.  */
+   Lesser General Public License for more details.
+   
+   You should have received a copy of the GNU Lesser General Public
+   License along with this program; if not, write to the Free Software
+   Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
+   02111-1307, USA.  */
 
 #ifndef ENGINE_H
 #define ENGINE_H
@@ -33,12 +34,29 @@
 typedef gpgme_error_t (*engine_command_handler_t) (void *priv,
 						   gpgme_status_code_t code,
 						   const char *keyword,
-						   int fd);
+						   int fd, int *processed);
 
-gpgme_error_t _gpgme_engine_new (gpgme_protocol_t proto,
-				 engine_t *r_engine,
-				 const char *lc_ctype,
-				 const char *lc_messages);
+/* Get a deep copy of the engine info and return it in INFO.  */
+gpgme_error_t _gpgme_engine_info_copy (gpgme_engine_info_t *r_info);
+
+/* Release the engine info INFO.  */
+void _gpgme_engine_info_release (gpgme_engine_info_t info);
+
+/* Set the engine info for the info list INFO, protocol PROTO, to the
+   file name FILE_NAME and the home directory HOME_DIR.  */
+gpgme_error_t _gpgme_set_engine_info (gpgme_engine_info_t info,
+				      gpgme_protocol_t praoto,
+				      const char *file_name,
+				      const char *home_dir);
+
+
+gpgme_error_t _gpgme_engine_new (gpgme_engine_info_t info,
+				 engine_t *r_engine);
+gpgme_error_t _gpgme_engine_reset (engine_t engine);
+
+gpgme_error_t _gpgme_engine_set_locale (engine_t engine, int category,
+					const char *value);
+
 void _gpgme_engine_release (engine_t engine);
 void _gpgme_engine_set_status_handler (engine_t engine,
 				       engine_status_handler_t fnc,
Index: libkdenetwork/libgpgme-copy/gpgme/sig-notation.c
===================================================================
--- libkdenetwork/libgpgme-copy/gpgme/sig-notation.c	(.../tags/KDE/3.5.6/kdepim)	(wersja 0)
+++ libkdenetwork/libgpgme-copy/gpgme/sig-notation.c	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -0,0 +1,260 @@
+/* sig-notation.c - Signature notation data support.
+   Copyright (C) 2005 g10 Code GmbH
+
+   This file is part of GPGME.
+ 
+   GPGME is free software; you can redistribute it and/or modify it
+   under the terms of the GNU Lesser General Public License as
+   published by the Free Software Foundation; either version 2.1 of
+   the License, or (at your option) any later version.
+   
+   GPGME is distributed in the hope that it will be useful, but
+   WITHOUT ANY WARRANTY; without even the implied warranty of
+   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
+   Lesser General Public License for more details.
+   
+   You should have received a copy of the GNU Lesser General Public
+   License along with this program; if not, write to the Free Software
+   Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
+   02111-1307, USA.  */
+
+#if HAVE_CONFIG_H
+#include <config.h>
+#endif
+#include <stdlib.h>
+#include <string.h>
+#include <errno.h>
+#include <assert.h>
+
+#include "gpgme.h"
+#include "util.h"
+#include "context.h"
+#include "ops.h"
+
+
+/* Free the signature notation object and all associated resources.
+   The object must already be removed from any linked list as the next
+   pointer is ignored.  */
+void
+_gpgme_sig_notation_free (gpgme_sig_notation_t notation)
+{
+  if (notation->name)
+    free (notation->name);
+
+  if (notation->value)
+    free (notation->value);
+
+  free (notation);
+}
+
+
+/* Set the flags of NOTATION to FLAGS.  */
+static void
+sig_notation_set_flags (gpgme_sig_notation_t notation,
+			gpgme_sig_notation_flags_t flags)
+{
+  /* We copy the flags into individual bits to make them easier
+     accessible individually for the user.  */
+  notation->human_readable = flags & GPGME_SIG_NOTATION_HUMAN_READABLE ? 1 : 0;
+  notation->critical = flags & GPGME_SIG_NOTATION_CRITICAL ? 1 : 0; 
+
+  notation->flags = flags;
+}
+
+
+/* Create a new, empty signature notation data object.  */
+gpgme_error_t
+_gpgme_sig_notation_create (gpgme_sig_notation_t *notationp,
+			    const char *name, int name_len,
+			    const char *value, int value_len,
+			    gpgme_sig_notation_flags_t flags)
+{
+  gpgme_error_t err = 0;
+  gpgme_sig_notation_t notation;
+
+  /* Currently, we require all notations to be human-readable.  */
+  if (name && !(flags & GPGME_SIG_NOTATION_HUMAN_READABLE))
+    return gpg_error (GPG_ERR_INV_VALUE);
+
+  notation = calloc (1, sizeof (*notation));
+  if (!notation)
+    return gpg_error_from_errno (errno);
+
+  /* This is critical.  We want to reliably identify policy URLs by
+     using a NULL pointer for NAME.  So all notations must have a NAME
+     string, even if it is empty.  */
+  if (name)
+    {
+      /* We add a trailing '\0' for stringification in the good
+	 case.  */
+      notation->name = malloc (name_len + 1);
+      if (!notation->name)
+	{
+	  err = gpg_error_from_errno (errno);
+	  goto err;
+	}
+
+      memcpy (notation->name, name, name_len);
+      notation->name[name_len] = '\0';
+      notation->name_len = name_len;
+    }
+
+  if (value)
+    {
+      /* We add a trailing '\0' for stringification in the good
+	 case.  */
+      notation->value = malloc (value_len + 1);
+      if (!notation->value)
+	{
+	  err = gpg_error_from_errno (errno);
+	  goto err;
+	}
+
+      memcpy (notation->value, value, value_len);
+      notation->value[value_len] = '\0';
+      notation->value_len = value_len;
+    }
+
+  sig_notation_set_flags (notation, flags);
+
+  *notationp = notation;
+  return 0;
+
+ err:
+  _gpgme_sig_notation_free (notation);
+  return err;
+}
+
+
+/* GnuPG subpacket flags.  */
+
+/* This subpacket data is part of the hashed data.  */
+#define GNUPG_SPK_HASHED	0x01
+
+/* This subpacket is marked critical.  */
+#define GNUPG_SPK_CRITICAL	0x02
+
+/* Parse a notation or policy URL subpacket.  If the packet type is
+   not known, return no error but NULL in NOTATION.  */
+gpgme_error_t
+_gpgme_parse_notation (gpgme_sig_notation_t *notationp,
+		       int type, int pkflags, int len, char *data)
+{
+  gpgme_error_t err;
+  char *name = NULL;
+  int name_len = 0;
+  char *value = NULL;
+  int value_len = 0;
+  gpgme_sig_notation_flags_t flags = 0;
+  char *decoded_data;
+  unsigned char *bdata;
+
+  /* Type 20: Notation data.  */
+  /* Type 26: Policy URL.  */
+  if (type != 20 && type != 26)
+    {
+      *notationp = NULL;
+      return 0;
+    }
+
+  /* A few simple sanity checks.  */
+  if (len > strlen (data))
+    return gpg_error (GPG_ERR_INV_ENGINE);
+
+  /* See below for the format of a notation subpacket.  It has at
+     least four octets of flags and two times two octets of length
+     information.  */
+  if (type == 20 && len < 4 + 2 + 2)
+    return gpg_error (GPG_ERR_INV_ENGINE);
+
+  err = _gpgme_decode_percent_string (data, &decoded_data, 0, 1);
+  if (err)
+    return err;
+  bdata = (unsigned char *) decoded_data;
+
+  /* Flags common to notation data and policy URL.  */
+  if (pkflags & GNUPG_SPK_CRITICAL)
+    flags |= GPGME_SIG_NOTATION_CRITICAL;
+
+  /* This information is relevant in parsing multi-octet numbers below:
+
+     3.1. Scalar numbers
+
+     Scalar numbers are unsigned, and are always stored in big-endian
+     format.  Using n[k] to refer to the kth octet being interpreted,
+     the value of a two-octet scalar is ((n[0] << 8) + n[1]).  The
+     value of a four-octet scalar is ((n[0] << 24) + (n[1] << 16) +
+     (n[2] << 8) + n[3]).
+
+     From RFC2440: OpenPGP Message Format.  Copyright (C) The Internet
+     Society (1998).  All Rights Reserved.  */
+#define RFC2440_GET_WORD(chr) ((((int)((unsigned char *)(chr))[0]) << 8) \
+			       + ((int)((unsigned char *)(chr))[1]))
+
+  if (type == 20)
+    {
+      /* 5.2.3.15. Notation Data
+
+	 (4 octets of flags, 2 octets of name length (M),
+	 2 octets of value length (N), M octets of name data,
+	 N octets of value data)
+
+	 [...] The "flags" field holds four octets of flags.
+	 All undefined flags MUST be zero. Defined flags are:
+
+	 First octet: 0x80 = human-readable. [...]
+	 Other octets:  none.
+
+	 From RFC2440: OpenPGP Message Format.  Copyright (C) The
+	 Internet Society (1998).  All Rights Reserved.  */
+
+      int chr;
+
+      /* First octet of flags.  */
+#define RFC2440_SPK20_FLAG1_HUMAN_READABLE 0x80
+
+      chr = *bdata;
+      bdata++;
+
+      if (chr & RFC2440_SPK20_FLAG1_HUMAN_READABLE)
+	flags |= GPGME_SIG_NOTATION_HUMAN_READABLE;
+
+      /* The second, third and four octet of flags are unused.  */
+      bdata++;
+      bdata++;
+      bdata++;
+
+      name_len = RFC2440_GET_WORD (bdata);
+      bdata += 2;
+
+      value_len = RFC2440_GET_WORD (bdata);
+      bdata += 2;
+
+      /* Small sanity check.  */
+      if (4 + 2 + 2 + name_len + value_len > len)
+	{
+	  free (decoded_data);
+	  return gpg_error (GPG_ERR_INV_ENGINE);
+	}
+
+      name = (char *) bdata;
+      bdata += name_len;
+
+      value = (char *) bdata;
+    }
+  else
+    {
+      /* Type is 26.  */
+
+      /* NAME is NULL, name_len is 0.  */
+
+      value = (char *) bdata;
+      value_len = strlen (value);
+    }
+
+  err = _gpgme_sig_notation_create (notationp, name, name_len,
+				    value, value_len, flags);
+
+  free (decoded_data);
+  return err;
+}
Index: libkdenetwork/libgpgme-copy/gpgme/ath.c
===================================================================
--- libkdenetwork/libgpgme-copy/gpgme/ath.c	(.../tags/KDE/3.5.6/kdepim)	(wersja 0)
+++ libkdenetwork/libgpgme-copy/gpgme/ath.c	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -0,0 +1,169 @@
+/* ath.c - Thread-safeness library.
+   Copyright (C) 2002, 2003, 2004 g10 Code GmbH
+
+   This file is part of GPGME.
+ 
+   GPGME is free software; you can redistribute it and/or modify it
+   under the terms of the GNU Lesser General Public License as
+   published by the Free Software Foundation; either version 2.1 of
+   the License, or (at your option) any later version.
+   
+   GPGME is distributed in the hope that it will be useful, but
+   WITHOUT ANY WARRANTY; without even the implied warranty of
+   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
+   Lesser General Public License for more details.
+   
+   You should have received a copy of the GNU Lesser General Public
+   License along with this program; if not, write to the Free Software
+   Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
+   02111-1307, USA.  */
+
+#ifdef HAVE_CONFIG_H
+#include <config.h>
+#endif
+
+#include <assert.h>
+#include <unistd.h>
+#ifdef HAVE_SYS_SELECT_H
+# include <sys/select.h>
+#else
+# include <sys/time.h>
+#endif
+#include <sys/types.h>
+#ifndef HAVE_W32_SYSTEM
+#include <sys/wait.h>
+#endif
+
+#include "ath.h"
+
+
+#define MUTEX_UNLOCKED	((ath_mutex_t) 0)
+#define MUTEX_LOCKED	((ath_mutex_t) 1)
+#define MUTEX_DESTROYED	((ath_mutex_t) 2)
+
+
+int
+ath_mutex_init (ath_mutex_t *lock)
+{
+#ifndef NDEBUG
+  *lock = MUTEX_UNLOCKED;
+#endif
+  return 0;
+}
+
+
+int
+ath_mutex_destroy (ath_mutex_t *lock)
+{
+#ifndef NDEBUG
+  assert (*lock == MUTEX_UNLOCKED);
+
+  *lock = MUTEX_DESTROYED;
+#endif
+  return 0;
+}
+
+
+int
+ath_mutex_lock (ath_mutex_t *lock)
+{
+#ifndef NDEBUG
+  assert (*lock == MUTEX_UNLOCKED);
+
+  *lock = MUTEX_LOCKED;
+#endif
+  return 0;
+}
+
+
+int
+ath_mutex_unlock (ath_mutex_t *lock)
+{
+#ifndef NDEBUG
+  assert (*lock == MUTEX_LOCKED);
+
+  *lock = MUTEX_UNLOCKED;
+#endif
+  return 0;
+}
+
+
+ssize_t
+ath_read (int fd, void *buf, size_t nbytes)
+{
+  return read (fd, buf, nbytes);
+}
+
+
+ssize_t
+ath_write (int fd, const void *buf, size_t nbytes)
+{
+  return write (fd, buf, nbytes);
+}
+
+
+ssize_t
+ath_select (int nfd, fd_set *rset, fd_set *wset, fd_set *eset,
+	    struct timeval *timeout)
+{
+#ifdef HAVE_W32_SYSTEM
+  return -1; /* Not supported. */
+#else
+  return select (nfd, rset, wset, eset, timeout);
+#endif
+}
+
+ 
+ssize_t
+ath_waitpid (pid_t pid, int *status, int options)
+{
+#ifdef HAVE_W32_SYSTEM
+  return -1; /* Not supported. */
+#else
+  return waitpid (pid, status, options);
+#endif
+}
+
+
+int
+ath_accept (int s, struct sockaddr *addr, socklen_t *length_ptr)
+{
+#ifdef HAVE_W32_SYSTEM
+  return -1; /* Not supported. */
+#else
+  return accept (s, addr, length_ptr);
+#endif
+}
+
+
+int
+ath_connect (int s, const struct sockaddr *addr, socklen_t length)
+{
+#ifdef HAVE_W32_SYSTEM
+  return -1; /* Not supported. */
+#else
+  return connect (s, addr, length);
+#endif
+}
+
+
+int
+ath_sendmsg (int s, const struct msghdr *msg, int flags)
+{
+#ifdef HAVE_W32_SYSTEM
+  return -1; /* Not supported. */
+#else
+  return sendmsg (s, msg, flags);
+#endif
+}
+
+
+int
+ath_recvmsg (int s, struct msghdr *msg, int flags)
+{
+#ifdef HAVE_W32_SYSTEM
+  return -1; /* Not supported. */
+#else
+  return recvmsg (s, msg, flags);
+#endif
+}
Index: libkdenetwork/libgpgme-copy/gpgme/wait-private.c
===================================================================
--- libkdenetwork/libgpgme-copy/gpgme/wait-private.c	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkdenetwork/libgpgme-copy/gpgme/wait-private.c	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,22 +1,23 @@
 /* wait-private.c 
    Copyright (C) 2000 Werner Koch (dd9jn)
-   Copyright (C) 2001, 2002, 2003 g10 Code GmbH
+   Copyright (C) 2001, 2002, 2003, 2004, 2005 g10 Code GmbH
  
    This file is part of GPGME.
  
    GPGME is free software; you can redistribute it and/or modify it
-   under the terms of the GNU General Public License as published by
-   the Free Software Foundation; either version 2 of the License, or
-   (at your option) any later version.
- 
+   under the terms of the GNU Lesser General Public License as
+   published by the Free Software Foundation; either version 2.1 of
+   the License, or (at your option) any later version.
+   
    GPGME is distributed in the hope that it will be useful, but
    WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
-   General Public License for more details.
- 
-   You should have received a copy of the GNU General Public License
-   along with GPGME; if not, write to the Free Software Foundation,
-   Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301, USA.  */
+   Lesser General Public License for more details.
+   
+   You should have received a copy of the GNU Lesser General Public
+   License along with this program; if not, write to the Free Software
+   Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
+   02111-1307, USA.  */
 
 #if HAVE_CONFIG_H
 #include <config.h>
@@ -28,7 +29,7 @@
 #include "context.h"
 #include "wait.h"
 #include "ops.h"
-#include "io.h"
+#include "priv-io.h"
 #include "util.h"
 
 
@@ -83,7 +84,7 @@
 
       if (nr < 0)
 	{
-	  /* An error occurred.  Close all fds in this context, and
+	  /* An error occured.  Close all fds in this context, and
 	     signal it.  */
 	  unsigned int idx;
 
@@ -100,18 +101,14 @@
 	{
 	  if (ctx->fdt.fds[i].fd != -1 && ctx->fdt.fds[i].signaled)
 	    {
-	      struct wait_item_s *item;
-	      
 	      ctx->fdt.fds[i].signaled = 0;
 	      assert (nr);
 	      nr--;
-	      
-	      item = (struct wait_item_s *) ctx->fdt.fds[i].opaque;
 
-	      err = item->handler (item->handler_value, ctx->fdt.fds[i].fd);
+	      err = _gpgme_run_io_cb (&ctx->fdt.fds[i], 0);
 	      if (err)
 		{
-		  /* An error occurred.  Close all fds in this context,
+		  /* An error occured.  Close all fds in this context,
 		     and signal it.  */
 		  unsigned int idx;
 		  
Index: libkdenetwork/libgpgme-copy/gpgme/trust-item.c
===================================================================
--- libkdenetwork/libgpgme-copy/gpgme/trust-item.c	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkdenetwork/libgpgme-copy/gpgme/trust-item.c	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,22 +1,23 @@
 /* trust-item.c - Trust item objects.
    Copyright (C) 2000 Werner Koch (dd9jn)
-   Copyright (C) 2001, 2002, 2003 g10 Code GmbH
+   Copyright (C) 2001, 2002, 2003, 2004 g10 Code GmbH
 
    This file is part of GPGME.
  
    GPGME is free software; you can redistribute it and/or modify it
-   under the terms of the GNU General Public License as published by
-   the Free Software Foundation; either version 2 of the License, or
-   (at your option) any later version.
- 
+   under the terms of the GNU Lesser General Public License as
+   published by the Free Software Foundation; either version 2.1 of
+   the License, or (at your option) any later version.
+   
    GPGME is distributed in the hope that it will be useful, but
    WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
-   General Public License for more details.
- 
-   You should have received a copy of the GNU General Public License
-   along with GPGME; if not, write to the Free Software Foundation,
-   Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301, USA.  */
+   Lesser General Public License for more details.
+   
+   You should have received a copy of the GNU Lesser General Public
+   License along with this program; if not, write to the Free Software
+   Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
+   02111-1307, USA.  */
 
 #if HAVE_CONFIG_H
 #include <config.h>
Index: libkdenetwork/libgpgme-copy/gpgme/wait-user.c
===================================================================
--- libkdenetwork/libgpgme-copy/gpgme/wait-user.c	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkdenetwork/libgpgme-copy/gpgme/wait-user.c	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,22 +1,23 @@
-/* wait.c 
+/* wait-user.c 
    Copyright (C) 2000 Werner Koch (dd9jn)
-   Copyright (C) 2001, 2002, 2003 g10 Code GmbH
+   Copyright (C) 2001, 2002, 2003, 2004, 2005 g10 Code GmbH
  
    This file is part of GPGME.
  
    GPGME is free software; you can redistribute it and/or modify it
-   under the terms of the GNU General Public License as published by
-   the Free Software Foundation; either version 2 of the License, or
-   (at your option) any later version.
- 
+   under the terms of the GNU Lesser General Public License as
+   published by the Free Software Foundation; either version 2.1 of
+   the License, or (at your option) any later version.
+   
    GPGME is distributed in the hope that it will be useful, but
    WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
-   General Public License for more details.
- 
-   You should have received a copy of the GNU General Public License
-   along with GPGME; if not, write to the Free Software Foundation,
-   Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301, USA.  */
+   Lesser General Public License for more details.
+   
+   You should have received a copy of the GNU Lesser General Public
+   License along with this program; if not, write to the Free Software
+   Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
+   02111-1307, USA.  */
 
 #if HAVE_CONFIG_H
 #include <config.h>
@@ -25,7 +26,7 @@
 
 #include "gpgme.h"
 #include "context.h"
-#include "io.h"
+#include "priv-io.h"
 #include "wait.h"
 
 
@@ -41,15 +42,12 @@
   gpgme_error_t err;
   struct tag *tag = (struct tag *) data;
   gpgme_ctx_t ctx;
-  struct wait_item_s *item;
 
   assert (data);
   ctx = tag->ctx;
   assert (ctx);
-  item = (struct wait_item_s *) ctx->fdt.fds[tag->idx].opaque;
-  assert (item);
 
-  err = (*item->handler) (item->handler_value, fd);
+  err = _gpgme_run_io_cb (&ctx->fdt.fds[tag->idx], 0);
   if (err)
     {
       unsigned int idx;
Index: libkdenetwork/libgpgme-copy/gpgme/ath.h
===================================================================
--- libkdenetwork/libgpgme-copy/gpgme/ath.h	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkdenetwork/libgpgme-copy/gpgme/ath.h	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,33 +1,46 @@
 /* ath.h - Interfaces for thread-safeness library.
-   Copyright (C) 2002, 2003 g10 Code GmbH
+   Copyright (C) 2002, 2003, 2004 g10 Code GmbH
 
    This file is part of GPGME.
  
    GPGME is free software; you can redistribute it and/or modify it
-   under the terms of the GNU General Public License as published by
-   the Free Software Foundation; either version 2 of the License, or
-   (at your option) any later version.
- 
+   under the terms of the GNU Lesser General Public License as
+   published by the Free Software Foundation; either version 2.1 of
+   the License, or (at your option) any later version.
+   
    GPGME is distributed in the hope that it will be useful, but
    WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
-   General Public License for more details.
- 
-   You should have received a copy of the GNU General Public License
-   along with GPGME; if not, write to the Free Software Foundation,
-   Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301, USA.  */
+   Lesser General Public License for more details.
+   
+   You should have received a copy of the GNU Lesser General Public
+   License along with this program; if not, write to the Free Software
+   Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
+   02111-1307, USA.  */
 
 #ifndef ATH_H
 #define ATH_H
 
-#ifdef HAVE_SYS_SELECT_H
-# include <sys/select.h>
-#else
-# include <sys/time.h>
-#endif
-#include <sys/types.h>
-#include <sys/socket.h>
+#ifdef HAVE_W32_SYSTEM
+  /* fixme: Check how we did it in libgcrypt.  */
+  struct msghdr { int dummy; };
+  typedef int socklen_t;
+# include <windows.h>
+# include <io.h>
 
+#else /*!HAVE_W32_SYSTEM*/
+
+# ifdef HAVE_SYS_SELECT_H
+#  include <sys/select.h>
+# else
+#  include <sys/time.h>
+# endif
+# include <sys/types.h>
+# include <sys/socket.h>
+
+#endif  /*!HAVE_W32_SYSTEM*/
+
+
 
 /* Define _ATH_EXT_SYM_PREFIX if you want to give all external symbols
    a prefix.  */
@@ -73,34 +86,4 @@
 int ath_sendmsg (int s, const struct msghdr *msg, int flags);
 int ath_recvmsg (int s, struct msghdr *msg, int flags);
 
-#define _ATH_COMPAT
-#ifdef _ATH_COMPAT
-struct ath_ops
-{
-  int (*mutex_init) (void **priv, int just_check);
-  int (*mutex_destroy) (void *priv);
-  int (*mutex_lock) (void *priv);
-  int (*mutex_unlock) (void *priv);
-  ssize_t (*read) (int fd, void *buf, size_t nbytes);
-  ssize_t (*write) (int fd, const void *buf, size_t nbytes);
-  ssize_t (*select) (int nfd, fd_set *rset, fd_set *wset, fd_set *eset,
-		     struct timeval *timeout);
-  ssize_t (*waitpid) (pid_t pid, int *status, int options);
-  int (*accept) (int s, struct sockaddr *addr, socklen_t *length_ptr);
-  int (*connect) (int s, const struct sockaddr *addr, socklen_t length);
-  int (*sendmsg) (int s, const struct msghdr *msg, int flags);
-  int (*recvmsg) (int s, struct msghdr *msg, int flags);
-};
-
-/* Initialize the any-thread package.  */
-#define ath_init _ATH_PREFIX(ath_init)
-void ath_init (void);
-
-/* Used by ath_pkg_init.  */
-#define ath_pthread_available _ATH_PREFIX(ath_pthread_available)
-struct ath_ops *ath_pthread_available (void);
-#define ath_pth_available _ATH_PREFIX(ath_pth_available)
-struct ath_ops *ath_pth_available (void);
-#endif
-
 #endif	/* ATH_H */
Index: libkdenetwork/libgpgme-copy/gpgme/export.c
===================================================================
--- libkdenetwork/libgpgme-copy/gpgme/export.c	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkdenetwork/libgpgme-copy/gpgme/export.c	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,22 +1,23 @@
 /* export.c - Export a key.
    Copyright (C) 2000 Werner Koch (dd9jn)
-   Copyright (C) 2001, 2002, 2003 g10 Code GmbH
+   Copyright (C) 2001, 2002, 2003, 2004 g10 Code GmbH
 
    This file is part of GPGME.
  
    GPGME is free software; you can redistribute it and/or modify it
-   under the terms of the GNU General Public License as published by
-   the Free Software Foundation; either version 2 of the License, or
-   (at your option) any later version.
- 
+   under the terms of the GNU Lesser General Public License as
+   published by the Free Software Foundation; either version 2.1 of
+   the License, or (at your option) any later version.
+   
    GPGME is distributed in the hope that it will be useful, but
    WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
-   General Public License for more details.
- 
-   You should have received a copy of the GNU General Public License
-   along with GPGME; if not, write to the Free Software Foundation,
-   Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301, USA.  */
+   Lesser General Public License for more details.
+   
+   You should have received a copy of the GNU Lesser General Public
+   License along with this program; if not, write to the Free Software
+   Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
+   02111-1307, USA.  */
 
 #if HAVE_CONFIG_H
 #include <config.h>
Index: libkdenetwork/libgpgme-copy/gpgme/util.h
===================================================================
--- libkdenetwork/libgpgme-copy/gpgme/util.h	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkdenetwork/libgpgme-copy/gpgme/util.h	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,22 +1,23 @@
 /* util.h 
    Copyright (C) 2000 Werner Koch (dd9jn)
-   Copyright (C) 2001, 2002, 2003 g10 Code GmbH
+   Copyright (C) 2001, 2002, 2003, 2004, 2005 g10 Code GmbH
 
    This file is part of GPGME.
  
    GPGME is free software; you can redistribute it and/or modify it
-   under the terms of the GNU General Public License as published by
-   the Free Software Foundation; either version 2 of the License, or
-   (at your option) any later version.
- 
+   under the terms of the GNU Lesser General Public License as
+   published by the Free Software Foundation; either version 2.1 of
+   the License, or (at your option) any later version.
+   
    GPGME is distributed in the hope that it will be useful, but
    WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
-   General Public License for more details.
- 
-   You should have received a copy of the GNU General Public License
-   along with GPGME; if not, write to the Free Software Foundation,
-   Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301, USA.  */
+   Lesser General Public License for more details.
+   
+   You should have received a copy of the GNU Lesser General Public
+   License along with this program; if not, write to the Free Software
+   Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
+   02111-1307, USA.  */
 
 #ifndef UTIL_H
 #define UTIL_H
@@ -30,20 +31,34 @@
 /*-- {posix,w32}-util.c --*/
 const char *_gpgme_get_gpg_path (void);
 const char *_gpgme_get_gpgsm_path (void);
+int _gpgme_get_conf_int (const char *key, int *value);
 
 
 /*-- replacement functions in <funcname>.c --*/
 #ifdef HAVE_CONFIG_H
+
 #ifndef HAVE_STPCPY
-char *stpcpy (char *a, const char *b);
-#endif
+static _GPGME_INLINE char *
+_gpgme_stpcpy (char *a, const char *b)
+{
+  while (*b)
+    *a++ = *b++;
+  *a = 0;
+  return a;
+}
+#define stpcpy(a,b) _gpgme_stpcpy ((a), (b))
+#endif /*!HAVE_STPCPY*/
 
 #if !HAVE_VASPRINTF
 #include <stdarg.h>
 int vasprintf (char **result, const char *format, va_list args);
 int asprintf (char **result, const char *format, ...);
 #endif
+
+#ifndef HAVE_TTYNAME_R
+int ttyname_r (int fd, char *buf, size_t buflen);
 #endif
+#endif
 
 
 /*-- conversion.c --*/
@@ -66,9 +81,10 @@
    large enough buffer is allocated with malloc and *DESTP is set to
    the result.  Currently, LEN is only used to specify if allocation
    is desired or not, the caller is expected to make sure that *DESTP
-   is large enough if LEN is not zero.  */
+   is large enough if LEN is not zero.  If BINARY is 1, then '\0'
+   characters are allowed in the output.  */
 gpgme_error_t _gpgme_decode_percent_string (const char *src, char **destp,
-					    size_t len);
+					    size_t len, int binary);
 
 
 /* Parse the string TIMESTAMP into a time_t.  The string may either be
Index: libkdenetwork/libgpgme-copy/gpgme/genkey.c
===================================================================
--- libkdenetwork/libgpgme-copy/gpgme/genkey.c	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkdenetwork/libgpgme-copy/gpgme/genkey.c	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,22 +1,23 @@
 /* genkey.c - Key generation.
    Copyright (C) 2000 Werner Koch (dd9jn)
-   Copyright (C) 2001, 2002, 2003 g10 Code GmbH
+   Copyright (C) 2001, 2002, 2003, 2004 g10 Code GmbH
 
    This file is part of GPGME.
  
    GPGME is free software; you can redistribute it and/or modify it
-   under the terms of the GNU General Public License as published by
-   the Free Software Foundation; either version 2 of the License, or
-   (at your option) any later version.
- 
+   under the terms of the GNU Lesser General Public License as
+   published by the Free Software Foundation; either version 2.1 of
+   the License, or (at your option) any later version.
+   
    GPGME is distributed in the hope that it will be useful, but
    WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
-   General Public License for more details.
- 
-   You should have received a copy of the GNU General Public License
-   along with GPGME; if not, write to the Free Software Foundation,
-   Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301, USA.  */
+   Lesser General Public License for more details.
+   
+   You should have received a copy of the GNU Lesser General Public
+   License along with this program; if not, write to the Free Software
+   Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
+   02111-1307, USA.  */
 
 #if HAVE_CONFIG_H
 #include <config.h>
@@ -141,7 +142,8 @@
 
   endtag = strstr (content, "</GnupgKeyParms>");
   /* FIXME: Check that there are no control statements inside.  */
-  while (*content == '\n')
+  while (content[0] == '\n'
+	 || (content[0] == '\r' && content[1] == '\n'))
     content++;
 
   return gpgme_data_new_from_mem (key_parameter, content,
Index: libkdenetwork/libgpgme-copy/gpgme/keylist.c
===================================================================
--- libkdenetwork/libgpgme-copy/gpgme/keylist.c	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkdenetwork/libgpgme-copy/gpgme/keylist.c	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,22 +1,23 @@
 /* keylist.c - Listing keys.
    Copyright (C) 2000 Werner Koch (dd9jn)
-   Copyright (C) 2001, 2002, 2003 g10 Code GmbH
+   Copyright (C) 2001, 2002, 2003, 2004, 2006 g10 Code GmbH
 
    This file is part of GPGME.
  
    GPGME is free software; you can redistribute it and/or modify it
-   under the terms of the GNU General Public License as published by
-   the Free Software Foundation; either version 2 of the License, or
-   (at your option) any later version.
- 
+   under the terms of the GNU Lesser General Public License as
+   published by the Free Software Foundation; either version 2.1 of
+   the License, or (at your option) any later version.
+   
    GPGME is distributed in the hope that it will be useful, but
    WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
-   General Public License for more details.
- 
-   You should have received a copy of the GNU General Public License
-   along with GPGME; if not, write to the Free Software Foundation,
-   Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301, USA.  */
+   Lesser General Public License for more details.
+   
+   You should have received a copy of the GNU Lesser General Public
+   License along with this program; if not, write to the Free Software
+   Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
+   02111-1307, USA.  */
 
 #if HAVE_CONFIG_H
 #include <config.h>
@@ -47,7 +48,13 @@
   struct _gpgme_op_keylist_result result;
 
   gpgme_key_t tmp_key;
+
+  /* This points to the last uid in tmp_key.  */
   gpgme_user_id_t tmp_uid;
+
+  /* This points to the last sig in tmp_uid.  */
+  gpgme_key_sig_t tmp_keysig;
+
   /* Something new is available.  */
   int key_cond;
   struct key_queue_item_s *key_queue;
@@ -62,8 +69,10 @@
 
   if (opd->tmp_key)
     gpgme_key_unref (opd->tmp_key);
-  if (opd->tmp_uid)
-    free (opd->tmp_uid);
+
+  /* opd->tmp_uid and opd->tmp_keysig are actually part of opd->tmp_key,
+     so we do not need to release them here.  */
+
   while (key)
     {
       struct key_queue_item_s *next = key->next;
@@ -167,7 +176,8 @@
 
 	case 'd':
           /* Note that gpg 1.3 won't print that anymore but only uses
-             the capabilities field. */
+             the capabilities field.  However, it is still used for
+             external key listings.  */
 	  key->disabled = 1;
 	  break;
 
@@ -243,6 +253,10 @@
 	  subkey->can_authenticate = 1;
 	  break;
 
+	case 'q':
+	  subkey->is_qualified = 1;
+	  break;
+
 	case 'd':
 	  subkey->disabled = 1;
 	  break;
@@ -291,6 +305,11 @@
 	case 'A':
 	  key->can_authenticate = 1;
 	  break;
+
+	case 'q':
+	case 'Q':
+	  key->is_qualified = 1;
+	  break;
         }
       src++;
     }
@@ -339,6 +358,7 @@
 
   opd->tmp_key = NULL;
   opd->tmp_uid = NULL;
+  opd->tmp_keysig = NULL;
 
   if (key)
     _gpgme_engine_io_event (ctx->engine, GPGME_EVENT_NEXT_KEY, key);
@@ -353,10 +373,10 @@
   enum
     {
       RT_NONE, RT_SIG, RT_UID, RT_SUB, RT_PUB, RT_FPR,
-      RT_SSB, RT_SEC, RT_CRT, RT_CRS, RT_REV
+      RT_SSB, RT_SEC, RT_CRT, RT_CRS, RT_REV, RT_SPK
     }
   rectype = RT_NONE;
-#define NR_FIELDS 13
+#define NR_FIELDS 16
   char *field[NR_FIELDS];
   int fields = 0;
   void *hook;
@@ -366,9 +386,6 @@
   gpgme_subkey_t subkey = NULL;
   gpgme_key_sig_t keysig = NULL;
 
-  DEBUG3 ("keylist_colon_handler ctx = %p, key = %p, line = %s\n",
-	  ctx, key, line ? line : "(null)");
-
   err = _gpgme_op_data_lookup (ctx, OPDATA_KEYLIST, &hook, -1, NULL);
   opd = hook;
   if (err)
@@ -376,6 +393,9 @@
 
   key = opd->tmp_key;
 
+  DEBUG3 ("keylist_colon_handler ctx = %p, key = %p, line = %s\n",
+	  ctx, key, line ? line : "(null)");
+
   if (!line)
     {
       /* End Of File.  */
@@ -411,6 +431,8 @@
     rectype = RT_SUB; 
   else if (!strcmp (field[0], "ssb") && key)
     rectype = RT_SSB;
+  else if (!strcmp (field[0], "spk") && key)
+    rectype = RT_SPK;
   else 
     rectype = RT_NONE;
 
@@ -420,6 +442,12 @@
   if (rectype != RT_SIG && rectype != RT_REV)
     opd->tmp_uid = NULL;
 
+  /* Only look at subpackets immediately following a signature.  For
+     this, clear the signature pointer when encountering anything but
+     a subpacket.  */
+  if (rectype != RT_SPK)
+    opd->tmp_keysig = NULL;
+
   switch (rectype)
     {
     case RT_PUB:
@@ -439,7 +467,7 @@
 	}
 
       if (rectype == RT_SEC || rectype == RT_CRS)
-	key->secret = 1;
+	key->secret = subkey->secret = 1;
       if (rectype == RT_CRT || rectype == RT_CRS)
 	key->protocol = GPGME_PROTOCOL_CMS;
       finish_key (ctx, opd);
@@ -466,8 +494,9 @@
 	    subkey->pubkey_algo = i;
 	}
 
-      /* Field 5 has the long keyid.  */
-      if (fields >= 5 && strlen (field[4]) == DIM(subkey->_keyid) - 1)
+      /* Field 5 has the long keyid.  Allow short key IDs for the
+	 output of an external keyserver listing.  */
+      if (fields >= 5 && strlen (field[4]) <= DIM(subkey->_keyid) - 1)
 	strcpy (subkey->_keyid, field[4]);
 
       /* Field 6 has the timestamp (seconds).  */
@@ -501,6 +530,13 @@
       /* Field 12 has the capabilities.  */
       if (fields >= 12)
 	set_mainkey_capability (key, field[11]);
+
+      /* Field 15 carries special flags of a secret key.  We reset the
+         SECRET flag of a subkey here if the key is actually only a
+         stub. The SECRET flag of the key will be true even then. */
+      if (fields >= 15 && key->secret)
+        if (*field[14] == '#')
+          subkey->secret = 0;
       break;
 
     case RT_SUB:
@@ -555,6 +591,11 @@
       /* Field 12 has the capabilities.  */
       if (fields >= 12)
 	set_subkey_capability (subkey, field[11]);
+
+      /* Field 15 carries special flags of a secret key. */
+      if (fields >= 15 && key->secret)
+        if (*field[14] == '#')
+          subkey->secret = 0;
       break;
 
     case RT_UID:
@@ -574,11 +615,17 @@
 
     case RT_FPR:
       /* Field 10 has the fingerprint (take only the first one).  */
-      if (fields >= 10 && !key->subkeys->fpr && field[9] && *field[9])
+      if (fields >= 10 && field[9] && *field[9])
 	{
-	  key->subkeys->fpr = strdup (field[9]);
-	  if (!key->subkeys->fpr)
-	    return gpg_error_from_errno (errno);
+          /* Need to apply it to the last subkey because all subkeys
+             do have fingerprints. */
+          subkey = key->_last_subkey;
+          if (!subkey->fpr)
+            {
+              subkey->fpr = strdup (field[9]);
+              if (!subkey->fpr)
+                return gpg_error_from_errno (errno);
+            }
 	}
 
       /* Field 13 has the gpgsm chain ID (take only the first one).  */
@@ -661,8 +708,51 @@
 	    if (field[10][2] == 'x')
 	      keysig->exportable = 1;
 	  }
+
+      opd->tmp_keysig = keysig;
       break;
 
+    case RT_SPK:
+      if (!opd->tmp_keysig)
+	return 0;
+      assert (opd->tmp_keysig == key->_last_uid->_last_keysig);
+
+      if (fields >= 4)
+	{
+	  /* Field 2 has the subpacket type.  */
+	  int type = atoi (field[1]);
+
+	  /* Field 3 has the flags.  */
+	  int flags = atoi (field[2]);
+
+	  /* Field 4 has the length.  */
+	  int len = atoi (field[3]);
+
+	  /* Field 5 has the data.  */
+	  char *data = field[4];
+
+	  /* Type 20: Notation data.  */
+	  /* Type 26: Policy URL.  */
+	  if (type == 20 || type == 26)
+	    {
+	      gpgme_sig_notation_t notation;
+
+	      keysig = opd->tmp_keysig;
+
+	      /* At this time, any error is serious.  */
+	      err = _gpgme_parse_notation (&notation, type, flags, len, data);
+	      if (err)
+		return err;
+
+	      /* Add a new notation.  FIXME: Could be factored out.  */
+	      if (!keysig->notations)
+		keysig->notations = notation;
+	      if (keysig->_last_notation)
+		keysig->_last_notation->next = notation;
+	      keysig->_last_notation = notation;
+	    }
+	}
+    
     case RT_NONE:
       /* Unknown record.  */
       break;
@@ -793,6 +883,8 @@
   opd = hook;
   if (err)
     return err;
+  if (opd == NULL)
+    return gpg_error (GPG_ERR_INV_VALUE);
 
   if (!opd->key_queue)
     {
@@ -841,7 +933,7 @@
   if (!ctx || !r_key || !fpr)
     return gpg_error (GPG_ERR_INV_VALUE);
   
-  if (strlen (fpr) < 16)	/* We have at least a key ID.  */
+  if (strlen (fpr) < 8)	/* We have at least a key ID.  */
     return gpg_error (GPG_ERR_INV_VALUE);
 
   /* FIXME: We use our own context because we have to avoid the user's
@@ -849,8 +941,22 @@
   err = gpgme_new (&listctx);
   if (err)
     return err;
-  gpgme_set_protocol (listctx, gpgme_get_protocol (ctx));
-  gpgme_set_keylist_mode (listctx, ctx->keylist_mode);
+  {
+    gpgme_protocol_t proto;
+    gpgme_engine_info_t info;
+
+    /* Clone the relevant state.  */
+    proto = gpgme_get_protocol (ctx);
+    gpgme_set_protocol (listctx, proto);
+    gpgme_set_keylist_mode (listctx, gpgme_get_keylist_mode (ctx));
+    info = gpgme_ctx_get_engine_info (ctx);
+    while (info && info->protocol != proto)
+      info = info->next;
+    if (info)
+      gpgme_ctx_set_engine_info (listctx, proto,
+				 info->file_name, info->home_dir);
+  }
+
   err = gpgme_op_keylist_start (listctx, fpr, secret);
   if (!err)
     err = gpgme_op_keylist_next (listctx, r_key);
Index: libkdenetwork/libgpgme-copy/gpgme/isascii.c
===================================================================
--- libkdenetwork/libgpgme-copy/gpgme/isascii.c	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkdenetwork/libgpgme-copy/gpgme/isascii.c	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,23 +1,22 @@
-/* isascii.c - Replacement for isascii.
- * Copyright (C) 2002 Free Software Foundation, Inc.
- *
- * This file is part of GnuPG.
- *
- * GnuPG is free software; you can redistribute it and/or modify
- * it under the terms of the GNU General Public License as published by
- * the Free Software Foundation; either version 2 of the License, or
- * (at your option) any later version.
- *
- * GnuPG is distributed in the hope that it will be useful,
- * but WITHOUT ANY WARRANTY; without even the implied warranty of
- * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
- * GNU General Public License for more details.
- *
- * You should have received a copy of the GNU General Public License
- * along with this program; if not, write to the Free Software
- * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301, USA
- */
+/* Copyright (C) 1991,92,93,95,96,97,98,99,2001,2002,2004
+        Free Software Foundation, Inc.
+   This file is part of the GNU C Library.
 
+   The GNU C Library is free software; you can redistribute it and/or
+   modify it under the terms of the GNU Lesser General Public
+   License as published by the Free Software Foundation; either
+   version 2.1 of the License, or (at your option) any later version.
+
+   The GNU C Library is distributed in the hope that it will be useful,
+   but WITHOUT ANY WARRANTY; without even the implied warranty of
+   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
+   Lesser General Public License for more details.
+
+   You should have received a copy of the GNU Lesser General Public
+   License along with the GNU C Library; if not, write to the Free
+   Software Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA
+   02111-1307 USA.  */
+
 #ifdef HAVE_CONFIG_H
 #include <config.h>
 #endif
Index: libkdenetwork/libgpgme-copy/gpgme/encrypt.c
===================================================================
--- libkdenetwork/libgpgme-copy/gpgme/encrypt.c	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkdenetwork/libgpgme-copy/gpgme/encrypt.c	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,22 +1,23 @@
 /* encrypt.c - Encrypt function.
    Copyright (C) 2000 Werner Koch (dd9jn)
-   Copyright (C) 2001, 2002, 2003 g10 Code GmbH
+   Copyright (C) 2001, 2002, 2003, 2004 g10 Code GmbH
 
    This file is part of GPGME.
  
    GPGME is free software; you can redistribute it and/or modify it
-   under the terms of the GNU General Public License as published by
-   the Free Software Foundation; either version 2 of the License, or
-   (at your option) any later version.
- 
+   under the terms of the GNU Lesser General Public License as
+   published by the Free Software Foundation; either version 2.1 of
+   the License, or (at your option) any later version.
+   
    GPGME is distributed in the hope that it will be useful, but
    WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
-   General Public License for more details.
- 
-   You should have received a copy of the GNU General Public License
-   along with GPGME; if not, write to the Free Software Foundation,
-   Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301, USA.  */
+   Lesser General Public License for more details.
+   
+   You should have received a copy of the GNU Lesser General Public
+   License along with this program; if not, write to the Free Software
+   Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
+   02111-1307, USA.  */
 
 #if HAVE_CONFIG_H
 #include <config.h>
Index: libkdenetwork/libgpgme-copy/gpgme/data-user.c
===================================================================
--- libkdenetwork/libgpgme-copy/gpgme/data-user.c	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkdenetwork/libgpgme-copy/gpgme/data-user.c	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,27 +1,29 @@
 /* data-user.c - A user callback based data object.
-   Copyright (C) 2002 g10 Code GmbH
+   Copyright (C) 2002, 2004 g10 Code GmbH
  
    This file is part of GPGME.
  
    GPGME is free software; you can redistribute it and/or modify it
-   under the terms of the GNU General Public License as published by
-   the Free Software Foundation; either version 2 of the License, or
-   (at your option) any later version.
- 
+   under the terms of the GNU Lesser General Public License as
+   published by the Free Software Foundation; either version 2.1 of
+   the License, or (at your option) any later version.
+   
    GPGME is distributed in the hope that it will be useful, but
    WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
-   General Public License for more details.
- 
-   You should have received a copy of the GNU General Public License
-   along with GPGME; if not, write to the Free Software Foundation,
-   Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301, USA.  */
+   Lesser General Public License for more details.
+   
+   You should have received a copy of the GNU Lesser General Public
+   License along with this program; if not, write to the Free Software
+   Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
+   02111-1307, USA.  */
 
 #if HAVE_CONFIG_H
 #include <config.h>
 #endif
 
 #include <sys/types.h>
+#include <errno.h>
 
 #include "data.h"
 
@@ -29,6 +31,9 @@
 static ssize_t
 user_read (gpgme_data_t dh, void *buffer, size_t size)
 {
+  if (!dh->data.user.cbs->read)
+    return EBADF;
+
   return (*dh->data.user.cbs->read) (dh->data.user.handle, buffer, size);
 }
 
@@ -36,6 +41,9 @@
 static ssize_t
 user_write (gpgme_data_t dh, const void *buffer, size_t size)
 {
+  if (!dh->data.user.cbs->write)
+    return EBADF;
+
   return (*dh->data.user.cbs->write) (dh->data.user.handle, buffer, size);
 }
 
@@ -43,6 +51,9 @@
 static off_t
 user_seek (gpgme_data_t dh, off_t offset, int whence)
 {
+  if (!dh->data.user.cbs->seek)
+    return EBADF;
+
   return (*dh->data.user.cbs->seek) (dh->data.user.handle, offset, whence);
 }
 
@@ -50,7 +61,8 @@
 static void
 user_release (gpgme_data_t dh)
 {
-  (*dh->data.user.cbs->release) (dh->data.user.handle);
+  if (dh->data.user.cbs->release)
+    (*dh->data.user.cbs->release) (dh->data.user.handle);
 }
 
 
@@ -59,7 +71,8 @@
     user_read,
     user_write,
     user_seek,
-    user_release
+    user_release,
+    NULL
   };
 
 
Index: libkdenetwork/libgpgme-copy/gpgme/conversion.c
===================================================================
--- libkdenetwork/libgpgme-copy/gpgme/conversion.c	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkdenetwork/libgpgme-copy/gpgme/conversion.c	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,22 +1,23 @@
 /* conversion.c - String conversion helper functions.
    Copyright (C) 2000 Werner Koch (dd9jn)
-   Copyright (C) 2001, 2002, 2003 g10 Code GmbH
+   Copyright (C) 2001, 2002, 2003, 2004 g10 Code GmbH
  
    This file is part of GPGME.
 
    GPGME is free software; you can redistribute it and/or modify it
-   under the terms of the GNU General Public License as published by
-   the Free Software Foundation; either version 2 of the License, or
-   (at your option) any later version.
- 
+   under the terms of the GNU Lesser General Public License as
+   published by the Free Software Foundation; either version 2.1 of
+   the License, or (at your option) any later version.
+   
    GPGME is distributed in the hope that it will be useful, but
    WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
-   General Public License for more details.
- 
-   You should have received a copy of the GNU General Public License
-   along with GPGME; if not, write to the Free Software Foundation,
-   Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301, USA.  */
+   Lesser General Public License for more details.
+   
+   You should have received a copy of the GNU Lesser General Public
+   License along with this program; if not, write to the Free Software
+   Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
+   02111-1307, USA.  */
 
 #if HAVE_CONFIG_H
 #include <config.h>
@@ -173,9 +174,11 @@
    large enough buffer is allocated with malloc and *DESTP is set to
    the result.  Currently, LEN is only used to specify if allocation
    is desired or not, the caller is expected to make sure that *DESTP
-   is large enough if LEN is not zero.  */
+   is large enough if LEN is not zero.  If BINARY is 1, then '\0'
+   characters are allowed in the output.  */
 gpgme_error_t
-_gpgme_decode_percent_string (const char *src, char **destp, size_t len)
+_gpgme_decode_percent_string (const char *src, char **destp, size_t len,
+			      int binary)
 {
   char *dest;
 
@@ -221,7 +224,7 @@
 	    }
 	  else
 	    {
-	      if (!val)
+	      if (!val && !binary)
 		{
 		  /* A binary zero is not representable in a C
 		     string.  */
Index: libkdenetwork/libgpgme-copy/gpgme/debug.c
===================================================================
--- libkdenetwork/libgpgme-copy/gpgme/debug.c	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkdenetwork/libgpgme-copy/gpgme/debug.c	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,22 +1,23 @@
 /* debug.c - helpful output in desperate situations
    Copyright (C) 2000 Werner Koch (dd9jn)
-   Copyright (C) 2001, 2002, 2003 g10 Code GmbH
+   Copyright (C) 2001, 2002, 2003, 2004, 2005 g10 Code GmbH
  
    This file is part of GPGME.
 
    GPGME is free software; you can redistribute it and/or modify it
-   under the terms of the GNU General Public License as published by
-   the Free Software Foundation; either version 2 of the License, or
-   (at your option) any later version.
- 
+   under the terms of the GNU Lesser General Public License as
+   published by the Free Software Foundation; either version 2.1 of
+   the License, or (at your option) any later version.
+   
    GPGME is distributed in the hope that it will be useful, but
    WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
-   General Public License for more details.
- 
-   You should have received a copy of the GNU General Public License
-   along with GPGME; if not, write to the Free Software Foundation,
-   Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301, USA.  */
+   Lesser General Public License for more details.
+   
+   You should have received a copy of the GNU Lesser General Public
+   License along with this program; if not, write to the Free Software
+   Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
+   02111-1307, USA.  */
 
 #if HAVE_CONFIG_H
 #include <config.h>
@@ -100,7 +101,7 @@
       if (e)
 	{
 	  debug_level = atoi (e);
-	  s1 = strchr (e, ':');
+	  s1 = strchr (e, PATHSEP_C);
 	  if (s1)
 	    {
 #ifndef HAVE_DOSISH_SYSTEM
@@ -111,7 +112,7 @@
 		  FILE *fp;
 
 		  s1++;
-		  if (!(s2 = strchr (s1, ':')))
+		  if (!(s2 = strchr (s1, PATHSEP_C)))
 		    s2 = s1 + strlen (s1);
 		  p = malloc (s2 - s1 + 1);
 		  if (p)
Index: libkdenetwork/libgpgme-copy/gpgme/error.c
===================================================================
--- libkdenetwork/libgpgme-copy/gpgme/error.c	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkdenetwork/libgpgme-copy/gpgme/error.c	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,21 +1,22 @@
 /* error.c - Error handling for GPGME.
-   Copyright (C) 2003 g10 Code GmbH
+   Copyright (C) 2003, 2004 g10 Code GmbH
 
    This file is part of GPGME.
  
    GPGME is free software; you can redistribute it and/or modify it
-   under the terms of the GNU General Public License as published by
-   the Free Software Foundation; either version 2 of the License, or
-   (at your option) any later version.
- 
+   under the terms of the GNU Lesser General Public License as
+   published by the Free Software Foundation; either version 2.1 of
+   the License, or (at your option) any later version.
+   
    GPGME is distributed in the hope that it will be useful, but
    WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
-   General Public License for more details.
- 
-   You should have received a copy of the GNU General Public License
-   along with GPGME; if not, write to the Free Software Foundation,
-   Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301, USA.  */
+   Lesser General Public License for more details.
+   
+   You should have received a copy of the GNU Lesser General Public
+   License along with this program; if not, write to the Free Software
+   Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
+   02111-1307, USA.  */
 
 #if HAVE_CONFIG_H
 #include <config.h>
Index: libkdenetwork/libgpgme-copy/gpgme/debug.h
===================================================================
--- libkdenetwork/libgpgme-copy/gpgme/debug.h	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkdenetwork/libgpgme-copy/gpgme/debug.h	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,26 +1,39 @@
 /* debug.h - interface to debugging functions
- *      Copyright (C) 2002 g10 Code GmbH
- *
- * This file is part of GPGME.
- *
- * GPGME is free software; you can redistribute it and/or modify
- * it under the terms of the GNU General Public License as published by
- * the Free Software Foundation; either version 2 of the License, or
- * (at your option) any later version.
- *
- * GPGME is distributed in the hope that it will be useful,
- * but WITHOUT ANY WARRANTY; without even the implied warranty of
- * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
- * GNU General Public License for more details.
- *
- * You should have received a copy of the GNU General Public License
- * along with this program; if not, write to the Free Software
- * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301, USA
- */
+   Copyright (C) 2002, 2004, 2005 g10 Code GmbH
+ 
+   This file is part of GPGME.
 
+   GPGME is free software; you can redistribute it and/or modify it
+   under the terms of the GNU Lesser General Public License as
+   published by the Free Software Foundation; either version 2.1 of
+   the License, or (at your option) any later version.
+   
+   GPGME is distributed in the hope that it will be useful, but
+   WITHOUT ANY WARRANTY; without even the implied warranty of
+   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
+   Lesser General Public License for more details.
+   
+   You should have received a copy of the GNU Lesser General Public
+   License along with this program; if not, write to the Free Software
+   Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
+   02111-1307, USA.  */
+
 #ifndef DEBUG_H
 #define DEBUG_H
 
+#include <string.h>
+
+/* Remove path components from filenames (i.e. __FILE__) for cleaner
+   logs. */
+static __inline__ const char *_gpgme_debug_srcname (const char *file);
+
+static __inline__ const char *
+_gpgme_debug_srcname (const char *file)
+{
+  const char *s = strrchr (file, '/');
+  return s? s+1:file;
+}
+
 /* Log the formatted string FORMAT at debug level LEVEL or higher.  */
 void _gpgme_debug (int level, const char *format, ...);
 
@@ -76,22 +89,26 @@
 #else
 /* This finally works everywhere, horror.  */
 #define DEBUG0(fmt) \
-  _gpgme_debug (1, "%s:%s: " fmt, __FILE__, XSTRINGIFY (__LINE__))
+  _gpgme_debug (1, "%s:%s: " fmt, _gpgme_debug_srcname (__FILE__), \
+                XSTRINGIFY (__LINE__))
 #define DEBUG1(fmt,a) \
-  _gpgme_debug (1, "%s:%s: " fmt, __FILE__, XSTRINGIFY (__LINE__), (a))
+  _gpgme_debug (1, "%s:%s: " fmt, _gpgme_debug_srcname (__FILE__), \
+                XSTRINGIFY (__LINE__), (a))
 #define DEBUG2(fmt,a,b) \
-  _gpgme_debug (1, "%s:%s: " fmt, __FILE__, XSTRINGIFY (__LINE__), (a), (b))
+  _gpgme_debug (1, "%s:%s: " fmt, _gpgme_debug_srcname (__FILE__), \
+                XSTRINGIFY (__LINE__), (a), (b))
 #define DEBUG3(fmt,a,b,c) \
-  _gpgme_debug (1, "%s:%s: " fmt, __FILE__, XSTRINGIFY (__LINE__), (a), (b), \
-		(c))
+  _gpgme_debug (1, "%s:%s: " fmt, _gpgme_debug_srcname (__FILE__), \
+                XSTRINGIFY (__LINE__), (a), (b), (c))
 #define DEBUG4(fmt,a,b,c,d) \
-  _gpgme_debug (1, "%s:%s: " fmt, __FILE__, XSTRINGIFY (__LINE__), (a), (b), \
-		(c), (d))
+  _gpgme_debug (1, "%s:%s: " fmt, _gpgme_debug_srcname (__FILE__), \
+                XSTRINGIFY (__LINE__), (a), (b), (c), (d))
 #define DEBUG5(fmt,a,b,c,d,e) \
-  _gpgme_debug (1, "%s:%s: " fmt, __FILE__, XSTRINGIFY (__LINE__), (a), (b), \
-		(c), (d), (e))
+  _gpgme_debug (1, "%s:%s: " fmt, _gpgme_debug_srcname (__FILE__), \
+                XSTRINGIFY (__LINE__), (a), (b), (c), (d), (e))
 #define DEBUG_BEGIN(hlp,lvl,fmt) \
-  _gpgme_debug_begin (&(hlp), lvl, "%s:%s: " fmt, __FILE__, XSTRINGIFY (__LINE__))
+  _gpgme_debug_begin (&(hlp), lvl, "%s:%s: " fmt, \
+                      _gpgme_debug_srcname (__FILE__), XSTRINGIFY (__LINE__))
 #define DEBUG_ADD0(hlp,fmt) \
   _gpgme_debug_add (&(hlp), fmt)
 #define DEBUG_ADD1(hlp,fmt,a) \
Index: libkdenetwork/libgpgme-copy/gpgme/memrchr.c
===================================================================
--- libkdenetwork/libgpgme-copy/gpgme/memrchr.c	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkdenetwork/libgpgme-copy/gpgme/memrchr.c	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,39 +1,210 @@
-/* memrchr.c - Replacement for memrchr.
- * Copyright (C) 2002, 2004 Free Software Foundation, Inc.
- *
- * This file is part of GnuPG.
- *
- * GnuPG is free software; you can redistribute it and/or modify
- * it under the terms of the GNU General Public License as published by
- * the Free Software Foundation; either version 2 of the License, or
- * (at your option) any later version.
- *
- * GnuPG is distributed in the hope that it will be useful,
- * but WITHOUT ANY WARRANTY; without even the implied warranty of
- * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
- * GNU General Public License for more details.
- *
- * You should have received a copy of the GNU General Public License
- * along with this program; if not, write to the Free Software
- * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301, USA
- */
+/* memrchr -- find the last occurrence of a byte in a memory block
+   Copyright (C) 1991, 93, 96, 97, 99, 2000 Free Software Foundation, Inc.
+   This file is part of the GNU C Library.
+   Based on strlen implementation by Torbjorn Granlund (tege@sics.se),
+   with help from Dan Sahlin (dan@sics.se) and
+   commentary by Jim Blandy (jimb@ai.mit.edu);
+   adaptation to memchr suggested by Dick Karpinski (dick@cca.ucsf.edu),
+   and implemented by Roland McGrath (roland@ai.mit.edu).
 
+   The GNU C Library is free software; you can redistribute it and/or
+   modify it under the terms of the GNU Lesser General Public
+   License as published by the Free Software Foundation; either
+   version 2.1 of the License, or (at your option) any later version.
+
+   The GNU C Library is distributed in the hope that it will be useful,
+   but WITHOUT ANY WARRANTY; without even the implied warranty of
+   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
+   Lesser General Public License for more details.
+
+   You should have received a copy of the GNU Lesser General Public
+   License along with the GNU C Library; if not, write to the Free
+   Software Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA
+   02111-1307 USA.  */
+
+#include <stdlib.h>
+
 #ifdef HAVE_CONFIG_H
-#include <config.h>
+# include <config.h>
 #endif
 
-#include <string.h>
+#undef __ptr_t
+#if defined __cplusplus || (defined __STDC__ && __STDC__)
+# define __ptr_t void *
+#else /* Not C++ or ANSI C.  */
+# define __ptr_t char *
+#endif /* C++ or ANSI C.  */
 
-void *
-memrchr (const void *block, int c, size_t size)
+#if defined _LIBC
+# include <string.h>
+# include <memcopy.h>
+#else
+# define reg_char char
+#endif
+
+#if defined HAVE_LIMITS_H || defined _LIBC
+# include <limits.h>
+#endif
+
+#define LONG_MAX_32_BITS 2147483647
+
+#ifndef LONG_MAX
+# define LONG_MAX LONG_MAX_32_BITS
+#endif
+
+#include <sys/types.h>
+
+#undef __memrchr
+#undef memrchr
+
+#ifndef weak_alias
+# define __memrchr memrchr
+#endif
+
+/* Search no more than N bytes of S for C.  */
+__ptr_t
+__memrchr (s, c_in, n)
+     const __ptr_t s;
+     int c_in;
+     size_t n;
 {
-  const unsigned char *p = block;
+  const unsigned char *char_ptr;
+  const unsigned long int *longword_ptr;
+  unsigned long int longword, magic_bits, charmask;
+  unsigned reg_char c;
 
-  if (size)
+  c = (unsigned char) c_in;
+
+  /* Handle the last few characters by reading one character at a time.
+     Do this until CHAR_PTR is aligned on a longword boundary.  */
+  for (char_ptr = (const unsigned char *) s + n;
+       n > 0 && ((unsigned long int) char_ptr
+		 & (sizeof (longword) - 1)) != 0;
+       --n)
+    if (*--char_ptr == c)
+      return (__ptr_t) char_ptr;
+
+  /* All these elucidatory comments refer to 4-byte longwords,
+     but the theory applies equally well to 8-byte longwords.  */
+
+  longword_ptr = (const unsigned long int *) char_ptr;
+
+  /* Bits 31, 24, 16, and 8 of this number are zero.  Call these bits
+     the "holes."  Note that there is a hole just to the left of
+     each byte, with an extra at the end:
+
+     bits:  01111110 11111110 11111110 11111111
+     bytes: AAAAAAAA BBBBBBBB CCCCCCCC DDDDDDDD
+
+     The 1-bits make sure that carries propagate to the next 0-bit.
+     The 0-bits provide holes for carries to fall into.  */
+
+  if (sizeof (longword) != 4 && sizeof (longword) != 8)
+    abort ();
+
+#if LONG_MAX <= LONG_MAX_32_BITS
+  magic_bits = 0x7efefeff;
+#else
+  magic_bits = ((unsigned long int) 0x7efefefe << 32) | 0xfefefeff;
+#endif
+
+  /* Set up a longword, each of whose bytes is C.  */
+  charmask = c | (c << 8);
+  charmask |= charmask << 16;
+#if LONG_MAX > LONG_MAX_32_BITS
+  charmask |= charmask << 32;
+#endif
+
+  /* Instead of the traditional loop which tests each character,
+     we will test a longword at a time.  The tricky part is testing
+     if *any of the four* bytes in the longword in question are zero.  */
+  while (n >= sizeof (longword))
     {
-      for (p += size - 1; size; p--, size--)
-        if (*p == c)
-          return (void *)p;
+      /* We tentatively exit the loop if adding MAGIC_BITS to
+	 LONGWORD fails to change any of the hole bits of LONGWORD.
+
+	 1) Is this safe?  Will it catch all the zero bytes?
+	 Suppose there is a byte with all zeros.  Any carry bits
+	 propagating from its left will fall into the hole at its
+	 least significant bit and stop.  Since there will be no
+	 carry from its most significant bit, the LSB of the
+	 byte to the left will be unchanged, and the zero will be
+	 detected.
+
+	 2) Is this worthwhile?  Will it ignore everything except
+	 zero bytes?  Suppose every byte of LONGWORD has a bit set
+	 somewhere.  There will be a carry into bit 8.  If bit 8
+	 is set, this will carry into bit 16.  If bit 8 is clear,
+	 one of bits 9-15 must be set, so there will be a carry
+	 into bit 16.  Similarly, there will be a carry into bit
+	 24.  If one of bits 24-30 is set, there will be a carry
+	 into bit 31, so all of the hole bits will be changed.
+
+	 The one misfire occurs when bits 24-30 are clear and bit
+	 31 is set; in this case, the hole at bit 31 is not
+	 changed.  If we had access to the processor carry flag,
+	 we could close this loophole by putting the fourth hole
+	 at bit 32!
+
+	 So it ignores everything except 128's, when they're aligned
+	 properly.
+
+	 3) But wait!  Aren't we looking for C, not zero?
+	 Good point.  So what we do is XOR LONGWORD with a longword,
+	 each of whose bytes is C.  This turns each byte that is C
+	 into a zero.  */
+
+      longword = *--longword_ptr ^ charmask;
+
+      /* Add MAGIC_BITS to LONGWORD.  */
+      if ((((longword + magic_bits)
+
+	    /* Set those bits that were unchanged by the addition.  */
+	    ^ ~longword)
+
+	   /* Look at only the hole bits.  If any of the hole bits
+	      are unchanged, most likely one of the bytes was a
+	      zero.  */
+	   & ~magic_bits) != 0)
+	{
+	  /* Which of the bytes was C?  If none of them were, it was
+	     a misfire; continue the search.  */
+
+	  const unsigned char *cp = (const unsigned char *) longword_ptr;
+
+#if LONG_MAX > 2147483647
+	  if (cp[7] == c)
+	    return (__ptr_t) &cp[7];
+	  if (cp[6] == c)
+	    return (__ptr_t) &cp[6];
+	  if (cp[5] == c)
+	    return (__ptr_t) &cp[5];
+	  if (cp[4] == c)
+	    return (__ptr_t) &cp[4];
+#endif
+	  if (cp[3] == c)
+	    return (__ptr_t) &cp[3];
+	  if (cp[2] == c)
+	    return (__ptr_t) &cp[2];
+	  if (cp[1] == c)
+	    return (__ptr_t) &cp[1];
+	  if (cp[0] == c)
+	    return (__ptr_t) cp;
+	}
+
+      n -= sizeof (longword);
     }
-  return NULL;
+
+  char_ptr = (const unsigned char *) longword_ptr;
+
+  while (n-- > 0)
+    {
+      if (*--char_ptr == c)
+	return (__ptr_t) char_ptr;
+    }
+
+  return 0;
 }
+#ifdef weak_alias
+weak_alias (__memrchr, memrchr)
+#endif
Index: libkdenetwork/libgpgme-copy/gpgme/data-fd.c
===================================================================
--- libkdenetwork/libgpgme-copy/gpgme/data-fd.c	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkdenetwork/libgpgme-copy/gpgme/data-fd.c	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,21 +1,22 @@
 /* data-fd.c - A file descripor based data object.
-   Copyright (C) 2002 g10 Code GmbH
+   Copyright (C) 2002, 2004 g10 Code GmbH
  
    This file is part of GPGME.
  
    GPGME is free software; you can redistribute it and/or modify it
-   under the terms of the GNU General Public License as published by
-   the Free Software Foundation; either version 2 of the License, or
-   (at your option) any later version.
- 
+   under the terms of the GNU Lesser General Public License as
+   published by the Free Software Foundation; either version 2.1 of
+   the License, or (at your option) any later version.
+   
    GPGME is distributed in the hope that it will be useful, but
    WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
-   General Public License for more details.
- 
-   You should have received a copy of the GNU General Public License
-   along with GPGME; if not, write to the Free Software Foundation,
-   Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301, USA.  */
+   Lesser General Public License for more details.
+   
+   You should have received a copy of the GNU Lesser General Public
+   License along with this program; if not, write to the Free Software
+   Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
+   02111-1307, USA.  */
 
 #if HAVE_CONFIG_H
 #include <config.h>
@@ -48,12 +49,20 @@
 }
 
 
+static int
+fd_get_fd (gpgme_data_t dh)
+{
+  return (dh->data.fd);
+}
+
+
 static struct _gpgme_data_cbs fd_cbs =
   {
     fd_read,
     fd_write,
     fd_seek,
-    NULL
+    NULL,
+    fd_get_fd
   };
 
 
Index: libkdenetwork/libgpgme-copy/gpgme/data-stream.c
===================================================================
--- libkdenetwork/libgpgme-copy/gpgme/data-stream.c	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkdenetwork/libgpgme-copy/gpgme/data-stream.c	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -4,18 +4,19 @@
    This file is part of GPGME.
  
    GPGME is free software; you can redistribute it and/or modify it
-   under the terms of the GNU General Public License as published by
-   the Free Software Foundation; either version 2 of the License, or
-   (at your option) any later version.
- 
+   under the terms of the GNU Lesser General Public License as
+   published by the Free Software Foundation; either version 2.1 of
+   the License, or (at your option) any later version.
+   
    GPGME is distributed in the hope that it will be useful, but
    WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
-   General Public License for more details.
- 
-   You should have received a copy of the GNU General Public License
-   along with GPGME; if not, write to the Free Software Foundation,
-   Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301, USA.  */
+   Lesser General Public License for more details.
+   
+   You should have received a copy of the GNU Lesser General Public
+   License along with this program; if not, write to the Free Software
+   Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
+   02111-1307, USA.  */
 
 #if HAVE_CONFIG_H
 #include <config.h>
@@ -50,21 +51,41 @@
 static off_t
 stream_seek (gpgme_data_t dh, off_t offset, int whence)
 {
+  int err;
+
 #ifdef HAVE_FSEEKO
-  return fseeko (dh->data.stream, offset, whence);
+  err = fseeko (dh->data.stream, offset, whence);
 #else
   /* FIXME: Check for overflow, or at least bail at compilation.  */
-  return fseek (dh->data.stream, offset, whence);
+  err = fseek (dh->data.stream, offset, whence);
 #endif
+
+  if (err)
+    return -1;
+
+#ifdef HAVE_FSEEKO
+  return ftello (dh->data.stream);
+#else
+  return ftell (dh->data.stream);
+#endif
 }
 
 
+static int
+stream_get_fd (gpgme_data_t dh)
+{
+  fflush (dh->data.stream);
+  return fileno (dh->data.stream);
+}
+
+
 static struct _gpgme_data_cbs stream_cbs =
   {
     stream_read,
     stream_write,
     stream_seek,
-    NULL
+    NULL,
+    stream_get_fd
   };
 
 
Index: libkdenetwork/libgpgme-copy/gpgme/wait-global.c
===================================================================
--- libkdenetwork/libgpgme-copy/gpgme/wait-global.c	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkdenetwork/libgpgme-copy/gpgme/wait-global.c	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,22 +1,23 @@
 /* wait-global.c 
    Copyright (C) 2000 Werner Koch (dd9jn)
-   Copyright (C) 2001, 2002, 2003 g10 Code GmbH
+   Copyright (C) 2001, 2002, 2003, 2004, 2005 g10 Code GmbH
  
    This file is part of GPGME.
  
    GPGME is free software; you can redistribute it and/or modify it
-   under the terms of the GNU General Public License as published by
-   the Free Software Foundation; either version 2 of the License, or
-   (at your option) any later version.
- 
+   under the terms of the GNU Lesser General Public License as
+   published by the Free Software Foundation; either version 2.1 of
+   the License, or (at your option) any later version.
+   
    GPGME is distributed in the hope that it will be useful, but
    WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
-   General Public License for more details.
- 
-   You should have received a copy of the GNU General Public License
-   along with GPGME; if not, write to the Free Software Foundation,
-   Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301, USA.  */
+   Lesser General Public License for more details.
+   
+   You should have received a copy of the GNU Lesser General Public
+   License along with this program; if not, write to the Free Software
+   Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
+   02111-1307, USA.  */
 
 #if HAVE_CONFIG_H
 #include <config.h>
@@ -31,7 +32,7 @@
 #include "util.h"
 #include "context.h"
 #include "wait.h"
-#include "io.h"
+#include "priv-io.h"
 
 /* The global event loop is used for all asynchronous operations
    (except key listing) for which no user I/O callbacks are specified.
@@ -200,7 +201,7 @@
 
 	if (err)
 	  {
-	    /* An error occurred.  Close all fds in this context, and
+	    /* An error occured.  Close all fds in this context, and
 	       send the error in a done event.  */
 	    unsigned int idx;
 	    
@@ -309,10 +310,10 @@
 	      ictx = item->ctx;
 	      assert (ictx);
 
-	      err = item->handler (item->handler_value, fdt.fds[i].fd);
+	      err = _gpgme_run_io_cb (&fdt.fds[i], 0);
 	      if (err)
 		{
-		  /* An error occurred.  Close all fds in this context,
+		  /* An error occured.  Close all fds in this context,
 		     and signal it.  */
 		  unsigned int idx;
 	    
@@ -321,6 +322,11 @@
 		      _gpgme_io_close (ictx->fdt.fds[idx].fd);
 		  _gpgme_engine_io_event (ictx->engine, GPGME_EVENT_DONE,
 					  &err);
+
+		  /* Break out of the loop, and retry the select()
+		     from scratch, because now all fds should be
+		     gone.  */
+		  break;
 		}
 	    }
 	}
@@ -328,15 +334,30 @@
 
       /* Now some contexts might have finished successfully.  */
       LOCK (ctx_list_lock);
+    retry:
       for (li = ctx_active_list; li; li = li->next)
 	{
-	  for (i = 0; i < ctx->fdt.size; i++)
-	    if (ctx->fdt.fds[i].fd != -1)
+	  gpgme_ctx_t actx = li->ctx;
+
+	  for (i = 0; i < actx->fdt.size; i++)
+	    if (actx->fdt.fds[i].fd != -1)
 	      break;
-	  if (i == ctx->fdt.size)
+	  if (i == actx->fdt.size)
 	    {
 	      gpgme_error_t err = 0;
-	      _gpgme_engine_io_event (ctx->engine, GPGME_EVENT_DONE, &err);
+
+	      /* FIXME: This does not perform too well.  We have to
+		 release the lock because the I/O event handler
+		 acquires it to remove the context from the active
+		 list.  Two alternative strategies are worth
+		 considering: Either implement the DONE event handler
+		 here in a lock-free manner, or save a list of all
+		 contexts to be released and call the DONE events
+		 afterwards.  */
+	      UNLOCK (ctx_list_lock);
+	      _gpgme_engine_io_event (actx->engine, GPGME_EVENT_DONE, &err);
+	      LOCK (ctx_list_lock);
+	      goto retry;
 	    }
 	}
       UNLOCK (ctx_list_lock);
@@ -349,6 +370,12 @@
 	    ctx = dctx;
 	    hang = 0;
 	  }
+	else if (!hang)
+	  {
+	    ctx = NULL;
+	    if (status)
+	      *status = 0;
+	  }
       }
     }
   while (hang);
Index: libkdenetwork/libgpgme-copy/gpgme/verify.c
===================================================================
--- libkdenetwork/libgpgme-copy/gpgme/verify.c	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkdenetwork/libgpgme-copy/gpgme/verify.c	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,22 +1,23 @@
 /* verify.c - Signature verification.
    Copyright (C) 2000 Werner Koch (dd9jn)
-   Copyright (C) 2001, 2002, 2003, 2004 g10 Code GmbH
+   Copyright (C) 2001, 2002, 2003, 2004, 2005 g10 Code GmbH
 
    This file is part of GPGME.
  
    GPGME is free software; you can redistribute it and/or modify it
-   under the terms of the GNU General Public License as published by
-   the Free Software Foundation; either version 2 of the License, or
-   (at your option) any later version.
- 
+   under the terms of the GNU Lesser General Public License as
+   published by the Free Software Foundation; either version 2.1 of
+   the License, or (at your option) any later version.
+   
    GPGME is distributed in the hope that it will be useful, but
    WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
-   General Public License for more details.
- 
-   You should have received a copy of the GNU General Public License
-   along with GPGME; if not, write to the Free Software Foundation,
-   Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301, USA.  */
+   Lesser General Public License for more details.
+   
+   You should have received a copy of the GNU Lesser General Public
+   License along with this program; if not, write to the Free Software
+   Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
+   02111-1307, USA.  */
 
 #if HAVE_CONFIG_H
 #include <config.h>
@@ -39,6 +40,7 @@
   gpgme_signature_t current_sig;
   int did_prepare_new_sig;
   int only_newsig_seen;
+  int plaintext_seen;
 } *op_data_t;
 
 
@@ -57,18 +59,20 @@
 	{
 	  gpgme_sig_notation_t next_nota = notation->next;
 
-	  if (notation->name)
-	    free (notation->name);
-	  if (notation->value)
-	    free (notation->value);
+	  _gpgme_sig_notation_free (notation);
 	  notation = next_nota;
 	}
 
       if (sig->fpr)
 	free (sig->fpr);
+      if (sig->pka_address)
+	free (sig->pka_address);
       free (sig);
       sig = next;
     }
+
+  if (opd->result.file_name)
+    free (opd->result.file_name);
 }
 
 
@@ -93,7 +97,8 @@
 calc_sig_summary (gpgme_signature_t sig)
 {
   unsigned long sum = 0;
-
+  
+  /* Calculate the red/green flag.  */
   if (sig->validity == GPGME_VALIDITY_FULL
       || sig->validity == GPGME_VALIDITY_ULTIMATE)
     {
@@ -111,7 +116,8 @@
     }
   else if (gpg_err_code (sig->status) == GPG_ERR_BAD_SIGNATURE)
     sum |= GPGME_SIGSUM_RED;
-  
+
+
   /* FIXME: handle the case when key and message are expired. */
   switch (gpg_err_code (sig->status))
     {
@@ -136,6 +142,23 @@
       break;
     }
   
+  /* Now look at the certain reason codes.  */
+  switch (gpg_err_code (sig->validity_reason))
+    {
+    case GPG_ERR_CRL_TOO_OLD:
+      if (sig->validity == GPGME_VALIDITY_UNKNOWN)
+        sum |= GPGME_SIGSUM_CRL_TOO_OLD;
+      break;
+        
+    case GPG_ERR_CERT_REVOKED:
+      sum |= GPGME_SIGSUM_KEY_REVOKED;
+      break;
+
+    default:
+      break;
+    }
+
+  /* Check other flags. */
   if (sig->wrong_key_usage)
     sum |= GPGME_SIGSUM_BAD_POLICY;
   
@@ -183,6 +206,7 @@
 {
   gpgme_signature_t sig;
   char *end = strchr (args, ' ');
+  char *tail;
 
   if (end)
     {
@@ -228,39 +252,70 @@
       break;
 
     case GPGME_STATUS_ERRSIG:
-      if (end)
+      /* Parse the pubkey algo.  */
+      if (!end)
+	goto parse_err_sig_fail;
+      errno = 0;
+      sig->pubkey_algo = strtol (end, &tail, 0);
+      if (errno || end == tail || *tail != ' ')
+	goto parse_err_sig_fail;
+      end = tail;
+      while (*end == ' ')
+	end++;
+     
+      /* Parse the hash algo.  */
+      if (!*end)
+	goto parse_err_sig_fail;
+      errno = 0;
+      sig->hash_algo = strtol (end, &tail, 0);
+      if (errno || end == tail || *tail != ' ')
+	goto parse_err_sig_fail;
+      end = tail;
+      while (*end == ' ')
+	end++;
+
+      /* Skip the sig class.  */
+      end = strchr (end, ' ');
+      if (!end)
+	goto parse_err_sig_fail;
+      while (*end == ' ')
+	end++;
+
+      /* Parse the timestamp.  */
+      sig->timestamp = _gpgme_parse_timestamp (end, &tail);
+      if (sig->timestamp == -1 || end == tail || (*tail && *tail != ' '))
+	return gpg_error (GPG_ERR_INV_ENGINE);
+      end = tail;
+      while (*end == ' ')
+	end++;
+      
+      /* Parse the return code.  */
+      if (end[0] && (!end[1] || end[1] == ' '))
 	{
-	  int i = 0;
-	  /* The return code is the 6th argument, if it is 9, the
-	     problem is a missing key.  */
-	  while (end && i < 4)
+	  switch (end[0])
 	    {
-	      end = strchr (end, ' ');
-	      if (end)
-		end++;
-	      i++;
+	    case '4':
+	      sig->status = gpg_error (GPG_ERR_UNSUPPORTED_ALGORITHM);
+	      break;
+	      
+	    case '9':
+	      sig->status = gpg_error (GPG_ERR_NO_PUBKEY);
+	      break;
+	      
+	    default:
+	      sig->status = gpg_error (GPG_ERR_GENERAL);
 	    }
-	  if (end && end[0] && (!end[1] || end[1] == ' '))
-	    {
-	      switch (end[0])
-		{
-		case '4':
-		  sig->status = gpg_error (GPG_ERR_UNSUPPORTED_ALGORITHM);
-		  break;
-		  
-		case '9':
-		  sig->status = gpg_error (GPG_ERR_NO_PUBKEY);
-		  break;
-		  
-		default:
-		  sig->status = gpg_error (GPG_ERR_GENERAL);
-		}
-	    }
 	}
       else
-	sig->status = gpg_error (GPG_ERR_GENERAL);
+	goto parse_err_sig_fail;
+
+      goto parse_err_sig_ok;
+      
+    parse_err_sig_fail:
+      sig->status = gpg_error (GPG_ERR_GENERAL);
+    parse_err_sig_ok:
       break;
-
+      
     default:
       return gpg_error (GPG_ERR_GENERAL);
     }
@@ -279,7 +334,6 @@
 parse_valid_sig (gpgme_signature_t sig, char *args)
 {
   char *end = strchr (args, ' ');
-
   if (end)
     {
       *end = '\0';
@@ -296,6 +350,7 @@
   if (!sig->fpr)
     return gpg_error_from_errno (errno);
 
+  /* Skip the creation date.  */
   end = strchr (end, ' ');
   if (end)
     {
@@ -309,6 +364,43 @@
       sig->exp_timestamp = _gpgme_parse_timestamp (end, &tail);
       if (sig->exp_timestamp == -1 || end == tail || (*tail && *tail != ' '))
 	return gpg_error (GPG_ERR_INV_ENGINE);
+      end = tail;
+
+      while (*end == ' ')
+	end++;
+      /* Skip the signature version.  */
+      end = strchr (end, ' ');
+      if (end)
+	{
+	  while (*end == ' ')
+	    end++;
+
+	  /* Skip the reserved field.  */
+	  end = strchr (end, ' ');
+	  if (end)
+	    {
+	      /* Parse the pubkey algo.  */
+	      errno = 0;
+	      sig->pubkey_algo = strtol (end, &tail, 0);
+	      if (errno || end == tail || *tail != ' ')
+		return gpg_error (GPG_ERR_INV_ENGINE);
+	      end = tail;
+
+	      while (*end == ' ')
+		end++;
+
+	      if (*end)
+		{
+		  /* Parse the hash algo.  */
+
+		  errno = 0;
+		  sig->hash_algo = strtol (end, &tail, 0);
+		  if (errno || end == tail || *tail != ' ')
+		    return gpg_error (GPG_ERR_INV_ENGINE);
+		  end = tail;
+		}
+	    }
+	}
     }
   return 0;
 }
@@ -339,51 +431,39 @@
 	   previous one.  The crypto backend misbehaves.  */
 	return gpg_error (GPG_ERR_INV_ENGINE);
 
-      notation = malloc (sizeof (*sig));
-      if (!notation)
-	return gpg_error_from_errno (errno);
-      notation->next = NULL;
+      err = _gpgme_sig_notation_create (&notation, NULL, 0, NULL, 0, 0);
+      if (err)
+	return err;
 
       if (code == GPGME_STATUS_NOTATION_NAME)
 	{
-	  int len = strlen (args) + 1;
-
-	  notation->name = malloc (len);
-	  if (!notation->name)
-	    {
-	      int saved_errno = errno;
-	      free (notation);
-	      return gpg_error_from_errno (saved_errno);
-	    }
-	  err = _gpgme_decode_percent_string (args, &notation->name, len);
+	  err = _gpgme_decode_percent_string (args, &notation->name, 0, 0);
 	  if (err)
 	    {
-	      free (notation->name);
-	      free (notation);
+	      _gpgme_sig_notation_free (notation);
 	      return err;
 	    }
 
-	  notation->value = NULL;
+	  notation->name_len = strlen (notation->name);
+
+	  /* FIXME: For now we fake the human-readable flag.  The
+	     critical flag can not be reported as it is not
+	     provided.  */
+	  notation->flags = GPGME_SIG_NOTATION_HUMAN_READABLE;
+	  notation->human_readable = 1;
 	}
       else
 	{
-	  int len = strlen (args) + 1;
+	  /* This is a policy URL.  */
 
-	  notation->name = NULL;
-	  notation->value = malloc (len);
-	  if (!notation->value)
-	    {
-	      int saved_errno = errno;
-	      free (notation);
-	      return gpg_error_from_errno (saved_errno);
-	    }
-	  err = _gpgme_decode_percent_string (args, &notation->value, len);
+	  err = _gpgme_decode_percent_string (args, &notation->value, 0, 0);
 	  if (err)
 	    {
-	      free (notation->value);
-	      free (notation);
+	      _gpgme_sig_notation_free (notation);
 	      return err;
 	    }
+
+	  notation->value_len = strlen (notation->value);
 	}
       *lastp = notation;
     }
@@ -420,9 +500,11 @@
 	  dest += cur_len;
 	}
       
-      err = _gpgme_decode_percent_string (args, &dest, len);
+      err = _gpgme_decode_percent_string (args, &dest, len, 0);
       if (err)
 	return err;
+
+      notation->value_len += strlen (dest);
     }
   else
     return gpg_error (GPG_ERR_INV_ENGINE);
@@ -461,13 +543,18 @@
 
   if (*args)
     sig->validity_reason = _gpgme_map_gnupg_error (args);
+  else
+    sig->validity_reason = 0;
 
   return 0;
 }
 
 
+/* Parse an error status line and if SET_STATUS is true update the
+   result status as appropriate.  With SET_STATUS being false, only
+   check for an error.  */
 static gpgme_error_t
-parse_error (gpgme_signature_t sig, char *args)
+parse_error (gpgme_signature_t sig, char *args, int set_status)
 {
   gpgme_error_t err;
   char *where = strchr (args, ' ');
@@ -489,7 +576,16 @@
 
   err = _gpgme_map_gnupg_error (which);
 
-  if (!strcmp (where, "verify.findkey"))
+  if (!strcmp (where, "proc_pkt.plaintext")
+      && gpg_err_code (err) == GPG_ERR_BAD_DATA)
+    {
+      /* This indicates a double plaintext.  The only solid way to
+         handle this is by failing the oepration.  */
+      return gpg_error (GPG_ERR_BAD_DATA);
+    }
+  else if (!set_status)
+    ;
+  else if (!strcmp (where, "verify.findkey"))
     sig->status = err;
   else if (!strcmp (where, "verify.keyusage")
 	   && gpg_err_code (err) == GPG_ERR_WRONG_KEY_USAGE)
@@ -507,6 +603,7 @@
   void *hook;
   op_data_t opd;
   gpgme_signature_t sig;
+  char *end;
 
   err = _gpgme_op_data_lookup (ctx, OPDATA_VERIFY, &hook, -1, NULL);
   opd = hook;
@@ -570,11 +667,25 @@
       return sig ? parse_trust (sig, code, args)
 	: gpg_error (GPG_ERR_INV_ENGINE);
 
+    case GPGME_STATUS_PKA_TRUST_BAD:
+    case GPGME_STATUS_PKA_TRUST_GOOD:
+      opd->only_newsig_seen = 0;
+      /* Check that we only get one of these status codes per
+         signature; if not the crypto backend misbehaves.  */
+      if (!sig || sig->pka_trust || sig->pka_address)
+        return gpg_error (GPG_ERR_INV_ENGINE);
+      sig->pka_trust = code == GPGME_STATUS_PKA_TRUST_GOOD? 2 : 1;
+      end = strchr (args, ' ');
+      if (end)
+        *end = 0;
+      sig->pka_address = strdup (args);
+      break;
+
     case GPGME_STATUS_ERROR:
       opd->only_newsig_seen = 0;
-      /* The error status is informational, so we don't return an
-         error code if we are not ready to process this status. */
-      return sig ? parse_error (sig, args) : 0;
+      /* Some  error stati are informational, so we don't return an
+         error code if we are not ready to process this status.  */
+      return parse_error (sig, args, !!sig );
 
     case GPGME_STATUS_EOF:
       if (sig && !opd->did_prepare_new_sig)
@@ -604,6 +715,13 @@
       opd->only_newsig_seen = 0;
       break;
 
+    case GPGME_STATUS_PLAINTEXT:
+      if (++opd->plaintext_seen > 1)
+        return gpg_error (GPG_ERR_BAD_DATA);
+      err = _gpgme_parse_plaintext (args, &opd->result.file_name);
+      if (err)
+	return err;
+
     default:
       break;
     }
@@ -713,8 +831,9 @@
    successful verify operation in R_STAT (if non-null).  The creation
    time stamp of the signature is returned in R_CREATED (if non-null).
    The function returns a string containing the fingerprint.  */
-const char *gpgme_get_sig_status (gpgme_ctx_t ctx, int idx,
-                                  _gpgme_sig_stat_t *r_stat, time_t *r_created)
+const char *
+gpgme_get_sig_status (gpgme_ctx_t ctx, int idx,
+                      _gpgme_sig_stat_t *r_stat, time_t *r_created)
 {
   gpgme_verify_result_t result;
   gpgme_signature_t sig;
@@ -773,8 +892,9 @@
    number of the signature after a successful verify operation.  WHAT
    is an attribute where GPGME_ATTR_EXPIRE is probably the most useful
    one.  WHATIDX is to be passed as 0 for most attributes . */
-unsigned long gpgme_get_sig_ulong_attr (gpgme_ctx_t ctx, int idx,
-                                        _gpgme_attr_t what, int whatidx)
+unsigned long 
+gpgme_get_sig_ulong_attr (gpgme_ctx_t ctx, int idx,
+                          _gpgme_attr_t what, int whatidx)
 {
   gpgme_verify_result_t result;
   gpgme_signature_t sig;
@@ -836,8 +956,9 @@
 }
 
 
-const char *gpgme_get_sig_string_attr (gpgme_ctx_t ctx, int idx,
-                                      _gpgme_attr_t what, int whatidx)
+const char *
+gpgme_get_sig_string_attr (gpgme_ctx_t ctx, int idx,
+                           _gpgme_attr_t what, int whatidx)
 {
   gpgme_verify_result_t result;
   gpgme_signature_t sig;
Index: libkdenetwork/libgpgme-copy/gpgme/ath-pth.c
===================================================================
--- libkdenetwork/libgpgme-copy/gpgme/ath-pth.c	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkdenetwork/libgpgme-copy/gpgme/ath-pth.c	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,21 +1,22 @@
 /* ath-pth.c - Pth module for self-adapting thread-safeness library
-   Copyright (C) 2002, 2003 g10 Code GmbH
+   Copyright (C) 2002, 2003, 2004 g10 Code GmbH
 
    This file is part of GPGME.
  
    GPGME is free software; you can redistribute it and/or modify it
-   under the terms of the GNU General Public License as published by
-   the Free Software Foundation; either version 2 of the License, or
-   (at your option) any later version.
- 
+   under the terms of the GNU Lesser General Public License as
+   published by the Free Software Foundation; either version 2.1 of
+   the License, or (at your option) any later version.
+   
    GPGME is distributed in the hope that it will be useful, but
    WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
-   General Public License for more details.
- 
-   You should have received a copy of the GNU General Public License
-   along with GPGME; if not, write to the Free Software Foundation,
-   Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301, USA.  */
+   Lesser General Public License for more details.
+   
+   You should have received a copy of the GNU Lesser General Public
+   License along with this program; if not, write to the Free Software
+   Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
+   02111-1307, USA.  */
 
 
 #ifdef HAVE_CONFIG_H
Index: libkdenetwork/libgpgme-copy/gpgme/ChangeLog
===================================================================
--- libkdenetwork/libgpgme-copy/gpgme/ChangeLog	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkdenetwork/libgpgme-copy/gpgme/ChangeLog	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,3 +1,842 @@
+2007-02-26  Werner Koch  <wk@g10code.com>
+
+	* verify.c (op_data_t): New element PLAINTEXT_SEEN.
+	(_gpgme_verify_status_handler): Return an error if more than one
+	plaintext has been seen.
+	(parse_error): New arg SET_STATUS. Also detect it based on an
+	ERROR status (gpg > 1.4.6).
+
+2007-01-26  Werner Koch  <wk@g10code.com>
+
+	* w32-io.c (build_commandline): Fixed stupid quoting bug.
+	* w32-glib-io.c (build_commandline): Ditto.
+
+	* rungpg.c (gpg_set_locale): Avoid dangling pointer after free.
+
+	* gpgme-config.in: New options --get-gpg and --get-gpgsm.
+
+2007-01-18  Marcus Brinkmann  <marcus@g10code.de>
+
+	* data.h (_gpgme_data_get_fd): Add prototype.
+	(gpgme_data_get_fd_cb): New type.
+	(struct _gpgme_data_cbs): New member get_fd.
+	* data.c (_gpgme_data_get_fd): New function.
+	* data-fd.c (fd_get_fd): New function.
+	(fd_cbs): Add fd_get_fd.
+	* data-stream.c (stream_get_fd): New function.
+	(stream_cbs): Add stream_get_fd.
+	* data-mem.c (mem_cbs): Add NULL for get_fd callback.	
+	* data-user.c (user_cbs): Likewise.
+	* engine-gpgsm.c (gpgsm_set_fd) [USE_DESCRIPTOR_PASSING]: Try to
+	short-cut by passing the data descriptor directly.
+
+2007-01-17  Marcus Brinkmann  <marcus@g10code.de>
+
+	* w32-io.c (build_commandline): Quote all command line arguments.
+	* w32-glib-io.c (build_commandline): Likewise.
+
+2007-01-10  Werner Koch  <wk@g10code.com>
+
+	* ttyname_r.c (ttyname_r) [W32]: Return a dummy name.
+
+2007-01-08  Werner Koch  <wk@g10code.com>
+
+	* version.c (do_subsystem_inits): Do assuan init only if building
+	with Assuan.
+	* setenv.c: Include assuan-def.h only if building with Assuan
+	support.
+
+	* op-support.c (_gpgme_op_reset): Set LC_MESSAGES only if
+	if defined.
+	* engine-gpgsm.c (gpgsm_set_locale): Ditto.
+	* rungpg.c (gpg_set_locale): Ditto.
+
+2006-12-17  Marcus Brinkmann  <marcus@g10code.de>
+
+	* gpgme.c (gpgme_set_protocol): Shut down the engine when
+	switching protocols.
+	(gpgme_ctx_set_engine_info): Likewise for engine info.
+	* engine.h (_gpgme_engine_reset): New function prototype.
+	* engine.c (_gpgme_engine_reset): New function.
+	* engine-backend.h (struct engine_ops): New member RESET.
+	* rungpg.c (_gpgme_engine_ops_gpg): Add NULL for reset function.
+	* engine-gpgsm.c (_gpgme_engine_ops_gpgsm)
+	[USE_DESCRIPTOR_PASSING]: Add gpgsm_reset for reset.
+	(_gpgme_engine_ops_gpgsm) [!USE_DESCRIPTOR_PASSING]: Add NULL for
+	reset function.
+	(gpgsm_reset) [USE_DESCRIPTOR_PASSING]: New function.
+	* op-support.c (_gpgme_op_reset): Try to use the engine's reset
+	function if available.
+	* engine-gpgsm.c (gpgsm_new): Move code to dup status_fd to ...
+	(start): ... here.
+	* posix-io.c (_gpgme_io_recvmsg, _gpgme_io_sendmsg): New functions.
+	
+	* engine.h (_gpgme_engine_new): Remove arguments lc_ctype and
+	lc_messages from prototype.
+	(_gpgme_engine_set_locale): New prototype.
+	* engine.c (_gpgme_engine_set_locale): New function.
+	* op-support.c (_gpgme_op_reset): Call _gpgme_engine_set_locale.
+	* engine-backend.h (struct engine_ops): Add new member SET_LOCALE.
+	Remove arguments lc_messages and lc_ctype from member NEW.
+	* engine-gpgsm.c (struct engine_gpgsm): New members lc_ctype_set
+	and lc_messages_set.
+	(gpgsm_new): Remove lc_messages and lc_ctype
+	arguments.
+	(gpgsm_set_locale): New function.
+	(_gpgme_engine_ops_gpgsm): Add gpgsm_set_locale.
+	* rungpg.c (struct engine_gpg): Add new members lc_messages and
+	lc_ctype.
+	(gpg_release): Release lc_messages and lc_ctype if set.
+	(gpg_new): Remove lc_messages and lc_ctype arguments.
+	(gpg_set_locale): New function.
+	(_gpgme_engine_ops_gpg): Add gpg_set_locale.
+	(add_arg): Implement in terms of:
+	(add_arg_ext): New function.
+	(start): Set lc-messages and lc-ctype arguments here.
+
+2006-12-03  Marcus Brinkmann  <marcus@g10code.de>
+
+	* engine-gpgsm.c (struct engine_gpgsm): Move members
+	input_fd_server, output_fd_server, message_fd_server to ...
+	(iocb_data): ... here (as server_fd).
+	(close_notify_handler): Reset tags as well.
+	(gpgsm_new): Implement support for descriptor
+	passing.
+	(fd_type_t): New type.
+	(gpgsm_clear_fd): New function.  Use it instead of _gpgsm_io_close
+	for unused communication channels.
+	(gpgsm_set_fd): Rewritten to support descriptor passing.  All
+	relevant callers adjusted as well (previously of _gpgme_io_close).
+
+2006-12-02  Marcus Brinkmann  <marcus@g10code.de>
+
+	* version.c: Include "assuan.h".
+	(do_subsystem_inits): Call assuan_set_assuan_err_source.
+
+2006-12-01  Marcus Brinkmann  <marcus@g10code.de>
+
+	* Makefile.am (libgpgme_real_la_SOURCES): Rename to main_sources.
+	(libgpgme_la_SOURCES, libgpgme_pthread_la_SOURCES,
+	libgpgme_glib_la_SOURCES, libgpgme_pth_la_SOURCES): Add
+	$(main_sources).
+	(libgpgme_la_DEPENDENCIES, libgpgme_la_LIBADD,
+	libgpgme_pthread_la_DEPENDENCIES, libgpgme_pthread_la_LIBADD,
+	libgpgme_pth_la_DEPENDENCIES, libgpgme_pth_la_LIBADD,
+	libgpgme_glib_la_DEPENDENCIES, libgpgme_glib_la_LIBADD): Remove
+	libgpgme-real.la.
+	(noinst_LTLIBRARIES): Removed.
+	(libgpgme_glib_la_CFLAGS, libgpgme_pth_la_CFLAGS): Removed.
+	(AM_CFLAGS): New variable.
+
+2006-11-30  Marcus Brinkmann  <marcus@g10code.de>
+
+	* engine-gpgsm.c: Replace AssuanError with gpg_error_t and
+	ASSUAN_CONTEXT with assuan_context_t.
+
+2006-11-29  Marcus Brinkmann  <marcus@g10code.de>
+
+	* engine-gpgsm.c (gpgsm_new): Check return value of
+	assuan_pipe_connect.
+
+	* rungpg.c: Include <unistd.h>.
+	(gpg_new): Support --display, --ttyname, --ttytype, --lc-ctype and
+	--lc-messages.  Fixes issue 734.
+
+2006-10-24  Marcus Brinkmann  <marcus@g10code.de>
+
+	* trustlist.c (gpgme_op_trustlist_next): Return error if OPD is
+	NULL.
+
+2006-10-23  Marcus Brinkmann  <marcus@g10code.de>
+
+	* wait-global.c (gpgme_wait): Unlock CTX_LIST_LOCK while calling
+	_gpgme_engine_io_event().
+
+	* keylist.c (gpgme_op_keylist_next): Return error if OPD is NULL.
+
+2006-09-25  Marcus Brinkmann  <marcus@g10code.de>
+
+	* data-mem.c (gpgme_data_release_and_get_mem): Release the data
+	object properly.
+
+2006-09-22  Marcus Brinkmann  <marcus@g10code.de>
+
+	* keylist.c (keylist_colon_handler): Move debug output after
+	initialising KEY.
+
+2006-07-29  Marcus Brinkmann  <marcus@g10code.de>
+
+	* gpgme-config.in (Options): Add NETLIBS.
+	* Makefile.am (libgpgme_la_LIBADD, libgpgme_pthread_la_LIBADD,
+	libgpgme_pth_la_LIBADD, libgpgme_glib_la_LIBADD): Add NETLIBS.
+
+	* rungpg.c (read_status): Fix comparison disguising as an
+	assignment.
+
+2005-03-24  Marcus Brinkmann  <marcus@g10code.de>
+
+	* gpgme.c (gpgme_set_locale): Remove conditional on
+	HAVE_W32_SYSTEM, and just check for LC_MESSAGES.
+
+2006-07-16  Marcus Brinkmann  <marcus@g10code.de>
+
+	* rungpg.c (read_status): Strip potential carriage return.
+	* genkey.c (get_key_parameter): Skip potential carriage return.
+	* version.c (_gpgme_get_program_version): Strip potential carriage
+	return.
+
+	* data.c (gpgme_data_set_file_name): Allow to clear the file name
+	by passing NULL.
+
+2006-06-22  Marcus Brinkmann  <marcus@g10code.de>
+
+	* keylist.c (gpgme_get_key): Also clone the engine info.
+
+2006-03-06  Marcus Brinkmann  <marcus@g10code.de>
+
+	* gpgme-config.in (cflags_pth): Revert accidential removal of
+	pthread support with last change.
+
+2006-02-28  Marcus Brinkmann  <marcus@g10code.de>
+
+	* w32-glib-io.c (O_BINARY) [!O_BINARY]: New macro.
+	(_gpgme_io_pipe): Open pipes in binary mode.
+
+2006-02-22  Marcus Brinkmann  <marcus@g10code.de>
+
+	* engine.c (gpgme_engine_check_version): Reimplemented to allow
+	checking the version correctly even after changing the engine
+	information.  Bug reported by Stphane Corthsy.
+
+	* rungpg.c (read_colon_line): Invoke colon preprocess handler if
+	it is set.
+	(colon_preprocessor_t): New type.
+	(struct engine_gpg): New member colon.preprocess_fnc.
+	(gpg_keylist_preprocess): New function.
+	* keylist.c (keylist_colon_handler): Allow short key IDs.
+
+2006-02-15  Marcus Brinkmann  <marcus@g10code.de>
+
+	* w32-io.c (create_writer): Make C->have_data a manually resetted
+	event.
+	(writer): Move code from end of if block to beginning, so it
+	is also run the first time.
+	(_gpgme_io_write): Move assert check after error check.  Reset
+	the is_empty event, and also do it eagerly.
+	(_gpgme_io_select): Unconditionally wait for the is_empty event.
+
+2006-01-26  Werner Koch  <wk@g10code.com>
+
+	* w32-util.c (_gpgme_get_conf_int): New.
+	* posix-util.c (_gpgme_get_conf_int): New.
+	* w32-io.c (get_desired_thread_priority): New.
+	(create_reader, create_writer): Use it here.
+
+2006-01-04  Werner Koch  <wk@g10code.com>
+
+	* debug.h (_gpgme_debug_srcname): New. Use it with the debug macros.
+
+	* w32-glib-io.c (_gpgme_io_set_nonblocking): Add debug
+	statements. Disable error return for failed nonblocking call.
+
+2006-01-03  Marcus Brinkmann  <marcus@g10code.de>
+
+	* w32-glib-io.c (_gpgme_io_close): Only close fd if there is no
+	channel for it.
+
+2005-12-31  Marcus Brinkmann  <marcus@g10code.de>
+
+	* w32-glib-io.c (find_channel): Set channel to unbuffered.
+	(_gpgme_io_select): Fix debug output.
+
+2005-12-23  Werner Koch  <wk@g10code.com>
+
+	* gpgme.h (struct _gpgme_signature): Append field PKA_ADDRESS.
+	* verify.c (release_op_data, _gpgme_verify_status_handler): Set
+	this field.
+
+2005-12-20  Werner Koch  <wk@g10code.com>
+
+	* gpgme.h (gpgme_status_code_t): Added GPGME_STATUS_PKA_TRUST_BAD
+	and GPGME_STATUS_PKA_TRUST_GOOD.
+	(struct _gpgme_signature): New field pka_trust.
+	* verify.c (_gpgme_verify_status_handler): Set pka_trust.
+
+2005-12-06  Werner Koch  <wk@g10code.com>
+
+	* keylist.c (keylist_colon_handler): Store fingerprints of the
+	subkeys.  Reset the secret flag of subkeys for stub secret keys.
+	(NR_FIELDS): Bumped up to 16
+
+2005-11-27  Marcus Brinkmann  <marcus@g10code.de>
+
+	* engine.c (_gpgme_set_engine_info): Use new_file_name in
+	engine_get_version invocation.  Reported by Stphane Corthsy.
+
+2005-11-24  Marcus Brinkmann  <marcus@g10code.de>
+
+	* w32-glib-io.c (_gpgme_io_fd2str): Remove debug printf.
+
+2005-11-18  Werner Koch  <wk@g10code.com>
+
+	* w32-glib-io.c: Include glib.h before windows to avoid a symbol
+	shadowing warning.
+	(find_channel): Better use g_io_channel_win32_new_fd instead of
+	the autodetection function g_io_channel_unix_new.
+	(_gpgme_io_select): Rewritten.  It is now a fully working select
+	implementation.
+
+2005-11-18  Marcus Brinkmann  <marcus@g10code.de>
+
+	* priv-io.h (_gpgme_io_fd2str): New prototype.
+	* posix-io.c (_gpgme_io_fd2str): New function.
+	* w32-io.c (_gpgme_io_fd2str): New function.
+	* rungpg.c: Use this new function.
+	* w32-glib-io.c (_gpgme_io_fd2str): Rewrote the file handle code
+	again.  Two's company, three's the musketeers.
+
+	* w32-glib-io.c: Rewrote the file handle code.  We don't create
+	system fds for every handle (doesn't work for inherited handles),
+	but we create pseudo fds in a private namespace that designate a
+	handle and potentially a giochannel.
+
+2005-11-18  Werner Koch  <wk@g10code.com>
+
+	* versioninfo.rc.in: Set file version to LT-version + Svn-revision.
+
+2005-11-17  Marcus Brinkmann  <marcus@g10code.de>
+
+	* w32-glib-io.c: New file.
+	* gpgme.def (gpgme_get_giochannel): Add symbol.
+	* Makefile.am (system_components) [HAVE_DOSISH_SYSTEM]: Remove
+	w32-io.c.
+	(ltlib_gpgme_extra): New variable.
+	(lib_LTLIBRARIES): Add $(ltlib_gpgme_extra).
+	(system_components_not_extra): New variable.
+	(libgpgme_la_SOURCES, libgpgme_pthread_la_SOURCES,
+	(libgpgme_pth_la_SOURCES): Add $(system_components_not_extra).
+	(libgpgme_glib_la_LDFLAGS, libgpgme_glib_la_DEPENDENCIES,
+	(libgpgme_glib_la_LIBADD, libgpgme_glib_la_CFLAGS)
+	[BUILD_W32_GLIB]: New variables. 
+	* gpgme-config.in (glib): New option.
+	* gpgme.m4 (AM_PATH_GPGME_GLIB): New macro.
+
+2005-11-17  Marcus Brinkmann  <marcus@g10code.de>
+
+	* priv-io.h (_gpgme_io_waitpid, _gpgme_io_kill): Removed.
+	* w32-io.c (_gpgme_io_waitpid, _gpgme_io_kill): Removed.
+	* posix-io.c (_gpgme_io_kill): Removed.
+	(_gpgme_io_waitpid): Declare static.
+
+2005-10-24  Marcus Brinkmann  <marcus@g10code.de>
+
+	* w32-io.c (_gpgme_io_spawn): Don't minimize window, hide it.
+
+2005-10-21  Werner Koch  <wk@g10code.com>
+
+	* Makefile.am: Fixed cut+paste problem
+
+2005-10-20  Marcus Brinkmann  <marcus@g10code.de>
+
+	* Makefile.am: Build versioninfo.lo, not versioninfo.o.  Also, fix
+	the whole mess.
+
+2005-10-16  Marcus Brinkmann  <marcus@g10code.de>
+
+	* rungpg.c (gpg_edit): Don't add a key argument if in card edit
+	mode.
+
+2005-10-06  Marcus Brinkmann  <marcus@g10code.de>
+
+	* Makefile.am (gpgme.dll gpgme.dll.a): Use $(srcdir) for
+	gpgme.def.
+
+	* gpgme.h (gpgme_free): New prototype.
+	* data-mem.c (gpgme_free): New function.
+	* libgpgme.vers (GPGME_1.1): Add gpgme_free.
+	* gpgme.def: Add gpgme_free.
+
+2005-10-02  Marcus Brinkmann  <marcus@g10code.de>
+
+	* util.h (_gpgme_decode_percent_string): Add new argument BINARY
+	to prototype.
+	* verify.c (parse_notation): Likewise for invocation.
+	* conversion.c (_gpgme_decode_percent_string): Likewise to
+	declaration.  If set, do not replace '\0' characters with a
+	printable string.
+	* gpgme.h (struct _gpgme_key_sig): New field notations.
+	* ops.h (_gpgme_parse_notation): New prototype.
+	* sig-notation.c (_gpgme_parse_notation): New function.
+	* key.c (gpgme_key_unref): Free all signature notations.
+	* keylist.c (op_data_t): New member tmp_keysig.
+	(finish_key): Clear OPD->tmp_keysig.
+	* gpgme.c (gpgme_set_keylist_mode): Remove check.
+	* rungpg.c (gpg_keylist): Support listing signature notations.
+	(gpg_keylist_ext): Likewise.
+
+2005-10-01  Marcus Brinkmann  <marcus@g10code.de>
+
+	* engine.h (_gpgme_set_engine_info): Add prototype.
+	* engine-backend.h (struct engine_ops): Change return type of
+	get_file_name() to const char * to silence gcc warning.
+	* engine.c (engine_get_file_name): Change return type to const
+	char * to silence gcc warning.
+	(gpgme_get_engine_info): Use transitional variable to go from
+	const char * to char * to silence gcc warning.
+	(_gpgme_set_engine_info): Likewise.
+	* engine-gpgsm.c (struct engine_gpgsm): Change type of LINE to
+	char * to silence gcc warning.
+	(gpgsm_new): Make ARGV a pointer to const char.
+	(status_handler): Change type of SRC, END, DST, ALINE and NEWLINE
+	to char * to silence gcc warning.
+
+	* gpgme.def: Add gpgme_data_set_file_name,
+	gpgme_data_get_file_name, gpgme_sig_notation_clear,
+	gpgme_sig_notation_add and gpgme_sig_notation_get.
+	* libgpgme.vers: Add gpgme_sig_notation_clear,
+	gpgme_sig_notation_add and gpgme_sig_notation_get.
+	* Makefile.am (libgpgme_real_la_SOURCES): Add sig-notation.c.
+	* context.h (struct gpgme_context): New field sig_notations.
+	* gpgme.h (struct _gpgme_sig_notation): New member value_len and
+	critical.
+	(GPGME_SIG_NOTATION_CRITICAL): New symbol.
+	(gpgme_sig_notation_flags_t): New type.
+	(gpgme_sig_notation_add, gpgme_sig_notation_clear,
+	gpgme_sig_notation_get): New prototypes.
+	* ops.h (_gpgme_sig_notation_create, _gpgme_sig_notation_free):
+	New prototypes.
+	* sig-notation.c (_gpgme_sig_notation_free): New file.
+	* verify.c (parse_notation): Use support functions.
+	(release_op_data): Likewise.
+	* rungpg.c (append_args_from_sig_notations): New function.
+	(gpg_encrypt_sign, gpg_sign): Call it.
+
+2005-09-30  Marcus Brinkmann  <marcus@g10code.de>
+
+	* data.h (struct gpgme_data): New member file_name.
+	* data.c (gpgme_data_set_filename): New function.
+	(_gpgme_data_release): Free DH->filename if necessary.
+	(gpgme_data_get_filename): New function.
+	* rungpg.c (gpg_encrypt): Set filename option.
+	(gpg_encrypt_sign): Likewise.
+	(gpg_sign): Likewise.
+	* libgpgme.vers (GPGME_1.1): Add gpgme_data_set_file_name and
+	gpgme_data_get_file_name.
+
+	* decrpyt.c, verify.c, gpgme.h: Replace plaintext_filename with
+	file_name.
+
+2005-09-29  Marcus Brinkmann  <marcus@g10code.de>
+
+	* gpgme.h (struct _gpgme_key): Add field is_qualified.
+	(struct _gpgme_subkey): Likewise.
+	* keylist.c (set_subkey_capability, set_mainkey_capability): Set
+	field is_qualified.
+
+2005-09-23  Werner Koch  <wk@g10code.com>
+
+	* w32-io.c (_gpgme_io_pipe): Removed use of environment variable
+	again.
+	(create_reader, create_writer): Set thread priority higher.
+
+2005-09-19  Werner Koch  <wk@g10code.com>
+
+	* w32-io.c (_gpgme_io_pipe): New environment variable to change
+	the size of the pipe buffer.
+
+2005-09-13  Werner Koch  <wk@g10code.com>
+
+	* ath.c: Changes to make it work under W32.
+
+2005-09-12  Marcus Brinkmann  <marcus@g10code.de>
+
+	* Makefile.am (libgpgme_la_SOURCES): Set to ath.h and ath.c.
+	(ath_pth_src, ath_pthread_src): Removed.
+	(w32_o_files): Replace ath-compat.o with ath.o.
+	(libgpgme_pth_la_CFLAGS): New variable.
+	* ath-compat.c, ath-pthread-compat.c, ath-pth-compat.c: Removed.
+	* ath.h (ath_pthread_available, ath_pth_available): Removed.
+	(ath_init) [!_ATH_EXT_SYM_PREFIX]: Do not define macro.
+	(struct ath_ops, ath_init) [_ATH_COMPAT]: Removed.
+	(_ATH_COMPAT): Macro removed.
+	* posix-sema.c (_gpgme_sema_subsystem_init): Do not call
+	_gpgme_ath_init.
+
+2005-09-12  Marcus Brinkmann  <marcus@g10code.de>
+
+	* keylist.c (release_op_data): Do not free opd->tmp_uid.
+
+2005-09-07  Werner Koch  <wk@g10code.com>
+
+	* w32-io.c (build_commandline): Quote argv[0].
+
+2005-08-26  Marcus Brinkmann  <marcus@g10code.de>
+
+	* rungpg.c (command_handler): Use _gpgme_io_write instead of write.
+
+	* edit.c (command_handler): Do not depend on PROCESSED being
+	available.
+
+	* engine.h (engine_command_handler_t): Add new argument processed.
+	* ops.h (_gpgme_passphrase_command_handler_internal): Rename
+	prototype to ...
+	(_gpgme_passphrase_command_handler): ... this one.
+	* passphrase.c (_gpgme_passphrase_command_handler_internal):
+	Rename to ...
+	(_gpgme_passphrase_command_handler): ... this one.
+	* edit.c (command_handler): Add new argument processed.  Remove
+	local variable with the same name.  Always return processed as
+	true.
+	* rungpg.c (command_handler): Send a newline character if the
+	handler did not.
+
+2005-08-26  Werner Koch  <wk@g10code.com>
+
+	* w32-util.c (read_w32_registry_string): Updated from code used by
+	GnuPG.  This allows for expanding strings and features the
+	implicit fallback key.
+	(w32_shgetfolderpath, find_program_at_standard_place): New.
+	(_gpgme_get_gpg_path, _gpgme_get_gpgsm_path): With no registry
+	entry, locate the programs at the standard place.
+	(dlopen, dlsym, dlclose): New, so that we can keep on using what
+	we are accustomed to.
+
+	* debug.c (debug_init): Use PATHSEP_C so that under W32 a
+	semicolon is used which allows us to create files with drive
+	letters.
+
+	* w32-io.c (_gpgme_io_read, _gpgme_io_write): Print content in
+	debug mode too.
+
+2005-08-19  Werner Koch  <wk@g10code.com>
+
+	* gpgme.def: New.
+	* versioninfo.rc.in: New.
+	* Makefile.am: Addes support for building a W32 DLL.
+	
+	* ttyname_r.c (ttyname_r) [W32]: Return error.
+	* ath-compat.c [W32]: select and co are not yet supported; return
+	error.
+	* data-stream.c (stream_seek): Use ftell if ftello is not available.
+
+2005-08-08  Werner Koch  <wk@g10code.com>
+
+	* util.h (stpcpy): Renamed to ..
+	(_gpgme_stpcpy): .. this and made inline.  This avoids duplicate
+	definitions when linking statically.
+	* stpcpy.c: Removed.
+	
+2005-07-27  Marcus Brinkmann  <marcus@g10code.de>
+
+	* gpgme.h (gpgme_status_code_t): Add GPGME_STATUS_PLAINTEXT.
+	(struct _gpgme_op_decrypt_result): New member plaintext_filename.
+	(struct _gpgme_op_verify_result): Likewise.
+	* ops.h (_gpgme_parse_plaintext): Add prototype.
+	* op-support.c (_gpgme_parse_plaintext): New function.
+	* decrypt.c (release_op_data): Release
+	OPD->result.plaintext_filename.
+	(_gpgme_decrypt_status_handler): Handle GPGME_STATUS_PLAINTEXT.
+	* verify.c (release_op_data): Release
+	OPD->result.plaintext_filename.
+	(_gpgme_verify_status_handler): Handle GPGME_STATUS_PLAINTEXT.
+
+2005-07-26  Marcus Brinkmann  <marcus@g10code.de>
+
+	* keylist.c (gpgme_get_key): Allow key IDs.
+
+2005-06-20  Marcus Brinkmann  <marcus@g10code.de>
+
+	* gpgme.m4: Only call GPGME_CONFIG if found.
+
+2005-06-03  Marcus Brinkmann  <marcus@g10code.de>
+
+	* gpgme.h (struct _gpgme_signature): New members pubkey_algo and
+	hash_algo.
+	* verify.c (parse_valid_sig): Parse pubkey and hash algo numbers.
+	(parse_new_sig): Parse pubkey, hash algo and timestamp for ERRSIG.
+
+	(_gpgme_decrypt_status_handler): Fix last change.
+
+	* gpgme.h (struct _gpgme_recipient): New structure.
+	(gpgme_recipient_t): New type.
+	(struct _gpgme_op_decrypt_result): Add member recipients.
+	* decrypt.c (op_data_t): New member last_recipient_p.
+	(_gpgme_op_decrypt_init_result): Initialize last_recipient_p.
+	(parse_enc_to): New function.
+	(_gpgme_decrypt_status_handler): Handle status ENC_TO and
+	NO_SECKEY.
+
+	* wait-global.c (gpgme_wait): Break out of the fd processing loop
+	after an error.
+	Reported by Igor Belyi <gpgme@katehok.ac93.org>.
+
+2005-06-02  Marcus Brinkmann  <marcus@g10code.de>
+
+	* wait.h (_gpgme_run_io_cb): New prototype.
+	* wait.c (_gpgme_run_io_cb): New function.
+	* wait-global.c (gpgme_wait): Call it.
+	* wait-user.c (_gpgme_user_io_cb_handler): Likewise.
+	* wait-private.c (_gpgme_wait_on_condition): Likewise.
+
+2005-06-02  Werner Koch  <wk@g10code.com>
+
+	* passphrase.c (_gpgme_passphrase_status_handler): Take care of
+	GPGME_STATUS_NEED_PASSPHRASE_PIN.
+	(_gpgme_passphrase_command_handler_internal): Also act on the key
+	"passphrase.pin.ask".
+
+	* gpgme.h: Added status codes GPGME_STATUS_SIG_SUBPACKET,
+	GPGME_STATUS_NEED_PASSPHRASE_PIN, GPGME_STATUS_SC_OP_FAILURE,
+	GPGME_STATUS_SC_OP_SUCCESS, GPGME_STATUS_CARDCTRL,
+	GPGME_STATUS_BACKUP_KEY_CREATED.
+
+2005-05-28  Marcus Brinkmann  <marcus@g10code.de>
+
+	* data-user.c: Include <errno.h>.
+
+2005-05-17  Marcus Brinkmann  <marcus@g10code.de>
+
+	* gpgme.c (gpgme_new): Set the CTX->include_certs default to the
+	default.
+
+2005-05-11  Marcus Brinkmann  <marcus@g10code.de>
+
+	* w32-io.c (_gpgme_io_select): Fix loop increment.
+
+2005-05-05  Marcus Brinkmann  <marcus@g10code.de>
+
+	* data-user.c (user_release): Only call user hook if provided.
+	(user_seek): Return EBADF if no user hook is provided.
+	(user_read): Likewise.
+	(user_write): Likewise.
+
+2005-04-28  Marcus Brinkmann  <marcus@g10code.de>
+
+	* gpgme.h (GPGME_INCLUDE_CERTS_DEFAULT): New macro.
+	* engine-gpgsm.c (gpgsm_sign): Send the include-certs option after
+	the reset, just for cleanliness, and do not sent it at all if the
+	default is requested.
+	* gpgme.c (gpgme_set_include_certs): Allow to use
+	GPGME_INCLUDE_CERTS_DEFAULT.
+
+2005-04-21  Werner Koch  <wk@g10code.com>
+
+	* verify.c (calc_sig_summary): Set the key revoked bit.
+
+2005-04-14  Marcus Brinkmann  <marcus@g10code.de>
+
+	* wait-global.c (gpgme_wait): Use LI->ctx when checking a context
+	in the list, not the user-provided CTX.
+	Reported by Igor Belyi <gpgme@katehok.ac93.org>.
+
+	* wait-global.c (gpgme_wait): If no context is found, and we
+	should not hang, set *status to 0 and return NULL.
+	Reported by Igor Belyi <gpgme@katehok.ac93.org>.
+
+2005-03-24  Marcus Brinkmann  <marcus@g10code.de>
+
+	* data.h (EOPNOTSUPP) [_WIN32]: Remove definition.
+	* data.c (EOPNOTSUPP) [HAVE_W32_SYSTEM]: Remove definition.
+	(gpgme_data_read, gpgme_data_write, gpgme_data_seek): Return
+	ENOSYS instead EOPNOTSUPP.
+	* data-compat.c (EOPNOTSUPP) [HAVE_W32_SYSTEM]: Remove definition.
+	(gpgme_error_to_errno): Map GPG_ERR_NOT_SUPPORTED
+	to ENOSYS.
+
+2005-03-24  Marcus Brinkmann  <marcus@g10code.de>
+
+	* io.h: Rename to ...
+	* priv-io.h: ... this.
+	* Makefile.am (libgpgme_real_la_SOURCES): Change io.h to priv-io.h.
+	* data.c, engine-gpgsm.c, posix-io.c, rungpg.c, version.c,
+	w32-io.c, wait-private.c, wait-global.c, wait-user.c, wait.c:
+	Change all includes of "io.h" to "priv-io.h"
+	
+2005-03-09  Werner Koch  <wk@g10code.com>
+
+	* w32-util.c (_gpgme_get_gpg_path, _gpgme_get_gpgsm_path): Do not
+	cast away type checks.
+
+	* io.h [W32]: Do not include stdio.h.  If it is needed do it at
+	the right place.
+
+	* data.h [W32]: Removed kludge for EOPNOTSUP.
+	* data.c, data-compat.c [W32]: Explicitly test for it here.
+
+	Replaced use of _WIN32 by HAVE_W32_SYSTEM except for public header
+	files.
+
+2005-03-07  Timo Schulz  <twoaday@g10code.de>
+ 
+        * gpgme.h: [_WIN32] Removed ssize_t typedef.
+        * ath.h: [_WIN32] Added some (dummy) types.
+        * io.h: [_WIN32] include stdio.h.
+        * data.h: [_WIN32] Define EOPNOTSUPP.
+        * w32-io.c [_WIN32] (_gpgme_io_subsystem_init): New.
+        * gpgme.c [_WIN32] (gpgme_set_locale): Disabled.
+
+2004-12-12  Marcus Brinkmann  <marcus@g10code.de>
+
+	* engine.c (_gpgme_set_engine_info): Fix assertion.
+
+2004-12-11  Marcus Brinkmann  <marcus@g10code.de>
+
+	* util.h [HAVE_CONFIG_H && HAVE_TTYNAME_R] (ttyname_r): Define
+	prototype.
+	* ttyname_r.c: New file.
+
+2004-12-07  Marcus Brinkmann  <marcus@g10code.de>
+
+	* putc_unlocked.c, funopen.c: I just claim copyright on these
+	files and change their license to LGPL, because they are totally
+	trivial wrapper functions.
+	* isascii.c: Change copyright notice to the one from ctype/ctype.h
+	in the GNU C Library (CVS Head 2004-10-10), where isascii is
+	defined as a macro doing exactly the same as the function in this
+	file.
+	* memrchr.c: Update from the GNU C Library (CVS Head 2001-07-06).
+	* stpcpy.c: Update from the GNU C Library (CVS Head 2004-10-10).
+	* ath.c, ath-compat.c, ath.h, ath-pth.c, ath-pth-compat.c,
+	ath-pthread.c, ath-pthread-compat.c, context.h, conversion.c,
+	data.c, data-compat.c, data-fd.c, data.h, data-mem.c,
+	data-stream.c, data-user.c, debug.c, debug.h, decrypt.c,
+	decrypt-verify.c, delete.c, edit.c, encrypt.c, encrypt-sign.c,
+	engine-backend.h, engine.c, engine-gpgsm.c, engine.h, error.c,
+	export.c, genkey.c, get-env.c, gpgme.c, gpgme.h, import.c, io.h,
+	key.c, keylist.c, mkstatus, Makefile.am, ops.h, op-support.c,
+	passphrase.c, posix-io.c, posix-sema.c, posix-util.c, progress.c,
+	rungpg.c, sema.h, sign.c, signers.c, trust-item.c, trustlist.c,
+	util.h, verify.c, version.c, w32-io.c, w32-sema.c, w32-util.c,
+	wait.c, wait-global.c, wait.h, wait-private.c, wait-user.c: Change
+	license to LGPL.
+
+2004-12-07  Marcus Brinkmann  <marcus@g10code.de>
+
+	* libgpgme.vers (GPGME_1.1): New version.
+	* engine-backend.h (struct engine_ops): Add argument FILE_NAME to
+	member get_version().  Add arguments FILE_NAME and HOME_DIR to
+	member new().  Change return type of get_file_name and get_version
+	to char *.
+	* engine-gpgsm.c (gpgsm_get_version): Change return type to char
+	pointer.  Do not cache result.
+	(gpgsm_new): Add file_name and home_dir argument, and use them
+	instead of the defaults, if set.
+	* rungpg.c (struct engine_gpg): New member file_name.
+	(gpg_get_version): Change return type to char pointer, and do not
+	cache result.
+	(gpg_release): Free gpg->file_name.
+	(gpg_new): Take new arguments file_name and home_dir.  Set the
+	--homedir argument if HOME_DIR is not NULL.  Set gpg->file_name.
+	(start): Use gpg->file_name instead _gpgme_get_gpg_path, if set.
+	* engine.h (_gpgme_engine_info_copy, _gpgme_engine_info_release):
+	New prototypes.
+	(_gpgme_engine_new): Change first argument to gpgme_engine_info_t
+	info.
+	* engine.c: Include <assert.h>.
+	(gpgme_get_engine_info): Set *INFO within the lock.  Move
+	ENGINE_INFO and ENGINE_INFO_LOCK to ....
+	(engine_info, engine_info_lock): ... here.  New static variables.
+	(engine_get_version): Add file_name argument to
+	get_version invocation.  Change return type to char pointer.
+	(gpgme_engine_check_version): Rewritten to free() the return value
+	of engine_get_version after using it.
+	(_gpgme_engine_info_release): New function.
+	(gpgme_get_engine_info): Rewritten.
+	(_gpgme_engine_info_copy): New function.
+	(_gpgme_set_engine_info): New function.
+	(gpgme_set_engine_info): New function.
+	(_gpgme_engine_new): Change first argument to gpgme_engine_info_t
+	info, and use that.
+	* gpgme.h (struct _gpgme_engine_info): Change type of file_name
+	and version to char * (remove the const).  New member home_dir.
+	(gpgme_set_engine_info, gpgme_ctx_get_engine_info,
+	gpgme_ctx_set_engine_info): New prototypes.
+	* context.h (struct gpgme_context): New member engine_info.
+	* gpgme.c (gpgme_new): Allocate CTX->engine_info.
+	(gpgme_release): Deallocate CTX->engine_info.
+	(gpgme_ctx_get_engine_info, gpgme_ctx_set_engine_info): New
+	functions.
+	* op-support.c (_gpgme_op_reset): Look for correct engine info and
+	pass it to _gpgme_engine_new.
+	* version.c (gpgme_check_version): Adjust to
+	_gpgme_compare_versions returning an int.
+	(_gpgme_compare_versions): Return an int value, not a const char
+	pointer.
+	* ops.h (_gpgme_compare_versions): Same for prototype.
+
+2004-10-03  Marcus Brinkmann  <marcus@g10code.de>
+
+	* verify.c (parse_trust): If no reason is provided, set
+	SIG->validity_reason to 0.
+	(calc_sig_summary): Set GPGME_SIGSUM_CRL_TOO_OLD if appropriate.
+
+2004-10-22  Marcus Brinkmann  <marcus@g10code.de>
+
+	* engine-gpgsm.c (map_assuan_error): Return 0 if ERR is 0.
+	(start): Call map_assuan_error on return value of
+	assuan_write_line.
+
+2004-10-05  Marcus Brinkmann  <marcus@g10code.de>
+
+	* op-support.c (_gpgme_op_data_lookup): Use char pointer for
+	pointer arithmetic.
+
+2004-09-30  Marcus Brinkmann  <marcus@g10code.de>
+
+	* gpgme.m4: Implement the --api-version check.
+
+	* rungpg.c (read_status): Move the polling of the output data pipe
+	to just before removing the command fd, from just before adding
+	it.  This avoids buffering problems.
+
+	* data.c (_gpgme_data_inbound_handler): Use _gpgme_io_read, not
+	read, to improve debug output.
+
+2004-09-29  Marcus Brinkmann  <marcus@g10code.de>
+
+	* gpgme.h (GPGME_IMPORT_NEW, GPGME_IMPORT_UID, GPGME_IMPORT_SIG,
+	GPGME_IMPORT_SUBKEY, GPGME_IMPORT_SECRET,
+	(GPGME_KEYLIST_MODE_LOCAL, GPGME_KEYLIST_MODERN_EXTERN,
+	GPGME_KEYLIST_MODE_SIGS, GPGME_KEYLIST_MODE_VALIDATE): Change from
+	enum to macros.
+	(gpgme_keylist_mode_t): Define as unsigned int.
+	(gpgme_key_t): Change type of keylist_mode to
+	gpgme_keylist_mode_t.
+
+2004-09-23  Marcus Brinkmann  <marcus@g10code.de>
+
+	* data.c (_gpgme_data_outbound_handler): Close the file descriptor
+	if we get an EPIPE.
+	
+	* data-stream.c (stream_seek): Call ftello and return the current
+	offset.
+	* data.h (struct gpgme_data): Change type of data.mem.offset to
+	off_t.
+	* data.c (gpgme_data_seek): Check dh->cbs->seek callback, not read
+	callback.  If SEEK_CUR, adjust the offset by the pending buffer
+	size.  Clear pending buffer on success.
+
+
+2004-09-14  Marcus Brinkmann  <marcus@g10code.de>
+
+	* gpgme.m4: Add copyright notice.
+
+2004-08-18  Marcus Brinkmann  <marcus@g10code.de>
+
+	* passphrase.c (_gpgme_passphrase_status_handler): Always run the
+	status handler.
+
+2004-08-17  Marcus Brinkmann  <marcus@g10code.de>
+
+	* rungpg.c (build_argv): Use --no-sk-comment, not --no-comment.
+
+2004-06-23  Marcus Brinkmann  <marcus@g10code.de>
+
+	* key.c (_gpgme_key_append_name): Make sure tail points to the
+	byte following the uid.
+	(_gpgme_key_add_sig): Likewise.  Don't use calloc, but malloc and
+	memset.
+
 2004-06-02  Marcus Brinkmann  <marcus@g10code.de>
 
 	* libgpgme.vers: Remove C-style comment, which is not supported by
@@ -2664,7 +3503,7 @@
 	* import.c (append_xml_impinfo): Kludge to print fingerprint
 	instead of keyid for use with gpgsm.
 	(import_status_handler): Set a flag to know whether any import
-	occurred.
+	occured.
 	(gpgme_op_import): Reurn -1 if no certificate ewas imported.
 
 2002-06-25  Werner Koch  <wk@gnupg.org>
@@ -4462,7 +5301,7 @@
 	* data.c (gpgme_data_rewind): Allow to rewind data_type_none.
 
 
- Copyright 2001, 2002, 2003, 2004 g10 Code GmbH
+ Copyright 2001, 2002, 2003, 2004, 2005 g10 Code GmbH
 
  This file is free software; as a special exception the author gives
  unlimited permission to copy and/or distribute it, with or without
Index: libkdenetwork/libgpgme-copy/gpgme/data.c
===================================================================
--- libkdenetwork/libgpgme-copy/gpgme/data.c	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkdenetwork/libgpgme-copy/gpgme/data.c	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,22 +1,23 @@
 /* data.c - An abstraction for data objects.
-   Copyright (C) 2002, 2003 g10 Code GmbH
+   Copyright (C) 2002, 2003, 2004, 2005 g10 Code GmbH
 
    This file is part of GPGME.
  
    GPGME is free software; you can redistribute it and/or modify it
-   under the terms of the GNU General Public License as published by
-   the Free Software Foundation; either version 2 of the License, or
-   (at your option) any later version.
- 
+   under the terms of the GNU Lesser General Public License as
+   published by the Free Software Foundation; either version 2.1 of
+   the License, or (at your option) any later version.
+   
    GPGME is distributed in the hope that it will be useful, but
    WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
-   General Public License for more details.
+   Lesser General Public License for more details.
+   
+   You should have received a copy of the GNU Lesser General Public
+   License along with this program; if not, write to the Free Software
+   Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
+   02111-1307, USA.  */
 
-   You should have received a copy of the GNU General Public License
-   along with GPGME; if not, write to the Free Software Foundation,
-   Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA.  */
-
 #if HAVE_CONFIG_H
 #include <config.h>
 #endif
@@ -30,7 +31,7 @@
 #include "data.h"
 #include "util.h"
 #include "ops.h"
-#include "io.h"
+#include "priv-io.h"
 
 
 gpgme_error_t
@@ -56,8 +57,12 @@
 void
 _gpgme_data_release (gpgme_data_t dh)
 {
-  if (dh)
-    free (dh);
+  if (!dh)
+    return;
+
+  if (dh->file_name)
+    free (dh->file_name);
+  free (dh);
 }
 
 
@@ -74,7 +79,7 @@
     }
   if (!dh->cbs->read)
     {
-      errno = EOPNOTSUPP;
+      errno = ENOSYS;
       return -1;
     }
   return (*dh->cbs->read) (dh, buffer, size);
@@ -94,7 +99,7 @@
     }
   if (!dh->cbs->write)
     {
-      errno = EOPNOTSUPP;
+      errno = ENOSYS;
       return -1;
     }
   return (*dh->cbs->write) (dh, buffer, size);
@@ -112,12 +117,22 @@
       errno = EINVAL;
       return -1;
     }
-  if (!dh->cbs->read)
+  if (!dh->cbs->seek)
     {
-      errno = EOPNOTSUPP;
+      errno = ENOSYS;
       return -1;
     }
-  return (*dh->cbs->seek) (dh, offset, whence);
+
+  /* For relative movement, we must take into account the actual
+     position of the read counter.  */
+  if (whence == SEEK_CUR)
+    offset -= dh->pending_len;
+
+  offset = (*dh->cbs->seek) (dh, offset, whence);
+  if (offset >= 0)
+    dh->pending_len = 0;
+
+  return offset;
 }
 
 
@@ -156,6 +171,41 @@
   return 0;
 }
 
+
+/* Set the file name associated with the data object with handle DH to
+   FILE_NAME.  */
+gpgme_error_t
+gpgme_data_set_file_name (gpgme_data_t dh, const char *file_name)
+{
+  if (!dh)
+    return gpg_error (GPG_ERR_INV_VALUE);
+
+  if (dh->file_name)
+    free (dh->file_name);
+
+  if (file_name)
+    {
+      dh->file_name = strdup (file_name);
+      if (!dh->file_name)
+	return gpg_error_from_errno (errno);
+    }
+  else
+    dh->file_name = 0;
+
+  return 0;
+}
+
+/* Get the file name associated with the data object with handle DH,
+   or NULL if there is none.  */
+char *
+gpgme_data_get_file_name (gpgme_data_t dh)
+{
+  if (!dh)
+    return NULL;
+
+  return dh->file_name;
+}
+
 
 /* Functions to support the wait interface.  */
 
@@ -167,7 +217,7 @@
   char *bufp = buffer;
   ssize_t buflen;
 
-  buflen = read (fd, buffer, BUFFER_SIZE);
+  buflen = _gpgme_io_read (fd, buffer, BUFFER_SIZE);
   if (buflen < 0)
     return gpg_error_from_errno (errno);
   if (buflen == 0)
@@ -209,9 +259,19 @@
     }
 
   nwritten = _gpgme_io_write (fd, dh->pending, dh->pending_len);
-  if (nwritten == -1 && errno == EAGAIN )
+  if (nwritten == -1 && errno == EAGAIN)
     return 0;
 
+  if (nwritten == -1 && errno == EPIPE)
+    {
+      /* Not much we can do.  The other end closed the pipe, but we
+	 still have data.  This should only ever happen if the other
+	 end is going to tell us what happened on some other channel.
+	 Silently close our end.  */
+      _gpgme_io_close (fd);
+      return 0;
+    }
+
   if (nwritten <= 0)
     return gpg_error_from_errno (errno);
 
@@ -220,3 +280,14 @@
   dh->pending_len -= nwritten;
   return 0;
 }
+
+
+/* Get the file descriptor associated with DH, if possible.  Otherwise
+   return -1.  */
+int
+_gpgme_data_get_fd (gpgme_data_t dh)
+{
+  if (!dh || !dh->cbs->get_fd)
+    return -1;
+  return (*dh->cbs->get_fd) (dh);
+}
Index: libkdenetwork/libgpgme-copy/gpgme/signers.c
===================================================================
--- libkdenetwork/libgpgme-copy/gpgme/signers.c	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkdenetwork/libgpgme-copy/gpgme/signers.c	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,22 +1,23 @@
 /* signers.c - Maintain signer sets.
    Copyright (C) 2001 Werner Koch (dd9jn)
-   Copyright (C) 2001, 2002, 2003 g10 Code GmbH
+   Copyright (C) 2001, 2002, 2003, 2004 g10 Code GmbH
  
    This file is part of GPGME.
  
    GPGME is free software; you can redistribute it and/or modify it
-   under the terms of the GNU General Public License as published by
-   the Free Software Foundation; either version 2 of the License, or
-   (at your option) any later version.
- 
+   under the terms of the GNU Lesser General Public License as
+   published by the Free Software Foundation; either version 2.1 of
+   the License, or (at your option) any later version.
+   
    GPGME is distributed in the hope that it will be useful, but
    WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
-   General Public License for more details.
- 
-   You should have received a copy of the GNU General Public License
-   along with GPGME; if not, write to the Free Software Foundation,
-   Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301, USA.  */
+   Lesser General Public License for more details.
+   
+   You should have received a copy of the GNU Lesser General Public
+   License along with this program; if not, write to the Free Software
+   Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
+   02111-1307, USA.  */
 
 #if HAVE_CONFIG_H
 #include <config.h>
Index: libkdenetwork/libgpgme-copy/gpgme/decrypt.c
===================================================================
--- libkdenetwork/libgpgme-copy/gpgme/decrypt.c	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkdenetwork/libgpgme-copy/gpgme/decrypt.c	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -5,18 +5,19 @@
    This file is part of GPGME.
  
    GPGME is free software; you can redistribute it and/or modify it
-   under the terms of the GNU General Public License as published by
-   the Free Software Foundation; either version 2 of the License, or
-   (at your option) any later version.
- 
+   under the terms of the GNU Lesser General Public License as
+   published by the Free Software Foundation; either version 2.1 of
+   the License, or (at your option) any later version.
+   
    GPGME is distributed in the hope that it will be useful, but
    WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
-   General Public License for more details.
- 
-   You should have received a copy of the GNU General Public License
-   along with GPGME; if not, write to the Free Software Foundation,
-   Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301, USA.  */
+   Lesser General Public License for more details.
+   
+   You should have received a copy of the GNU Lesser General Public
+   License along with this program; if not, write to the Free Software
+   Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
+   02111-1307, USA.  */
 
 #if HAVE_CONFIG_H
 #include <config.h>
@@ -37,6 +38,11 @@
 
   int okay;
   int failed;
+  
+  /* A pointer to the next pointer of the last recipient in the list.
+     This makes appending new invalid signers painless while
+     preserving the order.  */
+  gpgme_recipient_t *last_recipient_p;
 } *op_data_t;
 
 
@@ -47,6 +53,9 @@
 
   if (opd->result.unsupported_algorithm)
     free (opd->result.unsupported_algorithm);
+
+  if (opd->result.file_name)
+    free (opd->result.file_name);
 }
 
 
@@ -66,6 +75,60 @@
 }
 
 
+static gpgme_error_t
+parse_enc_to (char *args, gpgme_recipient_t *recp)
+{
+  gpgme_recipient_t rec;
+  char *tail;
+  int i;
+
+  rec = malloc (sizeof (*rec));
+  if (!rec)
+    return gpg_error_from_errno (errno);
+
+  rec->next = NULL;
+  rec->keyid = rec->_keyid;
+  rec->status = 0;
+
+  for (i = 0; i < sizeof (rec->_keyid) - 1; i++)
+    {
+      if (args[i] == '\0' || args[i] == ' ')
+	break;
+
+      rec->_keyid[i] = args[i];
+    }
+  rec->_keyid[i] = '\0';
+
+  args = &args[i];
+  if (*args != '\0' && *args != ' ')
+    {
+      free (rec);
+      return gpg_error (GPG_ERR_INV_ENGINE);
+    }
+
+  while (*args == ' ')
+    args++;
+
+  if (*args)
+    {
+      errno = 0;
+      rec->pubkey_algo = strtol (args, &tail, 0);
+      if (errno || args == tail || *tail != ' ')
+	{
+	  /* The crypto backend does not behave.  */
+	  free (rec);
+	  return gpg_error (GPG_ERR_INV_ENGINE);
+	}
+    }
+
+  /* FIXME: The key length is always 0 right now, so no need to parse
+     it.  */
+
+  *recp = rec;
+  return 0;
+}
+
+
 gpgme_error_t
 _gpgme_decrypt_status_handler (void *priv, gpgme_status_code_t code,
 			       char *args)
@@ -150,7 +213,39 @@
 	  }
       }
       break;
-        
+
+    case GPGME_STATUS_ENC_TO:
+      err = parse_enc_to (args, opd->last_recipient_p);
+      if (err)
+	return err;
+
+      opd->last_recipient_p = &(*opd->last_recipient_p)->next;
+      break;
+
+    case GPGME_STATUS_NO_SECKEY:
+      {
+	gpgme_recipient_t rec = opd->result.recipients;
+
+	while (rec)
+	  {
+	    if (!strcmp (rec->keyid, args))
+	      {
+		rec->status = gpg_error (GPG_ERR_NO_SECKEY);
+		break;
+	      }
+	    rec = rec->next;
+	  }
+	/* FIXME: Is this ok?  */
+	if (!rec)
+	  return gpg_error (GPG_ERR_INV_ENGINE);
+      }
+      break;
+
+    case GPGME_STATUS_PLAINTEXT:
+      err = _gpgme_parse_plaintext (args, &opd->result.file_name);
+      if (err)
+	return err;
+      
     default:
       break;
     }
@@ -174,11 +269,18 @@
 gpgme_error_t
 _gpgme_op_decrypt_init_result (gpgme_ctx_t ctx)
 {
+  gpgme_error_t err;
   void *hook;
   op_data_t opd;
 
-  return _gpgme_op_data_lookup (ctx, OPDATA_DECRYPT, &hook,
-				sizeof (*opd), release_op_data);
+  err = _gpgme_op_data_lookup (ctx, OPDATA_DECRYPT, &hook,
+			       sizeof (*opd), release_op_data);
+  opd = hook;
+  if (err)
+    return err;
+
+  opd->last_recipient_p = &opd->result.recipients;
+  return 0;
 }
 
 
Index: libkdenetwork/libgpgme-copy/gpgme/data.h
===================================================================
--- libkdenetwork/libgpgme-copy/gpgme/data.h	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkdenetwork/libgpgme-copy/gpgme/data.h	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,21 +1,22 @@
 /* data.h - Internal data object abstraction interface.
-   Copyright (C) 2002 g10 Code GmbH
+   Copyright (C) 2002, 2004, 2005 g10 Code GmbH
  
    This file is part of GPGME.
  
    GPGME is free software; you can redistribute it and/or modify it
-   under the terms of the GNU General Public License as published by
-   the Free Software Foundation; either version 2 of the License, or
-   (at your option) any later version.
- 
+   under the terms of the GNU Lesser General Public License as
+   published by the Free Software Foundation; either version 2.1 of
+   the License, or (at your option) any later version.
+   
    GPGME is distributed in the hope that it will be useful, but
    WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
-   General Public License for more details.
- 
-   You should have received a copy of the GNU General Public License
-   along with GPGME; if not, write to the Free Software Foundation,
-   Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301, USA.  */
+   Lesser General Public License for more details.
+   
+   You should have received a copy of the GNU Lesser General Public
+   License along with this program; if not, write to the Free Software
+   Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
+   02111-1307, USA.  */
 
 #ifndef DATA_H
 #define DATA_H
@@ -51,12 +52,16 @@
 /* Release the data object with the handle DH.  */
 typedef void (*gpgme_data_release_cb) (gpgme_data_t dh);
 
+/* Get the FD associated with the handle DH, or -1.  */
+typedef int (*gpgme_data_get_fd_cb) (gpgme_data_t dh);
+
 struct _gpgme_data_cbs
 {
   gpgme_data_read_cb read;
   gpgme_data_write_cb write;
   gpgme_data_seek_cb seek;
   gpgme_data_release_cb release;
+  gpgme_data_get_fd_cb get_fd;
 };
 
 struct gpgme_data
@@ -76,6 +81,9 @@
   char pending[BUFFER_SIZE];
   int pending_len;
 
+  /* File name of the data object.  */
+  char *file_name;
+
   union
   {
     /* For gpgme_data_new_from_fd.  */
@@ -99,7 +107,7 @@
       /* Allocated size of BUFFER.  */
       size_t size;
       size_t length;
-      size_t offset;
+      off_t offset;
     } mem;
 
     /* For gpgme_data_new_from_read_cb.  */
@@ -117,4 +125,8 @@
 
 void _gpgme_data_release (gpgme_data_t dh);
 
+/* Get the file descriptor associated with DH, if possible.  Otherwise
+   return -1.  */
+int _gpgme_data_get_fd (gpgme_data_t dh);
+
 #endif	/* DATA_H */
Index: libkdenetwork/libgpgme-copy/gpgme/libgpgme.vers
===================================================================
--- libkdenetwork/libgpgme-copy/gpgme/libgpgme.vers	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkdenetwork/libgpgme-copy/gpgme/libgpgme.vers	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,5 +1,5 @@
 # libgpgme.vers - List of symbols to export.
-# Copyright (C) 2002, 2004 g10 Code GmbH
+# Copyright (C) 2002, 2004, 2005 g10 Code GmbH
 #
 # This file is part of GPGME.
 #
@@ -15,9 +15,30 @@
 #
 # You should have received a copy of the GNU Lesser General Public
 # License along with this program; if not, write to the Free Software
-# Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301, USA
+# Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA 02111-1307, USA
 
+#-------------------------------------------------------
+# Please remember to add new functions also to gpgme.def
+#-------------------------------------------------------
 
+GPGME_1.1 {
+  global:
+    gpgme_set_engine_info;
+
+    gpgme_ctx_get_engine_info;
+    gpgme_ctx_set_engine_info;
+
+    gpgme_data_set_file_name;
+    gpgme_data_get_file_name;
+
+    gpgme_sig_notation_clear;
+    gpgme_sig_notation_add;
+    gpgme_sig_notation_get;
+
+    gpgme_free;
+};
+
+
 GPGME_1.0 {
   global:
     gpgme_check_version;
Index: libkdenetwork/libgpgme-copy/gpgme/posix-sema.c
===================================================================
--- libkdenetwork/libgpgme-copy/gpgme/posix-sema.c	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkdenetwork/libgpgme-copy/gpgme/posix-sema.c	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,22 +1,23 @@
 /* posix-sema.c 
    Copyright (C) 2001 Werner Koch (dd9jn)
-   Copyright (C) 2001, 2002 g10 Code GmbH
+   Copyright (C) 2001, 2002, 2004 g10 Code GmbH
 
    This file is part of GPGME.
  
    GPGME is free software; you can redistribute it and/or modify it
-   under the terms of the GNU General Public License as published by
-   the Free Software Foundation; either version 2 of the License, or
-   (at your option) any later version.
- 
+   under the terms of the GNU Lesser General Public License as
+   published by the Free Software Foundation; either version 2.1 of
+   the License, or (at your option) any later version.
+   
    GPGME is distributed in the hope that it will be useful, but
    WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
-   General Public License for more details.
- 
-   You should have received a copy of the GNU General Public License
-   along with GPGME; if not, write to the Free Software Foundation,
-   Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301, USA.  */
+   Lesser General Public License for more details.
+   
+   You should have received a copy of the GNU Lesser General Public
+   License along with this program; if not, write to the Free Software
+   Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
+   02111-1307, USA.  */
 
 #ifdef HAVE_CONFIG_H
 #include <config.h>
@@ -39,8 +40,6 @@
 void
 _gpgme_sema_subsystem_init ()
 {
-  /* FIXME: we should check that there is only one thread running */
-  _gpgme_ath_init ();
 }
 
 void
Index: libkdenetwork/libgpgme-copy/gpgme/version.c
===================================================================
--- libkdenetwork/libgpgme-copy/gpgme/version.c	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkdenetwork/libgpgme-copy/gpgme/version.c	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,22 +1,23 @@
 /* version.c - Version check routines.
    Copyright (C) 2000 Werner Koch (dd9jn)
-   Copyright (C) 2001, 2002, 2003 g10 Code GmbH
+   Copyright (C) 2001, 2002, 2003, 2004, 2005 g10 Code GmbH
  
    This file is part of GPGME.
  
    GPGME is free software; you can redistribute it and/or modify it
-   under the terms of the GNU General Public License as published by
-   the Free Software Foundation; either version 2 of the License, or
-   (at your option) any later version.
- 
+   under the terms of the GNU Lesser General Public License as
+   published by the Free Software Foundation; either version 2.1 of
+   the License, or (at your option) any later version.
+   
    GPGME is distributed in the hope that it will be useful, but
    WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
-   General Public License for more details.
- 
-   You should have received a copy of the GNU General Public License
-   along with GPGME; if not, write to the Free Software Foundation,
-   Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301, USA.  */
+   Lesser General Public License for more details.
+   
+   You should have received a copy of the GNU Lesser General Public
+   License along with this program; if not, write to the Free Software
+   Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
+   02111-1307, USA.  */
 
 #if HAVE_CONFIG_H
 #include <config.h>
@@ -26,11 +27,15 @@
 #include <ctype.h>
 
 #include "gpgme.h"
-#include "io.h"
+#include "priv-io.h"
 
 /* For _gpgme_sema_subsystem_init ().  */
 #include "sema.h"
 
+#ifdef HAVE_ASSUAN_H
+#include "assuan.h"
+#endif
+
 
 /* Bootstrap the subsystems needed for concurrent operation.  This
    must be done once at startup.  We can not guarantee this using a
@@ -47,6 +52,9 @@
 
   _gpgme_sema_subsystem_init ();
   _gpgme_io_subsystem_init ();
+#ifdef HAVE_ASSUAN_H
+  assuan_set_assuan_err_source (GPG_ERR_SOURCE_GPGME);
+#endif
 
   done = 1;
 }
@@ -103,7 +111,9 @@
 }
 
 
-const char *
+/* Return true if MY_VERSION is at least REQ_VERSION, and false
+   otherwise.  */
+int
 _gpgme_compare_versions (const char *my_version,
 			 const char *rq_version)
 {
@@ -112,17 +122,17 @@
   const char *my_plvl, *rq_plvl;
 
   if (!rq_version)
-    return my_version;
+    return 1;
   if (!my_version)
-    return NULL;
+    return 0;
 
   my_plvl = parse_version_string (my_version, &my_major, &my_minor, &my_micro);
   if (!my_plvl)
-    return NULL;
+    return 0;
 
   rq_plvl = parse_version_string (rq_version, &rq_major, &rq_minor, &rq_micro);
   if (!rq_plvl)
-    return NULL;
+    return 0;
 
   if (my_major > rq_major
       || (my_major == rq_major && my_minor > rq_minor)
@@ -130,9 +140,9 @@
 	  && my_micro > rq_micro)
       || (my_major == rq_major && my_minor == rq_minor
 	  && my_micro == rq_micro && strcmp (my_plvl, rq_plvl) >= 0))
-    return my_version;
+    return 1;
 
-  return NULL;
+  return 0;
 }
 
 
@@ -149,7 +159,7 @@
 gpgme_check_version (const char *req_version)
 {
   do_subsystem_inits ();
-  return _gpgme_compare_versions (VERSION, req_version);
+  return _gpgme_compare_versions (VERSION, req_version) ? VERSION : NULL;
 }
 
 
@@ -197,6 +207,8 @@
 	  mark = strchr (&line[linelen], '\n');
 	  if (mark)
 	    {
+	      if (mark > &line[0] && *mark == '\r')
+		mark--;
 	      *mark = '\0';
 	      break;
 	    }
Index: libkdenetwork/libgpgme-copy/gpgme/key.c
===================================================================
--- libkdenetwork/libgpgme-copy/gpgme/key.c	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkdenetwork/libgpgme-copy/gpgme/key.c	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,22 +1,23 @@
 /* key.c - Key objects.
    Copyright (C) 2000 Werner Koch (dd9jn)
-   Copyright (C) 2001, 2002, 2003 g10 Code GmbH
+   Copyright (C) 2001, 2002, 2003, 2004 g10 Code GmbH
 
    This file is part of GPGME.
  
    GPGME is free software; you can redistribute it and/or modify it
-   under the terms of the GNU General Public License as published by
-   the Free Software Foundation; either version 2 of the License, or
-   (at your option) any later version.
- 
+   under the terms of the GNU Lesser General Public License as
+   published by the Free Software Foundation; either version 2.1 of
+   the License, or (at your option) any later version.
+   
    GPGME is distributed in the hope that it will be useful, but
    WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
-   General Public License for more details.
- 
-   You should have received a copy of the GNU General Public License
-   along with GPGME; if not, write to the Free Software Foundation,
-   Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301, USA.  */
+   Lesser General Public License for more details.
+   
+   You should have received a copy of the GNU Lesser General Public
+   License along with this program; if not, write to the Free Software
+   Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
+   02111-1307, USA.  */
 
 #if HAVE_CONFIG_H
 #include <config.h>
@@ -336,9 +337,19 @@
 
       while (keysig)
 	{
-	  gpgme_key_sig_t next = keysig->next;
+	  gpgme_key_sig_t next_keysig = keysig->next;
+	  gpgme_sig_notation_t notation = keysig->notations;
+
+	  while (notation)
+	    {
+	      gpgme_sig_notation_t next_notation = notation->next;
+
+	      _gpgme_sig_notation_free (notation);
+	      notation = next_notation;
+	    }
+
           free (keysig);
-	  keysig = next;
+	  keysig = next_keysig;
         }
       free (uid);
       uid = next_uid;
Index: libkdenetwork/libgpgme-copy/gpgme/gpgme.c
===================================================================
--- libkdenetwork/libgpgme-copy/gpgme/gpgme.c	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkdenetwork/libgpgme-copy/gpgme/gpgme.c	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,22 +1,23 @@
 /* gpgme.c - GnuPG Made Easy.
    Copyright (C) 2000 Werner Koch (dd9jn)
-   Copyright (C) 2001, 2002, 2003 g10 Code GmbH
+   Copyright (C) 2001, 2002, 2003, 2004, 2005 g10 Code GmbH
 
    This file is part of GPGME.
  
    GPGME is free software; you can redistribute it and/or modify it
-   under the terms of the GNU General Public License as published by
-   the Free Software Foundation; either version 2 of the License, or
-   (at your option) any later version.
- 
+   under the terms of the GNU Lesser General Public License as
+   published by the Free Software Foundation; either version 2.1 of
+   the License, or (at your option) any later version.
+   
    GPGME is distributed in the hope that it will be useful, but
    WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
-   General Public License for more details.
- 
-   You should have received a copy of the GNU General Public License
-   along with GPGME; if not, write to the Free Software Foundation,
-   Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301, USA.  */
+   Lesser General Public License for more details.
+   
+   You should have received a copy of the GNU Lesser General Public
+   License along with this program; if not, write to the Free Software
+   Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
+   02111-1307, USA.  */
 
 #if HAVE_CONFIG_H
 #include <config.h>
@@ -50,8 +51,16 @@
   ctx = calloc (1, sizeof *ctx);
   if (!ctx)
     return gpg_error_from_errno (errno);
+
+  _gpgme_engine_info_copy (&ctx->engine_info);
+  if (!ctx->engine_info)
+    {
+      free (ctx);
+      return gpg_error_from_errno (errno);
+    }
+
   ctx->keylist_mode = GPGME_KEYLIST_MODE_LOCAL;
-  ctx->include_certs = 1;
+  ctx->include_certs = GPGME_INCLUDE_CERTS_DEFAULT;
   ctx->protocol = GPGME_PROTOCOL_OpenPGP;
   _gpgme_fd_table_init (&ctx->fdt);
 
@@ -62,6 +71,7 @@
       if (!ctx->lc_ctype)
 	{
 	  UNLOCK (def_lc_lock);
+	  _gpgme_engine_info_release (ctx->engine_info);
 	  free (ctx);
 	  return gpg_error_from_errno (errno);
 	}
@@ -77,6 +87,7 @@
 	  UNLOCK (def_lc_lock);
 	  if (ctx->lc_ctype)
 	    free (ctx->lc_ctype);
+	  _gpgme_engine_info_release (ctx->engine_info);
 	  free (ctx);
 	  return gpg_error_from_errno (errno);
 	}
@@ -120,6 +131,7 @@
     free (ctx->lc_ctype);
   if (ctx->lc_messages)
     free (ctx->lc_messages);
+  _gpgme_engine_info_release (ctx->engine_info);
   free (ctx);
 }
 
@@ -147,7 +159,17 @@
   if (protocol != GPGME_PROTOCOL_OpenPGP && protocol != GPGME_PROTOCOL_CMS)
     return gpg_error (GPG_ERR_INV_VALUE);
 
-  ctx->protocol = protocol;
+  if (ctx->protocol != protocol)
+    {
+      /* Shut down the engine when switching protocols.  */
+      if (ctx->engine)
+	{
+	  _gpgme_engine_release (ctx->engine);
+	  ctx->engine = NULL;
+	}
+
+      ctx->protocol = protocol;
+    }
   return 0;
 }
 
@@ -210,12 +232,14 @@
 
 
 /* Set the number of certifications to include in an S/MIME message.
-   The default is 1 (only the cert of the sender).  -1 means all
-   certs, and -2 means all certs except the root cert.  */
+   The default is GPGME_INCLUDE_CERTS_DEFAULT.  -1 means all certs,
+   and -2 means all certs except the root cert.  */
 void
 gpgme_set_include_certs (gpgme_ctx_t ctx, int nr_of_certs)
 {
-  if (nr_of_certs < -2)
+  if (nr_of_certs == GPGME_INCLUDE_CERTS_DEFAULT)
+    ctx->include_certs = GPGME_INCLUDE_CERTS_DEFAULT;
+  else if (nr_of_certs < -2)
     ctx->include_certs = -2;
   else
     ctx->include_certs = nr_of_certs;
@@ -237,11 +261,6 @@
 gpgme_error_t
 gpgme_set_keylist_mode (gpgme_ctx_t ctx, gpgme_keylist_mode_t mode)
 {
-  if (!((mode & GPGME_KEYLIST_MODE_LOCAL)
-	|| (mode & GPGME_KEYLIST_MODE_EXTERN)
-	|| (mode & GPGME_KEYLIST_MODE_SIGS)))
-    return gpg_error (GPG_ERR_INV_VALUE);
-
   ctx->keylist_mode = mode;
   return 0;
 }
@@ -333,8 +352,8 @@
 gpgme_set_locale (gpgme_ctx_t ctx, int category, const char *value)
 {
   int failed = 0;
-  char *new_lc_ctype;
-  char *new_lc_messages;
+  char *new_lc_ctype = NULL;
+  char *new_lc_messages = NULL;
 
 #define PREPARE_ONE_LOCALE(lcat, ucat)				\
   if (!failed && value						\
@@ -343,12 +362,12 @@
       new_lc_ ## lcat = strdup (value);				\
       if (!new_lc_ ## lcat)					\
         failed = 1;						\
-    }								\
-  else								\
-    new_lc_ ## lcat = NULL;
+    }
 
   PREPARE_ONE_LOCALE (ctype, CTYPE);
+#ifdef LC_MESSAGES
   PREPARE_ONE_LOCALE (messages, MESSAGES);
+#endif
 
   if (failed)
     {
@@ -382,7 +401,9 @@
   if (!ctx)
     LOCK (def_lc_lock);
   SET_ONE_LOCALE (ctype, CTYPE);
+#ifdef LC_MESSAGES
   SET_ONE_LOCALE (messages, MESSAGES);
+#endif
   if (!ctx)
     UNLOCK (def_lc_lock);
 
@@ -390,6 +411,98 @@
 }
 
 
+/* Get the information about the configured engines.  A pointer to the
+   first engine in the statically allocated linked list is returned.
+   The returned data is valid until the next gpgme_ctx_set_engine_info.  */
+gpgme_engine_info_t
+gpgme_ctx_get_engine_info (gpgme_ctx_t ctx)
+{
+  return ctx->engine_info;
+}
+
+
+/* Set the engine info for the context CTX, protocol PROTO, to the
+   file name FILE_NAME and the home directory HOME_DIR.  */
+gpgme_error_t
+gpgme_ctx_set_engine_info (gpgme_ctx_t ctx, gpgme_protocol_t proto,
+			   const char *file_name, const char *home_dir)
+{
+  /* Shut down the engine when changing engine info.  */
+  if (ctx->engine)
+    {
+      _gpgme_engine_release (ctx->engine);
+      ctx->engine = NULL;
+    }
+  return _gpgme_set_engine_info (ctx->engine_info, proto,
+				 file_name, home_dir);
+}
+
+
+/* Clear all notation data from the context.  */
+void
+gpgme_sig_notation_clear (gpgme_ctx_t ctx)
+{
+  gpgme_sig_notation_t notation;
+
+  if (!ctx)
+    return;
+
+  notation = ctx->sig_notations;
+  while (notation)
+    {
+      gpgme_sig_notation_t next_notation = notation->next;
+      _gpgme_sig_notation_free (notation);
+      notation = next_notation;
+    }
+}
+
+
+/* Add the human-readable notation data with name NAME and value VALUE
+   to the context CTX, using the flags FLAGS.  If NAME is NULL, then
+   VALUE should be a policy URL.  The flag
+   GPGME_SIG_NOTATION_HUMAN_READABLE is forced to be true for notation
+   data, and false for policy URLs.  */
+gpgme_error_t
+gpgme_sig_notation_add (gpgme_ctx_t ctx, const char *name,
+			const char *value, gpgme_sig_notation_flags_t flags)
+{
+  gpgme_error_t err;
+  gpgme_sig_notation_t notation;
+  gpgme_sig_notation_t *lastp;
+
+  if (!ctx)
+     gpg_error (GPG_ERR_INV_VALUE);
+
+  if (name)
+    flags |= GPGME_SIG_NOTATION_HUMAN_READABLE;
+  else
+    flags &= ~GPGME_SIG_NOTATION_HUMAN_READABLE;
+
+  err = _gpgme_sig_notation_create (&notation, name, name ? strlen (name) : 0,
+				    value, value ? strlen (value) : 0, flags);
+  if (err)
+    return err;
+
+  lastp = &ctx->sig_notations;
+  while (*lastp)
+    lastp = &(*lastp)->next;
+
+  *lastp = notation;
+  return 0;
+}
+
+
+/* Get the sig notations for this context.  */
+gpgme_sig_notation_t
+gpgme_sig_notation_get (gpgme_ctx_t ctx)
+{
+  if (!ctx)
+    return NULL;
+
+  return ctx->sig_notations;
+}
+  
+
 const char *
 gpgme_pubkey_algo_name (gpgme_pubkey_algo_t algo)
 {
Index: libkdenetwork/libgpgme-copy/gpgme/delete.c
===================================================================
--- libkdenetwork/libgpgme-copy/gpgme/delete.c	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkdenetwork/libgpgme-copy/gpgme/delete.c	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,21 +1,22 @@
 /* delete.c - Delete a key.
-   Copyright (C) 2001, 2002, 2003 g10 Code GmbH
+   Copyright (C) 2001, 2002, 2003, 2004 g10 Code GmbH
 
    This file is part of GPGME.
  
    GPGME is free software; you can redistribute it and/or modify it
-   under the terms of the GNU General Public License as published by
-   the Free Software Foundation; either version 2 of the License, or
-   (at your option) any later version.
- 
+   under the terms of the GNU Lesser General Public License as
+   published by the Free Software Foundation; either version 2.1 of
+   the License, or (at your option) any later version.
+   
    GPGME is distributed in the hope that it will be useful, but
    WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
-   General Public License for more details.
- 
-   You should have received a copy of the GNU General Public License
-   along with GPGME; if not, write to the Free Software Foundation,
-   Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301, USA.  */
+   Lesser General Public License for more details.
+   
+   You should have received a copy of the GNU Lesser General Public
+   License along with this program; if not, write to the Free Software
+   Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
+   02111-1307, USA.  */
 
 #if HAVE_CONFIG_H
 #include <config.h>
Index: libkdenetwork/libgpgme-copy/gpgme/progress.c
===================================================================
--- libkdenetwork/libgpgme-copy/gpgme/progress.c	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkdenetwork/libgpgme-copy/gpgme/progress.c	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,22 +1,23 @@
 /* progress.c -  status handler for progress status
    Copyright (C) 2000 Werner Koch (dd9jn)
-   Copyright (C) 2001, 2002, 2003 g10 Code GmbH
+   Copyright (C) 2001, 2002, 2003, 2004 g10 Code GmbH
  
    This file is part of GPGME.
  
    GPGME is free software; you can redistribute it and/or modify it
-   under the terms of the GNU General Public License as published by
-   the Free Software Foundation; either version 2 of the License, or
-   (at your option) any later version.
- 
+   under the terms of the GNU Lesser General Public License as
+   published by the Free Software Foundation; either version 2.1 of
+   the License, or (at your option) any later version.
+   
    GPGME is distributed in the hope that it will be useful, but
    WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
-   General Public License for more details.
- 
-   You should have received a copy of the GNU General Public License
-   along with GPGME; if not, write to the Free Software Foundation,
-   Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301, USA.  */
+   Lesser General Public License for more details.
+   
+   You should have received a copy of the GNU Lesser General Public
+   License along with this program; if not, write to the Free Software
+   Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
+   02111-1307, USA.  */
 
 #ifdef HAVE_CONFIG_H
 #include <config.h>
Index: libkdenetwork/libgpgme-copy/gpgme/gpgme.h
===================================================================
--- libkdenetwork/libgpgme-copy/gpgme/gpgme.h	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkdenetwork/libgpgme-copy/gpgme/gpgme.h	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,22 +1,23 @@
 /* gpgme.h - Public interface to GnuPG Made Easy.
    Copyright (C) 2000 Werner Koch (dd9jn)
-   Copyright (C) 2001, 2002, 2003, 2004 g10 Code GmbH
+   Copyright (C) 2001, 2002, 2003, 2004, 2005 g10 Code GmbH
 
    This file is part of GPGME.
  
    GPGME is free software; you can redistribute it and/or modify it
-   under the terms of the GNU General Public License as published by
-   the Free Software Foundation; either version 2 of the License, or
-   (at your option) any later version.
- 
+   under the terms of the GNU Lesser General Public License as
+   published by the Free Software Foundation; either version 2.1 of
+   the License, or (at your option) any later version.
+   
    GPGME is distributed in the hope that it will be useful, but
    WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
-   General Public License for more details.
- 
-   You should have received a copy of the GNU General Public License
-   along with GPGME; if not, write to the Free Software Foundation,
-   Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301, USA.  */
+   Lesser General Public License for more details.
+   
+   You should have received a copy of the GNU Lesser General Public
+   License along with this program; if not, write to the Free Software
+   Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
+   02111-1307, USA.  */
 
 #ifndef GPGME_H
 #define GPGME_H
@@ -37,10 +38,7 @@
   typedef long ssize_t;
 #else
 # include <sys/types.h>
-#ifdef _WIN32
-typedef long ssize_t;
 #endif
-#endif
 
 #ifdef __cplusplus
 extern "C" {
@@ -54,14 +52,9 @@
 
 /* Check for compiler features.  */
 #if __GNUC__
-#ifdef __GNUC_PATCHLEVEL__
 #define _GPGME_GCC_VERSION (__GNUC__ * 10000 \
                             + __GNUC_MINOR__ * 100 \
                             + __GNUC_PATCHLEVEL__)
-#else
-#define _GPGME_GCC_VERSION (__GNUC__ * 10000 \
-                            + __GNUC_MINOR__ * 100)
-#endif
 
 #if _GPGME_GCC_VERSION > 30100
 #define _GPGME_DEPRECATED	__attribute__ ((__deprecated__))
@@ -79,8 +72,9 @@
    AM_PATH_GPGME macro) check that this header matches the installed
    library.  Warning: Do not edit the next line.  configure will do
    that for you!  */
-#define GPGME_VERSION "0.9.0"
+#define GPGME_VERSION "1.1.4"
 
+
 
 /* Some opaque data types used by GPGME.  */
 
@@ -311,16 +305,55 @@
 
 
 /* The available keylist mode flags.  */
-typedef enum
-  {
-    GPGME_KEYLIST_MODE_LOCAL  = 1,
-    GPGME_KEYLIST_MODE_EXTERN = 2,
-    GPGME_KEYLIST_MODE_SIGS   = 4,
-    GPGME_KEYLIST_MODE_VALIDATE = 256
-  }
-gpgme_keylist_mode_t;
+#define GPGME_KEYLIST_MODE_LOCAL		1
+#define GPGME_KEYLIST_MODE_EXTERN		2
+#define GPGME_KEYLIST_MODE_SIGS			4
+#define GPGME_KEYLIST_MODE_SIG_NOTATIONS	8
+#define GPGME_KEYLIST_MODE_VALIDATE		256
 
+typedef unsigned int gpgme_keylist_mode_t;
+
 
+/* Signature notations.  */
+
+/* The available signature notation flags.  */
+#define GPGME_SIG_NOTATION_HUMAN_READABLE	1
+#define GPGME_SIG_NOTATION_CRITICAL		2
+
+typedef unsigned int gpgme_sig_notation_flags_t;
+
+struct _gpgme_sig_notation
+{
+  struct _gpgme_sig_notation *next;
+
+  /* If NAME is a null pointer, then VALUE contains a policy URL
+     rather than a notation.  */
+  char *name;
+
+  /* The value of the notation data.  */
+  char *value;
+
+  /* The length of the name of the notation data.  */
+  int name_len;
+
+  /* The length of the value of the notation data.  */
+  int value_len;
+
+  /* The accumulated flags.  */
+  gpgme_sig_notation_flags_t flags;
+
+  /* Notation data is human-readable.  */
+  unsigned int human_readable : 1;
+
+  /* Notation data is critical.  */
+  unsigned int critical : 1;
+
+  /* Internal to GPGME, do not use.  */
+  int _unused : 30;
+};
+typedef struct _gpgme_sig_notation *gpgme_sig_notation_t;
+
+
 /* The possible stati for the edit operation.  */
 typedef enum
   {
@@ -405,7 +438,17 @@
     GPGME_STATUS_TRUNCATED,
     GPGME_STATUS_ERROR,
     GPGME_STATUS_NEWSIG,
-    GPGME_STATUS_REVKEYSIG
+    GPGME_STATUS_REVKEYSIG,
+    GPGME_STATUS_SIG_SUBPACKET,
+    GPGME_STATUS_NEED_PASSPHRASE_PIN,
+    GPGME_STATUS_SC_OP_FAILURE,
+    GPGME_STATUS_SC_OP_SUCCESS,
+    GPGME_STATUS_CARDCTRL,
+    GPGME_STATUS_BACKUP_KEY_CREATED,
+    GPGME_STATUS_PKA_TRUST_BAD,
+    GPGME_STATUS_PKA_TRUST_GOOD,
+
+    GPGME_STATUS_PLAINTEXT
   }
 gpgme_status_code_t;
 
@@ -419,13 +462,16 @@
   gpgme_protocol_t protocol;
 
   /* The file name of the engine binary.  */
-  const char *file_name;
-
+  char *file_name;
+  
   /* The version string of the installed engine.  */
-  const char *version;
+  char *version;
 
   /* The minimum version required for GPGME.  */
   const char *req_version;
+
+  /* The home directory used, or NULL if default.  */
+  char *home_dir;
 };
 typedef struct _gpgme_engine_info *gpgme_engine_info_t;
 
@@ -462,8 +508,11 @@
   /* True if subkey can be used for authentication.  */
   unsigned int can_authenticate : 1;
 
+  /* True if subkey is qualified for signatures according to German law.  */
+  unsigned int is_qualified : 1;
+
   /* Internal to GPGME, do not use.  */
-  unsigned int _unused : 23;
+  unsigned int _unused : 22;
   
   /* Public key algorithm supported by this subkey.  */
   gpgme_pubkey_algo_t pubkey_algo;
@@ -548,6 +597,12 @@
 
   /* Crypto backend specific signature class.  */
   unsigned int sig_class;
+
+  /* Notation data and policy URLs.  */
+  gpgme_sig_notation_t notations;
+
+  /* Internal to GPGME, do not use.  */
+  gpgme_sig_notation_t _last_notation;
 };
 typedef struct _gpgme_key_sig *gpgme_key_sig_t;
 
@@ -623,8 +678,11 @@
   /* True if key can be used for authentication.  */
   unsigned int can_authenticate : 1;
 
+  /* True if subkey is qualified for signatures according to German law.  */
+  unsigned int is_qualified : 1;
+
   /* Internal to GPGME, do not use.  */
-  unsigned int _unused : 23;
+  unsigned int _unused : 22;
 
   /* This is the protocol supported by this key.  */
   gpgme_protocol_t protocol;
@@ -658,10 +716,7 @@
   gpgme_user_id_t _last_uid;
 
   /* The keylist mode that was active when listing the key.  */
-  /* Implementation note: We are using unsigned int here, and not
-     gpgme_keylist_mode_t, as the latter is currently an enum of
-     unknown size.  */
-  unsigned int keylist_mode;
+  gpgme_keylist_mode_t keylist_mode;
 };
 typedef struct _gpgme_key *gpgme_key_t;
 
@@ -714,6 +769,9 @@
 /* Return non-zero if text mode is set in CTX.  */
 int gpgme_get_textmode (gpgme_ctx_t ctx);
 
+/* Use whatever the default of the backend crypto engine is.  */
+#define GPGME_INCLUDE_CERTS_DEFAULT	-256
+
 /* Include up to NR_OF_CERTS certificates in an S/MIME message.  */
 void gpgme_set_include_certs (gpgme_ctx_t ctx, int nr_of_certs);
 
@@ -751,6 +809,19 @@
    locale if CTX is a null pointer.  */
 gpgme_error_t gpgme_set_locale (gpgme_ctx_t ctx, int category,
 				const char *value);
+
+/* Get the information about the configured engines.  A pointer to the
+   first engine in the statically allocated linked list is returned.
+   The returned data is valid until the next gpgme_ctx_set_engine_info.  */
+gpgme_engine_info_t gpgme_ctx_get_engine_info (gpgme_ctx_t ctx);
+
+/* Set the engine info for the context CTX, protocol PROTO, to the
+   file name FILE_NAME and the home directory HOME_DIR.  */
+gpgme_error_t gpgme_ctx_set_engine_info (gpgme_ctx_t ctx,
+					 gpgme_protocol_t proto,
+					 const char *file_name,
+					 const char *home_dir);
+
 
 /* Return a statically allocated string with the name of the public
    key algorithm ALGO, or NULL if that name is not known.  */
@@ -797,6 +868,22 @@
      _GPGME_DEPRECATED;
 
 
+/* Clear all notation data from the context.  */
+void gpgme_sig_notation_clear (gpgme_ctx_t ctx);
+
+/* Add the human-readable notation data with name NAME and value VALUE
+   to the context CTX, using the flags FLAGS.  If NAME is NULL, then
+   VALUE should be a policy URL.  The flag
+   GPGME_SIG_NOTATION_HUMAN_READABLE is forced to be true for notation
+   data, and false for policy URLs.  */
+gpgme_error_t gpgme_sig_notation_add (gpgme_ctx_t ctx, const char *name,
+				      const char *value,
+				      gpgme_sig_notation_flags_t flags);
+
+/* Get the sig notations for this context.  */
+gpgme_sig_notation_t gpgme_sig_notation_get (gpgme_ctx_t ctx);
+
+
 /* Run control.  */
 
 /* The type of an I/O callback function.  */
@@ -911,10 +998,13 @@
 				       int copy);
 
 /* Destroy the data buffer DH and return a pointer to its content.
-   The memory has be to released with free by the user.  It's size is
-   returned in R_LEN.  */
+   The memory has be to released with gpgme_free() by the user.  It's
+   size is returned in R_LEN.  */
 char *gpgme_data_release_and_get_mem (gpgme_data_t dh, size_t *r_len);
 
+/* Release the memory returned by gpgme_data_release_and_get_mem().  */
+void gpgme_free (void *buffer);
+
 gpgme_error_t gpgme_data_new_from_cbs (gpgme_data_t *dh,
 				       gpgme_data_cbs_t cbs,
 				       void *handle);
@@ -930,8 +1020,16 @@
 gpgme_error_t gpgme_data_set_encoding (gpgme_data_t dh,
 				       gpgme_data_encoding_t enc);
 
+/* Get the file name associated with the data object with handle DH, or
+   NULL if there is none.  */
+char *gpgme_data_get_file_name (gpgme_data_t dh);
 
+/* Set the file name associated with the data object with handle DH to
+   FILE_NAME.  */
+gpgme_error_t gpgme_data_set_file_name (gpgme_data_t dh,
+					const char *file_name);
 
+
 /* Create a new data buffer which retrieves the data from the callback
    function READ_CB.  Deprecated, please use gpgme_data_new_from_cbs
    instead.  */
@@ -1066,6 +1164,25 @@
 
 
 /* Decryption.  */
+
+struct _gpgme_recipient
+{
+  struct _gpgme_recipient *next;
+
+  /* The key ID of key for which the text was encrypted.  */
+  char *keyid;
+
+  /* Internal to GPGME, do not use.  */
+  char _keyid[16 + 1];
+
+  /* The public key algorithm of the recipient key.  */
+  gpgme_pubkey_algo_t pubkey_algo;
+
+  /* The status of the recipient.  */
+  gpgme_error_t status;
+};
+typedef struct _gpgme_recipient *gpgme_recipient_t;
+
 struct _gpgme_op_decrypt_result
 {
   char *unsupported_algorithm;
@@ -1075,6 +1192,12 @@
 
   /* Internal to GPGME, do not use.  */
   int _unused : 31;
+
+  gpgme_recipient_t recipients;
+
+  /* The original file name of the plaintext message, if
+     available.  */
+  char *file_name;
 };
 typedef struct _gpgme_op_decrypt_result *gpgme_decrypt_result_t;
 
@@ -1154,17 +1277,7 @@
 
 
 /* Verify.  */
-struct _gpgme_sig_notation
-{
-  struct _gpgme_sig_notation *next;
 
-  /* If NAME is a null pointer, then VALUE contains a policy URL
-     rather than a notation.  */
-  char *name;
-  char *value;
-};
-typedef struct _gpgme_sig_notation *gpgme_sig_notation_t;
-
 /* Flags used for the SUMMARY field in a gpgme_signature_t.  */
 typedef enum
   {
@@ -1178,7 +1291,7 @@
     GPGME_SIGSUM_CRL_MISSING = 0x0100,  /* CRL not available.  */
     GPGME_SIGSUM_CRL_TOO_OLD = 0x0200,  /* Available CRL is too old.  */
     GPGME_SIGSUM_BAD_POLICY  = 0x0400,  /* A policy was not met.  */
-    GPGME_SIGSUM_SYS_ERROR   = 0x0800   /* A system error occurred.  */
+    GPGME_SIGSUM_SYS_ERROR   = 0x0800   /* A system error occured.  */
   }
 gpgme_sigsum_t;
 
@@ -1207,17 +1320,33 @@
   /* Key should not have been used for signing.  */
   unsigned int wrong_key_usage : 1;
 
+  /* PKA status: 0 = not available, 1 = bad, 2 = okay, 3 = RFU. */
+  unsigned int pka_trust : 2;
+
   /* Internal to GPGME, do not use.  */
-  int _unused : 31;
+  int _unused : 29;
 
   gpgme_validity_t validity;
   gpgme_error_t validity_reason;
+
+  /* The public key algorithm used to create the signature.  */
+  gpgme_pubkey_algo_t pubkey_algo;
+
+  /* The hash algorithm used to create the signature.  */
+  gpgme_hash_algo_t hash_algo;
+
+  /* The mailbox from the PKA information or NULL. */
+  char *pka_address;
 };
 typedef struct _gpgme_signature *gpgme_signature_t;
 
 struct _gpgme_op_verify_result
 {
   gpgme_signature_t signatures;
+
+  /* The original file name of the plaintext message, if
+     available.  */
+  char *file_name;
 };
 typedef struct _gpgme_op_verify_result *gpgme_verify_result_t;
 
@@ -1234,24 +1363,23 @@
 
 
 /* Import.  */
-enum
-  {
-    /* The key was new.  */
-    GPGME_IMPORT_NEW = 1,
 
-    /* The key contained new user IDs.  */
-    GPGME_IMPORT_UID = 2,
+/* The key was new.  */
+#define GPGME_IMPORT_NEW	1
 
-    /* The key contained new signatures.  */
-    GPGME_IMPORT_SIG = 4,
+/* The key contained new user IDs.  */
+#define GPGME_IMPORT_UID	2
 
-    /* The key contained new sub keys.  */
-    GPGME_IMPORT_SUBKEY	= 8,
+/* The key contained new signatures.  */
+#define GPGME_IMPORT_SIG	4
 
-    /* The key contained a secret key.  */
-    GPGME_IMPORT_SECRET = 16
-  };
+/* The key contained new sub keys.  */
+#define GPGME_IMPORT_SUBKEY	8
 
+/* The key contained a secret key.  */
+#define GPGME_IMPORT_SECRET	16
+
+
 struct _gpgme_import_status
 {
   struct _gpgme_import_status *next;
@@ -1259,7 +1387,7 @@
   /* Fingerprint.  */
   char *fpr;
 
-  /* If a problem occurred, the reason why the key could not be
+  /* If a problem occured, the reason why the key could not be
      imported.  Otherwise GPGME_No_Error.  */
   gpgme_error_t result;
 
@@ -1512,9 +1640,18 @@
 /* Check that the library fulfills the version requirement.  */
 const char *gpgme_check_version (const char *req_version);
 
-/* Retrieve information about the backend engines.  */
+/* Get the information about the configured and installed engines.  A
+   pointer to the first engine in the statically allocated linked list
+   is returned in *INFO.  If an error occurs, it is returned.  The
+   returned data is valid until the next gpgme_set_engine_info.  */
 gpgme_error_t gpgme_get_engine_info (gpgme_engine_info_t *engine_info);
 
+/* Set the default engine info for the protocol PROTO to the file name
+   FILE_NAME and the home directory HOME_DIR.  */
+gpgme_error_t gpgme_set_engine_info (gpgme_protocol_t proto,
+				     const char *file_name,
+				     const char *home_dir);
+
 
 /* Engine support functions.  */
 
Index: libkdenetwork/libgpgme-copy/gpgme/wait.c
===================================================================
--- libkdenetwork/libgpgme-copy/gpgme/wait.c	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkdenetwork/libgpgme-copy/gpgme/wait.c	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,22 +1,23 @@
 /* wait.c 
    Copyright (C) 2000 Werner Koch (dd9jn)
-   Copyright (C) 2001, 2002, 2003 g10 Code GmbH
+   Copyright (C) 2001, 2002, 2003, 2004, 2005 g10 Code GmbH
  
    This file is part of GPGME.
  
    GPGME is free software; you can redistribute it and/or modify it
-   under the terms of the GNU General Public License as published by
-   the Free Software Foundation; either version 2 of the License, or
-   (at your option) any later version.
- 
+   under the terms of the GNU Lesser General Public License as
+   published by the Free Software Foundation; either version 2.1 of
+   the License, or (at your option) any later version.
+   
    GPGME is distributed in the hope that it will be useful, but
    WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
-   General Public License for more details.
- 
-   You should have received a copy of the GNU General Public License
-   along with GPGME; if not, write to the Free Software Foundation,
-   Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301, USA.  */
+   Lesser General Public License for more details.
+   
+   You should have received a copy of the GNU Lesser General Public
+   License along with this program; if not, write to the Free Software
+   Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
+   02111-1307, USA.  */
 
 #if HAVE_CONFIG_H
 #include <config.h>
@@ -32,7 +33,7 @@
 #include "ops.h"
 #include "wait.h"
 #include "sema.h"
-#include "io.h"
+#include "priv-io.h"
 #include "engine.h"
 #include "debug.h"
 
@@ -166,3 +167,38 @@
   fdt->fds[idx].for_write = 0;
   fdt->fds[idx].opaque = NULL;
 }
+
+
+/* This is slightly embarrassing.  The problem is that running an I/O
+   callback _may_ influence the status of other file descriptors.  Our
+   own event loops could compensate for that, but the external event
+   loops cannot.  FIXME: We may still want to optimize this a bit when
+   we are called from our own event loops.  So if CHECKED is 1, the
+   check is skipped.  */
+gpgme_error_t
+_gpgme_run_io_cb (struct io_select_fd_s *an_fds, int checked)
+{
+  struct wait_item_s *item;
+  item = (struct wait_item_s *) an_fds->opaque;
+  assert (item);
+
+  if (!checked)
+    {
+      int nr;
+      struct io_select_fd_s fds;
+
+      fds = *an_fds;
+      fds.signaled = 0;
+      /* Just give it a quick poll.  */
+      nr = _gpgme_io_select (&fds, 1, 1);
+      assert (nr <= 1);
+      if (nr < 0)
+	return errno;
+      else if (nr == 0)
+	/* The status changed in the meantime, there is nothing left
+	   to do.  */
+	return 0;
+    }
+
+  return item->handler (item->handler_value, an_fds->fd);
+}
Index: libkdenetwork/libgpgme-copy/gpgme/get-env.c
===================================================================
--- libkdenetwork/libgpgme-copy/gpgme/get-env.c	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkdenetwork/libgpgme-copy/gpgme/get-env.c	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,21 +1,22 @@
 /* get_env.c - A getenv() replacement.
-   Copyright (C) 2003 g10 Code GmbH
+   Copyright (C) 2003, 2004 g10 Code GmbH
 
    This file is part of GPGME.
  
    GPGME is free software; you can redistribute it and/or modify it
-   under the terms of the GNU General Public License as published by
-   the Free Software Foundation; either version 2 of the License, or
-   (at your option) any later version.
- 
+   under the terms of the GNU Lesser General Public License as
+   published by the Free Software Foundation; either version 2.1 of
+   the License, or (at your option) any later version.
+   
    GPGME is distributed in the hope that it will be useful, but
    WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
-   General Public License for more details.
- 
-   You should have received a copy of the GNU General Public License
-   along with GPGME; if not, write to the Free Software Foundation,
-   Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301, USA.  */
+   Lesser General Public License for more details.
+   
+   You should have received a copy of the GNU Lesser General Public
+   License along with this program; if not, write to the Free Software
+   Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
+   02111-1307, USA.  */
 
 #if HAVE_CONFIG_H
 #include <config.h>
Index: libkdenetwork/libgpgme-copy/gpgme/passphrase.c
===================================================================
--- libkdenetwork/libgpgme-copy/gpgme/passphrase.c	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkdenetwork/libgpgme-copy/gpgme/passphrase.c	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,22 +1,23 @@
 /* passphrase.c - Passphrase callback.
    Copyright (C) 2000 Werner Koch (dd9jn)
-   Copyright (C) 2001, 2002, 2003 g10 Code GmbH
+   Copyright (C) 2001, 2002, 2003, 2004, 2005 g10 Code GmbH
  
    This file is part of GPGME.
  
    GPGME is free software; you can redistribute it and/or modify it
-   under the terms of the GNU General Public License as published by
-   the Free Software Foundation; either version 2 of the License, or
-   (at your option) any later version.
- 
+   under the terms of the GNU Lesser General Public License as
+   published by the Free Software Foundation; either version 2.1 of
+   the License, or (at your option) any later version.
+   
    GPGME is distributed in the hope that it will be useful, but
    WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
-   General Public License for more details.
- 
-   You should have received a copy of the GNU General Public License
-   along with GPGME; if not, write to the Free Software Foundation,
-   Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301, USA.  */
+   Lesser General Public License for more details.
+   
+   You should have received a copy of the GNU Lesser General Public
+   License along with this program; if not, write to the Free Software
+   Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
+   02111-1307, USA.  */
 
 #if HAVE_CONFIG_H
 #include <config.h>
@@ -62,9 +63,6 @@
   void *hook;
   op_data_t opd;
 
-  if (!ctx->passphrase_cb)
-    return 0;
-
   err = _gpgme_op_data_lookup (ctx, OPDATA_PASSPHRASE, &hook,
 			       sizeof (*opd), release_op_data);
   opd = hook;
@@ -92,6 +90,7 @@
 
     case GPGME_STATUS_NEED_PASSPHRASE:
     case GPGME_STATUS_NEED_PASSPHRASE_SYM:
+    case GPGME_STATUS_NEED_PASSPHRASE_PIN:
       if (opd->passphrase_info)
 	free (opd->passphrase_info);
       opd->passphrase_info = strdup (args);
@@ -117,10 +116,8 @@
 
 
 gpgme_error_t
-_gpgme_passphrase_command_handler_internal (void *priv,
-					    gpgme_status_code_t code,
-					    const char *key, int fd,
-					    int *processed)
+_gpgme_passphrase_command_handler (void *priv, gpgme_status_code_t code,
+				   const char *key, int fd, int *processed)
 {
   gpgme_ctx_t ctx = (gpgme_ctx_t) priv;
   gpgme_error_t err;
@@ -135,7 +132,9 @@
   if (err)
     return err;
 
-  if (code == GPGME_STATUS_GET_HIDDEN && !strcmp (key, "passphrase.enter"))
+  if (code == GPGME_STATUS_GET_HIDDEN 
+      && (!strcmp (key, "passphrase.enter")
+          || !strcmp (key, "passphrase.pin.ask")))
     {
       if (processed)
 	*processed = 1;
@@ -152,12 +151,3 @@
 
   return 0;
 }
-
-
-gpgme_error_t
-_gpgme_passphrase_command_handler (void *priv, gpgme_status_code_t code,
-				   const char *key, int fd)
-{
-  return _gpgme_passphrase_command_handler_internal (priv, code, key, fd,
-						     NULL);
-}
Index: libkdenetwork/libgpgme-copy/gpgme/wait.h
===================================================================
--- libkdenetwork/libgpgme-copy/gpgme/wait.h	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkdenetwork/libgpgme-copy/gpgme/wait.h	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,22 +1,23 @@
 /* wait.h - Definitions for the wait queue interface.
    Copyright (C) 2000 Werner Koch (dd9jn)
-   Copyright (C) 2001, 2002, 2003 g10 Code GmbH
+   Copyright (C) 2001, 2002, 2003, 2004 g10 Code GmbH
  
    This file is part of GPGME.
  
    GPGME is free software; you can redistribute it and/or modify it
-   under the terms of the GNU General Public License as published by
-   the Free Software Foundation; either version 2 of the License, or
-   (at your option) any later version.
- 
+   under the terms of the GNU Lesser General Public License as
+   published by the Free Software Foundation; either version 2.1 of
+   the License, or (at your option) any later version.
+   
    GPGME is distributed in the hope that it will be useful, but
    WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
-   General Public License for more details.
- 
-   You should have received a copy of the GNU General Public License
-   along with GPGME; if not, write to the Free Software Foundation,
-   Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301, USA.  */
+   Lesser General Public License for more details.
+   
+   You should have received a copy of the GNU Lesser General Public
+   License along with this program; if not, write to the Free Software
+   Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
+   02111-1307, USA.  */
 
 #ifndef WAIT_H
 #define WAIT_H
@@ -76,4 +77,6 @@
 
 gpgme_error_t _gpgme_wait_one (gpgme_ctx_t ctx);
 
+gpgme_error_t _gpgme_run_io_cb (struct io_select_fd_s *an_fds, int checked);
+
 #endif	/* WAIT_H */
Index: libkdenetwork/libgpgme-copy/gpgme/import.c
===================================================================
--- libkdenetwork/libgpgme-copy/gpgme/import.c	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkdenetwork/libgpgme-copy/gpgme/import.c	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,22 +1,23 @@
 /* import.c - Import a key.
    Copyright (C) 2000 Werner Koch (dd9jn)
-   Copyright (C) 2001, 2002, 2003 g10 Code GmbH
+   Copyright (C) 2001, 2002, 2003, 2004 g10 Code GmbH
 
    This file is part of GPGME.
  
    GPGME is free software; you can redistribute it and/or modify it
-   under the terms of the GNU General Public License as published by
-   the Free Software Foundation; either version 2 of the License, or
-   (at your option) any later version.
- 
+   under the terms of the GNU Lesser General Public License as
+   published by the Free Software Foundation; either version 2.1 of
+   the License, or (at your option) any later version.
+   
    GPGME is distributed in the hope that it will be useful, but
    WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
-   General Public License for more details.
- 
-   You should have received a copy of the GNU General Public License
-   along with GPGME; if not, write to the Free Software Foundation,
-   Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301, USA.  */
+   Lesser General Public License for more details.
+   
+   You should have received a copy of the GNU Lesser General Public
+   License along with this program; if not, write to the Free Software
+   Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
+   02111-1307, USA.  */
 
 #if HAVE_CONFIG_H
 #include <config.h>
Index: libkdenetwork/libgpgme-copy/gpgme/decrypt-verify.c
===================================================================
--- libkdenetwork/libgpgme-copy/gpgme/decrypt-verify.c	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkdenetwork/libgpgme-copy/gpgme/decrypt-verify.c	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,22 +1,23 @@
 /* decrypt-verify.c - Decrypt and verify function.
    Copyright (C) 2000 Werner Koch (dd9jn)
-   Copyright (C) 2001, 2002, 2003 g10 Code GmbH
+   Copyright (C) 2001, 2002, 2003, 2004 g10 Code GmbH
 
    This file is part of GPGME.
  
    GPGME is free software; you can redistribute it and/or modify it
-   under the terms of the GNU General Public License as published by
-   the Free Software Foundation; either version 2 of the License, or
-   (at your option) any later version.
- 
+   under the terms of the GNU Lesser General Public License as
+   published by the Free Software Foundation; either version 2.1 of
+   the License, or (at your option) any later version.
+   
    GPGME is distributed in the hope that it will be useful, but
    WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
-   General Public License for more details.
- 
-   You should have received a copy of the GNU General Public License
-   along with GPGME; if not, write to the Free Software Foundation,
-   Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301, USA.  */
+   Lesser General Public License for more details.
+   
+   You should have received a copy of the GNU Lesser General Public
+   License along with this program; if not, write to the Free Software
+   Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
+   02111-1307, USA.  */
 
 #if HAVE_CONFIG_H
 #include <config.h>
Index: libkdenetwork/libgpgme-copy/gpgme/trustlist.c
===================================================================
--- libkdenetwork/libgpgme-copy/gpgme/trustlist.c	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkdenetwork/libgpgme-copy/gpgme/trustlist.c	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,22 +1,23 @@
 /* trustlist.c - Trust item listing.
    Copyright (C) 2000 Werner Koch (dd9jn)
-   Copyright (C) 2001, 2002, 2003 g10 Code GmbH
+   Copyright (C) 2001, 2002, 2003, 2004 g10 Code GmbH
 
    This file is part of GPGME.
  
    GPGME is free software; you can redistribute it and/or modify it
-   under the terms of the GNU General Public License as published by
-   the Free Software Foundation; either version 2 of the License, or
-   (at your option) any later version.
- 
+   under the terms of the GNU Lesser General Public License as
+   published by the Free Software Foundation; either version 2.1 of
+   the License, or (at your option) any later version.
+   
    GPGME is distributed in the hope that it will be useful, but
    WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
-   General Public License for more details.
- 
-   You should have received a copy of the GNU General Public License
-   along with GPGME; if not, write to the Free Software Foundation,
-   Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301, USA.  */
+   Lesser General Public License for more details.
+   
+   You should have received a copy of the GNU Lesser General Public
+   License along with this program; if not, write to the Free Software
+   Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
+   02111-1307, USA.  */
 
 #if HAVE_CONFIG_H
 #include <config.h>
@@ -214,6 +215,8 @@
   opd = hook;
   if (err)
     return err;
+  if (opd == NULL)
+    return gpg_error (GPG_ERR_INV_VALUE);
 
   if (!opd->trust_queue)
     {
Index: libkdenetwork/libgpgme-copy/gpgme/status-table.h
===================================================================
--- libkdenetwork/libgpgme-copy/gpgme/status-table.h	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkdenetwork/libgpgme-copy/gpgme/status-table.h	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -10,6 +10,7 @@
 {
   { "ABORT", GPGME_STATUS_ABORT },
   { "ALREADY_SIGNED", GPGME_STATUS_ALREADY_SIGNED },
+  { "BACKUP_KEY_CREATED", GPGME_STATUS_BACKUP_KEY_CREATED },
   { "BADARMOR", GPGME_STATUS_BADARMOR },
   { "BADMDC", GPGME_STATUS_BADMDC },
   { "BADSIG", GPGME_STATUS_BADSIG },
@@ -17,6 +18,7 @@
   { "BEGIN_DECRYPTION", GPGME_STATUS_BEGIN_DECRYPTION },
   { "BEGIN_ENCRYPTION", GPGME_STATUS_BEGIN_ENCRYPTION },
   { "BEGIN_STREAM", GPGME_STATUS_BEGIN_STREAM },
+  { "CARDCTRL", GPGME_STATUS_CARDCTRL },
   { "DECRYPTION_FAILED", GPGME_STATUS_DECRYPTION_FAILED },
   { "DECRYPTION_OKAY", GPGME_STATUS_DECRYPTION_OKAY },
   { "DELETE_PROBLEM", GPGME_STATUS_DELETE_PROBLEM },
@@ -51,6 +53,7 @@
   { "LEAVE", GPGME_STATUS_LEAVE },
   { "MISSING_PASSPHRASE", GPGME_STATUS_MISSING_PASSPHRASE },
   { "NEED_PASSPHRASE", GPGME_STATUS_NEED_PASSPHRASE },
+  { "NEED_PASSPHRASE_PIN", GPGME_STATUS_NEED_PASSPHRASE_PIN },
   { "NEED_PASSPHRASE_SYM", GPGME_STATUS_NEED_PASSPHRASE_SYM },
   { "NEWSIG", GPGME_STATUS_NEWSIG },
   { "NODATA", GPGME_STATUS_NODATA },
@@ -59,10 +62,15 @@
   { "NO_PUBKEY", GPGME_STATUS_NO_PUBKEY },
   { "NO_RECP", GPGME_STATUS_NO_RECP },
   { "NO_SECKEY", GPGME_STATUS_NO_SECKEY },
+  { "PKA_TRUST_BAD", GPGME_STATUS_PKA_TRUST_BAD },
+  { "PKA_TRUST_GOOD", GPGME_STATUS_PKA_TRUST_GOOD },
+  { "PLAINTEXT", GPGME_STATUS_PLAINTEXT },
   { "POLICY_URL", GPGME_STATUS_POLICY_URL },
   { "PROGRESS", GPGME_STATUS_PROGRESS },
   { "REVKEYSIG", GPGME_STATUS_REVKEYSIG },
   { "RSA_OR_IDEA", GPGME_STATUS_RSA_OR_IDEA },
+  { "SC_OP_FAILURE", GPGME_STATUS_SC_OP_FAILURE },
+  { "SC_OP_SUCCESS", GPGME_STATUS_SC_OP_SUCCESS },
   { "SESSION_KEY", GPGME_STATUS_SESSION_KEY },
   { "SHM_GET", GPGME_STATUS_SHM_GET },
   { "SHM_GET_BOOL", GPGME_STATUS_SHM_GET_BOOL },
@@ -71,6 +79,7 @@
   { "SIGEXPIRED", GPGME_STATUS_SIGEXPIRED },
   { "SIG_CREATED", GPGME_STATUS_SIG_CREATED },
   { "SIG_ID", GPGME_STATUS_SIG_ID },
+  { "SIG_SUBPACKET", GPGME_STATUS_SIG_SUBPACKET },
   { "TRUNCATED", GPGME_STATUS_TRUNCATED },
   { "TRUST_FULLY", GPGME_STATUS_TRUST_FULLY },
   { "TRUST_MARGINAL", GPGME_STATUS_TRUST_MARGINAL },
Index: libkdenetwork/libgpgme-copy/gpgme/posix-util.c
===================================================================
--- libkdenetwork/libgpgme-copy/gpgme/posix-util.c	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkdenetwork/libgpgme-copy/gpgme/posix-util.c	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,22 +1,23 @@
 /* posix-util.c - Utility functions for Posix
    Copyright (C) 2001 Werner Koch (dd9jn)
-   Copyright (C) 2001, 2002 g10 Code GmbH
+   Copyright (C) 2001, 2002, 2004 g10 Code GmbH
 
    This file is part of GPGME.
  
    GPGME is free software; you can redistribute it and/or modify it
-   under the terms of the GNU General Public License as published by
-   the Free Software Foundation; either version 2 of the License, or
-   (at your option) any later version.
- 
+   under the terms of the GNU Lesser General Public License as
+   published by the Free Software Foundation; either version 2.1 of
+   the License, or (at your option) any later version.
+   
    GPGME is distributed in the hope that it will be useful, but
    WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
-   General Public License for more details.
- 
-   You should have received a copy of the GNU General Public License
-   along with GPGME; if not, write to the Free Software Foundation,
-   Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301, USA.  */
+   Lesser General Public License for more details.
+   
+   You should have received a copy of the GNU Lesser General Public
+   License along with this program; if not, write to the Free Software
+   Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
+   02111-1307, USA.  */
 
 #ifdef HAVE_CONFIG_H
 #include <config.h>
@@ -47,3 +48,10 @@
   return NULL;
 #endif
 }
+
+/* See w32-util.c */
+int
+_gpgme_get_conf_int (const char *key, int *value)
+{
+  return 0;
+}
Index: libkdenetwork/libgpgme-copy/gpgme/engine-gpgsm.c
===================================================================
--- libkdenetwork/libgpgme-copy/gpgme/engine-gpgsm.c	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkdenetwork/libgpgme-copy/gpgme/engine-gpgsm.c	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,27 +1,30 @@
 /* engine-gpgsm.c - GpgSM engine.
    Copyright (C) 2000 Werner Koch (dd9jn)
-   Copyright (C) 2001, 2002, 2003, 2004 g10 Code GmbH
+   Copyright (C) 2001, 2002, 2003, 2004, 2005 g10 Code GmbH
  
    This file is part of GPGME.
 
    GPGME is free software; you can redistribute it and/or modify it
-   under the terms of the GNU General Public License as published by
-   the Free Software Foundation; either version 2 of the License, or
-   (at your option) any later version.
- 
+   under the terms of the GNU Lesser General Public License as
+   published by the Free Software Foundation; either version 2.1 of
+   the License, or (at your option) any later version.
+   
    GPGME is distributed in the hope that it will be useful, but
    WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
-   General Public License for more details.
- 
-   You should have received a copy of the GNU General Public License
-   along with GPGME; if not, write to the Free Software Foundation,
-   Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301, USA.  */
+   Lesser General Public License for more details.
+   
+   You should have received a copy of the GNU Lesser General Public
+   License along with this program; if not, write to the Free Software
+   Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
+   02111-1307, USA.  */
 
 #if HAVE_CONFIG_H
 #include <config.h>
 #endif
 
+#ifndef HAVE_W32_SYSTEM
+
 #include <stdlib.h>
 #include <string.h>
 #include <sys/types.h>
@@ -35,7 +38,7 @@
 #include "util.h"
 #include "ops.h"
 #include "wait.h"
-#include "io.h"
+#include "priv-io.h"
 #include "sema.h"
 
 #include "assuan.h"
@@ -48,6 +51,7 @@
 typedef struct
 {
   int fd;	/* FD we talk about.  */
+  int server_fd; /* Server FD for this connection.  */
   int dir;	/* Inbound/Outbound, maybe given implicit?  */
   void *data;	/* Handler-specific data.  */
   void *tag;	/* ID from the user for gpgme_remove_io_callback.  */
@@ -56,19 +60,19 @@
 
 struct engine_gpgsm
 {
-  ASSUAN_CONTEXT assuan_ctx;
+  assuan_context_t assuan_ctx;
 
+  int lc_ctype_set;
+  int lc_messages_set;
+
   iocb_data_t status_cb;
 
   /* Input, output etc are from the servers perspective.  */
   iocb_data_t input_cb;
-  int input_fd_server;
 
   iocb_data_t output_cb;
-  int output_fd_server;
 
   iocb_data_t message_cb;
-  int message_fd_server;
 
   struct
   {
@@ -82,7 +86,7 @@
     void *fnc_value;
     struct
     {
-      unsigned char *line;
+      char *line;
       int linesize;
       int linelen;
     } attic;
@@ -95,18 +99,11 @@
 typedef struct engine_gpgsm *engine_gpgsm_t;
 
 
-static const char *
-gpgsm_get_version (void)
+static char *
+gpgsm_get_version (const char *file_name)
 {
-  static const char *gpgsm_version;
-  DEFINE_STATIC_LOCK (gpgsm_version_lock);
-
-  LOCK (gpgsm_version_lock);
-  if (!gpgsm_version)
-    gpgsm_version = _gpgme_get_program_version (_gpgme_get_gpgsm_path ());
-  UNLOCK (gpgsm_version_lock);
-
-  return gpgsm_version;
+  return _gpgme_get_program_version (file_name ? file_name
+				     : _gpgme_get_gpgsm_path ());
 }
 
 
@@ -128,31 +125,38 @@
       if (gpgsm->status_cb.tag)
 	(*gpgsm->io_cbs.remove) (gpgsm->status_cb.tag);
       gpgsm->status_cb.fd = -1;
+      gpgsm->status_cb.tag = NULL;
     }
   else if (gpgsm->input_cb.fd == fd)
     {
       if (gpgsm->input_cb.tag)
 	(*gpgsm->io_cbs.remove) (gpgsm->input_cb.tag);
       gpgsm->input_cb.fd = -1;
+      gpgsm->input_cb.tag = NULL;
     }
   else if (gpgsm->output_cb.fd == fd)
     {
       if (gpgsm->output_cb.tag)
 	(*gpgsm->io_cbs.remove) (gpgsm->output_cb.tag);
       gpgsm->output_cb.fd = -1;
+      gpgsm->output_cb.tag = NULL;
     }
   else if (gpgsm->message_cb.fd == fd)
     {
       if (gpgsm->message_cb.tag)
 	(*gpgsm->io_cbs.remove) (gpgsm->message_cb.tag);
       gpgsm->message_cb.fd = -1;
+      gpgsm->message_cb.tag = NULL;
     }
 }
 
 
 static gpgme_error_t
-map_assuan_error (AssuanError err)
+map_assuan_error (gpg_error_t err)
 {
+  if (!err)
+    return 0;
+
   if (err == -1)
     return gpg_error (GPG_ERR_INV_ENGINE);
 
@@ -316,36 +320,42 @@
 
 
 static gpgme_error_t
-gpgsm_new (void **engine, const char *lc_ctype, const char *lc_messages)
+gpgsm_new (void **engine, const char *file_name, const char *home_dir)
 {
   gpgme_error_t err = 0;
   engine_gpgsm_t gpgsm;
-  char *argv[3];
+  const char *argv[5];
+  int argc;
+#if !USE_DESCRIPTOR_PASSING
   int fds[2];
   int child_fds[4];
+#endif
   char *dft_display = NULL;
   char dft_ttyname[64];
   char *dft_ttytype = NULL;
   char *optstr;
-  int fdlist[5];
-  int nfds;
 
   gpgsm = calloc (1, sizeof *gpgsm);
   if (!gpgsm)
     return gpg_error_from_errno (errno);
 
   gpgsm->status_cb.fd = -1;
+  gpgsm->status_cb.dir = 1;
   gpgsm->status_cb.tag = 0;
+  gpgsm->status_cb.data = gpgsm;
 
   gpgsm->input_cb.fd = -1;
+  gpgsm->input_cb.dir = 0;
   gpgsm->input_cb.tag = 0;
-  gpgsm->input_fd_server = -1;
+  gpgsm->input_cb.server_fd = -1;
   gpgsm->output_cb.fd = -1;
+  gpgsm->output_cb.dir = 1;
   gpgsm->output_cb.tag = 0;
-  gpgsm->output_fd_server = -1;
+  gpgsm->output_cb.server_fd = -1;
   gpgsm->message_cb.fd = -1;
+  gpgsm->message_cb.dir = 0;
   gpgsm->message_cb.tag = 0;
-  gpgsm->message_fd_server = -1;
+  gpgsm->message_cb.server_fd = -1;
 
   gpgsm->status.fnc = 0;
   gpgsm->colon.fnc = 0;
@@ -360,14 +370,14 @@
   gpgsm->io_cbs.event = NULL;
   gpgsm->io_cbs.event_priv = NULL;
 
+#if !USE_DESCRIPTOR_PASSING
   if (_gpgme_io_pipe (fds, 0) < 0)
     {
       err = gpg_error_from_errno (errno);
       goto leave;
     }
   gpgsm->input_cb.fd = fds[1];
-  gpgsm->input_cb.dir = 0;
-  gpgsm->input_fd_server = fds[0];
+  gpgsm->input_cb.server_fd = fds[0];
 
   if (_gpgme_io_pipe (fds, 1) < 0)
     {
@@ -375,8 +385,7 @@
       goto leave;
     }
   gpgsm->output_cb.fd = fds[0];
-  gpgsm->output_cb.dir = 1;
-  gpgsm->output_fd_server = fds[1];
+  gpgsm->output_cb.server_fd = fds[1];
 
   if (_gpgme_io_pipe (fds, 0) < 0)
     {
@@ -384,45 +393,36 @@
       goto leave;
     }
   gpgsm->message_cb.fd = fds[1];
-  gpgsm->message_cb.dir = 0;
-  gpgsm->message_fd_server = fds[0];
+  gpgsm->message_cb.server_fd = fds[0];
 
-  child_fds[0] = gpgsm->input_fd_server;
-  child_fds[1] = gpgsm->output_fd_server;
-  child_fds[2] = gpgsm->message_fd_server;
+  child_fds[0] = gpgsm->input_cb.server_fd;
+  child_fds[1] = gpgsm->output_cb.server_fd;
+  child_fds[2] = gpgsm->message_cb.server_fd;
   child_fds[3] = -1;
+#endif
 
-  argv[0] = "gpgsm";
-  argv[1] = "--server";
-  argv[2] = NULL;
-
-  err = assuan_pipe_connect (&gpgsm->assuan_ctx,
-			     _gpgme_get_gpgsm_path (), argv, child_fds);
-
-  /* We need to know the fd used by assuan for reads.  We do this by
-     using the assumption that the first returned fd from
-     assuan_get_active_fds() is always this one.  */
-  nfds = assuan_get_active_fds (gpgsm->assuan_ctx, 0 /* read fds */,
-                                fdlist, DIM (fdlist));
-  if (nfds < 1)
+  argc = 0;
+  argv[argc++] = "gpgsm";
+  if (home_dir)
     {
-      err = gpg_error (GPG_ERR_GENERAL);	/* FIXME */
-      goto leave;
+      argv[argc++] = "--homedir";
+      argv[argc++] = home_dir;
     }
-  /* We duplicate the file descriptor, so we can close it without
-     disturbing assuan.  Alternatively, we could special case
-     status_fd and register/unregister it manually as needed, but this
-     increases code duplication and is more complicated as we can not
-     use the close notifications etc.  */
-  gpgsm->status_cb.fd = dup (fdlist[0]);
-  if (gpgsm->status_cb.fd < 0)
-    {
-      err = gpg_error (GPG_ERR_GENERAL);	/* FIXME */
-      goto leave;
-    }
-  gpgsm->status_cb.dir = 1;
-  gpgsm->status_cb.data = gpgsm;
+  argv[argc++] = "--server";
+  argv[argc++] = NULL;
 
+#if USE_DESCRIPTOR_PASSING
+  err = assuan_pipe_connect_ext
+    (&gpgsm->assuan_ctx, file_name ? file_name : _gpgme_get_gpgsm_path (),
+     argv, NULL, NULL, NULL, 1);
+#else
+  err = assuan_pipe_connect
+    (&gpgsm->assuan_ctx, file_name ? file_name : _gpgme_get_gpgsm_path (),
+     argv, child_fds);
+#endif
+  if (err)
+    goto leave;
+
   err = _gpgme_getenv ("DISPLAY", &dft_display);
   if (err)
     goto leave;
@@ -494,43 +494,10 @@
 	}
     }
 
-  if (lc_ctype)
-    {
-      if (asprintf (&optstr, "OPTION lc-ctype=%s", lc_ctype) < 0)
-	err = gpg_error_from_errno (errno);
-      else
-	{
-	  err = assuan_transact (gpgsm->assuan_ctx, optstr, NULL, NULL,
-				 NULL, NULL, NULL, NULL);
-	  free (optstr);
-	  if (err)
-	    err = map_assuan_error (err);
-	}
-    }
-  if (err)
-    goto leave;
-  
-  if (lc_messages)
-    {
-      if (asprintf (&optstr, "OPTION lc-messages=%s", lc_messages) < 0)
-	err = gpg_error_from_errno (errno);
-      else
-	{
-	  err = assuan_transact (gpgsm->assuan_ctx, optstr, NULL, NULL,
-				 NULL, NULL, NULL, NULL);
-	  free (optstr);
-	  if (err)
-	    err = map_assuan_error (err);
-	}
-    }
-  if (err)
-    goto leave;
-
+#if !USE_DESCRIPTOR_PASSING
   if (!err
-      && (_gpgme_io_set_close_notify (gpgsm->status_cb.fd,
+      && (_gpgme_io_set_close_notify (gpgsm->input_cb.fd,
 				      close_notify_handler, gpgsm)
-	  || _gpgme_io_set_close_notify (gpgsm->input_cb.fd,
-					 close_notify_handler, gpgsm)
 	  || _gpgme_io_set_close_notify (gpgsm->output_cb.fd,
 					 close_notify_handler, gpgsm)
 	  || _gpgme_io_set_close_notify (gpgsm->message_cb.fd,
@@ -539,16 +506,19 @@
       err = gpg_error (GPG_ERR_GENERAL);
       goto leave;
     }
-      
+#endif
+
  leave:
   /* Close the server ends of the pipes.  Our ends are closed in
      gpgsm_release().  */
-  if (gpgsm->input_fd_server != -1)
-    _gpgme_io_close (gpgsm->input_fd_server);
-  if (gpgsm->output_fd_server != -1)
-    _gpgme_io_close (gpgsm->output_fd_server);
-  if (gpgsm->message_fd_server != -1)
-    _gpgme_io_close (gpgsm->message_fd_server);
+#if !USE_DESCRIPTOR_PASSING
+  if (gpgsm->input_cb.server_fd != -1)
+    _gpgme_io_close (gpgsm->input_cb.server_fd);
+  if (gpgsm->output_cb.server_fd != -1)
+    _gpgme_io_close (gpgsm->output_cb.server_fd);
+  if (gpgsm->message_cb.server_fd != -1)
+    _gpgme_io_close (gpgsm->message_cb.server_fd);
+#endif
 
   if (err)
     gpgsm_release (gpgsm);
@@ -559,15 +529,61 @@
 }
 
 
+static gpgme_error_t
+gpgsm_set_locale (void *engine, int category, const char *value)
+{
+  engine_gpgsm_t gpgsm = engine;
+  gpgme_error_t err;
+  char *optstr;
+  char *catstr;
+
+  /* FIXME: If value is NULL, we need to reset the option to default.
+     But we can't do this.  So we error out here.  GPGSM needs support
+     for this.  */
+  if (category == LC_CTYPE)
+    {
+      catstr = "lc-ctype";
+      if (!value && gpgsm->lc_ctype_set)
+	return gpg_error (GPG_ERR_INV_VALUE);
+      if (value)
+	gpgsm->lc_ctype_set = 1;
+    }
+#ifdef LC_MESSAGES
+  else if (category == LC_MESSAGES)
+    {
+      catstr = "lc-messages";
+      if (!value && gpgsm->lc_messages_set)
+	return gpg_error (GPG_ERR_INV_VALUE);
+      if (value)
+	gpgsm->lc_messages_set = 1;
+    }
+#endif /* LC_MESSAGES */
+  else
+    return gpg_error (GPG_ERR_INV_VALUE);
+
+  if (asprintf (&optstr, "OPTION %s=%s", catstr, value) < 0)
+    err = gpg_error_from_errno (errno);
+  else
+    {
+      err = assuan_transact (gpgsm->assuan_ctx, optstr, NULL, NULL,
+			     NULL, NULL, NULL, NULL);
+      free (optstr);
+      if (err)
+	err = map_assuan_error (err);
+    }
+  return err;
+}
+
+
 /* Forward declaration.  */
 static gpgme_status_code_t parse_status (const char *name);
 
 static gpgme_error_t
-gpgsm_assuan_simple_command (ASSUAN_CONTEXT ctx, char *cmd,
+gpgsm_assuan_simple_command (assuan_context_t ctx, char *cmd,
 			     engine_status_handler_t status_fnc,
 			     void *status_fnc_value)
 {
-  AssuanError err;
+  gpg_error_t err;
   char *line;
   size_t linelen;
 
@@ -620,18 +636,118 @@
 }
 
 
+typedef enum { INPUT_FD, OUTPUT_FD, MESSAGE_FD } fd_type_t;
+
+static void
+gpgsm_clear_fd (engine_gpgsm_t gpgsm, fd_type_t fd_type)
+{
+#if !USE_DESCRIPTOR_PASSING
+  switch (fd_type)
+    {
+    case INPUT_FD:
+      _gpgme_io_close (gpgsm->input_cb.fd);
+      break;
+    case OUTPUT_FD:
+      _gpgme_io_close (gpgsm->output_cb.fd);
+      break;
+    case MESSAGE_FD:
+      _gpgme_io_close (gpgsm->message_cb.fd);
+      break;
+    }
+#endif
+}
+
 #define COMMANDLINELEN 40
 static gpgme_error_t
-gpgsm_set_fd (ASSUAN_CONTEXT ctx, const char *which, int fd, const char *opt)
+gpgsm_set_fd (engine_gpgsm_t gpgsm, fd_type_t fd_type, const char *opt)
 {
+  gpg_error_t err = 0;
   char line[COMMANDLINELEN];
+  char *which;
+  iocb_data_t *iocb_data;
+  int dir;
+  int fd;
 
+  switch (fd_type)
+    {
+    case INPUT_FD:
+      which = "INPUT";
+      iocb_data = &gpgsm->input_cb;
+      break;
+
+    case OUTPUT_FD:
+      which = "OUTPUT";
+      iocb_data = &gpgsm->output_cb;
+      break;
+
+    case MESSAGE_FD:
+      which = "MESSAGE";
+      iocb_data = &gpgsm->message_cb;
+      break;
+
+    default:
+      return gpg_error (GPG_ERR_INV_VALUE);
+    }
+
+  dir = iocb_data->dir;
+
+#if USE_DESCRIPTOR_PASSING
+  /* We try to short-cut the communication by giving GPGSM direct
+     access to the file descriptor, rather than using a pipe.  */
+  iocb_data->server_fd = _gpgme_data_get_fd (iocb_data->data);
+  if (iocb_data->server_fd < 0)
+    {
+      int fds[2];
+
+      if (_gpgme_io_pipe (fds, 0) < 0)
+	return gpg_error_from_errno (errno);
+
+      iocb_data->fd = dir ? fds[0] : fds[1];
+      iocb_data->server_fd = dir ? fds[1] : fds[0];
+
+      if (_gpgme_io_set_close_notify (iocb_data->fd,
+				      close_notify_handler, gpgsm))
+	{
+	  err = gpg_error (GPG_ERR_GENERAL);
+	  goto leave_set_fd;
+	}
+    }
+#endif
+
+  fd = iocb_data->server_fd;
+
+#if USE_DESCRIPTOR_PASSING
+  err = assuan_sendfd (gpgsm->assuan_ctx, fd);
+  if (err)
+    goto leave_set_fd;
+
+  _gpgme_io_close (fd);
+
   if (opt)
+    snprintf (line, COMMANDLINELEN, "%s FD %s", which, opt);
+  else
+    snprintf (line, COMMANDLINELEN, "%s FD", which);
+#else
+  if (opt)
     snprintf (line, COMMANDLINELEN, "%s FD=%i %s", which, fd, opt);
   else
     snprintf (line, COMMANDLINELEN, "%s FD=%i", which, fd);
+#endif
 
-  return gpgsm_assuan_simple_command (ctx, line, NULL, NULL);
+  err = gpgsm_assuan_simple_command (gpgsm->assuan_ctx, line, NULL, NULL);
+
+#if USE_DESCRIPTOR_PASSING
+ leave_set_fd:
+  if (err)
+    {
+      _gpgme_io_close (iocb_data->fd);
+      _gpgme_io_close (iocb_data->server_fd);
+      iocb_data->fd = -1;
+      iocb_data->server_fd = -1;
+    }
+#endif
+
+  return err;
 }
 
 
@@ -679,7 +795,7 @@
 static gpgme_error_t
 status_handler (void *opaque, int fd)
 {
-  AssuanError assuan_err;
+  gpg_error_t assuan_err;
   gpgme_error_t err = 0;
   engine_gpgsm_t gpgsm = opaque;
   char *line;
@@ -740,17 +856,16 @@
           /* FIXME We can't use this for binary data because we
              assume this is a string.  For the current usage of colon
              output it is correct.  */
-          unsigned char *src = line + 2;
-	  unsigned char *end = line + linelen;
-	  unsigned char *dst;
-          unsigned char **aline = &gpgsm->colon.attic.line;
+          char *src = line + 2;
+	  char *end = line + linelen;
+	  char *dst;
+          char **aline = &gpgsm->colon.attic.line;
 	  int *alinelen = &gpgsm->colon.attic.linelen;
 
 	  if (gpgsm->colon.attic.linesize
 	      < *alinelen + linelen + 1)
 	    {
-	      unsigned char *newline = realloc (*aline,
-						*alinelen + linelen + 1);
+	      char *newline = realloc (*aline, *alinelen + linelen + 1);
 	      if (!newline)
 		err = gpg_error_from_errno (errno);
 	      else
@@ -769,7 +884,7 @@
 		    {
 		      /* Handle escaped characters.  */
 		      ++src;
-		      *dst = (unsigned char) _gpgme_hextobyte (src);
+		      *dst = _gpgme_hextobyte (src);
 		      (*alinelen)++;
 		      src += 2;
 		    }
@@ -856,7 +971,34 @@
 start (engine_gpgsm_t gpgsm, const char *command)
 {
   gpgme_error_t err;
+  int fdlist[5];
+  int nfds;
 
+  /* We need to know the fd used by assuan for reads.  We do this by
+     using the assumption that the first returned fd from
+     assuan_get_active_fds() is always this one.  */
+  nfds = assuan_get_active_fds (gpgsm->assuan_ctx, 0 /* read fds */,
+                                fdlist, DIM (fdlist));
+  if (nfds < 1)
+    return gpg_error (GPG_ERR_GENERAL);	/* FIXME */
+
+  /* We duplicate the file descriptor, so we can close it without
+     disturbing assuan.  Alternatively, we could special case
+     status_fd and register/unregister it manually as needed, but this
+     increases code duplication and is more complicated as we can not
+     use the close notifications etc.  */
+  gpgsm->status_cb.fd = dup (fdlist[0]);
+  if (gpgsm->status_cb.fd < 0)
+    return gpg_error_from_syserror ();
+
+  if (_gpgme_io_set_close_notify (gpgsm->status_cb.fd,
+				  close_notify_handler, gpgsm))
+    {
+      close (gpgsm->status_cb.fd);
+      gpgsm->status_cb.fd = -1;
+      return gpg_error (GPG_ERR_GENERAL);
+    }
+
   err = add_io_cb (gpgsm, &gpgsm->status_cb, status_handler);
   if (!err && gpgsm->input_cb.fd != -1)
     err = add_io_cb (gpgsm, &gpgsm->input_cb, _gpgme_data_outbound_handler);
@@ -866,7 +1008,7 @@
     err = add_io_cb (gpgsm, &gpgsm->message_cb, _gpgme_data_outbound_handler);
 
   if (!err)
-    err = assuan_write_line (gpgsm->assuan_ctx, command);
+    err = map_assuan_error (assuan_write_line (gpgsm->assuan_ctx, command));
 
   if (!err)
     (*gpgsm->io_cbs.event) (gpgsm->io_cbs.event_priv, GPGME_EVENT_START, NULL);
@@ -875,7 +1017,20 @@
 }
 
 
+#if USE_DESCRIPTOR_PASSING
 static gpgme_error_t
+gpgsm_reset (void *engine)
+{
+  engine_gpgsm_t gpgsm = engine;
+
+  /* We must send a reset because we need to reset the list of
+     signers.  Note that RESET does not reset OPTION commands. */
+  return gpgsm_assuan_simple_command (gpgsm->assuan_ctx, "RESET", NULL, NULL);
+}
+#endif
+
+
+static gpgme_error_t
 gpgsm_decrypt (void *engine, gpgme_data_t ciph, gpgme_data_t plain)
 {
   engine_gpgsm_t gpgsm = engine;
@@ -885,15 +1040,14 @@
     return gpg_error (GPG_ERR_INV_VALUE);
 
   gpgsm->input_cb.data = ciph;
-  err = gpgsm_set_fd (gpgsm->assuan_ctx, "INPUT", gpgsm->input_fd_server, 
-                      map_input_enc (gpgsm->input_cb.data));
+  err = gpgsm_set_fd (gpgsm, INPUT_FD, map_input_enc (gpgsm->input_cb.data));
   if (err)
     return gpg_error (GPG_ERR_GENERAL);	/* FIXME */
   gpgsm->output_cb.data = plain;
-  err = gpgsm_set_fd (gpgsm->assuan_ctx, "OUTPUT", gpgsm->output_fd_server, 0);
+  err = gpgsm_set_fd (gpgsm, OUTPUT_FD, 0);
   if (err)
     return gpg_error (GPG_ERR_GENERAL);	/* FIXME */
-  _gpgme_io_close (gpgsm->message_cb.fd);
+  gpgsm_clear_fd (gpgsm, MESSAGE_FD);
 
   err = start (engine, "DECRYPT");
   return err;
@@ -956,9 +1110,9 @@
     }
   *linep = '\0';
 
-  _gpgme_io_close (gpgsm->output_cb.fd);
-  _gpgme_io_close (gpgsm->input_cb.fd);
-  _gpgme_io_close (gpgsm->message_cb.fd);
+  gpgsm_clear_fd (gpgsm, OUTPUT_FD);
+  gpgsm_clear_fd (gpgsm, INPUT_FD);
+  gpgsm_clear_fd (gpgsm, MESSAGE_FD);
 
   err = start (gpgsm, line);
   free (line);
@@ -971,7 +1125,7 @@
 set_recipients (engine_gpgsm_t gpgsm, gpgme_key_t recp[])
 {
   gpgme_error_t err = 0;
-  ASSUAN_CONTEXT ctx = gpgsm->assuan_ctx;
+  assuan_context_t ctx = gpgsm->assuan_ctx;
   char *line;
   int linelen;
   int invalid_recipients = 0;
@@ -1040,16 +1194,14 @@
     return gpg_error (GPG_ERR_NOT_IMPLEMENTED);
 
   gpgsm->input_cb.data = plain;
-  err = gpgsm_set_fd (gpgsm->assuan_ctx, "INPUT", gpgsm->input_fd_server,
-                      map_input_enc (gpgsm->input_cb.data));
+  err = gpgsm_set_fd (gpgsm, INPUT_FD, map_input_enc (gpgsm->input_cb.data));
   if (err)
     return err;
   gpgsm->output_cb.data = ciph;
-  err = gpgsm_set_fd (gpgsm->assuan_ctx, "OUTPUT", gpgsm->output_fd_server,
-		      use_armor ? "--armor" : 0);
+  err = gpgsm_set_fd (gpgsm, OUTPUT_FD, use_armor ? "--armor" : 0);
   if (err)
     return err;
-  _gpgme_io_close (gpgsm->message_cb.fd);
+  gpgsm_clear_fd (gpgsm, MESSAGE_FD);
 
   err = set_recipients (gpgsm, recp);
 
@@ -1081,12 +1233,11 @@
   strcpy (&cmd[7], pattern);
 
   gpgsm->output_cb.data = keydata;
-  err = gpgsm_set_fd (gpgsm->assuan_ctx, "OUTPUT", gpgsm->output_fd_server,
-		      use_armor ? "--armor" : 0);
+  err = gpgsm_set_fd (gpgsm, OUTPUT_FD, use_armor ? "--armor" : 0);
   if (err)
     return err;
-  _gpgme_io_close (gpgsm->input_cb.fd);
-  _gpgme_io_close (gpgsm->message_cb.fd);
+  gpgsm_clear_fd (gpgsm, INPUT_FD);
+  gpgsm_clear_fd (gpgsm, MESSAGE_FD);
 
   err = start (gpgsm, cmd);
   free (cmd);
@@ -1173,12 +1324,11 @@
   *linep = '\0';
 
   gpgsm->output_cb.data = keydata;
-  err = gpgsm_set_fd (gpgsm->assuan_ctx, "OUTPUT", gpgsm->output_fd_server,
-		      use_armor ? "--armor" : 0);
+  err = gpgsm_set_fd (gpgsm, OUTPUT_FD, use_armor ? "--armor" : 0);
   if (err)
     return err;
-  _gpgme_io_close (gpgsm->input_cb.fd);
-  _gpgme_io_close (gpgsm->message_cb.fd);
+  gpgsm_clear_fd (gpgsm, INPUT_FD);
+  gpgsm_clear_fd (gpgsm, MESSAGE_FD);
 
   err = start (gpgsm, line);
   free (line);
@@ -1197,16 +1347,14 @@
     return gpg_error (GPG_ERR_INV_VALUE);
 
   gpgsm->input_cb.data = help_data;
-  err = gpgsm_set_fd (gpgsm->assuan_ctx, "INPUT", gpgsm->input_fd_server,
-                      map_input_enc (gpgsm->input_cb.data));
+  err = gpgsm_set_fd (gpgsm, INPUT_FD, map_input_enc (gpgsm->input_cb.data));
   if (err)
     return err;
   gpgsm->output_cb.data = pubkey;
-  err = gpgsm_set_fd (gpgsm->assuan_ctx, "OUTPUT", gpgsm->output_fd_server,
-		      use_armor ? "--armor" : 0);
+  err = gpgsm_set_fd (gpgsm, OUTPUT_FD, use_armor ? "--armor" : 0);
   if (err)
     return err;
-  _gpgme_io_close (gpgsm->message_cb.fd);
+  gpgsm_clear_fd (gpgsm, MESSAGE_FD);
 
   err = start (gpgsm, "GENKEY");
   return err;
@@ -1223,12 +1371,11 @@
     return gpg_error (GPG_ERR_INV_VALUE);
 
   gpgsm->input_cb.data = keydata;
-  err = gpgsm_set_fd (gpgsm->assuan_ctx, "INPUT", gpgsm->input_fd_server,
-                      map_input_enc (gpgsm->input_cb.data));
+  err = gpgsm_set_fd (gpgsm, INPUT_FD, map_input_enc (gpgsm->input_cb.data));
   if (err)
     return err;
-  _gpgme_io_close (gpgsm->output_cb.fd);
-  _gpgme_io_close (gpgsm->message_cb.fd);
+  gpgsm_clear_fd (gpgsm, OUTPUT_FD);
+  gpgsm_clear_fd (gpgsm, MESSAGE_FD);
 
   err = start (gpgsm, "IMPORT");
   return err;
@@ -1252,6 +1399,7 @@
   if (!pattern)
     pattern = "";
 
+  /* Always send list-mode option because RESET does not reset it.  */
   if (asprintf (&line, "OPTION list-mode=%d", (list_mode & 3)) < 0)
     return gpg_error_from_errno (errno);
   err = gpgsm_assuan_simple_command (gpgsm->assuan_ctx, line, NULL, NULL);
@@ -1260,6 +1408,8 @@
     return err;
 
 
+  /* Always send key validation because RESET does not reset it.  */
+
   /* Use the validation mode if required.  We don't check for an error
      yet because this is a pretty fresh gpgsm features. */
   gpgsm_assuan_simple_command (gpgsm->assuan_ctx, 
@@ -1284,9 +1434,9 @@
       strcpy (&line[9], pattern);
     }
 
-  _gpgme_io_close (gpgsm->input_cb.fd);
-  _gpgme_io_close (gpgsm->output_cb.fd);
-  _gpgme_io_close (gpgsm->message_cb.fd);
+  gpgsm_clear_fd (gpgsm, INPUT_FD);
+  gpgsm_clear_fd (gpgsm, OUTPUT_FD);
+  gpgsm_clear_fd (gpgsm, MESSAGE_FD);
 
   err = start (gpgsm, line);
   free (line);
@@ -1315,6 +1465,7 @@
   if (mode & GPGME_KEYLIST_MODE_EXTERN)
     list_mode |= 2;
 
+  /* Always send list-mode option because RESET does not reset it.  */
   if (asprintf (&line, "OPTION list-mode=%d", (list_mode & 3)) < 0)
     return gpg_error_from_errno (errno);
   err = gpgsm_assuan_simple_command (gpgsm->assuan_ctx, line, NULL, NULL);
@@ -1322,6 +1473,7 @@
   if (err)
     return err;
 
+  /* Always send key validation because RESET does not reset it.  */
   /* Use the validation mode if required.  We don't check for an error
      yet because this is a pretty fresh gpgsm features. */
   gpgsm_assuan_simple_command (gpgsm->assuan_ctx, 
@@ -1404,9 +1556,9 @@
     linep--;
   *linep = '\0';
 
-  _gpgme_io_close (gpgsm->input_cb.fd);
-  _gpgme_io_close (gpgsm->output_cb.fd);
-  _gpgme_io_close (gpgsm->message_cb.fd);
+  gpgsm_clear_fd (gpgsm, INPUT_FD);
+  gpgsm_clear_fd (gpgsm, OUTPUT_FD);
+  gpgsm_clear_fd (gpgsm, MESSAGE_FD);
 
   err = start (gpgsm, line);
   free (line);
@@ -1428,18 +1580,22 @@
   if (!gpgsm)
     return gpg_error (GPG_ERR_INV_VALUE);
 
-  if (asprintf (&assuan_cmd, "OPTION include-certs %i", include_certs) < 0)
-    return gpg_error_from_errno (errno);
-  err = gpgsm_assuan_simple_command (gpgsm->assuan_ctx, assuan_cmd, NULL,NULL);
-  free (assuan_cmd);
-  if (err)
-    return err;
+  /* FIXME: This does not work as RESET does not reset it so we can't
+     revert back to default.  */
+  if (include_certs != GPGME_INCLUDE_CERTS_DEFAULT)
+    {
+      /* FIXME: Make sure that if we run multiple operations, that we
+	 can reset any previously set value in case the default is
+	 requested.  */
 
-  /* We must send a reset because we need to reset the list of
-     signers.  Note that RESET does not reset OPTION commands. */
-  err = gpgsm_assuan_simple_command (gpgsm->assuan_ctx, "RESET", NULL, NULL);
-  if (err)
-    return err;
+      if (asprintf (&assuan_cmd, "OPTION include-certs %i", include_certs) < 0)
+	return gpg_error_from_errno (errno);
+      err = gpgsm_assuan_simple_command (gpgsm->assuan_ctx, assuan_cmd,
+					 NULL, NULL);
+      free (assuan_cmd);
+      if (err)
+	return err;
+    }
 
   for (i = 0; (key = gpgme_signers_enum (ctx, i)); i++)
     {
@@ -1460,16 +1616,14 @@
     }
 
   gpgsm->input_cb.data = in;
-  err = gpgsm_set_fd (gpgsm->assuan_ctx, "INPUT", gpgsm->input_fd_server,
-                      map_input_enc (gpgsm->input_cb.data));
+  err = gpgsm_set_fd (gpgsm, INPUT_FD, map_input_enc (gpgsm->input_cb.data));
   if (err)
     return err;
   gpgsm->output_cb.data = out;
-  err = gpgsm_set_fd (gpgsm->assuan_ctx, "OUTPUT", gpgsm->output_fd_server,
-		      use_armor ? "--armor" : 0);
+  err = gpgsm_set_fd (gpgsm, OUTPUT_FD, use_armor ? "--armor" : 0);
   if (err)
     return err;
-  _gpgme_io_close (gpgsm->message_cb.fd);
+  gpgsm_clear_fd (gpgsm, MESSAGE_FD);
 
   err = start (gpgsm, mode == GPGME_SIG_MODE_DETACH
 	       ? "SIGN --detached" : "SIGN");
@@ -1488,25 +1642,22 @@
     return gpg_error (GPG_ERR_INV_VALUE);
 
   gpgsm->input_cb.data = sig;
-  err = gpgsm_set_fd (gpgsm->assuan_ctx, "INPUT", gpgsm->input_fd_server,
-                      map_input_enc (gpgsm->input_cb.data));
+  err = gpgsm_set_fd (gpgsm, INPUT_FD, map_input_enc (gpgsm->input_cb.data));
   if (err)
     return err;
   if (plaintext)
     {
       /* Normal or cleartext signature.  */
       gpgsm->output_cb.data = plaintext;
-      err = gpgsm_set_fd (gpgsm->assuan_ctx, "OUTPUT", gpgsm->output_fd_server,
-			  0);
-      _gpgme_io_close (gpgsm->message_cb.fd);
+      err = gpgsm_set_fd (gpgsm, OUTPUT_FD, 0);
+      gpgsm_clear_fd (gpgsm, MESSAGE_FD);
     }
   else
     {
       /* Detached signature.  */
       gpgsm->message_cb.data = signed_text;
-      err = gpgsm_set_fd (gpgsm->assuan_ctx, "MESSAGE",
-			  gpgsm->message_fd_server, 0);
-      _gpgme_io_close (gpgsm->output_cb.fd);
+      err = gpgsm_set_fd (gpgsm, MESSAGE_FD, 0);
+      gpgsm_clear_fd (gpgsm, OUTPUT_FD);
     }
 
   if (!err)
@@ -1568,9 +1719,15 @@
 
     /* Member functions.  */
     gpgsm_release,
+#if USE_DESCRIPTOR_PASSING
+    gpgsm_reset,
+#else
+    NULL,			/* reset */
+#endif
     gpgsm_set_status_handler,
     NULL,		/* set_command_handler */
     gpgsm_set_colon_line_handler,
+    gpgsm_set_locale,
     gpgsm_decrypt,
     gpgsm_delete,
     NULL,		/* edit */
@@ -1589,3 +1746,5 @@
     gpgsm_io_event,
     gpgsm_cancel
   };
+
+#endif /*!HAVE_W32_SYSTEM*/
Index: libkdenetwork/libgpgme-copy/gpgme/stpcpy.c
===================================================================
--- libkdenetwork/libgpgme-copy/gpgme/stpcpy.c	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkdenetwork/libgpgme-copy/gpgme/stpcpy.c	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,23 +1,20 @@
-/* stpcpy.c -- copy a string and return pointer to end of new string
-   Copyright (C) 1992, 1995, 1997, 1998 Free Software Foundation, Inc.
+/* Copyright (C) 1992, 1995, 1997, 2002, 2004 Free Software Foundation, Inc.
+   This file is part of the GNU C Library.
 
-   NOTE: The canonical source of this file is maintained with the GNU C Library.
-   Bugs can be reported to bug-glibc@prep.ai.mit.edu.
+   The GNU C Library is free software; you can redistribute it and/or
+   modify it under the terms of the GNU Lesser General Public
+   License as published by the Free Software Foundation; either
+   version 2.1 of the License, or (at your option) any later version.
 
-   This program is free software; you can redistribute it and/or modify it
-   under the terms of the GNU General Public License as published by the
-   Free Software Foundation; either version 2, or (at your option) any
-   later version.
-
-   This program is distributed in the hope that it will be useful,
+   The GNU C Library is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
-   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-   GNU General Public License for more details.
+   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
+   Lesser General Public License for more details.
 
-   You should have received a copy of the GNU General Public License
-   along with this program; if not, write to the Free Software
-   Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301,
-   USA.  */
+   You should have received a copy of the GNU Lesser General Public
+   License along with the GNU C Library; if not, write to the Free
+   Software Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA
+   02111-1307 USA.  */
 
 #ifdef HAVE_CONFIG_H
 # include <config.h>
@@ -34,7 +31,9 @@
 
 /* Copy SRC to DEST, returning the address of the terminating '\0' in DEST.  */
 char *
-__stpcpy (char *dest, const char *src)
+__stpcpy (dest, src)
+     char *dest;
+     const char *src;
 {
   register char *d = dest;
   register const char *s = src;
@@ -45,6 +44,12 @@
 
   return d - 1;
 }
+#ifdef libc_hidden_def
+libc_hidden_def (__stpcpy)
+#endif
 #ifdef weak_alias
 weak_alias (__stpcpy, stpcpy)
 #endif
+#ifdef libc_hidden_builtin_def
+libc_hidden_builtin_def (stpcpy)
+#endif
Index: libkdenetwork/libgpgme-copy/gpgme/encrypt-sign.c
===================================================================
--- libkdenetwork/libgpgme-copy/gpgme/encrypt-sign.c	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkdenetwork/libgpgme-copy/gpgme/encrypt-sign.c	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,22 +1,23 @@
 /* encrypt-sign.c -  encrypt and verify functions
    Copyright (C) 2000 Werner Koch (dd9jn)
-   Copyright (C) 2001, 2002, 2003 g10 Code GmbH
+   Copyright (C) 2001, 2002, 2003, 2004 g10 Code GmbH
  
    This file is part of GPGME.
  
    GPGME is free software; you can redistribute it and/or modify it
-   under the terms of the GNU General Public License as published by
-   the Free Software Foundation; either version 2 of the License, or
-   (at your option) any later version.
- 
+   under the terms of the GNU Lesser General Public License as
+   published by the Free Software Foundation; either version 2.1 of
+   the License, or (at your option) any later version.
+   
    GPGME is distributed in the hope that it will be useful, but
    WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
-   General Public License for more details.
- 
-   You should have received a copy of the GNU General Public License
-   along with GPGME; if not, write to the Free Software Foundation,
-   Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301, USA.  */
+   Lesser General Public License for more details.
+   
+   You should have received a copy of the GNU Lesser General Public
+   License along with this program; if not, write to the Free Software
+   Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
+   02111-1307, USA.  */
 
 #if HAVE_CONFIG_H
 #include <config.h>
Index: libkdenetwork/libgpgme-copy/gpgme/data-mem.c
===================================================================
--- libkdenetwork/libgpgme-copy/gpgme/data-mem.c	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkdenetwork/libgpgme-copy/gpgme/data-mem.c	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,21 +1,22 @@
 /* data-mem.c - A memory based data object.
-   Copyright (C) 2002, 2003 g10 Code GmbH
+   Copyright (C) 2002, 2003, 2004 g10 Code GmbH
  
    This file is part of GPGME.
  
    GPGME is free software; you can redistribute it and/or modify it
-   under the terms of the GNU General Public License as published by
-   the Free Software Foundation; either version 2 of the License, or
-   (at your option) any later version.
- 
+   under the terms of the GNU Lesser General Public License as
+   published by the Free Software Foundation; either version 2.1 of
+   the License, or (at your option) any later version.
+   
    GPGME is distributed in the hope that it will be useful, but
    WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
-   General Public License for more details.
- 
-   You should have received a copy of the GNU General Public License
-   along with GPGME; if not, write to the Free Software Foundation,
-   Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301, USA.  */
+   Lesser General Public License for more details.
+   
+   You should have received a copy of the GNU Lesser General Public
+   License along with this program; if not, write to the Free Software
+   Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
+   02111-1307, USA.  */
 
 #if HAVE_CONFIG_H
 #include <config.h>
@@ -156,10 +157,12 @@
     mem_read,
     mem_write,
     mem_seek,
-    mem_release
+    mem_release,
+    NULL
   };
 
 
+/* Create a new data buffer and return it in R_DH.  */
 gpgme_error_t
 gpgme_data_new (gpgme_data_t *dh)
 {
@@ -199,25 +202,50 @@
 }
 
 
+/* Destroy the data buffer DH and return a pointer to its content.
+   The memory has be to released with gpgme_free() by the user.  It's
+   size is returned in R_LEN.  */
 char *
 gpgme_data_release_and_get_mem (gpgme_data_t dh, size_t *r_len)
 {
   char *str = NULL;
 
   if (!dh || dh->cbs != &mem_cbs)
-    return NULL;
+    {
+      gpgme_data_release (dh);
+      return NULL;
+    }
 
   str = dh->data.mem.buffer;
   if (!str && dh->data.mem.orig_buffer)
     {
       str = malloc (dh->data.mem.length);
       if (!str)
-	return NULL;
+	{
+	  gpgme_data_release (dh);
+	  return NULL;
+	}
       memcpy (str, dh->data.mem.orig_buffer, dh->data.mem.length);
     }
+  else
+    /* Prevent mem_release from releasing the buffer memory.  We must
+       not fail from this point.  */
+    dh->data.mem.buffer = NULL;
 
   if (r_len)
     *r_len = dh->data.mem.length;
 
+  gpgme_data_release (dh);
+
   return str;
 }
+
+
+/* Release the memory returned by gpgme_data_release_and_get_mem().  */
+void
+gpgme_free (void *buffer)
+{
+  if (buffer)
+    free (buffer);
+}
+
Index: libkdenetwork/libgpgme-copy/gpgme/op-support.c
===================================================================
--- libkdenetwork/libgpgme-copy/gpgme/op-support.c	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkdenetwork/libgpgme-copy/gpgme/op-support.c	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,21 +1,22 @@
 /* op-support.c 
-   Copyright (C) 2002, 2003 g10 Code GmbH
+   Copyright (C) 2002, 2003, 2004 g10 Code GmbH
 
    This file is part of GPGME.
  
    GPGME is free software; you can redistribute it and/or modify it
-   under the terms of the GNU General Public License as published by
-   the Free Software Foundation; either version 2 of the License, or
-   (at your option) any later version.
- 
+   under the terms of the GNU Lesser General Public License as
+   published by the Free Software Foundation; either version 2.1 of
+   the License, or (at your option) any later version.
+   
    GPGME is distributed in the hope that it will be useful, but
    WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
-   General Public License for more details.
- 
-   You should have received a copy of the GNU General Public License
-   along with GPGME; if not, write to the Free Software Foundation,
-   Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301, USA.  */
+   Lesser General Public License for more details.
+   
+   You should have received a copy of the GNU Lesser General Public
+   License along with this program; if not, write to the Free Software
+   Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
+   02111-1307, USA.  */
 
 #if HAVE_CONFIG_H
 #include <config.h>
@@ -23,6 +24,7 @@
 #include <stdlib.h>
 #include <errno.h>
 #include <string.h>
+#include <locale.h>
 
 #include "gpgme.h"
 #include "context.h"
@@ -50,7 +52,7 @@
       data->next = ctx->op_data;
       data->type = type;
       data->cleanup = cleanup;
-      data->hook = ((void *) data) + sizeof (struct ctx_op_data);
+      data->hook = (void *) (((char *) data) + sizeof (struct ctx_op_data));
       ctx->op_data = data;
     }
   *hook = data->hook;
@@ -70,16 +72,47 @@
 
   _gpgme_release_result (ctx);
 
-  /* Create an engine object.  */
-  if  (ctx->engine)
+  if (ctx->engine)
     {
+      /* Attempt to reset an existing engine.  */
+
+      err = _gpgme_engine_reset (ctx->engine);
+      if (gpg_err_code (err) == GPG_ERR_NOT_IMPLEMENTED)
+	{
+	  _gpgme_engine_release (ctx->engine);
+	  ctx->engine = NULL;
+	}
+    }
+
+  if (!ctx->engine)
+    {
+      gpgme_engine_info_t info;
+      info = ctx->engine_info;
+      while (info && info->protocol != ctx->protocol)
+	info = info->next;
+
+      if (!info)
+	return gpg_error (GPG_ERR_UNSUPPORTED_PROTOCOL);
+
+      /* Create an engine object.  */
+      err = _gpgme_engine_new (info, &ctx->engine);
+      if (err)
+	return err;
+    }
+
+  err = _gpgme_engine_set_locale (ctx->engine, LC_CTYPE, ctx->lc_ctype);
+#ifdef LC_MESSAGES
+  if (!err)
+    err = _gpgme_engine_set_locale (ctx->engine,
+				    LC_MESSAGES, ctx->lc_messages);
+#endif
+
+  if (err)
+    {
       _gpgme_engine_release (ctx->engine);
       ctx->engine = NULL;
+      return err;
     }
-  err = _gpgme_engine_new (ctx->protocol, &ctx->engine,
-			   ctx->lc_ctype, ctx->lc_messages);
-  if (err)
-    return err;
 
   if (type == 1 || (type == 2 && !ctx->io_cbs.add))
     {
@@ -113,6 +146,8 @@
 }
 
 
+/* Parse the INV_RECP status line in ARGS and return the result in
+   KEY.  */
 gpgme_error_t
 _gpgme_parse_inv_recp (char *args, gpgme_invalid_key_t *key)
 {
@@ -199,3 +234,47 @@
   *key = inv_key;
   return 0;
 }
+
+
+/* Parse the PLAINTEXT status line in ARGS and return the result in
+   FILENAMEP.  */
+gpgme_error_t
+_gpgme_parse_plaintext (char *args, char **filenamep)
+{
+  char *tail;
+
+  while (*args == ' ')
+    args++;
+  if (*args == '\0')
+    return 0;
+
+  /* First argument is file type.  */
+  while (*args != ' ' && *args != '\0')
+    args++;
+  while (*args == ' ')
+    args++;
+  if (*args == '\0')
+    return 0;
+
+  /* Second argument is the timestamp.  */
+  while (*args != ' ' && *args != '\0')
+    args++;
+  while (*args == ' ')
+    args++;
+  if (*args == '\0')
+    return 0;
+
+  tail = args;
+  while (*tail != ' ' && *tail != '\0')
+    tail++;
+  *tail = '\0';
+  if (filenamep && *args != '\0')
+    {
+      char *filename = strdup (args);
+      if (!filename)
+	return gpg_error_from_errno (errno);
+
+      *filenamep = filename;
+    }
+  return 0;
+}
Index: libkdenetwork/libgpgme-copy/gpgme/w32-sema.c
===================================================================
--- libkdenetwork/libgpgme-copy/gpgme/w32-sema.c	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkdenetwork/libgpgme-copy/gpgme/w32-sema.c	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,22 +1,23 @@
 /* w32-sema.c 
    Copyright (C) 2001 Werner Koch (dd9jn)
-   Copyright (C) 2001, 2002 g10 Code GmbH
+   Copyright (C) 2001, 2002, 2004 g10 Code GmbH
 
    This file is part of GPGME.
  
    GPGME is free software; you can redistribute it and/or modify it
-   under the terms of the GNU General Public License as published by
-   the Free Software Foundation; either version 2 of the License, or
-   (at your option) any later version.
- 
+   under the terms of the GNU Lesser General Public License as
+   published by the Free Software Foundation; either version 2.1 of
+   the License, or (at your option) any later version.
+   
    GPGME is distributed in the hope that it will be useful, but
    WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
-   General Public License for more details.
- 
-   You should have received a copy of the GNU General Public License
-   along with GPGME; if not, write to the Free Software Foundation,
-   Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301, USA.  */
+   Lesser General Public License for more details.
+   
+   You should have received a copy of the GNU Lesser General Public
+   License along with this program; if not, write to the Free Software
+   Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
+   02111-1307, USA.  */
 
 #ifdef HAVE_CONFIG_H
 #include <config.h>
@@ -35,6 +36,7 @@
 
 #include "util.h"
 #include "sema.h"
+#include "debug.h"
 
 static void
 sema_fatal (const char *text)
Index: libkdenetwork/libgpgme-copy/gpgme/putc_unlocked.c
===================================================================
--- libkdenetwork/libgpgme-copy/gpgme/putc_unlocked.c	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkdenetwork/libgpgme-copy/gpgme/putc_unlocked.c	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,23 +1,23 @@
 /* putc_unlocked.c - Replacement for putc_unlocked.
- * Copyright (C) 2002 Free Software Foundation, Inc.
- *
- * This file is part of GnuPG.
- *
- * GnuPG is free software; you can redistribute it and/or modify
- * it under the terms of the GNU General Public License as published by
- * the Free Software Foundation; either version 2 of the License, or
- * (at your option) any later version.
- *
- * GnuPG is distributed in the hope that it will be useful,
- * but WITHOUT ANY WARRANTY; without even the implied warranty of
- * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
- * GNU General Public License for more details.
- *
- * You should have received a copy of the GNU General Public License
- * along with this program; if not, write to the Free Software
- * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301, USA
- */
+   Copyright (C) 2004 g10 Code GmbH
 
+   This file is part of GPGME.
+
+   GPGME is free software; you can redistribute it and/or modify it
+   under the terms of the GNU Lesser General Public License as
+   published by the Free Software Foundation; either version 2.1 of
+   the License, or (at your option) any later version.
+   
+   GPGME is distributed in the hope that it will be useful, but
+   WITHOUT ANY WARRANTY; without even the implied warranty of
+   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
+   Lesser General Public License for more details.
+   
+   You should have received a copy of the GNU Lesser General Public
+   License along with this program; if not, write to the Free Software
+   Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
+   02111-1307, USA.  */
+
 #ifdef HAVE_CONFIG_H
 #include <config.h>
 #endif
Index: libkdenetwork/libgpgme-copy/gpgme/engine-backend.h
===================================================================
--- libkdenetwork/libgpgme-copy/gpgme/engine-backend.h	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkdenetwork/libgpgme-copy/gpgme/engine-backend.h	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,21 +1,22 @@
-/* engine-backend.h -  A crypto backend for the engine interface.
-   Copyright (C) 2002, 2003 g10 Code GmbH
+/* engine-backend.h - A crypto backend for the engine interface.
+   Copyright (C) 2002, 2003, 2004 g10 Code GmbH
  
    This file is part of GPGME.
  
    GPGME is free software; you can redistribute it and/or modify it
-   under the terms of the GNU General Public License as published by
-   the Free Software Foundation; either version 2 of the License, or
-   (at your option) any later version.
- 
+   under the terms of the GNU Lesser General Public License as
+   published by the Free Software Foundation; either version 2.1 of
+   the License, or (at your option) any later version.
+   
    GPGME is distributed in the hope that it will be useful, but
    WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
-   General Public License for more details.
- 
-   You should have received a copy of the GNU General Public License
-   along with GPGME; if not, write to the Free Software Foundation,
-   Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301, USA.  */
+   Lesser General Public License for more details.
+   
+   You should have received a copy of the GNU Lesser General Public
+   License along with this program; if not, write to the Free Software
+   Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
+   02111-1307, USA.  */
 
 #ifndef ENGINE_BACKEND_H
 #define ENGINE_BACKEND_H
@@ -30,14 +31,25 @@
 struct engine_ops
 {
   /* Static functions.  */
+
+  /* Return the default file name for the binary of this engine.  */
   const char *(*get_file_name) (void);
-  const char *(*get_version) (void);
+
+  /* Returns a malloced string containing the version of the engine
+     with the given binary file name (or the default if FILE_NAME is
+     NULL.  */
+  char *(*get_version) (const char *file_name);
+
+  /* Returns a statically allocated string containing the required
+     version.  */
   const char *(*get_req_version) (void);
+
   gpgme_error_t (*new) (void **r_engine,
-			const char *lc_ctype, const char *lc_messages);
+			const char *file_name, const char *home_dir);
 
   /* Member functions.  */
   void (*release) (void *engine);
+  gpgme_error_t (*reset) (void *engine);
   void (*set_status_handler) (void *engine, engine_status_handler_t fnc,
 			      void *fnc_value);
   gpgme_error_t (*set_command_handler) (void *engine,
@@ -46,6 +58,7 @@
   gpgme_error_t (*set_colon_line_handler) (void *engine,
 					   engine_colon_line_handler_t fnc,
 					   void *fnc_value);
+  gpgme_error_t (*set_locale) (void *engine, int category, const char *value);
   gpgme_error_t (*decrypt) (void *engine, gpgme_data_t ciph,
 			    gpgme_data_t plain);
   gpgme_error_t (*delete) (void *engine, gpgme_key_t key, int allow_secret);
Index: libkdenetwork/libgpgme-copy/gpgme/ath-pthread.c
===================================================================
--- libkdenetwork/libgpgme-copy/gpgme/ath-pthread.c	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkdenetwork/libgpgme-copy/gpgme/ath-pthread.c	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,23 +1,23 @@
 /* ath-pthread.c - pthread module for self-adapting thread-safeness library
-   Copyright (C) 2002, 2003 g10 Code GmbH
+   Copyright (C) 2002, 2003, 2004 g10 Code GmbH
 
    This file is part of GPGME.
  
    GPGME is free software; you can redistribute it and/or modify it
-   under the terms of the GNU General Public License as published by
-   the Free Software Foundation; either version 2 of the License, or
-   (at your option) any later version.
- 
+   under the terms of the GNU Lesser General Public License as
+   published by the Free Software Foundation; either version 2.1 of
+   the License, or (at your option) any later version.
+   
    GPGME is distributed in the hope that it will be useful, but
    WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
-   General Public License for more details.
- 
-   You should have received a copy of the GNU General Public License
-   along with GPGME; if not, write to the Free Software Foundation,
-   Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301, USA.  */
+   Lesser General Public License for more details.
+   
+   You should have received a copy of the GNU Lesser General Public
+   License along with this program; if not, write to the Free Software
+   Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
+   02111-1307, USA.  */
 
-
 #ifdef HAVE_CONFIG_H
 #include <config.h>
 #endif
Index: libkdenetwork/libgpgme-copy/gpgme/rungpg.c
===================================================================
--- libkdenetwork/libgpgme-copy/gpgme/rungpg.c	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkdenetwork/libgpgme-copy/gpgme/rungpg.c	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,22 +1,23 @@
 /* rungpg.c - Gpg Engine.
    Copyright (C) 2000 Werner Koch (dd9jn)
-   Copyright (C) 2001, 2002, 2003 g10 Code GmbH
+   Copyright (C) 2001, 2002, 2003, 2004, 2005, 2006 g10 Code GmbH
  
    This file is part of GPGME.
  
    GPGME is free software; you can redistribute it and/or modify it
-   under the terms of the GNU General Public License as published by
-   the Free Software Foundation; either version 2 of the License, or
-   (at your option) any later version.
- 
+   under the terms of the GNU Lesser General Public License as
+   published by the Free Software Foundation; either version 2.1 of
+   the License, or (at your option) any later version.
+   
    GPGME is distributed in the hope that it will be useful, but
    WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
-   General Public License for more details.
- 
-   You should have received a copy of the GNU General Public License
-   along with GPGME; if not, write to the Free Software Foundation,
-   Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301, USA.  */
+   Lesser General Public License for more details.
+   
+   You should have received a copy of the GNU Lesser General Public
+   License along with this program; if not, write to the Free Software
+   Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
+   02111-1307, USA.  */
 
 #if HAVE_CONFIG_H
 #include <config.h>
@@ -26,13 +27,15 @@
 #include <string.h>
 #include <assert.h>
 #include <errno.h>
+#include <unistd.h>
+#include <locale.h>
 
 #include "gpgme.h"
 #include "util.h"
 #include "ops.h"
 #include "wait.h"
 #include "context.h"  /*temp hack until we have GpmeData methods to do I/O */
-#include "io.h"
+#include "priv-io.h"
 #include "sema.h"
 #include "debug.h"
 
@@ -64,8 +67,15 @@
 };
 
 
+typedef gpgme_error_t (*colon_preprocessor_t) (char *line, char **rline);
+
 struct engine_gpg
 {
+  char *file_name;
+
+  char *lc_messages;
+  char *lc_ctype;
+
   struct arg_and_data_s *arglist;
   struct arg_and_data_s **argtail;
 
@@ -92,6 +102,7 @@
     engine_colon_line_handler_t fnc;  /* this indicate use of this structrue */
     void *fnc_value;
     void *tag;
+    colon_preprocessor_t preprocess_fnc;
   } colon;
 
   char **argv;  
@@ -174,8 +185,10 @@
     }
 }
 
+/* If FRONT is true, push at the front of the list.  Use this for
+   options added late in the process.  */
 static gpgme_error_t
-add_arg (engine_gpg_t gpg, const char *arg)
+add_arg_ext (engine_gpg_t gpg, const char *arg, int front)
 {
   struct arg_and_data_s *a;
 
@@ -185,16 +198,38 @@
   a = malloc (sizeof *a + strlen (arg));
   if (!a)
     return gpg_error_from_errno (errno);
-  a->next = NULL;
+
   a->data = NULL;
   a->dup_to = -1;
   strcpy (a->arg, arg);
-  *gpg->argtail = a;
-  gpg->argtail = &a->next;
+  if (front)
+    {
+      a->next = gpg->arglist;
+      if (!gpg->arglist)
+	{
+	  /* If this is the first argument, we need to update the tail
+	     pointer.  */
+	  gpg->argtail = &a->next;
+	}
+      gpg->arglist = a;
+    }
+  else
+    {
+      a->next = NULL;
+      *gpg->argtail = a;
+      gpg->argtail = &a->next;
+    }
+
   return 0;
 }
 
 static gpgme_error_t
+add_arg (engine_gpg_t gpg, const char *arg)
+{
+  return add_arg_ext (gpg, arg, 0);
+}
+
+static gpgme_error_t
 add_data (engine_gpg_t gpg, gpgme_data_t data, int dup_to, int inbound)
 {
   struct arg_and_data_s *a;
@@ -224,17 +259,11 @@
 }
 
 
-static const char *
-gpg_get_version (void)
+static char *
+gpg_get_version (const char *file_name)
 {
-  static const char *gpg_version;
-  DEFINE_STATIC_LOCK (gpg_version_lock);
-
-  LOCK (gpg_version_lock);
-  if (!gpg_version)
-    gpg_version = _gpgme_get_program_version (_gpgme_get_gpg_path ());
-  UNLOCK (gpg_version_lock);
-  return gpg_version;
+  return _gpgme_get_program_version (file_name ? file_name
+				     : _gpgme_get_gpg_path ());
 }
 
 
@@ -313,6 +342,14 @@
 
   gpg_cancel (engine);
 
+  if (gpg->file_name)
+    free (gpg->file_name);
+
+  if (gpg->lc_messages)
+    free (gpg->lc_messages);
+  if (gpg->lc_ctype)
+    free (gpg->lc_ctype);
+
   while (gpg->arglist)
     {
       struct arg_and_data_s *next = gpg->arglist->next;
@@ -336,15 +373,28 @@
 
 
 static gpgme_error_t
-gpg_new (void **engine, const char *lc_ctype, const char *lc_messages)
+gpg_new (void **engine, const char *file_name, const char *home_dir)
 {
   engine_gpg_t gpg;
   gpgme_error_t rc = 0;
+  char *dft_display = NULL;
+  char dft_ttyname[64];
+  char *dft_ttytype = NULL;
 
   gpg = calloc (1, sizeof *gpg);
   if (!gpg)
     return gpg_error_from_errno (errno);
 
+  if (file_name)
+    {
+      gpg->file_name = strdup (file_name);
+      if (!gpg->file_name)
+	{
+	  rc = gpg_error_from_errno (errno);
+	  goto leave;
+	}
+    }
+
   gpg->argtail = &gpg->arglist;
   gpg->status.fd[0] = -1;
   gpg->status.fd[1] = -1;
@@ -380,13 +430,23 @@
       goto leave;
     }
   gpg->status.eof = 0;
+
+  if (home_dir)
+    {
+      rc = add_arg (gpg, "--homedir");
+      if (!rc)
+	rc = add_arg (gpg, home_dir);
+      if (rc)
+	goto leave;
+    }
+
   rc = add_arg (gpg, "--status-fd");
   if (rc)
     goto leave;
 
   {
     char buf[25];
-    snprintf (buf, sizeof(buf), "%d", gpg->status.fd[1]);
+    _gpgme_io_fd2str (buf, sizeof (buf), gpg->status.fd[1]);
     rc = add_arg (gpg, buf);
     if (rc)
       goto leave;
@@ -399,7 +459,47 @@
     rc = add_arg (gpg, "utf8");
   if (!rc)
     rc = add_arg (gpg, "--enable-progress-filter");
+  if (rc)
+    goto leave;
 
+  rc = _gpgme_getenv ("DISPLAY", &dft_display);
+  if (dft_display)
+    {
+      rc = add_arg (gpg, "--display");
+      if (!rc)
+	rc = add_arg (gpg, dft_display);
+
+      free (dft_display);
+    }
+  if (rc)
+    goto leave;
+
+  if (isatty (1))
+    {
+      if (ttyname_r (1, dft_ttyname, sizeof (dft_ttyname)))
+	rc = gpg_error_from_errno (errno);
+      else
+	{
+	  rc = add_arg (gpg, "--ttyname");
+	  if (!rc)
+	    rc = add_arg (gpg, dft_ttyname);
+	  if (!rc)
+	    {
+	      rc = _gpgme_getenv ("TERM", &dft_ttytype);
+	      if (!rc)
+		goto leave;
+
+	      rc = add_arg (gpg, "--ttytype");
+	      if (!rc)
+		rc = add_arg (gpg, dft_ttytype);
+
+	      free (dft_ttytype);
+	    }
+	}
+      if (rc)
+	goto leave;
+    }
+
  leave:
   if (rc)
     gpg_release (gpg);
@@ -409,6 +509,48 @@
 }
 
 
+static gpgme_error_t
+gpg_set_locale (void *engine, int category, const char *value)
+{
+  engine_gpg_t gpg = engine;
+
+  if (category == LC_CTYPE)
+    {
+      if (gpg->lc_ctype)
+        {
+          free (gpg->lc_ctype);
+          gpg->lc_ctype = NULL;
+        }
+      if (value)
+	{
+	  gpg->lc_ctype = strdup (value);
+	  if (!gpg->lc_ctype)
+	    return gpg_error_from_syserror ();
+	}
+    }
+#ifdef LC_MESSAGES
+  else if (category == LC_MESSAGES)
+    {
+      if (gpg->lc_messages)
+        {
+          free (gpg->lc_messages);
+          gpg->lc_messages = NULL;
+        }
+      if (value)
+	{
+	  gpg->lc_messages = strdup (value);
+	  if (!gpg->lc_messages)
+	    return gpg_error_from_syserror ();
+	}
+    }
+#endif /* LC_MESSAGES */
+  else
+    return gpg_error (GPG_ERR_INV_VALUE);
+
+  return 0;
+}
+
+
 /* Note, that the status_handler is allowed to modifiy the args
    value.  */
 static void
@@ -457,15 +599,21 @@
 {
   gpgme_error_t err;
   engine_gpg_t gpg = (engine_gpg_t) opaque;
+  int processed = 0;
 
   assert (gpg->cmd.used);
   assert (gpg->cmd.code);
   assert (gpg->cmd.fnc);
 
-  err = gpg->cmd.fnc (gpg->cmd.fnc_value, gpg->cmd.code, gpg->cmd.keyword, fd);
+  err = gpg->cmd.fnc (gpg->cmd.fnc_value, gpg->cmd.code, gpg->cmd.keyword, fd,
+		      &processed);
   if (err)
     return err;
 
+  /* We always need to send at least a newline character.  */
+  if (!processed)
+    _gpgme_io_write (fd, "\n", 1);
+
   gpg->cmd.code = 0;
   /* And sleep again until read_status will wake us up again.  */
   /* XXX We must check if there are any more fds active after removing
@@ -566,7 +714,7 @@
     argc++;
   if (!gpg->cmd.used)
     argc++;	/* --batch */
-  argc += 1; /* --no-comment */
+  argc += 1;	/* --no-sk-comment */
 
   argv = calloc (argc + 1, sizeof *argv);
   if (!argv)
@@ -625,7 +773,7 @@
         }
       argc++;
     }
-  argv[argc] = strdup ("--no-comment");
+  argv[argc] = strdup ("--no-sk-comment");
   if (!argv[argc])
     {
       int saved_errno = errno;
@@ -693,8 +841,10 @@
 	  fd_data_map[datac].dup_to = a->dup_to;
 	  if (a->dup_to == -1)
 	    {
-	      const int ARGV_SIZE = 25;
-	      argv[argc] = malloc (ARGV_SIZE);
+	      char *ptr;
+	      int buflen = 25;
+
+	      argv[argc] = malloc (buflen);
 	      if (!argv[argc])
 		{
 		  int saved_errno = errno;
@@ -702,9 +852,16 @@
 		  free_argv (argv);
 		  return gpg_error_from_errno (saved_errno);
                 }
-	      snprintf (argv[argc], ARGV_SIZE,
-		       a->print_fd ? "%d" : "-&%d",
-		       fd_data_map[datac].peer_fd);
+
+	      ptr = argv[argc];
+	      if (!a->print_fd)
+		{
+		  *(ptr++) = '-';
+		  *(ptr++) = '&';
+		  buflen -= 2;
+		}
+	      
+	      _gpgme_io_fd2str (ptr, buflen, fd_data_map[datac].peer_fd);
 	      argc++;
             }
 	  datac++;
@@ -806,6 +963,8 @@
 	  if (*p == '\n')
 	    {
 	      /* (we require that the last line is terminated by a LF) */
+	      if (p > buffer && p[-1] == '\r')
+		p[-1] = 0;
 	      *p = 0;
 	      if (!strncmp (buffer, "[GNUPG:] ", 9)
 		  && buffer[9] >= 'A' && buffer[9] <= 'Z')
@@ -842,29 +1001,6 @@
 			  if (nread > 1)
 			    DEBUG0 ("ERROR, unexpected data in read_status");
 
-			  /* Before we can actually add the command
-			     fd, we might have to flush the linked
-			     output data pipe.  */
-			  if (gpg->cmd.linked_idx != -1
-			      && gpg->fd_data_map[gpg->cmd.linked_idx].fd != -1)
-			    {
-			      struct io_select_fd_s fds;
-			      fds.fd = gpg->fd_data_map[gpg->cmd.linked_idx].fd;
-			      fds.for_read = 1;
-			      fds.for_write = 0;
-			      fds.frozen = 0;
-			      fds.opaque = NULL;
-			      do
-				{
-				  fds.signaled = 0;
-				  _gpgme_io_select (&fds, 1, 1);
-				  if (fds.signaled)
-				    _gpgme_data_inbound_handler
-				      (gpg->cmd.linked_data, fds.fd);
-				}
-			      while (fds.signaled);
-			    }
-
 			  add_io_cb (gpg, gpg->cmd.fd, 0,
 				     command_handler, gpg,
 				     &gpg->fd_data_map[gpg->cmd.idx].tag);
@@ -884,6 +1020,31 @@
 			{
 			  if (gpg->cmd.used)
 			    {
+			      /* Before we can actually add the
+				 command fd, we might have to flush
+				 the linked output data pipe.  */
+			      if (gpg->cmd.linked_idx != -1
+				  && gpg->fd_data_map[gpg->cmd.linked_idx].fd
+				  != -1)
+				{
+				  struct io_select_fd_s fds;
+				  fds.fd =
+				    gpg->fd_data_map[gpg->cmd.linked_idx].fd;
+				  fds.for_read = 1;
+				  fds.for_write = 0;
+				  fds.frozen = 0;
+				  fds.opaque = NULL;
+				  do
+				    {
+				      fds.signaled = 0;
+				      _gpgme_io_select (&fds, 1, 1);
+				      if (fds.signaled)
+					_gpgme_data_inbound_handler
+					  (gpg->cmd.linked_data, fds.fd);
+				    }
+				  while (fds.signaled);
+				}
+
 			      /* XXX We must check if there are any
 				 more fds active after removing this
 				 one.  */
@@ -975,14 +1136,27 @@
 	    {
 	      /* (we require that the last line is terminated by a LF)
 		 and we skip empty lines.  Note: we use UTF8 encoding
-		 and escaping of special characters We require at
+		 and escaping of special characters.  We require at
 		 least one colon to cope with some other printed
 		 information.  */
 	      *p = 0;
 	      if (*buffer && strchr (buffer, ':'))
 		{
+		  char *line = NULL;
+
+		  if (gpg->colon.preprocess_fnc)
+		    {
+		      gpgme_error_t err;
+
+		      err = gpg->colon.preprocess_fnc (buffer, &line);
+		      if (err)
+			return err;
+		    }
+
 		  assert (gpg->colon.fnc);
-		  gpg->colon.fnc (gpg->colon.fnc_value, buffer);
+		  gpg->colon.fnc (gpg->colon.fnc_value, line ? line : buffer);
+		  if (line)
+		    free (line);
 		}
             
 	      /* To reuse the buffer for the next line we have to
@@ -1042,9 +1216,27 @@
   if (!gpg)
     return gpg_error (GPG_ERR_INV_VALUE);
 
-  if (! _gpgme_get_gpg_path ())
+  if (!gpg->file_name && !_gpgme_get_gpg_path ())
     return gpg_error (GPG_ERR_INV_ENGINE);
 
+  if (gpg->lc_ctype)
+    {
+      rc = add_arg_ext (gpg, gpg->lc_ctype, 1);
+      if (!rc)
+	rc = add_arg_ext (gpg, "--lc-ctype", 1);
+      if (rc)
+	return rc;
+    }
+
+  if (gpg->lc_messages)
+    {
+      rc = add_arg_ext (gpg, gpg->lc_messages, 1);
+      if (!rc)
+	rc = add_arg_ext (gpg, "--lc-messages", 1);
+      if (rc)
+	return rc;
+    }
+
   rc = build_argv (gpg);
   if (rc)
     return rc;
@@ -1100,7 +1292,8 @@
   fd_parent_list[n].fd = -1;
   fd_parent_list[n].dup_to = -1;
 
-  status = _gpgme_io_spawn (_gpgme_get_gpg_path (),
+  status = _gpgme_io_spawn (gpg->file_name ? gpg->file_name :
+			    _gpgme_get_gpg_path (),
 			    gpg->argv, fd_child_list, fd_parent_list);
   saved_errno = errno;
   free (fd_child_list);
@@ -1227,6 +1420,91 @@
 
 
 static gpgme_error_t
+append_args_from_sig_notations (engine_gpg_t gpg, gpgme_ctx_t ctx /* FIXME */)
+{
+  gpgme_error_t err = 0;
+  gpgme_sig_notation_t notation;
+
+  notation = gpgme_sig_notation_get (ctx);
+
+  while (!err && notation)
+    {
+      if (notation->name
+	  && !(notation->flags & GPGME_SIG_NOTATION_HUMAN_READABLE))
+	err = gpg_error (GPG_ERR_INV_VALUE);
+      else if (notation->name)
+	{
+	  char *arg;
+
+	  /* Maximum space needed is one byte for the "critical" flag,
+	     the name, one byte for '=', the value, and a terminating
+	     '\0'.  */
+
+	  arg = malloc (1 + notation->name_len + 1 + notation->value_len + 1);
+	  if (!arg)
+	    err = gpg_error_from_errno (errno);
+
+	  if (!err)
+	    {
+	      char *argp = arg;
+
+	      if (notation->critical)
+		*(argp++) = '!';
+
+	      memcpy (argp, notation->name, notation->name_len);
+	      argp += notation->name_len;
+
+	      *(argp++) = '=';
+
+	      /* We know that notation->name is '\0' terminated.  */
+	      strcpy (argp, notation->value);
+	    }
+
+	  if (!err)
+	    err = add_arg (gpg, "--sig-notation");
+	  if (!err)
+	    err = add_arg (gpg, arg);
+
+	  if (arg)
+	    free (arg);
+	}
+      else
+	{
+	  /* This is a policy URL.  */
+
+	  char *value;
+
+	  if (notation->critical)
+	    {
+	      value = malloc (1 + notation->value_len + 1);
+	      if (!value)
+		err = gpg_error_from_errno (errno);
+	      else
+		{
+		  value[0] = '!';
+		  /* We know that notation->value is '\0' terminated.  */
+		  strcpy (&value[1], notation->value);
+		}
+	    }
+	  else
+	    value = notation->value;
+
+	  if (!err)
+	    err = add_arg (gpg, "--sig-policy-url");
+	  if (!err)
+	    err = add_arg (gpg, value);
+
+	  if (value != notation->value)
+	    free (value);
+      	}
+
+      notation = notation->next;
+    }
+  return err;
+}
+
+
+static gpgme_error_t
 gpg_edit (void *engine, int type, gpgme_key_t key, gpgme_data_t out,
 	  gpgme_ctx_t ctx /* FIXME */)
 {
@@ -1242,7 +1520,7 @@
     err = add_data (gpg, out, 1, 1);
   if (!err)
     err = add_arg (gpg, "--");
-  if (!err)
+  if (!err && type == 0)
     {
       const char *s = key->subkeys ? key->subkeys->fpr : NULL;
       if (!s)
@@ -1310,6 +1588,13 @@
     err = add_arg (gpg, "-");
   if (!err)
     err = add_data (gpg, ciph, 1, 1);
+  if (gpgme_data_get_file_name (plain))
+    {
+      if (!err)
+	err = add_arg (gpg, "--set-filename");
+      if (!err)
+	err = add_arg (gpg, gpgme_data_get_file_name (plain));
+    }
   if (!err)
     err = add_arg (gpg, "--");
   if (!err)
@@ -1347,6 +1632,8 @@
 
   if (!err)
     err = append_args_from_signers (gpg, ctx);
+  if (!err)
+    err = append_args_from_sig_notations (gpg, ctx);
 
   /* Tell the gpg object about the data.  */
   if (!err)
@@ -1355,6 +1642,13 @@
     err = add_arg (gpg, "-");
   if (!err)
     err = add_data (gpg, ciph, 1, 1);
+  if (gpgme_data_get_file_name (plain))
+    {
+      if (!err)
+	err = add_arg (gpg, "--set-filename");
+      if (!err)
+	err = add_arg (gpg, gpgme_data_get_file_name (plain));
+    }
   if (!err)
     err = add_arg (gpg, "--");
   if (!err)
@@ -1473,13 +1767,107 @@
 }
 
 
+/* The output for external keylistings in GnuPG is different from all
+   the other key listings.  We catch this here with a special
+   preprocessor that reformats the colon handler lines.  */
 static gpgme_error_t
+gpg_keylist_preprocess (char *line, char **r_line)
+{
+  enum
+    {
+      RT_NONE, RT_INFO, RT_PUB, RT_UID
+    }
+  rectype = RT_NONE;
+#define NR_FIELDS 16
+  char *field[NR_FIELDS];
+  int fields = 0;
+
+  *r_line = NULL;
+
+  while (line && fields < NR_FIELDS)
+    {
+      field[fields++] = line;
+      line = strchr (line, ':');
+      if (line)
+	*(line++) = '\0';
+    }
+
+  if (!strcmp (field[0], "info"))
+    rectype = RT_INFO;
+  else if (!strcmp (field[0], "pub"))
+    rectype = RT_PUB;
+  else if (!strcmp (field[0], "uid"))
+    rectype = RT_UID;
+  else 
+    rectype = RT_NONE;
+
+  switch (rectype)
+    {
+    case RT_INFO:
+      /* FIXME: Eventually, check the version number at least.  */
+      return 0;
+
+    case RT_PUB:
+      if (fields < 7)
+	return 0;
+
+      /* The format is:
+
+	 pub:<keyid>:<algo>:<keylen>:<creationdate>:<expirationdate>:<flags>
+
+	 as defined in 5.2. Machine Readable Indexes of the OpenPGP
+	 HTTP Keyserver Protocol (draft). 
+
+	 We want:
+	 pub:o<flags>:<keylen>:<algo>:<keyid>:<creatdate>:<expdate>::::::::
+      */
+
+      if (asprintf (r_line, "pub:o%s:%s:%s:%s:%s:%s::::::::",
+		    field[6], field[3], field[2], field[1],
+		    field[4], field[5]) < 0)
+	return gpg_error_from_errno (errno);
+      return 0;
+
+    case RT_UID:
+      /* The format is:
+
+         uid:<escaped uid string>:<creationdate>:<expirationdate>:<flags>
+
+	 as defined in 5.2. Machine Readable Indexes of the OpenPGP
+	 HTTP Keyserver Protocol (draft). 
+
+	 We want:
+	 uid:o<flags>::::<creatdate>:<expdate>:::<uid>:
+      */
+
+      if (asprintf (r_line, "uid:o%s::::%s:%s:::%s:",
+		    field[4], field[2], field[3], field[1]) < 0)
+	return gpg_error_from_errno (errno);
+      return 0;
+
+    case RT_NONE:
+      /* Unknown record.  */
+      break;
+    }
+  return 0;
+
+}
+
+
+static gpgme_error_t
 gpg_keylist (void *engine, const char *pattern, int secret_only,
 	     gpgme_keylist_mode_t mode)
 {
   engine_gpg_t gpg = engine;
   gpgme_error_t err;
 
+  if (mode & GPGME_KEYLIST_MODE_EXTERN)
+    {
+      if ((mode & GPGME_KEYLIST_MODE_LOCAL)
+	  || secret_only)
+	return gpg_error (GPG_ERR_NOT_SUPPORTED);
+    }
+  
   err = add_arg (gpg, "--with-colons");
   if (!err)
     err = add_arg (gpg, "--fixed-list-mode");
@@ -1487,11 +1875,28 @@
     err = add_arg (gpg, "--with-fingerprint");
   if (!err)
     err = add_arg (gpg, "--with-fingerprint");
+  if (!err && (mode & GPGME_KEYLIST_MODE_SIGS)
+      && (mode & GPGME_KEYLIST_MODE_SIG_NOTATIONS))
+    {
+      err = add_arg (gpg, "--list-options");
+      if (!err)
+	err = add_arg (gpg, "show-sig-subpackets=\"20,26\"");
+    }
   if (!err)
-    err = add_arg (gpg, secret_only ? "--list-secret-keys"
-		   : ((mode & GPGME_KEYLIST_MODE_SIGS)
-		      ? "--check-sigs" : "--list-keys"));
-  
+    {
+      if (mode & GPGME_KEYLIST_MODE_EXTERN)
+	{
+	  err = add_arg (gpg, "--search-keys");
+	  gpg->colon.preprocess_fnc = gpg_keylist_preprocess;
+	}
+      else
+	{
+	  err = add_arg (gpg, secret_only ? "--list-secret-keys"
+			 : ((mode & GPGME_KEYLIST_MODE_SIGS)
+			    ? "--check-sigs" : "--list-keys"));
+	}
+    }
+
   /* Tell the gpg object about the data.  */
   if (!err)
     err = add_arg (gpg, "--");
@@ -1522,6 +1927,13 @@
     err = add_arg (gpg, "--with-fingerprint");
   if (!err)
     err = add_arg (gpg, "--with-fingerprint");
+  if (!err && (mode & GPGME_KEYLIST_MODE_SIGS)
+      && (mode & GPGME_KEYLIST_MODE_SIG_NOTATIONS))
+    {
+      err = add_arg (gpg, "--list-options");
+      if (!err)
+	err = add_arg (gpg, "show-sig-subpackets=\"20,26\"");
+    }
   if (!err)
     err = add_arg (gpg, secret_only ? "--list-secret-keys"
 		   : ((mode & GPGME_KEYLIST_MODE_SIGS)
@@ -1565,7 +1977,17 @@
 
   if (!err)
     err = append_args_from_signers (gpg, ctx);
+  if (!err)
+    err = append_args_from_sig_notations (gpg, ctx);
 
+  if (gpgme_data_get_file_name (in))
+    {
+      if (!err)
+	err = add_arg (gpg, "--set-filename");
+      if (!err)
+	err = add_arg (gpg, gpgme_data_get_file_name (in));
+    }
+
   /* Tell the gpg object about the data.  */
   if (!err)
     err = add_data (gpg, in, 0, 0);
@@ -1664,9 +2086,11 @@
 
     /* Member functions.  */
     gpg_release,
+    NULL,				/* reset */
     gpg_set_status_handler,
     gpg_set_command_handler,
     gpg_set_colon_line_handler,
+    gpg_set_locale,
     gpg_decrypt,
     gpg_delete,
     gpg_edit,
Index: libkdenetwork/libgpgme-copy/gpgme/ops.h
===================================================================
--- libkdenetwork/libgpgme-copy/gpgme/ops.h	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkdenetwork/libgpgme-copy/gpgme/ops.h	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,22 +1,23 @@
 /* ops.h - Internal operation support.
    Copyright (C) 2000 Werner Koch (dd9jn)
-   Copyright (C) 2001, 2002, 2003 g10 Code GmbH
+   Copyright (C) 2001, 2002, 2003, 2004, 2005 g10 Code GmbH
  
    This file is part of GPGME.
  
    GPGME is free software; you can redistribute it and/or modify it
-   under the terms of the GNU General Public License as published by
-   the Free Software Foundation; either version 2 of the License, or
-   (at your option) any later version.
- 
+   under the terms of the GNU Lesser General Public License as
+   published by the Free Software Foundation; either version 2.1 of
+   the License, or (at your option) any later version.
+   
    GPGME is distributed in the hope that it will be useful, but
    WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
-   General Public License for more details.
- 
-   You should have received a copy of the GNU General Public License
-   along with GPGME; if not, write to the Free Software Foundation,
-   Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301, USA.  */
+   Lesser General Public License for more details.
+   
+   You should have received a copy of the GNU Lesser General Public
+   License along with this program; if not, write to the Free Software
+   Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
+   02111-1307, USA.  */
 
 #ifndef OPS_H
 #define OPS_H
@@ -53,6 +54,11 @@
    KEY.  */
 gpgme_error_t _gpgme_parse_inv_recp (char *args, gpgme_invalid_key_t *key);
 
+/* Parse the PLAINTEXT status line in ARGS and return the result in
+   FILENAMEP.  */
+gpgme_error_t _gpgme_parse_plaintext (char *args, char **filenamep);
+
+
 
 /* From verify.c.  */
 gpgme_error_t _gpgme_op_verify_init_result (gpgme_ctx_t ctx);
@@ -98,9 +104,6 @@
 						char *args);
 gpgme_error_t _gpgme_passphrase_command_handler (void *opaque,
 						 gpgme_status_code_t code,
-						 const char *key, int fd);
-gpgme_error_t _gpgme_passphrase_command_handler_internal (void *opaque,
-						 gpgme_status_code_t code,
 						 const char *key, int fd,
 						 int *processed);
 
@@ -135,9 +138,32 @@
 				   void *type_data);
 
 
-/*-- version.c --*/
-const char *_gpgme_compare_versions (const char *my_version,
-				     const char *req_version);
+/* From version.c.  */
+
+/* Return true if MY_VERSION is at least REQ_VERSION, and false
+   otherwise.  */
+int _gpgme_compare_versions (const char *my_version,
+			     const char *req_version);
 char *_gpgme_get_program_version (const char *const path);
 
+
+/* From sig-notation.c.  */
+
+/* Create a new, empty signature notation data object.  */
+gpgme_error_t _gpgme_sig_notation_create (gpgme_sig_notation_t *notationp,
+					  const char *name, int name_len,
+					  const char *value, int value_len,
+					  gpgme_sig_notation_flags_t flags);
+
+/* Free the signature notation object and all associated resources.
+   The object must already be removed from any linked list as the next
+   pointer is ignored.  */
+void _gpgme_sig_notation_free (gpgme_sig_notation_t notation);
+
+/* Parse a notation or policy URL subpacket.  If the packet type is
+   not known, return no error but NULL in NOTATION.  */
+gpgme_error_t _gpgme_parse_notation (gpgme_sig_notation_t *notationp,
+				     int type, int pkflags, int len,
+				     char *data);
+
 #endif /* OPS_H */
Index: libkdenetwork/libgpgme-copy/gpgme/funopen.c
===================================================================
--- libkdenetwork/libgpgme-copy/gpgme/funopen.c	(.../tags/KDE/3.5.6/kdepim)	(wersja 0)
+++ libkdenetwork/libgpgme-copy/gpgme/funopen.c	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -0,0 +1,43 @@
+/* funopen.c - Replacement for funopen.
+   Copyright (C) 2004 g10 Code GmbH
+
+   This file is part of GPGME
+
+   GPGME is free software; you can redistribute it and/or modify it
+   under the terms of the GNU Lesser General Public License as
+   published by the Free Software Foundation; either version 2.1 of
+   the License, or (at your option) any later version.
+   
+   GPGME is distributed in the hope that it will be useful, but
+   WITHOUT ANY WARRANTY; without even the implied warranty of
+   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
+   Lesser General Public License for more details.
+   
+   You should have received a copy of the GNU Lesser General Public
+   License along with this program; if not, write to the Free Software
+   Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
+   02111-1307, USA.  */
+
+#ifdef HAVE_CONFIG_H
+#include <config.h>
+#endif
+
+#include <stdio.h>
+
+#ifdef HAVE_FOPENCOOKIE
+FILE *
+funopen(const void *cookie, cookie_read_function_t *readfn,
+	cookie_write_function_t *writefn,
+	cookie_seek_function_t *seekfn,
+	cookie_close_function_t *closefn)
+{
+  cookie_io_functions_t io = { read: readfn, write: writefn, 
+			       seek: seekfn, close: closefn };
+
+  return fopencookie ((void *) cookie,
+		      readfn ? (writefn ? "rw" : "r")
+		      : (writefn ? "w" : ""), io);
+}
+#else
+#error No known way to implement funopen.
+#endif
Index: libkdenetwork/libgpgme-copy/gpgme/vasprintf.c
===================================================================
--- libkdenetwork/libgpgme-copy/gpgme/vasprintf.c	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkdenetwork/libgpgme-copy/gpgme/vasprintf.c	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -15,8 +15,8 @@
 
 You should have received a copy of the GNU Library General Public
 License along with libiberty; see the file COPYING.LIB.  If
-not, write to the Free Software Foundation, Inc., 51 Franklin Street, Fifth Floor,
-Boston, MA 02110-1301, USA.  */
+not, write to the Free Software Foundation, Inc., 59 Temple Place - Suite 330,
+Boston, MA 02111-1307, USA.  */
 
 #ifdef HAVE_CONFIG_H
 #include <config.h>
Index: libkdenetwork/libgpgme-copy/gpgme/w32-io.c
===================================================================
--- libkdenetwork/libgpgme-copy/gpgme/w32-io.c	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkdenetwork/libgpgme-copy/gpgme/w32-io.c	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,22 +1,23 @@
 /* w32-io.c - W32 API I/O functions.
    Copyright (C) 2000 Werner Koch (dd9jn)
-   Copyright (C) 2001, 2002, 2003 g10 Code GmbH
+   Copyright (C) 2001, 2002, 2003, 2004 g10 Code GmbH
 
    This file is part of GPGME.
  
    GPGME is free software; you can redistribute it and/or modify it
-   under the terms of the GNU General Public License as published by
-   the Free Software Foundation; either version 2 of the License, or
-   (at your option) any later version.
- 
+   under the terms of the GNU Lesser General Public License as
+   published by the Free Software Foundation; either version 2.1 of
+   the License, or (at your option) any later version.
+   
    GPGME is distributed in the hope that it will be useful, but
    WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
-   General Public License for more details.
- 
-   You should have received a copy of the GNU General Public License
-   along with GPGME; if not, write to the Free Software Foundation,
-   Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301, USA.  */
+   Lesser General Public License for more details.
+   
+   You should have received a copy of the GNU Lesser General Public
+   License along with this program; if not, write to the Free Software
+   Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
+   02111-1307, USA.  */
 
 #ifdef HAVE_CONFIG_H
 #include <config.h>
@@ -35,9 +36,9 @@
 
 #include "util.h"
 #include "sema.h"
-#include "io.h"
+#include "priv-io.h"
+#include "debug.h"
 
-
 /* We assume that a HANDLE can be represented by an int which should
    be true for all i386 systems (HANDLE is defined as void *) and
    these are the only systems for which Windows is available.  Further
@@ -50,6 +51,7 @@
 
 #define READBUF_SIZE 4096
 #define WRITEBUF_SIZE 4096
+#define PIPEBUF_SIZE  4096
 #define MAX_READERS 20
 #define MAX_WRITERS 20
 
@@ -117,6 +119,23 @@
 
 
 
+static int
+get_desired_thread_priority (void)
+{
+  int value;
+
+  if (!_gpgme_get_conf_int ("IOThreadPriority", &value))
+    {
+      value = THREAD_PRIORITY_HIGHEST;
+      DEBUG1 ("** Using standard IOThreadPriority of %d\n", value);
+    }
+  else
+    DEBUG1 ("** Configured IOThreadPriority is %d\n", value);
+
+  return value;
+}
+
+
 static HANDLE
 set_synchronize (HANDLE h)
 {
@@ -260,6 +279,12 @@
         free (c);
         return NULL;
     }    
+    else {
+      /* We set the priority of the thread higher because we know that
+         it only runs for a short time.  This greatly helps to increase
+         the performance of the I/O. */
+      SetThreadPriority (c->thread_hd, get_desired_thread_priority ());
+    }
 
     return c;
 }
@@ -394,12 +419,11 @@
     UNLOCK (c->mutex);
 
     DEBUG2 ("fd %d: got %d bytes\n", fd, nread );
+    if (nread > 0)
+      _gpgme_debug (2, "fd %d: got `%.*s'\n", fd, nread, buffer);
 
     return nread;
 }
-
-
-
 /*
  * The writer does use a simple buffering strategy so that we are
  * informed about write errors as soon as possible (i.e. with the the
@@ -414,7 +438,13 @@
     DEBUG2 ("writer thread %p for file %p started", c->thread_hd, c->file_hd );
     for (;;) {
         LOCK (c->mutex);
+        if ( c->stop_me ) {
+            UNLOCK (c->mutex);
+            break;
+        }
         if ( !c->nbytes ) { 
+            if (!SetEvent (c->is_empty))
+                DEBUG1 ("SetEvent failed: ec=%d", (int)GetLastError ());
             if (!ResetEvent (c->have_data) )
                 DEBUG1 ("ResetEvent failed: ec=%d", (int)GetLastError ());
             UNLOCK (c->mutex);
@@ -444,14 +474,6 @@
       
         LOCK (c->mutex);
         c->nbytes -= nwritten;
-        if (c->stop_me) {
-            UNLOCK (c->mutex);
-            break;
-        }
-        if ( !c->nbytes ) {
-            if ( !SetEvent (c->is_empty) )
-                DEBUG1 ("SetEvent failed: ec=%d", (int)GetLastError ());
-        }
         UNLOCK (c->mutex);
     }
     /* indicate that we have an error  */
@@ -481,7 +503,7 @@
         return NULL;
 
     c->file_hd = fd;
-    c->have_data = CreateEvent (&sec_attr, FALSE, FALSE, NULL);
+    c->have_data = CreateEvent (&sec_attr, TRUE, FALSE, NULL);
     c->is_empty  = CreateEvent (&sec_attr, TRUE, TRUE, NULL);
     c->stopped = CreateEvent (&sec_attr, TRUE, FALSE, NULL);
     if (!c->have_data || !c->is_empty || !c->stopped ) {
@@ -513,6 +535,12 @@
         free (c);
         return NULL;
     }    
+    else {
+      /* We set the priority of the thread higher because we know that
+         it only runs for a short time.  This greatly helps to increase
+         the performance of the I/O. */
+      SetThreadPriority (c->thread_hd, get_desired_thread_priority ());
+    }
 
     return c;
 }
@@ -599,6 +627,7 @@
     struct writer_context_s *c = find_writer (fd,1);
 
     DEBUG2 ("fd %d: about to write %d bytes\n", fd, (int)count );
+    _gpgme_debug (2, "fd %d: write `%.*s'\n", fd, (int) count, buffer);
     if ( !c ) {
         DEBUG0 ( "no writer thread\n");
         return -1;
@@ -606,12 +635,14 @@
 
     LOCK (c->mutex);
     if ( c->nbytes ) { /* bytes are pending for send */
+        /* Reset the is_empty event.  Better safe than sorry.  */
+        if (!ResetEvent (c->is_empty))
+            DEBUG1 ("ResetEvent failed: ec=%d", (int)GetLastError ());
         UNLOCK (c->mutex);
         DEBUG2 ("fd %d: waiting for empty buffer in thread %p",
                 fd, c->thread_hd);
         WaitForSingleObject (c->is_empty, INFINITE);
         DEBUG2 ("fd %d: thread %p buffer is empty", fd, c->thread_hd);
-        assert (!c->nbytes);
         LOCK (c->mutex);
     }
     
@@ -620,11 +651,20 @@
         DEBUG1 ("fd %d: write error", fd );
         return -1;
     }
-      
+
+    /* If no error occured, the number of bytes in the buffer must be
+       zero.  */
+    assert (!c->nbytes);
+
     if (count > WRITEBUF_SIZE)
         count = WRITEBUF_SIZE;
     memcpy (c->buffer, buffer, count);
     c->nbytes = count;
+
+    /* We have to reset the is_empty event early, because it is also
+       used by the select() implementation to probe the channel.  */
+    if (!ResetEvent (c->is_empty))
+        DEBUG1 ("ResetEvent failed: ec=%d", (int)GetLastError ());
     if (!SetEvent (c->have_data))
         DEBUG1 ("SetEvent failed: ec=%d", (int)GetLastError ());
     UNLOCK (c->mutex);
@@ -645,9 +685,9 @@
     sec_attr.nLength = sizeof sec_attr;
     sec_attr.bInheritHandle = FALSE;
     
-    if (!CreatePipe ( &r, &w, &sec_attr, 0))
+    if (!CreatePipe ( &r, &w, &sec_attr, PIPEBUF_SIZE))
         return -1;
-    /* make one end inheritable */
+    /* Make one end inheritable. */
     if ( inherit_idx == 0 ) {
         HANDLE h;
         if (!DuplicateHandle( GetCurrentProcess(), r,
@@ -759,29 +799,58 @@
 
 
 static char *
-build_commandline ( char **argv )
+build_commandline (char **argv)
 {
-    int i, n = 0;
-    char *buf, *p;
+  int i;
+  int j;
+  int n = 0;
+  char *buf;
+  char *p;
+  
+  /* We have to quote some things because under Windows the program
+     parses the commandline and does some unquoting.  We enclose the
+     whole argument in double-quotes, and escape literal double-quotes
+     as well as backslashes with a backslash.  We end up with a
+     trailing space at the end of the line, but that is harmless.  */
+  for (i = 0; argv[i]; i++)
+    {
+      p = argv[i];
+      /* The leading double-quote.  */
+      n++;
+      while (*p)
+	{
+	  /* An extra one for each literal that must be escaped.  */
+	  if (*p == '\\' || *p == '"')
+	    n++;
+	  n++;
+	  p++;
+	}
+      /* The trailing double-quote and the delimiter.  */
+      n += 2;
+    }
+  /* And a trailing zero.  */
+  n++;
 
-    /* FIXME: we have to quote some things because under Windows the 
-     * program parses the commandline and does some unquoting */
-    for (i=0; argv[i]; i++)
-        n += strlen (argv[i]) + 2 + 1; /* 2 extra bytes for possible quoting */
-    buf = p = malloc (n);
-    if ( !buf )
-        return NULL;
-    *buf = 0;
-    if ( argv[0] )
-        p = stpcpy (p, argv[0]);
-    for (i = 1; argv[i]; i++) {
-        if (!*argv[i])
-            p = stpcpy (p, " \"\"");
-        else
-            p = stpcpy (stpcpy (p, " "), argv[i]);
+  buf = p = malloc (n);
+  if (!buf)
+    return NULL;
+  for (i = 0; argv[i]; i++)
+    {
+      char *argvp = argv[i];
+
+      *(p++) = '"';
+      while (*argvp)
+	{
+	  if (*argvp == '\\' || *argvp == '"')
+	    *(p++) = '\\';
+	  *(p++) = *(argvp++);
+	}
+      *(p++) = '"';
+      *(p++) = ' ';
     }
+  *(p++) = 0;
 
-    return buf;
+  return buf;
 }
 
 
@@ -820,7 +889,7 @@
     memset (&si, 0, sizeof si);
     si.cb = sizeof (si);
     si.dwFlags = STARTF_USESTDHANDLES | STARTF_USESHOWWINDOW;
-    si.wShowWindow = debug_me? SW_SHOW : SW_MINIMIZE;
+    si.wShowWindow = debug_me? SW_SHOW : SW_HIDE;
     si.hStdInput = GetStdHandle (STD_INPUT_HANDLE);
     si.hStdOutput = GetStdHandle (STD_OUTPUT_HANDLE);
     si.hStdError = GetStdHandle (STD_ERROR_HANDLE);
@@ -890,13 +959,13 @@
         return -1;
     }
 
-    /* close the /dev/nul handle if used */
+    /* Close the /dev/nul handle if used. */
     if (hnul != INVALID_HANDLE_VALUE ) {
         if ( !CloseHandle ( hnul ) )
             DEBUG1 ("CloseHandle(hnul) failed: ec=%d\n", (int)GetLastError());
     }
 
-    /* Close the other ends of the pipes */
+    /* Close the other ends of the pipes. */
     for (i = 0; fd_parent_list[i].fd != -1; i++)
       _gpgme_io_close (fd_parent_list[i].fd);
 
@@ -919,60 +988,6 @@
 }
 
 
-
-
-int
-_gpgme_io_waitpid ( int pid, int hang, int *r_status, int *r_signal )
-{
-    HANDLE proc = fd_to_handle (pid);
-    int code, ret = 0;
-    DWORD exc;
-
-    *r_status = 0;
-    *r_signal = 0;
-    code = WaitForSingleObject ( proc, hang? INFINITE : 0 );
-    switch (code) {
-      case WAIT_FAILED:
-        DEBUG2 ("WFSO pid=%d failed: %d\n", (int)pid, (int)GetLastError () );
-        break;
-
-      case WAIT_OBJECT_0:
-        if (!GetExitCodeProcess (proc, &exc)) {
-            DEBUG2 ("** GECP pid=%d failed: ec=%d\n",
-                    (int)pid, (int)GetLastError () );
-            *r_status = 4; 
-        }
-        else {
-            DEBUG2 ("GECP pid=%d exit code=%d\n", (int)pid,  exc);
-            *r_status = exc;
-        }
-        ret = 1;
-        break;
-
-      case WAIT_TIMEOUT:
-        if (hang)
-            DEBUG1 ("WFSO pid=%d timed out\n", (int)pid);
-        break;
-
-      default:
-        DEBUG2 ("WFSO pid=%d returned %d\n", (int)pid, code );
-        break;
-    }
-    return ret;
-}
-
-int
-_gpgme_io_kill ( int pid, int hard )
-{
-    HANDLE proc = fd_to_handle (pid);
-
-    #warning I am not sure how to kill a process
-    /* fixme: figure out how this can be done */
-    return 0;
-}
-
-
-
 /*
  * Select on the list of fds.
  * Returns: -1 = error
@@ -1032,18 +1047,11 @@
                         DEBUG0 ("Too many objects for WFMO!" );
                         return -1;
                     }
-                    LOCK (c->mutex);
-                    if ( !c->nbytes ) {
-                        waitidx[nwait]   = i;
-                        waitbuf[nwait++] = c->is_empty;
-                        DEBUG_ADD1 (dbg_help, "w%d ", fds[i].fd );
-                        any = 1;
-                    }
-                    else {
-                        DEBUG_ADD1 (dbg_help, "w%d(ignored) ", fds[i].fd );
-                    }
-                    UNLOCK (c->mutex);
+		    waitidx[nwait]   = i;
+		    waitbuf[nwait++] = c->is_empty;
                 }
+		DEBUG_ADD1 (dbg_help, "w%d ", fds[i].fd );
+		any = 1;
             }
         }
     }
@@ -1063,7 +1071,7 @@
          */
         any = 0;
         for (i=code - WAIT_OBJECT_0; i < nwait; i++ ) {
-            if (WaitForSingleObject ( waitbuf[i], NULL ) == WAIT_OBJECT_0) {
+            if (WaitForSingleObject (waitbuf[i], 0) == WAIT_OBJECT_0) {
                 assert (waitidx[i] >=0 && waitidx[i] < nfds);
                 fds[waitidx[i]].signaled = 1;
                 any = 1;
@@ -1084,7 +1092,7 @@
             int k, j = handle_to_fd (waitbuf[i]);
                     
             DEBUG1 ("WFMO invalid handle %d removed\n", j);
-            for (k=0 ; k < nfds; i++ ) {
+            for (k=0 ; k < nfds; k++ ) {
                 if ( fds[k].fd == j ) {
                     fds[k].for_read = fds[k].for_write = 0;
                     goto restart;
@@ -1115,3 +1123,30 @@
     
     return count;
 }
+
+void
+_gpgme_io_subsystem_init (void)
+{
+  
+}
+
+
+/* Write the printable version of FD to the buffer BUF of length
+   BUFLEN.  The printable version is the representation on the command
+   line that the child process expects.  */
+int
+_gpgme_io_fd2str (char *buf, int buflen, int fd)
+{
+  return snprintf (buf, buflen, "%d", fd);
+}
+
+
+/* The following interface is only useful for GPGME Glib.  */
+
+/* Look up the giochannel for file descriptor FD.  */
+void *
+gpgme_get_giochannel (int fd)
+{
+  return NULL;
+}
+
Index: libkdenetwork/libgpgme-copy/gpgme/edit.c
===================================================================
--- libkdenetwork/libgpgme-copy/gpgme/edit.c	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkdenetwork/libgpgme-copy/gpgme/edit.c	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,21 +1,22 @@
 /* edit.c - Key edit function.
-   Copyright (C) 2002, 2003 g10 Code GmbH
+   Copyright (C) 2002, 2003, 2004 g10 Code GmbH
 
    This file is part of GPGME.
  
    GPGME is free software; you can redistribute it and/or modify it
-   under the terms of the GNU General Public License as published by
-   the Free Software Foundation; either version 2 of the License, or
-   (at your option) any later version.
- 
+   under the terms of the GNU Lesser General Public License as
+   published by the Free Software Foundation; either version 2.1 of
+   the License, or (at your option) any later version.
+   
    GPGME is distributed in the hope that it will be useful, but
    WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
-   General Public License for more details.
- 
-   You should have received a copy of the GNU General Public License
-   along with GPGME; if not, write to the Free Software Foundation,
-   Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301, USA.  */
+   Lesser General Public License for more details.
+   
+   You should have received a copy of the GNU Lesser General Public
+   License along with this program; if not, write to the Free Software
+   Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
+   02111-1307, USA.  */
 
 #if HAVE_CONFIG_H
 #include <config.h>
@@ -62,7 +63,7 @@
 
 static gpgme_error_t
 command_handler (void *priv, gpgme_status_code_t status, const char *args,
-		 int fd)
+		 int fd, int *processed_r)
 {
   gpgme_ctx_t ctx = (gpgme_ctx_t) priv;
   gpgme_error_t err;
@@ -70,8 +71,8 @@
 
   if (ctx->passphrase_cb)
     {
-      err = _gpgme_passphrase_command_handler_internal (ctx, status, args,
-							fd, &processed);
+      err = _gpgme_passphrase_command_handler (ctx, status, args,
+					       fd, &processed);
       if (err)
 	return err;
     }
@@ -86,8 +87,15 @@
       if (err)
 	return err;
 
+      /* FIXME: We expect the user to handle _all_ status codes.
+	 Later, we may fix the callback interface to allow the user
+	 indicate if it processed the status code or not.  */
+      *processed_r = 1;
+
       return (*opd->fnc) (opd->fnc_value, status, args, fd);
     }
+
+  *processed_r = processed;
   return 0;
 }
 
Index: libkdenetwork/libgpgme-copy/gpgme/w32-util.c
===================================================================
--- libkdenetwork/libgpgme-copy/gpgme/w32-util.c	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkdenetwork/libgpgme-copy/gpgme/w32-util.c	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,23 +1,24 @@
 /* w32-util.c - Utility functions for the W32 API
    Copyright (C) 1999 Free Software Foundation, Inc
    Copyright (C) 2001 Werner Koch (dd9jn)
-   Copyright (C) 2001, 2002, 2003 g10 Code GmbH
+   Copyright (C) 2001, 2002, 2003, 2004 g10 Code GmbH
 
    This file is part of GPGME.
  
    GPGME is free software; you can redistribute it and/or modify it
-   under the terms of the GNU General Public License as published by
-   the Free Software Foundation; either version 2 of the License, or
-   (at your option) any later version.
- 
+   under the terms of the GNU Lesser General Public License as
+   published by the Free Software Foundation; either version 2.1 of
+   the License, or (at your option) any later version.
+   
    GPGME is distributed in the hope that it will be useful, but
    WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
-   General Public License for more details.
- 
-   You should have received a copy of the GNU General Public License
-   along with GPGME; if not, write to the Free Software Foundation,
-   Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301, USA.  */
+   Lesser General Public License for more details.
+   
+   You should have received a copy of the GNU Lesser General Public
+   License along with this program; if not, write to the Free Software
+   Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
+   02111-1307, USA.  */
 
 #ifdef HAVE_CONFIG_H
 #include <config.h>
@@ -32,65 +33,196 @@
 #include <signal.h>
 #include <fcntl.h>
 #include <windows.h>
+#include <shlobj.h>
 #include <io.h>
 
 #include "util.h"
 #include "sema.h"
+#include "debug.h"
 
 DEFINE_STATIC_LOCK (get_path_lock);
 
-/* Return a string from the Win32 Registry or NULL in case of error.
-  Caller must release the return value.  A NULL for root is an alias
-  for HKEY_CURRENT_USER.  */
+
+#define RTLD_LAZY 0
+
+static __inline__ void *
+dlopen (const char * name, int flag)
+{
+  void * hd = LoadLibrary (name);
+  return hd;
+}
+
+static __inline__ void *
+dlsym (void * hd, const char * sym)
+{
+  if (hd && sym)
+    {
+      void * fnc = GetProcAddress (hd, sym);
+      if (!fnc)
+        return NULL;
+      return fnc;
+    }
+  return NULL;
+}
+
+static __inline__ int
+dlclose (void * hd)
+{
+  if (hd)
+    {
+      FreeLibrary (hd);
+      return 0;
+    }
+  return -1;
+}  
+
+
+/* Return a string from the W32 Registry or NULL in case of error.
+   Caller must release the return value.  A NULL for root is an alias
+   for HKEY_CURRENT_USER, HKEY_LOCAL_MACHINE in turn. */
 static char *
 read_w32_registry_string (const char *root, const char *dir, const char *name)
 {
   HKEY root_key, key_handle;
-  DWORD n1, nbytes;
+  DWORD n1, nbytes, type;
   char *result = NULL;
-
-  if (!root)
+	
+  if ( !root )
     root_key = HKEY_CURRENT_USER;
-  else if (!strcmp (root, "HKEY_CLASSES_ROOT"))
+  else if ( !strcmp( root, "HKEY_CLASSES_ROOT" ) )
     root_key = HKEY_CLASSES_ROOT;
-  else if (!strcmp (root, "HKEY_CURRENT_USER"))
+  else if ( !strcmp( root, "HKEY_CURRENT_USER" ) )
     root_key = HKEY_CURRENT_USER;
-  else if (!strcmp (root, "HKEY_LOCAL_MACHINE"))
+  else if ( !strcmp( root, "HKEY_LOCAL_MACHINE" ) )
     root_key = HKEY_LOCAL_MACHINE;
-  else if (!strcmp (root, "HKEY_USERS"))
+  else if ( !strcmp( root, "HKEY_USERS" ) )
     root_key = HKEY_USERS;
-  else if (!strcmp (root, "HKEY_PERFORMANCE_DATA"))
+  else if ( !strcmp( root, "HKEY_PERFORMANCE_DATA" ) )
     root_key = HKEY_PERFORMANCE_DATA;
-  else if (!strcmp (root, "HKEY_CURRENT_CONFIG"))
+  else if ( !strcmp( root, "HKEY_CURRENT_CONFIG" ) )
     root_key = HKEY_CURRENT_CONFIG;
   else
     return NULL;
+	
+  if ( RegOpenKeyEx ( root_key, dir, 0, KEY_READ, &key_handle ) )
+    {
+      if (root)
+        return NULL; /* no need for a RegClose, so return direct */
+      /* It seems to be common practise to fall back to HKLM. */
+      if (RegOpenKeyEx (HKEY_LOCAL_MACHINE, dir, 0, KEY_READ, &key_handle) )
+        return NULL; /* still no need for a RegClose, so return direct */
+    }
 
-  if (RegOpenKeyEx (root_key, dir, 0, KEY_READ, &key_handle))
-    return NULL;	/* No need for a RegClose, so return directly.  */
-
   nbytes = 1;
-  if (RegQueryValueEx (key_handle, name, 0, NULL, NULL, &nbytes))
+  if ( RegQueryValueEx( key_handle, name, 0, NULL, NULL, &nbytes ) )
+    {
+      if (root)
+        goto leave;
+      /* Try to fallback to HKLM also vor a missing value.  */
+      RegCloseKey (key_handle);
+      if (RegOpenKeyEx (HKEY_LOCAL_MACHINE, dir, 0, KEY_READ, &key_handle) )
+        return NULL; /* Nope.  */
+      if (RegQueryValueEx ( key_handle, name, 0, NULL, NULL, &nbytes))
+        goto leave;
+    }
+  result = malloc ( (n1=nbytes+1) );
+  if ( !result )
     goto leave;
-  n1 = nbytes + 1;
-  result = malloc (n1);
-  if (!result)
-    goto leave;
-  if (RegQueryValueEx (key_handle, name, 0, NULL, result, &n1))
+  if ( RegQueryValueEx ( key_handle, name, 0, &type, result, &n1 ) )
     {
-      free (result);
-      result = NULL;
+      free(result); result = NULL;
       goto leave;
     }
-  result[nbytes] = 0;	/* Make sure it is really a string.  */
+  result[nbytes] = 0; /* Make sure it is really a string.  */
+  if (type == REG_EXPAND_SZ && strchr (result, '%')) 
+    {
+      char *tmp;
+        
+      n1 += 1000;
+      tmp = malloc (n1+1);
+      if (!tmp)
+        goto leave;
+      nbytes = ExpandEnvironmentStrings (result, tmp, n1);
+      if (nbytes && nbytes > n1)
+        {
+          free (tmp);
+          n1 = nbytes;
+          tmp = malloc (n1 + 1);
+          if (!tmp)
+            goto leave;
+          nbytes = ExpandEnvironmentStrings (result, tmp, n1);
+          if (nbytes && nbytes > n1) {
+            free (tmp); /* Oops - truncated, better don't expand at all. */
+            goto leave;
+          }
+          tmp[nbytes] = 0;
+          free (result);
+          result = tmp;
+        }
+      else if (nbytes)  /* Okay, reduce the length. */
+        {
+          tmp[nbytes] = 0;
+          free (result);
+          result = malloc (strlen (tmp)+1);
+          if (!result)
+            result = tmp;
+          else 
+            {
+              strcpy (result, tmp);
+              free (tmp);
+            }
+        }
+      else  /* Error - don't expand. */
+        {
+          free (tmp);
+        }
+    }
 
  leave:
-  RegCloseKey (key_handle);
+  RegCloseKey( key_handle );
   return result;
 }
 
 
-static const char *
+/* This is a helper function to load and run a Windows function from
+   either of one DLLs. */
+static HRESULT
+w32_shgetfolderpath (HWND a, int b, HANDLE c, DWORD d, LPSTR e)
+{
+  static int initialized;
+  static HRESULT (WINAPI * func)(HWND,int,HANDLE,DWORD,LPSTR);
+
+  if (!initialized)
+    {
+      static char *dllnames[] = { "shell32.dll", "shfolder.dll", NULL };
+      void *handle;
+      int i;
+
+      initialized = 1;
+
+      for (i=0, handle = NULL; !handle && dllnames[i]; i++)
+        {
+          handle = dlopen (dllnames[i], RTLD_LAZY);
+          if (handle)
+            {
+              func = dlsym (handle, "SHGetFolderPathA");
+              if (!func)
+                {
+                  dlclose (handle);
+                  handle = NULL;
+                }
+            }
+        }
+    }
+
+  if (func)
+    return func (a,b,c,d,e);
+  else
+    return -1;
+}
+
+
+static char *
 find_program_in_registry (const char *name)
 {
   char *program = NULL;
@@ -111,6 +243,28 @@
 }
 
 
+static char *
+find_program_at_standard_place (const char *name)
+{
+  char path[MAX_PATH];
+  char *result = NULL;
+      
+  if (w32_shgetfolderpath (NULL, CSIDL_PROGRAM_FILES, NULL, 0, path) >= 0) 
+    {
+      result = malloc (strlen (path) + 1 + strlen (name) + 1);
+      if (result)
+        {
+          strcpy (stpcpy (stpcpy (result, path), "\\"), name);
+          if (access (result, F_OK))
+            {
+              free (result);
+              result = NULL;
+            }
+        }
+    }
+  return result;
+}
+
 const char *
 _gpgme_get_gpg_path (void)
 {
@@ -119,6 +273,8 @@
   LOCK (get_path_lock);
   if (!gpg_program)
     gpg_program = find_program_in_registry ("gpgProgram");
+  if (!gpg_program)
+    gpg_program = find_program_at_standard_place ("GNU\\GnuPG\\gpg.exe");
 #ifdef GPG_PATH
   if (!gpg_program)
     gpg_program = GPG_PATH;
@@ -135,6 +291,8 @@
   LOCK (get_path_lock);
   if (!gpgsm_program)
     gpgsm_program = find_program_in_registry ("gpgsmProgram");
+  if (!gpgsm_program)
+    gpgsm_program = find_program_at_standard_place ("GNU\\GnuPG\\gpgsm.exe");
 #ifdef GPGSM_PATH
   if (!gpgsm_program)
     gpgsm_program = GPGSM_PATH;
@@ -142,3 +300,18 @@
   UNLOCK (get_path_lock);
   return gpgsm_program;
 }
+
+
+/* Return an integer value from gpgme specific configuration
+   entries. VALUE receives that value; function returns true if a value
+   has been configured and false if not. */
+int
+_gpgme_get_conf_int (const char *key, int *value)
+{
+  char *tmp = read_w32_registry_string (NULL, "Software\\GNU\\gpgme", key);
+  if (!tmp)
+    return 0;
+  *value = atoi (tmp);
+  free (tmp);
+  return 1;
+}
Index: libkdenetwork/libgpgme-copy/gpgme/Makefile.am
===================================================================
--- libkdenetwork/libgpgme-copy/gpgme/Makefile.am	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkdenetwork/libgpgme-copy/gpgme/Makefile.am	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -37,10 +37,10 @@
 	import.c export.c genkey.c delete.c edit.c			\
 	engine.c rungpg.c 	\
 	posix-util.c posix-sema.c posix-io.c	\
-	engine-gpgsm.c \
+	engine-gpgsm.c sig-notation.c funopen.c \
 	debug.c gpgme.c version.c error.c
 
-libgpgme_la_SOURCES = ath-compat.c fakes.c
+libgpgme_la_SOURCES = ath.c
 
 AM_CPPFLAGS = $(assuan_cppflags) -I$(srcdir)/../../libgpg-error-copy -I../../libgpg-error-copy
 
Index: libkdenetwork/libgpgme-copy/gpgme/context.h
===================================================================
--- libkdenetwork/libgpgme-copy/gpgme/context.h	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkdenetwork/libgpgme-copy/gpgme/context.h	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,22 +1,23 @@
 /* context.h - Definitions for a GPGME context.
    Copyright (C) 2000 Werner Koch (dd9jn)
-   Copyright (C) 2001, 2002, 2003 g10 Code GmbH
+   Copyright (C) 2001, 2002, 2003, 2004, 2005 g10 Code GmbH
 
    This file is part of GPGME.
  
    GPGME is free software; you can redistribute it and/or modify it
-   under the terms of the GNU General Public License as published by
-   the Free Software Foundation; either version 2 of the License, or
-   (at your option) any later version.
- 
+   under the terms of the GNU Lesser General Public License as
+   published by the Free Software Foundation; either version 2.1 of
+   the License, or (at your option) any later version.
+   
    GPGME is distributed in the hope that it will be useful, but
    WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
-   General Public License for more details.
- 
-   You should have received a copy of the GNU General Public License
-   along with GPGME; if not, write to the Free Software Foundation,
-   Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301, USA.  */
+   Lesser General Public License for more details.
+   
+   You should have received a copy of the GNU Lesser General Public
+   License along with this program; if not, write to the Free Software
+   Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
+   02111-1307, USA.  */
 
 #ifndef CONTEXT_H
 #define CONTEXT_H
@@ -62,6 +63,9 @@
    be performed (sequentially).  */
 struct gpgme_context
 {
+  /* The engine info for this context.  */
+  gpgme_engine_info_t engine_info;
+
   /* The protocol used by this context.  */
   gpgme_protocol_t protocol;
 
@@ -87,6 +91,9 @@
   unsigned int signers_size;
   gpgme_key_t *signers;
 
+  /* The signature notations for this context.  */
+  gpgme_sig_notation_t sig_notations;
+
   /* The locale for the pinentry.  */
   char *lc_ctype;
   char *lc_messages;
Index: libkdenetwork/libgpgme-copy/gpgme/sema.h
===================================================================
--- libkdenetwork/libgpgme-copy/gpgme/sema.h	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkdenetwork/libgpgme-copy/gpgme/sema.h	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,22 +1,23 @@
 /* sema.h - Definitions for semaphores.
    Copyright (C) 2000 Werner Koch (dd9jn)
-   Copyright (C) 2001, 2003 g10 Code GmbH
+   Copyright (C) 2001, 2003, 2004 g10 Code GmbH
 
    This file is part of GPGME.
  
    GPGME is free software; you can redistribute it and/or modify it
-   under the terms of the GNU General Public License as published by
-   the Free Software Foundation; either version 2 of the License, or
-   (at your option) any later version.
- 
+   under the terms of the GNU Lesser General Public License as
+   published by the Free Software Foundation; either version 2.1 of
+   the License, or (at your option) any later version.
+   
    GPGME is distributed in the hope that it will be useful, but
    WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
-   General Public License for more details.
- 
-   You should have received a copy of the GNU General Public License
-   along with GPGME; if not, write to the Free Software Foundation,
-   Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301, USA.  */
+   Lesser General Public License for more details.
+   
+   You should have received a copy of the GNU Lesser General Public
+   License along with this program; if not, write to the Free Software
+   Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
+   02111-1307, USA.  */
 
 #ifndef SEMA_H
 #define SEMA_H
Index: libkdenetwork/libgpgme-copy/gpgme/priv-io.h
===================================================================
--- libkdenetwork/libgpgme-copy/gpgme/priv-io.h	(.../tags/KDE/3.5.6/kdepim)	(wersja 0)
+++ libkdenetwork/libgpgme-copy/gpgme/priv-io.h	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -0,0 +1,67 @@
+/* priv-io.h - Interface to the private I/O functions.
+   Copyright (C) 2000 Werner Koch (dd9jn)
+   Copyright (C) 2001, 2002, 2003, 2004, 2005 g10 Code GmbH
+
+   This file is part of GPGME.
+ 
+   GPGME is free software; you can redistribute it and/or modify it
+   under the terms of the GNU Lesser General Public License as
+   published by the Free Software Foundation; either version 2.1 of
+   the License, or (at your option) any later version.
+   
+   GPGME is distributed in the hope that it will be useful, but
+   WITHOUT ANY WARRANTY; without even the implied warranty of
+   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
+   Lesser General Public License for more details.
+   
+   You should have received a copy of the GNU Lesser General Public
+   License along with this program; if not, write to the Free Software
+   Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
+   02111-1307, USA.  */
+
+#ifndef IO_H
+#define IO_H
+
+
+/* A single file descriptor passed to spawn.  For child fds, dup_to
+   specifies the fd it should become in the child.  */
+struct spawn_fd_item_s
+{
+  int fd;
+  int dup_to;
+};
+
+struct io_select_fd_s
+{
+  int fd;
+  int for_read;
+  int for_write;
+  int signaled;
+  int frozen;
+  void *opaque;
+};
+
+/* These function are either defined in posix-io.c or w32-io.c.  */
+void _gpgme_io_subsystem_init (void);
+int _gpgme_io_read (int fd, void *buffer, size_t count);
+int _gpgme_io_write (int fd, const void *buffer, size_t count);
+int _gpgme_io_pipe (int filedes[2], int inherit_idx);
+int _gpgme_io_close (int fd);
+int _gpgme_io_set_close_notify (int fd, void (*handler) (int, void *),
+				void *value);
+int _gpgme_io_set_nonblocking (int fd);
+
+/* Spawn the executable PATH with ARGV as arguments, after forking
+   close all fds in FD_PARENT_LIST in the parent and close or dup all
+   fds in FD_CHILD_LIST in the child.  */
+int _gpgme_io_spawn (const char *path, char **argv,
+		     struct spawn_fd_item_s *fd_child_list,
+		     struct spawn_fd_item_s *fd_parent_list);
+int _gpgme_io_select (struct io_select_fd_s *fds, size_t nfds, int nonblock);
+
+/* Write the printable version of FD to the buffer BUF of length
+   BUFLEN.  The printable version is the representation on the command
+   line that the child process expects.  */
+int _gpgme_io_fd2str (char *buf, int buflen, int fd);
+
+#endif /* IO_H */
Index: libkdenetwork/libgpgme-copy/gpgme/data-compat.c
===================================================================
--- libkdenetwork/libgpgme-copy/gpgme/data-compat.c	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkdenetwork/libgpgme-copy/gpgme/data-compat.c	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -4,18 +4,19 @@
    This file is part of GPGME.
  
    GPGME is free software; you can redistribute it and/or modify it
-   under the terms of the GNU General Public License as published by
-   the Free Software Foundation; either version 2 of the License, or
-   (at your option) any later version.
- 
+   under the terms of the GNU Lesser General Public License as
+   published by the Free Software Foundation; either version 2.1 of
+   the License, or (at your option) any later version.
+   
    GPGME is distributed in the hope that it will be useful, but
    WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
-   General Public License for more details.
- 
-   You should have received a copy of the GNU General Public License
-   along with GPGME; if not, write to the Free Software Foundation,
-   Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301, USA.  */
+   Lesser General Public License for more details.
+   
+   You should have received a copy of the GNU Lesser General Public
+   License along with this program; if not, write to the Free Software
+   Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
+   02111-1307, USA.  */
 
 #if HAVE_CONFIG_H
 #include <config.h>
@@ -139,7 +140,7 @@
       errno = EINVAL;
       return -1;
     case GPG_ERR_NOT_SUPPORTED:
-      errno = EOPNOTSUPP;
+      errno = ENOSYS;
       return -1;
     default:
       /* FIXME: Yeah, well.  */
Index: libkdenetwork/libgpgme-copy/assuan/assuan-domain-server.c
===================================================================
--- libkdenetwork/libgpgme-copy/assuan/assuan-domain-server.c	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkdenetwork/libgpgme-copy/assuan/assuan-domain-server.c	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,46 +0,0 @@
-/* assuan-socket-server.c - Assuan socket based server
- *	Copyright (C) 2002 Free Software Foundation, Inc.
- *
- * This file is part of Assuan.
- *
- * Assuan is free software; you can redistribute it and/or modify it
- * under the terms of the GNU Lesser General Public License as
- * published by the Free Software Foundation; either version 2.1 of
- * the License, or (at your option) any later version.
- *
- * Assuan is distributed in the hope that it will be useful, but
- * WITHOUT ANY WARRANTY; without even the implied warranty of
- * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
- * Lesser General Public License for more details.
- *
- * You should have received a copy of the GNU Lesser General Public
- * License along with this program; if not, write to the Free Software
- * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301, USA 
- */
-
-#ifdef HAVE_CONFIG_H
-#include <config.h>
-#endif
-
-#include <unistd.h>
-
-#include "assuan-defs.h"
-
-/* Initialize a server.  */
-AssuanError
-assuan_init_domain_server (ASSUAN_CONTEXT *r_ctx,
-			   int rendezvousfd,
-			   pid_t peer)
-{
-  AssuanError err;
-
-  err = _assuan_domain_init (r_ctx, rendezvousfd, peer);
-  if (err)
-    return err;
-
-  (*r_ctx)->is_server = 1;
-  /* A domain server can only be used once.  */
-  (*r_ctx)->pipe_mode = 1;
-
-  return 0;
-}
Index: libkdenetwork/libgpgme-copy/assuan/assuan-domain-connect.c
===================================================================
--- libkdenetwork/libgpgme-copy/assuan/assuan-domain-connect.c	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkdenetwork/libgpgme-copy/assuan/assuan-domain-connect.c	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,476 +0,0 @@
-/* assuan-domain-connect.c - Assuan unix domain socket based client
- *	Copyright (C) 2002, 2003 Free Software Foundation, Inc.
- *
- * This file is part of Assuan.
- *
- * Assuan is free software; you can redistribute it and/or modify it
- * under the terms of the GNU Lesser General Public License as
- * published by the Free Software Foundation; either version 2.1 of
- * the License, or (at your option) any later version.
- *
- * Assuan is distributed in the hope that it will be useful, but
- * WITHOUT ANY WARRANTY; without even the implied warranty of
- * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
- * Lesser General Public License for more details.
- *
- * You should have received a copy of the GNU Lesser General Public
- * License along with this program; if not, write to the Free Software
- * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301, USA 
- */
-
-#ifdef HAVE_CONFIG_H
-#include <config.h>
-#endif
-
-#include <stdlib.h>
-#include <stddef.h>
-#include <stdio.h>
-#include <errno.h>
-#include <sys/types.h>
-#include <sys/socket.h>
-#include <sys/un.h>
-#if HAVE_SYS_UIO_H
-#include <sys/uio.h>
-#endif
-#include <unistd.h>
-#include <fcntl.h>
-#include <string.h>
-#include <assert.h>
-
-#include "assuan-defs.h"
-
-#define LOG(format, args...) \
-	fprintf (assuan_get_assuan_log_stream (), \
-	         assuan_get_assuan_log_prefix (), \
-	         "%s" format , ## args)
-
-
-static void
-do_deinit (ASSUAN_CONTEXT ctx)
-{
-  if (ctx->inbound.fd != -1)
-    close (ctx->inbound.fd);
-  ctx->inbound.fd = -1;
-  ctx->outbound.fd = -1;
-
-  if (ctx->domainbuffer)
-    {
-      assert (ctx->domainbufferallocated);
-      free (ctx->domainbuffer);
-    }
-
-  if (ctx->pendingfds)
-    {
-      int i;
-
-      assert (ctx->pendingfdscount > 0);
-      for (i = 0; i < ctx->pendingfdscount; i ++)
-	close (ctx->pendingfds[i]);
-
-      free (ctx->pendingfds);
-    }
-
-  unlink (ctx->myaddr.sun_path);
-}
-
-
-/* Read from the socket server.  */
-static ssize_t
-domain_reader (ASSUAN_CONTEXT ctx, void *buf, size_t buflen)
-{
-  int len = ctx->domainbuffersize;
-
- start:
-  if (len == 0)
-    /* No data is buffered.  */
-    {
-      struct msghdr msg;
-      struct iovec iovec;
-      struct sockaddr_un sender;
-      struct
-      {
-	struct cmsghdr hdr;
-	int fd;
-      }
-      cmsg;
-
-      memset (&msg, 0, sizeof (msg));
-
-      for (;;)
-	{
-	  msg.msg_name = &sender;
-	  msg.msg_namelen = sizeof (struct sockaddr_un);
-	  msg.msg_iov = &iovec;
-	  msg.msg_iovlen = 1;
-	  iovec.iov_base = ctx->domainbuffer;
-	  iovec.iov_len = ctx->domainbufferallocated;
-	  msg.msg_control = &cmsg;
-	  msg.msg_controllen = sizeof cmsg;
-
-	  /* Peek first: if the buffer we have is too small then it
-	     will be truncated.  */
-	  len = recvmsg (ctx->inbound.fd, &msg, MSG_PEEK);
-	  if (len < 0)
-	    {
-	      printf ("domain_reader: %m\n");
-	      return -1;
-	    }
-
-	  if (strcmp (ctx->serveraddr.sun_path,
-		      ((struct sockaddr_un *) msg.msg_name)->sun_path) != 0)
-	    {
-	      /* XXX: Arg.  Not from whom we expected!  What do we
-		 want to do?  Should we just ignore it?  Either way,
-		 we still need to consume the message.  */
-	      break;
-	    }
-
-	  if (msg.msg_flags & MSG_TRUNC)
-	    /* Enlarge the buffer and try again.  */
-	    {
-	      int size = ctx->domainbufferallocated;
-	      void *tmp;
-
-	      if (size == 0)
-		size = 4 * 1024;
-	      else
-		size *= 2;
-
-	      tmp = malloc (size);
-	      if (! tmp)
-		return -1;
-
-	      free (ctx->domainbuffer);
-	      ctx->domainbuffer = tmp;
-	      ctx->domainbufferallocated = size;
-	    }
-	  else
-	    /* We have enough space!  */
-	    break;
-	}
-
-      /* Now we have to actually consume it (remember, we only
-	 peeked).  */
-      msg.msg_name = &sender;
-      msg.msg_namelen = sizeof (struct sockaddr_un);
-      msg.msg_iov = &iovec;
-      msg.msg_iovlen = 1;
-      iovec.iov_base = ctx->domainbuffer;
-      iovec.iov_len = ctx->domainbufferallocated;
-      msg.msg_control = &cmsg;
-      msg.msg_controllen = sizeof cmsg;
-
-      if (strcmp (ctx->serveraddr.sun_path,
-		  ((struct sockaddr_un *) msg.msg_name)->sun_path) != 0)
-	{
-	  /* XXX: Arg.  Not from whom we expected!  What do we want to
-	     do?  Should we just ignore it?  We shall do the latter
-	     for the moment.  */
-	  LOG ("Not setup to receive messages from: `%s'.",
-	       ((struct sockaddr_un *) msg.msg_name)->sun_path);
-	  goto start;
-	}
-
-      len = recvmsg (ctx->inbound.fd, &msg, 0);
-      if (len < 0)
-	{
-	  LOG ("domain_reader: %s\n", strerror (errno));
-	  return -1;
-	}
-
-      ctx->domainbuffersize = len;
-      ctx->domainbufferoffset = 0;
-
-      if (sizeof (cmsg) == msg.msg_controllen)
-	/* We received a file descriptor.  */
-	{
-	  void *tmp;
-
-	  tmp = realloc (ctx->pendingfds,
-			 sizeof (int) * (ctx->pendingfdscount + 1));
-	  if (! tmp)
-	    {
-	      LOG ("domain_reader: %s\n", strerror (errno));
-	      return -1;
-	    }
-
-	  ctx->pendingfds = tmp;
-	  ctx->pendingfds[ctx->pendingfdscount++]
-	    = *(int *) CMSG_DATA (&cmsg.hdr);
-
-	  LOG ("Received file descriptor %d from peer.\n",
-	       ctx->pendingfds[ctx->pendingfdscount - 1]);
-	}
-
-      if (len == 0)
-	goto start;
-    }
-
-  /* Return some data to the user.  */
-
-  if (len > buflen)
-    /* We have more than the user requested.  */
-    len = buflen;
-
-  memcpy (buf, ctx->domainbuffer + ctx->domainbufferoffset, len);
-  ctx->domainbuffersize -= len;
-  assert (ctx->domainbuffersize >= 0);
-  ctx->domainbufferoffset += len;
-  assert (ctx->domainbufferoffset <= ctx->domainbufferallocated);
-
-  return len;
-}
-
-/* Write to the domain server.  */
-static ssize_t
-domain_writer (ASSUAN_CONTEXT ctx, const void *buf, size_t buflen)
-{
-  struct msghdr msg;
-  struct iovec iovec;
-  ssize_t len;
-
-  memset (&msg, 0, sizeof (msg));
-
-  msg.msg_name = &ctx->serveraddr;
-  msg.msg_namelen = offsetof (struct sockaddr_un, sun_path)
-    + strlen (ctx->serveraddr.sun_path) + 1;
-
-  msg.msg_iovlen = 1;
-  msg.msg_iov = &iovec;
-  iovec.iov_base = (void *) buf;
-  iovec.iov_len = buflen;
-  msg.msg_control = 0;
-  msg.msg_controllen = 0;
-
-  len = sendmsg (ctx->outbound.fd, &msg, 0);
-  if (len < 0)
-    LOG ("domain_writer: %s\n", strerror (errno));
-
-  return len;
-}
-
-static AssuanError
-domain_sendfd (ASSUAN_CONTEXT ctx, int fd)
-{
-  struct msghdr msg;
-  struct
-  {
-    struct cmsghdr hdr;
-    int fd;
-  }
-  cmsg;
-  int len;
-
-  memset (&msg, 0, sizeof (msg));
-
-  msg.msg_name = &ctx->serveraddr;
-  msg.msg_namelen = offsetof (struct sockaddr_un, sun_path)
-    + strlen (ctx->serveraddr.sun_path) + 1;
-
-  msg.msg_iovlen = 0;
-  msg.msg_iov = 0;
-
-  cmsg.hdr.cmsg_level = SOL_SOCKET;
-  cmsg.hdr.cmsg_type = SCM_RIGHTS;
-  cmsg.hdr.cmsg_len = sizeof (cmsg);
-
-  msg.msg_control = &cmsg;
-  msg.msg_controllen = sizeof (cmsg);
-
-  *(int *) CMSG_DATA (&cmsg.hdr) = fd;
-
-  len = sendmsg (ctx->outbound.fd, &msg, 0);
-  if (len < 0)
-    {
-      LOG ("domain_sendfd: %s\n", strerror (errno));
-      return ASSUAN_General_Error;
-    }
-  else
-    return 0;
-}
-
-static AssuanError
-domain_receivefd (ASSUAN_CONTEXT ctx, int *fd)
-{
-  if (ctx->pendingfds == 0)
-    {
-      LOG ("No pending file descriptors!\n");
-      return ASSUAN_General_Error;
-    }
-
-  *fd = ctx->pendingfds[0];
-  if (-- ctx->pendingfdscount == 0)
-    {
-      free (ctx->pendingfds);
-      ctx->pendingfds = 0;
-    }
-  else
-    /* Fix the array.  */
-    {
-      memmove (ctx->pendingfds, ctx->pendingfds + 1,
-	       ctx->pendingfdscount * sizeof (int));
-      ctx->pendingfds = realloc (ctx->pendingfds,
-				 ctx->pendingfdscount * sizeof (int));
-    }
-
-  return 0;
-}
-
-
-
-/* Make a connection to the Unix domain socket NAME and return a new
-   Assuan context in CTX.  SERVER_PID is currently not used but may
-   become handy in the future.  */
-AssuanError
-_assuan_domain_init (ASSUAN_CONTEXT *r_ctx, int rendezvousfd, pid_t peer)
-{
-  static struct assuan_io io = { domain_reader, domain_writer,
-				 domain_sendfd, domain_receivefd };
-
-  AssuanError err;
-  ASSUAN_CONTEXT ctx;
-  int fd;
-  size_t len;
-  int tries;
-
-  if (!r_ctx)
-    return ASSUAN_Invalid_Value;
-  *r_ctx = NULL;
-
-  err = _assuan_new_context (&ctx); 
-  if (err)
-    return err;
-
-  /* Save it in case we need it later.  */
-  ctx->pid = peer;
-
-  /* Override the default (NOP) handlers.  */
-  ctx->deinit_handler = do_deinit;
-
-  /* Setup the socket.  */
-
-  fd = socket (PF_LOCAL, SOCK_DGRAM, 0);
-  if (fd == -1)
-    {
-      LOG ("can't create socket: %s\n", strerror (errno));
-      _assuan_release_context (ctx);
-      return ASSUAN_General_Error;
-    }
-
-  ctx->inbound.fd = fd;
-  ctx->outbound.fd = fd;
-
-  /* And the io buffers.  */
-
-  ctx->io = &io;
-  ctx->domainbuffer = 0;
-  ctx->domainbufferoffset = 0;
-  ctx->domainbuffersize = 0;
-  ctx->domainbufferallocated = 0;
-  ctx->pendingfds = 0;
-  ctx->pendingfdscount = 0;
-
-  /* Get usable name and bind to it.  */
-
-  for (tries = 0; tries < TMP_MAX; tries ++)
-    {
-      char *p;
-      char buf[L_tmpnam];
-
-      /* XXX: L_tmpnam must be shorter than sizeof (sun_path)!  */
-      assert (L_tmpnam < sizeof (ctx->myaddr.sun_path));
-
-      p = tmpnam (buf);
-      if (! p)
-	{
-	  LOG ("cannot determine an appropriate temporary file "
-	       "name.  DOS in progress?\n");
-	  _assuan_release_context (ctx);
-	  close (fd);
-	  return ASSUAN_General_Error;
-	}
-
-      memset (&ctx->myaddr, 0, sizeof ctx->myaddr);
-      ctx->myaddr.sun_family = AF_LOCAL;
-      len = strlen (buf) + 1;
-      memcpy (ctx->myaddr.sun_path, buf, len);
-      len += offsetof (struct sockaddr_un, sun_path);
-
-      err = bind (fd, (struct sockaddr *) &ctx->myaddr, len);
-      if (! err)
-	break;
-    }
-
-  if (err)
-    {
-      LOG ("can't bind to `%s': %s\n", ctx->myaddr.sun_path,
-	   strerror (errno));
-      _assuan_release_context (ctx);
-      close (fd);
-      return ASSUAN_Connect_Failed;
-    }
-
-  /* Rendezvous with our peer.  */
-  {
-    FILE *fp;
-    char *p;
-
-    fp = fdopen (rendezvousfd, "w+");
-    if (! fp)
-      {
-	LOG ("can't open rendezvous port: %s\n", strerror (errno));
-	return ASSUAN_Connect_Failed;
-      }
-
-    /* Send our address.  */
-    fprintf (fp, "%s\n", ctx->myaddr.sun_path);
-    fflush (fp);
-
-    /* And receive our peer's.  */
-    memset (&ctx->serveraddr, 0, sizeof ctx->serveraddr);
-    for (p = ctx->serveraddr.sun_path;
-	 p < (ctx->serveraddr.sun_path
-	      + sizeof ctx->serveraddr.sun_path - 1);
-	 p ++)
-      {
-	*p = fgetc (fp);
-	if (*p == '\n')
-	  break;
-      }
-    *p = '\0';
-    fclose (fp);
-
-    ctx->serveraddr.sun_family = AF_LOCAL;
-  }
-
-  *r_ctx = ctx;
-  return 0;
-}
-
-AssuanError
-assuan_domain_connect (ASSUAN_CONTEXT * r_ctx, int rendezvousfd, pid_t peer)
-{
-  AssuanError aerr;
-  int okay, off;
-
-  aerr = _assuan_domain_init (r_ctx, rendezvousfd, peer);
-  if (aerr)
-    return aerr;
-
-  /* Initial handshake.  */
-  aerr = _assuan_read_from_server (*r_ctx, &okay, &off);
-  if (aerr)
-    LOG ("can't connect to server: %s\n", assuan_strerror (aerr));
-  else if (okay != 1)
-    {
-      LOG ("can't connect to server: `");
-      _assuan_log_sanitized_string ((*r_ctx)->inbound.line);
-      fprintf (assuan_get_assuan_log_stream (), "'\n");
-      aerr = ASSUAN_Connect_Failed;
-    }
-
-  if (aerr)
-    assuan_disconnect (*r_ctx);
-
-  return aerr;
-}
Index: libkdenetwork/libgpgme-copy/assuan/assuan-io.c
===================================================================
--- libkdenetwork/libgpgme-copy/assuan/assuan-io.c	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkdenetwork/libgpgme-copy/assuan/assuan-io.c	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,5 +1,5 @@
 /* assuan-io.c - Wraps the read and write functions.
- *	Copyright (C) 2002 Free Software Foundation, Inc.
+ *	Copyright (C) 2002, 2004, 2006 Free Software Foundation, Inc.
  *
  * This file is part of Assuan.
  *
@@ -15,44 +15,73 @@
  *
  * You should have received a copy of the GNU Lesser General Public
  * License along with this program; if not, write to the Free Software
- * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301, USA 
+ * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301,
+ * USA. 
  */
 
-#include "assuan-defs.h"
+#ifdef HAVE_CONFIG_H
+#include <config.h>
+#endif
+
+#include <sys/time.h>
 #include <sys/types.h>
+#include <sys/socket.h>
 #include <unistd.h>
+#include <errno.h>
+#ifdef HAVE_W32_SYSTEM
+# include <windows.h>
+#else
+# include <sys/wait.h>
+#endif
 
-#ifdef _ASSUAN_IN_GPGME
+#include "assuan-defs.h"
+
+
+#ifndef HAVE_W32_SYSTEM
+pid_t 
+_assuan_waitpid (pid_t pid, int *status, int options)
+{
+  return waitpid (pid, status, options);
+}
+#endif
+
+
 ssize_t
-_assuan_simple_read (ASSUAN_CONTEXT ctx, void *buffer, size_t size)
+_assuan_simple_read (assuan_context_t ctx, void *buffer, size_t size)
 {
   return read (ctx->inbound.fd, buffer, size);
 }
 
 ssize_t
-_assuan_simple_write (ASSUAN_CONTEXT ctx, const void *buffer, size_t size)
+_assuan_simple_write (assuan_context_t ctx, const void *buffer, size_t size)
 {
   return write (ctx->outbound.fd, buffer, size);
 }
 
-#else
 
-extern ssize_t pth_read (int fd, void *buffer, size_t size);
-extern ssize_t pth_write (int fd, const void *buffer, size_t size);
-
-#pragma weak pth_read
-#pragma weak pth_write
-
 ssize_t
-_assuan_simple_read (ASSUAN_CONTEXT ctx, void *buffer, size_t size)
+_assuan_simple_sendmsg (assuan_context_t ctx, struct msghdr *msg)
 {
-  return (pth_read ? pth_read : read) (ctx->inbound.fd, buffer, size);
+#ifdef HAVE_W32_SYSTEM
+  return _assuan_error (ASSUAN_Not_Implemented);
+#else
+  int ret;
+  while ( (ret = sendmsg (ctx->outbound.fd, msg, 0)) == -1 && errno == EINTR)
+    ;
+  return ret;
+#endif
 }
 
+
 ssize_t
-_assuan_simple_write (ASSUAN_CONTEXT ctx, const void *buffer, size_t size)
+_assuan_simple_recvmsg (assuan_context_t ctx, struct msghdr *msg)
 {
-  return (pth_write ? pth_write : write) (ctx->outbound.fd, buffer, size);
+#ifdef HAVE_W32_SYSTEM
+  return _assuan_error (ASSUAN_Not_Implemented);
+#else
+  int ret;
+  while ( (ret = recvmsg (ctx->inbound.fd, msg, 0)) == -1 && errno == EINTR)
+    ;
+  return ret;
+#endif
 }
-
-#endif
Index: libkdenetwork/libgpgme-copy/assuan/assuan.h
===================================================================
--- libkdenetwork/libgpgme-copy/assuan/assuan.h	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkdenetwork/libgpgme-copy/assuan/assuan.h	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,5 +1,5 @@
-/* assuan.c - Definitions for the Assuan protocol
- *	Copyright (C) 2001, 2002, 2003 Free Software Foundation, Inc.
+/* assuan.c - Definitions for the Assuan IPC library
+ * Copyright (C) 2001, 2002, 2003, 2005 Free Software Foundation, Inc.
  *
  * This file is part of Assuan.
  *
@@ -15,7 +15,8 @@
  *
  * You should have received a copy of the GNU Lesser General Public
  * License along with this program; if not, write to the Free Software
- * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301, USA 
+ * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301,
+ * USA. 
  */
 
 #ifndef ASSUAN_H
@@ -25,22 +26,58 @@
 #include <sys/types.h>
 #include <unistd.h>
 
-#include <sys/socket.h>
 
-#define _ASSUAN_IN_GPGME
-#ifdef _ASSUAN_IN_GPGME
+/* To use this file with libraries the following macros are useful:
+
+     #define _ASSUAN_EXT_SYM_PREFIX _foo_
+   
+     This prefixes all external symbols with "_foo_".
+
+     #define _ASSUAN_ONLY_GPG_ERRORS
+
+     If this is defined all old-style Assuan error codes are made
+     inactive as well as other dereacted stuff.
+
+   The follwing macros are used internally in the implementation of
+   libassuan:
+
+     #define _ASSUAN_NO_PTH 
+
+       This avoids inclusion of special GNU Pth hacks.
+
+     #define _ASSUAN_NO_FIXED_SIGNALS 
+
+       This disables changing of certain signal handler; i.e. SIGPIPE.
+
+     #define _ASSUAN_USE_DOUBLE_FORK
+
+       Use a double fork approach when connecting to a server through
+       a pipe.
+ */
+/**** Begin GPGME specific modifications. ******/
 #define _ASSUAN_EXT_SYM_PREFIX _gpgme_
+#define _ASSUAN_NO_PTH 
+#define _ASSUAN_NO_FIXED_SIGNALS 
+#define _ASSUAN_USE_DOUBLE_FORK
 
 #ifdef _ASSUAN_IN_GPGME_BUILD_ASSUAN
 int _gpgme_io_read (int fd, void *buffer, size_t count);
 int _gpgme_io_write (int fd, const void *buffer, size_t count);
+ssize_t _gpgme_ath_waitpid (pid_t pid, int *status, int options);
+#ifdef HAVE_W32_SYSTEM
+int _gpgme_ath_accept (int s, void *addr, int *length_ptr);
+#else /*!HAVE_W32_SYSTEM*/
+struct sockaddr;
+struct msghdr;
 ssize_t _gpgme_ath_select (int nfd, fd_set *rset, fd_set *wset, fd_set *eset,
-			   struct timeval *timeout);
-ssize_t _gpgme_ath_waitpid (pid_t pid, int *status, int options);
+                           struct timeval *timeout);
 int _gpgme_ath_accept (int s, struct sockaddr *addr, socklen_t *length_ptr);
 int _gpgme_ath_connect (int s, struct sockaddr *addr, socklen_t length);
 int _gpgme_ath_sendmsg (int s, const struct msghdr *msg, int flags);
 int _gpgme_ath_recvmsg (int s, struct msghdr *msg, int flags);
+int _gpgme_io_sendmsg (int sock, const struct msghdr *msg, int flags);
+int _gpgme_io_recvmsg (int sock, struct msghdr *msg, int flags);
+#endif /*!HAVE_W32_SYSTEM*/
 
 #define read          _gpgme_io_read
 #define write         _gpgme_io_write
@@ -48,17 +85,20 @@
 #define select	      _gpgme_ath_select
 #define accept        _gpgme_ath_accept
 #define connect       _gpgme_ath_connect
-#define sendmsg	      _gpgme_ath_sendmsg
-#define recvmsg       _gpgme_ath_recvmsg
-#endif
-#endif
+#define sendmsg	      _gpgme_io_sendmsg
+#define recvmsg       _gpgme_io_recvmsg
+#endif /*_ASSUAN_IN_GPGME_BUILD_ASSUAN*/
+/**** End GPGME specific modifications. ******/
 
+
 #ifdef _ASSUAN_EXT_SYM_PREFIX
 #define _ASSUAN_PREFIX1(x,y) x ## y
 #define _ASSUAN_PREFIX2(x,y) _ASSUAN_PREFIX1(x,y)
 #define _ASSUAN_PREFIX(x) _ASSUAN_PREFIX2(_ASSUAN_EXT_SYM_PREFIX,x)
 #define assuan_ _ASSUAN_PREFIX(assuan_)
 #define assuan_register_command _ASSUAN_PREFIX(assuan_register_command)
+#define assuan_register_post_cmd_notify \
+  _ASSUAN_PREFIX(assuan_register_post_cmd_notify)
 #define assuan_register_bye_notify _ASSUAN_PREFIX(assuan_register_bye_notify)
 #define assuan_register_reset_notify \
   _ASSUAN_PREFIX(assuan_register_reset_notify)
@@ -88,12 +128,15 @@
 #define assuan_init_socket_server _ASSUAN_PREFIX(assuan_init_socket_server)
 #define assuan_init_connected_socket_server \
   _ASSUAN_PREFIX(assuan_init_connected_socket_server)
+#define assuan_init_socket_server_ext \
+  _ASSUAN_PREFIX(assuan_init_socket_server_ext)
 #define assuan_pipe_connect _ASSUAN_PREFIX(assuan_pipe_connect)
+#define assuan_pipe_connect_ext _ASSUAN_PREFIX(assuan_pipe_connect_ext)
 #define assuan_socket_connect _ASSUAN_PREFIX(assuan_socket_connect)
-#define assuan_domain_connect _ASSUAN_PREFIX(assuan_domain_connect)
-#define assuan_init_domain_server _ASSUAN_PREFIX(assuan_init_domain_server)
+#define assuan_socket_connect_ext _ASSUAN_PREFIX(assuan_socket_connect_ext)
 #define assuan_disconnect _ASSUAN_PREFIX(assuan_disconnect)
 #define assuan_get_pid _ASSUAN_PREFIX(assuan_get_pid)
+#define assuan_get_peercred _ASSUAN_PREFIX(assuan_get_peercred)
 #define assuan_transact _ASSUAN_PREFIX(assuan_transact)
 #define assuan_inquire _ASSUAN_PREFIX(assuan_inquire)
 #define assuan_read_line _ASSUAN_PREFIX(assuan_read_line)
@@ -107,15 +150,20 @@
 #define assuan_set_error _ASSUAN_PREFIX(assuan_set_error)
 #define assuan_set_pointer _ASSUAN_PREFIX(assuan_set_pointer)
 #define assuan_get_pointer _ASSUAN_PREFIX(assuan_get_pointer)
+#define assuan_set_io_monitor _ASSUAN_PREFIX(assuan_set_io_monitor)
 #define assuan_begin_confidential _ASSUAN_PREFIX(assuan_begin_confidential)
 #define assuan_end_confidential _ASSUAN_PREFIX(assuan_end_confidential)
 #define assuan_strerror _ASSUAN_PREFIX(assuan_strerror)
+#define assuan_set_assuan_err_source \
+  _ASSUAN_PREFIX(assuan_set_assuan_err_source)
 #define assuan_set_assuan_log_stream \
   _ASSUAN_PREFIX(assuan_set_assuan_log_stream)
 #define assuan_get_assuan_log_stream \
   _ASSUAN_PREFIX(assuan_get_assuan_log_stream)
 #define assuan_get_assuan_log_prefix \
   _ASSUAN_PREFIX(assuan_get_assuan_log_prefix)
+#define assuan_set_flag _ASSUAN_PREFIX(assuan_set_flag)
+#define assuan_get_flag _ASSUAN_PREFIX(assuan_get_flag)
 
 /* And now the internal functions, argh...  */
 #define _assuan_read_line _ASSUAN_PREFIX(_assuan_read_line)
@@ -138,89 +186,146 @@
 #define _assuan_log_print_buffer _ASSUAN_PREFIX(_assuan_log_print_buffer)
 #define _assuan_log_sanitized_string \
   _ASSUAN_PREFIX(_assuan_log_sanitized_string)
+#define _assuan_log_printf _ASSUAN_PREFIX(_assuan_log_printf)
+#define _assuan_set_default_log_stream \
+  _ASSUAN_PREFIX(_assuan_set_default_log_stream)
+#define _assuan_w32_strerror _ASSUAN_PREFIX(_assuan_w32_strerror)
+#define _assuan_write_line _ASSUAN_PREFIX(_assuan_write_line)
+#define _assuan_close _ASSUAN_PREFIX(_assuan_close)   
+#define _assuan_sock_new _ASSUAN_PREFIX(_assuan_sock_new)  
+#define _assuan_sock_bind _ASSUAN_PREFIX(_assuan_sock_bind)
+#define _assuan_sock_connect _ASSUAN_PREFIX(_assuan_sock_connect)
 
-#endif
+#endif /*_ASSUAN_EXT_SYM_PREFIX*/
 
+
 #ifdef __cplusplus
 extern "C"
 {
+#if 0
+}
 #endif
-  
+#endif
 
-typedef enum
-{
-  ASSUAN_No_Error = 0,
-  ASSUAN_General_Error = 1,
-  ASSUAN_Out_Of_Core = 2,
-  ASSUAN_Invalid_Value = 3,
-  ASSUAN_Timeout = 4,
-  ASSUAN_Read_Error = 5,
-  ASSUAN_Write_Error = 6,
-  ASSUAN_Problem_Starting_Server = 7,
-  ASSUAN_Not_A_Server = 8,
-  ASSUAN_Not_A_Client = 9,
-  ASSUAN_Nested_Commands = 10,
-  ASSUAN_Invalid_Response = 11,
-  ASSUAN_No_Data_Callback = 12,
-  ASSUAN_No_Inquire_Callback = 13,
-  ASSUAN_Connect_Failed = 14,
-  ASSUAN_Accept_Failed = 15,
 
-  /* error codes above 99 are meant as status codes */
-  ASSUAN_Not_Implemented = 100,
-  ASSUAN_Server_Fault    = 101,
-  ASSUAN_Invalid_Command = 102,
-  ASSUAN_Unknown_Command = 103,
-  ASSUAN_Syntax_Error    = 104,
-  ASSUAN_Parameter_Error = 105,
-  ASSUAN_Parameter_Conflict = 106,
-  ASSUAN_Line_Too_Long = 107,
-  ASSUAN_Line_Not_Terminated = 108,
-  ASSUAN_No_Input = 109,
-  ASSUAN_No_Output = 110,
-  ASSUAN_Canceled = 111,
-  ASSUAN_Unsupported_Algorithm = 112,
-  ASSUAN_Server_Resource_Problem = 113,
-  ASSUAN_Server_IO_Error = 114,
-  ASSUAN_Server_Bug = 115,
-  ASSUAN_No_Data_Available = 116,
-  ASSUAN_Invalid_Data = 117,
-  ASSUAN_Unexpected_Command = 118,
-  ASSUAN_Too_Much_Data = 119,
-  ASSUAN_Inquire_Unknown = 120,
-  ASSUAN_Inquire_Error = 121,
-  ASSUAN_Invalid_Option = 122,
-  ASSUAN_Invalid_Index = 123,
-  ASSUAN_Unexpected_Status = 124,
-  ASSUAN_Unexpected_Data = 125,
-  ASSUAN_Invalid_Status = 126,
+/* Check for compiler features.  */
+#if __GNUC__
+#define _ASSUAN_GCC_VERSION (__GNUC__ * 10000 \
+                            + __GNUC_MINOR__ * 100 \
+                            + __GNUC_PATCHLEVEL__)
 
-  ASSUAN_Not_Confirmed = 128,
+#if _ASSUAN_GCC_VERSION > 30100
+#define _ASSUAN_DEPRECATED  __attribute__ ((__deprecated__))
+#endif
+#endif
+#ifndef _ASSUAN_DEPRECATED
+#define _ASSUAN_DEPRECATED
+#endif
 
-  ASSUAN_Bad_Certificate = 201,
-  ASSUAN_Bad_Certificate_Chain = 202,
-  ASSUAN_Missing_Certificate = 203,
-  ASSUAN_Bad_Signature = 204,
-  ASSUAN_No_Agent = 205,
-  ASSUAN_Agent_Error = 206,
-  ASSUAN_No_Public_Key = 207,
-  ASSUAN_No_Secret_Key = 208,
-  ASSUAN_Invalid_Name = 209,
 
-  ASSUAN_Cert_Revoked = 301,
-  ASSUAN_No_CRL_For_Cert = 302,
-  ASSUAN_CRL_Too_Old = 303,
-  ASSUAN_Not_Trusted = 304,
+/* Assuan error codes.  These are only used by old applications or
+   those applications which won't make use of libgpg-error. */
+#ifndef _ASSUAN_ONLY_GPG_ERRORS
+#ifndef _ASSUAN_IN_LIBASSUAN
+#define  ASSUAN_No_Error 0
+#endif
+#define  ASSUAN_General_Error 1
+#define  ASSUAN_Out_Of_Core 2
+#define  ASSUAN_Invalid_Value 3
+#ifndef _ASSUAN_IN_LIBASSUAN
+#define  ASSUAN_Timeout 4
+#endif
+#define  ASSUAN_Read_Error 5
+#define  ASSUAN_Write_Error 6
+#define  ASSUAN_Problem_Starting_Server 7
+#define  ASSUAN_Not_A_Server 8
+#ifndef _ASSUAN_IN_LIBASSUAN
+#define  ASSUAN_Not_A_Client 9
+#endif
+#define  ASSUAN_Nested_Commands 10
+#define  ASSUAN_Invalid_Response 11
+#define  ASSUAN_No_Data_Callback 12
+#define  ASSUAN_No_Inquire_Callback 13
+#define  ASSUAN_Connect_Failed 14
+#define  ASSUAN_Accept_Failed 15
 
-  ASSUAN_Card_Error = 401,
-  ASSUAN_Invalid_Card = 402,
-  ASSUAN_No_PKCS15_App = 403,
-  ASSUAN_Card_Not_Present = 404,
-  ASSUAN_Invalid_Id = 405
+  /* Error codes above 99 are meant as status codes */
+#define  ASSUAN_Not_Implemented 100
+#define  ASSUAN_Server_Fault    101
+#ifndef _ASSUAN_IN_LIBASSUAN
+#define  ASSUAN_Invalid_Command 102
+#endif
+#define  ASSUAN_Unknown_Command 103
+#define  ASSUAN_Syntax_Error    104
+#ifndef _ASSUAN_IN_LIBASSUAN
+#define  ASSUAN_Parameter_Error 105
+#endif
+#define  ASSUAN_Parameter_Conflict 106
+#define  ASSUAN_Line_Too_Long 107
+#define  ASSUAN_Line_Not_Terminated 108
+#ifndef _ASSUAN_IN_LIBASSUAN
+#define  ASSUAN_No_Input 109
+#define  ASSUAN_No_Output 110
+#endif
+#define  ASSUAN_Canceled 111
+#ifndef _ASSUAN_IN_LIBASSUAN
+#define  ASSUAN_Unsupported_Algorithm 112
+#define  ASSUAN_Server_Resource_Problem 113
+#define  ASSUAN_Server_IO_Error 114
+#define  ASSUAN_Server_Bug 115
+#define  ASSUAN_No_Data_Available 116
+#define  ASSUAN_Invalid_Data 117
+#endif
+#define  ASSUAN_Unexpected_Command 118
+#define  ASSUAN_Too_Much_Data 119
+#ifndef _ASSUAN_IN_LIBASSUAN
+#define  ASSUAN_Inquire_Unknown 120
+#define  ASSUAN_Inquire_Error 121
+#define  ASSUAN_Invalid_Option 122
+#define  ASSUAN_Invalid_Index 123
+#define  ASSUAN_Unexpected_Status 124
+#define  ASSUAN_Unexpected_Data 125
+#define  ASSUAN_Invalid_Status 126
+#define  ASSUAN_Locale_Problem 127
+#endif
+#define  ASSUAN_Not_Confirmed 128
 
-} AssuanError;
+  /* Warning: Don't use the Error codes, below they are deprecated. */
+#ifndef _ASSUAN_IN_LIBASSUAN
+#define  ASSUAN_Bad_Certificate 201
+#define  ASSUAN_Bad_Certificate_Chain 202
+#define  ASSUAN_Missing_Certificate 203
+#define  ASSUAN_Bad_Signature 204
+#define  ASSUAN_No_Agent 205
+#define  ASSUAN_Agent_Error 206
+#define  ASSUAN_No_Public_Key 207
+#define  ASSUAN_No_Secret_Key 208
+#define  ASSUAN_Invalid_Name 209
 
+#define  ASSUAN_Cert_Revoked 301
+#define  ASSUAN_No_CRL_For_Cert 302
+#define  ASSUAN_CRL_Too_Old 303
+#define  ASSUAN_Not_Trusted 304
+
+#define  ASSUAN_Card_Error 401
+#define  ASSUAN_Invalid_Card 402
+#define  ASSUAN_No_PKCS15_App 403
+#define  ASSUAN_Card_Not_Present 404
+#define  ASSUAN_Invalid_Id 405
+
+  /* Error codes in the range 1000 to 9999 may be used by applications
+     at their own discretion. */
+#define  ASSUAN_USER_ERROR_FIRST 1000
+#define  ASSUAN_USER_ERROR_LAST 9999
+#endif
+
+typedef int assuan_error_t;
+
+typedef assuan_error_t AssuanError _ASSUAN_DEPRECATED; 
+
 /* This is a list of pre-registered ASSUAN commands */
+/* Note, these command IDs are now deprectated and solely exists for
+   compatibility reasons. */
 typedef enum
 {
   ASSUAN_CMD_NOP = 0,
@@ -237,157 +342,223 @@
   ASSUAN_CMD_USER = 256  /* Other commands should be used with this offset*/
 } AssuanCommand;
 
+
+#else  /*!_ASSUAN_ONLY_GPG_ERRORS*/
+
+typedef int assuan_error_t;
+
+#endif /*!_ASSUAN_ONLY_GPG_ERRORS*/
+
+
+/* Definitions of flags for assuan_set_flag(). */
+typedef enum
+  {
+    /* When using a pipe server, by default Assuan will wait for the
+       forked process to die in assuan_disconnect.  In certain cases
+       this is not desirable.  By setting this flag, the waitpid will
+       be skipped and the caller is responsible to cleanup a forked
+       process. */
+    ASSUAN_NO_WAITPID = 1
+  } 
+assuan_flag_t;
+
 #define ASSUAN_LINELENGTH 1002 /* 1000 + [CR,]LF */
 
 struct assuan_context_s;
-typedef struct assuan_context_s *ASSUAN_CONTEXT;
+typedef struct assuan_context_s *assuan_context_t;
+#ifndef _ASSUAN_ONLY_GPG_ERRORS
+typedef struct assuan_context_s *ASSUAN_CONTEXT _ASSUAN_DEPRECATED;
+#endif /*_ASSUAN_ONLY_GPG_ERRORS*/
 
 /*-- assuan-handler.c --*/
-int assuan_register_command (ASSUAN_CONTEXT ctx,
+int assuan_register_command (assuan_context_t ctx,
                              const char *cmd_string,
-                             int (*handler)(ASSUAN_CONTEXT, char *));
-int assuan_register_bye_notify (ASSUAN_CONTEXT ctx,
-                                void (*fnc)(ASSUAN_CONTEXT));
-int assuan_register_reset_notify (ASSUAN_CONTEXT ctx,
-                                  void (*fnc)(ASSUAN_CONTEXT));
-int assuan_register_cancel_notify (ASSUAN_CONTEXT ctx,
-                                   void (*fnc)(ASSUAN_CONTEXT));
-int assuan_register_input_notify (ASSUAN_CONTEXT ctx,
-                                  void (*fnc)(ASSUAN_CONTEXT, const char *));
-int assuan_register_output_notify (ASSUAN_CONTEXT ctx,
-                                  void (*fnc)(ASSUAN_CONTEXT, const char *));
+                             int (*handler)(assuan_context_t, char *));
+int assuan_register_post_cmd_notify (assuan_context_t ctx,
+                                     void (*fnc)(assuan_context_t, int));
+int assuan_register_bye_notify (assuan_context_t ctx,
+                                void (*fnc)(assuan_context_t));
+int assuan_register_reset_notify (assuan_context_t ctx,
+                                  void (*fnc)(assuan_context_t));
+int assuan_register_cancel_notify (assuan_context_t ctx,
+                                   void (*fnc)(assuan_context_t));
+int assuan_register_input_notify (assuan_context_t ctx,
+                                  void (*fnc)(assuan_context_t, const char *));
+int assuan_register_output_notify (assuan_context_t ctx,
+                                  void (*fnc)(assuan_context_t, const char *));
 
-int assuan_register_option_handler (ASSUAN_CONTEXT ctx,
-                                    int (*fnc)(ASSUAN_CONTEXT,
+int assuan_register_option_handler (assuan_context_t ctx,
+                                    int (*fnc)(assuan_context_t,
                                                const char*, const char*));
 
-int assuan_process (ASSUAN_CONTEXT ctx);
-int assuan_process_next (ASSUAN_CONTEXT ctx);
-int assuan_get_active_fds (ASSUAN_CONTEXT ctx, int what,
+int assuan_process (assuan_context_t ctx);
+int assuan_process_next (assuan_context_t ctx);
+int assuan_get_active_fds (assuan_context_t ctx, int what,
                            int *fdarray, int fdarraysize);
 
 
-FILE *assuan_get_data_fp (ASSUAN_CONTEXT ctx);
-AssuanError assuan_set_okay_line (ASSUAN_CONTEXT ctx, const char *line);
-void assuan_write_status (ASSUAN_CONTEXT ctx,
-                          const char *keyword, const char *text);
+FILE *assuan_get_data_fp (assuan_context_t ctx);
+assuan_error_t assuan_set_okay_line (assuan_context_t ctx, const char *line);
+assuan_error_t assuan_write_status (assuan_context_t ctx,
+                                    const char *keyword, const char *text);
 
 /* Negotiate a file descriptor.  If LINE contains "FD=N", returns N
    assuming a local file descriptor.  If LINE contains "FD" reads a
    file descriptor via CTX and stores it in *RDF (the CTX must be
    capable of passing file descriptors).  */
-AssuanError assuan_command_parse_fd (ASSUAN_CONTEXT ctx, char *line,
-				     int *rfd);
+assuan_error_t assuan_command_parse_fd (assuan_context_t ctx, char *line,
+                                        int *rfd);
 
 /*-- assuan-listen.c --*/
-AssuanError assuan_set_hello_line (ASSUAN_CONTEXT ctx, const char *line);
-AssuanError assuan_accept (ASSUAN_CONTEXT ctx);
-int assuan_get_input_fd (ASSUAN_CONTEXT ctx);
-int assuan_get_output_fd (ASSUAN_CONTEXT ctx);
-AssuanError assuan_close_input_fd (ASSUAN_CONTEXT ctx);
-AssuanError assuan_close_output_fd (ASSUAN_CONTEXT ctx);
+assuan_error_t assuan_set_hello_line (assuan_context_t ctx, const char *line);
+assuan_error_t assuan_accept (assuan_context_t ctx);
+int assuan_get_input_fd (assuan_context_t ctx);
+int assuan_get_output_fd (assuan_context_t ctx);
+assuan_error_t assuan_close_input_fd (assuan_context_t ctx);
+assuan_error_t assuan_close_output_fd (assuan_context_t ctx);
 
 
 /*-- assuan-pipe-server.c --*/
-int assuan_init_pipe_server (ASSUAN_CONTEXT *r_ctx, int filedes[2]);
-void assuan_deinit_server (ASSUAN_CONTEXT ctx);
+int assuan_init_pipe_server (assuan_context_t *r_ctx, int filedes[2]);
+void assuan_deinit_server (assuan_context_t ctx);
 
 /*-- assuan-socket-server.c --*/
-int assuan_init_socket_server (ASSUAN_CONTEXT *r_ctx, int listen_fd);
-int assuan_init_connected_socket_server (ASSUAN_CONTEXT *r_ctx, int fd);
+int assuan_init_socket_server (assuan_context_t *r_ctx, int listen_fd);
+int assuan_init_connected_socket_server (assuan_context_t *r_ctx, 
+                                         int fd) _ASSUAN_DEPRECATED;
+int assuan_init_socket_server_ext (assuan_context_t *r_ctx, int fd,
+                                   unsigned int flags);
 
+/*-- assuan-pipe-connect.c --*/
+assuan_error_t assuan_pipe_connect (assuan_context_t *ctx,
+                                    const char *name,
+				    const char *const argv[],
+				    int *fd_child_list);
+assuan_error_t assuan_pipe_connect2 (assuan_context_t *ctx,
+                                     const char *name,
+                                     const char *const argv[],
+				     int *fd_child_list,
+                                     void (*atfork) (void*, int),
+                                     void *atforkvalue) _ASSUAN_DEPRECATED;
+assuan_error_t assuan_pipe_connect_ext (assuan_context_t *ctx, 
+                                        const char *name,
+                                        const char *const argv[],
+                                        int *fd_child_list,
+                                        void (*atfork) (void *, int),
+                                        void *atforkvalue,
+                                        unsigned int flags);
 
-/*-- assuan-pipe-connect.c --*/
-AssuanError assuan_pipe_connect (ASSUAN_CONTEXT *ctx, const char *name,
-                                 char *const argv[], int *fd_child_list);
 /*-- assuan-socket-connect.c --*/
-AssuanError assuan_socket_connect (ASSUAN_CONTEXT *ctx, const char *name,
-                                   pid_t server_pid);
+assuan_error_t assuan_socket_connect (assuan_context_t *ctx, 
+                                      const char *name,
+                                      pid_t server_pid);
+assuan_error_t assuan_socket_connect_ext (assuan_context_t *ctx,
+                                          const char *name,
+                                          pid_t server_pid,
+                                          unsigned int flags);
 
-/*-- assuan-domain-connect.c --*/
-
-/* Connect to a Unix domain socket server.  RENDEZVOUSFD is
-   bidirectional file descriptor (normally returned via socketpair)
-   which the client can use to rendezvous with the server.  SERVER s
-   the server's pid.  */
-AssuanError assuan_domain_connect (ASSUAN_CONTEXT *r_ctx,
-				   int rendezvousfd,
-				   pid_t server);
-
-/*-- assuan-domain-server.c --*/
-
-/* RENDEZVOUSFD is a bidirectional file descriptor (normally returned
-   via socketpair) that the domain server can use to rendezvous with
-   the client.  CLIENT is the client's pid.  */
-AssuanError assuan_init_domain_server (ASSUAN_CONTEXT *r_ctx,
-				       int rendezvousfd,
-				       pid_t client);
-
-
 /*-- assuan-connect.c --*/
-void assuan_disconnect (ASSUAN_CONTEXT ctx);
-pid_t assuan_get_pid (ASSUAN_CONTEXT ctx);
+void assuan_disconnect (assuan_context_t ctx);
+pid_t assuan_get_pid (assuan_context_t ctx);
+assuan_error_t assuan_get_peercred (assuan_context_t ctx,
+                                    pid_t *pid, uid_t *uid, gid_t *gid);
 
 /*-- assuan-client.c --*/
-AssuanError 
-assuan_transact (ASSUAN_CONTEXT ctx,
+assuan_error_t 
+assuan_transact (assuan_context_t ctx,
                  const char *command,
-                 AssuanError (*data_cb)(void *, const void *, size_t),
+                 int (*data_cb)(void *, const void *, size_t),
                  void *data_cb_arg,
-                 AssuanError (*inquire_cb)(void*, const char *),
+                 int (*inquire_cb)(void*, const char *),
                  void *inquire_cb_arg,
-                 AssuanError (*status_cb)(void*, const char *),
+                 int (*status_cb)(void*, const char *),
                  void *status_cb_arg);
 
 
 /*-- assuan-inquire.c --*/
-AssuanError assuan_inquire (ASSUAN_CONTEXT ctx, const char *keyword,
-                            char **r_buffer, size_t *r_length, size_t maxlen);
+assuan_error_t assuan_inquire (assuan_context_t ctx, const char *keyword,
+                               unsigned char **r_buffer, size_t *r_length,
+                               size_t maxlen);
 
 /*-- assuan-buffer.c --*/
-AssuanError assuan_read_line (ASSUAN_CONTEXT ctx,
+assuan_error_t assuan_read_line (assuan_context_t ctx,
                               char **line, size_t *linelen);
-int assuan_pending_line (ASSUAN_CONTEXT ctx);
-AssuanError assuan_write_line (ASSUAN_CONTEXT ctx, const char *line );
-AssuanError assuan_send_data (ASSUAN_CONTEXT ctx,
+int assuan_pending_line (assuan_context_t ctx);
+assuan_error_t assuan_write_line (assuan_context_t ctx, const char *line );
+assuan_error_t assuan_send_data (assuan_context_t ctx,
                               const void *buffer, size_t length);
 
 /* The file descriptor must be pending before assuan_receivefd is
-   call.  This means that assuan_sendfd should be called *before* the
-   trigger is sent (normally via assuan_send_data ("I sent you a
-   descriptor")).  */
-AssuanError assuan_sendfd (ASSUAN_CONTEXT ctx, int fd);
-AssuanError assuan_receivefd (ASSUAN_CONTEXT ctx, int *fd);
+   called.  This means that assuan_sendfd should be called *before* the
+   trigger is sent (normally via assuan_write_line ("INPUT FD")).  */
+assuan_error_t assuan_sendfd (assuan_context_t ctx, int fd);
+assuan_error_t assuan_receivefd (assuan_context_t ctx, int *fd);
 
 /*-- assuan-util.c --*/
 void assuan_set_malloc_hooks ( void *(*new_alloc_func)(size_t n),
                                void *(*new_realloc_func)(void *p, size_t n),
                                void (*new_free_func)(void*) );
-void assuan_set_log_stream (ASSUAN_CONTEXT ctx, FILE *fp);
-int assuan_set_error (ASSUAN_CONTEXT ctx, int err, const char *text);
-void assuan_set_pointer (ASSUAN_CONTEXT ctx, void *pointer);
-void *assuan_get_pointer (ASSUAN_CONTEXT ctx);
+void assuan_set_log_stream (assuan_context_t ctx, FILE *fp);
+int assuan_set_error (assuan_context_t ctx, int err, const char *text);
+void assuan_set_pointer (assuan_context_t ctx, void *pointer);
+void *assuan_get_pointer (assuan_context_t ctx);
 
-void assuan_begin_confidential (ASSUAN_CONTEXT ctx);
-void assuan_end_confidential (ASSUAN_CONTEXT ctx);
+void assuan_begin_confidential (assuan_context_t ctx);
+void assuan_end_confidential (assuan_context_t ctx);
 
-/*-- assuan-errors.c (built) --*/
-const char *assuan_strerror (AssuanError err);
+void assuan_set_io_monitor (assuan_context_t ctx,
+                            unsigned int (*monitor)(assuan_context_t ctx,
+                                                    int direction,
+                                                    const char *line,
+                                                    size_t linelen));
 
+/* For context CTX, set the flag FLAG to VALUE.  Values for flags
+   are usually 1 or 0 but certain flags might allow for other values;
+   see the description of the type assuan_flag_t for details. */
+void assuan_set_flag (assuan_context_t ctx, assuan_flag_t flag, int value);
+
+/* Return the VALUE of FLAG in context CTX. */ 
+int  assuan_get_flag (assuan_context_t ctx, assuan_flag_t flag);
+
+
+/*-- assuan-errors.c --*/
+
+#ifndef _ASSUAN_ONLY_GPG_ERRORS
+/* Return a string describing the assuan error.  The use of this
+   function is deprecated; it is better to call
+   assuan_set_assuan_err_source once and then make use libgpg-error. */
+const char *assuan_strerror (assuan_error_t err);
+#endif /*_ASSUAN_ONLY_GPG_ERRORS*/
+
+/* Enable gpg-error style error codes.  ERRSOURCE is one of gpg-error
+   sources.  Note, that this function is not thread-safe and should be
+   used right at startup. Switching back to the old style mode is not
+   supported. */
+void assuan_set_assuan_err_source (int errsource);
+
 /*-- assuan-logging.c --*/
 
-/* Set the stream to which assuan should log.  By default, this is
-   stderr.  */
+/* Set the stream to which assuan should log message not associated
+   with a context.  By default, this is stderr.  The default value
+   will be changed when the first log stream is associated with a
+   context.  Note, that this function is not thread-safe and should
+   in general be used right at startup. */
 extern void assuan_set_assuan_log_stream (FILE *fp);
 
-/* Return the stream which is currently being using for logging.  */
+/* Return the stream which is currently being using for global logging.  */
 extern FILE *assuan_get_assuan_log_stream (void);
 
-/* User defined call back.  Return a prefix to be used at the start of
-   a line emitted by assuan on the log stream.  The default
-   implementation returns the empty string, i.e. ""  */
-extern const char *assuan_get_assuan_log_prefix (void);
+/* Set the prefix to be used at the start of a line emitted by assuan
+   on the log stream.  The default is the empty string.  Note, that
+   this function is not thread-safe and should in general be used
+   right at startup. */
+void assuan_set_assuan_log_prefix (const char *text);
 
+/* Return a prefix to be used at the start of a line emitted by assuan
+   on the log stream.  The default implementation returns the empty
+   string, i.e. ""  */
+const char *assuan_get_assuan_log_prefix (void);
+
 #ifdef __cplusplus
 }
 #endif
Index: libkdenetwork/libgpgme-copy/assuan/assuan-buffer.c
===================================================================
--- libkdenetwork/libgpgme-copy/assuan/assuan-buffer.c	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkdenetwork/libgpgme-copy/assuan/assuan-buffer.c	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,5 +1,5 @@
 /* assuan-buffer.c - read and send data
- *	Copyright (C) 2001, 2002, 2003 Free Software Foundation, Inc.
+ * Copyright (C) 2001, 2002, 2003, 2004, 2006 Free Software Foundation, Inc.
  *
  * This file is part of Assuan.
  *
@@ -15,7 +15,8 @@
  *
  * You should have received a copy of the GNU Lesser General Public
  * License along with this program; if not, write to the Free Software
- * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301, USA 
+ * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301,
+ * USA. 
  */
 
 #include <config.h>
@@ -25,14 +26,20 @@
 #include <errno.h>
 #include <unistd.h>
 #include <assert.h>
+#ifdef HAVE_W32_SYSTEM
+#include <process.h>
+#endif
 #include "assuan-defs.h"
 
+
+/* Extended version of write(2) to guarantee that all bytes are
+   written.  Returns 0 on success or -1 and ERRNO on failure. */
 static int
-writen (ASSUAN_CONTEXT ctx, const char *buffer, size_t length)
+writen (assuan_context_t ctx, const char *buffer, size_t length)
 {
   while (length)
     {
-      ssize_t nwritten = ctx->io->write (ctx, buffer, length);
+      ssize_t nwritten = ctx->io->writefnc (ctx, buffer, length);
       
       if (nwritten < 0)
         {
@@ -46,19 +53,21 @@
   return 0;  /* okay */
 }
 
-/* Read an entire line.  */
+/* Read an entire line. Returns 0 on success or -1 and ERRNo on
+   failure.  EOF is indictated by setting the integer at address
+   R_EOF.  */
 static int
-readline (ASSUAN_CONTEXT ctx, char *buf, size_t buflen,
-	  int *r_nread, int *eof)
+readline (assuan_context_t ctx, char *buf, size_t buflen,
+	  int *r_nread, int *r_eof)
 {
   size_t nleft = buflen;
   char *p;
 
-  *eof = 0;
+  *r_eof = 0;
   *r_nread = 0;
   while (nleft > 0)
     {
-      ssize_t n = ctx->io->read (ctx, buf, nleft);
+      ssize_t n = ctx->io->readfnc (ctx, buf, nleft);
 
       if (n < 0)
         {
@@ -68,7 +77,7 @@
         }
       else if (!n)
         {
-          *eof = 1;
+          *r_eof = 1;
           break; /* allow incomplete lines */
         }
       p = buf;
@@ -85,8 +94,9 @@
 }
 
 
-int
-_assuan_read_line (ASSUAN_CONTEXT ctx)
+/* Function returns an Assuan error. */
+assuan_error_t
+_assuan_read_line (assuan_context_t ctx)
 {
   char *line = ctx->inbound.line;
   int nread, atticlen;
@@ -94,7 +104,7 @@
   char *endp = 0;
 
   if (ctx->inbound.eof)
-    return -1;
+    return _assuan_error (-1);
 
   atticlen = ctx->inbound.attic.linelen;
   if (atticlen)
@@ -125,17 +135,20 @@
   if (rc)
     {
       if (ctx->log_fp)
-	fprintf (ctx->log_fp, "%s[%p] <- [Error: %s]\n",
-		 assuan_get_assuan_log_prefix (), ctx, strerror (errno));
-      return ASSUAN_Read_Error;
+	fprintf (ctx->log_fp, "%s[%u.%d] DBG: <- [Error: %s]\n",
+		 assuan_get_assuan_log_prefix (),
+                 (unsigned int)getpid (), ctx->inbound.fd,
+                 strerror (errno));
+      return _assuan_error (ASSUAN_Read_Error);
     }
   if (!nread)
     {
       assert (ctx->inbound.eof);
       if (ctx->log_fp)
-	fprintf (ctx->log_fp, "%s[%p] <- [EOF]\n",
-		 assuan_get_assuan_log_prefix (), ctx);
-      return -1;
+	fprintf (ctx->log_fp, "%s[%u.%d] DBG: <- [EOF]\n",
+		 assuan_get_assuan_log_prefix (),
+                 (unsigned int)getpid (), ctx->inbound.fd);
+      return _assuan_error (-1);
     }
 
   ctx->inbound.attic.pending = 0;
@@ -146,7 +159,9 @@
 
   if (endp)
     {
+      unsigned monitor_result;
       int n = endp - line + 1;
+
       if (n < nread)
 	/* LINE contains more than one line.  We copy it to the attic
 	   now as handlers are allowed to modify the passed
@@ -163,10 +178,20 @@
       *endp = 0;
 
       ctx->inbound.linelen = endp - line;
-      if (ctx->log_fp)
+
+      monitor_result = (ctx->io_monitor
+                        ? ctx->io_monitor (ctx, 0,
+                                           ctx->inbound.line,
+                                           ctx->inbound.linelen)
+                        : 0);
+      if ( (monitor_result & 2) )
+        ctx->inbound.linelen = 0;
+      
+      if (ctx->log_fp && !(monitor_result & 1))
 	{
-	  fprintf (ctx->log_fp, "%s[%p] <- ",
-		   assuan_get_assuan_log_prefix (), ctx);
+	  fprintf (ctx->log_fp, "%s[%u.%d] DBG: <- ",
+		   assuan_get_assuan_log_prefix (),
+                   (unsigned int)getpid (), ctx->inbound.fd);
 	  if (ctx->confidential)
 	    fputs ("[Confidential data not shown]", ctx->log_fp);
 	  else
@@ -180,12 +205,14 @@
   else
     {
       if (ctx->log_fp)
-	fprintf (ctx->log_fp, "%s[%p] <- [Invalid line]\n",
-		 assuan_get_assuan_log_prefix (), ctx);
+	fprintf (ctx->log_fp, "%s[%u.%d] DBG: <- [Invalid line]\n",
+		 assuan_get_assuan_log_prefix (),
+                 (unsigned int)getpid (), ctx->inbound.fd);
       *line = 0;
       ctx->inbound.linelen = 0;
-      return ctx->inbound.eof ? ASSUAN_Line_Not_Terminated
-	: ASSUAN_Line_Too_Long;
+      return _assuan_error (ctx->inbound.eof 
+                            ? ASSUAN_Line_Not_Terminated
+                            : ASSUAN_Line_Too_Long);
     }
 }
 
@@ -199,13 +226,13 @@
    Returns 0 on success or an assuan error code.
    See also: assuan_pending_line().
 */
-AssuanError
-assuan_read_line (ASSUAN_CONTEXT ctx, char **line, size_t *linelen)
+assuan_error_t
+assuan_read_line (assuan_context_t ctx, char **line, size_t *linelen)
 {
-  AssuanError err;
+  assuan_error_t err;
 
   if (!ctx)
-    return ASSUAN_Invalid_Value;
+    return _assuan_error (ASSUAN_Invalid_Value);
 
   err = _assuan_read_line (ctx);
   *line = ctx->inbound.line;
@@ -217,65 +244,109 @@
 /* Return true if a full line is buffered (i.e. an entire line may be
    read without any I/O).  */
 int
-assuan_pending_line (ASSUAN_CONTEXT ctx)
+assuan_pending_line (assuan_context_t ctx)
 {
   return ctx && ctx->inbound.attic.pending;
 }
 
 
-AssuanError 
-assuan_write_line (ASSUAN_CONTEXT ctx, const char *line)
+assuan_error_t 
+_assuan_write_line (assuan_context_t ctx, const char *prefix,
+                    const char *line, size_t len)
 {
-  int rc;
-  size_t len;
-  const char *s;
+  assuan_error_t rc = 0;
+  size_t prefixlen = prefix? strlen (prefix):0;
+  unsigned int monitor_result;
 
-  if (!ctx)
-    return ASSUAN_Invalid_Value;
+  /* Make sure that the line is short enough. */
+  if (len + prefixlen + 2 > ASSUAN_LINELENGTH)
+    {
+      if (ctx->log_fp)
+        fprintf (ctx->log_fp, "%s[%u.%d] DBG: -> "
+                 "[supplied line too long -truncated]\n",
+                 assuan_get_assuan_log_prefix (),
+                 (unsigned int)getpid (), ctx->inbound.fd);
+      if (prefixlen > 5)
+        prefixlen = 5;
+      if (len > ASSUAN_LINELENGTH - prefixlen - 2)
+        len = ASSUAN_LINELENGTH - prefixlen - 2 - 1;
+    }
 
-  /* Make sure that we never take a LF from the user - this might
-     violate the protocol. */
-  s = strchr (line, '\n');
-  len = s? (s-line) : strlen (line);
+  monitor_result = (ctx->io_monitor
+                    ? ctx->io_monitor (ctx, 1, line, len)
+                    : 0);
 
-  if (len > LINELENGTH - 2)
-    return ASSUAN_Line_Too_Long;
-
-  /* fixme: we should do some kind of line buffering.  */
-  if (ctx->log_fp)
+  /* Fixme: we should do some kind of line buffering.  */
+  if (ctx->log_fp && !(monitor_result & 1))
     {
-      fprintf (ctx->log_fp, "%s[%p] -> ",
-	       assuan_get_assuan_log_prefix (), ctx);
-      if (s)
-	fputs ("[supplied line contained a LF]", ctx->log_fp);
+      fprintf (ctx->log_fp, "%s[%u.%d] DBG: -> ",
+	       assuan_get_assuan_log_prefix (),
+               (unsigned int)getpid (), ctx->inbound.fd);
       if (ctx->confidential)
 	fputs ("[Confidential data not shown]", ctx->log_fp);
       else
-	_assuan_log_print_buffer (ctx->log_fp, line, len);
+        {
+          if (prefixlen)
+            _assuan_log_print_buffer (ctx->log_fp, prefix, prefixlen);
+          _assuan_log_print_buffer (ctx->log_fp, line, len);
+        }
       putc ('\n', ctx->log_fp);
     }
 
-  rc = writen (ctx, line, len);
-  if (rc)
-    rc = ASSUAN_Write_Error;
-  if (!rc)
+  if (prefixlen && !(monitor_result & 2))
     {
-      rc = writen (ctx, "\n", 1);
+      rc = writen (ctx, prefix, prefixlen);
       if (rc)
-        rc = ASSUAN_Write_Error;
+        rc = _assuan_error (ASSUAN_Write_Error);
     }
-
+  if (!rc && !(monitor_result & 2))
+    {
+      rc = writen (ctx, line, len);
+      if (rc)
+        rc = _assuan_error (ASSUAN_Write_Error);
+      if (!rc)
+        {
+          rc = writen (ctx, "\n", 1);
+          if (rc)
+            rc = _assuan_error (ASSUAN_Write_Error);
+        }
+    }
   return rc;
 }
 
 
+assuan_error_t 
+assuan_write_line (assuan_context_t ctx, const char *line)
+{
+  size_t len;
+  const char *s;
+
+  if (!ctx)
+    return _assuan_error (ASSUAN_Invalid_Value);
+
+  /* Make sure that we never take a LF from the user - this might
+     violate the protocol. */
+  s = strchr (line, '\n');
+  len = s? (s-line) : strlen (line);
+
+  if (ctx->log_fp && s)
+    fprintf (ctx->log_fp, "%s[%u.%d] DBG: -> "
+             "[supplied line contained a LF - truncated]\n",
+             assuan_get_assuan_log_prefix (),
+             (unsigned int)getpid (), ctx->inbound.fd);
+
+  return _assuan_write_line (ctx, NULL, line, len);
+}
+
+
 
 /* Write out the data in buffer as datalines with line wrapping and
-   percent escaping.  This fucntion is used for GNU's custom streams */
+   percent escaping.  This function is used for GNU's custom streams. */
 int
-_assuan_cookie_write_data (void *cookie, const char *buffer, size_t size)
+_assuan_cookie_write_data (void *cookie, const char *buffer, size_t orig_size)
 {
-  ASSUAN_CONTEXT ctx = cookie;
+  assuan_context_t ctx = cookie;
+  size_t size = orig_size;
   char *line;
   size_t linelen;
 
@@ -287,7 +358,9 @@
   line += linelen;
   while (size)
     {
-      /* insert data line header */
+      unsigned int monitor_result;
+
+      /* Insert data line header. */
       if (!linelen)
         {
           *line++ = 'D';
@@ -295,7 +368,7 @@
           linelen += 2;
         }
       
-      /* copy data, keep some space for the CRLF and to escape one character */
+      /* Copy data, keep space for the CRLF and to escape one character. */
       while (size && linelen < LINELENGTH-2-2)
         {
           if (*buffer == '%' || *buffer == '\r' || *buffer == '\n')
@@ -313,12 +386,19 @@
           size--;
         }
       
+      
+      monitor_result = (ctx->io_monitor
+                        ? ctx->io_monitor (ctx, 1,
+                                           ctx->outbound.data.line, linelen)
+                        : 0);
+
       if (linelen >= LINELENGTH-2-2)
         {
-          if (ctx->log_fp)
+          if (ctx->log_fp && !(monitor_result & 1))
             {
-	      fprintf (ctx->log_fp, "%s[%p] -> ",
-		       assuan_get_assuan_log_prefix (), ctx);
+	      fprintf (ctx->log_fp, "%s[%u.%d] DBG: -> ",
+		       assuan_get_assuan_log_prefix (),
+                       (unsigned int)getpid (), ctx->inbound.fd);
 
               if (ctx->confidential)
                 fputs ("[Confidential data not shown]", ctx->log_fp);
@@ -330,9 +410,10 @@
             }
           *line++ = '\n';
           linelen++;
-          if (writen (ctx, ctx->outbound.data.line, linelen))
+          if ( !(monitor_result & 2)
+               && writen (ctx, ctx->outbound.data.line, linelen))
             {
-              ctx->outbound.data.error = ASSUAN_Write_Error;
+              ctx->outbound.data.error = _assuan_error (ASSUAN_Write_Error);
               return 0;
             }
           line = ctx->outbound.data.line;
@@ -341,18 +422,19 @@
     }
 
   ctx->outbound.data.linelen = linelen;
-  return 0;
+  return (int)orig_size;
 }
 
 
 /* Write out any buffered data 
-   This fucntion is used for GNU's custom streams */
+   This function is used for GNU's custom streams */
 int
 _assuan_cookie_write_flush (void *cookie)
 {
-  ASSUAN_CONTEXT ctx = cookie;
+  assuan_context_t ctx = cookie;
   char *line;
   size_t linelen;
+  unsigned int monitor_result;
 
   if (ctx->outbound.data.error)
     return 0;
@@ -360,12 +442,19 @@
   line = ctx->outbound.data.line;
   linelen = ctx->outbound.data.linelen;
   line += linelen;
+
+  monitor_result = (ctx->io_monitor
+                    ? ctx->io_monitor (ctx, 1,
+                                       ctx->outbound.data.line, linelen)
+                    : 0);
+  
   if (linelen)
     {
-      if (ctx->log_fp)
+      if (ctx->log_fp && !(monitor_result & 1))
 	{
-	  fprintf (ctx->log_fp, "%s[%p] -> ",
-		   assuan_get_assuan_log_prefix (), ctx);
+	  fprintf (ctx->log_fp, "%s[%u.%d] DBG: -> ",
+		   assuan_get_assuan_log_prefix (),
+                   (unsigned int)getpid (), ctx->inbound.fd);
 	  if (ctx->confidential)
 	    fputs ("[Confidential data not shown]", ctx->log_fp);
 	  else
@@ -375,9 +464,10 @@
 	}
       *line++ = '\n';
       linelen++;
-      if (writen (ctx, ctx->outbound.data.line, linelen))
+      if ( !(monitor_result & 2)
+           && writen (ctx, ctx->outbound.data.line, linelen))
         {
-          ctx->outbound.data.error = ASSUAN_Write_Error;
+          ctx->outbound.data.error = _assuan_error (ASSUAN_Write_Error);
           return 0;
         }
       ctx->outbound.data.linelen = 0;
@@ -404,13 +494,13 @@
  * Return value: 0 on success or an error code
  **/
 
-AssuanError
-assuan_send_data (ASSUAN_CONTEXT ctx, const void *buffer, size_t length)
+assuan_error_t
+assuan_send_data (assuan_context_t ctx, const void *buffer, size_t length)
 {
   if (!ctx)
-    return ASSUAN_Invalid_Value;
+    return _assuan_error (ASSUAN_Invalid_Value);
   if (!buffer && length)
-    return ASSUAN_Invalid_Value;
+    return _assuan_error (ASSUAN_Invalid_Value);
 
   if (!buffer)
     { /* flush what we have */
@@ -430,9 +520,18 @@
   return 0;
 }
 
-AssuanError
-assuan_sendfd (ASSUAN_CONTEXT ctx, int fd)
+assuan_error_t
+assuan_sendfd (assuan_context_t ctx, int fd)
 {
+  /* It is explicitly allowed to use (NULL, -1) as a runtime test to
+     check whether descriptor passing is available. */
+  if (!ctx && fd == -1)
+#ifdef USE_DESCRIPTOR_PASSING
+    return 0;
+#else
+    return _assuan_error (ASSUAN_Not_Implemented);
+#endif
+
   if (! ctx->io->sendfd)
     return set_error (ctx, Not_Implemented,
 		      "server does not support sending and receiving "
@@ -440,8 +539,8 @@
   return ctx->io->sendfd (ctx, fd);
 }
 
-AssuanError
-assuan_receivefd (ASSUAN_CONTEXT ctx, int *fd)
+assuan_error_t
+assuan_receivefd (assuan_context_t ctx, int *fd)
 {
   if (! ctx->io->receivefd)
     return set_error (ctx, Not_Implemented,
Index: libkdenetwork/libgpgme-copy/assuan/assuan-inquire.c
===================================================================
--- libkdenetwork/libgpgme-copy/assuan/assuan-inquire.c	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkdenetwork/libgpgme-copy/assuan/assuan-inquire.c	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,5 +1,5 @@
 /* assuan-inquire.c - handle inquire stuff
- *	Copyright (C) 2001, 2002, 2003  Free Software Foundation, Inc.
+ *	Copyright (C) 2001, 2002, 2003, 2005  Free Software Foundation, Inc.
  *
  * This file is part of Assuan.
  *
@@ -15,7 +15,8 @@
  *
  * You should have received a copy of the GNU Lesser General Public
  * License along with this program; if not, write to the Free Software
- * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301, USA 
+ * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301,
+ * USA. 
  */
 
 #include <config.h>
@@ -134,11 +135,11 @@
  * 
  * Return value: 0 on success or an ASSUAN error code
  **/
-AssuanError
-assuan_inquire (ASSUAN_CONTEXT ctx, const char *keyword,
-                char **r_buffer, size_t *r_length, size_t maxlen)
+assuan_error_t
+assuan_inquire (assuan_context_t ctx, const char *keyword,
+                unsigned char **r_buffer, size_t *r_length, size_t maxlen)
 {
-  AssuanError rc;
+  assuan_error_t rc;
   struct membuf mb;
   char cmdbuf[LINELENGTH-10]; /* (10 = strlen ("INQUIRE ")+CR,LF) */
   unsigned char *line, *p;
@@ -146,14 +147,14 @@
   int nodataexpected;
 
   if (!ctx || !keyword || (10 + strlen (keyword) >= sizeof (cmdbuf)))
-    return ASSUAN_Invalid_Value;
+    return _assuan_error (ASSUAN_Invalid_Value);
   nodataexpected = !r_buffer && !r_length && !maxlen;
   if (!nodataexpected && (!r_buffer || !r_length))
-    return ASSUAN_Invalid_Value;
+    return _assuan_error (ASSUAN_Invalid_Value);
   if (!ctx->is_server)
-    return ASSUAN_Not_A_Server;
+    return _assuan_error (ASSUAN_Not_A_Server);
   if (ctx->in_inquire)
-    return ASSUAN_Nested_Commands;
+    return _assuan_error (ASSUAN_Nested_Commands);
   
   ctx->in_inquire = 1;
   if (nodataexpected)
@@ -173,7 +174,7 @@
           rc = _assuan_read_line (ctx);
           if (rc)
             goto leave;
-          line = ctx->inbound.line;
+          line = (unsigned char *) ctx->inbound.line;
           linelen = ctx->inbound.linelen;
         }    
       while (*line == '#' || !linelen);
@@ -182,12 +183,12 @@
         break; /* END command received*/
       if (line[0] == 'C' && line[1] == 'A' && line[2] == 'N')
         {
-          rc = ASSUAN_Canceled;
+          rc = _assuan_error (ASSUAN_Canceled);
           goto leave;
         }
       if (line[0] != 'D' || line[1] != ' ' || nodataexpected)
         {
-          rc = ASSUAN_Unexpected_Command;
+          rc = _assuan_error (ASSUAN_Unexpected_Command);
           goto leave;
         }
       if (linelen < 3)
@@ -214,7 +215,7 @@
         }
       if (mb.too_large)
         {
-          rc = ASSUAN_Too_Much_Data;
+          rc = _assuan_error (ASSUAN_Too_Much_Data);
           goto leave;
         }
     }
@@ -223,7 +224,7 @@
     {
       *r_buffer = get_membuf (&mb, r_length);
       if (!*r_buffer)
-        rc = ASSUAN_Out_Of_Core;
+        rc = _assuan_error (ASSUAN_Out_Of_Core);
     }
 
  leave:
Index: libkdenetwork/libgpgme-copy/assuan/assuan-handler.c
===================================================================
--- libkdenetwork/libgpgme-copy/assuan/assuan-handler.c	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkdenetwork/libgpgme-copy/assuan/assuan-handler.c	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -15,7 +15,8 @@
  *
  * You should have received a copy of the GNU Lesser General Public
  * License along with this program; if not, write to the Free Software
- * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301, USA 
+ * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301,
+ * USA. 
  */
 
 #include <config.h>
@@ -36,20 +37,20 @@
 
 
 static int
-dummy_handler (ASSUAN_CONTEXT ctx, char *line)
+dummy_handler (assuan_context_t ctx, char *line)
 {
   return set_error (ctx, Server_Fault, "no handler registered");
 }
 
 
 static int
-std_handler_nop (ASSUAN_CONTEXT ctx, char *line)
+std_handler_nop (assuan_context_t ctx, char *line)
 {
   return 0; /* okay */
 }
   
 static int
-std_handler_cancel (ASSUAN_CONTEXT ctx, char *line)
+std_handler_cancel (assuan_context_t ctx, char *line)
 {
   if (ctx->cancel_notify_fnc)
     ctx->cancel_notify_fnc (ctx);
@@ -57,7 +58,7 @@
 }
 
 static int
-std_handler_option (ASSUAN_CONTEXT ctx, char *line)
+std_handler_option (assuan_context_t ctx, char *line)
 {
   char *key, *value, *p;
 
@@ -104,7 +105,7 @@
 }
   
 static int
-std_handler_bye (ASSUAN_CONTEXT ctx, char *line)
+std_handler_bye (assuan_context_t ctx, char *line)
 {
   if (ctx->bye_notify_fnc)
     ctx->bye_notify_fnc (ctx);
@@ -114,33 +115,35 @@
 }
   
 static int
-std_handler_auth (ASSUAN_CONTEXT ctx, char *line)
+std_handler_auth (assuan_context_t ctx, char *line)
 {
   return set_error (ctx, Not_Implemented, NULL); 
 }
   
 static int
-std_handler_reset (ASSUAN_CONTEXT ctx, char *line)
+std_handler_reset (assuan_context_t ctx, char *line)
 {
   if (ctx->reset_notify_fnc)
     ctx->reset_notify_fnc (ctx);
   assuan_close_input_fd (ctx);
   assuan_close_output_fd (ctx);
+  _assuan_uds_close_fds (ctx);
   return 0;
 }
   
 static int
-std_handler_end (ASSUAN_CONTEXT ctx, char *line)
+std_handler_end (assuan_context_t ctx, char *line)
 {
   return set_error (ctx, Not_Implemented, NULL); 
 }
 
-AssuanError
-assuan_command_parse_fd (ASSUAN_CONTEXT ctx, char *line, int *rfd)
+assuan_error_t
+assuan_command_parse_fd (assuan_context_t ctx, char *line, int *rfd)
 {
   char *endp;
 
-  if (strncmp (line, "FD", 2) != 0 || (line[2] != '=' && line[2] != '\0'))
+  if ( (strncmp (line, "FD", 2) && strncmp (line, "fd", 2))
+       || (line[2] != '=' && line[2] != '\0'))
     return set_error (ctx, Syntax_Error, "FD[=<n>] expected");
   line += 2;
   if (*line == '=')
@@ -149,7 +152,7 @@
       if (!digitp (*line))
 	return set_error (ctx, Syntax_Error, "number required");
       *rfd = strtoul (line, &endp, 10);
-      /* remove that argument so that a notify handler won't see it */
+      /* Remove that argument so that a notify handler won't see it. */
       memset (line, ' ', endp? (endp-line):strlen(line));
 
       if (*rfd == ctx->inbound.fd)
@@ -165,7 +168,7 @@
 
 /* Format is INPUT FD=<n> */
 static int
-std_handler_input (ASSUAN_CONTEXT ctx, char *line)
+std_handler_input (assuan_context_t ctx, char *line)
 {
   int rc, fd;
 
@@ -180,7 +183,7 @@
 
 /* Format is OUTPUT FD=<n> */
 static int
-std_handler_output (ASSUAN_CONTEXT ctx, char *line)
+std_handler_output (assuan_context_t ctx, char *line)
 {
   int rc, fd;
 
@@ -202,7 +205,7 @@
    with default handlers */
 static struct {
   const char *name;
-  int (*handler)(ASSUAN_CONTEXT, char *line);
+  int (*handler)(assuan_context_t, char *line);
   int always; /* always initialize this command */
 } std_cmd_table[] = {
   { "NOP",    std_handler_nop, 1 },
@@ -234,9 +237,9 @@
  * Return value: 0 on success or an error code
  **/
 int
-assuan_register_command (ASSUAN_CONTEXT ctx,
+assuan_register_command (assuan_context_t ctx,
                          const char *cmd_name,
-                         int (*handler)(ASSUAN_CONTEXT, char *))
+                         int (*handler)(assuan_context_t, char *))
 {
   int i;
   const char *s;
@@ -245,7 +248,7 @@
     cmd_name = NULL;
 
   if (!cmd_name)
-    return ASSUAN_Invalid_Value;
+    return _assuan_error (ASSUAN_Invalid_Value);
 
   if (!handler)
     { /* find a default handler. */
@@ -268,7 +271,7 @@
       ctx->cmdtbl_size = 50;
       ctx->cmdtbl = xtrycalloc ( ctx->cmdtbl_size, sizeof *ctx->cmdtbl);
       if (!ctx->cmdtbl)
-        return ASSUAN_Out_Of_Core;
+        return _assuan_error (ASSUAN_Out_Of_Core);
       ctx->cmdtbl_used = 0;
     }
   else if (ctx->cmdtbl_used >= ctx->cmdtbl_size)
@@ -277,7 +280,7 @@
 
       x = xtryrealloc ( ctx->cmdtbl, (ctx->cmdtbl_size+10) * sizeof *x);
       if (!x)
-        return ASSUAN_Out_Of_Core;
+        return _assuan_error (ASSUAN_Out_Of_Core);
       ctx->cmdtbl = x;
       ctx->cmdtbl_size += 50;
     }
@@ -289,59 +292,72 @@
 }
 
 int
-assuan_register_bye_notify (ASSUAN_CONTEXT ctx, void (*fnc)(ASSUAN_CONTEXT))
+assuan_register_post_cmd_notify (assuan_context_t ctx,
+                                 void (*fnc)(assuan_context_t, int))
 {
   if (!ctx)
-    return ASSUAN_Invalid_Value;
+    return _assuan_error (ASSUAN_Invalid_Value);
+  ctx->post_cmd_notify_fnc = fnc;
+  return 0;
+}
+
+int
+assuan_register_bye_notify (assuan_context_t ctx,
+                            void (*fnc)(assuan_context_t))
+{
+  if (!ctx)
+    return _assuan_error (ASSUAN_Invalid_Value);
   ctx->bye_notify_fnc = fnc;
   return 0;
 }
 
 int
-assuan_register_reset_notify (ASSUAN_CONTEXT ctx, void (*fnc)(ASSUAN_CONTEXT))
+assuan_register_reset_notify (assuan_context_t ctx,
+                              void (*fnc)(assuan_context_t))
 {
   if (!ctx)
-    return ASSUAN_Invalid_Value;
+    return _assuan_error (ASSUAN_Invalid_Value);
   ctx->reset_notify_fnc = fnc;
   return 0;
 }
 
 int
-assuan_register_cancel_notify (ASSUAN_CONTEXT ctx, void (*fnc)(ASSUAN_CONTEXT))
+assuan_register_cancel_notify (assuan_context_t ctx,
+                               void (*fnc)(assuan_context_t))
 {
   if (!ctx)
-    return ASSUAN_Invalid_Value;
+    return _assuan_error (ASSUAN_Invalid_Value);
   ctx->cancel_notify_fnc = fnc;
   return 0;
 }
 
 int
-assuan_register_option_handler (ASSUAN_CONTEXT ctx,
-                               int (*fnc)(ASSUAN_CONTEXT,
+assuan_register_option_handler (assuan_context_t ctx,
+                               int (*fnc)(assuan_context_t,
                                           const char*, const char*))
 {
   if (!ctx)
-    return ASSUAN_Invalid_Value;
+    return _assuan_error (ASSUAN_Invalid_Value);
   ctx->option_handler_fnc = fnc;
   return 0;
 }
 
 int
-assuan_register_input_notify (ASSUAN_CONTEXT ctx,
-                              void (*fnc)(ASSUAN_CONTEXT, const char *))
+assuan_register_input_notify (assuan_context_t ctx,
+                              void (*fnc)(assuan_context_t, const char *))
 {
   if (!ctx)
-    return ASSUAN_Invalid_Value;
+    return _assuan_error (ASSUAN_Invalid_Value);
   ctx->input_notify_fnc = fnc;
   return 0;
 }
 
 int
-assuan_register_output_notify (ASSUAN_CONTEXT ctx,
-                              void (*fnc)(ASSUAN_CONTEXT, const char *))
+assuan_register_output_notify (assuan_context_t ctx,
+                              void (*fnc)(assuan_context_t, const char *))
 {
   if (!ctx)
-    return ASSUAN_Invalid_Value;
+    return _assuan_error (ASSUAN_Invalid_Value);
   ctx->output_notify_fnc = fnc;
   return 0;
 }
@@ -349,7 +365,7 @@
 
 /* Helper to register the standards commands */
 int
-_assuan_register_std_commands (ASSUAN_CONTEXT ctx)
+_assuan_register_std_commands (assuan_context_t ctx)
 {
   int i, rc;
 
@@ -370,7 +386,7 @@
 /* Process the special data lines.  The "D " has already been removed
    from the line.  As all handlers this function may modify the line.  */
 static int
-handle_data_line (ASSUAN_CONTEXT ctx, char *line, int linelen)
+handle_data_line (assuan_context_t ctx, char *line, int linelen)
 {
   return set_error (ctx, Not_Implemented, NULL);
 }
@@ -391,10 +407,10 @@
 }
 
 /* Parse the line, break out the command, find it in the command
-   table, remove leading and white spaces from the arguments, all the
+   table, remove leading and white spaces from the arguments, call the
    handler with the argument line and return the error */
 static int 
-dispatch_command (ASSUAN_CONTEXT ctx, char *line, int linelen)
+dispatch_command (assuan_context_t ctx, char *line, int linelen)
 {
   char *p;
   const char *s;
@@ -406,7 +422,7 @@
   for (p=line; *p && *p != ' ' && *p != '\t'; p++)
     ;
   if (p==line)
-    return set_error (ctx, Invalid_Command, "leading white-space"); 
+    return set_error (ctx, Syntax_Error, "leading white-space"); 
   if (*p) 
     { /* Skip over leading WS after the keyword */
       *p++ = 0;
@@ -441,12 +457,12 @@
 
 
 static int
-process_request (ASSUAN_CONTEXT ctx)
+process_request (assuan_context_t ctx)
 {
   int rc;
 
   if (ctx->in_inquire)
-    return ASSUAN_Nested_Commands;
+    return _assuan_error (ASSUAN_Nested_Commands);
 
   rc = _assuan_read_line (ctx);
   if (rc)
@@ -477,28 +493,69 @@
     {
       rc = assuan_write_line (ctx, ctx->okay_line? ctx->okay_line : "OK");
     }
-  else if (rc == -1)
-    { /* No error checking because the peer may have already disconnect */ 
+  else if (err_is_eof (rc))
+    { /* No error checking because the peer may have already disconnect. */ 
       assuan_write_line (ctx, "OK closing connection");
       ctx->finish_handler (ctx);
     }
   else 
     {
-      char errline[256];
+      char errline[300];
 
       if (rc < 100)
-        snprintf (errline, sizeof(errline), "ERR %d server fault (%.50s)",
-                 ASSUAN_Server_Fault, assuan_strerror (rc));
+        sprintf (errline, "ERR %d server fault (%.50s)",
+                 _assuan_error (ASSUAN_Server_Fault), assuan_strerror (rc));
       else
         {
           const char *text = ctx->err_no == rc? ctx->err_str:NULL;
 
-          snprintf (errline, sizeof(errline),"ERR %d %.50s%s%.100s",
-                   rc, assuan_strerror (rc), text? " - ":"", text?text:"");
+#if defined(__GNUC__) && defined(__ELF__)
+          /* If we have weak symbol support we try to use the error
+             strings from libgpg-error without creating a dependency.
+             They are used for debugging purposes only, so there is no
+             problem if they are not available.  We need to make sure
+             that we are using ELF because only this guarantees that
+             weak symbol support is available in case GNU ld is not
+             used.  It seems that old gcc versions don't implement the
+             weak attribute properly but it works with the weak
+             pragma. */
+
+          unsigned int source, code;
+
+          int gpg_strerror_r (unsigned int err, char *buf, size_t buflen)
+            __attribute__ ((weak));
+          const char *gpg_strsource (unsigned int err)
+            __attribute__ ((weak));
+#if !defined(HAVE_W32_SYSTEM) && __GNUC__ < 3
+#pragma weak gpg_strerror_r
+#pragma weak gpg_strsource
+#endif
+
+          source = ((rc >> 24) & 0xff);
+          code = (rc & 0x00ffffff);
+          if (source && gpg_strsource && gpg_strerror_r)
+            {
+              /* Assume this is an libgpg-error. */
+              char ebuf[50];
+
+              gpg_strerror_r (rc, ebuf, sizeof ebuf );
+              sprintf (errline, "ERR %d %.50s <%.30s>%s%.100s",
+                       rc,
+                       ebuf,
+                       gpg_strsource (rc),
+                       text? " - ":"", text?text:"");
+            }
+          else
+#endif /* __GNUC__  && __ELF__ */
+            sprintf (errline, "ERR %d %.50s%s%.100s",
+                     rc, assuan_strerror (rc), text? " - ":"", text?text:"");
         }
       rc = assuan_write_line (ctx, errline);
     }
 
+  if (ctx->post_cmd_notify_fnc)
+    ctx->post_cmd_notify_fnc (ctx, rc);
+
   ctx->confidential = 0;
   if (ctx->okay_line)
     {
@@ -512,7 +569,7 @@
  * assuan_process:
  * @ctx: assuan context
  * 
- * This fucntion is used to handle the assuan protocol after a
+ * This function is used to handle the assuan protocol after a
  * connection has been established using assuan_accept().  This is the
  * main protocol handler.
  * 
@@ -520,7 +577,7 @@
  * failed.  Note, that no error is returned for operational errors.
  **/
 int
-assuan_process (ASSUAN_CONTEXT ctx)
+assuan_process (assuan_context_t ctx)
 {
   int rc;
 
@@ -528,7 +585,7 @@
     rc = process_request (ctx);
   } while (!rc);
 
-  if (rc == -1)
+  if (err_is_eof (rc))
     rc = 0;
 
   return rc;
@@ -547,7 +604,7 @@
  * Return value: -1 for end of server, 0 on success or an error code
  **/
 int 
-assuan_process_next (ASSUAN_CONTEXT ctx)
+assuan_process_next (assuan_context_t ctx)
 {
   return process_request (ctx);
 }
@@ -571,7 +628,7 @@
  * error which is most likely a too small fdarray.
  **/
 int 
-assuan_get_active_fds (ASSUAN_CONTEXT ctx, int what,
+assuan_get_active_fds (assuan_context_t ctx, int what,
                        int *fdarray, int fdarraysize)
 {
   int n = 0;
@@ -595,6 +652,23 @@
   return n;
 }
 
+
+/* Two simple wrappers to make the expected function types match. */
+#ifdef HAVE_FUNOPEN
+static int
+fun1_cookie_write (void *cookie, const char *buffer, int orig_size)
+{
+  return _assuan_cookie_write_data (cookie, buffer, orig_size);
+}
+#endif /*HAVE_FUNOPEN*/
+#ifdef HAVE_FOPENCOOKIE
+static ssize_t
+fun2_cookie_write (void *cookie, const char *buffer, size_t orig_size)
+{
+  return _assuan_cookie_write_data (cookie, buffer, orig_size);
+}
+#endif /*HAVE_FOPENCOOKIE*/
+
 /* Return a FP to be used for data output.  The FILE pointer is valid
    until the end of a handler.  So a close is not needed.  Assuan does
    all the buffering needed to insert the status line as well as the
@@ -604,16 +678,20 @@
    implementaion for systems w/o a glibc, a simple implementation
    could use a child process */
 FILE *
-assuan_get_data_fp (ASSUAN_CONTEXT ctx)
+assuan_get_data_fp (assuan_context_t ctx)
 {
 #if defined (HAVE_FOPENCOOKIE) || defined (HAVE_FUNOPEN)
   if (ctx->outbound.data.fp)
     return ctx->outbound.data.fp;
   
+#ifdef HAVE_FUNOPEN
+  ctx->outbound.data.fp = funopen (ctx, 0, fun1_cookie_write,
+				   0, _assuan_cookie_write_flush);
+#else
+  ctx->outbound.data.fp = funopen (ctx, 0, fun2_cookie_write,
+				   0, _assuan_cookie_write_flush);
+#endif                                   
 
-  ctx->outbound.data.fp = funopen (ctx, 0,
-				   _assuan_cookie_write_data,
-				   0, _assuan_cookie_write_flush);
   ctx->outbound.data.error = 0;
   return ctx->outbound.data.fp;
 #else
@@ -625,11 +703,11 @@
 
 /* Set the text used for the next OK reponse.  This string is
    automatically reset to NULL after the next command. */
-AssuanError
-assuan_set_okay_line (ASSUAN_CONTEXT ctx, const char *line)
+assuan_error_t
+assuan_set_okay_line (assuan_context_t ctx, const char *line)
 {
   if (!ctx)
-    return ASSUAN_Invalid_Value;
+    return _assuan_error (ASSUAN_Invalid_Value);
   if (!line)
     {
       xfree (ctx->okay_line);
@@ -641,7 +719,7 @@
          we should allocate the entire line in secure memory */
       char *buf = xtrymalloc (3+strlen(line)+1);
       if (!buf)
-        return ASSUAN_Out_Of_Core;
+        return _assuan_error (ASSUAN_Out_Of_Core);
       strcpy (buf, "OK ");
       strcpy (buf+3, line);
       xfree (ctx->okay_line);
@@ -652,15 +730,17 @@
 
 
 
-void
-assuan_write_status (ASSUAN_CONTEXT ctx, const char *keyword, const char *text)
+assuan_error_t
+assuan_write_status (assuan_context_t ctx,
+                     const char *keyword, const char *text)
 {
   char buffer[256];
   char *helpbuf;
   size_t n;
+  assuan_error_t ae;
 
   if ( !ctx || !keyword)
-    return;
+    return _assuan_error (ASSUAN_Invalid_Value);
   if (!text)
     text = "";
 
@@ -674,7 +754,7 @@
           strcat (buffer, " ");
           strcat (buffer, text);
         }
-      assuan_write_line (ctx, buffer);
+      ae = assuan_write_line (ctx, buffer);
     }
   else if ( (helpbuf = xtrymalloc (n)) )
     {
@@ -685,7 +765,10 @@
           strcat (helpbuf, " ");
           strcat (helpbuf, text);
         }
-      assuan_write_line (ctx, helpbuf);
+      ae = assuan_write_line (ctx, helpbuf);
       xfree (helpbuf);
     }
+  else
+    ae = 0;
+  return ae;
 }
Index: libkdenetwork/libgpgme-copy/assuan/assuan-util.c
===================================================================
--- libkdenetwork/libgpgme-copy/assuan/assuan-util.c	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkdenetwork/libgpgme-copy/assuan/assuan-util.c	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,5 +1,5 @@
 /* assuan-util.c - Utility functions for Assuan 
- *	Copyright (C) 2001, 2002, 2003 Free Software Foundation, Inc.
+ * Copyright (C) 2001, 2002, 2003, 2004, 2005 Free Software Foundation, Inc.
  *
  * This file is part of Assuan.
  *
@@ -15,7 +15,8 @@
  *
  * You should have received a copy of the GNU Lesser General Public
  * License along with this program; if not, write to the Free Software
- * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301, USA 
+ * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301,
+ * USA. 
  */
 
 #include <config.h>
@@ -23,6 +24,7 @@
 #include <stdio.h>
 #include <string.h>
 #include <ctype.h>
+#include <errno.h>
 
 #include "assuan-defs.h"
 
@@ -55,9 +57,19 @@
 void *
 _assuan_calloc (size_t n, size_t m)
 {
-  void *p = _assuan_malloc (n*m);
+  void *p;
+  size_t nbytes;
+    
+  nbytes = n * m;
+  if (m && nbytes / m != n) 
+    {
+      errno = ENOMEM;
+      return NULL;
+    }
+
+  p = _assuan_malloc (nbytes);
   if (p)
-    memset (p, 0, n* m);
+    memset (p, 0, nbytes);
   return p;
 }
 
@@ -73,7 +85,7 @@
   can take out a descriptive text.  Inside the assuan code, use the
   macro set_error instead of this function. */
 int
-assuan_set_error (ASSUAN_CONTEXT ctx, int err, const char *text)
+assuan_set_error (assuan_context_t ctx, int err, const char *text)
 {
   ctx->err_no = err;
   ctx->err_str = text;
@@ -81,139 +93,79 @@
 }
 
 void
-assuan_set_pointer (ASSUAN_CONTEXT ctx, void *pointer)
+assuan_set_pointer (assuan_context_t ctx, void *pointer)
 {
   if (ctx)
     ctx->user_pointer = pointer;
 }
 
 void *
-assuan_get_pointer (ASSUAN_CONTEXT ctx)
+assuan_get_pointer (assuan_context_t ctx)
 {
   return ctx? ctx->user_pointer : NULL;
 }
 
 
 void
-assuan_set_log_stream (ASSUAN_CONTEXT ctx, FILE *fp)
+assuan_begin_confidential (assuan_context_t ctx)
 {
   if (ctx)
     {
-      if (ctx->log_fp)
-        fflush (ctx->log_fp);
-      ctx->log_fp = fp;
+      ctx->confidential = 1;
     }
 }
 
-
 void
-assuan_begin_confidential (ASSUAN_CONTEXT ctx)
+assuan_end_confidential (assuan_context_t ctx)
 {
   if (ctx)
     {
-      ctx->confidential = 1;
+      ctx->confidential = 0;
     }
 }
 
-void
-assuan_end_confidential (ASSUAN_CONTEXT ctx)
+
+void 
+assuan_set_io_monitor (assuan_context_t ctx,
+                       unsigned int (*monitor)(assuan_context_t ctx,
+                                               int direction,
+                                               const char *line,
+                                               size_t linelen))
 {
   if (ctx)
     {
-      ctx->confidential = 0;
+      ctx->io_monitor = monitor;
     }
 }
 
-/* Dump a possibly binary string (used for debugging).  Distinguish
-   ascii text from binary and print it accordingly.  */
-void
-_assuan_log_print_buffer (FILE *fp, const void *buffer, size_t length)
-{
-  const unsigned char *s;
-  int n;
 
-  for (n=length,s=buffer; n; n--, s++)
-    if  (!isascii (*s) || iscntrl (*s) || !isprint (*s))
-      break;
 
-  s = buffer;
-  if (!n && *s != '[')
-    fwrite (buffer, length, 1, fp);
-  else
-    {
-#ifdef HAVE_FLOCKFILE
-      flockfile (fp);
-#endif
-      putc_unlocked ('[', fp);
-      for (n=0; n < length; n++, s++)
-          fprintf (fp, " %02x", *s);
-      putc_unlocked (' ', fp);
-      putc_unlocked (']', fp);
-#ifdef HAVE_FUNLOCKFILE
-      funlockfile (fp);
-#endif
-    }
-}
 
-/* Log a user supplied string.  Escapes non-printable before
-   printing.  */
+/* For context CTX, set the flag FLAG to VALUE.  Values for flags
+   are usually 1 or 0 but certain flags might allow for other values;
+   see the description of the type assuan_flag_t for details. */
 void
-_assuan_log_sanitized_string (const char *string)
+assuan_set_flag (assuan_context_t ctx, assuan_flag_t flag, int value)
 {
-  const unsigned char *s = string;
-  FILE *fp = assuan_get_assuan_log_stream ();
-
-  if (! *s)
+  if (!ctx)
     return;
-
-#ifdef HAVE_FLOCKFILE
-  flockfile (fp);
-#endif
-
-  for (; *s; s++)
+  switch (flag)
     {
-      int c = 0;
-
-      switch (*s)
-	{
-	case '\r':
-	  c = 'r';
-	  break;
-
-	case '\n':
-	  c = 'n';
-	  break;
-
-	case '\f':
-	  c = 'f';
-	  break;
-
-	case '\v':
-	  c = 'v';
-	  break;
-
-	case '\b':
-	  c = 'b';
-	  break;
-
-	default:
-	  if (isascii (*s) && isprint (*s))
-	    putc_unlocked (*s, fp);
-	  else
-	    {
-	      putc_unlocked ('\\', fp);
-	      fprintf (fp, "x%02x", *s);
-	    }
-	}
-
-      if (c)
-	{
-	  putc_unlocked ('\\', fp);
-	  putc_unlocked (c, fp);
-	}
+    case ASSUAN_NO_WAITPID: ctx->flags.no_waitpid = value; break;
     }
+}
 
-#ifdef HAVE_FUNLOCKFILE
-  funlockfile (fp);
-#endif
+/* Return the VALUE of FLAG in context CTX. */ 
+int
+assuan_get_flag (assuan_context_t ctx, assuan_flag_t flag)
+{
+  if (!ctx)
+    return 0;
+  switch (flag)
+    {
+    case ASSUAN_NO_WAITPID: return ctx->flags.no_waitpid;
+    }
+  return 0;
 }
+
+
Index: libkdenetwork/libgpgme-copy/assuan/assuan-client.c
===================================================================
--- libkdenetwork/libgpgme-copy/assuan/assuan-client.c	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkdenetwork/libgpgme-copy/assuan/assuan-client.c	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,5 +1,5 @@
 /* assuan-client.c - client functions
- *	Copyright (C) 2001, 2002 Free Software Foundation, Inc.
+ *	Copyright (C) 2001, 2002, 2005 Free Software Foundation, Inc.
  *
  * This file is part of Assuan.
  *
@@ -15,7 +15,8 @@
  *
  * You should have received a copy of the GNU Lesser General Public
  * License along with this program; if not, write to the Free Software
- * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301, USA 
+ * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301,
+ * USA. 
  */
 
 #include <config.h>
@@ -32,12 +33,12 @@
 #define xtoi_2(p)   ((xtoi_1(p) * 16) + xtoi_1((p)+1))
 
 
-AssuanError
-_assuan_read_from_server (ASSUAN_CONTEXT ctx, int *okay, int *off)
+assuan_error_t
+_assuan_read_from_server (assuan_context_t ctx, int *okay, int *off)
 {
   char *line;
   int linelen;
-  AssuanError rc;
+  assuan_error_t rc;
 
   *okay = 0;
   *off = 0;
@@ -103,7 +104,7 @@
       *off = 3;
     }
   else
-    rc = ASSUAN_Invalid_Response;
+    rc = _assuan_error (ASSUAN_Invalid_Response);
   return rc;
 }
 
@@ -112,7 +113,7 @@
 /**
  * assuan_transact:
  * @ctx: The Assuan context
- * @command: Coimmand line to be send to server
+ * @command: Command line to be send to the server
  * @data_cb: Callback function for data lines
  * @data_cb_arg: first argument passed to @data_cb
  * @inquire_cb: Callback function for a inquire response
@@ -124,26 +125,32 @@
  * 
  * Return value: 0 on success or error code.  The error code may be
  * the one one returned by the server in error lines or from the
- * callback functions.
+ * callback functions.  Take care: When a callback returns an error
+ * this function returns immediately with an error and thus the caller
+ * will altter return an Assuan error (write erro in most cases).
  **/
-AssuanError
-assuan_transact (ASSUAN_CONTEXT ctx,
+assuan_error_t
+assuan_transact (assuan_context_t ctx,
                  const char *command,
-                 AssuanError (*data_cb)(void *, const void *, size_t),
+                 int (*data_cb)(void *, const void *, size_t),
                  void *data_cb_arg,
-                 AssuanError (*inquire_cb)(void*, const char *),
+                 int (*inquire_cb)(void*, const char *),
                  void *inquire_cb_arg,
-                 AssuanError (*status_cb)(void*, const char *),
+                 int (*status_cb)(void*, const char *),
                  void *status_cb_arg)
 {
-  int rc, okay, off;
-  unsigned char *line;
+  assuan_error_t rc;
+  int okay, off;
+  char *line;
   int linelen;
 
   rc = assuan_write_line (ctx, command);
   if (rc)
     return rc;
 
+  if (*command == '#' || !*command)
+    return 0; /* Don't expect a response for a comment line.  */
+
  again:
   rc = _assuan_read_from_server (ctx, &okay, &off);
   if (rc)
@@ -155,16 +162,18 @@
   if (!okay)
     {
       rc = atoi (line);
-      if (rc < 100)
-        rc = ASSUAN_Server_Fault;
+      if (rc > 0 && rc < 100)
+        rc = _assuan_error (ASSUAN_Server_Fault);
+      else if (rc > 0 && rc <= 128)
+        rc = _assuan_error (rc);
     }
   else if (okay == 2)
     {
       if (!data_cb)
-        rc = ASSUAN_No_Data_Callback;
+        rc = _assuan_error (ASSUAN_No_Data_Callback);
       else 
         {
-          unsigned char *s, *d;
+          char *s, *d;
 
           for (s=d=line; linelen; linelen--)
             {
@@ -190,7 +199,7 @@
         {
           assuan_write_line (ctx, "END"); /* get out of inquire mode */
           _assuan_read_from_server (ctx, &okay, &off); /* dummy read */
-          rc = ASSUAN_No_Inquire_Callback;
+          rc = _assuan_error (ASSUAN_No_Inquire_Callback);
         }
       else
         {
@@ -211,7 +220,7 @@
   else if (okay == 5)
     {
       if (!data_cb)
-        rc = ASSUAN_No_Data_Callback;
+        rc = _assuan_error (ASSUAN_No_Data_Callback);
       else 
         {
           rc = data_cb (data_cb_arg, NULL, 0);
Index: libkdenetwork/libgpgme-copy/assuan/ChangeLog
===================================================================
--- libkdenetwork/libgpgme-copy/assuan/ChangeLog	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkdenetwork/libgpgme-copy/assuan/ChangeLog	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,3 +1,328 @@
+2006-11-22  Werner Koch  <wk@g10code.com>
+
+	* assuan-handler.c (fun1_cookie_write, fun2_cookie_write): New.
+	(assuan_get_data_fp) [HAVE_FUNOPEN]: Use it.
+
+2006-11-21  Werner Koch  <wk@g10code.com>
+
+	* Makefile.am (libassuan_pth_a_CFLAGS): New.
+
+	* assuan-pipe-server.c (_assuan_release_context): Free CMDTBL.
+
+2006-11-14  Werner Koch  <wk@g10code.com>
+
+	* libassuan.m4 (AM_CHECK_LIBASSUAN): New.
+
+	* assuan-handler.c (assuan_register_post_cmd_notify) 
+	(assuan_register_post_cmd_notify): New.
+	* assuan-util.c (assuan_set_io_monitor): New.
+	* assuan-buffer.c (_assuan_read_line): Use it.
+	(_assuan_write_line): Ditto.
+	(_assuan_cookie_write_data): Ditto.
+	(_assuan_cookie_write_flush): Ditto.
+
+2006-10-18  Werner Koch  <wk@g10code.com>
+
+	* libassuan.m4: Pass "pthread" to the common macro.  Reported by
+	Rex Dieter.
+
+2006-10-16  Werner Koch  <wk@g10code.com>
+
+	* mkerrors: Map ASSUAN_Not_Confirmed.
+
+2006-10-10  Werner Koch  <wk@g10code.com>
+
+	* libassuan.m4 (AM_PATH_LIBASSUAN_PTH)
+	(AM_PATH_LIBASSUAN_PTHREAD): Fixed.
+
+	* assuan-buffer.c (assuan_sendfd): Implement a runtime detection
+	of implemented descripotr passing.
+
+	* assuan-uds.c: Take care of USE_DESCRIPTOR_PASSING.
+
+	* assuan-defs.h: Add missing semicolon.
+
+2006-10-09  Werner Koch  <wk@g10code.com>
+
+	* assuan-handler.c (process_request): Use weak pragma for the sake
+	of old gcc's.  Reported by Alain Guibert.
+
+	* assuan-io.c: Removed Pth support.
+	* assuan-io-pth.c: New. Based on assuan-io.c
+
+2006-10-06  Werner Koch  <wk@g10code.com>
+
+	* libassuan-config.in: New options --api-version and --thread.
+
+2006-10-04  Werner Koch  <wk@g10code.com>
+
+	* assuan-client.c (assuan_transact): Need to map old assuan status
+	codes so that for example CANCELED is correctly mapped.
+
+2006-09-28  Marcus Brinkmann  <marcus@g10code.de>
+
+	* assuan-client.c (assuan_transact): Do not convert error on
+	status line, it is already a gpg-error.  Do convert
+	ASSUAN_Server_Fault.
+
+2006-09-19  Marcus Brinkmann  <marcus@g10code.de>
+
+	* assuan.h (assuan_init_socket_server_ext)
+	[_ASSUAN_EXT_SYM_PREFIX]: Fix typo in macro.
+
+2006-09-19  Werner Koch  <wk@g10code.com>
+
+	* assuan-defs.h (putc_unlocked): Add prototype.
+
+	* assuan-socket-server.c (accept_connection): Made LEN a socklen_t.
+
+	* assuan.h: Replaced assuan error code enum by simple defines and
+	made assuan_error_t an int.
+	* mkerrors: Changed parser accordingly.
+
+2006-09-19  Marcus Brinkmann  <marcus@g10code.de>
+
+	* assuan-pipe-connect.c: Add hacks for Slowaris.
+	* assuan-socket.c: Likewise here.
+
+	* assuan.h (enum): Avoid trailing comma in enumerator list.  Ugh.
+
+	* mkerrors (_assuan_error): Change return type to assuan_error_t.
+	* assuan-buffer.c (_assuan_read_line): Change return type to
+	assuan_error_t.  Map returned value of -1.
+	(_assuan_write_line): Change type of RC to assuan_error_t.
+	* assuan-defs.h (_assuan_read_line, _assuan_error): Likewise for
+	prototypes.
+
+	* assuan-defs.h (unsetenv): Define correctly.
+
+2006-09-14  Werner Koch  <wk@g10code.com>
+
+	* assuan-io.c (_assuan_waitpid): New.  Changed all waitpid calls
+	to this.
+
+	* assuan.h (_ASSUAN_DEPRECATED): New internal macro.
+	(assuan_pipe_connect2): Declare deprecated.
+	(assuan_init_connected_socket_server): Declare deprecated.
+
+	* assuan-connect.c (assuan_get_peercred): New.
+	* assuan-socket-server.c (accept_connection_bottom): Save uid and gid.
+
+2006-09-13  Werner Koch  <wk@g10code.com>
+
+	* assuan-client.c (assuan_transact): Need to map the error code.
+	* mkerrors: Need to map ASSUAN_No_Secret_Key.
+
+	* assuan-pipe-server.c (is_valid_socket): New.
+	(assuan_init_pipe_server): Use UDS with the environmet variable is
+	set and a valid descriptor is given.  Ignore FILEDES in this case.
+
+	* assuan-socket-server.c (assuan_init_socket_server_ext): New.
+	Changed other init fucntions to make use of it.
+
+	* assuan-handler.c (assuan_command_parse_fd): Allow for lowercase
+	"fd".
+	(std_handler_reset): Close pending fds.
+	* assuan-uds.c (uds_receivefd): Fixed.
+	(_assuan_uds_close_fds): New.
+
+	* assuan-socket-connect.c (assuan_socket_connect_ext): New. Takes
+	all code of assuan_socket_connect plus an option to use sendmsg.
+	* assuan-pipe-connect.c (assuan_pipe_connect_ext): New arg FLAGS.
+
+2006-09-12  Werner Koch  <wk@g10code.com>
+
+	* assuan-buffer.c (_assuan_write_line): Also log the prefix.
+
+	* assuan-defs.h (DIM, DIMof): New.
+
+	* assuan-domain-server.c: Removed.
+	* assuan-domain-connect.c: Renamed to ..
+	* assuan-uds.c: this.
+	(domain_reader, domain_writer, domain_sendfd, domain_receivefd) 
+	(assuan_domain_connect, _assuan_domain_init): Removed. 
+	(uds_reader, uds_writer, uds_sendfd, uds_receivefd) 
+	(_assuan_init_uds_io): New.
+	(_assuan_uds_deinit): New.
+
+	* assuan-io.c (_assuan_simple_sendmsg, _assuan_simple_recvmsg): New.
+	(my_pth_fdmode, my_pth_select): New.
+
+2006-09-11  Werner Koch  <wk@g10code.com>
+
+	* assuan-pipe-server.c (assuan_init_pipe_server): Allow for
+	FILEDES to be NULL and try to start as a socketpair server in this
+	case.
+
+	* assuan-pipe-connect.c (assuan_pipe_connect2): Split up into two
+	functions (unix and w32) for clarity.
+	(pipe_connect_unix): This is the new fucntion.  Add USE_CMSG flag.
+	(pipe_connect_w32): Ditto.
+	(initial_handshake): Factored out code.
+	(socketpair_connect): New.
+	(assuan_pipe_connect_ext): New.
+	(do_finish): Handle case if outbound and inbound fd are the same.
+	This is to support socketpairs.
+
+2006-09-10  Werner Koch  <wk@g10code.com>
+
+	* assuan-util.c (_assuan_log_print_buffer)
+	(_assuan_log_sanitized_string,assuan_set_log_stream): Moved to ..
+	* assuan-logging.c: .. here.
+	(_assuan_log_print_buffer): Only print the leading bytes in hex
+	log mode unless the new env variable ASSUAN_FULL_LOGGING has been
+	set.
+	(_assuan_set_default_log_stream): Test this env variable.
+
+2006-09-06  Werner Koch  <wk@g10code.com>
+
+	* assuan.h (_ASSUAN_ONLY_GPG_ERRORS): New.
+
+	* assuan-handler.c (dispatch_command): Use Syntax_Error instead of
+	Invalid_Command.
+
+	* assuan-domain-connect.c: Changed alloc malloc/free/realloc to
+	xtrymalloc et al.
+	(read_int, write_int): Make args void pointers.
+	(domain_receivefd): Take care of realloc shrinking failure.
+
+	* assuan-buffer.c (_assuan_read_line, _assuan_write_line)
+	(assuan_write_line, _assuan_cookie_write_data)
+	(_assuan_cookie_write_flush): Print the inbound fd instead of the
+	address of the context when logging I/0.  This makes it more
+	readable.
+
+2006-09-05  Werner Koch  <wk@g10code.com>
+
+	* assuan-defs.h (err_code, err_is_eof): New.
+
+	* mkerrors (_assuan_error): New.  Wrapped all error code
+	assignments in a call to this.
+	(assuan_strerror): Map gpg-style error codes back. Also print a
+	string for the old EOF code.
+	(assuan_set_assuan_err_source): New.
+
+	* assuan-logging.c (_assuan_log_printf): Do not change ERRNO and
+	print the pid.
+
+	* assuan-domain-connect.c (domain_reader): Replaced plain printf
+	by assuan_log function.
+
+2005-10-24  Werner Koch  <wk@g10code.com>
+
+	* putc_unlocked.c, memrchr.c, isascii.c, funopen.c: Changed
+	distribution terms to LGPL.  This are small and trivial files so
+	there are no obstacles of doing so.
+	* assuan-socket.c: Likewise, the stated GPL was not intended.
+
+2005-10-08  Marcus Brinkmann  <marcus@g10code.de>
+
+	* assuan-defs.h (setenv, unsetenv, clearenv) [!HAVE_SETENV]:
+	Define to _assuan_*.
+	* setenv.c: Include "assuan-defs.h".
+	(__add_to_environ): Make static.
+
+2005-10-07  Marcus Brinkmann  <marcus@g10code.de>
+
+	* assuan-defs.h (memrchr) [!HAVE_MEMRCHR]: New prototype.
+	(stpcpy) [!HAVE_STPCPY]: Likewise.
+	* stpcpy.c: New LGPL'ed file from the GNU C Library.
+	* setenv.c: New file.
+	* assuan-domain-connect.c (read_int): New function.
+	(write_int): New function.
+	(domain_reader): Use read_int.
+	(domain_sendfd): Use write_int.
+
+2005-10-01  Marcus Brinkmann  <marcus@g10code.de>
+
+	* assuan.h (assuan_pipe_connect, assuan_pipe_connect2): Make type
+	of ARGV parameter const in prototype.
+	* assuan-pipe-connect.c (assuan_pipe_connect,
+	assuan_pipe_connect2): Likewise in declaration.
+	(assuan_pipe_connect2): Add braindead cast to make execv happy.
+
+	* assuan-client.c (assuan_transact): Change LINE, S and D from
+	unsigned char * to char * to silence gcc warning.
+	* assuan-util.c (_assuan_log_sanitized_string): Add explicit cast
+	to silence gcc warning.
+	* assuan-inquire.c (assuan_inquire): Likewise.
+
+2005-08-19  Werner Koch  <wk@g10code.com>
+
+	* funopen.c, assuan-socket.c: Copied from libassuan CVS.
+	* assuan-pipe-connect.c (assuan_pipe_connect2): Add missing
+	declaration of PID.
+
+2005-08-09  Werner Koch  <wk@g10code.com>
+
+	* README.1st: Adjusted to cope with changes done in upstream Assuan.
+
+	Merged changes for W32 support from libassuan.
+	
+	* assuan.h [_ASSUAN_EXT_SYM_PREFIX]: New.
+	* assuan-io.c [_ASSUAN_NO_PTH]: New.
+	* assuan-pipe-connect.c (fix_signals) [_ASSUAN_NO_FIXED_SIGNALS]: New.
+	(assuan_pipe_connect2) [_ASSUAN_USE_DOUBLE_FORK]: Use double fork.
+	(fix_signals) [_ASSUAN_USE_DOUBLE_FORK]: Do not wait..
+	* assuan-logging.c, assuan-io.c: Include config.h
+	Replaced all usages of _WIN32 by the new HAVE_W32_SYSTEM because
+	there is nothing winning in this API.
+	* assuan-pipe-connect.c (assuan_pipe_connect2) [_WIN32]: Return
+	error Not Imlemented.
+	* assuan-logging.c (_assuan_w32_strerror): New. 
+	* assuan-defs.h (w32_strerror): new.
+	* assuan-pipe-connect.c (assuan_pipe_connect2, fix_signals):
+	Factored signal code out to new function.
+	(build_w32_commandline, create_inheritable_pipe): New.  Taken
+	from gnupg 1.9.
+	(assuan_pipe_connect2) [W32]: Implemented for W32.
+	* assuan-pipe-server.c (assuan_init_pipe_server) [W32]: Map file
+	descriptors using _get_osfhandle.
+	* assuan-socket-connect.c (assuan_socket_connect) [W32]: Allow for
+	a drive letter in the path.
+	* assuan-client.c (assuan_transact): Handle empty and comment
+	commands correctly.
+	* assuan-util.c (_assuan_calloc): Avoid integer overflow.
+	* assuan-util.c (assuan_set_flag, assuan_get_flag): New.
+	* assuan-defs.h (struct assuan_context_s): New field flags.
+	* assuan.h (assuan_flag_t): New with one flag value
+	ASSUAN_NO_WAITPID for now.
+	* assuan-pipe-connect.c (do_finish): Take care of the no_waitpid
+	flag.
+	* mkerrors: Include config.h into assuan-errors.c.  This is
+	required so that assuan.h knows about the W32 macro.
+
+2005-08-09 Timo Schulz  <twoaday@g10code.com> (ported from libassuan by wk)
+	
+	* assuan-io.c (_assuan_simple_read, _assuan_simple_write): W32
+	support.
+	* assuan-socket.c (_assuan_close): New.
+	(_assuan_sock_new): New.
+	(_assuan_sock_bind): New.
+
+2005-03-22  Werner Koch  <wk@g10code.com>
+
+	* assuan-defs.h (struct assuan_io): Renamed elements READ and
+	WRITE to READFNC and WRITEFNC to avoid problems with read defined
+	as macro.  Changed callers.  Noted by Ville Skyttä.
+
+2004-12-16  Marcus Brinkmann  <marcus@g10code.de>
+
+	* assuan-pipe-connect.c (do_finish): Do not wait for child to finish.
+	(assuan_pipe_connect): Use double-fork approach.
+	* assuan-connect.c (assuan_disconnect): Do not write BYE to the
+	status line.
+
+2004-12-07  Marcus Brinkmann  <marcus@g10code.de>
+
+	* README.1st: Add copyright notice.
+
+2004-06-23  Marcus Brinkmann  <marcus@g10code.de>
+
+	* assuan-domain-connect.c [HAVE_SYS_UIO_H]: Include <sys/uio.h>.
+
+	* assuan-handler.c: Include <errno.h>.
+
 2004-06-08  Marcus Brinkmann  <marcus@g10code.de>
 
 	* assuan-buffer.c (assuan_write_line): If the line is longer than
@@ -493,7 +818,7 @@
 	* assuan-defs.h: Add space in the context for this.
 
 	
- Copyright 2001, 2002 Free Software Foundation, Inc.
+ Copyright 2001, 2002, 2003, 2004 Free Software Foundation, Inc.
 
  This file is free software; as a special exception the author gives
  unlimited permission to copy and/or distribute it, with or without
Index: libkdenetwork/libgpgme-copy/assuan/assuan-socket-connect.c
===================================================================
--- libkdenetwork/libgpgme-copy/assuan/assuan-socket-connect.c	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkdenetwork/libgpgme-copy/assuan/assuan-socket-connect.c	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,5 +1,5 @@
 /* assuan-socket-connect.c - Assuan socket based client
- *	Copyright (C) 2002, 2003 Free Software Foundation, Inc.
+ *	Copyright (C) 2002, 2003, 2004 Free Software Foundation, Inc.
  *
  * This file is part of Assuan.
  *
@@ -15,32 +15,51 @@
  *
  * You should have received a copy of the GNU Lesser General Public
  * License along with this program; if not, write to the Free Software
- * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301, USA 
+ * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301,
+ * USA. 
  */
 
 #include <config.h>
 #include <stdlib.h>
 #include <stddef.h>
 #include <stdio.h>
+#include <string.h>
 #include <errno.h>
+#include <unistd.h>
 #include <sys/types.h>
+#ifndef HAVE_W32_SYSTEM
 #include <sys/socket.h>
 #include <sys/un.h>
-#include <unistd.h>
+#else
+#include <windows.h>
+#endif
 
 #include "assuan-defs.h"
 
-#define LOG(format, args...) \
-	fprintf (assuan_get_assuan_log_stream (), \
-	         assuan_get_assuan_log_prefix (), \
-	         "%s" format , ## args)
+/* Hacks for Slowaris.  */
+#ifndef PF_LOCAL
+# ifdef PF_UNIX
+#  define PF_LOCAL PF_UNIX
+# else
+#  define PF_LOCAL AF_UNIX
+# endif
+#endif
+#ifndef AF_LOCAL
+# define AF_LOCAL AF_UNIX
+#endif
 
+#ifndef SUN_LEN
+# define SUN_LEN(ptr) ((size_t) (((struct sockaddr_un *) 0)->sun_path) \
+	               + strlen ((ptr)->sun_path))
+#endif
+
+ 
 static int
-do_finish (ASSUAN_CONTEXT ctx)
+do_finish (assuan_context_t ctx)
 {
   if (ctx->inbound.fd != -1)
     {
-      close (ctx->inbound.fd);
+      _assuan_close (ctx->inbound.fd);
     }
   ctx->inbound.fd = -1;
   ctx->outbound.fd = -1;
@@ -48,83 +67,108 @@
 }
 
 static void
-do_deinit (ASSUAN_CONTEXT ctx)
+do_deinit (assuan_context_t ctx)
 {
   do_finish (ctx);
 }
+
+
 /* Make a connection to the Unix domain socket NAME and return a new
    Assuan context in CTX.  SERVER_PID is currently not used but may
    become handy in the future.  */
-AssuanError
-assuan_socket_connect (ASSUAN_CONTEXT *r_ctx,
+assuan_error_t
+assuan_socket_connect (assuan_context_t *r_ctx,
                        const char *name, pid_t server_pid)
 {
+  return assuan_socket_connect_ext (r_ctx, name, server_pid, 0);
+}
+
+
+/* Make a connection to the Unix domain socket NAME and return a new
+   Assuan context in CTX.  SERVER_PID is currently not used but may
+   become handy in the future.  With flags set to 1 sendmsg and
+   recvmesg are used. */
+assuan_error_t
+assuan_socket_connect_ext (assuan_context_t *r_ctx,
+                           const char *name, pid_t server_pid,
+                           unsigned int flags)
+{
   static struct assuan_io io = { _assuan_simple_read,
 				 _assuan_simple_write };
 
-  AssuanError err;
-  ASSUAN_CONTEXT ctx;
+  assuan_error_t err;
+  assuan_context_t ctx;
   int fd;
   struct sockaddr_un srvr_addr;
   size_t len;
+  const char *s;
 
   if (!r_ctx || !name)
-    return ASSUAN_Invalid_Value;
+    return _assuan_error (ASSUAN_Invalid_Value);
   *r_ctx = NULL;
 
-  /* we require that the name starts with a slash, so that we can
-     alter reuse this function for other socket types */
-  if (*name != '/')
-    return ASSUAN_Invalid_Value;
+  /* We require that the name starts with a slash, so that we
+     eventually can reuse this function for other socket types.  To
+     make things easier we allow an optional dirver prefix.  */
+  s = name;
+  if (*s && s[1] == ':')
+    s += 2;
+  if (*s != DIRSEP_C && *s != '/')
+    return _assuan_error (ASSUAN_Invalid_Value);
+
   if (strlen (name)+1 >= sizeof srvr_addr.sun_path)
-    return ASSUAN_Invalid_Value;
+    return _assuan_error (ASSUAN_Invalid_Value);
 
   err = _assuan_new_context (&ctx); 
   if (err)
       return err;
-  ctx->pid = server_pid; /* save it in case we need it later */
-  ctx->deinit_handler = do_deinit;
+  ctx->deinit_handler = ((flags&1))? _assuan_uds_deinit :  do_deinit;
   ctx->finish_handler = do_finish;
 
-  fd = socket (PF_LOCAL, SOCK_STREAM, 0);
+  fd = _assuan_sock_new (PF_LOCAL, SOCK_STREAM, 0);
   if (fd == -1)
     {
-      LOG ("can't create socket: %s\n", strerror (errno));
+      _assuan_log_printf ("can't create socket: %s\n", strerror (errno));
       _assuan_release_context (ctx);
-      return ASSUAN_General_Error;
+      return _assuan_error (ASSUAN_General_Error);
     }
 
   memset (&srvr_addr, 0, sizeof srvr_addr);
   srvr_addr.sun_family = AF_LOCAL;
-  len = strlen (srvr_addr.sun_path) + 1;
-  memcpy (srvr_addr.sun_path, name, len);
-  len += (offsetof (struct sockaddr_un, sun_path));
+  strncpy (srvr_addr.sun_path, name, sizeof (srvr_addr.sun_path) - 1);
+  srvr_addr.sun_path[sizeof (srvr_addr.sun_path) - 1] = 0;
+  len = SUN_LEN (&srvr_addr);
 
-  if (connect (fd, (struct sockaddr *) &srvr_addr, len) == -1)
+
+  if (_assuan_sock_connect (fd, (struct sockaddr *) &srvr_addr, len) == -1)
     {
-      LOG ("can't connect to `%s': %s\n", name, strerror (errno));
+      _assuan_log_printf ("can't connect to `%s': %s\n",
+                          name, strerror (errno));
       _assuan_release_context (ctx);
-      close (fd);
-      return ASSUAN_Connect_Failed;
+      _assuan_close (fd);
+      return _assuan_error (ASSUAN_Connect_Failed);
     }
 
   ctx->inbound.fd = fd;
   ctx->outbound.fd = fd;
   ctx->io = &io;
-
+  if ((flags&1))
+    _assuan_init_uds_io (ctx);
+ 
   /* initial handshake */
   {
     int okay, off;
 
     err = _assuan_read_from_server (ctx, &okay, &off);
     if (err)
-      LOG ("can't connect to server: %s\n", assuan_strerror (err));
+      _assuan_log_printf ("can't connect to server: %s\n",
+                          assuan_strerror (err));
     else if (okay != 1)
       {
-	LOG ("can't connect to server: `");
+        /*LOG ("can't connect to server: `");*/
 	_assuan_log_sanitized_string (ctx->inbound.line);
 	fprintf (assuan_get_assuan_log_stream (), "'\n");
-	err = ASSUAN_Connect_Failed;
+	err = _assuan_error (ASSUAN_Connect_Failed);
       }
   }
 
@@ -136,3 +180,5 @@
     *r_ctx = ctx;
   return 0;
 }
+
+
Index: libkdenetwork/libgpgme-copy/assuan/funopen.c
===================================================================
--- libkdenetwork/libgpgme-copy/assuan/funopen.c	(.../tags/KDE/3.5.6/kdepim)	(wersja 0)
+++ libkdenetwork/libgpgme-copy/assuan/funopen.c	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -0,0 +1,64 @@
+/* funopen.c - Replacement for funopen.
+ * Copyright (C) 2003, 2005 Free Software Foundation, Inc.
+ *
+ * This file is part of Assuan.
+ *
+ * Assuan is free software; you can redistribute it and/or modify it
+ * under the terms of the GNU Lesser General Public License as
+ * published by the Free Software Foundation; either version 2.1 of
+ * the License, or (at your option) any later version.
+ *
+ * Assuan is distributed in the hope that it will be useful, but
+ * WITHOUT ANY WARRANTY; without even the implied warranty of
+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
+ * Lesser General Public License for more details.
+ *
+ * You should have received a copy of the GNU Lesser General Public
+ * License along with this program; if not, write to the Free Software
+ * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301,
+ * USA. 
+ */
+
+#ifdef HAVE_CONFIG_H
+#include <config.h>
+#endif
+
+#include <stdio.h>
+
+
+/* Replacement for the *BSD function:
+
+  FILE *funopen (void *cookie,
+                 int (*readfn)(void *, char *, int),
+                 int (*writefn)(void *, const char *, int),
+                 fpos_t (*seekfn)(void *, fpos_t, int),
+                 int (*closefn)(void *));
+
+  The functions to provide my either be NULL if not required or
+  similar to the unistd function with the exception of using the
+  cookie instead of the fiel descripor.
+*/
+
+
+#ifdef HAVE_FOPENCOOKIE
+FILE *
+_assuan_funopen(void *cookie,
+                cookie_read_function_t *readfn,
+                cookie_write_function_t *writefn,
+                cookie_seek_function_t *seekfn,
+                cookie_close_function_t *closefn)
+{
+  cookie_io_functions_t io = { NULL };
+
+  io.read = readfn;
+  io.write = writefn;
+  io.seek = seekfn;
+  io.close = closefn;
+
+  return fopencookie (cookie,
+		      readfn ? ( writefn ? "rw" : "r" )
+		      : ( writefn ? "w" : ""), io);
+}
+#else
+#error No known way to implement funopen.
+#endif
Index: libkdenetwork/libgpgme-copy/assuan/assuan-pipe-connect.c
===================================================================
--- libkdenetwork/libgpgme-copy/assuan/assuan-pipe-connect.c	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkdenetwork/libgpgme-copy/assuan/assuan-pipe-connect.c	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,5 +1,5 @@
 /* assuan-pipe-connect.c - Establish a pipe connection (client) 
- *	Copyright (C) 2001, 2002, 2003 Free Software Foundation, Inc.
+ * Copyright (C) 2001, 2002, 2003, 2005, 2006 Free Software Foundation, Inc.
  *
  * This file is part of Assuan.
  *
@@ -15,7 +15,8 @@
  *
  * You should have received a copy of the GNU Lesser General Public
  * License along with this program; if not, write to the Free Software
- * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301, USA 
+ * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301,
+ * USA. 
  */
 
 #ifdef HAVE_CONFIG_H
@@ -30,21 +31,74 @@
 #include <errno.h>
 #include <fcntl.h>
 #include <sys/types.h>
+#ifndef HAVE_W32_SYSTEM
 #include <sys/wait.h>
+#else
+#include <windows.h>
+#endif
 
 #include "assuan-defs.h"
 
+/* Hacks for Slowaris.  */
+#ifndef PF_LOCAL
+# ifdef PF_UNIX
+#  define PF_LOCAL PF_UNIX
+# else
+#  define PF_LOCAL AF_UNIX
+# endif
+#endif
+#ifndef AF_LOCAL
+# define AF_LOCAL AF_UNIX
+#endif
+
+
 #ifdef _POSIX_OPEN_MAX
 #define MAX_OPEN_FDS _POSIX_OPEN_MAX
 #else
 #define MAX_OPEN_FDS 20
 #endif
 
-#define LOG(format, args...) \
-	fprintf (assuan_get_assuan_log_stream (), \
-	         assuan_get_assuan_log_prefix (), \
-	         "%s" format , ## args)
+#ifdef HAVE_W32_SYSTEM
+/* We assume that a HANDLE can be represented by an int which should
+   be true for all i386 systems (HANDLE is defined as void *) and
+   these are the only systems for which Windows is available.  Further
+   we assume that -1 denotes an invalid handle.  */
+#define fd_to_handle(a)  ((HANDLE)(a))
+#define handle_to_fd(a)  ((int)(a))
+#define pid_to_handle(a) ((HANDLE)(a))
+#define handle_to_pid(a) ((int)(a))
+#endif /*HAVE_W32_SYSTEM*/
 
+
+/* This should be called to make sure that SIGPIPE gets ignored.  */
+static void
+fix_signals (void)
+{
+#ifndef _ASSUAN_NO_FIXED_SIGNALS
+#ifndef HAVE_DOSISH_SYSTEM  /* No SIGPIPE for these systems.  */
+  static int fixed_signals;
+
+  if (!fixed_signals)
+    { 
+      struct sigaction act;
+        
+      sigaction (SIGPIPE, NULL, &act);
+      if (act.sa_handler == SIG_DFL)
+	{
+	  act.sa_handler = SIG_IGN;
+	  sigemptyset (&act.sa_mask);
+	  act.sa_flags = 0;
+	  sigaction (SIGPIPE, &act, NULL);
+        }
+      fixed_signals = 1;
+      /* FIXME: This is not MT safe */
+    }
+#endif /*HAVE_DOSISH_SYSTEM*/
+#endif /*!_ASSUAN_NO_FIXED_SIGNALS*/
+}
+
+
+#ifndef HAVE_W32_SYSTEM
 static int
 writen (int fd, const char *buffer, size_t length)
 {
@@ -63,83 +117,103 @@
     }
   return 0;  /* okay */
 }
+#endif
 
-
 static int
-do_finish (ASSUAN_CONTEXT ctx)
+do_finish (assuan_context_t ctx)
 {
   if (ctx->inbound.fd != -1)
     {
-      close (ctx->inbound.fd);
+      _assuan_close (ctx->inbound.fd);
+      if (ctx->inbound.fd == ctx->outbound.fd)
+        ctx->outbound.fd = -1;
       ctx->inbound.fd = -1;
     }
   if (ctx->outbound.fd != -1)
     {
-      close (ctx->outbound.fd);
+      _assuan_close (ctx->outbound.fd);
       ctx->outbound.fd = -1;
     }
-  if (ctx->pid != -1)
+  if (ctx->pid != -1 && ctx->pid)
     {
-      waitpid (ctx->pid, NULL, 0);  /* FIXME Check return value.  */
+#ifndef HAVE_W32_SYSTEM
+#ifndef _ASSUAN_USE_DOUBLE_FORK
+      if (!ctx->flags.no_waitpid)
+        _assuan_waitpid (ctx->pid, NULL, 0); 
       ctx->pid = -1;
+#endif
+#endif /*!HAVE_W32_SYSTEM*/
     }
   return 0;
 }
 
 static void
-do_deinit (ASSUAN_CONTEXT ctx)
+do_deinit (assuan_context_t ctx)
 {
   do_finish (ctx);
 }
 
 
+/* Helper for pipe_connect. */
+static assuan_error_t
+initial_handshake (assuan_context_t *ctx)
+{
+  int okay, off;
+  assuan_error_t err;
+  
+  err = _assuan_read_from_server (*ctx, &okay, &off);
+  if (err)
+    _assuan_log_printf ("can't connect server: %s\n",
+                        assuan_strerror (err));
+  else if (okay != 1)
+    {
+      _assuan_log_printf ("can't connect server: `%s'\n",
+                          (*ctx)->inbound.line);
+      err = _assuan_error (ASSUAN_Connect_Failed);
+    }
 
-/* Connect to a server over a pipe, creating the assuan context and
-   returning it in CTX.  The server filename is NAME, the argument
-   vector in ARGV.  FD_CHILD_LIST is a -1 terminated list of file
-   descriptors not to close in the child.  */
-AssuanError
-assuan_pipe_connect (ASSUAN_CONTEXT *ctx, const char *name, char *const argv[],
-		     int *fd_child_list)
+  if (err)
+    {
+      assuan_disconnect (*ctx);
+      *ctx = NULL;
+    }
+  return err;
+}
+
+
+#ifndef HAVE_W32_SYSTEM
+#define pipe_connect pipe_connect_unix
+/* Unix version of the pipe connection code.  We use an extra macro to
+   make ChangeLog entries easier. */
+static assuan_error_t
+pipe_connect_unix (assuan_context_t *ctx,
+                   const char *name, const char *const argv[],
+                   int *fd_child_list,
+                   void (*atfork) (void *opaque, int reserved),
+                   void *atforkvalue)
 {
-#ifndef _ASSUAN_IN_GPGME
-  static int fixed_signals = 0;
-#endif
-  AssuanError err;
+  assuan_error_t err;
   int rp[2];
   int wp[2];
+  char mypidstr[50];
 
   if (!ctx || !name || !argv || !argv[0])
-    return ASSUAN_Invalid_Value;
+    return _assuan_error (ASSUAN_Invalid_Value);
 
-#ifndef _ASSUAN_IN_GPGME
-  if (!fixed_signals)
-    { 
-      struct sigaction act;
-        
-      sigaction (SIGPIPE, NULL, &act);
-      if (act.sa_handler == SIG_DFL)
-	{
-	  act.sa_handler = SIG_IGN;
-	  sigemptyset (&act.sa_mask);
-	  act.sa_flags = 0;
-	  sigaction (SIGPIPE, &act, NULL);
-        }
-      fixed_signals = 1;
-      /* FIXME: This is not MT safe */
-    }
-#endif
+  fix_signals ();
 
+  sprintf (mypidstr, "%lu", (unsigned long)getpid ());
+
   if (pipe (rp) < 0)
-    return ASSUAN_General_Error;
-
+    return _assuan_error (ASSUAN_General_Error);
+  
   if (pipe (wp) < 0)
     {
       close (rp[0]);
       close (rp[1]);
-      return ASSUAN_General_Error;
+      return _assuan_error (ASSUAN_General_Error);
     }
-  
+
   err = _assuan_new_context (ctx);
   if (err)
     {
@@ -155,6 +229,8 @@
   (*ctx)->deinit_handler = do_deinit;
   (*ctx)->finish_handler = do_finish;
 
+  /* FIXME: For GPGME we should better use _gpgme_io_spawn.  The PID
+     stored here is actually soon useless.  */
   (*ctx)->pid = fork ();
   if ((*ctx)->pid < 0)
     {
@@ -163,123 +239,651 @@
       close (wp[0]);
       close (wp[1]);
       _assuan_release_context (*ctx); 
-      return ASSUAN_General_Error;
+      return _assuan_error (ASSUAN_General_Error);
     }
 
   if ((*ctx)->pid == 0)
     {
-      int i, n;
-      char errbuf[512];
-      int *fdp;
+#ifdef _ASSUAN_USE_DOUBLE_FORK      
+      pid_t pid;
 
-      /* Dup handles to stdin/stdout. */
-      if (rp[1] != STDOUT_FILENO)
+      if ((pid = fork ()) == 0)
+#endif
 	{
-	  if (dup2 (rp[1], STDOUT_FILENO) == -1)
-	    {
-	      LOG ("dup2 failed in child: %s\n", strerror (errno));
-	      _exit (4);
-	    }
-	}
-      if (wp[0] != STDIN_FILENO)
-	{
-	  if (dup2 (wp[0], STDIN_FILENO) == -1)
-	    {
-	      LOG ("dup2 failed in child: %s\n", strerror (errno));
-	      _exit (4);
-	    }
-	}
+          int i, n;
+          char errbuf[512];
+          int *fdp;
+          
+          if (atfork)
+            atfork (atforkvalue, 0);
 
-      /* Dup stderr to /dev/null unless it is in the list of FDs to be
-         passed to the child. */
-      fdp = fd_child_list;
-      if (fdp)
-        {
-          for (; *fdp != -1 && *fdp != STDERR_FILENO; fdp++)
-            ;
-        }
-      if (!fdp || *fdp == -1)
-        {
-	  int fd = open ("/dev/null", O_WRONLY);
-	  if (fd == -1)
-	    {
-	      LOG ("can't open `/dev/null': %s\n", strerror (errno));
-	      _exit (4);
-	    }
-	  if (dup2 (fd, STDERR_FILENO) == -1)
-	    {
-	      LOG ("dup2(dev/null, 2) failed: %s\n", strerror (errno));
-	      _exit (4);
-	    }
-	}
+          /* Dup handles to stdin/stdout. */
+          if (rp[1] != STDOUT_FILENO)
+            {
+              if (dup2 (rp[1], STDOUT_FILENO) == -1)
+                {
+                  _assuan_log_printf ("dup2 failed in child: %s\n",
+                                      strerror (errno));
+                  _exit (4);
+                }
+            }
+          if (wp[0] != STDIN_FILENO)
+            {
+              if (dup2 (wp[0], STDIN_FILENO) == -1)
+                {
+                  _assuan_log_printf ("dup2 failed in child: %s\n",
+                                      strerror (errno));
+                  _exit (4);
+                }
+            }
 
+          /* Dup stderr to /dev/null unless it is in the list of FDs to be
+             passed to the child. */
+          fdp = fd_child_list;
+          if (fdp)
+            {
+              for (; *fdp != -1 && *fdp != STDERR_FILENO; fdp++)
+                ;
+            }
+          if (!fdp || *fdp == -1)
+            {
+              int fd = open ("/dev/null", O_WRONLY);
+              if (fd == -1)
+                {
+                  _assuan_log_printf ("can't open `/dev/null': %s\n",
+                                      strerror (errno));
+                  _exit (4);
+                }
+              if (dup2 (fd, STDERR_FILENO) == -1)
+                {
+                  _assuan_log_printf ("dup2(dev/null, 2) failed: %s\n",
+                                      strerror (errno));
+                  _exit (4);
+                }
+            }
 
-      /* Close all files which will not be duped and are not in the
-         fd_child_list. */
-      n = sysconf (_SC_OPEN_MAX);
-      if (n < 0)
-        n = MAX_OPEN_FDS;
-      for (i=0; i < n; i++)
-        {
-          if ( i == STDIN_FILENO || i == STDOUT_FILENO || i == STDERR_FILENO)
-            continue;
-	  fdp = fd_child_list;
-	  if (fdp)
-	    {
-	      while (*fdp != -1 && *fdp != i)
-		fdp++;
-	    }
 
-          if (!(fdp && *fdp != -1))
-            close(i);
+          /* Close all files which will not be duped and are not in the
+             fd_child_list. */
+          n = sysconf (_SC_OPEN_MAX);
+          if (n < 0)
+            n = MAX_OPEN_FDS;
+          for (i=0; i < n; i++)
+            {
+              if ( i == STDIN_FILENO || i == STDOUT_FILENO
+                   || i == STDERR_FILENO)
+                continue;
+              fdp = fd_child_list;
+              if (fdp)
+                {
+                  while (*fdp != -1 && *fdp != i)
+                    fdp++;
+                }
+
+              if (!(fdp && *fdp != -1))
+                close(i);
+            }
+          errno = 0;
+
+          /* We store our parents pid in the environment so that the
+             execed assuan server is able to read the actual pid of the
+             client.  The server can't use getppid because it might have
+             been double forked before the assuan server has been
+             initialized. */
+          setenv ("_assuan_pipe_connect_pid", mypidstr, 1);
+
+          /* Make sure that we never pass a connection fd variable
+             when using a simple pipe.  */
+          unsetenv ("_assuan_connection_fd");
+
+          execv (name, (char *const *) argv); 
+          /* oops - use the pipe to tell the parent about it */
+          snprintf (errbuf, sizeof(errbuf)-1,
+                    "ERR %d can't exec `%s': %.50s\n",
+                    _assuan_error (ASSUAN_Problem_Starting_Server),
+                    name, strerror (errno));
+          errbuf[sizeof(errbuf)-1] = 0;
+          writen (1, errbuf, strlen (errbuf));
+          _exit (4);
         }
-      errno = 0;
-
-      execv (name, argv); 
-      /* oops - use the pipe to tell the parent about it */
-      snprintf (errbuf, sizeof(errbuf)-1, "ERR %d can't exec `%s': %.50s\n",
-                ASSUAN_Problem_Starting_Server, name, strerror (errno));
-      errbuf[sizeof(errbuf)-1] = 0;
-      writen (1, errbuf, strlen (errbuf));
-      _exit (4);
+#ifdef _ASSUAN_USE_DOUBLE_FORK
+      if (pid == -1)
+	_exit (1);
+      else
+	_exit (0);
+#endif
     }
 
+#ifdef _ASSUAN_USE_DOUBLE_FORK
+  _assuan_waitpid ((*ctx)->pid, NULL, 0);
+  (*ctx)->pid = -1;
+#endif
+
   close (rp[1]);
   close (wp[0]);
 
-  /* initial handshake */
-  {
-    int okay, off;
+  return initial_handshake (ctx);
+}
+#endif /*!HAVE_W32_SYSTEM*/
 
-    err = _assuan_read_from_server (*ctx, &okay, &off);
-    if (err)
-      LOG ("can't connect server: %s\n", assuan_strerror (err));
-    else if (okay != 1)
-      {
-	LOG ("can't connect server: `%s'\n", (*ctx)->inbound.line);
-	err = ASSUAN_Connect_Failed;
-      }
-  }
 
+#ifndef HAVE_W32_SYSTEM
+/* This function is similar to pipe_connect but uses a socketpair and
+   sets the I/O up to use sendmsg/recvmsg. */
+static assuan_error_t
+socketpair_connect (assuan_context_t *ctx,
+                    const char *name, const char *const argv[],
+                    int *fd_child_list,
+                    void (*atfork) (void *opaque, int reserved),
+                    void *atforkvalue)
+{
+  assuan_error_t err;
+  int fds[2];
+  char mypidstr[50];
+
+  if (!ctx
+      || (name && (!argv || !argv[0]))
+      || (!name && argv))
+    return _assuan_error (ASSUAN_Invalid_Value);
+
+  fix_signals ();
+
+  sprintf (mypidstr, "%lu", (unsigned long)getpid ());
+
+  if ( socketpair (AF_LOCAL, SOCK_STREAM, 0, fds) )
+    {
+      _assuan_log_printf ("socketpair failed: %s\n", strerror (errno));
+      return _assuan_error (ASSUAN_General_Error);
+    }
+  
+  err = _assuan_new_context (ctx);
   if (err)
     {
-      assuan_disconnect (*ctx);
+      close (fds[0]);
+      close (fds[1]);
+      return err;
+    }
+  (*ctx)->pipe_mode = 1;
+  (*ctx)->inbound.fd  = fds[0]; 
+  (*ctx)->outbound.fd = fds[0]; 
+  _assuan_init_uds_io (*ctx);
+  (*ctx)->deinit_handler = _assuan_uds_deinit;
+  (*ctx)->finish_handler = do_finish;
+
+  (*ctx)->pid = fork ();
+  if ((*ctx)->pid < 0)
+    {
+      close (fds[0]);
+      close (fds[1]);
+      _assuan_release_context (*ctx); 
       *ctx = NULL;
+      return _assuan_error (ASSUAN_General_Error);
     }
 
-  return err;
+  if ((*ctx)->pid == 0)
+    {
+#ifdef _ASSUAN_USE_DOUBLE_FORK      
+      pid_t pid;
+
+      if ((pid = fork ()) == 0)
+#endif
+	{
+          int fd, i, n;
+          char errbuf[512];
+          int *fdp;
+          
+          if (atfork)
+            atfork (atforkvalue, 0);
+
+          /* Connect stdin and stdout to /dev/null. */
+          fd = open ("/dev/null", O_RDONLY);
+          if (fd == -1 || dup2 (fd, STDIN_FILENO) == -1)
+            {
+              _assuan_log_printf ("dup2(dev/null) failed: %s\n",
+                                  strerror (errno));
+              _exit (4);
+            }
+          fd = open ("/dev/null", O_WRONLY);
+          if (fd == -1 || dup2 (fd, STDOUT_FILENO) == -1)
+            {
+              _assuan_log_printf ("dup2(dev/null) failed: %s\n",
+                                  strerror (errno));
+              _exit (4);
+            }
+
+          /* Dup stderr to /dev/null unless it is in the list of FDs to be
+             passed to the child. */
+          fdp = fd_child_list;
+          if (fdp)
+            {
+              for (; *fdp != -1 && *fdp != STDERR_FILENO; fdp++)
+                ;
+            }
+          if (!fdp || *fdp == -1)
+            {
+              fd = open ("/dev/null", O_WRONLY);
+              if (fd == -1 || dup2 (fd, STDERR_FILENO) == -1)
+                {
+                  _assuan_log_printf ("dup2(dev/null) failed: %s\n",
+                                      strerror (errno));
+                  _exit (4);
+                }
+            }
+
+
+          /* Close all files which will not be duped, are not in the
+             fd_child_list and are not the connection fd. */
+          n = sysconf (_SC_OPEN_MAX);
+          if (n < 0)
+            n = MAX_OPEN_FDS;
+          for (i=0; i < n; i++)
+            {
+              if ( i == STDIN_FILENO || i == STDOUT_FILENO
+                   || i == STDERR_FILENO || i == fds[1])
+                continue;
+              fdp = fd_child_list;
+              if (fdp)
+                {
+                  while (*fdp != -1 && *fdp != i)
+                    fdp++;
+                }
+
+              if (!(fdp && *fdp != -1))
+                close(i);
+            }
+          errno = 0;
+
+          /* We store our parents pid in the environment so that the
+             execed assuan server is able to read the actual pid of the
+             client.  The server can't use getppid becuase it might have
+             been double forked before the assuan server has been
+             initialized. */
+          setenv ("_assuan_pipe_connect_pid", mypidstr, 1);
+
+          /* Now set the environment variable used to convey the
+             connection's file descriptor. */
+          sprintf (mypidstr, "%d", fds[1]);
+          if (setenv ("_assuan_connection_fd", mypidstr, 1))
+            {
+              _assuan_log_printf ("setenv failed: %s\n", strerror (errno));
+              _exit (4);
+            }
+
+          if (!name && !argv)
+            {
+              /* No name and no args given, thus we don't do an exec
+                 but continue the forked process.  */
+              _assuan_release_context (*ctx);
+              *ctx = NULL;
+              return 0;
+            }
+
+          execv (name, (char *const *) argv); 
+          /* oops - use the pipe to tell the parent about it */
+          snprintf (errbuf, sizeof(errbuf)-1,
+                    "ERR %d can't exec `%s': %.50s\n",
+                    _assuan_error (ASSUAN_Problem_Starting_Server),
+                    name, strerror (errno));
+          errbuf[sizeof(errbuf)-1] = 0;
+          writen (fds[1], errbuf, strlen (errbuf));
+          _exit (4);
+        }
+#ifdef _ASSUAN_USE_DOUBLE_FORK
+      if (pid == -1)
+	_exit (1);
+      else
+	_exit (0);
+#endif
+    }
+
+
+#ifdef _ASSUAN_USE_DOUBLE_FORK
+  _assuan_waitpid ((*ctx)->pid, NULL, 0);
+  (*ctx)->pid = -1;
+#endif
+
+  close (fds[1]);
+  
+  return initial_handshake (ctx);
 }
+#endif /*!HAVE_W32_SYSTEM*/
 
 
 
+#ifdef HAVE_W32_SYSTEM
+/* Build a command line for use with W32's CreateProcess.  On success
+   CMDLINE gets the address of a newly allocated string.  */
+static int
+build_w32_commandline (char * const *argv, char **cmdline)
+{
+  int i, n;
+  const char *s;
+  char *buf, *p;
 
+  *cmdline = NULL;
+  n = 0;
+  for (i=0; (s=argv[i]); i++)
+    {
+      n += strlen (s) + 1 + 2;  /* (1 space, 2 quoting */
+      for (; *s; s++)
+        if (*s == '\"')
+          n++;  /* Need to double inner quotes.  */
+    }
+  n++;
 
+  buf = p = xtrymalloc (n);
+  if (!buf)
+    return -1;
 
+  for (i=0; argv[i]; i++) 
+    {
+      if (i)
+        p = stpcpy (p, " ");
+      if (!*argv[i]) /* Empty string. */
+        p = stpcpy (p, "\"\"");
+      else if (strpbrk (argv[i], " \t\n\v\f\""))
+        {
+          p = stpcpy (p, "\"");
+          for (s=argv[i]; *s; s++)
+            {
+              *p++ = *s;
+              if (*s == '\"')
+                *p++ = *s;
+            }
+          *p++ = '\"';
+          *p = 0;
+        }
+      else
+        p = stpcpy (p, argv[i]);
+    }
 
+  *cmdline= buf;
+  return 0;
+}
+#endif /*HAVE_W32_SYSTEM*/
 
 
+#ifdef HAVE_W32_SYSTEM
+/* Create pipe where one end end is inheritable.  */
+static int
+create_inheritable_pipe (int filedes[2], int for_write)
+{
+  HANDLE r, w, h;
+  SECURITY_ATTRIBUTES sec_attr;
 
+  memset (&sec_attr, 0, sizeof sec_attr );
+  sec_attr.nLength = sizeof sec_attr;
+  sec_attr.bInheritHandle = FALSE;
+    
+  if (!CreatePipe (&r, &w, &sec_attr, 0))
+    {
+      _assuan_log_printf ("CreatePipe failed: %s\n", w32_strerror (-1));
+      return -1;
+    }
 
+  if (!DuplicateHandle (GetCurrentProcess(), for_write? r : w,
+                        GetCurrentProcess(), &h, 0,
+                        TRUE, DUPLICATE_SAME_ACCESS ))
+    {
+      _assuan_log_printf ("DuplicateHandle failed: %s\n", w32_strerror (-1));
+      CloseHandle (r);
+      CloseHandle (w);
+      return -1;
+    }
+  if (for_write)
+    {
+      CloseHandle (r);
+      r = h;
+    }
+  else
+    {
+      CloseHandle (w);
+      w = h;
+    }
 
+  filedes[0] = handle_to_fd (r);
+  filedes[1] = handle_to_fd (w);
+  return 0;
+}
+#endif /*HAVE_W32_SYSTEM*/
 
 
+#ifdef HAVE_W32_SYSTEM
+#define pipe_connect pipe_connect_w32
+/* W32 version of the pipe connection code. */
+static assuan_error_t
+pipe_connect_w32 (assuan_context_t *ctx,
+                  const char *name, const char *const argv[],
+                  int *fd_child_list,
+                  void (*atfork) (void *opaque, int reserved),
+                  void *atforkvalue)
+{
+  assuan_error_t err;
+  int rp[2];
+  int wp[2];
+  char mypidstr[50];
+  char *cmdline;
+  SECURITY_ATTRIBUTES sec_attr;
+  PROCESS_INFORMATION pi = 
+    {
+      NULL,      /* Returns process handle.  */
+      0,         /* Returns primary thread handle.  */
+      0,         /* Returns pid.  */
+      0          /* Returns tid.  */
+    };
+  STARTUPINFO si;
+  int fd, *fdp;
+  HANDLE nullfd = INVALID_HANDLE_VALUE;
+
+  if (!ctx || !name || !argv || !argv[0])
+    return _assuan_error (ASSUAN_Invalid_Value);
+
+  fix_signals ();
+
+  sprintf (mypidstr, "%lu", (unsigned long)getpid ());
+
+  /* Build the command line.  */
+  if (build_w32_commandline (argv, &cmdline))
+    return _assuan_error (ASSUAN_Out_Of_Core);
+
+  /* Create thew two pipes. */
+  if (create_inheritable_pipe (rp, 0))
+    {
+      xfree (cmdline);
+      return _assuan_error (ASSUAN_General_Error);
+    }
+  
+  if (create_inheritable_pipe (wp, 1))
+    {
+      CloseHandle (fd_to_handle (rp[0]));
+      CloseHandle (fd_to_handle (rp[1]));
+      xfree (cmdline);
+      return _assuan_error (ASSUAN_General_Error);
+    }
+
+  
+  err = _assuan_new_context (ctx);
+  if (err)
+    {
+      CloseHandle (fd_to_handle (rp[0]));
+      CloseHandle (fd_to_handle (rp[1]));
+      CloseHandle (fd_to_handle (wp[0]));
+      CloseHandle (fd_to_handle (wp[1]));
+      xfree (cmdline);
+      return _assuan_error (ASSUAN_General_Error);
+    }
+
+  (*ctx)->pipe_mode = 1;
+  (*ctx)->inbound.fd  = rp[0];  /* Our inbound is read end of read pipe. */
+  (*ctx)->outbound.fd = wp[1];  /* Our outbound is write end of write pipe. */
+  (*ctx)->deinit_handler = do_deinit;
+  (*ctx)->finish_handler = do_finish;
+
+
+  /* fixme: Actually we should set the "_assuan_pipe_connect_pid" env
+     variable.  However this requires us to write a full environment
+     handler, because the strings are expected in sorted order.  The
+     suggestion given in the MS Reference Library, to save the old
+     value, changeit, create proces and restore it, is not thread
+     safe.  */
+
+  /* Start the process.  */
+  memset (&sec_attr, 0, sizeof sec_attr );
+  sec_attr.nLength = sizeof sec_attr;
+  sec_attr.bInheritHandle = FALSE;
+  
+  memset (&si, 0, sizeof si);
+  si.cb = sizeof (si);
+  si.dwFlags = STARTF_USESTDHANDLES;
+  si.hStdInput  = fd_to_handle (wp[0]);
+  si.hStdOutput = fd_to_handle (rp[1]);
+
+  /* Dup stderr to /dev/null unless it is in the list of FDs to be
+     passed to the child. */
+  fd = fileno (stderr);
+  fdp = fd_child_list;
+  if (fdp)
+    {
+      for (; *fdp != -1 && *fdp != fd; fdp++)
+        ;
+    }
+  if (!fdp || *fdp == -1)
+    {
+      nullfd = CreateFile ("nul", GENERIC_WRITE,
+                           FILE_SHARE_READ | FILE_SHARE_WRITE,
+                           NULL, OPEN_EXISTING, 0, NULL);
+      if (nullfd == INVALID_HANDLE_VALUE)
+        {
+          _assuan_log_printf ("can't open `nul': %s\n", w32_strerror (-1));
+          CloseHandle (fd_to_handle (rp[0]));
+          CloseHandle (fd_to_handle (rp[1]));
+          CloseHandle (fd_to_handle (wp[0]));
+          CloseHandle (fd_to_handle (wp[1]));
+          xfree (cmdline);
+          _assuan_release_context (*ctx); 
+          return -1;
+        }
+      si.hStdError = nullfd;
+    }
+  else
+    si.hStdError = fd_to_handle (_get_osfhandle (fd));
+
+
+  /* Note: We inherit all handles flagged as inheritable.  This seems
+     to be a security flaw but there seems to be no way of selecting
+     handles to inherit. */
+  /*   _assuan_log_printf ("CreateProcess, path=`%s' cmdline=`%s'\n", */
+  /*                       name, cmdline); */
+  if (!CreateProcess (name,                 /* Program to start.  */
+                      cmdline,              /* Command line arguments.  */
+                      &sec_attr,            /* Process security attributes.  */
+                      &sec_attr,            /* Thread security attributes.  */
+                      TRUE,                 /* Inherit handles.  */
+                      (CREATE_DEFAULT_ERROR_MODE
+                       | GetPriorityClass (GetCurrentProcess ())
+                       | CREATE_SUSPENDED), /* Creation flags.  */
+                      NULL,                 /* Environment.  */
+                      NULL,                 /* Use current drive/directory.  */
+                      &si,                  /* Startup information. */
+                      &pi                   /* Returns process information.  */
+                      ))
+    {
+      _assuan_log_printf ("CreateProcess failed: %s\n", w32_strerror (-1));
+      CloseHandle (fd_to_handle (rp[0]));
+      CloseHandle (fd_to_handle (rp[1]));
+      CloseHandle (fd_to_handle (wp[0]));
+      CloseHandle (fd_to_handle (wp[1]));
+      if (nullfd != INVALID_HANDLE_VALUE)
+        CloseHandle (nullfd);
+      xfree (cmdline);
+      _assuan_release_context (*ctx); 
+      return _assuan_error (ASSUAN_General_Error);
+    }
+  xfree (cmdline);
+  cmdline = NULL;
+  if (nullfd != INVALID_HANDLE_VALUE)
+    {
+      CloseHandle (nullfd);
+      nullfd = INVALID_HANDLE_VALUE;
+    }
+
+  CloseHandle (fd_to_handle (rp[1]));
+  CloseHandle (fd_to_handle (wp[0]));
+
+  /*   _assuan_log_printf ("CreateProcess ready: hProcess=%p hThread=%p" */
+  /*                       " dwProcessID=%d dwThreadId=%d\n", */
+  /*                       pi.hProcess, pi.hThread, */
+  /*                       (int) pi.dwProcessId, (int) pi.dwThreadId); */
+
+  ResumeThread (pi.hThread);
+  CloseHandle (pi.hThread); 
+  (*ctx)->pid = 0;  /* We don't use the PID. */
+  CloseHandle (pi.hProcess); /* We don't need to wait for the process. */
+
+  return initial_handshake (ctx);
+}
+#endif /*HAVE_W32_SYSTEM*/
+
+
+/* Connect to a server over a pipe, creating the assuan context and
+   returning it in CTX.  The server filename is NAME, the argument
+   vector in ARGV.  FD_CHILD_LIST is a -1 terminated list of file
+   descriptors not to close in the child.  */
+assuan_error_t
+assuan_pipe_connect (assuan_context_t *ctx, const char *name,
+		     const char *const argv[], int *fd_child_list)
+{
+  return pipe_connect (ctx, name, argv, fd_child_list, NULL, NULL);
+}
+
+
+
+assuan_error_t
+assuan_pipe_connect2 (assuan_context_t *ctx,
+                      const char *name, const char *const argv[],
+                      int *fd_child_list,
+                      void (*atfork) (void *opaque, int reserved),
+                      void *atforkvalue)
+{
+  return pipe_connect (ctx, name, argv, fd_child_list, atfork, atforkvalue);
+}
+
+
+/* Connect to a server over a full-duplex socket (i.e. created by
+   socketpair), creating the assuan context and returning it in CTX.
+   The server filename is NAME, the argument vector in ARGV.
+   FD_CHILD_LIST is a -1 terminated list of file descriptors not to
+   close in the child.  ATFORK is called in the child right after the
+   fork; ATFORKVALUE is passed as the first argument and 0 is passed
+   as the second argument. The ATFORK function should only act if the
+   second value is 0.
+
+   For now FLAGS may either take the value 0 to behave like
+   assuan_pipe_connect2 or 1 to enable the described full-duplex
+   socket behaviour.
+
+   If NAME as well as ARGV are NULL, no exec is done but the same
+   process is continued.  However all file descriptors are closed and
+   some special environment variables are set. To let the caller
+   detect whether the child or the parent continues, the child returns
+   a CTX of NULL. */
+assuan_error_t
+assuan_pipe_connect_ext (assuan_context_t *ctx,
+                         const char *name, const char *const argv[],
+                         int *fd_child_list,
+                         void (*atfork) (void *opaque, int reserved),
+                         void *atforkvalue, unsigned int flags)
+{
+  if ((flags & 1))
+    {
+#ifdef HAVE_W32_SYSTEM
+      return _assuan_error (ASSUAN_Not_Implemented);
+#else
+      return socketpair_connect (ctx, name, argv, fd_child_list,
+                                 atfork, atforkvalue);
+#endif
+    }
+  else
+    return pipe_connect (ctx, name, argv, fd_child_list, atfork, atforkvalue);
+}
+
Index: libkdenetwork/libgpgme-copy/assuan/assuan-logging.c
===================================================================
--- libkdenetwork/libgpgme-copy/assuan/assuan-logging.c	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkdenetwork/libgpgme-copy/assuan/assuan-logging.c	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,5 +1,5 @@
 /* assuan-logging.c - Default logging function.
- *	Copyright (C) 2002, 2003 Free Software Foundation, Inc.
+ *	Copyright (C) 2002, 2003, 2004 Free Software Foundation, Inc.
  *
  * This file is part of Assuan.
  *
@@ -15,28 +15,227 @@
  *
  * You should have received a copy of the GNU Lesser General Public
  * License along with this program; if not, write to the Free Software
- * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301, USA 
+ * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301,
+ * USA. 
  */
 
-#include "assuan-defs.h"
+#ifdef HAVE_CONFIG_H
+#include <config.h>
+#endif
 #include <stdio.h>
+#include <stdlib.h>
+#include <string.h>
+#include <stdarg.h>
+#ifdef HAVE_W32_SYSTEM
+#include <windows.h>
+#endif /*HAVE_W32_SYSTEM*/
+#include <errno.h>
+#include <ctype.h>
 
+#include "assuan-defs.h"
+
+static char prefix_buffer[80];
 static FILE *_assuan_log;
+static int full_logging;
 
 void
+_assuan_set_default_log_stream (FILE *fp)
+{
+  if (!_assuan_log)
+    {
+      _assuan_log = fp;
+      full_logging = !!getenv ("ASSUAN_FULL_LOGGING");
+    }
+}
+
+void
 assuan_set_assuan_log_stream (FILE *fp)
 {
   _assuan_log = fp;
 }
 
+
+/* Set the per context log stream.  Also enable the default log stream
+   if it has not been set.  */
+void
+assuan_set_log_stream (assuan_context_t ctx, FILE *fp)
+{
+  if (ctx)
+    {
+      if (ctx->log_fp)
+        fflush (ctx->log_fp);
+      ctx->log_fp = fp;
+      _assuan_set_default_log_stream (fp);
+    }
+}
+
+
 FILE *
 assuan_get_assuan_log_stream (void)
 {
   return _assuan_log ? _assuan_log : stderr;
 }
 
+
+/* Set the prefix to be used for logging to TEXT or
+   resets it to the default if TEXT is NULL. */
+void
+assuan_set_assuan_log_prefix (const char *text)
+{
+  if (text)
+    {
+      strncpy (prefix_buffer, text, sizeof (prefix_buffer)-1);
+      prefix_buffer[sizeof (prefix_buffer)-1] = 0;
+    }
+  else
+    *prefix_buffer = 0;
+}
+
 const char *
 assuan_get_assuan_log_prefix (void)
 {
-  return "";
+  return prefix_buffer;
 }
+
+
+void
+_assuan_log_printf (const char *format, ...)
+{
+  va_list arg_ptr;
+  FILE *fp;
+  const char *prf;
+  int save_errno = errno;
+  
+  fp = assuan_get_assuan_log_stream ();
+  prf = assuan_get_assuan_log_prefix ();
+  if (*prf)
+    fprintf (fp, "%s[%u]: ", prf, (unsigned int)getpid ());
+
+  va_start (arg_ptr, format);
+  vfprintf (fp, format, arg_ptr );
+  va_end (arg_ptr);
+  errno = save_errno;
+}
+
+
+/* Dump a possibly binary string (used for debugging).  Distinguish
+   ascii text from binary and print it accordingly.  This function
+   takes FILE pointer arg becuase logging may be enabled on a per
+   context basis. */
+void
+_assuan_log_print_buffer (FILE *fp, const void *buffer, size_t length)
+{
+  const unsigned char *s;
+  int n;
+
+  for (n=length,s=buffer; n; n--, s++)
+    if  ((!isascii (*s) || iscntrl (*s) || !isprint (*s)) && !(*s >= 0x80))
+      break;
+
+  s = buffer;
+  if (!n && *s != '[')
+    fwrite (buffer, length, 1, fp);
+  else
+    {
+#ifdef HAVE_FLOCKFILE
+      flockfile (fp);
+#endif
+      putc_unlocked ('[', fp);
+      if ( length > 16 && !full_logging)
+        {
+          for (n=0; n < 12; n++, s++)
+            fprintf (fp, " %02x", *s);
+          fprintf (fp, " ...(%d bytes skipped)", (int)length - 12);
+        }
+      else
+        {
+          for (n=0; n < length; n++, s++)
+            fprintf (fp, " %02x", *s);
+        }
+      putc_unlocked (' ', fp);
+      putc_unlocked (']', fp);
+#ifdef HAVE_FUNLOCKFILE
+      funlockfile (fp);
+#endif
+    }
+}
+
+/* Log a user supplied string.  Escapes non-printable before
+   printing.  */
+void
+_assuan_log_sanitized_string (const char *string)
+{
+  const unsigned char *s = (const unsigned char *) string;
+  FILE *fp = assuan_get_assuan_log_stream ();
+
+  if (! *s)
+    return;
+
+#ifdef HAVE_FLOCKFILE
+  flockfile (fp);
+#endif
+
+  for (; *s; s++)
+    {
+      int c = 0;
+
+      switch (*s)
+	{
+	case '\r':
+	  c = 'r';
+	  break;
+
+	case '\n':
+	  c = 'n';
+	  break;
+
+	case '\f':
+	  c = 'f';
+	  break;
+
+	case '\v':
+	  c = 'v';
+	  break;
+
+	case '\b':
+	  c = 'b';
+	  break;
+
+	default:
+	  if ((isascii (*s) && isprint (*s)) || (*s >= 0x80))
+	    putc_unlocked (*s, fp);
+	  else
+	    {
+	      putc_unlocked ('\\', fp);
+	      fprintf (fp, "x%02x", *s);
+	    }
+	}
+
+      if (c)
+	{
+	  putc_unlocked ('\\', fp);
+	  putc_unlocked (c, fp);
+	}
+    }
+
+#ifdef HAVE_FUNLOCKFILE
+  funlockfile (fp);
+#endif
+}
+
+
+
+#ifdef HAVE_W32_SYSTEM
+const char *
+_assuan_w32_strerror (int ec)
+{
+  static char strerr[256];
+  
+  if (ec == -1)
+    ec = (int)GetLastError ();
+  FormatMessage (FORMAT_MESSAGE_FROM_SYSTEM, NULL, ec,
+                 MAKELANGID (LANG_NEUTRAL, SUBLANG_DEFAULT),
+                 strerr, sizeof (strerr)-1, NULL);
+  return strerr;    
+}
+#endif /*HAVE_W32_SYSTEM*/
Index: libkdenetwork/libgpgme-copy/assuan/assuan-defs.h
===================================================================
--- libkdenetwork/libgpgme-copy/assuan/assuan-defs.h	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkdenetwork/libgpgme-copy/assuan/assuan-defs.h	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,5 +1,5 @@
 /* assuan-defs.c - Internal definitions to Assuan
- *	Copyright (C) 2001, 2002 Free Software Foundation, Inc.
+ *	Copyright (C) 2001, 2002, 2004, 2005 Free Software Foundation, Inc.
  *
  * This file is part of Assuan.
  *
@@ -15,53 +15,99 @@
  *
  * You should have received a copy of the GNU Lesser General Public
  * License along with this program; if not, write to the Free Software
- * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301, USA 
+ * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301,
+ * USA.
  */
 
 #ifndef ASSUAN_DEFS_H
 #define ASSUAN_DEFS_H
 
 #include <sys/types.h>
+#ifndef HAVE_W32_SYSTEM
 #include <sys/socket.h>
 #include <sys/un.h>
+#else
+#include <windows.h>
+#endif
 #include <unistd.h>
 
 #include "assuan.h"
 
+#ifndef HAVE_W32_SYSTEM
+#define DIRSEP_C '/'
+#else
+#define DIRSEP_C '\\'
+#endif
+
+#ifdef HAVE_W32_SYSTEM
+#define AF_LOCAL AF_UNIX
+/* We need to prefix the structure with a sockaddr_in header so we can
+   use it later for sendto and recvfrom. */
+struct sockaddr_un
+{
+  short          sun_family;
+  unsigned short sun_port;
+  struct         in_addr sun_addr;
+  char           sun_path[108-2-4]; /* Path name.  */
+};
+
+/* Not needed anymore because the current mingw32 defines this in
+   sys/types.h */
+/* typedef int ssize_t; */
+
+/* Missing W32 functions */
+int putc_unlocked (int c, FILE *stream);
+void * memrchr (const void *block, int c, size_t size);
+char * stpcpy (char *dest, const char *src);
+#endif
+
 #define LINELENGTH ASSUAN_LINELENGTH
 
+
 struct cmdtbl_s
 {
   const char *name;
-  int (*handler)(ASSUAN_CONTEXT, char *line);
+  int (*handler)(assuan_context_t, char *line);
 };
 
+
+/* A structure to dispatch I/O functions.  All these functions need to
+   return 0 on success and set ERRNO on failure.  */
 struct assuan_io
 {
   /* Routine to read from input_fd.  */
-  ssize_t (*read) (ASSUAN_CONTEXT, void *, size_t);
+  ssize_t (*readfnc) (assuan_context_t, void *, size_t);
   /* Routine to write to output_fd.  */
-  ssize_t (*write) (ASSUAN_CONTEXT, const void *, size_t);
+  ssize_t (*writefnc) (assuan_context_t, const void *, size_t);
   /* Send a file descriptor.  */
-  AssuanError (*sendfd) (ASSUAN_CONTEXT, int);
+  assuan_error_t (*sendfd) (assuan_context_t, int);
   /* Receive a file descriptor.  */
-  AssuanError (*receivefd) (ASSUAN_CONTEXT, int *);
-};  
+  assuan_error_t (*receivefd) (assuan_context_t, int *);
+};
 
+
+/* The context we use with most functions. */
 struct assuan_context_s
 {
-  AssuanError err_no;
+  assuan_error_t err_no;
   const char *err_str;
-  int os_errno;  /* last system error number used with certain error codes*/
+  int os_errno;       /* Last system error number used with certain
+                         error codes. */
 
+  /* Context specific flags (cf. assuan_flag_t). */
+  struct
+  {
+    unsigned int no_waitpid:1; /* See ASSUAN_NO_WAITPID. */
+  } flags;
+
   int confidential;
-  int is_server;  /* set if this is context belongs to a server */
+  int is_server;      /* Set if this is context belongs to a server */
   int in_inquire;
   char *hello_line;
-  char *okay_line; /* see assan_set_okay_line() */
-  
-  void *user_pointer;  /* for assuan_[gs]et_pointer () */
+  char *okay_line;    /* See assuan_set_okay_line() */
 
+  void *user_pointer;  /* For assuan_get_pointer and assuan_set_pointer (). */
+
   FILE *log_fp;
 
   struct {
@@ -70,7 +116,7 @@
     char line[LINELENGTH];
     int linelen;  /* w/o CR, LF - might not be the same as
                      strlen(line) due to embedded nuls. However a nul
-                     is always written at this pos */
+                     is always written at this pos. */
     struct {
       char line[LINELENGTH];
       int linelen ;
@@ -83,53 +129,70 @@
     struct {
       FILE *fp;
       char line[LINELENGTH];
-      int linelen; 
+      int linelen;
       int error;
-    } data; 
+    } data;
   } outbound;
 
   int pipe_mode;  /* We are in pipe mode, i.e. we can handle just one
-                     connection and must terminate then */
-  pid_t pid;	  /* In pipe mode, the pid of the child server process.  
-                     In socket mode, the pid of the server */
+                     connection and must terminate then. */
+  pid_t pid;	  /* The pid of the peer. */
   int listen_fd;  /* The fd we are listening on (used by socket servers) */
   int connected_fd; /* helper */
 
-  pid_t client_pid; /* for a socket server the PID of the client or -1
-                       if not available */
+  struct {
+    int   valid;   /* Whether this structure has valid information. */
+    pid_t pid;     /* The pid of the peer. */
+    uid_t uid;     /* The uid of the peer. */
+    gid_t gid;     /* The gid of the peer. */
+  } peercred;
 
   /* Used for Unix domain sockets.  */
   struct sockaddr_un myaddr;
   struct sockaddr_un serveraddr;
-  /* When reading from datagram sockets, we must read an entire
-     message at a time.  This means that we have to do our own
-     buffering to be able to get the semantics of read.  */
-  void *domainbuffer;
-  /* Offset of start of buffer.  */
-  int domainbufferoffset;
-  /* Bytes buffered.  */
-  int domainbuffersize;
-  /* Memory allocated.  */
-  int domainbufferallocated;
 
-  int *pendingfds;
-  int pendingfdscount;
+  /* Structure used for unix domain socket buffering.  FIXME: We don't
+     use datagrams anymore thus we could get away with a simpler
+     buffering approach. */
+  struct {
+    void *buffer;         /* Malloced buffer. */
+    int bufferallocated;  /* Memory allocated.  */
+    int bufferoffset;     /* Offset of start of buffer.  */
+    int buffersize;       /* Bytes buffered.  */
+    
+    int pendingfds[5];    /* Array to save received descriptors.  */
+    int pendingfdscount;  /* Number of received descriptors. */
+  } uds;
 
-  void (*deinit_handler)(ASSUAN_CONTEXT);  
-  int (*accept_handler)(ASSUAN_CONTEXT);
-  int (*finish_handler)(ASSUAN_CONTEXT);
+  void (*deinit_handler)(assuan_context_t);
+  int (*accept_handler)(assuan_context_t);
+  int (*finish_handler)(assuan_context_t);
 
   struct cmdtbl_s *cmdtbl;
   size_t cmdtbl_used; /* used entries */
   size_t cmdtbl_size; /* allocated size of table */
 
-  void (*bye_notify_fnc)(ASSUAN_CONTEXT);
-  void (*reset_notify_fnc)(ASSUAN_CONTEXT);
-  void (*cancel_notify_fnc)(ASSUAN_CONTEXT);
-  int  (*option_handler_fnc)(ASSUAN_CONTEXT,const char*, const char*);
-  void (*input_notify_fnc)(ASSUAN_CONTEXT, const char *);
-  void (*output_notify_fnc)(ASSUAN_CONTEXT, const char *);
+  void (*bye_notify_fnc)(assuan_context_t);
+  void (*reset_notify_fnc)(assuan_context_t);
+  void (*cancel_notify_fnc)(assuan_context_t);
+  int  (*option_handler_fnc)(assuan_context_t,const char*, const char*);
+  void (*input_notify_fnc)(assuan_context_t, const char *);
+  void (*output_notify_fnc)(assuan_context_t, const char *);
 
+  /* This function is called right after a command has been processed.
+     It may be used to command related cleanup.  */
+  void (*post_cmd_notify_fnc)(assuan_context_t, int);
+
+  /* If set, this is called right before logging an I/O line.  With
+     DIRECTION set to 1 it is called for an output oeration; 0 means
+     an input operation. If bit 0 is set in the return value, the
+     logging of the will be suppressed.  With bit 1 set, the entire
+     line will be ignored. */
+  unsigned int (*io_monitor)(assuan_context_t ctx,
+                             int direction,
+                             const char *line,
+                             size_t linelen);
+
   int input_fd;   /* set by INPUT command */
   int output_fd;  /* set by OUTPUT command */
 
@@ -138,29 +201,47 @@
 };
 
 /*-- assuan-pipe-server.c --*/
-int _assuan_new_context (ASSUAN_CONTEXT *r_ctx);
-void _assuan_release_context (ASSUAN_CONTEXT ctx);
+int _assuan_new_context (assuan_context_t *r_ctx);
+void _assuan_release_context (assuan_context_t ctx);
 
-/*-- assuan-domain-connect.c --*/
-/* Make a connection to the Unix domain socket NAME and return a new
-   Assuan context in CTX.  SERVER_PID is currently not used but may
-   become handy in the future.  */
-AssuanError _assuan_domain_init (ASSUAN_CONTEXT *r_ctx,
-				 int rendezvousfd,
-				 pid_t peer);
+/*-- assuan-uds.c --*/
+void _assuan_uds_close_fds (assuan_context_t ctx);
+void _assuan_uds_deinit (assuan_context_t ctx);
+void _assuan_init_uds_io (assuan_context_t ctx);
 
+
 /*-- assuan-handler.c --*/
-int _assuan_register_std_commands (ASSUAN_CONTEXT ctx);
+int _assuan_register_std_commands (assuan_context_t ctx);
 
 /*-- assuan-buffer.c --*/
-int _assuan_read_line (ASSUAN_CONTEXT ctx);
+assuan_error_t _assuan_read_line (assuan_context_t ctx);
 int _assuan_cookie_write_data (void *cookie, const char *buffer, size_t size);
 int _assuan_cookie_write_flush (void *cookie);
+assuan_error_t _assuan_write_line (assuan_context_t ctx, const char *prefix,
+                                   const char *line, size_t len);
 
 /*-- assuan-client.c --*/
-AssuanError _assuan_read_from_server (ASSUAN_CONTEXT ctx, int *okay, int *off);
+assuan_error_t _assuan_read_from_server (assuan_context_t ctx,
+                                         int *okay, int *off);
 
+/*-- assuan-error.c --*/
 
+
+/* Map error codes as used in this implementaion to the libgpg-error
+   codes. */
+assuan_error_t _assuan_error (int oldcode);
+
+/* Extrac the erro code from A.  This works for both the old and the
+   new style error codes. This needs to be whenever an error code is
+   compared. */
+#define err_code(a) ((a) & 0x00ffffff)
+
+/* Check whether A is the erro code for EOF.  We allow forold and new
+   style EOF error codes here.  */
+#define err_is_eof(a) ((a) == (-1) || err_code (a) == 16383)
+
+
+
 /*-- assuan-util.c --*/
 void *_assuan_malloc (size_t n);
 void *_assuan_calloc (size_t n, size_t m);
@@ -172,23 +253,71 @@
 #define xtryrealloc(a,b) _assuan_realloc((a),(b))
 #define xfree(a)         _assuan_free ((a))
 
-#define set_error(c,e,t) assuan_set_error ((c), ASSUAN_ ## e, (t))
+#define set_error(c,e,t) \
+        assuan_set_error ((c), _assuan_error (ASSUAN_ ## e), (t))
 
+#ifdef HAVE_W32_SYSTEM
+const char *_assuan_w32_strerror (int ec);
+#define w32_strerror(e) _assuan_w32_strerror ((e))
+#endif /*HAVE_W32_SYSTEM*/
+
+
+/*-- assuan-logging.c --*/
+void _assuan_set_default_log_stream (FILE *fp);
+
+void _assuan_log_printf (const char *format, ...)
+#if __GNUC__ > 2 || (__GNUC__ == 2 && __GNUC_MINOR__ >= 5 )
+ __attribute__ ((format (printf,1,2)))
+#endif
+     ;
 void _assuan_log_print_buffer (FILE *fp, const void *buffer, size_t  length);
 void _assuan_log_sanitized_string (const char *string);
 
+
 /*-- assuan-io.c --*/
-ssize_t _assuan_simple_read (ASSUAN_CONTEXT ctx, void *buffer, size_t size);
-ssize_t _assuan_simple_write (ASSUAN_CONTEXT ctx, const void *buffer,
+pid_t _assuan_waitpid (pid_t pid, int *status, int options);
+
+ssize_t _assuan_simple_read (assuan_context_t ctx, void *buffer, size_t size);
+ssize_t _assuan_simple_write (assuan_context_t ctx, const void *buffer,
 			      size_t size);
+ssize_t _assuan_simple_sendmsg (assuan_context_t ctx, struct msghdr *msg);
+ssize_t _assuan_simple_recvmsg (assuan_context_t ctx, struct msghdr *msg);
 
+/*-- assuan-socket.c --*/
+int _assuan_close (int fd);
+int _assuan_sock_new (int domain, int type, int proto);
+int _assuan_sock_bind (int sockfd, struct sockaddr *addr, int addrlen);
+int _assuan_sock_connect (int sockfd, struct sockaddr *addr, int addrlen);
+
 #ifdef HAVE_FOPENCOOKIE
 /* We have to implement funopen in terms of glibc's fopencookie. */
-FILE *funopen(const void *cookie, cookie_read_function_t *readfn,
-              cookie_write_function_t *writefn,
-              cookie_seek_function_t *seekfn,
-              cookie_close_function_t *closefn);
+FILE *_assuan_funopen(void *cookie,
+                      cookie_read_function_t *readfn,
+                      cookie_write_function_t *writefn,
+                      cookie_seek_function_t *seekfn,
+                      cookie_close_function_t *closefn);
+#define funopen(a,r,w,s,c) _assuan_funopen ((a), (r), (w), (s), (c))
 #endif /*HAVE_FOPENCOOKIE*/
 
+/* Prototypes for replacement functions.  */
+#ifndef HAVE_MEMRCHR
+void *memrchr (const void *block, int c, size_t size);
+#endif
+#ifndef HAVE_STPCPY
+char *stpcpy (char *dest, const char *src);
+#endif
+#ifndef HAVE_SETENV
+#define setenv _assuan_setenv
+#define unsetenv _assuan_unsetenv
+#define clearenv _assuan_clearenv
+int setenv (const char *name, const char *value, int replace);
+#endif
+#ifndef HAVE_PUTC_UNLOCKED
+int putc_unlocked (int c, FILE *stream);
+#endif
+
+#define DIM(v)		     (sizeof(v)/sizeof((v)[0]))
+#define DIMof(type,member)   DIM(((type *)0)->member)
+
+
 #endif /*ASSUAN_DEFS_H*/
-
Index: libkdenetwork/libgpgme-copy/assuan/assuan-socket.c
===================================================================
--- libkdenetwork/libgpgme-copy/assuan/assuan-socket.c	(.../tags/KDE/3.5.6/kdepim)	(wersja 0)
+++ libkdenetwork/libgpgme-copy/assuan/assuan-socket.c	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -0,0 +1,148 @@
+/* assuan-socket.c
+ * Copyright (C) 2004, 2005 Free Software Foundation, Inc.
+ *
+ * This file is part of Assuan.
+ *
+ * Assuan is free software; you can redistribute it and/or modify it
+ * under the terms of the GNU Lesser General Public License as
+ * published by the Free Software Foundation; either version 2.1 of
+ * the License, or (at your option) any later version.
+ *
+ * Assuan is distributed in the hope that it will be useful, but
+ * WITHOUT ANY WARRANTY; without even the implied warranty of
+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
+ * Lesser General Public License for more details.
+ *
+ * You should have received a copy of the GNU Lesser General Public
+ * License along with this program; if not, write to the Free Software
+ * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301,
+ * USA. 
+ */
+
+#include <config.h>
+#include <stdio.h>
+#ifdef HAVE_W32_SYSTEM
+#include <windows.h>
+#include <io.h>
+#else
+#include <sys/types.h>
+#include <sys/socket.h>
+#endif
+#include "assuan-defs.h"
+
+/* Hacks for Slowaris.  */
+#ifndef PF_LOCAL
+# ifdef PF_UNIX
+#  define PF_LOCAL PF_UNIX
+# else
+#  define PF_LOCAL AF_UNIX
+# endif
+#endif
+#ifndef AF_LOCAL
+# define AF_LOCAL AF_UNIX
+#endif
+
+int
+_assuan_close (int fd)
+{
+#ifndef HAVE_W32_SYSTEM
+  return close (fd);
+#else
+  int rc = closesocket (fd);
+  if (rc && WSAGetLastError () == WSAENOTSOCK)
+      rc = close (fd);
+  return rc;
+#endif
+}
+
+
+int
+_assuan_sock_new (int domain, int type, int proto)
+{
+#ifndef HAVE_W32_SYSTEM
+  return socket (domain, type, proto);
+#else
+  if (domain == AF_UNIX || domain == AF_LOCAL)
+    domain = AF_INET;
+  return socket (domain, type, proto);
+#endif
+}
+
+
+int
+_assuan_sock_connect (int sockfd, struct sockaddr * addr, int addrlen)
+{
+#ifndef HAVE_W32_SYSTEM
+  return connect (sockfd, addr, addrlen);
+#else
+  struct sockaddr_in myaddr;
+  struct sockaddr_un * unaddr;
+  FILE * fp;
+  int port = 0;
+  
+  unaddr = (struct sockaddr_un *)addr;
+  fp = fopen (unaddr->sun_path, "rb");
+  if (!fp)
+      return -1;
+  fscanf (fp, "%d", &port);
+  fclose (fp);
+  /* XXX: set errno in this case */
+  if (port < 0 || port > 65535)
+      return -1;
+  
+  myaddr.sin_family = AF_INET;
+  myaddr.sin_port = port; 
+  myaddr.sin_addr.s_addr = htonl (INADDR_LOOPBACK);
+
+  /* we need this later. */
+  unaddr->sun_family = myaddr.sin_family;
+  unaddr->sun_port = myaddr.sin_port;
+  unaddr->sun_addr.s_addr = myaddr.sin_addr.s_addr;
+  
+  return connect (sockfd, (struct sockaddr *)&myaddr, sizeof myaddr);
+#endif
+}
+
+
+int
+_assuan_sock_bind (int sockfd, struct sockaddr * addr, int addrlen)
+{
+#ifndef HAVE_W32_SYSTEM
+  return bind (sockfd, addr, addrlen);
+#else
+  if (addr->sa_family == AF_LOCAL || addr->sa_family == AF_UNIX)
+    {
+      struct sockaddr_in myaddr;
+      struct sockaddr_un * unaddr;
+      FILE * fp;
+      int len = sizeof myaddr;
+      int rc;
+
+      myaddr.sin_port = 0;
+      myaddr.sin_family = AF_INET;
+      myaddr.sin_addr.s_addr = htonl (INADDR_LOOPBACK);
+
+      rc = bind (sockfd, (struct sockaddr *)&myaddr, len);
+      if (rc)
+        return rc;
+      rc = getsockname (sockfd, (struct sockaddr *)&myaddr, &len);
+      if (rc)
+        return rc;
+      unaddr = (struct sockaddr_un *)addr;
+      fp = fopen (unaddr->sun_path, "wb");
+      if (!fp)
+        return -1;
+      fprintf (fp, "%d", myaddr.sin_port);
+      fclose (fp);
+
+      /* we need this later. */
+      unaddr->sun_family = myaddr.sin_family;
+      unaddr->sun_port = myaddr.sin_port;
+      unaddr->sun_addr.s_addr = myaddr.sin_addr.s_addr;
+      
+      return 0;
+    }
+  return bind (sockfd, addr, addrlen);
+#endif
+}
+
Index: libkdenetwork/libgpgme-copy/assuan/assuan-connect.c
===================================================================
--- libkdenetwork/libgpgme-copy/assuan/assuan-connect.c	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkdenetwork/libgpgme-copy/assuan/assuan-connect.c	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -15,7 +15,8 @@
  *
  * You should have received a copy of the GNU Lesser General Public
  * License along with this program; if not, write to the Free Software
- * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301, USA 
+ * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301,
+ * USA. 
  */
 
 #ifdef HAVE_CONFIG_H
@@ -29,13 +30,15 @@
 #include <unistd.h>
 #include <errno.h>
 #include <sys/types.h>
+#ifndef HAVE_W32_SYSTEM
 #include <sys/wait.h>
+#endif
 
 #include "assuan-defs.h"
 
 /* Disconnect and release the context CTX. */
 void
-assuan_disconnect (ASSUAN_CONTEXT ctx)
+assuan_disconnect (assuan_context_t ctx)
 {
   if (ctx)
     {
@@ -47,8 +50,30 @@
     }
 }
 
+/* Return the PID of the peer or -1 if not known. This function works
+   in some situations where assuan_get_ucred fails. */
 pid_t
-assuan_get_pid (ASSUAN_CONTEXT ctx)
+assuan_get_pid (assuan_context_t ctx)
 {
-  return ctx ? ctx->pid : -1;
+  return (ctx && ctx->pid)? ctx->pid : -1;
 }
+
+
+/* Return user credentials. PID, UID and GID amy be gived as NULL if
+   you are not interested in this value.  For getting the pid of the
+   peer the assuan_get_pid is usually better suited. */
+assuan_error_t
+assuan_get_peercred (assuan_context_t ctx, pid_t *pid, uid_t *uid, gid_t *gid)
+{
+  if (!ctx)
+    return _assuan_error (ASSUAN_Invalid_Value);
+  if (!ctx->peercred.valid)
+    return _assuan_error (ASSUAN_General_Error);
+  if (pid)
+    *pid = ctx->peercred.pid;
+  if (uid)
+    *uid = ctx->peercred.uid;
+  if (gid)
+    *gid = ctx->peercred.gid;
+  return 0;
+}
Index: libkdenetwork/libgpgme-copy/assuan/assuan-uds.c
===================================================================
--- libkdenetwork/libgpgme-copy/assuan/assuan-uds.c	(.../tags/KDE/3.5.6/kdepim)	(wersja 0)
+++ libkdenetwork/libgpgme-copy/assuan/assuan-uds.c	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -0,0 +1,311 @@
+/* assuan-uds.c - Assuan unix domain socket utilities
+ * Copyright (C) 2006 Free Software Foundation, Inc.
+ *
+ * This file is part of Assuan.
+ *
+ * Assuan is free software; you can redistribute it and/or modify it
+ * under the terms of the GNU Lesser General Public License as
+ * published by the Free Software Foundation; either version 2.1 of
+ * the License, or (at your option) any later version.
+ *
+ * Assuan is distributed in the hope that it will be useful, but
+ * WITHOUT ANY WARRANTY; without even the implied warranty of
+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
+ * Lesser General Public License for more details.
+ *
+ * You should have received a copy of the GNU Lesser General Public
+ * License along with this program; if not, write to the Free Software
+ * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301,
+ * USA. 
+ */
+
+#ifdef HAVE_CONFIG_H
+#include <config.h>
+#endif
+
+#include <stdlib.h>
+#include <stddef.h>
+#include <stdio.h>
+#include <errno.h>
+#include <sys/types.h>
+#ifndef HAVE_W32_SYSTEM
+#include <sys/socket.h>
+#include <sys/un.h>
+#else
+#include <windows.h>
+#endif
+#if HAVE_SYS_UIO_H
+#include <sys/uio.h>
+#endif
+#include <unistd.h>
+#include <fcntl.h>
+#include <string.h>
+#include <assert.h>
+
+#include "assuan-defs.h"
+
+#ifdef USE_DESCRIPTOR_PASSING
+/* Provide replacement for missing CMSG maccros.  We assume that
+   size_t matches the alignment requirement. */
+#define MY_ALIGN(n) ((((n))+ sizeof(size_t)-1) & (size_t)~(sizeof(size_t)-1))
+#ifndef CMSG_SPACE
+#define CMSG_SPACE(n) (MY_ALIGN(sizeof(struct cmsghdr)) + MY_ALIGN((n)))
+#endif 
+#ifndef CMSG_LEN
+#define CMSG_LEN(n) (MY_ALIGN(sizeof(struct cmsghdr)) + (n))
+#endif 
+#ifndef CMSG_FIRSTHDR
+#define CMSG_FIRSTHDR(mhdr) \
+  ((size_t)(mhdr)->msg_controllen >= sizeof (struct cmsghdr)		      \
+   ? (struct cmsghdr*) (mhdr)->msg_control : (struct cmsghdr*)NULL)
+#endif
+#ifndef CMSG_DATA
+#define CMSG_DATA(cmsg) ((unsigned char*)((struct cmsghdr*)(cmsg)+1))
+#endif
+#endif /*USE_DESCRIPTOR_PASSING*/
+
+
+/* Read from a unix domain socket using sendmsg. 
+
+   FIXME: We don't need the buffering. It is a leftover from the time
+   when we used datagrams. */
+static ssize_t
+uds_reader (assuan_context_t ctx, void *buf, size_t buflen)
+{
+  int len = ctx->uds.buffersize;
+
+#ifndef HAVE_W32_SYSTEM
+  if (!ctx->uds.bufferallocated)
+    {
+      ctx->uds.buffer = xtrymalloc (2048);
+      if (!ctx->uds.buffer)
+        return _assuan_error (ASSUAN_Out_Of_Core);
+      ctx->uds.bufferallocated = 2048;
+    }
+
+  while (!len)  /* No data is buffered.  */
+    {
+      struct msghdr msg;
+      struct iovec iovec;
+#ifdef USE_DESCRIPTOR_PASSING
+      union {
+        struct cmsghdr cm;
+        char control[CMSG_SPACE(sizeof (int))];
+      } control_u;
+      struct cmsghdr *cmptr;
+#endif /*USE_DESCRIPTOR_PASSING*/
+
+      memset (&msg, 0, sizeof (msg));
+
+      msg.msg_name = NULL;
+      msg.msg_namelen = 0;
+      msg.msg_iov = &iovec;
+      msg.msg_iovlen = 1;
+      iovec.iov_base = ctx->uds.buffer;
+      iovec.iov_len = ctx->uds.bufferallocated;
+#ifdef USE_DESCRIPTOR_PASSING
+      msg.msg_control = control_u.control;
+      msg.msg_controllen = sizeof (control_u.control);
+#endif
+
+      len = _assuan_simple_recvmsg (ctx, &msg);
+      if (len < 0)
+        return -1;
+
+      ctx->uds.buffersize = len;
+      ctx->uds.bufferoffset = 0;
+
+#ifdef USE_DESCRIPTOR_PASSING
+      cmptr = CMSG_FIRSTHDR (&msg);
+      if (cmptr && cmptr->cmsg_len == CMSG_LEN (sizeof(int)))
+        {
+          if (cmptr->cmsg_level != SOL_SOCKET
+              || cmptr->cmsg_type != SCM_RIGHTS)
+            _assuan_log_printf ("unexpected ancillary data received\n");
+          else
+            {
+              int fd = *((int*)CMSG_DATA (cmptr));
+
+              if (ctx->uds.pendingfdscount >= DIM (ctx->uds.pendingfds))
+                {
+                  _assuan_log_printf ("too many descriptors pending - "
+                                      "closing received descriptor %d\n", fd);
+                  _assuan_close (fd);
+                }
+              else
+                ctx->uds.pendingfds[ctx->uds.pendingfdscount++] = fd;
+            }
+	}
+#endif /*USE_DESCRIPTOR_PASSING*/
+    }
+
+#else /*HAVE_W32_SYSTEM*/
+
+  len = recvfrom (ctx->inbound.fd, buf, buflen, 0, NULL, NULL);
+
+#endif /*HAVE_W32_SYSTEM*/
+
+  /* Return some data to the user.  */
+
+  if (len > buflen) /* We have more than the user requested.  */
+    len = buflen;
+
+  memcpy (buf, ctx->uds.buffer + ctx->uds.bufferoffset, len);
+  ctx->uds.buffersize -= len;
+  assert (ctx->uds.buffersize >= 0);
+  ctx->uds.bufferoffset += len;
+  assert (ctx->uds.bufferoffset <= ctx->uds.bufferallocated);
+
+  return len;
+}
+
+
+/* Write to the domain server.  */
+static ssize_t
+uds_writer (assuan_context_t ctx, const void *buf, size_t buflen)
+{
+#ifndef HAVE_W32_SYSTEM
+  struct msghdr msg;
+  struct iovec iovec;
+  ssize_t len;
+
+  memset (&msg, 0, sizeof (msg));
+
+  msg.msg_name = NULL;
+  msg.msg_namelen = 0;
+  msg.msg_iovlen = 1;
+  msg.msg_iov = &iovec;
+  iovec.iov_base = (void*)buf;
+  iovec.iov_len = buflen;
+
+  len = _assuan_simple_sendmsg (ctx, &msg);
+#else /*HAVE_W32_SYSTEM*/
+  int len;
+  
+  len = sendto (ctx->outbound.fd, buf, buflen, 0,
+                (struct sockaddr *)&ctx->serveraddr,
+                sizeof (struct sockaddr_in));
+#endif /*HAVE_W32_SYSTEM*/
+  return len;
+}
+
+
+static assuan_error_t
+uds_sendfd (assuan_context_t ctx, int fd)
+{
+#ifdef USE_DESCRIPTOR_PASSING
+  struct msghdr msg;
+  struct iovec iovec;
+  union {
+    struct cmsghdr cm;
+    char control[CMSG_SPACE(sizeof (int))];
+  } control_u;
+  struct cmsghdr *cmptr;
+  int len;
+  char buffer[80];
+
+  /* We need to send some real data so that a read won't return 0
+     which will be taken as an EOF.  It also helps with debugging. */ 
+  snprintf (buffer, sizeof(buffer)-1, "# descriptor %d is in flight\n", fd);
+  buffer[sizeof(buffer)-1] = 0;
+
+  memset (&msg, 0, sizeof (msg));
+
+  msg.msg_name = NULL;
+  msg.msg_namelen = 0;
+  msg.msg_iovlen = 1;
+  msg.msg_iov = &iovec;
+  iovec.iov_base = buffer;
+  iovec.iov_len = strlen (buffer);
+
+  msg.msg_control = control_u.control;
+  msg.msg_controllen = sizeof (control_u.control);
+  cmptr = CMSG_FIRSTHDR (&msg);
+  cmptr->cmsg_len = CMSG_LEN(sizeof(int));
+  cmptr->cmsg_level = SOL_SOCKET;
+  cmptr->cmsg_type = SCM_RIGHTS;
+  *((int*)CMSG_DATA (cmptr)) = fd;
+
+  len = _assuan_simple_sendmsg (ctx, &msg);
+  if (len < 0)
+    {
+      _assuan_log_printf ("uds_sendfd: %s\n", strerror (errno));
+      return _assuan_error (ASSUAN_Write_Error);
+    }
+  else
+    return 0;
+#else
+  return _assuan_error (ASSUAN_Not_Implemented);
+#endif
+}
+
+
+static assuan_error_t
+uds_receivefd (assuan_context_t ctx, int *fd)
+{
+#ifdef USE_DESCRIPTOR_PASSING
+  int i;
+
+  if (!ctx->uds.pendingfdscount)
+    {
+      _assuan_log_printf ("no pending file descriptors!\n");
+      return _assuan_error (ASSUAN_General_Error);
+    }
+  assert (ctx->uds.pendingfdscount <= DIM(ctx->uds.pendingfds));
+
+  *fd = ctx->uds.pendingfds[0];
+  for (i=1; i < ctx->uds.pendingfdscount; i++)
+    ctx->uds.pendingfds[i-1] = ctx->uds.pendingfds[i];
+  ctx->uds.pendingfdscount--;
+
+  return 0;
+#else
+  return _assuan_error (ASSUAN_Not_Implemented);
+#endif
+}
+
+
+/* Close all pending fds. */
+void
+_assuan_uds_close_fds (assuan_context_t ctx)
+{
+  int i;
+
+  for (i = 0; i < ctx->uds.pendingfdscount; i++)
+    _assuan_close (ctx->uds.pendingfds[i]);
+  ctx->uds.pendingfdscount = 0;
+}
+
+/* Deinitialize the unix domain socket I/O functions.  */
+void
+_assuan_uds_deinit (assuan_context_t ctx)
+{
+  /* First call the finish_handler which should close descriptors etc. */
+  ctx->finish_handler (ctx);
+
+  if (ctx->uds.buffer)
+    {
+      assert (ctx->uds.bufferallocated);
+      ctx->uds.bufferallocated = 0;
+      xfree (ctx->uds.buffer);
+    }
+
+  _assuan_uds_close_fds (ctx);
+}
+
+
+/* Helper function to initialize a context for domain I/O. */
+void
+_assuan_init_uds_io (assuan_context_t ctx)
+{
+  static struct assuan_io io = { uds_reader, uds_writer,
+				 uds_sendfd, uds_receivefd };
+
+  ctx->io = &io;
+  ctx->uds.buffer = 0;
+  ctx->uds.bufferoffset = 0;
+  ctx->uds.buffersize = 0;
+  ctx->uds.bufferallocated = 0;
+  ctx->uds.pendingfdscount = 0;
+}
+
Index: libkdenetwork/libgpgme-copy/assuan/mkerrors
===================================================================
--- libkdenetwork/libgpgme-copy/assuan/mkerrors	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkdenetwork/libgpgme-copy/assuan/mkerrors	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,7 +1,7 @@
 #!/bin/sh
 # mkerrors - Extract error strings from assuan.h
 #            and create C source for assuan_strerror
-#	Copyright (C) 2001, 2002 Free Software Foundation, Inc.
+#	Copyright (C) 2001, 2002, 2006 Free Software Foundation, Inc.
 #
 # This file is part of Assuan.
 #
@@ -21,11 +21,115 @@
 
 cat <<EOF
 /* Generated automatically by mkerrors */
-/* Do not edit! */
+/* Do not edit!  See mkerrors for copyright notice. */
 
+#ifdef HAVE_CONFIG_H
+#include <config.h>
+#endif
+
 #include <stdio.h>
+#include <assert.h>
+#include <errno.h>
+
+#undef _ASSUAN_IN_LIBASSUAN /* undef to get all error codes. */
 #include "assuan.h"
 
+/* If true the modern gpg-error style error codes are used in the
+   API. */
+static unsigned int err_source;
+
+/* Enable gpg-error style error codes.  ERRSOURCE is one of gpg-error
+   sources.  Note, that this function is not thread-safe and should be
+   used right at startup. Switching back to the old style mode is not
+   supported. */
+void
+assuan_set_assuan_err_source (int errsource)
+{
+  errsource &= 0xff;
+  err_source = errsource? errsource : 31 /*GPG_ERR_SOURCE_ANY*/;
+}
+
+
+/* Helper to map old style Assuan error codes to gpg-error codes.
+   This is used internally to keep an compatible ABI. */
+assuan_error_t
+_assuan_error (int oldcode)
+{
+  unsigned int n;
+
+  if (!err_source)
+    return (oldcode & 0x00ffffff); /* Make sure that the gpg-error
+                                      source part is cleared. */
+
+  switch (oldcode)
+    {
+    case ASSUAN_General_Error:           n = 257; break;
+    case ASSUAN_Accept_Failed:           n = 258; break;
+    case ASSUAN_Connect_Failed:          n = 259; break;
+    case ASSUAN_Invalid_Response:        n = 260; break;
+    case ASSUAN_Invalid_Value:           n = 261; break;
+    case ASSUAN_Line_Not_Terminated:     n = 262; break;
+    case ASSUAN_Line_Too_Long:           n = 263; break;
+    case ASSUAN_Nested_Commands:         n = 264; break;
+    case ASSUAN_No_Data_Callback:        n = 265; break;
+    case ASSUAN_No_Inquire_Callback:     n = 266; break;
+    case ASSUAN_Not_A_Server:            n = 267; break;
+    case ASSUAN_Not_Implemented:         n =  69; break;
+    case ASSUAN_Parameter_Conflict:      n = 280; break;
+    case ASSUAN_Problem_Starting_Server: n = 269; break;
+    case ASSUAN_Server_Fault:            n =  80; break;
+    case ASSUAN_Syntax_Error:            n = 276; break;
+    case ASSUAN_Too_Much_Data:           n = 273; break;
+    case ASSUAN_Unexpected_Command:      n = 274; break;
+    case ASSUAN_Unknown_Command:         n = 275; break;
+    case ASSUAN_Canceled:                n = 277; break;
+    case ASSUAN_No_Secret_Key:           n =  17; break;
+    case ASSUAN_Not_Confirmed:           n = 114; break;
+
+    case ASSUAN_Read_Error:
+      switch (errno)
+        {
+        case 0: n = 16381; /*GPG_ERR_MISSING_ERRNO*/  break;
+        default: n = 270;  /*GPG_ERR_ASS_READ_ERROR*/ break;
+        }
+      break;
+
+    case ASSUAN_Write_Error:
+      switch (errno)
+        {
+        case 0: n = 16381; /*GPG_ERR_MISSING_ERRNO*/  break;
+        default: n = 271;  /*GPG_ERR_ASS_WRITE_ERROR*/ break;
+        }
+      break;
+      
+    case ASSUAN_Out_Of_Core:
+      switch (errno)
+        {
+        case 0:  /* Should not happen but a user might have provided
+                    an incomplete implemented malloc function.  Give
+                    him a chance to correct this fault but make sure
+                    an error is indeed returned. */
+          n = 16381; /*GPG_ERR_MISSING_ERRNO*/
+          break;
+        case ENOMEM: n = (1 << 15) | 86; break;
+        default:  
+          n = 16382; /*GPG_ERR_UNKNOWN_ERRNO*/
+          break;
+        }
+      break;
+
+    case -1: n = 16383 /*GPG_ERR_EOF*/; break;
+
+    default:
+      n = 257; 
+      break;
+    }
+
+  return ((err_source << 24) | (n & 0x00ffffff));
+
+}
+
+
 /**
  * assuan_strerror:
  * @err:  Error code 
@@ -37,7 +141,7 @@
  * Return value: String with the error description.
  **/
 const char *
-assuan_strerror (AssuanError err)
+assuan_strerror (assuan_error_t err)
 {
   const char *s;
   static char buf[50];
@@ -47,10 +151,10 @@
 EOF
 
 awk '
-/ASSUAN_No_Error/    { okay=1 }
-!okay              {next}
-/}/                { exit 0 }
-/ASSUAN_[A-Za-z_]*/ { print_code($1) }
+/ASSUAN_No_Error/        { okay=1 }
+!okay                    {next}
+/^#define[ ]+ASSUAN_[A-Za-z_]*/ { print_code($2) }
+/ASSUAN_USER_ERROR_LAST/ { exit 0 }
 
 
 function print_code( s )
@@ -62,27 +166,63 @@
 '
 
 cat <<EOF
+  case -1: s = "EOF (-1)"; break;
     default: 
       {
-        unsigned int source, code;
+        unsigned int source, code, n;
 
         source = ((err >> 24) & 0xff);
         code = (err & 0x00ffffff);
-        if (source) /* Assume this is an libgpg-error. */
-          sprintf (buf, "ec=%u.%u", source, code ); 
+        if (source) 
+          {
+            /* Assume this is an libgpg-error and try to map the codes
+               back. */
+            switch (code)
+              {
+              case 257: n = ASSUAN_General_Error          ; break;
+              case 258: n = ASSUAN_Accept_Failed          ; break;
+              case 259: n = ASSUAN_Connect_Failed         ; break;
+              case 260: n = ASSUAN_Invalid_Response       ; break;
+              case 261: n = ASSUAN_Invalid_Value          ; break;
+              case 262: n = ASSUAN_Line_Not_Terminated    ; break;
+              case 263: n = ASSUAN_Line_Too_Long          ; break;
+              case 264: n = ASSUAN_Nested_Commands        ; break;
+              case 265: n = ASSUAN_No_Data_Callback       ; break;
+              case 266: n = ASSUAN_No_Inquire_Callback    ; break;
+              case 267: n = ASSUAN_Not_A_Server           ; break;
+              case  69: n = ASSUAN_Not_Implemented        ; break;
+              case 280: n = ASSUAN_Parameter_Conflict     ; break;
+              case 269: n = ASSUAN_Problem_Starting_Server; break;
+              case 270: n = ASSUAN_Read_Error             ; break;
+              case 271: n = ASSUAN_Write_Error            ; break;
+              case  80: n = ASSUAN_Server_Fault           ; break;
+              case 276: n = ASSUAN_Syntax_Error           ; break;
+              case 273: n = ASSUAN_Too_Much_Data          ; break;
+              case 274: n = ASSUAN_Unexpected_Command     ; break;
+              case 275: n = ASSUAN_Unknown_Command        ; break;
+              case 277: n = ASSUAN_Canceled               ; break;
+              case 114: n = ASSUAN_Not_Confirmed          ; break;
+              case ((1<<15)|86): n = ASSUAN_Out_Of_Core   ; break;
+              default:  n = 0; break;
+              }
+            if (n)
+              s = assuan_strerror (n);
+            else
+              {
+                sprintf (buf, "ec=%u.%u", source, code ); 
+                s=buf;
+              }
+          }
         else
-          sprintf (buf, "ec=%d", err ); 
-        s=buf; break;
+          {
+            sprintf (buf, "ec=%d", err ); 
+            s=buf;
+          }
       }
+      break;
     }
 
   return s;
 }
 
 EOF
-
-
-
-# Newlines after EOF needed on some OSsen
-
-
Index: libkdenetwork/libgpgme-copy/assuan/assuan-socket-server.c
===================================================================
--- libkdenetwork/libgpgme-copy/assuan/assuan-socket-server.c	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkdenetwork/libgpgme-copy/assuan/assuan-socket-server.c	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -15,33 +15,52 @@
  *
  * You should have received a copy of the GNU Lesser General Public
  * License along with this program; if not, write to the Free Software
- * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301, USA 
+ * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301,
+ * USA. 
  */
 
 #include <config.h>
 #include <stdlib.h>
 #include <stdio.h>
 #include <errno.h>
+#include <unistd.h>
 #include <sys/types.h>
+#ifndef HAVE_W32_SYSTEM
 #include <sys/socket.h>
 #include <sys/un.h>
-#include <unistd.h>
+#else
+#include <windows.h>
+#endif
 
 #include "assuan-defs.h"
 
+static struct assuan_io io = { _assuan_simple_read,
+			       _assuan_simple_write };
+
+
 static int
-accept_connection_bottom (ASSUAN_CONTEXT ctx)
+accept_connection_bottom (assuan_context_t ctx)
 {
   int fd = ctx->connected_fd;
 
-  ctx->client_pid = (pid_t)-1;
+  ctx->peercred.valid = 0;
 #ifdef HAVE_SO_PEERCRED
   {
     struct ucred cr; 
-    int cl = sizeof cr;
+    socklen_t cl = sizeof cr;
 
-    if ( !getsockopt (fd, SOL_SOCKET, SO_PEERCRED, &cr, &cl) ) 
-      ctx->client_pid = cr.pid;
+    if ( !getsockopt (fd, SOL_SOCKET, SO_PEERCRED, &cr, &cl))
+      {
+         ctx->peercred.pid = cr.pid;
+         ctx->peercred.uid = cr.uid;
+         ctx->peercred.gid = cr.gid;
+         ctx->peercred.valid = 1;
+
+         /* This overrides any already set PID if the function returns
+            a valid one. */
+         if (cr.pid != (pid_t)-1 && cr.pid) 
+           ctx->pid = cr.pid;
+      }
   }
 #endif
 
@@ -62,18 +81,17 @@
 
 
 static int
-accept_connection (ASSUAN_CONTEXT ctx)
+accept_connection (assuan_context_t ctx)
 {
   int fd;
   struct sockaddr_un clnt_addr;
-  size_t len = sizeof clnt_addr;
+  socklen_t len = sizeof clnt_addr;
 
-  ctx->client_pid = (pid_t)-1;
   fd = accept (ctx->listen_fd, (struct sockaddr*)&clnt_addr, &len );
   if (fd == -1)
     {
       ctx->os_errno = errno;
-      return ASSUAN_Accept_Failed;
+      return _assuan_error (ASSUAN_Accept_Failed);
     }
 
   ctx->connected_fd = fd;
@@ -81,11 +99,11 @@
 }
 
 static int
-finish_connection (ASSUAN_CONTEXT ctx)
+finish_connection (assuan_context_t ctx)
 {
   if (ctx->inbound.fd != -1)
     {
-      close (ctx->inbound.fd);
+      _assuan_close (ctx->inbound.fd);
     }
   ctx->inbound.fd = -1;
   ctx->outbound.fd = -1;
@@ -94,76 +112,72 @@
 
 
 static void
-deinit_socket_server (ASSUAN_CONTEXT ctx)
+deinit_socket_server (assuan_context_t ctx)
 {
   finish_connection (ctx);
 }
 
-static struct assuan_io io = { _assuan_simple_read,
-			       _assuan_simple_write };
-
 /* Initialize a server for the socket LISTEN_FD which has already be
    put into listen mode */
 int
-assuan_init_socket_server (ASSUAN_CONTEXT *r_ctx, int listen_fd)
+assuan_init_socket_server (assuan_context_t *r_ctx, int listen_fd)
 {
-  ASSUAN_CONTEXT ctx;
-  int rc;
+  return assuan_init_socket_server_ext (r_ctx, listen_fd, 0);
+}
 
-  *r_ctx = NULL;
-  ctx = xtrycalloc (1, sizeof *ctx);
-  if (!ctx)
-    return ASSUAN_Out_Of_Core;
-  ctx->is_server = 1;
-  ctx->input_fd = -1;
-  ctx->output_fd = -1;
+/* Initialize a server using the already accepted socket FD.  This
+   fucntion is deprecated. */
+int
+assuan_init_connected_socket_server (assuan_context_t *r_ctx, int fd)
+{
+  return assuan_init_socket_server_ext (r_ctx, fd, 2);
+}
 
-  ctx->inbound.fd = -1;
-  ctx->outbound.fd = -1;
 
-  ctx->listen_fd = listen_fd;
-  ctx->connected_fd = -1;
-  ctx->deinit_handler = deinit_socket_server;
-  ctx->accept_handler = accept_connection;
-  ctx->finish_handler = finish_connection;
-
-  ctx->io = &io;
-
-  rc = _assuan_register_std_commands (ctx);
-  if (rc)
-    xfree (ctx);
-  else
-    *r_ctx = ctx;
-  return rc;
-}
-
-/* Initialize a server using the already accepted socket FD. */
+/* 
+   Flag bits: 0 - use sendmsg/recvmsg to allow descriptor passing
+              1 - FD has already been accepted.
+*/
 int
-assuan_init_connected_socket_server (ASSUAN_CONTEXT *r_ctx, int fd)
+assuan_init_socket_server_ext (assuan_context_t *r_ctx, int fd,
+                               unsigned int flags)
 {
-  ASSUAN_CONTEXT ctx;
+  assuan_context_t ctx;
   int rc;
 
   *r_ctx = NULL;
   ctx = xtrycalloc (1, sizeof *ctx);
   if (!ctx)
-    return ASSUAN_Out_Of_Core;
+    return _assuan_error (ASSUAN_Out_Of_Core);
   ctx->is_server = 1;
-  ctx->pipe_mode = 1; /* we want a second accept to indicate EOF */
+  if ((flags & 2))
+    ctx->pipe_mode = 1; /* We want a second accept to indicate EOF. */
   ctx->input_fd = -1;
   ctx->output_fd = -1;
 
   ctx->inbound.fd = -1;
   ctx->outbound.fd = -1;
 
+  if ((flags & 2))
+    {
+      ctx->listen_fd = -1;
+      ctx->connected_fd = fd;
+    }
+  else
+    {
+      ctx->listen_fd = fd;
+      ctx->connected_fd = -1;
+    }
+  ctx->deinit_handler = (flags & 1)? _assuan_uds_deinit:deinit_socket_server;
+  ctx->accept_handler = ((flags & 2)
+                         ? accept_connection_bottom 
+                         : accept_connection);
+  ctx->finish_handler = finish_connection;
+
   ctx->io = &io;
+  if ((flags & 1))
+    _assuan_init_uds_io (ctx);
 
-  ctx->listen_fd = -1;
-  ctx->connected_fd = fd;
-  ctx->deinit_handler = deinit_socket_server;
-  ctx->accept_handler = accept_connection_bottom;
-  ctx->finish_handler = finish_connection;
-
   rc = _assuan_register_std_commands (ctx);
   if (rc)
     xfree (ctx);
@@ -171,5 +185,3 @@
     *r_ctx = ctx;
   return rc;
 }
-
-
Index: libkdenetwork/libgpgme-copy/assuan/assuan-listen.c
===================================================================
--- libkdenetwork/libgpgme-copy/assuan/assuan-listen.c	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkdenetwork/libgpgme-copy/assuan/assuan-listen.c	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,5 +1,5 @@
 /* assuan-listen.c - Wait for a connection (server) 
- *	Copyright (C) 2001, 2002 Free Software Foundation, Inc.
+ *	Copyright (C) 2001, 2002, 2004 Free Software Foundation, Inc.
  *
  * This file is part of Assuan.
  *
@@ -15,7 +15,8 @@
  *
  * You should have received a copy of the GNU Lesser General Public
  * License along with this program; if not, write to the Free Software
- * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301, USA 
+ * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301,
+ * USA. 
  */
 
 #include <config.h>
@@ -23,14 +24,15 @@
 #include <stdio.h>
 #include <string.h>
 #include <unistd.h>
+#include <errno.h>
 
 #include "assuan-defs.h"
 
-AssuanError
-assuan_set_hello_line (ASSUAN_CONTEXT ctx, const char *line)
+assuan_error_t
+assuan_set_hello_line (assuan_context_t ctx, const char *line)
 {
   if (!ctx)
-    return ASSUAN_Invalid_Value;
+    return _assuan_error (ASSUAN_Invalid_Value);
   if (!line)
     {
       xfree (ctx->hello_line);
@@ -40,9 +42,14 @@
     {
       char *buf = xtrymalloc (3+strlen(line)+1);
       if (!buf)
-        return ASSUAN_Out_Of_Core;
-      strcpy (buf, "OK ");
-      strcpy (buf+3, line);
+        return _assuan_error (ASSUAN_Out_Of_Core);
+      if (strchr (line, '\n'))
+        strcpy (buf, line);
+      else
+        {
+          strcpy (buf, "OK ");
+          strcpy (buf+3, line);
+        }
       xfree (ctx->hello_line);
       ctx->hello_line = buf;
     }
@@ -61,13 +68,14 @@
  * Return value: 0 on success or an error if the connection could for
  * some reason not be established.
  **/
-AssuanError
-assuan_accept (ASSUAN_CONTEXT ctx)
+assuan_error_t
+assuan_accept (assuan_context_t ctx)
 {
   int rc;
+  const char *p, *pend;
 
   if (!ctx)
-    return ASSUAN_Invalid_Value;
+    return _assuan_error (ASSUAN_Invalid_Value);
 
   if (ctx->pipe_mode > 1)
     return -1; /* second invocation for pipemode -> terminate */
@@ -77,9 +85,26 @@
   if (rc)
     return rc;
 
-  /* send the hello */
-  rc = assuan_write_line (ctx, ctx->hello_line? ctx->hello_line
-                                              : "OK Your orders please");
+  /* Send the hello. */
+  p = ctx->hello_line;
+  if (p && (pend = strchr (p, '\n')))
+    { /* This is a multi line hello.  Send all but the last line as
+         comments. */
+      do
+        {
+          rc = _assuan_write_line (ctx, "# ", p, pend - p);
+          if (rc)
+            return rc;
+          p = pend + 1;
+          pend = strchr (p, '\n');
+        }
+      while (pend);
+      rc = _assuan_write_line (ctx, "OK ", p, strlen (p));
+    }
+  else if (p)
+    rc = assuan_write_line (ctx, p);
+  else
+    rc = assuan_write_line (ctx, "OK Pleased to meet you");
   if (rc)
     return rc;
   
@@ -92,14 +117,14 @@
 
 
 int
-assuan_get_input_fd (ASSUAN_CONTEXT ctx)
+assuan_get_input_fd (assuan_context_t ctx)
 {
   return ctx? ctx->input_fd : -1;
 }
 
 
 int
-assuan_get_output_fd (ASSUAN_CONTEXT ctx)
+assuan_get_output_fd (assuan_context_t ctx)
 {
   return ctx? ctx->output_fd : -1;
 }
@@ -107,25 +132,25 @@
 
 /* Close the fd descriptor set by the command INPUT FD=n.  We handle
    this fd inside assuan so that we can do some initial checks */
-AssuanError
-assuan_close_input_fd (ASSUAN_CONTEXT ctx)
+assuan_error_t
+assuan_close_input_fd (assuan_context_t ctx)
 {
   if (!ctx || ctx->input_fd == -1)
-    return ASSUAN_Invalid_Value;
-  close (ctx->input_fd);
+    return _assuan_error (ASSUAN_Invalid_Value);
+  _assuan_close (ctx->input_fd);
   ctx->input_fd = -1;
   return 0;
 }
 
 /* Close the fd descriptor set by the command OUTPUT FD=n.  We handle
    this fd inside assuan so that we can do some initial checks */
-AssuanError
-assuan_close_output_fd (ASSUAN_CONTEXT ctx)
+assuan_error_t
+assuan_close_output_fd (assuan_context_t ctx)
 {
   if (!ctx || ctx->output_fd == -1)
-    return ASSUAN_Invalid_Value;
+    return _assuan_error (ASSUAN_Invalid_Value);
 
-  close (ctx->output_fd);
+  _assuan_close (ctx->output_fd);
   ctx->output_fd = -1;
   return 0;
 }
Index: libkdenetwork/libgpgme-copy/assuan/Makefile.am
===================================================================
--- libkdenetwork/libgpgme-copy/assuan/Makefile.am	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkdenetwork/libgpgme-copy/assuan/Makefile.am	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -42,9 +42,10 @@
 	assuan-socket-server.c \
 	assuan-pipe-connect.c \
 	assuan-socket-connect.c  \
+	assuan-socket.c  \
 	assuan-io.c \
-	assuan-domain-connect.c \
-	assuan-domain-server.c \
+	assuan-uds.c \
+	funopen.c \
 	assuan-logging.c
 
 libassuan_la_COMPILE_FIRST=assuan-errors.c
Index: libkdenetwork/libgpgme-copy/assuan/assuan-pipe-server.c
===================================================================
--- libkdenetwork/libgpgme-copy/assuan/assuan-pipe-server.c	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkdenetwork/libgpgme-copy/assuan/assuan-pipe-server.c	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -15,31 +15,39 @@
  *
  * You should have received a copy of the GNU Lesser General Public
  * License along with this program; if not, write to the Free Software
- * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301, USA 
+ * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301,
+ * USA. 
  */
 
 #include <config.h>
 #include <stdlib.h>
 #include <stdio.h>
+#include <sys/types.h>
+#include <sys/stat.h>
 #include <unistd.h>
+#ifdef HAVE_W32_SYSTEM
+#include <windows.h>
+#include <fcntl.h>
+#endif
 
 #include "assuan-defs.h"
 
+
 static void
-deinit_pipe_server (ASSUAN_CONTEXT ctx)
+deinit_pipe_server (assuan_context_t ctx)
 {
   /* nothing to do for this simple server */
 }
 
 static int
-accept_connection (ASSUAN_CONTEXT ctx)
+accept_connection (assuan_context_t ctx)
 {
   /* This is a NOP for a pipe server */
   return 0;
 }
 
 static int
-finish_connection (ASSUAN_CONTEXT ctx)
+finish_connection (assuan_context_t ctx)
 {
   /* This is a NOP for a pipe server */
   return 0;
@@ -48,19 +56,19 @@
 /* Create a new context.  Note that the handlers are set up for a pipe
    server/client - this way we don't need extra dummy functions */
 int
-_assuan_new_context (ASSUAN_CONTEXT *r_ctx)
+_assuan_new_context (assuan_context_t *r_ctx)
 {
   static struct assuan_io io = { _assuan_simple_read,
 				 _assuan_simple_write,
 				 0, 0 };
 
-  ASSUAN_CONTEXT ctx;
+  assuan_context_t ctx;
   int rc;
 
   *r_ctx = NULL;
   ctx = xtrycalloc (1, sizeof *ctx);
   if (!ctx)
-    return ASSUAN_Out_Of_Core;
+    return _assuan_error (ASSUAN_Out_Of_Core);
   ctx->input_fd = -1;
   ctx->output_fd = -1;
 
@@ -69,7 +77,6 @@
   ctx->io = &io;
 
   ctx->listen_fd = -1;
-  ctx->client_pid = (pid_t)-1;
   /* Use the pipe server handler as a default.  */
   ctx->deinit_handler = deinit_pipe_server;
   ctx->accept_handler = accept_connection;
@@ -84,39 +91,90 @@
 }
 
 
+/* Returns true if atoi(S) denotes a valid socket. */
+static int
+is_valid_socket (const char *s)
+{
+  struct stat buf;
 
+  if ( fstat (atoi (s), &buf ) )
+    return 0;
+  return S_ISSOCK (buf.st_mode);
+}
+
+
 int
-assuan_init_pipe_server (ASSUAN_CONTEXT *r_ctx, int filedes[2])
+assuan_init_pipe_server (assuan_context_t *r_ctx, int filedes[2])
 {
   int rc;
 
   rc = _assuan_new_context (r_ctx);
   if (!rc)
     {
-      ASSUAN_CONTEXT ctx = *r_ctx;
+      assuan_context_t ctx = *r_ctx;
+      const char *s;
+      unsigned long ul;
 
       ctx->is_server = 1;
-      ctx->inbound.fd = filedes[0];
-      ctx->outbound.fd = filedes[1];
+#ifdef HAVE_W32_SYSTEM
+      /* MS Windows has so many different types of handle that one
+         needs to tranlsate them at many place forth and back.  Also
+         make sure that the fiel descriptos are in binary mode.  */
+      setmode (filedes[0], O_BINARY);
+      setmode (filedes[1], O_BINARY);
+      ctx->inbound.fd  = _get_osfhandle (filedes[0]);
+      ctx->outbound.fd = _get_osfhandle (filedes[1]);
+#else
+      s = getenv ("_assuan_connection_fd");
+      if (s && *s && is_valid_socket (s) )
+        {
+          /* Well, we are called with an bi-directional file
+             descriptor.  Prepare for using sendmsg/recvmsg.  In this
+             case we ignore the passed file descriptors. */
+          ctx->inbound.fd  = ctx->outbound.fd = atoi (s);
+          _assuan_init_uds_io (ctx);
+          ctx->deinit_handler = _assuan_uds_deinit;
+        }
+      else if (filedes && filedes[0] != -1 && filedes[1] != -1 )
+        {
+          /* Standard pipe server. */
+          ctx->inbound.fd  = filedes[0];
+          ctx->outbound.fd = filedes[1];
+        }
+      else
+        {
+          _assuan_release_context (*r_ctx);
+          *r_ctx = NULL;
+          return ASSUAN_Problem_Starting_Server;
+        }
+#endif
       ctx->pipe_mode = 1;
+
+      s = getenv ("_assuan_pipe_connect_pid");
+      if (s && (ul=strtoul (s, NULL, 10)) && ul)
+        ctx->pid = (pid_t)ul;
+      else
+        ctx->pid = (pid_t)-1;
+
     }
   return rc;
 }
 
 
 void
-_assuan_release_context (ASSUAN_CONTEXT ctx)
+_assuan_release_context (assuan_context_t ctx)
 {
   if (ctx)
     {
       xfree (ctx->hello_line);
       xfree (ctx->okay_line);
+      xfree (ctx->cmdtbl);
       xfree (ctx);
     }
 }
 
 void
-assuan_deinit_server (ASSUAN_CONTEXT ctx)
+assuan_deinit_server (assuan_context_t ctx)
 {
   if (ctx)
     {
Index: libkdenetwork/libgpgme-copy/configure.in.in
===================================================================
--- libkdenetwork/libgpgme-copy/configure.in.in	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkdenetwork/libgpgme-copy/configure.in.in	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -133,11 +133,18 @@
 #	GPGSM_DEFAULT='/usr/bin/gpgsm'
 	;;
 esac
-dnl AM_CONDITIONAL(HAVE_DOSISH_SYSTEM, test "$have_dosish_system" = "yes")
+
+if test "$have_dosish_system" = yes; then
+   AC_DEFINE(HAVE_DOSISH_SYSTEM,1,
+             [Defined if we run on some of the PCDOS like systems
+              (DOS, Windoze. OS/2) with special properties like
+              no file modes])
+fi
+AM_CONDITIONAL(HAVE_DOSISH_SYSTEM, test "$have_dosish_system" = "yes")
 dnl AM_CONDITIONAL(HAVE_PTH, test "$have_pth" = "yes")
 dnl AM_CONDITIONAL(HAVE_PTHREAD, test "$have_pthread" = "yes")
+dnl dnl 
 
-
 # Checks for header files.
 AC_CHECK_HEADERS(sys/select.h)
 
@@ -213,6 +220,38 @@
 ***])
 fi
 
+# Add a few constants to help porting to W32
+AH_VERBATIM([SEPCONSTANTS],
+[
+/* Separators as used in file names and $PATH. Please note that the
+   string version must not contain more than one character because
+   the using code assumes strlen()==1 */
+#ifdef HAVE_DOSISH_SYSTEM
+#define DIRSEP_C '\\\\'
+#define EXTSEP_C '.'
+#define DIRSEP_S "\\\\"
+#define EXTSEP_S "."
+#define PATHSEP_C ';'
+#define PATHSEP_S ";"
+#else
+#define DIRSEP_C '/'
+#define EXTSEP_C '.'
+#define DIRSEP_S "/"
+#define EXTSEP_S "."
+#define PATHSEP_C ':'
+#define PATHSEP_S ":"
+#endif
+])
+
+AH_BOTTOM([
+/* Definition of GCC specific attributes.  */
+#if __GNUC__ > 2 
+# define GPGME_GCC_A_PURE  __attribute__ ((__pure__))
+#else
+# define GPGME_GCC_A_PURE
+#endif
+])
+
 dnl # Checking for libgpg-error.
 dnl AM_PATH_GPG_ERROR(0.5,, AC_MSG_ERROR([libgpg-error was not found]))
 dnl AC_DEFINE(GPG_ERR_SOURCE_DEFAULT, GPG_ERR_SOURCE_GPGME,
@@ -296,12 +335,13 @@
 dnl # FIXME: Only build if supported.
 dnl AM_CONDITIONAL(BUILD_ASSUAN, test "$GPGSM" != "no")
 
+AC_CHECK_FUNCS(funopen)
+
 if test "$GPGSM" != "no"; then
-  AC_CHECK_FUNCS(funopen)
-  #if test $ac_cv_func_funopen != yes; then
+  if test $ac_cv_func_funopen != yes; then
     # No funopen but we can implement that in terms of fopencookie.
-   # AC_CHECK_FUNCS(fopencookie, AC_LIBOBJ(funopen), AC_MSG_ERROR([[No implementation of fopencookie or funopen available.]]))
-  #fi
+   AC_CHECK_FUNCS(fopencookie, funopen, AC_MSG_ERROR([[No implementation of fopencookie or funopen available.]]))
+  fi
 
   dnl it's a #define !!!
   dnl AC_CHECK_FUNCS(isascii)
Index: doc/kalarm/alarmmessage.png
===================================================================
Nie można wyświetlić: plik binarny.
svn:mime-type = image/png
Index: doc/kalarm/index.docbook
===================================================================
--- doc/kalarm/index.docbook	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ doc/kalarm/index.docbook	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -33,7 +33,7 @@
 </authorgroup>
 
 <copyright>
-<year>2001</year><year>2002</year><year>2003</year><year>2004</year><year>2005</year><year>2006</year>
+<year>2001</year><year>2002</year><year>2003</year><year>2004</year><year>2005</year><year>2006</year><year>2007</year>
 <holder>David Jarvie</holder>
 </copyright>
 
@@ -41,8 +41,8 @@
 
 <!-- Don't change format of date and version of the documentation -->
 
-<date>2006-12-06</date>
-<releaseinfo>1.04.07</releaseinfo>
+<date>2007-03-16</date>
+<releaseinfo>1.04.10</releaseinfo>
 
 <abstract>
 <para>&kalarm; is a personal alarm message, command and email scheduler for &kde;.</para>
@@ -758,7 +758,7 @@
 <para><guilabel>Sound file</guilabel> to play an audio file. Use the
 button on the right to display the Sound File dialog which lets you
 select a file to play and set volume and repetition options. If you
-hover the mouse over the button, a tooltip will display the audio file
+hover the mouse over the selector, a tooltip will display the audio file
 currently selected.</para>
 
 <note><para>&kalarm; uses the &arts; sound server for repetition and
@@ -771,8 +771,9 @@
 
 <itemizedlist>
 <listitem>
-<para>Enter the sound file path or URL, or use the button beside the
-edit box to display a file selection dialog.</para>
+<para>Enter the sound file path, or use the button beside the edit box
+to display a file selection dialog. You can listen to the selected
+file by clicking the play button to the left of the edit field.</para>
 </listitem>
 
 <listitem>
@@ -4063,7 +4064,7 @@
 &install.intro.documentation;
 
 <para>&kalarm; is available for &kde; 2 and as a standalone package for
-&kde;3 from <ulink url="http://www.astrojar.org.uk/linux/kalarm.html">http://www.astrojar.org.uk/linux/kalarm.html</ulink>
+&kde;3 from <ulink url="http://www.astrojar.org.uk/kalarm">http://www.astrojar.org.uk/kalarm</ulink>
 </para>
 
 </sect1>
@@ -4100,7 +4101,7 @@
 
 <para>You can find a list of changes in the
 <filename>ChangeLog</filename> file, or at <ulink
-url="http://www.astrojar.org.uk/linux/kalarm.html">http://www.astrojar.org.uk/linux/kalarm.html</ulink>.</para>
+url="http://www.astrojar.org.uk/kalarm">http://www.astrojar.org.uk/kalarm</ulink>.</para>
 </sect1>
 
 <sect1 id="compilation">
Index: doc/korganizer/index.docbook
===================================================================
--- doc/korganizer/index.docbook	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ doc/korganizer/index.docbook	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -4,8 +4,6 @@
   <!ENTITY kappname "&korganizer;">
   <!ENTITY package "kdepim">
   <!ENTITY plugins-chapter SYSTEM "plugins-chapter.docbook">
-  <!ENTITY exchange-plugin-workshop SYSTEM "exchange-plugin.docbook">
-  <!ENTITY group-scheduling-workshop SYSTEM "group-scheduling.docbook">
   <!ENTITY outlook-to-vcalendar-workshop SYSTEM "outlook-to-vcalendar.docbook">
   <!ENTITY % addindex "IGNORE">
   <!ENTITY % English "INCLUDE">
Index: kalarm/kamail.cpp
===================================================================
--- kalarm/kamail.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kalarm/kamail.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -392,8 +392,9 @@
 QString KAMail::appendBodyAttachments(QString& message, const KAEvent& event)
 {
 	static const char* textMimeTypes[] = {
-		"application/x-shellscript", "application/x-nawk", "application/x-gawk", "application/x-awk",
-		"application/x-perl", "application/x-python", "application/x-desktop",
+		"application/x-sh", "application/x-csh", "application/x-shellscript",
+		"application/x-nawk", "application/x-gawk", "application/x-awk",
+		"application/x-perl", "application/x-desktop",
 		0
 	};
 	QStringList attachments = event.emailAttachments();
Index: kalarm/alarmevent.cpp
===================================================================
--- kalarm/alarmevent.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kalarm/alarmevent.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,7 +1,7 @@
 /*
  *  alarmevent.cpp  -  represents calendar alarms and events
  *  Program:  kalarm
- *  Copyright © 2001-2006 by David Jarvie <software@astrojar.org.uk>
+ *  Copyright © 2001-2007 by David Jarvie <software@astrojar.org.uk>
  *
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the GNU General Public License as published by
@@ -60,6 +60,7 @@
 static const QString DISPLAYING_TYPE            = QString::fromLatin1("DISPLAYING");   // used only in displaying calendar
 static const QString PRE_ACTION_TYPE            = QString::fromLatin1("PRE");
 static const QString POST_ACTION_TYPE           = QString::fromLatin1("POST");
+static const QCString NEXT_REPEAT_PROPERTY("NEXTREPEAT");   // X-KDE-KALARM-NEXTREPEAT property
 // - Display alarm properties
 static const QCString FONT_COLOUR_PROPERTY("FONTCOLOR");    // X-KDE-KALARM-FONTCOLOR property
 // - Email alarm properties
@@ -116,6 +117,7 @@
 	bool                   commandScript;
 	int                    repeatCount;
 	int                    repeatInterval;
+	int                    nextRepeat;
 };
 typedef QMap<KAAlarm::SubType, AlarmData> AlarmMap;
 
@@ -332,6 +334,7 @@
 	mReminderMinutes  = 0;
 	mRepeatInterval   = 0;
 	mRepeatCount      = 0;
+	mNextRepeat       = 0;
 	mText             = "";
 	mAudioFile        = "";
 	mPreAction        = "";
@@ -364,6 +367,7 @@
 				{
 					mRepeatInterval = data.repeatInterval;   // values may be adjusted in setRecurrence()
 					mRepeatCount    = data.repeatCount;
+					mNextRepeat     = data.nextRepeat;
 				}
 				break;
 			case KAAlarm::AT_LOGIN__ALARM:
@@ -519,8 +523,17 @@
 	data.startOffsetSecs = alarm.startOffset().asSeconds();    // can have start offset but no valid date/time (e.g. reminder in template)
 	data.displayingFlags = 0;
 	data.isEmailText     = false;
+	data.nextRepeat      = 0;
+	data.repeatInterval  = alarm.snoozeTime();
 	data.repeatCount     = alarm.repeatCount();
-	data.repeatInterval  = alarm.snoozeTime();
+	if (data.repeatCount)
+	{
+		bool ok;
+		QString property = alarm.customProperty(APPNAME, NEXT_REPEAT_PROPERTY);
+		int n = static_cast<int>(property.toUInt(&ok));
+		if (ok)
+			data.nextRepeat = n;
+	}
 	switch (alarm.type())
 	{
 		case Alarm::Procedure:
@@ -710,6 +723,7 @@
 	mDeferDefaultMinutes    = 0;
 	mRepeatInterval         = 0;
 	mRepeatCount            = 0;
+	mNextRepeat             = 0;
 	mArchiveRepeatAtLogin   = false;
 	mReminderOnceOnly       = false;
 	mDisplaying             = false;
@@ -800,7 +814,7 @@
 }
 
 /******************************************************************************
- * Reinitialise the start date/time byt adjusting its date part, and setting
+ * Reinitialise the start date/time by adjusting its date part, and setting
  * the next scheduled alarm to the new start date/time.
  */
 void KAEvent::adjustStartDate(const QDate& d)
@@ -831,24 +845,7 @@
 		if (!mReminderOnceOnly  ||  mNextMainDateTime == mStartDateTime)
 			return mNextMainDateTime.addSecs(-mReminderMinutes * 60);
 	}
-	DateTime dt = mNextMainDateTime;
-	if (mRepeatCount)
-	{
-		QDateTime now = QDateTime::currentDateTime();
-		if (now > mNextMainDateTime)
-		{
-			// Find the next repetition > current date/time.
-			// N.B. This is coded to avoid 32-bit integer overflow which occurs
-			//      in QDateTime::secsTo() for large enough time differences.
-			dt = mainEndRepeatTime();    // get the last repetition time
-			if (dt > now)
-			{
-				int repeatSecs = mRepeatInterval * 60;
-				int repetition = mNextMainDateTime.secsTo(now) / repeatSecs + 1;
-				dt = mNextMainDateTime.addSecs(repetition * repeatSecs);
-			}
-		}
-	}
+	DateTime dt = mainDateTime(true);
 	if (mDeferral > 0
 	&&  (includeReminders  ||  mDeferral != REMINDER_DEFERRAL))
 	{
@@ -1203,6 +1200,9 @@
 		case KAAlarm::MAIN_ALARM:
 			alarm->setSnoozeTime(mRepeatInterval);
 			alarm->setRepeatCount(mRepeatCount);
+			if (mRepeatCount)
+				alarm->setCustomProperty(APPNAME, NEXT_REPEAT_PROPERTY,
+				                         QString::number(mNextRepeat));
 			// fall through to INVALID_ALARM
 		case KAAlarm::INVALID_ALARM:
 			switch (mActionType)
@@ -1254,26 +1254,28 @@
 	KAAlarm al;       // this sets type to INVALID_ALARM
 	if (mAlarmCount)
 	{
-		al.mEventID       = mEventID;
-		al.mActionType    = mActionType;
-		al.mText          = mText;
-		al.mBgColour      = mBgColour;
-		al.mFgColour      = mFgColour;
-		al.mFont          = mFont;
-		al.mDefaultFont   = mDefaultFont;
-		al.mBeep          = mBeep;
-		al.mSpeak         = mSpeak;
-		al.mSoundVolume   = mSoundVolume;
-		al.mFadeVolume    = mFadeVolume;
-		al.mFadeSeconds   = mFadeSeconds;
-		al.mRepeatSound   = mRepeatSound;
-		al.mConfirmAck    = mConfirmAck;
-		al.mRepeatAtLogin = false;
-		al.mDeferred      = false;
-		al.mLateCancel    = mLateCancel;
-		al.mAutoClose     = mAutoClose;
-		al.mEmailBcc      = mEmailBcc;
-		al.mCommandScript = mCommandScript;
+		al.mEventID        = mEventID;
+		al.mActionType     = mActionType;
+		al.mText           = mText;
+		al.mBgColour       = mBgColour;
+		al.mFgColour       = mFgColour;
+		al.mFont           = mFont;
+		al.mDefaultFont    = mDefaultFont;
+		al.mBeep           = mBeep;
+		al.mSpeak          = mSpeak;
+		al.mSoundVolume    = mSoundVolume;
+		al.mFadeVolume     = mFadeVolume;
+		al.mFadeSeconds    = mFadeSeconds;
+		al.mRepeatSound    = mRepeatSound;
+		al.mConfirmAck     = mConfirmAck;
+		al.mRepeatCount    = 0;
+		al.mRepeatInterval = 0;
+		al.mRepeatAtLogin  = false;
+		al.mDeferred       = false;
+		al.mLateCancel     = mLateCancel;
+		al.mAutoClose      = mAutoClose;
+		al.mEmailBcc       = mEmailBcc;
+		al.mCommandScript  = mCommandScript;
 		if (mActionType == T_EMAIL)
 		{
 			al.mEmailFromKMail   = mEmailFromKMail;
@@ -1290,6 +1292,7 @@
 					al.mNextMainDateTime = mNextMainDateTime;
 					al.mRepeatCount      = mRepeatCount;
 					al.mRepeatInterval   = mRepeatInterval;
+					al.mNextRepeat       = mNextRepeat;
 				}
 				break;
 			case KAAlarm::REMINDER_ALARM:
@@ -1461,6 +1464,8 @@
 bool KAEvent::defer(const DateTime& dateTime, bool reminder, bool adjustRecurrence)
 {
 	bool result = false;
+	bool setNextRepetition = false;
+	bool checkRepetition = false;
 	cancelCancelledDeferral();
 	if (checkRecur() == KARecurrence::NO_RECUR)
 	{
@@ -1483,12 +1488,13 @@
 		if (mDeferral != REMINDER_DEFERRAL)
 		{
 			// We're deferring the main alarm, not a reminder
-			if (mRepeatCount  &&  dateTime < mainEndRepeatTime())
+			if (mRepeatCount && mRepeatInterval  &&  dateTime < mainEndRepeatTime())
 			{
 				// The alarm is repeated, and we're deferring to a time before the last repetition
 				set_deferral(NORMAL_DEFERRAL);
 				mDeferralTime = dateTime;
 				result = true;
+				setNextRepetition = true;
 			}
 			else
 			{
@@ -1520,6 +1526,7 @@
 		{
 			set_deferral(REMINDER_DEFERRAL);
 			mDeferralTime = dateTime;
+			checkRepetition = true;
 		}
 	}
 	else
@@ -1534,14 +1541,26 @@
 			{
 				// The last repetition (if any) of the current recurrence has already passed.
 				// Adjust to the next scheduled recurrence after now.
-				if (!mMainExpired  &&  setNextOccurrence(now, true) == NO_OCCURRENCE)
+				if (!mMainExpired  &&  setNextOccurrence(now) == NO_OCCURRENCE)
 				{
 					mMainExpired = true;
 					--mAlarmCount;
 				}
 			}
+			else
+				setNextRepetition = (mRepeatCount && mRepeatInterval);
 		}
+		else
+			checkRepetition = true;
 	}
+	if (checkRepetition)
+		setNextRepetition = (mRepeatCount && mRepeatInterval  &&  mDeferralTime < mainEndRepeatTime());
+	if (setNextRepetition)
+	{
+		// The alarm is repeated, and we're deferring to a time before the last repetition.
+		// Set the next scheduled repetition to the one after the deferral.
+		mNextRepeat = mNextMainDateTime.secsTo(mDeferralTime) / (mRepeatInterval * 60) + 1;
+	}
 	mUpdated = true;
 	return result;
 }
@@ -1894,20 +1913,18 @@
  * Any reminder alarm is adjusted accordingly.
  * If 'includeRepetitions' is true and the alarm has a simple repetition, and
  * a repetition of a previous recurrence occurs after the specified date/time,
- * that previous recurrence is returned instead.
+ * that repetition is set as the next occurrence.
  */
-KAEvent::OccurType KAEvent::setNextOccurrence(const QDateTime& preDateTime, bool includeRepetitions)
+KAEvent::OccurType KAEvent::setNextOccurrence(const QDateTime& preDateTime)
 {
 	if (preDateTime < mNextMainDateTime.dateTime())
 		return FIRST_OR_ONLY_OCCURRENCE;    // it might not be the first recurrence - tant pis
 	QDateTime pre = preDateTime;
-	if (includeRepetitions)
-	{
-		if (!mRepeatCount)
-			includeRepetitions = false;
-		else
-			pre = preDateTime.addSecs(-mRepeatCount * mRepeatInterval * 60);
-	}
+	// If there are repetitions, adjust the comparison date/time so that
+	// we find the earliest recurrence which has a repetition falling after
+	// the specified preDateTime.
+	if (mRepeatCount  &&  mRepeatInterval)
+		pre = preDateTime.addSecs(-mRepeatCount * mRepeatInterval * 60);
 
 	DateTime dt;
 	OccurType type;
@@ -1947,16 +1964,27 @@
 	else
 		return NO_OCCURRENCE;
 
-	if (includeRepetitions  &&  dt.dateTime() <= preDateTime)
+	if (mRepeatCount  &&  mRepeatInterval)
 	{
-		// The next occurrence is a simple repetition.
-		type = static_cast<OccurType>(type | OCCURRENCE_REPEAT);
-		// Repetitions can't have a reminder, so remove any.
-		if (mReminderMinutes)
-			set_archiveReminder();
-		if (mDeferral == REMINDER_DEFERRAL)
-			set_deferral(NO_DEFERRAL);
-		mUpdated = true;
+		int secs = dt.dateTime().secsTo(preDateTime);
+		if (secs >= 0)
+		{
+			// The next occurrence is a simple repetition.
+			type = static_cast<OccurType>(type | OCCURRENCE_REPEAT);
+			mNextRepeat = (secs / (60 * mRepeatInterval)) + 1;
+			// Repetitions can't have a reminder, so remove any.
+			if (mReminderMinutes)
+				set_archiveReminder();
+			if (mDeferral == REMINDER_DEFERRAL)
+				set_deferral(NO_DEFERRAL);
+			mUpdated = true;
+		}
+		else if (mNextRepeat)
+		{
+			// The next occurrence is the main occurrence, not a repetition
+			mNextRepeat = 0;
+			mUpdated = true;
+		}
 	}
 	return type;
 }
@@ -2131,6 +2159,7 @@
 	mUpdated        = true;
 	mRepeatInterval = 0;
 	mRepeatCount    = 0;
+	mNextRepeat     = 0;
 	if (interval > 0  &&  count > 0  &&  !mRepeatAtLogin)
 	{
 		if (interval % 1440  &&  mStartDateTime.isDateOnly())
@@ -2994,6 +3023,7 @@
 	mCommandScript    = rhs.mCommandScript;
 	mRepeatCount      = rhs.mRepeatCount;
 	mRepeatInterval   = rhs.mRepeatInterval;
+	mNextRepeat       = rhs.mNextRepeat;
 	mBeep             = rhs.mBeep;
 	mSpeak            = rhs.mSpeak;
 	mRepeatSound      = rhs.mRepeatSound;
@@ -3084,6 +3114,7 @@
 	kdDebug(5950) << "-- mRepeatAtLogin:" << (mRepeatAtLogin ? "true" : "false") << ":\n";
 	kdDebug(5950) << "-- mRepeatCount:" << mRepeatCount << ":\n";
 	kdDebug(5950) << "-- mRepeatInterval:" << mRepeatInterval << ":\n";
+	kdDebug(5950) << "-- mNextRepeat:" << mNextRepeat << ":\n";
 	kdDebug(5950) << "-- mDisplaying:" << (mDisplaying ? "true" : "false") << ":\n";
 	kdDebug(5950) << "-- mLateCancel:" << mLateCancel << ":\n";
 	kdDebug(5950) << "-- mAutoClose:" << (mAutoClose ? "true" : "false") << ":\n";
Index: kalarm/messagewin.cpp
===================================================================
--- kalarm/messagewin.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kalarm/messagewin.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,7 +1,7 @@
 /*
  *  messagewin.cpp  -  displays an alarm message
  *  Program:  kalarm
- *  Copyright © 2001-2006 by David Jarvie <software@astrojar.org.uk>
+ *  Copyright © 2001-2007 by David Jarvie <software@astrojar.org.uk>
  *
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the GNU General Public License as published by
@@ -140,7 +140,7 @@
 	  mFont(event.font()),
 	  mBgColour(event.bgColour()),
 	  mFgColour(event.fgColour()),
-	  mDateTime((alarm.type() & KAAlarm::REMINDER_ALARM) ? event.mainDateTime() : alarm.dateTime()),
+	  mDateTime((alarm.type() & KAAlarm::REMINDER_ALARM) ? event.mainDateTime(true) : alarm.dateTime(true)),
 	  mEventID(event.id()),
 	  mAudioFile(event.audioFile()),
 	  mVolume(event.soundVolume()),
@@ -175,7 +175,8 @@
 	  mRescheduleEvent(reschedule_event),
 	  mShown(false),
 	  mPositioning(false),
-	  mNoCloseConfirm(false)
+	  mNoCloseConfirm(false),
+	  mDisableDeferral(false)
 {
 	kdDebug(5950) << "MessageWin::MessageWin(event)" << endl;
 	// Set to save settings automatically, but don't save window size.
@@ -218,7 +219,8 @@
 	  mRescheduleEvent(false),
 	  mShown(false),
 	  mPositioning(false),
-	  mNoCloseConfirm(false)
+	  mNoCloseConfirm(false),
+	  mDisableDeferral(false)
 {
 	kdDebug(5950) << "MessageWin::MessageWin(errmsg)" << endl;
 	initView();
@@ -244,7 +246,8 @@
 	  mRescheduleEvent(false),
 	  mShown(false),
 	  mPositioning(false),
-	  mNoCloseConfirm(false)
+	  mNoCloseConfirm(false),
+	  mDisableDeferral(false)
 {
 	kdDebug(5950) << "MessageWin::MessageWin()\n";
 	mWindowList.append(this);
@@ -1325,7 +1328,7 @@
 {
 	mOkButton->setEnabled(true);
 	mKAlarmButton->setEnabled(true);
-	if (mDeferButton)
+	if (mDeferButton  &&  !mDisableDeferral)
 		mDeferButton->setEnabled(true);
 	if (mEditButton)
 		mEditButton->setEnabled(true);
@@ -1466,6 +1469,7 @@
 	{
 		mDeferLimit = event.deferralLimit().dateTime();
 		MidnightTimer::connect(this, SLOT(checkDeferralLimit()));   // check every day
+		mDisableDeferral = false;
 		checkDeferralLimit();
 	}
 }
@@ -1498,6 +1502,7 @@
 		}
 	}
 	mDeferButton->setEnabled(false);
+	mDisableDeferral = true;
 }
 
 /******************************************************************************
Index: kalarm/mainwindowbase.h
===================================================================
--- kalarm/mainwindowbase.h	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kalarm/mainwindowbase.h	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,7 +1,7 @@
 /*
  *  mainwindowbase.h  -  base class for main application windows
  *  Program:  kalarm
- *  Copyright (C) 2002 by David Jarvie  software@astrojar.org.uk
+ *  Copyright © 2002 by David Jarvie  software@astrojar.org.uk
  *
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the GNU General Public License as published by
@@ -36,7 +36,7 @@
 		Q_OBJECT
 
 	public:
-		MainWindowBase(QWidget* parent = 0, const char* name = 0, WFlags f = WType_TopLevel | WDestructiveClose)
+		explicit MainWindowBase(QWidget* parent = 0, const char* name = 0, WFlags f = WType_TopLevel | WDestructiveClose)
 		                    : KMainWindow(parent, name, f), disableQuit(false) { }
 
 	protected:
Index: kalarm/emailidcombo.h
===================================================================
--- kalarm/emailidcombo.h	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kalarm/emailidcombo.h	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,7 +1,7 @@
 /*
  *  emailidcombo.h  -  email identity combo box with read-only option
  *  Program:  kalarm
- *  Copyright (C) 2004 by David Jarvie <software@astrojar.org.uk>
+ *  Copyright © 2004,2006 by David Jarvie <software@astrojar.org.uk>
  *
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the GNU General Public License as published by
@@ -29,7 +29,7 @@
 {
 		Q_OBJECT
 	public:
-		EmailIdCombo(KPIM::IdentityManager*, QWidget* parent = 0, const char* name = 0);
+		explicit EmailIdCombo(KPIM::IdentityManager*, QWidget* parent = 0, const char* name = 0);
 		void  setReadOnly(bool ro)    { mReadOnly = ro; }
 	protected:
 		virtual void mousePressEvent(QMouseEvent*);
Index: kalarm/soundpicker.h
===================================================================
--- kalarm/soundpicker.h	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kalarm/soundpicker.h	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -45,7 +45,7 @@
 		 *  @param parent The parent object of this widget.
 		 *  @param name The name of this widget.
 		 */
-		SoundPicker(QWidget* parent, const char* name = 0);
+		explicit SoundPicker(QWidget* parent, const char* name = 0);
 		/** Initialises the widget's state.
 		 *  @param type     The option to select.
 		 *  @param filename The full path or URL of the sound file to select. If the 'file' option is
Index: kalarm/fontcolour.h
===================================================================
--- kalarm/fontcolour.h	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kalarm/fontcolour.h	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,7 +1,7 @@
 /*
  *  fontcolour.h  -  font and colour chooser widget
  *  Program:  kalarm
- *  Copyright (c) 2001, 2003 by David Jarvie <software@astrojar.org.uk>
+ *  Copyright © 2001,2003 by David Jarvie <software@astrojar.org.uk>
  *
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the GNU General Public License as published by
@@ -36,7 +36,7 @@
 {
 	Q_OBJECT
 public:
-	FontColourChooser(QWidget* parent = 0, const char* name = 0,
+	explicit FontColourChooser(QWidget* parent = 0, const char* name = 0,
 	       bool onlyFixed = false,
 	       const QStringList& fontList = QStringList(),
 	       const QString& frameLabel = i18n("Requested font"),
Index: kalarm/preferences.cpp
===================================================================
--- kalarm/preferences.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kalarm/preferences.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,7 +1,7 @@
 /*
  *  preferences.cpp  -  program preference settings
  *  Program:  kalarm
- *  Copyright © 2001-2006 by David Jarvie <software@astrojar.org.uk>
+ *  Copyright © 2001-2007 by David Jarvie <software@astrojar.org.uk>
  *
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the GNU General Public License as published by
@@ -74,7 +74,7 @@
 const bool                       Preferences::default_defaultAutoClose        = false;
 const bool                       Preferences::default_defaultCopyToKOrganizer = false;
 const bool                       Preferences::default_defaultSoundRepeat      = false;
-const SoundPicker::Type          Preferences::default_defaultSoundType        = SoundPicker::BEEP;
+const SoundPicker::Type          Preferences::default_defaultSoundType        = SoundPicker::NONE;
 const bool                       Preferences::default_defaultConfirmAck       = false;
 const bool                       Preferences::default_defaultCmdScript        = false;
 const EditAlarmDlg::CmdLogType   Preferences::default_defaultCmdLogType       = EditAlarmDlg::DISCARD_OUTPUT;
@@ -283,6 +283,10 @@
 	mAutostartTrayIcon        = config->readBoolEntry(AUTOSTART_TRAY, default_autostartTrayIcon);
 	mModalMessages            = config->readBoolEntry(MODAL_MESSAGES, default_modalMessages);
 	mMessageButtonDelay       = config->readNumEntry(MESSAGE_BUTTON_DELAY, default_messageButtonDelay);
+	if (mMessageButtonDelay > 10)
+		mMessageButtonDelay = 10;    // prevent windows being unusable for a long time
+	if (mMessageButtonDelay < -1)
+		mMessageButtonDelay = -1;
 	mShowExpiredAlarms        = config->readBoolEntry(SHOW_EXPIRED_ALARMS, default_showExpiredAlarms);
 	mShowTimeToAlarm          = config->readBoolEntry(SHOW_TIME_TO_ALARM, default_showTimeToAlarm);
 	mShowAlarmTime            = !mShowTimeToAlarm ? true : config->readBoolEntry(SHOW_ALARM_TIME, default_showAlarmTime);
Index: kalarm/alarmevent.h
===================================================================
--- kalarm/alarmevent.h	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kalarm/alarmevent.h	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,7 +1,7 @@
 /*
  *  alarmevent.h  -  represents calendar alarms and events
  *  Program:  kalarm
- *  Copyright © 2001-2006 by David Jarvie <software@astrojar.org.uk>
+ *  Copyright © 2001-2007 by David Jarvie <software@astrojar.org.uk>
  *
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the GNU General Public License as published by
@@ -115,6 +115,7 @@
 		Type               mActionType;       // alarm action type
 		int                mRepeatCount;      // simple repetition count (excluding the first time)
 		int                mRepeatInterval;   // simple repetition interval (minutes)
+		int                mNextRepeat;       // repetition count of next due repetition
 		int                mLateCancel;       // how many minutes late will cancel the alarm, or 0 for no cancellation
 		bool               mAutoClose;        // whether to close the alarm window after the late-cancel period
 		bool               mCommandScript;    // the command text is a script, not a shell command line
@@ -194,7 +195,9 @@
 		Type               type() const                 { return static_cast<Type>(mType & ~TIMED_DEFERRAL_FLAG); }
 		SubType            subType() const              { return mType; }
 		const QString&     eventID() const              { return mEventID; }
-		const DateTime&    dateTime() const             { return mNextMainDateTime; }
+		DateTime           dateTime(bool withRepeats = false) const
+		                                                { return (withRepeats && mNextRepeat && mRepeatInterval)
+		                                                    ? mNextMainDateTime.addSecs(mNextRepeat * mRepeatInterval * 60) : mNextMainDateTime; }
 		QDate              date() const                 { return mNextMainDateTime.date(); }
 		QTime              time() const                 { return mNextMainDateTime.time(); }
 		QString            audioFile() const            { return (mActionType == T_AUDIO) && !mBeep ? mText : QString::null; }
@@ -335,7 +338,7 @@
 		void               setAudioFile(const QString& filename, float volume, float fadeVolume, int fadeSeconds);
 		void               setTemplate(const QString& name, int afterTime = -1)  { mTemplateName = name;  mTemplateAfterTime = afterTime;  mUpdated = true; }
 		void               setActions(const QString& pre, const QString& post)   { mPreAction = pre;  mPostAction = post;  mUpdated = true; }
-		OccurType          setNextOccurrence(const QDateTime& preDateTime, bool includeRepetitions = false);
+		OccurType          setNextOccurrence(const QDateTime& preDateTime);
 		void               setFirstRecurrence();
 		void               setEventID(const QString& id)                     { mEventID = id;  mUpdated = true; }
 		void               adjustStartDate(const QDate&);
@@ -380,10 +383,13 @@
 		bool               valid() const                  { return mAlarmCount  &&  (mAlarmCount != 1 || !mRepeatAtLogin); }
 		int                alarmCount() const             { return mAlarmCount; }
 		const DateTime&    startDateTime() const          { return mStartDateTime; }
-		const DateTime&    mainDateTime() const           { return mNextMainDateTime; }
+		DateTime           mainDateTime(bool withRepeats = false) const
+		                                                  { return (withRepeats && mNextRepeat && mRepeatInterval)
+		                                                    ? mNextMainDateTime.addSecs(mNextRepeat * mRepeatInterval * 60) : mNextMainDateTime; }
 		QDate              mainDate() const               { return mNextMainDateTime.date(); }
 		QTime              mainTime() const               { return mNextMainDateTime.time(); }
-		DateTime           mainEndRepeatTime() const      { return mRepeatCount ? mNextMainDateTime.addSecs(mRepeatCount * mRepeatInterval * 60) : mNextMainDateTime; }
+		DateTime           mainEndRepeatTime() const      { return (mRepeatCount > 0 && mRepeatInterval)
+		                                                    ? mNextMainDateTime.addSecs(mRepeatCount * mRepeatInterval * 60) : mNextMainDateTime; }
 		int                reminder() const               { return mReminderMinutes; }
 		bool               reminderOnceOnly() const       { return mReminderOnceOnly; }
 		bool               reminderDeferral() const       { return mDeferral == REMINDER_DEFERRAL; }
Index: kalarm/messagewin.h
===================================================================
--- kalarm/messagewin.h	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kalarm/messagewin.h	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,7 +1,7 @@
 /*
  *  messagewin.h  -  displays an alarm message
  *  Program:  kalarm
- *  Copyright © 2001-2006 by David Jarvie <software@astrojar.org.uk>
+ *  Copyright © 2001-2007 by David Jarvie <software@astrojar.org.uk>
  *
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the GNU General Public License as published by
@@ -154,6 +154,7 @@
 		bool                mPositioning;     // true when the window is being positioned initially
 		bool                mNoCloseConfirm;  // the Defer or Edit button is closing the dialog
 		bool                mUsingKMix;       // master volume is being set using kmix
+		bool                mDisableDeferral; // true if past deferral limit, so don't enable Defer button
 };
 
 #endif // MESSAGEWIN_H
Index: kalarm/kalarm.h
===================================================================
--- kalarm/kalarm.h	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kalarm/kalarm.h	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,7 +1,7 @@
 /*
  *  kalarm.h  -  global header file
  *  Program:  kalarm
- *  Copyright © 2001-2006 by David Jarvie <software@astrojar.org.uk>
+ *  Copyright © 2001-2007 by David Jarvie <software@astrojar.org.uk>
  *
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the GNU General Public License as published by
@@ -26,7 +26,7 @@
 #include <config.h>
 #endif
 
-#define KALARM_VERSION "1.4.9"
+#define KALARM_VERSION "1.4.11"
 #define KALARM_NAME "KAlarm"
 
 #include <kdeversion.h>
Index: kalarm/sounddlg.h
===================================================================
--- kalarm/sounddlg.h	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kalarm/sounddlg.h	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,7 +1,7 @@
 /*
  *  sounddlg.h  -  sound file selection and configuration dialog
  *  Program:  kalarm
- *  Copyright (C) 2005 by David Jarvie <software@astrojar.org.uk>
+ *  Copyright © 2005,2007 by David Jarvie <software@astrojar.org.uk>
  *
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the GNU General Public License as published by
@@ -26,11 +26,12 @@
 #include <kdialogbase.h>
 
 class QHBox;
+class QPushButton;
+class LineEdit;
 class PushButton;
 class CheckBox;
 class SpinBox;
 class Slider;
-class LineEdit;
 
 
 class SoundDlg : public KDialogBase
@@ -41,7 +42,7 @@
 		         const QString& caption, QWidget* parent, const char* name = 0);
 		void           setReadOnly(bool);
 		bool           isReadOnly() const    { return mReadOnly; }
-		QString        getFile() const;
+		QString        getFile() const       { return mFileName; }
 		bool           getSettings(float& volume, float& fadeVolume, int& fadeSeconds) const;
 		QString        defaultDir() const    { return mDefaultDir; }
 
@@ -61,8 +62,12 @@
 		void           slotPickFile();
 		void           slotVolumeToggled(bool on);
 		void           slotFadeToggled(bool on);
+		void           playSound();
 
 	private:
+		bool           checkFile();
+
+		QPushButton*   mFilePlay;
 		LineEdit*      mFileEdit;
 		PushButton*    mFileBrowseButton;
 		CheckBox*      mRepeatCheckbox;
@@ -74,6 +79,7 @@
 		QHBox*         mFadeVolumeBox;
 		Slider*        mFadeSlider;
 		QString        mDefaultDir;     // current default directory for mFileEdit
+		QString        mFileName;
 		bool           mReadOnly;
 };
 
Index: kalarm/kalarmd/kalarmd.desktop
===================================================================
--- kalarm/kalarmd/kalarmd.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kalarm/kalarmd/kalarmd.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -23,11 +23,14 @@
 Name[is]=KAlarm þjónn
 Name[it]=Demone degli avvisi
 Name[ja]=KAlarm デーモン
+Name[kk]=KAlarm қызметі
 Name[km]=ដេមិន KAlarm
 Name[lt]=KAlarm tarnyba
+Name[mk]=Даемон за КАларм
 Name[ms]=Daemon KAlarm 
 Name[nb]=KAlarm-nisse
 Name[nds]=KAlarm-Dämoon
+Name[ne]=केडीई संसूचक डेइमोन
 Name[nn]=KAlarm-nisse
 Name[pl]=Demon alarmowy
 Name[pt]=Servidor do KAlarm
Index: kalarm/kalarmd/kalarmd.autostart.desktop
===================================================================
--- kalarm/kalarmd/kalarmd.autostart.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kalarm/kalarmd/kalarmd.autostart.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -23,11 +23,14 @@
 Name[is]=KAlarm þjónn
 Name[it]=Demone degli avvisi
 Name[ja]=KAlarm デーモン
+Name[kk]=KAlarm қызметі
 Name[km]=ដេមិន KAlarm
 Name[lt]=KAlarm tarnyba
+Name[mk]=Даемон за КАларм
 Name[ms]=Daemon KAlarm 
 Name[nb]=KAlarm-nisse
 Name[nds]=KAlarm-Dämoon
+Name[ne]=केडीई संसूचक डेइमोन
 Name[nn]=KAlarm-nisse
 Name[pl]=Demon alarmowy
 Name[pt]=Servidor do KAlarm
@@ -49,7 +52,7 @@
 Comment=KAlarm alarm daemon autostart at login
 Comment[af]=Begin KAlarm bediener outomaties tydens aanteken
 Comment[bg]=Автоматично стартиране на процеса на алармата KAlarm при влизане в системата
-Comment[ca]=Dimoni d'inici automàtic de l'alarma KAlarm en l'entrar
+Comment[ca]=Dimoni d'inici automàtic de l'alarma KAlarm en connectar
 Comment[cs]=Automatické spouštění alarmovacího démona při startu
 Comment[da]=KAlarm-alarmdæmon autostart ved login
 Comment[de]=Autostart des KAlarm Erinnerungsprogramms von KOrganizer bei der Anmeldung
@@ -66,11 +69,14 @@
 Comment[is]=Ræsa KAlarm áminningaþjónn sjálfkrafa við byrjun setu
 Comment[it]=Avvio automatico del demone degli avvisi
 Comment[ja]=KAlarm アラームデーモンのログイン時の自動起動
+Comment[kk]=KAlarm қызметі жүйеге кіргенде жегіледі
 Comment[km]=ចាប់ផ្ដើម​ដេមិន​រោទ៍​របស់ KAlarm ពេល​ចូល
 Comment[lt]=KOrganizer/KAlarm priminimų tarnybos automatinis paleidimas prisiregistruojant
+Comment[mk]=Даемон за аларми од КАларм - автом. старт при најава
 Comment[ms]= Automula daemon penggera KAlarm semasa log masuk
 Comment[nb]=start alarmnisse ved innlogging
 Comment[nds]=KAlarm-Dämoon bi't Anmellen automaatsch starten
+Comment[ne]=लगइनमा केडीई संसूचक संसूचक डेइमोन स्वत: सुरुआत हुन्छ
 Comment[nl]=KAlarm alarmdaemon automatisch starten bij login
 Comment[nn]=Start alarmnisse ved innlogging
 Comment[pl]=Demon alarmu KOrganizera uruchamiany przy zalogowaniu
Index: kalarm/kalarmd/admain.cpp
===================================================================
--- kalarm/kalarmd/admain.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kalarm/kalarmd/admain.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,7 +1,7 @@
 /*
  *  admain.cpp  -  kalarmd main program
  *  Program:  KAlarm's alarm daemon (kalarmd)
- *  Copyright (c) 2001, 2004, 2005 by David Jarvie <software@astrojar.org.uk>
+ *  Copyright (c) 2001,2004,2005 by David Jarvie <software@astrojar.org.uk>
  *  Copyright (c) 2000,2001 Cornelius Schumacher <schumacher@kde.org>
  *  Copyright (c) 1997-1999 Preston Brown <pbrown@kde.org>
  *
@@ -41,8 +41,8 @@
 {
 	KAboutData aboutData(DAEMON_APP_NAME, I18N_NOOP("KAlarm Daemon"),
 	                     DAEMON_VERSION, I18N_NOOP("KAlarm Alarm Daemon"), KAboutData::License_GPL,
-	                     "(c) 1997-1999 Preston Brown\n(c) 2000-2001 Cornelius Schumacher\n(c) 2001,2004 David Jarvie", 0,
-	                     "http://www.astrojar.org.uk/linux/kalarm.html");
+	                     "Copyright 1997-1999 Preston Brown\nCopyright 2000-2001 Cornelius Schumacher\nCopyright 2001,2004-2006 David Jarvie", 0,
+	                     "http://www.astrojar.org.uk/kalarm");
 	aboutData.addAuthor("David Jarvie", I18N_NOOP("Maintainer"), "software@astrojar.org.uk");
 	aboutData.addAuthor("Cornelius Schumacher", I18N_NOOP("Author"), "schumacher@kde.org");
 	aboutData.addAuthor("Preston Brown", I18N_NOOP("Original Author"), "pbrown@kde.org");

Zmiany atrybutów dla: kalarm/pixmaps/cr16-action-playsound.png
___________________________________________________________________
Nazwa: svn:mime-type
   - image/png
   + application/octet-stream

Index: kalarm/recurrenceeditprivate.h
===================================================================
--- kalarm/recurrenceeditprivate.h	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kalarm/recurrenceeditprivate.h	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,7 +1,7 @@
 /*
  *  recurrenceeditprivate.h  -  private classes for recurrenceedit.cpp
  *  Program:  kalarm
- *  Copyright (c) 2003, 2005 by David Jarvie <software@astrojar.org.uk>
+ *  Copyright © 2003,2005,2007 by David Jarvie <software@astrojar.org.uk>
  *
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the GNU General Public License as published by
@@ -85,7 +85,7 @@
 		            bool readOnly, QWidget* parent, const char* name = 0);
 		QBitArray        days() const;
 		void             setDays(bool);
-		void             setDays(QBitArray& days);
+		void             setDays(const QBitArray& days);
 		void             setDay(int dayOfWeek);
 		virtual QWidget* validate(QString& errorMessage);
 		virtual void     saveState();
Index: kalarm/Changelog
===================================================================
--- kalarm/Changelog	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kalarm/Changelog	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,7 +1,20 @@
 KAlarm
 
-=== Version 1.4.9 --- 3 January 2007 ===
+=== Version 1.4.11 --- 7 March 2007 ===
+Show file name as a tooltip on sound type combo box when "file" is selected.
 
+=== Version 1.4.10 --- 3 March 2007 ===
+Add play button to sound file selection dialogue.
+Prevent simple repetitions triggering again when KAlarm is restarted.
+Fix recurring alarms being triggered on exception days.
+Fix start-of-day time being ignored for date-only alarms.
+Disable Defer button in new message window when deferral limit has been reached.
+Fix failure to save "Execute in terminal window" option in Preferences dialogue.
+Ensure up-to-date menus are displayed if user has a customised toolbar.
+
+=== Version 1.4.9 (KDE 3.5.6) --- 3 January 2007 ===
+Minor changes.
+
 === Version 1.4.8 --- 28 December 2006 ===
 Fix Find always using first search text entered even after entering a new one.
 
@@ -18,7 +31,7 @@
 Add context help for sound file fade options.
 
 === Version 1.4.5 (KDE 3.5.5) --- 29 September 2006 ===
-Improve edit dialogue layout (Reminder controls moved to below Time box).
+Improve alarm edit dialogue layout (Reminder controls moved to below Time box).
 
 === Version 1.4.4 --- 11 July 2006 ===
 Use an alarm's previous deferral time interval as default for its next deferral.
Index: kalarm/specialactions.h
===================================================================
--- kalarm/specialactions.h	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kalarm/specialactions.h	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,7 +1,7 @@
 /*
  *  specialactions.h  -  widget to specify special alarm actions
  *  Program:  kalarm
- *  Copyright (C) 2004 by David Jarvie <software@astrojar.org.uk>
+ *  Copyright © 2004,2005 by David Jarvie <software@astrojar.org.uk>
  *
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the GNU General Public License as published by
@@ -22,7 +22,7 @@
 #define SPECIALACTIONS_H
 
 #include <kdialogbase.h>
-#include <qgroupbox.h>
+#include <qwidget.h>
 #include <qpushbutton.h>
 
 class KLineEdit;
@@ -53,12 +53,11 @@
 
 
 // Pre- and post-alarm actions widget
-class SpecialActions : public QGroupBox
+class SpecialActions : public QWidget
 {
 		Q_OBJECT
 	public:
 		SpecialActions(QWidget* parent = 0, const char* name = 0);
-		SpecialActions(const QString& frameLabel, QWidget* parent = 0, const char* name = 0);
 		void         setActions(const QString& pre, const QString& post);
 		QString      preAction() const;
 		QString      postAction() const;
@@ -66,7 +65,6 @@
 		bool         isReadOnly() const    { return mReadOnly; }
 
 	private:
-		void         init(const QString& frameLabel);
 		KLineEdit*   mPreAction;
 		KLineEdit*   mPostAction;
 		bool         mReadOnly;
Index: kalarm/kalarmapp.cpp
===================================================================
--- kalarm/kalarmapp.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kalarm/kalarmapp.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,7 +1,7 @@
 /*
  *  kalarmapp.cpp  -  the KAlarm application object
  *  Program:  kalarm
- *  Copyright © 2001-2006 by David Jarvie <software@astrojar.org.uk>
+ *  Copyright © 2001-2007 by David Jarvie <software@astrojar.org.uk>
  *
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the GNU General Public License as published by
@@ -128,6 +128,7 @@
 		mStartOfDay             = Preferences::startOfDay();
 		if (Preferences::hasStartOfDayChanged())
 			mStartOfDay.setHMS(100,0,0);    // start of day time has changed: flag it as invalid
+		DateTime::setStartOfDay(mStartOfDay);
 		mPrefsExpiredColour   = Preferences::expiredColour();
 		mPrefsExpiredKeepDays = Preferences::expiredKeepDays();
 		mPrefsShowTime        = Preferences::showAlarmTime();
@@ -1223,7 +1224,7 @@
 			execAlarm(event, event.firstAlarm(), false);
 		// If it's a recurring alarm, reschedule it for its next occurrence
 		if (!event.recurs()
-		||  event.setNextOccurrence(now, true) == KAEvent::NO_OCCURRENCE)
+		||  event.setNextOccurrence(now) == KAEvent::NO_OCCURRENCE)
 			return true;
 		// It has recurrences in the future
 	}
@@ -1297,8 +1298,8 @@
 				if (alarm.deferred()  &&  event.repeatCount()
 				&&  repeatDT.isValid()  &&  alarm.dateTime() > repeatDT)
 				{
-					// This deferral of a repeated alarm is later than the last occurrence
-					// of the main alarm, so use the deferral alarm instead.
+					// This deferral of a repeated alarm is later than the last previous
+					// occurrence of the main alarm, so use the deferral alarm instead.
 					// If the deferral is not yet due, this prevents the main alarm being
 					// triggered repeatedly. If the deferral is due, this triggers it
 					// in preference to the main alarm.
@@ -1307,11 +1308,8 @@
 					updateCalAndDisplay = false;
 				}
 				// Check if the alarm is due yet.
-				// Just in case it's an invalid time during a daylight savings time
-				// shift, check more carefully if it's today.
-				int secs = alarm.dateTime().secsTo(now);
-				if (secs < 0
-				&&  (alarm.date() != now.date() || alarm.time() > now.time()))
+				int secs = alarm.dateTime(true).secsTo(now);
+				if (secs < 0)
 				{
 					// This alarm is definitely not due yet
 					kdDebug(5950) << "KAlarmApp::handleEvent(): alarm " << alarm.type() << ": not due\n";
@@ -1332,20 +1330,9 @@
 					if (alarmToExecute.valid())
 						continue;
 
-					// Set the time to be shown if it's a display alarm
+					// Set the time to display if it's a display alarm
 					alarm.setTime(now);
 				}
-				if (event.repeatCount()  &&  alarm.type() == KAAlarm::MAIN_ALARM)
-				{
-					// Alarm has a simple repetition. Since its time in the calendr remains the same
-					// until its repetitions are finished, adjust its time to the correct repetition
-					KAEvent::OccurType type = event.previousOccurrence(now.addSecs(1), repeatDT, true);
-					if (type & KAEvent::OCCURRENCE_REPEAT)
-					{
-						alarm.setTime(repeatDT);
-						secs = repeatDT.secsTo(now);
-					}
-				}
 				if (alarm.lateCancel())
 				{
 					// Alarm is due, and it is to be cancelled if too late.
@@ -1532,8 +1519,7 @@
 void KAlarmApp::rescheduleAlarm(KAEvent& event, const KAAlarm& alarm, bool updateCalAndDisplay)
 {
 	kdDebug(5950) << "KAlarmApp::rescheduleAlarm()" << endl;
-	bool update        = false;
-	bool updateDisplay = false;
+	bool update = false;
 	if (alarm.reminder()  ||  alarm.deferred())
 	{
 		// It's an advance warning alarm or an extra deferred alarm, so delete it
@@ -1548,36 +1534,33 @@
 	}
 	else
 	{
-		QDateTime now = QDateTime::currentDateTime();
-		if (event.repeatCount()  &&  event.mainEndRepeatTime() > now)
-			updateDisplay = true;    // there are more repetitions to come, so just update time in alarm list
-		else
+		// Reschedule the alarm for its next recurrence.
+		KAEvent::OccurType type = event.setNextOccurrence(QDateTime::currentDateTime());
+		switch (type)
 		{
-			// The alarm's repetitions (if any) are finished.
-			// Reschedule it for its next recurrence.
-			switch (event.setNextOccurrence(now))
-			{
-				case KAEvent::NO_OCCURRENCE:
-					// All repetitions are finished, so cancel the event
-					cancelAlarm(event, alarm.type(), updateCalAndDisplay);
+			case KAEvent::NO_OCCURRENCE:
+				// All repetitions are finished, so cancel the event
+				cancelAlarm(event, alarm.type(), updateCalAndDisplay);
+				break;
+			default:
+				if (!(type & KAEvent::OCCURRENCE_REPEAT))
 					break;
-				case KAEvent::RECURRENCE_DATE:
-				case KAEvent::RECURRENCE_DATE_TIME:
-				case KAEvent::LAST_RECURRENCE:
-					// The event is due by now and repetitions still remain, so rewrite the event
-					if (updateCalAndDisplay)
-						update = true;
-					else
-					{
-						event.cancelCancelledDeferral();
-						event.setUpdated();    // note that the calendar file needs to be updated
-					}
-					break;
-				case KAEvent::FIRST_OR_ONLY_OCCURRENCE:
-					// The first occurrence is still due?!?, so don't do anything
-				default:
-					break;
-			}
+				// Next occurrence is a repeat, so fall through to recurrence handling
+			case KAEvent::RECURRENCE_DATE:
+			case KAEvent::RECURRENCE_DATE_TIME:
+			case KAEvent::LAST_RECURRENCE:
+				// The event is due by now and repetitions still remain, so rewrite the event
+				if (updateCalAndDisplay)
+					update = true;
+				else
+				{
+					event.cancelCancelledDeferral();
+					event.setUpdated();    // note that the calendar file needs to be updated
+				}
+				break;
+			case KAEvent::FIRST_OR_ONLY_OCCURRENCE:
+				// The first occurrence is still due?!?, so don't do anything
+				break;
 		}
 		if (event.deferred())
 		{
@@ -1591,11 +1574,6 @@
 		event.cancelCancelledDeferral();
 		KAlarm::updateEvent(event, 0);     // update the window lists and calendar file
 	}
-	else if (updateDisplay)
-	{
-		Daemon::eventHandled(event.id(), false);
-		AlarmListView::modifyEvent(event, 0);
-	}
 }
 
 /******************************************************************************
@@ -1918,7 +1896,7 @@
 					delete dialogs;
 					if (!pd->tempFile())
 					{
-						errmsg += "\n";
+						errmsg += '\n';
 						errmsg += proc->command();
 					}
 					KMessageBox::error(pd->messageBoxParent, errmsg);
Index: kalarm/sounddlg.cpp
===================================================================
--- kalarm/sounddlg.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kalarm/sounddlg.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,7 +1,7 @@
 /*
  *  sounddlg.cpp  -  sound file selection and configuration dialog
  *  Program:  kalarm
- *  Copyright © 2005 by David Jarvie <software@astrojar.org.uk>
+ *  Copyright © 2005,2007 by David Jarvie <software@astrojar.org.uk>
  *
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the GNU General Public License as published by
@@ -26,12 +26,18 @@
 #include <qhbox.h>
 #include <qgroupbox.h>
 #include <qlayout.h>
+#include <qfile.h>
+#include <qdir.h>
 #include <qwhatsthis.h>
 #include <qtooltip.h>
 
 #include <klocale.h>
 #include <kstandarddirs.h>
 #include <kiconloader.h>
+#include <kaudioplayer.h>
+#include <kmessagebox.h>
+#include <kio/netaccess.h>
+#include <kdebug.h>
 
 #include "checkbox.h"
 #include "functions.h"
@@ -62,9 +68,17 @@
 	setMainWidget(page);
 	QVBoxLayout* layout = new QVBoxLayout(page, 0, spacingHint());
 
-	// File name edit box
+	// File play button
 	QHBox* box = new QHBox(page);
 	layout->addWidget(box);
+	mFilePlay = new QPushButton(box);
+	mFilePlay->setPixmap(SmallIcon("player_play"));
+	mFilePlay->setFixedSize(mFilePlay->sizeHint());
+	connect(mFilePlay, SIGNAL(clicked()), SLOT(playSound()));
+	QToolTip::add(mFilePlay, i18n("Test the sound"));
+	QWhatsThis::add(mFilePlay, i18n("Play the selected sound file."));
+
+	// File name edit box
 	mFileEdit = new LineEdit(LineEdit::Url, box);
 	mFileEdit->setAcceptDrops(true);
 	QWhatsThis::add(mFileEdit, i18n("Enter the name or URL of a sound file to play."));
@@ -166,8 +180,8 @@
 }
 
 /******************************************************************************
- * Set the read-only status of the dialogue.
- */
+* Set the read-only status of the dialogue.
+*/
 void SoundDlg::setReadOnly(bool readOnly)
 {
 	if (readOnly != mReadOnly)
@@ -185,22 +199,11 @@
 }
 
 /******************************************************************************
- * Return the entered repetition and volume settings:
- * 'volume' is in range 0 - 1, or < 0 if volume is not to be set.
- * 'fadeVolume is similar, with 'fadeTime' set to the fade interval in seconds.
- * Reply = whether to repeat or not.
- */
-QString SoundDlg::getFile() const
-{
-	return mFileEdit->text();
-}
-
-/******************************************************************************
- * Return the entered repetition and volume settings:
- * 'volume' is in range 0 - 1, or < 0 if volume is not to be set.
- * 'fadeVolume is similar, with 'fadeTime' set to the fade interval in seconds.
- * Reply = whether to repeat or not.
- */
+* Return the entered repetition and volume settings:
+* 'volume' is in range 0 - 1, or < 0 if volume is not to be set.
+* 'fadeVolume is similar, with 'fadeTime' set to the fade interval in seconds.
+* Reply = whether to repeat or not.
+*/
 bool SoundDlg::getSettings(float& volume, float& fadeVolume, int& fadeSeconds) const
 {
 	volume = mVolumeCheckbox->isChecked() ? (float)mVolumeSlider->value() / 100 : -1;
@@ -242,12 +245,14 @@
 {
 	if (mReadOnly)
 		reject();
+	if (!checkFile())
+		return;
 	accept();
 }
 
 /******************************************************************************
- * Called when the file browser button is clicked.
- */
+* Called when the file browser button is clicked.
+*/
 void SoundDlg::slotPickFile()
 {
 	QString url = SoundPicker::browseFile(mDefaultDir, mFileEdit->text());
@@ -256,8 +261,81 @@
 }
 
 /******************************************************************************
- * Called when the Set Volume checkbox is toggled.
- */
+* Called when the file play button is clicked.
+*/
+void SoundDlg::playSound()
+{
+	if (checkFile())
+		KAudioPlayer::play(QFile::encodeName(mFileName));
+}
+
+/******************************************************************************
+* Check whether the specified sound file exists.
+* Note that KAudioPlayer::play() can only cope with local files.
+*/
+bool SoundDlg::checkFile()
+{
+	QString file = mFileEdit->text();
+	KURL url;
+	if (KURL::isRelativeURL(file))
+	{
+		// It's not an absolute URL, so check for an absolute path
+		QFileInfo f(file);
+		if (!f.isRelative())
+			url.setPath(file);
+	}
+	else
+		url = KURL::fromPathOrURL(file);   // it's an absolute URL
+	if (!url.isEmpty())
+	{
+		// It's an absolute path or URL.
+		// Only allow local files for KAudioPlayer.
+		if (url.isLocalFile()  &&  KIO::NetAccess::exists(url, true, this))
+		{
+			mFileName = url.path();
+			return true;
+		}
+	}
+	else
+	{
+		// It's a relative path.
+		// Find the first sound resource that contains files.
+		QStringList soundDirs = KGlobal::dirs()->resourceDirs("sound");
+		if (!soundDirs.isEmpty())
+		{
+			QDir dir;
+			dir.setFilter(QDir::Files | QDir::Readable);
+			for (QStringList::ConstIterator it = soundDirs.begin();  it != soundDirs.end();  ++it)
+			{
+				dir = *it;
+				if (dir.isReadable() && dir.count() > 2)
+				{
+					url.setPath(*it);
+					url.addPath(file);
+					if (KIO::NetAccess::exists(url, true, this))
+					{
+						mFileName = url.path();
+						return true;
+					}
+				}
+			}
+		}
+		url.setPath(QDir::homeDirPath());
+		url.addPath(file);
+		if (KIO::NetAccess::exists(url, true, this))
+		{
+			mFileName = url.path();
+			return true;
+		}
+	}
+	KMessageBox::sorry(this, i18n("File not found"));
+	mFileName = QString::null;
+	return false;
+}
+
+/******************************************************************************
+* Called when the Set Volume checkbox is toggled.
+*/
 void SoundDlg::slotVolumeToggled(bool on)
 {
 	mVolumeSlider->setEnabled(on);
@@ -266,8 +344,8 @@
 }
 
 /******************************************************************************
- * Called when the Fade checkbox is toggled.
- */
+* Called when the Fade checkbox is toggled.
+*/
 void SoundDlg::slotFadeToggled(bool on)
 {
 	mFadeBox->setEnabled(on);
Index: kalarm/prefdlg.cpp
===================================================================
--- kalarm/prefdlg.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kalarm/prefdlg.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -310,7 +310,7 @@
 	QWhatsThis::add(mConfirmAlarmDeletion,
 	      i18n("Check to be prompted for confirmation each time you delete an alarm."));
 	itemBox->setStretchFactor(new QWidget(itemBox), 1);    // left adjust the controls
-	itemBox->setFixedHeight(box->sizeHint().height());
+	itemBox->setFixedHeight(itemBox->sizeHint().height());
 
 	// Expired alarms
 	group = new QGroupBox(i18n("Expired Alarms"), mPage);
@@ -1074,7 +1074,7 @@
 	Preferences::mDefaultSoundRepeat      = mSoundRepeat->isChecked();
 #endif
 	Preferences::mDefaultCmdScript        = mCmdScript->isChecked();
-	Preferences::mDefaultCmdLogFile       = (mCmdXterm->isChecked() ? EditAlarmDlg::EXEC_IN_TERMINAL : EditAlarmDlg::DISCARD_OUTPUT);
+	Preferences::mDefaultCmdLogType       = (mCmdXterm->isChecked() ? EditAlarmDlg::EXEC_IN_TERMINAL : EditAlarmDlg::DISCARD_OUTPUT);
 	Preferences::mDefaultEmailBcc         = mEmailBcc->isChecked();
 	Preferences::mDefaultCopyToKOrganizer = mCopyToKOrganizer->isChecked();
 	Preferences::mDefaultLateCancel       = mLateCancel->isChecked() ? 1 : 0;
Index: kalarm/main.cpp
===================================================================
--- kalarm/main.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kalarm/main.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,7 +1,7 @@
 /*
  *  main.cpp
  *  Program:  kalarm
- *  Copyright © 2001-2006 by David Jarvie <software@astrojar.org.uk>
+ *  Copyright © 2001-2007 by David Jarvie <software@astrojar.org.uk>
  *
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the GNU General Public License as published by
@@ -110,7 +110,7 @@
 	KAboutData aboutData(PROGRAM_NAME, I18N_NOOP("KAlarm"), KALARM_VERSION,
 		I18N_NOOP("Personal alarm message, command and email scheduler for KDE"),
 		KAboutData::License_GPL,
-		"(c) 2001-2006, David Jarvie", 0, "http://www.astrojar.org.uk/linux/kalarm.html");
+		"Copyright 2001-2007, David Jarvie", 0, "http://www.astrojar.org.uk/kalarm");
 	aboutData.addAuthor("David Jarvie", 0, "software@astrojar.org.uk");
 
 	KCmdLineArgs::init(argc, argv, &aboutData);
Index: kalarm/lib/synchtimer.cpp
===================================================================
--- kalarm/lib/synchtimer.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kalarm/lib/synchtimer.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -31,7 +31,7 @@
 
 SynchTimer::SynchTimer()
 {
-	mTimer = new QTimer(this);
+	mTimer = new QTimer(this, "mTimer");
 }
 
 SynchTimer::~SynchTimer()
Index: kalarm/kalarmui.rc
===================================================================
--- kalarm/kalarmui.rc	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kalarm/kalarmui.rc	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,5 +1,5 @@
 <!DOCTYPE kpartgui>
-<kpartgui name="kalarm" >
+<kpartgui name="kalarm" version="143" >
  <ToolBar noMerge="1" name="mainToolBar" >
   <Action name="new" />
   <Action name="newFromTempl" />
Index: kalarm/kalarm.desktop
===================================================================
--- kalarm/kalarm.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kalarm/kalarm.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -8,7 +8,8 @@
 Name[eo]=Alarmilo
 Name[hi]=के-अलार्म
 Name[ko]=KDE 알람
-Name[mk]=Роковник
+Name[mk]=КАларм
+Name[ne]=केडीई संसूचक
 Name[nso]=KAlamo
 Name[pl]=Alarm
 Name[sv]=Kalarm
@@ -43,11 +44,14 @@
 GenericName[is]=Áminningakerfi
 GenericName[it]=Programmatore degli avvisi personali
 GenericName[ja]=個人アラームスケジューラ
+GenericName[kk]=Дербес ескертулер жоспарлағышы
 GenericName[km]=កម្មវិធី​កំណត់​ម៉ោង​រោទ៍​ផ្ទាល់​ខ្លួន
 GenericName[lt]=Asmeninių žinučių-priminimų planuoklis
+GenericName[mk]=Закажување лични аларми
 GenericName[ms]=Penjadual Penggera Peribadi 
 GenericName[nb]=Personlig varslingsplanlegger
 GenericName[nds]=Persöönlich Anstöötgever
+GenericName[ne]=व्यक्तिगत संसूचक अनुसूचक
 GenericName[nl]=Persoonlijke alarmplanner
 GenericName[nn]=Planleggar for alarmar/påminningsmeldingar
 GenericName[pl]=Program przypominający o zdarzeniach
Index: kalarm/specialactions.cpp
===================================================================
--- kalarm/specialactions.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kalarm/specialactions.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,7 +1,7 @@
 /*
  *  specialactions.cpp  -  widget to specify special alarm actions
  *  Program:  kalarm
- *  Copyright (c) 2004, 2005 by David Jarvie <software@astrojar.org.uk>
+ *  Copyright © 2004,2005 by David Jarvie <software@astrojar.org.uk>
  *
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the GNU General Public License as published by
@@ -131,28 +131,10 @@
 =============================================================================*/
 
 SpecialActions::SpecialActions(QWidget* parent, const char* name)
-	: QGroupBox(parent, name)
+	: QWidget(parent, name),
+	  mReadOnly(false)
 {
-	setFrameStyle(QFrame::NoFrame);
-	init(QString::null);
-}
-
-SpecialActions::SpecialActions(const QString& frameLabel, QWidget* parent, const char* name)
-	: QGroupBox(frameLabel, parent, name)
-{
-	init(frameLabel);
-}
-
-void SpecialActions::init(const QString& frameLabel)
-{
-	mReadOnly = false;
-
 	QBoxLayout* topLayout = new QVBoxLayout(this, 0, KDialog::spacingHint());
-	if (!frameLabel.isEmpty())
-	{
-		topLayout->setMargin(KDialog::marginHint());
-		topLayout->addSpacing(fontMetrics().lineSpacing()/2);
-	}
 
 	// Pre-alarm action
 	QLabel* label = new QLabel(i18n("Pre-a&larm action:"), this);
Index: kalarm/recurrenceedit.cpp
===================================================================
--- kalarm/recurrenceedit.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kalarm/recurrenceedit.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,7 +1,7 @@
 /*
  *  recurrenceedit.cpp  -  widget to edit the event's recurrence definition
  *  Program:  kalarm
- *  Copyright © 2002-2006 by David Jarvie <software@astrojar.org.uk>
+ *  Copyright © 2002-2007 by David Jarvie <software@astrojar.org.uk>
  *
  *  Based originally on KOrganizer module koeditorrecurrence.cpp,
  *  Copyright (c) 2000,2001 Cornelius Schumacher <schumacher@kde.org>
@@ -1093,7 +1093,7 @@
 /******************************************************************************
  * Tick/untick each day of the week according to the specified bits.
  */
-void DayWeekRule::setDays(QBitArray& days)
+void DayWeekRule::setDays(const QBitArray& days)
 {
 	for (int i = 0;  i < 7;  ++i)
 	{
Index: kalarm/functions.cpp
===================================================================
--- kalarm/functions.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kalarm/functions.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,7 +1,7 @@
 /*
  *  functions.cpp  -  miscellaneous functions
  *  Program:  kalarm
- *  Copyright © 2001-2006 by David Jarvie <software@astrojar.org.uk>
+ *  Copyright © 2001-2007 by David Jarvie <software@astrojar.org.uk>
  *
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the GNU General Public License as published by
@@ -430,8 +430,8 @@
 		QDateTime now = QDateTime::currentDateTime();
 		if (event.occursAfter(now, true))
 		{
-			if (event.recurs())
-				event.setNextOccurrence(now, true);   // skip any recurrences in the past
+			if (event.recurs()  ||  event.repeatCount())
+				event.setNextOccurrence(now);   // skip any recurrences in the past
 			event.setArchive();    // ensure that it gets re-archived if it is deleted
 
 			// Save the event details in the calendar file, and get the new event ID
@@ -809,14 +809,13 @@
 		QString issue = nums[2];
 		if (!issue.at(0).isDigit())
 			return 0;
-		v = issue.toInt();   // issue number
-		vernum += (v < 99 ? v : 99);
+		count = issue.length();
+		int i;
+		for (i = 0;  i < count && issue.at(i).isDigit();  ++i) ;
 		if (subVersion)
-		{
-			int i;
-			for (i = 1;  const_cast<const QString&>(issue).at(i).isDigit();  ++i) ;
 			*subVersion = issue.mid(i);
-		}
+		v = issue.left(i).toInt();   // issue number
+		vernum += (v < 99 ? v : 99);
 	}
 	return vernum;
 }
Index: kalarm/kalarm.tray.desktop
===================================================================
--- kalarm/kalarm.tray.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kalarm/kalarm.tray.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -8,7 +8,8 @@
 Name[eo]=Alarmilo
 Name[hi]=के-अलार्म
 Name[ko]=KDE 알람
-Name[mk]=Роковник
+Name[mk]=КАларм
+Name[ne]=केडीई संसूचक
 Name[nso]=KAlamo
 Name[pl]=Alarm
 Name[sv]=Kalarm
@@ -43,11 +44,14 @@
 Comment[is]=Áminningakerfi: ræsir sem táknmynd á spjaldinu
 Comment[it]=Programmatore personale degli avvisi: all'avvio si mette nel vassoio di sistema
 Comment[ja]=個人アラームスケジューラ: システムトレイアイコンで起動
+Comment[kk]=Дербес ескертулер жоспарлағышы: жүйелік сөреде орналасады
 Comment[km]=កម្មវិធី​កំណត់​ម៉ោង​រោទ៍​ផ្ទាល់​ខ្លួន ៖ ចាប់ផ្ដើម​ជា​រូបតំណាង​ក្នុង​ថាស​ប្រព័ន្ធ
 Comment[lt]=Žinučių-priminimų planuoklis: paleisti kaip sisteminio dėklo ženkliuką
+Comment[mk]=Закажување лични аларми: стартувај во сис. лента
 Comment[ms]=Penjadual Penggera Peribadi: mulakan sebagai ikon dulang sistem
 Comment[nb]=Tidsplanlegger for alarm- og påminnelsesbeskjeder: start som ikon i systemkurven
 Comment[nds]=Anstöötgever binnen den Systeemafsnitt starten
+Comment[ne]=व्यक्तिगत संसूचक अनुसूचक: प्रणाली ट्रे प्रतिमा अनुरुप सुरु गर्नुहोस्
 Comment[nl]=Persoonlijke alarmplanner: opstarten in systeemvak
 Comment[nn]=Personleg alarmplanleggjar. Start som ikon i systemtrauet
 Comment[pl]=Program przypominający o zdarzeniach: startuje w tacce systemowej
Index: kalarm/soundpicker.cpp
===================================================================
--- kalarm/soundpicker.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kalarm/soundpicker.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,7 +1,7 @@
 /*
  *  soundpicker.cpp  -  widget to select a sound file or a beep
  *  Program:  kalarm
- *  Copyright © 2002,2004-2006 by David Jarvie <software@astrojar.org.uk>
+ *  Copyright © 2002,2004-2007 by David Jarvie <software@astrojar.org.uk>
  *
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the GNU General Public License as published by
@@ -83,6 +83,7 @@
 	mFilePicker->setPixmap(SmallIcon("playsound"));
 	mFilePicker->setFixedSize(mFilePicker->sizeHint());
 	connect(mFilePicker, SIGNAL(clicked()), SLOT(slotPickFile()));
+	QToolTip::add(mFilePicker, i18n("Configure sound file"));
 	QWhatsThis::add(mFilePicker, i18n("Configure a sound file to play when the alarm is displayed."));
 	soundLayout->addWidget(mFilePicker);
 
@@ -187,9 +188,12 @@
 	mFadeVolume  = fadeVolume;
 	mFadeSeconds = fadeSeconds;
 	mRepeat      = repeat;
-	QToolTip::add(mFilePicker, mFile);
 	mTypeCombo->setCurrentItem(type);  // this doesn't trigger slotTypeSelected()
 	mFilePicker->setEnabled(type == PLAY_FILE);
+	if (type == PLAY_FILE)
+		QToolTip::add(mTypeCombo, mFile);
+	else
+		QToolTip::remove(mTypeCombo);
 	mLastType = type;
 }
 
@@ -201,8 +205,12 @@
 	Type newType = static_cast<Type>(id);
 	if (newType == mLastType)
 		return;
+	QString tooltip;
 	if (mLastType == PLAY_FILE)
+	{
 		mFilePicker->setEnabled(false);
+		QToolTip::remove(mTypeCombo);
+	}
 	else if (newType == PLAY_FILE)
 	{
 		if (mFile.isEmpty())
@@ -212,6 +220,7 @@
 				return;    // revert to previously selected type
 		}
 		mFilePicker->setEnabled(true);
+		QToolTip::add(mTypeCombo, mFile);
 	}
 	mLastType = newType;
 }
@@ -248,12 +257,14 @@
 		mDefaultDir = dlg.defaultDir();
 	}
 #endif
-	QToolTip::add(mFilePicker, mFile);
 	if (mFile.isEmpty())
 	{
 		// No audio file is selected, so revert to previously selected option
 		mTypeCombo->setCurrentItem(mLastType);
+		QToolTip::remove(mTypeCombo);
 	}
+	else
+		QToolTip::add(mTypeCombo, mFile);
 }
 
 /******************************************************************************
Index: kalarm/birthdaydlg.cpp
===================================================================
--- kalarm/birthdaydlg.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kalarm/birthdaydlg.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,7 +1,7 @@
 /*
  *  birthdaydlg.cpp  -  dialog to pick birthdays from address book
  *  Program:  kalarm
- *  Copyright © 2002-2006 by David Jarvie <software@astrojar.org.uk>
+ *  Copyright © 2002-2007 by David Jarvie <software@astrojar.org.uk>
  *
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the GNU General Public License as published by
@@ -326,8 +326,8 @@
 				QValueList<int> months;
 				months.append(date.month());
 				event.setRecurAnnualByDate(1, months, 0, Preferences::defaultFeb29Type(), -1, QDate());
-				event.setNextOccurrence(todayNoon, true);
 				event.setRepetition(mSimpleRepetition->interval(), mSimpleRepetition->count());
+				event.setNextOccurrence(todayNoon);
 				if (reminder)
 					event.setReminder(reminder, false);
 				if (mSpecialActionsButton)
Index: korn/KOrn.desktop
===================================================================
--- korn/KOrn.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ korn/KOrn.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -26,13 +26,16 @@
 GenericName[is]=Póst áminning
 GenericName[it]=Programma per controllare la posta
 GenericName[ja]=メールの通知
+GenericName[kk]=Пошта келген туралы хабарлау
 GenericName[km]=សញ្ញា​ជូនដំណឹងសំបុត្រ
 GenericName[lt]=Pašto pranešėjas
 GenericName[lv]=Pasta Brīdinājums
+GenericName[mk]=Известување за е-пошта
 GenericName[ms]=Celik Mel
 GenericName[mt]=Twissija tal-imejl
 GenericName[nb]=E-post-varsling
 GenericName[nds]=Nettpost-Benarichten
+GenericName[ne]=सावधानी पत्र
 GenericName[nl]=E-mailnotificatie
 GenericName[nn]=E-postvarsling
 GenericName[pl]=Program powiadamiający o poczcie
@@ -66,6 +69,7 @@
 Name=Korn
 Name[eo]=Korno
 Name[hi]=कॉर्न
+Name[ne]=कर्न
 Name[ta]=கார்ன்
 Name[zh_TW]=Korn 信件通知
 X-DCOP-ServiceType=Unique
Index: korn/pop3_proto.cpp
===================================================================
--- korn/pop3_proto.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ korn/pop3_proto.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -21,6 +21,8 @@
 
 #include "account_input.h"
 
+#include <kdebug.h>
+
 #include <qwidget.h>
 #include <qobject.h>
 #include <qstringlist.h>
Index: korn/kio_proto.cpp
===================================================================
--- korn/kio_proto.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ korn/kio_proto.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -20,6 +20,7 @@
 #include "kio_proto.h"
 
 #include <kconfig.h>
+#include <kdebug.h>
 
 #include <qmap.h>
 
@@ -64,13 +65,13 @@
 
 	if( map->contains( "metadata" ) )
 	{
-		QStringList list = QStringList::split( *map->find( "metadata" ), "," );
+		QStringList list = QStringList::split( ",", *map->find( "metadata" ) );
 		QStringList::Iterator it;
 		for( it = list.begin(); it != list.end(); ++it )
 		{
 			int split = (*it).find( '=' );
 
-			map->insert( (*it).left( split ), (*it).right( (*it).length() - split - 1 ) );
+			metadata->insert( (*it).left( split ), (*it).right( (*it).length() - split - 1 ) );
 		}
 	}
 
Index: korn/mailsubject.h
===================================================================
--- korn/mailsubject.h	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ korn/mailsubject.h	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -117,7 +117,7 @@
 	 * Return the size of the full mail.
 	 * @return the size of the full mail.
 	 */
-	const int getSize() const {return _size;}
+	int getSize() const {return _size;}
 
 	/**
 	 * Set the mails date in seconds since 1970-01-01 00:00:00.
@@ -129,7 +129,7 @@
 	 * Return the mails date in seconds since 1970-01-01 00:00:00.
 	 * @return the mails date.
 	 */
-	const int getDate() const {return _date;}
+	int getDate() const {return _date;}
 
 	/**
 	 * Return a string representation of this (for debugging purposes only)
Index: korn/Makefile.am
===================================================================
--- korn/Makefile.am	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ korn/Makefile.am	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -114,7 +114,7 @@
 		-lqt -lkdeui -lkdecore
 
 messages: rc.cpp
-	$(XGETTEXT) *.{h,cpp} -o $(podir)/korn.pot
+	$(XGETTEXT) *.h *.cpp -o $(podir)/korn.pot
 
 KDE_ICON = korn
 
Index: libkpimidentities/identity.h
===================================================================
--- libkpimidentities/identity.h	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkpimidentities/identity.h	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -59,7 +59,7 @@
 
   /** Set the signature text and mark this signature as being of
       "inline text" type. */
-  void setText( const QString & text ) { mText = text; mType = Inlined; }
+  void setText( const QString & text ) { mText = text; }
   QString text() const { return mText; }
 
   /** Set the signature URL and mark this signature as being of
@@ -69,6 +69,7 @@
 
   /// @return the type of signature (ie. way to obtain the signature text)
   Type type() const { return mType; }
+  void setType( Type type ) { mType = type; }
 
 protected:
   void writeConfig( KConfigBase * config ) const;
Index: libkpimidentities/identity.cpp
===================================================================
--- libkpimidentities/identity.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkpimidentities/identity.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -177,7 +177,6 @@
   QString sigType = config->readEntry( sigTypeKey );
   if ( sigType == sigTypeInlineValue ) {
     mType = Inlined;
-    mText = config->readEntry( sigTextKey );
   } else if ( sigType == sigTypeFileValue ) {
     mType = FromFile;
     mUrl = config->readPathEntry( sigFileKey );
@@ -187,6 +186,7 @@
   } else {
     mType = Disabled;
   }
+  mText = config->readEntry( sigTextKey );
 }
 
 void Signature::writeConfig( KConfigBase * config ) const
@@ -194,7 +194,6 @@
   switch ( mType ) {
   case Inlined:
     config->writeEntry( sigTypeKey, sigTypeInlineValue );
-    config->writeEntry( sigTextKey, mText );
     break;
   case FromFile:
     config->writeEntry( sigTypeKey, sigTypeFileValue );
@@ -208,6 +207,7 @@
     config->writeEntry( sigTypeKey, sigTypeDisabledValue );
   default: ;
   }
+  config->writeEntry( sigTextKey, mText );
 }
 
 QDataStream & KPIM::operator<<( QDataStream & stream, const KPIM::Signature & sig ) {
Index: Mainpage.dox
===================================================================
--- Mainpage.dox	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ Mainpage.dox	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -87,9 +87,6 @@
         * - <a href="kpilot/lib/html/index.html"><b>kpilot library</b></a>
         *   (<a href="kpilot/lib/html/classes.html">classes</a>)\n
         *   <i>KPilot Library.</i>
-        * - <a href="ksync/html/index.html"><b>ksync</b></a>
-        *   (<a href="ksync/html/classes.html">classes</a>)\n
-        *   <i>A generic library for syncing collections of data entries.</i>
 	* </td>
 	* </tr></table>
         *
Index: kaddressbook/interfaces/kaddressbook_extension.desktop
===================================================================
--- kaddressbook/interfaces/kaddressbook_extension.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kaddressbook/interfaces/kaddressbook_extension.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -4,10 +4,10 @@
 X-KDE-ServiceType=KAddressBook/Extension
 Comment=KAddressBook Extension Plugin
 Comment[af]=KAddressBook uitbrei inprop module
-Comment[be]=Дапаўненьне K Адраснай кнігі "Пашырэньне"
+Comment[be]=Дапаўненне K Адраснай кнігі "Пашырэнне"
 Comment[bg]=Приставка-разширение за адресника
 Comment[bs]=KAddressBook dodatak proširenja
-Comment[ca]=Endollable Extension per a KAddressBook
+Comment[ca]=Endollable Extension per al KAddressBook
 Comment[cs]=Rozšiřující modul pro Knihu adres
 Comment[cy]=Ategyn Estyniad KLlyfrCyfeiriadau
 Comment[da]=KAddressBook udvidelsesplugin
@@ -26,11 +26,14 @@
 Comment[is]=KAddressbook viðbótar íforrit
 Comment[it]=Plugin estensione di KAddressbook
 Comment[ja]=KAddressbook 拡張プラグイン
+Comment[kk]=KAddressBook кеңейту модулі
 Comment[km]=កម្មវិធី​ជំនួយ​ផ្នែក​បន្ថែម​របស់ KAddressBook 
 Comment[lt]=KAddressBook praplėtimo priedas
+Comment[mk]=Приклучок за екстензии во КАдресар
 Comment[ms]=Plug masuk Sambungan KAddressBook
 Comment[nb]=KAddressbook-programtillegg for utvidelser
 Comment[nds]=Verwiedernmodüul för KAdressbook
+Comment[ne]=केडीई ठेगाना पुस्तिका विस्तार प्लगइन
 Comment[nl]=KAddressBook Extensie Plugin
 Comment[nn]=Programtillegg for utviding av KDE-adresseboka
 Comment[pl]=Wtyczka rozszerzenia dla KAddressBook
Index: kaddressbook/interfaces/kaddressbook_xxport.desktop
===================================================================
--- kaddressbook/interfaces/kaddressbook_xxport.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kaddressbook/interfaces/kaddressbook_xxport.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -4,8 +4,8 @@
 X-KDE-ServiceType=KAddressBook/XXPort
 Comment=KAddressBook Import/Export Plugin
 Comment[af]=KAddressBook Invoer/Uitvoer inprop module
-Comment[be]=Дапаўненьне K Адраснай кнігі "Імпарт/Экспарт"
-Comment[bg]=Приставка за импорт/експорт на данни от адресника
+Comment[be]=Дапаўненне K Адраснай кнігі "Імпарт/Экспарт"
+Comment[bg]=Приставка за импортиране/експортиране на данни от адресника
 Comment[br]=Lugent enporzh/ezporzh evit KAddressBook
 Comment[bs]=KAddressBook dodatak za uvoz/izvoz
 Comment[ca]=Endollable d'importació/exportació per a la llibreta d'adreces
@@ -27,11 +27,14 @@
 Comment[is]=KAddressbook flytja inn/út íforrit
 Comment[it]=Plugin importa/esporta di KAddressbook
 Comment[ja]=KAddressbook インポート/エクスポートプラグイン
+Comment[kk]=KAddressBook импорт/экспорт модулі
 Comment[km]=កម្មវិធី​ជំនួយ​នាំចូល/នាំចេញ​របស់ KAddressBook
 Comment[lt]=KAddressBook importo/eksporto priedas
+Comment[mk]=Приклучок за внесување/изнесување во КАдресар
 Comment[ms]=Plug masuk Import Eksport KAddressBook
 Comment[nb]=KAddressbook-programtillegg for import/eksport
 Comment[nds]=Import-/Exportmoduul för KAdressbook
+Comment[ne]=केडीई ठेगाना पुस्तिका आयात/निर्यात प्लगइन
 Comment[nn]=Programtillegg for importering/ekportering i KDE-adresseboka
 Comment[pl]=Wtyczka importu/eksportu dla KAddressBook
 Comment[pt]='Plugin' de Importação/Exportação do KAddressbook
Index: kaddressbook/interfaces/kaddressbook_contacteditorwidget.desktop
===================================================================
--- kaddressbook/interfaces/kaddressbook_contacteditorwidget.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kaddressbook/interfaces/kaddressbook_contacteditorwidget.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -22,12 +22,15 @@
 Comment[hu]=KAddressBook névjegyszerkesztő bővítőmodul
 Comment[is]=KAddressbook tengiliðaritils íforrit
 Comment[it]=Plugin editor dei contatti di KAddressbook
-Comment[ja]=KAddressbook コンタクト エディタ ウィジェット プラグイン
+Comment[ja]=KAddressbook 連絡先エディタ ウィジェット プラグイン
+Comment[kk]=Адрестік кітапшаның контактты өңдеу модулі
 Comment[km]=កម្មវិធី​ជំនួយ​ធាតុ​ក្រាហ្វិក​កម្មវិធី​និពន្ធ​ទំនាក់ទំនង​របស់ KAddressBook
 Comment[lt]=KAddressBook kontaktų redaktoriaus valdiklių priedas
+Comment[mk]=Приклучок за уредување контакти во КАдресар
 Comment[ms]=Plugin Widget Editor Orang Hubungan KAddressBook
 Comment[nb]=KAddressbook programtillegg for kontakt redigeringselement
 Comment[nds]=Editormoduul för KAdressbook-Kontakten
+Comment[ne]=केडीई ठेगाना पुस्तिका सम्पर्क सम्पादक विजेट प्लगइन
 Comment[nl]=KAddressBook Contacteditor-plugin
 Comment[nn]=Programtillegg for kontaktredigering i KDE-adresseboka
 Comment[pl]=Wtyczka okna edycji wizytówki dla KAddressBook
Index: kaddressbook/imagewidget.h
===================================================================
--- kaddressbook/imagewidget.h	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kaddressbook/imagewidget.h	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -32,15 +32,6 @@
 
 #include "contacteditorwidget.h"
 
-#include <librss/global.h>
-
-namespace RSS {
-class Loader;
-class Document;
-}
-
-using namespace RSS;
-
 /**
   Small helper class
  */
@@ -49,17 +40,13 @@
   Q_OBJECT
 
   public:
-    ImageLoader();
+    ImageLoader( QWidget *parent );
 
     KABC::Picture loadPicture( const KURL &url, bool *ok );
-    KABC::Picture loadBlog( const KURL &url, bool *ok );
 
-  private slots:
-    void loadingComplete( Loader*, Document, Status );
-
   private:
-    bool mIsLoadingBlog;
     KABC::Picture mPicture;
+    QWidget *mParent;
 };
 
 /**
@@ -79,8 +66,6 @@
 
     void setImageLoader( ImageLoader *loader );
 
-    void setBlogFeed( const KURL &url );
-
   signals:
     void changed();
     void urlDropped( const KURL& );
@@ -94,7 +79,6 @@
 
   private slots:
     void load();
-    void loadBlog();
     void clear();
 
   private:
@@ -102,7 +86,6 @@
     void updateGUI();
 
     bool mReadOnly;
-    KURL mBlogFeed;
     QPoint mDragStartPos;
     KABC::Picture mPicture;
 
@@ -119,11 +102,6 @@
     ~ImageBaseWidget();
 
     /**
-      Set URL of blog feed for getting the image.
-     */
-    void setBlogFeed( const QString & );
-
-    /**
       Sets the photo object.
      */
     void setImage( const KABC::Picture &photo );
Index: kaddressbook/dcopaddressbook.desktop
===================================================================
--- kaddressbook/dcopaddressbook.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kaddressbook/dcopaddressbook.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -27,10 +27,13 @@
 Comment[is]=Vistfangaskrá með DCOP tengingu
 Comment[it]=Rubrica indirizzi con un'interfaccia DCOP
 Comment[ja]=DCOP インターフェースを持つアドレス帳
+Comment[kk]=DCOP интерфейсті адрестік кітапшасы
 Comment[km]=សៀវភៅ​អាសយដ្ឋាន​ដែល​មាន​ចំណុច​ប្រទាក់ DCOP
 Comment[lt]=Adresų knygelė su DCOP sąsaja
+Comment[mk]=Адресар со DCOP-интерфејс
 Comment[nb]=Adressebok med DCOP-grensesnitt
 Comment[nds]=Adressbook mit DCOP-Koppelsteed
+Comment[ne]=डीसीओपी ईन्टरफेससँगको ठेगाना पुस्तिका
 Comment[nl]=Adresboek met DCOP-interface
 Comment[nn]=Adressebok med DCOP-grensesnitt
 Comment[pl]=Książka adresowa z interfejsem DCOP
Index: kaddressbook/kaddressbook.desktop
===================================================================
--- kaddressbook/kaddressbook.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kaddressbook/kaddressbook.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -8,7 +8,9 @@
 Name[fi]=Osoitekirja
 Name[fr]=Carnet d'adresses
 Name[he]=פנקס כתובות
+Name[mk]=КАдресар
 Name[nds]=KAdressbook
+Name[ne]=केडीई ठेगाना पुस्तिका
 Name[nn]=KDE-adressebok
 Name[pl]=Książka adresowa
 Name[sk]=Adresár
@@ -39,11 +41,14 @@
 GenericName[is]=Vistfangastjóri
 GenericName[it]=Gestore degli indirizzi
 GenericName[ja]=アドレスマネージャ
+GenericName[kk]=Адрестік кітапшасы
 GenericName[km]=កម្មវិធី​គ្រប់គ្រង​អាសយដ្ឋាន
 GenericName[lt]=Adresų tvarkyklė
+GenericName[mk]=Менаџер на адреси
 GenericName[ms]=Pengurus Alamat
 GenericName[nb]=Addressehåndterer
 GenericName[nds]=Adresspleger
+GenericName[ne]=ठेगाना प्रबन्धक
 GenericName[nl]=Adresboekbeheerder
 GenericName[nn]=Adressehandterar
 GenericName[pa]=ਸਿਰਨਾਵਾਂ ਪ੍ਰਬੰਧਕ
Index: kaddressbook/csv-templates/kaddressbook.desktop
===================================================================
--- kaddressbook/csv-templates/kaddressbook.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kaddressbook/csv-templates/kaddressbook.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -9,7 +9,6 @@
 Name=KAddressBook (KDE 3.1)
 Name[af]=K-adresboek (Kde 3.1)
 Name[ar]=دفتر العناوين KAddressBook (KDE 3.1(
-Name[be]=K Адрасная кніга (KDE 3.1)
 Name[ca]=Llibreta d'adreces (KDE 3.1)
 Name[cs]=Kniha adres (KDE 3.1)
 Name[cy]=KLlyfrCyfeiriadau (KDE 3.1)
@@ -21,9 +20,10 @@
 Name[hr]=KAdressBook (KDE 3.1)
 Name[hu]=Címjegyzék (KDE 3.1)
 Name[it]=Rubrica indirizzi (KDE 3.1)
-Name[mk]=Адресар (KDE 3.1)
+Name[mk]=КАдресар (KDE 3.1)
 Name[nb]=Adressebok (KDE 3.1)
 Name[nds]=KAdressbook (KDE 3.1)
+Name[ne]=केडीई ठेगाना पुस्तिका (केडीई ३.१)
 Name[nn]=KDE-adressebok (KDE 3.1)
 Name[nso]=KBuka ya Diaterese (KDE 3.1)
 Name[pl]=Książka adresowa (KDE 3.1)
Index: kaddressbook/csv-templates/outlook2000.desktop
===================================================================
--- kaddressbook/csv-templates/outlook2000.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kaddressbook/csv-templates/outlook2000.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -10,6 +10,7 @@
 Name[eo]=Redmondo 2000
 Name[fa]=اوت لوک ۲۰۰۰
 Name[hi]=आउटलुक 2000
+Name[ne]=आउटलुक २०००
 Name[nso]=Bokantle 2000
 Name[ta]=அவுட்லுக் 2000
 
Index: kaddressbook/csv-templates/yahoo.desktop
===================================================================
--- kaddressbook/csv-templates/yahoo.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kaddressbook/csv-templates/yahoo.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -30,10 +30,13 @@
 Name[is]=Yahoo! póstfangaskrá
 Name[it]=Rubrica indirizzi Yahoo!
 Name[ja]=Yahoo! アドレス帳
+Name[kk]=Yahoo! адрестік кітапшасы
 Name[km]=សៀវភៅ​អាសយដ្ឋាន​របស់​យ៉ាហ៊ូ
 Name[lt]=Yahoo! Adresų knygutė
+Name[mk]=Адресар од Yahoo!
 Name[nb]=Yahoo! adressebok
 Name[nds]=Yahoo!-Adressbook
+Name[ne]=याहू! ठेगाना पुस्तिका
 Name[nl]=Yahoo!-adresboek
 Name[nn]=Yahoo! Adressebok
 Name[pa]=Yahoo! ਸਿਰਨਾਵਾਂ ਕਿਤਾਬ
Index: kaddressbook/views/cardview.cpp
===================================================================
--- kaddressbook/views/cardview.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kaddressbook/views/cardview.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1023,12 +1023,6 @@
 
   // The RMB click
   if ( e->button() & Qt::RightButton ) {
-    // clear previous selection
-    bool blocked = signalsBlocked();
-    blockSignals( true );
-    selectAll( false );
-    blockSignals( blocked );
-
     // select current item
     item->setSelected( true );
 
Index: kaddressbook/views/tableview.desktop
===================================================================
--- kaddressbook/views/tableview.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kaddressbook/views/tableview.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -3,6 +3,7 @@
 X-KDE-Library=libkaddrbk_tableview
 Name=Table View
 Name[af]=Tabel Aansig
+Name[ar]=عرض الجدول
 Name[be]=У выглядзе табліцы
 Name[bg]=Преглед в таблица
 Name[br]=Gwel taolenn
@@ -26,11 +27,14 @@
 Name[is]=Töflusýn
 Name[it]=Vista tabella
 Name[ja]=テーブルビュー
+Name[kk]=Кесте
 Name[km]=ទិដ្ឋភាព​តារាង
 Name[lt]=Lentelės vaizdas
+Name[mk]=Преглед со табела
 Name[ms]=Pelihat Jadual
 Name[nb]=Tabellvisning
 Name[nds]=Tabellansicht
+Name[ne]=तालिका दृश्य
 Name[nl]=Tabelweergave
 Name[nn]=Tabellvising
 Name[pa]=ਸਾਰਣੀ ਦਰਿਸ਼
Index: kaddressbook/views/iconview.desktop
===================================================================
--- kaddressbook/views/iconview.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kaddressbook/views/iconview.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -32,13 +32,16 @@
 Name[is]=Táknmyndasýn
 Name[it]=Vista a icone
 Name[ja]=アイコンビュー
+Name[kk]=Таңбаша
 Name[km]=ទិដ្ឋភាព​រូបតំណាង
 Name[lt]=Rodyti piktogramas
 Name[lv]=Ikonu Skatījums
+Name[mk]=Преглед со икони
 Name[ms]=Pelihat Ikon
 Name[mt]=Ikoni
 Name[nb]=Ikonvisning
 Name[nds]=Lüttbildansicht
+Name[ne]=प्रतिमा दृश्य
 Name[nl]=Pictogramweergave
 Name[nn]=Ikonvising
 Name[pa]=ਆਈਕਾਨ ਦਰਿਸ਼
Index: kaddressbook/views/cardview.desktop
===================================================================
--- kaddressbook/views/cardview.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kaddressbook/views/cardview.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -3,6 +3,7 @@
 X-KDE-Library=libkaddrbk_cardview
 Name=Card View
 Name[af]=Kaard Aansig
+Name[ar]=عرض البظاقة
 Name[be]=У выглядзе картак
 Name[bg]=Преглед като карти
 Name[br]=Gwell ar c'hartennoù
@@ -26,11 +27,14 @@
 Name[is]=Spjaldsýn
 Name[it]=Vista scheda
 Name[ja]=カードビュー
+Name[kk]=Визитка
 Name[km]=ទិដ្ឋភាព​កាត
 Name[lt]=Kortelės vaizdas
+Name[mk]=Преглед со картички
 Name[ms]=Pelihat Kad
 Name[nb]=Kortvisning
 Name[nds]=Visitenkoort-Kieker
+Name[ne]=कार्ड दृश्य
 Name[nl]=Kaartweergave
 Name[nn]=Kortvising
 Name[pa]=ਕਾਰਡ ਦਰਿਸ਼
Index: kaddressbook/xxport/kde2_xxport.desktop
===================================================================
--- kaddressbook/xxport/kde2_xxport.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kaddressbook/xxport/kde2_xxport.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -3,10 +3,10 @@
 X-KDE-Library=libkaddrbk_kde2_xxport
 Name=KAB KDE2 XXPort Plugin
 Name[af]=KAB KDE2 XXPort inprop module
-Name[be]=Дапаўненьне KAB "Імпарт/Экспарт KDE2"
+Name[be]=Дапаўненне KAB "Імпарт/Экспарт KDE2"
 Name[br]=Lugent XXPorzh KAB KDE2
 Name[bs]=KAB dodatak za KDE2 XXPort
-Name[ca]=Endollable d'importació/exportació KDE2 per a KAB
+Name[ca]=Endollable d'importació/exportació KDE2 per al KAB
 Name[cs]=Exportní modul KDE2
 Name[cy]=Ategyn XXPort KDE2 KAB
 Name[da]=KAB KDE2 XXPort-plugin
@@ -24,11 +24,13 @@
 Name[hu]=KAB KDE2 XXPort bővítőmodul
 Name[is]=Íforrit fyrir KAB KDE2 XXPort
 Name[ja]=KAB KDE2 インポート/プラグイン
+Name[kk]=KDE2 пішімінен импорт ету
 Name[km]=កម្មវិធី​ជំនួយ KAB KDE2 XXPort
 Name[lt]=KAB KDE2 XXPort priedas
 Name[ms]=Plug masuk KAB KDE2 XXPort
 Name[nb]=KAB-programtillegg for KDE2
 Name[nds]=KDE2-Importmoduul för KAdressbook
+Name[ne]=KAB KDE2 XXPort प्लगइन
 Name[nl]=KAB KDE2 XXPort-plugin
 Name[nn]=KAB KDE2 XXPort programtillegg
 Name[pl]=Wtyczka KAB do importu książki adresowej KDE2
@@ -47,8 +49,8 @@
 Name[zh_TW]=KAB KDE2 XXPort 外掛程式
 Comment=Plugin to import the old KDE 2 address book
 Comment[af]=Inprop module om 'n ou KDE 2 adres boek in te voer
-Comment[be]=Дапаўненьне для імпарту старой адраснай кнігі KDE 2
-Comment[bg]=Приставка за импорт на контактите от старата версия на адресника в КДЕ 2
+Comment[be]=Дапаўненне для імпарту старой адраснай кнігі KDE 2
+Comment[bg]=Приставка за импортиране на контактите от старата версия на адресника в KDE 2
 Comment[bs]=Dodatak za uvoz iz starog KDE 2 adresara
 Comment[ca]=Endollable per a importar l'antiga llibreta d'adreces del KDE 2
 Comment[cs]=Modul pro import staré KDE 2 knihy adres
@@ -67,12 +69,15 @@
 Comment[hu]=Bővítőmodul KDE2-es címjegyzék importálásához
 Comment[is]=Íforrit til að færa inn gömlu KDE2 vistfangaskrána
 Comment[it]=Plugin per importare le vecchie voci della rubrica di KDE2
-Comment[ja]=古い KDE 2 アドレス帳のインポートプラグイン
+Comment[ja]=古い KDE 2 アドレス帳をインポートするプラグイン
+Comment[kk]=Ескі KDE2 адр.кітапшасынан импорт ету модулі
 Comment[km]=កម្មវិធី​ជំនួយ​ដើម្បី​នាំចូល​សៀវភៅ​អាសយដ្ឋាន KDE 2 ចាស់ៗ
 Comment[lt]=Priedas senosios KDE 2 adresų knygelės importui
+Comment[mk]=Приклучок за внесување на старите адресари од KDE 2
 Comment[ms]=Plug masuk untuk import buku alamat lama KDE 2
 Comment[nb]=Programtillegg for å importere adressebok fra KDE2
 Comment[nds]=Moduul för't Importeren vun KDE2-Adressböker
+Comment[ne]=पूरानो केडीई २ ठेगाना पुस्तिका आयात गर्न प्लगइन गर्नुहोस्
 Comment[nl]=Plugin voor het importeren van het oude KDE 2-adresboek
 Comment[nn]=Programtillegg for å importera den gamle KDE 2 adresseboka
 Comment[pl]=Wtyczka do importu starej książki adresowej z KDE 2
Index: kaddressbook/xxport/csv_xxport.desktop
===================================================================
--- kaddressbook/xxport/csv_xxport.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kaddressbook/xxport/csv_xxport.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -3,10 +3,10 @@
 X-KDE-Library=libkaddrbk_csv_xxport
 Name=KAB CSV XXPort Plugin
 Name[af]=KAB CSV XXPort inprop module
-Name[be]=Дапаўненьне KAB "Імпарт/Экспарт CSV"
+Name[be]=Дапаўненне KAB "Імпарт/Экспарт CSV"
 Name[br]=Lugent XXPorzh CSV KAB
 Name[bs]=KAB dodatak za CSV XXPort
-Name[ca]=Endollable d'importació/exportació CSV per a KAB
+Name[ca]=Endollable d'importació/exportació CSV per al KAB
 Name[cs]=Exportní modul CSV
 Name[cy]=Ategyn XXPort CSV KAB
 Name[da]=KAB CSV XXPort-plugin
@@ -24,11 +24,13 @@
 Name[hu]=KAB XXPort bővítőmodul
 Name[is]=Íforrit fyrir KAV CSV XXPort
 Name[ja]=KAB CSV インポート/エクスポートプラグイン
+Name[kk]=CSV файлды экспорт/импорт ету
 Name[km]=កម្មវិធី​ជំនួយ KAB CSV XXPort
 Name[lt]=KAB CSV XXPort priedas
 Name[ms]=Plug masuk KAB CSV XXPort
 Name[nb]=KAB-programtillegg for CSV-eksport
 Name[nds]=CSV-Im-/Exportmoduul för KAdressbook
+Name[ne]=KAB CSV XXPort प्लगइन
 Name[nn]=KAB CSV XXPort programtillegg
 Name[pl]=Wtyczka KAB do importu/eksportu z/do formatu CSV
 Name[pt]='Plugin' XXPort para CSV do KAB
@@ -46,8 +48,8 @@
 Name[zh_TW]=KAB CSV XXPort 外掛程式
 Comment=Plugin to import and export contacts in CSV format
 Comment[af]=Inprop module wat kontakte in CSV formaat invoer en uitvoer
-Comment[be]=Дапаўненьне для імпарту і экспарту кантактаў у фармаце CSV
-Comment[bg]=Приставка за импорт/експорт на контактите във формат CSV
+Comment[be]=Дапаўненне для імпарту і экспарту кантактаў у фармаце CSV
+Comment[bg]=Приставка за импортиране/експортиране на контактите във формат CSV
 Comment[bs]=Dodatak za uvoz i izvoz kontakata u CSV formatu
 Comment[ca]=Endollable per a importar i exportar contactes en format CSV
 Comment[cs]=Modul pro import a export kontaktů ve formátu CSV
@@ -66,12 +68,15 @@
 Comment[hu]=Bővítőmodul névjegyek importálásához/exportálásához, CSV formátumban
 Comment[is]=Íforrit til að flytja tengiliði inn og út í CSV sniði
 Comment[it]=Plugin per importare ed esportare contatti in formato CSV
-Comment[ja]=CSV フォーマットによりコンタクトをインポート又はエクスポートするプラグイン
+Comment[ja]=CSV フォーマットで連絡先をインポート/エクスポートするプラグイン
+Comment[kk]=Контакттарды CSV пішіміне экспорт/импорт ету модулі
 Comment[km]=កម្មវិធី ជំនួយ​ដើម្បី​នាំចូល និង នាំចេញ​ទំនាក់ទំនង​ក្នុង​ទ្រង់ទ្រាយ​ជា CSV ។
 Comment[lt]=Priedas, skirtas kontaktų eksportui ir importui CSV formatu
+Comment[mk]=Приклучок за внесување и изнесување контакти во CSV-формат
 Comment[ms]=Plug masuk untuk import dan eksport alamat perhubungan di dalam format CSV
 Comment[nb]=Programtillegg for import/eksport av kontakter i CSV-format
 Comment[nds]=Moduul för't Im- un Exporteren vun Kontakten in't CSV-Formaat
+Comment[ne]=CSV ढाँचाका सम्पर्क आयात र निर्यात गर्न प्लगइन गर्नुहोस्
 Comment[nl]=Plugin voor het importeren en exporteren van contactpersonen in CSV-formaat
 Comment[nn]=Programtillegg for å importera og eksportera kontaktar i CSV-format
 Comment[pl]=Wtyczka do importowania i eksportowania wizytówek w formacie CSV
Index: kaddressbook/xxport/vcard_xxport.desktop
===================================================================
--- kaddressbook/xxport/vcard_xxport.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kaddressbook/xxport/vcard_xxport.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -3,10 +3,10 @@
 X-KDE-Library=libkaddrbk_vcard_xxport
 Name=KAB vCard XXPort Plugin
 Name[af]=KAB vCard XXPort inprop module
-Name[be]=Дапаўненьне KAB "Імпарт/Экспарт vCard"
+Name[be]=Дапаўненне KAB "Імпарт/Экспарт vCard"
 Name[br]=Lugent KAB vCard XXPort
 Name[bs]=KAB dodatak za vCard XXPort
-Name[ca]=Endollable d'importació/exportació vCard per a KAB
+Name[ca]=Endollable d'importació/exportació vCard per al KAB
 Name[cs]=Exportní modul vCard
 Name[cy]=Ategyn XXPort vCard KAB
 Name[da]=KAB vCard XXPort-plugin
@@ -24,11 +24,13 @@
 Name[hu]=KAB vCard XXPort bővítőmodul
 Name[is]=Íforrit fyrir KAB vCard XXPort
 Name[ja]=KAB vCazrd インポート/エクスポートプラグイン
+Name[kk]=vCard-ты экспорт/импорт ету
 Name[km]=កម្មវិធី​ជំនួយ KAB vCard XXPort
 Name[lt]=KAB vCard XXPort priedas
 Name[ms]=Plugin KAB vCard XXPort 
 Name[nb]=KAB-programtillegg for vCard
 Name[nds]=vCard-Im-/Exportmoduul för KAdressbook
+Name[ne]=KAB भी कार्ड XXPort प्लगइन
 Name[nl]=KAB vCard XXPort-plugin
 Name[nn]=KAB vCard XXPort programtillegg
 Name[pl]=Wtyczka KAB do importu/eksportu z/do formatu vCard
@@ -48,10 +50,10 @@
 Name[zh_TW]=KAB vCard XXPort 外掛程式
 Comment=Plugin to import and export contacts in vCard format
 Comment[af]=Inprop module wat kontakte in vCard formaat invoer en uitvoer
-Comment[be]=Дапаўненьне для імпарту і экспарту кантактаў у фармаце vCard
-Comment[bg]=Приставка за експорт/импорт на контактите във формат на vCard
+Comment[be]=Дапаўненне для імпарту і экспарту кантактаў у фармаце vCard
+Comment[bg]=Приставка за експортиране/импортиране на контактите във формат на vCard
 Comment[bs]=Dodatak za uvoz i izvoz kontakata u vCard formatu
-Comment[ca]=Endollabl per a importar i exportar contactes en el format vCard
+Comment[ca]=Endollable per a importar i exportar contactes en el format vCard
 Comment[cs]=Modul pro import a export kontaktů ve formátu vCard
 Comment[cy]=Ategyn i fewnforio ac allforio cysylltau yn fformat vCard
 Comment[da]=Plugin til at importere og eksportere kontakter i vCard-format
@@ -68,12 +70,15 @@
 Comment[hu]=Bővítőmodul vCard névjegyek importálásához/exportálásához
 Comment[is]=Íforrit til að flytja inn eða út tengiliði í vCard sniði
 Comment[it]=Plugin per importare ed esportare contatti in formato vCard
-Comment[ja]=vCard フォーマットによるコンタクトのインポート及びエクスポートプラグイン
+Comment[ja]=vCard フォーマットで連絡先をインポート/エクスポートするプラグイン
+Comment[kk]=vCard пішіміне экспорт/импорт ету модулі
 Comment[km]=កម្មវិធី​ជំនួយ​ដើម្បី​នាំចូល និង នាំចេញ​ទំនាក់ទំនង​ក្នុង​ទ្រង់ទ្រាយ​ជា vCard
 Comment[lt]=Įskiepis kontaktų importavimui ir eksportavimui vCard formatu
+Comment[mk]=Приклучок за внесување и изнесување контакти во vCard-формат
 Comment[ms]=Plugin untuk mengimpot dan mengekspot orang hubungan dalam format vCard 
 Comment[nb]=Programtillegg for import og eksport av kontakter i vCard-format
 Comment[nds]=Moduul för't Im-/Exporteren vun Kontakten in't vCard-Formaat
+Comment[ne]=भी कार्ड ढाँचामा आयात र निर्यात गर्न प्लगइन गर्नुहोस्
 Comment[nl]=Plugin voor het importeren en exporteren van contactpersonen in vCard-formaat
 Comment[nn]=Programtillegg for å importera og eksportera kontaktar i vCard-format
 Comment[pl]=Wtyczka do importu i eksportu wizytówek w formacie vCard
Index: kaddressbook/xxport/pab_xxport.desktop
===================================================================
--- kaddressbook/xxport/pab_xxport.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kaddressbook/xxport/pab_xxport.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -3,9 +3,9 @@
 X-KDE-Library=libkaddrbk_pab_xxport
 Name=KAB MS Exchange Personal Addressbook XXPort Plugin
 Name[af]=KAB MS Exchange adresboek XXPort inprop module
-Name[be]=Дапаўненьне KAB "Імпарт пэрсанальнай адраснай кнігі MS Exchange"
+Name[be]=Дапаўненне KAB "Імпарт пэрсанальнай адраснай кнігі MS Exchange"
 Name[bs]=KAB dodatak za MS Exchange Personal Addressbook XXPort
-Name[ca]=Endollable d'importació/exportació de la llibreta d'adreces personal d'MS Exchange per a KAB
+Name[ca]=Endollable d'importació/exportació de la llibreta d'adreces personal d'MS Exchange per al KAB
 Name[cs]=Exportní modul do adresáře MS Exchange
 Name[cy]=Ategyn XXPort Llyfr Cyfeiriadau Personol MS Exchange KAB
 Name[da]=KAB MS Exchange personlig adressebog XXPort Plugin
@@ -22,11 +22,13 @@
 Name[hu]=KAB XXPort bővítőmodul MS Exchange személyes címjegyzékekhez
 Name[is]=Íforrit fyrir KAB MS Exchange Personal Addressbook XXPort
 Name[ja]=KAB MS Exchange パーソナルアドレス帳インポート/エクスポートプラグイン
+Name[kk]=MS Exchange адрестік кітапшасына экспорт/импорт ету
 Name[km]=កម្មវិធី​ជំនួយ KAB MS Exchange Personal Addressbook XXPort
 Name[lt]=KAB MS Exchange asmeninės adresų knygelės XXPort priedas
 Name[ms]=Plugin Buku Alamat Peribadi KAB MS Exchange  XXPort Plugin
 Name[nb]=KAB-programtillegg for import fra MS Exchange
 Name[nds]=MSExchange-Importmoduul för KAdressbook
+Name[ne]=KAB MS बिनिमय व्यक्तिगत ठेगाना पुस्तिका XXPort प्लगइन
 Name[nl]=KAB MS Exchange Personal Addressbook XXPort-plugin
 Name[nn]=KAB MS Exchange personleg adressebok XXPort programtillegg
 Name[pl]=Wtyczka KAB do importu Osobistej książki adresowej MS Exchange
@@ -46,8 +48,8 @@
 Name[zh_TW]=KAB MS Exchange Personal Addressbook XXPort 外掛程式
 Comment=Plugin to import MS Exchange Personal Address Books
 Comment[af]=Inprop module wat kontakte in MS Exchange adresboek formaat invoer
-Comment[be]=Дапаўненьне для імпарту пэрсанальнай адраснай кнігі MS Exchange
-Comment[bg]=Приставка за импорт на контактите от MS Exchange Personal Address Books
+Comment[be]=Дапаўненне для імпарту пэрсанальнай адраснай кнігі MS Exchange
+Comment[bg]=Приставка за импортиране на контактите от MS Exchange Personal Address Books
 Comment[bs]=Dodatak za uvoz iz MS Exchange personalnog adresara
 Comment[ca]=Endollable per a importar des de la llibreta d'adreces personal d'MS Exchange
 Comment[cs]=Modul pro import osobní knihy adres MS Exchange
@@ -66,12 +68,15 @@
 Comment[hu]=Bővítőmodul MS Exchange személyes címjegyzékek importálásához
 Comment[is]=Íforrit til að flytja tengiliði í eða úr MS Exchange Personal Address Book
 Comment[it]=Plugin per importare rubriche personali da MS Exchange
-Comment[ja]=MS Exchange パーソナルアドレス帳のインポートプラグイン
+Comment[ja]=MS Exchange パーソナルアドレス帳をインポートするプラグイン
+Comment[kk]=MS Exchange адрестік кітапшасына экспорт/импорт ету модулі
 Comment[km]=កម្មវិធី​ជំនួយ​ដើម្បី​នាំចូល​សៀវភៅ​អាសយដ្ឋាន​ផ្ទាល់​ខ្លួន​របស់ MS Exchange
 Comment[lt]=Priedas leidžiantis importuoti MS Exchange asmenines adresų knygeles
+Comment[mk]=Приклучок за внесување лични адресари од MS Exchange
 Comment[ms]=Plugin untuk mengimpot Buku Alamat Peribadi MS Exchange 
 Comment[nb]=Programtillegg for import av personlige adressebøker fra MS Exchange
 Comment[nds]=Moduul för't Importeren vun persöönliche Adressböker ut MS Exchange
+Comment[ne]=MS बिनिमय व्यक्तिगत ठेगाना पुस्तिका आयात गर्न प्लगइन गर्नुहोस्
 Comment[nl]=Plugin voor het importeren van MS Exchange-adresboeken
 Comment[nn]=Programtillegg for å imortera MS Exchange personleg adressebok
 Comment[pl]=Wtyczka do importu Osobistej książki adresowej z MS Exchange
Index: kaddressbook/xxport/opera_xxport.desktop
===================================================================
--- kaddressbook/xxport/opera_xxport.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kaddressbook/xxport/opera_xxport.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -3,10 +3,10 @@
 X-KDE-Library=libkaddrbk_opera_xxport
 Name=KAB Opera XXPort Plugin
 Name[af]=KAB Opera XXPort inprop module
-Name[be]=Дапаўненьне KAB "Імпарт Opera"
+Name[be]=Дапаўненне KAB "Імпарт Opera"
 Name[br]=Lugent KAB Opera XXPort
 Name[bs]=KAB dodatak za Opera XXPort
-Name[ca]=Endollable d'importació/exportació d'Opera per a KAB
+Name[ca]=Endollable d'importació/exportació d'Opera per al KAB
 Name[cs]=Exportní modul do Opery
 Name[cy]=Ategyn XXPort Opera KAB
 Name[da]=KAB Opera XXPort-plugin
@@ -24,11 +24,13 @@
 Name[hu]=KAB Opera XXPort bővítőmodul
 Name[is]=Íforrit fyrir KAP Opera XXPort
 Name[ja]=KAB Opera インポート/エクスポートプラグイン
+Name[kk]=Opera пішіміне экспорт/импорт ету
 Name[km]=កម្មវិធី​ជំនួយ KAB Opera XXPort
 Name[lt]=KAB Opera XXPort priedas
 Name[ms]=Plugin KAB Opera XXPort 
 Name[nb]=KAB-programtillegg for Opera
 Name[nds]=Opera-Importmoduul för KAdressbook
+Name[ne]=KAB ओपेरा XXPort प्लगइन
 Name[nn]=KAB Opera XXPort programtillegg
 Name[pl]=Wtyczka KAB do importu z Opery
 Name[pt]='Plugin' XXPort para Opera do KAB
@@ -47,8 +49,8 @@
 Name[zh_TW]=KAB Opera XXPort 外掛程式
 Comment=Plugin to import Opera contacts
 Comment[af]=Inprop module wat kontakte in Opera formaat invoer
-Comment[be]=Дапаўненьне для імпарту кантактаў Opera
-Comment[bg]=Приставка за импорт на контактите от Опера
+Comment[be]=Дапаўненне для імпарту кантактаў Opera
+Comment[bg]=Приставка за импортиране на контактите от Опера
 Comment[bs]=Dodatak za uvoz kontakata iz Opere
 Comment[ca]=Endollable per a importar contactes des d'Opera
 Comment[cs]=Modul pro import a export kontaktů programu Opera
@@ -67,12 +69,15 @@
 Comment[hu]=Bővítőmodul Opera névjegyek importálásához
 Comment[is]=Íforrit til flytja inn eða út Opera tengiliði
 Comment[it]=Plugin per importare contatti da Opera
-Comment[ja]=Opera コンタクトのインポートプラグイン
+Comment[ja]=Opera の連絡先をインポートするプラグイン
+Comment[kk]=Opera контактарын экспорт/импорт ету модулі
 Comment[km]=កម្មវិធី​ជំនួយ​ដើម្បី​នាំចូល​ទំនាក់ទំនង​របស់ Opera
 Comment[lt]=Priedas Opera kontaktų importui
+Comment[mk]=Приклучок за внесување контакти од Opera
 Comment[ms]=Plug masuk untuk import alamat perhubungan Opera
 Comment[nb]=Programtillegg for å importere Opera-kontakter
 Comment[nds]=Modul för't Importeren vun Opera-Kontakten
+Comment[ne]=ओपेरा सम्पर्क आयात गर्न प्लगइन गर्नुहोस्
 Comment[nl]=Plugin voor het importeren an Opera's contactpersonen
 Comment[nn]=Programtillegg for å imortera Opera-kontaktar
 Comment[pl]=Wtyczka do importu wizytówek z Opery
Index: kaddressbook/xxport/gnokii_xxport.desktop
===================================================================
--- kaddressbook/xxport/gnokii_xxport.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kaddressbook/xxport/gnokii_xxport.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -4,7 +4,7 @@
 Name=KAB Mobile Phone XXPort Plugin
 Name[af]=KAB selfoon XXPort inprop module
 Name[bs]=KAB dodatak XXPort u/iz mobilnog telefona
-Name[ca]=Endollable d'importació/exportació de telèfon mòbil per a KAB
+Name[ca]=Endollable d'importació/exportació de telèfon mòbil per al KAB
 Name[cs]=Exportní modul do mobilního telefonu
 Name[cy]=Ategyn XXPort Ffôn Symudol KAB
 Name[da]=KAB Mobiltelefon XXPort-plugin
@@ -23,11 +23,13 @@
 Name[is]=Íforrit fyrir KAB farsíma XXPort
 Name[it]=Plugin KAB telefono cellulare XXPort
 Name[ja]=KAB 携帯電話インポート/エクスポートプラグイン
+Name[kk]=Қалта телефонға экспорт/импорт ету
 Name[km]=កម្មវិធី​ជំនួយ KAB Mobile Phone XXPort
 Name[lt]=KAB mobilaus telefono XXPort priedas
 Name[ms]=Plug masuk KAB Fon Mudah Alih XXPort
 Name[nb]=KAB-programtillegg for mobiltelefon
 Name[nds]=Mobiltelefoon-Im-/Exportmoduul för KAdressbook
+Name[ne]=KAB मोबाइल फोन XXPort प्लगइन
 Name[nl]=KAB Mobiele Telefoon XXPort-plugin
 Name[nn]=KAB Mobiltelefon XXPort programtillegg
 Name[pl]=Wtyczka KAB do importu/eksportu z/do telefonu komórkowego
@@ -47,7 +49,7 @@
 Name[zh_TW]=KAB Mobile Phone XXPort 外掛程式
 Comment=Mobile Phone Plugin to Import and Export Addressbook Entries
 Comment[af]=Inprop module wat kontakte in selfoon formaat invoer en uitvoer
-Comment[bg]=Приставка за експорт/импорт на контактите от/към мобилен телефон
+Comment[bg]=Приставка за експортиране/импортиране на контактите от/към мобилен телефон
 Comment[bs]=Dodatak za uvoz i izvoz stavki adresara iz mobilnog telefona
 Comment[ca]=Endollable de telèfon mòbil per a importar i exportar entrades de la llibreta d'adreces
 Comment[cs]=Modul mobilního telefonu pro import a export záznamů Knihy adres
@@ -67,11 +69,14 @@
 Comment[is]=Íforrit til að færa tengilið milli póstfangaskrár og farsíma
 Comment[it]=Plugin per importare ed esportare voci della rubrica da un telefono cellulare
 Comment[ja]=アドレス帳のエントリをインポート/エクスポートする携帯電話用プラグイン
+Comment[kk]=Қалта телефонға адр. кітапша жазуын экспорт/импорт ету модулі
 Comment[km]=កម្មវិធី​ជំនួយ​ទូរស័ព្ទ​ចល័ត​ដើម្បី​នាំចូល និង នាំចេញ​ធាតុ​សៀវភៅ​អាសយដ្ឋាន
 Comment[lt]=Priedas skirtas importuoti ir eksportuoti adresų knygelės įrašus į mobiliuosius telefonus
+Comment[mk]=Приклучок за мобилни телефони за внесување и изнесување контакти од адресарот
 Comment[ms]=Plug masuk Fon Mudah Alih untuk Import dan Eksport Input Buku Alamat
 Comment[nb]=Programtillegg for import/eksport av adressebok fra/til mobiltelefon
 Comment[nds]=Mobiltelefoon-Moduul för't Im- un Exporteren vun KAdressbook-Indrääg
+Comment[ne]=ठेगाना पुस्तिका प्रविष्टि आयात र निर्यात गर्न मोबाइल फोन प्लगइन गर्नुहोस्
 Comment[nl]=Mobiele-telefoon-plugin voor het importeren en exporteren van adresboekitems
 Comment[nn]=Programtillegg for å importera og eksportera adressebokoppføringar i mobiltelefon
 Comment[pl]=Wtyczka do importowania i eksportowania wizytówek z/do telefonu komórkowego
Index: kaddressbook/xxport/bookmark_xxport.desktop
===================================================================
--- kaddressbook/xxport/bookmark_xxport.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kaddressbook/xxport/bookmark_xxport.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -3,10 +3,10 @@
 X-KDE-Library=libkaddrbk_bookmark_xxport
 Name=KAB Bookmark XXPort Plugin
 Name[af]=KAB boekmerk XXPort inprop module
-Name[be]=Дапаўненьне KAB "Экспарт у закладкі"
+Name[be]=Дапаўненне KAB "Экспарт у закладкі"
 Name[br]=Lugent XXPorzh sined KAB
 Name[bs]=KAB dodatak za XXPort zabilješki
-Name[ca]=Endollable d'importació/exportació de punts per a KAB
+Name[ca]=Endollable d'importació/exportació de punts per al KAB
 Name[cs]=Exportní modul záložek
 Name[cy]=Ategyn XXPort Tudnodau KAB
 Name[da]=KAB Bogmærke XXPort-plugin
@@ -23,11 +23,13 @@
 Name[hu]=KAB könyvjelzőkezelő XXPort bővítőmodul
 Name[is]=Íforrit fyrir KAB XXPort bókarmerki
 Name[ja]=KAB ブックマーク インポート/エクスポートプラグイン
+Name[kk]=Бетбелгіні экспорт ету
 Name[km]=កម្មវិធី​ជំនួយ KAB Bookmark XXPort
 Name[lt]=KAB žymelių XXPort priedas
 Name[ms]=Plug masuk KAB Tanda Laman XXPort
 Name[nb]=KAB-programtillegg for bokmerkeeksport
 Name[nds]=Leesteken-Exportmoduul för KAdressbook
+Name[ne]=KAB पुस्तकचिनो XXPort प्लगइन
 Name[nl]=KAB Bladwijzer XXPort-plugin
 Name[nn]=KAB-bokmerke XXPort-programtillegg
 Name[pl]=Wtyczka KAB do eksportu zakładek
@@ -47,7 +49,7 @@
 Name[zh_TW]=KAB Bookmark XXPort 外掛程式
 Comment=Plugin to export the web addresses of the contacts as bookmarks
 Comment[af]=Inprop module wat die web adresse van kontakte as boekmerke uitvoer
-Comment[bg]=Приставка за експорт на уеб адресите на контактите, като отметки
+Comment[bg]=Приставка за експортиране на уеб адресите на контактите, като отметки
 Comment[bs]=Dodatak za izvoz web adresa kontakata u formi zabilješki
 Comment[ca]=Endollable per a exportar les adreces web dels contactes com a punts
 Comment[cs]=Modul pro exportování webových adres kontaktů jako záložky
@@ -66,12 +68,15 @@
 Comment[hu]=Bővítőmodul webcímek exportáláshoz, könyvjelzőként
 Comment[is]=Íforrit til að skrá vefföng tengiliða sem bókarmerki
 Comment[it]=Plugin per esportare come segnalibro gli indirizzi web dei contatti
-Comment[ja]=コンタクトの web アドレスをブックマークとしてエクスポートするプラグイン 
+Comment[ja]=連絡先のウェブアドレスをブックマークとしてエクスポートするプラグイン 
+Comment[kk]=Контакттың веб адрестерін бетбелгіге экспорттау модулі
 Comment[km]=កម្មវិធី​ជំនួយ​ដើម្បី​នាំចេញ​អាសយដ្ឋាន​បណ្ដាញ​របស់​ទំនាក់ទំនង ជា​ចំណាំ
 Comment[lt]=Priedas skirtas žiniatinklio adresų kontaktuose eksportavimui į žymeles
+Comment[mk]=Приклучок за изнесување на веб-адресите на контактите како обележувачи
 Comment[ms]= Plug masuk untuk eksport alamat web untuk perhubungan sebagai tanda laman
 Comment[nb]=Programtillegg som eksporterer kontaktenes nett-addresser som bokmerker
 Comment[nds]=Moduul för't Exporteren vun Kontakt-Nettadressen as Leestekens
+Comment[ne]=पुस्तकचिनो अनुरुपका सम्पर्कका वेब ठेगानाको निर्यात गर्न प्लगइन गर्नुहोस्
 Comment[nl]=Plugin voor het exporteren van de webadressen van de contactpersonen als bladwijzers
 Comment[nn]=Programtillegg for å eksportera nettadresser av kontaktar som bokmerker
 Comment[pl]=Wtyczka eksportująca adresy WWW z wizytówek jako zakładki
Index: kaddressbook/xxport/ldif_xxport.desktop
===================================================================
--- kaddressbook/xxport/ldif_xxport.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kaddressbook/xxport/ldif_xxport.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -3,10 +3,10 @@
 X-KDE-Library=libkaddrbk_ldif_xxport
 Name=KAB LDIF XXPort Plugin
 Name[af]=KAB LDIF XXPort inprop module
-Name[be]=Дапаўненьне KAB "Імпарт LDIF"
+Name[be]=Дапаўненне KAB "Імпарт LDIF"
 Name[br]=Lugent XXPorzh KAB LDIF
 Name[bs]=KAB dodatak za LDIF XXPort
-Name[ca]=Endollable per importació/exportació de LDIF per a KAB
+Name[ca]=Endollable per importació/exportació de LDIF per al KAB
 Name[cs]=Exportní modul LDIF
 Name[cy]=Ategyn XXPort LDIF KAB
 Name[da]=KAB LDIF XXPort-plugin
@@ -24,11 +24,13 @@
 Name[hu]=KAB LDIF XXPort bővítőmodul
 Name[is]=Íforrit fyrir KAB LDIF XXPort
 Name[ja]=KAB LDIF インポート/エクスポートプラグイン
+Name[kk]=LDIF пішіміне экспорт/импорт ету
 Name[km]=កម្មវិធី​ជំនួយ KAB LDIF XXPort
 Name[lt]=KAB LDIF XXPort priedas
 Name[ms]=Plug masuk KAB LDIF XXPort
 Name[nb]=KAB-programtillegg for LDIF-format
 Name[nds]=LDIF-Im-/Exportmoduul för KAdressbook
+Name[ne]=KAB LDIF XXPort प्लगइन
 Name[nl]=KAB LDIF XXPort-plugin
 Name[nn]=KAB LDIF XXPort programtillegg
 Name[pl]=Wtyczka KAB do importu/eksportu z/do formatu LDIF
@@ -48,8 +50,8 @@
 Name[zh_TW]=KAB LDIF XXPort 外掛程式
 Comment=Plugin to import and export contacts in Netscape and Mozilla LDIF format
 Comment[af]=Inprop module wat kontakte in Netscape/Mozilla LDIF formaat invoer en uitvoer
-Comment[be]=Дапаўненьне для імпарту кантактаў у фармаце Netscape/Mozilla LDIF
-Comment[bg]=Приставка за импорт/експорт на контактите във формат на Netscape и Mozilla (LDIF)
+Comment[be]=Дапаўненне для імпарту кантактаў у фармаце Netscape/Mozilla LDIF
+Comment[bg]=Приставка за импортиране/експортиране на контактите във формат на Netscape и Mozilla (LDIF)
 Comment[bs]=Dodatak za uvoz i izvoz kontakata iz LDIF formata koji koriste Netscape i Mozilla
 Comment[ca]=Endollable per a importar i exportar contactes en el format LDIF de Mozilla i Netscape
 Comment[cs]=Modul pro import a export kontaktů ve formátu Netscape a Mozilla LDIF
@@ -68,12 +70,15 @@
 Comment[hu]=Bővítőmodul Netscape és Mozilla LDIF formátumú névjegyek importálásához/exportálásához
 Comment[is]=Íforrit sem flytur flytja inn eða út tengiliði í Netscape og Mozilla LDIF sniði
 Comment[it]=Plugin per importare ed esportare contatti in formato Netscape e Mozilla LDIF 
-Comment[ja]=Netscape 並びに Mozilla の LDIF フォーマットによるコンタクトのインポート 及びエクスポート用プラグイン
+Comment[ja]=Netscape と Mozilla の LDIF フォーマットで連絡先をインポート/エクスポートするプラグイン
+Comment[kk]=Netscape пен Mozilla LDIF пішіміне экспорт/импорт ету модулі
 Comment[km]=កម្មវិធី​ជំនួយ​ដើម្បី​នាំចូល និង នាំចេញ​ទំនាក់ទំនង​ក្នុង​ទ្រង់ទ្រាយ​ជា Netscape និង Mozilla LDIF
 Comment[lt]=Priedas, skirtas kontaktų importavimui ir eksportavimui Netscape ir Mozilla LDIFF formatu
+Comment[mk]=Приклучок за внесување и изнесување контакти во форматите на Netscape и Mozilla LDIF
 Comment[ms]=Plug masuk untuk import dan eksport alamat perhubungan di dalam format LDIF Netscape dan Mozilla
 Comment[nb]=Programtillegg for import/eksport av kontakter i Netscape og Mozillas LDIF-format
 Comment[nds]=Moduul för't Im- un Exporteren vun Kontakten in't LDIF-Formaat vun Netscape und Mozilla
+Comment[ne]=नेटस्क्येप र मोजिला LDIF ढाँचामा आयात निर्यात गर्न प्लगइन गर्नुहोस्
 Comment[nl]=Plugin voor het importeren en exporteren van contactpersonen in Netscape's en Mozilla's LDIF-formaat
 Comment[nn]=Programtillegg for å importera og eksportera kontaktar i Netscape og Mozilla LDIF-format
 Comment[pl]=Wtyczka do importowania i eksportowania wizytówek z/do formatu LDIF używanego przez Mozillę i Netscape'a
Index: kaddressbook/xxport/eudora_xxport.desktop
===================================================================
--- kaddressbook/xxport/eudora_xxport.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kaddressbook/xxport/eudora_xxport.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -3,10 +3,10 @@
 X-KDE-Library=libkaddrbk_eudora_xxport
 Name=KAB Eudora XXPort Plugin
 Name[af]=KAB Eudora XXPort inprop module
-Name[be]=Дапаўненьне KAB "Імпарт/Экспарт Eudora"
+Name[be]=Дапаўненне KAB "Імпарт/Экспарт Eudora"
 Name[br]=Lugent XXPorzh Eudora KAB
 Name[bs]=KAB dodatak za Eudora XXPort
-Name[ca]=Endollable d'importació/exportació Eudora per a KAB
+Name[ca]=Endollable d'importació/exportació Eudora per al KAB
 Name[cs]=Exportní modul do Eudory
 Name[cy]=Ategyn XXPort Eudora KAB
 Name[da]=KAB Eudora XXPort-plugin
@@ -24,11 +24,13 @@
 Name[hu]=KAB Eudora XXPort bővítőmodul
 Name[is]=Íforrit fyrir KAB Eudora XXPort
 Name[ja]=KAB Eudora インポート/エクスポートプラグイン
+Name[kk]=Eudora-ға экспорт/импорт ету
 Name[km]=កម្មវិធី​ជំនួយ KAB Eudora XXPort
 Name[lt]=KAB Eudora XXPort priedas
 Name[ms]=Plug masuk KAB Eudora XXPort
 Name[nb]=KAB-programtillegg for Eudora-eksport
 Name[nds]=Eudora-Im-/Exportmoduul för KAdressbook
+Name[ne]=KAB यूडोरा XXPort प्लगइन
 Name[nn]=KAB Eudora XXPort programtillegg
 Name[pl]=Wtyczka KAB do importu/eksportu wizytówek Eudory
 Name[pt]='Plugin' XXPort para Eudora do KAB
@@ -47,10 +49,10 @@
 Name[zh_TW]=KAB Eudora XXPort 外掛程式
 Comment=Plugin to import and export Eudora contacts
 Comment[af]=Inprop module wat kontakte in Eudora formaat invoer en uitvoer
-Comment[be]=Дапаўненьне для імпарту і экспарту кантактаў Eudora
-Comment[bg]=Приставка за импорт/експорт на контактите във формат на Eudora
+Comment[be]=Дапаўненне для імпарту і экспарту кантактаў Eudora
+Comment[bg]=Приставка за импортиране/експортиране на контактите във формат на Eudora
 Comment[bs]=Dodatak za uvoz i izvoz kontakata iz Eudore
-Comment[ca]=Endollable per a importar i exportar contactes d'Eudora
+Comment[ca]=Endollable per a importar i exportar contactes de l'Eudora
 Comment[cs]=Modul pro import a export kontaktů programu Eudora
 Comment[cy]=Ategyn i fewnforio ac allforio cysylltau Eudora
 Comment[da]=Plugin til at importere og eksportere Eudora-kontakter
@@ -67,12 +69,15 @@
 Comment[hu]=Bővítőmodul Eudora névjegyek importálásához/exportálásához
 Comment[is]=Íforrit til að flytja inn og út Eudora tengiliði
 Comment[it]=Plugin importare ed esportare contatti Eudora
-Comment[ja]=Eudora のコンタクトをインポート又はエクスポートするプラグイン
+Comment[ja]=Eudora の連絡先をインポート/エクスポートするプラグイン
+Comment[kk]=Eudora контакттарды экспорт/импорт ету модулі
 Comment[km]=កម្មវិធី​ជំនួយ​ដើម្បី​នាំចូល និង នាំចេញ​ទំនាក់ទំនង​របស់ Eudora
 Comment[lt]=Priedas Eudora kontaktų importui ir eksportui
+Comment[mk]=Приклучок за внесување и изнесување контакти од Eudora
 Comment[ms]=Plug masuk untuk import dan eksport alamat perhubungan Eudora
 Comment[nb]=Programtillegg for import/eksport av Eudora-kontakter
 Comment[nds]=Moduul för't Im- un Exporteren vun Eudora-Kontakten
+Comment[ne]=यूडोरा सम्पर्क आयात निर्यात गर्न प्लगइन गर्नुहोस्
 Comment[nl]=Plugin voor het importeren en exporteren van Eudora-contactpersonen
 Comment[nn]=Programtillegg for å importera og eksportera Eudora-kontaktar
 Comment[pl]=Wtyczka do importowania i eksportowania wizytówek z/do Eudory
Index: kaddressbook/editors/imeditorwidget.cpp
===================================================================
--- kaddressbook/editors/imeditorwidget.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kaddressbook/editors/imeditorwidget.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -331,7 +331,7 @@
 
 void IMEditorWidget::slotAdd()
 {
-  KDialogBase addDialog( this, "addaddress", true, i18n( "Add Address" ),
+  KDialogBase addDialog( this, "addaddress", true, i18n( "Instant messaging", "Add Address" ),
                          KDialogBase::Ok | KDialogBase::Cancel );
 
   IMAddressWidget *addressWid = new IMAddressWidget( &addDialog, mProtocols );
@@ -366,7 +366,7 @@
 
   // Just edit the first one selected.
   if ( IMAddressLVI *current = static_cast<IMAddressLVI*>( it.current() ) ) {
-    KDialogBase editDialog( this, "editaddress", true, i18n( "Edit Address" ),
+    KDialogBase editDialog( this, "editaddress", true, i18n( "Instant messaging", "Edit Address" ),
                             KDialogBase::Ok | KDialogBase::Cancel );
     IMAddressWidget *addressWid = new IMAddressWidget( &editDialog, mProtocols, current->protocol(),
                                                        current->address(), current->context() ) ;
Index: kaddressbook/editors/protocols/jabberprotocol.desktop
===================================================================
--- kaddressbook/editors/protocols/jabberprotocol.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kaddressbook/editors/protocols/jabberprotocol.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -6,6 +6,7 @@
 X-KDE-InstantMessagingKABCField=messaging/xmpp
 Comment=Jabber Protocol
 Comment[af]=Jabber protokol
+Comment[ar]=ميفاق Jabber
 Comment[be]=Пратакол Jabber
 Comment[bg]=Протокол Jabber
 Comment[br]=Komenad Jabber
@@ -28,11 +29,14 @@
 Comment[is]=Jabber samskiptamátinn
 Comment[it]=Protocollo Jabber
 Comment[ja]=Jabber プロトコル
+Comment[kk]=Jabber протоколы
 Comment[km]=ពិធីការ Jabber
 Comment[lt]=Jabber protokolas
+Comment[mk]=Jabber-протокол
 Comment[ms]=Protokol Jabber 
 Comment[nb]=Jabber-protokoll
 Comment[nds]=Jabber-Protokoll
+Comment[ne]=ज्याबर प्रोटोकल
 Comment[nl]=Jabber-protocol
 Comment[nn]=Jabber-protokoll
 Comment[pl]=Protokół Jabber
@@ -52,5 +56,6 @@
 Comment[zh_CN]=Jabber 协议
 Comment[zh_TW]=Jabber 協定
 Name=Jabber
+Name[ne]=ज्याबर
 Name[ta]=ஜாபர்
 
Index: kaddressbook/editors/protocols/aimprotocol.desktop
===================================================================
--- kaddressbook/editors/protocols/aimprotocol.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kaddressbook/editors/protocols/aimprotocol.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -5,6 +5,7 @@
 ServiceTypes=KABC/IMProtocol,KPluginInfo
 X-KDE-InstantMessagingKABCField=messaging/aim
 Comment=AIM Protocol
+Comment[ar]=ميفاق AIM
 Comment[be]=Пратакол AIM
 Comment[bg]=Протокол AIM
 Comment[br]=Komenad AIM
@@ -27,11 +28,14 @@
 Comment[is]=AIM samskiptamátinn
 Comment[it]=Protocollo AIM
 Comment[ja]=AIM プロトコル
+Comment[kk]=AIM протоколы
 Comment[km]=ពិធីការ AIM
 Comment[lt]=AIM protokolas
+Comment[mk]=AIM-протокол
 Comment[ms]=Protokol AIM 
 Comment[nb]=AIM-protokoll
 Comment[nds]=AIM-Protokoll
+Comment[ne]=एआईएम प्रोटोकल
 Comment[nl]=AIM-protocol
 Comment[nn]=AIM-protokoll
 Comment[pa]=AIM ਪ੍ਰੋਟੋਕਾਲ
@@ -52,4 +56,5 @@
 Comment[zh_CN]=AIM 协议
 Comment[zh_TW]=AIM 協定
 Name=AIM
+Name[ne]=एआईएम
 
Index: kaddressbook/editors/protocols/meanwhileprotocol.desktop
===================================================================
--- kaddressbook/editors/protocols/meanwhileprotocol.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kaddressbook/editors/protocols/meanwhileprotocol.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -6,6 +6,8 @@
 X-KDE-InstantMessagingKABCField=messaging/meanwhile
 Comment=Meanwhile Protocol
 Comment[af]=Meanwhile protokol
+Comment[ar]=ميفاق Meanwhile
+Comment[be]=Пратакол Meanwhile
 Comment[bg]=Протокол Meanwhile
 Comment[br]=Komenad Meanwhile
 Comment[ca]=Protocol Meanwhile
@@ -26,11 +28,14 @@
 Comment[is]=Meanwhile samskiptamátinn
 Comment[it]=Protocollo Meanwhile
 Comment[ja]=Meanwhile プロトコル
+Comment[kk]=Meanwhile протоколы
 Comment[km]=ពិធីការ Meanwhile
 Comment[lt]=Meanwhile protokolas
+Comment[mk]=Meanwhile-протокол
 Comment[ms]=Protokol Meanwhile
 Comment[nb]=Meanwhile-protokoll
 Comment[nds]=Meanwhile-Protokoll
+Comment[ne]=त्यसै समयको प्रोटोकल
 Comment[nl]=Meanwhile-protocol
 Comment[nn]=Meanwhile-protokollen
 Comment[pl]=Protokół Meanwhile
@@ -49,4 +54,5 @@
 Comment[zh_TW]=Meanwhile 協定
 Name=Meanwhile
 Name[fa]=در ضمن
+Name[ne]=त्यस समयको
 
Index: kaddressbook/editors/protocols/skypeprotocol.desktop
===================================================================
--- kaddressbook/editors/protocols/skypeprotocol.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kaddressbook/editors/protocols/skypeprotocol.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -23,10 +23,13 @@
 Comment[is]=Skype Internet sími
 Comment[it]=Telefonia internet Skype
 Comment[ja]=Skype インターネット電話
+Comment[kk]=Skype Интернет телефониясы
 Comment[km]=ទូរស័ព្ទ​តាម​អ៊ីនធឺណិត​ដោយ​ប្រើ Skype
 Comment[lt]=Skype Interneto telefonija
+Comment[mk]=Интернет-телефонија со Skype
 Comment[nb]=Skype IP-telefoni
 Comment[nds]=Internet-Telefoneren mit Skype
+Comment[ne]=स्काइप इन्टरनेट दूरभाषी
 Comment[nl]=Skype internettelefonie
 Comment[nn]=Skype Internett-telefoni
 Comment[pl]=Skype - telefonia internetowa
@@ -42,3 +45,4 @@
 Comment[zh_CN]=Skype Internet 电话
 Comment[zh_TW]=Skype 網路電話
 Name=Skype
+Name[ne]=स्काइप
Index: kaddressbook/editors/protocols/icqprotocol.desktop
===================================================================
--- kaddressbook/editors/protocols/icqprotocol.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kaddressbook/editors/protocols/icqprotocol.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -28,11 +28,14 @@
 Comment[is]=ICQ samskiptamátinn
 Comment[it]=Protocollo ICQ
 Comment[ja]=ICQ プロトコル
+Comment[kk]=ICQ протоколы
 Comment[km]=ពិធីការ ICQ
 Comment[lt]=ICQ protokolas
+Comment[mk]=ICQ-протокол
 Comment[ms]=Protokol ICQ 
 Comment[nb]=ICQ-protokoll
 Comment[nds]=ICQ-Protokoll
+Comment[ne]=आईसीक्यू प्रोटोकल
 Comment[nl]=ICQ-protocol
 Comment[nn]=ICQ-protokoll
 Comment[pl]=Protokół ICQ
@@ -52,4 +55,5 @@
 Comment[zh_CN]=ICQ 协议
 Comment[zh_TW]=ICQ 協定
 Name=ICQ
+Name[ne]=आईसीक्यू
 
Index: kaddressbook/editors/protocols/ircprotocol.desktop
===================================================================
--- kaddressbook/editors/protocols/ircprotocol.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kaddressbook/editors/protocols/ircprotocol.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -10,8 +10,10 @@
 Comment[hu]=IRC (Internet Relay Chat)
 Comment[is]=Internet spjall
 Comment[ja]=インターネット・リレー・チャット
+Comment[kk]=Internet Relay Chat хабарласу
 Comment[km]=ជជែក​កំសាន្ត​តាមអ៊ីនធឺណិត
 Comment[lt]=Estafetinis Interneto pokalbis
+Comment[ne]=इन्टरनेटबाट प्रसारण च्याट
 Comment[pl]=IRC (Internet Relay Chat)
 Comment[pt_BR]=Protocolo de Bate-papo na Internet - IRC
 Comment[ru]=IRC
@@ -25,4 +27,5 @@
 Comment[zh_CN]=Internet 聊天
 Comment[zh_TW]=IRC
 Name=IRC
+Name[ne]=आईआरसी
 
Index: kaddressbook/editors/protocols/msnprotocol.desktop
===================================================================
--- kaddressbook/editors/protocols/msnprotocol.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kaddressbook/editors/protocols/msnprotocol.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -14,6 +14,7 @@
 Comment[ja]=MSN メッセンジャー
 Comment[km]=កម្មវិធី​ផ្ញើ​សារ MSN
 Comment[nds]=MSN-Kortnarichtenmaker
+Comment[ne]=एमएसएन म्यासेन्जर
 Comment[pa]=MSN ਸੁਨੇਹਾਦਾਰ
 Comment[ta]=MSN மெசஞ்சர்
 Comment[tr]=MSN Mesajcısı
@@ -24,6 +25,7 @@
 Name[ja]=MSN メッセンジャー
 Name[km]=កម្មវិធី​ផ្ញើសារ MSN
 Name[nds]=MSN-Kortnarichtenmaker
+Name[ne]=एमएसएन म्यासेन्जर
 Name[ta]=MSN மெசஞ்சர்
 Name[tr]=MSN Mesajcısı
 
Index: kaddressbook/editors/protocols/yahooprotocol.desktop
===================================================================
--- kaddressbook/editors/protocols/yahooprotocol.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kaddressbook/editors/protocols/yahooprotocol.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -6,6 +6,7 @@
 X-KDE-InstantMessagingKABCField=messaging/yahoo
 Comment=Yahoo Protocol
 Comment[af]=Yahoo protokol
+Comment[ar]=ميفاق Yahoo
 Comment[be]=Пратакол Yahoo
 Comment[bg]=Протокол Yahoo
 Comment[br]=Komenad Yahoo
@@ -28,11 +29,14 @@
 Comment[is]=Yahoo samskiptamátinn
 Comment[it]=Protocollo Yahoo
 Comment[ja]=Yahoo プロトコル
+Comment[kk]=Yahoo протоколы
 Comment[km]=ពិធីការ​យ៉ាហ៊ូ
 Comment[lt]=Yahoo protokolas
+Comment[mk]=Yahoo-протокол
 Comment[ms]=Protokol Yahoo 
 Comment[nb]=Yahoo-protokoll
 Comment[nds]=Yahoo-Protokoll
+Comment[ne]=याहू प्रोटोकल
 Comment[nl]=Yahoo-protocol
 Comment[nn]=Yahoo-protokoll
 Comment[pl]=Protokół Yahoo
@@ -55,4 +59,5 @@
 Name[de]=Yahoo!
 Name[fa]=یاهو
 Name[km]=យ៉ាហ៊ូ
+Name[ne]=याहू
 
Index: kaddressbook/editors/protocols/gaduprotocol.desktop
===================================================================
--- kaddressbook/editors/protocols/gaduprotocol.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kaddressbook/editors/protocols/gaduprotocol.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -6,6 +6,7 @@
 X-KDE-InstantMessagingKABCField=messaging/gadu
 Comment=Gadu-Gadu Protocol
 Comment[af]=Gadu-Gadu protokol
+Comment[ar]=ميفاق Gadu-Gadu
 Comment[be]=Пратакол Gadu-Gadu
 Comment[bg]=Протокол Gadu-Gadu
 Comment[br]=Komenad Gadu-Gadu
@@ -28,11 +29,14 @@
 Comment[is]=Gadu-Gadu samskiptamátinn
 Comment[it]=Protocollo Gadu-Gadu
 Comment[ja]=Gadu-Gadu プロトコル
+Comment[kk]=Gadu-Gadu протоколы
 Comment[km]=ពិធីការ Gadu-Gadu
 Comment[lt]=Gadu-Gadu protokolas
+Comment[mk]=Gadu-Gadu-протокол
 Comment[ms]=Protokol Gadu-Gadu 
 Comment[nb]=Gadu-Gadu-protokoll
 Comment[nds]=Gadu-Gadu-Protokoll
+Comment[ne]=गाडु-गाडु प्रोटोकल
 Comment[nl]=Gadu-Gadu-protocol
 Comment[nn]=Gadu-Gadu-protokoll
 Comment[pl]=Protokół Gadu-Gadu
@@ -52,5 +56,6 @@
 Comment[zh_CN]=Gadu-Gadu 协议
 Comment[zh_TW]=Gadu-Gadu 協定
 Name=Gadu-Gadu
+Name[ne]=गाडु-गाडु
 Name[ta]=கடு-கடு
 
Index: kaddressbook/editors/protocols/smsprotocol.desktop
===================================================================
--- kaddressbook/editors/protocols/smsprotocol.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kaddressbook/editors/protocols/smsprotocol.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -28,11 +28,14 @@
 Comment[is]=SMS samskiptamátinn
 Comment[it]=Protocollo SMS
 Comment[ja]=SMS プロトコル
+Comment[kk]=SMS протоколы
 Comment[km]=ពិធីការ​សេវា​សារ​ខ្លីៗ
 Comment[lt]=SMS protokolas
+Comment[mk]=SMS-протокол
 Comment[ms]=Protokol SMS 
 Comment[nb]=SMS Protokoll
 Comment[nds]=SMS-Protokoll
+Comment[ne]=एसएमएस प्रोटोकल
 Comment[nl]=SMS-protocol
 Comment[nn]=SMS-protokoll
 Comment[pl]=Protokół SMS
@@ -54,5 +57,6 @@
 Name=SMS
 Name[fa]=پیام کوتاه
 Name[km]=សេវា​សារ​ខ្លីៗ
+Name[ne]=एसएमएस
 Name[zh_CN]=短信息
 
Index: kaddressbook/editors/protocols/groupwiseprotocol.desktop
===================================================================
--- kaddressbook/editors/protocols/groupwiseprotocol.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kaddressbook/editors/protocols/groupwiseprotocol.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -17,10 +17,12 @@
 Comment[he]=מסנג'ר של Novell GroupWise
 Comment[is]=Novell GroupWise Samskiptatólið
 Comment[ja]=Novell GroupWise メッセンジャー
+Comment[kk]=Novell GroupWise хабарласу
 Comment[km]=កម្មវិធី​ផ្ញើ​សារ​របស់​ណូវែល - GroupWise
 Comment[lt]=Novell GroupWise momentinių žinučių klientas
 Comment[ms]=Pembawa mesej Novell GroupWise 
 Comment[nds]=Novell-GroupWise-Kortnarichtenmaker
+Comment[ne]=नोभेल समूहगत म्यासेन्जर
 Comment[nl]=Novell GroupWise-messenger
 Comment[pl]=Komunikator Novell GroupWise
 Comment[pt_BR]=Mensageiro GroupWise da Novell
@@ -31,6 +33,7 @@
 Comment[ta]=நோவல் குழுவாரியான செய்தியாளன்
 Comment[zh_CN]=Novell GroupWise 信使
 Name=GroupWise
+Name[ne]=समूहगत
 Name[sr]=Groupware
 Name[sr@Latn]=Groupware
 Name[sv]=Groupwise
Index: kaddressbook/editors/cryptosettings.desktop
===================================================================
--- kaddressbook/editors/cryptosettings.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kaddressbook/editors/cryptosettings.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -4,13 +4,13 @@
 Name=Crypto Preferences
 Name[af]=Kripto Voorkeure
 Name[be]=Перавагі крыптаграфіі
-Name[bg]=Криптография
+Name[bg]=Шифроване
 Name[bs]=Postavke kriptografije
 Name[ca]=Preferències de criptografia
 Name[cs]=Nastavení šifrování
 Name[da]=Krypto-indstillinger
 Name[de]=Kryptographie-Einstellungen
-Name[el]=Προτιμήσεις Κρυπτογραφίας
+Name[el]=Προτιμήσεις κρυπτογραφίας
 Name[es]=Preferencias de cifrado
 Name[et]=Krüptoseadistused
 Name[eu]=Kriptografia hobespenak
@@ -23,11 +23,13 @@
 Name[is]=Stillingar dulritunar
 Name[it]=Preferenze crittografia
 Name[ja]=暗号の設定
+Name[kk]=Шифрлау параметрлері
 Name[km]=ចំណង់​ចំណូល​ចិត្ត Crypto
 Name[lt]=Šifravimo pasirinkimai
 Name[ms]=Keutamaan Kripto 
 Name[nb]=Krypterings instillinger
 Name[nds]=Verslöteln-Instellen
+Name[ne]=गुप्तिकरण प्राथमिकता
 Name[nl]=Versleutelingsinstellingen
 Name[nn]=Krypteringsinnstillinger
 Name[pl]=Ustawienia kryptograficzne
Index: kaddressbook/editors/imaddresseditor.desktop
===================================================================
--- kaddressbook/editors/imaddresseditor.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kaddressbook/editors/imaddresseditor.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -8,7 +8,7 @@
 Name[bs]=Instant poruke
 Name[ca]=Missatgeria instantània
 Name[cs]=Komunikátor
-Name[el]=Στιγμιαίο Μήνυμα
+Name[el]=Στιγμιαίο μήνυμα
 Name[es]=Mensajería instantánea
 Name[et]=Kiirsuhtlus
 Name[eu]=Berehalako mezularitza
@@ -21,11 +21,13 @@
 Name[is]=Skilaboðaforrit
 Name[it]=Messaggistica istantanea
 Name[ja]=インスタントメッセージ
+Name[kk]=Лезде хабарласу
 Name[km]=ផ្ញើ​សារ​បន្ទាន់
 Name[lt]=Momentinės žinutės
 Name[ms]=Penghantaran Mesej Segera
 Name[nb]=Lynmelding
 Name[nds]=Kortnarichten-Maker
+Name[ne]=संदेशन दृश्टान्त
 Name[nn]=Lynmelding
 Name[pl]=Komunikacja internetowa
 Name[pt]=Mensagens Instantâneas
@@ -42,7 +44,7 @@
 Name[tr]=Hızlı Mesajlaşma
 Name[uk]=Миттєвий зв'язок
 Name[uz]=Хабар алмашиш
-Name[zh_CN]=即时消息
+Name[zh_CN]=即时通讯
 Name[zh_TW]=即時通訊
 Comment=Instant Messaging Address Editor
 Comment[af]=Kits boodskap adres redigeerder
@@ -52,7 +54,7 @@
 Comment[cs]=Editor adres komunikátorů
 Comment[da]=Instant Messaging adresseeditor
 Comment[de]=Editor für Instant Messaging-Adressen
-Comment[el]=Επεξεργαστής Διευθύνσεων Στιγμιαίων Μηνυμάτων
+Comment[el]=Επεξεργαστής διευθύνσεων στιγμιαίων μηνυμάτων
 Comment[es]=Editor de direcciones de mensajería instantánea
 Comment[et]=Kiirsuhtluse aadresside redaktor
 Comment[eu]=Berehalako mezularitza helbide editorea
@@ -65,11 +67,13 @@
 Comment[is]=Vistfangaritill fyrir skilaboðaforrit
 Comment[it]=Editor degli indirizzi per messaggi istantanei
 Comment[ja]=インスタント メッセージ アドレス 編集
+Comment[kk]=Лезде хабарласу адрестер өңдегіші
 Comment[km]=កម្មវិធី​និពន្ធ​អាសយដ្ឋាន​ដើម្បី​ផ្ញើ​សារ​បន្ទាន់
 Comment[lt]=Momentinių žinučių adresų redaktorius
 Comment[ms]=Pengedit Alamat Penghantaran Mesej Segera
 Comment[nb]=Adresse-redigerer for lynmelding
 Comment[nds]=Editor för Kortnarichten-Adressen
+Comment[ne]=दृष्टान्त संदेशन ठेगाना सम्पादक
 Comment[nl]=Instant Messaging Adresbewerker
 Comment[nn]=Adresseredigering for lynmelding
 Comment[pl]=Edytor adresów komunikatorów internetowych
@@ -86,7 +90,7 @@
 Comment[tg]=Муҳаррири алоқоти хизматгоҳҳои мубодилаи иттилоот
 Comment[tr]=Hızlı Mesajlaşma Adres Düzenleyicisi
 Comment[uk]=Редактор адрес миттєвого зв'язку
-Comment[zh_CN]=即时消息地址编辑器
+Comment[zh_CN]=即时通讯地址编辑器
 Comment[zh_TW]=即時通訊位址編輯器
 ServiceTypes=KAddressBook/ContactEditorWidget
 X-KDE-Library=libkaddrbk_instantmessaging
Index: kaddressbook/editors/kaddressbookimprotocol.desktop
===================================================================
--- kaddressbook/editors/kaddressbookimprotocol.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kaddressbook/editors/kaddressbookimprotocol.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -10,7 +10,7 @@
 Name[cs]=KAddressbook instant messaging protokol
 Name[da]=KAddressbook kvikbesked-protokol
 Name[de]=Adressbuch Instant Messaging Protokoll
-Name[el]=Πρωτόκολλο Στιγμιαίου Μηνύματος του KAddressbook
+Name[el]=Πρωτόκολλο στιγμιαίου μηνύματος του KAddressbook
 Name[es]=Protocolo de mensajería instantánea de KAddressbook
 Name[et]=KDE aadressiraamatu kiirsuhtlusprotokoll
 Name[eu]=KAddressbook berehalako mezularitza protokoloa
@@ -23,11 +23,13 @@
 Name[is]=KAddressbook skilaboðaforritið
 Name[it]=KAddressbook protocollo messaggistica istantanea
 Name[ja]=KAddressbook インスタント メッセージ プロトコル
+Name[kk]=KAddressbook лезде хабарласу протоколы
 Name[km]=ពិធីការ​ផ្ញើសារ​បន្ទាន់​របស់ KAddressbook
 Name[lt]=KAddressbook momentinių žinučių protokolas
 Name[ms]=Protokol Penghantaran Mesej Segera KAddressbook 
 Name[nb]=KAdressbook lynmeldingsprotokoll
 Name[nds]=KAddressbook-Kortnarichten-Protokoll
+Name[ne]=के ठेगाना पुस्तिका दृष्टान्त संदेशन प्रोटोकल
 Name[nl]=KAddressbook Instant Messaging-protocol
 Name[nn]=Lynmeldingsprotokoll for KDE-adresseboka
 Name[pl]=Protokół komunikacji internetowej KAddressbook
@@ -44,7 +46,7 @@
 Name[tg]=Протоколи мубодилаи иттилооти китоби адресии KDE
 Name[tr]=KAddressbook Hızlı Mesajlaşma Protokolü
 Name[uk]=Протокол миттєвого зв'язку KAddressbook
-Name[zh_CN]=KAddressbook 即时消息协议
+Name[zh_CN]=KAddressbook 即时通讯协议
 Name[zh_TW]=KAddressbook 即時通訊協定
 [PropertyDef::X-KDE-InstantMessagingKABCField]
 Type=QString
Index: kaddressbook/searchmanager.cpp
===================================================================
--- kaddressbook/searchmanager.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kaddressbook/searchmanager.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -87,24 +87,58 @@
     if ( KPIM::DistributionList::isDistributionList( *it ) )
       continue;
 #endif
+
+    bool found = false;
+    // search over all fields
     KABC::Field::List::ConstIterator fieldIt( fieldList.begin() );
     const KABC::Field::List::ConstIterator fieldEndIt( fieldList.end() );
     for ( ; fieldIt != fieldEndIt; ++fieldIt ) {
 
       if ( type == StartsWith && (*fieldIt)->value( *it ).startsWith( pattern, false ) ) {
         mContacts.append( *it );
+        found = true;
         break;
       } else if ( type == EndsWith && (*fieldIt)->value( *it ).endsWith( pattern, false ) ) {
         mContacts.append( *it );
+        found = true;
         break;
       } else if ( type == Contains && (*fieldIt)->value( *it ).find( pattern, 0, false ) != -1 ) {
         mContacts.append( *it );
+        found = true;
         break;
       } else if ( type == Equals && (*fieldIt)->value( *it ).localeAwareCompare( pattern ) == 0 ) {
         mContacts.append( *it );
+        found = true;
         break;
       }
     }
+
+    if ( !found ) {
+      // search over custom fields
+      const QStringList customs = (*it).customs();
+
+      QStringList::ConstIterator customIt( customs.begin() );
+      const QStringList::ConstIterator customEndIt( customs.end() );
+      for ( ; customIt != customEndIt; ++customIt ) {
+        int pos = (*customIt).find( ':' );
+        if ( pos != -1 ) {
+          const QString value = (*customIt).mid( pos + 1 );
+          if ( type == StartsWith && value.startsWith( pattern, false ) ) {
+            mContacts.append( *it );
+            break;
+          } else if ( type == EndsWith && value.endsWith( pattern, false ) ) {
+            mContacts.append( *it );
+            break;
+          } else if ( type == Contains && value.find( pattern, 0, false ) != -1 ) {
+            mContacts.append( *it );
+            break;
+          } else if ( type == Equals && value.localeAwareCompare( pattern ) == 0 ) {
+            mContacts.append( *it );
+            break;
+          }
+        }
+      }
+    }
   }
 
   emit contactsUpdated();
Index: kaddressbook/kablock.cpp
===================================================================
--- kaddressbook/kablock.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kaddressbook/kablock.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -57,6 +57,8 @@
 {
   if ( !mSelf )
     kabLockDeleter.setObject( mSelf, new KABLock( ab ) );
+  else
+    mSelf->mAddressBook = ab;
 
   return mSelf;
 }
Index: kaddressbook/kabcore.cpp
===================================================================
--- kaddressbook/kabcore.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kaddressbook/kabcore.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -797,8 +797,7 @@
       mCommandHistory->blockSignals( false );
     }
 
-    mModified = true;
-    mActionSave->setEnabled( true );
+    setModified(true);
   }
 }
 
@@ -965,15 +964,25 @@
 
 void KABCore::addressBookChanged()
 {
+  const QStringList selectedUids = mViewManager->selectedUids();
+
   mAddressBookChangedTimer->stop();
 
   if ( mJumpButtonBar )
     mJumpButtonBar->updateButtons();
 
   mSearchManager->reload();
+
   mViewManager->setSelected( QString::null, false );
-  setContactSelected( QString::null );
 
+  QString uid = QString::null;
+  if ( !selectedUids.isEmpty() ) {
+    uid = selectedUids.first();
+    mViewManager->setSelected( uid, true );
+  }
+
+  setContactSelected( uid );
+
   updateCategories();
 }
 
@@ -1030,6 +1039,7 @@
 
   QHBoxLayout *detailsPageLayout = new QHBoxLayout( mDetailsPage, 0, 0 );
   mDetails = new KPIM::AddresseeView( mDetailsPage );
+  mDetails->setVScrollBarMode( QScrollView::Auto );
   detailsPageLayout->addWidget( mDetails );
 
   connect( mDetails, SIGNAL( addressClicked( const QString&) ),
Index: kaddressbook/addresseeeditorwidget.cpp
===================================================================
--- kaddressbook/addresseeeditorwidget.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kaddressbook/addresseeeditorwidget.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -782,8 +782,7 @@
   }
 
   mCategorySelectDialog->setSelected( QStringList::split( ",", mCategoryEdit->text() ) );
-  mCategorySelectDialog->show();
-  mCategorySelectDialog->raise();
+  mCategorySelectDialog->exec();
 }
 
 void AddresseeEditorWidget::categoriesSelected( const QStringList &list )
@@ -799,8 +798,7 @@
              mCategorySelectDialog, SLOT( updateCategoryConfig() ) );
   }
 
-  mCategoryEditDialog->show();
-  mCategoryEditDialog->raise();
+  mCategoryEditDialog->exec();
 }
 
 void AddresseeEditorWidget::emitModified()
Index: kaddressbook/kaddressbook_view.desktop
===================================================================
--- kaddressbook/kaddressbook_view.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kaddressbook/kaddressbook_view.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -4,7 +4,7 @@
 X-KDE-ServiceType=KAddressBook/View
 Comment=KAddressBook View Plugin
 Comment[af]=KAddressBook besigtig inprop module
-Comment[be]=Дапаўненьне K Адраснай кнігі "Выгляд"
+Comment[be]=Дапаўненне K Адраснай кнігі "Выгляд"
 Comment[bg]=Приставка за преглед на адресника
 Comment[br]=Lugent gwell KAddressBook
 Comment[bs]=KAddressBook dodatak za pregledanje
@@ -27,11 +27,14 @@
 Comment[is]=KAddressbook birtingar íforrit
 Comment[it]=Plugin visualizzazione di KAddressbook
 Comment[ja]=Addressbook ビュープラグイン
+Comment[kk]=Адрестік кітапшасын қарау модулі
 Comment[km]=កម្មវិធី​ជំនួយ​ទិដ្ឋភាព​របស់ KAddressBook
 Comment[lt]=KAddressBook peržiūros priedas
+Comment[mk]=Приклучок за преглед на КАдресар
 Comment[ms]=Plug masuk Pelihat KAddressBook
 Comment[nb]=KAddressbook-programtillegg for visning
 Comment[nds]=Kiekermoduul för KAdressbook
+Comment[ne]=केडीई ठेगाना पुस्तिका दृश्य प्लगइन
 Comment[nl]=KAddressBook Weergave Plugin
 Comment[nn]=Programtillegg for vising av KDE-adresseboka
 Comment[pl]=Wtyczka widoku KAddressBook
Index: kaddressbook/addresseditwidget.cpp
===================================================================
--- kaddressbook/addresseditwidget.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kaddressbook/addresseditwidget.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -97,7 +97,7 @@
   mAddressField->setTextFormat( Qt::PlainText );
   layout->addWidget( mAddressField );
 
-  mEditButton = new QPushButton( i18n( "&Edit Addresses..." ), this );
+  mEditButton = new QPushButton( i18n( "street/postal", "&Edit Addresses..." ), this );
   connect( mEditButton, SIGNAL( clicked() ), this, SLOT( edit() ) );
 
   layout->addWidget( mEditButton );
@@ -259,7 +259,7 @@
 AddressEditDialog::AddressEditDialog( const KABC::Address::List &list,
                                       int selected, QWidget *parent,
                                       const char *name )
-  : KDialogBase( Plain, i18n( "Edit Address" ), Ok | Cancel, Ok,
+  : KDialogBase( Plain, i18n( "street/postal", "Edit Address" ), Ok | Cancel, Ok,
                  parent, name, true, true ),
     mPreviousAddress( 0 )
 {
@@ -324,7 +324,7 @@
   label->setBuddy( mCountryCombo );
   topLayout->addWidget( mCountryCombo, 6, 1 );
 
-  mPreferredCheckBox = new QCheckBox( i18n( "This is the preferred address" ), page );
+  mPreferredCheckBox = new QCheckBox( i18n( "street/postal", "This is the preferred address" ), page );
   topLayout->addMultiCellWidget( mPreferredCheckBox, 8, 8, 0, 1 );
 
   KSeparator *sep = new KSeparator( KSeparator::HLine, page );
@@ -600,13 +600,13 @@
 
 
 AddressTypeDialog::AddressTypeDialog( int type, QWidget *parent )
-  : KDialogBase( Plain, i18n( "Edit Address Type" ), Ok | Cancel, Ok,
+  : KDialogBase( Plain, i18n( "street/postal", "Edit Address Type" ), Ok | Cancel, Ok,
                  parent, "AddressTypeDialog" )
 {
   QWidget *page = plainPage();
   QVBoxLayout *layout = new QVBoxLayout( page );
 
-  mGroup = new QButtonGroup( 2, Horizontal, i18n( "Address Types" ), page );
+  mGroup = new QButtonGroup( 2, Horizontal, i18n( "street/postal", "Address Types" ), page );
   layout->addWidget( mGroup );
 
   mTypeList = KABC::Address::typeList();
Index: kaddressbook/kcmconfigs/kabcustomfields.desktop
===================================================================
--- kaddressbook/kcmconfigs/kabcustomfields.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kaddressbook/kcmconfigs/kabcustomfields.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -14,6 +14,7 @@
 
 Name=Custom Pages
 Name[af]=Pasmaak Blaaie
+Name[ar]=الصفحات المعتادة
 Name[bg]=Потребителски полета
 Name[br]=Pajennoù dre ziouer
 Name[bs]=Vlastite stranice
@@ -35,11 +36,14 @@
 Name[is]=Sérsniðnar síður
 Name[it]=Pagine personalizzate
 Name[ja]=カスタム ページ
+Name[kk]=Қосымша парақтар
 Name[km]=ទំព័រ​ផ្ទាល់​ខ្លួន
 Name[lt]=Pasirinkti puslapiai
+Name[mk]=Сопствени страници
 Name[ms]=Halaman Kebiasaan 
 Name[nb]=Tilpassede sider
 Name[nds]=Egen Sieden
+Name[ne]=अनुकूल पृष्ठ
 Name[nl]=Aangepaste pagina's
 Name[nn]=Tilpassa sider
 Name[pl]=Własne strony
@@ -59,6 +63,7 @@
 Name[zh_CN]=定制页
 Comment=Configure the Custom Pages
 Comment[af]=Stel die pasmaak blaaie op
+Comment[ar]=إعداد الصفحات المعتادة
 Comment[bg]=Настройки на потребителските полета
 Comment[br]=Kefluniañ ar pajennoù diouzhoc'h
 Comment[bs]=Podesite vlastite stranice
@@ -80,11 +85,14 @@
 Comment[is]=Stilla sérsniðnu síðurnar
 Comment[it]=Configura le pagine personalizzate
 Comment[ja]=カスタム ページの設定
+Comment[kk]=Қосымша парақтарды баптау
 Comment[km]=កំណត់​រចនាសម្ព័ន្ធ​ទំព័រ​ផ្ទាល់​ខ្លួន
 Comment[lt]=Konfigūruoti darbastalių skaičių ir pavadinimus
+Comment[mk]=Конфигурирајте ги сопствените страници
 Comment[ms]=Konfigurkan Halaman Langganan 
 Comment[nb]=Stille inn de tilpassede sidene
 Comment[nds]=Egen Sieden instellen
+Comment[ne]=अनुकूल पृष्ठ कन्फिगर गर्नुहोस्
 Comment[nl]=Hier kunt u de aangepaste pagina's instellen
 Comment[nn]=Set opp dei tilpassa sidene
 Comment[pl]=Konfiguracja własnych stron
@@ -125,9 +133,11 @@
 Keywords[ja]=kaddressbook、設定、設定,カスタムフィールド
 Keywords[km]=kaddressbook,កំណត់​រចនាសម្ព័ន្ធ,ការ​កំណត់,វាល​ផ្ទាល់​ខ្លួន
 Keywords[lt]=kaddressbook, configure, settings, custom fields, pasirinkti laukai,konfigūruoti, nustatymai
+Keywords[mk]=kaddressbook, configure, settings, custom fields, КАдресар, конфигурација, конфигурирање, сопствени полиња
 Keywords[ms]=kaddressbook, konfigur, seting, medan kebiasaan
 Keywords[nb]=kaddressbook, sette opp, innstillinger
 Keywords[nds]=KAddressbook,KAdressbook,Adressbook,instellen,egen Feller
+Keywords[ne]=केडीई ठेगाना पुस्तिका, कन्फिगर, सेटिङ, अनुकूल फिल्ड
 Keywords[nl]=adresboek,KAB,kab,kaddressbook,instellingen,configuratie,aangepaste velden
 Keywords[nn]=adressebok, oppsett, innstillingar, tilpassa felt
 Keywords[pl]=kaddressbook,książka adresowa,konfiguracja,ustawienia, własne pola
Index: kaddressbook/kcmconfigs/kabconfig.desktop
===================================================================
--- kaddressbook/kcmconfigs/kabconfig.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kaddressbook/kcmconfigs/kabconfig.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -15,6 +15,7 @@
 
 Name=General
 Name[af]=Algemeen
+Name[ar]=عام
 Name[bg]=Общи
 Name[br]=Pennañ
 Name[cs]=Obecné
@@ -34,11 +35,14 @@
 Name[is]=Almennt
 Name[it]=Generale
 Name[ja]=全般
+Name[kk]=Жалпы
 Name[km]=ទូទៅ
 Name[lt]=Bendras
+Name[mk]=Општо
 Name[ms]=Umum
 Name[nb]=Generelt
 Name[nds]=Allgemeen
+Name[ne]=साधारण
 Name[nl]=Algemeen
 Name[nn]=Generelt
 Name[pa]=ਸਧਾਰਨ
@@ -60,6 +64,7 @@
 Name[zh_CN]=常规
 Comment=Configure the Address Book
 Comment[af]=Stel die adres boek op
+Comment[ar]=إعداد دفتر العناوين
 Comment[be]=Настроіць адрасную кнігу
 Comment[bg]=Настройки на адресника
 Comment[br]=Kefluniañ ar c'harned chomlec'hioù
@@ -84,11 +89,14 @@
 Comment[is]=Stilla vistfangaskrána
 Comment[it]=Configura la rubrica indirizzi
 Comment[ja]=アドレス帳設定
+Comment[kk]=Адрестік кітапшаны баптау
 Comment[km]=កំណត់​រចនាសម្ព័ន្ធ​សៀវភៅ​អាសយដ្ឋាន
 Comment[lt]=Konfigūruoti adresų knygelę
+Comment[mk]=Конфигурирајте го адресарот
 Comment[ms]=Konfigurkan Buku Alamat
 Comment[nb]=Oppsett for adresseboka
 Comment[nds]=Adressbook instellen
+Comment[ne]=ठेगाना पुस्तिका कन्फिगर गर्नुहोस्
 Comment[nl]=Hier kunt u uw adresboek aanpassen
 Comment[nn]=Setja opp adressebok
 Comment[pl]=Konfiguracja Książki adresowej
@@ -111,7 +119,7 @@
 Comment[zh_TW]=設定通訊錄
 Keywords=kaddressbook, configure, settings
 Keywords[af]=kaddressbook, configure,settings,adres
-Keywords[be]=K Адрасная кніга, настроіць, настройкі, kaddressbook, configure, settings
+Keywords[be]=K Адрасная кніга, настроіць, настаўленні, kaddressbook, configure, settings
 Keywords[bg]=адресни,адресна,книга,визитник,визитка,картичка,kaddressbook, configure, settings
 Keywords[br]=kaddressbook, kefluniañ, dibarzhoù
 Keywords[bs]=kaddressbook, configure, settings, podesi, podesite, postavke, konfiguracija
@@ -136,9 +144,11 @@
 Keywords[ja]=kaddressbook 設定
 Keywords[km]=kaddressbook,កំណត់​រចនាសម្ព័ន្ធ,ការ​កំណត់
 Keywords[lt]=kaddressbook, configure, settings, konfigūravimas, nustatymai
+Keywords[mk]=kaddressbook, configure, settings, КАдресар, конфигурирање, конфигурација, поставување
 Keywords[ms]=,selaraskan, tetapan, kaddressbook, configure, settings
 Keywords[nb]=kaddressbook, sette opp, innstillinger
 Keywords[nds]=KAddressbook,KAdressbook,Adressbook,instellen
+Keywords[ne]=केडीई ठेगाना पुस्तिका, कन्फिगर, सेटिङ
 Keywords[nl]=adresboek,KAB,kab,kaddressbook,instellingen,configuratie
 Keywords[nn]=adressebok, oppsett, innstillingar
 Keywords[pl]=kaddressbook, książka adresowa,adresy,konfiguracja,ustawienia,opcje
Index: kaddressbook/kcmconfigs/kabldapconfig.desktop
===================================================================
--- kaddressbook/kcmconfigs/kabldapconfig.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kaddressbook/kcmconfigs/kabldapconfig.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -37,10 +37,13 @@
 Name[is]=LDAP uppfletting
 Name[it]=Ricerca LDAP
 Name[ja]=LDAP 検索
+Name[kk]=LDAP іздеу
 Name[km]=ស្វែងរក LDAP
 Name[lt]=LDAP paieška
+Name[mk]=Пребарување во LDAP
 Name[nb]=LDAP oppslag
 Name[nds]=LDAP-Naslaan
+Name[ne]=एलडीएपी खोजी गर्नुहोस्
 Name[nl]=LDAP-zoekactie
 Name[nn]=LDAP oppslag
 Name[pa]=LDAP ਖੋਜ
@@ -82,11 +85,14 @@
 Comment[is]=Breyta LDAP stillingum vistfangaskráarinnar
 Comment[it]=Configurare le impostazioni LDAP della rubrica indirizzi
 Comment[ja]=アドレス帳 LDAP 設定
+Comment[kk]=Адрестік кітапшаның LDAP параметрлерін баптау
 Comment[km]=កំណត់​រចនាសម្ព័ន្ធ​ការ​កំណត់ LDAP របស់​សៀវភៅ​អាសយដ្ឋាន
 Comment[lt]=Konfigūruoti adresų knygelės LDAP nustatymus
+Comment[mk]=Конфигурирајте ги поставувањата за LDAP за адресарот
 Comment[ms]=Konfigurkan Seting Buku Alamat  LDAP 
 Comment[nb]=Sett opp LDAP-innstillinger for adresseboka
 Comment[nds]=LDAP-Instellen för KAdressbook
+Comment[ne]=ठेगाना पुस्तिका एलडीएपी सेटिङ कन्फिगर गर्नुहोस्
 Comment[nl]=Hier kunt u de LDAP-instellingen voor uw adresboek instellen
 Comment[nn]=Setja opp LDAP-innstillingar for adresseboka
 Comment[pl]=Konfiguracja ustawień LDAP dla Książki adresowej
@@ -106,7 +112,7 @@
 Comment[zh_CN]=配置地址簿 LDAP 设置
 Comment[zh_TW]=設定通訊錄 LDAP 設定
 Keywords=kaddressbook, configure, settings, LDAP
-Keywords[be]=K Адрасная кніга, настроіць, настройкі, kaddressbook, configure, settings, LDAP
+Keywords[be]=K Адрасная кніга, настроіць, настраўленні, kaddressbook, configure, settings, LDAP
 Keywords[bg]=адресник,адрес,адресна,книга,сървър,всички,kaddressbook, configure, settings, LDAP
 Keywords[br]=kaddressbook, kefluniañ, dibarzhoù, LDAP
 Keywords[bs]=kaddressbook, configure, settings, LDAP, podesi, postavke, podesite, konfiguracija
@@ -131,9 +137,11 @@
 Keywords[ja]=kaddressbook LDAP 設定
 Keywords[km]=kaddressbook,កំណត់​រចនាសម្ព័ន្ធ,ការ​កំណត់,LDAP
 Keywords[lt]=kaddressbook, configure, settings, LDAP, nustatymai, konfigūruoti
+Keywords[mk]=kaddressbook, configure, settings, LDAP, кадресар, конфигурација, конфигурирање, поставувања
 Keywords[ms]=selaraskan, tetapan, kaddressbook, configure, settings, LDAP
 Keywords[nb]=kaddressbook, sette opp, innstillinger, LDAP
 Keywords[nds]=KAdressbook,Adressbook,LDAP,instellen
+Keywords[ne]=केडीई ठेगाना पुस्तिका, कन्फिगर, सेटिङ, एलडीएपी
 Keywords[nl]=adresboek,kaddressbook,LDAP
 Keywords[nn]=adressebok, oppsett, innstillingar, LDAP
 Keywords[pl]=kaddressbook, książka adresowa,konfiguracja,ustawienia,opcje, LDAP
Index: kaddressbook/kaddressbookview.cpp
===================================================================
--- kaddressbook/kaddressbookview.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kaddressbook/kaddressbookview.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -187,7 +187,7 @@
   } else {
     const KABC::Addressee::List contacts = mCore->searchManager()->contacts();
     if ( !contacts.isEmpty() )
-      setSelected( contacts.first().uid(), true );
+      setFirstSelected( true );
     else
       emit selected( QString::null );
   }
Index: kaddressbook/thumbnailcreator/ldifvcardthumbnail.desktop
===================================================================
--- kaddressbook/thumbnailcreator/ldifvcardthumbnail.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kaddressbook/thumbnailcreator/ldifvcardthumbnail.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -11,7 +11,7 @@
 Name[cy]=Ffeiliau Cerdyn Busnes Electronig
 Name[da]=Elektroniske forretningskort-filer
 Name[de]=Dateien für elektronische Visitenkarten
-Name[el]=Αρχεία Επαγγελματικών Ηλεκτρονικών Καρτών
+Name[el]=Αρχεία επαγγελματικών ηλεκτρονικών καρτών
 Name[es]=Archivos de tarjetas de visita electrónicas
 Name[et]=Elektrooniline visiitkaart
 Name[eu]=Electronic Business Card fitxategiak
@@ -24,11 +24,14 @@
 Name[is]=Skrár með rafrænum nafnspjöldum
 Name[it]=Biglietto da visita elettronico
 Name[ja]=電子ビジネスカードファイル
+Name[kk]=Электрондық визитка файлдары
 Name[km]=ឯកសារ​នាមប័ណ្ណ​អេឡិចត្រូនិច
 Name[lt]=Elektroninės verslo kortelės bylos
+Name[mk]=Датотеки со електронски деловни картички
 Name[ms]=Fail Kad Perniagaan Elektronik
 Name[nb]=Filer for elektroniske visittkort
 Name[nds]=Dateien mit elektroonsche Visitenkoorten
+Name[ne]=बिद्युतीय व्यवसायीक कार्ड फाइल
 Name[nl]=Elektronische visitekaartbestanden
 Name[nn]=Filer for elektroniske visittkort
 Name[pl]=Pliki elektronicznych wizytówek
Index: kaddressbook/imagewidget.cpp
===================================================================
--- kaddressbook/imagewidget.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kaddressbook/imagewidget.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -34,10 +34,6 @@
 #include <kurldrag.h>
 #include <libkdepim/kpixmapregionselectordialog.h>
 
-#include <librss/loader.h>
-#include <librss/document.h>
-#include <librss/image.h>
-
 #include <qapplication.h>
 #include <qdragobject.h>
 #include <qeventloop.h>
@@ -51,13 +47,11 @@
 
 #include "imagewidget.h"
 
-ImageLoader::ImageLoader()
-  : QObject( 0, "ImageLoader" ),
-    mIsLoadingBlog( false )
+ImageLoader::ImageLoader( QWidget *parent )
+  : QObject( 0, "ImageLoader" ), mParent( parent )
 {
 }
 
-
 KABC::Picture ImageLoader::loadPicture( const KURL &url, bool *ok )
 {
   KABC::Picture picture;
@@ -73,7 +67,7 @@
     image.load( url.path() );
     picture.setData( image );
     (*ok) = true;
-  } else if ( KIO::NetAccess::download( url, tempFile, 0 ) ) {
+  } else if ( KIO::NetAccess::download( url, tempFile, mParent ) ) {
     image.load( tempFile );
     picture.setData( image );
     (*ok) = true;
@@ -82,13 +76,13 @@
 
   if ( !(*ok) ) {
     // image does not exist (any more)
-    KMessageBox::sorry( 0, i18n( "This contact's image cannot be found." ) );
+    KMessageBox::sorry( mParent, i18n( "This contact's image cannot be found." ) );
     return picture;
   }
 
   QPixmap pixmap = picture.data();
 
-  QPixmap selectedPixmap = KPIM::KPixmapRegionSelectorDialog::getSelectedImage( pixmap, 100, 140, 0 );
+  QPixmap selectedPixmap = KPIM::KPixmapRegionSelectorDialog::getSelectedImage( pixmap, 100, 140, mParent );
   if ( selectedPixmap.isNull() ) {
     (*ok) = false;
     return picture;
@@ -108,51 +102,7 @@
   return picture;
 }
 
-KABC::Picture ImageLoader::loadBlog( const KURL &url, bool *ok )
-{
-  RSS::Loader *loader = RSS::Loader::create();
-  connect( loader, SIGNAL( loadingComplete( Loader*, Document, Status ) ),
-           this, SLOT( loadingComplete( Loader*, Document, Status ) ) );
-  loader->loadFrom( url, new RSS::FileRetriever );
 
-  mIsLoadingBlog = true;
-  while ( mIsLoadingBlog ) {
-    qApp->eventLoop()->processEvents( QEventLoop::ExcludeUserInput );
-    usleep( 500 );
-  }
-
-  if ( mPicture.data().isNull() ) {
-    KMessageBox::sorry( 0,
-        i18n( "Blog feed at '%1' does not contain an image." ).arg( url.url() ) );
-    (*ok) = false;
-  }
-  (*ok) = true;
-
-  return mPicture;
-}
-
-void ImageLoader::loadingComplete( RSS::Loader*,
-                                   RSS::Document doc,
-                                   RSS::Status status )
-{
-  mIsLoadingBlog = false;
-
-  if ( status != RSS::Success ) {
-    mPicture = KABC::Picture();
-    return;
-  }
-
-  if ( !doc.image() ) {
-    mPicture = KABC::Picture();
-    return;
-  }
-
-  bool ok = false;
-  KABC::Picture pic = loadPicture( doc.image()->url().url(), &ok );
-  if ( ok )
-    mPicture = pic;
-}
-
 ImageButton::ImageButton( const QString &title, QWidget *parent )
   : QPushButton( title, parent ),
     mReadOnly( false ), mImageLoader( 0 )
@@ -183,11 +133,6 @@
   mImageLoader = loader;
 }
 
-void ImageButton::setBlogFeed( const KURL &url )
-{
-  mBlogFeed = url;
-}
-
 void ImageButton::startDrag()
 {
   if ( !mPicture.data().isNull() ) {
@@ -272,9 +217,6 @@
 {
   QPopupMenu menu( this );
   menu.insertItem( i18n( "Reset" ), this, SLOT( clear() ) );
-  if ( mBlogFeed.isValid() )
-    menu.insertItem( i18n("Get From Blog"), this, SLOT( loadBlog() ) );
-
   menu.exec( event->globalPos() );
 }
 
@@ -294,17 +236,6 @@
   }
 }
 
-void ImageButton::loadBlog()
-{
-  bool ok = false;
-  KABC::Picture pic = mImageLoader->loadBlog( mBlogFeed, &ok );
-  if ( ok ) {
-    mPicture = pic;
-    updateGUI();
-    emit changed();
-  }
-}
-
 void ImageButton::clear()
 {
   mPicture = KABC::Picture();
@@ -317,7 +248,7 @@
                                   QWidget *parent, const char *name )
   : QWidget( parent, name ), mReadOnly( false )
 {
-  mImageLoader = new ImageLoader();
+  mImageLoader = new ImageLoader( this );
 
   QVBoxLayout *topLayout = new QVBoxLayout( this, KDialog::marginHint(),
                                             KDialog::spacingHint() );
@@ -346,11 +277,6 @@
   mImageButton->setReadOnly( mReadOnly );
 }
 
-void ImageBaseWidget::setBlogFeed( const QString &feed )
-{
-  mImageButton->setBlogFeed( feed );
-}
-
 void ImageBaseWidget::setImage( const KABC::Picture &photo )
 {
   mImageButton->setPicture( photo );
@@ -381,7 +307,6 @@
 void ImageWidget::loadContact( KABC::Addressee *addr )
 {
   mPhotoWidget->setImage( addr->photo() );
-  mPhotoWidget->setBlogFeed( addr->custom( "KADDRESSBOOK", "BlogFeed" ) );
   mLogoWidget->setImage( addr->logo() );
 }
 
Index: kaddressbook/Makefile.am
===================================================================
--- kaddressbook/Makefile.am	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kaddressbook/Makefile.am	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -12,7 +12,6 @@
           -I$(top_builddir)/kaddressbook/common \
           -I$(top_srcdir) \
           -I$(top_buildir)/kaddressbook/editors \
-          -I$(top_srcdir)/akregator/src \
           $(all_includes)
 
 bin_PROGRAMS = kaddressbook
@@ -49,7 +48,6 @@
                             -lkabc_file $(LIB_KABC) $(LIB_KHTML) \
                             $(top_builddir)/kaddressbook/common/libkabcommon.la \
                             $(top_builddir)/kaddressbook/editors/libkabim.la \
-                            ../akregator/src/librss/librsslocal.la \
                             -lkdeprint
 libkaddressbook_la_COMPILE_FIRST = $(top_srcdir)/libkdepim/categoryselectdialog.h \
                                    $(top_srcdir)/libkdepim/categoryeditdialog.h \
@@ -84,7 +82,9 @@
 KDE_ICON = kaddressbook
 
 messages: rc.cpp
-	$(EXTRACTRC) */*.ui */*.kcfg >> rc.cpp
+	$(EXTRACTRC) --context="Instant messaging" editors/im*.ui >> rc.cpp
+	$(EXTRACTRC) printing/*.ui >> rc.cpp
+	$(EXTRACTRC) */*.kcfg >> rc.cpp
 	$(XGETTEXT) *.h *.cpp common/*.cpp editors/*.cpp features/*.cpp printing/*.cpp views/*.cpp xxport/*.cpp interfaces/*.h -o $(podir)/kaddressbook.pot
 
 srcdoc:
Index: kaddressbook/features/distributionlistwidget.cpp
===================================================================
--- kaddressbook/features/distributionlistwidget.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kaddressbook/features/distributionlistwidget.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -281,11 +281,10 @@
   KPIM::DistributionList dist;
   dist.setResource( resource );
   dist.setName( newName );
-  core()->addressBook()->insertAddressee( dist );
-
   // Creates undo-redo command, calls setModified, also triggers contactsUpdated,
   // which triggers updateNameCombo, so the new name appears
   changed( dist );
+  core()->addressBook()->insertAddressee( dist );
 
 #else
   new KABC::DistributionList( mManager, newName );
@@ -356,9 +355,8 @@
   if ( dist.isEmpty() ) // not found [should be impossible]
     return;
 
-  core()->addressBook()->removeAddressee( dist );
-
   emit deleted( dist.uid() );
+  core()->addressBook()->removeAddressee( dist );
 #else
   mManager->remove( mManager->list( mNameCombo->currentText() ) );
   mNameCombo->removeItem( mNameCombo->currentItem() );
Index: kaddressbook/features/distributionlist.desktop
===================================================================
--- kaddressbook/features/distributionlist.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kaddressbook/features/distributionlist.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -4,7 +4,7 @@
 Name=KAB Distribution List Plugin
 Name[af]=KAB verspreiding lys inprop module
 Name[ar]=ملحق قائمة توزيع KAB
-Name[be]=Дапаўненьне KAB "Сьпіс распаўсюджваньня"
+Name[be]=Дапаўненне KAB "Сьпіс распаўсюджвання"
 Name[br]=Lugent roll ingaladur evit KAB
 Name[bs]=KAB dodatak za distribucione liste
 Name[ca]=Endollable de la llista de distribució KAB
@@ -25,11 +25,13 @@
 Name[is]=Íforrit fyrir KAB dreifilista
 Name[it]=Plugin lista di distribuzione KAB
 Name[ja]=KAB 配布リストプラグイン
+Name[kk]=KAB тарату тізімінің плагин модулі
 Name[km]=កម្មវិធី​ជំនួយ​បញ្ជី​ចែកចាយ​របស់ KAB
 Name[lt]=KAB platinimo sąrašo priedas
 Name[ms]=Plugin Senarai Agihan KAB 
 Name[nb]=KAB programtillegg for distribusjonslister
 Name[nds]=Verdeellist-Moduul för KAdressbook
+Name[ne]=KAB वितरण सूची प्लगइन
 Name[nl]=KAB Distributielijst-plugin
 Name[nn]=Programtillegg for KAB distribusjonsliste
 Name[pl]=Wtyczka KAB do obsługi list wysyłkowych
@@ -50,7 +52,7 @@
 Comment=Plugin for managing distribution lists
 Comment[af]=Inprop module vir die bestuur van verspreiding lyste
 Comment[ar]=ملحق لإدارة قوائم التوزيع
-Comment[be]=Дапаўненьне для кіраваньня сьпісамі распаўсюджваньня
+Comment[be]=Дапаўненне для кіравання сьпісамі распаўсюджвання
 Comment[bg]=Приставка за управление на списъци
 Comment[br]=Lugent melestradur ar rolloù ingaladur
 Comment[bs]=Dodatak za upravljanje distribucionim listama
@@ -73,11 +75,13 @@
 Comment[is]=Íforrit til að sjá um dreifilista
 Comment[it]=Plugin per gestire liste di distribuzione
 Comment[ja]=配布リスト管理用プラグイン
+Comment[kk]=Тарату тізімімен айналысу плагин модулі
 Comment[km]=កម្មវិធី​ជំនួយ​ដើម្បី​គ្រប់គ្រង​បញ្ជី​ចែកចាយ
 Comment[lt]=Priedas platinimo sąrašų tvarkymui
 Comment[ms]=Plug masuk untuk pengurusan senarai edaran
 Comment[nb]=Programtillegg for å håndtere distribusjonslister
 Comment[nds]=Moduul för't Plegen vun Verdeellisten
+Comment[ne]=व्यवस्थापन वितरण सूचीका लागि प्लगइन
 Comment[nl]=Plugin voor het beheren van distributielijsten
 Comment[nn]=Programtillegg for handtering av distibusjonsliste
 Comment[pl]=Wtyczka do zarządzania listami wysyłkowymi
Index: kaddressbook/features/resourceselection.desktop
===================================================================
--- kaddressbook/features/resourceselection.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kaddressbook/features/resourceselection.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -3,7 +3,7 @@
 X-KDE-Library=libkaddrbk_resourceselection
 Name=Address Book Management Plugin
 Name[af]=Adres boek bestuur inprop module
-Name[be]=Дапаўненьне "Кіраваньне адраснамі кнігамі"
+Name[be]=Дапаўненне "Кіраванне адраснамі кнігамі"
 Name[br]=Lugent melestradur ar c'harnedoù chomlec'hioù
 Name[bs]=Dodatak za rukovanje adresarom
 Name[ca]=Endollable de gestió de llibretes d'adreces
@@ -24,11 +24,14 @@
 Name[is]=Umsjónaríforrit vistfangaflettis
 Name[it]=Plugin per gestire rubriche indirizzi
 Name[ja]=アドレス帳管理プラグイン
+Name[kk]=Адрестік кітапшамен айналысу плагин модулі
 Name[km]=កម្មវិធី​ជំនួយ​ការ​គ្រប់គ្រង​សៀវភៅ​អាសយដ្ឋាន
 Name[lt]=Adresų knygelės tvarkymo priedas
+Name[mk]=Приклучок за менаџирање адресари
 Name[ms]=Plugin Pengurusan Buku Alamat 
 Name[nb]=Programtillegg for adressebok behandling
 Name[nds]=Adressbookpleeg-Moduul
+Name[ne]=ठेगाना पुस्तिका व्यवस्थापन प्लगइन
 Name[nl]=Plugin voor adresboekbeheer
 Name[nn]=Programtillegg for adressebokhandtering
 Name[pl]=Wtyczka zarządzania Książką adresową
@@ -48,7 +51,7 @@
 Name[zh_TW]=管理通訊錄外掛程式
 Comment=Plugin for managing address books
 Comment[af]=Inprop module om adres boeke te bestuur
-Comment[be]=Дапаўненьне для кіраваньня адраснамі кнігамі
+Comment[be]=Дапаўненне для кіравання адраснамі кнігамі
 Comment[bg]=Приставка за управление на адресника
 Comment[br]=Lugent melestradur ar c'harnedoù chomlec'hioù
 Comment[bs]=Dodatak za upravljanje adresarima
@@ -69,11 +72,14 @@
 Comment[is]=Íforrit til að sjá um vistfangaskrár
 Comment[it]=Plugin per gestire rubriche indirizzi
 Comment[ja]=アドレス帳管理用プラグイン
+Comment[kk]=Адрестік кітапшамен айналысу плагин модулі
 Comment[km]=កម្មវិធី​ជំនួយ​ដើម្បី​គ្រប់គ្រង​សៀវភៅ​អាសយដ្ឋាន
 Comment[lt]=Priedas adresų knygelių tvarkymui
+Comment[mk]=Приклучок за менаџирање адресари
 Comment[ms]=Plugin untuk pengurusan buku alamat
 Comment[nb]=Programtillegg for å håndtere adressebøker
 Comment[nds]=Moduul för't Plegen vun Adressböker
+Comment[ne]=ठगाना पुस्तिका व्यवस्थापनका लागि प्लगइन
 Comment[nl]=Plugin voor het beheren van adresboeken
 Comment[nn]=Programtillegg for handtering av adressebøker
 Comment[pl]=Wtyczka do zarządzania książkami adresowymi
Index: libkholidays/holidays/holiday_nl
===================================================================
--- libkholidays/holidays/holiday_nl	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkholidays/holidays/holiday_nl	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -12,7 +12,6 @@
 : Author: Guido van Rossum, CWI, Amsterdam <Guido.van.Rossum@cwi.nl>
 :
 small "Nieuwjaar" weekend on 1.1.
-small "Goede Vrijdag" on easter minus 2 days
 small "Pasen" weekend on easter length 2 days
 small "Hemelvaart" weekend on easter plus 39 days
 small "Pinksteren" weekend on easter plus 49 days length 2 days
Index: libkholidays/holidays/holiday_za
===================================================================
--- libkholidays/holidays/holiday_za	(.../tags/KDE/3.5.6/kdepim)	(wersja 0)
+++ libkholidays/holidays/holiday_za	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -0,0 +1,17 @@
+:
+: South African holiday file. Copy to ~/.holiday
+:
+: Author: Anton Keyter
+:
+red "New Year's Day" on january 1 shift to monday if sunday
+red "Human Rights Day" on march 21 shift to monday if sunday
+red "Good Friday" on easter minus 2 day
+red "Family Day" on easter plus 1 day
+red "Freedom Day" on april 27 shift to monday if sunday
+red "Workers Day" on may 1 shift to monday if sunday
+red "Youth Day" on june 16 shift to monday if sunday
+red "National Women's Day" on august 9 shift to monday if sunday
+red "Heritage Day" on september 24 shift to monday if sunday
+red "Day of Reconsiliation" on december 16 shift to monday if sunday
+red "Christmas Day" on december 25 shift to monday if sunday
+red "Day of Goodwill" on december 26 shift to monday if sunday
Index: libkholidays/holidays/holiday_ja
===================================================================
--- libkholidays/holidays/holiday_ja	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkholidays/holidays/holiday_ja	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -26,26 +26,26 @@
 :small "The Emperor's Birthday" weekend on 12/23
 
 : National Holidays. (Japanese and English messages)
-small "ö(New Year's Day)" weekend on 1/1
-small "ͤ(Coming of Age)" weekend on second monday in january
-small "ǰ(National Foundation Day)" weekend on 2/11
-small "ʬ(Vernal Equinox Day)" weekend on 3/20/2005
-small "ʬ(Vernal Equinox Day)" weekend on 3/21/2006
-small "ʬ(Vernal Equinox Day)" weekend on 3/21/2007
-small "ʬ(Vernal Equinox Day)" weekend on 3/20/2008
-small "ʬ(Vernal Equinox Day)" weekend on 3/20/2009
-small "ʬ(Vernal Equinox Day)" weekend on 3/21/2010
-small "ߤɤ(Greenery Day)" weekend on 4/29
-small "ˡǰ(Constitution Day)" weekend on 5/3
-small "(Holiday)" weekend on 5/4
-small "ɤ(Children's Day)" weekend on 5/5
-small "(Oceans' Day)" weekend on third monday in july
-small "Ϸ(Respect for Senior Citizens Day)" weekend on third monday in september
-small "ʬ(Autumnal Equinox Day)" weekend on 9/23
-small "ΰ(Sports Day)" weekend on second monday in october
-small "ʸ(Culture Day)" weekend on 11/3
-small "ϫդ(Labor Thanksgiving Day)" weekend on 11/23
-small "ŷ(The Emperor's Birthday)" weekend on 12/23
+small "元旦(New Year's Day)" weekend on 1/1
+small "成人の日(Coming of Age)" weekend on second monday in january
+small "建国記念日(National Foundation Day)" weekend on 2/11
+small "春分の日(Vernal Equinox Day)" weekend on 3/20/2005
+small "春分の日(Vernal Equinox Day)" weekend on 3/21/2006
+small "春分の日(Vernal Equinox Day)" weekend on 3/21/2007
+small "春分の日(Vernal Equinox Day)" weekend on 3/20/2008
+small "春分の日(Vernal Equinox Day)" weekend on 3/20/2009
+small "春分の日(Vernal Equinox Day)" weekend on 3/21/2010
+small "みどりの日(Greenery Day)" weekend on 4/29
+small "憲法記念日(Constitution Day)" weekend on 5/3
+small "休日(Holiday)" weekend on 5/4
+small "こどもの日(Children's Day)" weekend on 5/5
+small "海の日(Oceans' Day)" weekend on third monday in july
+small "敬老の日(Respect for Senior Citizens Day)" weekend on third monday in september
+small "秋分の日(Autumnal Equinox Day)" weekend on 9/23
+small "体育の日(Sports Day)" weekend on second monday in october
+small "文化の日(Culture Day)" weekend on 11/3
+small "勤労感謝の日(Labor Thanksgiving Day)" weekend on 11/23
+small "天皇誕生日(The Emperor's Birthday)" weekend on 12/23
 
 : If a "National Holiday" is on Sunday,the following day
 : shall be a substitute holiday.
@@ -58,14 +58,14 @@
 :small "Substitute holiday" weekend on 11/24/2008
 :small "Substitute holiday" weekend on 3/22/2010
 
-small "ص(Substitute holiday)" weekend on 3/21/2005
-small "ص(Substitute holiday)" weekend on 1/2/2006
-small "ص(Substitute holiday)" weekend on 2/12/2007
-small "ص(Substitute holiday)" weekend on 4/30/2007
-small "ص(Substitute holiday)" weekend on 9/24/2007
-small "ص(Substitute holiday)" weekend on 12/24/2007
-small "ص(Substitute holiday)" weekend on 11/24/2008
-small "ص(Substitute holiday)" weekend on 3/22/2010
+small "振替休日(Substitute holiday)" weekend on 3/21/2005
+small "振替休日(Substitute holiday)" weekend on 1/2/2006
+small "振替休日(Substitute holiday)" weekend on 2/12/2007
+small "振替休日(Substitute holiday)" weekend on 4/30/2007
+small "振替休日(Substitute holiday)" weekend on 9/24/2007
+small "振替休日(Substitute holiday)" weekend on 12/24/2007
+small "振替休日(Substitute holiday)" weekend on 11/24/2008
+small "振替休日(Substitute holiday)" weekend on 3/22/2010
 
 
 : Japanese Events , not National Holidays.
Index: libkholidays/holidays/Makefile.am
===================================================================
--- libkholidays/holidays/Makefile.am	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkholidays/holidays/Makefile.am	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -12,7 +12,7 @@
                 holiday_no holiday_nz holiday_pl holiday_pt holiday_py \
                 holiday_quebec \
                 holiday_ro holiday_ru \
-		holiday_se holiday_si holiday_th holiday_us \
+                holiday_se holiday_si holiday_th holiday_us \
                 holiday_uy holiday_ie \
-                holiday_Suedtirol
+                holiday_Suedtirol holiday_za
 
Index: plugins/kmail/bodypartformatter/text_calendar.desktop
===================================================================
--- plugins/kmail/bodypartformatter/text_calendar.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ plugins/kmail/bodypartformatter/text_calendar.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -13,9 +13,11 @@
 Name[gl]=Aplicación Octetstream
 Name[hu]=Alkalmazás-adatfolyam
 Name[ja]=アプリケーション オクテット ストリーム
+Name[kk]=Қолданбаның бинарлы ағымы
 Name[km]=Octetstream កម្មវិធី
 Name[ms]=Aliran Oktet  Aplikasi
 Name[nb]=Program Octetstrøm
+Name[ne]=अक्टेस्ट्रिम अनुप्रयोग
 Name[nl]=Applicatie octetstroom
 Name[nn]=Oktettstraum frå program
 Name[pl]=Dane binarne
@@ -50,10 +52,12 @@
 Comment[is]=Sniðmátstól fyrir text/calendar
 Comment[it]=Un plugin per formattare il corpo di text/calendar
 Comment[ja]=text/calendar 用の Bodypart フォーマッタ プラグイン
+Comment[kk]=Text/calendar бөлімін пішімдеу модулі
 Comment[km]=កម្មវិធី​ជំនួយ​កម្មវិធី​ធ្វើ​ទ្រង់ទ្រាយ​ផ្នែក​តួ សម្រាប់​អត្ថបទ/ប្រតិទិន
 Comment[ms]=Plugin pemformat bahagian isi untuk teks/kalendar
 Comment[nb]=En formaterer for meldingstekster i tekst/kalender
 Comment[nds]=En Hööftdeel-Formateermoduul för text/calendar
+Comment[ne]=पाठ/क्यालेन्डरका लागि मुख्यभाग ढाँचाबद्ध गर्ने प्लगइन
 Comment[nl]=Een opmaakplugin voor text/calendar
 Comment[nn]=Eit programtillegg for meldingstekstformatering i tekst/kalender
 Comment[pl]=Wtyczka formatująca dla typu text/calendar
Index: plugins/kmail/bodypartformatter/text_vcard.desktop
===================================================================
--- plugins/kmail/bodypartformatter/text_vcard.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ plugins/kmail/bodypartformatter/text_vcard.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -13,9 +13,11 @@
 Name[gl]=Aplicación Octetstream
 Name[hu]=Alkalmazás-adatfolyam
 Name[ja]=アプリケーション オクテット ストリーム
+Name[kk]=Қолданбаның бинарлы ағымы
 Name[km]=Octetstream កម្មវិធី
 Name[ms]=Aliran Oktet  Aplikasi
 Name[nb]=Program Octetstrøm
+Name[ne]=अक्टेस्ट्रिम अनुप्रयोग
 Name[nl]=Applicatie octetstroom
 Name[nn]=Oktettstraum frå program
 Name[pl]=Dane binarne
@@ -51,10 +53,12 @@
 Comment[is]=Sniðmátstól fyrir text/vcard
 Comment[it]=Un plugin per formattare il corpo di text/vcard
 Comment[ja]=text/vcard 用の Bodypart フォーマッタ プラグイン
+Comment[kk]=Text/vcard бөлімін пішімдеу модулі
 Comment[km]=កម្មវិធី​ជំនួយ​កម្មវិធី​ធ្វើ​ទ្រង់ទ្រាយ​ផ្នែក​តួ សម្រាប់​អត្ថបទ/vcard
 Comment[ms]=Plugin pemformat bahagian isi untuk teks/vcard
 Comment[nb]=Et programtilllegg for text/vcard for brødtekst-formatering
 Comment[nds]=En Hööftdeel-Formateermoduul för text/vcard
+Comment[ne]=पाठ/भिकार्ड का लागि मुख्यभाग ढाँचाबद्ध गर्ने प्लगइन
 Comment[nl]=Een opmaakplugin voor text/vcard
 Comment[nn]=Eit programtillegg for brødtekstformatering i tekst/vCard
 Comment[pl]=Wtyczka formatująca dla typu text/vcard
Index: plugins/kmail/bodypartformatter/text_xdiff.desktop
===================================================================
--- plugins/kmail/bodypartformatter/text_xdiff.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ plugins/kmail/bodypartformatter/text_xdiff.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -13,9 +13,11 @@
 Name[gl]=Aplicación Octetstream
 Name[hu]=Alkalmazás-adatfolyam
 Name[ja]=アプリケーション オクテット ストリーム
+Name[kk]=Қолданбаның бинарлы ағымы
 Name[km]=Octetstream កម្មវិធី
 Name[ms]=Aliran Oktet  Aplikasi
 Name[nb]=Program Octetstrøm
+Name[ne]=अक्टेस्ट्रिम अनुप्रयोग
 Name[nl]=Applicatie octetstroom
 Name[nn]=Oktettstraum frå program
 Name[pl]=Dane binarne
@@ -49,10 +51,12 @@
 Comment[is]=Sniðmátstól fyrir text/x-diff
 Comment[it]=Un plugin per formattare il corpo di text/x-diff
 Comment[ja]=text/x-diff 用の bodypart フォーマッタプラグイン
+Comment[kk]=Text/x-diff бөлімін пішімдеу модулі
 Comment[km]=កម្មវិធី​ជំនួយ​កម្មវិធី​ធ្វើ​ទ្រង់ទ្រាយ​ផ្នែក​តួ សម្រាប់​អត្ថបទ/x-diff
 Comment[ms]=Plugin pemformat bahagian untuk teks/x-diff
 Comment[nb]=Et programtilllegg for text/x-diff for brødtekst-formatering
 Comment[nds]=En Hööftdeel-Formateermoduul för text/x-diff
+Comment[ne]=पाठ/x-diff का लागि मुख्यभाग ढाँचाबद्ध गर्ने प्लगइन
 Comment[nl]=Een opmaakplugin voor text/x-diff
 Comment[nn]=Eit programtilllegg for text/x-diff for brødtekstformatering
 Comment[pl]=Wtyczka formatująca dla text/x-diff
Index: kitchensync/kitchensync.png
===================================================================
Nie można wyświetlić: plik binarny.
svn:mime-type = image/png
Index: kitchensync/ChangeLog
===================================================================
--- kitchensync/ChangeLog	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kitchensync/ChangeLog	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,6 +0,0 @@
-2002-01-25 Holger Freyther <freyther@kde.org>
-        * rename libkunit to libkonnector
-
-2002-01-14 Holger Freyther <freyther@kde.org>
-        * Adds a changelog. This is the frist 
-	  activity of the new KitchenSync project
\ brakuje znaku końca linii na końcu pliku 
Index: kitchensync/libqopensync/plugin.cpp
===================================================================
--- kitchensync/libqopensync/plugin.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 0)
+++ kitchensync/libqopensync/plugin.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -0,0 +1,62 @@
+/*
+    This file is part of libqopensync.
+
+    Copyright (c) 2005 Tobias Koenig <tokoe@kde.org>
+
+    This library is free software; you can redistribute it and/or
+    modify it under the terms of the GNU Library General Public
+    License as published by the Free Software Foundation; either
+    version 2 of the License, or (at your option) any later version.
+
+    This library is distributed in the hope that it will be useful,
+    but WITHOUT ANY WARRANTY; without even the implied warranty of
+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
+    Library General Public License for more details.
+
+    You should have received a copy of the GNU Library General Public License
+    along with this library; see the file COPYING.LIB.  If not, write to
+    the Free Software Foundation, Inc., 51 Franklin Street, Fifth Floor,
+    Boston, MA 02110-1301, USA.
+*/
+
+#include <opensync/opensync.h>
+
+#include "plugin.h"
+
+using namespace QSync;
+
+Plugin::Plugin()
+  : mPlugin( 0 )
+{
+}
+
+Plugin::~Plugin()
+{
+}
+
+bool Plugin::isValid() const
+{
+  return ( mPlugin != 0 );
+}
+
+QString Plugin::name() const
+{
+  Q_ASSERT( mPlugin );
+
+  return QString::fromLatin1( osync_plugin_get_name( mPlugin ) );
+}
+
+QString Plugin::longName() const
+{
+  Q_ASSERT( mPlugin );
+
+  return QString::fromLatin1( osync_plugin_get_longname( mPlugin ) );
+}
+
+QString Plugin::description() const
+{
+  Q_ASSERT( mPlugin );
+
+  return QString::fromLatin1( osync_plugin_get_description( mPlugin ) );
+}
+
Index: kitchensync/libqopensync/callbackhandler.h
===================================================================
--- kitchensync/libqopensync/callbackhandler.h	(.../tags/KDE/3.5.6/kdepim)	(wersja 0)
+++ kitchensync/libqopensync/callbackhandler.h	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -0,0 +1,90 @@
+/*
+    This file is part of libqopensync.
+
+    Copyright (c) 2005 Tobias Koenig <tokoe@kde.org>
+
+    This library is free software; you can redistribute it and/or
+    modify it under the terms of the GNU Library General Public
+    License as published by the Free Software Foundation; either
+    version 2 of the License, or (at your option) any later version.
+
+    This library is distributed in the hope that it will be useful,
+    but WITHOUT ANY WARRANTY; without even the implied warranty of
+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
+    Library General Public License for more details.
+
+    You should have received a copy of the GNU Library General Public License
+    along with this library; see the file COPYING.LIB.  If not, write to
+    the Free Software Foundation, Inc., 51 Franklin Street, Fifth Floor,
+    Boston, MA 02110-1301, USA.
+*/
+
+#ifndef QSYNC_CALLBACKHANDLER_H
+#define QSYNC_CALLBACKHANDLER_H
+
+#include <libqopensync/syncmapping.h>
+#include <libqopensync/syncupdates.h>
+
+#include <qobject.h>
+
+class OSyncEngine;
+class OSyncMapping;
+class OSyncChangeUpdate;
+class OSyncMappingUpdate;
+class OSyncEngineUpdate;
+class OSyncMemberUpdate;
+
+class QCustomEvent;
+
+namespace QSync {
+
+class Engine;
+
+class CallbackHandler : public QObject
+{
+  Q_OBJECT
+
+  public:
+    CallbackHandler();
+    ~CallbackHandler();
+
+    void setEngine( Engine *engine );
+    Engine* engine() const;
+
+  signals:
+    void conflict( QSync::SyncMapping mapping );
+    void change( const QSync::SyncChangeUpdate &update );
+    void mapping( const QSync::SyncMappingUpdate &update );
+    void engine( const QSync::SyncEngineUpdate &update );
+    void member( const QSync::SyncMemberUpdate &update );
+
+  protected:
+    virtual void customEvent( QCustomEvent *event );
+
+  private:
+    enum EventType {
+      ConflictEventType = 4044,
+      ChangeEventType,
+      MappingEventType,
+      EngineEventType,
+      MemberEventType
+    };
+
+    class ConflictEvent;
+    class ChangeEvent;
+    class MappingEvent;
+    class EngineEvent;
+    class MemberEvent;
+
+    static void conflict_callback( OSyncEngine*, OSyncMapping*, void* );
+    static void change_callback( OSyncEngine*, OSyncChangeUpdate*, void* );
+    static void mapping_callback( OSyncMappingUpdate*, void* );
+    static void engine_callback( OSyncEngine*, OSyncEngineUpdate*, void* );
+    static void member_callback( OSyncMemberUpdate*, void* );
+
+    Engine* mEngine;
+};
+
+}
+
+#endif
Index: kitchensync/libqopensync/group.h
===================================================================
--- kitchensync/libqopensync/group.h	(.../tags/KDE/3.5.6/kdepim)	(wersja 0)
+++ kitchensync/libqopensync/group.h	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -0,0 +1,217 @@
+/*
+    This file is part of libqopensync.
+
+    Copyright (c) 2005 Tobias Koenig <tokoe@kde.org>
+
+    This library is free software; you can redistribute it and/or
+    modify it under the terms of the GNU Library General Public
+    License as published by the Free Software Foundation; either
+    version 2 of the License, or (at your option) any later version.
+
+    This library is distributed in the hope that it will be useful,
+    but WITHOUT ANY WARRANTY; without even the implied warranty of
+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
+    Library General Public License for more details.
+
+    You should have received a copy of the GNU Library General Public License
+    along with this library; see the file COPYING.LIB.  If not, write to
+    the Free Software Foundation, Inc., 51 Franklin Street, Fifth Floor,
+    Boston, MA 02110-1301, USA.
+*/
+
+#ifndef QSYNC_GROUP_H
+#define QSYNC_GROUP_H
+
+#include <qdatetime.h>
+#include <qstringlist.h>
+
+#include <libqopensync/filter.h>
+#include <libqopensync/member.h>
+
+class OSyncGroup;
+
+namespace QSync {
+
+/**
+  @internal
+ */
+class GroupConfig
+{
+  friend class Group;
+
+  public:
+    GroupConfig();
+
+    QStringList activeObjectTypes() const;
+    void setActiveObjectTypes( const QStringList &objectTypes );
+
+  private:
+    OSyncGroup *mGroup;
+};
+
+
+class Group
+{
+  friend class Engine;
+  friend class Environment;
+
+  public:
+    enum LockType
+    {
+      LockOk,
+      Locked,
+      LockStale
+    };
+
+    Group();
+    ~Group();
+
+    /**
+      Returns whether the object is a valid group.
+     */
+    bool isValid() const;
+
+    class Iterator
+    {
+      friend class Group;
+
+      public:
+        Iterator( Group *group )
+          : mGroup( group ), mPos( -1 )
+        {
+        }
+
+        Iterator( const Iterator &it )
+        {
+          mGroup = it.mGroup;
+          mPos = it.mPos;
+        }
+
+        Member operator*() 
+        {
+          return mGroup->memberAt( mPos );
+        }
+
+        Iterator &operator++() { mPos++; return *this; }
+        Iterator &operator++( int ) { mPos++; return *this; }
+        Iterator &operator--() { mPos--; return *this; }
+        Iterator &operator--( int ) { mPos--; return *this; }
+        bool operator==( const Iterator &it ) { return mGroup == it.mGroup && mPos == it.mPos; }
+        bool operator!=( const Iterator &it ) { return mGroup == it.mGroup && mPos != it.mPos; }
+
+      private:
+        Group *mGroup;
+        int mPos;
+    };
+
+    /**
+      Returns an iterator pointing to the first item in the member list.
+      This iterator equals end() if the member list is empty.
+     */
+    Iterator begin();
+
+    /**
+      Returns an iterator pointing past the last item in the member list.
+      This iterator equals begin() if the member list is empty.
+     */
+    Iterator end();
+
+    /**
+      Sets the name of the group.
+     */
+    void setName( const QString &name );
+
+    /**
+      Returns the name of the group.
+     */
+    QString name() const;
+
+    /**
+      Sets the time of the last successfull synchronization.
+     */
+    void setLastSynchronization( const QDateTime &dateTime );
+
+    /**
+      Returns the time of the last successfull synchronization.
+     */
+    QDateTime lastSynchronization() const;
+
+    /**
+      Locks the group.
+
+      @returns The the result of the locking request.
+     */
+    LockType lock();
+
+    /**
+      Unlocks the group.
+
+      @param removeFile Whether the lock file shall be removed.
+     */
+    void unlock( bool removeFile = true );
+
+    /**
+      Adds a new member to the group.
+
+      @returns the new member.
+     */
+    Member addMember();
+
+    /**
+      Removes a member from the group.
+     */
+    void removeMember( const Member &member );
+
+    /**
+      Returns the number of members.
+     */
+    int memberCount() const;
+
+    /**
+      Returns the member at position @param pos.
+     */
+    Member memberAt( int pos ) const;
+
+    /**
+      Returns the number of filters.
+     */
+    int filterCount() const;
+
+    /**
+      Returns the filter at position @param pos.
+     */
+    Filter filterAt( int pos );
+
+    /**
+      Set, if the object type with given name is enabled for synchronisation for
+      this group.
+     */
+    void setObjectTypeEnabled( const QString &objectType, bool enabled );
+
+    /**
+      Returns whether the object type with given name is enabled for synchronisation for
+      this group.
+     */
+    bool isObjectTypeEnabled( const QString &objectType ) const;
+
+    /**
+      Saves the configuration to hard disc.
+     */
+    Result save();
+
+    /**
+      Returns the config object of this group.
+
+      Note: This method is only available for OpenSync 0.19 and 0.20.
+     */
+    GroupConfig config() const;
+
+    bool operator==( const Group &group ) const { return mGroup == group.mGroup; }
+
+  private:
+    OSyncGroup *mGroup;
+};
+
+}
+
+#endif
Index: kitchensync/libqopensync/syncupdates.cpp
===================================================================
--- kitchensync/libqopensync/syncupdates.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 0)
+++ kitchensync/libqopensync/syncupdates.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -0,0 +1,251 @@
+/*
+    This file is part of libqopensync.
+
+    Copyright (c) 2005 Tobias Koenig <tokoe@kde.org>
+
+    This library is free software; you can redistribute it and/or
+    modify it under the terms of the GNU Library General Public
+    License as published by the Free Software Foundation; either
+    version 2 of the License, or (at your option) any later version.
+
+    This library is distributed in the hope that it will be useful,
+    but WITHOUT ANY WARRANTY; without even the implied warranty of
+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
+    Library General Public License for more details.
+
+    You should have received a copy of the GNU Library General Public License
+    along with this library; see the file COPYING.LIB.  If not, write to
+    the Free Software Foundation, Inc., 51 Franklin Street, Fifth Floor,
+    Boston, MA 02110-1301, USA.
+*/
+
+#include <osengine/engine.h>
+
+#include "syncupdates.h"
+
+using namespace QSync;
+
+SyncMemberUpdate::SyncMemberUpdate()
+{
+}
+
+SyncMemberUpdate::SyncMemberUpdate( OSyncMemberUpdate *update )
+{
+  switch ( update->type ) {
+    case MEMBER_CONNECTED:
+      mType = Connected;
+      break;
+    case MEMBER_SENT_CHANGES:
+      mType = SentChanges;
+      break;
+    case MEMBER_COMMITTED_ALL:
+      mType = CommittedAll;
+      break;
+    case MEMBER_DISCONNECTED:
+      mType = Disconnected;
+      break;
+    case MEMBER_CONNECT_ERROR:
+      mType = ConnectError;
+      break;
+    case MEMBER_GET_CHANGES_ERROR:
+      mType = GetChangesError;
+      break;
+    case MEMBER_COMMITTED_ALL_ERROR:
+      mType = CommittedAllError;
+      break;
+    case MEMBER_SYNC_DONE_ERROR:
+      mType = SyncDoneError;
+      break;
+    case MEMBER_DISCONNECT_ERROR:
+      mType = DisconnectedError;
+      break;
+  }
+
+  if ( update->error )
+    mResult = Result( &(update->error) );
+
+  mMember.mMember = update->member;
+}
+
+SyncMemberUpdate::~SyncMemberUpdate()
+{
+}
+
+SyncMemberUpdate::Type SyncMemberUpdate::type() const
+{
+  return mType;
+}
+
+Result SyncMemberUpdate::result() const
+{
+  return mResult;
+}
+
+Member SyncMemberUpdate::member() const
+{
+  return mMember;
+}
+
+
+SyncChangeUpdate::SyncChangeUpdate()
+{
+}
+
+SyncChangeUpdate::SyncChangeUpdate( OSyncChangeUpdate *update )
+{
+  switch ( update->type ) {
+    case CHANGE_RECEIVED:
+      mType = Received;
+      break;
+    case CHANGE_RECEIVED_INFO:
+      mType = ReceivedInfo;
+      break;
+    case CHANGE_SENT:
+      mType = Sent;
+      break;
+    case CHANGE_WRITE_ERROR:
+      mType = WriteError;
+      break;
+    case CHANGE_RECV_ERROR:
+      mType = ReceiveError;
+      break;
+  }
+
+  if ( update->error )
+    mResult = Result( &(update->error) );
+
+  mChange = SyncChange( update->change );
+  mMemberId = update->member_id;
+  mMappingId = update->mapping_id;
+}
+
+SyncChangeUpdate::~SyncChangeUpdate()
+{
+}
+
+SyncChangeUpdate::Type SyncChangeUpdate::type() const
+{
+  return mType;
+}
+
+Result SyncChangeUpdate::result() const
+{
+  return mResult;
+}
+
+SyncChange SyncChangeUpdate::change() const
+{
+  return mChange;
+}
+
+int SyncChangeUpdate::memberId() const
+{
+  return mMemberId;
+}
+
+int SyncChangeUpdate::mappingId() const
+{
+  return mMappingId;
+}
+
+SyncMappingUpdate::SyncMappingUpdate()
+{
+}
+
+SyncMappingUpdate::SyncMappingUpdate( OSyncMappingUpdate *update, OSyncEngine *engine )
+{
+  switch ( update->type ) {
+    case MAPPING_SOLVED:
+      mType = Solved;
+      break;
+    case MAPPING_SYNCED:
+      mType = Synced;
+      break;
+    case MAPPING_WRITE_ERROR:
+      mType = WriteError;
+      break;
+  }
+
+  if ( update->error )
+    mResult = Result( &(update->error) );
+
+  mWinner = update->winner;
+  mMapping.mEngine = engine;
+  mMapping.mMapping = update->mapping;
+}
+
+SyncMappingUpdate::~SyncMappingUpdate()
+{
+}
+
+SyncMappingUpdate::Type SyncMappingUpdate::type() const
+{
+  return mType;
+}
+
+Result SyncMappingUpdate::result() const
+{
+  return mResult;
+}
+
+long long int SyncMappingUpdate::winner() const
+{
+  return mWinner;
+}
+
+SyncMapping SyncMappingUpdate::mapping() const
+{
+  return mMapping;
+}
+
+SyncEngineUpdate::SyncEngineUpdate()
+{
+}
+
+SyncEngineUpdate::SyncEngineUpdate( OSyncEngineUpdate *update )
+{
+  switch ( update->type ) {
+    case ENG_ENDPHASE_CON:
+      mType = EndPhaseConnected;
+      break;
+    case ENG_ENDPHASE_READ:
+      mType = EndPhaseRead;
+      break;
+    case ENG_ENDPHASE_WRITE:
+      mType = EndPhaseWrite;
+      break;
+    case ENG_ENDPHASE_DISCON:
+      mType = EndPhaseDisconnected;
+      break;
+    case ENG_ERROR:
+      mType = Error;
+      break;
+    case ENG_SYNC_SUCCESSFULL:
+      mType = SyncSuccessfull;
+      break;
+    case ENG_PREV_UNCLEAN:
+      mType = PrevUnclean;
+      break;
+    case ENG_END_CONFLICTS:
+      mType = EndConflicts;
+      break;
+  }
+
+  if ( update->error )
+    mResult = Result( &(update->error) );
+}
+
+SyncEngineUpdate::~SyncEngineUpdate()
+{
+}
+
+SyncEngineUpdate::Type SyncEngineUpdate::type() const
+{
+  return mType;
+}
+
+Result SyncEngineUpdate::result() const
+{
+  return mResult;
+}
+
Index: kitchensync/libqopensync/plugin.h
===================================================================
--- kitchensync/libqopensync/plugin.h	(.../tags/KDE/3.5.6/kdepim)	(wersja 0)
+++ kitchensync/libqopensync/plugin.h	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -0,0 +1,67 @@
+/*
+    This file is part of libqopensync.
+
+    Copyright (c) 2005 Tobias Koenig <tokoe@kde.org>
+
+    This library is free software; you can redistribute it and/or
+    modify it under the terms of the GNU Library General Public
+    License as published by the Free Software Foundation; either
+    version 2 of the License, or (at your option) any later version.
+
+    This library is distributed in the hope that it will be useful,
+    but WITHOUT ANY WARRANTY; without even the implied warranty of
+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
+    Library General Public License for more details.
+
+    You should have received a copy of the GNU Library General Public License
+    along with this library; see the file COPYING.LIB.  If not, write to
+    the Free Software Foundation, Inc., 51 Franklin Street, Fifth Floor,
+    Boston, MA 02110-1301, USA.
+*/
+
+#ifndef QSYNC_PLUGIN_H
+#define QSYNC_PLUGIN_H
+
+#include <qstring.h>
+
+class OSyncPlugin;
+
+namespace QSync {
+
+class Plugin
+{
+  friend class Environment;
+  friend class Member;
+
+  public:
+    Plugin();
+    ~Plugin();
+
+    /**
+      Returns whether the object is a valid plugin.
+     */
+    bool isValid() const;
+
+    /**
+      Returns the name of the plugin.
+     */
+    QString name() const;
+
+    /**
+      Returns the long name of the plugin.
+     */
+    QString longName() const;
+
+    /**
+      Returns the description of the plugin.
+     */
+    QString description() const;
+
+  private:
+    OSyncPlugin *mPlugin;
+};
+
+}
+
+#endif
+
Index: kitchensync/libqopensync/environment.cpp
===================================================================
--- kitchensync/libqopensync/environment.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 0)
+++ kitchensync/libqopensync/environment.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -0,0 +1,172 @@
+/*
+    This file is part of libqopensync.
+
+    Copyright (c) 2005 Tobias Koenig <tokoe@kde.org>
+
+    This library is free software; you can redistribute it and/or
+    modify it under the terms of the GNU Library General Public
+    License as published by the Free Software Foundation; either
+    version 2 of the License, or (at your option) any later version.
+
+    This library is distributed in the hope that it will be useful,
+    but WITHOUT ANY WARRANTY; without even the implied warranty of
+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
+    Library General Public License for more details.
+
+    You should have received a copy of the GNU Library General Public License
+    along with this library; see the file COPYING.LIB.  If not, write to
+    the Free Software Foundation, Inc., 51 Franklin Street, Fifth Floor,
+    Boston, MA 02110-1301, USA.
+*/
+
+#include "environment.h"
+
+#include <opensync/opensync.h>
+
+using namespace QSync;
+
+Environment::Environment()
+{
+  mEnvironment = osync_env_new();
+}
+
+Environment::~Environment()
+{
+  osync_env_free( mEnvironment );
+}
+
+Environment::GroupIterator Environment::groupBegin()
+{
+  GroupIterator it( this );
+  it.mPos = 0;
+
+  return it;
+}
+
+Environment::GroupIterator Environment::groupEnd()
+{
+  GroupIterator it( this );
+  it.mPos = groupCount();
+
+  return it;
+}
+
+Environment::PluginIterator Environment::pluginBegin()
+{
+  PluginIterator it( this );
+  it.mPos = 0;
+
+  return it;
+}
+
+Environment::PluginIterator Environment::pluginEnd()
+{
+  PluginIterator it( this );
+  it.mPos = pluginCount();
+
+  return it;
+}
+
+Result Environment::initialize()
+{
+  OSyncError *error = 0;
+  if ( !osync_env_initialize( mEnvironment, &error ) )
+    return Result( &error );
+  else
+    return Result();
+}
+
+Result Environment::finalize()
+{
+  OSyncError *error = 0;
+  if ( !osync_env_finalize( mEnvironment, &error ) )
+    return Result( &error);
+  else
+    return Result();
+}
+
+int Environment::groupCount() const
+{
+  return osync_env_num_groups( mEnvironment );
+}
+
+Group Environment::groupAt( int pos ) const
+{
+  Group group;
+
+  if ( pos < 0 || pos >= groupCount() )
+    return group;
+
+  OSyncGroup *ogroup = osync_env_nth_group( mEnvironment, pos );
+  group.mGroup = ogroup;
+
+  return group;
+}
+
+Group Environment::groupByName( const QString &name ) const
+{
+  Group group;
+
+  OSyncGroup *ogroup = osync_env_find_group( mEnvironment, name.latin1() );
+  if ( ogroup )
+    group.mGroup = ogroup;
+
+  return group;
+}
+
+Group Environment::addGroup()
+{
+  Group group;
+
+  OSyncGroup *ogroup = osync_group_new( mEnvironment );
+  if ( ogroup )
+    group.mGroup = ogroup;
+
+  return group;
+}
+
+Result Environment::removeGroup( const Group &group )
+{
+  OSyncError *error = 0;
+  if ( !osync_group_delete( group.mGroup, &error ) )
+    return Result( &error );
+  else
+    return Result();
+}
+
+int Environment::pluginCount() const
+{
+  return osync_env_num_plugins( mEnvironment );
+}
+
+Plugin Environment::pluginAt( int pos ) const
+{
+  Plugin plugin;
+
+  if ( pos < 0 || pos >= pluginCount() )
+    return plugin;
+
+  OSyncPlugin *oplugin = osync_env_nth_plugin( mEnvironment, pos );
+  plugin.mPlugin = oplugin;
+
+  return plugin;
+}
+
+Plugin Environment::pluginByName( const QString &name ) const
+{
+  Plugin plugin;
+
+  OSyncPlugin *oplugin = osync_env_find_plugin( mEnvironment, name.latin1() );
+  if ( oplugin )
+    plugin.mPlugin = oplugin;
+
+  return plugin;
+}
+
+Conversion Environment::conversion() const
+{
+  Conversion conversion;
+  conversion.mEnvironment = mEnvironment;
+
+  return conversion;
+}
Index: kitchensync/libqopensync/engine.cpp
===================================================================
--- kitchensync/libqopensync/engine.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 0)
+++ kitchensync/libqopensync/engine.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -0,0 +1,67 @@
+/*
+    This file is part of libqopensync.
+
+    Copyright (c) 2005 Tobias Koenig <tokoe@kde.org>
+
+    This library is free software; you can redistribute it and/or
+    modify it under the terms of the GNU Library General Public
+    License as published by the Free Software Foundation; either
+    version 2 of the License, or (at your option) any later version.
+
+    This library is distributed in the hope that it will be useful,
+    but WITHOUT ANY WARRANTY; without even the implied warranty of
+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
+    Library General Public License for more details.
+
+    You should have received a copy of the GNU Library General Public License
+    along with this library; see the file COPYING.LIB.  If not, write to
+    the Free Software Foundation, Inc., 51 Franklin Street, Fifth Floor,
+    Boston, MA 02110-1301, USA.
+*/
+
+#include <opensync/opensync.h>
+#include <osengine/engine.h>
+
+#include "engine.h"
+
+using namespace QSync;
+
+Engine::Engine( const Group &group )
+{
+  OSyncError *error = 0;
+  mEngine = osengine_new( group.mGroup, &error );
+}
+
+Engine::~Engine()
+{
+  osengine_free( mEngine );
+  mEngine = 0;
+}
+
+Result Engine::initialize()
+{
+  OSyncError *error = 0;
+  if ( !osengine_init( mEngine, &error ) )
+    return Result( &error );
+  else
+    return Result();
+}
+
+void Engine::finalize()
+{
+  osengine_finalize( mEngine );
+}
+
+Result Engine::synchronize()
+{
+  OSyncError *error = 0;
+  if ( !osengine_synchronize( mEngine, &error ) )
+    return Result( &error );
+  else
+    return Result();
+}
+
+void Engine::abort()
+{
+  osengine_abort( mEngine );
+}
Index: kitchensync/libqopensync/member.cpp
===================================================================
--- kitchensync/libqopensync/member.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 0)
+++ kitchensync/libqopensync/member.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -0,0 +1,188 @@
+/*
+    This file is part of libqopensync.
+
+    Copyright (c) 2005 Tobias Koenig <tokoe@kde.org>
+
+    This library is free software; you can redistribute it and/or
+    modify it under the terms of the GNU Library General Public
+    License as published by the Free Software Foundation; either
+    version 2 of the License, or (at your option) any later version.
+
+    This library is distributed in the hope that it will be useful,
+    but WITHOUT ANY WARRANTY; without even the implied warranty of
+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
+    Library General Public License for more details.
+
+    You should have received a copy of the GNU Library General Public License
+    along with this library; see the file COPYING.LIB.  If not, write to
+    the Free Software Foundation, Inc., 51 Franklin Street, Fifth Floor,
+    Boston, MA 02110-1301, USA.
+*/
+
+#include <opensync/opensync.h>
+#include <stdlib.h>
+
+#include "member.h"
+
+using namespace QSync;
+
+Member::Member()
+  : mMember( 0 )
+{
+}
+
+Member::~Member()
+{
+}
+
+bool Member::isValid() const
+{
+  OSyncError *error = 0;
+
+  if ( !mMember )
+    return false;
+
+  if ( !osync_member_instance_plugin( mMember, pluginName().utf8(), &error ) ) {
+    qDebug( "Plugin %s is not valid: %s", pluginName().latin1(), osync_error_print( &error ) );
+    osync_error_free( &error );
+    return false;
+  }
+
+  return true;
+}
+
+QString Member::configurationDirectory() const
+{
+  Q_ASSERT( mMember );
+
+  return QString::fromLatin1( osync_member_get_configdir( mMember ) );
+}
+
+QString Member::pluginName() const
+{
+  Q_ASSERT( mMember );
+
+  return QString::fromLatin1( osync_member_get_pluginname( mMember ) );
+}
+
+Plugin Member::plugin() const
+{
+  Q_ASSERT( mMember );
+
+  Plugin plugin;
+
+  OSyncPlugin *oplugin = osync_member_get_plugin( mMember );
+  if ( oplugin )
+    plugin.mPlugin = oplugin;
+
+  return plugin;
+}
+
+int Member::id() const
+{
+  Q_ASSERT( mMember );
+
+  return osync_member_get_id( mMember );
+}
+
+void Member::setName( const QString &name )
+{
+  Q_ASSERT( mMember );
+
+  osync_member_set_name( mMember, (const char*)name.utf8() );
+}
+
+QString Member::name() const
+{
+  Q_ASSERT( mMember );
+
+  return QString::fromUtf8( osync_member_get_name( mMember ) );
+}
+
+void Member::setConfiguration( const QByteArray &configurationData )
+{
+  Q_ASSERT( mMember );
+
+  osync_member_set_config( mMember, configurationData.data(), configurationData.size() );
+}
+
+Result Member::configuration( QByteArray &configurationData, bool useDefault )
+{
+  Q_ASSERT( mMember );
+
+  char *data;
+  int size;
+
+  OSyncError *error = 0;
+  osync_bool ok = false;
+  if ( useDefault )
+    ok = osync_member_get_config_or_default( mMember, &data, &size, &error );
+  else
+    ok = osync_member_get_config( mMember, &data, &size, &error );
+
+  if ( !ok ) {
+    return Result( &error );
+  } else {
+    configurationData.resize( size );
+    memcpy( configurationData.data(), data, size );
+
+    return Result();
+  }
+}
+
+Result Member::save()
+{
+  Q_ASSERT( mMember );
+
+  OSyncError *error = 0;
+  if ( !osync_member_save( mMember, &error ) )
+    return Result( &error );
+  else
+    return Result();
+}
+
+Result Member::instance( const Plugin &plugin )
+{
+  OSyncError *error = 0;
+  if ( !osync_member_instance_plugin( mMember, plugin.name().utf8(), &error ) )
+    return Result( &error );
+  else
+    return Result();
+}
+
+bool Member::operator==( const Member &member ) const
+{
+  return mMember == member.mMember;
+}
+
+QString Member::scanDevices( const QString &query )
+{
+  Q_ASSERT( mMember );
+
+  OSyncError *error = 0;
+  char *data = (char*)osync_member_call_plugin( mMember, "scan_devices", const_cast<char*>( query.utf8().data() ), &error );
+  if ( error != 0 ) {
+    osync_error_free( &error );
+    return QString();
+  } else {
+    QString xml = QString::fromUtf8( data );
+    free( data );
+    return xml;
+  }
+}
+
+bool Member::testConnection( const QString &configuration )
+{
+  Q_ASSERT( mMember );
+
+  OSyncError *error = 0;
+  int *result = (int*)osync_member_call_plugin( mMember, "test_connection", const_cast<char*>( configuration.utf8().data() ), &error );
+  if ( error != 0 ) {
+    osync_error_free( &error );
+    return false;
+  } else {
+    bool value = ( *result == 1 ? true : false );
+    free( result );
+    return value;
+  }
+}
Index: kitchensync/libqopensync/syncupdates.h
===================================================================
--- kitchensync/libqopensync/syncupdates.h	(.../tags/KDE/3.5.6/kdepim)	(wersja 0)
+++ kitchensync/libqopensync/syncupdates.h	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -0,0 +1,157 @@
+/*
+    This file is part of libqopensync.
+
+    Copyright (c) 2005 Tobias Koenig <tokoe@kde.org>
+
+    This library is free software; you can redistribute it and/or
+    modify it under the terms of the GNU Library General Public
+    License as published by the Free Software Foundation; either
+    version 2 of the License, or (at your option) any later version.
+
+    This library is distributed in the hope that it will be useful,
+    but WITHOUT ANY WARRANTY; without even the implied warranty of
+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
+    Library General Public License for more details.
+
+    You should have received a copy of the GNU Library General Public License
+    along with this library; see the file COPYING.LIB.  If not, write to
+    the Free Software Foundation, Inc., 51 Franklin Street, Fifth Floor,
+    Boston, MA 02110-1301, USA.
+*/
+
+#ifndef QSYNC_SYNCUPDATES_H
+#define QSYNC_SYNCUPDATES_H
+
+#include <libqopensync/member.h>
+#include <libqopensync/result.h>
+#include <libqopensync/syncchange.h>
+#include <libqopensync/syncmapping.h>
+
+class OSyncMemberUpdate;
+class OSyncChangeUpdate;
+class OSyncMappingUpdate;
+class OSyncEngineUpdate;
+class OSyncMemberUpdate;
+
+namespace QSync {
+
+class SyncMemberUpdate
+{
+  friend class CallbackHandler;
+
+  public:
+    enum Type {
+      Connected,
+      SentChanges,
+      CommittedAll,
+      Disconnected,
+      ConnectError,
+      GetChangesError,
+      CommittedAllError,
+      SyncDoneError,
+      DisconnectedError
+    };
+
+    SyncMemberUpdate();
+    SyncMemberUpdate( OSyncMemberUpdate* );
+    ~SyncMemberUpdate();
+
+    Type type() const;
+    Result result() const;
+    Member member() const;
+
+  private:
+    Type mType;
+    Result mResult;
+    Member mMember;
+};
+
+class SyncChangeUpdate
+{
+  friend class CallbackHandler;
+
+  public:
+    enum Type {
+      Received = 1,
+      ReceivedInfo,
+      Sent,
+      WriteError,
+      ReceiveError
+    };
+
+    SyncChangeUpdate();
+    SyncChangeUpdate( OSyncChangeUpdate* );
+    ~SyncChangeUpdate();
+
+    Type type() const;
+    Result result() const;
+    SyncChange change() const;
+    int memberId() const;
+    int mappingId() const;
+
+  private:
+    Type mType;
+    Result mResult;
+    SyncChange mChange;
+    int mMemberId;
+    int mMappingId;
+};
+
+class SyncMappingUpdate
+{
+  friend class CallbackHandler;
+
+  public:
+    enum Type {
+      Solved = 1,
+      Synced,
+      WriteError
+    };
+
+    SyncMappingUpdate();
+    SyncMappingUpdate( OSyncMappingUpdate*, OSyncEngine* );
+    ~SyncMappingUpdate();
+
+    Type type() const;
+    Result result() const;
+    long long int winner() const;
+    SyncMapping mapping() const;
+
+  private:
+    Type mType;
+    Result mResult;
+    long long int mWinner;
+    SyncMapping mMapping;
+};
+
+class SyncEngineUpdate
+{
+  friend class CallbackHandler;
+
+  public:
+    enum Type {
+      EndPhaseConnected = 1,
+      EndPhaseRead,
+      EndPhaseWrite,
+      EndPhaseDisconnected,
+      Error,
+      SyncSuccessfull,
+      PrevUnclean,
+      EndConflicts
+    };
+
+    SyncEngineUpdate();
+    SyncEngineUpdate( OSyncEngineUpdate* );
+    ~SyncEngineUpdate();
+
+    Type type() const;
+    Result result() const;
+
+  private:
+    Type mType;
+    Result mResult;
+};
+
+}
+
+#endif
Index: kitchensync/libqopensync/environment.h
===================================================================
--- kitchensync/libqopensync/environment.h	(.../tags/KDE/3.5.6/kdepim)	(wersja 0)
+++ kitchensync/libqopensync/environment.h	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -0,0 +1,199 @@
+/*
+    This file is part of libqopensync.
+
+    Copyright (c) 2005 Tobias Koenig <tokoe@kde.org>
+
+    This library is free software; you can redistribute it and/or
+    modify it under the terms of the GNU Library General Public
+    License as published by the Free Software Foundation; either
+    version 2 of the License, or (at your option) any later version.
+
+    This library is distributed in the hope that it will be useful,
+    but WITHOUT ANY WARRANTY; without even the implied warranty of
+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
+    Library General Public License for more details.
+
+    You should have received a copy of the GNU Library General Public License
+    along with this library; see the file COPYING.LIB.  If not, write to
+    the Free Software Foundation, Inc., 51 Franklin Street, Fifth Floor,
+    Boston, MA 02110-1301, USA.
+*/
+
+#ifndef OSYNC_ENVIRONMENT_H
+#define OSYNC_ENVIRONMENT_H
+
+#include <qstring.h>
+
+#include <libqopensync/group.h>
+#include <libqopensync/plugin.h>
+#include <libqopensync/result.h>
+#include <libqopensync/conversion.h>
+
+struct OSyncEnv;
+
+namespace QSync {
+
+class Environment
+{
+  public:
+    Environment();
+    ~Environment();
+
+    class GroupIterator
+    {
+      friend class Environment;
+
+      public:
+        GroupIterator( Environment *environment )
+          : mEnvironment( environment ), mPos( -1 )
+        {
+        }
+
+        GroupIterator( const GroupIterator &it )
+        {
+          mEnvironment = it.mEnvironment;
+          mPos = it.mPos;
+        }
+
+        Group operator*() 
+        {
+          return mEnvironment->groupAt( mPos );
+        }
+
+        GroupIterator &operator++() { mPos++; return *this; }
+        GroupIterator &operator++( int ) { mPos++; return *this; }
+        GroupIterator &operator--() { mPos--; return *this; }
+        GroupIterator &operator--( int ) { mPos--; return *this; }
+        bool operator==( const GroupIterator &it ) { return mEnvironment == it.mEnvironment && mPos == it.mPos; }
+        bool operator!=( const GroupIterator &it ) { return mEnvironment == it.mEnvironment && mPos != it.mPos; }
+
+      private:
+        Environment *mEnvironment;
+        int mPos;
+    };
+
+    class PluginIterator
+    {
+      friend class Environment;
+
+      public:
+        PluginIterator( Environment *environment )
+          : mEnvironment( environment ), mPos( -1 )
+        {
+        }
+
+        PluginIterator( const PluginIterator &it )
+        {
+          mEnvironment = it.mEnvironment;
+          mPos = it.mPos;
+        }
+
+        Plugin operator*() 
+        {
+          return mEnvironment->pluginAt( mPos );
+        }
+
+        PluginIterator &operator++() { mPos++; return *this; }
+        PluginIterator &operator++( int ) { mPos++; return *this; }
+        PluginIterator &operator--() { mPos--; return *this; }
+        PluginIterator &operator--( int ) { mPos--; return *this; }
+        bool operator==( const PluginIterator &it ) { return mEnvironment == it.mEnvironment && mPos == it.mPos; }
+        bool operator!=( const PluginIterator &it ) { return mEnvironment == it.mEnvironment && mPos != it.mPos; }
+
+      private:
+        Environment *mEnvironment;
+        int mPos;
+    };
+
+    /**
+      Returns an iterator pointing to the first item in the group list.
+      This iterator equals groupEnd() if the group list is empty.
+     */
+    GroupIterator groupBegin();
+
+    /**
+      Returns an iterator pointing past the last item in the group list.
+      This iterator equals groupBegin() if the group list is empty.
+     */
+    GroupIterator groupEnd();
+
+    /**
+      Returns an iterator pointing to the first item in the plugin list.
+      This iterator equals pluginEnd() if the group list is empty.
+     */
+    PluginIterator pluginBegin();
+
+    /**
+      Returns an iterator pointing past the last item in the plugin list.
+      This iterator equals pluginBegin() if the plugin list is empty.
+     */
+    PluginIterator pluginEnd();
+
+    /**
+      Initializes the environment ( e.g. loads the groups and plugins ).
+      Has to be called before the groups or plugins can be accessed.
+     */
+    Result initialize();
+
+    /**
+      Finalizes the environment ( e.g. unloads the groups and plugins ).
+      Should be the last call before the object is deleted.
+     */
+    Result finalize();
+
+    /**
+      Returns the number of groups.
+     */
+    int groupCount() const;
+
+    /**
+      Returns the group at position @param pos.
+     */
+    Group groupAt( int pos ) const;
+
+    /**
+      Returns a group by name or an invalid group when the group with this
+      name doesn't exists.
+     */
+    Group groupByName( const QString &name ) const;
+
+    /**
+      Adds a new group to the environment.
+
+      @returns the new group.
+     */
+    Group addGroup();
+
+    /**
+      Removes a group from the environment.
+     */
+    Result removeGroup( const Group &group );
+
+    /**
+      Returns the number of plugins.
+     */
+    int pluginCount() const;
+
+    /**
+      Returns the plugin at position @param pos.
+     */
+    Plugin pluginAt( int pos ) const;
+
+    /**
+      Returns a plugin by name or an invalid plugin when the plugin with this
+      name doesn't exists.
+     */
+    Plugin pluginByName( const QString &name ) const;
+
+    /**
+      Returns the conversion object of this environment.
+     */
+    Conversion conversion() const;
+
+  private:
+    OSyncEnv *mEnvironment;
+};
+
+}
+
+#endif
Index: kitchensync/libqopensync/engine.h
===================================================================
--- kitchensync/libqopensync/engine.h	(.../tags/KDE/3.5.6/kdepim)	(wersja 0)
+++ kitchensync/libqopensync/engine.h	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -0,0 +1,72 @@
+/*
+    This file is part of libqopensync.
+
+    Copyright (c) 2005 Tobias Koenig <tokoe@kde.org>
+
+    This library is free software; you can redistribute it and/or
+    modify it under the terms of the GNU Library General Public
+    License as published by the Free Software Foundation; either
+    version 2 of the License, or (at your option) any later version.
+
+    This library is distributed in the hope that it will be useful,
+    but WITHOUT ANY WARRANTY; without even the implied warranty of
+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
+    Library General Public License for more details.
+
+    You should have received a copy of the GNU Library General Public License
+    along with this library; see the file COPYING.LIB.  If not, write to
+    the Free Software Foundation, Inc., 51 Franklin Street, Fifth Floor,
+    Boston, MA 02110-1301, USA.
+*/
+
+#ifndef QSYNC_ENGINE_H
+#define QSYNC_ENGINE_H
+
+#include <libqopensync/group.h>
+
+class OSyncEngine;
+
+namespace QSync {
+
+class Engine
+{
+  friend class CallbackHandler;
+
+  public:
+    /**
+      Constructs an engine .
+     */
+    Engine( const Group &group );
+
+    /**
+      Destroys the engine.
+     */
+    ~Engine();
+
+    /**
+      Initializes the engine.
+     */
+    Result initialize();
+
+    /**
+      Finalizes the engine.
+     */
+    void finalize();
+
+    /**
+      Starts the synchronization process.
+     */
+    Result synchronize();
+
+    /**
+      Stops the synchronization process.
+     */
+    void abort();
+
+  private:
+    OSyncEngine *mEngine;
+};
+
+}
+
+#endif
Index: kitchensync/libqopensync/member.h
===================================================================
--- kitchensync/libqopensync/member.h	(.../tags/KDE/3.5.6/kdepim)	(wersja 0)
+++ kitchensync/libqopensync/member.h	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -0,0 +1,129 @@
+/*
+    This file is part of libqopensync.
+
+    Copyright (c) 2005 Tobias Koenig <tokoe@kde.org>
+
+    This library is free software; you can redistribute it and/or
+    modify it under the terms of the GNU Library General Public
+    License as published by the Free Software Foundation; either
+    version 2 of the License, or (at your option) any later version.
+
+    This library is distributed in the hope that it will be useful,
+    but WITHOUT ANY WARRANTY; without even the implied warranty of
+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
+    Library General Public License for more details.
+
+    You should have received a copy of the GNU Library General Public License
+    along with this library; see the file COPYING.LIB.  If not, write to
+    the Free Software Foundation, Inc., 51 Franklin Street, Fifth Floor,
+    Boston, MA 02110-1301, USA.
+*/
+
+#ifndef QSYNC_MEMBER_H
+#define QSYNC_MEMBER_H
+
+#include <libqopensync/plugin.h>
+#include <libqopensync/result.h>
+#include <libqopensync/plugin.h>
+
+class OSyncMember;
+
+namespace QSync {
+
+class Member
+{
+  friend class Group;
+  friend class SyncChange;
+  friend class SyncMemberUpdate;
+
+  public:
+    Member();
+    ~Member();
+
+    /**
+      Returns whether the member object is valid.
+     */
+    bool isValid() const;
+
+    /**
+      Returns the configuration directory.
+     */
+    QString configurationDirectory() const;
+
+    /**
+      Returns the name of the plugin, the member belongs to.
+     */
+    QString pluginName() const;
+
+    /**
+      Returns the plugin, the member belongs to.
+     */
+    Plugin plugin() const;
+
+    /**
+      Returns the id of the plugin.
+    */
+    int id() const;
+
+    /**
+      Sets the name of this member.
+     */
+    void setName( const QString &name );
+
+    /**
+      Returns the name of this member.
+     */
+    QString name() const;
+
+    /**
+      Sets the configuration data as byte array. The developer has to decide the
+      type of the data ( e.g. xml, plain text, binary ).
+     */
+    void setConfiguration( const QByteArray &configurationData );
+
+    /**
+      Gets the configuration data as byte array. The developer has to decide the
+      type of the data ( e.g. xml, plain text, binary ).
+
+      @param useDefault  If set to true, return default config, if no config
+                         exists. If set to false, return error when no config
+                         exists.
+
+      @returns The result of this operation.
+     */
+    Result configuration( QByteArray &configurationData,
+      bool useDefault = true );
+
+    /**
+      Saves the changes to the configuration to hard disc.
+     */
+    Result save();
+
+    /**
+      Make this member an instance of the given plugin.
+    */
+    Result instance( const Plugin & );
+
+    bool operator==( const Member& ) const;
+
+    /**
+      This method can be used to query the plugin for scanning devices.
+      The @param query is a plugin specific xml document as well as
+      the return value.
+     */
+    QString scanDevices( const QString &query );
+
+    /**
+      This method can be used to test whether the plugin can connect
+      to the device with the given configuration.
+     */
+    bool testConnection( const QString &configuration );
+
+  private:
+    OSyncMember *mMember;
+};
+
+}
+
+#endif
+
Index: kitchensync/libqopensync/result.cpp
===================================================================
--- kitchensync/libqopensync/result.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 0)
+++ kitchensync/libqopensync/result.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -0,0 +1,149 @@
+/*
+    This file is part of libqopensync.
+
+    Copyright (c) 2005 Tobias Koenig <tokoe@kde.org>
+
+    This library is free software; you can redistribute it and/or
+    modify it under the terms of the GNU Library General Public
+    License as published by the Free Software Foundation; either
+    version 2 of the License, or (at your option) any later version.
+
+    This library is distributed in the hope that it will be useful,
+    but WITHOUT ANY WARRANTY; without even the implied warranty of
+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
+    Library General Public License for more details.
+
+    You should have received a copy of the GNU Library General Public License
+    along with this library; see the file COPYING.LIB.  If not, write to
+    the Free Software Foundation, Inc., 51 Franklin Street, Fifth Floor,
+    Boston, MA 02110-1301, USA.
+*/
+
+#include "result.h"
+
+#include <opensync/opensync.h>
+
+using namespace QSync;
+
+Result::Result()
+  : mType( NoError )
+{
+}
+
+Result::Result( Type type )
+  : mType( type )
+{
+}
+
+Result::Result( OSyncError **error, bool deleteError )
+{
+  OSyncErrorType otype = osync_error_get_type( error );
+  Type type;
+
+  switch ( otype ) {
+    case OSYNC_NO_ERROR:
+      type = NoError;
+      break;
+    default:
+    case OSYNC_ERROR_GENERIC:
+      type = GenericError;
+      break;
+    case OSYNC_ERROR_IO_ERROR:
+      type = IOError;
+      break;
+    case OSYNC_ERROR_NOT_SUPPORTED:
+      type = NotSupported;
+      break;
+    case OSYNC_ERROR_TIMEOUT:
+      type = Timeout;
+      break;
+    case OSYNC_ERROR_DISCONNECTED:
+      type = Disconnected;
+      break;
+    case OSYNC_ERROR_FILE_NOT_FOUND:
+      type = FileNotFound;
+      break;
+    case OSYNC_ERROR_EXISTS:
+      type = Exists;
+      break;
+    case OSYNC_ERROR_CONVERT:
+      type = Convert;
+      break;
+    case OSYNC_ERROR_MISCONFIGURATION:
+      type = Misconfiguration;
+      break;
+    case OSYNC_ERROR_INITIALIZATION:
+      type = Initialization;
+      break;
+    case OSYNC_ERROR_PARAMETER:
+      type = Parameter;
+      break;
+    case OSYNC_ERROR_EXPECTED:
+      type = Expected;
+      break;
+    case OSYNC_ERROR_NO_CONNECTION:
+      type = NoConnection;
+      break;
+    case OSYNC_ERROR_TEMPORARY:
+      type = Temporary;
+      break;
+    case OSYNC_ERROR_LOCKED:
+      type = Locked;
+      break;
+    case OSYNC_ERROR_PLUGIN_NOT_FOUND:
+      type = PluginNotFound;
+      break;
+  }
+
+  mType = type;
+  mName = QString::fromUtf8( osync_error_get_name( error ) );
+  mMessage = QString::fromUtf8( osync_error_print( error ) );
+
+  if ( deleteError )
+    osync_error_free( error );
+}
+
+Result::~Result()
+{
+}
+
+void Result::setName( const QString &name )
+{
+  mName = name;
+}
+
+QString Result::name() const
+{
+  return mName;
+}
+
+void Result::setMessage( const QString &message )
+{
+  mMessage = message;
+}
+
+QString Result::message() const
+{
+  return mMessage;
+}
+
+void Result::setType( Type type )
+{
+  mType = type;
+}
+
+Result::Type Result::type() const
+{
+  return mType;
+}
+
+bool Result::isError() const
+{
+  return mType != NoError;
+}
+
+Result::operator bool () const
+{
+  return ( mType != NoError );
+}
+
Index: kitchensync/libqopensync/syncchange.cpp
===================================================================
--- kitchensync/libqopensync/syncchange.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 0)
+++ kitchensync/libqopensync/syncchange.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -0,0 +1,159 @@
+/*
+    This file is part of libqopensync.
+
+    Copyright (c) 2005 Tobias Koenig <tokoe@kde.org>
+
+    This library is free software; you can redistribute it and/or
+    modify it under the terms of the GNU Library General Public
+    License as published by the Free Software Foundation; either
+    version 2 of the License, or (at your option) any later version.
+
+    This library is distributed in the hope that it will be useful,
+    but WITHOUT ANY WARRANTY; without even the implied warranty of
+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
+    Library General Public License for more details.
+
+    You should have received a copy of the GNU Library General Public License
+    along with this library; see the file COPYING.LIB.  If not, write to
+    the Free Software Foundation, Inc., 51 Franklin Street, Fifth Floor,
+    Boston, MA 02110-1301, USA.
+*/
+
+#include <opensync/file.h>
+#include <opensync/opensync.h>
+
+#include "syncchange.h"
+
+using namespace QSync;
+
+SyncChange::SyncChange()
+{
+}
+
+SyncChange::SyncChange( OSyncChange *change )
+{
+  mSyncChange = change;
+}
+
+SyncChange::~SyncChange()
+{
+}
+
+bool SyncChange::isValid() const
+{
+  return ( mSyncChange != 0 );
+}
+
+void SyncChange::setUid( const QString &uid )
+{
+  osync_change_set_uid( mSyncChange, uid.utf8() );
+}
+
+QString SyncChange::uid() const
+{
+  return QString::fromUtf8( osync_change_get_uid( mSyncChange ) );
+}
+
+void SyncChange::setHash( const QString &hash )
+{
+  osync_change_set_hash( mSyncChange, hash.utf8() );
+}
+
+QString SyncChange::hash() const
+{
+  return QString::fromUtf8( osync_change_get_hash( mSyncChange ) );
+}
+
+void SyncChange::setData( const QString &data )
+{
+  osync_change_set_data( mSyncChange, const_cast<char*>( data.utf8().data() ), data.utf8().size(), true );
+}
+
+QString SyncChange::data() const
+{
+  int size = osync_change_get_datasize( mSyncChange );
+
+  QString content;
+  if ( objectFormatName() == "file" ) {
+    fileFormat *format = (fileFormat*)osync_change_get_data( mSyncChange );
+    if ( format )
+      content = QString::fromUtf8( format->data, format->size );
+  } else
+    content = QString::fromUtf8( osync_change_get_data( mSyncChange ), size );
+
+  return content;
+}
+
+bool SyncChange::hasData() const
+{
+  return osync_change_has_data( mSyncChange );
+}
+
+QString SyncChange::objectFormatName() const
+{
+  OSyncObjFormat *format = osync_change_get_objformat( mSyncChange );
+  Q_ASSERT( format );
+
+  return QString::fromUtf8( osync_objformat_get_name( format ) );
+}
+
+Member SyncChange::member() const
+{
+  OSyncMember *omember = osync_change_get_member( mSyncChange );
+
+  Member m;
+  m.mMember = omember;
+
+  return m;
+}
+
+void SyncChange::setChangeType( Type changeType )
+{
+  OSyncChangeType ochangeType;
+
+  switch ( changeType ) {
+    case AddedChange:
+      ochangeType = CHANGE_ADDED;
+      break;
+    case UnmodifiedChange:
+      ochangeType = CHANGE_UNMODIFIED;
+      break;
+    case DeletedChange:
+      ochangeType = CHANGE_DELETED;
+      break;
+    case ModifiedChange:
+      ochangeType = CHANGE_MODIFIED;
+      break;
+    case UnknownChange:
+    default:
+      ochangeType = CHANGE_UNKNOWN;
+      break;
+  }
+
+  osync_change_set_changetype( mSyncChange, ochangeType );
+}
+
+SyncChange::Type SyncChange::changeType() const
+{
+  OSyncChangeType ochangeType = osync_change_get_changetype( mSyncChange );
+
+  switch ( ochangeType ) {
+    case CHANGE_ADDED:
+      return AddedChange;
+      break;
+    case CHANGE_UNMODIFIED:
+      return UnmodifiedChange;
+      break;
+    case CHANGE_DELETED:
+      return DeletedChange;
+      break;
+    case CHANGE_MODIFIED:
+      return ModifiedChange;
+      break;
+    case CHANGE_UNKNOWN:
+    default:
+      return UnknownChange;
+      break;
+  }
+}
+
Index: kitchensync/libqopensync/result.h
===================================================================
--- kitchensync/libqopensync/result.h	(.../tags/KDE/3.5.6/kdepim)	(wersja 0)
+++ kitchensync/libqopensync/result.h	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -0,0 +1,126 @@
+/*
+    This file is part of libqopensync.
+
+    Copyright (c) 2005 Tobias Koenig <tokoe@kde.org>
+
+    This library is free software; you can redistribute it and/or
+    modify it under the terms of the GNU Library General Public
+    License as published by the Free Software Foundation; either
+    version 2 of the License, or (at your option) any later version.
+
+    This library is distributed in the hope that it will be useful,
+    but WITHOUT ANY WARRANTY; without even the implied warranty of
+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
+    Library General Public License for more details.
+
+    You should have received a copy of the GNU Library General Public License
+    along with this library; see the file COPYING.LIB.  If not, write to
+    the Free Software Foundation, Inc., 51 Franklin Street, Fifth Floor,
+    Boston, MA 02110-1301, USA.
+*/
+
+#ifndef QSYNC_RESULT_H
+#define QSYNC_RESULT_H
+
+#include <qstring.h>
+
+struct OSyncError;
+
+namespace QSync {
+
+class Result
+{
+  public:
+    /**
+      Result types.
+     */
+    enum Type {
+      NoError,
+      GenericError,
+      IOError,
+      NotSupported,
+      Timeout,
+      Disconnected,
+      FileNotFound,
+      Exists,
+      Convert,
+      Misconfiguration,
+      Initialization,
+      Parameter,
+      Expected,
+      NoConnection,
+      Temporary,
+      Locked,
+      PluginNotFound
+    };
+
+    /**
+      Constructs a NoError result.
+     */
+    Result();
+
+    /**
+      Constructs a result of the given type.
+     */
+    Result( Type type );
+
+    /**
+      Construct Result from OpenSync error object. Deletes the OpenSync error
+      object.
+    */
+    Result( OSyncError **, bool deleteError = true );
+
+    /**
+      Destroys the result.
+     */
+    ~Result();
+
+    /**
+      Sets the name of the result.
+     */
+    void setName( const QString &name );
+
+    /**
+      Returns the name of the result.
+     */
+    QString name() const;
+
+    /**
+      Sets the message text of the result.
+     */
+    void setMessage( const QString &message );
+
+    /**
+      Returns the message text of the result.
+     */
+    QString message() const;
+
+    /**
+      Sets the type of the result.
+     */
+    void setType( Type type );
+
+    /**
+      Returns the type of the result.
+     */
+    Type type() const;
+
+    /**
+      Reimplemented boolean operator.
+     */
+    operator bool () const;
+
+    /**
+      Return true, if this Result is an error, return false otherwise.
+    */
+    bool isError() const;
+
+  private:
+    QString mName;
+    QString mMessage;
+    Type mType;
+};
+
+}
+
+#endif
Index: kitchensync/libqopensync/filter.cpp
===================================================================
--- kitchensync/libqopensync/filter.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 0)
+++ kitchensync/libqopensync/filter.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -0,0 +1,55 @@
+/*
+    This file is part of libqopensync.
+
+    Copyright (c) 2005 Tobias Koenig <tokoe@kde.org>
+
+    This library is free software; you can redistribute it and/or
+    modify it under the terms of the GNU Library General Public
+    License as published by the Free Software Foundation; either
+    version 2 of the License, or (at your option) any later version.
+
+    This library is distributed in the hope that it will be useful,
+    but WITHOUT ANY WARRANTY; without even the implied warranty of
+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
+    Library General Public License for more details.
+
+    You should have received a copy of the GNU Library General Public License
+    along with this library; see the file COPYING.LIB.  If not, write to
+    the Free Software Foundation, Inc., 51 Franklin Street, Fifth Floor,
+    Boston, MA 02110-1301, USA.
+*/
+
+#include <opensync/opensync.h>
+
+#include "filter.h"
+
+using namespace QSync;
+
+Filter::Filter()
+  : mFilter( 0 )
+{
+}
+
+Filter::~Filter()
+{
+}
+
+bool Filter::isValid() const
+{
+  return (mFilter != 0);
+}
+
+void Filter::setConfiguration( const QString &configuration )
+{
+  Q_ASSERT( mFilter );
+
+  osync_filter_set_config( mFilter, (const char*)configuration.utf8() );
+}
+
+QString Filter::configuration() const
+{
+  Q_ASSERT( mFilter );
+
+  return QString::fromUtf8( osync_filter_get_config( mFilter ) );
+}
+
Index: kitchensync/libqopensync/conversion.cpp
===================================================================
--- kitchensync/libqopensync/conversion.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 0)
+++ kitchensync/libqopensync/conversion.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -0,0 +1,58 @@
+/*
+    This file is part of libqopensync.
+
+    Copyright (c) 2006 Tobias Koenig <tokoe@kde.org>
+
+    This library is free software; you can redistribute it and/or
+    modify it under the terms of the GNU Library General Public
+    License as published by the Free Software Foundation; either
+    version 2 of the License, or (at your option) any later version.
+
+    This library is distributed in the hope that it will be useful,
+    but WITHOUT ANY WARRANTY; without even the implied warranty of
+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
+    Library General Public License for more details.
+
+    You should have received a copy of the GNU Library General Public License
+    along with this library; see the file COPYING.LIB.  If not, write to
+    the Free Software Foundation, Inc., 51 Franklin Street, Fifth Floor,
+    Boston, MA 02110-1301, USA.
+*/
+
+#include <opensync/opensync.h>
+
+#include "conversion.h"
+
+using namespace QSync;
+
+Conversion::Conversion()
+  : mEnvironment( 0 )
+{
+}
+
+Conversion::~Conversion()
+{
+}
+
+bool Conversion::isValid() const
+{
+  return mEnvironment != 0;
+}
+
+QStringList Conversion::objectTypes() const
+{
+  Q_ASSERT( mEnvironment );
+
+  OSyncFormatEnv *formatEnv = osync_conv_env_new( mEnvironment );
+  Q_ASSERT( formatEnv );
+
+  QStringList types;	
+  for ( int i = 0; i < osync_conv_num_objtypes( formatEnv ); i++ ) {
+    OSyncObjType *type = osync_conv_nth_objtype( formatEnv, i );
+    types.append( QString::fromUtf8( osync_objtype_get_name( type ) ) );
+  }
+
+  osync_conv_env_free( formatEnv );
+
+  return types;
+}
Index: kitchensync/libqopensync/syncchange.h
===================================================================
--- kitchensync/libqopensync/syncchange.h	(.../tags/KDE/3.5.6/kdepim)	(wersja 0)
+++ kitchensync/libqopensync/syncchange.h	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -0,0 +1,116 @@
+/*
+    This file is part of libqopensync.
+
+    Copyright (c) 2005 Tobias Koenig <tokoe@kde.org>
+
+    This library is free software; you can redistribute it and/or
+    modify it under the terms of the GNU Library General Public
+    License as published by the Free Software Foundation; either
+    version 2 of the License, or (at your option) any later version.
+
+    This library is distributed in the hope that it will be useful,
+    but WITHOUT ANY WARRANTY; without even the implied warranty of
+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
+    Library General Public License for more details.
+
+    You should have received a copy of the GNU Library General Public License
+    along with this library; see the file COPYING.LIB.  If not, write to
+    the Free Software Foundation, Inc., 51 Franklin Street, Fifth Floor,
+    Boston, MA 02110-1301, USA.
+*/
+
+#ifndef QSYNC_SYNCCHANGE_H
+#define QSYNC_SYNCCHANGE_H
+
+#include <libqopensync/member.h>
+
+class OSyncChange;
+
+namespace QSync {
+
+class SyncChange
+{
+  friend class SyncMapping;
+
+  public:
+    enum Type
+    {
+      UnknownChange,
+      AddedChange,
+      UnmodifiedChange,
+      DeletedChange,
+      ModifiedChange
+    };
+
+    SyncChange();
+    SyncChange( OSyncChange* );
+    ~SyncChange();
+
+    /**
+      Returns whether it's a valid SyncChange.
+     */
+    bool isValid() const;
+
+    /**
+      Sets the uid of this change.
+     */
+    void setUid( const QString &uid );
+
+    /**
+      Returns the uid of this change.
+     */
+    QString uid() const;
+
+    /**
+      Sets the hash of this change.
+     */
+    void setHash( const QString &hash );
+
+    /**
+      Returns the hash of this change.
+     */
+    QString hash() const;
+
+    /**
+      Sets the data provided by the plugin.
+     */
+    void setData( const QString &data );
+
+    /**
+      Returns the data provided by the plugin.
+     */
+    QString data() const;
+
+    /**
+      Returns whether the change contains data.
+     */
+    bool hasData() const;
+
+    /**
+      Returns the object format name.
+     */
+    QString objectFormatName() const;
+
+    /**
+      Returns the parent member of this change.
+     */
+    Member member() const;
+
+    /**
+      Sets the change type.
+     */
+    void setChangeType( Type changeType );
+
+    /**
+      Returns the change type.
+     */
+    Type changeType() const;
+
+  private:
+    OSyncChange *mSyncChange;
+};
+
+}
+
+#endif
+
Index: kitchensync/libqopensync/Makefile.am
===================================================================
--- kitchensync/libqopensync/Makefile.am	(.../tags/KDE/3.5.6/kdepim)	(wersja 0)
+++ kitchensync/libqopensync/Makefile.am	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -0,0 +1,19 @@
+INCLUDES = -I$(top_srcdir)/kitchensync/src \
+           -I$(top_srcdir)/kitchensync \
+           -I$(top_srcdir) \
+           $(OPENSYNC_CFLAGS) \
+           $(OPENSYNCENGINE_CFLAGS) \
+           $(all_includes)
+
+lib_LTLIBRARIES = libqopensync.la
+
+libqopensync_la_SOURCES = callbackhandler.cpp conversion.cpp engine.cpp environment.cpp filter.cpp group.cpp \
+	member.cpp plugin.cpp result.cpp syncmapping.cpp syncupdates.cpp \
+	syncchange.cpp
+libqopensync_la_LDFLAGS = $(all_libraries) $(KDE_RPATH) -no-undefined
+libqopensync_la_LIBADD = $(LIB_KDEUI) $(OPENSYNC_LIBS) $(OPENSYNCENGINE_LIBS)
+
+METASOURCES = AUTO
+
+messages: rc.cpp
+	$(XGETTEXT) *.cpp *.h -o $(podir)/libqopensync.pot
Index: kitchensync/libqopensync/syncmapping.cpp
===================================================================
--- kitchensync/libqopensync/syncmapping.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 0)
+++ kitchensync/libqopensync/syncmapping.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -0,0 +1,100 @@
+/*
+    This file is part of libqopensync.
+
+    Copyright (c) 2005 Tobias Koenig <tokoe@kde.org>
+
+    This library is free software; you can redistribute it and/or
+    modify it under the terms of the GNU Library General Public
+    License as published by the Free Software Foundation; either
+    version 2 of the License, or (at your option) any later version.
+
+    This library is distributed in the hope that it will be useful,
+    but WITHOUT ANY WARRANTY; without even the implied warranty of
+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
+    Library General Public License for more details.
+
+    You should have received a copy of the GNU Library General Public License
+    along with this library; see the file COPYING.LIB.  If not, write to
+    the Free Software Foundation, Inc., 51 Franklin Street, Fifth Floor,
+    Boston, MA 02110-1301, USA.
+*/
+
+#include <qstring.h>
+#include <osengine/engine.h>
+
+#include "syncmapping.h"
+
+using namespace QSync;
+
+SyncMapping::SyncMapping()
+  : mEngine( 0 ), mMapping( 0 )
+{
+}
+
+SyncMapping::SyncMapping( OSyncMapping *mapping, OSyncEngine *engine )
+  : mEngine( engine ), mMapping( mapping )
+{
+}
+
+SyncMapping::~SyncMapping()
+{
+}
+
+bool SyncMapping::isValid() const
+{
+  return ( mEngine != 0 && mMapping != 0 );
+}
+
+long long SyncMapping::id() const
+{
+  Q_ASSERT( mMapping );
+
+  return osengine_mapping_get_id( mMapping );
+}
+
+void SyncMapping::duplicate()
+{
+  Q_ASSERT( mEngine );
+  Q_ASSERT( mMapping );
+
+  osengine_mapping_duplicate( mEngine, mMapping );
+}
+
+void SyncMapping::solve( const SyncChange &change )
+{
+  Q_ASSERT( mEngine );
+  Q_ASSERT( mMapping );
+  Q_ASSERT( change.isValid() );
+
+  osengine_mapping_solve( mEngine, mMapping, change.mSyncChange );
+}
+
+void SyncMapping::ignore()
+{
+  Q_ASSERT( mEngine );
+  Q_ASSERT( mMapping );
+
+  //TODO: error should be returned as Result
+  OSyncError *error = 0;
+  osengine_mapping_ignore_conflict( mEngine, mMapping, &error );
+}
+
+int SyncMapping::changesCount() const
+{
+  Q_ASSERT( mMapping );
+
+  return osengine_mapping_num_changes( mMapping );
+}
+
+SyncChange SyncMapping::changeAt( int pos )
+{
+  Q_ASSERT( mMapping );
+
+  if ( pos < 0 || pos >= osengine_mapping_num_changes( mMapping ) )
+    return SyncChange();
+
+  OSyncChange *ochange = osengine_mapping_nth_change( mMapping, pos );
+
+  return SyncChange( ochange );
+}
+
Index: kitchensync/libqopensync/filter.h
===================================================================
--- kitchensync/libqopensync/filter.h	(.../tags/KDE/3.5.6/kdepim)	(wersja 0)
+++ kitchensync/libqopensync/filter.h	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -0,0 +1,64 @@
+/*
+    This file is part of libqopensync.
+
+    Copyright (c) 2005 Tobias Koenig <tokoe@kde.org>
+
+    This library is free software; you can redistribute it and/or
+    modify it under the terms of the GNU Library General Public
+    License as published by the Free Software Foundation; either
+    version 2 of the License, or (at your option) any later version.
+
+    This library is distributed in the hope that it will be useful,
+    but WITHOUT ANY WARRANTY; without even the implied warranty of
+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
+    Library General Public License for more details.
+
+    You should have received a copy of the GNU Library General Public License
+    along with this library; see the file COPYING.LIB.  If not, write to
+    the Free Software Foundation, Inc., 51 Franklin Street, Fifth Floor,
+    Boston, MA 02110-1301, USA.
+*/
+
+#ifndef QSYNC_FILTER_H
+#define QSYNC_FILTER_H
+
+#include <qstring.h>
+
+class OSyncFilter;
+
+namespace QSync {
+
+class Filter
+{
+  friend class Group;
+
+  public:
+    Filter();
+    ~Filter();
+
+    /**
+      Returns whether the object is a valid filter.
+     */
+    bool isValid() const;
+
+    /**
+      Sets the configuration string of this filter. The format of
+      string is filter specific.
+     */
+    void setConfiguration( const QString &configuration );
+
+    /**
+      Returns the configuration string of this filter.
+     */
+    QString configuration() const;
+
+    bool operator==( const Filter &filter ) const { return mFilter == filter.mFilter; }
+
+  private:
+    OSyncFilter *mFilter;
+};
+
+}
+
+#endif
+
Index: kitchensync/libqopensync/conversion.h
===================================================================
--- kitchensync/libqopensync/conversion.h	(.../tags/KDE/3.5.6/kdepim)	(wersja 0)
+++ kitchensync/libqopensync/conversion.h	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -0,0 +1,56 @@
+/*
+    This file is part of libqopensync.
+
+    Copyright (c) 2006 Tobias Koenig <tokoe@kde.org>
+
+    This library is free software; you can redistribute it and/or
+    modify it under the terms of the GNU Library General Public
+    License as published by the Free Software Foundation; either
+    version 2 of the License, or (at your option) any later version.
+
+    This library is distributed in the hope that it will be useful,
+    but WITHOUT ANY WARRANTY; without even the implied warranty of
+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
+    Library General Public License for more details.
+
+    You should have received a copy of the GNU Library General Public License
+    along with this library; see the file COPYING.LIB.  If not, write to
+    the Free Software Foundation, Inc., 51 Franklin Street, Fifth Floor,
+    Boston, MA 02110-1301, USA.
+*/
+
+#ifndef QSYNC_CONVERSION_H
+#define QSYNC_CONVERSION_H
+
+#include <qstringlist.h>
+
+class OSyncEnv;
+
+namespace QSync {
+
+class Conversion
+{
+  friend class Environment;
+
+  public:
+    Conversion();
+    ~Conversion();
+
+    /**
+      Returns whether the object is a valid conversion.
+     */
+    bool isValid() const;
+
+    /**
+      Returns the list of names of supported object types.
+     */
+    QStringList objectTypes() const;
+
+  private:
+    OSyncEnv *mEnvironment;
+};
+
+}
+
+#endif
+
Index: kitchensync/libqopensync/callbackhandler.cpp
===================================================================
--- kitchensync/libqopensync/callbackhandler.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 0)
+++ kitchensync/libqopensync/callbackhandler.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -0,0 +1,191 @@
+/*
+    This file is part of libqopensync.
+
+    Copyright (c) 2005 Tobias Koenig <tokoe@kde.org>
+
+    This library is free software; you can redistribute it and/or
+    modify it under the terms of the GNU Library General Public
+    License as published by the Free Software Foundation; either
+    version 2 of the License, or (at your option) any later version.
+
+    This library is distributed in the hope that it will be useful,
+    but WITHOUT ANY WARRANTY; without even the implied warranty of
+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
+    Library General Public License for more details.
+
+    You should have received a copy of the GNU Library General Public License
+    along with this library; see the file COPYING.LIB.  If not, write to
+    the Free Software Foundation, Inc., 51 Franklin Street, Fifth Floor,
+    Boston, MA 02110-1301, USA.
+*/
+
+#include <osengine/engine.h>
+
+#include <libqopensync/engine.h>
+
+#include <qapplication.h>
+
+#include "callbackhandler.h"
+
+using namespace QSync;
+
+class CallbackHandler::ConflictEvent : public QCustomEvent
+{
+  public:
+    ConflictEvent( const SyncMapping& mapping )
+      : QCustomEvent( ConflictEventType ), mMapping( mapping )
+    {
+    }
+
+    SyncMapping mapping() const { return mMapping; }
+
+  private:
+    SyncMapping mMapping;
+};
+
+class CallbackHandler::ChangeEvent : public QCustomEvent
+{
+  public:
+    ChangeEvent( const SyncChangeUpdate& change )
+      : QCustomEvent( ChangeEventType ), mChange( change )
+    {
+    }
+
+    SyncChangeUpdate change() const { return mChange; }
+
+  private:
+    SyncChangeUpdate mChange;
+};
+
+class CallbackHandler::MappingEvent : public QCustomEvent
+{
+  public:
+    MappingEvent( const SyncMappingUpdate& mapping )
+      : QCustomEvent( MappingEventType ), mMapping( mapping )
+    {
+    }
+
+    SyncMappingUpdate mapping() const { return mMapping; }
+
+  private:
+    SyncMappingUpdate mMapping;
+};
+
+class CallbackHandler::EngineEvent : public QCustomEvent
+{
+  public:
+    EngineEvent( const SyncEngineUpdate& engine )
+      : QCustomEvent( EngineEventType ), mEngine( engine )
+    {
+    }
+
+    SyncEngineUpdate engine() const { return mEngine; }
+
+  private:
+    SyncEngineUpdate mEngine;
+};
+
+class CallbackHandler::MemberEvent : public QCustomEvent
+{
+  public:
+    MemberEvent( const SyncMemberUpdate& member )
+      : QCustomEvent( MemberEventType ), mMember( member )
+    {
+    }
+
+    SyncMemberUpdate member() const { return mMember; }
+
+  private:
+    SyncMemberUpdate mMember;
+};
+
+CallbackHandler::CallbackHandler()
+{
+}
+
+CallbackHandler::~CallbackHandler()
+{
+}
+
+void CallbackHandler::setEngine( Engine *engine )
+{
+  mEngine = engine;
+
+  osengine_set_conflict_callback( engine->mEngine, &conflict_callback, this );
+  osengine_set_changestatus_callback( engine->mEngine, &change_callback, this );
+  osengine_set_mappingstatus_callback( engine->mEngine, &mapping_callback, this );
+  osengine_set_enginestatus_callback( engine->mEngine, &engine_callback, this );
+  osengine_set_memberstatus_callback( engine->mEngine, &member_callback, this );
+}
+
+Engine* CallbackHandler::engine() const
+{
+  return mEngine;
+}
+
+void CallbackHandler::customEvent( QCustomEvent *event )
+{
+  if ( event->type() == static_cast<QEvent::Type>( ConflictEventType ) ) {
+    ConflictEvent *conflictEvent = static_cast<ConflictEvent*>( event );
+    emit conflict( conflictEvent->mapping() );
+  } else if ( event->type() == static_cast<QEvent::Type>( ChangeEventType ) ) {
+    ChangeEvent *changeEvent = static_cast<ChangeEvent*>( event );
+    emit change( changeEvent->change() );
+  } else if ( event->type() == static_cast<QEvent::Type>( MappingEventType ) ) {
+    MappingEvent *mappingEvent = static_cast<MappingEvent*>( event );
+    emit mapping( mappingEvent->mapping() );
+  } else if ( event->type() == static_cast<QEvent::Type>( EngineEventType ) ) {
+    EngineEvent *engineEvent = static_cast<EngineEvent*>( event );
+    emit engine( engineEvent->engine() );
+  } else if ( event->type() == static_cast<QEvent::Type>( MemberEventType ) ) {
+    MemberEvent *memberEvent = static_cast<MemberEvent*>( event );
+    emit member( memberEvent->member() );
+  }
+}
+
+void CallbackHandler::conflict_callback( OSyncEngine *engine, OSyncMapping *omapping, void *data )
+{
+  SyncMapping mapping( omapping, engine );
+
+  CallbackHandler *handler = static_cast<CallbackHandler*>( data );
+
+  QApplication::postEvent( handler, new ConflictEvent( mapping ) );
+}
+
+void CallbackHandler::change_callback( OSyncEngine*, OSyncChangeUpdate *update, void *data )
+{
+  SyncChangeUpdate change( update );
+
+  CallbackHandler *handler = static_cast<CallbackHandler*>( data );
+
+  QApplication::postEvent( handler, new ChangeEvent( change ) );
+}
+
+void CallbackHandler::mapping_callback( OSyncMappingUpdate *update, void *data )
+{
+  CallbackHandler *handler = static_cast<CallbackHandler*>( data );
+
+  SyncMappingUpdate mapping( update, handler->engine()->mEngine );
+
+  QApplication::postEvent( handler, new MappingEvent( mapping ) );
+}
+
+void CallbackHandler::engine_callback( OSyncEngine*, OSyncEngineUpdate *update, void *data )
+{
+  SyncEngineUpdate engine( update );
+
+  CallbackHandler *handler = static_cast<CallbackHandler*>( data );
+
+  QApplication::postEvent( handler, new EngineEvent( engine ) );
+}
+
+void CallbackHandler::member_callback( OSyncMemberUpdate *update, void *data )
+{
+  SyncMemberUpdate member( update );
+
+  CallbackHandler *handler = static_cast<CallbackHandler*>( data );
+
+  QApplication::postEvent( handler, new MemberEvent( member ) );
+}
+
+#include "callbackhandler.moc"
Index: kitchensync/libqopensync/group.cpp
===================================================================
--- kitchensync/libqopensync/group.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 0)
+++ kitchensync/libqopensync/group.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -0,0 +1,292 @@
+/*
+    This file is part of libqopensync.
+
+    Copyright (c) 2005 Tobias Koenig <tokoe@kde.org>
+
+    This library is free software; you can redistribute it and/or
+    modify it under the terms of the GNU Library General Public
+    License as published by the Free Software Foundation; either
+    version 2 of the License, or (at your option) any later version.
+
+    This library is distributed in the hope that it will be useful,
+    but WITHOUT ANY WARRANTY; without even the implied warranty of
+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
+    Library General Public License for more details.
+
+    You should have received a copy of the GNU Library General Public License
+    along with this library; see the file COPYING.LIB.  If not, write to
+    the Free Software Foundation, Inc., 51 Franklin Street, Fifth Floor,
+    Boston, MA 02110-1301, USA.
+*/
+
+/** hack includes **/
+#include <qdom.h>
+#include <qfile.h>
+/** hack includes **/
+
+#include <opensync/opensync.h>
+
+#include "conversion.h"
+#include "group.h"
+
+using namespace QSync;
+
+/**
+  This class is a quick hack for OpenSync 0.19 and 0.20 because
+  the engine doesn't stores the filter settings itself when calling
+  osync_group_set_objtype_enabled(), so we have to store it for every
+  group in a separated config file. This class encapsulates it.
+ */
+GroupConfig::GroupConfig()
+  : mGroup( 0 )
+{
+}
+
+QStringList GroupConfig::activeObjectTypes() const
+{
+  Q_ASSERT( mGroup );
+
+  const QString fileName = QString( "%1/filter.conf" ).arg( osync_group_get_configdir( mGroup ) );
+
+  QFile file( fileName );
+  if ( !file.open( IO_ReadOnly ) )
+    return QStringList();
+
+  QDomDocument document;
+
+  QString message;
+  if ( !document.setContent( &file, &message ) ) {
+    qDebug( "Error on loading %s: %s", fileName.latin1(), message.latin1() );
+    return QStringList();
+  }
+  file.close();
+
+  QStringList objectTypes;
+
+  QDomElement element = document.documentElement();
+  QDomNode node = element.firstChild();
+  while ( !node.isNull() ) {
+    QDomElement childElement = node.toElement();
+    if ( !childElement.isNull() )
+      objectTypes.append( childElement.tagName() );
+
+    node = node.nextSibling();
+  }
+
+  return objectTypes;
+}
+
+void GroupConfig::setActiveObjectTypes( const QStringList &objectTypes )
+{
+  Q_ASSERT( mGroup );
+
+  QDomDocument document( "Filter" );
+  document.appendChild( document.createProcessingInstruction(
+                        "xml", "version=\"1.0\" encoding=\"UTF-8\"" ) );
+
+  QDomElement element = document.createElement( "filter" );
+  document.appendChild( element );
+
+  for ( uint i = 0; i < objectTypes.count(); ++i ) {
+    QDomElement entry = document.createElement( objectTypes[ i ] );
+    element.appendChild( entry );
+  }
+
+  const QString fileName = QString( "%1/filter.conf" ).arg( osync_group_get_configdir( mGroup ) );
+
+  QFile file( fileName );
+  if ( !file.open( IO_WriteOnly ) )
+    return;
+
+  QTextStream s( &file );
+  s.setEncoding( QTextStream::UnicodeUTF8 );
+  s << document.toString();
+  file.close();
+}
+
+
+Group::Group()
+  : mGroup( 0 )
+{
+}
+
+Group::~Group()
+{
+}
+
+bool Group::isValid() const
+{
+  return ( mGroup != 0 );
+}
+
+Group::Iterator Group::begin()
+{
+  Iterator it( this );
+  it.mPos = 0;
+
+  return it;
+}
+
+Group::Iterator Group::end()
+{
+  Iterator it( this );
+  it.mPos = memberCount();
+
+  return it;
+}
+
+void Group::setName( const QString &name )
+{
+  Q_ASSERT( mGroup );
+
+  osync_group_set_name( mGroup, name.latin1() );
+}
+
+QString Group::name() const
+{
+  Q_ASSERT( mGroup );
+
+  return QString::fromLatin1( osync_group_get_name( mGroup ) );
+}
+
+void Group::setLastSynchronization( const QDateTime &dateTime )
+{
+  Q_ASSERT( mGroup );
+
+  if ( dateTime.isValid() )
+    osync_group_set_last_synchronization( mGroup, dateTime.toTime_t() );
+}
+
+QDateTime Group::lastSynchronization() const
+{
+  Q_ASSERT( mGroup );
+
+  QDateTime dateTime;
+  time_t time = osync_group_get_last_synchronization( mGroup );
+  if ( time != 0 )
+    dateTime.setTime_t( time );
+
+  return dateTime;
+}
+
+Group::LockType Group::lock()
+{
+  Q_ASSERT( mGroup );
+
+  OSyncLockState state = osync_group_lock( mGroup );
+  switch ( state ) {
+    default:
+    case OSYNC_LOCK_OK:
+      return LockOk;
+      break;
+    case OSYNC_LOCKED:
+      return Locked;
+      break;
+    case OSYNC_LOCK_STALE:
+      return LockStale;
+      break;
+  }
+}
+
+void Group::unlock( bool removeFile )
+{
+  Q_ASSERT( mGroup );
+
+  osync_group_unlock( mGroup, removeFile );
+}
+
+Member Group::addMember()
+{
+  Q_ASSERT( mGroup );
+
+  OSyncMember *omember = osync_member_new( mGroup );
+
+  Member member;
+  member.mMember = omember;
+
+  save();
+
+  return member;
+}
+
+void Group::removeMember( const Member &member )
+{
+  Q_ASSERT( mGroup );
+
+  osync_group_remove_member( mGroup, member.mMember );
+}
+
+int Group::memberCount() const
+{
+  Q_ASSERT( mGroup );
+
+  return osync_group_num_members( mGroup );
+}
+
+Member Group::memberAt( int pos ) const
+{
+  Q_ASSERT( mGroup );
+
+  Member member;
+
+  if ( pos < 0 || pos >= memberCount() )
+    return member;
+
+  member.mMember = osync_group_nth_member( mGroup, pos );
+
+  return member;
+}
+
+int Group::filterCount() const
+{
+  Q_ASSERT( mGroup );
+
+  return osync_group_num_filters( mGroup );
+}
+
+Filter Group::filterAt( int pos )
+{
+  Q_ASSERT( mGroup );
+
+  Filter filter;
+
+  if ( pos < 0 || pos >= filterCount() )
+    return filter;
+
+  filter.mFilter = osync_group_nth_filter( mGroup, pos );
+
+  return filter;
+}
+
+Result Group::save()
+{
+  Q_ASSERT( mGroup );
+
+  OSyncError *error = 0;
+  if ( !osync_group_save( mGroup, &error ) )
+    return Result( &error );
+  else
+    return Result();
+}
+
+void Group::setObjectTypeEnabled( const QString &objectType, bool enabled )
+{
+  Q_ASSERT( mGroup );
+
+  osync_group_set_objtype_enabled( mGroup, objectType.utf8(), enabled );
+}
+
+bool Group::isObjectTypeEnabled( const QString &objectType ) const
+{
+  return osync_group_objtype_enabled( mGroup, objectType.utf8() );
+}
+
+GroupConfig Group::config() const
+{
+  Q_ASSERT( mGroup );
+
+  GroupConfig config;
+  config.mGroup = mGroup;
+
+  return config;
+}
Index: kitchensync/libqopensync/syncmapping.h
===================================================================
--- kitchensync/libqopensync/syncmapping.h	(.../tags/KDE/3.5.6/kdepim)	(wersja 0)
+++ kitchensync/libqopensync/syncmapping.h	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -0,0 +1,59 @@
+/*
+    This file is part of libqopensync.
+
+    Copyright (c) 2005 Tobias Koenig <tokoe@kde.org>
+
+    This library is free software; you can redistribute it and/or
+    modify it under the terms of the GNU Library General Public
+    License as published by the Free Software Foundation; either
+    version 2 of the License, or (at your option) any later version.
+
+    This library is distributed in the hope that it will be useful,
+    but WITHOUT ANY WARRANTY; without even the implied warranty of
+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
+    Library General Public License for more details.
+
+    You should have received a copy of the GNU Library General Public License
+    along with this library; see the file COPYING.LIB.  If not, write to
+    the Free Software Foundation, Inc., 51 Franklin Street, Fifth Floor,
+    Boston, MA 02110-1301, USA.
+*/
+
+#ifndef QSYNC_SYNCMAPPING_H
+#define QSYNC_SYNCMAPPING_H
+
+#include <libqopensync/syncchange.h>
+
+class OSyncEngine;
+class OSyncMapping;
+
+namespace QSync {
+
+class SyncMapping
+{
+  friend class SyncMappingUpdate;
+
+  public:
+    SyncMapping();
+    SyncMapping( OSyncMapping*, OSyncEngine* );
+    ~SyncMapping();
+
+    bool isValid() const;
+
+    long long id() const;
+
+    void duplicate();
+    void solve( const SyncChange &change );
+    void ignore();
+
+    int changesCount() const;
+    SyncChange changeAt( int pos );
+
+  private:
+    OSyncEngine *mEngine;
+    OSyncMapping *mMapping;
+};
+
+}
+
+#endif

Zmiany atrybutów dla: kitchensync/libqopensync
___________________________________________________________________
Nazwa: svn:ignore
   + Makefile.in


Index: kitchensync/src/configgui.cpp
===================================================================
--- kitchensync/src/configgui.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 0)
+++ kitchensync/src/configgui.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -0,0 +1,120 @@
+/*
+    This file is part of KitchenSync.
+
+    Copyright (c) 2005 Cornelius Schumacher <schumacher@kde.org>
+
+    This program is free software; you can redistribute it and/or modify
+    it under the terms of the GNU General Public License as published by
+    the Free Software Foundation; either version 2 of the License, or
+    (at your option) any later version.
+
+    This program is distributed in the hope that it will be useful,
+    but WITHOUT ANY WARRANTY; without even the implied warranty of
+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
+    GNU General Public License for more details.
+
+    You should have received a copy of the GNU General Public License
+    along with this program; if not, write to the Free Software
+    Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301,
+    USA.
+*/
+
+#include "configgui.h"
+
+
+#include "configguiblank.h"
+#include "configguifile.h"
+#include "configguignokii.h"
+#include "configguigpe.h"
+#include "configguiirmc.h"
+#include "configguildap.h"
+#include "configguiopie.h"
+#include "configguipalm.h"
+#include "configguisyncmlhttp.h"
+#include "configguisyncmlobex.h"
+#include "configguigcalendar.h"
+
+#include "memberinfo.h"
+
+#include <kdialog.h>
+#include <klocale.h>
+#include <klineedit.h>
+
+#include <qlayout.h>
+#include <qlabel.h>
+#include <qtextedit.h>
+
+ConfigGui::ConfigGui( const QSync::Member &member, QWidget *parent )
+  : QWidget( parent ), mMember( member )
+{
+  mTopLayout = new QVBoxLayout( this );
+  mTopLayout->setSpacing( KDialog::spacingHint() );
+  mTopLayout->setMargin( KDialog::marginHint() );
+
+  QBoxLayout *nameLayout = new QHBoxLayout( mTopLayout );
+
+  QLabel *label = new QLabel( i18n("Name:"), this );
+  nameLayout->addWidget( label );
+
+  mNameEdit = new KLineEdit( this );
+  nameLayout->addWidget( mNameEdit );
+}
+
+void ConfigGui::setInstanceName( const QString &t )
+{
+  mNameEdit->setText( t );
+}
+
+QString ConfigGui::instanceName() const
+{
+  return mNameEdit->text();
+}
+
+ConfigGui *ConfigGui::Factory::create( const QSync::Member &member,
+  QWidget *parent )
+{
+  QString name = member.pluginName();
+  if ( name == "file-sync" ) {
+    return new ConfigGuiFile( member, parent );
+  } else if ( name == "palm-sync" ) {
+    return new ConfigGuiPalm( member, parent );
+  } else if ( name == "irmc-sync" ) {
+    return new ConfigGuiIRMC( member, parent );
+  } else if ( name == "syncml-obex-client" ) {
+    return new ConfigGuiSyncmlObex( member, parent );
+  } else if ( name == "syncml-http-server" ) {
+    return new ConfigGuiSyncmlHttp( member, parent );
+  } else if ( name == "opie-sync" ) {
+    return new ConfigGuiOpie( member, parent );
+  } else if ( name == "gnokii-sync" ) {
+    return new ConfigGuiGnokii( member, parent );
+  } else if ( name == "gpe-sync" ) {
+    return new ConfigGuiGpe( member, parent );
+  } else if ( name == "google-calendar" ) {
+    return new ConfigGuiGoogleCalendar( member, parent );
+  } else if ( name == "ldap-sync" ) {
+    return new ConfigGuiLdap( member, parent );
+  } else if ( name == "kdepim-sync" ) {
+    return new ConfigGuiBlank( member, parent ); 
+  } else {
+    return new ConfigGuiXml( member, parent );
+  }
+}
+
+
+ConfigGuiXml::ConfigGuiXml( const QSync::Member &member, QWidget *parent )
+  : ConfigGui( member, parent )
+{
+  mTextEdit = new QTextEdit( this );
+  topLayout()->addWidget( mTextEdit );  
+}
+
+void ConfigGuiXml::load( const QString &xml )
+{
+  mTextEdit->setText( xml );
+}
+
+QString ConfigGuiXml::save()
+{
+  return mTextEdit->text();
+}
Index: kitchensync/src/configguignokii.h
===================================================================
--- kitchensync/src/configguignokii.h	(.../tags/KDE/3.5.6/kdepim)	(wersja 0)
+++ kitchensync/src/configguignokii.h	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -0,0 +1,62 @@
+/*
+    This file is part of KitchenSync.
+
+    Copyright (c) 2006 David Förster <david@dfoerster.de>
+
+    This program is free software; you can redistribute it and/or modify
+    it under the terms of the GNU General Public License as published by
+    the Free Software Foundation; either version 2 of the License, or
+    (at your option) any later version.
+
+    This program is distributed in the hope that it will be useful,
+    but WITHOUT ANY WARRANTY; without even the implied warranty of
+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
+    GNU General Public License for more details.
+
+    You should have received a copy of the GNU General Public License
+    along with this program; if not, write to the Free Software
+    Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301,
+    USA.
+*/
+#ifndef CONFIGGUIGNOKII_H
+#define CONFIGGUIGNOKII_H
+
+#include "configgui.h"
+#include "connectionwidgets.h"
+
+#include <qvaluelist.h>
+#include <qpair.h>
+
+class QLabel;
+class QLineEdit;
+class QComboBox;
+
+class ConfigGuiGnokii : public ConfigGui
+{
+  Q_OBJECT
+
+  public:
+    ConfigGuiGnokii( const QSync::Member &, QWidget *parent );
+
+    void load( const QString &xml );
+    QString save();
+
+  private:
+    QComboBox *mConnection;
+    KComboBox *mPort;
+    QLabel    *mPortLabel;
+    KComboBox *mModel;
+
+    BluetoothWidget *mBluetooth;
+
+    typedef QPair<QString, QString> ConnectionType;
+    typedef QValueList<ConnectionType> ConnectionTypeList;
+    ConnectionTypeList mConnectionTypes;
+
+   protected slots:
+     void slotConnectionChanged( int nth );
+     void slotModelChanged();
+    
+};
+
+#endif

Zmiany atrybutów dla: kitchensync/src/configguignokii.h
___________________________________________________________________
Nazwa: svn:eol-style
   + native

Index: kitchensync/src/syncprocess.h
===================================================================
--- kitchensync/src/syncprocess.h	(.../tags/KDE/3.5.6/kdepim)	(wersja 0)
+++ kitchensync/src/syncprocess.h	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -0,0 +1,64 @@
+/*
+    This file is part of KitchenSync.
+
+    Copyright (c) 2005 Tobias Koenig <tokoe@kde.org>
+
+    This program is free software; you can redistribute it and/or modify
+    it under the terms of the GNU General Public License as published by
+    the Free Software Foundation; either version 2 of the License, or
+    (at your option) any later version.
+
+    This program is distributed in the hope that it will be useful,
+    but WITHOUT ANY WARRANTY; without even the implied warranty of
+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
+    GNU General Public License for more details.
+
+    You should have received a copy of the GNU General Public License
+    along with this program; if not, write to the Free Software
+    Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301, USA.
+*/
+
+#ifndef SYNCPROCESS_H
+#define SYNCPROCESS_H
+
+#include <qobject.h>
+
+#include <libqopensync/group.h>
+
+namespace QSync {
+class Engine;
+}
+
+class SyncProcess : public QObject
+{
+  Q_OBJECT
+
+  public:
+    SyncProcess( const QSync::Group &group );
+    ~SyncProcess();
+
+    QSync::Group group() const { return mGroup; }
+    QSync::Engine* engine() const { return mEngine; }
+
+    QString groupStatus() const;
+    QString memberStatus( const QSync::Member &member ) const;
+
+    QSync::Result addMember( const QSync::Plugin &plugin );
+
+    void reinitEngine();
+
+    /** apply object type filter hack **/
+    void applyObjectTypeFilter();
+
+  signals:
+    /**
+      This signal is emitted whenever the engine has changed ( reinitialized ).
+     */
+    void engineChanged( QSync::Engine *engine );
+
+  private:
+    QSync::Group mGroup;
+    QSync::Engine *mEngine;
+};
+
+#endif
Index: kitchensync/src/singleconflictdialog.cpp
===================================================================
--- kitchensync/src/singleconflictdialog.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 0)
+++ kitchensync/src/singleconflictdialog.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -0,0 +1,123 @@
+/*
+    This file is part of KitchenSync.
+
+    Copyright (c) 2005 Tobias Koenig <tokoe@kde.org>
+
+    This program is free software; you can redistribute it and/or modify
+    it under the terms of the GNU General Public License as published by
+    the Free Software Foundation; either version 2 of the License, or
+    (at your option) any later version.
+
+    This program is distributed in the hope that it will be useful,
+    but WITHOUT ANY WARRANTY; without even the implied warranty of
+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
+    GNU General Public License for more details.
+
+    You should have received a copy of the GNU General Public License
+    along with this program; if not, write to the Free Software
+    Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301, USA.
+*/
+
+#include <kdialog.h>
+#include <klocale.h>
+
+#include <qlabel.h>
+#include <qlayout.h>
+#include <qpushbutton.h>
+
+#include "addresseediffalgo.h"
+#include "genericdiffalgo.h"
+#include "htmldiffalgodisplay.h"
+#include "memberinfo.h"
+
+#include "singleconflictdialog.h"
+
+SingleConflictDialog::SingleConflictDialog( QSync::SyncMapping &mapping, QWidget *parent )
+  : ConflictDialog( mapping, parent ), mDiffAlgo( 0 )
+{
+  initGUI();
+
+  QString format = mapping.changeAt( 0 ).objectFormatName();
+  QSync::SyncChange leftChange = mapping.changeAt( 0 );
+  QSync::SyncChange rightChange = mapping.changeAt( 1 );
+
+  if ( format == "file" ) {
+    mDiffAlgo = new KSync::GenericDiffAlgo( leftChange.data(), rightChange.data() );
+  } else if ( format == "vcard" ) {
+  } else if ( format == "calendar" ) {
+  } else if ( format == "xml-contact" ) {
+    mDiffAlgo = new KSync::AddresseeDiffAlgo( leftChange.data(), rightChange.data() );
+  }
+
+  MemberInfo miLeft( leftChange.member() );
+  mDiffAlgoDisplay->setLeftSourceTitle( miLeft.name() );
+  MemberInfo miRight( rightChange.member() );
+  mDiffAlgoDisplay->setRightSourceTitle( miRight.name() );
+
+  if ( mDiffAlgo ) {
+    mDiffAlgo->addDisplay( mDiffAlgoDisplay );
+    mDiffAlgo->run();
+  }
+}
+
+SingleConflictDialog::~SingleConflictDialog()
+{
+  delete mDiffAlgo;
+  mDiffAlgo = 0;
+}
+
+void SingleConflictDialog::useFirstChange()
+{
+  mMapping.solve( mMapping.changeAt( 0 ) );
+
+  accept();
+}
+
+void SingleConflictDialog::useSecondChange()
+{
+  mMapping.solve( mMapping.changeAt( 1 ) );
+
+  accept();
+}
+
+void SingleConflictDialog::duplicateChange()
+{
+  mMapping.duplicate();
+
+  accept();
+}
+
+void SingleConflictDialog::ignoreChange()
+{
+  mMapping.ignore();
+
+  accept();
+}
+
+void SingleConflictDialog::initGUI()
+{
+  QGridLayout *layout = new QGridLayout( this, 3, 4, KDialog::marginHint(), KDialog::spacingHint() );
+
+  layout->addMultiCellWidget( new QLabel( i18n( "A conflict has appeared, please solve it manually." ), this ), 0, 0, 0, 3 );
+  mDiffAlgoDisplay = new KSync::HTMLDiffAlgoDisplay( this );
+
+  layout->addMultiCellWidget( mDiffAlgoDisplay, 1, 1, 0, 3 );
+
+  QPushButton *button = new QPushButton( i18n( "Use Item" ), this );
+  connect( button, SIGNAL( clicked() ), SLOT( useFirstChange() ) );
+  layout->addWidget( button, 2, 0 );
+
+  button = new QPushButton( i18n( "Duplicate Items" ), this );
+  connect( button, SIGNAL( clicked() ), SLOT( duplicateChange() ) );
+  layout->addWidget( button, 2, 1 );
+
+  button = new QPushButton( i18n( "Ignore Conflict" ), this );
+  connect( button, SIGNAL( clicked() ), SLOT( ignoreChange() ) );
+  layout->addWidget( button, 2, 2 );
+
+  button = new QPushButton( i18n( "Use Item" ), this );
+  connect( button, SIGNAL( clicked() ), SLOT( useSecondChange() ) );
+  layout->addWidget( button, 2, 3 );
+}
+
+#include "singleconflictdialog.moc"
Index: kitchensync/src/conflictdialog.h
===================================================================
--- kitchensync/src/conflictdialog.h	(.../tags/KDE/3.5.6/kdepim)	(wersja 0)
+++ kitchensync/src/conflictdialog.h	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -0,0 +1,40 @@
+/*
+    This file is part of KitchenSync.
+
+    Copyright (c) 2005 Tobias Koenig <tokoe@kde.org>
+
+    This program is free software; you can redistribute it and/or modify
+    it under the terms of the GNU General Public License as published by
+    the Free Software Foundation; either version 2 of the License, or
+    (at your option) any later version.
+
+    This program is distributed in the hope that it will be useful,
+    but WITHOUT ANY WARRANTY; without even the implied warranty of
+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
+    GNU General Public License for more details.
+
+    You should have received a copy of the GNU General Public License
+    along with this program; if not, write to the Free Software
+    Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301, USA.
+*/
+
+#ifndef CONFLICTDIALOG_H
+#define CONFLICTDIALOG_H
+
+#include <qdialog.h>
+
+#include <libqopensync/syncmapping.h>
+
+/**
+  Base class for SingleConflictDialog and MultiConflictDialog.
+ */
+class ConflictDialog : public QDialog
+{
+  public:
+    ConflictDialog( QSync::SyncMapping &mapping, QWidget *parent );
+
+  protected:
+    QSync::SyncMapping mMapping;
+};
+
+#endif
Index: kitchensync/src/groupview.cpp
===================================================================
--- kitchensync/src/groupview.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 0)
+++ kitchensync/src/groupview.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -0,0 +1,99 @@
+/*
+    This file is part of KitchenSync.
+
+    Copyright (c) 2005 Cornelius Schumacher <schumacher@kde.org>
+
+    This program is free software; you can redistribute it and/or modify
+    it under the terms of the GNU General Public License as published by
+    the Free Software Foundation; either version 2 of the License, or
+    (at your option) any later version.
+
+    This program is distributed in the hope that it will be useful,
+    but WITHOUT ANY WARRANTY; without even the implied warranty of
+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
+    GNU General Public License for more details.
+
+    You should have received a copy of the GNU General Public License
+    along with this program; if not, write to the Free Software
+    Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301, USA.
+*/
+
+#include <qlayout.h>
+
+#include "aboutpage.h"
+#include "groupitem.h"
+#include "syncprocessmanager.h"
+
+#include "groupview.h"
+
+GroupView::GroupView( QWidget *parent )
+  : QWidget( parent ), mAboutPage( 0 )
+{
+  mLayout = new QVBoxLayout( this );
+
+  mWidgetList = new KWidgetList( this );
+
+  mLayout->addWidget( mWidgetList );
+}
+
+SyncProcess* GroupView::selectedSyncProcess() const
+{
+  GroupItem *item = static_cast<GroupItem*>( mWidgetList->selectedItem() );
+  if ( item )
+    return item->syncProcess();
+  else
+    return 0;
+}
+
+void GroupView::clear()
+{
+  mWidgetList->clear();
+}
+
+void GroupView::updateView()
+{
+  clear();
+
+  if ( SyncProcessManager::self()->count() == 0 ) {
+    mWidgetList->hide();
+
+    if ( !mAboutPage ) {
+      mAboutPage = new AboutPage( this );
+      mLayout->addWidget( mAboutPage );
+
+      connect( mAboutPage, SIGNAL( addGroup() ), SIGNAL( addGroup() ) );
+    }
+
+    mAboutPage->show();
+
+  } else {
+    if ( mAboutPage )
+      mAboutPage->hide();
+    mWidgetList->show();
+  }
+
+  for ( int i = 0; i < SyncProcessManager::self()->count(); ++i ) {
+    SyncProcess *process = SyncProcessManager::self()->at( i );
+
+    GroupItem *item = new GroupItem( mWidgetList, process );
+    connect( item, SIGNAL( synchronizeGroup( SyncProcess* ) ),
+             SIGNAL( synchronizeGroup( SyncProcess* ) ) );
+    connect( item, SIGNAL( abortSynchronizeGroup( SyncProcess* ) ),
+             SIGNAL( abortSynchronizeGroup( SyncProcess* ) ) );
+    connect( item, SIGNAL( configureGroup( SyncProcess* ) ),
+             SIGNAL( configureGroup( SyncProcess* ) ) );
+
+    mWidgetList->appendItem( item );
+  }
+}
+
+void GroupView::updateSyncProcess( SyncProcess *syncProcess )
+{
+  for ( int i = 0; i < (int)mWidgetList->count(); ++i ) {
+    GroupItem *item = static_cast<GroupItem*>( mWidgetList->item( i ) );
+    if ( item && item->syncProcess() == syncProcess )
+      item->update();
+  }
+}
+
+#include "groupview.moc"
Index: kitchensync/src/configguiblank.h
===================================================================
--- kitchensync/src/configguiblank.h	(.../tags/KDE/3.5.6/kdepim)	(wersja 0)
+++ kitchensync/src/configguiblank.h	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -0,0 +1,35 @@
+/*
+    This file is part of KitchenSync.
+
+    Copyright (c) 2006 Daniel Gollub  <dgollub@suse.de>
+
+    This program is free software; you can redistribute it and/or modify
+    it under the terms of the GNU General Public License as published by
+    the Free Software Foundation; either version 2 of the License, or
+    (at your option) any later version.
+
+    This program is distributed in the hope that it will be useful,
+    but WITHOUT ANY WARRANTY; without even the implied warranty of
+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
+    GNU General Public License for more details.
+
+    You should have received a copy of the GNU General Public License
+    along with this program; if not, write to the Free Software
+    Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301,
+    USA.
+*/
+#ifndef CONFIGGUIBLANK_H
+#define CONFIGGUIBLANK_H
+
+#include "configgui.h"
+
+class ConfigGuiBlank : public ConfigGui
+{
+  public:
+    ConfigGuiBlank( const QSync::Member &member, QWidget *parent = 0 );
+
+    void load( const QString &xml );
+    QString save();
+};
+
+#endif
Index: kitchensync/src/configguipalm.h
===================================================================
--- kitchensync/src/configguipalm.h	(.../tags/KDE/3.5.6/kdepim)	(wersja 0)
+++ kitchensync/src/configguipalm.h	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -0,0 +1,59 @@
+/*
+    This file is part of KitchenSync.
+
+    Copyright (c) 2005 Tobias Koenig <tokoe@kde.org>
+
+    This program is free software; you can redistribute it and/or modify
+    it under the terms of the GNU General Public License as published by
+    the Free Software Foundation; either version 2 of the License, or
+    (at your option) any later version.
+
+    This program is distributed in the hope that it will be useful,
+    but WITHOUT ANY WARRANTY; without even the implied warranty of
+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
+    GNU General Public License for more details.
+
+    You should have received a copy of the GNU General Public License
+    along with this program; if not, write to the Free Software
+    Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301,
+    USA.
+*/
+
+#ifndef CONFIGGUIPALM_H
+#define CONFIGGUIPALM_H
+
+#include "configgui.h"
+
+class KComboBox;
+class KLineEdit;
+class QCheckBox;
+class QRadioButton;
+class QSpinBox;
+
+class ConfigGuiPalm : public ConfigGui
+{
+  public:
+    ConfigGuiPalm( const QSync::Member &, QWidget *parent );
+
+    void load( const QString &xml );
+    QString save();
+
+  private:
+    void initGUI();
+
+    KComboBox *mDevice;
+    KComboBox *mSpeed;
+    QSpinBox *mTimeout;
+
+    KLineEdit *mUserName;
+
+    QRadioButton *mSyncAlways;
+    QRadioButton *mSyncAsk;
+    QRadioButton *mSyncAbort;
+
+    QCheckBox *mPopup;
+    KComboBox *mVerbosity;
+    KComboBox *mCodePage;
+};
+
+#endif
Index: kitchensync/src/configguiirmc.h
===================================================================
--- kitchensync/src/configguiirmc.h	(.../tags/KDE/3.5.6/kdepim)	(wersja 0)
+++ kitchensync/src/configguiirmc.h	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -0,0 +1,61 @@
+/*
+    This file is part of KitchenSync.
+
+    Copyright (c) 2005 Tobias Koenig <tokoe@kde.org>
+
+    This program is free software; you can redistribute it and/or modify
+    it under the terms of the GNU General Public License as published by
+    the Free Software Foundation; either version 2 of the License, or
+    (at your option) any later version.
+
+    This program is distributed in the hope that it will be useful,
+    but WITHOUT ANY WARRANTY; without even the implied warranty of
+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
+    GNU General Public License for more details.
+
+    You should have received a copy of the GNU General Public License
+    along with this program; if not, write to the Free Software
+    Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301,
+    USA.
+*/
+
+#ifndef CONFIGGUIIRMC_H
+#define CONFIGGUIIRMC_H
+
+#include <qcheckbox.h>
+#include <qdom.h>
+
+#include "configgui.h"
+#include "connectionwidgets.h"
+
+class KComboBox;
+class KLineEdit;
+class QCheckBox;
+class QPushButton;
+class QSpinBox;
+
+class ConfigGuiIRMC : public ConfigGui
+{
+  Q_OBJECT
+
+  public:
+    ConfigGuiIRMC( const QSync::Member &, QWidget *parent );
+
+    void load( const QString &xml );
+    QString save();
+
+  protected slots:
+    void connectionTypeChanged( int type );
+
+  private:
+    void initGUI();
+
+    KComboBox *mConnectionType;
+    QCheckBox *mDontTellSync;
+
+    BluetoothWidget *mBluetoothWidget;
+    IRWidget *mIRWidget;
+    CableWidget *mCableWidget;
+};
+
+#endif
Index: kitchensync/src/configguisyncmlhttp.cpp
===================================================================
--- kitchensync/src/configguisyncmlhttp.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 0)
+++ kitchensync/src/configguisyncmlhttp.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -0,0 +1,227 @@
+/*
+    This file is part of KitchenSync.
+
+    Copyright (c) 2005 Cornelius Schumacher <schumacher@kde.org>
+
+    This program is free software; you can redistribute it and/or modify
+    it under the terms of the GNU General Public License as published by
+    the Free Software Foundation; either version 2 of the License, or
+    (at your option) any later version.
+
+    This program is distributed in the hope that it will be useful,
+    but WITHOUT ANY WARRANTY; without even the implied warranty of
+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
+    GNU General Public License for more details.
+
+    You should have received a copy of the GNU General Public License
+    along with this program; if not, write to the Free Software
+    Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301,
+    USA.
+*/
+
+#include "configguisyncmlhttp.h"
+
+#include <kcombobox.h>
+#include <kdialog.h>
+#include <klineedit.h>
+#include <klocale.h>
+#include <kurlrequester.h>
+
+#include <qcheckbox.h>
+#include <qdom.h>
+#include <qlabel.h>
+#include <qlayout.h>
+#include <qspinbox.h>
+#include <qtabwidget.h>
+#include <qvbox.h>
+
+ConfigGuiSyncmlHttp::ConfigGuiSyncmlHttp( const QSync::Member &member, QWidget *parent )
+  : ConfigGui( member, parent ), mUrl( 0 ), mPort( 0 )
+{
+
+  QTabWidget *tabWidget = new QTabWidget( this );
+  topLayout()->addWidget( tabWidget );
+
+  // Connection
+  QWidget *connectionWidget = new QWidget( tabWidget );
+  QVBoxLayout *connectionLayout = new QVBoxLayout( connectionWidget,
+                                                   KDialog::marginHint(), KDialog::spacingHint() );
+
+  tabWidget->addTab( connectionWidget, i18n( "Connection" ) );
+
+  mGridLayout = new QGridLayout( connectionLayout );
+
+  QLabel *label = new QLabel( i18n("Port:"), connectionWidget );
+  mGridLayout->addWidget( label, 0, 0 );
+
+  mPort = new QSpinBox( connectionWidget );
+  mPort->setMinValue( 1 );
+  mPort->setMaxValue( 65536 );
+  mGridLayout->addWidget( mPort, 0, 1 );
+
+  // Database
+  QWidget *databaseWidget = new QWidget( tabWidget );
+  QVBoxLayout *databaseLayout = new QVBoxLayout( databaseWidget,
+                                                 KDialog::marginHint(), KDialog::spacingHint() );
+
+  tabWidget->addTab( databaseWidget, i18n( "Databases" ) );
+
+  mGridLayout = new QGridLayout( databaseLayout );
+  addLineEdit( databaseWidget, i18n("Contact Database:"), &mContactDb, 0 );
+  addLineEdit( databaseWidget, i18n("Calendar Database:"), &mCalendarDb, 1 );
+  addLineEdit( databaseWidget, i18n("Note Database:"), &mNoteDb, 2 );
+
+  mContactDb->insertItem( "addressbook" );
+  mContactDb->insertItem( "contacts" );
+
+  mCalendarDb->insertItem( "agenda" );
+  mCalendarDb->insertItem( "calendar" );
+
+  mNoteDb->insertItem( "notes" );
+
+
+  // Options
+  QWidget *optionWidget = new QWidget( tabWidget );
+  QVBoxLayout *optionLayout = new QVBoxLayout( optionWidget,
+                                               KDialog::marginHint(), KDialog::spacingHint() );
+
+  tabWidget->addTab( optionWidget, i18n( "Options" ) );
+
+  mGridLayout = new QGridLayout( optionLayout );
+
+  label = new QLabel( i18n("User name:"), optionWidget );
+  mGridLayout->addWidget( label, 0, 0 );
+
+  mUsername = new KLineEdit( optionWidget );
+  mGridLayout->addWidget( mUsername, 0, 1 );
+
+  label = new QLabel( i18n("Password:"), optionWidget );
+  mGridLayout->addWidget( label, 1, 0 );
+
+  mPassword = new KLineEdit( optionWidget );
+  mPassword->setEchoMode( QLineEdit::Password );
+  mGridLayout->addWidget( mPassword, 1, 1 );
+
+
+  mUseStringTable = new QCheckBox( i18n("Use String Table"), optionWidget );
+  mGridLayout->addMultiCellWidget( mUseStringTable, 2, 2, 0, 1 );
+
+  mOnlyReplace = new QCheckBox( i18n("Only Replace Entries"), optionWidget );
+  mGridLayout->addMultiCellWidget( mOnlyReplace, 3, 3, 0, 1 );
+
+  // Url
+  label = new QLabel( i18n("URL:"), optionWidget );
+  mGridLayout->addWidget( label, 4, 0 );
+
+  mUrl = new KLineEdit( optionWidget );
+  mGridLayout->addWidget( mUrl, 4, 1 );
+
+  // recvLimit
+  label = new QLabel( i18n("Receive Limit:"), optionWidget );
+  mGridLayout->addWidget( label, 5, 0 );
+
+  mRecvLimit = new QSpinBox( optionWidget );
+  mRecvLimit->setMinValue( 1 );
+  mRecvLimit->setMaxValue( 65536 );
+  mGridLayout->addWidget( mRecvLimit, 5, 1 );
+
+  // maxObjSize 
+  label = new QLabel( i18n("Maximum Object Size"), optionWidget );
+  mGridLayout->addWidget( label, 6, 0 );
+
+  mMaxObjSize = new QSpinBox( optionWidget );
+  mMaxObjSize->setMinValue( 1 );
+  mMaxObjSize->setMaxValue( 65536 );
+  mGridLayout->addWidget( mMaxObjSize, 6, 1 );
+
+  topLayout()->addStretch( 1 );
+}
+
+void ConfigGuiSyncmlHttp::addLineEdit( QWidget *parent, const QString &text, KComboBox **edit, int row )
+{
+  QLabel *label = new QLabel( text, parent);
+  mGridLayout->addWidget( label, row, 0 );
+
+  *edit = new KComboBox( true, parent );
+  mGridLayout->addWidget( *edit, row, 1 );
+}
+
+void ConfigGuiSyncmlHttp::load( const QString &xml )
+{
+  QDomDocument document;
+  document.setContent( xml );
+
+  QDomElement docElement = document.documentElement();
+  QDomNode node;
+
+  for ( node = docElement.firstChild(); !node.isNull(); node = node.nextSibling() ) {
+    QDomElement element = node.toElement();
+    if ( element.tagName() == "username" ) {
+      mUsername->setText( element.text() );
+    } else if ( element.tagName() == "password" ) {
+      mPassword->setText( element.text() );
+    } else if ( element.tagName() == "url" ) {
+      if ( mUrl )
+        mUrl->setText( element.text() );
+    } else if ( element.tagName() == "port" ) {
+      if ( mPort )
+        mPort->setValue( element.text().toInt() );
+    } else if ( element.tagName() == "recvLimit" ) {
+      if ( mRecvLimit )
+        mRecvLimit->setValue( element.text().toInt() );
+    } else if ( element.tagName() == "maxObjSize" ) {
+      if ( mMaxObjSize )
+        mMaxObjSize->setValue( element.text().toInt() );
+    } else if ( element.tagName() == "usestringtable" ) {
+      mUseStringTable->setChecked( element.text() == "1" );
+    } else if ( element.tagName() == "onlyreplace" ) {
+      mOnlyReplace->setChecked( element.text() == "1" );
+    } else if ( element.tagName() == "contact_db" ) {
+      mContactDb->setCurrentText( element.text() );
+    } else if ( element.tagName() == "calendar_db" ) {
+      mCalendarDb->setCurrentText( element.text() );
+    } else if ( element.tagName() == "note_db" ) {
+      mNoteDb->setCurrentText( element.text() );
+    }
+  }
+}
+
+QString ConfigGuiSyncmlHttp::save()
+{
+  QString xml;
+  xml = "<config>\n";
+  xml += "<username>" + mUsername->text() + "</username>\n";
+  xml += "<password>" + mPassword->text() + "</password>\n";
+
+  xml += "<url>" + mUrl->text() + "</url>\n";
+  xml += "<port>" + QString::number( mPort->value() ) + "</port>\n";
+  // Receive Limit
+  xml += "<recvLimit>" + QString::number( mRecvLimit->value() ) + "</recvLimit>\n";
+
+  // Maximal Object Size
+  xml += "<maxObjSize>" + QString::number( mMaxObjSize->value() ) + "</maxObjSize>\n";
+
+  xml += "<usestringtable>";
+  if ( mUseStringTable->isChecked() )
+    xml += "1";
+  else
+    xml += "0";
+  xml += "</usestringtable>\n";
+
+  xml += "<onlyreplace>";
+  if ( mOnlyReplace->isChecked() )
+    xml += "1";
+  else
+    xml += "0";
+  xml += "</onlyreplace>\n";
+
+  xml += "<contact_db>" + mContactDb->currentText() + "</contact_db>\n";
+  xml += "<calendar_db>" + mCalendarDb->currentText() + "</calendar_db>\n";
+  xml += "<note_db>" + mNoteDb->currentText() + "</note_db>\n";
+  xml += "</config>";
+
+  return xml;
+}
+
+#include "configguisyncmlhttp.moc"
+
Index: kitchensync/src/multiconflictdialog.h
===================================================================
--- kitchensync/src/multiconflictdialog.h	(.../tags/KDE/3.5.6/kdepim)	(wersja 0)
+++ kitchensync/src/multiconflictdialog.h	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -0,0 +1,47 @@
+/*
+    This file is part of KitchenSync.
+
+    Copyright (c) 2005 Tobias Koenig <tokoe@kde.org>
+
+    This program is free software; you can redistribute it and/or modify
+    it under the terms of the GNU General Public License as published by
+    the Free Software Foundation; either version 2 of the License, or
+    (at your option) any later version.
+
+    This program is distributed in the hope that it will be useful,
+    but WITHOUT ANY WARRANTY; without even the implied warranty of
+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
+    GNU General Public License for more details.
+
+    You should have received a copy of the GNU General Public License
+    along with this program; if not, write to the Free Software
+    Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301, USA.
+*/
+
+#ifndef MULTICONFLICTDIALOG_H
+#define MULTICONFLICTDIALOG_H
+
+#include "conflictdialog.h"
+
+class KWidgetList;
+
+class MultiConflictDialog : public ConflictDialog
+{
+  Q_OBJECT
+
+  public:
+    MultiConflictDialog( QSync::SyncMapping &mapping, QWidget *parent );
+    ~MultiConflictDialog();
+
+  private slots:
+    void useSelectedChange();
+    void duplicateChange();
+    void ignoreChange();
+
+  private:
+    void initGUI();
+
+    KWidgetList *mWidgetList;
+};
+
+#endif
Index: kitchensync/src/pluginpicker.h
===================================================================
--- kitchensync/src/pluginpicker.h	(.../tags/KDE/3.5.6/kdepim)	(wersja 0)
+++ kitchensync/src/pluginpicker.h	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -0,0 +1,80 @@
+/*
+    This file is part of KitchenSync.
+
+    Copyright (c) 2005 Cornelius Schumacher <schumacher@kde.org>
+
+    This program is free software; you can redistribute it and/or modify
+    it under the terms of the GNU General Public License as published by
+    the Free Software Foundation; either version 2 of the License, or
+    (at your option) any later version.
+
+    This program is distributed in the hope that it will be useful,
+    but WITHOUT ANY WARRANTY; without even the implied warranty of
+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
+    GNU General Public License for more details.
+
+    You should have received a copy of the GNU General Public License
+    along with this program; if not, write to the Free Software
+    Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301,
+    USA.
+*/
+#ifndef PLUGINPICKER_H
+#define PLUGINPICKER_H
+
+#include <libqopensync/plugin.h>
+
+#include <kdialogbase.h>
+#include <kwidgetlist.h>
+
+#include <qwidget.h>
+
+class PluginItem : public KWidgetListItem
+{
+  public:
+   PluginItem( KWidgetList *, const QSync::Plugin & );
+
+   QSync::Plugin plugin() const { return mPlugin; }
+
+  private:
+    QSync::Plugin mPlugin;
+};
+
+class PluginPicker : public QWidget
+{
+  Q_OBJECT
+
+  public:
+    PluginPicker( QWidget *parent );
+
+    QSync::Plugin selectedPlugin() const;
+
+  signals:
+    void selected();
+
+  protected:
+    void updatePluginList();
+
+  private:
+    KWidgetList *mPluginList;
+};
+
+class PluginPickerDialog : public KDialogBase
+{
+  Q_OBJECT
+
+  public:
+    PluginPickerDialog( QWidget *parent );
+
+    QSync::Plugin selectedPlugin() const;
+
+    static QSync::Plugin getPlugin( QWidget *parent );
+
+  protected slots:
+    void slotOk();
+    void slotCancel();
+
+  private:
+    PluginPicker *mPicker;
+};
+
+#endif
Index: kitchensync/src/memberconfig.h
===================================================================
--- kitchensync/src/memberconfig.h	(.../tags/KDE/3.5.6/kdepim)	(wersja 0)
+++ kitchensync/src/memberconfig.h	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -0,0 +1,47 @@
+/*
+    This file is part of KitchenSync.
+
+    Copyright (c) 2005 Cornelius Schumacher <schumacher@kde.org>
+
+    This program is free software; you can redistribute it and/or modify
+    it under the terms of the GNU General Public License as published by
+    the Free Software Foundation; either version 2 of the License, or
+    (at your option) any later version.
+
+    This program is distributed in the hope that it will be useful,
+    but WITHOUT ANY WARRANTY; without even the implied warranty of
+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
+    GNU General Public License for more details.
+
+    You should have received a copy of the GNU General Public License
+    along with this program; if not, write to the Free Software
+    Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301, USA.
+*/
+#ifndef MEMBERCONFIG_H
+#define MEMBERCONFIG_H
+
+#include <libqopensync/member.h>
+
+#include <qwidget.h>
+
+class QTextEdit;
+class ConfigGui;
+
+class MemberConfig : public QWidget
+{
+  Q_OBJECT
+
+  public:
+    MemberConfig( QWidget *parent, const QSync::Member & );
+    ~MemberConfig();
+
+    void loadData();
+    void saveData();
+
+  private:
+    QSync::Member mMember;
+
+    ConfigGui *mGui;
+};
+
+#endif
Index: kitchensync/src/groupconfigdialog.cpp
===================================================================
--- kitchensync/src/groupconfigdialog.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 0)
+++ kitchensync/src/groupconfigdialog.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -0,0 +1,57 @@
+/*
+    This file is part of KitchenSync.
+
+    Copyright (c) 2005 Cornelius Schumacher <schumacher@kde.org>
+
+    This program is free software; you can redistribute it and/or modify
+    it under the terms of the GNU General Public License as published by
+    the Free Software Foundation; either version 2 of the License, or
+    (at your option) any later version.
+
+    This program is distributed in the hope that it will be useful,
+    but WITHOUT ANY WARRANTY; without even the implied warranty of
+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
+    GNU General Public License for more details.
+
+    You should have received a copy of the GNU General Public License
+    along with this program; if not, write to the Free Software
+    Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301, USA.
+*/
+
+#include "groupconfigdialog.h"
+
+#include "groupconfig.h"
+
+#include <klocale.h>
+
+#include <qlayout.h>
+
+GroupConfigDialog::GroupConfigDialog( QWidget *parent, SyncProcess *process )
+  : KDialogBase( parent, 0, true, i18n("Configure Synchronization Group"),
+     Ok )
+{
+  QFrame *topFrame = makeMainWidget();
+
+  QBoxLayout *topLayout = new QVBoxLayout( topFrame );
+
+  mConfigWidget = new GroupConfig( topFrame );
+  topLayout->addWidget( mConfigWidget );
+
+  mConfigWidget->setSyncProcess( process );
+
+  setInitialSize( configDialogSize( "size_groupconfigdialog" ) );
+}
+
+GroupConfigDialog::~GroupConfigDialog()
+{
+  saveDialogSize( "size_groupconfigdialog" );
+}
+
+void GroupConfigDialog::slotOk()
+{
+  mConfigWidget->saveConfig();
+
+  accept();
+}
+
+#include "groupconfigdialog.moc"
Index: kitchensync/src/configguigpe.cpp
===================================================================
--- kitchensync/src/configguigpe.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 0)
+++ kitchensync/src/configguigpe.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -0,0 +1,103 @@
+/*
+    This file is part of KitchenSync.
+
+    Copyright (c) 2007 Tobias Koenig <tokoe@kde.org>
+
+    This program is free software; you can redistribute it and/or modify
+    it under the terms of the GNU General Public License as published by
+    the Free Software Foundation; either version 2 of the License, or
+    (at your option) any later version.
+
+    This program is distributed in the hope that it will be useful,
+    but WITHOUT ANY WARRANTY; without even the implied warranty of
+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
+    GNU General Public License for more details.
+
+    You should have received a copy of the GNU General Public License
+    along with this program; if not, write to the Free Software
+    Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301,
+    USA.
+*/
+
+#include "configguigpe.h"
+
+#include <qcheckbox.h>
+#include <qdom.h>
+#include <qlabel.h>
+#include <qlayout.h>
+#include <qspinbox.h>
+
+#include <kcombobox.h>
+#include <kdialog.h>
+#include <klineedit.h>
+#include <klocale.h>
+
+ConfigGuiGpe::ConfigGuiGpe( const QSync::Member &member, QWidget *parent )
+  : ConfigGui( member, parent )
+{
+  initGUI();
+
+  mConnectionMode->insertItem( i18n( "Local" ) );
+  mConnectionMode->insertItem( i18n( "Ssh" ) );
+}
+
+void ConfigGuiGpe::load( const QString &xml )
+{
+  QDomDocument doc;
+  doc.setContent( xml );
+  QDomElement docElement = doc.documentElement();
+  QDomNode node;
+  for( node = docElement.firstChild(); !node.isNull(); node = node.nextSibling() ) {
+    QDomElement element = node.toElement();
+    if ( element.tagName() == "use_local" ) {
+      if ( element.text().toInt() == 1 )
+        mConnectionMode->setCurrentItem( 0 );
+      else
+        mConnectionMode->setCurrentItem( 1 );
+    } else if ( element.tagName() == "handheld_ip" ) {
+      mIP->setText( element.text() );
+    } else if ( element.tagName() == "handheld_port" ) {
+      mPort->setValue( element.text().toInt() );
+    } else if ( element.tagName() == "handheld_user" ) {
+      mUser->setText( element.text() );
+    }
+  }
+}
+
+QString ConfigGuiGpe::save()
+{
+  QString config = "<config>";
+
+  config += QString( "<use_local>%1</use_local>" ).arg( mConnectionMode->currentItem() == 0 );
+  config += QString( "<use_ssh>%1</use_ssh>" ).arg( mConnectionMode->currentItem() == 1 );
+  config += QString( "<handheld_ip>%1</handheld_ip>" ).arg( mIP->text() );
+  config += QString( "<handheld_port>%1</handheld_port>" ).arg( mPort->value() );
+  config += QString( "<handheld_user>%1</handheld_user>" ).arg( mUser->text() );
+
+  config += "</config>";
+
+  return config;
+}
+
+void ConfigGuiGpe::initGUI()
+{
+  QGridLayout *layout = new QGridLayout( topLayout(), 12, 4, KDialog::spacingHint() );
+  layout->setMargin( KDialog::marginHint() );
+
+  layout->addWidget( new QLabel( i18n( "Connection Mode:" ), this ), 0, 0 );
+  mConnectionMode = new KComboBox( this );
+  layout->addMultiCellWidget( mConnectionMode, 0, 0, 0, 3 );
+
+  layout->addWidget( new QLabel( i18n( "IP Address:" ), this ), 1, 0 );
+  mIP = new KLineEdit( this );
+  mIP->setInputMask( "000.000.000.000" );
+  layout->addWidget( mIP, 1, 1 );
+
+  layout->addWidget( new QLabel( i18n( "Port:" ), this ), 1, 2, Qt::AlignRight );
+  mPort = new QSpinBox( 1, 65536, 1, this );
+  layout->addWidget( mPort, 1, 3 );
+
+  layout->addWidget( new QLabel( i18n( "User:" ), this ), 2, 0 );
+  mUser = new KLineEdit( this );
+  layout->addMultiCellWidget( mUser, 2, 2, 1, 3 );
+}
Index: kitchensync/src/part.cpp
===================================================================
--- kitchensync/src/part.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 0)
+++ kitchensync/src/part.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -0,0 +1,89 @@
+/*
+    This file is part of KitchenSync.
+
+    Copyright (c) 2005 Tobias Koenig <tokoe@kde.org>
+
+    This program is free software; you can redistribute it and/or modify
+    it under the terms of the GNU General Public License as published by
+    the Free Software Foundation; either version 2 of the License, or
+    (at your option) any later version.
+
+    This program is distributed in the hope that it will be useful,
+    but WITHOUT ANY WARRANTY; without even the implied warranty of
+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
+    GNU General Public License for more details.
+
+    You should have received a copy of the GNU General Public License
+    along with this program; if not, write to the Free Software
+    Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301, USA.
+*/
+
+#include <qlayout.h>
+#include <qvbox.h>
+
+#include <kaction.h>
+#include <kapplication.h>
+#include <kdebug.h>
+#include <kiconloader.h>
+#include <kinstance.h>
+#include <klocale.h>
+#include <kparts/genericfactory.h>
+
+#include "mainwidget.h"
+
+#include "part.h"
+
+typedef KParts::GenericFactory< KitchenSyncPart > KitchenSyncFactory;
+K_EXPORT_COMPONENT_FACTORY( libkitchensyncpart, KitchenSyncFactory )
+
+KitchenSyncPart::KitchenSyncPart( QWidget *parentWidget, const char *widgetName,
+                                  QObject *parent, const char *name,
+                                  const QStringList& )
+  : KParts::ReadOnlyPart( parent, name )
+{
+  setInstance( KitchenSyncFactory::instance() );
+
+  QVBox *canvas = new QVBox( parentWidget, widgetName );
+  setWidget( canvas );
+
+  new MainWidget( this, canvas );
+
+  KGlobal::iconLoader()->addAppDir( "kitchensync" );
+
+  setXMLFile( "kitchensync_part.rc" );
+}
+
+KitchenSyncPart::~KitchenSyncPart()
+{
+  closeURL();
+}
+
+KAboutData *KitchenSyncPart::createAboutData()
+{
+  return MainWidget::aboutData();
+}
+
+void KitchenSyncPart::exit()
+{
+  delete this;
+}
+
+bool KitchenSyncPart::openURL( const KURL &url )
+{
+  emit setWindowCaption( url.prettyURL() );
+
+  return true;
+}
+
+bool KitchenSyncPart::openFile()
+{
+  return true;
+}
+
+void KitchenSyncPart::guiActivateEvent( KParts::GUIActivateEvent *e )
+{
+  KParts::ReadOnlyPart::guiActivateEvent( e );
+}
+
+#include "part.moc"
+
Index: kitchensync/src/syncprocessmanager.cpp
===================================================================
--- kitchensync/src/syncprocessmanager.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 0)
+++ kitchensync/src/syncprocessmanager.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -0,0 +1,172 @@
+/*
+    This file is part of KitchenSync.
+
+    Copyright (c) 2005 Cornelius Schumacher <schumacher@kde.org>
+
+    This program is free software; you can redistribute it and/or modify
+    it under the terms of the GNU General Public License as published by
+    the Free Software Foundation; either version 2 of the License, or
+    (at your option) any later version.
+
+    This program is distributed in the hope that it will be useful,
+    but WITHOUT ANY WARRANTY; without even the implied warranty of
+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
+    GNU General Public License for more details.
+
+    You should have received a copy of the GNU General Public License
+    along with this program; if not, write to the Free Software
+    Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301,
+    USA.
+*/
+
+#include "syncprocessmanager.h"
+
+#include "syncprocess.h"
+
+#include <libqopensync/environment.h>
+
+#include <kstaticdeleter.h>
+#include <kmessagebox.h>
+#include <klocale.h>
+
+static KStaticDeleter<SyncProcessManager> selfDeleter;
+
+SyncProcessManager *SyncProcessManager::mSelf = 0;
+
+SyncProcessManager *SyncProcessManager::self()
+{
+  if ( !mSelf ) {
+    selfDeleter.setObject( mSelf, new SyncProcessManager() );
+  }
+  return mSelf;
+}
+
+SyncProcessManager::SyncProcessManager()
+{
+  mEnvironment = new QSync::Environment;
+  QSync::Result result = mEnvironment->initialize();
+  if ( result.isError() ) {
+    KMessageBox::error( 0, i18n("Error initializing OpenSync.\n%1")
+      .arg( result.message() ) );
+  } else {
+    init( mEnvironment );
+  }
+}
+
+SyncProcessManager::~SyncProcessManager()
+{
+  QValueList<SyncProcess*>::Iterator it;
+  for ( it = mProcesses.begin(); it != mProcesses.end(); ++it )
+    delete *it;
+
+  mProcesses.clear();
+
+  mEnvironment->finalize();
+  delete mEnvironment;
+}
+
+int SyncProcessManager::count() const
+{
+  return mProcesses.count();
+}
+
+SyncProcess* SyncProcessManager::at( int pos ) const
+{
+  if ( pos < 0 || pos >= (int)mProcesses.count() )
+    return 0;
+
+  return mProcesses[ pos ];
+}
+
+SyncProcess* SyncProcessManager::byGroup( const QSync::Group &group )
+{
+  QValueList<SyncProcess*>::Iterator it;
+  for ( it = mProcesses.begin(); it != mProcesses.end(); ++it )
+    if ( (*it)->group() == group )
+      return *it;
+
+  return 0;
+}
+
+SyncProcess* SyncProcessManager::byGroupName( const QString &name )
+{
+  QValueList<SyncProcess*>::Iterator it;
+  for ( it = mProcesses.begin(); it != mProcesses.end(); ++it )
+    if ( (*it)->group().name() == name )
+      return *it;
+
+  return 0;
+}
+
+void SyncProcessManager::addGroup( const QString &name )
+{
+  SyncProcess* process = byGroupName( name );
+  if ( !process ) {
+    QSync::Group group = mEnvironment->addGroup();
+    group.setName( name );
+    group.save();
+
+    mProcesses.append( new SyncProcess( group ) );
+
+    emit changed();
+  } else
+    qDebug( "Try to add duplicate" );
+}
+
+void SyncProcessManager::remove( SyncProcess *syncProcess )
+{
+  if ( syncProcess ) {
+    mProcesses.remove( syncProcess );
+    const QSync::Group group = syncProcess->group();
+    delete syncProcess;
+
+    mEnvironment->removeGroup( group );
+
+    emit changed();
+  }
+}
+
+void SyncProcessManager::init( QSync::Environment *environment )
+{
+  QSync::Environment::GroupIterator it( environment->groupBegin() );
+  for ( ; it != environment->groupEnd(); ++it ) {
+    /**
+     * We check whether the group is valid before we append them
+     * to mProcesses. That avoids crashes if the plugin of one of
+     * the members isn't loaded (e.g. not installed).
+     */
+    const QSync::Group group = *it;
+    int count = group.memberCount();
+
+    bool isValid = true;
+    for ( int i = 0; i < count; ++i ) {
+      const QSync::Member member = group.memberAt( i );
+
+      if ( !member.isValid() ) {
+        isValid = false;
+        break;
+      }
+    }
+
+    if ( isValid )
+      mProcesses.append( new SyncProcess( *it ) );
+  }
+
+  emit changed();
+}
+
+QSync::Result SyncProcessManager::addMember( SyncProcess *process,
+                                             const QSync::Plugin &plugin )
+{
+  Q_ASSERT( process );
+
+  QSync::Result result = process->addMember( plugin );
+  if ( !result.isError() ) {
+    process->group().save();
+    emit syncProcessChanged( process );
+  }
+
+  return result;
+}
+
+#include "syncprocessmanager.moc"
Index: kitchensync/src/genericdiffalgo.cpp
===================================================================
--- kitchensync/src/genericdiffalgo.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 0)
+++ kitchensync/src/genericdiffalgo.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -0,0 +1,70 @@
+/*
+    This file is part of libkdepim.
+
+    Copyright (c) 2004 Tobias Koenig <tokoe@kde.org>
+
+    This library is free software; you can redistribute it and/or
+    modify it under the terms of the GNU Library General Public
+    License as published by the Free Software Foundation; either
+    version 2 of the License, or (at your option) any later version.
+
+    This library is distributed in the hope that it will be useful,
+    but WITHOUT ANY WARRANTY; without even the implied warranty of
+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
+    Library General Public License for more details.
+
+    You should have received a copy of the GNU Library General Public License
+    along with this library; see the file COPYING.LIB.  If not, write to
+    the Free Software Foundation, Inc., 51 Franklin Street, Fifth Floor,
+    Boston, MA 02110-1301, USA.
+*/
+
+#include <qstringlist.h>
+
+#include <klocale.h>
+
+#include "genericdiffalgo.h"
+
+using namespace KSync;
+
+#define MAX( a, b ) ( a > b ? a : b )
+
+#ifndef KDE_USE_FINAL
+// With --enable-final, we get the (identical) compareString from
+// addresseediffalgo.cpp
+static bool compareString( const QString &left, const QString &right )
+{
+  if ( left.isEmpty() && right.isEmpty() )
+    return true;
+  else
+    return left == right;
+}
+#endif
+
+GenericDiffAlgo::GenericDiffAlgo( const QString &leftData, const QString &rightData )
+  : mLeftData( leftData ), mRightData( rightData )
+{
+}
+
+void GenericDiffAlgo::run()
+{
+  begin();
+
+  QStringList leftList = QStringList::split( '\n', mLeftData, true );
+  QStringList rightList = QStringList::split( '\n', mRightData, true );
+
+  uint lines = MAX( leftList.count(), rightList.count() );
+  for ( uint i = 0; i < lines; ++i ) {
+    if ( i < leftList.count() && i < rightList.count() ) {
+      if ( !compareString( leftList[ i ], rightList[ i ] ) )
+        conflictField( i18n( "Line %1" ).arg( i ), leftList[ i ], rightList[ i ] );
+    } else if ( i < leftList.count() && i >= rightList.count() ) {
+      additionalLeftField( i18n( "Line %1" ).arg( i ), leftList[ i ] );
+    } else if ( i >= leftList.count() && i < rightList.count() ) {
+      additionalRightField( i18n( "Line %1" ).arg( i ), rightList[ i ] );
+    }
+  }
+
+  end();
+}
+
Index: kitchensync/src/configguifile.cpp
===================================================================
--- kitchensync/src/configguifile.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 0)
+++ kitchensync/src/configguifile.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -0,0 +1,81 @@
+/*
+    This file is part of KitchenSync.
+
+    Copyright (c) 2005 Cornelius Schumacher <schumacher@kde.org>
+
+    This program is free software; you can redistribute it and/or modify
+    it under the terms of the GNU General Public License as published by
+    the Free Software Foundation; either version 2 of the License, or
+    (at your option) any later version.
+
+    This program is distributed in the hope that it will be useful,
+    but WITHOUT ANY WARRANTY; without even the implied warranty of
+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
+    GNU General Public License for more details.
+
+    You should have received a copy of the GNU General Public License
+    along with this program; if not, write to the Free Software
+    Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301,
+    USA.
+*/
+
+#include "configguifile.h"
+
+#include <kurlrequester.h>
+#include <klocale.h>
+#include <kdialog.h>
+
+#include <qlayout.h>
+#include <qcheckbox.h>
+#include <qlabel.h>
+#include <qdom.h>
+
+ConfigGuiFile::ConfigGuiFile( const QSync::Member &member, QWidget *parent )
+  : ConfigGui( member, parent )
+{
+  QBoxLayout *filenameLayout = new QHBoxLayout( topLayout() );
+
+  QLabel *label = new QLabel( i18n("Directory name:"), this );
+  filenameLayout->addWidget( label );
+
+  mFilename = new KURLRequester( this );
+  mFilename->setMode( KFile::Directory | KFile::LocalOnly );
+  filenameLayout->addWidget( mFilename );
+
+  QBoxLayout *recursiveLayout = new QHBoxLayout( topLayout() );
+
+  mRecursive = new QCheckBox( i18n("Sync all subdirectories"), this );
+  recursiveLayout->addWidget( mRecursive );
+
+  topLayout()->addStretch( 1 );
+}
+
+void ConfigGuiFile::load( const QString &xml )
+{
+  QDomDocument doc;
+  doc.setContent( xml );
+  QDomElement docElement = doc.documentElement();
+  QDomNode n;
+  for( n = docElement.firstChild(); !n.isNull(); n = n.nextSibling() ) {
+    QDomElement e = n.toElement();
+    if ( e.tagName() == "path" ) {
+      mFilename->setURL( e.text() );
+    } else if ( e.tagName() == "recursive" ) {
+      mRecursive->setChecked( e.text() == "TRUE" );
+    }
+  }
+}
+
+QString ConfigGuiFile::save()
+{
+  QString xml;
+  xml = "<config>";
+  xml += "<path>" + mFilename->url() + "</path>";
+  xml += "<recursive>";
+  if ( mRecursive->isChecked() ) xml += "TRUE";
+  else xml += "FALSE";
+  xml += "</recursive>";
+  xml += "</config>";
+
+  return xml;
+}
Index: kitchensync/src/configguignokii.cpp
===================================================================
--- kitchensync/src/configguignokii.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 0)
+++ kitchensync/src/configguignokii.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -0,0 +1,223 @@
+/*
+    This file is part of KitchenSync.
+
+    Copyright (c) 2006 David Förster <david@dfoerster.de>
+
+    This program is free software; you can redistribute it and/or modify
+    it under the terms of the GNU General Public License as published by
+    the Free Software Foundation; either version 2 of the License, or
+    (at your option) any later version.
+
+    This program is distributed in the hope that it will be useful,
+    but WITHOUT ANY WARRANTY; without even the implied warranty of
+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
+    GNU General Public License for more details.
+
+    You should have received a copy of the GNU General Public License
+    along with this program; if not, write to the Free Software
+    Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301,
+    USA.
+*/
+
+#include "configguignokii.h"
+
+#include <klocale.h>
+#include <kdialog.h>
+#include <kcombobox.h>
+
+#include <kdebug.h>
+
+#include <qlayout.h>
+#include <qlabel.h>
+#include <qlineedit.h>
+#include <qcombobox.h>
+#include <qdom.h>
+#include <qvbox.h>
+
+ConfigGuiGnokii::ConfigGuiGnokii( const QSync::Member &member, QWidget *parent )
+  : ConfigGui( member, parent )
+{
+  QGridLayout *layout = new QGridLayout( topLayout() );
+
+  // Model
+  QLabel *label = new QLabel( i18n("Model:"), this );
+  layout->addWidget( label, 0, 0 );
+
+  mModel = new KComboBox( true, this );
+  layout->addWidget( mModel, 0, 1 );
+  mModel->insertItem( "2110" ); 
+  mModel->insertItem( "3110" ); 
+  mModel->insertItem( "6110" ); 
+  mModel->insertItem( "6110" ); 
+  mModel->insertItem( "6160" ); 
+  mModel->insertItem( "6230" );
+  mModel->insertItem( "6230i" );
+  mModel->insertItem( "6510" ); 
+  mModel->insertItem( "7110" );
+  mModel->insertItem( "AT" );
+  // This one requires the gnapplet and rfcomm_channel
+  mModel->insertItem( "3650" );
+  mModel->insertItem( "6600" );
+  mModel->insertItem( "gnapplet" );
+  mModel->insertItem( "symbian" );
+  mModel->insertItem( "sx1" );
+
+  connect( mModel, SIGNAL (activated( int ) ),
+    this, SLOT( slotModelChanged () ) );
+
+  // Connection
+  label = new QLabel( i18n("Connection:"), this );
+  layout->addWidget( label, 1, 0 );
+
+  mConnection = new QComboBox( this );
+  layout->addWidget( mConnection, 1, 1 );
+
+  connect( mConnection, SIGNAL (activated( int ) ),
+      	    this, SLOT( slotConnectionChanged ( int ) ) );
+
+  // this is a list of all connection types accepted by the gnokii-sync plugin
+  mConnectionTypes.append( ConnectionType( "bluetooth",  i18n( "Bluetooth" ) ) );
+  mConnectionTypes.append( ConnectionType( "irda", i18n( "IrDA" ) ) );
+  mConnectionTypes.append( ConnectionType( "serial", i18n( "Serial" ) ) );
+  mConnectionTypes.append( ConnectionType( "infrared", i18n( "Infrared" ) ) );
+  mConnectionTypes.append( ConnectionType( "tcp", i18n( "TCP" ) ) );
+  mConnectionTypes.append( ConnectionType( "dku2", i18n( "USB (nokia_dku2)" ) ) );
+  mConnectionTypes.append( ConnectionType( "dku2libusb", i18n( "USB (libusb)" ) ) );
+  mConnectionTypes.append( ConnectionType( "dau9p", i18n( "Serial (DAU9P cable)" ) ) );
+  mConnectionTypes.append( ConnectionType( "dlr3p", i18n( "Serial (DLR3P cable)" ) ) );
+  mConnectionTypes.append( ConnectionType( "tekram", i18n( "Tekram Ir-Dongle" ) ) );
+  mConnectionTypes.append( ConnectionType( "m2bus", i18n( "Serial (M2BUS protocol)" ) ) );
+
+  ConnectionTypeList::ConstIterator it;
+  for ( it = mConnectionTypes.begin(); it != mConnectionTypes.end(); it++ ) {
+    mConnection->insertItem( (*it).second );
+  }
+
+  QVBox *connectionWidget = new QVBox( this );
+  connectionWidget->setMargin( KDialog::marginHint() );
+  connectionWidget->setSpacing( 5 );
+
+  mBluetooth = new BluetoothWidget( connectionWidget ); 
+  mBluetooth->hide();
+
+  layout->addMultiCellWidget( connectionWidget, 2, 2, 0, 1 );
+
+  // Port
+  mPortLabel = new QLabel( i18n("Port:"), this );
+  layout->addWidget( mPortLabel, 2, 0 );
+  mPortLabel->hide();
+
+  mPort = new KComboBox( true, this );
+  layout->addWidget( mPort, 2, 1 );
+  mPort->hide();
+
+  mPort->insertItem( "/dev/ircomm0" );
+  mPort->insertItem( "/dev/ircomm1" );
+  mPort->insertItem( "/dev/ttyS0" );
+  mPort->insertItem( "/dev/ttyS1" );
+  mPort->insertItem( "/dev/ttyUSB0" );
+  mPort->insertItem( "/dev/ttyUSB1" );
+
+  layout->setColStretch( 1, 1 );
+
+  topLayout()->addStretch( 1 );
+}
+
+void ConfigGuiGnokii::slotConnectionChanged( int nth )
+{
+  mPort->hide();
+  mPortLabel->hide();
+  mBluetooth->hide();
+
+  // Bluetooth
+  if ( nth == 0 ) {
+    mBluetooth->show();
+    slotModelChanged();
+
+    if ( !mPort->currentText().isEmpty() )
+      mBluetooth->setAddress( mPort->currentText() );
+
+  // dku2libusb
+  } else if ( nth == 6 ) {
+    // No widget needed.
+  } else {
+    mPort->show();
+    mPortLabel->show();
+  }
+
+}
+
+void ConfigGuiGnokii::slotModelChanged()
+{
+  mBluetooth->hideChannel();
+
+  if ( mModel->currentText() == "gnapplet"
+    || mModel->currentText() == "symbian"
+    || mModel->currentText() == "3650"
+    || mModel->currentText() == "6600"
+    || mModel->currentText() == "sx1")
+    mBluetooth->showChannel();
+  else
+    mBluetooth->setChannel("");
+}
+
+void ConfigGuiGnokii::load( const QString &xml )
+{
+  QDomDocument doc;
+  doc.setContent( xml );
+  QDomElement docElement = doc.documentElement();
+  QDomNode n;
+  for( n = docElement.firstChild(); !n.isNull(); n = n.nextSibling() ) {
+    QDomElement e = n.toElement();
+    if ( e.tagName() == "connection" ) {
+      for ( uint i = 0; i < mConnectionTypes.count(); i++ ) {
+        if ( mConnectionTypes[i].first == e.text()) {
+          mConnection->setCurrentItem( i );
+          slotConnectionChanged( i );
+          break;
+        }
+      }
+    } else if ( e.tagName() == "port" ) {
+      mPort->setCurrentText( e.text() );
+    } else if ( e.tagName() == "model" ) {
+      mModel->setCurrentText( e.text() );
+    } else if ( e.tagName() == "rfcomm_channel" ) {
+      mBluetooth->setChannel( e.text() );
+      mBluetooth->showChannel();
+    }
+  }
+}
+
+QString ConfigGuiGnokii::save()
+{
+  QString xml;
+  xml = "<config>";
+
+  ConnectionTypeList::ConstIterator it;
+  for ( it = mConnectionTypes.begin(); it != mConnectionTypes.end(); it++ ) {
+    if ( mConnection->currentText() == (*it).second ) {
+      xml += "<connection>" + (*it).first + "</connection>";
+      break;
+    }
+  }
+
+  if ( (*it).first == "bluetooth" )
+    xml += "<port>" + mBluetooth->address() + "</port>";
+  else if ( (*it).first == "dku2libusb" )
+    xml += "<port>" + QString("FF:FF:FF:FF:FF:FF") + "</port>"; // Only place holder for libgnokii
+  else
+    xml += "<port>" + mPort->currentText() + "</port>";
+
+  // model
+  xml += "<model>" + mModel->currentText() + "</model>";
+
+  // rfcomm_channel
+  if ( !mBluetooth->channel().isNull() )
+    xml += "<rfcomm_channel>" + mBluetooth->channel() + "</rfcomm_channel>";
+
+  xml += "</config>";
+
+  return xml;
+}
+
+#include "configguignokii.moc"

Zmiany atrybutów dla: kitchensync/src/configguignokii.cpp
___________________________________________________________________
Nazwa: svn:eol-style
   + native

Index: kitchensync/src/syncprocess.cpp
===================================================================
--- kitchensync/src/syncprocess.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 0)
+++ kitchensync/src/syncprocess.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -0,0 +1,108 @@
+/*
+    This file is part of KitchenSync.
+
+    Copyright (c) 2005 Tobias Koenig <tokoe@kde.org>
+
+    This program is free software; you can redistribute it and/or modify
+    it under the terms of the GNU General Public License as published by
+    the Free Software Foundation; either version 2 of the License, or
+    (at your option) any later version.
+
+    This program is distributed in the hope that it will be useful,
+    but WITHOUT ANY WARRANTY; without even the implied warranty of
+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
+    GNU General Public License for more details.
+
+    You should have received a copy of the GNU General Public License
+    along with this program; if not, write to the Free Software
+    Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301, USA.
+*/
+
+#include <libqopensync/engine.h>
+#include <libqopensync/environment.h>
+
+#include <kdebug.h>
+#include <klocale.h>
+
+#include "syncprocess.h"
+#include "syncprocessmanager.h"
+
+using namespace QSync;
+
+SyncProcess::SyncProcess( const QSync::Group &group )
+  : QObject( 0, "SyncProcess" )
+{
+  mGroup = group;
+  mEngine = new QSync::Engine( mGroup );
+
+  Result result = mEngine->initialize();
+  if ( result.isError() )
+    kdDebug() << "SyncProcess::SyncProcess: " << result.message() << endl;
+}
+
+SyncProcess::~SyncProcess()
+{
+  mEngine->finalize();
+
+  delete mEngine;
+  mEngine = 0;
+}
+
+QString SyncProcess::groupStatus() const
+{
+  return i18n( "Ready" );
+}
+
+QString SyncProcess::memberStatus( const QSync::Member& ) const
+{
+  return i18n( "Ready" );
+}
+
+QSync::Result SyncProcess::addMember( const QSync::Plugin &plugin )
+{
+  QSync::Member member = mGroup.addMember();
+  QSync::Result result = member.instance( plugin );
+
+  if ( !result.isError() )
+    mGroup.save();
+
+  return result;
+}
+
+void SyncProcess::reinitEngine()
+{
+  mEngine->finalize();
+  delete mEngine;
+  mEngine = new QSync::Engine( mGroup );
+  Result result = mEngine->initialize();
+  if ( result.isError() )
+    kdDebug() << "SyncProcess::reinitEngine: " << result.message() << endl;
+
+  applyObjectTypeFilter();
+
+  emit engineChanged( mEngine );
+}
+
+void SyncProcess::applyObjectTypeFilter()
+{
+  const QSync::Conversion conversion = SyncProcessManager::self()->environment()->conversion();
+  const QStringList objectTypes = conversion.objectTypes();
+  const QStringList activeObjectTypes = mGroup.config().activeObjectTypes();
+
+  for ( uint i = 0; i < objectTypes.count(); ++i ) {
+    if ( activeObjectTypes.contains( objectTypes[ i ] ) ) {
+      kdDebug() << "Enabled object type: " <<  objectTypes[ i ] << endl;
+      /*
+       * This is not required. Also this lead to filtering problems when sync with "file-sync".
+       * Uncomment this line again when OpenSync is fixed!
+       *
+       * mGroup.setObjectTypeEnabled( objectTypes[ i ], true );
+       */
+    } else {
+      kdDebug() << "Disabled object type: " <<  objectTypes[ i ] << endl;
+      mGroup.setObjectTypeEnabled( objectTypes[ i ], false );
+    }
+  }
+}
+
+#include "syncprocess.moc"
Index: kitchensync/src/mainwindow.cpp
===================================================================
--- kitchensync/src/mainwindow.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 0)
+++ kitchensync/src/mainwindow.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -0,0 +1,61 @@
+/*
+    This file is part of KitchenSync.
+
+    Copyright (c) 2005 Tobias Koenig <tokoe@kde.org>
+
+    This program is free software; you can redistribute it and/or modify
+    it under the terms of the GNU General Public License as published by
+    the Free Software Foundation; either version 2 of the License, or
+    (at your option) any later version.
+
+    This program is distributed in the hope that it will be useful,
+    but WITHOUT ANY WARRANTY; without even the implied warranty of
+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
+    GNU General Public License for more details.
+
+    You should have received a copy of the GNU General Public License
+    along with this program; if not, write to the Free Software
+    Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301, USA.
+*/
+
+#include <kaction.h>
+#include <klocale.h>
+#include <kstdaction.h>
+#include <ktoolbar.h>
+
+#include "mainwidget.h"
+
+#include "mainwindow.h"
+
+MainWindow::MainWindow()
+  : KMainWindow( 0 )
+{
+  setWFlags( getWFlags() | WGroupLeader );
+
+  setCaption( i18n( "PIM Synchronization" ) );
+
+  mWidget = new MainWidget( this, this, "MainWidget" );
+
+  setCentralWidget( mWidget );
+
+  initActions();
+
+  createGUI( "kitchensyncui.rc", false );
+  createGUI( 0 );
+
+  toolBar()->setIconText( KToolBar::IconTextBottom );
+
+  resize( 760, 530 ); // initial size
+  setAutoSaveSettings();
+}
+
+MainWindow::~MainWindow()
+{
+}
+
+void MainWindow::initActions()
+{
+  KStdAction::quit( this, SLOT( close() ), actionCollection() );
+}
+
+#include "mainwindow.moc"
Index: kitchensync/src/configgui.h
===================================================================
--- kitchensync/src/configgui.h	(.../tags/KDE/3.5.6/kdepim)	(wersja 0)
+++ kitchensync/src/configgui.h	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -0,0 +1,72 @@
+/*
+    This file is part of KitchenSync.
+
+    Copyright (c) 2005 Cornelius Schumacher <schumacher@kde.org>
+
+    This program is free software; you can redistribute it and/or modify
+    it under the terms of the GNU General Public License as published by
+    the Free Software Foundation; either version 2 of the License, or
+    (at your option) any later version.
+
+    This program is distributed in the hope that it will be useful,
+    but WITHOUT ANY WARRANTY; without even the implied warranty of
+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
+    GNU General Public License for more details.
+
+    You should have received a copy of the GNU General Public License
+    along with this program; if not, write to the Free Software
+    Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301,
+    USA.
+*/
+#ifndef CONFIGGUI_H
+#define CONFIGGUI_H
+
+#include <libqopensync/member.h>
+
+#include <qwidget.h>
+
+class QBoxLayout;
+class KLineEdit;
+class QTextEdit;
+
+class ConfigGui : public QWidget
+{
+  public:
+    ConfigGui( const QSync::Member &, QWidget *parent );
+
+    class Factory
+    {
+      public:
+        static ConfigGui *create( const QSync::Member &, QWidget *parent );
+    };
+
+    void setInstanceName( const QString & );
+    QString instanceName() const;
+
+    virtual void load( const QString &xml ) = 0;
+    virtual QString save() = 0;
+
+    QSync::Member member() const { return mMember; }
+
+    QBoxLayout *topLayout() const { return mTopLayout; }
+
+  private:
+    QSync::Member mMember;
+
+    QBoxLayout *mTopLayout;
+    KLineEdit *mNameEdit;
+};
+
+class ConfigGuiXml : public ConfigGui
+{
+  public:
+    ConfigGuiXml( const QSync::Member &, QWidget *parent );
+
+    void load( const QString & );
+    QString save();
+
+  private:
+    QTextEdit *mTextEdit;
+};
+
+#endif
Index: kitchensync/src/configguigcalendar.h
===================================================================
--- kitchensync/src/configguigcalendar.h	(.../tags/KDE/3.5.6/kdepim)	(wersja 0)
+++ kitchensync/src/configguigcalendar.h	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -0,0 +1,43 @@
+/*
+    This file is part of KitchenSync.
+
+    Copyright (c) 2005 Cornelius Schumacher <schumacher@kde.org>
+    Copyright (c) 2006 Eduardo Habkost <ehabkost@raisama.net>
+
+    This program is free software; you can redistribute it and/or modify
+    it under the terms of the GNU General Public License as published by
+    the Free Software Foundation; either version 2 of the License, or
+    (at your option) any later version.
+
+    This program is distributed in the hope that it will be useful,
+    but WITHOUT ANY WARRANTY; without even the implied warranty of
+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
+    GNU General Public License for more details.
+
+    You should have received a copy of the GNU General Public License
+    along with this program; if not, write to the Free Software
+    Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301,
+    USA.
+*/
+#ifndef CONFIGGUIGCALENDAR_H
+#define CONFIGGUIGCALENDAR_H
+
+#include "configgui.h"
+
+class QLineEdit;
+
+class ConfigGuiGoogleCalendar : public ConfigGui
+{
+  public:
+    ConfigGuiGoogleCalendar( const QSync::Member &, QWidget *parent );
+
+    void load( const QString &xml );
+    QString save();
+
+  private:
+    QLineEdit *mUsername;
+    QLineEdit *mPassword;
+    QLineEdit *mUrl;
+};
+
+#endif

Zmiany atrybutów dla: kitchensync/src/configguigcalendar.h
___________________________________________________________________
Nazwa: svn:eol-style
   + native

Index: kitchensync/src/configguildap.h
===================================================================
--- kitchensync/src/configguildap.h	(.../tags/KDE/3.5.6/kdepim)	(wersja 0)
+++ kitchensync/src/configguildap.h	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -0,0 +1,74 @@
+/*
+    This file is part of KitchenSync.
+
+    Copyright (c) 2007 Tobias Koenig <tokoe@kde.org>
+
+    This program is free software; you can redistribute it and/or modify
+    it under the terms of the GNU General Public License as published by
+    the Free Software Foundation; either version 2 of the License, or
+    (at your option) any later version.
+
+    This program is distributed in the hope that it will be useful,
+    but WITHOUT ANY WARRANTY; without even the implied warranty of
+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
+    GNU General Public License for more details.
+
+    You should have received a copy of the GNU General Public License
+    along with this program; if not, write to the Free Software
+    Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301,
+    USA.
+*/
+
+#ifndef CONFIGGUILDAP_H
+#define CONFIGGUILDAP_H
+
+#include "configgui.h"
+
+class QCheckBox;
+class QLabel;
+class QSpinBox;
+
+class KComboBox;
+class KLineEdit;
+
+class ConfigGuiLdap : public ConfigGui
+{
+  Q_OBJECT
+
+  public:
+    ConfigGuiLdap( const QSync::Member &, QWidget *parent );
+
+    void load( const QString &xml );
+    QString save();
+
+  private slots:
+    void bindModeChanged( bool );
+
+  private:
+    void initGUI();
+
+    KLineEdit *mServerName;
+    QSpinBox *mPort;
+
+    QLabel *mBindLabel;
+    QLabel *mPasswordLabel;
+    KLineEdit *mBindDn;
+    KLineEdit *mPassword;
+    QCheckBox *mAnonymousBind;
+
+    KLineEdit *mSearchBase;
+    KLineEdit *mSearchFilter;
+    KLineEdit *mStoreBase;
+
+    KLineEdit *mKeyAttribute;
+
+    KComboBox *mSearchScope;
+    KComboBox *mAuthMech;
+
+    QCheckBox *mEncryption;
+
+    QCheckBox *mReadLdap;
+    QCheckBox *mWriteLdap;
+};
+
+#endif
Index: kitchensync/src/conflictdialog.cpp
===================================================================
--- kitchensync/src/conflictdialog.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 0)
+++ kitchensync/src/conflictdialog.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -0,0 +1,26 @@
+/*
+    This file is part of KitchenSync.
+
+    Copyright (c) 2005 Tobias Koenig <tokoe@kde.org>
+
+    This program is free software; you can redistribute it and/or modify
+    it under the terms of the GNU General Public License as published by
+    the Free Software Foundation; either version 2 of the License, or
+    (at your option) any later version.
+
+    This program is distributed in the hope that it will be useful,
+    but WITHOUT ANY WARRANTY; without even the implied warranty of
+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
+    GNU General Public License for more details.
+
+    You should have received a copy of the GNU General Public License
+    along with this program; if not, write to the Free Software
+    Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301, USA.
+*/
+
+#include "conflictdialog.h"
+
+ConflictDialog::ConflictDialog( QSync::SyncMapping &mapping, QWidget *parent )
+  : QDialog( parent ), mMapping( mapping )
+{
+}
Index: kitchensync/src/groupconfig.cpp
===================================================================
--- kitchensync/src/groupconfig.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 0)
+++ kitchensync/src/groupconfig.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -0,0 +1,179 @@
+/*
+    This file is part of KitchenSync.
+
+    Copyright (c) 2005 Cornelius Schumacher <schumacher@kde.org>
+
+    This program is free software; you can redistribute it and/or modify
+    it under the terms of the GNU General Public License as published by
+    the Free Software Foundation; either version 2 of the License, or
+    (at your option) any later version.
+
+    This program is distributed in the hope that it will be useful,
+    but WITHOUT ANY WARRANTY; without even the implied warranty of
+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
+    GNU General Public License for more details.
+
+    You should have received a copy of the GNU General Public License
+    along with this program; if not, write to the Free Software
+    Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301, USA.
+*/
+
+#include "groupconfig.h"
+
+#include "groupconfigcommon.h"
+#include "memberconfig.h"
+#include "memberinfo.h"
+#include "pluginpicker.h"
+#include "syncprocess.h"
+#include "syncprocessmanager.h"
+
+#include <libqopensync/group.h>
+#include <libqopensync/plugin.h>
+
+#include <kdialog.h>
+#include <kiconloader.h>
+#include <kjanuswidget.h>
+#include <klocale.h>
+#include <kmessagebox.h>
+
+
+#include <qlabel.h>
+#include <qlayout.h>
+#include <qpushbutton.h>
+
+GroupConfig::GroupConfig( QWidget *parent )
+  : QWidget( parent )
+{
+  QBoxLayout *topLayout = new QVBoxLayout( this );
+  topLayout->setSpacing( KDialog::spacingHint() );
+
+  QFrame *titleFrame = new QFrame( this );
+  topLayout->addWidget( titleFrame );
+
+  titleFrame->setPaletteForegroundColor( colorGroup().light() );
+  titleFrame->setPaletteBackgroundColor( colorGroup().mid() );
+
+  QBoxLayout *nameLayout = new QHBoxLayout( titleFrame );
+  nameLayout->setMargin( 4 );
+
+  QPixmap icon = KGlobal::iconLoader()->loadIcon( "kontact_summary",
+    KIcon::Desktop );
+
+  QLabel *iconLabel = new QLabel( titleFrame );
+  iconLabel->setPixmap( icon );
+  nameLayout->addWidget( iconLabel );
+
+  nameLayout->addSpacing( 8 );
+
+  QLabel *label = new QLabel( i18n("Group:"), titleFrame );
+  QFont font = label->font();
+  font.setBold( true );
+  font.setPointSize( font.pointSize() + 2 );
+  label->setFont( font );
+  nameLayout->addWidget( label );
+
+  mNameLabel = new QLabel( titleFrame );
+  font = mNameLabel->font();
+  font.setBold( true );
+  font.setPointSize( font.pointSize() + 2 );
+  mNameLabel->setFont( font );
+  nameLayout->addWidget( mNameLabel );
+
+  nameLayout->addStretch( 1 );
+
+  mMemberView = new KJanusWidget( this, 0, KJanusWidget::IconList );
+  topLayout->addWidget( mMemberView );
+
+  QBoxLayout *buttonLayout = new QHBoxLayout( topLayout );
+
+  QPushButton *addButton = new QPushButton( i18n("Add Member..."), this );
+  connect( addButton, SIGNAL( clicked() ), SLOT( addMember() ) );
+  buttonLayout->addWidget( addButton );
+
+  buttonLayout->addStretch( 1 );
+
+  icon = KGlobal::iconLoader()->loadIcon( "bookmark", KIcon::Desktop );
+  QFrame *page = mMemberView->addPage( i18n("Group"),
+    i18n("General Group Settings"), icon );
+  QBoxLayout *pageLayout = new QVBoxLayout( page );
+
+  mCommonConfig = new GroupConfigCommon( page );
+  pageLayout->addWidget( mCommonConfig );
+}
+
+void GroupConfig::setSyncProcess( SyncProcess *process )
+{
+  mProcess = process;
+
+  mNameLabel->setText( mProcess->group().name() );
+  mCommonConfig->setSyncProcess( mProcess );
+
+  updateMembers();
+}
+
+void GroupConfig::updateMembers()
+{
+  QValueList<MemberConfig *>::ConstIterator memberIt;
+  for ( memberIt = mMemberConfigs.begin(); memberIt != mMemberConfigs.end(); ++memberIt )
+    (*memberIt)->saveData();
+
+  QValueList<QFrame *>::ConstIterator it2;
+  for ( it2 = mConfigPages.begin(); it2 != mConfigPages.end(); ++it2 ) {
+    mMemberView->removePage( *it2 );
+    delete *it2;
+  }
+  mConfigPages.clear();
+  mMemberConfigs.clear();
+
+  QSync::Group group = mProcess->group();
+  QSync::Group::Iterator it( group.begin() );
+  for ( ; it != group.end(); ++it ) {
+    QSync::Member member = *it;
+    MemberInfo mi( member );
+    QFrame *page = mMemberView->addPage( mi.name(), 
+      QString( "%1 (%2)" ).arg( mi.name() ).arg(member.pluginName()), mi.desktopIcon() );
+
+    QBoxLayout *pageLayout = new QVBoxLayout( page );
+    mConfigPages.append( page );
+
+    MemberConfig *memberConfig = new MemberConfig( page, member );
+    mMemberConfigs.append( memberConfig );
+    pageLayout->addWidget( memberConfig );
+
+    memberConfig->loadData();
+  }
+}
+
+void GroupConfig::saveConfig()
+{
+  mProcess->group().save();
+
+  QValueList<MemberConfig *>::ConstIterator it;
+  for ( it = mMemberConfigs.begin(); it != mMemberConfigs.end(); ++it )
+    (*it)->saveData();
+
+  mCommonConfig->save();
+
+  mProcess->reinitEngine();
+}
+
+void GroupConfig::addMember()
+{
+  QSync::Plugin plugin = PluginPickerDialog::getPlugin( this );
+
+  if ( plugin.isValid() ) {
+    QSync::Result result = SyncProcessManager::self()->addMember( mProcess, plugin );
+    if ( result.isError() ) {
+      KMessageBox::error( this, i18n("Error adding member %1\n%2\nType: %3")
+        .arg( plugin.name() ).arg( result.message() ).arg( result.type() ) );
+    } else {
+      updateMembers();
+
+      // select last (added) page
+      int index = mMemberView->pageIndex( mConfigPages.last() );
+      mMemberView->showPage( index );
+    }
+  }
+}
+
+#include "groupconfig.moc"
Index: kitchensync/src/configguiirmc.cpp
===================================================================
--- kitchensync/src/configguiirmc.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 0)
+++ kitchensync/src/configguiirmc.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -0,0 +1,192 @@
+/*
+    This file is part of KitchenSync.
+
+    Copyright (c) 2005 Tobias Koenig <tokoe@kde.org>
+
+    This program is free software; you can redistribute it and/or modify
+    it under the terms of the GNU General Public License as published by
+    the Free Software Foundation; either version 2 of the License, or
+    (at your option) any later version.
+
+    This program is distributed in the hope that it will be useful,
+    but WITHOUT ANY WARRANTY; without even the implied warranty of
+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
+    GNU General Public License for more details.
+
+    You should have received a copy of the GNU General Public License
+    along with this program; if not, write to the Free Software
+    Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301,
+    USA.
+*/
+
+#include <kcombobox.h>
+#include <kdialog.h>
+#include <kglobal.h>
+#include <kiconloader.h>
+#include <kinputdialog.h>
+#include <klineedit.h>
+#include <klocale.h>
+#include <kmessagebox.h>
+
+#include <kdebug.h>
+
+#include <qapplication.h>
+#include <qeventloop.h>
+#include <qlabel.h>
+#include <qlayout.h>
+#include <qpushbutton.h>
+#include <qspinbox.h>
+#include <qtabwidget.h>
+#include <qtooltip.h>
+#include <qvbox.h>
+
+#include "configguiirmc.h"
+
+ConfigGuiIRMC::ConfigGuiIRMC( const QSync::Member &member, QWidget *parent )
+  : ConfigGui( member, parent )
+{
+  initGUI();
+
+  mConnectionType->insertItem( i18n( "Bluetooth" ) );
+  mConnectionType->insertItem( i18n( "InfraRed (IR)" ) );
+  mConnectionType->insertItem( i18n( "Cable" ) );
+
+  connect( mConnectionType, SIGNAL( activated( int ) ),
+           this, SLOT( connectionTypeChanged( int ) ) );
+
+  connectionTypeChanged( 0 );
+}
+
+void ConfigGuiIRMC::load( const QString &xml )
+{
+  QDomDocument doc;
+  doc.setContent( xml );
+  QDomElement docElement = doc.documentElement();
+  QDomNode node;
+  for ( node = docElement.firstChild(); !node.isNull(); node = node.nextSibling() ) {
+    QDomElement element = node.toElement();
+    if ( element.tagName() == "connectmedium" ) {
+      if ( element.text() == "bluetooth" ) {
+        mConnectionType->setCurrentItem( 0 );
+        connectionTypeChanged( 0 );
+      } else if ( element.text() == "ir" ) {
+        mConnectionType->setCurrentItem( 1 );
+        connectionTypeChanged( 1 );
+      } else if ( element.text() == "cable" ) {
+        mConnectionType->setCurrentItem( 2 );
+        connectionTypeChanged( 2 );
+      }
+    } else if (element.tagName() == "btunit" ) {
+      mBluetoothWidget->setAddress( element.text() );
+    } else if (element.tagName() == "btchannel" ) {
+      mBluetoothWidget->setChannel( element.text() );
+    } else if (element.tagName() == "donttellsync" ) {
+      mDontTellSync->setChecked( element.text() == "true" );
+    }
+
+
+  }
+
+  mIRWidget->load( docElement );
+  mCableWidget->load( docElement );
+}
+
+QString ConfigGuiIRMC::save()
+{
+  QDomDocument doc;
+  QDomElement config = doc.createElement( "config" );
+  doc.appendChild( config );
+
+  QDomElement element = doc.createElement( "connectmedium" );
+  if ( mConnectionType->currentItem() == 0 )
+    element.appendChild( doc.createTextNode( "bluetooth" ) );
+  if ( mConnectionType->currentItem() == 1 )
+    element.appendChild( doc.createTextNode( "ir" ) );
+  if ( mConnectionType->currentItem() == 2 )
+    element.appendChild( doc.createTextNode( "cable" ) );
+
+  config.appendChild( element );
+
+  if ( mConnectionType->currentItem() == 0 ) {
+    QDomElement btunit = doc.createElement( "btunit" );
+    if ( !mBluetoothWidget->address().isEmpty() )
+      btunit.appendChild( doc.createTextNode( mBluetoothWidget->address() ) );
+
+    QDomElement btchannel = doc.createElement( "btchannel" );
+    if ( !mBluetoothWidget->channel().isEmpty() )
+      btchannel.appendChild( doc.createTextNode( mBluetoothWidget->channel() ) );
+
+    config.appendChild( btunit );
+    config.appendChild( btchannel );
+  }
+
+  if ( mDontTellSync->isChecked() ) {
+    QDomElement dontellsync = doc.createElement( "donttellsync" );
+    dontellsync.appendChild( doc.createTextNode( "true" ) );
+    config.appendChild( dontellsync );
+  }
+
+  mIRWidget->save( doc, config );
+  mCableWidget->save( doc, config );
+
+  return doc.toString();
+}
+
+void ConfigGuiIRMC::connectionTypeChanged( int type )
+{
+  mBluetoothWidget->hide();
+  mIRWidget->hide();
+  mCableWidget->hide();
+
+  if ( type == 0 )
+    mBluetoothWidget->show();
+  else if ( type == 1 )
+    mIRWidget->show();
+  else
+    mCableWidget->show();
+}
+
+void ConfigGuiIRMC::initGUI()
+{
+  QTabWidget *tabWidget = new QTabWidget( this );
+  topLayout()->addWidget( tabWidget );
+
+  QVBox *connectionWidget = new QVBox( tabWidget );
+  connectionWidget->setMargin( KDialog::marginHint() );
+  connectionWidget->setSpacing( 5 );
+
+  tabWidget->addTab( connectionWidget, i18n( "Connection" ) );
+
+  mConnectionType = new KComboBox( connectionWidget );
+  QToolTip::add( mConnectionType, i18n( "Select your connection type." ) );
+
+  mBluetoothWidget = new BluetoothWidget( connectionWidget );
+  mBluetoothWidget->hide();
+
+  mIRWidget = new IRWidget( connectionWidget );
+  mIRWidget->hide();
+
+  mCableWidget = new CableWidget( connectionWidget );
+  mCableWidget->hide();
+
+  connectionWidget->setStretchFactor( mBluetoothWidget, 1 );
+  connectionWidget->setStretchFactor( mIRWidget, 1 );
+  connectionWidget->setStretchFactor( mCableWidget, 1 );
+
+  QVBox *optionsWidget = new QVBox( tabWidget );
+  optionsWidget->setMargin( KDialog::marginHint() );
+  optionsWidget->setSpacing( 5 );
+
+  tabWidget->addTab( optionsWidget, i18n( "Options" ) );
+
+  QHBox *optionBox = new QHBox( optionsWidget );
+  optionBox->setSpacing( KDialog::spacingHint() );
+
+  QLabel *label = new QLabel( i18n( "Don't send OBEX UUID (IRMC-SYNC)" ), optionBox );
+  mDontTellSync = new QCheckBox( optionBox );
+  QToolTip::add( mDontTellSync, i18n( "Don't send OBEX UUID while connecting. Needed for older IrMC based mobile phones." ) );
+  label->setBuddy( mDontTellSync );
+
+}
+
+#include "configguiirmc.moc"
Index: kitchensync/src/connectionwidgets.cpp
===================================================================
--- kitchensync/src/connectionwidgets.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 0)
+++ kitchensync/src/connectionwidgets.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -0,0 +1,227 @@
+/*
+    This file is part of KitchenSync.
+
+    Copyright (c) 2005 Tobias Koenig <tokoe@kde.org>
+    Copyright (c) 2006 Daniel Gollub <dgollub@suse.de>
+
+    This program is free software; you can redistribute it and/or modify
+    it under the terms of the GNU General Public License as published by
+    the Free Software Foundation; either version 2 of the License, or
+    (at your option) any later version.
+
+    This program is distributed in the hope that it will be useful,
+    but WITHOUT ANY WARRANTY; without even the implied warranty of
+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
+    GNU General Public License for more details.
+
+    You should have received a copy of the GNU General Public License
+    along with this program; if not, write to the Free Software
+    Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301, USA.
+*/
+
+#include <kcombobox.h>
+#include <kdialog.h>
+#include <kglobal.h>
+#include <kiconloader.h>
+#include <kinputdialog.h>
+#include <klineedit.h>
+#include <klocale.h>
+#include <kmessagebox.h>
+
+#include <qapplication.h>
+#include <qeventloop.h>
+#include <qlabel.h>
+#include <qlayout.h>
+#include <qpushbutton.h>
+#include <qspinbox.h>
+#include <qtabwidget.h>
+#include <qtooltip.h>
+#include <qvbox.h>
+
+#include "connectionwidgets.h"
+
+BluetoothWidget::BluetoothWidget( QWidget *parent )
+  : QWidget( parent )
+{
+  QGridLayout *layout = new QGridLayout( this );
+
+  mAddress = new KLineEdit( this );
+  mAddress->setInputMask( ">NN:NN:NN:NN:NN:NN;" );
+  layout->addWidget( mAddress, 1, 0 );
+
+  QLabel *label = new QLabel( i18n( "Bluetooth address:" ), this );
+  label->setBuddy( mAddress );
+  layout->addWidget( label, 0, 0 );
+
+  mChannel = new KLineEdit( this );
+  layout->addWidget( mChannel, 1, 1 );
+
+  mChannelLabel = new QLabel( i18n( "Channel:" ), this );
+  mChannelLabel->setBuddy( mChannel );
+  layout->addWidget( mChannelLabel, 0, 1 );
+
+  layout->setRowStretch( 2, 1 );
+}
+
+void BluetoothWidget::hideChannel()
+{
+  mChannelLabel->hide();
+  mChannel->hide();
+}
+
+void BluetoothWidget::showChannel()
+{
+  mChannelLabel->show();
+  mChannel->show();
+}
+
+void BluetoothWidget::setAddress( const QString address )
+{
+  mAddress->setText( address );
+}
+
+void BluetoothWidget::setChannel( const QString channel )
+{
+  if ( mChannel )
+    mChannel->setText( channel );
+}
+
+QString BluetoothWidget::address() const
+{
+  return mAddress->text();
+}
+
+QString BluetoothWidget::channel() const
+{
+  if ( mChannel->text().isEmpty() )
+    return QString();
+
+  return mChannel->text();
+}
+
+// FIXME - Only IrMC specific
+IRWidget::IRWidget( QWidget *parent )
+  : QWidget( parent )
+{
+  QGridLayout *layout = new QGridLayout( this, 3, 3, 11, 3 );
+
+  mDevice = new KLineEdit( this );
+  mSerialNumber = new KLineEdit( this );
+
+  layout->addWidget( mDevice, 1, 0 );
+  layout->addWidget( mSerialNumber, 1, 1 );
+
+  QLabel *label = new QLabel( i18n( "Device Name:" ), this );
+  label->setBuddy( mDevice );
+  layout->addWidget( label, 0, 0 );
+
+  label = new QLabel( i18n( "Serial Number:" ), this );
+  label->setBuddy( mSerialNumber );
+  layout->addWidget( label, 0, 1 );
+
+  layout->setRowStretch( 2, 1 );
+}
+
+void IRWidget::load( const QDomElement &parent )
+{
+  QDomNode node;
+  for ( node = parent.firstChild(); !node.isNull(); node = node.nextSibling() ) {
+    QDomElement element = node.toElement();
+    if ( element.tagName() == "irname" )
+      mDevice->setText( element.text() );
+    else if ( element.tagName() == "irserial" )
+      mSerialNumber->setText( element.text() );
+  }
+}
+
+void IRWidget::save( QDomDocument &doc, QDomElement &parent )
+{
+  QDomElement element = doc.createElement( "irname" );
+  element.appendChild( doc.createTextNode( mDevice->text() ) );
+  parent.appendChild( element );
+
+  element = doc.createElement( "irserial" );
+  element.appendChild( doc.createTextNode( mSerialNumber->text() ) );
+  parent.appendChild( element );
+}
+
+// FIXME - Only IrMC specific
+CableWidget::CableWidget( QWidget *parent )
+  : QWidget( parent )
+{
+  QGridLayout *layout = new QGridLayout( this, 3, 2, 11, 3 );
+
+  mManufacturer = new KComboBox( this );
+  mDevice = new KComboBox( true, this );
+
+  layout->addWidget( mManufacturer, 0, 1 );
+  layout->addWidget( mDevice, 1, 1 );
+
+  QLabel *label = new QLabel( i18n( "Device Manufacturer:" ), this );
+  label->setBuddy( mManufacturer );
+  layout->addWidget( label, 0, 0 );
+
+  label = new QLabel( i18n( "Device:" ), this );
+  label->setBuddy( mDevice );
+  layout->addWidget( label, 1, 0 );
+
+  layout->setRowStretch( 2, 1 );
+
+  mManufacturer->insertItem( i18n( "SonyEricsson/Ericsson" ) );
+  mManufacturer->insertItem( i18n( "Siemens" ) );
+
+  mDevice->insertItem( "/dev/ttyS0" );
+  mDevice->insertItem( "/dev/ttyS1" );
+  mDevice->insertItem( "/dev/ttyUSB0" );
+  mDevice->insertItem( "/dev/ttyUSB1" );
+}
+
+void CableWidget::load( const QDomElement &parent )
+{
+  QDomNode node;
+  for ( node = parent.firstChild(); !node.isNull(); node = node.nextSibling() ) {
+    QDomElement element = node.toElement();
+    if ( element.tagName() == "cabletype" )
+      mManufacturer->setCurrentItem( element.text().toInt() );
+    else if ( element.tagName() == "cabledev" )
+      mDevice->setCurrentText( element.text() );
+  }
+}
+
+void CableWidget::save( QDomDocument &doc, QDomElement &parent )
+{
+  QDomElement element = doc.createElement( "cabletype" );
+  element.appendChild( doc.createTextNode( QString::number( mManufacturer->currentItem() ) ) );
+  parent.appendChild( element );
+
+  element = doc.createElement( "cabledev" );
+  element.appendChild( doc.createTextNode( mDevice->currentText() ) );
+  parent.appendChild( element );
+}
+
+UsbWidget::UsbWidget( QWidget *parent )
+  : QWidget( parent )
+{
+  QGridLayout *layout = new QGridLayout( this, 3, 2, 11, 3);
+
+  mInterface = new QSpinBox( this );
+  layout->addWidget( mInterface, 0, 1 );
+
+  QLabel *label = new QLabel( i18n( "USB Interface:" ), this );
+  label->setBuddy( mInterface );
+  layout->addWidget( label, 0, 0 );
+
+  layout->setRowStretch( 2, 1 );
+}
+
+void UsbWidget::setInterface( int interface )
+{
+  mInterface->setValue( interface );
+}
+
+int UsbWidget::interface() const
+{
+  return mInterface->value();
+}
+
+#include "connectionwidgets.moc"
Index: kitchensync/src/memberinfo.h
===================================================================
--- kitchensync/src/memberinfo.h	(.../tags/KDE/3.5.6/kdepim)	(wersja 0)
+++ kitchensync/src/memberinfo.h	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -0,0 +1,47 @@
+/*
+    This file is part of KitchenSync.
+
+    Copyright (c) 2005 Cornelius Schumacher <schumacher@kde.org>
+
+    This program is free software; you can redistribute it and/or modify
+    it under the terms of the GNU General Public License as published by
+    the Free Software Foundation; either version 2 of the License, or
+    (at your option) any later version.
+
+    This program is distributed in the hope that it will be useful,
+    but WITHOUT ANY WARRANTY; without even the implied warranty of
+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
+    GNU General Public License for more details.
+
+    You should have received a copy of the GNU General Public License
+    along with this program; if not, write to the Free Software
+    Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301,
+    USA.
+*/
+#ifndef MEMBERINFO_H
+#define MEMBERINFO_H
+
+#include <libqopensync/member.h>
+
+#include <qstring.h>
+#include <qpixmap.h>
+
+class MemberInfo
+{
+  public:
+    MemberInfo( const QSync::Member &member );
+
+    QPixmap smallIcon() const;
+    QPixmap desktopIcon() const;
+
+    QString iconName() const;
+
+    QString name() const;
+
+    static QString pluginIconName( const QString &pluginName );
+
+  private:
+    QSync::Member mMember;
+};
+
+#endif
Index: kitchensync/src/about/top-right-kitchensync.png
===================================================================
Nie można wyświetlić: plik binarny.
svn:mime-type = application/octet-stream

Zmiany atrybutów dla: kitchensync/src/about/top-right-kitchensync.png
___________________________________________________________________
Nazwa: svn:mime-type
   + application/octet-stream

Index: kitchensync/src/about/main.html
===================================================================
--- kitchensync/src/about/main.html	(.../tags/KDE/3.5.6/kdepim)	(wersja 0)
+++ kitchensync/src/about/main.html	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -0,0 +1,66 @@
+<?xml version="1.0" encoding="utf-8"?>
+<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
+    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
+
+<html xmlns="http://www.w3.org/1999/xhtml">
+<head>
+  <meta name="generator" content=
+  "HTML Tidy for Linux/x86 (vers 1st August 2004), see www.w3.org" />
+
+  <style type="text/css">
+  /*<![CDATA[*/
+    @import "%1"; /* kde_infopage.css */
+    %1 /* maybe @import "kde_infopage_rtl.css"; */
+    @import "kitchensync.css";
+    body {font-size: %1px;}
+  /*]]>*/
+  </style>
+
+  <title>KitchenSync</title>
+</head>
+
+<body>
+  <div id="header">
+    <div id="headerL"/>
+    <div id="headerR"/>
+
+    <div id="title">
+    %2 <!-- KitchenSync -->
+    </div>
+
+    <div id="tagline">
+    %3 <!-- Catchphrase -->
+    </div>
+  </div>
+
+  <!-- the bar -->
+  <div id="bar">
+    <div id="barT"><div id="barTL"/><div id="barTR"/><div id="barTC"/></div>
+    <div id="barL">
+      <div id="barR">
+        <div id="barCenter" class="bar_text">
+      %4<!-- KitchenSync is ... -->
+        </div>
+      </div>
+    </div>
+    <div id="barB"><div id="barBL"/><div id="barBR"/><div id="barBC"/></div>
+  </div>
+
+  <!-- the main text box -->
+  <div id="box">
+    <div id="boxT"><div id="boxTL"/><div id="boxTR"/><div id="boxTC"/></div>
+    <div id="boxL">
+      <div id="boxR">
+        <div id="boxCenter">
+        <!--Welcome to KitchenSync-->
+	%5
+        </div>
+      </div>
+    </div>
+    <div id="boxB"><div id="boxBL"/><div id="boxBR"/><div id="boxBC"/></div>
+  </div>
+
+  <div id="footer"><div id="footerL"/><div id="footerR"/></div>
+</body>
+</html>
+<!-- vim:set sw=2 et nocindent smartindent: -->
Index: kitchensync/src/about/Makefile.am
===================================================================
--- kitchensync/src/about/Makefile.am	(.../tags/KDE/3.5.6/kdepim)	(wersja 0)
+++ kitchensync/src/about/Makefile.am	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -0,0 +1,6 @@
+about_DATA = \
+	top-right-kitchensync.png \
+	main.html \
+	kitchensync.css
+
+aboutdir = $(kde_datadir)/kitchensync/about
Index: kitchensync/src/about/kitchensync.css
===================================================================
--- kitchensync/src/about/kitchensync.css	(.../tags/KDE/3.5.6/kdepim)	(wersja 0)
+++ kitchensync/src/about/kitchensync.css	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -0,0 +1,30 @@
+
+#headerR {
+  position: absolute;
+  right: 0px;
+  width: 430px;
+  height: 131px;
+  background-image: url(top-right-kontact.png);
+}
+
+#title {
+  right: 125px;
+}
+
+#tagline {
+  right: 125px;
+}
+
+#boxCenter {
+  background-image: url(box-center-kontact.png);
+  background-repeat: no-repeat;
+  background-color: #dfe7f3;
+  background-position: bottom right;
+}
+
+#subtext {
+  font-style: italic;
+}
+
+/* vim:set sw=2 et nocindent smartindent: */
+

Zmiany atrybutów dla: kitchensync/src/about
___________________________________________________________________
Nazwa: svn:ignore
   + Makefile.in


Index: kitchensync/src/kwidgetlist.cpp
===================================================================
--- kitchensync/src/kwidgetlist.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 0)
+++ kitchensync/src/kwidgetlist.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -0,0 +1,305 @@
+/*
+    This file is part of KitchenSync.
+
+    Copyright (c) 2005 Tobias Koenig <tokoe@kde.org>
+
+    This library is free software; you can redistribute it and/or
+    modify it under the terms of the GNU Library General Public
+    License as published by the Free Software Foundation; either
+    version 2 of the License, or (at your option) any later version.
+
+    This library is distributed in the hope that it will be useful,
+    but WITHOUT ANY WARRANTY; without even the implied warranty of
+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
+    Library General Public License for more details.
+
+    You should have received a copy of the GNU Library General Public License
+    along with this library; see the file COPYING.LIB.  If not, write to
+    the Free Software Foundation, Inc., 51 Franklin Street, Fifth Floor,
+    Boston, MA 02110-1301, USA.
+*/
+
+#include <qvbox.h>
+
+#include <kglobalsettings.h>
+
+#include "kwidgetlist.h"
+
+class KWidgetList::Private
+{
+  public:
+    Private()
+      : mSelectedItem( 0 )
+    {
+    }
+
+    QValueList<KWidgetListItem*> mItems;
+    KWidgetListItem *mSelectedItem;
+    QVBox *mBox;
+};
+
+KWidgetList::KWidgetList( QWidget *parent, const char *name )
+  : QScrollView( parent, name ),
+    d( new Private )
+{
+  d->mBox = new QVBox( viewport() );
+  addChild( d->mBox );
+
+  setResizePolicy( AutoOneFit );
+  setFocusPolicy( QWidget::StrongFocus );
+
+  viewport()->setFocus();
+}
+
+KWidgetList::~KWidgetList()
+{
+  clear();
+
+  delete d;
+  d = 0;
+}
+
+uint KWidgetList::count() const
+{
+  return d->mItems.count();
+}
+
+void KWidgetList::appendItem( KWidgetListItem *item )
+{
+  if ( !item )
+    return;
+
+  if ( !d->mItems.contains( item ) ) {
+    d->mItems.append( item );
+    item->reparent( d->mBox, 0, QPoint( 0, 0 ), true );
+    item->setSelected( false );
+    item->installEventFilter( this );
+
+    if ( d->mItems.count() == 1 ) {
+      d->mSelectedItem = item;
+    } else {
+      if ( !d->mSelectedItem )
+        setSelected( item );
+      else
+        d->mSelectedItem->setSelected( true );
+    }
+  }
+}
+
+void KWidgetList::removeItem( int index )
+{
+  if ( index < 0 || index >= (int)d->mItems.count() )
+    return;
+
+  KWidgetListItem *item = d->mItems[ index ];
+  d->mItems.remove( item );
+
+  if ( d->mSelectedItem == item ) {
+    // TODO: smarter selection
+    if ( !d->mItems.isEmpty() )
+      setSelected( d->mItems.first() );
+    else
+      d->mSelectedItem = 0;
+  }
+
+  delete item;
+
+  if ( d->mItems.count() == 1 )
+    d->mItems.first()->setSelected( false );
+}
+
+void KWidgetList::takeItem( KWidgetListItem *item )
+{
+  d->mItems.remove( item );
+  item->reparent( 0, 0, QPoint( 0, 0 ) );
+  item->removeEventFilter( this );
+  item->hide();
+
+  if ( d->mSelectedItem == item ) {
+    // TODO: smarter selection
+    if ( !d->mItems.isEmpty() )
+      setSelected( d->mItems.first() );
+    else
+      d->mSelectedItem = 0;
+  }
+}
+
+void KWidgetList::setSelected( KWidgetListItem *item )
+{
+  if ( !item )
+    return;
+
+  if ( d->mItems.contains( item ) == 0 )
+    return;
+
+  if ( d->mSelectedItem )
+    d->mSelectedItem->setSelected( false );
+
+  item->setSelected( true );
+  d->mSelectedItem = item;
+}
+
+void KWidgetList::setSelected( int index )
+{
+  setSelected( item( index ) );
+}
+
+bool KWidgetList::isSelected( KWidgetListItem *item ) const
+{
+  return ( d->mSelectedItem == item );
+}
+
+bool KWidgetList::isSelected( int index ) const
+{
+  return isSelected( item( index ) );
+}
+
+KWidgetListItem *KWidgetList::selectedItem() const
+{
+  return d->mSelectedItem;
+}
+
+KWidgetListItem *KWidgetList::item( int index ) const
+{
+  if ( index < 0 || index >= (int)d->mItems.count() )
+    return 0;
+  else
+    return d->mItems[ index ];
+}
+
+int KWidgetList::index( KWidgetListItem *item ) const
+{
+  return d->mItems.findIndex( item );
+}
+
+void KWidgetList::clear()
+{
+  QValueList<KWidgetListItem*>::Iterator it;
+  for ( it = d->mItems.begin(); it != d->mItems.end(); ++it )
+    delete *it;
+
+  d->mItems.clear();
+
+  d->mSelectedItem = 0;
+}
+
+void KWidgetList::setFocus()
+{
+  viewport()->setFocus();
+}
+
+bool KWidgetList::eventFilter( QObject *object, QEvent *event )
+{
+  if ( event->type() == QEvent::MouseButtonPress ) {
+    QMouseEvent *mouseEvent = static_cast<QMouseEvent*>( event );
+    if ( mouseEvent->button() & LeftButton ) {
+      QValueList<KWidgetListItem*>::Iterator it;
+      for ( it = d->mItems.begin(); it != d->mItems.end(); ++it ) {
+        if ( *it == object ) {
+          if ( d->mItems.count() != 1 ) {
+            setSelected( *it );
+            emit selectionChanged( *it );
+          }
+          return true;
+        }
+      }
+    }
+  } else if ( event->type() == QEvent::MouseButtonDblClick ) {
+    QValueList<KWidgetListItem*>::Iterator it;
+    for ( it = d->mItems.begin(); it != d->mItems.end(); ++it ) {
+      if ( *it == object ) {
+        if ( d->mItems.count() != 1 ) {
+          setSelected( *it );
+          emit doubleClicked( *it );
+        }
+        return true;
+      }
+    }
+  } else if ( event->type() == QEvent::KeyPress ) {
+    QKeyEvent *keyEvent = static_cast<QKeyEvent*>( event );
+    if ( keyEvent->key() == Qt::Key_Up ) {
+      if ( d->mSelectedItem == 0 ) {
+        if ( !d->mItems.isEmpty() ) {
+          setSelected( d->mItems.first() );
+          return true;
+        }
+      }
+
+      for ( int i = 0; i < (int)d->mItems.count(); ++i ) {
+        if ( d->mItems[ i ] == d->mSelectedItem ) {
+          if ( ( i - 1 ) >= 0 ) {
+            setSelected( d->mItems[ i - 1 ] );
+            return true;
+          }
+        }
+      }
+      return true;
+    } else if ( keyEvent->key() == Qt::Key_Down ) {
+      if ( d->mSelectedItem == 0 ) {
+        if ( !d->mItems.isEmpty() ) {
+          setSelected( d->mItems.last() );
+          return true;
+        }
+      }
+
+      for ( int i = 0; i < (int)d->mItems.count(); ++i )
+        if ( d->mItems[ i ] == d->mSelectedItem ) {
+          if ( ( i + 1 ) < (int)d->mItems.count() ) {
+            setSelected( d->mItems[ i + 1 ] );
+            return true;
+          }
+        }
+      return true;
+    }
+  }
+
+  return QScrollView::eventFilter( object, event );
+}
+
+KWidgetListItem::KWidgetListItem( KWidgetList *parent, const char *name )
+  : QWidget( parent, name )
+{
+  mForegroundColor = KGlobalSettings::textColor();
+  mBackgroundColor = KGlobalSettings::baseColor();
+  mSelectionForegroundColor = KGlobalSettings::highlightedTextColor();
+  mSelectionBackgroundColor = KGlobalSettings::highlightColor();
+
+  setFocusPolicy( QWidget::StrongFocus );
+}
+
+KWidgetListItem::~KWidgetListItem()
+{
+}
+
+void KWidgetListItem::setSelected( bool select )
+{
+  if ( select ) {
+    setPaletteForegroundColor( mSelectionForegroundColor );
+    setPaletteBackgroundColor( mSelectionBackgroundColor );
+  } else {
+    setPaletteForegroundColor( mForegroundColor );
+    setPaletteBackgroundColor( mBackgroundColor );
+  }
+}
+
+void KWidgetListItem::setForegroundColor( const QColor &color )
+{
+  mForegroundColor = color;
+}
+
+void KWidgetListItem::setBackgroundColor( const QColor &color )
+{
+  mBackgroundColor = color;
+}
+
+void KWidgetListItem::setSelectionForegroundColor( const QColor &color )
+{
+  mSelectionForegroundColor = color;
+}
+
+void KWidgetListItem::setSelectionBackgroundColor( const QColor &color )
+{
+  mSelectionBackgroundColor = color;
+}
+
+#include "kwidgetlist.moc"
Index: kitchensync/src/memberconfig.cpp
===================================================================
--- kitchensync/src/memberconfig.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 0)
+++ kitchensync/src/memberconfig.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -0,0 +1,79 @@
+/*
+    This file is part of KitchenSync.
+
+    Copyright (c) 2005 Cornelius Schumacher <schumacher@kde.org>
+
+    This program is free software; you can redistribute it and/or modify
+    it under the terms of the GNU General Public License as published by
+    the Free Software Foundation; either version 2 of the License, or
+    (at your option) any later version.
+
+    This program is distributed in the hope that it will be useful,
+    but WITHOUT ANY WARRANTY; without even the implied warranty of
+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
+    GNU General Public License for more details.
+
+    You should have received a copy of the GNU General Public License
+    along with this program; if not, write to the Free Software
+    Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301, USA.
+*/
+
+#include "memberconfig.h"
+
+#include "configgui.h"
+#include "memberinfo.h"
+
+#include <klocale.h>
+#include <kmessagebox.h>
+
+#include <qlabel.h>
+#include <qlayout.h>
+#include <qtabwidget.h>
+
+MemberConfig::MemberConfig( QWidget *parent, const QSync::Member &member )
+  : QWidget( parent ), mMember( member )
+{
+  QBoxLayout *topLayout = new QVBoxLayout( this );
+
+  mGui = ConfigGui::Factory::create( member, this );
+  topLayout->addWidget( mGui );
+}
+
+MemberConfig::~MemberConfig()
+{
+}
+
+void MemberConfig::loadData()
+{
+  QByteArray cfg;
+  QSync::Result error = mMember.configuration( cfg );
+
+  if ( error ) {
+    KMessageBox::error( this,
+      i18n("Unable to read config from plugin '%1':\n%2")
+      .arg( mMember.pluginName() ).arg( error.message() ) );
+  } else {
+    QString txt = QString::fromUtf8( cfg.data(), cfg.size() );
+    mGui->load( txt );
+    MemberInfo mi( mMember );
+    mGui->setInstanceName( mi.name() );
+  }
+}
+
+void MemberConfig::saveData()
+{
+  QString txt = mGui->save();
+
+  if ( txt.isEmpty() ) {
+    KMessageBox::sorry( this, i18n("Configuration of %1 is empty.").arg( mMember.pluginName() ) );
+  } else {
+    QByteArray cfg = txt.utf8();
+    cfg.truncate(cfg.size() - 1); /* discard NUL terminator */
+    mMember.setConfiguration( cfg );
+    mMember.setName( mGui->instanceName() );
+    // TODO: Check for save() error.
+    mMember.save();
+  }
+}
+
+#include "memberconfig.moc"
Index: kitchensync/src/groupconfigcommon.h
===================================================================
--- kitchensync/src/groupconfigcommon.h	(.../tags/KDE/3.5.6/kdepim)	(wersja 0)
+++ kitchensync/src/groupconfigcommon.h	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -0,0 +1,60 @@
+/*
+    This file is part of KitchenSync.
+
+    Copyright (c) 2005 Cornelius Schumacher <schumacher@kde.org>
+
+    This program is free software; you can redistribute it and/or modify
+    it under the terms of the GNU General Public License as published by
+    the Free Software Foundation; either version 2 of the License, or
+    (at your option) any later version.
+
+    This program is distributed in the hope that it will be useful,
+    but WITHOUT ANY WARRANTY; without even the implied warranty of
+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
+    GNU General Public License for more details.
+
+    You should have received a copy of the GNU General Public License
+    along with this program; if not, write to the Free Software
+    Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301,
+    USA.
+*/
+#ifndef GROUPCONFIGCOMMON_H
+#define GROUPCONFIGCOMMON_H
+
+#include <qwidget.h>
+#include <qmap.h>
+
+#include <libqopensync/group.h>
+
+class KLineEdit;
+class SyncProcess;
+class QCheckBox;
+
+class ObjectTypeSelector : public QWidget
+{
+  public:
+    ObjectTypeSelector( QWidget *parent );
+
+    void load( const QSync::Group &group );
+    void save( QSync::Group group );
+
+  private:
+    QMap<QString,QCheckBox *> mObjectTypeChecks;
+};
+
+class GroupConfigCommon : public QWidget
+{
+  public:
+    GroupConfigCommon( QWidget *parent );
+
+    void setSyncProcess( SyncProcess *syncProcess );
+    void save();
+
+  private:
+    KLineEdit *mGroupName;
+    ObjectTypeSelector *mObjectTypeSelector;
+
+    SyncProcess *mSyncProcess;
+};
+
+#endif
Index: kitchensync/src/addresseediffalgo.h
===================================================================
--- kitchensync/src/addresseediffalgo.h	(.../tags/KDE/3.5.6/kdepim)	(wersja 0)
+++ kitchensync/src/addresseediffalgo.h	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -0,0 +1,53 @@
+/*
+    This file is part of libkdepim.
+
+    Copyright (c) 2004 Tobias Koenig <tokoe@kde.org>
+
+    This library is free software; you can redistribute it and/or
+    modify it under the terms of the GNU Library General Public
+    License as published by the Free Software Foundation; either
+    version 2 of the License, or (at your option) any later version.
+
+    This library is distributed in the hope that it will be useful,
+    but WITHOUT ANY WARRANTY; without even the implied warranty of
+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
+    Library General Public License for more details.
+
+    You should have received a copy of the GNU Library General Public License
+    along with this library; see the file COPYING.LIB.  If not, write to
+    the Free Software Foundation, Inc., 51 Franklin Street, Fifth Floor,
+    Boston, MA 02110-1301, USA.
+*/
+
+#ifndef KSYNC_ADDRESSEEDIFFALGO_H
+#define KSYNC_ADDRESSEEDIFFALGO_H
+
+#include <kabc/addressee.h>
+#include <libkdepim/diffalgo.h>
+
+using namespace KPIM;
+
+namespace KSync {
+
+class AddresseeDiffAlgo : public DiffAlgo
+{
+  public:
+    AddresseeDiffAlgo( const KABC::Addressee &leftAddressee, const KABC::Addressee &rightAddressee );
+    AddresseeDiffAlgo( const QString &leftAddressee, const QString &rightAddressee );
+
+    void run();
+
+  private:
+    template <class L>
+    void diffList( const QString &id, const QValueList<L> &left, const QValueList<L> &right );
+
+    QString toString( const KABC::PhoneNumber &number );
+    QString toString( const KABC::Address &address );
+
+    KABC::Addressee mLeftAddressee;
+    KABC::Addressee mRightAddressee;
+};
+
+}
+
+#endif
Index: kitchensync/src/kitchensyncui.rc
===================================================================
--- kitchensync/src/kitchensyncui.rc	(.../tags/KDE/3.5.6/kdepim)	(wersja 0)
+++ kitchensync/src/kitchensyncui.rc	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -0,0 +1,22 @@
+<!DOCTYPE kpartgui>
+<kpartgui name="kitchensync" version="2">
+  <MenuBar>
+    <Menu name="file">
+      <Action name="sync" />
+    </Menu>
+
+    <Menu name="groups"><text>&amp;Groups</text>
+      <Action name="add_group" />
+      <Action name="edit_group" />
+      <Action name="delete_group" />
+    </Menu>
+  </MenuBar>
+
+  <ToolBar name="mainToolBar"><text>Main</text>
+    <Action name="sync" />
+    <Separator />
+    <Action name="add_group" />
+    <Action name="edit_group" />
+    <Action name="delete_group" />
+  </ToolBar>
+</kpartgui>
Index: kitchensync/src/configguisyncmlhttp.h
===================================================================
--- kitchensync/src/configguisyncmlhttp.h	(.../tags/KDE/3.5.6/kdepim)	(wersja 0)
+++ kitchensync/src/configguisyncmlhttp.h	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -0,0 +1,67 @@
+/*
+    This file is part of KitchenSync.
+
+    Copyright (c) 2005 Cornelius Schumacher <schumacher@kde.org>
+
+    This program is free software; you can redistribute it and/or modify
+    it under the terms of the GNU General Public License as published by
+    the Free Software Foundation; either version 2 of the License, or
+    (at your option) any later version.
+
+    This program is distributed in the hope that it will be useful,
+    but WITHOUT ANY WARRANTY; without even the implied warranty of
+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
+    GNU General Public License for more details.
+
+    You should have received a copy of the GNU General Public License
+    along with this program; if not, write to the Free Software
+    Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301,
+    USA.
+*/
+#ifndef CONFIGGUISYNCML_H
+#define CONFIGGUISYNCML_H
+
+#include <qdom.h>
+
+#include "configgui.h"
+
+class QCheckBox;
+class QComboBox;
+class QGridLayout;
+class QSpinBox;
+class KComboBox;
+class KLineEdit;
+
+class ConfigGuiSyncmlHttp : public ConfigGui
+{
+
+  Q_OBJECT
+
+  public:
+    ConfigGuiSyncmlHttp( const QSync::Member &, QWidget *parent );
+
+    void load( const QString &xml );
+    QString save();
+
+  private:
+    QGridLayout *mGridLayout;
+
+    KLineEdit *mUsername;
+    KLineEdit *mPassword;
+    KLineEdit *mUrl;
+    QSpinBox *mPort;
+    QCheckBox *mUseStringTable;
+    QCheckBox *mOnlyReplace;
+
+    QSpinBox *mRecvLimit;
+    QSpinBox *mMaxObjSize;
+
+    KComboBox *mContactDb;
+    KComboBox *mCalendarDb;
+    KComboBox *mNoteDb;
+
+  protected slots:
+    void addLineEdit( QWidget *parent, const QString &text, KComboBox **edit, int row );
+};
+
+#endif
Index: kitchensync/src/groupconfigdialog.h
===================================================================
--- kitchensync/src/groupconfigdialog.h	(.../tags/KDE/3.5.6/kdepim)	(wersja 0)
+++ kitchensync/src/groupconfigdialog.h	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -0,0 +1,43 @@
+/*
+    This file is part of KitchenSync.
+
+    Copyright (c) 2005 Cornelius Schumacher <schumacher@kde.org>
+
+    This program is free software; you can redistribute it and/or modify
+    it under the terms of the GNU General Public License as published by
+    the Free Software Foundation; either version 2 of the License, or
+    (at your option) any later version.
+
+    This program is distributed in the hope that it will be useful,
+    but WITHOUT ANY WARRANTY; without even the implied warranty of
+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
+    GNU General Public License for more details.
+
+    You should have received a copy of the GNU General Public License
+    along with this program; if not, write to the Free Software
+    Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301, USA.
+*/
+#ifndef GROUPCONFIGDIALOG_H
+#define GROUPCONFIGDIALOG_H
+
+#include <kdialogbase.h>
+
+class GroupConfig;
+class SyncProcess;
+
+class GroupConfigDialog : public KDialogBase
+{
+  Q_OBJECT
+
+  public:
+    GroupConfigDialog( QWidget *parent, SyncProcess * );
+    ~GroupConfigDialog();
+
+  protected slots:
+    void slotOk();
+
+  private:
+    GroupConfig *mConfigWidget;
+};
+
+#endif
Index: kitchensync/src/calendardiffalgo.h
===================================================================
--- kitchensync/src/calendardiffalgo.h	(.../tags/KDE/3.5.6/kdepim)	(wersja 0)
+++ kitchensync/src/calendardiffalgo.h	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -0,0 +1,55 @@
+/*
+    This file is part of libkdepim.
+
+    Copyright (c) 2004 Tobias Koenig <tokoe@kde.org>
+
+    This library is free software; you can redistribute it and/or
+    modify it under the terms of the GNU Library General Public
+    License as published by the Free Software Foundation; either
+    version 2 of the License, or (at your option) any later version.
+
+    This library is distributed in the hope that it will be useful,
+    but WITHOUT ANY WARRANTY; without even the implied warranty of
+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
+    Library General Public License for more details.
+
+    You should have received a copy of the GNU Library General Public License
+    along with this library; see the file COPYING.LIB.  If not, write to
+    the Free Software Foundation, Inc., 51 Franklin Street, Fifth Floor,
+    Boston, MA 02110-1301, USA.
+*/
+
+#ifndef KSYNC_CALENDARDIFFALGO_H
+#define KSYNC_CALENDARDIFFALGO_H
+
+#include <libkcal/event.h>
+#include <libkcal/todo.h>
+#include <libkdepim/diffalgo.h>
+
+using namespace KPIM;
+
+namespace KSync {
+
+class CalendarDiffAlgo : public DiffAlgo
+{
+  public:
+    CalendarDiffAlgo( KCal::Incidence *leftIncidence, KCal::Incidence *rightIncidence );
+
+    void run();
+
+  private:
+    template <class L>
+    void diffList( const QString &id, const QValueList<L> &left, const QValueList<L> &right );
+
+    void diffIncidenceBase( KCal::IncidenceBase*, KCal::IncidenceBase* );
+    void diffIncidence( KCal::Incidence*, KCal::Incidence* );
+    void diffEvent( KCal::Event*, KCal::Event* );
+    void diffTodo( KCal::Todo*, KCal::Todo* );
+
+    KCal::Incidence *mLeftIncidence;
+    KCal::Incidence *mRightIncidence;
+};
+
+}
+
+#endif
Index: kitchensync/src/configguigcalendar.cpp
===================================================================
--- kitchensync/src/configguigcalendar.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 0)
+++ kitchensync/src/configguigcalendar.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -0,0 +1,103 @@
+/*
+    This file is part of KitchenSync.
+
+    Copyright (c) 2005 Cornelius Schumacher <schumacher@kde.org>
+    Copyright (c) 2006 Eduardo Habkost <ehabkost@raisama.net>
+
+    This program is free software; you can redistribute it and/or modify
+    it under the terms of the GNU General Public License as published by
+    the Free Software Foundation; either version 2 of the License, or
+    (at your option) any later version.
+
+    This program is distributed in the hope that it will be useful,
+    but WITHOUT ANY WARRANTY; without even the implied warranty of
+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
+    GNU General Public License for more details.
+
+    You should have received a copy of the GNU General Public License
+    along with this program; if not, write to the Free Software
+    Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301,
+    USA.
+*/
+
+#include "configguigcalendar.h"
+
+#include <klocale.h>
+
+#include <qlayout.h>
+#include <qlabel.h>
+#include <qdom.h>
+#include <qlineedit.h>
+
+ConfigGuiGoogleCalendar::ConfigGuiGoogleCalendar( const QSync::Member &member, QWidget *parent )
+  : ConfigGui( member, parent )
+{
+  QBoxLayout *userLayout = new QHBoxLayout( topLayout() );
+
+  QLabel *userLbl= new QLabel( i18n("Username:"), this );
+  userLayout->addWidget(userLbl);
+
+  mUsername = new QLineEdit(this);
+  userLayout->addWidget(mUsername);
+
+
+  QBoxLayout *passLayout = new QHBoxLayout( topLayout() );
+
+  QLabel *passLbl = new QLabel( i18n("Password:"), this );
+  passLayout->addWidget(passLbl);
+
+  mPassword = new QLineEdit(this);
+  mPassword->setEchoMode(QLineEdit::Password);
+  passLayout->addWidget(mPassword);
+
+  topLayout()->addWidget(new QLabel( i18n("Please notice that currently the password is stored as plain text in the plugin configuration file"), this ));
+
+  QBoxLayout *urlLayout = new QHBoxLayout( topLayout() );
+  QLabel *urlLbl = new QLabel( i18n("Calendar URL:"), this );
+  urlLayout->addWidget(urlLbl);
+
+  mUrl = new QLineEdit(this);
+  urlLayout->addWidget(mUrl);
+
+  topLayout()->addStretch( 1 );
+}
+
+void ConfigGuiGoogleCalendar::load( const QString &xml )
+{
+  QDomDocument doc;
+  doc.setContent( xml );
+  QDomElement docElement = doc.documentElement();
+  QDomNode n;
+  for( n = docElement.firstChild(); !n.isNull(); n = n.nextSibling() ) {
+    QDomElement e = n.toElement();
+    if ( e.tagName() == "username" ) {
+      mUsername->setText(e.text());
+    } else if ( e.tagName() == "password" ) {
+      mPassword->setText(e.text());
+    } else if ( e.tagName() == "url" ) {
+      mUrl->setText(e.text());
+    }
+  }
+}
+
+QString ConfigGuiGoogleCalendar::save()
+{
+  QDomDocument doc;
+  QDomElement root = doc.createElement("config");
+  doc.appendChild(root);
+
+  QDomElement un = doc.createElement("username");
+  root.appendChild(un);
+  un.appendChild(doc.createTextNode(mUsername->text()));
+
+  QDomElement pass = doc.createElement("password");
+  root.appendChild(pass);
+  pass.appendChild(doc.createTextNode(mPassword->text()));
+
+  QDomElement url = doc.createElement("url");
+  root.appendChild(url);
+  url.appendChild(doc.createTextNode(mUrl->text()));
+
+  //TODO: Implement me!
+  return doc.toString();
+}

Zmiany atrybutów dla: kitchensync/src/configguigcalendar.cpp
___________________________________________________________________
Nazwa: svn:eol-style
   + native

Index: kitchensync/src/configguigpe.h
===================================================================
--- kitchensync/src/configguigpe.h	(.../tags/KDE/3.5.6/kdepim)	(wersja 0)
+++ kitchensync/src/configguigpe.h	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -0,0 +1,50 @@
+/*
+    This file is part of KitchenSync.
+
+    Copyright (c) 2007 Tobias Koenig <tokoe@kde.org>
+
+    This program is free software; you can redistribute it and/or modify
+    it under the terms of the GNU General Public License as published by
+    the Free Software Foundation; either version 2 of the License, or
+    (at your option) any later version.
+
+    This program is distributed in the hope that it will be useful,
+    but WITHOUT ANY WARRANTY; without even the implied warranty of
+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
+    GNU General Public License for more details.
+
+    You should have received a copy of the GNU General Public License
+    along with this program; if not, write to the Free Software
+    Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301,
+    USA.
+*/
+
+#ifndef CONFIGGUIGPE_H
+#define CONFIGGUIGPE_H
+
+#include "configgui.h"
+
+class QSpinBox;
+
+class KComboBox;
+class KLineEdit;
+
+class ConfigGuiGpe : public ConfigGui
+{
+  public:
+    ConfigGuiGpe( const QSync::Member &, QWidget *parent );
+
+    void load( const QString &xml );
+    QString save();
+
+  private:
+    void initGUI();
+
+    KComboBox *mConnectionMode;
+
+    KLineEdit *mIP;
+		QSpinBox *mPort;
+    KLineEdit *mUser;
+};
+
+#endif
Index: kitchensync/src/configguildap.cpp
===================================================================
--- kitchensync/src/configguildap.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 0)
+++ kitchensync/src/configguildap.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -0,0 +1,209 @@
+/*
+    This file is part of KitchenSync.
+
+    Copyright (c) 2007 Tobias Koenig <tokoe@kde.org>
+
+    This program is free software; you can redistribute it and/or modify
+    it under the terms of the GNU General Public License as published by
+    the Free Software Foundation; either version 2 of the License, or
+    (at your option) any later version.
+
+    This program is distributed in the hope that it will be useful,
+    but WITHOUT ANY WARRANTY; without even the implied warranty of
+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
+    GNU General Public License for more details.
+
+    You should have received a copy of the GNU General Public License
+    along with this program; if not, write to the Free Software
+    Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301,
+    USA.
+*/
+
+#include "configguildap.h"
+
+#include <qcheckbox.h>
+#include <qdom.h>
+#include <qlabel.h>
+#include <qlayout.h>
+#include <qspinbox.h>
+
+#include <kcombobox.h>
+#include <kdialog.h>
+#include <klineedit.h>
+#include <klocale.h>
+
+ConfigGuiLdap::ConfigGuiLdap( const QSync::Member &member, QWidget *parent )
+  : ConfigGui( member, parent )
+{
+  initGUI();
+
+  bindModeChanged( false );
+
+  mSearchScope->insertItem( i18n( "Base" ) );
+  mSearchScope->insertItem( i18n( "One" ) );
+  mSearchScope->insertItem( i18n( "Sub" ) );
+
+  mAuthMech->insertItem( i18n( "Simple" ) );
+}
+
+void ConfigGuiLdap::load( const QString &xml )
+{
+  QDomDocument doc;
+  doc.setContent( xml );
+  QDomElement docElement = doc.documentElement();
+  QDomNode node;
+  for( node = docElement.firstChild(); !node.isNull(); node = node.nextSibling() ) {
+    QDomElement element = node.toElement();
+    if ( element.tagName() == "servername" ) {
+      mServerName->setText( element.text() );
+    } else if ( element.tagName() == "serverport" ) {
+      mPort->setValue( element.text().toInt() );
+    } else if ( element.tagName() == "binddn" ) {
+      mBindDn->setText( element.text() );
+    } else if ( element.tagName() == "password" ) {
+      mPassword->setText( element.text() );
+    } else if ( element.tagName() == "anonymous" ) {
+      mAnonymousBind->setChecked( element.text().toInt() == 1 );
+    } else if ( element.tagName() == "searchbase" ) {
+      mSearchBase->setText( element.text() );
+    } else if ( element.tagName() == "searchfilter" ) {
+      mSearchFilter->setText( element.text() );
+    } else if ( element.tagName() == "storebase" ) {
+      mStoreBase->setText( element.text() );
+    } else if ( element.tagName() == "keyattr" ) {
+      mKeyAttribute->setText( element.text() );
+    } else if ( element.tagName() == "scope" ) {
+      QStringList list;
+      list << "base" << "one" << "sub";
+
+      for ( uint i = 0; i < list.count(); ++i )
+        if ( list[ i ] == element.text() )
+          mSearchScope->setCurrentItem( i );
+
+    } else if ( element.tagName() == "authmech" ) {
+      QStringList list;
+      list << "SIMPLE";
+
+      for ( uint i = 0; i < list.count(); ++i )
+        if ( list[ i ] == element.text() )
+          mAuthMech->setCurrentItem( i );
+
+    } else if ( element.tagName() == "encryption" ) {
+      mEncryption->setChecked( element.text().toInt() == 1 );
+    } else if ( element.tagName() == "encryption" ) {
+      mEncryption->setChecked( element.text().toInt() == 1 );
+    } else if ( element.tagName() == "ldap_read" ) {
+      mReadLdap->setChecked( element.text().toInt() == 1 );
+    } else if ( element.tagName() == "ldap_write" ) {
+      mWriteLdap->setChecked( element.text().toInt() == 1 );
+    }
+  }
+}
+
+QString ConfigGuiLdap::save()
+{
+  QString config = "<config>";
+
+  config += QString( "<servername>%1</servername>" ).arg( mServerName->text() );
+  config += QString( "<serverport>%1</serverport>" ).arg( mPort->value() );
+  config += QString( "<binddn>%1</binddn>" ).arg( mBindDn->text() );
+  config += QString( "<password>%1</password>" ).arg( mPassword->text() );
+  config += QString( "<anonymous>%1</anonymous>" ).arg( mAnonymousBind->isChecked() ? "1" : "0" );
+  config += QString( "<searchbase>%1</searchbase>" ).arg( mSearchBase->text() );
+  config += QString( "<searchfilter>%1</searchfilter>" ).arg( mSearchFilter->text() );
+  config += QString( "<storebase>%1</storebase>" ).arg( mStoreBase->text() );
+  config += QString( "<keyattr>%1</keyattr>" ).arg( mKeyAttribute->text() );
+
+  QStringList scopes;
+  scopes << "base" << "one" << "sub";
+
+  config += QString( "<scope>%1</scope>" ).arg( scopes[ mSearchScope->currentItem() ] );
+
+  QStringList authMechs;
+  authMechs << "SIMPLE";
+
+  config += QString( "<authmech>%1</authmech>" ).arg( authMechs[ mAuthMech->currentItem() ] );
+  config += QString( "<encryption>%1</encryption>" ).arg( mEncryption->isChecked() ? "1" : "0" );
+
+  config += QString( "<ldap_read>%1</ldap_read>" ).arg( mReadLdap->isChecked() ? "1" : "0" );
+  config += QString( "<ldap_write>%1</ldap_write>" ).arg( mWriteLdap->isChecked() ? "1" : "0" );
+
+  config += "</config>";
+
+  return config;
+}
+
+void ConfigGuiLdap::bindModeChanged( bool checked )
+{
+  mBindLabel->setEnabled( !checked );
+  mBindDn->setEnabled( !checked );
+
+  mPasswordLabel->setEnabled( !checked );
+  mPassword->setEnabled( !checked );
+}
+
+void ConfigGuiLdap::initGUI()
+{
+  QGridLayout *layout = new QGridLayout( topLayout(), 12, 4, KDialog::spacingHint() );
+  layout->setMargin( KDialog::marginHint() );
+
+  layout->addWidget( new QLabel( i18n( "Server:" ), this ), 0, 0 );
+  mServerName = new KLineEdit( this );
+  layout->addWidget( mServerName, 0, 1 );
+
+  layout->addWidget( new QLabel( i18n( "Port:" ), this ), 0, 2, Qt::AlignRight );
+  mPort = new QSpinBox( 1, 65536, 1, this );
+  layout->addWidget( mPort, 0, 3 );
+
+  mAnonymousBind = new QCheckBox( i18n( "Use anonymous bind" ), this );
+  layout->addMultiCellWidget( mAnonymousBind, 1, 1, 0, 1 );
+
+  connect( mAnonymousBind, SIGNAL( toggled( bool ) ),
+           this, SLOT( bindModeChanged( bool ) ) );
+
+  mBindLabel = new QLabel( i18n( "Bind Dn:" ), this );
+  layout->addWidget( mBindLabel, 2, 0 );
+  mBindDn = new KLineEdit( this );
+  layout->addMultiCellWidget( mBindDn, 2, 2, 1, 3 );
+
+  mPasswordLabel = new QLabel( i18n( "Password:" ), this );
+  layout->addWidget( mPasswordLabel, 3, 0 );
+  mPassword = new KLineEdit( this );
+  mPassword->setEchoMode( QLineEdit::Password );
+  layout->addMultiCellWidget( mPassword, 3, 3, 1, 3 );
+
+  layout->addWidget( new QLabel( i18n( "Search Base:" ), this ), 4, 0 );
+  mSearchBase = new KLineEdit( this );
+  layout->addMultiCellWidget( mSearchBase, 4, 4, 1, 3 );
+
+  layout->addWidget( new QLabel( i18n( "Search Filter:" ), this ), 5, 0 );
+  mSearchFilter = new KLineEdit( this );
+  layout->addMultiCellWidget( mSearchFilter, 5, 5, 1, 3 );
+
+  layout->addWidget( new QLabel( i18n( "Storage Base:" ), this ), 6, 0 );
+  mStoreBase = new KLineEdit( this );
+  layout->addMultiCellWidget( mStoreBase, 6, 6, 1, 3 );
+
+  layout->addWidget( new QLabel( i18n( "Key Attribute:" ), this ), 7, 0 );
+  mKeyAttribute = new KLineEdit( this );
+  layout->addMultiCellWidget( mKeyAttribute, 7, 7, 1, 3 );
+
+  layout->addWidget( new QLabel( i18n( "Search Scope:" ), this ), 8, 0 );
+  mSearchScope = new KComboBox( this );
+  layout->addMultiCellWidget( mSearchScope, 8, 8, 1, 3 );
+
+  layout->addWidget( new QLabel( i18n( "Authentication Mechanism:" ), this ), 9, 0 );
+  mAuthMech = new KComboBox( this );
+  layout->addMultiCellWidget( mAuthMech, 9, 9, 1, 3 );
+
+  mEncryption = new QCheckBox( i18n( "Use encryption" ), this );
+  layout->addMultiCellWidget( mEncryption, 10, 10, 0, 3 );
+
+  mReadLdap = new QCheckBox( i18n( "Load data from LDAP" ), this );
+  layout->addMultiCellWidget( mReadLdap, 11, 11, 0, 1 );
+
+  mWriteLdap = new QCheckBox( i18n( "Save data to LDAP" ), this );
+  layout->addMultiCellWidget( mWriteLdap, 11, 11, 2, 3 );
+}
+
+#include "configguildap.moc"
Index: kitchensync/src/part.h
===================================================================
--- kitchensync/src/part.h	(.../tags/KDE/3.5.6/kdepim)	(wersja 0)
+++ kitchensync/src/part.h	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -0,0 +1,49 @@
+/*
+    This file is part of KitchenSync.
+
+    Copyright (c) 2005 Tobias Koenig <tokoe@kde.org>
+
+    This program is free software; you can redistribute it and/or modify
+    it under the terms of the GNU General Public License as published by
+    the Free Software Foundation; either version 2 of the License, or
+    (at your option) any later version.
+
+    This program is distributed in the hope that it will be useful,
+    but WITHOUT ANY WARRANTY; without even the implied warranty of
+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
+    GNU General Public License for more details.
+
+    You should have received a copy of the GNU General Public License
+    along with this program; if not, write to the Free Software
+    Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301, USA.
+*/
+
+#ifndef PART_H
+#define PART_H
+
+#include <kparts/event.h>
+#include <kparts/factory.h>
+#include <kparts/part.h>
+
+class KAboutData;
+
+class KitchenSyncPart: public KParts::ReadOnlyPart
+{
+  Q_OBJECT
+
+  public:
+    KitchenSyncPart( QWidget *parentWidget, const char *widgetName,
+                     QObject *parent, const char *name, const QStringList& );
+    virtual ~KitchenSyncPart();
+
+    static KAboutData *createAboutData();
+
+    virtual void exit();
+    virtual bool openURL( const KURL &url );
+
+  protected:
+    virtual bool openFile();
+    virtual void guiActivateEvent( KParts::GUIActivateEvent* );
+};
+
+#endif
Index: kitchensync/src/syncprocessmanager.h
===================================================================
--- kitchensync/src/syncprocessmanager.h	(.../tags/KDE/3.5.6/kdepim)	(wersja 0)
+++ kitchensync/src/syncprocessmanager.h	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -0,0 +1,100 @@
+/*
+    This file is part of KitchenSync.
+
+    Copyright (c) 2005 Cornelius Schumacher <schumacher@kde.org>
+
+    This program is free software; you can redistribute it and/or modify
+    it under the terms of the GNU General Public License as published by
+    the Free Software Foundation; either version 2 of the License, or
+    (at your option) any later version.
+
+    This program is distributed in the hope that it will be useful,
+    but WITHOUT ANY WARRANTY; without even the implied warranty of
+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
+    GNU General Public License for more details.
+
+    You should have received a copy of the GNU General Public License
+    along with this program; if not, write to the Free Software
+    Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301,
+    USA.
+*/
+#ifndef SYNCPROCESSMANAGER_H
+#define SYNCPROCESSMANAGER_H
+
+#include <qobject.h>
+
+#include <libqopensync/group.h>
+
+namespace QSync {
+class Environment;
+}
+
+class SyncProcess;
+
+class SyncProcessManager : public QObject
+{
+    Q_OBJECT
+  public:
+    static SyncProcessManager *self();
+
+    /**
+      Destroys the SyncProcessList.
+     */
+    ~SyncProcessManager();
+
+    /**
+      Return OpenSync Environment.
+    */
+    QSync::Environment *environment() const { return mEnvironment; }
+
+    /**
+      Returns the number of SyncProcesses.
+     */
+    int count() const;
+
+    /**
+      Returns the SyncProcess at position @param pos.
+     */
+    SyncProcess* at( int pos ) const;
+
+    /**
+      Returns the SyncProcess with the given @param group.
+     */
+    SyncProcess* byGroup( const QSync::Group &group );
+
+    /**
+      Returns the SyncProcess with the given group @param name.
+     */
+    SyncProcess* byGroupName( const QString &name );
+
+    /**
+      Adds a group with given @param name.
+     */
+    void addGroup( const QString &name );
+
+    /**
+      Removes the given @param sync process.
+     */
+    void remove( SyncProcess *syncProcess );
+
+    /**
+      Adds @param plugin instance as member to the group of @param process.
+     */
+    QSync::Result addMember( SyncProcess *process, const QSync::Plugin &plugin );
+
+  signals:
+    void changed();
+    void syncProcessChanged( SyncProcess *process );
+
+  private:
+    SyncProcessManager();
+
+    void init( QSync::Environment *environment );
+
+    QValueList<SyncProcess*> mProcesses;
+    QSync::Environment *mEnvironment;
+
+    static SyncProcessManager *mSelf;
+};
+
+#endif
Index: kitchensync/src/aboutpage.h
===================================================================
--- kitchensync/src/aboutpage.h	(.../tags/KDE/3.5.6/kdepim)	(wersja 0)
+++ kitchensync/src/aboutpage.h	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -0,0 +1,45 @@
+/*
+    This file is part of KitchenSync.
+
+    Copyright (c) 2005 Tobias Koenig <tokoe@kde.org>
+
+    This program is free software; you can redistribute it and/or modify
+    it under the terms of the GNU General Public License as published by
+    the Free Software Foundation; either version 2 of the License, or
+    (at your option) any later version.
+
+    This program is distributed in the hope that it will be useful,
+    but WITHOUT ANY WARRANTY; without even the implied warranty of
+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
+    GNU General Public License for more details.
+
+    You should have received a copy of the GNU General Public License
+    along with this program; if not, write to the Free Software
+    Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301, USA.
+*/
+
+#ifndef ABOUTPAGE_H
+#define ABOUTPAGE_H
+
+#include <kurl.h>
+
+#include <qwidget.h>
+
+class AboutPage : public QWidget
+{
+  Q_OBJECT
+
+  public:
+    AboutPage( QWidget *parent );
+
+  signals:
+    void addGroup();
+
+  private slots:
+    void handleUrl( const KURL& );
+
+  private:
+    QString htmlText() const;
+};
+
+#endif
Index: kitchensync/src/genericdiffalgo.h
===================================================================
--- kitchensync/src/genericdiffalgo.h	(.../tags/KDE/3.5.6/kdepim)	(wersja 0)
+++ kitchensync/src/genericdiffalgo.h	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -0,0 +1,45 @@
+/*
+    This file is part of libkdepim.
+
+    Copyright (c) 2004 Tobias Koenig <tokoe@kde.org>
+
+    This library is free software; you can redistribute it and/or
+    modify it under the terms of the GNU Library General Public
+    License as published by the Free Software Foundation; either
+    version 2 of the License, or (at your option) any later version.
+
+    This library is distributed in the hope that it will be useful,
+    but WITHOUT ANY WARRANTY; without even the implied warranty of
+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
+    Library General Public License for more details.
+
+    You should have received a copy of the GNU Library General Public License
+    along with this library; see the file COPYING.LIB.  If not, write to
+    the Free Software Foundation, Inc., 51 Franklin Street, Fifth Floor,
+    Boston, MA 02110-1301, USA.
+*/
+
+#ifndef KSYNC_GENERICDIFFALGO_H
+#define KSYNC_GENERICDIFFALGO_H
+
+#include <libkdepim/diffalgo.h>
+
+using namespace KPIM;
+
+namespace KSync {
+
+class GenericDiffAlgo : public DiffAlgo
+{
+  public:
+    GenericDiffAlgo( const QString &left, const QString &right );
+
+    void run();
+
+  private:
+    QString mLeftData;
+    QString mRightData;
+};
+
+}
+
+#endif
Index: kitchensync/src/pics/cr48-app-mobile_phone.png
===================================================================
Nie można wyświetlić: plik binarny.
svn:mime-type = application/octet-stream

Zmiany atrybutów dla: kitchensync/src/pics/cr48-app-mobile_phone.png
___________________________________________________________________
Nazwa: svn:mime-type
   + application/octet-stream

Index: kitchensync/src/pics/cr48-action-hotsync.png
===================================================================
Nie można wyświetlić: plik binarny.
svn:mime-type = application/octet-stream

Zmiany atrybutów dla: kitchensync/src/pics/cr48-action-hotsync.png
___________________________________________________________________
Nazwa: svn:mime-type
   + application/octet-stream

Index: kitchensync/src/pics/hi22-app-kitchensync.png
===================================================================
Nie można wyświetlić: plik binarny.
svn:mime-type = application/octet-stream

Zmiany atrybutów dla: kitchensync/src/pics/hi22-app-kitchensync.png
___________________________________________________________________
Nazwa: svn:mime-type
   + application/octet-stream

Index: kitchensync/src/pics/hi32-app-kitchensync.png
===================================================================
Nie można wyświetlić: plik binarny.
svn:mime-type = application/octet-stream

Zmiany atrybutów dla: kitchensync/src/pics/hi32-app-kitchensync.png
___________________________________________________________________
Nazwa: svn:mime-type
   + application/octet-stream

Index: kitchensync/src/pics/cr32-app-mobile_phone.png
===================================================================
Nie można wyświetlić: plik binarny.
svn:mime-type = application/octet-stream

Zmiany atrybutów dla: kitchensync/src/pics/cr32-app-mobile_phone.png
___________________________________________________________________
Nazwa: svn:mime-type
   + application/octet-stream

Index: kitchensync/src/pics/hi16-app-kitchensync.png
===================================================================
Nie można wyświetlić: plik binarny.
svn:mime-type = application/octet-stream

Zmiany atrybutów dla: kitchensync/src/pics/hi16-app-kitchensync.png
___________________________________________________________________
Nazwa: svn:mime-type
   + application/octet-stream

Index: kitchensync/src/pics/Makefile.am
===================================================================
--- kitchensync/src/pics/Makefile.am	(.../tags/KDE/3.5.6/kdepim)	(wersja 0)
+++ kitchensync/src/pics/Makefile.am	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -0,0 +1,4 @@
+kitchensyncicondir = $(kde_datadir)/kitchensync/icons
+kitchensyncicon_ICON = hotsync mobile_phone
+
+KDE_ICON = kitchensync
Index: kitchensync/src/pics/cr16-app-mobile_phone.png
===================================================================
Nie można wyświetlić: plik binarny.
svn:mime-type = application/octet-stream

Zmiany atrybutów dla: kitchensync/src/pics/cr16-app-mobile_phone.png
___________________________________________________________________
Nazwa: svn:mime-type
   + application/octet-stream

Index: kitchensync/src/pics/cr22-action-hotsync.png
===================================================================
Nie można wyświetlić: plik binarny.
svn:mime-type = application/octet-stream

Zmiany atrybutów dla: kitchensync/src/pics/cr22-action-hotsync.png
___________________________________________________________________
Nazwa: svn:mime-type
   + application/octet-stream

Index: kitchensync/src/pics/cr32-action-hotsync.png
===================================================================
Nie można wyświetlić: plik binarny.
svn:mime-type = application/octet-stream

Zmiany atrybutów dla: kitchensync/src/pics/cr32-action-hotsync.png
___________________________________________________________________
Nazwa: svn:mime-type
   + application/octet-stream

Index: kitchensync/src/pics/cr64-app-mobile_phone.png
===================================================================
Nie można wyświetlić: plik binarny.
svn:mime-type = application/octet-stream

Zmiany atrybutów dla: kitchensync/src/pics/cr64-app-mobile_phone.png
___________________________________________________________________
Nazwa: svn:mime-type
   + application/octet-stream

Index: kitchensync/src/pics/hi48-app-kitchensync.png
===================================================================
Nie można wyświetlić: plik binarny.
svn:mime-type = application/octet-stream

Zmiany atrybutów dla: kitchensync/src/pics/hi48-app-kitchensync.png
___________________________________________________________________
Nazwa: svn:mime-type
   + application/octet-stream

Index: kitchensync/src/pics/cr128-app-mobile_phone.png
===================================================================
Nie można wyświetlić: plik binarny.
svn:mime-type = application/octet-stream

Zmiany atrybutów dla: kitchensync/src/pics/cr128-app-mobile_phone.png
___________________________________________________________________
Nazwa: svn:mime-type
   + application/octet-stream

Index: kitchensync/src/pics/cr16-action-hotsync.png
===================================================================
Nie można wyświetlić: plik binarny.
svn:mime-type = application/octet-stream

Zmiany atrybutów dla: kitchensync/src/pics/cr16-action-hotsync.png
___________________________________________________________________
Nazwa: svn:mime-type
   + application/octet-stream


Zmiany atrybutów dla: kitchensync/src/pics
___________________________________________________________________
Nazwa: svn:ignore
   + Makefile.in



Index: kitchensync/src/configguisyncmlobex.cpp
===================================================================
--- kitchensync/src/configguisyncmlobex.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 0)
+++ kitchensync/src/configguisyncmlobex.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -0,0 +1,320 @@
+/*
+    This file is part of KitchenSync.
+
+    Copyright (c) 2005 Cornelius Schumacher <schumacher@kde.org>
+    Copyright (c) 2006 Daniel Gollub <dgollub@suse.de>
+
+    This program is free software; you can redistribute it and/or modify
+    it under the terms of the GNU General Public License as published by
+    the Free Software Foundation; either version 2 of the License, or
+    (at your option) any later version.
+
+    This program is distributed in the hope that it will be useful,
+    but WITHOUT ANY WARRANTY; without even the implied warranty of
+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
+    GNU General Public License for more details.
+
+    You should have received a copy of the GNU General Public License
+    along with this program; if not, write to the Free Software
+    Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301,
+    USA.
+*/
+
+#include "configguisyncmlobex.h"
+
+#include <kcombobox.h>
+#include <kdialog.h>
+#include <klineedit.h>
+#include <klocale.h>
+#include <kurlrequester.h>
+
+#include <qlayout.h>
+#include <qcheckbox.h>
+#include <qcombobox.h>
+#include <qlabel.h>
+#include <qdom.h>
+#include <qspinbox.h>
+#include <qtabwidget.h>
+#include <qvbox.h>
+
+ConfigGuiSyncmlObex::ConfigGuiSyncmlObex( const QSync::Member &member, QWidget *parent )
+  : ConfigGui( member, parent )
+{
+  QTabWidget *tabWidget = new QTabWidget( this );
+  topLayout()->addWidget( tabWidget );
+
+  // Connection
+  QVBox *connectionWidget = new QVBox( this );
+  connectionWidget->setMargin( KDialog::marginHint() );
+  connectionWidget->setSpacing( 5 );
+
+  tabWidget->addTab( connectionWidget, i18n( "Connection" ) );
+
+  mConnection = new KComboBox( connectionWidget );
+
+  connect( mConnection, SIGNAL (activated( int ) ),
+           this, SLOT( slotConnectionChanged ( int ) ) );
+
+  mConnectionTypes.append( ConnectionType( 2, i18n( "Bluetooth" ) ) );
+  mConnectionTypes.append( ConnectionType( 5, i18n( "USB" ) ) );
+
+  ConnectionTypeList::ConstIterator it;
+  for ( it = mConnectionTypes.begin(); it != mConnectionTypes.end(); it++ )
+    mConnection->insertItem( (*it).second );
+
+  mBluetooth = new BluetoothWidget( connectionWidget );
+  mBluetooth->hide();
+
+  mUsb = new UsbWidget( connectionWidget );
+  mUsb->hide();
+
+  connectionWidget->setStretchFactor( mBluetooth, 1 );
+  connectionWidget->setStretchFactor( mUsb, 1 );
+
+  // Databases
+  QWidget *databaseWidget = new QWidget( tabWidget );
+  QVBoxLayout *databaseLayout = new QVBoxLayout( databaseWidget,
+                                                 KDialog::marginHint(), KDialog::spacingHint() );
+
+  tabWidget->addTab( databaseWidget, i18n( "Databases" ) );
+
+  mGridLayout = new QGridLayout( databaseLayout );
+  addLineEdit( databaseWidget, i18n("Contact Database:"), &mContactDb, 0 );
+  addLineEdit( databaseWidget, i18n("Calendar Database:"), &mCalendarDb, 1 );
+  addLineEdit( databaseWidget, i18n("Note Database:"), &mNoteDb, 2 );
+
+  mContactDb->insertItem( "addressbook" );
+  mContactDb->insertItem( "contacts" );
+
+  mCalendarDb->insertItem( "agenda" );
+  mCalendarDb->insertItem( "calendar" );
+
+  mNoteDb->insertItem( "notes" );
+
+  // Options
+  QWidget *optionsWidget = new QWidget( tabWidget );
+  QVBoxLayout *optionsLayout = new QVBoxLayout( optionsWidget,
+                                                KDialog::marginHint(), KDialog::spacingHint() );
+
+  tabWidget->addTab( optionsWidget, i18n( "Options" ) );
+
+  mGridLayout = new QGridLayout( optionsLayout );
+
+  QLabel *label = new QLabel( i18n("User name:"), optionsWidget );
+  mGridLayout->addWidget( label, 0, 0 );
+
+  mUsername = new KLineEdit( optionsWidget );
+  mGridLayout->addWidget( mUsername, 0, 1 );
+
+  label = new QLabel( i18n("Password:"), optionsWidget );
+  mGridLayout->addWidget( label, 1, 0 );
+
+  mPassword = new KLineEdit( optionsWidget );
+  mPassword->setEchoMode( QLineEdit::Password );
+  mGridLayout->addWidget( mPassword, 1, 1 );
+
+  mUseStringTable = new QCheckBox( i18n("Use String Table"), optionsWidget );
+  mGridLayout->addMultiCellWidget( mUseStringTable, 2, 2, 0, 1 );
+
+  mOnlyReplace = new QCheckBox( i18n("Only Replace Entries"), optionsWidget );
+  mGridLayout->addMultiCellWidget( mOnlyReplace, 3, 3, 0, 1 );
+
+  // SynML Version
+  label = new QLabel( i18n("SyncML Version:"), optionsWidget );
+  mGridLayout->addWidget( label, 4, 0 );
+
+  mSyncmlVersion = new QComboBox( optionsWidget );
+  mGridLayout->addWidget( mSyncmlVersion, 4, 1 );
+
+  mSyncmlVersions.append( SyncmlVersion( 0,  i18n( "1.0" ) ) );
+  mSyncmlVersions.append( SyncmlVersion( 1,  i18n( "1.1" ) ) );
+  mSyncmlVersions.append( SyncmlVersion( 2,  i18n( "1.2" ) ) );
+
+  SyncmlVersionList::ConstIterator itVersion;
+  for ( itVersion = mSyncmlVersions.begin(); itVersion != mSyncmlVersions.end(); itVersion++ )
+    mSyncmlVersion->insertItem( (*itVersion).second );
+
+  // WBXML
+  mWbxml = new QCheckBox( i18n("WAP Binary XML"), optionsWidget );
+  mGridLayout->addMultiCellWidget( mWbxml, 12, 12, 0, 1 );
+
+  // Identifier
+  label = new QLabel( i18n("Software Identifier:"), optionsWidget );
+  mGridLayout->addWidget( label, 13, 0 );
+
+  mIdentifier = new KComboBox( true, optionsWidget );
+  mGridLayout->addWidget( mIdentifier, 13, 1 );
+
+  mIdentifier->insertItem( "" );
+  mIdentifier->insertItem( "PC Suite" );
+
+  // recvLimit
+  label = new QLabel( i18n("Receive Limit:"), optionsWidget );
+  mGridLayout->addWidget( label, 14, 0 );
+
+  mRecvLimit = new QSpinBox( optionsWidget );
+  mRecvLimit->setMinValue( 1 );
+  mRecvLimit->setMaxValue( 65536 );
+  mGridLayout->addWidget( mRecvLimit, 14, 1 );
+
+  // maxObjSize
+  label = new QLabel( i18n("Maximum Object Size"), optionsWidget );
+  mGridLayout->addWidget( label, 15, 0 );
+
+  mMaxObjSize = new QSpinBox( optionsWidget );
+  mMaxObjSize->setMinValue( 1 );
+  mMaxObjSize->setMaxValue( 65536 );
+  mGridLayout->addWidget( mMaxObjSize, 15, 1 );
+
+  topLayout()->addStretch( 1 );
+}
+
+void ConfigGuiSyncmlObex::slotConnectionChanged( int pos )
+{
+  mUsb->hide();
+  mBluetooth->hide();
+
+  if ( pos == 0 )
+    mBluetooth->show();
+  else if ( pos == 1 )
+    mUsb->show();
+}
+
+void ConfigGuiSyncmlObex::load( const QString &xml )
+{
+  QDomDocument document;
+  document.setContent( xml );
+
+  QDomElement docElement = document.documentElement();
+
+  QDomNode node;
+  for( node = docElement.firstChild(); !node.isNull(); node = node.nextSibling() ) {
+    QDomElement element = node.toElement();
+    if ( element.tagName() == "username" ) {
+      mUsername->setText( element.text() );
+    } else if ( element.tagName() == "password" ) {
+      mPassword->setText( element.text() );
+    } else if ( element.tagName() == "type" ) {
+      for ( uint i = 0; i < mConnectionTypes.count(); i++ ) {
+        if ( mConnectionTypes[i].first == element.text().toInt() ) {
+          mConnection->setCurrentItem( i );
+          slotConnectionChanged( i );
+          break;
+        }
+      }
+    } else if ( element.tagName() == "version" ) {
+      for ( uint i = 0; i < mSyncmlVersions.count(); i++ ) {
+        if ( mSyncmlVersions[i].first == element.text().toInt() ) {
+          mSyncmlVersion->setCurrentItem( i );
+          break;
+        }
+      }
+    } else if ( element.tagName() == "bluetooth_address" ) {
+      if ( mBluetooth ) mBluetooth->setAddress( element.text() );
+    } else if ( element.tagName() == "bluetooth_channel" ) {
+      if ( mBluetooth ) mBluetooth->setChannel( element.text() );
+    } else if ( element.tagName() == "identifier" ) {
+      if ( mIdentifier ) mIdentifier->setCurrentText( element.text() );
+    } else if ( element.tagName() == "interface" ) {
+      if ( mUsb ) mUsb->setInterface( element.text().toInt() );
+    } else if ( element.tagName() == "wbxml" ) {
+      if ( mWbxml) mWbxml->setChecked( element.text() == "1" );
+    } else if ( element.tagName() == "recvLimit" ) {
+      if ( mRecvLimit ) mRecvLimit->setValue( element.text().toInt() );
+    } else if ( element.tagName() == "maxObjSize" ) {
+      if ( mMaxObjSize ) mMaxObjSize->setValue( element.text().toInt() );
+    } else if ( element.tagName() == "usestringtable" ) {
+      mUseStringTable->setChecked( element.text() == "1" );
+    } else if ( element.tagName() == "onlyreplace" ) {
+      mOnlyReplace->setChecked( element.text() == "1" );
+    } else if ( element.tagName() == "contact_db" ) {
+      mContactDb->setCurrentText( element.text() );
+    } else if ( element.tagName() == "calendar_db" ) {
+      mCalendarDb->setCurrentText( element.text() );
+    } else if ( element.tagName() == "note_db" ) {
+      mNoteDb->setCurrentText( element.text() );
+    }
+  }
+}
+
+QString ConfigGuiSyncmlObex::save()
+{
+  QString xml;
+  xml = "<config>\n";
+  xml += "<username>" + mUsername->text() + "</username>\n";
+  xml += "<password>" + mPassword->text() + "</password>\n";
+  ConnectionTypeList::ConstIterator it;
+  for ( it = mConnectionTypes.begin(); it != mConnectionTypes.end(); it++ ) {
+    if ( mConnection->currentText() == (*it).second ) {
+      xml += "<type>" + QString("%1").arg((*it).first) + "</type>\n";
+      break;
+    }
+  }
+
+  // Bluetooth Address
+  xml += "<bluetooth_address>" + mBluetooth->address() + "</bluetooth_address>\n";
+
+  // Bluetooth Channel
+  xml += "<bluetooth_channel>" + mBluetooth->channel() + "</bluetooth_channel>\n";
+
+  // USB Interface
+  xml += "<interface>" + QString::number( mUsb->interface() ) +"</interface>\n";
+
+  // SyncML Version
+  SyncmlVersionList::ConstIterator itVersion;
+  for ( itVersion = mSyncmlVersions.begin(); itVersion != mSyncmlVersions.end(); itVersion++ ) {
+    if ( mSyncmlVersion->currentText() == (*itVersion).second ) {
+      xml += "<version>" + QString("%1").arg((*itVersion).first) + "</version>\n";
+      break;
+    }
+  }
+
+  // (Software) Identifier
+  xml += "<identifier>" + mIdentifier->currentText() + "</identifier>\n";
+
+  // WBXML
+  xml += "<wbxml>";
+  if ( mWbxml->isChecked() )
+    xml += "1";
+  else
+    xml += "0";
+  xml += "</wbxml>\n";
+
+  // Receive Limit
+  xml += "<recvLimit>" + QString::number( mRecvLimit->value() ) + "</recvLimit>\n";
+
+  // Maximal Object Size
+  xml += "<maxObjSize>" + QString::number( mMaxObjSize->value() ) + "</maxObjSize>\n";
+
+  xml += "<usestringtable>";
+  if ( mUseStringTable->isChecked() )
+    xml += "1";
+  else
+    xml += "0";
+  xml += "</usestringtable>\n";
+
+  xml += "<onlyreplace>";
+  if ( mOnlyReplace->isChecked() )
+    xml += "1";
+  else
+    xml += "0";
+  xml += "</onlyreplace>\n";
+
+  xml += "<contact_db>" + mContactDb->currentText() + "</contact_db>\n";
+  xml += "<calendar_db>" + mCalendarDb->currentText() + "</calendar_db>\n";
+  xml += "<note_db>" + mNoteDb->currentText() + "</note_db>\n";
+  xml += "</config>";
+
+  return xml;
+}
+
+void ConfigGuiSyncmlObex::addLineEdit( QWidget *parent, const QString &text, KComboBox **edit, int row )
+{
+  QLabel *label = new QLabel( text, parent );
+  mGridLayout->addWidget( label, row, 0 );
+
+  *edit = new KComboBox( true, parent );
+  mGridLayout->addWidget( *edit, row, 1 );
+}
+
+#include "configguisyncmlobex.moc"
Index: kitchensync/src/configguifile.h
===================================================================
--- kitchensync/src/configguifile.h	(.../tags/KDE/3.5.6/kdepim)	(wersja 0)
+++ kitchensync/src/configguifile.h	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -0,0 +1,42 @@
+/*
+    This file is part of KitchenSync.
+
+    Copyright (c) 2005 Cornelius Schumacher <schumacher@kde.org>
+
+    This program is free software; you can redistribute it and/or modify
+    it under the terms of the GNU General Public License as published by
+    the Free Software Foundation; either version 2 of the License, or
+    (at your option) any later version.
+
+    This program is distributed in the hope that it will be useful,
+    but WITHOUT ANY WARRANTY; without even the implied warranty of
+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
+    GNU General Public License for more details.
+
+    You should have received a copy of the GNU General Public License
+    along with this program; if not, write to the Free Software
+    Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301,
+    USA.
+*/
+#ifndef CONFIGGUIFILE_H
+#define CONFIGGUIFILE_H
+
+#include "configgui.h"
+
+class KURLRequester;
+class QCheckBox;
+
+class ConfigGuiFile : public ConfigGui
+{
+  public:
+    ConfigGuiFile( const QSync::Member &, QWidget *parent );
+
+    void load( const QString &xml );
+    QString save();
+
+  private:
+    KURLRequester *mFilename;
+    QCheckBox *mRecursive;
+};
+
+#endif
Index: kitchensync/src/groupitem.h
===================================================================
--- kitchensync/src/groupitem.h	(.../tags/KDE/3.5.6/kdepim)	(wersja 0)
+++ kitchensync/src/groupitem.h	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -0,0 +1,111 @@
+/*
+    This file is part of KitchenSync.
+
+    Copyright (c) 2005 Tobias Koenig <tokoe@kde.org>
+
+    This program is free software; you can redistribute it and/or modify
+    it under the terms of the GNU General Public License as published by
+    the Free Software Foundation; either version 2 of the License, or
+    (at your option) any later version.
+
+    This program is distributed in the hope that it will be useful,
+    but WITHOUT ANY WARRANTY; without even the implied warranty of
+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
+    GNU General Public License for more details.
+
+    You should have received a copy of the GNU General Public License
+    along with this program; if not, write to the Free Software
+    Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301, USA.
+*/
+
+#ifndef GROUPITEM_H
+#define GROUPITEM_H
+
+#include "syncprocess.h"
+
+#include <libqopensync/callbackhandler.h>
+
+#include <kwidgetlist.h>
+
+namespace QSync {
+class Engine;
+}
+
+class MemberItem;
+class KURLLabel;
+class QLabel;
+class QProgressBar;
+class QVBox;
+
+class GroupItem : public KWidgetListItem
+{
+  Q_OBJECT
+
+  public:
+    GroupItem( KWidgetList*, SyncProcess *syncProcess );
+    ~GroupItem();
+
+    SyncProcess *syncProcess() const { return mSyncProcess; }
+
+    void update();
+
+    void clear();
+
+  signals:
+    void synchronizeGroup( SyncProcess *syncProcess );
+    void abortSynchronizeGroup( SyncProcess *syncProcess );
+    void configureGroup( SyncProcess *syncProcess );
+
+  protected slots:
+    void conflict( QSync::SyncMapping );
+    void change( const QSync::SyncChangeUpdate& );
+    void mapping( const QSync::SyncMappingUpdate& );
+    void engine( const QSync::SyncEngineUpdate& );
+    void member( const QSync::SyncMemberUpdate& );
+
+    void synchronize();
+    void configure();
+
+    void engineChanged( QSync::Engine *engine );
+
+  private:
+    SyncProcess *mSyncProcess;
+    QSync::CallbackHandler *mCallbackHandler;
+    QValueList<MemberItem*> mMemberItems;
+
+    QLabel *mIcon;
+    QLabel *mGroupName;
+    QLabel *mStatus;
+    QLabel *mTime;
+    KURLLabel *mSyncAction;
+    KURLLabel *mConfigureAction;
+    QVBox *mBox;
+    QProgressBar *mProgressBar;
+
+    int mProcessedItems;
+    int mMaxProcessedItems;
+    bool mSynchronizing;
+};
+
+class MemberItem : public QWidget
+{
+  public:
+    MemberItem( QWidget *parent, SyncProcess *syncProcess,
+                const QSync::Member &member );
+
+    SyncProcess* syncProcess() const { return mSyncProcess; }
+    QSync::Member member() const { return mMember; }
+
+    void setStatusMessage( const QString &msg );
+
+  private:
+    SyncProcess *mSyncProcess;
+    QSync::Member mMember;
+
+    QLabel *mIcon;
+    QLabel *mMemberName;
+    QLabel *mDescription;
+    QLabel *mStatus;
+};
+
+#endif
Index: kitchensync/src/mainwindow.h
===================================================================
--- kitchensync/src/mainwindow.h	(.../tags/KDE/3.5.6/kdepim)	(wersja 0)
+++ kitchensync/src/mainwindow.h	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -0,0 +1,46 @@
+/*
+    This file is part of KitchenSync.
+
+    Copyright (c) 2005 Tobias Koenig <tokoe@kde.org>
+
+    This program is free software; you can redistribute it and/or modify
+    it under the terms of the GNU General Public License as published by
+    the Free Software Foundation; either version 2 of the License, or
+    (at your option) any later version.
+
+    This program is distributed in the hope that it will be useful,
+    but WITHOUT ANY WARRANTY; without even the implied warranty of
+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
+    GNU General Public License for more details.
+
+    You should have received a copy of the GNU General Public License
+    along with this program; if not, write to the Free Software
+    Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301, USA.
+*/
+
+#ifndef MAINWINDOW_H
+#define MAINWINDOW_H
+
+#include <kmainwindow.h>
+
+class MainWidget;
+
+/**
+  This class serves as the main window for Kitchensync. It handles the
+  menus, toolbars, and status bars.
+ */
+class MainWindow : public KMainWindow
+{
+  Q_OBJECT
+
+  public:
+    MainWindow();
+    virtual ~MainWindow();
+
+  private:
+    void initActions();
+
+    MainWidget *mWidget;
+};
+
+#endif
Index: kitchensync/src/memberinfo.cpp
===================================================================
--- kitchensync/src/memberinfo.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 0)
+++ kitchensync/src/memberinfo.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -0,0 +1,96 @@
+/*
+    This file is part of KitchenSync.
+
+    Copyright (c) 2005 Cornelius Schumacher <schumacher@kde.org>
+
+    This program is free software; you can redistribute it and/or modify
+    it under the terms of the GNU General Public License as published by
+    the Free Software Foundation; either version 2 of the License, or
+    (at your option) any later version.
+
+    This program is distributed in the hope that it will be useful,
+    but WITHOUT ANY WARRANTY; without even the implied warranty of
+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
+    GNU General Public License for more details.
+
+    You should have received a copy of the GNU General Public License
+    along with this program; if not, write to the Free Software
+    Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301,
+    USA.
+*/
+
+#include "memberinfo.h"
+
+#include <kglobal.h>
+#include <kiconloader.h>
+#include <klocale.h>
+
+MemberInfo::MemberInfo( const QSync::Member &member )
+  : mMember( member )
+{
+}
+
+QPixmap MemberInfo::smallIcon() const
+{
+  return KGlobal::iconLoader()->loadIcon( iconName(), KIcon::Small );
+}
+
+QPixmap MemberInfo::desktopIcon() const
+{
+  return KGlobal::iconLoader()->loadIcon( iconName(), KIcon::Desktop );
+}
+
+QString MemberInfo::iconName() const
+{
+  return pluginIconName( mMember.pluginName() );
+}
+
+QString MemberInfo::name() const
+{
+  static QMap<QString, QString> nameMap;
+  if ( nameMap.isEmpty() ) {
+    nameMap.insert( "file-sync", i18n( "File" ) );
+    nameMap.insert( "palm-sync", i18n( "Palm" ) );
+    nameMap.insert( "kdepim-sync", i18n( "KDE PIM" ) );
+    nameMap.insert( "kio-sync", i18n( "Remote File" ) );
+    nameMap.insert( "irmc-sync", i18n( "Mobile Phone" ) );
+    nameMap.insert( "evo2-sync", i18n( "Evolution" ) );
+    nameMap.insert( "opie-sync", i18n( "Handheld" ) );
+    nameMap.insert( "ldap-sync", i18n( "LDAP" ) );
+    nameMap.insert( "syncml-obex-client", i18n( "Mobile Phone" ) );
+    nameMap.insert( "syncml-http-server", i18n( "Mobile Phone" ) );
+    nameMap.insert( "moto-sync", i18n( "Mobile Phone" ) );
+    nameMap.insert( "gnokii-sync", i18n( "Mobile Phone" ) );
+    nameMap.insert( "google-calendar", i18n( "Google Calendar" ) );
+    nameMap.insert( "gpe-sync", i18n( "Handheld" ) );
+    nameMap.insert( "sunbird-sync", i18n( "Sunbird Calendar" ) );
+
+  }
+
+  if ( mMember.name().isEmpty() )
+    return nameMap[ mMember.pluginName() ] + " (" + QString::number( mMember.id() ) + ") ";
+  else
+    return mMember.name();
+}
+
+QString MemberInfo::pluginIconName( const QString &pluginName )
+{
+  if ( pluginName == "file-sync" ) return "folder";
+  if ( pluginName == "palm-sync" ) return "pda_black";
+  if ( pluginName == "kdepim-sync" ) return "kontact";
+  if ( pluginName == "kio-sync" ) return "network";
+  if ( pluginName == "irmc-sync" ) return "mobile_phone";
+  if ( pluginName == "evo2-sync" ) return "evolution";
+  if ( pluginName == "opie-sync" ) return "pda_blue";
+  if ( pluginName == "ldap-sync" ) return "contents2";
+  if ( pluginName == "syncml-obex-client" ) return "mobile_phone";
+  if ( pluginName == "syncml-http-server" ) return "pda_blue";
+  if ( pluginName == "moto-sync" ) return "mobile_phone";
+  if ( pluginName == "gnokii-sync" ) return "mobile_phone";
+  if ( pluginName == "google-calendar" ) return "www";
+  if ( pluginName == "gpe-sync" ) return "pda_blue";
+  if ( pluginName == "sunbird-sync" ) return "www";
+
+
+  return QString::null;
+}
Index: kitchensync/src/main.cpp
===================================================================
--- kitchensync/src/main.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 0)
+++ kitchensync/src/main.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -0,0 +1,58 @@
+/*
+    This file is part of KitchenSync.
+
+    Copyright (c) 2005 Tobias Koenig <tokoe@kde.org>
+
+    This program is free software; you can redistribute it and/or modify
+    it under the terms of the GNU General Public License as published by
+    the Free Software Foundation; either version 2 of the License, or
+    (at your option) any later version.
+
+    This program is distributed in the hope that it will be useful,
+    but WITHOUT ANY WARRANTY; without even the implied warranty of
+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
+    GNU General Public License for more details.
+
+    You should have received a copy of the GNU General Public License
+    along with this program; if not, write to the Free Software
+    Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301, USA.
+*/
+
+#include <kdebug.h>
+#include <kaboutdata.h>
+#include <kcmdlineargs.h>
+#include <kuniqueapplication.h>
+#include <stdlib.h>
+
+#include "mainwidget.h"
+#include "mainwindow.h"
+
+static KCmdLineOptions options[] =
+{
+  KCmdLineLastOption
+};
+
+int main( int argc, char **argv )
+{
+  KAboutData *about = MainWidget::aboutData();
+
+  KCmdLineArgs::init( argc, argv, about );
+  KCmdLineArgs::addCmdLineOptions( options );
+  KUniqueApplication::addCmdLineOptions();
+
+  KUniqueApplication::addCmdLineOptions();
+
+  if( !KUniqueApplication::start() ) {
+    kdDebug() << "kitchensync already runs." << endl;
+    exit( 0 );
+  };
+
+  KUniqueApplication app;
+  
+  KGlobal::locale()->insertCatalogue( "libkcal" );
+
+  MainWindow *mainWindow = new MainWindow;
+  mainWindow->show();
+
+  app.exec();
+}
Index: kitchensync/src/htmldiffalgodisplay.cpp
===================================================================
--- kitchensync/src/htmldiffalgodisplay.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 0)
+++ kitchensync/src/htmldiffalgodisplay.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -0,0 +1,97 @@
+/*
+    This file is part of libkdepim.
+
+    Copyright (c) 2004 Tobias Koenig <tokoe@kde.org>
+
+    This library is free software; you can redistribute it and/or
+    modify it under the terms of the GNU Library General Public
+    License as published by the Free Software Foundation; either
+    version 2 of the License, or (at your option) any later version.
+
+    This library is distributed in the hope that it will be useful,
+    but WITHOUT ANY WARRANTY; without even the implied warranty of
+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
+    Library General Public License for more details.
+
+    You should have received a copy of the GNU Library General Public License
+    along with this library; see the file COPYING.LIB.  If not, write to
+    the Free Software Foundation, Inc., 51 Franklin Street, Fifth Floor,
+    Boston, MA 02110-1301, USA.
+*/
+
+#include <kglobalsettings.h>
+
+#include "htmldiffalgodisplay.h"
+
+using namespace KSync;
+
+static QString textToHTML( const QString &text )
+{
+  return QStyleSheet::convertFromPlainText( text );
+}
+
+HTMLDiffAlgoDisplay::HTMLDiffAlgoDisplay( QWidget *parent )
+  : KTextBrowser( parent )
+{
+  setWrapPolicy( QTextEdit::AtWordBoundary );
+  setVScrollBarMode( QScrollView::AlwaysOff );
+  setHScrollBarMode( QScrollView::AlwaysOff );
+}
+
+void HTMLDiffAlgoDisplay::begin()
+{
+  clear();
+  mText = "";
+
+  mText.append( "<html>" );
+  mText.append( QString( "<body text=\"%1\" bgcolor=\"%2\">" )
+               .arg( KGlobalSettings::textColor().name() )
+               .arg( KGlobalSettings::baseColor().name() ) );
+
+  mText.append( "<center><table>" );
+  mText.append( QString( "<tr><th></th><th align=\"center\">%1</th><td>         </td><th align=\"center\">%2</th></tr>" )
+               .arg( mLeftTitle )
+               .arg( mRightTitle ) );
+}
+
+void HTMLDiffAlgoDisplay::end()
+{
+  mText.append( "</table></center>"
+                "</body>"
+                "</html>" );
+
+  setText( mText );
+}
+
+void HTMLDiffAlgoDisplay::setLeftSourceTitle( const QString &title )
+{
+  mLeftTitle = title;
+}
+
+void HTMLDiffAlgoDisplay::setRightSourceTitle( const QString &title )
+{
+  mRightTitle = title;
+}
+
+void HTMLDiffAlgoDisplay::additionalLeftField( const QString &id, const QString &value )
+{
+  mText.append( QString( "<tr><td align=\"right\"><b>%1:</b></td><td bgcolor=\"#9cff83\">%2</td><td></td><td></td></tr>" )
+               .arg( id )
+               .arg( textToHTML( value ) ) );
+}
+
+void HTMLDiffAlgoDisplay::additionalRightField( const QString &id, const QString &value )
+{
+  mText.append( QString( "<tr><td align=\"right\"><b>%1:</b></td><td></td><td></td><td bgcolor=\"#9cff83\">%2</td></tr>" )
+               .arg( id )
+               .arg( textToHTML( value ) ) );
+}
+
+void HTMLDiffAlgoDisplay::conflictField( const QString &id, const QString &leftValue,
+                                          const QString &rightValue )
+{
+  mText.append( QString( "<tr><td align=\"right\"><b>%1:</b></td><td bgcolor=\"#ff8686\">%2</td><td></td><td bgcolor=\"#ff8686\">%3</td></tr>" )
+               .arg( id )
+               .arg( textToHTML( leftValue ) )
+               .arg( textToHTML( rightValue ) ) );
+}
Index: kitchensync/src/groupconfig.h
===================================================================
--- kitchensync/src/groupconfig.h	(.../tags/KDE/3.5.6/kdepim)	(wersja 0)
+++ kitchensync/src/groupconfig.h	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -0,0 +1,62 @@
+/*
+    This file is part of KitchenSync.
+
+    Copyright (c) 2005 Cornelius Schumacher <schumacher@kde.org>
+
+    This program is free software; you can redistribute it and/or modify
+    it under the terms of the GNU General Public License as published by
+    the Free Software Foundation; either version 2 of the License, or
+    (at your option) any later version.
+
+    This program is distributed in the hope that it will be useful,
+    but WITHOUT ANY WARRANTY; without even the implied warranty of
+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
+    GNU General Public License for more details.
+
+    You should have received a copy of the GNU General Public License
+    along with this program; if not, write to the Free Software
+    Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301, USA.
+*/
+#ifndef GROUPCONFIG_H
+#define GROUPCONFIG_H
+
+#include <qwidget.h>
+#include <qvaluelist.h>
+
+class QFrame;
+class QLabel;
+class KJanusWidget;
+
+class GroupConfigCommon;
+class MemberConfig;
+class SyncProcess;
+
+class GroupConfig : public QWidget
+{
+  Q_OBJECT
+
+  public:
+    GroupConfig( QWidget *parent );
+
+    void setSyncProcess( SyncProcess *process );
+
+    void updateMembers();
+
+    void saveConfig();
+
+  protected slots:
+    void addMember();
+
+  private:
+    QLabel *mNameLabel;
+
+    KJanusWidget *mMemberView;
+
+    SyncProcess *mProcess;
+
+    GroupConfigCommon *mCommonConfig;
+    QValueList<MemberConfig *> mMemberConfigs;
+    QValueList<QFrame *> mConfigPages;
+};
+
+#endif
Index: kitchensync/src/mainwidget.cpp
===================================================================
--- kitchensync/src/mainwidget.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 0)
+++ kitchensync/src/mainwidget.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -0,0 +1,191 @@
+/*
+    This file is part of KitchenSync.
+
+    Copyright (c) 2005 Tobias Koenig <tokoe@kde.org>
+    Copyright (c) 2005 Cornelius Schumacher <schumacher@kde.org>
+
+    This program is free software; you can redistribute it and/or modify
+    it under the terms of the GNU General Public License as published by
+    the Free Software Foundation; either version 2 of the License, or
+    (at your option) any later version.
+
+    This program is distributed in the hope that it will be useful,
+    but WITHOUT ANY WARRANTY; without even the implied warranty of
+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
+    GNU General Public License for more details.
+
+    You should have received a copy of the GNU General Public License
+    along with this program; if not, write to the Free Software
+    Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301, USA.
+*/
+
+#include "mainwidget.h"
+
+#include "groupconfigdialog.h"
+#include "groupview.h"
+#include "syncprocess.h"
+#include "syncprocessmanager.h"
+
+#include <libqopensync/environment.h>
+
+#include <kaboutdata.h>
+#include <kaction.h>
+#include <kdebug.h>
+#include <kinputdialog.h>
+#include <klistview.h>
+#include <klocale.h>
+#include <kmessagebox.h>
+#include <kstdaction.h>
+#include <kxmlguiclient.h>
+
+#include <qlayout.h>
+
+MainWidget::MainWidget( KXMLGUIClient *guiClient, QWidget *widget, const char *name )
+  : QWidget( widget, name ), mGUIClient( guiClient )
+{
+  initGUI();
+  initActions();
+
+  /** apply object type filter hack **/
+  int count = SyncProcessManager::self()->count();
+  for ( int i = 0; i < count; ++i ) {
+    SyncProcessManager::self()->at( i )->applyObjectTypeFilter();
+  }
+  /** apply object type filter hack **/
+
+  mGroupView->updateView();
+
+  connect( SyncProcessManager::self(), SIGNAL( changed() ),
+           mGroupView, SLOT( updateView() ) );
+  connect( SyncProcessManager::self(), SIGNAL( syncProcessChanged( SyncProcess* ) ),
+           mGroupView, SLOT( updateSyncProcess( SyncProcess* ) ) );
+
+  enableActions();
+}
+
+MainWidget::~MainWidget()
+{
+}
+
+KXMLGUIClient *MainWidget::guiClient() const
+{
+  return mGUIClient;
+}
+
+KAboutData *MainWidget::aboutData()
+{
+  KAboutData *about = new KAboutData( "kitchensync", I18N_NOOP( "KitchenSync" ),
+                                      "0.1", I18N_NOOP( "The KDE Syncing Application" ),
+                                      KAboutData::License_GPL_V2,
+                                      I18N_NOOP( "(c) 2005, The KDE PIM Team" ) );
+  about->addAuthor( "Tobias Koenig", I18N_NOOP( "Current maintainer" ), "tokoe@kde.org" );
+  about->addAuthor( "Cornelius Schumacher", 0, "schumacher@kde.org" );
+
+  return about;
+}
+
+void MainWidget::initGUI()
+{
+  QVBoxLayout *topLayout = new QVBoxLayout( this );
+
+  mGroupView = new GroupView( this );
+  topLayout->addWidget( mGroupView );
+
+  connect( mGroupView, SIGNAL( addGroup() ), SLOT( addGroup() ) );
+  connect( mGroupView, SIGNAL( synchronizeGroup( SyncProcess* ) ),
+           SLOT( sync( SyncProcess* ) ) );
+  connect( mGroupView, SIGNAL( abortSynchronizeGroup( SyncProcess* ) ),
+           SLOT( abortSync( SyncProcess* ) ) );
+  connect( mGroupView, SIGNAL( configureGroup( SyncProcess* ) ),
+           SLOT( editGroup( SyncProcess* ) ) );
+}
+
+void MainWidget::initActions()
+{
+  mActionSynchronize = new KAction( i18n("Synchronize"), "hotsync", 0, this, SLOT( sync() ),
+                                    mGUIClient->actionCollection(), "sync" );
+  mActionAddGroup = new KAction( i18n("Add Group..."), "filenew", 0, this, SLOT( addGroup() ),
+                                 mGUIClient->actionCollection(), "add_group" );
+  mActionDeleteGroup = new KAction( i18n("Delete Group..."), "editdelete", 0, this, SLOT( deleteGroup() ),
+                                    mGUIClient->actionCollection(), "delete_group" );
+  mActionEditGroup = new KAction( i18n("Edit Group..."), "edit", 0, this, SLOT( editGroup() ),
+                                  mGUIClient->actionCollection(), "edit_group" );
+}
+
+void MainWidget::enableActions()
+{
+  bool state = ( SyncProcessManager::self()->count() > 0 );
+
+  mActionSynchronize->setEnabled( state );
+  mActionDeleteGroup->setEnabled( state );
+  mActionEditGroup->setEnabled( state );
+}
+
+void MainWidget::addGroup()
+{
+  bool ok;
+  QString name = KInputDialog::getText( i18n("Create Synchronization Group"),
+    i18n("Name for new synchronization group."), QString::null, &ok, this );
+  if ( ok ) {
+    SyncProcessManager::self()->addGroup( name );
+    enableActions();
+
+    SyncProcess *process = SyncProcessManager::self()->byGroupName( name );
+    if ( process )
+      editGroup( process );
+  }
+}
+
+void MainWidget::deleteGroup()
+{
+  SyncProcess *syncProcess = mGroupView->selectedSyncProcess();
+  if ( syncProcess ) {
+    int result = KMessageBox::warningContinueCancel( this,
+      i18n("Delete synchronization group '%1'?").arg( syncProcess->group().name() ) );
+    if ( result == KMessageBox::Continue ) {
+      SyncProcessManager::self()->remove( syncProcess );
+      enableActions();
+    }
+  }
+}
+
+void MainWidget::editGroup()
+{
+  editGroup( mGroupView->selectedSyncProcess() );
+}
+
+void MainWidget::editGroup( SyncProcess *syncProcess )
+{
+  if ( syncProcess ) {
+    GroupConfigDialog dlg( this, syncProcess );
+    dlg.exec();
+
+    enableActions();
+  }
+}
+
+void MainWidget::sync()
+{
+  sync( mGroupView->selectedSyncProcess() );
+}
+
+void MainWidget::sync( SyncProcess *syncProcess )
+{
+  if ( syncProcess ) {
+    syncProcess->reinitEngine();
+    QSync::Result result = syncProcess->engine()->synchronize();
+    if ( result ) {
+      qDebug( "%s", result.message().latin1() );
+    } else {
+      qDebug( "synchronization worked" );
+    }
+  }
+}
+
+void MainWidget::abortSync( SyncProcess *syncProcess )
+{
+  if ( syncProcess )
+    syncProcess->engine()->abort();
+}
+
+#include "mainwidget.moc"
Index: kitchensync/src/groupconfigcommon.cpp
===================================================================
--- kitchensync/src/groupconfigcommon.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 0)
+++ kitchensync/src/groupconfigcommon.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -0,0 +1,158 @@
+/*
+    This file is part of KitchenSync.
+
+    Copyright (c) 2005 Cornelius Schumacher <schumacher@kde.org>
+
+    This program is free software; you can redistribute it and/or modify
+    it under the terms of the GNU General Public License as published by
+    the Free Software Foundation; either version 2 of the License, or
+    (at your option) any later version.
+
+    This program is distributed in the hope that it will be useful,
+    but WITHOUT ANY WARRANTY; without even the implied warranty of
+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
+    GNU General Public License for more details.
+
+    You should have received a copy of the GNU General Public License
+    along with this program; if not, write to the Free Software
+    Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301,
+    USA.
+*/
+
+
+#include <kdialog.h>
+#include <klineedit.h>
+#include <klocale.h>
+#include <kdebug.h>
+
+#include <qlabel.h>
+#include <qlayout.h>
+#include <qcheckbox.h>
+
+#include <libqopensync/group.h>
+#include <libqopensync/conversion.h>
+#include <libqopensync/environment.h>
+
+#include "syncprocess.h"
+#include "syncprocessmanager.h"
+
+#include "groupconfigcommon.h"
+
+ObjectTypeSelector::ObjectTypeSelector( QWidget *parent )
+  : QWidget( parent )
+{
+  QGridLayout *layout = new QGridLayout( this );
+  layout->setMargin( 0 );
+
+  const QSync::Conversion conversion = SyncProcessManager::self()->environment()->conversion();
+
+  QMap<QString, QString> objectTypeMap;
+  objectTypeMap.insert( "contact", i18n( "Contacts" ) );
+  objectTypeMap.insert( "event", i18n( "Events" ) );
+  objectTypeMap.insert( "todo", i18n( "To-dos" ) );
+  objectTypeMap.insert( "note", i18n( "Notes" ) );
+
+  QStringList objectTypes = conversion.objectTypes();
+
+  // reorder the entries so that contact and event are the first one
+  qHeapSort( objectTypes );
+
+  QStringList reoderedObjectTypes, stack;
+  for ( uint i = 0; i < objectTypes.count(); ++i ) {
+    if ( objectTypes[ i ] == "contact" || objectTypes[ i ] == "event" )
+      reoderedObjectTypes.append( objectTypes[ i ] );
+    else
+      stack.append( objectTypes[ i ] );
+  }
+  reoderedObjectTypes += stack;
+
+  QStringList::ConstIterator it;
+
+  int row = 0;
+  int col = 0;
+  for( it = reoderedObjectTypes.begin(); it != reoderedObjectTypes.end(); ++it ) {
+    QString objectType = *it;
+
+    // Don't display object type "data". Object type "data" is a kind of wildcard - so don't filter * 
+    if ( objectType == "data" )
+      continue;
+
+    QCheckBox *objectCheckBox = new QCheckBox( objectTypeMap[ objectType ], this );
+    layout->addWidget( objectCheckBox, row, col );
+    mObjectTypeChecks.insert( objectType, objectCheckBox );
+
+    col++;
+    if ( (row == 0 && col == 2) || col == 3 ) {
+      col = 0;
+      row++;
+    }
+  }
+}
+
+void ObjectTypeSelector::load( const QSync::Group &group )
+{
+  const QSync::GroupConfig config = group.config();
+
+  const QStringList objectTypes = config.activeObjectTypes();
+
+  // Enable everything on the inital load
+  bool initialLoad = false;
+  if ( objectTypes.isEmpty() )
+    initialLoad = true;
+
+  QMap<QString, QCheckBox*>::ConstIterator it;
+  for( it = mObjectTypeChecks.begin(); it != mObjectTypeChecks.end(); ++it ) {
+    QCheckBox *check = it.data();
+    check->setChecked( objectTypes.contains( it.key() ) || initialLoad );
+  }
+}
+
+void ObjectTypeSelector::save( QSync::Group group )
+{
+  QStringList objectTypes;
+
+  QMap<QString,QCheckBox *>::ConstIterator it;
+  for( it = mObjectTypeChecks.begin(); it != mObjectTypeChecks.end(); ++it ) {
+    QCheckBox *check = it.data();
+    if ( check->isChecked() )
+      objectTypes.append( it.key() );
+  }
+
+  // Always add object type "data"
+  objectTypes.append( "data" );
+
+  QSync::GroupConfig config = group.config();
+  config.setActiveObjectTypes( objectTypes );
+}
+
+GroupConfigCommon::GroupConfigCommon( QWidget *parent )
+  : QWidget( parent )
+{
+  QGridLayout *layout = new QGridLayout( this, 2, 2, KDialog::marginHint(), KDialog::spacingHint() );
+
+  layout->addWidget( new QLabel( i18n( "Name:" ), this ), 0, 0 );
+
+  mGroupName = new KLineEdit( this );
+  layout->addWidget( mGroupName, 0, 1 );
+
+  layout->addWidget( new QLabel( i18n( "Object Types to be Synchronized:"), this ), 1, 0, Qt::AlignTop );
+
+  mObjectTypeSelector = new ObjectTypeSelector( this );
+  layout->addWidget( mObjectTypeSelector, 1, 1 );
+
+  layout->setRowStretch( 2, 1 );
+}
+
+void GroupConfigCommon::setSyncProcess( SyncProcess *syncProcess )
+{
+  mSyncProcess = syncProcess;
+
+  mGroupName->setText( mSyncProcess->group().name() );
+  mObjectTypeSelector->load( mSyncProcess->group() );
+}
+
+void GroupConfigCommon::save()
+{
+  mSyncProcess->group().setName( mGroupName->text() );
+  mObjectTypeSelector->save( mSyncProcess->group() );
+}
Index: kitchensync/src/connectionwidgets.h
===================================================================
--- kitchensync/src/connectionwidgets.h	(.../tags/KDE/3.5.6/kdepim)	(wersja 0)
+++ kitchensync/src/connectionwidgets.h	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -0,0 +1,99 @@
+/*
+    This file is part of KitchenSync.
+
+    Copyright (c) 2005 Tobias Koenig <tokoe@kde.org>
+    Copyright (c) 2006 Daniel Gollub <dgollub@suse.de>
+
+    This program is free software; you can redistribute it and/or modify
+    it under the terms of the GNU General Public License as published by
+    the Free Software Foundation; either version 2 of the License, or
+    (at your option) any later version.
+
+    This program is distributed in the hope that it will be useful,
+    but WITHOUT ANY WARRANTY; without even the implied warranty of
+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
+    GNU General Public License for more details.
+
+    You should have received a copy of the GNU General Public License
+    along with this program; if not, write to the Free Software
+    Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301,
+    USA.
+*/
+
+#ifndef CONNECTIONWIDGETS_H
+#define CONNECTIONWIDGETS_H
+
+#include <qdom.h>
+
+#include "configgui.h"
+
+class QCheckBox;
+class QLabel;
+class QPushButton;
+class QSpinBox;
+
+class KComboBox;
+class KLineEdit;
+
+class BluetoothWidget : public QWidget
+{
+  Q_OBJECT
+
+  public:
+    BluetoothWidget( QWidget *parent );
+
+    void hideChannel();
+    void showChannel();
+
+    void setAddress( const QString address );
+    void setChannel( const QString  channel );
+    QString address() const;
+    QString channel() const;
+
+  private:
+    KLineEdit *mAddress;
+    KLineEdit *mChannel;
+    QLabel *mChannelLabel;
+};
+
+class IRWidget : public QWidget
+{
+  Q_OBJECT
+
+  public:
+    IRWidget( QWidget *parent );
+
+    void load( const QDomElement& );
+    void save( QDomDocument&, QDomElement& );
+
+  private:
+    KLineEdit *mDevice;
+    KLineEdit *mSerialNumber;
+};
+
+class CableWidget : public QWidget
+{
+  public:
+    CableWidget( QWidget *parent );
+
+    void load( const QDomElement& );
+    void save( QDomDocument&, QDomElement& );
+
+  private:
+    KComboBox *mManufacturer;
+    KComboBox *mDevice;
+};
+
+class UsbWidget : public QWidget
+{
+  public:
+    UsbWidget( QWidget *parent );
+
+    int interface() const;
+    void setInterface( int interface );
+
+  private:
+    QSpinBox *mInterface;
+};
+
+#endif // CONNECTIONWIDGETS_H
Index: kitchensync/src/addresseediffalgo.cpp
===================================================================
--- kitchensync/src/addresseediffalgo.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 0)
+++ kitchensync/src/addresseediffalgo.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -0,0 +1,157 @@
+/*
+    This file is part of libkdepim.
+
+    Copyright (c) 2004 Tobias Koenig <tokoe@kde.org>
+
+    This library is free software; you can redistribute it and/or
+    modify it under the terms of the GNU Library General Public
+    License as published by the Free Software Foundation; either
+    version 2 of the License, or (at your option) any later version.
+
+    This library is distributed in the hope that it will be useful,
+    but WITHOUT ANY WARRANTY; without even the implied warranty of
+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
+    Library General Public License for more details.
+
+    You should have received a copy of the GNU Library General Public License
+    along with this library; see the file COPYING.LIB.  If not, write to
+    the Free Software Foundation, Inc., 51 Franklin Street, Fifth Floor,
+    Boston, MA 02110-1301, USA.
+*/
+
+#include <kabc/vcardconverter.h>
+
+#include "addresseediffalgo.h"
+
+using namespace KSync;
+
+static bool compareString( const QString &left, const QString &right )
+{
+  if ( left.isEmpty() && right.isEmpty() )
+    return true;
+  else
+    return left == right;
+}
+
+AddresseeDiffAlgo::AddresseeDiffAlgo( const KABC::Addressee &leftAddressee,
+                                      const KABC::Addressee &rightAddressee )
+  : mLeftAddressee( leftAddressee ), mRightAddressee( rightAddressee )
+{
+}
+
+AddresseeDiffAlgo::AddresseeDiffAlgo( const QString &leftAddressee,
+                                      const QString &rightAddressee )
+{
+  KABC::VCardConverter converter;
+
+  mLeftAddressee = converter.parseVCard( leftAddressee );
+  mRightAddressee = converter.parseVCard( rightAddressee );
+}
+
+void AddresseeDiffAlgo::run()
+{
+  begin();
+
+  if ( !compareString( mLeftAddressee.uid(), mRightAddressee.uid() ) )
+    conflictField( KABC::Addressee::uidLabel(), mLeftAddressee.uid(), mRightAddressee.uid() );
+
+  if ( !compareString( mLeftAddressee.name(), mRightAddressee.name() ) )
+    conflictField( KABC::Addressee::nameLabel(), mLeftAddressee.name(), mRightAddressee.name() );
+
+  if ( !compareString( mLeftAddressee.formattedName(), mRightAddressee.formattedName() ) )
+    conflictField( KABC::Addressee::formattedNameLabel(), mLeftAddressee.formattedName(), mRightAddressee.formattedName() );
+
+  if ( !compareString( mLeftAddressee.familyName(), mRightAddressee.familyName() ) )
+    conflictField( KABC::Addressee::familyNameLabel(), mLeftAddressee.familyName(), mRightAddressee.familyName() );
+
+  if ( !compareString( mLeftAddressee.givenName(), mRightAddressee.givenName() ) )
+    conflictField( KABC::Addressee::givenNameLabel(), mLeftAddressee.givenName(), mRightAddressee.givenName() );
+
+  if ( !compareString( mLeftAddressee.additionalName(), mRightAddressee.additionalName() ) )
+    conflictField( KABC::Addressee::additionalNameLabel(), mLeftAddressee.additionalName(), mRightAddressee.additionalName() );
+
+  if ( !compareString( mLeftAddressee.prefix(), mRightAddressee.prefix() ) )
+    conflictField( KABC::Addressee::prefixLabel(), mLeftAddressee.prefix(), mRightAddressee.prefix() );
+
+  if ( !compareString( mLeftAddressee.suffix(), mRightAddressee.suffix() ) )
+    conflictField( KABC::Addressee::suffixLabel(), mLeftAddressee.suffix(), mRightAddressee.suffix() );
+
+  if ( !compareString( mLeftAddressee.nickName(), mRightAddressee.nickName() ) )
+    conflictField( KABC::Addressee::nickNameLabel(), mLeftAddressee.nickName(), mRightAddressee.nickName() );
+
+  if ( mLeftAddressee.birthday() != mRightAddressee.birthday() )
+    conflictField( KABC::Addressee::birthdayLabel(), mLeftAddressee.birthday().toString(),
+                   mRightAddressee.birthday().toString() );
+
+  if ( !compareString( mLeftAddressee.mailer(), mRightAddressee.mailer() ) )
+    conflictField( KABC::Addressee::mailerLabel(), mLeftAddressee.mailer(), mRightAddressee.mailer() );
+
+  if ( mLeftAddressee.timeZone() != mRightAddressee.timeZone() )
+    conflictField( KABC::Addressee::timeZoneLabel(), mLeftAddressee.timeZone().asString(), mRightAddressee.timeZone().asString() );
+
+  if ( mLeftAddressee.geo() != mRightAddressee.geo() )
+    conflictField( KABC::Addressee::geoLabel(), mLeftAddressee.geo().asString(), mRightAddressee.geo().asString() );
+
+  if ( !compareString( mLeftAddressee.title(), mRightAddressee.title() ) )
+    conflictField( KABC::Addressee::titleLabel(), mLeftAddressee.title(), mRightAddressee.title() );
+
+  if ( !compareString( mLeftAddressee.role(), mRightAddressee.role() ) )
+    conflictField( KABC::Addressee::roleLabel(), mLeftAddressee.role(), mRightAddressee.role() );
+
+  if ( !compareString( mLeftAddressee.organization(), mRightAddressee.organization() ) )
+    conflictField( KABC::Addressee::organizationLabel(), mLeftAddressee.organization(), mRightAddressee.organization() );
+
+  if ( !compareString( mLeftAddressee.note(), mRightAddressee.note() ) )
+    conflictField( KABC::Addressee::noteLabel(), mLeftAddressee.note(), mRightAddressee.note() );
+
+  if ( !compareString( mLeftAddressee.productId(), mRightAddressee.productId() ) )
+    conflictField( KABC::Addressee::productIdLabel(), mLeftAddressee.productId(), mRightAddressee.productId() );
+
+  if ( !compareString( mLeftAddressee.sortString(), mRightAddressee.sortString() ) )
+    conflictField( KABC::Addressee::sortStringLabel(), mLeftAddressee.sortString(), mRightAddressee.sortString() );
+
+  if ( mLeftAddressee.secrecy() != mRightAddressee.secrecy() ) {
+    conflictField( KABC::Addressee::secrecyLabel(), mLeftAddressee.secrecy().asString(), mRightAddressee.secrecy().asString() );
+  }
+  if ( mLeftAddressee.url()!= mRightAddressee.url() )
+    conflictField( KABC::Addressee::urlLabel(), mLeftAddressee.url().prettyURL(),
+      mRightAddressee.url().prettyURL() );
+    
+  if ( mLeftAddressee.logo() != mRightAddressee.logo() ) {
+  }
+
+  if ( mLeftAddressee.photo() != mRightAddressee.photo() ) {
+  }
+
+  diffList( "emails", mLeftAddressee.emails(), mRightAddressee.emails() );
+
+  diffList( "Phone Numbers", mLeftAddressee.phoneNumbers(), mRightAddressee.phoneNumbers() );
+  diffList( "Addresses", mLeftAddressee.addresses(), mRightAddressee.addresses() );
+
+  end();
+}
+
+QString AddresseeDiffAlgo::toString( const KABC::PhoneNumber &number )
+{
+  return number.number();
+}
+
+QString AddresseeDiffAlgo::toString( const KABC::Address &addr )
+{
+  return addr.formattedAddress();
+}
+
+template <class L>
+void AddresseeDiffAlgo::diffList( const QString &id,
+                                  const QValueList<L> &left, const QValueList<L> &right )
+{
+  for ( uint i = 0; i < left.count(); ++i ) {
+    if ( right.find( left[ i ] ) == right.end() )
+      additionalLeftField( id, toString( left[ i ] ) );
+  }
+
+  for ( uint i = 0; i < right.count(); ++i ) {
+    if ( left.find( right[ i ] ) == left.end() )
+      additionalRightField( id, toString( right[ i ] ) );
+  }
+}
Index: kitchensync/src/configguiopie.h
===================================================================
--- kitchensync/src/configguiopie.h	(.../tags/KDE/3.5.6/kdepim)	(wersja 0)
+++ kitchensync/src/configguiopie.h	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -0,0 +1,47 @@
+/*
+    This file is part of KitchenSync.
+
+    Copyright (c) 2006 Tobias Koenig <tokoe@kde.org>
+
+    This program is free software; you can redistribute it and/or modify
+    it under the terms of the GNU General Public License as published by
+    the Free Software Foundation; either version 2 of the License, or
+    (at your option) any later version.
+
+    This program is distributed in the hope that it will be useful,
+    but WITHOUT ANY WARRANTY; without even the implied warranty of
+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
+    GNU General Public License for more details.
+
+    You should have received a copy of the GNU General Public License
+    along with this program; if not, write to the Free Software
+    Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301,
+    USA.
+*/
+#ifndef CONFIGGUIOPIE_H
+#define CONFIGGUIOPIE_H
+
+#include "configgui.h"
+
+class QComboBox;
+class QLineEdit;
+class QSpinBox;
+
+class ConfigGuiOpie : public ConfigGui
+{
+  public:
+    ConfigGuiOpie( const QSync::Member &, QWidget *parent );
+
+    void load( const QString &xml );
+    QString save();
+
+  private:
+    QLineEdit *mDeviceIP;
+    QComboBox *mDeviceType;
+    QLineEdit *mUserName;
+    QLineEdit *mPassword;
+    QComboBox *mConnectionType;
+    QSpinBox *mPort;
+};
+
+#endif
Index: kitchensync/src/kwidgetlist.h
===================================================================
--- kitchensync/src/kwidgetlist.h	(.../tags/KDE/3.5.6/kdepim)	(wersja 0)
+++ kitchensync/src/kwidgetlist.h	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -0,0 +1,90 @@
+/*
+    This file is part of KitchenSync.
+
+    Copyright (c) 2005 Tobias Koenig <tokoe@kde.org>
+
+    This library is free software; you can redistribute it and/or
+    modify it under the terms of the GNU Library General Public
+    License as published by the Free Software Foundation; either
+    version 2 of the License, or (at your option) any later version.
+
+    This library is distributed in the hope that it will be useful,
+    but WITHOUT ANY WARRANTY; without even the implied warranty of
+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
+    Library General Public License for more details.
+
+    You should have received a copy of the GNU Library General Public License
+    along with this library; see the file COPYING.LIB.  If not, write to
+    the Free Software Foundation, Inc., 51 Franklin Street, Fifth Floor,
+    Boston, MA 02110-1301, USA.
+*/
+
+#ifndef KWIDGETLIST_H
+#define KWIDGETLIST_H
+
+#include <qscrollview.h>
+
+class KWidgetListItem;
+
+class KWidgetList : public QScrollView
+{
+  Q_OBJECT
+
+  public:
+    KWidgetList( QWidget *parent = 0, const char *name = 0 );
+    ~KWidgetList();
+
+    uint count() const;
+
+    void appendItem( KWidgetListItem *item );
+    void removeItem( int index );
+    void takeItem( KWidgetListItem *item );
+
+    void setSelected( KWidgetListItem *item );
+    void setSelected( int index );
+
+    bool isSelected( KWidgetListItem *item ) const;
+    bool isSelected( int index ) const;
+
+    KWidgetListItem *selectedItem() const;
+    KWidgetListItem *item( int index ) const;
+
+    int index( KWidgetListItem *item ) const;
+
+    virtual bool eventFilter( QObject *object, QEvent *event );
+
+  public slots:
+    void clear();
+    virtual void setFocus();
+
+  signals:
+    void selectionChanged( KWidgetListItem *item );
+    void doubleClicked( KWidgetListItem *item );
+
+  private:
+    class Private;
+    Private *d;
+};
+
+class KWidgetListItem : public QWidget
+{
+  public:
+    KWidgetListItem( KWidgetList *parent, const char *name = 0 );
+    ~KWidgetListItem();
+
+    void setSelected( bool selected );
+
+  protected:
+    void setForegroundColor( const QColor& );
+    void setBackgroundColor( const QColor& );
+    void setSelectionForegroundColor( const QColor& );
+    void setSelectionBackgroundColor( const QColor& );
+
+  private:
+    QColor mForegroundColor;
+    QColor mBackgroundColor;
+    QColor mSelectionForegroundColor;
+    QColor mSelectionBackgroundColor;
+};
+
+#endif
Index: kitchensync/src/calendardiffalgo.cpp
===================================================================
--- kitchensync/src/calendardiffalgo.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 0)
+++ kitchensync/src/calendardiffalgo.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -0,0 +1,217 @@
+/*
+    This file is part of libkdepim.
+
+    Copyright (c) 2004 Tobias Koenig <tokoe@kde.org>
+
+    This library is free software; you can redistribute it and/or
+    modify it under the terms of the GNU Library General Public
+    License as published by the Free Software Foundation; either
+    version 2 of the License, or (at your option) any later version.
+
+    This library is distributed in the hope that it will be useful,
+    but WITHOUT ANY WARRANTY; without even the implied warranty of
+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
+    Library General Public License for more details.
+
+    You should have received a copy of the GNU Library General Public License
+    along with this library; see the file COPYING.LIB.  If not, write to
+    the Free Software Foundation, Inc., 51 Franklin Street, Fifth Floor,
+    Boston, MA 02110-1301, USA.
+*/
+
+#include <klocale.h>
+
+#include <libkcal/kcalversion.h>
+
+#include "calendardiffalgo.h"
+
+using namespace KSync;
+
+#ifndef KDE_USE_FINAL
+static bool compareString( const QString &left, const QString &right )
+{
+  if ( left.isEmpty() && right.isEmpty() )
+    return true;
+  else
+    return left == right;
+}
+#endif
+
+static QString toString( KCal::Attendee *attendee )
+{
+  return attendee->name() + "<" + attendee->email() + ">";
+}
+
+static QString toString( KCal::Alarm * )
+{
+  return QString::null;
+}
+
+static QString toString( KCal::Incidence * )
+{
+  return QString::null;
+}
+
+static QString toString( KCal::Attachment * )
+{
+  return QString::null;
+}
+
+static QString toString( const QDate &date )
+{
+  return date.toString();
+}
+
+static QString toString( const QDateTime &dateTime )
+{
+  return dateTime.toString();
+}
+
+static QString toString( const QString str )
+{
+  return str;
+}
+
+static QString toString( bool value )
+{
+  if ( value )
+    return i18n( "Yes" );
+  else
+    return i18n( "No" );
+}
+
+CalendarDiffAlgo::CalendarDiffAlgo( KCal::Incidence *leftIncidence,
+                                    KCal::Incidence *rightIncidence )
+  : mLeftIncidence( leftIncidence ), mRightIncidence( rightIncidence )
+{
+}
+
+void CalendarDiffAlgo::run()
+{
+  begin();
+
+  diffIncidenceBase( mLeftIncidence, mRightIncidence );
+  diffIncidence( mLeftIncidence, mRightIncidence );
+
+  KCal::Event *leftEvent = dynamic_cast<KCal::Event*>( mLeftIncidence );
+  KCal::Event *rightEvent = dynamic_cast<KCal::Event*>( mRightIncidence );
+  if ( leftEvent && rightEvent ) {
+    diffEvent( leftEvent, rightEvent );
+  } else {
+    KCal::Todo *leftTodo = dynamic_cast<KCal::Todo*>( mLeftIncidence );
+    KCal::Todo *rightTodo = dynamic_cast<KCal::Todo*>( mRightIncidence );
+    if ( leftTodo && rightTodo ) {
+      diffTodo( leftTodo, rightTodo );
+    }
+  }
+
+  end();
+}
+
+void CalendarDiffAlgo::diffIncidenceBase( KCal::IncidenceBase *left, KCal::IncidenceBase *right )
+{
+  diffList( i18n( "Attendees" ), left->attendees(), right->attendees() );
+
+  if ( left->dtStart() != right->dtStart() )
+    conflictField( i18n( "Start time" ), left->dtStartStr(), right->dtStartStr() );
+
+  if ( !compareString( left->organizer().fullName(), right->organizer().fullName() ) )
+    conflictField( i18n( "Organizer" ), left->organizer().fullName(), right->organizer().fullName() );
+
+  if ( !compareString( left->uid(), right->uid() ) )
+    conflictField( i18n( "UID" ), left->uid(), right->uid() );
+
+  if ( left->doesFloat() != right->doesFloat() )
+    conflictField( i18n( "Is floating" ), toString( left->doesFloat() ), toString( right->doesFloat() ) );
+
+  if ( left->hasDuration() != right->hasDuration() )
+    conflictField( i18n( "Has duration" ), toString( left->hasDuration() ), toString( right->hasDuration() ) );
+
+  if ( left->duration() != right->duration() )
+    conflictField( i18n( "Duration" ), QString::number( left->duration() ), QString::number( right->duration() ) );
+}
+
+void CalendarDiffAlgo::diffIncidence( KCal::Incidence *left, KCal::Incidence *right )
+{
+  if ( !compareString( left->description(), right->description() ) )
+    conflictField( i18n( "Description" ), left->description(), right->description() );
+
+  if ( !compareString( left->summary(), right->summary() ) )
+    conflictField( i18n( "Summary" ), left->summary(), right->summary() );
+
+  if ( left->status() != right->status() )
+    conflictField( i18n( "Status" ), left->statusStr(), right->statusStr() );
+
+  if ( left->secrecy() != right->secrecy() )
+    conflictField( i18n( "Secrecy" ), toString( left->secrecy() ), toString( right->secrecy() ) );
+
+  if ( left->priority() != right->priority() )
+    conflictField( i18n( "Priority" ), toString( left->priority() ), toString( right->priority() ) );
+
+  if ( !compareString( left->location(), right->location() ) )
+    conflictField( i18n( "Location" ), left->location(), right->location() );
+  
+  diffList( i18n( "Categories" ), left->categories(), right->categories() );
+  diffList( i18n( "Alarms" ), left->alarms(), right->alarms() );
+  diffList( i18n( "Resources" ), left->resources(), right->resources() );
+  diffList( i18n( "Relations" ), left->relations(), right->relations() );
+  diffList( i18n( "Attachments" ), left->attachments(), right->attachments() );
+#if LIBKCAL_IS_VERSION( 1, 3, 1 )
+  diffList( i18n( "Exception Dates" ), left->recurrence()->exDates(), right->recurrence()->exDates() );
+  diffList( i18n( "Exception Times" ), left->recurrence()->exDateTimes(), right->recurrence()->exDateTimes() );
+#endif
+  // TODO: recurrence dates and date/times, exrules, rrules
+
+  if ( left->created() != right->created() )
+    conflictField( i18n( "Created" ), left->created().toString(), right->created().toString() );
+
+  if ( !compareString( left->relatedToUid(), right->relatedToUid() ) )
+    conflictField( i18n( "Related Uid" ), left->relatedToUid(), right->relatedToUid() );
+}
+
+void CalendarDiffAlgo::diffEvent( KCal::Event *left, KCal::Event *right )
+{
+  if ( left->hasEndDate() != right->hasEndDate() )
+    conflictField( i18n( "Has End Date" ), toString( left->hasEndDate() ), toString( right->hasEndDate() ) );
+
+  if ( left->dtEnd() != right->dtEnd() )
+    conflictField( i18n( "End Date" ), left->dtEndStr(), right->dtEndStr() );
+
+  // TODO: check transparency
+}
+
+void CalendarDiffAlgo::diffTodo( KCal::Todo *left, KCal::Todo *right )
+{
+  if ( left->hasStartDate() != right->hasStartDate() )
+    conflictField( i18n( "Has Start Date" ), toString( left->hasStartDate() ), toString( right->hasStartDate() ) );
+
+  if ( left->hasDueDate() != right->hasDueDate() )
+    conflictField( i18n( "Has Due Date" ), toString( left->hasDueDate() ), toString( right->hasDueDate() ) );
+
+  if ( left->dtDue() != right->dtDue() )
+    conflictField( i18n( "Due Date" ), left->dtDue().toString(), right->dtDue().toString() );
+
+  if ( left->hasCompletedDate() != right->hasCompletedDate() )
+    conflictField( i18n( "Has Complete Date" ), toString( left->hasCompletedDate() ), toString( right->hasCompletedDate() ) );
+
+  if ( left->percentComplete() != right->percentComplete() )
+    conflictField( i18n( "Complete" ), QString::number( left->percentComplete() ), QString::number( right->percentComplete() ) );
+
+  if ( left->completed() != right->completed() )
+    conflictField( i18n( "Completed" ), toString( left->completed() ), toString( right->completed() ) );
+}
+
+template <class L>
+void CalendarDiffAlgo::diffList( const QString &id,
+                                 const QValueList<L> &left, const QValueList<L> &right )
+{
+  for ( uint i = 0; i < left.count(); ++i ) {
+    if ( right.find( left[ i ] ) == right.end() )
+      additionalLeftField( id, toString( left[ i ] ) );
+  }
+
+  for ( uint i = 0; i < right.count(); ++i ) {
+    if ( left.find( right[ i ] ) == left.end() )
+      additionalRightField( id, toString( right[ i ] ) );
+  }
+}
Index: kitchensync/src/aboutpage.cpp
===================================================================
--- kitchensync/src/aboutpage.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 0)
+++ kitchensync/src/aboutpage.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -0,0 +1,141 @@
+/*
+    This file is part of KitchenSync.
+
+    Copyright (c) 2005 Tobias Koenig <tokoe@kde.org>
+
+    This program is free software; you can redistribute it and/or modify
+    it under the terms of the GNU General Public License as published by
+    the Free Software Foundation; either version 2 of the License, or
+    (at your option) any later version.
+
+    This program is distributed in the hope that it will be useful,
+    but WITHOUT ANY WARRANTY; without even the implied warranty of
+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
+    GNU General Public License for more details.
+
+    You should have received a copy of the GNU General Public License
+    along with this program; if not, write to the Free Software
+    Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301, USA.
+*/
+
+#include <qfile.h>
+#include <qlayout.h>
+
+#include <kaboutdata.h>
+#include <kapplication.h>
+#include <kdebug.h>
+#include <khtml_part.h>
+#include <khtmlview.h>
+#include <kiconloader.h>
+#include <klocale.h>
+#include <krun.h>
+#include <kstandarddirs.h>
+
+#include "aboutpage.h"
+
+static QString readFile( const QString &fileName )
+{
+  QFile file( fileName );
+  if ( !file.open( IO_ReadOnly ) ) {
+    kdDebug() << "Unable to open file '" << fileName << "'" << endl;
+    return QCString();
+  }
+
+  QString content = QString::fromUtf8( file.readAll() );
+
+  file.close();
+
+  return content;
+}
+
+AboutPage::AboutPage( QWidget *parent )
+  : QWidget( parent, "AboutPage" )
+{
+  QVBoxLayout *layout = new QVBoxLayout( this );
+
+  QString location = locate( "data", "kitchensync/about/main.html" );
+  QString content = readFile( location );
+  content = content.arg( locate( "data", "libkdepim/about/kde_infopage.css" ) );
+  if ( kapp->reverseLayout() )
+    content = content.arg( "@import \"%1\";" ).arg( locate( "data", "libkdepim/about/kde_infopage_rtl.css" ) );
+  else
+    content = content.arg( "" );
+
+  KHTMLPart *part = new KHTMLPart( this );
+  layout->addWidget( part->view() );
+
+  part->begin( KURL( location ) );
+
+  QString appName( i18n( "KDE KitchenSync" ) );
+  QString catchPhrase( i18n( "Get Synchronized!" ) );
+  QString quickDescription( i18n( "The KDE Synchronization Tool" ) );
+
+  part->write( content.arg( QFont().pointSize() + 2 ).arg( appName )
+              .arg( catchPhrase ).arg( quickDescription ).arg( htmlText() ) );
+  part->end();
+
+  connect( part->browserExtension(),
+           SIGNAL( openURLRequest( const KURL&, const KParts::URLArgs& ) ),
+           SLOT( handleUrl( const KURL& ) ) );
+
+  connect( part->browserExtension(),
+           SIGNAL( createNewWindow( const KURL&, const KParts::URLArgs& ) ),
+           SLOT( handleUrl( const KURL& ) ) );
+}
+
+void AboutPage::handleUrl( const KURL &url )
+{
+  if ( url.protocol() == "exec" ) {
+    if ( url.path() == "/addGroup" )
+      emit addGroup();
+  } else
+    new KRun( url, this );
+}
+
+QString AboutPage::htmlText() const
+{
+  KIconLoader *iconloader = KGlobal::iconLoader();
+  int iconSize = iconloader->currentSize( KIcon::Desktop );
+
+  QString handbook_icon_path = iconloader->iconPath( "contents2",  KIcon::Desktop );
+  QString html_icon_path = iconloader->iconPath( "html",  KIcon::Desktop );
+  QString wizard_icon_path = iconloader->iconPath( "wizard",  KIcon::Desktop );
+
+  QString info = i18n( "<h2 style='text-align:center; margin-top: 0px;'>Welcome to KitchenSync %1</h2>"
+      "<p>%1</p>"
+      "<table align=\"center\">"
+      "<tr><td><a href=\"%1\"><img width=\"%1\" height=\"%1\" src=\"%1\" /></a></td>"
+      "<td><a href=\"%1\">%1</a><br><span id=\"subtext\"><nobr>%1</td></tr>"
+      "<tr><td><a href=\"%1\"><img width=\"%1\" height=\"%1\" src=\"%1\" /></a></td>"
+      "<td><a href=\"%1\">%1</a><br><span id=\"subtext\"><nobr>%1</td></tr>"
+      "<tr><td><a href=\"%1\"><img width=\"%1\" height=\"%1\" src=\"%1\" /></a></td>"
+      "<td><a href=\"%1\">%1</a><br><span id=\"subtext\"><nobr>%1</td></tr>"
+      "</table>" )
+      .arg( kapp->aboutData()->version() )
+      .arg( i18n( "KitchenSync synchronizes your e-mail, addressbook, calendar, to-do list and more." ) )
+      .arg( "help:/kitchensync" )
+      .arg( iconSize )
+      .arg( iconSize )
+      .arg( handbook_icon_path )
+      .arg( "help:/kitchensync" )
+      .arg( i18n( "Read Manual" ) )
+      .arg( i18n( "Learn more about KitchenSync and its components" ) )
+      .arg( "http://pim.kde.org" )
+      .arg( iconSize )
+      .arg( iconSize )
+      .arg( html_icon_path )
+      .arg( "http://pim.kde.org" )
+      .arg( i18n( "Visit KitchenSync Website" ) )
+      .arg( i18n( "Access online resources and tutorials" ) )
+      .arg( "exec:/addGroup" )
+      .arg( iconSize )
+      .arg( iconSize )
+      .arg( wizard_icon_path )
+      .arg( "exec:/addGroup" )
+      .arg( i18n( "Add Synchronization Group" ) )
+      .arg( i18n( "Create group of devices for synchronization" ) );
+
+  return info;
+}
+
+#include "aboutpage.moc"
Index: kitchensync/src/kitchensync.desktop
===================================================================
--- kitchensync/src/kitchensync.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 0)
+++ kitchensync/src/kitchensync.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -0,0 +1,59 @@
+[Desktop Entry]
+Encoding=UTF-8
+Name=KitchenSync
+Name[pt]=KitchenSyncFilter
+Name[pt_BR]=KitchenSyncFilter
+Name[sv]=Kitchensync
+GenericName=Synchronization
+GenericName[af]=Sinkronisasie
+GenericName[bg]=Синхронизация
+GenericName[ca]=Sincronització
+GenericName[cs]=Synchronizace
+GenericName[cy]=Cydamseriad
+GenericName[da]=Synkronisering
+GenericName[de]=Abgleich
+GenericName[el]=Συγχρονισμός
+GenericName[es]=Sincronización
+GenericName[et]=Sünkroniseerimine
+GenericName[eu]=Sinkronizazioa
+GenericName[fa]=همگامی
+GenericName[fi]=Synkronointi
+GenericName[fr]=Synchronisation
+GenericName[ga]=Sioncrónú
+GenericName[gl]=Sincronización
+GenericName[he]=סינכרון
+GenericName[hu]=Szinkronizáció
+GenericName[is]=Samstilling
+GenericName[it]=Sincronizzazione
+GenericName[ja]=同期
+GenericName[kk]=Қадамдастыру
+GenericName[km]=ការ​​ធ្វើ​សមកាលកម្ម
+GenericName[lt]=Sinchronizacija
+GenericName[ms]=Segerakan
+GenericName[nb]=Synkronisering
+GenericName[nds]=Synkroniseren
+GenericName[nl]=Synchronisatie
+GenericName[nn]=Synkronisering
+GenericName[pl]=Synchronizacja
+GenericName[pt]=Sincronização
+GenericName[pt_BR]=Gerenciador de Sincronização
+GenericName[ru]=Синхронизация
+GenericName[sk]=Synchronizácia
+GenericName[sl]=Usklajevanje
+GenericName[sr]=Синхронизација
+GenericName[sr@Latn]=Sinhronizacija
+GenericName[sv]=Synkronisering
+GenericName[ta]=கூட்டிணைப்பு
+GenericName[tr]=Senkronizasyon
+GenericName[uk]=Синхронізація
+Exec=kitchensync
+Icon=kitchensync
+Type=Application
+DocPath=kitchensync/index.html
+Terminal=false
+X-KDE-StartupNotify=true
+X-DCOP-ServiceType=Unique
+X-DCOP-ServiceName=kitchensync
+ServiceTypes=KParts/ReadOnlyPart
+X-KDE-Library=libkitchensyncpart
+Categories=Qt;KDE;Utility;X-KDE-Utilities-PIM;
Index: kitchensync/src/groupitem.cpp
===================================================================
--- kitchensync/src/groupitem.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 0)
+++ kitchensync/src/groupitem.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -0,0 +1,389 @@
+/*
+    This file is part of KitchenSync.
+
+    Copyright (c) 2005 Tobias Koenig <tokoe@kde.org>
+
+    This program is free software; you can redistribute it and/or modify
+    it under the terms of the GNU General Public License as published by
+    the Free Software Foundation; either version 2 of the License, or
+    (at your option) any later version.
+
+    This program is distributed in the hope that it will be useful,
+    but WITHOUT ANY WARRANTY; without even the implied warranty of
+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
+    GNU General Public License for more details.
+
+    You should have received a copy of the GNU General Public License
+    along with this program; if not, write to the Free Software
+    Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301, USA.
+*/
+
+#include <kapplication.h>
+#include <kdialog.h>
+#include <kglobal.h>
+#include <kglobalsettings.h>
+#include <kiconloader.h>
+#include <klocale.h>
+#include <kpassivepopup.h>
+#include <kurllabel.h>
+
+#include <qlabel.h>
+#include <qlayout.h>
+#include <qpixmap.h>
+#include <qprogressbar.h>
+#include <qvbox.h>
+
+#include "memberinfo.h"
+#include "multiconflictdialog.h"
+#include "singleconflictdialog.h"
+#include "syncprocessmanager.h"
+
+#include "groupitem.h"
+
+GroupItem::GroupItem( KWidgetList *parent, SyncProcess *process )
+  : KWidgetListItem( parent ), mSyncProcess( process ),
+    mCallbackHandler( new QSync::CallbackHandler ),
+    mProcessedItems( 0 ), mMaxProcessedItems( 0 ),
+    mSynchronizing( false )
+{
+  QFont boldFont;
+  boldFont.setBold( true );
+  boldFont.setPointSize( boldFont.pointSize() + 2 );
+
+  QGridLayout *layout = new QGridLayout( this, 4, 4, KDialog::marginHint(), KDialog::spacingHint() );
+
+  mBox = new QVBox( this );
+  mBox->setMargin( 5 );
+  mProgressBar = new QProgressBar( this );
+  mProgressBar->setTotalSteps( 100 );
+
+  mTime = new QLabel( this );
+  mSyncAction = new KURLLabel( "exec:/sync", i18n( "Synchronize Now" ), this );
+  mConfigureAction = new KURLLabel( "exec:/config", i18n( "Configure" ), this );
+
+  // header
+  QHBox* hbox = new QHBox( this );
+  hbox->setMargin( 2 );
+
+  static QPixmap icon;
+  if ( icon.isNull() )
+    icon = KGlobal::iconLoader()->loadIcon( "kontact_summary", KIcon::Desktop );
+
+  mIcon = new QLabel( hbox );
+  mIcon->setPixmap( icon );
+  mIcon->setFixedSize( mIcon->sizeHint() );
+  mIcon->setPaletteBackgroundColor( colorGroup().mid() );
+
+  mGroupName = new QLabel( hbox );
+  mGroupName->setAlignment( AlignLeft | AlignVCenter );
+  mGroupName->setIndent( KDialog::spacingHint() );
+  mGroupName->setFont( boldFont );
+  mGroupName->setPaletteForegroundColor( colorGroup().light() );
+  mGroupName->setPaletteBackgroundColor( colorGroup().mid() );
+
+  mStatus = new QLabel( hbox );
+  mStatus->setAlignment( Qt::AlignRight );
+  mStatus->setAlignment( AlignRight | AlignVCenter );
+  mStatus->setIndent( KDialog::spacingHint() );
+  mStatus->setFont( boldFont );
+  mStatus->setPaletteForegroundColor( colorGroup().light() );
+  mStatus->setPaletteBackgroundColor( colorGroup().mid() );
+  mStatus->setText( i18n( "Ready" ) );
+
+  hbox->setPaletteBackgroundColor( colorGroup().mid() );
+  hbox->setMaximumHeight( hbox->minimumSizeHint().height() );
+
+  layout->addMultiCellWidget( hbox, 0, 0, 0, 3 );
+  layout->addMultiCellWidget( mBox, 1, 1, 0, 3 );
+  layout->addWidget( mTime, 2, 0 );
+  layout->addWidget( mSyncAction, 2, 1 );
+  layout->addWidget( mConfigureAction, 2, 2 );
+  layout->addWidget( mProgressBar, 2, 3 );
+  layout->setColStretch( 0, 1 );
+  layout->setRowStretch( 3, 1 );
+
+  setPaletteBackgroundColor( kapp->palette().active().base() );
+
+  connect( mCallbackHandler, SIGNAL( conflict( QSync::SyncMapping ) ),
+           this, SLOT( conflict( QSync::SyncMapping ) ) );
+  connect( mCallbackHandler, SIGNAL( change( const QSync::SyncChangeUpdate& ) ),
+           this, SLOT( change( const QSync::SyncChangeUpdate& ) ) );
+  connect( mCallbackHandler, SIGNAL( mapping( const QSync::SyncMappingUpdate& ) ),
+           this, SLOT( mapping( const QSync::SyncMappingUpdate& ) ) );
+  connect( mCallbackHandler, SIGNAL( engine( const QSync::SyncEngineUpdate& ) ),
+           this, SLOT( engine( const QSync::SyncEngineUpdate& ) ) );
+  connect( mCallbackHandler, SIGNAL( member( const QSync::SyncMemberUpdate& ) ),
+           this, SLOT( member( const QSync::SyncMemberUpdate& ) ) );
+  connect( mSyncAction, SIGNAL( leftClickedURL() ),
+           this, SLOT( synchronize() ) );
+  connect( mConfigureAction, SIGNAL( leftClickedURL() ),
+           this, SLOT( configure() ) );
+  connect( mSyncProcess, SIGNAL( engineChanged( QSync::Engine* ) ),
+           this, SLOT( engineChanged( QSync::Engine* ) ) );
+
+  mCallbackHandler->setEngine( mSyncProcess->engine() );
+
+  setSelectionForegroundColor( KGlobalSettings::textColor() );
+  setSelectionBackgroundColor( KGlobalSettings::alternateBackgroundColor() );
+
+  update();
+}
+
+GroupItem::~GroupItem()
+{
+  delete mCallbackHandler;
+  mCallbackHandler = 0;
+}
+
+void GroupItem::update()
+{
+  clear();
+
+  mGroupName->setText( i18n( "Group: %1" ).arg( mSyncProcess->group().name() ) );
+
+  QDateTime dateTime = mSyncProcess->group().lastSynchronization();
+  if ( dateTime.isValid() )
+    mTime->setText( i18n( "Last synchronized on: %1" ).arg( KGlobal::locale()->formatDateTime( dateTime ) ) );
+  else
+    mTime->setText( i18n( "Not synchronized yet" ) );
+
+  mProgressBar->reset();
+  mProgressBar->hide();
+
+  QSync::Group group = mSyncProcess->group();
+  QSync::Group::Iterator memberIt( group.begin() );
+  QSync::Group::Iterator memberEndIt( group.end() );
+
+  for ( ; memberIt != memberEndIt; ++memberIt ) {
+    MemberItem *item = new MemberItem( mBox, mSyncProcess, *memberIt );
+    item->show();
+    item->setStatusMessage( i18n( "Ready" ) );
+    mMemberItems.append( item );
+  }
+}
+
+void GroupItem::clear()
+{
+  mGroupName->setText( QString() );
+
+  QValueList<MemberItem*>::Iterator it;
+  for ( it = mMemberItems.begin(); it != mMemberItems.end(); ++it )
+    delete *it;
+
+  mMemberItems.clear();
+}
+
+void GroupItem::conflict( QSync::SyncMapping mapping )
+{
+  if ( mapping.changesCount() == 2 ) {
+    SingleConflictDialog dlg( mapping, this );
+    dlg.exec();
+  } else {
+    MultiConflictDialog dlg( mapping, this );
+    dlg.exec();
+  }
+}
+
+void GroupItem::change( const QSync::SyncChangeUpdate &update )
+{
+  switch ( update.type() ) {
+    case QSync::SyncChangeUpdate::Received:
+      mProcessedItems++;
+      mStatus->setText( i18n( "%1 entries read" ).arg( mProcessedItems ) );
+      break;
+    case QSync::SyncChangeUpdate::ReceivedInfo:
+      mStatus->setText( i18n( "Receive information" ) );
+      break;
+    case QSync::SyncChangeUpdate::Sent:
+      mProcessedItems--;
+      mStatus->setText( i18n( "%1 entries written" ).arg( mMaxProcessedItems - mProcessedItems ) );
+
+      mProgressBar->show();
+
+      {
+        int progress = 100;
+        if ( mMaxProcessedItems != 0 )
+          progress = (mProcessedItems * 100) / mMaxProcessedItems;
+
+        if ( progress < 0 )
+          progress = 0;
+
+        mProgressBar->setProgress( 100 - progress );
+      }
+      break;
+    case QSync::SyncChangeUpdate::WriteError:
+      mStatus->setText( i18n( "Error" ) );
+      KPassivePopup::message( update.result().message(), this );
+      break;
+    case QSync::SyncChangeUpdate::ReceiveError:
+      mStatus->setText( i18n( "Error" ) );
+      KPassivePopup::message( update.result().message(), this );
+      break;
+    default:
+      mStatus->setText( QString() );
+      break;
+  }
+}
+
+void GroupItem::mapping( const QSync::SyncMappingUpdate& )
+{
+}
+
+void GroupItem::engine( const QSync::SyncEngineUpdate &update )
+{
+  switch ( update.type() ) {
+    case QSync::SyncEngineUpdate::EndPhaseConnected:
+      mStatus->setText( i18n( "Connected" ) );
+      mProgressBar->setProgress( 0 );
+      mSynchronizing = true;
+      mSyncAction->setText( "Abort Synchronization" );
+      break;
+    case QSync::SyncEngineUpdate::EndPhaseRead:
+      mStatus->setText( i18n( "Data read" ) );
+      break;
+    case QSync::SyncEngineUpdate::EndPhaseWrite:
+      mStatus->setText( i18n( "Data written" ) );
+      mProgressBar->setProgress( 100 );
+      mProcessedItems = mMaxProcessedItems = 0;
+      break;
+    case QSync::SyncEngineUpdate::EndPhaseDisconnected:
+      mStatus->setText( i18n( "Disconnected" ) );
+      break;
+    case QSync::SyncEngineUpdate::Error:
+      mStatus->setText( i18n( "Synchronization failed" ) );
+      KPassivePopup::message( update.result().message(), this );
+      this->update();
+
+      mSynchronizing = false;
+      mSyncAction->setText( i18n( "Synchronize Now" ) );
+      break;
+    case QSync::SyncEngineUpdate::SyncSuccessfull:
+      mStatus->setText( i18n( "Successfully synchronized" ) );
+      mSyncProcess->group().setLastSynchronization( QDateTime::currentDateTime() );
+      mSyncProcess->group().save();
+      this->update();
+
+      mSynchronizing = false;
+      mSyncAction->setText( i18n( "Synchronize Now" ) );
+      break;
+    case QSync::SyncEngineUpdate::PrevUnclean:
+      mStatus->setText( i18n( "Previous synchronization failed" ) );
+      break;
+    case QSync::SyncEngineUpdate::EndConflicts:
+      mStatus->setText( i18n( "Conflicts solved" ) );
+      mMaxProcessedItems = mProcessedItems;
+      break;
+    default:
+      mStatus->setText( QString() );
+      break;
+  }
+}
+
+void GroupItem::member( const QSync::SyncMemberUpdate &update )
+{
+  QValueList<MemberItem*>::Iterator it;
+  for ( it = mMemberItems.begin(); it != mMemberItems.end(); ++it ) {
+    if ( (*it)->member() == update.member() ) {
+      switch ( update.type() ) {
+        case QSync::SyncMemberUpdate::Connected:
+          (*it)->setStatusMessage( i18n( "Connected" ) );
+          break;
+        case QSync::SyncMemberUpdate::SentChanges:
+          (*it)->setStatusMessage( i18n( "Changes read" ) );
+          break;
+        case QSync::SyncMemberUpdate::CommittedAll:
+          (*it)->setStatusMessage( i18n( "Changes written" ) );
+          break;
+        case QSync::SyncMemberUpdate::Disconnected:
+          (*it)->setStatusMessage( i18n( "Disconnected" ) );
+          break;
+        case QSync::SyncMemberUpdate::ConnectError:
+          (*it)->setStatusMessage( i18n( "Error: %1" ).arg( update.result().message() ) );
+          break;
+        case QSync::SyncMemberUpdate::GetChangesError:
+          (*it)->setStatusMessage( i18n( "Error: %1" ).arg( update.result().message() ) );
+          break;
+        case QSync::SyncMemberUpdate::CommittedAllError:
+          (*it)->setStatusMessage( i18n( "Error: %1" ).arg( update.result().message() ) );
+          break;
+        case QSync::SyncMemberUpdate::SyncDoneError:
+          (*it)->setStatusMessage( i18n( "Error: %1" ).arg( update.result().message() ) );
+          break;
+        case QSync::SyncMemberUpdate::DisconnectedError:
+          (*it)->setStatusMessage( i18n( "Error: %1" ).arg( update.result().message() ) );
+          break;
+        default:
+          break;
+      }
+
+      return;
+    }
+  }
+}
+
+void GroupItem::synchronize()
+{
+  if ( !mSynchronizing )
+    emit synchronizeGroup( mSyncProcess );
+  else
+    emit abortSynchronizeGroup( mSyncProcess );
+}
+
+void GroupItem::configure()
+{
+  emit configureGroup( mSyncProcess );
+
+  this->update();
+}
+
+void GroupItem::engineChanged( QSync::Engine *engine )
+{
+  Q_ASSERT( engine );
+
+  mCallbackHandler->setEngine( engine );
+
+  this->update();
+}
+
+MemberItem::MemberItem( QWidget *parent, SyncProcess *process,
+                        const QSync::Member &member )
+  : QWidget( parent ), mSyncProcess( process ), mMember( member )
+{
+  QFont boldFont;
+  boldFont.setBold( true );
+
+  MemberInfo mi( member );
+
+  QPixmap icon = mi.smallIcon();
+
+  QSync::Plugin plugin = member.plugin();
+
+  QVBoxLayout *layout = new QVBoxLayout( this );
+
+  QHBox* box = new QHBox( this );
+  box->setMargin( 5 );
+  box->setSpacing( 6 );
+  layout->addWidget( box );
+
+  mIcon = new QLabel( box );
+  mIcon->setPixmap( icon );
+  mIcon->setAlignment( Qt::AlignTop );
+  mIcon->setFixedWidth( mIcon->sizeHint().width() );
+
+  QVBox *nameBox = new QVBox( box );
+  mMemberName = new QLabel( nameBox );
+  mMemberName->setFont( boldFont );
+  mDescription = new QLabel( nameBox );
+
+  mStatus = new QLabel( box );
+
+  mMemberName->setText( member.name() );
+  mDescription->setText( plugin.longName() );
+}
+
+void MemberItem::setStatusMessage( const QString &msg )
+{
+  mStatus->setText( msg );
+}
+
+#include "groupitem.moc"
Index: kitchensync/src/configguiblank.cpp
===================================================================
--- kitchensync/src/configguiblank.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 0)
+++ kitchensync/src/configguiblank.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -0,0 +1,44 @@
+/*
+    This file is part of KitchenSync.
+
+    Copyright (c) 2006 Daniel Gollub <dgollub@suse.de>
+
+    This program is free software; you can redistribute it and/or modify
+    it under the terms of the GNU General Public License as published by
+    the Free Software Foundation; either version 2 of the License, or
+    (at your option) any later version.
+
+    This program is distributed in the hope that it will be useful,
+    but WITHOUT ANY WARRANTY; without even the implied warranty of
+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
+    GNU General Public License for more details.
+
+    You should have received a copy of the GNU General Public License
+    along with this program; if not, write to the Free Software
+    Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301,
+    USA.
+*/
+
+#include "configguiblank.h"
+
+#include <klocale.h>
+
+#include <qlabel.h>
+#include <qlayout.h>
+
+ConfigGuiBlank::ConfigGuiBlank( const QSync::Member &member, QWidget *parent )
+  : ConfigGui( member, parent )
+{
+  QLabel *label = new QLabel( i18n( "This member/plugin needs no configuration." ), this );
+  topLayout()->addWidget( label );
+}
+
+void ConfigGuiBlank::load( const QString& )
+{
+}
+
+QString ConfigGuiBlank::save()
+{
+  QString xml = "<config></config>";
+  return xml;
+}
Index: kitchensync/src/configguisyncmlobex.h
===================================================================
--- kitchensync/src/configguisyncmlobex.h	(.../tags/KDE/3.5.6/kdepim)	(wersja 0)
+++ kitchensync/src/configguisyncmlobex.h	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -0,0 +1,87 @@
+/*
+    This file is part of KitchenSync.
+
+    Copyright (c) 2005 Cornelius Schumacher <schumacher@kde.org>
+    Copyright (c) 2006 Daniel Gollub <dgollub@suse.de>
+
+    This program is free software; you can redistribute it and/or modify
+    it under the terms of the GNU General Public License as published by
+    the Free Software Foundation; either version 2 of the License, or
+    (at your option) any later version.
+
+    This program is distributed in the hope that it will be useful,
+    but WITHOUT ANY WARRANTY; without even the implied warranty of
+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
+    GNU General Public License for more details.
+
+    You should have received a copy of the GNU General Public License
+    along with this program; if not, write to the Free Software
+    Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301,
+    USA.
+*/
+#ifndef CONFIGGUISYNCMLOBEX_H
+#define CONFIGGUISYNCMLOBEX_H
+
+#include <qdom.h>
+
+#include "configgui.h"
+#include "connectionwidgets.h"
+
+class QCheckBox;
+class QComboBox;
+class QGridLayout;
+class QSpinBox;
+class KComboBox;
+class KLineEdit;
+class KURLRequester;
+
+class ConfigGuiSyncmlObex : public ConfigGui
+{
+  Q_OBJECT
+
+  public:
+    ConfigGuiSyncmlObex( const QSync::Member &, QWidget *parent = 0 );
+
+    void load( const QString &xml );
+    QString save();
+
+  public slots:
+     void slotConnectionChanged( int pos );
+
+  private:
+    // Connection
+    typedef QPair<int, QString> ConnectionType;
+    typedef QValueList<ConnectionType> ConnectionTypeList;
+    ConnectionTypeList mConnectionTypes;
+
+    QComboBox *mConnection;
+    BluetoothWidget *mBluetooth;
+    UsbWidget *mUsb;
+
+    // Options
+    typedef QPair<int, QString> SyncmlVersion;
+    typedef QValueList<SyncmlVersion> SyncmlVersionList;
+    SyncmlVersionList mSyncmlVersions;
+
+    QStringList mIdentiferList;
+    KLineEdit *mUsername;
+    KLineEdit *mPassword;
+    QCheckBox *mUseStringTable;
+    QCheckBox *mOnlyReplace;
+    QSpinBox *mRecvLimit;
+    QSpinBox *mMaxObjSize;
+    QComboBox *mSyncmlVersion;
+    KComboBox *mIdentifier;
+    QCheckBox *mWbxml;
+
+    QGridLayout *mGridLayout;
+
+    KComboBox *mContactDb;
+    KComboBox *mCalendarDb;
+    KComboBox *mNoteDb;
+
+  protected slots:
+    void addLineEdit( QWidget *parent, const QString &text, KComboBox **edit, int row );
+};
+
+#endif
Index: kitchensync/src/configguipalm.cpp
===================================================================
--- kitchensync/src/configguipalm.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 0)
+++ kitchensync/src/configguipalm.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -0,0 +1,200 @@
+/*
+    This file is part of KitchenSync.
+
+    Copyright (c) 2005 Tobias Koenig <tokoe@kde.org>
+
+    This program is free software; you can redistribute it and/or modify
+    it under the terms of the GNU General Public License as published by
+    the Free Software Foundation; either version 2 of the License, or
+    (at your option) any later version.
+
+    This program is distributed in the hope that it will be useful,
+    but WITHOUT ANY WARRANTY; without even the implied warranty of
+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
+    GNU General Public License for more details.
+
+    You should have received a copy of the GNU General Public License
+    along with this program; if not, write to the Free Software
+    Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301,
+    USA.
+*/
+
+#include <kcombobox.h>
+#include <kdialog.h>
+#include <klineedit.h>
+#include <klocale.h>
+
+#include <qbuttongroup.h>
+#include <qcheckbox.h>
+#include <qdom.h>
+#include <qlabel.h>
+#include <qlayout.h>
+#include <qradiobutton.h>
+#include <qspinbox.h>
+#include <qtabwidget.h>
+
+#include "configguipalm.h"
+
+ConfigGuiPalm::ConfigGuiPalm( const QSync::Member &member, QWidget *parent )
+  : ConfigGui( member, parent )
+{
+  initGUI();
+
+  mDevice->insertItem( "/dev/pilot" );
+  mDevice->insertItem( "/dev/ttyUSB0" );
+  mDevice->insertItem( "/dev/ttyUSB1" );
+  mDevice->insertItem( "/dev/ttyUSB2" );
+  mDevice->insertItem( "/dev/ttyUSB3" );
+
+  mSpeed->insertItem( "9600" );
+  mSpeed->insertItem( "19200" );
+  mSpeed->insertItem( "38400" );
+  mSpeed->insertItem( "57600" );
+  mSpeed->insertItem( "115200" );
+}
+
+void ConfigGuiPalm::load( const QString &xml )
+{
+  QDomDocument doc;
+  doc.setContent( xml );
+  QDomElement docElement = doc.documentElement();
+  QDomNode node;
+  for( node = docElement.firstChild(); !node.isNull(); node = node.nextSibling() ) {
+    QDomElement element = node.toElement();
+    if ( element.tagName() == "sockaddr" ) {
+      mDevice->setCurrentText( element.text() );
+    } else if ( element.tagName() == "speed" ) {
+      mSpeed->setCurrentText( element.text() );
+    } else if ( element.tagName() == "timeout" ) {
+      mTimeout->setValue( element.text().toInt() );
+    } else if ( element.tagName() == "username" ) {
+      mUserName->setText( element.text() );
+    } else if ( element.tagName() == "mismatch" ) {
+      switch ( element.text().toInt() ) {
+        case 0:
+          mSyncAlways->setChecked( true );
+          break;
+        case 2:
+          mSyncAbort->setChecked( true );
+          break;
+        case 1:
+        default:
+          mSyncAsk->setChecked( true );
+          break;
+      }
+    } else if ( element.tagName() == "popup" ) {
+      mPopup->setChecked( element.text() == "1" );
+    }
+  }
+}
+
+QString ConfigGuiPalm::save()
+{
+  QString config = "<config>";
+
+  config += "<sockaddr>" + mDevice->currentText() + "</sockaddr>";
+  config += "<username>" + mUserName->text() + "</username>";
+  config += "<timeout>" + QString::number( mTimeout->value() ) + "</timeout>";
+  config += "<type>0</type>";
+  config += "<speed>" + mSpeed->currentText() + "</speed>";
+  config += "<id>0</id>";
+  config += "<codepage>cp1252</codepage>";
+  config += "<popup>" + QString( mPopup->isChecked() ? "1" : "0" ) + "</popup>";
+
+  QString popup;
+  if ( mSyncAlways->isChecked() )
+    popup = "0";
+  else if ( mSyncAsk->isChecked() )
+    popup = "1";
+  else if ( mSyncAbort->isChecked() )
+    popup = "2";
+
+  config += "<mismatch>" + popup + "</mismatch>";
+
+  config += "</config>";
+
+  return config;
+}
+
+void ConfigGuiPalm::initGUI()
+{
+  QFont boldFont = font();
+  boldFont.setBold( true );
+
+  QTabWidget *tabWidget = new QTabWidget( this );
+
+  QWidget *connectionWidget = new QWidget( tabWidget );
+  QVBoxLayout *connectionLayout = new QVBoxLayout( connectionWidget,
+                                                   KDialog::marginHint(), KDialog::spacingHint() );
+
+  QLabel *label = new QLabel( i18n( "Connection" ), connectionWidget );
+  label->setFont( boldFont );
+  connectionLayout->addWidget( label );
+
+  QGridLayout *gridLayout = new QGridLayout( connectionLayout, 3, 2, KDialog::spacingHint() );
+  gridLayout->setMargin( KDialog::marginHint() );
+
+  gridLayout->addWidget( new QLabel( i18n( "Port:" ), connectionWidget ), 0, 0 );
+  gridLayout->addWidget( new QLabel( i18n( "Speed:" ), connectionWidget ), 1, 0 );
+  gridLayout->addWidget( new QLabel( i18n( "Timeout:" ), connectionWidget ), 2, 0 );
+
+  mDevice = new KComboBox( true, connectionWidget );
+  mSpeed = new KComboBox( connectionWidget );
+  mTimeout = new QSpinBox( 1, 60, 1, connectionWidget );
+  mTimeout->setSuffix( i18n( " sec" ) );
+
+  gridLayout->addWidget( mDevice, 0, 1 );
+  gridLayout->addWidget( mSpeed, 1, 1 );
+  gridLayout->addWidget( mTimeout, 2, 1 );
+  gridLayout->setColStretch( 1, 1 );
+
+  label = new QLabel( i18n( "User" ), connectionWidget );
+  label->setFont( boldFont );
+  connectionLayout->addWidget( label );
+
+  gridLayout = new QGridLayout( connectionLayout, 1, 2, KDialog::spacingHint() );
+  gridLayout->setMargin( KDialog::marginHint() );
+
+  gridLayout->addWidget( new QLabel( i18n( "Username:" ), connectionWidget ), 0, 0 );
+
+  mUserName = new KLineEdit( connectionWidget );
+  gridLayout->addWidget( mUserName, 0, 1 );
+
+  label = new QLabel( i18n( "What to do if Username does not match" ), connectionWidget );
+  label->setFont( boldFont );
+  connectionLayout->addWidget( label );
+
+  gridLayout = new QGridLayout( connectionLayout, 1, 2, KDialog::spacingHint() );
+  gridLayout->setMargin( KDialog::marginHint() );
+
+  QButtonGroup *buttonGroup = new QButtonGroup( 1, Qt::Horizontal, connectionWidget );
+  buttonGroup->setExclusive( true );
+  buttonGroup->setFrameStyle( QFrame::NoFrame );
+  mSyncAlways = new QRadioButton( i18n( "Sync Anyway" ), buttonGroup );
+  mSyncAsk = new QRadioButton( i18n( "Ask What To Do" ), buttonGroup );
+  mSyncAbort = new QRadioButton( i18n( "Abort Sync" ), buttonGroup );
+
+  gridLayout->addMultiCellWidget( buttonGroup, 0, 0, 0, 1 );
+
+  connectionLayout->addStretch( 1 );
+  tabWidget->addTab( connectionWidget, i18n( "Connection" ) );
+
+  QWidget *optionWidget = new QWidget( tabWidget );
+  QVBoxLayout *optionLayout = new QVBoxLayout( optionWidget,
+                                               KDialog::marginHint(), KDialog::spacingHint() );
+
+  label = new QLabel( i18n( "Hotsync Notification" ), optionWidget );
+  label->setFont( boldFont );
+  optionLayout->addWidget( label );
+
+  gridLayout = new QGridLayout( optionLayout, 1, 2, KDialog::spacingHint() );
+  gridLayout->setMargin( KDialog::marginHint() );
+
+  mPopup = new QCheckBox( i18n( "Popup when interaction is required" ), optionWidget );
+  gridLayout->addMultiCellWidget( mPopup, 0, 0, 0, 1 );
+
+  optionLayout->addStretch( 1 );
+  tabWidget->addTab( optionWidget, i18n( "Options" ) );
+
+  topLayout()->addWidget( tabWidget );
+}
Index: kitchensync/src/configguiopie.cpp
===================================================================
--- kitchensync/src/configguiopie.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 0)
+++ kitchensync/src/configguiopie.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -0,0 +1,135 @@
+/*
+    This file is part of KitchenSync.
+
+    Copyright (c) 2006 Tobias Koenig <tokoe@kde.org>
+
+    This program is free software; you can redistribute it and/or modify
+    it under the terms of the GNU General Public License as published by
+    the Free Software Foundation; either version 2 of the License, or
+    (at your option) any later version.
+
+    This program is distributed in the hope that it will be useful,
+    but WITHOUT ANY WARRANTY; without even the implied warranty of
+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
+    GNU General Public License for more details.
+
+    You should have received a copy of the GNU General Public License
+    along with this program; if not, write to the Free Software
+    Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301,
+    USA.
+*/
+
+#include "configguiopie.h"
+
+#include <klocale.h>
+
+#include <qcombobox.h>
+#include <qdom.h>
+#include <qlabel.h>
+#include <qlayout.h>
+#include <qlineedit.h>
+#include <qspinbox.h>
+
+ConfigGuiOpie::ConfigGuiOpie( const QSync::Member &member, QWidget *parent )
+  : ConfigGui( member, parent )
+{
+  QGridLayout *layout = new QGridLayout( topLayout() );
+
+  QLabel *label = new QLabel( i18n("Device IP:"), this );
+  layout->addWidget( label, 0, 0 );
+
+  mDeviceIP = new QLineEdit( this );
+  mDeviceIP->setInputMask( "000.000.000.000" );
+  label->setBuddy( mDeviceIP );
+  layout->addWidget( mDeviceIP, 0, 1 );
+
+  label = new QLabel( i18n("Device Type:"), this );
+  layout->addWidget( label, 1, 0 );
+
+  mDeviceType = new QComboBox( this );
+  label->setBuddy( mDeviceType );
+  layout->addWidget( mDeviceType, 1, 1 );
+
+  label = new QLabel( i18n("Username:"), this );
+  layout->addWidget( label, 2, 0 );
+
+  mUserName = new QLineEdit( this );
+  label->setBuddy( mUserName );
+  layout->addWidget( mUserName, 2, 1 );
+
+  label = new QLabel( i18n("Password:"), this );
+  layout->addWidget( label, 3, 0 );
+
+  mPassword = new QLineEdit( this );
+  mPassword->setEchoMode( QLineEdit::Password );
+  label->setBuddy( mPassword );
+  layout->addWidget( mPassword, 3, 1 );
+
+  label = new QLabel( i18n("Protocol:"), this );
+  layout->addWidget( label, 4, 0 );
+
+  mConnectionType = new QComboBox( this );
+  label->setBuddy( mConnectionType );
+  layout->addWidget( mConnectionType, 4, 1 );
+
+  label = new QLabel( i18n("Port:"), this );
+  layout->addWidget( label, 5, 0 );
+
+  mPort = new QSpinBox( this );
+  mPort->setRange( 0, 65335 );
+  label->setBuddy( mPort );
+  layout->addWidget( mPort, 5, 1 );
+
+  mDeviceType->insertItem( i18n("Opie/OpenZaurus") );
+  mDeviceType->insertItem( i18n("Qtopia2") );
+
+  mConnectionType->insertItem( i18n("SCP") );
+  mConnectionType->insertItem( i18n("FTP") );
+
+  topLayout()->addStretch( 1 );
+}
+
+void ConfigGuiOpie::load( const QString &xml )
+{
+  QDomDocument doc;
+  doc.setContent( xml );
+  QDomElement docElement = doc.documentElement();
+  QDomNode n;
+  for( n = docElement.firstChild(); !n.isNull(); n = n.nextSibling() ) {
+    QDomElement e = n.toElement();
+    if ( e.tagName() == "username" ) {
+      mUserName->setText( e.text() );
+    } else if ( e.tagName() == "password" ) {
+      mPassword->setText( e.text() );
+    } else if ( e.tagName() == "url" ) {
+      mDeviceIP->setText( e.text() );
+    } else if ( e.tagName() == "port" ) {
+      mPort->setValue( e.text().toInt() );
+    } else if ( e.tagName() == "device" ) {
+      if ( e.text() == "opie" )
+        mDeviceType->setCurrentItem( 0 );
+      else
+        mDeviceType->setCurrentItem( 1 );
+    } else if ( e.tagName() == "conntype" ) {
+      if ( e.text() == "scp" )
+        mConnectionType->setCurrentItem( 0 );
+      else
+        mConnectionType->setCurrentItem( 1 );
+    }
+  }
+}
+
+QString ConfigGuiOpie::save()
+{
+  QString xml;
+  xml = "<config>";
+  xml += "<username>" + mUserName->text() + "</username>";
+  xml += "<password>" + mPassword->text() + "</password>";
+  xml += "<url>" + mDeviceIP->text() + "</url>";
+  xml += "<device>" + QString( mDeviceType->currentItem() == 0 ? "opie" : "qtopia2" ) + "</device>";
+  xml += "<port>" + QString::number( mPort->value() ) + "</port>";
+  xml += "<conntype>" + QString( mConnectionType->currentItem() == 0 ? "scp" : "ftp" ) + "</conntype>";
+  xml += "</config>";
+
+  return xml;
+}
Index: kitchensync/src/Makefile.am
===================================================================
--- kitchensync/src/Makefile.am	(.../tags/KDE/3.5.6/kdepim)	(wersja 0)
+++ kitchensync/src/Makefile.am	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -0,0 +1,50 @@
+SUBDIRS = about pics
+
+INCLUDES = -I$(top_srcdir)/kitchensync/src \
+           -I$(top_srcdir)/kitchensync \
+           -I$(top_srcdir)/libkdepim \
+           -I$(top_srcdir) \
+            $(all_includes)
+
+# Application
+bin_PROGRAMS = kitchensync
+
+kitchensync_SOURCES = main.cpp mainwindow.cpp
+kitchensync_LDFLAGS = $(KDE_RPATH) $(all_libraries)
+kitchensync_LDADD = libkitchensync.la
+
+xdg_apps_DATA = kitchensync.desktop
+
+# Library
+lib_LTLIBRARIES = libkitchensync.la
+
+libkitchensync_la_SOURCES = aboutpage.cpp mainwidget.cpp groupconfigdialog.cpp \
+                            groupconfig.cpp groupitem.cpp groupview.cpp memberconfig.cpp \
+                            syncprocess.cpp syncprocessmanager.cpp connectionwidgets.cpp \
+                            pluginpicker.cpp configgui.cpp configguiblank.cpp configguifile.cpp \
+                            memberinfo.cpp groupconfigcommon.cpp kwidgetlist.cpp \
+                            configguipalm.cpp conflictdialog.cpp singleconflictdialog.cpp \
+                            addresseediffalgo.cpp calendardiffalgo.cpp \
+                            htmldiffalgodisplay.cpp genericdiffalgo.cpp multiconflictdialog.cpp \
+                            configguiirmc.cpp \
+                            configguisyncmlobex.cpp configguisyncmlhttp.cpp configguiopie.cpp  \
+                            configguignokii.cpp configguigcalendar.cpp configguildap.cpp configguigpe.cpp
+libkitchensync_la_LDFLAGS = $(all_libraries) $(KDE_RPATH) -no-undefined
+libkitchensync_la_LIBADD = $(LIB_KIO) $(LIB_KHTML) $(top_builddir)/kitchensync/libqopensync/libqopensync.la \
+                           $(LIB_KABC) $(top_builddir)/libkdepim/libkdepim.la $(top_builddir)/libkcal/libkcal.la
+
+# KPart
+kde_module_LTLIBRARIES = libkitchensyncpart.la
+
+libkitchensyncpart_la_SOURCES = part.cpp
+libkitchensyncpart_la_LDFLAGS = -module $(KDE_PLUGIN) $(KDE_RPATH) $(all_libraries) -no-undefined
+libkitchensyncpart_la_LIBADD = $(LIB_KPARTS) libkitchensync.la
+
+# Resources
+kitchensyncdatadir = $(kde_datadir)/kitchensync
+kitchensyncdata_DATA = kitchensyncui.rc kitchensync_part.rc
+
+METASOURCES = AUTO
+
+messages: rc.cpp
+	$(XGETTEXT) *.cpp *.h -o $(podir)/kitchensync.pot
Index: kitchensync/src/singleconflictdialog.h
===================================================================
--- kitchensync/src/singleconflictdialog.h	(.../tags/KDE/3.5.6/kdepim)	(wersja 0)
+++ kitchensync/src/singleconflictdialog.h	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -0,0 +1,54 @@
+/*
+    This file is part of KitchenSync.
+
+    Copyright (c) 2005 Tobias Koenig <tokoe@kde.org>
+
+    This program is free software; you can redistribute it and/or modify
+    it under the terms of the GNU General Public License as published by
+    the Free Software Foundation; either version 2 of the License, or
+    (at your option) any later version.
+
+    This program is distributed in the hope that it will be useful,
+    but WITHOUT ANY WARRANTY; without even the implied warranty of
+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
+    GNU General Public License for more details.
+
+    You should have received a copy of the GNU General Public License
+    along with this program; if not, write to the Free Software
+    Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301, USA.
+*/
+
+#ifndef SINGLECONFLICTDIALOG_H
+#define SINGLECONFLICTDIALOG_H
+
+#include "conflictdialog.h"
+#include <libkdepim/diffalgo.h>
+
+using namespace KPIM;
+
+namespace KSync {
+class HTMLDiffAlgoDisplay;
+}
+
+class SingleConflictDialog : public ConflictDialog
+{
+  Q_OBJECT
+
+  public:
+    SingleConflictDialog( QSync::SyncMapping &mapping, QWidget *parent );
+    ~SingleConflictDialog();
+
+  private slots:
+    void useFirstChange();
+    void useSecondChange();
+    void duplicateChange();
+    void ignoreChange();
+
+  private:
+    void initGUI();
+
+    DiffAlgo *mDiffAlgo;
+    KSync::HTMLDiffAlgoDisplay *mDiffAlgoDisplay;
+};
+
+#endif
Index: kitchensync/src/kitchensync_part.rc
===================================================================
--- kitchensync/src/kitchensync_part.rc	(.../tags/KDE/3.5.6/kdepim)	(wersja 0)
+++ kitchensync/src/kitchensync_part.rc	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -0,0 +1,22 @@
+<!DOCTYPE kpartgui>
+<kpartgui name="kitchensync" version="1">
+  <MenuBar>
+    <Menu name="file">
+      <Action name="sync" />
+    </Menu>
+
+    <Menu name="groups"><text>&amp;Groups</text>
+      <Action name="add_group" />
+      <Action name="edit_group" />
+      <Action name="delete_group" />
+    </Menu>
+  </MenuBar>
+
+  <ToolBar name="mainToolBar"><text>Main</text>
+    <Action name="sync" />
+    <Separator />
+    <Action name="add_group" />
+    <Action name="edit_group" />
+    <Action name="delete_group" />
+  </ToolBar>
+</kpartgui>
Index: kitchensync/src/htmldiffalgodisplay.h
===================================================================
--- kitchensync/src/htmldiffalgodisplay.h	(.../tags/KDE/3.5.6/kdepim)	(wersja 0)
+++ kitchensync/src/htmldiffalgodisplay.h	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -0,0 +1,54 @@
+/*
+    This file is part of libkdepim.
+
+    Copyright (c) 2004 Tobias Koenig <tokoe@kde.org>
+
+    This library is free software; you can redistribute it and/or
+    modify it under the terms of the GNU Library General Public
+    License as published by the Free Software Foundation; either
+    version 2 of the License, or (at your option) any later version.
+
+    This library is distributed in the hope that it will be useful,
+    but WITHOUT ANY WARRANTY; without even the implied warranty of
+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
+    Library General Public License for more details.
+
+    You should have received a copy of the GNU Library General Public License
+    along with this library; see the file COPYING.LIB.  If not, write to
+    the Free Software Foundation, Inc., 51 Franklin Street, Fifth Floor,
+    Boston, MA 02110-1301, USA.
+*/
+
+#ifndef KSYNC_HTMLDIFFALGODISPLAY_H
+#define KSYNC_HTMLDIFFALGODISPLAY_H
+
+#include <ktextbrowser.h>
+#include <libkdepim/diffalgo.h>
+
+using namespace KPIM;
+
+namespace KSync {
+
+class HTMLDiffAlgoDisplay : virtual public DiffAlgoDisplay, public KTextBrowser
+{
+  public:
+    HTMLDiffAlgoDisplay( QWidget *parent );
+
+    void begin();
+    void end();
+    void setLeftSourceTitle( const QString &title );
+    void setRightSourceTitle( const QString &title );
+    void additionalLeftField( const QString &id, const QString &value );
+    void additionalRightField( const QString &id, const QString &value );
+    void conflictField( const QString &id, const QString &leftValue,
+                        const QString &rightValue );
+
+  private:
+    QString mLeftTitle;
+    QString mRightTitle;
+    QString mText;
+};
+
+}
+
+#endif
Index: kitchensync/src/groupview.h
===================================================================
--- kitchensync/src/groupview.h	(.../tags/KDE/3.5.6/kdepim)	(wersja 0)
+++ kitchensync/src/groupview.h	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -0,0 +1,57 @@
+/*
+    This file is part of KitchenSync.
+
+    Copyright (c) 2005 Cornelius Schumacher <schumacher@kde.org>
+
+    This program is free software; you can redistribute it and/or modify
+    it under the terms of the GNU General Public License as published by
+    the Free Software Foundation; either version 2 of the License, or
+    (at your option) any later version.
+
+    This program is distributed in the hope that it will be useful,
+    but WITHOUT ANY WARRANTY; without even the implied warranty of
+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
+    GNU General Public License for more details.
+
+    You should have received a copy of the GNU General Public License
+    along with this program; if not, write to the Free Software
+    Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301, USA.
+*/
+#ifndef GROUPVIEW_H
+#define GROUPVIEW_H
+
+#include <kwidgetlist.h>
+
+class AboutPage;
+class SyncProcess;
+class QVBoxLayout;
+
+class GroupView : public QWidget
+{
+  Q_OBJECT
+
+  public:
+    GroupView( QWidget *parent );
+
+    SyncProcess* selectedSyncProcess() const;
+
+    void clear();
+
+  public slots:
+    void updateView();
+    void updateSyncProcess( SyncProcess *process );
+
+  signals:
+    void addGroup();
+    void synchronizeGroup( SyncProcess *syncProcess );
+    void abortSynchronizeGroup( SyncProcess *syncProcess );
+    void configureGroup( SyncProcess *syncProcess );
+
+  private:
+    AboutPage *mAboutPage;
+    KWidgetList *mWidgetList;
+
+    QVBoxLayout *mLayout;
+};
+
+#endif
Index: kitchensync/src/multiconflictdialog.cpp
===================================================================
--- kitchensync/src/multiconflictdialog.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 0)
+++ kitchensync/src/multiconflictdialog.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -0,0 +1,141 @@
+/*
+    This file is part of KitchenSync.
+
+    Copyright (c) 2005 Tobias Koenig <tokoe@kde.org>
+
+    This program is free software; you can redistribute it and/or modify
+    it under the terms of the GNU General Public License as published by
+    the Free Software Foundation; either version 2 of the License, or
+    (at your option) any later version.
+
+    This program is distributed in the hope that it will be useful,
+    but WITHOUT ANY WARRANTY; without even the implied warranty of
+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
+    GNU General Public License for more details.
+
+    You should have received a copy of the GNU General Public License
+    along with this program; if not, write to the Free Software
+    Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301, USA.
+*/
+
+#include <kdialog.h>
+#include <klocale.h>
+#include <kwidgetlist.h>
+
+#include <qlabel.h>
+#include <qlayout.h>
+#include <qpushbutton.h>
+
+#include "memberinfo.h"
+
+#include "multiconflictdialog.h"
+
+class ChangeItem : public KWidgetListItem
+{
+  public:
+    ChangeItem( KWidgetList *parent, const QSync::SyncChange &change )
+      : KWidgetListItem( parent ),
+        mChange( change )
+    {
+      QGridLayout *layout = new QGridLayout( this, 2, 1, KDialog::marginHint(), KDialog::spacingHint() );
+
+      MemberInfo mi( change.member() );
+      layout->addWidget( new QLabel( mi.name(), this ), 0, 0 );
+
+      QString type;
+      switch ( change.changeType() ) {
+        case QSync::SyncChange::UnknownChange:
+          type = i18n( "Unknown" );
+          break;
+        case QSync::SyncChange::AddedChange:
+          type = i18n( "Added" );
+          break;
+        case QSync::SyncChange::DeletedChange:
+          type = i18n( "Deleted" );
+          break;
+        case QSync::SyncChange::ModifiedChange:
+          type = i18n( "Modified" );
+          break;
+        case QSync::SyncChange::UnmodifiedChange:
+        default:
+          type = i18n( "Unmodified" );
+          break;
+      }
+
+      layout->addWidget( new QLabel( type, this ), 1, 0 );
+    }
+
+    QSync::SyncChange change() const { return mChange; }
+
+  private:
+    QSync::SyncChange mChange;
+};
+
+MultiConflictDialog::MultiConflictDialog( QSync::SyncMapping &mapping, QWidget *parent )
+  : ConflictDialog( mapping, parent )
+{
+  initGUI();
+
+  for ( int i = 0; i < mMapping.changesCount(); ++i ) {
+    QSync::SyncChange change = mMapping.changeAt( i );
+    if ( change.isValid() ) {
+      ChangeItem *item = new ChangeItem( mWidgetList, change );
+      mWidgetList->appendItem( item );
+    }
+  }
+
+  mWidgetList->setFocus();
+}
+
+MultiConflictDialog::~MultiConflictDialog()
+{
+}
+
+void MultiConflictDialog::useSelectedChange()
+{
+  ChangeItem *item = static_cast<ChangeItem*>( mWidgetList->selectedItem() );
+  if ( !item )
+    return;
+
+  mMapping.solve( item->change() );
+
+  accept();
+}
+
+void MultiConflictDialog::duplicateChange()
+{
+  mMapping.duplicate();
+
+  accept();
+}
+
+void MultiConflictDialog::ignoreChange()
+{
+  mMapping.ignore();
+
+  accept();
+}
+
+void MultiConflictDialog::initGUI()
+{
+  QGridLayout *layout = new QGridLayout( this, 3, 3, KDialog::marginHint(), KDialog::spacingHint() );
+
+  layout->addMultiCellWidget( new QLabel( i18n( "A conflict has appeared, please solve it manually." ), this ), 0, 0, 0, 2 );
+
+  mWidgetList = new KWidgetList( this );
+  layout->addMultiCellWidget( mWidgetList, 1, 1, 0, 2 );
+
+  QPushButton *button = new QPushButton( i18n( "Use Selected Item" ), this );
+  connect( button, SIGNAL( clicked() ), SLOT( useSelectedChange() ) );
+  layout->addWidget( button, 2, 0 );
+
+  button = new QPushButton( i18n( "Duplicate Items" ), this );
+  connect( button, SIGNAL( clicked() ), SLOT( duplicateChange() ) );
+  layout->addWidget( button, 2, 1 );
+
+  button = new QPushButton( i18n( "Ignore Conflict" ), this );
+  connect( button, SIGNAL( clicked() ), SLOT( ignoreChange() ) );
+  layout->addWidget( button, 2, 2 );
+}
+
+#include "multiconflictdialog.moc"
Index: kitchensync/src/pluginpicker.cpp
===================================================================
--- kitchensync/src/pluginpicker.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 0)
+++ kitchensync/src/pluginpicker.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -0,0 +1,136 @@
+/*
+    This file is part of KitchenSync.
+
+    Copyright (c) 2005 Cornelius Schumacher <schumacher@kde.org>
+
+    This program is free software; you can redistribute it and/or modify
+    it under the terms of the GNU General Public License as published by
+    the Free Software Foundation; either version 2 of the License, or
+    (at your option) any later version.
+
+    This program is distributed in the hope that it will be useful,
+    but WITHOUT ANY WARRANTY; without even the implied warranty of
+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
+    GNU General Public License for more details.
+
+    You should have received a copy of the GNU General Public License
+    along with this program; if not, write to the Free Software
+    Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301,
+    USA.
+*/
+
+#include "pluginpicker.h"
+
+#include "memberinfo.h"
+#include "syncprocessmanager.h"
+
+#include <libqopensync/environment.h>
+
+#include <kdialog.h>
+#include <kglobal.h>
+#include <kiconloader.h>
+#include <klocale.h>
+
+#include <qlabel.h>
+#include <qlayout.h>
+
+PluginItem::PluginItem( KWidgetList *list, const QSync::Plugin &plugin )
+  : KWidgetListItem( list ), mPlugin( plugin )
+{
+  QString iconName = MemberInfo::pluginIconName( mPlugin.name() );
+  QGridLayout *layout = new QGridLayout( this, 2, 2, KDialog::marginHint(), KDialog::spacingHint() );
+
+  QLabel *icon = new QLabel( this );
+  icon->setPixmap( KGlobal::iconLoader()->loadIcon( iconName, KIcon::Desktop ) );
+  icon->setFixedSize( icon->sizeHint() );
+
+  QLabel *name = new QLabel( plugin.longName(), this );
+  QLabel *description = new QLabel( plugin.description(), this );
+
+  QFont font = name->font();
+  font.setBold( true );
+  name->setFont( font );
+
+  layout->addWidget( icon, 0, 0 );
+  layout->addWidget( name, 0, 1 );
+  layout->addWidget( description, 1, 1 );
+}
+
+
+PluginPicker::PluginPicker( QWidget *parent )
+  : QWidget( parent )
+{
+  QBoxLayout *layout = new QVBoxLayout( this );
+
+  mPluginList = new KWidgetList( this );
+  layout->addWidget( mPluginList );
+
+  connect( mPluginList, SIGNAL( doubleClicked( KWidgetListItem* ) ),
+           SIGNAL( selected() ) );
+
+  updatePluginList();
+
+  mPluginList->setFocus();
+}
+
+void PluginPicker::updatePluginList()
+{
+  mPluginList->clear();
+
+  QSync::Environment *env = SyncProcessManager::self()->environment();
+
+  QSync::Environment::PluginIterator it( env->pluginBegin() );
+  for( ; it != env->pluginEnd(); ++it ) {
+    QSync::Plugin plugin = *it;
+    mPluginList->appendItem( new PluginItem( mPluginList, plugin ) );
+  }
+}
+
+QSync::Plugin PluginPicker::selectedPlugin() const
+{
+  PluginItem *item = static_cast<PluginItem *>( mPluginList->selectedItem() );
+  if ( item ) return item->plugin();
+  else return QSync::Plugin();
+}
+
+
+PluginPickerDialog::PluginPickerDialog( QWidget *parent )
+  : KDialogBase( parent, 0, true, i18n("Select Member Type"), Ok | Cancel )
+{
+  QFrame *topFrame = makeMainWidget();
+
+  QBoxLayout *topLayout = new QVBoxLayout( topFrame );
+
+  mPicker = new PluginPicker( topFrame );
+  topLayout->addWidget( mPicker );
+
+  connect( mPicker, SIGNAL( selected() ), SLOT( slotOk() ) );
+
+  setInitialSize( QSize( 460, 380 ) );
+}
+
+QSync::Plugin PluginPickerDialog::selectedPlugin() const
+{
+  return mPicker->selectedPlugin();
+}
+
+QSync::Plugin PluginPickerDialog::getPlugin( QWidget *parent )
+{
+  PluginPickerDialog dlg( parent );
+  if ( dlg.exec() )
+    return dlg.selectedPlugin();
+  else
+    return QSync::Plugin();
+}
+
+void PluginPickerDialog::slotOk()
+{
+  accept();
+}
+
+void PluginPickerDialog::slotCancel()
+{
+  reject();
+}
+
+#include "pluginpicker.moc"
Index: kitchensync/src/mainwidget.h
===================================================================
--- kitchensync/src/mainwidget.h	(.../tags/KDE/3.5.6/kdepim)	(wersja 0)
+++ kitchensync/src/mainwidget.h	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -0,0 +1,73 @@
+/*
+    This file is part of KitchenSync.
+
+    Copyright (c) 2005 Tobias Koenig <tokoe@kde.org>
+
+    This program is free software; you can redistribute it and/or modify
+    it under the terms of the GNU General Public License as published by
+    the Free Software Foundation; either version 2 of the License, or
+    (at your option) any later version.
+
+    This program is distributed in the hope that it will be useful,
+    but WITHOUT ANY WARRANTY; without even the implied warranty of
+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
+    GNU General Public License for more details.
+
+    You should have received a copy of the GNU General Public License
+    along with this program; if not, write to the Free Software
+    Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301, USA.
+*/
+#ifndef MAINWIDGET_H
+#define MAINWIDGET_H
+
+#include <libqopensync/engine.h>
+#include <kdemacros.h>
+
+#include <qwidget.h>
+
+class KAboutData;
+class KAction;
+class KXMLGUIClient;
+class GroupView;
+class SyncProcess;
+class SyncProcessManager;
+
+namespace QSync {
+class Environment;
+}
+
+class KDE_EXPORT MainWidget : public QWidget
+{
+    Q_OBJECT
+  public:
+    MainWidget( KXMLGUIClient *guiClient, QWidget *widget = 0, const char *name = 0 );
+    ~MainWidget();
+
+    virtual KXMLGUIClient *guiClient() const;
+    static KAboutData *aboutData();
+
+  public slots:
+    void addGroup();
+    void deleteGroup();
+    void editGroup();
+    void editGroup( SyncProcess *syncProcess );
+
+    void sync();
+    void sync( SyncProcess *syncProcess );
+    void abortSync( SyncProcess *syncProcess );
+
+  private:
+    void initGUI();
+    void initActions();
+    void enableActions();
+
+    KXMLGUIClient *mGUIClient;
+    KAction *mActionSynchronize;
+    KAction *mActionAddGroup;
+    KAction *mActionDeleteGroup;
+    KAction *mActionEditGroup;
+
+    GroupView *mGroupView;
+};
+
+#endif

Zmiany atrybutów dla: kitchensync/src
___________________________________________________________________
Nazwa: svn:ignore
   + Makefile.in



Index: kitchensync/Makefile.am
===================================================================
--- kitchensync/Makefile.am	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kitchensync/Makefile.am	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,6 +1,3 @@
-SUBDIRS = libksync libkonnector2 kitchensync multisynk
+SUBDIRS = libqopensync src
 
 include $(top_srcdir)/admin/Doxyfile.am
-
-splashpicsdir = $(kde_datadir)/kitchensync/pics
-splashpics_DATA = kitchensync.png
Index: kitchensync/configure.in.bot
===================================================================
--- kitchensync/configure.in.bot	(.../tags/KDE/3.5.6/kdepim)	(wersja 0)
+++ kitchensync/configure.in.bot	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -0,0 +1,8 @@
+if test "$HAVE_OPENSYNC" = 0 -o "$HAVE_OPENSYNC_ENGINE" = 0; then
+	echo ""
+	echo "You're missing a compatible version of libopensync."
+        echo "Version 0.19 or greater is needed."
+	echo "kitchensync will not be built."
+	echo ""
+	all_tests=bad
+fi
Index: kitchensync/configure.in.in
===================================================================
--- kitchensync/configure.in.in	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kitchensync/configure.in.in	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1 +1,68 @@
-#DO_NOT_COMPILE="$DO_NOT_COMPILE kitchensync"
+dnl configure.in.in for OpenSync based KitchenSync
+dnl
+dnl Copyright (C) 2005 Holger Hans Peter Freyther
+dnl
+dnl Based on KPilot's configure.in
+dnl Copyright (C) 2000,2001 Adriaan de Groot
+dnl
+dnl This file is released under the terms of the GNU General Public
+dnl Licence (GPL) Version 2.
+
+
+
+dnl we need PKG_CONFIG for doing these tests
+AC_DEFUN([KITCHENSYNC_CHECK_OPENSYNC],[
+dnl AC_REQUIRE([PKG_CHECK_MODULES])
+
+dnl Say what we're doing
+AC_MSG_CHECKING(for opensync (for KitchenSync))
+AC_ARG_WITH(opensync,
+[  --with-opensync=PATH set prefix for opensync files],
+)dnl
+
+dnl change pkg_config_path if we have a OpenSync prefix
+dnl and also set it to our prefix
+if test -d "$with_opensync"; then
+    export PKG_CONFIG_PATH=${PKG_CONFIG_PATH}:/usr/lib/pkgconfig:$with_opensync/lib/pkgconfig
+fi
+export PKG_CONFIG_PATH=${PKG_CONFIG_PATH}:$prefix/lib/pkgconfig:/usr/local/lib/pkgconfig
+
+
+HAVE_OPENSYNC=0
+HAVE_OPENSYNC_ENGINE=0
+PKG_CHECK_MODULES(OPENSYNC, opensync-1.0 >= 0.19, HAVE_OPENSYNC=1,HAVE_OPENSYNC=0)
+PKG_CHECK_MODULES(OPENSYNCENGINE, osengine-1.0 >= 0.19, HAVE_OPENSYNC_ENGINE=1, HAVE_OPENSYNC_ENGINE=0)
+PKG_CHECK_MODULES(LIBXML,   libxml-2.0, , HAVE_OPENSYNC=0)
+PKG_CHECK_MODULES(GLIB, glib-2.0 >= 2.6, , HAVE_OPENSYNC=0)
+
+if test -z "PKG_CONFIG"; then
+    AC_PATH_PROG(PKG_CONFIG, pkg-config, no)
+fi
+
+if test "$PKG_CONFIG" != "no"; then
+    OPENSYNC_CONFIGDIR=`$PKG_CONFIG  --variable=configdir  "opensync-1.0"`
+    OPENSYNC_PLUGINDIR=`$PKG_CONFIG  --variable=plugindir  "opensync-1.0"`
+    OPENSYNC_FORMATSDIR=`$PKG_CONFIG --variable=formatsdir "opensync-1.0"`
+    OPENSYNC_HEADERDIR=`$PKG_CONFIG  --variable=headerdir  "opensync-1.0"`
+fi
+
+AC_SUBST(OPENSYNC_CONFIGDIR)
+AC_SUBST(OPENSYNC_PLUGINDIR)
+AC_SUBST(OPENSYNC_FORMATSDIR)
+AC_SUBST(OPENSYNC_HEADERDIR)
+
+dnl Check if we can compile KitchenSync
+AM_CONDITIONAL(compile_kitchensync, test "$HAVE_OPENSYNC" = 1 -a "$HAVE_OPENSYNC_ENGINE" = 1)
+
+if test "$HAVE_OPENSYNC" = 1 -a "$HAVE_OPENSYNC_ENGINE" = 1 ; then
+    AC_MSG_RESULT([found])
+else
+    AC_MSG_RESULT([not found])
+    DO_NOT_COMPILE="$DO_NOT_COMPILE kitchensync"
+fi
+
+])
+
+
+dnl Check For OpenSync support
+KITCHENSYNC_CHECK_OPENSYNC
Index: kitchensync/opensyncdbus/dbusclient.h
===================================================================
--- kitchensync/opensyncdbus/dbusclient.h	(.../tags/KDE/3.5.6/kdepim)	(wersja 0)
+++ kitchensync/opensyncdbus/dbusclient.h	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -0,0 +1,56 @@
+/*
+    This file is part of KDE.
+
+    Copyright (c) 2006 Cornelius Schumacher <schumacher@kde.org>
+
+    This program is free software; you can redistribute it and/or modify
+    it under the terms of the GNU General Public License as published by
+    the Free Software Foundation; either version 2 of the License, or
+    (at your option) any later version.
+
+    This program is distributed in the hope that it will be useful,
+    but WITHOUT ANY WARRANTY; without even the implied warranty of
+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
+    GNU General Public License for more details.
+
+    You should have received a copy of the GNU General Public License
+    along with this program; if not, write to the Free Software
+    Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301,
+    USA.
+*/
+#ifndef DBUSCLIENT_H
+#define DBUSCLIENT_H
+
+#include <qobject.h>
+
+#include <dbus/qdbusobject.h>
+
+class QDBusMessage;
+class QDBusConnection;
+
+class OpenSyncService : public QDBusObjectBase
+{
+  public:
+    OpenSyncService();
+
+    void setConnection( QDBusConnection *connection );
+
+  protected:
+    virtual bool handleMethodCall( const QDBusMessage &message );
+
+    QDBusMessage hello( const QDBusMessage & );
+    QDBusMessage randomNumber( const QDBusMessage & );
+
+    QDBusMessage listGroups( const QDBusMessage &message );
+    QDBusMessage listPlugins( const QDBusMessage &message );
+    QDBusMessage showGroup( const QDBusMessage &message );
+    QDBusMessage showMember( const QDBusMessage &message );
+
+    QDBusMessage error( const QDBusMessage &, const QString &errorCode,
+      const QString &errorMessage );
+
+  private:
+    QDBusConnection *mConnection;
+};
+
+#endif
Index: kitchensync/opensyncdbus/Makefile.am
===================================================================
--- kitchensync/opensyncdbus/Makefile.am	(.../tags/KDE/3.5.6/kdepim)	(wersja 0)
+++ kitchensync/opensyncdbus/Makefile.am	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -0,0 +1,10 @@
+INCLUDES = -I/usr/local/include/dbus-1.0/qt3 $(all_includes) \
+  -I$(top_srcdir)/kitchensync
+
+bin_PROGRAMS = opensyncdbus
+
+opensyncdbus_SOURCES = dbusclient.cpp
+opensyncdbus_LDADD = $(top_builddir)/kitchensync/libqopensync/libqopensync.la
+opensyncdbus_LDFLAGS = -ldbus-1-qt3 -ldbus-1 $(all_libraries) $(KDE_RPATH)
+
+METASOURCES = AUTO
Index: kitchensync/opensyncdbus/README
===================================================================
--- kitchensync/opensyncdbus/README	(.../tags/KDE/3.5.6/kdepim)	(wersja 0)
+++ kitchensync/opensyncdbus/README	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -0,0 +1,5 @@
+This directory contains opensyncdbus, a D-BUS frontend for OpenSync. It's a
+daemon which provides a D-BUS interface for controlling OpenSync.
+
+To compile opensyncdbus you need the Qt3 bindings for D-BUS.
+They are in SVN under branches/work/dbus-qt4-qt3backport/
Index: kitchensync/opensyncdbus/dbusclient.cpp
===================================================================
--- kitchensync/opensyncdbus/dbusclient.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 0)
+++ kitchensync/opensyncdbus/dbusclient.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -0,0 +1,273 @@
+/*
+    This file is part of KDE.
+
+    Copyright (c) 2006 Cornelius Schumacher <schumacher@kde.org>
+
+    This program is free software; you can redistribute it and/or modify
+    it under the terms of the GNU General Public License as published by
+    the Free Software Foundation; either version 2 of the License, or
+    (at your option) any later version.
+
+    This program is distributed in the hope that it will be useful,
+    but WITHOUT ANY WARRANTY; without even the implied warranty of
+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
+    GNU General Public License for more details.
+
+    You should have received a copy of the GNU General Public License
+    along with this program; if not, write to the Free Software
+    Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301,
+    USA.
+*/
+
+#include "dbusclient.h"
+
+#include <libqopensync/environment.h>
+#include <libqopensync/group.h>
+
+#include <dbus/qdbuserror.h>
+#include <dbus/qdbusconnection.h>
+#include <dbus/qdbusmessage.h>
+#include <dbus/qdbusproxy.h>
+
+#include <qapplication.h>
+#include <qtimer.h>
+
+#include <iostream>
+
+OpenSyncService::OpenSyncService()
+  : mConnection( 0 )
+{
+}
+
+void OpenSyncService::setConnection( QDBusConnection *connection )
+{
+  mConnection = connection;
+  mConnection->registerObject( "/ABC", this );
+}
+
+bool OpenSyncService::handleMethodCall( const QDBusMessage &message )
+{
+  qDebug( "OpenSyncService::handleMethodCall()" );
+
+  qDebug( "  Interface: %s", message.interface().latin1() );
+  qDebug( "  Path: %s", message.path().latin1() );
+  qDebug( "  Member: %s", message.member().latin1() );
+  qDebug( "  Sender: %s", message.sender().latin1() );
+
+  if ( message.interface() != "org.opensync.SyncEngine" ) return false;
+
+  QDBusMessage reply;
+
+  QString function = message.member();
+  if ( function == "hello" ) {
+    reply = hello( message );
+  } else if ( function == "randomNumber" ) {
+    reply = randomNumber( message );
+  } else if ( function == "listGroups" ) {
+    reply = listGroups( message );
+  } else if ( function == "listPlugins" ) {
+    reply = listPlugins( message );
+  } else if ( function == "showGroup" ) {
+    reply = showGroup( message );
+  } else if ( function == "showMember" ) {
+    reply = showMember( message );
+  } else {
+    return false;
+  }
+
+  mConnection->send( reply );
+
+  return true;
+}
+
+QDBusMessage OpenSyncService::showMember( const QDBusMessage &message )
+{
+  if ( message.count() != 2 ) {
+    return error( message, "arg_count",
+      QString("Wrong number of arguments. Expected 2, got %1.")
+      .arg( message.count() ) );
+  }
+
+  QString groupName = message[ 0 ].toString();
+  if ( groupName.isEmpty() ) {
+    return error( message, "missing_arg", "Missing argument: group name." );
+  }
+
+  bool ok;
+  int memberId = message[ 1 ].toInt( &ok );
+  if ( !ok ) {
+    return error( message, "missing_arg", "Missing argument: member id." );
+  }
+
+  QDBusMessage reply;
+
+  QSync::Environment env;
+  QSync::Result result = env.initialize();
+  if ( result.isError() ) {
+    return error( message, result.name(), result.message() ); 
+  } else {
+    reply = QDBusMessage::methodReply( message );
+
+    QSync::Group group = env.groupByName( groupName );
+    if ( !group.isValid() ) {
+      return error( message, "group_name", QString("Unknown group '%1'.")
+        .arg( groupName ) );
+    }
+
+    QSync::Member member = group.memberById( memberId );
+    if ( !member.isValid() ) {
+      return error( message, "member_id",
+        QString("Unknown member id '%1' in group '%2'.").arg( groupName )
+          .arg( memberId ) );
+    }
+
+    reply.append( memberId );
+    reply.append( member.pluginName() );
+      
+    env.finalize();
+  }
+
+  return reply;
+}
+
+
+QDBusMessage OpenSyncService::showGroup( const QDBusMessage &message )
+{
+  if ( message.count() != 1 ) {
+    return error( message, "arg_count",
+      QString("Wrong number of arguments. Expected 1, got %1")
+      .arg( message.count() ) );
+  }
+
+  QString groupName = message[ 0 ].toString();
+  if ( groupName.isEmpty() ) {
+    return error( message, "missing_arg", "Missing argument group name." );
+  }
+
+  QDBusMessage reply;
+
+  QSync::Environment env;
+  QSync::Result result = env.initialize();
+  if ( result.isError() ) {
+    return error( message, result.name(), result.message() ); 
+  } else {
+    reply = QDBusMessage::methodReply( message );
+
+    QSync::Group group = env.groupByName( groupName );
+    if ( !group.isValid() ) {
+      return error( message, "group_name", QString("Unknown group '%1'")
+        .arg( groupName ) );
+    }
+
+    QSync::Group::Iterator it( &group );
+    for( it = group.begin(); it != group.end(); ++it ) {
+      QSync::Member member = *it;
+      reply.append( QVariant( member.id() ) );
+    }
+  
+    env.finalize();
+  }
+
+  return reply;
+}
+
+QDBusMessage OpenSyncService::error( const QDBusMessage &message,
+  const QString &errorCode,
+  const QString &errorMessage )
+{
+  QDBusError error( "org.opensync." + errorCode, errorMessage );
+  return QDBusMessage::methodError( message, error );
+}
+
+QDBusMessage OpenSyncService::listPlugins( const QDBusMessage &message )
+{
+  QDBusMessage reply;
+
+  QSync::Environment env;
+  QSync::Result result = env.initialize();
+  if ( result.isError() ) {
+    QDBusError error( result.name(), result.message() ); 
+    reply = QDBusMessage::methodError( message, error );
+  } else {
+    reply = QDBusMessage::methodReply( message );
+
+    QSync::Environment::PluginIterator it( env.pluginBegin() );
+    for ( ; it != env.pluginEnd(); ++it ) {
+      reply.append( QVariant( (*it).name() ) );
+    }
+  
+    env.finalize();
+  }
+
+  return reply;
+}
+
+QDBusMessage OpenSyncService::listGroups( const QDBusMessage &message )
+{
+  QDBusMessage reply;
+
+  QSync::Environment env;
+  QSync::Result result = env.initialize();
+  if ( result.isError() ) {
+    QDBusError error( result.name(), result.message() ); 
+    reply = QDBusMessage::methodError( message, error );
+  } else {
+    reply = QDBusMessage::methodReply( message );
+
+    QSync::Environment::GroupIterator it( env.groupBegin() );
+    for ( ; it != env.groupEnd(); ++it ) {
+      reply.append( QVariant( (*it).name() ) );
+    }
+  
+    env.finalize();
+  }
+
+  return reply;
+}
+
+QDBusMessage OpenSyncService::hello( const QDBusMessage &message )
+{
+  QDBusMessage reply = QDBusMessage::methodReply( message );
+
+// QDBusError error;
+// reply = QDBusMessage::methodError( message, error );
+
+  reply.append( QVariant( QString( "Hello!" ) ) );
+  
+  return reply;
+}
+
+QDBusMessage OpenSyncService::randomNumber( const QDBusMessage &message )
+{
+  QDBusMessage reply = QDBusMessage::methodReply( message );
+
+  int number = rand();
+
+  reply.append( QVariant( number ) );
+  
+  return reply;
+}
+
+int main( int argc, char *argv[] )
+{
+  QApplication app(argc, argv);
+
+  std::cout << "Hello" << std::endl;
+
+  QDBusConnection connection = QDBusConnection::addConnection(
+    QDBusConnection::SessionBus );
+
+  if ( !connection.isConnected() ) {
+    qFatal("Cannot connect to session bus");
+  }
+
+  connection.requestName( "org.opensync.SyncEngine",
+    QDBusConnection::NoReplace );
+
+  OpenSyncService service;
+  service.setConnection( &connection );
+
+  return app.exec();
+}
+
+//#include "dbusclient.moc"

Zmiany atrybutów dla: kitchensync/opensyncdbus
___________________________________________________________________
Nazwa: svn:ignore
   + Makefile.in


Index: README
===================================================================
--- README	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ README	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -53,7 +53,6 @@
           plugin of KOrganizer
 * kdgantt: alternative lib for Gantt diagrams, used by the free/busy view of
            KOrganizer (yes, we should decide for one of the Gantt libs)
-* ksync: library for syncing collections of data entries
 * kioslaves/sieve: Sieve kioslave
 * ktnef: handling of tnef data
 
Index: libkdepim/categoryeditdialog.h
===================================================================
--- libkdepim/categoryeditdialog.h	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkdepim/categoryeditdialog.h	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -26,7 +26,6 @@
 #include <kdepimmacros.h>
 
 class KPimPrefs;
-class CategoryEditDialog_base;
 
 namespace KPIM {
 
@@ -46,20 +45,20 @@
     void slotOk();
     void slotApply();
     void slotCancel();
-    void slotTextChanged(const QString &text);
     void add();
+    void edit();
     void remove();
-    void editItem( QListViewItem *item );
 
   signals:
     void categoryConfigChanged();
-    
+
   protected:
     void fillList();
 
   private:
     KPimPrefs *mPrefs;
-    CategoryEditDialog_base *mWidget;
+    class Private;
+    Private* const d;
 };
 
 }
Index: libkdepim/maillistdrag.h
===================================================================
--- libkdepim/maillistdrag.h	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkdepim/maillistdrag.h	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -56,7 +56,7 @@
     void set( Q_UINT32, QString, QString, QString, QString, time_t );
 
     /*** KMail unique identification number ***/
-    Q_UINT32 serialNumber();
+    Q_UINT32 serialNumber() const;
 
     /*** MD5 checksum of message identification string ***/
     QString messageId();
Index: libkdepim/categoryeditdialog.cpp
===================================================================
--- libkdepim/categoryeditdialog.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkdepim/categoryeditdialog.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -23,37 +23,58 @@
 #include <qstringlist.h>
 #include <qlineedit.h>
 #include <qlistview.h>
+#include <qlayout.h>
 #include <qheader.h>
 #include <qpushbutton.h>
 #include <klocale.h>
 
 #include "kpimprefs.h"
 
-#include "categoryeditdialog_base.h"
 #include "categoryeditdialog.h"
 
 using namespace KPIM;
 
+class CategoryEditDialog::Private
+{
+  public:
+    QListView *mView;
+    QPushButton *mAddButton;
+    QPushButton *mEditButton;
+    QPushButton *mDeleteButton;
+};
+
 CategoryEditDialog::CategoryEditDialog( KPimPrefs *prefs, QWidget* parent,
                                         const char* name, bool modal )
   : KDialogBase::KDialogBase( parent, name, modal,
     i18n("Edit Categories"), Ok|Apply|Cancel|Help, Ok, true ),
-    mPrefs( prefs )  
+    mPrefs( prefs ), d( new Private )
 {
-  mWidget = new CategoryEditDialog_base( this, "CategoryEdit" );
-  mWidget->mCategories->header()->hide();
-  setMainWidget( mWidget );
+  QWidget *widget = new QWidget( this );
+  setMainWidget( widget );
 
+  QGridLayout *layout = new QGridLayout( widget, 4, 2, marginHint(), spacingHint() );
+
+  d->mView = new QListView( widget );
+  d->mView->addColumn( "" );
+  d->mView->header()->hide();
+
+  layout->addMultiCellWidget( d->mView, 0, 3, 0, 0 );
+
+  d->mAddButton = new QPushButton( i18n( "Add" ), widget );
+  layout->addWidget( d->mAddButton, 0, 1 );
+
+  d->mEditButton = new QPushButton( i18n( "Edit" ), widget );
+  layout->addWidget( d->mEditButton, 1, 1 );
+
+  d->mDeleteButton = new QPushButton( i18n( "Remove" ), widget );
+  layout->addWidget( d->mDeleteButton, 2, 1 );
+
+
   fillList();
-  
-  connect( mWidget->mCategories, SIGNAL( selectionChanged( QListViewItem * )),
-           SLOT( editItem( QListViewItem * )) );
-  connect( mWidget->mEdit, SIGNAL( textChanged( const QString & )),
-           this, SLOT( slotTextChanged( const QString & )));
-  connect( mWidget->mButtonAdd, SIGNAL( clicked() ),
-           this, SLOT( add() ) );
-  connect( mWidget->mButtonRemove, SIGNAL( clicked() ),
-           this, SLOT( remove() ) );
+
+  connect( d->mAddButton, SIGNAL( clicked() ), this, SLOT( add() ) );
+  connect( d->mEditButton, SIGNAL( clicked() ), this, SLOT( edit() ) );
+  connect( d->mDeleteButton, SIGNAL( clicked() ), this, SLOT( remove() ) );
 }
 
 /*
@@ -61,50 +82,61 @@
  */
 CategoryEditDialog::~CategoryEditDialog()
 {
-    // no need to delete child widgets, Qt does it all for us
+  delete d;
 }
 
 void CategoryEditDialog::fillList()
 {
-  mWidget->mCategories->clear();
+  d->mView->clear();
   QStringList::Iterator it;
   bool categoriesExist=false;
   for ( it = mPrefs->mCustomCategories.begin();
         it != mPrefs->mCustomCategories.end(); ++it ) {
-    new QListViewItem( mWidget->mCategories, *it );
+
+    QListViewItem *item = new QListViewItem( d->mView, *it );
+    item->setRenameEnabled( 0, true );
+
     categoriesExist = true;
   }
-  mWidget->mButtonRemove->setEnabled( categoriesExist );
-  mWidget->mCategories->setSelected( mWidget->mCategories->firstChild(), true );
-  mWidget->mEdit->setText( mWidget->mCategories->currentItem()->text( 0 ) );
+
+  d->mEditButton->setEnabled( categoriesExist );
+  d->mDeleteButton->setEnabled( categoriesExist );
+  d->mView->setSelected( d->mView->firstChild(), true );
 }
 
-void CategoryEditDialog::slotTextChanged(const QString &text)
+void CategoryEditDialog::add()
 {
-  QListViewItem *item = mWidget->mCategories->currentItem();
-  if ( item ) {
-    item->setText( 0, text );
-  }
+  if ( d->mView->firstChild() )
+    d->mView->setCurrentItem( d->mView->firstChild() );
+
+  QListViewItem *item = new QListViewItem( d->mView, i18n( "New category" ) );
+  item->setRenameEnabled( 0, true );
+
+  d->mView->setSelected( item, true );
+  d->mView->ensureItemVisible( item );
+  item->startRename( 0 );
+
+  bool itemCount = d->mView->childCount() > 0;
+  d->mEditButton->setEnabled( itemCount );
+  d->mDeleteButton->setEnabled( itemCount );
 }
 
-void CategoryEditDialog::add()
+void CategoryEditDialog::edit()
 {
-  if ( !mWidget->mEdit->text().isEmpty() ) {
-    QListViewItem *newItem = new QListViewItem( mWidget->mCategories, "" );
-    // FIXME: Use a better string once string changes are allowed again
-//                                                i18n("New category") );
-    mWidget->mCategories->setSelected( newItem, true );
-    mWidget->mCategories->ensureItemVisible( newItem );
-    mWidget->mButtonRemove->setEnabled( mWidget->mCategories->childCount()>0 );
-  }
+  if ( d->mView->currentItem() )
+    d->mView->currentItem()->startRename( 0 );
 }
 
 void CategoryEditDialog::remove()
 {
-  if (mWidget->mCategories->currentItem()) {
-    delete mWidget->mCategories->currentItem();
-    mWidget->mCategories->setSelected( mWidget->mCategories->currentItem(), true );
-    mWidget->mButtonRemove->setEnabled( mWidget->mCategories->childCount()>0 );
+  if ( d->mView->currentItem() ) {
+    delete d->mView->currentItem();
+
+    d->mView->setSelected( d->mView->currentItem(), true );
+
+    bool itemCount = d->mView->childCount() > 0;
+    d->mEditButton->setEnabled( itemCount );
+    d->mDeleteButton->setEnabled( itemCount );
   }
 }
 
@@ -118,9 +150,10 @@
 {
   mPrefs->mCustomCategories.clear();
 
-  QListViewItem *item = mWidget->mCategories->firstChild();
+  QListViewItem *item = d->mView->firstChild();
   while ( item ) {
-    mPrefs->mCustomCategories.append( item->text(0) );
+    if ( !item->text( 0 ).isEmpty() )
+      mPrefs->mCustomCategories.append( item->text( 0 ) );
     item = item->nextSibling();
   }
   mPrefs->writeConfig();
@@ -134,14 +167,8 @@
   KDialogBase::slotCancel();
 }
 
-void CategoryEditDialog::editItem( QListViewItem *item )
+void CategoryEditDialog::reload()
 {
-  mWidget->mEdit->setText( item->text(0) );
-  mWidget->mButtonRemove->setEnabled( true );
-}
-
-void CategoryEditDialog::reload() 
-{
   fillList();
 }
 
Index: libkdepim/ldapclient.cpp
===================================================================
--- libkdepim/ldapclient.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkdepim/ldapclient.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -427,8 +427,8 @@
    * This allows both resource accounts with an email address which are not a person and
    * person entries without an email address to show up, while still not showing things
    * like structural entries in the ldap tree. */
-  QString filter = QString( "&(|(objectclass=person)(objectclass=groupOfNames)(mail=*))(|(cn=%1*)(mail=%2*)(givenName=%3*)(sn=%4*))" )
-      .arg( mSearchText ).arg( mSearchText ).arg( mSearchText ).arg( mSearchText );
+  QString filter = QString( "&(|(objectclass=person)(objectclass=groupOfNames)(mail=*))(|(cn=%1*)(mail=%2*)(mail=*@%3*)(givenName=%4*)(sn=%5*))" )
+      .arg( mSearchText ).arg( mSearchText ).arg( mSearchText ).arg( mSearchText ).arg( mSearchText );
 
   QValueList< LdapClient* >::Iterator it;
   for ( it = mClients.begin(); it != mClients.end(); ++it ) {
Index: libkdepim/addresseeview.cpp
===================================================================
--- libkdepim/addresseeview.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkdepim/addresseeview.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -268,11 +268,11 @@
     if ( !addr.url().url().isEmpty() ) {
       QString url;
       if ( linkMask & URLLinks ) {
-        url = (addr.url().url().startsWith( "http://" ) || addr.url().url().startsWith( "https://" ) ? addr.url().url() :
-          "http://" + addr.url().url());
+        url = (addr.url().url().startsWith( "http://" ) || addr.url().url().startsWith( "https://" ) ? addr.url().prettyURL() :
+          "http://" + addr.url().prettyURL());
         url = KStringHandler::tagURLs( url );
       } else {
-        url = addr.url().url();
+        url = addr.url().prettyURL();
       }
       dynamicPart += rowFmtStr.arg( i18n("Homepage") ).arg( url );
     }
@@ -364,7 +364,6 @@
       titleMap.insert( "ManagersName", i18n( "Manager's Name" ) );
       titleMap.insert( "SpousesName", i18n( "Partner's Name" ) );
       titleMap.insert( "Office", i18n( "Office" ) );
-      titleMap.insert( "IMAddress", i18n( "IM Address" ) );
       titleMap.insert( "Anniversary", i18n( "Anniversary" ) );
     }
 
@@ -382,8 +381,8 @@
           QString key = customEntry.left( pos );
           const QString value = customEntry.mid( pos + 1 );
 
-          // blog is handled separated
-          if ( key == "BlogFeed" )
+          // blog and im address is handled separated
+          if ( key == "BlogFeed" || key == "IMAddress" )
             continue;
 
           const QMap<QString, QString>::ConstIterator keyIt = titleMap.find( key );
@@ -400,30 +399,38 @@
   QString role( addr.role() );
   QString organization( addr.organization() );
 
-  if ( proxy && (fieldMask & IMFields) ) {
-    if ( proxy->isPresent( addr.uid() ) && proxy->presenceNumeric( addr.uid() ) > 0 ) {
-      // set image source to either a QMimeSourceFactory key or a data:/ URL
-      QString imgSrc;
-      if ( internalLoading ) {
-        imgSrc = QString::fromLatin1( "im_status_%1_image").arg( addr.uid() );
-        QMimeSourceFactory::defaultFactory()->setPixmap( imgSrc, proxy->presenceIcon( addr.uid() ) );
-      } else
-        imgSrc = pixmapAsDataUrl( proxy->presenceIcon( addr.uid() ) );
+  if ( fieldMask & IMFields ) {
 
-      // make the status a link, if required
-      QString imStatus;
-      if ( linkMask & IMLinks )
-        imStatus = QString::fromLatin1( "<a href=\"im:\"><img src=\"%1\"> (%2)</a>" );
-      else
-        imStatus = QString::fromLatin1( "<img src=\"%1\"> (%2)" );
+    const QString imAddress = addr.custom( "KADDRESSBOOK", "X-IMAddress" );
+    if ( !imAddress.isEmpty() ) {
+      customData += rowFmtStr.arg( i18n( "IM Address" ) ).arg( imAddress ) ;
+    }
 
-      // append our status to the rest of the dynamic part of the addressee
-      dynamicPart += rowFmtStr
-              .arg( i18n( "Presence" ) )
-              .arg( imStatus
-                        .arg( imgSrc )
-                        .arg( proxy->presenceString( addr.uid() ) )
-                  );
+    if ( proxy ) {
+      if ( proxy->isPresent( addr.uid() ) && proxy->presenceNumeric( addr.uid() ) > 0 ) {
+        // set image source to either a QMimeSourceFactory key or a data:/ URL
+        QString imgSrc;
+        if ( internalLoading ) {
+          imgSrc = QString::fromLatin1( "im_status_%1_image").arg( addr.uid() );
+          QMimeSourceFactory::defaultFactory()->setPixmap( imgSrc, proxy->presenceIcon( addr.uid() ) );
+        } else
+          imgSrc = pixmapAsDataUrl( proxy->presenceIcon( addr.uid() ) );
+
+        // make the status a link, if required
+        QString imStatus;
+        if ( linkMask & IMLinks )
+          imStatus = QString::fromLatin1( "<a href=\"im:\"><img src=\"%1\"> (%2)</a>" );
+        else
+          imStatus = QString::fromLatin1( "<img src=\"%1\"> (%2)" );
+
+        // append our status to the rest of the dynamic part of the addressee
+        dynamicPart += rowFmtStr
+                .arg( i18n( "Presence" ) )
+                .arg( imStatus
+                          .arg( imgSrc )
+                          .arg( proxy->presenceString( addr.uid() ) )
+                    );
+      }
     }
   }
 
Index: libkdepim/weaver.cpp
===================================================================
--- libkdepim/weaver.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkdepim/weaver.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -151,7 +151,7 @@
     {
     }
 
-    const int Event::type ()
+    int Event::type ()
     {
         return Type;
     }
@@ -197,7 +197,7 @@
         return ++sm_Id;
     }
 
-    const unsigned int Thread::id() const
+    unsigned int Thread::id() const
     {
         return m_id;
     }
Index: libkdepim/kaddrbook.cpp
===================================================================
--- libkdepim/kaddrbook.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkdepim/kaddrbook.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -113,6 +113,37 @@
     a.setNameFromString( name );
     a.insertEmail( email, true );
 
+    {
+      KConfig config( "kaddressbookrc" );
+      config.setGroup( "General" );
+      int type = config.readNumEntry( "FormattedNameType", 1 );
+
+      QString name;
+      switch ( type ) {
+        case 1:
+          name = a.givenName() + " " + a.familyName();
+          break;
+        case 2:
+          name = a.assembledName();
+          break;
+        case 3:
+          name = a.familyName() + ", " + a.givenName();
+          break;
+        case 4:
+          name = a.familyName() + " " + a.givenName();
+          break;
+        case 5:
+          name = a.organization();
+          break;
+        default:
+          name = "";
+          break;
+      }
+      name.simplifyWhiteSpace();
+
+      a.setFormattedName( name );
+    }
+
     if ( !KAddrBookExternal::addAddressee( a ) ) {
       KMessageBox::error( parent, i18n("Cannot save to addressbook.") );
     } else {
Index: libkdepim/maillistdrag.cpp
===================================================================
--- libkdepim/maillistdrag.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkdepim/maillistdrag.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -37,7 +37,7 @@
       mSubject( subject ), mFrom( from ), mTo( to ), mDate( date )
 {}
 
-Q_UINT32 MailSummary::serialNumber() 
+Q_UINT32 MailSummary::serialNumber() const 
 { 
     return mSerialNumber; 
 }
Index: libkdepim/komposer/plugins/default/defaulteditor.desktop
===================================================================
--- libkdepim/komposer/plugins/default/defaulteditor.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkdepim/komposer/plugins/default/defaulteditor.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -37,10 +37,12 @@
 Name[is]=Komposer ritill
 Name[it]=Editor Komposer
 Name[ja]=Komposer エディタ
+Name[kk]=Komposer өңдегіші
 Name[km]=កម្មវិធី​និពន្ធ Komposer
 Name[lt]=Komposer redaktorius
 Name[ms]=Editor Komposer
 Name[nb]=Komposer-redigering
+Name[ne]=कम्पोजर सम्पादक
 Name[nl]=Komposer-editor
 Name[nn]=Komposer-redigering
 Name[pl]=Edytor Komposer
@@ -78,11 +80,13 @@
 Comment[is]=Sjálfgefinn ritill Komposer
 Comment[it]=Editor di default per Komposer
 Comment[ja]=Komposer 標準エディタ
+Comment[kk]=Komposer әдетті өңдегіші
 Comment[km]=កម្មវិធី​និពន្ធ​លំនាំដើម​របស់ Komposer
 Comment[lt]=Komposer numatytasis redaktorius
 Comment[ms]=Pengedit piawai Komposer
 Comment[nb]=Komposer standard-redigerer
 Comment[nds]=Komposer-Standardeditor
+Comment[ne]=कम्पोजरको पूर्वनिर्धारित सम्पादक
 Comment[nl]=Komposer standaardeditor
 Comment[nn]=Komposer standard-redigeringsprogram
 Comment[pl]=Domyślny edytor Komposera
Index: libkdepim/komposer/core/komposerplugin.desktop
===================================================================
--- libkdepim/komposer/core/komposerplugin.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkdepim/komposer/core/komposerplugin.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -27,11 +27,13 @@
 Name[is]=Komposer íforrit
 Name[it]=Plugin Komposer
 Name[ja]=Komposer プラグイン
+Name[kk]=Komposer плагин модулі
 Name[km]=កម្មវិធី​ជំនួយ Komposer
 Name[lt]=Komposer priedas
 Name[ms]=Plugin Komposer
 Name[nb]=Komposer-programtillegg
 Name[nds]=Komposer-Moduul
+Name[ne]=कम्पोजर प्लगइन
 Name[nn]=Komposer-programtillegg
 Name[pl]=Wtyczka Komposer
 Name[pt]='Plugin' do Kompositor
Index: libkdepim/komposer/core/komposerconfig.desktop
===================================================================
--- libkdepim/komposer/core/komposerconfig.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkdepim/komposer/core/komposerconfig.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -15,6 +15,7 @@
 Name[da]=Brevskriver
 Name[hi]=कम्पोज़र
 Name[ms]=Penggubah
+Name[ne]=कम्पोजर
 Name[pt]=Kompositor
 Name[ta]=கம்போசர்
 Comment=KDE Komposer
@@ -29,6 +30,7 @@
 Comment[hi]=केडीई कम्पोज़र
 Comment[ms]=Penggubah KDE
 Comment[nds]=Nettbreef-Editor vun KDE
+Comment[ne]=केडीई कम्पोजर
 Comment[nn]=KDE, tekstredigerar for e-post
 Comment[pl]=Komposer dla KDE
 Comment[pt]=Kompositor do KDE
@@ -44,6 +46,7 @@
 Keywords[de]=Komposer
 Keywords[hi]=कम्पोज़र
 Keywords[nds]=Komposer
+Keywords[ne]=कम्पोजर
 Keywords[nl]=komposer,opstellen
 Keywords[nn]=komposer,tekstredigerar,epost
 Keywords[ru]=komposer,ноты
Index: libkdepim/komposer/core/komposereditor.desktop
===================================================================
--- libkdepim/komposer/core/komposereditor.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkdepim/komposer/core/komposereditor.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -25,11 +25,13 @@
 Comment[is]=Komposer ritill
 Comment[it]=Komposer editor
 Comment[ja]=Komposer,エディタ
+Comment[kk]=Komposer өңдегіші
 Comment[km]=កម្មវិធី​និពន្ធ Komposer
 Comment[lt]=Komposer redaktorius
 Comment[ms]=Editor Komposer
 Comment[nb]=Komposer redigerer
 Comment[nds]=Komposer-Editor
+Comment[ne]=कम्पोजर सम्पादक
 Comment[nl]=Komposer-editor
 Comment[nn]=Komposer redigerar
 Comment[pl]=Edytor Komposer
Index: libkdepim/addresseelineedit.cpp
===================================================================
--- libkdepim/addresseelineedit.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkdepim/addresseelineedit.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -99,6 +99,7 @@
   m_completionInitialized = false;
   m_smartPaste = false;
   m_addressBookConnected = false;
+  m_searchExtended = false;
 
   init();
 
@@ -123,11 +124,11 @@
 
   if ( m_useCompletion ) {
     if ( !s_LDAPTimer ) {
-      ldapTimerDeleter.setObject( s_LDAPTimer, new QTimer );
+      ldapTimerDeleter.setObject( s_LDAPTimer, new QTimer( 0, "ldapTimerDeleter" ) );
       ldapSearchDeleter.setObject( s_LDAPSearch, new KPIM::LdapSearch );
       ldapTextDeleter.setObject( s_LDAPText, new QString );
 
-      /* Add completion sources for all ldap server, 0 to n. Added first so 
+      /* Add completion sources for all ldap server, 0 to n. Added first so
        * that they map to the ldapclient::clientNumber() */
       QValueList< LdapClient* > clients =  s_LDAPSearch->clients();
       for ( QValueList<LdapClient*>::iterator it = clients.begin(); it != clients.end(); ++it ) {
@@ -251,15 +252,14 @@
 
   QString contents = text();
   int start_sel = 0;
-  int end_sel = 0;
   int pos = cursorPosition( );
-  if ( getSelection( &start_sel, &end_sel ) ) {
+
+  if ( hasSelectedText() ) {
     // Cut away the selection.
-    if ( pos > end_sel )
-      pos -= (end_sel - start_sel);
-    else if ( pos > start_sel )
-      pos = start_sel;
-    contents = contents.left( start_sel ) + contents.right( end_sel + 1 );
+    start_sel = selectionStart();
+    pos = start_sel;
+    contents = contents.left( start_sel ) +
+               contents.mid( start_sel + selectedText().length() );
   }
 
   int eot = contents.length();
@@ -422,7 +422,7 @@
       setCompletionMode( completionMode() );
 
       if ( !m_searchString.isEmpty() ) {
-        
+
         //if only our \" is left, remove it since user has not typed it either
         if ( m_searchExtended && m_searchString == "\"" ){
           m_searchExtended = false;
@@ -437,7 +437,7 @@
           if ( match != m_searchString ) {
             QString adds = m_previousAddresses + match;
             setCompletedText( adds );
-          } 
+          }
         } else {
           if ( !m_searchString.startsWith( "\"" ) ) {
             //try with quoted text, if user has not type one already
@@ -525,8 +525,9 @@
       int weight = config.readNumEntry( resource->identifier(), 60 );
       s_completionSources->append( resource->resourceName() );
       KABC::Resource::Iterator it;
-      for ( it = resource->begin(); it != resource->end(); ++it )
-        addContact( *it, weight, s_completionSources->size()-1 );
+      if ( resource->type() != "ldapkio" )
+        for ( it = resource->begin(); it != resource->end(); ++it )
+          addContact( *it, weight, s_completionSources->size()-1 );
     }
   }
 
@@ -562,7 +563,7 @@
 #ifdef KDEPIM_NEW_DISTRLISTS
   if ( KPIM::DistributionList::isDistributionList( addr ) ) {
     //kdDebug(5300) << "AddresseeLineEdit::addContact() distribution list \"" << addr.formattedName() << "\" weight=" << weight << endl;
- 
+
     //for CompletionAuto
     addCompletionItem( addr.formattedName(), weight, source );
 
@@ -576,38 +577,40 @@
   //m_contactMap.insert( addr.realName(), addr );
   const QStringList emails = addr.emails();
   QStringList::ConstIterator it;
+  const int prefEmailWeight = 1;     //increment weight by prefEmailWeight
+  int isPrefEmail = prefEmailWeight; //first in list is preferredEmail
   for ( it = emails.begin(); it != emails.end(); ++it ) {
-    //TODO: highlight preferredEmail 
+    //TODO: highlight preferredEmail
     const QString email( (*it) );
     const QString givenName = addr.givenName();
     const QString familyName= addr.familyName();
     const QString nickName  = addr.nickName();
-    const QString fullEmail = addr.fullEmail( email );
     const QString domain    = email.mid( email.find( '@' ) + 1 );
+    QString fullEmail = addr.fullEmail( email );
     //TODO: let user decide what fields to use in lookup, e.g. company, city, ...
 
     //for CompletionAuto
     if ( givenName.isEmpty() && familyName.isEmpty() ) {
-      addCompletionItem( fullEmail, weight, source ); // use whatever is there
+      addCompletionItem( fullEmail, weight + isPrefEmail, source ); // use whatever is there
     } else {
       const QString byFirstName=  "\"" + givenName + " " + familyName + "\" <" + email + ">";
       const QString byLastName =  "\"" + familyName + ", " + givenName + "\" <" + email + ">";
-      addCompletionItem( byFirstName, weight, source );
-      addCompletionItem( byLastName, weight, source );
+      addCompletionItem( byFirstName, weight + isPrefEmail, source );
+      addCompletionItem( byLastName, weight + isPrefEmail, source );
     }
 
-    addCompletionItem( email, weight, source );
+    addCompletionItem( email, weight + isPrefEmail, source );
 
     if ( !nickName.isEmpty() ){
       const QString byNick     =  "\"" + nickName + "\" <" + email + ">";
-      addCompletionItem( byNick, weight, source );
+      addCompletionItem( byNick, weight + isPrefEmail, source );
     }
 
     if ( !domain.isEmpty() ){
       const QString byDomain   =  "\"" + domain + " " + familyName + " " + givenName + "\" <" + email + ">";
-      addCompletionItem( byDomain, weight, source );
+      addCompletionItem( byDomain, weight + isPrefEmail, source );
     }
-    
+
     //for CompletionShell, CompletionPopup
     QStringList keyWords;
     const QString realName  = addr.realName();
@@ -632,8 +635,18 @@
 
     keyWords.append( email );
 
-    addCompletionItem( fullEmail, weight, source, &keyWords );
+    /* KMailCompletion does not have knowledge about identities, it stores emails and
+     * keywords for each email. KMailCompletion::allMatches does a lookup on the
+     * keywords and returns an ordered list of emails. In order to get the preferred
+     * email before others for each identity we use this little trick.
+     * We remove the <blank> in getAdjustedCompletionItems.
+     */
+    if ( isPrefEmail == prefEmailWeight )
+      fullEmail.replace( " <", "  <" );
 
+    addCompletionItem( fullEmail, weight + isPrefEmail, source, &keyWords );
+    isPrefEmail = 0;
+
 #if 0
     int len = (*it).length();
     if ( len == 0 ) continue;
@@ -733,7 +746,7 @@
   if ( s.isEmpty() )
     return;
 
-  loadContacts(); // TODO reuse these?
+  //loadContacts(); // TODO reuse these?
   s_LDAPSearch->startSearch( s );
 }
 
@@ -746,12 +759,12 @@
     KABC::Addressee addr;
     addr.setNameFromString( (*it).name );
     addr.setEmails( (*it).email );
-    
+
     addContact( addr, (*it).completionWeight, (*it ).clientNumber  );
   }
 
   if ( (hasFocus() || completionBox()->hasFocus() )
-       && completionMode() != KGlobalSettings::CompletionNone 
+       && completionMode() != KGlobalSettings::CompletionNone
        && completionMode() != KGlobalSettings::CompletionShell) {
     setText( m_previousAddresses + m_searchString );
     doCompletion( m_lastSearchMode );
@@ -771,7 +784,7 @@
           if ( !m_searchString.isEmpty() )
             completionBox->setCancelledText( m_searchString );
           completionBox->popup();
-          // we have to install the event filter after popup(), since that 
+          // we have to install the event filter after popup(), since that
           // calls show(), and that's where KCompletionBox installs its filter.
           // We want to be first, though, so do it now.
           if ( s_completion->order() == KCompletion::Weighted )
@@ -906,8 +919,8 @@
       }
       // avoid selection of headers on button press, or move or release while
       // a button is pressed
-      if ( e->type() == QEvent::MouseButtonPress 
-          || me->state() & LeftButton || me->state() & MidButton 
+      if ( e->type() == QEvent::MouseButtonPress
+          || me->state() & LeftButton || me->state() & MidButton
           || me->state() & RightButton ) {
         if ( !item->text().startsWith( s_completionItemIndentString ) ) {
           return true; // eat the event, we don't want anything to happen
@@ -992,7 +1005,7 @@
   QStringList items = fullSearch ?
     s_completion->allMatches( m_searchString )
     : s_completion->substringCompletion( m_searchString );
- 
+
   int lastSourceIndex = -1;
   unsigned int i = 0;
   QMap<int, QStringList> sections;
@@ -1010,6 +1023,8 @@
         lastSourceIndex = idx;
       }
       (*it) = (*it).prepend( s_completionItemIndentString );
+      // remove preferred email sort <blank> added in  addContact()
+      (*it).replace( "  <", " <" );
     }
     sections[idx].append( *it );
 
Index: libkdepim/weaver.h
===================================================================
--- libkdepim/weaver.h	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkdepim/weaver.h	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -115,7 +115,7 @@
         };
         Event ( Action = NoAction, Thread * = 0, Job *job = 0);
         /** Return the (custom defined) event type. */
-        static const int type ();
+        static int type ();
         /** The ID of the sender thread. */
         Thread* thread () const;
         /** The associated job. */
@@ -276,7 +276,7 @@
             This id marks the respective Thread object, and must
             therefore not be confused with, e.g., the pthread thread
             ID. */
-        const unsigned int id() const;
+        unsigned int id() const;
 
         /** Post an event, will be received and processed by the Weaver. */
         void post (Event::Action, Job* = 0);
Index: libkcal/resourcelocaldir.cpp
===================================================================
--- libkcal/resourcelocaldir.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/resourcelocaldir.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -89,6 +89,8 @@
 {
   setType( "dir" );
 
+  setSavePolicy( SaveDelayed );
+
   connect( &mDirWatch, SIGNAL( dirty( const QString & ) ),
            SLOT( reload( const QString & ) ) );
   connect( &mDirWatch, SIGNAL( created( const QString & ) ),
Index: libkcal/resourcelocal.cpp
===================================================================
--- libkcal/resourcelocal.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/resourcelocal.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -109,6 +109,8 @@
 
   setType( "file" );
 
+  setSavePolicy( SaveDelayed );
+
   connect( &mDirWatch, SIGNAL( dirty( const QString & ) ),
            SLOT( reload() ) );
   connect( &mDirWatch, SIGNAL( created( const QString & ) ),
Index: libkcal/localdir.desktop
===================================================================
--- libkcal/localdir.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/localdir.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -25,11 +25,14 @@
 Name[is]=Dagatal í staðbundinni möppu
 Name[it]=Calendario nella directory locale
 Name[ja]=ローカルディレクトリのカレンダー
+Name[kk]=Жергілікті каталогтағы күнтізбе
 Name[km]=ប្រតិទិន​នៅ​ក្នុង​ថត​មូលដ្ឋាន
 Name[lt]=Kalendorius vietiniame aplanke
+Name[mk]=Календар во локална папка
 Name[ms]=Kalendar dalam Direktori Setempat
 Name[nb]=Kalender i lokal katalog
 Name[nds]=Kalenner in lokaal Orner
+Name[ne]=स्थानीय डाइरेक्टरीको क्यालेन्डर
 Name[nl]=Agenda in lokale map
 Name[nn]=Kalender i lokal mappe
 Name[pl]=Kalendarz w katalogu lokalnym
Index: libkcal/local.desktop
===================================================================
--- libkcal/local.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/local.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -25,11 +25,14 @@
 Name[is]=Dagatal í staðbundinni skrá
 Name[it]=Calendario in file locale
 Name[ja]=ローカルファイルのカレンダー
+Name[kk]=Жергілікті файлдағы күнтізбе
 Name[km]=ប្រតិទិន​នៅ​ក្នុង​ឯកសារ​មូលដ្ឋាន
 Name[lt]=Kalendorius vietinėje byloje
+Name[mk]=Календар во локална датотека
 Name[ms]=Kalendar dalam Fail Setempat
 Name[nb]=Kalender i lokal fil
 Name[nds]=Kalenner as lokaal Datei
+Name[ne]=स्थानीय फाइलको क्यालेन्डर
 Name[nl]=Agenda in lokaal bestand
 Name[nn]=Kalender i lokal fil
 Name[pl]=Kalendarz w pliku lokalnym
Index: libkcal/kcal_manager.desktop
===================================================================
--- libkcal/kcal_manager.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/kcal_manager.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -3,6 +3,7 @@
 Encoding=UTF-8
 Name=Calendar
 Name[af]=Kalender
+Name[ar]=التقويم
 Name[be]=Каляндар
 Name[br]=Deiziadur
 Name[bs]=Kalendar
@@ -26,11 +27,14 @@
 Name[is]=Dagatal
 Name[it]=Calendario
 Name[ja]=カレンダー
+Name[kk]=Күнтізбе
 Name[km]=ប្រតិទិន
 Name[lt]=Kalendorius
+Name[mk]=Календар
 Name[ms]=Kalendar
 Name[nb]=Kalender
 Name[nds]=Kalenner
+Name[ne]=क्यालेन्डर
 Name[nl]=Agenda
 Name[nn]=Kalender
 Name[pa]=ਕੈਲੰਡਰ
Index: libkcal/libical/TEST
===================================================================
--- libkcal/libical/TEST	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/TEST	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,4 +1,4 @@
 
 Parser Tests
 ------------
-Use iCAL keywords as first words of unquoted strings
\ brakuje znaku końca linii na końcu pliku 
+Use iCAL keywords as first words of unquoted strings
Index: libkcal/libical/design-data/parameters.csv
===================================================================
Nie można wyświetlić: plik binarny.
svn:mime-type = application/x-siag
Index: libkcal/libical/README.zoneinfo
===================================================================
--- libkcal/libical/README.zoneinfo	(.../tags/KDE/3.5.6/kdepim)	(wersja 0)
+++ libkcal/libical/README.zoneinfo	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -0,0 +1,48 @@
+To generate our zoneinfo .ics files:
+
+ 1. Download and untar the most recent tzdataXXX.tar.gz package
+    from ftp://elsie.nci.nih.gov/pub/ to the tzdata subdir
+
+    % cd tzdata
+    % wget ftp://elsie.nci.nih.gov/pub/tzdata2007d.tar.gz
+    % cat tzdata2007d.tar.gz | gunzip -c | tar xvf -
+    % rm tzdata2007d.tar.gz
+    % cd ..
+
+ 2. Make sure we have the most recent version of the vzic program
+    which can be found at
+    http://dialspace.dial.pipex.com/prod/dialspace/town/pipexdsl/s/asbm26/vzic
+
+    % wget http://dialspace.dial.pipex.com/prod/dialspace/town/pipexdsl/s/asbm26/vzic/vzic-1.3.tgz
+    % cat vzic-1.3.tgz | gunzip -c | tar xvf -
+    % rm vzic-1.3.tgz
+
+ 3. Configure and build vzic
+
+    % cd vzic-1.3
+    % vi Makefile
+
+      make the following changes:
+      OLSON_DIR = ../tzdata
+      PRODUCT_ID = -//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
+      TZID_PREFIX = /kde.org/Olson_%D_1/
+
+   % make
+   % cd ..
+
+ 4. Prepare for to generate the zoneinfo files
+
+    % svn mv zoneinfo zoneinfo.bak
+
+ 5. Do it!
+
+    % cd vzic-1.3
+    % ./vzic --pure --output-dir ../zoneinfo
+
+ 6. Cleanup
+
+    % make clean
+
+ 7. Commit new tzdata and vzic, if necessary
+
+ 8. Commit new zoneinfo and remove zoneinfo.bak
Index: libkcal/libical/scripts/mkrestrictiontable.pl
===================================================================
--- libkcal/libical/scripts/mkrestrictiontable.pl	(.../tags/KDE/3.5.6/kdepim)	(wersja 648291)
+++ libkcal/libical/scripts/mkrestrictiontable.pl	(.../branches/KDE/3.5/kdepim)	(wersja 648291)
@@ -58,7 +58,7 @@
 
 
 # Print the terminating line 
-print "    {ICAL_METHOD_NONE,ICAL_NO_COMPONENT,ICAL_NO_PROPERTY,ICAL_RESTRICTION_NONE}\n";
+print "    {ICAL_METHOD_NONE,ICAL_NO_COMPONENT,ICAL_NO_PROPERTY,ICAL_RESTRICTION_NONE, 0}\n";
 
 print "};\n";
 
@@ -94,5 +94,5 @@
 }
 
 # print the terminating line 
-print "    {ICAL_METHOD_NONE,ICAL_NO_COMPONENT,ICAL_NO_COMPONENT,ICAL_RESTRICTION_NONE}\n";
+print "    {ICAL_METHOD_NONE,ICAL_NO_COMPONENT,ICAL_NO_COMPONENT,ICAL_RESTRICTION_NONE, 0}\n";
 print "};\n";
Index: libkcal/libical/src/libical/icalrestriction.c.in
===================================================================
--- libkcal/libical/src/libical/icalrestriction.c.in	(.../tags/KDE/3.5.6/kdepim)	(wersja 648291)
+++ libkcal/libical/src/libical/icalrestriction.c.in	(.../branches/KDE/3.5/kdepim)	(wersja 648291)
@@ -30,7 +30,7 @@
 
 struct icalrestriction_property_record;
 
-typedef char* (*restriction_func)(struct icalrestriction_property_record* rec,icalcomponent* comp,icalproperty* prop);
+typedef const char* (*restriction_func)(struct icalrestriction_property_record* rec,icalcomponent* comp,icalproperty* prop);
 
 
 typedef struct icalrestriction_property_record {
@@ -100,7 +100,8 @@
 int
 icalrestriction_compare(icalrestriction_kind restr, int count){
 
-    if ( restr < ICAL_RESTRICTION_NONE || restr > ICAL_RESTRICTION_UNKNOWN
+    /* restr is an unsigned int, ICAL_RESTRICTION_NONE == 0, so the check will always return false */
+    if ( /*restr < ICAL_RESTRICTION_NONE ||*/ restr > ICAL_RESTRICTION_UNKNOWN
 	 || count < 0){
 	return -1;
     }
@@ -115,14 +116,16 @@
 
 /* Special case routines */
 
-char* icalrestriction_may_be_draft_final_canceled(
+const char* icalrestriction_may_be_draft_final_canceled(
     icalrestriction_property_record *rec,
-    icalcomponent* comp, 
+    icalcomponent* comp,
     icalproperty* prop)
 {
-
     icalproperty_status stat = icalproperty_get_status(prop);
 
+    (void)rec;
+    (void)comp;
+
     if( !( stat == ICAL_STATUS_DRAFT ||
 	   stat == ICAL_STATUS_FINAL ||
 	   stat == ICAL_STATUS_CANCELLED )){
@@ -134,13 +137,16 @@
     return 0;    
 }
 
-char* icalrestriction_may_be_comp_need_process(
+const char* icalrestriction_may_be_comp_need_process(
     icalrestriction_property_record *rec,
-    icalcomponent* comp, 
+    icalcomponent* comp,
     icalproperty* prop)
 {
     icalproperty_status stat = icalproperty_get_status(prop);
 
+    (void)rec;
+    (void)comp;
+
     if( !( stat == ICAL_STATUS_COMPLETED ||
 	   stat == ICAL_STATUS_NEEDSACTION ||
 	   stat == ICAL_STATUS_INPROCESS )){
@@ -151,11 +157,15 @@
 
     return 0;    
 }
-char* icalrestriction_may_be_tent_conf(icalrestriction_property_record *rec,
-				       icalcomponent* comp, 
-				       icalproperty* prop){
+const char* icalrestriction_may_be_tent_conf(icalrestriction_property_record *rec,
+				       icalcomponent* comp,
+				       icalproperty* prop)
+{
     icalproperty_status stat = icalproperty_get_status(prop);
 
+    (void)rec;
+    (void)comp;
+
     if( !( stat == ICAL_STATUS_TENTATIVE ||
 	   stat == ICAL_STATUS_CONFIRMED )){
 
@@ -165,13 +175,16 @@
 
     return 0;    
 }
-char* icalrestriction_may_be_tent_conf_cancel(
+const char* icalrestriction_may_be_tent_conf_cancel(
     icalrestriction_property_record *rec,
-    icalcomponent* comp, 
+    icalcomponent* comp,
     icalproperty* prop)
 {
     icalproperty_status stat = icalproperty_get_status(prop);
 
+    (void)rec;
+    (void)comp;
+
     if( !( stat == ICAL_STATUS_TENTATIVE ||
 	   stat == ICAL_STATUS_CONFIRMED ||
 	   stat == ICAL_STATUS_CANCELLED )){
@@ -183,14 +196,17 @@
     return 0;    
 }
 
-char* icalrestriction_must_be_cancel_if_present(
+const char* icalrestriction_must_be_cancel_if_present(
     icalrestriction_property_record *rec,
-    icalcomponent* comp, 
+    icalcomponent* comp,
     icalproperty* prop)
 {
     /* This routine will not be called if prop == 0 */
     icalproperty_status stat = icalproperty_get_status(prop);
 
+    (void)rec;
+    (void)comp;
+
     if( stat != ICAL_STATUS_CANCELLED)
     {
 	return "Failed iTIP restrictions for STATUS property. Value must be CANCELLED";
@@ -201,27 +217,36 @@
     return 0;    
 }
 
-char* icalrestriction_must_be_canceled_no_attendee(
+const char* icalrestriction_must_be_canceled_no_attendee(
     icalrestriction_property_record *rec,
-    icalcomponent* comp, 
+    icalcomponent* comp,
     icalproperty* prop)
 {
+    (void)rec;
+    (void)comp;
+    (void)prop;
 
     /* Hack. see rfc2446, 3.2.5 CANCEL for porperty STATUS. I don't
        understand the note */
 
     return 0;    
 }
-char* icalrestriction_must_be_recurring(icalrestriction_property_record *rec,
-					icalcomponent* comp, 
+const char* icalrestriction_must_be_recurring(icalrestriction_property_record *rec,
+					icalcomponent* comp,
 					icalproperty* prop){
     /* Hack */
+    (void)rec;
+    (void)comp;
+    (void)prop;
     return 0;    
 }
-char* icalrestriction_must_have_duration(icalrestriction_property_record *rec,
-					 icalcomponent* comp, 
+const char* icalrestriction_must_have_duration(icalrestriction_property_record *rec,
+					 icalcomponent* comp,
 					 icalproperty* prop){
-    
+
+    (void)rec;
+    (void)prop;
+
     if( !icalcomponent_get_first_property(comp,ICAL_DURATION_PROPERTY)){
 
 	return "Failed iTIP restrictions for DURATION property. This component must have a DURATION property";
@@ -230,9 +255,11 @@
 
     return 0;    
 }
-char* icalrestriction_must_have_repeat(icalrestriction_property_record *rec,
-				       icalcomponent* comp, 
+const char* icalrestriction_must_have_repeat(icalrestriction_property_record *rec,
+				       icalcomponent* comp,
 				       icalproperty* prop){
+    (void)rec;
+    (void)prop;
     if( !icalcomponent_get_first_property(comp,ICAL_REPEAT_PROPERTY)){
 
 	return "Failed iTIP restrictions for REPEAT property. This component must have a REPEAT property";
@@ -241,17 +268,22 @@
 
     return 0;    
 }
-char* icalrestriction_must_if_tz_ref(icalrestriction_property_record *rec,
-				     icalcomponent* comp, 
+const char* icalrestriction_must_if_tz_ref(icalrestriction_property_record *rec,
+				     icalcomponent* comp,
 				     icalproperty* prop){
 
     /* Hack */
+    (void)rec;
+    (void)comp;
+    (void)prop;
     return 0;    
 }
-char* icalrestriction_no_dtend(icalrestriction_property_record *rec,
-			       icalcomponent* comp, 
+const char* icalrestriction_no_dtend(icalrestriction_property_record *rec,
+			       icalcomponent* comp,
 			       icalproperty* prop){
 
+    (void)rec;
+    (void)prop;
     if( !icalcomponent_get_first_property(comp,ICAL_DTEND_PROPERTY)){
 
 	return "Failed iTIP restrictions for DTEND property. The component must not have both DURATION and DTEND";
@@ -260,20 +292,26 @@
 
     return 0;    
 }
-char* icalrestriction_no_duration(icalrestriction_property_record *rec,
-				icalcomponent* comp, 
+const char* icalrestriction_no_duration(icalrestriction_property_record *rec,
+				icalcomponent* comp,
 				  icalproperty* prop){
+    (void)rec;
+    (void)comp;
+    (void)prop;
 
     /* _no_dtend takes care of this one */
     return 0;    
-}                                     
-char* icalrestriction_must_be_email(
+}
+const char* icalrestriction_must_be_email(
     icalrestriction_property_record *rec,
-    icalcomponent* comp, 
+    icalcomponent* comp,
     icalproperty* prop)
 {
     icalproperty_status stat = icalproperty_get_action(prop);
 
+    (void)rec;
+    (void)comp;
+
     if( !( stat == ICAL_ACTION_EMAIL)){
 
 	return "Failed iTIP restrictions for ACTION property. Value must be EMAIL.";
@@ -290,7 +328,7 @@
     icalcomponent_kind comp_kind;
     icalrestriction_kind restr;
     icalrestriction_property_record *prop_record;
-    char* funcr = 0;
+    const char* funcr = 0;
     icalproperty *prop;
 
     int count;
Index: libkcal/libical/src/libical/icalarray.c
===================================================================
--- libkcal/libical/src/libical/icalarray.c	(.../tags/KDE/3.5.6/kdepim)	(wersja 648291)
+++ libkcal/libical/src/libical/icalarray.c	(.../branches/KDE/3.5/kdepim)	(wersja 648291)
@@ -80,7 +78,7 @@
 
 void
 icalarray_append		(icalarray	*array,
-				 void		*element)
+				 const void		*element)
 {
     if (array->num_elements >= array->space_allocated)
 	icalarray_expand (array, 1);
@@ -96,7 +94,7 @@
 				 int		 position)
 {
     assert (position >= 0);
-    assert (position < array->num_elements);
+    assert ((unsigned int)position < array->num_elements);
 
     return (char *)(array->data) + (position * array->element_size);
 }
@@ -110,7 +108,7 @@
     int elements_to_move;
 
     assert (position >= 0);
-    assert (position < array->num_elements);
+    assert ((unsigned int)position < array->num_elements);
 
     dest = (char *)array->data + (position * array->element_size);
     elements_to_move = array->num_elements - position - 1;
@@ -141,7 +139,7 @@
 
     new_space_allocated = array->space_allocated + array->increment_size;
 
-    if (space_needed > array->increment_size) 
+    if ((unsigned int)space_needed > array->increment_size)
 	new_space_allocated += space_needed;
 
 	/*
@@ -151,7 +149,7 @@
 	new_data = malloc(new_space_allocated * array->element_size);
 
     if (new_data) {
-    	memcpy(new_data,array->data,array->element_size*array->space_allocated);
+	memcpy(new_data,array->data,array->element_size*array->space_allocated);
 	free(array->data);
 	array->data = new_data;
 	array->space_allocated = new_space_allocated;
Index: libkcal/libical/src/libical/icalparameter.c
===================================================================
--- libkcal/libical/src/libical/icalparameter.c	(.../tags/KDE/3.5.6/kdepim)	(wersja 648291)
+++ libkcal/libical/src/libical/icalparameter.c	(.../branches/KDE/3.5/kdepim)	(wersja 648291)
@@ -23,7 +22,7 @@
   The original code is icalderivedparameters.{c,h}
 
   Contributions from:
-     Graham Davison (g.m.davison@computer.org)
+     Graham Davison <g.m.davison@computer.org>
 
  ======================================================================*/
 /*#line 29 "icalparameter.c.in"*/
Index: libkcal/libical/src/libical/icalarray.h
===================================================================
--- libkcal/libical/src/libical/icalarray.h	(.../tags/KDE/3.5.6/kdepim)	(wersja 648291)
+++ libkcal/libical/src/libical/icalarray.h	(.../branches/KDE/3.5/kdepim)	(wersja 648291)
@@ -49,7 +47,7 @@
 void	   icalarray_free		(icalarray	*array);
 
 void	   icalarray_append		(icalarray	*array,
-					 void		*element);
+					 const void		*element);
 void	   icalarray_remove_element_at	(icalarray	*array,
 					 int		 position);
 
Index: libkcal/libical/src/libical/icalmime.c
===================================================================
--- libkcal/libical/src/libical/icalmime.c	(.../tags/KDE/3.5.6/kdepim)	(wersja 648291)
+++ libkcal/libical/src/libical/icalmime.c	(.../branches/KDE/3.5/kdepim)	(wersja 648291)
@@ -73,9 +72,11 @@
 }
 void icalmime_text_add_line(void *part, 
 			    struct sspm_header *header, 
-			    char* line, size_t size)
+			    const char* line, size_t size)
 {
     struct text_part* impl = (struct text_part*) part;
+    (void)header;
+    (void)size;
 
     icalmemory_append_string(&(impl->buf),&(impl->buf_pos),
 			     &(impl->buf_size),line);
@@ -118,21 +119,23 @@
     return 0;
 }
 void icalmime_attachment_add_line(void *part, struct sspm_header *header, 
-				  char* line, size_t size)
+				  const char* line, size_t size)
 {
-    part = part;
-    header = header;
-    line = line;
-    size = size;
+    (void)part;
+    (void)header;
+    (void)line;
+    (void)size;
 }
 
 void* icalmime_attachment_end_part(void* part)
 {
+    (void)part;
     return 0;
 }
 
 void icalmime_attachment_free_part(void *part)
 {
+    (void)part;
 }
 
 
@@ -191,8 +194,8 @@
 
 #define TMPSZ 1024
 	char mimetype[TMPSZ];			       
-	char* major = sspm_major_type_string(parts[i].header.major);
-	char* minor = sspm_minor_type_string(parts[i].header.minor);
+	const char* major = sspm_major_type_string(parts[i].header.major);
+	const char* minor = sspm_minor_type_string(parts[i].header.minor);
 
 	if(parts[i].header.minor == SSPM_UNKNOWN_MINOR_TYPE ){
 	    assert(parts[i].header.minor_text !=0);
Index: libkcal/libical/src/libical/icalerror.c
===================================================================
--- libkcal/libical/src/libical/icalerror.c	(.../tags/KDE/3.5.6/kdepim)	(wersja 648291)
+++ libkcal/libical/src/libical/icalerror.c	(.../branches/KDE/3.5/kdepim)	(wersja 648291)
@@ -159,7 +158,7 @@
 
 icalerrorenum icalerror_error_from_string(const char* str){
  
-    icalerrorenum e;
+    icalerrorenum e = ICAL_NO_ERROR;
     int i = 0;
 
     for( i = 0; string_map[i].error != ICAL_NO_ERROR; i++){
Index: libkcal/libical/src/libical/icalparser.c
===================================================================
--- libkcal/libical/src/libical/icalparser.c	(.../tags/KDE/3.5.6/kdepim)	(wersja 648291)
+++ libkcal/libical/src/libical/icalparser.c	(.../branches/KDE/3.5/kdepim)	(wersja 648291)
@@ -30,7 +28,8 @@
 
   The Initial Developer of the Original Code is Eric Busboom
 
- (C) COPYRIGHT 2000, Eric Busboom, http://www.softwarestudio.org
+ (C) COPYRIGHT 2000, Eric Busboom <eric@softwarestudio.org>
+     http://www.softwarestudio.org
  ======================================================================*/
 
 #ifdef HAVE_CONFIG_H
@@ -49,6 +48,7 @@
 #include <string.h> /* For strncpy & size_t */
 #include <stdio.h> /* For FILE and fgets and snprintf */
 #include <stdlib.h> /* for free */
+#include <ctype.h>
 
 #include "icalmemory.h"
 #include "icalparser.h"
@@ -277,7 +277,7 @@
 
 
 /**
-   A property may have multiple values, if the values are seperated by
+   A property may have multiple values, if the values are separated by
    commas in the content line. This routine will look for the next
    comma after line and will set the next place to start searching in
    end. */
@@ -296,7 +296,7 @@
 	next = icalparser_get_next_char(',',p,1);
 
 	/* Unforunately, RFC2445 says that for the RECUR value, COMMA
-	   can both seperate digits in a list, and it can seperate
+	   can both separate digits in a list, and it can separate
 	   multiple recurrence specifications. This is not a friendly
 	   part of the spec. This weirdness tries to
 	   distinguish the two uses. it is probably a HACK*/
@@ -306,7 +306,7 @@
 		 (*end+length) > next+5 &&
 		 strncmp(next,"FREQ",4) == 0
 		) {
-		/* The COMMA was followed by 'FREQ', is it a real seperator*/
+		/* The COMMA was followed by 'FREQ', is it a real separator*/
 		/* Fall through */
 	    } else if (next != 0){
 		/* Not real, get the next COMMA */
@@ -326,7 +326,7 @@
 	}
 
 	/* If the comma is preceded by a '\', then it is a literal and
-	   not a value seperator*/  
+	   not a value separator*/  
       
 	if ( (next!=0 && *(next-1) == '\\') ||
 	     (next!=0 && *(next-3) == '\\')
@@ -513,8 +513,8 @@
 
 }
 
-static void insert_error(icalcomponent* comp, char* text, 
-		  char* message, icalparameter_xlicerrortype type)
+static void insert_error(icalcomponent* comp, const char* text,
+		  const char* message, icalparameter_xlicerrortype type)
 {
     char temp[1024];
     
@@ -795,7 +795,7 @@
     while(1) {
 
 	if (*(end-1) == ':'){
-	    /* if the last seperator was a ":" and the value is a
+	    /* if the last separator was a ":" and the value is a
 	       URL, icalparser_get_next_parameter will find the
 	       ':' in the URL, so better break now. */
 	    break;
Index: libkcal/libical/src/libical/icalvalue.c
===================================================================
--- libkcal/libical/src/libical/icalvalue.c	(.../tags/KDE/3.5.6/kdepim)	(wersja 648291)
+++ libkcal/libical/src/libical/icalvalue.c	(.../branches/KDE/3.5/kdepim)	(wersja 648291)
@@ -23,7 +23,7 @@
   The original code is icalvalue.c
 
   Contributions from:
-     Graham Davison (g.m.davison@computer.org)
+     Graham Davison <g.m.davison@computer.org>
 
 
 ======================================================================*/
@@ -52,7 +52,7 @@
 #define strcasecmp    stricmp
 #endif
 
-#if _MAC_OS_
+#ifdef _MAC_OS_
 #include "icalmemory_strdup.h"
 #endif
 
Index: libkcal/libical/src/libical/pvl.h
===================================================================
--- libkcal/libical/src/libical/pvl.h	(.../tags/KDE/3.5.6/kdepim)	(wersja 648291)
+++ libkcal/libical/src/libical/pvl.h	(.../branches/KDE/3.5/kdepim)	(wersja 648291)
@@ -3,7 +3,8 @@
  CREATOR: eric November, 1995
 
 
- (C) COPYRIGHT 2000, Eric Busboom, http://www.softwarestudio.org
+ (C) COPYRIGHT 2000, Eric Busboom <eric@softwarestudio.org>
+     http://www.softwarestudio.org
 ======================================================================*/
 
 
@@ -31,7 +32,7 @@
 
 /**
  * This global is incremented for each call to pvl_new_element(); it gives each
- * list a unique identifer 
+ * list a unique identifer
  */
 
 extern int  pvl_elem_count;
@@ -85,7 +86,7 @@
  * Pass each element in the list to a function
  * a is list elem, b is other data
  */
-typedef void (*pvl_applyf)(void* a, void* b); 
+typedef void (*pvl_applyf)(void* a, void* b);
 void pvl_apply(pvl_list l,pvl_applyf f, void *v);
 
 
Index: libkcal/libical/src/libical/icalrecur.c
===================================================================
--- libkcal/libical/src/libical/icalrecur.c	(.../tags/KDE/3.5.6/kdepim)	(wersja 648291)
+++ libkcal/libical/src/libical/icalrecur.c	(.../branches/KDE/3.5/kdepim)	(wersja 648291)
@@ -260,6 +259,7 @@
     int i=0;
     int sign = 1;
     int v;
+    (void)parser;
 
     n = vals;
 
@@ -447,7 +447,7 @@
 
 }
 
-static struct { char* str;size_t offset; int limit;  } recurmap[] = 
+static struct { const char* str;size_t offset; int limit;  } recurmap[] = 
 {
     {";BYSECOND=",offsetof(struct icalrecurrencetype,by_second),60},
     {";BYMINUTE=",offsetof(struct icalrecurrencetype,by_minute),60},
@@ -697,7 +697,7 @@
     return passes;
 } 
 
-static int count_byrules(icalrecur_iterator* impl)
+/*static int count_byrules(icalrecur_iterator* impl)
 {
     int count = 0;
     enum byrule itr;
@@ -709,7 +709,7 @@
     }
 
     return count;
-}
+}*/
 
 
 static void setup_defaults(icalrecur_iterator* impl, 
@@ -1329,7 +1329,7 @@
 }
 
 
-static int next_yearday(icalrecur_iterator* impl)
+/*static int next_yearday(icalrecur_iterator* impl)
 {
 
   int has_by_yearday = (impl->by_ptrs[BY_YEAR_DAY][0]!=ICAL_RECURRENCE_ARRAY_MAX);
@@ -1360,7 +1360,7 @@
 
   return end_of_data;
 
-}
+}*/
 
 
 /* Returns the day of the month for the current month of t that is the
Index: libkcal/libical/src/libical/icalproperty.c
===================================================================
--- libkcal/libical/src/libical/icalproperty.c	(.../tags/KDE/3.5.6/kdepim)	(wersja 648291)
+++ libkcal/libical/src/libical/icalproperty.c	(.../branches/KDE/3.5/kdepim)	(wersja 648291)
@@ -341,7 +341,7 @@
 	/* If this isn't the first line, we need to output a newline and space
 	   first. */
 	if (!first_line) {
-	    icalmemory_append_string (&buf, &buf_ptr, &buf_size, "\n ");
+	    icalmemory_append_string (&buf, &buf_ptr, &buf_size, "\r\n ");
 	}
 	first_line = 0;
 
@@ -433,7 +433,7 @@
     char *out_buf;
     const char* kind_string = 0;
 
-    char newline[] = "\n";
+    char newline[] = "\r\n";
 
     
     icalerror_check_arg_rz( (prop!=0),"prop");
@@ -694,7 +694,7 @@
  *  @param prop   A valid icalproperty.
  *  @param name   The name of the parameter to remove
  *
- *  This function removes paramters with the given name.  The name
+ *  This function removes parameters with the given name.  The name
  *  corresponds to either a built-in name (TZID, etc.) or the name of
  *  an extended parameter (X-FOO)
  *
Index: libkcal/libical/src/libical/icalduration.c
===================================================================
--- libkcal/libical/src/libical/icalduration.c	(.../tags/KDE/3.5.6/kdepim)	(wersja 648291)
+++ libkcal/libical/src/libical/icalduration.c	(.../branches/KDE/3.5/kdepim)	(wersja 648291)
@@ -186,7 +185,7 @@
 #define TMP_BUF_SIZE 1024
 static
 void append_duration_segment(char** buf, char** buf_ptr, size_t* buf_size, 
-			     char* sep, unsigned int value) {
+			     const char* sep, unsigned int value) {
 
     char temp[TMP_BUF_SIZE];
 
Index: libkcal/libical/src/libical/icalderivedparameter.c.in
===================================================================
--- libkcal/libical/src/libical/icalderivedparameter.c.in	(.../tags/KDE/3.5.6/kdepim)	(wersja 648291)
+++ libkcal/libical/src/libical/icalderivedparameter.c.in	(.../branches/KDE/3.5/kdepim)	(wersja 648291)
@@ -51,7 +49,7 @@
    representation of the parameter's name */
 struct icalparameter_kind_map {
     icalparameter_kind kind;
-    char *name;
+    const char *name;
     
 };
 
@@ -171,7 +169,7 @@
 
     param = icalparameter_new_impl(kind);
     if (!param)
-        return 0;
+	return 0;
 
     for (i=0; icalparameter_map[i].kind != ICAL_NO_PARAMETER; i++){
         if(kind == icalparameter_map[i].kind) {
Index: libkcal/libical/src/libical/sspm.c
===================================================================
--- libkcal/libical/src/libical/sspm.c	(.../tags/KDE/3.5.6/kdepim)	(wersja 648291)
+++ libkcal/libical/src/libical/sspm.c	(.../branches/KDE/3.5/kdepim)	(wersja 648291)
@@ -30,7 +28,8 @@
 
   The Initial Developer of the Original Code is Eric Busboom
 
- (C) COPYRIGHT 2000, Eric Busboom, http://www.softwarestudio.org
+ (C) COPYRIGHT 2000, Eric Busboom <eric@softwarestudio.org>
+     http://www.softwarestudio.org
  ======================================================================*/
 
 #include <stdio.h>
@@ -80,7 +79,7 @@
 void* sspm_make_multipart_part(struct mime_impl *impl,struct sspm_header *header);
 void sspm_read_header(struct mime_impl *impl,struct sspm_header *header);
 
-char* sspm_strdup(char* str){
+char* sspm_strdup(const char* str){
 
     char* s;
 
@@ -92,10 +91,10 @@
 
 static struct  major_content_type_map 
 {
-	enum sspm_major_type type;
-	char* str;
-	
-} major_content_type_map[]  = 
+    enum sspm_major_type type;
+    const char* str;
+
+} major_content_type_map[]  =
 {
     {SSPM_MULTIPART_MAJOR_TYPE,"multipart" },
     {SSPM_TEXT_MAJOR_TYPE,"text" },
@@ -111,8 +110,8 @@
 
 static struct  minor_content_type_map 
 {
-	enum sspm_minor_type type;
-	char* str;
+    enum sspm_minor_type type;
+    const char* str;
 
 } minor_content_type_map[]  = 
 {
@@ -131,8 +130,8 @@
 
 
 struct encoding_map {
-	enum sspm_encoding encoding;
-	char* str;
+    enum sspm_encoding encoding;
+    const char* str;
 } sspm_encoding_map[] = 
 {
     {SSPM_NO_ENCODING,""},
@@ -146,7 +145,7 @@
 };
 
 
-char* sspm_get_parameter(char* line, char* parameter)
+char* sspm_get_parameter(const char* line, const char* parameter)
 {
     char *p,*s,*q;
     static char name[1024];
@@ -194,7 +193,7 @@
     return name;
 }
 
-char* sspm_property_name(char* line)
+char* sspm_property_name(const char* line)
 {
     static char name[1024];
     char *c = strchr(line,':');
@@ -215,10 +214,11 @@
     char *c,*s, *p;
 
     /* Find the first colon and the next semicolon */
+
     value[0] = 0;
     c = strchr(line,':');
     if (!c)
-        return value;
+      return value;
     s = strchr(c,';');
 
     /* Skip the colon */
@@ -240,7 +240,7 @@
 
 }
 
-static char *mime_headers[] = {
+static const char *mime_headers[] = {
     "Content-Type",
     "Content-Transfer-Encoding",
     "Content-Disposition",
@@ -255,17 +255,23 @@
     return 0;
 }
 void sspm_default_add_line(void *part, struct sspm_header *header, 
-			   char* line, size_t size)
+			   const char* line, size_t size)
 {
+    (void)part;
+    (void)header;
+    (void)line;
+    (void)size;
 }
 
 void* sspm_default_end_part(void* part)
 {
+    (void)part;
     return 0;
 }
 
 void sspm_default_free_part(void *part)
 {
+    (void)part;
 }
 
 
@@ -481,7 +487,7 @@
     return minor_content_type_map[i].type; /* Should return SSPM_UNKNOWN_MINOR_TYPE */
 }
 
-char* sspm_major_type_string(enum sspm_major_type type)
+const char* sspm_major_type_string(enum sspm_major_type type)
 {
     int i;
 
@@ -496,7 +502,7 @@
     return major_content_type_map[i].str; /* Should return SSPM_UNKNOWN_MINOR_TYPE */
 }
 
-char* sspm_minor_type_string(enum sspm_minor_type type)
+const char* sspm_minor_type_string(enum sspm_minor_type type)
 {
     int i;
     for (i=0; minor_content_type_map[i].type !=  SSPM_UNKNOWN_MINOR_TYPE; 
@@ -510,7 +516,7 @@
 }
 
 
-char* sspm_encoding_string(enum sspm_encoding type)
+const char* sspm_encoding_string(enum sspm_encoding type)
 {
     int i;
     for (i=0; sspm_encoding_map[i].encoding !=  SSPM_UNKNOWN_ENCODING; 
@@ -1027,6 +1033,7 @@
     struct sspm_header header;
     void *part;
     int i;
+    (void)first_header;
 
     /* Initialize all of the data */
     memset(&impl,0,sizeof(struct mime_impl));
@@ -1245,7 +1252,7 @@
 	int line_pos;
 };
 
-void sspm_append_string(struct sspm_buffer* buf, char* string);
+void sspm_append_string(struct sspm_buffer* buf, const char* string);
 void sspm_write_part(struct sspm_buffer *buf,struct sspm_part *part, int *part_num);
 
 void sspm_append_hex(struct sspm_buffer* buf, char ch)
@@ -1286,7 +1293,7 @@
     *(buf->pos) = 0;
 }
 /* A copy of icalmemory_append_string */
-void sspm_append_string(struct sspm_buffer* buf, char* string)
+void sspm_append_string(struct sspm_buffer* buf, const char* string)
 {
     char *new_buf;
     char *new_pos;
@@ -1416,12 +1423,12 @@
              
 void sspm_encode_base64(struct sspm_buffer *buf, char* data, size_t size)
 {
-
     char *p;
     char inbuf[3];
     int i = 0;
     int first = 1;
     int lpos = 0;
+    (void)size;
 
     inbuf[0] = inbuf[1] = inbuf[2]  = 0;
 
@@ -1468,8 +1475,8 @@
     
     int i;
     char temp[TMP_BUF_SIZE];			       
-    char* major; 
-    char* minor; 
+    const char* major; 
+    const char* minor; 
     
     /* Content-type */
 
@@ -1555,6 +1562,7 @@
 
 void sspm_write_part(struct sspm_buffer *buf,struct sspm_part *part,int *part_num)
 {
+    (void)part_num;
 
     /* Write header */
     sspm_write_header(buf,&(part->header));
@@ -1578,10 +1586,11 @@
 }
 
 int sspm_write_mime(struct sspm_part *parts,size_t num_parts,
-		    char **output_string, char* header)
+		    char **output_string, const char* header)
 {
     struct sspm_buffer buf;
     int part_num =0;
+    (void)num_parts;
 
     buf.buffer = malloc(4096);
     buf.pos = buf.buffer;
Index: libkcal/libical/src/libical/icaltimezone.c
===================================================================
--- libkcal/libical/src/libical/icaltimezone.c	(.../tags/KDE/3.5.6/kdepim)	(wersja 648291)
+++ libkcal/libical/src/libical/icaltimezone.c	(.../branches/KDE/3.5/kdepim)	(wersja 648291)
@@ -143,7 +141,7 @@
 
 static char* zone_files_directory = NULL;
 
-static void  icaltimezone_reset			(icaltimezone   *zone);
+static void  icaltimezone_reset			(icaltimezone *zone);
 static char* icaltimezone_get_location_from_vtimezone (icalcomponent *component);
 static char* icaltimezone_get_tznames_from_vtimezone (icalcomponent *component);
 static void  icaltimezone_expand_changes	(icaltimezone	*zone,
@@ -154,7 +152,7 @@
 static int   icaltimezone_compare_change_fn	(const void	*elem1,
 						 const void	*elem2);
 
-static int   icaltimezone_find_nearby_change	(icaltimezone	*zone,
+static int   icaltimezone_find_nearby_change	(icaltimezone *zone,
 						 icaltimezonechange *change);
 
 static void  icaltimezone_adjust_change		(icaltimezonechange *tt,
@@ -163,18 +161,18 @@
 						 int		 minutes,
 						 int		 seconds);
 
-static void  icaltimezone_init			(icaltimezone	*zone);
+static void  icaltimezone_init			(icaltimezone *zone);
 
 /** Gets the TZID, LOCATION/X-LIC-LOCATION, and TZNAME properties from the
    VTIMEZONE component and places them in the icaltimezone. It returns 1 on
    success, or 0 if the TZID can't be found. */
-static int   icaltimezone_get_vtimezone_properties (icaltimezone  *zone,
+static int   icaltimezone_get_vtimezone_properties (icaltimezone *zone,
 						    icalcomponent *component);
 
 
-static void  icaltimezone_load_builtin_timezone	(icaltimezone	*zone);
+static void  icaltimezone_load_builtin_timezone	(icaltimezone *zone);
 
-static void  icaltimezone_ensure_coverage	(icaltimezone	*zone,
+static void  icaltimezone_ensure_coverage	(icaltimezone *zone,
 						 int		 end_year);
 
 
@@ -189,7 +187,7 @@
 static void  format_utc_offset			(int		 utc_offset,
 						 char		*buffer);
 
-static char* get_zone_directory(void);
+static const char* get_zone_directory(void);
 
 
 /** Creates a new icaltimezone. */
@@ -217,7 +215,7 @@
 {
     icaltimezone_reset (zone);
     if (free_struct)
-	free (zone);
+	free ((void *)zone);
 }
 
 
@@ -242,7 +240,7 @@
 
 /** Initializes an icaltimezone. */
 static void
-icaltimezone_init			(icaltimezone	*zone)
+icaltimezone_init			(icaltimezone *zone)
 {
     zone->tzid = NULL;
     zone->location = NULL;
@@ -262,7 +260,7 @@
    it expects the zone to be initialized or reset - it doesn't free
    any old values. */
 static int
-icaltimezone_get_vtimezone_properties	(icaltimezone	*zone,
+icaltimezone_get_vtimezone_properties	(icaltimezone *zone,
 					 icalcomponent	*component)
 {
     icalproperty *prop;
@@ -434,7 +432,7 @@
 
 
 static void
-icaltimezone_ensure_coverage		(icaltimezone	*zone,
+icaltimezone_ensure_coverage		(icaltimezone *zone,
 					 int		 end_year)
 {
     /* When we expand timezone changes we always expand at least up to this
@@ -466,7 +464,7 @@
 
 
 static void
-icaltimezone_expand_changes		(icaltimezone	*zone,
+icaltimezone_expand_changes		(icaltimezone *zone,
 					 int		 end_year)
 {
     icalarray *changes;
@@ -690,11 +688,11 @@
 icaltimezone_compare_change_fn		(const void	*elem1,
 					 const void	*elem2)
 {
-    const icaltimezonechange *change1, *change2;
+    icaltimezonechange *change1, *change2;
     int retval;
 
-    change1 = elem1;
-    change2 = elem2;
+    change1 = (icaltimezonechange *)elem1;
+    change2 = (icaltimezonechange *)elem2;
 
     if (change1->year < change2->year)
 	retval = -1;
@@ -736,8 +734,8 @@
 
 void
 icaltimezone_convert_time		(struct icaltimetype *tt,
-					 icaltimezone	*from_zone,
-					 icaltimezone	*to_zone)
+					 icaltimezone *from_zone,
+					 icaltimezone *to_zone)
 {
     int utc_offset, is_daylight;
 
@@ -864,7 +862,7 @@
 	if (change_num < 0)
 	    return 0;
 
-	if (change_num >= zone->changes->num_elements)
+	if ((unsigned int)change_num >= zone->changes->num_elements)
 	    break;
 
 	zone_change = icalarray_element_at (zone->changes, change_num);
@@ -999,7 +997,7 @@
 	if (change_num < 0)
 	    return 0;
 
-	if (change_num >= zone->changes->num_elements)
+	if ((unsigned int)change_num >= zone->changes->num_elements)
 	    break;
 
 	zone_change = icalarray_element_at (zone->changes, change_num);
@@ -1022,7 +1020,7 @@
 /** Returns the index of a timezone change which is close to the time
    given in change. */
 static int
-icaltimezone_find_nearby_change		(icaltimezone		*zone,
+icaltimezone_find_nearby_change		(icaltimezone	*zone,
 					 icaltimezonechange	*change)
 {
     icaltimezonechange *zone_change;
@@ -1123,8 +1121,8 @@
 }
 
 
-char*
-icaltimezone_get_tzid			(icaltimezone	*zone)
+const char*
+icaltimezone_get_tzid			(icaltimezone *zone)
 {
     /* If this is a floating time, without a timezone, return NULL. */
     if (!zone)
@@ -1137,8 +1135,8 @@
 }
 
 
-char*
-icaltimezone_get_location		(icaltimezone	*zone)
+const char*
+icaltimezone_get_location		(icaltimezone *zone)
 {
     /* If this is a floating time, without a timezone, return NULL. */
     if (!zone)
@@ -1150,8 +1148,8 @@
 }
 
 
-char*
-icaltimezone_get_tznames		(icaltimezone	*zone)
+const char*
+icaltimezone_get_tznames		(icaltimezone *zone)
 {
     /* If this is a floating time, without a timezone, return NULL. */
     if (!zone)
@@ -1166,7 +1164,7 @@
 
 /** Returns the latitude of a builtin timezone. */
 double
-icaltimezone_get_latitude		(icaltimezone	*zone)
+icaltimezone_get_latitude		(icaltimezone *zone)
 {
     /* If this is a floating time, without a timezone, return 0. */
     if (!zone)
@@ -1180,7 +1178,7 @@
 
 /** Returns the longitude of a builtin timezone. */
 double
-icaltimezone_get_longitude		(icaltimezone	*zone)
+icaltimezone_get_longitude		(icaltimezone *zone)
 {
     /* If this is a floating time, without a timezone, return 0. */
     if (!zone)
@@ -1194,7 +1192,7 @@
 
 /** Returns the VTIMEZONE component of a timezone. */
 icalcomponent*
-icaltimezone_get_component		(icaltimezone	*zone)
+icaltimezone_get_component		(icaltimezone *zone)
 {
     /* If this is a floating time, without a timezone, return NULL. */
     if (!zone)
@@ -1211,7 +1209,7 @@
    tzid, location & tzname fields. It returns 1 on success or 0 on
    failure, i.e.  no TZID was found. */
 int
-icaltimezone_set_component		(icaltimezone	*zone,
+icaltimezone_set_component		(icaltimezone *zone,
 					 icalcomponent	*comp)
 {
     icaltimezone_reset (zone);
@@ -1246,7 +1244,7 @@
 
 	if ( timezones )
 	{
-		for (i = 0; i < timezones->num_elements; i++) {
+	    for (i = 0; (unsigned int)i < timezones->num_elements; i++) {
 		zone = icalarray_element_at (timezones, i);
 		icaltimezone_free (zone, 0);
 		}
@@ -1288,7 +1286,7 @@
 {
     icaltimezone *zone;
     int lower, upper, middle, cmp;
-    char *zone_location;
+    const char *zone_location;
 
     if (!location || !location[0])
 	return NULL;
@@ -1385,7 +1383,7 @@
 icaltimezone_init_builtin_timezones	(void)
 {
     /* Initialize the special UTC timezone. */
-    utc_timezone.tzid = "UTC";
+    utc_timezone.tzid = (char *)"UTC";
 
     icaltimezone_parse_zone_tab ();
 }
@@ -1483,7 +1481,7 @@
 
 /** Loads the builtin VTIMEZONE data for the given timezone. */
 static void
-icaltimezone_load_builtin_timezone	(icaltimezone	*zone)
+icaltimezone_load_builtin_timezone	(icaltimezone *zone)
 {
     char *filename;
     unsigned int filename_len;
@@ -1550,7 +1548,7 @@
 					 size_t		 size,
 					 void		*data)
 {
-    return fgets (s, size, (FILE*) data);
+    return fgets (s, (int)size, (FILE*) data);
 }
 
 
@@ -1576,11 +1574,11 @@
  * to add to UTC to get local time.
  */
 int
-icaltimezone_dump_changes		(icaltimezone	*zone,
+icaltimezone_dump_changes		(icaltimezone *zone,
 					 int		 max_year,
 					 FILE		*fp)
 {
-    static char *months[] = { "Jan", "Feb", "Mar", "Apr", "May", "Jun",
+    static const char *months[] = { "Jan", "Feb", "Mar", "Apr", "May", "Jun",
 			      "Jul", "Aug", "Sep", "Oct", "Nov", "Dec" };
     icaltimezonechange *zone_change;
     int change_num;
@@ -1594,7 +1592,7 @@
 #endif
 
     change_num = 0;
-    for (change_num = 0; change_num < zone->changes->num_elements; change_num++) {
+    for (change_num = 0; (unsigned int)change_num < zone->changes->num_elements; change_num++) {
 	zone_change = icalarray_element_at (zone->changes, change_num);
 
 	if (zone_change->year > max_year)
@@ -1622,7 +1620,7 @@
 format_utc_offset			(int		 utc_offset,
 					 char		*buffer)
 {
-  char *sign = "+";
+  const char *sign = "+";
   int hours, minutes, seconds;
 
   if (utc_offset < 0) {
@@ -1649,7 +1647,7 @@
     snprintf (buffer, sizeof(buffer), "%s%02i%02i%02i", sign, hours, minutes, seconds);
 }
 
-static char* get_zone_directory(void)
+static const char* get_zone_directory(void)
 {
 	return zone_files_directory == NULL ? ZONEINFO_DIRECTORY : zone_files_directory;
 }
Index: libkcal/libical/src/libical/icaltime.c
===================================================================
--- libkcal/libical/src/libical/icaltime.c	(.../tags/KDE/3.5.6/kdepim)	(wersja 648291)
+++ libkcal/libical/src/libical/icaltime.c	(.../branches/KDE/3.5/kdepim)	(wersja 648291)
@@ -55,7 +54,7 @@
  *  Function to convert a struct tm time specification
  *  to an ANSI time_t using the specified time zone.
  *  This is different from the standard mktime() function
- *  in that we dont want the automatic adjustments for
+ *  in that we don't want the automatic adjustments for
  *  local daylight savings time applied to the result.
  *  This function expects well-formed input.
  */
@@ -177,7 +176,7 @@
  */
 struct icaltimetype 
 icaltime_from_timet_with_zone(const time_t tm, const int is_date,
-	const icaltimezone *zone)
+	icaltimezone *zone)
 {
     struct icaltimetype tt = icaltime_null_time();
     struct tm t;
@@ -222,7 +221,7 @@
  * 
  * Returns the current time in the given timezone, as an icaltimetype.
  */
-struct icaltimetype icaltime_current_time_with_zone(const icaltimezone *zone)
+struct icaltimetype icaltime_current_time_with_zone(icaltimezone *zone)
 {
     return icaltime_from_timet_with_zone (time (NULL), 0, zone);
 }
@@ -274,7 +273,7 @@
  *	time is simply returned as time_t in its native timezone.
  */
 time_t icaltime_as_timet_with_zone(const struct icaltimetype _tt,
-	const icaltimezone *zone)
+	icaltimezone *zone)
 {
     struct icaltimetype tt = _tt;
     struct tm stm;
@@ -317,7 +316,7 @@
     if(tt.is_date){
 	snprintf(buf, size,"%04d%02d%02d",tt.year,tt.month,tt.day);
     } else {
-	char* fmt;
+	const char* fmt;
 	if(tt.is_utc){
 	    fmt = "%04d%02d%02dT%02d%02d%02dZ";
 	} else {
@@ -866,13 +865,13 @@
 	return ret;
 }
 
-const icaltimezone *
+icaltimezone *
 icaltime_get_timezone(const struct icaltimetype t) {
 
 	return t.zone;
 }
 
-char *
+const char *
 icaltime_get_tzid(const struct icaltimetype t) {
 
 	if (t.zone != NULL) {
@@ -889,7 +888,7 @@
  *	then you should use icaltime_convert_to_timezone instead.
  */
 struct icaltimetype
-icaltime_set_timezone(struct icaltimetype *t, const icaltimezone *zone) {
+icaltime_set_timezone(struct icaltimetype *t, icaltimezone *zone) {
 
 	/* If it's a date do nothing */
 	if (t->is_date) {
Index: libkcal/libical/src/libical/sspm.h
===================================================================
--- libkcal/libical/src/libical/sspm.h	(.../tags/KDE/3.5.6/kdepim)	(wersja 648291)
+++ libkcal/libical/src/libical/sspm.h	(.../branches/KDE/3.5/kdepim)	(wersja 648291)
@@ -110,14 +111,14 @@
 	enum sspm_minor_type minor;
 	void* (*new_part)();
 	void (*add_line)(void *part, struct sspm_header *header, 
-			 char* line, size_t size);
+			 const char* line, size_t size);
 	void* (*end_part)(void* part);
 	void (*free_part)(void *part);
 };
 
-char* sspm_major_type_string(enum sspm_major_type type);
-char* sspm_minor_type_string(enum sspm_minor_type type);
-char* sspm_encoding_string(enum sspm_encoding type);
+const char* sspm_major_type_string(enum sspm_major_type type);
+const char* sspm_minor_type_string(enum sspm_minor_type type);
+const char* sspm_encoding_string(enum sspm_encoding type);
 
 int sspm_parse_mime(struct sspm_part *parts, 
 		    size_t max_parts,
@@ -138,6 +139,6 @@
 
 
 int sspm_write_mime(struct sspm_part *parts,size_t num_parts,
-		    char **output_string, char* header);
+		    char **output_string, const char* header);
 
 #endif /*SSPM_H*/
Index: libkcal/libical/src/libical/icaltimezone.h
===================================================================
--- libkcal/libical/src/libical/icaltimezone.h	(.../tags/KDE/3.5.6/kdepim)	(wersja 648291)
+++ libkcal/libical/src/libical/icaltimezone.h	(.../branches/KDE/3.5/kdepim)	(wersja 648291)
@@ -68,7 +66,7 @@
 icalarray* icaltimezone_get_builtin_timezones	(void);
 
 /** Returns a single builtin timezone, given its Olson city name. */
-icaltimezone* icaltimezone_get_builtin_timezone	(const char *location);
+icaltimezone* icaltimezone_get_builtin_timezone (const char *location);
 
 /** Returns a single builtin timezone, given its TZID. */
 icaltimezone* icaltimezone_get_builtin_timezone_from_tzid (const char *tzid);
@@ -77,30 +75,30 @@
 icaltimezone* icaltimezone_get_utc_timezone	(void);
 
 /** Returns the TZID of a timezone. */
-char*	icaltimezone_get_tzid			(icaltimezone	*zone);
+const char*	icaltimezone_get_tzid			(icaltimezone *zone);
 
 /** Returns the city name of a timezone. */
-char*	icaltimezone_get_location		(icaltimezone	*zone);
+const char*	icaltimezone_get_location		(icaltimezone *zone);
 
 /** Returns the TZNAME properties used in the latest STANDARD and DAYLIGHT
    components. If they are the same it will return just one, e.g. "LMT".
    If they are different it will format them like "EST/EDT". Note that this
    may also return NULL. */
-char*	icaltimezone_get_tznames		(icaltimezone	*zone);
+const char*	icaltimezone_get_tznames		(icaltimezone *zone);
 
 /** Returns the latitude of a builtin timezone. */
-double	icaltimezone_get_latitude		(icaltimezone	*zone);
+double	icaltimezone_get_latitude		(icaltimezone *zone);
 
 /** Returns the longitude of a builtin timezone. */
-double	icaltimezone_get_longitude		(icaltimezone	*zone);
+double	icaltimezone_get_longitude		(icaltimezone *zone);
 
 /** Returns the VTIMEZONE component of a timezone. */
-icalcomponent*	icaltimezone_get_component	(icaltimezone	*zone);
+icalcomponent*	icaltimezone_get_component	(icaltimezone *zone);
 
 /** Sets the VTIMEZONE component of an icaltimezone, initializing the tzid,
    location & tzname fields. It returns 1 on success or 0 on failure, i.e.
    no TZID was found. */
-int	icaltimezone_set_component		(icaltimezone	*zone,
+int	icaltimezone_set_component		(icaltimezone *zone,
 						 icalcomponent	*comp);
 
 /**
@@ -108,8 +106,8 @@
  */
 
 void	icaltimezone_convert_time		(struct icaltimetype *tt,
-						 icaltimezone	*from_zone,
-						 icaltimezone	*to_zone);
+						 icaltimezone *from_zone,
+						 icaltimezone *to_zone);
 
 
 /**
@@ -120,15 +118,15 @@
    timezone.  It is the number of seconds to add to UTC to get local
    time.  The is_daylight flag is set to 1 if the time is in
    daylight-savings time. */
-int	icaltimezone_get_utc_offset		(icaltimezone	*zone,
-						 struct icaltimetype *tt,
-						 int		*is_daylight);
+int icaltimezone_get_utc_offset	(icaltimezone *zone,
+				 struct icaltimetype *tt,
+				 int		*is_daylight);
 
 /** Calculates the UTC offset of a given UTC time in the given
    timezone.  It is the number of seconds to add to UTC to get local
    time.  The is_daylight flag is set to 1 if the time is in
    daylight-savings time. */
-int	icaltimezone_get_utc_offset_of_utc_time	(icaltimezone	*zone,
+int	icaltimezone_get_utc_offset_of_utc_time	(icaltimezone *zone,
 						 struct icaltimetype *tt,
 						 int		*is_daylight);
 
@@ -160,7 +158,7 @@
 
 /** Dumps information about changes in the timezone up to and including
    max_year. */
-int	icaltimezone_dump_changes		(icaltimezone	*zone,
+int	icaltimezone_dump_changes		(icaltimezone *zone,
 						 int		 max_year,
 						 FILE		*fp);
 
Index: libkcal/libical/src/libical/icalcomponent.c
===================================================================
--- libkcal/libical/src/libical/icalcomponent.c	(.../tags/KDE/3.5.6/kdepim)	(wersja 648291)
+++ libkcal/libical/src/libical/icalcomponent.c	(.../branches/KDE/3.5/kdepim)	(wersja 648291)
@@ -280,11 +280,11 @@
    char* buf_ptr = 0;
     pvl_elem itr;
 
+/* RFC 2445 explicitly says that the newline is *ALWAYS* a \r\n (CRLF)!!!! */
+char newline[] = "\r\n";
 /* WIN32 automatically adds the \r, Anybody else need it?
 #ifdef ICAL_UNIX_NEWLINE    
-*/
     char newline[] = "\n";
-/*
 #else
     char newline[] = "\r\n";
 #endif
@@ -1483,7 +1483,7 @@
  */
 void icalcomponent_set_dtstart(icalcomponent* comp, struct icaltimetype v)
 {
-    char *tzid;
+    const char *tzid;
     ICALSETUPSET(ICAL_DTSTART_PROPERTY);
 
     if (prop == 0){
@@ -1601,7 +1601,7 @@
  */
 void icalcomponent_set_dtend(icalcomponent* comp, struct icaltimetype v)
 {
-    char *tzid;
+    const char *tzid;
     ICALSETUPSET(ICAL_DTEND_PROPERTY);
 
     if (icalcomponent_get_first_property(inner,ICAL_DURATION_PROPERTY)
@@ -2050,7 +2050,7 @@
 {
   icalcomponent *subcomp, *next_subcomp;
   icalarray *tzids_to_rename;
-  int i;
+  unsigned int i;
 
   /* Check that both components are VCALENDAR components. */
   assert (icalcomponent_isa(comp) == ICAL_VCALENDAR_COMPONENT);
@@ -2170,6 +2170,7 @@
   int i, suffix, max_suffix = 0, num_elements;
   unsigned int tzid_len;
   char *tzid_copy, *new_tzid, suffix_buf[32];
+  (void)tzid_prop; /* hack to stop unused variable warning */
 
   /* Find the length of the TZID without any trailing digits. */
   tzid_len = icalcomponent_get_tzid_prefix_len (tzid);
@@ -2184,7 +2185,8 @@
   num_elements = comp->timezones ? comp->timezones->num_elements : 0;
   for (i = 0; i < num_elements; i++) {
     icaltimezone *zone;
-    char *existing_tzid, *existing_tzid_copy;
+    const char *existing_tzid;
+    const char *existing_tzid_copy;
     unsigned int existing_tzid_len;
 
     zone = icalarray_element_at (comp->timezones, i);
@@ -2281,7 +2283,7 @@
 
     /* Step through the rename table to see if the current TZID matches
        any of the ones we want to rename. */
-    for (i = 0; i < rename_table->num_elements - 1; i += 2) {
+    for (i = 0; (unsigned int)i < rename_table->num_elements - 1; i += 2) {
         if (!strcmp (tzid, icalarray_element_at (rename_table, i))) {
 	    icalparameter_set_tzid (param, icalarray_element_at (rename_table, i + 1));
 	    break;
@@ -2338,7 +2340,7 @@
 {
     icaltimezone *zone;
     int lower, upper, middle, cmp;
-    char *zone_tzid;
+    const char *zone_tzid;
 
     if (!comp->timezones)
 	return NULL;
Index: libkcal/libical/src/libical/icaltime.h
===================================================================
--- libkcal/libical/src/libical/icaltime.h	(.../tags/KDE/3.5.6/kdepim)	(wersja 648291)
+++ libkcal/libical/src/libical/icaltime.h	(.../branches/KDE/3.5/kdepim)	(wersja 648291)
@@ -61,7 +60,7 @@
  *
  *	- icaltime_get_timezone(struct icaltimetype t)
  *	- icaltime_get_tzid(struct icaltimetype t)
- *	- icaltime_set_timezone(struct icaltimetype t, const icaltimezone *zone)
+ *	- icaltime_set_timezone(struct icaltimetype t, icaltimezone *zone)
  *	- icaltime_day_of_year(struct icaltimetype t)
  *	- icaltime_day_of_week(struct icaltimetype t)
  *	- icaltime_start_doy_of_week(struct icaltimetype t)
@@ -94,7 +93,6 @@
 #define ICALTIME_H
 
 #include <time.h>
-
 /* An opaque struct representing a timezone. We declare this here to avoid
    a circular dependancy. */
 #ifndef ICALTIMEZONE_DEFINED
@@ -132,7 +130,7 @@
    
 	int is_daylight; /**< 1 -> time is in daylight savings time. */
    
-	const icaltimezone *zone;	/**< timezone */
+	icaltimezone *zone;	/**< timezone */
 };	
 
 typedef struct icaltimetype icaltimetype;
@@ -145,7 +143,7 @@
 struct icaltimetype icaltime_null_date(void);
 
 /** Returns the current time in the given timezone, as an icaltimetype. */
-struct icaltimetype icaltime_current_time_with_zone(const icaltimezone *zone);
+struct icaltimetype icaltime_current_time_with_zone(icaltimezone *zone);
 
 /** Returns the current day as an icaltimetype, with is_date set. */
 struct icaltimetype icaltime_today(void);
@@ -155,14 +153,14 @@
 
 /** Convert seconds past UNIX epoch to a timetype, using timezones. */
 struct icaltimetype icaltime_from_timet_with_zone(const time_t tm,
-	const int is_date, const icaltimezone *zone);
+	const int is_date, icaltimezone *zone);
 
 /** create a time from an ISO format string */
 struct icaltimetype icaltime_from_string(const char* str);
 
 /** create a time from an ISO format string */
 struct icaltimetype icaltime_from_string_with_zone(const char* str,
-	const icaltimezone *zone);
+	icaltimezone *zone);
 
 /** Create a new time, given a day of year and a year. */
 struct icaltimetype icaltime_from_day_of_year(const int doy,
@@ -178,21 +176,21 @@
 
 /** Return the time as seconds past the UNIX epoch, using timezones. */
 time_t icaltime_as_timet_with_zone(const struct icaltimetype tt,
-	const icaltimezone *zone);
+	icaltimezone *zone);
 
 /** Return a string represention of the time, in RFC2445 format. The
    string is owned by libical */
 const char* icaltime_as_ical_string(const struct icaltimetype tt);
 
 /** @brief Return the timezone */
-const icaltimezone *icaltime_get_timezone(const struct icaltimetype t);
+icaltimezone *icaltime_get_timezone(const struct icaltimetype t);
 
 /** @brief Return the tzid, or NULL for a floating time */
-char *icaltime_get_tzid(const struct icaltimetype t);
+const char *icaltime_get_tzid(const struct icaltimetype t);
 
 /** @brief Set the timezone */
 struct icaltimetype icaltime_set_timezone(struct icaltimetype *t,
-	const icaltimezone *zone);
+	icaltimezone *zone);
 
 /** Return the day of the year of the given time */
 int icaltime_day_of_year(const struct icaltimetype t);
Index: libkcal/libical/src/libical/icaltypes.c
===================================================================
--- libkcal/libical/src/libical/icaltypes.c	(.../tags/KDE/3.5.6/kdepim)	(wersja 648291)
+++ libkcal/libical/src/libical/icaltypes.c	(.../branches/KDE/3.5/kdepim)	(wersja 648291)
@@ -85,10 +84,10 @@
 
     null_tr = tr;
 
-    if(str == 0) goto error;
 
     /* Suppress errors so a failure in icaltime_from_string() does not cause an abort */
     es = icalerror_get_error_state(ICAL_MALFORMEDDATA_ERROR);
+    if(str == 0) goto error;
     icalerror_set_error_state(ICAL_MALFORMEDDATA_ERROR,ICAL_ERROR_NONFATAL);
     e = icalerrno;
     icalerror_set_errno(ICAL_NO_ERROR);
Index: libkcal/libical/src/libicalss/icalclassify.c
===================================================================
--- libkcal/libical/src/libicalss/icalclassify.c	(.../tags/KDE/3.5.6/kdepim)	(wersja 648291)
+++ libkcal/libical/src/libicalss/icalclassify.c	(.../branches/KDE/3.5/kdepim)	(wersja 648291)
@@ -173,7 +172,7 @@
       const char *p_organizer = icalproperty_get_organizer(p);
       if (p_organizer!=0) {
         parts->organizer = strdup(p_organizer);
-      } 
+      }
     }
 
     p = icalcomponent_get_first_property(inner,ICAL_SEQUENCE_PROPERTY);    
@@ -186,7 +185,7 @@
       const char *p_uid = icalproperty_get_uid(p);
       if (p_uid!=0) {
         parts->uid = strdup(p_uid);
-      } 
+      }
     }
 
     p = icalcomponent_get_first_property(inner,ICAL_RECURRENCEID_PROPERTY);
@@ -204,7 +203,7 @@
 	p  = icalcomponent_get_first_property(inner,ICAL_ATTENDEE_PROPERTY);
 
 	if(p!=0){
-	    char *attendee = 0;
+	    const char *attendee = 0;
 	    param = icalproperty_get_first_parameter(p,ICAL_PARTSTAT_PARAMETER);
 	    
 	    if(param != 0){
@@ -275,6 +274,7 @@
 				const char* user)
 {
     icalclassify_pre;
+    (void)user;
 
     if(comp->method == ICAL_METHOD_PUBLISH &&
 	match == 0 && comp->inner_kind != ICAL_VFREEBUSY_COMPONENT){
@@ -290,6 +290,7 @@
 				const char* user)
 {
     icalclassify_pre;
+    (void)user;
 
     if(comp->method == ICAL_METHOD_PUBLISH &&
 	match !=0 && comp->inner_kind != ICAL_VFREEBUSY_COMPONENT){
@@ -306,6 +307,8 @@
 {
     icalclassify_pre;
 
+    (void)match;
+    (void)user;
     if(comp->method == ICAL_METHOD_PUBLISH &&
        comp->inner_kind == ICAL_VFREEBUSY_COMPONENT){
 	rtrn = 1;
@@ -323,6 +326,7 @@
     /* Method is  REQUEST, and there is no match */
 
     icalclassify_pre
+    (void)user;
 
     if(match->c==0 && comp->method == ICAL_METHOD_REQUEST){
 	rtrn = 1;
@@ -341,6 +345,7 @@
        time-related properties are unchanged */
     
     icalclassify_pre
+    (void)user;
 
     if (match != 0 &&
 	comp->sequence >= match->sequence &&
@@ -360,6 +365,7 @@
     /* REQUEST method, Higher SEQUENCE than match, and one or more
        time-related properties are changed */
     icalclassify_pre
+    (void)user;
 
     if (match->c != 0 &&
 	comp->sequence > match->sequence &&
@@ -379,6 +385,7 @@
     icalproperty* attendee;
     icalparameter* param;
     icalclassify_pre;
+    (void)match;
 
     attendee = icalclassify_find_attendee(comp->c,user);
 
@@ -405,6 +412,9 @@
     icalclassify_pre
     icalerror_set_errno(ICAL_UNIMPLEMENTED_ERROR);
     icalclassify_post
+    (void)comp;
+    (void)match;
+    (void)user;
 
 }
 
@@ -416,6 +426,9 @@
     icalclassify_pre
     icalerror_set_errno(ICAL_UNIMPLEMENTED_ERROR);
     icalclassify_post
+    (void)comp;
+    (void)match;
+    (void)user;
 }
 
 int icalclassify_request_forward(
@@ -426,6 +439,9 @@
     icalclassify_pre
     icalerror_set_errno(ICAL_UNIMPLEMENTED_ERROR);
     icalclassify_post
+    (void)comp;
+    (void)match;
+    (void)user;
 }
 
 int icalclassify_request_freebusy(
@@ -436,6 +452,9 @@
     icalclassify_pre
     icalerror_set_errno(ICAL_UNIMPLEMENTED_ERROR);
     icalclassify_post
+    (void)comp;
+    (void)match;
+    (void)user;
 }
 
 int icalclassify_reply_accept(
@@ -445,6 +464,7 @@
 {
     icalproperty* attendee;
     icalclassify_pre;
+    (void)user;
 
     attendee = icalclassify_find_attendee(match->c,comp->reply_attendee);
 
@@ -462,6 +482,7 @@
 {
     icalproperty* attendee;
     icalclassify_pre;
+    (void)user;
 
     attendee = icalclassify_find_attendee(match->c,comp->reply_attendee);
 
@@ -479,6 +500,7 @@
 {
     icalproperty* attendee;
     icalclassify_pre;
+    (void)user;
 
     attendee = icalclassify_find_attendee(match->c,comp->reply_attendee);
 
@@ -495,6 +517,7 @@
 {
     icalproperty* attendee;
     icalclassify_pre;
+    (void)user;
 
     attendee= icalclassify_find_attendee(match->c,comp->reply_attendee);
 
@@ -511,6 +534,7 @@
 {
     icalproperty* attendee;
     icalclassify_pre;
+    (void)user;
 
 
     attendee = icalclassify_find_attendee(match->c,comp->reply_attendee);
@@ -527,6 +551,9 @@
     const char* user)
 {
     icalclassify_pre
+    (void)match;
+    (void)user;
+
     if(comp->method == ICAL_METHOD_ADD){
 	rtrn = 1;
     }
@@ -538,6 +565,8 @@
     const char* user)
 {
     icalclassify_pre
+    (void)match;
+    (void)user;
     if(comp->method == ICAL_METHOD_CANCEL){
 	rtrn = 1;
     }
@@ -549,6 +578,8 @@
     const char* user)
 {
     icalclassify_pre
+    (void)match;
+    (void)user;
     if(comp->method == ICAL_METHOD_CANCEL){
 	rtrn = 1;
     }
@@ -560,6 +591,8 @@
     const char* user)
 {
     icalclassify_pre
+    (void)match;
+    (void)user;
     if(comp->method == ICAL_METHOD_CANCEL){
 	rtrn = 1;
     }
@@ -571,6 +604,8 @@
     const char* user)
 {
     icalclassify_pre
+    (void)match;
+    (void)user;
     if(comp->method == ICAL_METHOD_REFRESH){
 	rtrn = 1;
     }
@@ -582,6 +617,8 @@
     const char* user)
 {
     icalclassify_pre
+    (void)match;
+    (void)user;
     if(comp->method == ICAL_METHOD_COUNTER){
 	rtrn = 1;
     }
@@ -593,6 +630,8 @@
     const char* user)
 {
     icalclassify_pre
+    (void)match;
+    (void)user;
 
     if(comp->method == ICAL_METHOD_DECLINECOUNTER){
 	rtrn = 1;
Index: libkcal/libical/src/libicalss/Makefile.am
===================================================================
--- libkcal/libical/src/libicalss/Makefile.am	(.../tags/KDE/3.5.6/kdepim)	(wersja 648291)
+++ libkcal/libical/src/libicalss/Makefile.am	(.../branches/KDE/3.5/kdepim)	(wersja 648291)
@@ -21,9 +21,6 @@
 	echo '#ifdef __cplusplus'	  >  icalss.h
 	echo 'extern "C" {'		  >> icalss.h
 	echo '#endif'			  >> icalss.h
-	echo '/*'			  >> icalss.h
-	echo ' $$''Id''$$'		  >> icalss.h
-	echo '*/'			  >> icalss.h
 	cat $(COMBINEDHEADERS)				\
 	| egrep -v "#include.*\"ical"			\
 	| egrep -v "#include.*\"pvl\.h\""		\
Index: libkcal/libical/tzdata/iso3166.tab
===================================================================
--- libkcal/libical/tzdata/iso3166.tab	(.../tags/KDE/3.5.6/kdepim)	(wersja 0)
+++ libkcal/libical/tzdata/iso3166.tab	(.../branches/KDE/3.5/kdepim)	(wersja 648291)
@@ -0,0 +1,267 @@
+# ISO 3166 alpha-2 country codes
+#
+# @(#)iso3166.tab	8.4
+#
+# From Paul Eggert (2006-09-27):
+#
+# This file contains a table with the following columns:
+# 1.  ISO 3166-1 alpha-2 country code, current as of
+#     ISO 3166-1 Newsletter No. V-12 (2006-09-26).  See:
+#     <a href="http://www.iso.org/iso/en/prods-services/iso3166ma/index.html">
+#     ISO 3166 Maintenance agency (ISO 3166/MA)
+#     </a>.
+# 2.  The usual English name for the country,
+#     chosen so that alphabetic sorting of subsets produces helpful lists.
+#     This is not the same as the English name in the ISO 3166 tables.
+#
+# Columns are separated by a single tab.
+# The table is sorted by country code.
+#
+# Lines beginning with `#' are comments.
+#
+#country-
+#code	country name
+AD	Andorra
+AE	United Arab Emirates
+AF	Afghanistan
+AG	Antigua & Barbuda
+AI	Anguilla
+AL	Albania
+AM	Armenia
+AN	Netherlands Antilles
+AO	Angola
+AQ	Antarctica
+AR	Argentina
+AS	Samoa (American)
+AT	Austria
+AU	Australia
+AW	Aruba
+AX	Aaland Islands
+AZ	Azerbaijan
+BA	Bosnia & Herzegovina
+BB	Barbados
+BD	Bangladesh
+BE	Belgium
+BF	Burkina Faso
+BG	Bulgaria
+BH	Bahrain
+BI	Burundi
+BJ	Benin
+BM	Bermuda
+BN	Brunei
+BO	Bolivia
+BR	Brazil
+BS	Bahamas
+BT	Bhutan
+BV	Bouvet Island
+BW	Botswana
+BY	Belarus
+BZ	Belize
+CA	Canada
+CC	Cocos (Keeling) Islands
+CD	Congo (Dem. Rep.)
+CF	Central African Rep.
+CG	Congo (Rep.)
+CH	Switzerland
+CI	Cote d'Ivoire
+CK	Cook Islands
+CL	Chile
+CM	Cameroon
+CN	China
+CO	Colombia
+CR	Costa Rica
+CU	Cuba
+CV	Cape Verde
+CX	Christmas Island
+CY	Cyprus
+CZ	Czech Republic
+DE	Germany
+DJ	Djibouti
+DK	Denmark
+DM	Dominica
+DO	Dominican Republic
+DZ	Algeria
+EC	Ecuador
+EE	Estonia
+EG	Egypt
+EH	Western Sahara
+ER	Eritrea
+ES	Spain
+ET	Ethiopia
+FI	Finland
+FJ	Fiji
+FK	Falkland Islands
+FM	Micronesia
+FO	Faroe Islands
+FR	France
+GA	Gabon
+GB	Britain (UK)
+GD	Grenada
+GE	Georgia
+GF	French Guiana
+GG	Guernsey
+GH	Ghana
+GI	Gibraltar
+GL	Greenland
+GM	Gambia
+GN	Guinea
+GP	Guadeloupe
+GQ	Equatorial Guinea
+GR	Greece
+GS	South Georgia & the South Sandwich Islands
+GT	Guatemala
+GU	Guam
+GW	Guinea-Bissau
+GY	Guyana
+HK	Hong Kong
+HM	Heard Island & McDonald Islands
+HN	Honduras
+HR	Croatia
+HT	Haiti
+HU	Hungary
+ID	Indonesia
+IE	Ireland
+IL	Israel
+IM	Isle of Man
+IN	India
+IO	British Indian Ocean Territory
+IQ	Iraq
+IR	Iran
+IS	Iceland
+IT	Italy
+JE	Jersey
+JM	Jamaica
+JO	Jordan
+JP	Japan
+KE	Kenya
+KG	Kyrgyzstan
+KH	Cambodia
+KI	Kiribati
+KM	Comoros
+KN	St Kitts & Nevis
+KP	Korea (North)
+KR	Korea (South)
+KW	Kuwait
+KY	Cayman Islands
+KZ	Kazakhstan
+LA	Laos
+LB	Lebanon
+LC	St Lucia
+LI	Liechtenstein
+LK	Sri Lanka
+LR	Liberia
+LS	Lesotho
+LT	Lithuania
+LU	Luxembourg
+LV	Latvia
+LY	Libya
+MA	Morocco
+MC	Monaco
+MD	Moldova
+ME	Montenegro
+MG	Madagascar
+MH	Marshall Islands
+MK	Macedonia
+ML	Mali
+MM	Myanmar (Burma)
+MN	Mongolia
+MO	Macau
+MP	Northern Mariana Islands
+MQ	Martinique
+MR	Mauritania
+MS	Montserrat
+MT	Malta
+MU	Mauritius
+MV	Maldives
+MW	Malawi
+MX	Mexico
+MY	Malaysia
+MZ	Mozambique
+NA	Namibia
+NC	New Caledonia
+NE	Niger
+NF	Norfolk Island
+NG	Nigeria
+NI	Nicaragua
+NL	Netherlands
+NO	Norway
+NP	Nepal
+NR	Nauru
+NU	Niue
+NZ	New Zealand
+OM	Oman
+PA	Panama
+PE	Peru
+PF	French Polynesia
+PG	Papua New Guinea
+PH	Philippines
+PK	Pakistan
+PL	Poland
+PM	St Pierre & Miquelon
+PN	Pitcairn
+PR	Puerto Rico
+PS	Palestine
+PT	Portugal
+PW	Palau
+PY	Paraguay
+QA	Qatar
+RE	Reunion
+RO	Romania
+RS	Serbia
+RU	Russia
+RW	Rwanda
+SA	Saudi Arabia
+SB	Solomon Islands
+SC	Seychelles
+SD	Sudan
+SE	Sweden
+SG	Singapore
+SH	St Helena
+SI	Slovenia
+SJ	Svalbard & Jan Mayen
+SK	Slovakia
+SL	Sierra Leone
+SM	San Marino
+SN	Senegal
+SO	Somalia
+SR	Suriname
+ST	Sao Tome & Principe
+SV	El Salvador
+SY	Syria
+SZ	Swaziland
+TC	Turks & Caicos Is
+TD	Chad
+TF	French Southern & Antarctic Lands
+TG	Togo
+TH	Thailand
+TJ	Tajikistan
+TK	Tokelau
+TL	East Timor
+TM	Turkmenistan
+TN	Tunisia
+TO	Tonga
+TR	Turkey
+TT	Trinidad & Tobago
+TV	Tuvalu
+TW	Taiwan
+TZ	Tanzania
+UA	Ukraine
+UG	Uganda
+UM	US minor outlying islands
+US	United States
+UY	Uruguay
+UZ	Uzbekistan
+VA	Vatican City
+VC	St Vincent
+VE	Venezuela
+VG	Virgin Islands (UK)
+VI	Virgin Islands (US)
+VN	Vietnam
+VU	Vanuatu
+WF	Wallis & Futuna
+WS	Samoa (western)
+YE	Yemen
+YT	Mayotte
+ZA	South Africa
+ZM	Zambia
+ZW	Zimbabwe
Index: libkcal/libical/tzdata/zone.tab
===================================================================
--- libkcal/libical/tzdata/zone.tab	(.../tags/KDE/3.5.6/kdepim)	(wersja 0)
+++ libkcal/libical/tzdata/zone.tab	(.../branches/KDE/3.5/kdepim)	(wersja 648291)
@@ -0,0 +1,420 @@
+# @(#)zone.tab	8.10
+#
+# TZ zone descriptions
+#
+# From Paul Eggert (1996-08-05):
+#
+# This file contains a table with the following columns:
+# 1.  ISO 3166 2-character country code.  See the file `iso3166.tab'.
+# 2.  Latitude and longitude of the zone's principal location
+#     in ISO 6709 sign-degrees-minutes-seconds format,
+#     either +-DDMM+-DDDMM or +-DDMMSS+-DDDMMSS,
+#     first latitude (+ is north), then longitude (+ is east).
+# 3.  Zone name used in value of TZ environment variable.
+# 4.  Comments; present if and only if the country has multiple rows.
+#
+# Columns are separated by a single tab.
+# The table is sorted first by country, then an order within the country that
+# (1) makes some geographical sense, and
+# (2) puts the most populous zones first, where that does not contradict (1).
+#
+# Lines beginning with `#' are comments.
+#
+#country-
+#code	coordinates	TZ			comments
+AD	+4230+00131	Europe/Andorra
+AE	+2518+05518	Asia/Dubai
+AF	+3431+06912	Asia/Kabul
+AG	+1703-06148	America/Antigua
+AI	+1812-06304	America/Anguilla
+AL	+4120+01950	Europe/Tirane
+AM	+4011+04430	Asia/Yerevan
+AN	+1211-06900	America/Curacao
+AO	-0848+01314	Africa/Luanda
+AQ	-7750+16636	Antarctica/McMurdo	McMurdo Station, Ross Island
+AQ	-9000+00000	Antarctica/South_Pole	Amundsen-Scott Station, South Pole
+AQ	-6734-06808	Antarctica/Rothera	Rothera Station, Adelaide Island
+AQ	-6448-06406	Antarctica/Palmer	Palmer Station, Anvers Island
+AQ	-6736+06253	Antarctica/Mawson	Mawson Station, Holme Bay
+AQ	-6835+07758	Antarctica/Davis	Davis Station, Vestfold Hills
+AQ	-6617+11031	Antarctica/Casey	Casey Station, Bailey Peninsula
+AQ	-7824+10654	Antarctica/Vostok	Vostok Station, S Magnetic Pole
+AQ	-6640+14001	Antarctica/DumontDUrville	Dumont-d'Urville Base, Terre Adelie
+AQ	-690022+0393524	Antarctica/Syowa	Syowa Station, E Ongul I
+AR	-3436-05827	America/Argentina/Buenos_Aires	Buenos Aires (BA, CF)
+AR	-3124-06411	America/Argentina/Cordoba	most locations (CB, CC, CN, ER, FM, LP, MN, NQ, RN, SA, SE, SF, SL)
+AR	-2411-06518	America/Argentina/Jujuy	Jujuy (JY)
+AR	-2649-06513	America/Argentina/Tucuman	Tucuman (TM)
+AR	-2828-06547	America/Argentina/Catamarca	Catamarca (CT), Chubut (CH)
+AR	-2926-06651	America/Argentina/La_Rioja	La Rioja (LR)
+AR	-3132-06831	America/Argentina/San_Juan	San Juan (SJ)
+AR	-3253-06849	America/Argentina/Mendoza	Mendoza (MZ)
+AR	-5138-06913	America/Argentina/Rio_Gallegos	Santa Cruz (SC)
+AR	-5448-06818	America/Argentina/Ushuaia	Tierra del Fuego (TF)
+AS	-1416-17042	Pacific/Pago_Pago
+AT	+4813+01620	Europe/Vienna
+AU	-3133+15905	Australia/Lord_Howe	Lord Howe Island
+AU	-4253+14719	Australia/Hobart	Tasmania - most locations
+AU	-3956+14352	Australia/Currie	Tasmania - King Island
+AU	-3749+14458	Australia/Melbourne	Victoria
+AU	-3352+15113	Australia/Sydney	New South Wales - most locations
+AU	-3157+14127	Australia/Broken_Hill	New South Wales - Yancowinna
+AU	-2728+15302	Australia/Brisbane	Queensland - most locations
+AU	-2016+14900	Australia/Lindeman	Queensland - Holiday Islands
+AU	-3455+13835	Australia/Adelaide	South Australia
+AU	-1228+13050	Australia/Darwin	Northern Territory
+AU	-3157+11551	Australia/Perth	Western Australia - most locations
+AU	-3143+12852	Australia/Eucla	Western Australia - Eucla area
+AW	+1230-06858	America/Aruba
+AX	+6006+01957	Europe/Mariehamn
+AZ	+4023+04951	Asia/Baku
+BA	+4352+01825	Europe/Sarajevo
+BB	+1306-05937	America/Barbados
+BD	+2343+09025	Asia/Dhaka
+BE	+5050+00420	Europe/Brussels
+BF	+1222-00131	Africa/Ouagadougou
+BG	+4241+02319	Europe/Sofia
+BH	+2623+05035	Asia/Bahrain
+BI	-0323+02922	Africa/Bujumbura
+BJ	+0629+00237	Africa/Porto-Novo
+BM	+3217-06446	Atlantic/Bermuda
+BN	+0456+11455	Asia/Brunei
+BO	-1630-06809	America/La_Paz
+BR	-0351-03225	America/Noronha	Atlantic islands
+BR	-0127-04829	America/Belem	Amapa, E Para
+BR	-0343-03830	America/Fortaleza	NE Brazil (MA, PI, CE, RN, PB)
+BR	-0803-03454	America/Recife	Pernambuco
+BR	-0712-04812	America/Araguaina	Tocantins
+BR	-0940-03543	America/Maceio	Alagoas, Sergipe
+BR	-1259-03831	America/Bahia	Bahia
+BR	-2332-04637	America/Sao_Paulo	S & SE Brazil (GO, DF, MG, ES, RJ, SP, PR, SC, RS)
+BR	-2027-05437	America/Campo_Grande	Mato Grosso do Sul
+BR	-1535-05605	America/Cuiaba	Mato Grosso
+BR	-0846-06354	America/Porto_Velho	W Para, Rondonia
+BR	+0249-06040	America/Boa_Vista	Roraima
+BR	-0308-06001	America/Manaus	E Amazonas
+BR	-0640-06952	America/Eirunepe	W Amazonas
+BR	-0958-06748	America/Rio_Branco	Acre
+BS	+2505-07721	America/Nassau
+BT	+2728+08939	Asia/Thimphu
+BW	-2545+02555	Africa/Gaborone
+BY	+5354+02734	Europe/Minsk
+BZ	+1730-08812	America/Belize
+CA	+4734-05243	America/St_Johns	Newfoundland Time, including SE Labrador
+CA	+4439-06336	America/Halifax	Atlantic Time - Nova Scotia (most places), PEI
+CA	+4612-05957	America/Glace_Bay	Atlantic Time - Nova Scotia - places that did not observe DST 1966-1971
+CA	+4606-06447	America/Moncton	Atlantic Time - New Brunswick
+CA	+5320-06025	America/Goose_Bay	Atlantic Time - Labrador - most locations
+CA	+5125-05707	America/Blanc-Sablon	Atlantic Standard Time - Quebec - Lower North Shore
+CA	+4531-07334	America/Montreal	Eastern Time - Quebec - most locations
+CA	+4339-07923	America/Toronto	Eastern Time - Ontario - most locations
+CA	+4901-08816	America/Nipigon	Eastern Time - Ontario & Quebec - places that did not observe DST 1967-1973
+CA	+4823-08915	America/Thunder_Bay	Eastern Time - Thunder Bay, Ontario
+CA	+6344-06828	America/Iqaluit	Eastern Time - east Nunavut - most locations
+CA	+6608-06544	America/Pangnirtung	Eastern Time - Pangnirtung, Nunavut
+CA	+744144-0944945	America/Resolute	Eastern Time - Resolute, Nunavut
+CA	+484531-0913718	America/Atikokan	Eastern Standard Time - Atikokan, Ontario and Southampton I, Nunavut
+CA	+624900-0920459	America/Rankin_Inlet	Central Time - central Nunavut
+CA	+4953-09709	America/Winnipeg	Central Time - Manitoba & west Ontario
+CA	+4843-09434	America/Rainy_River	Central Time - Rainy River & Fort Frances, Ontario
+CA	+6903-10505	America/Cambridge_Bay	Central Time - west Nunavut
+CA	+5024-10439	America/Regina	Central Standard Time - Saskatchewan - most locations
+CA	+5017-10750	America/Swift_Current	Central Standard Time - Saskatchewan - midwest
+CA	+5333-11328	America/Edmonton	Mountain Time - Alberta, east British Columbia & west Saskatchewan
+CA	+6227-11421	America/Yellowknife	Mountain Time - central Northwest Territories
+CA	+682059-1334300	America/Inuvik	Mountain Time - west Northwest Territories
+CA	+5946-12014	America/Dawson_Creek	Mountain Standard Time - Dawson Creek & Fort Saint John, British Columbia
+CA	+4916-12307	America/Vancouver	Pacific Time - west British Columbia
+CA	+6043-13503	America/Whitehorse	Pacific Time - south Yukon
+CA	+6404-13925	America/Dawson	Pacific Time - north Yukon
+CC	-1210+09655	Indian/Cocos
+CD	-0418+01518	Africa/Kinshasa	west Dem. Rep. of Congo
+CD	-1140+02728	Africa/Lubumbashi	east Dem. Rep. of Congo
+CF	+0422+01835	Africa/Bangui
+CG	-0416+01517	Africa/Brazzaville
+CH	+4723+00832	Europe/Zurich
+CI	+0519-00402	Africa/Abidjan
+CK	-2114-15946	Pacific/Rarotonga
+CL	-3327-07040	America/Santiago	most locations
+CL	-2709-10926	Pacific/Easter	Easter Island & Sala y Gomez
+CM	+0403+00942	Africa/Douala
+CN	+3114+12128	Asia/Shanghai	east China - Beijing, Guangdong, Shanghai, etc.
+CN	+4545+12641	Asia/Harbin	Heilongjiang (except Mohe), Jilin
+CN	+2934+10635	Asia/Chongqing	central China - Sichuan, Yunnan, Guangxi, Shaanxi, Guizhou, etc.
+CN	+4348+08735	Asia/Urumqi	most of Tibet & Xinjiang
+CN	+3929+07559	Asia/Kashgar	west Tibet & Xinjiang
+CO	+0436-07405	America/Bogota
+CR	+0956-08405	America/Costa_Rica
+CU	+2308-08222	America/Havana
+CV	+1455-02331	Atlantic/Cape_Verde
+CX	-1025+10543	Indian/Christmas
+CY	+3510+03322	Asia/Nicosia
+CZ	+5005+01426	Europe/Prague
+DE	+5230+01322	Europe/Berlin
+DJ	+1136+04309	Africa/Djibouti
+DK	+5540+01235	Europe/Copenhagen
+DM	+1518-06124	America/Dominica
+DO	+1828-06954	America/Santo_Domingo
+DZ	+3647+00303	Africa/Algiers
+EC	-0210-07950	America/Guayaquil	mainland
+EC	-0054-08936	Pacific/Galapagos	Galapagos Islands
+EE	+5925+02445	Europe/Tallinn
+EG	+3003+03115	Africa/Cairo
+EH	+2709-01312	Africa/El_Aaiun
+ER	+1520+03853	Africa/Asmara
+ES	+4024-00341	Europe/Madrid	mainland
+ES	+3553-00519	Africa/Ceuta	Ceuta & Melilla
+ES	+2806-01524	Atlantic/Canary	Canary Islands
+ET	+0902+03842	Africa/Addis_Ababa
+FI	+6010+02458	Europe/Helsinki
+FJ	-1808+17825	Pacific/Fiji
+FK	-5142-05751	Atlantic/Stanley
+FM	+0725+15147	Pacific/Truk	Truk (Chuuk) and Yap
+FM	+0658+15813	Pacific/Ponape	Ponape (Pohnpei)
+FM	+0519+16259	Pacific/Kosrae	Kosrae
+FO	+6201-00646	Atlantic/Faroe
+FR	+4852+00220	Europe/Paris
+GA	+0023+00927	Africa/Libreville
+GB	+512830-0001845	Europe/London
+GD	+1203-06145	America/Grenada
+GE	+4143+04449	Asia/Tbilisi
+GF	+0456-05220	America/Cayenne
+GG	+4927-00232	Europe/Guernsey
+GH	+0533-00013	Africa/Accra
+GI	+3608-00521	Europe/Gibraltar
+GL	+6411-05144	America/Godthab	most locations
+GL	+7646-01840	America/Danmarkshavn	east coast, north of Scoresbysund
+GL	+7029-02158	America/Scoresbysund	Scoresbysund / Ittoqqortoormiit
+GL	+7634-06847	America/Thule	Thule / Pituffik
+GM	+1328-01639	Africa/Banjul
+GN	+0931-01343	Africa/Conakry
+GP	+1614-06132	America/Guadeloupe
+GQ	+0345+00847	Africa/Malabo
+GR	+3758+02343	Europe/Athens
+GS	-5416-03632	Atlantic/South_Georgia
+GT	+1438-09031	America/Guatemala
+GU	+1328+14445	Pacific/Guam
+GW	+1151-01535	Africa/Bissau
+GY	+0648-05810	America/Guyana
+HK	+2217+11409	Asia/Hong_Kong
+HN	+1406-08713	America/Tegucigalpa
+HR	+4548+01558	Europe/Zagreb
+HT	+1832-07220	America/Port-au-Prince
+HU	+4730+01905	Europe/Budapest
+ID	-0610+10648	Asia/Jakarta	Java & Sumatra
+ID	-0002+10920	Asia/Pontianak	west & central Borneo
+ID	-0507+11924	Asia/Makassar	east & south Borneo, Celebes, Bali, Nusa Tengarra, west Timor
+ID	-0232+14042	Asia/Jayapura	Irian Jaya & the Moluccas
+IE	+5320-00615	Europe/Dublin
+IL	+3146+03514	Asia/Jerusalem
+IM	+5409-00428	Europe/Isle_of_Man
+IN	+2232+08822	Asia/Calcutta
+IO	-0720+07225	Indian/Chagos
+IQ	+3321+04425	Asia/Baghdad
+IR	+3540+05126	Asia/Tehran
+IS	+6409-02151	Atlantic/Reykjavik
+IT	+4154+01229	Europe/Rome
+JE	+4912-00207	Europe/Jersey
+JM	+1800-07648	America/Jamaica
+JO	+3157+03556	Asia/Amman
+JP	+353916+1394441	Asia/Tokyo
+KE	-0117+03649	Africa/Nairobi
+KG	+4254+07436	Asia/Bishkek
+KH	+1133+10455	Asia/Phnom_Penh
+KI	+0125+17300	Pacific/Tarawa	Gilbert Islands
+KI	-0308-17105	Pacific/Enderbury	Phoenix Islands
+KI	+0152-15720	Pacific/Kiritimati	Line Islands
+KM	-1141+04316	Indian/Comoro
+KN	+1718-06243	America/St_Kitts
+KP	+3901+12545	Asia/Pyongyang
+KR	+3733+12658	Asia/Seoul
+KW	+2920+04759	Asia/Kuwait
+KY	+1918-08123	America/Cayman
+KZ	+4315+07657	Asia/Almaty	most locations
+KZ	+4448+06528	Asia/Qyzylorda	Qyzylorda (Kyzylorda, Kzyl-Orda)
+KZ	+5017+05710	Asia/Aqtobe	Aqtobe (Aktobe)
+KZ	+4431+05016	Asia/Aqtau	Atyrau (Atirau, Gur'yev), Mangghystau (Mankistau)
+KZ	+5113+05121	Asia/Oral	West Kazakhstan
+LA	+1758+10236	Asia/Vientiane
+LB	+3353+03530	Asia/Beirut
+LC	+1401-06100	America/St_Lucia
+LI	+4709+00931	Europe/Vaduz
+LK	+0656+07951	Asia/Colombo
+LR	+0618-01047	Africa/Monrovia
+LS	-2928+02730	Africa/Maseru
+LT	+5441+02519	Europe/Vilnius
+LU	+4936+00609	Europe/Luxembourg
+LV	+5657+02406	Europe/Riga
+LY	+3254+01311	Africa/Tripoli
+MA	+3339-00735	Africa/Casablanca
+MC	+4342+00723	Europe/Monaco
+MD	+4700+02850	Europe/Chisinau
+ME	+4226+01916	Europe/Podgorica
+MG	-1855+04731	Indian/Antananarivo
+MH	+0709+17112	Pacific/Majuro	most locations
+MH	+0905+16720	Pacific/Kwajalein	Kwajalein
+MK	+4159+02126	Europe/Skopje
+ML	+1239-00800	Africa/Bamako
+MM	+1647+09610	Asia/Rangoon
+MN	+4755+10653	Asia/Ulaanbaatar	most locations
+MN	+4801+09139	Asia/Hovd	Bayan-Olgiy, Govi-Altai, Hovd, Uvs, Zavkhan
+MN	+4804+11430	Asia/Choibalsan	Dornod, Sukhbaatar
+MO	+2214+11335	Asia/Macau
+MP	+1512+14545	Pacific/Saipan
+MQ	+1436-06105	America/Martinique
+MR	+1806-01557	Africa/Nouakchott
+MS	+1643-06213	America/Montserrat
+MT	+3554+01431	Europe/Malta
+MU	-2010+05730	Indian/Mauritius
+MV	+0410+07330	Indian/Maldives
+MW	-1547+03500	Africa/Blantyre
+MX	+1924-09909	America/Mexico_City	Central Time - most locations
+MX	+2105-08646	America/Cancun	Central Time - Quintana Roo
+MX	+2058-08937	America/Merida	Central Time - Campeche, Yucatan
+MX	+2540-10019	America/Monterrey	Central Time - Coahuila, Durango, Nuevo Leon, Tamaulipas
+MX	+2313-10625	America/Mazatlan	Mountain Time - S Baja, Nayarit, Sinaloa
+MX	+2838-10605	America/Chihuahua	Mountain Time - Chihuahua
+MX	+2904-11058	America/Hermosillo	Mountain Standard Time - Sonora
+MX	+3232-11701	America/Tijuana	Pacific Time
+MY	+0310+10142	Asia/Kuala_Lumpur	peninsular Malaysia
+MY	+0133+11020	Asia/Kuching	Sabah & Sarawak
+MZ	-2558+03235	Africa/Maputo
+NA	-2234+01706	Africa/Windhoek
+NC	-2216+16530	Pacific/Noumea
+NE	+1331+00207	Africa/Niamey
+NF	-2903+16758	Pacific/Norfolk
+NG	+0627+00324	Africa/Lagos
+NI	+1209-08617	America/Managua
+NL	+5222+00454	Europe/Amsterdam
+NO	+5955+01045	Europe/Oslo
+NP	+2743+08519	Asia/Katmandu
+NR	-0031+16655	Pacific/Nauru
+NU	-1901+16955	Pacific/Niue
+NZ	-3652+17446	Pacific/Auckland	most locations
+NZ	-4357-17633	Pacific/Chatham	Chatham Islands
+OM	+2336+05835	Asia/Muscat
+PA	+0858-07932	America/Panama
+PE	-1203-07703	America/Lima
+PF	-1732-14934	Pacific/Tahiti	Society Islands
+PF	-0900-13930	Pacific/Marquesas	Marquesas Islands
+PF	-2308-13457	Pacific/Gambier	Gambier Islands
+PG	-0930+14710	Pacific/Port_Moresby
+PH	+1435+12100	Asia/Manila
+PK	+2452+06703	Asia/Karachi
+PL	+5215+02100	Europe/Warsaw
+PM	+4703-05620	America/Miquelon
+PN	-2504-13005	Pacific/Pitcairn
+PR	+182806-0660622	America/Puerto_Rico
+PS	+3130+03428	Asia/Gaza
+PT	+3843-00908	Europe/Lisbon	mainland
+PT	+3238-01654	Atlantic/Madeira	Madeira Islands
+PT	+3744-02540	Atlantic/Azores	Azores
+PW	+0720+13429	Pacific/Palau
+PY	-2516-05740	America/Asuncion
+QA	+2517+05132	Asia/Qatar
+RE	-2052+05528	Indian/Reunion
+RO	+4426+02606	Europe/Bucharest
+RS	+4450+02030	Europe/Belgrade
+RU	+5443+02030	Europe/Kaliningrad	Moscow-01 - Kaliningrad
+RU	+5545+03735	Europe/Moscow	Moscow+00 - west Russia
+RU	+4844+04425	Europe/Volgograd	Moscow+00 - Caspian Sea
+RU	+5312+05009	Europe/Samara	Moscow+01 - Samara, Udmurtia
+RU	+5651+06036	Asia/Yekaterinburg	Moscow+02 - Urals
+RU	+5500+07324	Asia/Omsk	Moscow+03 - west Siberia
+RU	+5502+08255	Asia/Novosibirsk	Moscow+03 - Novosibirsk
+RU	+5601+09250	Asia/Krasnoyarsk	Moscow+04 - Yenisei River
+RU	+5216+10420	Asia/Irkutsk	Moscow+05 - Lake Baikal
+RU	+6200+12940	Asia/Yakutsk	Moscow+06 - Lena River
+RU	+4310+13156	Asia/Vladivostok	Moscow+07 - Amur River
+RU	+4658+14242	Asia/Sakhalin	Moscow+07 - Sakhalin Island
+RU	+5934+15048	Asia/Magadan	Moscow+08 - Magadan
+RU	+5301+15839	Asia/Kamchatka	Moscow+09 - Kamchatka
+RU	+6445+17729	Asia/Anadyr	Moscow+10 - Bering Sea
+RW	-0157+03004	Africa/Kigali
+SA	+2438+04643	Asia/Riyadh
+SB	-0932+16012	Pacific/Guadalcanal
+SC	-0440+05528	Indian/Mahe
+SD	+1536+03232	Africa/Khartoum
+SE	+5920+01803	Europe/Stockholm
+SG	+0117+10351	Asia/Singapore
+SH	-1555-00542	Atlantic/St_Helena
+SI	+4603+01431	Europe/Ljubljana
+SJ	+7800+01600	Arctic/Longyearbyen	Svalbard
+SJ	+7059-00805	Atlantic/Jan_Mayen	Jan Mayen
+SK	+4809+01707	Europe/Bratislava
+SL	+0830-01315	Africa/Freetown
+SM	+4355+01228	Europe/San_Marino
+SN	+1440-01726	Africa/Dakar
+SO	+0204+04522	Africa/Mogadishu
+SR	+0550-05510	America/Paramaribo
+ST	+0020+00644	Africa/Sao_Tome
+SV	+1342-08912	America/El_Salvador
+SY	+3330+03618	Asia/Damascus
+SZ	-2618+03106	Africa/Mbabane
+TC	+2128-07108	America/Grand_Turk
+TD	+1207+01503	Africa/Ndjamena
+TF	-492110+0701303	Indian/Kerguelen
+TG	+0608+00113	Africa/Lome
+TH	+1345+10031	Asia/Bangkok
+TJ	+3835+06848	Asia/Dushanbe
+TK	-0922-17114	Pacific/Fakaofo
+TL	-0833+12535	Asia/Dili
+TM	+3757+05823	Asia/Ashgabat
+TN	+3648+01011	Africa/Tunis
+TO	-2110+17510	Pacific/Tongatapu
+TR	+4101+02858	Europe/Istanbul
+TT	+1039-06131	America/Port_of_Spain
+TV	-0831+17913	Pacific/Funafuti
+TW	+2503+12130	Asia/Taipei
+TZ	-0648+03917	Africa/Dar_es_Salaam
+UA	+5026+03031	Europe/Kiev	most locations
+UA	+4837+02218	Europe/Uzhgorod	Ruthenia
+UA	+4750+03510	Europe/Zaporozhye	Zaporozh'ye, E Lugansk
+UA	+4457+03406	Europe/Simferopol	central Crimea
+UG	+0019+03225	Africa/Kampala
+UM	+1700-16830	Pacific/Johnston	Johnston Atoll
+UM	+2813-17722	Pacific/Midway	Midway Islands
+UM	+1917+16637	Pacific/Wake	Wake Island
+US	+404251-0740023	America/New_York	Eastern Time
+US	+421953-0830245	America/Detroit	Eastern Time - Michigan - most locations
+US	+381515-0854534	America/Kentucky/Louisville	Eastern Time - Kentucky - Louisville area
+US	+364947-0845057	America/Kentucky/Monticello	Eastern Time - Kentucky - Wayne County
+US	+394606-0860929	America/Indiana/Indianapolis	Eastern Time - Indiana - most locations
+US	+411745-0863730	America/Indiana/Knox	Eastern Time - Indiana - Starke County
+US	+410305-0863611	America/Indiana/Winamac	Eastern Time - Indiana - Pulaski County
+US	+382232-0862041	America/Indiana/Marengo	Eastern Time - Indiana - Crawford County
+US	+384452-0850402	America/Indiana/Vevay	Eastern Time - Indiana - Switzerland County
+US	+415100-0873900	America/Chicago	Central Time
+US	+384038-0873143	America/Indiana/Vincennes	Central Time - Indiana - Daviess, Dubois, Knox, Martin & Perry Counties
+US	+382931-0871643	America/Indiana/Petersburg	Central Time - Indiana - Pike County
+US	+450628-0873651	America/Menominee	Central Time - Michigan - Dickinson, Gogebic, Iron & Menominee Counties
+US	+470659-1011757	America/North_Dakota/Center	Central Time - North Dakota - Oliver County
+US	+465042-1012439	America/North_Dakota/New_Salem	Central Time - North Dakota - Morton County (except Mandan area)
+US	+394421-1045903	America/Denver	Mountain Time
+US	+433649-1161209	America/Boise	Mountain Time - south Idaho & east Oregon
+US	+364708-1084111	America/Shiprock	Mountain Time - Navajo
+US	+332654-1120424	America/Phoenix	Mountain Standard Time - Arizona
+US	+340308-1181434	America/Los_Angeles	Pacific Time
+US	+611305-1495401	America/Anchorage	Alaska Time
+US	+581807-1342511	America/Juneau	Alaska Time - Alaska panhandle
+US	+593249-1394338	America/Yakutat	Alaska Time - Alaska panhandle neck
+US	+643004-1652423	America/Nome	Alaska Time - west Alaska
+US	+515248-1763929	America/Adak	Aleutian Islands
+US	+211825-1575130	Pacific/Honolulu	Hawaii
+UY	-3453-05611	America/Montevideo
+UZ	+3940+06648	Asia/Samarkand	west Uzbekistan
+UZ	+4120+06918	Asia/Tashkent	east Uzbekistan
+VA	+4154+01227	Europe/Vatican
+VC	+1309-06114	America/St_Vincent
+VE	+1030-06656	America/Caracas
+VG	+1827-06437	America/Tortola
+VI	+1821-06456	America/St_Thomas
+VN	+1045+10640	Asia/Saigon
+VU	-1740+16825	Pacific/Efate
+WF	-1318-17610	Pacific/Wallis
+WS	-1350-17144	Pacific/Apia
+YE	+1245+04512	Asia/Aden
+YT	-1247+04514	Indian/Mayotte
+ZA	-2615+02800	Africa/Johannesburg
+ZM	-1525+02817	Africa/Lusaka
+ZW	-1750+03103	Africa/Harare
Index: libkcal/libical/tzdata/southamerica
===================================================================
--- libkcal/libical/tzdata/southamerica	(.../tags/KDE/3.5.6/kdepim)	(wersja 0)
+++ libkcal/libical/tzdata/southamerica	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -0,0 +1,1104 @@
+# @(#)southamerica	8.11
+# <pre>
+
+# This data is by no means authoritative; if you think you know better,
+# go ahead and edit the file (and please send any changes to
+# tz@elsie.nci.nih.gov for general use in the future).
+
+# From Paul Eggert (2006-03-22):
+# A good source for time zone historical data outside the U.S. is
+# Thomas G. Shanks and Rique Pottenger, The International Atlas (6th edition),
+# San Diego: ACS Publications, Inc. (2003).
+#
+# Gwillim Law writes that a good source
+# for recent time zone data is the International Air Transport
+# Association's Standard Schedules Information Manual (IATA SSIM),
+# published semiannually.  Law sent in several helpful summaries
+# of the IATA's data after 1990.
+#
+# Except where otherwise noted, Shanks & Pottenger is the source for
+# entries through 1990, and IATA SSIM is the source for entries afterwards.
+#
+# Earlier editions of these tables used the North American style (e.g. ARST and
+# ARDT for Argentine Standard and Daylight Time), but the following quote
+# suggests that it's better to use European style (e.g. ART and ARST).
+#	I suggest the use of _Summer time_ instead of the more cumbersome
+#	_daylight-saving time_.  _Summer time_ seems to be in general use
+#	in Europe and South America.
+#	-- E O Cutler, _New York Times_ (1937-02-14), quoted in
+#	H L Mencken, _The American Language: Supplement I_ (1960), p 466
+#
+# Earlier editions of these tables also used the North American style
+# for time zones in Brazil, but this was incorrect, as Brazilians say
+# "summer time".  Reinaldo Goulart, a Sao Paulo businessman active in
+# the railroad sector, writes (1999-07-06):
+#	The subject of time zones is currently a matter of discussion/debate in
+#	Brazil.  Let's say that "the Brasilia time" is considered the
+#	"official time" because Brasilia is the capital city.
+#	The other three time zones are called "Brasilia time "minus one" or
+#	"plus one" or "plus two".  As far as I know there is no such
+#	name/designation as "Eastern Time" or "Central Time".
+# So I invented the following (English-language) abbreviations for now.
+# Corrections are welcome!
+#		std	dst
+#	-2:00	FNT	FNST	Fernando de Noronha
+#	-3:00	BRT	BRST	Brasilia
+#	-4:00	AMT	AMST	Amazon
+#	-5:00	ACT	ACST	Acre
+
+###############################################################################
+
+###############################################################################
+
+# Argentina
+
+# From Bob Devine (1988-01-28):
+# Argentina: first Sunday in October to first Sunday in April since 1976.
+# Double Summer time from 1969 to 1974.  Switches at midnight.
+
+# From U. S. Naval Observatory (1988-01-199):
+# ARGENTINA           3 H BEHIND   UTC
+
+# From Hernan G. Otero (1995-06-26):
+# I am sending modifications to the Argentine time zone table...
+# AR was chosen because they are the ISO letters that represent Argentina.
+
+# Rule	NAME	FROM	TO	TYPE	IN	ON	AT	SAVE	LETTER/S
+Rule	Arg	1930	only	-	Dec	 1	0:00	1:00	S
+Rule	Arg	1931	only	-	Apr	 1	0:00	0	-
+Rule	Arg	1931	only	-	Oct	15	0:00	1:00	S
+Rule	Arg	1932	1940	-	Mar	 1	0:00	0	-
+Rule	Arg	1932	1939	-	Nov	 1	0:00	1:00	S
+Rule	Arg	1940	only	-	Jul	 1	0:00	1:00	S
+Rule	Arg	1941	only	-	Jun	15	0:00	0	-
+Rule	Arg	1941	only	-	Oct	15	0:00	1:00	S
+Rule	Arg	1943	only	-	Aug	 1	0:00	0	-
+Rule	Arg	1943	only	-	Oct	15	0:00	1:00	S
+Rule	Arg	1946	only	-	Mar	 1	0:00	0	-
+Rule	Arg	1946	only	-	Oct	 1	0:00	1:00	S
+Rule	Arg	1963	only	-	Oct	 1	0:00	0	-
+Rule	Arg	1963	only	-	Dec	15	0:00	1:00	S
+Rule	Arg	1964	1966	-	Mar	 1	0:00	0	-
+Rule	Arg	1964	1966	-	Oct	15	0:00	1:00	S
+Rule	Arg	1967	only	-	Apr	 2	0:00	0	-
+Rule	Arg	1967	1968	-	Oct	Sun>=1	0:00	1:00	S
+Rule	Arg	1968	1969	-	Apr	Sun>=1	0:00	0	-
+Rule	Arg	1974	only	-	Jan	23	0:00	1:00	S
+Rule	Arg	1974	only	-	May	 1	0:00	0	-
+Rule	Arg	1988	only	-	Dec	 1	0:00	1:00	S
+#
+# From Hernan G. Otero (1995-06-26):
+# These corrections were contributed by InterSoft Argentina S.A.,
+# obtaining the data from the:
+# Talleres de Hidrografia Naval Argentina
+# (Argentine Naval Hydrography Institute)
+Rule	Arg	1989	1993	-	Mar	Sun>=1	0:00	0	-
+Rule	Arg	1989	1992	-	Oct	Sun>=15	0:00	1:00	S
+#
+# From Hernan G. Otero (1995-06-26):
+# From this moment on, the law that mandated the daylight saving
+# time corrections was derogated and no more modifications
+# to the time zones (for daylight saving) are now made.
+#
+# From Rives McDow (2000-01-10):
+# On October 3, 1999, 0:00 local, Argentina implemented daylight savings time,
+# which did not result in the switch of a time zone, as they stayed 9 hours
+# from the International Date Line.
+Rule	Arg	1999	only	-	Oct	Sun>=1	0:00	1:00	S
+Rule	Arg	2000	only	-	Mar	Sun>=1	0:00	0	-
+#
+# From Peter Gradelski via Steffen Thorsen (2000-03-01):
+# We just checked with our Sao Paulo office and they say the government of
+# Argentina decided not to become one of the countries that go on or off DST.
+# So Buenos Aires should be -3 hours from GMT at all times.
+#
+# From Fabian L. Arce Jofre (2000-04-04):
+# The law that claimed DST for Argentina was derogated by President Fernando
+# de la Rua on March 2, 2000, because it would make people spend more energy
+# in the winter time, rather than less.  The change took effect on March 3.
+#
+# From Mariano Absatz (2001-06-06):
+# one of the major newspapers here in Argentina said that the 1999
+# Timezone Law (which never was effectively applied) will (would?) be
+# in effect.... The article is at
+# http://ar.clarin.com/diario/2001-06-06/e-01701.htm
+# ... The Law itself is "Ley No 25155", sanctioned on 1999-08-25, enacted
+# 1999-09-17, and published 1999-09-21.  The official publication is at:
+# http://www.boletin.jus.gov.ar/BON/Primera/1999/09-Septiembre/21/PDF/BO21-09-99LEG.PDF
+# Regretfully, you have to subscribe (and pay) for the on-line version....
+#
+# (2001-06-12):
+# the timezone for Argentina will not change next Sunday.
+# Apparently it will do so on Sunday 24th....
+# http://ar.clarin.com/diario/2001-06-12/s-03501.htm
+#
+# (2001-06-25):
+# Last Friday (yes, the last working day before the date of the change), the
+# Senate annulled the 1999 law that introduced the changes later postponed.
+# http://www.clarin.com.ar/diario/2001-06-22/s-03601.htm
+# It remains the vote of the Deputies..., but it will be the same....
+# This kind of things had always been done this way in Argentina.
+# We are still -03:00 all year round in all of the country.
+#
+# From Mariano Absatz (2004-05-21):
+# Today it was officially published that the Province of Mendoza is changing
+# its timezone this winter... starting tomorrow night....
+# http://www.gobernac.mendoza.gov.ar/boletin/pdf/20040521-27158-normas.pdf
+# From Paul Eggert (2004-05-24):
+# It's Law No. 7,210.  This change is due to a public power emergency, so for
+# now we'll assume it's for this year only.
+#
+# From Paul Eggert (2006-03-22):
+# <a href="http://www.spicasc.net/horvera.html">
+# Hora de verano para la Republica Argentina (2003-06-08)
+# </a> says that standard time in Argentina from 1894-10-31
+# to 1920-05-01 was -4:16:48.25.  Go with this more-precise value
+# over Shanks & Pottenger.
+#
+# From Mariano Absatz (2004-06-05):
+# These media articles from a major newspaper mostly cover the current state:
+# http://www.lanacion.com.ar/04/05/27/de_604825.asp
+# http://www.lanacion.com.ar/04/05/28/de_605203.asp
+#
+# The following eight (8) provinces pulled clocks back to UTC-04:00 at
+# midnight Monday May 31st. (that is, the night between 05/31 and 06/01).
+# Apparently, all nine provinces would go back to UTC-03:00 at the same
+# time in October 17th.
+#
+# Catamarca, Chubut, La Rioja, San Juan, San Luis, Santa Cruz,
+# Tierra del Fuego, Tucuman.
+#
+# From Mariano Absatz (2004-06-14):
+# ... this weekend, the Province of Tucuman decided it'd go back to UTC-03:00
+# yesterday midnight (that is, at 24:00 Saturday 12th), since the people's
+# annoyance with the change is much higher than the power savings obtained....
+#
+# From Gwillim Law (2004-06-14):
+# http://www.lanacion.com.ar/04/06/10/de_609078.asp ...
+#     "The time change in Tierra del Fuego was a conflicted decision from
+#   the start.  The government had decreed that the measure would take
+#   effect on June 1, but a normative error forced the new time to begin
+#   three days earlier, from a Saturday to a Sunday....
+# Our understanding was that the change was originally scheduled to take place
+# on June 1 at 00:00 in Chubut, Santa Cruz, Tierra del Fuego (and some other
+# provinces).  Sunday was May 30, only two days earlier.  So the article
+# contains a contradiction.  I would give more credence to the Saturday/Sunday
+# date than the "three days earlier" phrase, and conclude that Tierra del
+# Fuego set its clocks back at 2004-05-30 00:00.
+#
+# From Steffen Thorsen (2004-10-05):
+# The previous law 7210 which changed the province of Mendoza's time zone
+# back in May have been modified slightly in a new law 7277, which set the
+# new end date to 2004-09-26 (original date was 2004-10-17).
+# http://www.gobernac.mendoza.gov.ar/boletin/pdf/20040924-27244-normas.pdf
+#
+# From Mariano Absatz (2004-10-05):
+# San Juan changed from UTC-03:00 to UTC-04:00 at midnight between
+# Sunday, May 30th and Monday, May 31st.  It changed back to UTC-03:00
+# at midnight between Saturday, July 24th and Sunday, July 25th....
+# http://www.sanjuan.gov.ar/prensa/archivo/000329.html
+# http://www.sanjuan.gov.ar/prensa/archivo/000426.html
+# http://www.sanjuan.gov.ar/prensa/archivo/000441.html
+
+# Unless otherwise specified, data are from Shanks & Pottenger through 1992,
+# from the IATA otherwise.  As noted below, Shanks & Pottenger say that
+# America/Cordoba split into 6 subregions during 1991/1992, but we
+# haven't verified this yet so for now we'll keep it a single region.
+#
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+#
+# Buenos Aires (BA), Capital Federal (CF),
+Zone America/Argentina/Buenos_Aires -3:53:48 - LMT 1894 Oct 31
+			-4:16:48 -	CMT	1920 May # Cordoba Mean Time
+			-4:00	-	ART	1930 Dec
+			-4:00	Arg	AR%sT	1969 Oct  5
+			-3:00	Arg	AR%sT	1999 Oct  3
+			-4:00	Arg	AR%sT	2000 Mar  3
+			-3:00	-	ART
+#
+# Santa Fe (SF), Entre Rios (ER), Corrientes (CN), Misiones (MN), Chaco (CC),
+# Formosa (FM), Salta (SA), Santiago del Estero (SE), Cordoba (CB),
+# San Luis (SL), La Pampa (LP), Neuquen (NQ), Rio Negro (RN)
+#
+# Shanks & Pottenger also make the following claims, which we haven't verified:
+# - Formosa switched to -3:00 on 1991-01-07.
+# - Misiones switched to -3:00 on 1990-12-29.
+# - Chaco switched to -3:00 on 1991-01-04.
+# - San Luis switched to -4:00 on 1990-03-14, then to -3:00 on 1990-10-15,
+#   then to -4:00 on 1991-03-01, then to -3:00 on 1991-06-01.
+# - Santiago del Estero switched to -4:00 on 1991-04-01,
+#   then to -3:00 on 1991-04-26.
+#
+Zone America/Argentina/Cordoba -4:16:48 - LMT	1894 Oct 31
+			-4:16:48 -	CMT	1920 May
+			-4:00	-	ART	1930 Dec
+			-4:00	Arg	AR%sT	1969 Oct  5
+			-3:00	Arg	AR%sT	1991 Mar  3
+			-4:00	-	WART	1991 Oct 20
+			-3:00	Arg	AR%sT	1999 Oct  3
+			-4:00	Arg	AR%sT	2000 Mar  3
+			-3:00	-	ART
+#
+# Tucuman (TM)
+Zone America/Argentina/Tucuman -4:20:52 - LMT	1894 Oct 31
+			-4:16:48 -	CMT	1920 May
+			-4:00	-	ART	1930 Dec
+			-4:00	Arg	AR%sT	1969 Oct  5
+			-3:00	Arg	AR%sT	1991 Mar  3
+			-4:00	-	WART	1991 Oct 20
+			-3:00	Arg	AR%sT	1999 Oct  3
+			-4:00	Arg	AR%sT	2000 Mar  3
+			-3:00	-	ART	2004 Jun  1
+			-4:00	-	WART	2004 Jun 13
+			-3:00	-	ART
+#
+# La Rioja (LR)
+Zone America/Argentina/La_Rioja -4:27:24 - LMT	1894 Oct 31
+			-4:16:48 -	CMT	1920 May
+			-4:00	-	ART	1930 Dec
+			-4:00	Arg	AR%sT	1969 Oct  5
+			-3:00	Arg	AR%sT	1991 Mar  1
+			-4:00	-	WART	1991 May  7
+			-3:00	Arg	AR%sT	1999 Oct  3
+			-4:00	Arg	AR%sT	2000 Mar  3
+			-3:00	-	ART	2004 Jun  1
+			-4:00	-	WART	2004 Jun 20
+			-3:00	-	ART
+#
+# San Juan (SJ)
+Zone America/Argentina/San_Juan -4:34:04 - LMT	1894 Oct 31
+			-4:16:48 -	CMT	1920 May
+			-4:00	-	ART	1930 Dec
+			-4:00	Arg	AR%sT	1969 Oct  5
+			-3:00	Arg	AR%sT	1991 Mar  1
+			-4:00	-	WART	1991 May  7
+			-3:00	Arg	AR%sT	1999 Oct  3
+			-4:00	Arg	AR%sT	2000 Mar  3
+			-3:00	-	ART	2004 May 31
+			-4:00	-	WART	2004 Jul 25
+			-3:00	-	ART
+#
+# Jujuy (JY)
+Zone America/Argentina/Jujuy -4:21:12 -	LMT	1894 Oct 31
+			-4:16:48 -	CMT	1920 May
+			-4:00	-	ART	1930 Dec
+			-4:00	Arg	AR%sT	1969 Oct  5
+			-3:00	Arg	AR%sT	1990 Mar  4
+			-4:00	-	WART	1990 Oct 28
+			-4:00	1:00	WARST	1991 Mar 17
+			-4:00	-	WART	1991 Oct  6
+			-3:00	1:00	ARST	1992
+			-3:00	Arg	AR%sT	1999 Oct  3
+			-4:00	Arg	AR%sT	2000 Mar  3
+			-3:00	-	ART
+#
+# Catamarca (CT), Chubut (CH)
+Zone America/Argentina/Catamarca -4:23:08 - LMT	1894 Oct 31
+			-4:16:48 -	CMT	1920 May
+			-4:00	-	ART	1930 Dec
+			-4:00	Arg	AR%sT	1969 Oct  5
+			-3:00	Arg	AR%sT	1991 Mar  3
+			-4:00	-	WART	1991 Oct 20
+			-3:00	Arg	AR%sT	1999 Oct  3
+			-4:00	Arg	AR%sT	2000 Mar  3
+			-3:00	-	ART	2004 Jun  1
+			-4:00	-	WART	2004 Jun 20
+			-3:00	-	ART
+#
+# Mendoza (MZ)
+Zone America/Argentina/Mendoza -4:35:16 - LMT	1894 Oct 31
+			-4:16:48 -	CMT	1920 May
+			-4:00	-	ART	1930 Dec
+			-4:00	Arg	AR%sT	1969 Oct  5
+			-3:00	Arg	AR%sT	1990 Mar  4
+			-4:00	-	WART	1990 Oct 15
+			-4:00	1:00	WARST	1991 Mar  1
+			-4:00	-	WART	1991 Oct 15
+			-4:00	1:00	WARST	1992 Mar  1
+			-4:00	-	WART	1992 Oct 18
+			-3:00	Arg	AR%sT	1999 Oct  3
+			-4:00	Arg	AR%sT	2000 Mar  3
+			-3:00	-	ART	2004 May 23
+			-4:00	-	WART	2004 Sep 26
+			-3:00	-	ART
+#
+# Santa Cruz (SC)
+Zone America/Argentina/Rio_Gallegos -4:36:52 - LMT 1894 Oct 31
+			-4:16:48 -	CMT	1920 May # Cordoba Mean Time
+			-4:00	-	ART	1930 Dec
+			-4:00	Arg	AR%sT	1969 Oct  5
+			-3:00	Arg	AR%sT	1999 Oct  3
+			-4:00	Arg	AR%sT	2000 Mar  3
+			-3:00	-	ART	2004 Jun  1
+			-4:00	-	WART	2004 Jun 20
+			-3:00	-	ART
+#
+# Tierra del Fuego, Antartida e Islas del Atlantico Sur (TF)
+Zone America/Argentina/Ushuaia -4:33:12 - LMT 1894 Oct 31
+			-4:16:48 -	CMT	1920 May # Cordoba Mean Time
+			-4:00	-	ART	1930 Dec
+			-4:00	Arg	AR%sT	1969 Oct  5
+			-3:00	Arg	AR%sT	1999 Oct  3
+			-4:00	Arg	AR%sT	2000 Mar  3
+			-3:00	-	ART	2004 May 30
+			-4:00	-	WART	2004 Jun 20
+			-3:00	-	ART
+
+# Aruba
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone	America/Aruba	-4:40:24 -	LMT	1912 Feb 12	# Oranjestad
+			-4:30	-	ANT	1965 # Netherlands Antilles Time
+			-4:00	-	AST
+
+# Bolivia
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone	America/La_Paz	-4:32:36 -	LMT	1890
+			-4:32:36 -	CMT	1931 Oct 15 # Calamarca MT
+			-4:32:36 1:00	BOST	1932 Mar 21 # Bolivia ST
+			-4:00	-	BOT	# Bolivia Time
+
+# Brazil
+
+# From Paul Eggert (1993-11-18):
+# The mayor of Rio recently attempted to change the time zone rules
+# just in his city, in order to leave more summer time for the tourist trade.
+# The rule change lasted only part of the day;
+# the federal government refused to follow the city's rules, and business
+# was in a chaos, so the mayor backed down that afternoon.
+
+# From IATA SSIM (1996-02):
+# _Only_ the following states in BR1 observe DST: Rio Grande do Sul (RS),
+# Santa Catarina (SC), Parana (PR), Sao Paulo (SP), Rio de Janeiro (RJ),
+# Espirito Santo (ES), Minas Gerais (MG), Bahia (BA), Goias (GO),
+# Distrito Federal (DF), Tocantins (TO), Sergipe [SE] and Alagoas [AL].
+# [The last three states are new to this issue of the IATA SSIM.]
+
+# From Gwillim Law (1996-10-07):
+# Geography, history (Tocantins was part of Goias until 1989), and other
+# sources of time zone information lead me to believe that AL, SE, and TO were
+# always in BR1, and so the only change was whether or not they observed DST....
+# The earliest issue of the SSIM I have is 2/91.  Each issue from then until
+# 9/95 says that DST is observed only in the ten states I quoted from 9/95,
+# along with Mato Grosso (MT) and Mato Grosso do Sul (MS), which are in BR2
+# (UTC-4)....  The other two time zones given for Brazil are BR3, which is
+# UTC-5, no DST, and applies only in the state of Acre (AC); and BR4, which is
+# UTC-2, and applies to Fernando de Noronha (formerly FN, but I believe it's
+# become part of the state of Pernambuco).  The boundary between BR1 and BR2
+# has never been clearly stated.  They've simply been called East and West.
+# However, some conclusions can be drawn from another IATA manual: the Airline
+# Coding Directory, which lists close to 400 airports in Brazil.  For each
+# airport it gives a time zone which is coded to the SSIM.  From that
+# information, I'm led to conclude that the states of Amapa (AP), Ceara (CE),
+# Maranhao (MA), Paraiba (PR), Pernambuco (PE), Piaui (PI), and Rio Grande do
+# Norte (RN), and the eastern part of Para (PA) are all in BR1 without DST.
+
+# From Marcos Tadeu (1998-09-27):
+# <a href="http://pcdsh01.on.br/verao1.html">
+# Brazilian official page
+# </a>
+
+# From Jesper Norgaard (2000-11-03):
+# [For an official list of which regions in Brazil use which time zones, see:]
+# http://pcdsh01.on.br/Fusbr.htm
+# http://pcdsh01.on.br/Fusbrhv.htm
+
+# From Celso Doria via David Madeo (2002-10-09):
+# The reason for the delay this year has to do with elections in Brazil.
+#
+# Unlike in the United States, elections in Brazil are 100% computerized and
+# the results are known almost immediately.  Yesterday, it was the first
+# round of the elections when 115 million Brazilians voted for President,
+# Governor, Senators, Federal Deputies, and State Deputies.  Nobody is
+# counting (or re-counting) votes anymore and we know there will be a second
+# round for the Presidency and also for some Governors.  The 2nd round will
+# take place on October 27th.
+#
+# The reason why the DST will only begin November 3rd is that the thousands
+# of electoral machines used cannot have their time changed, and since the
+# Constitution says the elections must begin at 8:00 AM and end at 5:00 PM,
+# the Government decided to postpone DST, instead of changing the Constitution
+# (maybe, for the next elections, it will be possible to change the clock)...
+
+# From Rodrigo Severo (2004-10-04):
+# It's just the biannual change made necessary by the much hyped, supposedly
+# modern Brazilian eletronic voting machines which, apparently, can't deal
+# with a time change between the first and the second rounds of the elections.
+
+# From Paul Eggert (2002-10-10):
+# The official decrees referenced below are mostly taken from
+# <a href="http://pcdsh01.on.br/DecHV.html">
+# Decretos sobre o Horario de Verao no Brasil
+# </a>.
+
+# Rule	NAME	FROM	TO	TYPE	IN	ON	AT	SAVE	LETTER/S
+# Decree <a href="http://pcdsh01.on.br/HV20466.htm">20,466</a> (1931-10-01)
+# Decree <a href="http://pcdsh01.on.br/HV21896.htm">21,896</a> (1932-01-10)
+Rule	Brazil	1931	only	-	Oct	 3	11:00	1:00	S
+Rule	Brazil	1932	1933	-	Apr	 1	 0:00	0	-
+Rule	Brazil	1932	only	-	Oct	 3	 0:00	1:00	S
+# Decree <a href="http://pcdsh01.on.br/HV23195.htm">23,195</a> (1933-10-10)
+# revoked DST.
+# Decree <a href="http://pcdsh01.on.br/HV27496.htm">27,496</a> (1949-11-24)
+# Decree <a href="http://pcdsh01.on.br/HV27998.htm">27,998</a> (1950-04-13)
+Rule	Brazil	1949	1952	-	Dec	 1	 0:00	1:00	S
+Rule	Brazil	1950	only	-	Apr	16	 1:00	0	-
+Rule	Brazil	1951	1952	-	Apr	 1	 0:00	0	-
+# Decree <a href="http://pcdsh01.on.br/HV32308.htm">32,308</a> (1953-02-24)
+Rule	Brazil	1953	only	-	Mar	 1	 0:00	0	-
+# Decree <a href="http://pcdsh01.on.br/HV34724.htm">34,724</a> (1953-11-30)
+# revoked DST.
+# Decree <a href="http://pcdsh01.on.br/HV52700.htm">52,700</a> (1963-10-18)
+# established DST from 1963-10-23 00:00 to 1964-02-29 00:00
+# in SP, RJ, GB, MG, ES, due to the prolongation of the drought.
+# Decree <a href="http://pcdsh01.on.br/HV53071.htm">53,071</a> (1963-12-03)
+# extended the above decree to all of the national territory on 12-09.
+Rule	Brazil	1963	only	-	Dec	 9	 0:00	1:00	S
+# Decree <a href="http://pcdsh01.on.br/HV53604.htm">53,604</a> (1964-02-25)
+# extended summer time by one day to 1964-03-01 00:00 (start of school).
+Rule	Brazil	1964	only	-	Mar	 1	 0:00	0	-
+# Decree <a href="http://pcdsh01.on.br/HV55639.htm">55,639</a> (1965-01-27)
+Rule	Brazil	1965	only	-	Jan	31	 0:00	1:00	S
+Rule	Brazil	1965	only	-	Mar	31	 0:00	0	-
+# Decree <a href="http://pcdsh01.on.br/HV57303.htm">57,303</a> (1965-11-22)
+Rule	Brazil	1965	only	-	Dec	 1	 0:00	1:00	S
+# Decree <a href="http://pcdsh01.on.br/HV57843.htm">57,843</a> (1966-02-18)
+Rule	Brazil	1966	1968	-	Mar	 1	 0:00	0	-
+Rule	Brazil	1966	1967	-	Nov	 1	 0:00	1:00	S
+# Decree <a href="http://pcdsh01.on.br/HV63429.htm">63,429</a> (1968-10-15)
+# revoked DST.
+# Decree <a href="http://pcdsh01.on.br/HV91698.htm">91,698</a> (1985-09-27)
+Rule	Brazil	1985	only	-	Nov	 2	 0:00	1:00	S
+# Decree 92,310 (1986-01-21)
+# Decree 92,463 (1986-03-13)
+Rule	Brazil	1986	only	-	Mar	15	 0:00	0	-
+# Decree 93,316 (1986-10-01)
+Rule	Brazil	1986	only	-	Oct	25	 0:00	1:00	S
+Rule	Brazil	1987	only	-	Feb	14	 0:00	0	-
+# Decree <a href="http://pcdsh01.on.br/HV94922.htm">94,922</a> (1987-09-22)
+Rule	Brazil	1987	only	-	Oct	25	 0:00	1:00	S
+Rule	Brazil	1988	only	-	Feb	 7	 0:00	0	-
+# Decree <a href="http://pcdsh01.on.br/HV96676.htm">96,676</a> (1988-09-12)
+# except for the states of AC, AM, PA, RR, RO, and AP (then a territory)
+Rule	Brazil	1988	only	-	Oct	16	 0:00	1:00	S
+Rule	Brazil	1989	only	-	Jan	29	 0:00	0	-
+# Decree <a href="http://pcdsh01.on.br/HV98077.htm">98,077</a> (1989-08-21)
+# with the same exceptions
+Rule	Brazil	1989	only	-	Oct	15	 0:00	1:00	S
+Rule	Brazil	1990	only	-	Feb	11	 0:00	0	-
+# Decree <a href="http://pcdsh01.on.br/HV99530.htm">99,530</a> (1990-09-17)
+# adopted by RS, SC, PR, SP, RJ, ES, MG, GO, MS, DF.
+# Decree 99,629 (1990-10-19) adds BA, MT.
+Rule	Brazil	1990	only	-	Oct	21	 0:00	1:00	S
+Rule	Brazil	1991	only	-	Feb	17	 0:00	0	-
+# <a href="http://pcdsh01.on.br/HV1991.htm">Unnumbered decree</a> (1991-09-25)
+# adopted by RS, SC, PR, SP, RJ, ES, MG, BA, GO, MT, MS, DF.
+Rule	Brazil	1991	only	-	Oct	20	 0:00	1:00	S
+Rule	Brazil	1992	only	-	Feb	 9	 0:00	0	-
+# <a href="http://pcdsh01.on.br/HV1992.htm">Unnumbered decree</a> (1992-10-16)
+# adopted by same states.
+Rule	Brazil	1992	only	-	Oct	25	 0:00	1:00	S
+Rule	Brazil	1993	only	-	Jan	31	 0:00	0	-
+# Decree <a href="http://pcdsh01.on.br/HV942.htm">942</a> (1993-09-28)
+# adopted by same states, plus AM.
+# Decree <a href="http://pcdsh01.on.br/HV1252.htm">1,252</a> (1994-09-22;
+# web page corrected 2004-01-07) adopted by same states, minus AM.
+# Decree <a href="http://pcdsh01.on.br/HV1636.htm">1,636</a> (1995-09-14)
+# adopted by same states, plus MT and TO.
+# Decree <a href="http://pcdsh01.on.br/HV1674.htm">1,674</a> (1995-10-13)
+# adds AL, SE.
+Rule	Brazil	1993	1995	-	Oct	Sun>=11	 0:00	1:00	S
+Rule	Brazil	1994	1995	-	Feb	Sun>=15	 0:00	0	-
+Rule	Brazil	1996	only	-	Feb	11	 0:00	0	-
+# Decree <a href="http://pcdsh01.on.br/HV2000.htm">2,000</a> (1996-09-04)
+# adopted by same states, minus AL, SE.
+Rule	Brazil	1996	only	-	Oct	 6	 0:00	1:00	S
+Rule	Brazil	1997	only	-	Feb	16	 0:00	0	-
+# From Daniel C. Sobral (1998-02-12):
+# In 1997, the DS began on October 6. The stated reason was that
+# because international television networks ignored Brazil's policy on DS,
+# they bought the wrong times on satellite for coverage of Pope's visit.
+# This year, the ending date of DS was postponed to March 1
+# to help dealing with the shortages of electric power.
+#
+# Decree 2,317 (1997-09-04), adopted by same states.
+Rule	Brazil	1997	only	-	Oct	 6	 0:00	1:00	S
+# Decree <a href="http://pcdsh01.on.br/figuras/HV2495.JPG">2,495</a>
+# (1998-02-10)
+Rule	Brazil	1998	only	-	Mar	 1	 0:00	0	-
+# Decree <a href="http://pcdsh01.on.br/figuras/Hv98.jpg">2,780</a> (1998-09-11)
+# adopted by the same states as before.
+Rule	Brazil	1998	only	-	Oct	11	 0:00	1:00	S
+Rule	Brazil	1999	only	-	Feb	21	 0:00	0	-
+# Decree <a href="http://pcdsh01.on.br/figuras/HV3150.gif">3,150</a>
+# (1999-08-23) adopted by same states.
+# Decree <a href="http://pcdsh01.on.br/DecHV99.gif">3,188</a> (1999-09-30)
+# adds SE, AL, PB, PE, RN, CE, PI, MA and RR.
+Rule	Brazil	1999	only	-	Oct	 3	 0:00	1:00	S
+Rule	Brazil	2000	only	-	Feb	27	 0:00	0	-
+# Decree <a href="http://pcdsh01.on.br/DEC3592.htm">3,592</a> (2000-09-06)
+# adopted by the same states as before.
+# Decree <a href="http://pcdsh01.on.br/Dec3630.jpg">3,630</a> (2000-10-13)
+# repeals DST in PE and RR, effective 2000-10-15 00:00.
+# Decree <a href="http://pcdsh01.on.br/Dec3632.jpg">3,632</a> (2000-10-17)
+# repeals DST in SE, AL, PB, RN, CE, PI and MA, effective 2000-10-22 00:00.
+# Decree <a href="http://pcdsh01.on.br/figuras/HV3916.gif">3,916</a>
+# (2001-09-13) reestablishes DST in AL, CE, MA, PB, PE, PI, RN, SE.
+Rule	Brazil	2000	2001	-	Oct	Sun>=8	 0:00	1:00	S
+Rule	Brazil	2001	2006	-	Feb	Sun>=15	 0:00	0	-
+# Decree 4,399 (2002-10-01) repeals DST in AL, CE, MA, PB, PE, PI, RN, SE.
+# <a href="http://www.presidencia.gov.br/CCIVIL/decreto/2002/D4399.htm"></a>
+Rule	Brazil	2002	only	-	Nov	 3	 0:00	1:00	S
+# Decree 4,844 (2003-09-24; corrected 2003-09-26) repeals DST in BA, MT, TO.
+# <a href="http://www.presidencia.gov.br/CCIVIL/decreto/2003/D4844.htm"></a>
+Rule	Brazil	2003	only	-	Oct	19	 0:00	1:00	S
+# Decree 5,223 (2004-10-01) reestablishes DST in MT.
+# <a href="http://www.planalto.gov.br/ccivil_03/_Ato2004-2006/2004/Decreto/D5223.htm"></a>
+Rule	Brazil	2004	only	-	Nov	 2	 0:00	1:00	S
+# Decree <a href="http://pcdsh01.on.br/DecHV5539.gif">5,539</a> (2005-09-19),
+# adopted by the same states as before.
+Rule	Brazil	2005	only	-	Oct	16	 0:00	1:00	S
+# Decree <a href="http://www.planalto.gov.br/ccivil_03/_Ato2004-2006/2006/Decreto/D5920.htm">5,920</a>
+# (2006-10-03), adopted by the same states as before.
+Rule	Brazil	2006	max	-	Nov	Sun>=1	 0:00	1:00	S
+Rule	Brazil	2007	max	-	Feb	lastSun	 0:00	0	-
+# The latest ruleset listed above says that the following states observe DST:
+# DF, ES, GO, MG, MS, MT, PR, RJ, RS, SC, SP.
+# For dates after mid-2007, the above rules with TO="max" are guesses
+# and are quite possibly wrong, but are more likely than no DST at all.
+
+
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+#
+# Fernando de Noronha (administratively part of PE)
+Zone America/Noronha	-2:09:40 -	LMT	1914
+			-2:00	Brazil	FN%sT	1990 Sep 17
+			-2:00	-	FNT	1999 Sep 30
+			-2:00	Brazil	FN%sT	2000 Oct 15
+			-2:00	-	FNT	2001 Sep 13
+			-2:00	Brazil	FN%sT	2002 Oct  1
+			-2:00	-	FNT
+# Other Atlantic islands have no permanent settlement.
+# These include Trindade and Martin Vaz (administratively part of ES),
+# Atol das Rocas (RN), and Penedos de Sao Pedro e Sao Paulo (PE).
+# Fernando de Noronha was a separate territory from 1942-09-02 to 1989-01-01;
+# it also included the Penedos.
+#
+# Amapa (AP), east Para (PA)
+# East Para includes Belem, Maraba, Serra Norte, and Sao Felix do Xingu.
+# The division between east and west Para is the river Xingu.
+# In the north a very small part from the river Javary (now Jari I guess,
+# the border with Amapa) to the Amazon, then to the Xingu.
+Zone America/Belem	-3:13:56 -	LMT	1914
+			-3:00	Brazil	BR%sT	1988 Sep 12
+			-3:00	-	BRT
+#
+# Maranhao (MA), Piaui (PI), Ceara (CE), Rio Grande do Norte (RN),
+# Paraiba (PB)
+Zone America/Fortaleza	-2:34:00 -	LMT	1914
+			-3:00	Brazil	BR%sT	1990 Sep 17
+			-3:00	-	BRT	1999 Sep 30
+			-3:00	Brazil	BR%sT	2000 Oct 22
+			-3:00	-	BRT	2001 Sep 13
+			-3:00	Brazil	BR%sT	2002 Oct  1
+			-3:00	-	BRT
+#
+# Pernambuco (PE) (except Atlantic islands)
+Zone America/Recife	-2:19:36 -	LMT	1914
+			-3:00	Brazil	BR%sT	1990 Sep 17
+			-3:00	-	BRT	1999 Sep 30
+			-3:00	Brazil	BR%sT	2000 Oct 15
+			-3:00	-	BRT	2001 Sep 13
+			-3:00	Brazil	BR%sT	2002 Oct  1
+			-3:00	-	BRT
+#
+# Tocantins (TO)
+Zone America/Araguaina	-3:12:48 -	LMT	1914
+			-3:00	Brazil	BR%sT	1990 Sep 17
+			-3:00	-	BRT	1995 Sep 14
+			-3:00	Brazil	BR%sT	2003 Sep 24
+			-3:00	-	BRT
+#
+# Alagoas (AL), Sergipe (SE)
+Zone America/Maceio	-2:22:52 -	LMT	1914
+			-3:00	Brazil	BR%sT	1990 Sep 17
+			-3:00	-	BRT	1995 Oct 13
+			-3:00	Brazil	BR%sT	1996 Sep  4
+			-3:00	-	BRT	1999 Sep 30
+			-3:00	Brazil	BR%sT	2000 Oct 22
+			-3:00	-	BRT	2001 Sep 13
+			-3:00	Brazil	BR%sT	2002 Oct  1
+			-3:00	-	BRT
+#
+# Bahia (BA)
+# There are too many Salvadors elsewhere, so use America/Bahia instead
+# of America/Salvador.
+Zone America/Bahia	-2:34:04 -	LMT	1914
+			-3:00	Brazil	BR%sT	2003 Sep 24
+			-3:00	-	BRT
+#
+# Goias (GO), Distrito Federal (DF), Minas Gerais (MG),
+# Espirito Santo (ES), Rio de Janeiro (RJ), Sao Paulo (SP), Parana (PR),
+# Santa Catarina (SC), Rio Grande do Sul (RS)
+Zone America/Sao_Paulo	-3:06:28 -	LMT	1914
+			-3:00	Brazil	BR%sT	1963 Oct 23 00:00
+			-3:00	1:00	BRST	1964
+			-3:00	Brazil	BR%sT
+#
+# Mato Grosso do Sul (MS)
+Zone America/Campo_Grande -3:38:28 -	LMT	1914
+			-4:00	Brazil	AM%sT
+#
+# Mato Grosso (MT)
+Zone America/Cuiaba	-3:44:20 -	LMT	1914
+			-4:00	Brazil	AM%sT	2003 Sep 24
+			-4:00	-	AMT	2004 Oct  1
+			-4:00	Brazil	AM%sT
+#
+# west Para (PA), Rondonia (RO)
+# West Para includes Altamira, Oribidos, Prainha, Oriximina, and Santarem.
+Zone America/Porto_Velho -4:15:36 -	LMT	1914
+			-4:00	Brazil	AM%sT	1988 Sep 12
+			-4:00	-	AMT
+#
+# Roraima (RR)
+Zone America/Boa_Vista	-4:02:40 -	LMT	1914
+			-4:00	Brazil	AM%sT	1988 Sep 12
+			-4:00	-	AMT	1999 Sep 30
+			-4:00	Brazil	AM%sT	2000 Oct 15
+			-4:00	-	AMT
+#
+# east Amazonas (AM): Boca do Acre, Jutai, Manaus, Floriano Peixoto
+# The great circle line from Tabatinga to Porto Acre divides
+# east from west Amazonas.
+Zone America/Manaus	-4:00:04 -	LMT	1914
+			-4:00	Brazil	AM%sT	1988 Sep 12
+			-4:00	-	AMT	1993 Sep 28
+			-4:00	Brazil	AM%sT	1994 Sep 22
+			-4:00	-	AMT
+#
+# west Amazonas (AM): Atalaia do Norte, Boca do Maoco, Benjamin Constant,
+#	Eirunepe, Envira, Ipixuna
+Zone America/Eirunepe	-4:39:28 -	LMT	1914
+			-5:00	Brazil	AC%sT	1988 Sep 12
+			-5:00	-	ACT	1993 Sep 28
+			-5:00	Brazil	AC%sT	1994 Sep 22
+			-5:00	-	ACT
+#
+# Acre (AC)
+Zone America/Rio_Branco	-4:31:12 -	LMT	1914
+			-5:00	Brazil	AC%sT	1988 Sep 12
+			-5:00	-	ACT
+
+
+# Chile
+
+# From Eduardo Krell (1995-10-19):
+# The law says to switch to DST at midnight [24:00] on the second SATURDAY
+# of October....  The law is the same for March and October.
+# (1998-09-29):
+# Because of the drought this year, the government decided to go into
+# DST earlier (saturday 9/26 at 24:00). This is a one-time change only ...
+# (unless there's another dry season next year, I guess).
+
+# From Julio I. Pacheco Troncoso (1999-03-18):
+# Because of the same drought, the government decided to end DST later,
+# on April 3, (one-time change).
+
+# From Oscar van Vlijmen (2006-10-08):
+# http://www.horaoficial.cl/cambio.htm
+
+# From Jesper Norgaard Welen (2006-10-08):
+# I think that there are some obvious mistakes in the suggested link
+# from Oscar van Vlijmen,... for instance entry 66 says that GMT-4
+# ended 1990-09-12 while entry 67 only begins GMT-3 at 1990-09-15
+# (they should have been 1990-09-15 and 1990-09-16 respectively), but
+# anyhow it clears up some doubts too.
+
+# From Paul Eggert (2006-12-27):
+# The following data for Chile and America/Santiago are from
+# <http://www.horaoficial.cl/horaof.htm> (2006-09-20), transcribed by
+# Jesper Norgaard Welen.  The data for Pacific/Easter are from Shanks
+# & Pottenger, except with DST transitions after 1932 cloned from
+# America/Santiago.  The pre-1980 Pacific/Easter data are dubious,
+# but we have no other source.
+
+# Rule	NAME	FROM	TO	TYPE	IN	ON	AT	SAVE	LETTER/S
+Rule	Chile	1927	1932	-	Sep	 1	0:00	1:00	S
+Rule	Chile	1928	1932	-	Apr	 1	0:00	0	-
+Rule	Chile	1942	only	-	Jun	 1	4:00u	0	-
+Rule	Chile	1942	only	-	Aug	 1	5:00u	1:00	S
+Rule	Chile	1946	only	-	Jul	15	4:00u	1:00	S
+Rule	Chile	1946	only	-	Sep	 1	3:00u	0:00	-
+Rule	Chile	1947	only	-	Apr	 1	4:00u	0	-
+Rule	Chile	1968	only	-	Nov	 3	4:00u	1:00	S
+Rule	Chile	1969	only	-	Mar	30	3:00u	0	-
+Rule	Chile	1969	only	-	Nov	23	4:00u	1:00	S
+Rule	Chile	1970	only	-	Mar	29	3:00u	0	-
+Rule	Chile	1971	only	-	Mar	14	3:00u	0	-
+Rule	Chile	1970	1972	-	Oct	Sun>=9	4:00u	1:00	S
+Rule	Chile	1972	1986	-	Mar	Sun>=9	3:00u	0	-
+Rule	Chile	1973	only	-	Sep	30	4:00u	1:00	S
+Rule	Chile	1974	1987	-	Oct	Sun>=9	4:00u	1:00	S
+Rule	Chile	1987	only	-	Apr	12	3:00u	0	-
+Rule	Chile	1988	1989	-	Mar	Sun>=9	3:00u	0	-
+Rule	Chile	1988	only	-	Oct	Sun>=1	4:00u	1:00	S
+Rule	Chile	1989	only	-	Oct	Sun>=9	4:00u	1:00	S
+Rule	Chile	1990	only	-	Mar	18	3:00u	0	-
+Rule	Chile	1990	only	-	Sep	16	4:00u	1:00	S
+Rule	Chile	1991	1996	-	Mar	Sun>=9	3:00u	0	-
+Rule	Chile	1991	1997	-	Oct	Sun>=9	4:00u	1:00	S
+Rule	Chile	1997	only	-	Mar	30	3:00u	0	-
+Rule	Chile	1998	only	-	Mar	Sun>=9	3:00u	0	-
+Rule	Chile	1998	only	-	Sep	27	4:00u	1:00	S
+Rule	Chile	1999	only	-	Apr	 4	3:00u	0	-
+Rule	Chile	1999	max	-	Oct	Sun>=9	4:00u	1:00	S
+Rule	Chile	2000	max	-	Mar	Sun>=9	3:00u	0	-
+# IATA SSIM anomalies: (1992-02) says 1992-03-14;
+# (1996-09) says 1998-03-08.  Ignore these.
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone America/Santiago	-4:42:46 -	LMT	1890
+			-4:42:46 -	SMT	1910 	    # Santiago Mean Time
+			-5:00	-	CLT	1916 Jul  1 # Chile Time
+			-4:42:46 -	SMT	1918 Sep  1 # Santiago Mean Time
+			-4:00	-	CLT	1919 Jul  1 # Chile Time
+			-4:42:46 -	SMT	1927 Sep  1 # Santiago Mean Time
+			-5:00	Chile	CL%sT	1947 May 22 # Chile Time
+			-4:00	Chile	CL%sT
+Zone Pacific/Easter	-7:17:44 -	LMT	1890
+			-7:17:28 -	EMT	1932 Sep    # Easter Mean Time
+			-7:00	Chile	EAS%sT	1982 Mar 13 21:00 # Easter I Time
+			-6:00	Chile	EAS%sT
+#
+# Sala y Gomez Island is like Pacific/Easter.
+# Other Chilean locations, including Juan Fernandez Is, San Ambrosio,
+# San Felix, and Antarctic bases, are like America/Santiago.
+
+# Colombia
+# Rule	NAME	FROM	TO	TYPE	IN	ON	AT	SAVE	LETTER/S
+Rule	CO	1992	only	-	May	 3	0:00	1:00	S
+Rule	CO	1993	only	-	Apr	 4	0:00	0	-
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone	America/Bogota	-4:56:20 -	LMT	1884 Mar 13
+			-4:56:20 -	BMT	1914 Nov 23 # Bogota Mean Time
+			-5:00	CO	CO%sT	# Colombia Time
+# Malpelo, Providencia, San Andres
+# no information; probably like America/Bogota
+
+# Curacao
+#
+# From Paul Eggert (2006-03-22):
+# Shanks & Pottenger say that The Bottom and Philipsburg have been at
+# -4:00 since standard time was introduced on 1912-03-02; and that
+# Kralendijk and Rincon used Kralendijk Mean Time (-4:33:08) from
+# 1912-02-02 to 1965-01-01.  The former is dubious, since S&P also say
+# Saba Island has been like Curacao.
+# This all predates our 1970 cutoff, though.
+#
+# By July 2007 Curacao and St Maarten are planned to become
+# associated states within the Netherlands, much like Aruba;
+# Bonaire, Saba and St Eustatius would become directly part of the
+# Netherlands as Kingdom Islands.  This won't affect their time zones
+# though, as far as we know.
+#
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone	America/Curacao	-4:35:44 -	LMT	1912 Feb 12	# Willemstad
+			-4:30	-	ANT	1965 # Netherlands Antilles Time
+			-4:00	-	AST
+
+# Ecuador
+#
+# From Paul Eggert (2007-03-04):
+# Apparently Ecuador had a failed experiment with DST in 1992.
+# <http://midena.gov.ec/content/view/1261/208/> (2007-02-27) and
+# <http://www.hoy.com.ec/NoticiaNue.asp?row_id=249856> (2006-11-06) both
+# talk about "hora Sixto".  Leave this alone for now, as we have no data.
+#
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone America/Guayaquil	-5:19:20 -	LMT	1890
+			-5:14:00 -	QMT	1931 # Quito Mean Time
+			-5:00	-	ECT	     # Ecuador Time
+Zone Pacific/Galapagos	-5:58:24 -	LMT	1931 # Puerto Baquerizo Moreno
+			-5:00	-	ECT	1986
+			-6:00	-	GALT	     # Galapagos Time
+
+# Falklands
+
+# From Paul Eggert (2006-03-22):
+# Between 1990 and 2000 inclusive, Shanks & Pottenger and the IATA agree except
+# the IATA gives 1996-09-08.  Go with Shanks & Pottenger.
+
+# From Falkland Islands Government Office, London (2001-01-22)
+# via Jesper Norgaard:
+# ... the clocks revert back to Local Mean Time at 2 am on Sunday 15
+# April 2001 and advance one hour to summer time at 2 am on Sunday 2
+# September.  It is anticipated that the clocks will revert back at 2
+# am on Sunday 21 April 2002 and advance to summer time at 2 am on
+# Sunday 1 September.
+
+# From Rives McDow (2001-02-13):
+#
+# I have communicated several times with people there, and the last
+# time I had communications that was helpful was in 1998.  Here is
+# what was said then:
+#
+# "The general rule was that Stanley used daylight saving and the Camp
+# did not. However for various reasons many people in the Camp have
+# started to use daylight saving (known locally as 'Stanley Time')
+# There is no rule as to who uses daylight saving - it is a matter of
+# personal choice and so it is impossible to draw a map showing who
+# uses it and who does not. Any list would be out of date as soon as
+# it was produced. This year daylight saving ended on April 18/19th
+# and started again on September 12/13th.  I do not know what the rule
+# is, but can find out if you like.  We do not change at the same time
+# as UK or Chile."
+#
+# I did have in my notes that the rule was "Second Saturday in Sep at
+# 0:00 until third Saturday in Apr at 0:00".  I think that this does
+# not agree in some cases with Shanks; is this true?
+#
+# Also, there is no mention in the list that some areas in the
+# Falklands do not use DST.  I have found in my communications there
+# that these areas are on the western half of East Falkland and all of
+# West Falkland.  Stanley is the only place that consistently observes
+# DST.  Again, as in other places in the world, the farmers don't like
+# it.  West Falkland is almost entirely sheep farmers.
+#
+# I know one lady there that keeps a list of which farm keeps DST and
+# which doesn't each year.  She runs a shop in Stanley, and says that
+# the list changes each year.  She uses it to communicate to her
+# customers, catching them when they are home for lunch or dinner.
+
+# From Paul Eggert (2001-03-05):
+# For now, we'll just record the time in Stanley, since we have no
+# better info.
+
+# Rule	NAME	FROM	TO	TYPE	IN	ON	AT	SAVE	LETTER/S
+Rule	Falk	1937	1938	-	Sep	lastSun	0:00	1:00	S
+Rule	Falk	1938	1942	-	Mar	Sun>=19	0:00	0	-
+Rule	Falk	1939	only	-	Oct	1	0:00	1:00	S
+Rule	Falk	1940	1942	-	Sep	lastSun	0:00	1:00	S
+Rule	Falk	1943	only	-	Jan	1	0:00	0	-
+Rule	Falk	1983	only	-	Sep	lastSun	0:00	1:00	S
+Rule	Falk	1984	1985	-	Apr	lastSun	0:00	0	-
+Rule	Falk	1984	only	-	Sep	16	0:00	1:00	S
+Rule	Falk	1985	2000	-	Sep	Sun>=9	0:00	1:00	S
+Rule	Falk	1986	2000	-	Apr	Sun>=16	0:00	0	-
+Rule	Falk	2001	max	-	Apr	Sun>=15	2:00	0	-
+Rule	Falk	2001	max	-	Sep	Sun>=1	2:00	1:00	S
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone Atlantic/Stanley	-3:51:24 -	LMT	1890
+			-3:51:24 -	SMT	1912 Mar 12  # Stanley Mean Time
+			-4:00	Falk	FK%sT	1983 May     # Falkland Is Time
+			-3:00	Falk	FK%sT	1985 Sep 15
+			-4:00	Falk	FK%sT
+
+# French Guiana
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone America/Cayenne	-3:29:20 -	LMT	1911 Jul
+			-4:00	-	GFT	1967 Oct # French Guiana Time
+			-3:00	-	GFT
+
+# Guyana
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone	America/Guyana	-3:52:40 -	LMT	1915 Mar	# Georgetown
+			-3:45	-	GBGT	1966 May 26 # Br Guiana Time
+			-3:45	-	GYT	1975 Jul 31 # Guyana Time
+			-3:00	-	GYT	1991
+# IATA SSIM (1996-06) says -4:00.  Assume a 1991 switch.
+			-4:00	-	GYT
+
+# Paraguay
+# From Paul Eggert (2006-03-22):
+# Shanks & Pottenger say that spring transitions are from 01:00 -> 02:00,
+# and autumn transitions are from 00:00 -> 23:00.  Go with pre-1999
+# editions of Shanks, and with the IATA, who say transitions occur at 00:00.
+# Rule	NAME	FROM	TO	TYPE	IN	ON	AT	SAVE	LETTER/S
+Rule	Para	1975	1988	-	Oct	 1	0:00	1:00	S
+Rule	Para	1975	1978	-	Mar	 1	0:00	0	-
+Rule	Para	1979	1991	-	Apr	 1	0:00	0	-
+Rule	Para	1989	only	-	Oct	22	0:00	1:00	S
+Rule	Para	1990	only	-	Oct	 1	0:00	1:00	S
+Rule	Para	1991	only	-	Oct	 6	0:00	1:00	S
+Rule	Para	1992	only	-	Mar	 1	0:00	0	-
+Rule	Para	1992	only	-	Oct	 5	0:00	1:00	S
+Rule	Para	1993	only	-	Mar	31	0:00	0	-
+Rule	Para	1993	1995	-	Oct	 1	0:00	1:00	S
+Rule	Para	1994	1995	-	Feb	lastSun	0:00	0	-
+Rule	Para	1996	only	-	Mar	 1	0:00	0	-
+# IATA SSIM (2000-02) says 1999-10-10; ignore this for now.
+# From Steffen Thorsen (2000-10-02):
+# I have three independent reports that Paraguay changed to DST this Sunday
+# (10-01).
+#
+# Translated by Gwillim Law (2001-02-27) from
+# <a href="http://www.diarionoticias.com.py/011000/nacional/naciona1.htm">
+# Noticias, a daily paper in Asuncion, Paraguay (2000-10-01)
+# </a>:
+# Starting at 0:00 today, the clock will be set forward 60 minutes, in
+# fulfillment of Decree No. 7,273 of the Executive Power....  The time change
+# system has been operating for several years.  Formerly there was a separate
+# decree each year; the new law has the same effect, but permanently.  Every
+# year, the time will change on the first Sunday of October; likewise, the
+# clock will be set back on the first Sunday of March.
+#
+Rule	Para	1996	2001	-	Oct	Sun>=1	0:00	1:00	S
+# IATA SSIM (1997-09) says Mar 1; go with Shanks & Pottenger.
+Rule	Para	1997	only	-	Feb	lastSun	0:00	0	-
+# Shanks & Pottenger say 1999-02-28; IATA SSIM (1999-02) says 1999-02-27, but
+# (1999-09) reports no date; go with above sources and Gerd Knops (2001-02-27).
+Rule	Para	1998	2001	-	Mar	Sun>=1	0:00	0	-
+# From Rives McDow (2002-02-28):
+# A decree was issued in Paraguay (no. 16350) on 2002-02-26 that changed the
+# dst method to be from the first Sunday in September to the first Sunday in
+# April.
+Rule	Para	2002	2004	-	Apr	Sun>=1	0:00	0	-
+Rule	Para	2002	2003	-	Sep	Sun>=1	0:00	1:00	S
+#
+# From Jesper Norgaard Welen (2005-01-02):
+# There are several sources that claim that Paraguay made
+# a timezone rule change in autumn 2004.
+# From Steffen Thorsen (2005-01-05):
+# Decree 1,867 (2004-03-05)
+# From Carlos Raul Perasso via Jesper Norgaard Welen (2006-10-13)
+# <http://www.presidencia.gov.py/decretos/D1867.pdf>
+Rule	Para	2004	max	-	Oct	Sun>=15	0:00	1:00	S
+Rule	Para	2005	max	-	Mar	Sun>=8	0:00	0	-
+
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone America/Asuncion	-3:50:40 -	LMT	1890
+			-3:50:40 -	AMT	1931 Oct 10 # Asuncion Mean Time
+			-4:00	-	PYT	1972 Oct # Paraguay Time
+			-3:00	-	PYT	1974 Apr
+			-4:00	Para	PY%sT
+
+# Peru
+#
+# <a href="news:xrGmb.39935$gA1.13896113@news4.srv.hcvlny.cv.net">
+# From Evelyn C. Leeper via Mark Brader (2003-10-26):</a>
+# When we were in Peru in 1985-1986, they apparently switched over
+# sometime between December 29 and January 3 while we were on the Amazon.
+#
+# From Paul Eggert (2006-03-22):
+# Shanks & Pottenger don't have this transition.  Assume 1986 was like 1987.
+
+# Rule	NAME	FROM	TO	TYPE	IN	ON	AT	SAVE	LETTER/S
+Rule	Peru	1938	only	-	Jan	 1	0:00	1:00	S
+Rule	Peru	1938	only	-	Apr	 1	0:00	0	-
+Rule	Peru	1938	1939	-	Sep	lastSun	0:00	1:00	S
+Rule	Peru	1939	1940	-	Mar	Sun>=24	0:00	0	-
+Rule	Peru	1986	1987	-	Jan	 1	0:00	1:00	S
+Rule	Peru	1986	1987	-	Apr	 1	0:00	0	-
+Rule	Peru	1990	only	-	Jan	 1	0:00	1:00	S
+Rule	Peru	1990	only	-	Apr	 1	0:00	0	-
+# IATA is ambiguous for 1993/1995; go with Shanks & Pottenger.
+Rule	Peru	1994	only	-	Jan	 1	0:00	1:00	S
+Rule	Peru	1994	only	-	Apr	 1	0:00	0	-
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone	America/Lima	-5:08:12 -	LMT	1890
+			-5:08:36 -	LMT	1908 Jul 28 # Lima Mean Time?
+			-5:00	Peru	PE%sT	# Peru Time
+
+# South Georgia
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone Atlantic/South_Georgia -2:26:08 -	LMT	1890		# Grytviken
+			-2:00	-	GST	# South Georgia Time
+
+# South Sandwich Is
+# uninhabited; scientific personnel have wintered
+
+# Suriname
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone America/Paramaribo	-3:40:40 -	LMT	1911
+			-3:40:52 -	PMT	1935     # Paramaribo Mean Time
+			-3:40:36 -	PMT	1945 Oct # The capital moved?
+			-3:30	-	NEGT	1975 Nov 20 # Dutch Guiana Time
+			-3:30	-	SRT	1984 Oct # Suriname Time
+			-3:00	-	SRT
+
+# Trinidad and Tobago
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone America/Port_of_Spain -4:06:04 -	LMT	1912 Mar 2
+			-4:00	-	AST
+
+# Uruguay
+# From Paul Eggert (1993-11-18):
+# Uruguay wins the prize for the strangest peacetime manipulation of the rules.
+# From Shanks & Pottenger:
+# Rule	NAME	FROM	TO	TYPE	IN	ON	AT	SAVE	LETTER/S
+# Whitman gives 1923 Oct 1; go with Shanks & Pottenger.
+Rule	Uruguay	1923	only	-	Oct	 2	 0:00	0:30	HS
+Rule	Uruguay	1924	1926	-	Apr	 1	 0:00	0	-
+Rule	Uruguay	1924	1925	-	Oct	 1	 0:00	0:30	HS
+Rule	Uruguay	1933	1935	-	Oct	lastSun	 0:00	0:30	HS
+# Shanks & Pottenger give 1935 Apr 1 0:00 & 1936 Mar 30 0:00; go with Whitman.
+Rule	Uruguay	1934	1936	-	Mar	Sat>=25	23:30s	0	-
+Rule	Uruguay	1936	only	-	Nov	 1	 0:00	0:30	HS
+Rule	Uruguay	1937	1941	-	Mar	lastSun	 0:00	0	-
+# Whitman gives 1937 Oct 3; go with Shanks & Pottenger.
+Rule	Uruguay	1937	1940	-	Oct	lastSun	 0:00	0:30	HS
+# Whitman gives 1941 Oct 24 - 1942 Mar 27, 1942 Dec 14 - 1943 Apr 13,
+# and 1943 Apr 13 ``to present time''; go with Shanks & Pottenger.
+Rule	Uruguay	1941	only	-	Aug	 1	 0:00	0:30	HS
+Rule	Uruguay	1942	only	-	Jan	 1	 0:00	0	-
+Rule	Uruguay	1942	only	-	Dec	14	 0:00	1:00	S
+Rule	Uruguay	1943	only	-	Mar	14	 0:00	0	-
+Rule	Uruguay	1959	only	-	May	24	 0:00	1:00	S
+Rule	Uruguay	1959	only	-	Nov	15	 0:00	0	-
+Rule	Uruguay	1960	only	-	Jan	17	 0:00	1:00	S
+Rule	Uruguay	1960	only	-	Mar	 6	 0:00	0	-
+Rule	Uruguay	1965	1967	-	Apr	Sun>=1	 0:00	1:00	S
+Rule	Uruguay	1965	only	-	Sep	26	 0:00	0	-
+Rule	Uruguay	1966	1967	-	Oct	31	 0:00	0	-
+Rule	Uruguay	1968	1970	-	May	27	 0:00	0:30	HS
+Rule	Uruguay	1968	1970	-	Dec	 2	 0:00	0	-
+Rule	Uruguay	1972	only	-	Apr	24	 0:00	1:00	S
+Rule	Uruguay	1972	only	-	Aug	15	 0:00	0	-
+Rule	Uruguay	1974	only	-	Mar	10	 0:00	0:30	HS
+Rule	Uruguay	1974	only	-	Dec	22	 0:00	1:00	S
+Rule	Uruguay	1976	only	-	Oct	 1	 0:00	0	-
+Rule	Uruguay	1977	only	-	Dec	 4	 0:00	1:00	S
+Rule	Uruguay	1978	only	-	Apr	 1	 0:00	0	-
+Rule	Uruguay	1979	only	-	Oct	 1	 0:00	1:00	S
+Rule	Uruguay	1980	only	-	May	 1	 0:00	0	-
+Rule	Uruguay	1987	only	-	Dec	14	 0:00	1:00	S
+Rule	Uruguay	1988	only	-	Mar	14	 0:00	0	-
+Rule	Uruguay	1988	only	-	Dec	11	 0:00	1:00	S
+Rule	Uruguay	1989	only	-	Mar	12	 0:00	0	-
+Rule	Uruguay	1989	only	-	Oct	29	 0:00	1:00	S
+# Shanks & Pottenger say no DST was observed in 1990/1 and 1991/2,
+# and that 1992/3's DST was from 10-25 to 03-01.  Go with IATA.
+Rule	Uruguay	1990	1992	-	Mar	Sun>=1	 0:00	0	-
+Rule	Uruguay	1990	1991	-	Oct	Sun>=21	 0:00	1:00	S
+Rule	Uruguay	1992	only	-	Oct	18	 0:00	1:00	S
+Rule	Uruguay	1993	only	-	Feb	28	 0:00	0	-
+# From Eduardo Cota (2004-09-20):
+# The uruguayan government has decreed a change in the local time....
+# http://www.presidencia.gub.uy/decretos/2004091502.htm
+Rule	Uruguay	2004	only	-	Sep	19	 0:00	1:00	S
+# From Steffen Thorsen (2005-03-11):
+# Uruguay's DST was scheduled to end on Sunday, 2005-03-13, but in order to
+# save energy ... it was postponed two weeks....
+# http://www.presidencia.gub.uy/_Web/noticias/2005/03/2005031005.htm
+Rule	Uruguay	2005	only	-	Mar	27	 2:00	0	-
+# From Eduardo Cota (2005-09-27):
+# http://www.presidencia.gub.uy/_Web/decretos/2005/09/CM%20119_09%2009%202005_00001.PDF
+# This means that from 2005-10-09 at 02:00 local time, until 2006-03-12 at
+# 02:00 local time, official time in Uruguay will be at GMT -2.
+Rule	Uruguay	2005	only	-	Oct	 9	 2:00	1:00	S
+Rule	Uruguay	2006	only	-	Mar	12	 2:00	0	-
+# From Jesper Norgaard Welen (2006-09-06):
+# http://www.presidencia.gub.uy/_web/decretos/2006/09/CM%20210_08%2006%202006_00001.PDF
+Rule	Uruguay	2006	max	-	Oct	Sun>=1	 2:00	1:00	S
+Rule	Uruguay	2007	max	-	Mar	Sun>=8	 2:00	0	-
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone America/Montevideo	-3:44:44 -	LMT	1898 Jun 28
+			-3:44:44 -	MMT	1920 May  1	# Montevideo MT
+			-3:30	Uruguay	UY%sT	1942 Dec 14	# Uruguay Time
+			-3:00	Uruguay	UY%sT
+
+# Venezuela
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone	America/Caracas	-4:27:44 -	LMT	1890
+			-4:27:40 -	CMT	1912 Feb 12 # Caracas Mean Time?
+			-4:30	-	VET	1965	     # Venezuela Time
+			-4:00	-	VET
Index: libkcal/libical/tzdata/africa
===================================================================
--- libkcal/libical/tzdata/africa	(.../tags/KDE/3.5.6/kdepim)	(wersja 0)
+++ libkcal/libical/tzdata/africa	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -0,0 +1,641 @@
+# @(#)africa	8.7
+# <pre>
+
+# This data is by no means authoritative; if you think you know better,
+# go ahead and edit the file (and please send any changes to
+# tz@elsie.nci.nih.gov for general use in the future).
+
+# From Paul Eggert (2006-03-22):
+#
+# A good source for time zone historical data outside the U.S. is
+# Thomas G. Shanks and Rique Pottenger, The International Atlas (6th edition),
+# San Diego: ACS Publications, Inc. (2003).
+#
+# Gwillim Law writes that a good source
+# for recent time zone data is the International Air Transport
+# Association's Standard Schedules Information Manual (IATA SSIM),
+# published semiannually.  Law sent in several helpful summaries
+# of the IATA's data after 1990.
+#
+# Except where otherwise noted, Shanks & Pottenger is the source for
+# entries through 1990, and IATA SSIM is the source for entries afterwards.
+#
+# Another source occasionally used is Edward W. Whitman, World Time Differences,
+# Whitman Publishing Co, 2 Niagara Av, Ealing, London (undated), which
+# I found in the UCLA library.
+#
+# A reliable and entertaining source about time zones is
+# Derek Howse, Greenwich time and longitude, Philip Wilson Publishers (1997).
+#
+# Previous editions of this database used WAT, CAT, SAT, and EAT
+# for +0:00 through +3:00, respectively,
+# but Mark R V Murray reports that
+# `SAST' is the official abbreviation for +2:00 in the country of South Africa,
+# `CAT' is commonly used for +2:00 in countries north of South Africa, and
+# `WAT' is probably the best name for +1:00, as the common phrase for
+# the area that includes Nigeria is ``West Africa''.
+# He has heard of ``Western Sahara Time'' for +0:00 but can find no reference.
+#
+# To make things confusing, `WAT' seems to have been used for -1:00 long ago;
+# I'd guess that this was because people needed _some_ name for -1:00,
+# and at the time, far west Africa was the only major land area in -1:00.
+# This usage is now obsolete, as the last use of -1:00 on the African
+# mainland seems to have been 1976 in Western Sahara.
+#
+# To summarize, the following abbreviations seem to have some currency:
+#	-1:00	WAT	West Africa Time (no longer used)
+#	 0:00	GMT	Greenwich Mean Time
+#	 2:00	CAT	Central Africa Time
+#	 2:00	SAST	South Africa Standard Time
+# and Murray suggests the following abbreviation:
+#	 1:00	WAT	West Africa Time
+# I realize that this leads to `WAT' being used for both -1:00 and 1:00
+# for times before 1976, but this is the best I can think of
+# until we get more information.
+#
+# I invented the following abbreviations; corrections are welcome!
+#	 2:00	WAST	West Africa Summer Time
+#	 2:30	BEAT	British East Africa Time (no longer used)
+#	 2:44:45 BEAUT	British East Africa Unified Time (no longer used)
+#	 3:00	CAST	Central Africa Summer Time (no longer used)
+#	 3:00	SAST	South Africa Summer Time (no longer used)
+#	 3:00	EAT	East Africa Time
+#	 4:00	EAST	East Africa Summer Time (no longer used)
+
+# Algeria
+# Rule	NAME	FROM	TO	TYPE	IN	ON	AT	SAVE	LETTER/S
+Rule	Algeria	1916	only	-	Jun	14	23:00s	1:00	S
+Rule	Algeria	1916	1919	-	Oct	Sun>=1	23:00s	0	-
+Rule	Algeria	1917	only	-	Mar	24	23:00s	1:00	S
+Rule	Algeria	1918	only	-	Mar	 9	23:00s	1:00	S
+Rule	Algeria	1919	only	-	Mar	 1	23:00s	1:00	S
+Rule	Algeria	1920	only	-	Feb	14	23:00s	1:00	S
+Rule	Algeria	1920	only	-	Oct	23	23:00s	0	-
+Rule	Algeria	1921	only	-	Mar	14	23:00s	1:00	S
+Rule	Algeria	1921	only	-	Jun	21	23:00s	0	-
+Rule	Algeria	1939	only	-	Sep	11	23:00s	1:00	S
+Rule	Algeria	1939	only	-	Nov	19	 1:00	0	-
+Rule	Algeria	1944	1945	-	Apr	Mon>=1	 2:00	1:00	S
+Rule	Algeria	1944	only	-	Oct	 8	 2:00	0	-
+Rule	Algeria	1945	only	-	Sep	16	 1:00	0	-
+Rule	Algeria	1971	only	-	Apr	25	23:00s	1:00	S
+Rule	Algeria	1971	only	-	Sep	26	23:00s	0	-
+Rule	Algeria	1977	only	-	May	 6	 0:00	1:00	S
+Rule	Algeria	1977	only	-	Oct	21	 0:00	0	-
+Rule	Algeria	1978	only	-	Mar	24	 1:00	1:00	S
+Rule	Algeria	1978	only	-	Sep	22	 3:00	0	-
+Rule	Algeria	1980	only	-	Apr	25	 0:00	1:00	S
+Rule	Algeria	1980	only	-	Oct	31	 2:00	0	-
+# Shanks & Pottenger give 0:09:20 for Paris Mean Time; go with Howse's
+# more precise 0:09:21.
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone	Africa/Algiers	0:12:12 -	LMT	1891 Mar 15 0:01
+			0:09:21	-	PMT	1911 Mar 11    # Paris Mean Time
+			0:00	Algeria	WE%sT	1940 Feb 25 2:00
+			1:00	Algeria	CE%sT	1946 Oct  7
+			0:00	-	WET	1956 Jan 29
+			1:00	-	CET	1963 Apr 14
+			0:00	Algeria	WE%sT	1977 Oct 21
+			1:00	Algeria	CE%sT	1979 Oct 26
+			0:00	Algeria	WE%sT	1981 May
+			1:00	-	CET
+
+# Angola
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone	Africa/Luanda	0:52:56	-	LMT	1892
+			0:52:04	-	AOT	1911 May 26 # Angola Time
+			1:00	-	WAT
+
+# Benin
+# Whitman says they switched to 1:00 in 1946, not 1934;
+# go with Shanks & Pottenger.
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone Africa/Porto-Novo	0:10:28	-	LMT	1912
+			0:00	-	GMT	1934 Feb 26
+			1:00	-	WAT
+
+# Botswana
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone	Africa/Gaborone	1:43:40 -	LMT	1885
+			2:00	-	CAT	1943 Sep 19 2:00
+			2:00	1:00	CAST	1944 Mar 19 2:00
+			2:00	-	CAT
+
+# Burkina Faso
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone Africa/Ouagadougou	-0:06:04 -	LMT	1912
+			 0:00	-	GMT
+
+# Burundi
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone Africa/Bujumbura	1:57:28	-	LMT	1890
+			2:00	-	CAT
+
+# Cameroon
+# Whitman says they switched to 1:00 in 1920; go with Shanks & Pottenger.
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone	Africa/Douala	0:38:48	-	LMT	1912
+			1:00	-	WAT
+
+# Cape Verde
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone Atlantic/Cape_Verde -1:34:04 -	LMT	1907			# Praia
+			-2:00	-	CVT	1942 Sep
+			-2:00	1:00	CVST	1945 Oct 15
+			-2:00	-	CVT	1975 Nov 25 2:00
+			-1:00	-	CVT
+
+# Central African Republic
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone	Africa/Bangui	1:14:20	-	LMT	1912
+			1:00	-	WAT
+
+# Chad
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone	Africa/Ndjamena	1:00:12 -	LMT	1912
+			1:00	-	WAT	1979 Oct 14
+			1:00	1:00	WAST	1980 Mar  8
+			1:00	-	WAT
+
+# Comoros
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone	Indian/Comoro	2:53:04 -	LMT	1911 Jul   # Moroni, Gran Comoro
+			3:00	-	EAT
+
+# Democratic Republic of Congo
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone Africa/Kinshasa	1:01:12 -	LMT	1897 Nov 9
+			1:00	-	WAT
+Zone Africa/Lubumbashi	1:49:52 -	LMT	1897 Nov 9
+			2:00	-	CAT
+
+# Republic of the Congo
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone Africa/Brazzaville	1:01:08 -	LMT	1912
+			1:00	-	WAT
+
+# Cote D'Ivoire
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone	Africa/Abidjan	-0:16:08 -	LMT	1912
+			 0:00	-	GMT
+
+# Djibouti
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone	Africa/Djibouti	2:52:36 -	LMT	1911 Jul
+			3:00	-	EAT
+
+###############################################################################
+
+# Egypt
+
+# Rule	NAME	FROM	TO	TYPE	IN	ON	AT	SAVE	LETTER/S
+Rule	Egypt	1940	only	-	Jul	15	0:00	1:00	S
+Rule	Egypt	1940	only	-	Oct	 1	0:00	0	-
+Rule	Egypt	1941	only	-	Apr	15	0:00	1:00	S
+Rule	Egypt	1941	only	-	Sep	16	0:00	0	-
+Rule	Egypt	1942	1944	-	Apr	 1	0:00	1:00	S
+Rule	Egypt	1942	only	-	Oct	27	0:00	0	-
+Rule	Egypt	1943	1945	-	Nov	 1	0:00	0	-
+Rule	Egypt	1945	only	-	Apr	16	0:00	1:00	S
+Rule	Egypt	1957	only	-	May	10	0:00	1:00	S
+Rule	Egypt	1957	1958	-	Oct	 1	0:00	0	-
+Rule	Egypt	1958	only	-	May	 1	0:00	1:00	S
+Rule	Egypt	1959	1981	-	May	 1	1:00	1:00	S
+Rule	Egypt	1959	1965	-	Sep	30	3:00	0	-
+Rule	Egypt	1966	1994	-	Oct	 1	3:00	0	-
+Rule	Egypt	1982	only	-	Jul	25	1:00	1:00	S
+Rule	Egypt	1983	only	-	Jul	12	1:00	1:00	S
+Rule	Egypt	1984	1988	-	May	 1	1:00	1:00	S
+Rule	Egypt	1989	only	-	May	 6	1:00	1:00	S
+Rule	Egypt	1990	1994	-	May	 1	1:00	1:00	S
+# IATA (after 1990) says transitions are at 0:00.
+# Go with IATA starting in 1995, except correct 1995 entry from 09-30 to 09-29.
+Rule	Egypt	1995	max	-	Apr	lastFri	 0:00s	1:00	S
+Rule	Egypt	1995	2005	-	Sep	lastThu	23:00s	0	-
+# From Steffen Thorsen (2006-09-19):
+# The Egyptian Gazette, issue 41,090 (2006-09-18), page 1, reports:
+# Egypt will turn back clocks by one hour at the midnight of Thursday
+# after observing the daylight saving time since May.
+# http://news.gom.com.eg/gazette/pdf/2006/09/18/01.pdf
+Rule	Egypt	2006	only	-	Sep	21	23:00s	0	-
+Rule	Egypt	2007	max	-	Sep	lastThu	23:00s	0	-
+
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone	Africa/Cairo	2:05:00 -	LMT	1900 Oct
+			2:00	Egypt	EE%sT
+
+# Equatorial Guinea
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone	Africa/Malabo	0:35:08 -	LMT	1912
+			0:00	-	GMT	1963 Dec 15
+			1:00	-	WAT
+
+# Eritrea
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone	Africa/Asmara	2:35:32 -	LMT	1870
+			2:35:32	-	AMT	1890	      # Asmara Mean Time
+			2:35:20	-	ADMT	1936 May 5    # Adis Dera MT
+			3:00	-	EAT
+
+# Ethiopia
+# From Paul Eggert (2006-03-22):
+# Shanks & Pottenger write that Ethiopia had six narrowly-spaced time zones
+# between 1870 and 1890, and that they merged to 38E50 (2:35:20) in 1890.
+# We'll guess that 38E50 is for Adis Dera.
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone Africa/Addis_Ababa	2:34:48 -	LMT	1870
+			2:35:20	-	ADMT	1936 May 5    # Adis Dera MT
+			3:00	-	EAT
+
+# Gabon
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone Africa/Libreville	0:37:48 -	LMT	1912
+			1:00	-	WAT
+
+# Gambia
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone	Africa/Banjul	-1:06:36 -	LMT	1912
+			-1:06:36 -	BMT	1935	# Banjul Mean Time
+			-1:00	-	WAT	1964
+			 0:00	-	GMT
+
+# Ghana
+# Rule	NAME	FROM	TO	TYPE	IN	ON	AT	SAVE	LETTER/S
+# Whitman says DST was observed from 1931 to ``the present'';
+# go with Shanks & Pottenger.
+Rule	Ghana	1936	1942	-	Sep	 1	0:00	0:20	GHST
+Rule	Ghana	1936	1942	-	Dec	31	0:00	0	GMT
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone	Africa/Accra	-0:00:52 -	LMT	1918
+			 0:00	Ghana	%s
+
+# Guinea
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone	Africa/Conakry	-0:54:52 -	LMT	1912
+			 0:00	-	GMT	1934 Feb 26
+			-1:00	-	WAT	1960
+			 0:00	-	GMT
+
+# Guinea-Bissau
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone	Africa/Bissau	-1:02:20 -	LMT	1911 May 26
+			-1:00	-	WAT	1975
+			 0:00	-	GMT
+
+# Kenya
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone	Africa/Nairobi	2:27:16	-	LMT	1928 Jul
+			3:00	-	EAT	1930
+			2:30	-	BEAT	1940
+			2:44:45	-	BEAUT	1960
+			3:00	-	EAT
+
+# Lesotho
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone	Africa/Maseru	1:50:00 -	LMT	1903 Mar
+			2:00	-	SAST	1943 Sep 19 2:00
+			2:00	1:00	SAST	1944 Mar 19 2:00
+			2:00	-	SAST
+
+# Liberia
+# From Paul Eggert (2006-03-22):
+# In 1972 Liberia was the last country to switch
+# from a UTC offset that was not a multiple of 15 or 20 minutes.
+# Howse reports that it was in honor of their president's birthday.
+# Shank & Pottenger report the date as May 1, whereas Howse reports Jan;
+# go with Shanks & Pottenger.
+# For Liberia before 1972, Shanks & Pottenger report -0:44, whereas Howse and
+# Whitman each report -0:44:30; go with the more precise figure.
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone	Africa/Monrovia	-0:43:08 -	LMT	1882
+			-0:43:08 -	MMT	1919 Mar # Monrovia Mean Time
+			-0:44:30 -	LRT	1972 May # Liberia Time
+			 0:00	-	GMT
+
+###############################################################################
+
+# Libya
+
+# Rule	NAME	FROM	TO	TYPE	IN	ON	AT	SAVE	LETTER/S
+Rule	Libya	1951	only	-	Oct	14	2:00	1:00	S
+Rule	Libya	1952	only	-	Jan	 1	0:00	0	-
+Rule	Libya	1953	only	-	Oct	 9	2:00	1:00	S
+Rule	Libya	1954	only	-	Jan	 1	0:00	0	-
+Rule	Libya	1955	only	-	Sep	30	0:00	1:00	S
+Rule	Libya	1956	only	-	Jan	 1	0:00	0	-
+Rule	Libya	1982	1984	-	Apr	 1	0:00	1:00	S
+Rule	Libya	1982	1985	-	Oct	 1	0:00	0	-
+Rule	Libya	1985	only	-	Apr	 6	0:00	1:00	S
+Rule	Libya	1986	only	-	Apr	 4	0:00	1:00	S
+Rule	Libya	1986	only	-	Oct	 3	0:00	0	-
+Rule	Libya	1987	1989	-	Apr	 1	0:00	1:00	S
+Rule	Libya	1987	1989	-	Oct	 1	0:00	0	-
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone	Africa/Tripoli	0:52:44 -	LMT	1920
+			1:00	Libya	CE%sT	1959
+			2:00	-	EET	1982
+			1:00	Libya	CE%sT	1990 May  4
+# The following entries are from Shanks & Pottenger;
+# the IATA SSIM data contain some obvious errors.
+			2:00	-	EET	1996 Sep 30
+			1:00	-	CET	1997 Apr  4
+			1:00	1:00	CEST	1997 Oct  4
+			2:00	-	EET
+
+# Madagascar
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone Indian/Antananarivo 3:10:04 -	LMT	1911 Jul
+			3:00	-	EAT	1954 Feb 27 23:00s
+			3:00	1:00	EAST	1954 May 29 23:00s
+			3:00	-	EAT
+
+# Malawi
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone	Africa/Blantyre	2:20:00 -	LMT	1903 Mar
+			2:00	-	CAT
+
+# Mali
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone	Africa/Bamako	-0:32:00 -	LMT	1912
+			 0:00	-	GMT	1934 Feb 26
+			-1:00	-	WAT	1960 Jun 20
+			 0:00	-	GMT
+
+# Mauritania
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone Africa/Nouakchott	-1:03:48 -	LMT	1912
+			 0:00	-	GMT	1934 Feb 26
+			-1:00	-	WAT	1960 Nov 28
+			 0:00	-	GMT
+
+# Mauritius
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone Indian/Mauritius	3:50:00 -	LMT	1907		# Port Louis
+			4:00	-	MUT	# Mauritius Time
+# Agalega Is, Rodriguez
+# no information; probably like Indian/Mauritius
+
+# Mayotte
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone	Indian/Mayotte	3:00:56 -	LMT	1911 Jul	# Mamoutzou
+			3:00	-	EAT
+
+# Morocco
+# See the `europe' file for Spanish Morocco (Africa/Ceuta).
+# RULE	NAME	FROM	TO	TYPE	IN	ON	AT	SAVE	LETTER/S
+Rule	Morocco	1939	only	-	Sep	12	 0:00	1:00	S
+Rule	Morocco	1939	only	-	Nov	19	 0:00	0	-
+Rule	Morocco	1940	only	-	Feb	25	 0:00	1:00	S
+Rule	Morocco	1945	only	-	Nov	18	 0:00	0	-
+Rule	Morocco	1950	only	-	Jun	11	 0:00	1:00	S
+Rule	Morocco	1950	only	-	Oct	29	 0:00	0	-
+Rule	Morocco	1967	only	-	Jun	 3	12:00	1:00	S
+Rule	Morocco	1967	only	-	Oct	 1	 0:00	0	-
+Rule	Morocco	1974	only	-	Jun	24	 0:00	1:00	S
+Rule	Morocco	1974	only	-	Sep	 1	 0:00	0	-
+Rule	Morocco	1976	1977	-	May	 1	 0:00	1:00	S
+Rule	Morocco	1976	only	-	Aug	 1	 0:00	0	-
+Rule	Morocco	1977	only	-	Sep	28	 0:00	0	-
+Rule	Morocco	1978	only	-	Jun	 1	 0:00	1:00	S
+Rule	Morocco	1978	only	-	Aug	 4	 0:00	0	-
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone Africa/Casablanca	-0:30:20 -	LMT	1913 Oct 26
+			 0:00	Morocco	WE%sT	1984 Mar 16
+			 1:00	-	CET	1986
+			 0:00	-	WET
+# Western Sahara
+Zone Africa/El_Aaiun	-0:52:48 -	LMT	1934 Jan
+			-1:00	-	WAT	1976 Apr 14
+			 0:00	-	WET
+
+# Mozambique
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone	Africa/Maputo	2:10:20 -	LMT	1903 Mar
+			2:00	-	CAT
+
+# Namibia
+# The 1994-04-03 transition is from Shanks & Pottenger.
+# Shanks & Pottenger report no DST after 1998-04; go with IATA.
+# RULE	NAME	FROM	TO	TYPE	IN	ON	AT	SAVE	LETTER/S
+Rule	Namibia	1994	max	-	Sep	Sun>=1	2:00	1:00	S
+Rule	Namibia	1995	max	-	Apr	Sun>=1	2:00	0	-
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone	Africa/Windhoek	1:08:24 -	LMT	1892 Feb 8
+			1:30	-	SWAT	1903 Mar	# SW Africa Time
+			2:00	-	SAST	1942 Sep 20 2:00
+			2:00	1:00	SAST	1943 Mar 21 2:00
+			2:00	-	SAST	1990 Mar 21 # independence
+			2:00	-	CAT	1994 Apr  3
+			1:00	Namibia	WA%sT
+
+# Niger
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone	Africa/Niamey	 0:08:28 -	LMT	1912
+			-1:00	-	WAT	1934 Feb 26
+			 0:00	-	GMT	1960
+			 1:00	-	WAT
+
+# Nigeria
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone	Africa/Lagos	0:13:36 -	LMT	1919 Sep
+			1:00	-	WAT
+
+# Reunion
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone	Indian/Reunion	3:41:52 -	LMT	1911 Jun	# Saint-Denis
+			4:00	-	RET	# Reunion Time
+#
+# Scattered Islands (Iles Eparses) administered from Reunion are as follows.
+# The following information about them is taken from
+# Iles Eparses (www.outre-mer.gouv.fr/domtom/ile.htm, 1997-07-22, in French;
+# no longer available as of 1999-08-17).
+# We have no info about their time zone histories.
+#
+# Bassas da India - uninhabited
+# Europa Island - inhabited from 1905 to 1910 by two families
+# Glorioso Is - inhabited until at least 1958
+# Juan de Nova - uninhabited
+# Tromelin - inhabited until at least 1958
+
+# Rwanda
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone	Africa/Kigali	2:00:16 -	LMT	1935 Jun
+			2:00	-	CAT
+
+# St Helena
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone Atlantic/St_Helena	-0:22:48 -	LMT	1890		# Jamestown
+			-0:22:48 -	JMT	1951	# Jamestown Mean Time
+			 0:00	-	GMT
+# The other parts of the St Helena territory are similar:
+#	Tristan da Cunha: on GMT, say Whitman and the CIA
+#	Ascension: on GMT, says usno1995 and the CIA
+#	Gough (scientific station since 1955; sealers wintered previously):
+#		on GMT, says the CIA
+#	Inaccessible, Nightingale: no information, but probably GMT
+
+# Sao Tome and Principe
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone	Africa/Sao_Tome	 0:26:56 -	LMT	1884
+			-0:36:32 -	LMT	1912	# Lisbon Mean Time
+			 0:00	-	GMT
+
+# Senegal
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone	Africa/Dakar	-1:09:44 -	LMT	1912
+			-1:00	-	WAT	1941 Jun
+			 0:00	-	GMT
+
+# Seychelles
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone	Indian/Mahe	3:41:48 -	LMT	1906 Jun	# Victoria
+			4:00	-	SCT	# Seychelles Time
+# From Paul Eggert (2001-05-30):
+# Aldabra, Farquhar, and Desroches, originally dependencies of the
+# Seychelles, were transferred to the British Indian Ocean Territory
+# in 1965 and returned to Seychelles control in 1976.  We don't know
+# whether this affected their time zone, so omit this for now.
+# Possibly the islands were uninhabited.
+
+# Sierra Leone
+# Rule	NAME	FROM	TO	TYPE	IN	ON	AT	SAVE	LETTER/S
+# Whitman gives Mar 31 - Aug 31 for 1931 on; go with Shanks & Pottenger.
+Rule	SL	1935	1942	-	Jun	 1	0:00	0:40	SLST
+Rule	SL	1935	1942	-	Oct	 1	0:00	0	WAT
+Rule	SL	1957	1962	-	Jun	 1	0:00	1:00	SLST
+Rule	SL	1957	1962	-	Sep	 1	0:00	0	GMT
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone	Africa/Freetown	-0:53:00 -	LMT	1882
+			-0:53:00 -	FMT	1913 Jun # Freetown Mean Time
+			-1:00	SL	%s	1957
+			 0:00	SL	%s
+
+# Somalia
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone Africa/Mogadishu	3:01:28 -	LMT	1893 Nov
+			3:00	-	EAT	1931
+			2:30	-	BEAT	1957
+			3:00	-	EAT
+
+# South Africa
+# Rule	NAME	FROM	TO	TYPE	IN	ON	AT	SAVE	LETTER/S
+Rule	SA	1942	1943	-	Sep	Sun>=15	2:00	1:00	-
+Rule	SA	1943	1944	-	Mar	Sun>=15	2:00	0	-
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone Africa/Johannesburg 1:52:00 -	LMT	1892 Feb 8
+			1:30	-	SAST	1903 Mar
+			2:00	SA	SAST
+# Marion and Prince Edward Is
+# scientific station since 1947
+# no information
+
+# Sudan
+#
+# From <a href="http://www.sunanews.net/sn13jane.html">
+# Sudan News Agency (2000-01-13)
+# </a>, also reported by Michael De Beukelaer-Dossche via Steffen Thorsen:
+# Clocks will be moved ahead for 60 minutes all over the Sudan as of noon
+# Saturday....  This was announced Thursday by Caretaker State Minister for
+# Manpower Abdul-Rahman Nur-Eddin.
+#
+# Rule	NAME	FROM	TO	TYPE	IN	ON	AT	SAVE	LETTER/S
+Rule	Sudan	1970	only	-	May	 1	0:00	1:00	S
+Rule	Sudan	1970	1985	-	Oct	15	0:00	0	-
+Rule	Sudan	1971	only	-	Apr	30	0:00	1:00	S
+Rule	Sudan	1972	1985	-	Apr	lastSun	0:00	1:00	S
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone	Africa/Khartoum	2:10:08 -	LMT	1931
+			2:00	Sudan	CA%sT	2000 Jan 15 12:00
+			3:00	-	EAT
+
+# Swaziland
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone	Africa/Mbabane	2:04:24 -	LMT	1903 Mar
+			2:00	-	SAST
+
+# Tanzania
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone Africa/Dar_es_Salaam 2:37:08 -	LMT	1931
+			3:00	-	EAT	1948
+			2:44:45	-	BEAUT	1961
+			3:00	-	EAT
+
+# Togo
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone	Africa/Lome	0:04:52 -	LMT	1893
+			0:00	-	GMT
+
+# Tunisia
+
+# From Gwillim Law (2005-04-30):
+# My correspondent, Risto Nykanen, has alerted me to another adoption of DST,
+# this time in Tunisia.  According to Yahoo France News
+# <http://fr.news.yahoo.com/050426/5/4dumk.html>, in a story attributed to AP
+# and dated 2005-04-26, "Tunisia has decided to advance its official time by
+# one hour, starting on Sunday, May 1.  Henceforth, Tunisian time will be
+# UTC+2 instead of UTC+1.  The change will take place at 23:00 UTC next
+# Saturday."  (My translation)
+#
+# From Oscar van Vlijmen (2005-05-02):
+# LaPresse, the first national daily newspaper ...
+# <http://www.lapresse.tn/archives/archives280405/actualites/lheure.html>
+# ... DST for 2005: on: Sun May 1 0h standard time, off: Fri Sept. 30,
+# 1h standard time.
+#
+# From Atef Loukil (2006-03-28):
+# The daylight saving time will be the same each year:
+# Beginning      : the last Sunday of March at 02:00
+# Ending         : the last Sunday of October at 03:00 ...
+# http://www.tap.info.tn/en/index.php?option=com_content&task=view&id=1188&Itemid=50
+
+# Rule	NAME	FROM	TO	TYPE	IN	ON	AT	SAVE	LETTER/S
+Rule	Tunisia	1939	only	-	Apr	15	23:00s	1:00	S
+Rule	Tunisia	1939	only	-	Nov	18	23:00s	0	-
+Rule	Tunisia	1940	only	-	Feb	25	23:00s	1:00	S
+Rule	Tunisia	1941	only	-	Oct	 6	 0:00	0	-
+Rule	Tunisia	1942	only	-	Mar	 9	 0:00	1:00	S
+Rule	Tunisia	1942	only	-	Nov	 2	 3:00	0	-
+Rule	Tunisia	1943	only	-	Mar	29	 2:00	1:00	S
+Rule	Tunisia	1943	only	-	Apr	17	 2:00	0	-
+Rule	Tunisia	1943	only	-	Apr	25	 2:00	1:00	S
+Rule	Tunisia	1943	only	-	Oct	 4	 2:00	0	-
+Rule	Tunisia	1944	1945	-	Apr	Mon>=1	 2:00	1:00	S
+Rule	Tunisia	1944	only	-	Oct	 8	 0:00	0	-
+Rule	Tunisia	1945	only	-	Sep	16	 0:00	0	-
+Rule	Tunisia	1977	only	-	Apr	30	 0:00s	1:00	S
+Rule	Tunisia	1977	only	-	Sep	24	 0:00s	0	-
+Rule	Tunisia	1978	only	-	May	 1	 0:00s	1:00	S
+Rule	Tunisia	1978	only	-	Oct	 1	 0:00s	0	-
+Rule	Tunisia	1988	only	-	Jun	 1	 0:00s	1:00	S
+Rule	Tunisia	1988	1990	-	Sep	lastSun	 0:00s	0	-
+Rule	Tunisia	1989	only	-	Mar	26	 0:00s	1:00	S
+Rule	Tunisia	1990	only	-	May	 1	 0:00s	1:00	S
+Rule	Tunisia	2005	only	-	May	 1	 0:00s	1:00	S
+Rule	Tunisia	2005	only	-	Sep	30	 1:00s	0	-
+Rule	Tunisia	2006	max	-	Mar	lastSun	 2:00s	1:00	S
+Rule	Tunisia	2006	max	-	Oct	lastSun	 2:00s	0	-
+# Shanks & Pottenger give 0:09:20 for Paris Mean Time; go with Howse's
+# more precise 0:09:21.
+# Shanks & Pottenger say the 1911 switch was on Mar 9; go with Howse's Mar 11.
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone	Africa/Tunis	0:40:44 -	LMT	1881 May 12
+			0:09:21	-	PMT	1911 Mar 11    # Paris Mean Time
+			1:00	Tunisia	CE%sT
+
+# Uganda
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone	Africa/Kampala	2:09:40 -	LMT	1928 Jul
+			3:00	-	EAT	1930
+			2:30	-	BEAT	1948
+			2:44:45	-	BEAUT	1957
+			3:00	-	EAT
+
+# Zambia
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone	Africa/Lusaka	1:53:08 -	LMT	1903 Mar
+			2:00	-	CAT
+
+# Zimbabwe
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone	Africa/Harare	2:04:12 -	LMT	1903 Mar
+			2:00	-	CAT
Index: libkcal/libical/tzdata/etcetera
===================================================================
--- libkcal/libical/tzdata/etcetera	(.../tags/KDE/3.5.6/kdepim)	(wersja 0)
+++ libkcal/libical/tzdata/etcetera	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -0,0 +1,80 @@
+# @(#)etcetera	8.1
+
+# These entries are mostly present for historical reasons, so that
+# people in areas not otherwise covered by the tz files could "zic -l"
+# to a time zone that was right for their area.  These days, the
+# tz files cover almost all the inhabited world, and the only practical
+# need now for the entries that are not on UTC are for ships at sea
+# that cannot use POSIX TZ settings.
+
+Zone	Etc/GMT		0	-	GMT
+Zone	Etc/UTC		0	-	UTC
+Zone	Etc/UCT		0	-	UCT
+
+# The following link uses older naming conventions,
+# but it belongs here, not in the file `backward',
+# as functions like gmtime load the "GMT" file to handle leap seconds properly.
+# We want this to work even on installations that omit the other older names.
+Link	Etc/GMT				GMT
+
+Link	Etc/UTC				Etc/Universal
+Link	Etc/UTC				Etc/Zulu
+
+Link	Etc/GMT				Etc/Greenwich
+Link	Etc/GMT				Etc/GMT-0
+Link	Etc/GMT				Etc/GMT+0
+Link	Etc/GMT				Etc/GMT0
+
+# We use POSIX-style signs in the Zone names and the output abbreviations,
+# even though this is the opposite of what many people expect.
+# POSIX has positive signs west of Greenwich, but many people expect
+# positive signs east of Greenwich.  For example, TZ='Etc/GMT+4' uses
+# the abbreviation "GMT+4" and corresponds to 4 hours behind UTC
+# (i.e. west of Greenwich) even though many people would expect it to
+# mean 4 hours ahead of UTC (i.e. east of Greenwich).
+#
+# In the draft 5 of POSIX 1003.1-200x, the angle bracket notation
+# (which is not yet supported by the tz code) allows for
+# TZ='<GMT-4>+4'; if you want time zone abbreviations conforming to
+# ISO 8601 you can use TZ='<-0400>+4'.  Thus the commonly-expected
+# offset is kept within the angle bracket (and is used for display)
+# while the POSIX sign is kept outside the angle bracket (and is used
+# for calculation).
+#
+# Do not use a TZ setting like TZ='GMT+4', which is four hours behind
+# GMT but uses the completely misleading abbreviation "GMT".
+
+# Earlier incarnations of this package were not POSIX-compliant,
+# and had lines such as
+#		Zone	GMT-12		-12	-	GMT-1200
+# We did not want things to change quietly if someone accustomed to the old
+# way does a
+#		zic -l GMT-12
+# so we moved the names into the Etc subdirectory.
+
+Zone	Etc/GMT-14	14	-	GMT-14	# 14 hours ahead of GMT
+Zone	Etc/GMT-13	13	-	GMT-13
+Zone	Etc/GMT-12	12	-	GMT-12
+Zone	Etc/GMT-11	11	-	GMT-11
+Zone	Etc/GMT-10	10	-	GMT-10
+Zone	Etc/GMT-9	9	-	GMT-9
+Zone	Etc/GMT-8	8	-	GMT-8
+Zone	Etc/GMT-7	7	-	GMT-7
+Zone	Etc/GMT-6	6	-	GMT-6
+Zone	Etc/GMT-5	5	-	GMT-5
+Zone	Etc/GMT-4	4	-	GMT-4
+Zone	Etc/GMT-3	3	-	GMT-3
+Zone	Etc/GMT-2	2	-	GMT-2
+Zone	Etc/GMT-1	1	-	GMT-1
+Zone	Etc/GMT+1	-1	-	GMT+1
+Zone	Etc/GMT+2	-2	-	GMT+2
+Zone	Etc/GMT+3	-3	-	GMT+3
+Zone	Etc/GMT+4	-4	-	GMT+4
+Zone	Etc/GMT+5	-5	-	GMT+5
+Zone	Etc/GMT+6	-6	-	GMT+6
+Zone	Etc/GMT+7	-7	-	GMT+7
+Zone	Etc/GMT+8	-8	-	GMT+8
+Zone	Etc/GMT+9	-9	-	GMT+9
+Zone	Etc/GMT+10	-10	-	GMT+10
+Zone	Etc/GMT+11	-11	-	GMT+11
+Zone	Etc/GMT+12	-12	-	GMT+12
Index: libkcal/libical/tzdata/solar87
===================================================================
--- libkcal/libical/tzdata/solar87	(.../tags/KDE/3.5.6/kdepim)	(wersja 0)
+++ libkcal/libical/tzdata/solar87	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -0,0 +1,388 @@
+# @(#)solar87	8.1
+
+# So much for footnotes about Saudi Arabia.
+# Apparent noon times below are for Riyadh; your mileage will vary.
+# Times were computed using formulas in the U.S. Naval Observatory's
+# Almanac for Computers 1987; the formulas "will give EqT to an accuracy of
+# [plus or minus two] seconds during the current year."
+#
+# Rounding to the nearest five seconds results in fewer than
+# 256 different "time types"--a limit that's faced because time types are
+# stored on disk as unsigned chars.
+
+# Rule	NAME	FROM	TO	TYPE	IN	ON	AT	SAVE	LETTER/S
+Rule	sol87	1987	only	-	Jan	1	12:03:20s -0:03:20 -
+Rule	sol87	1987	only	-	Jan	2	12:03:50s -0:03:50 -
+Rule	sol87	1987	only	-	Jan	3	12:04:15s -0:04:15 -
+Rule	sol87	1987	only	-	Jan	4	12:04:45s -0:04:45 -
+Rule	sol87	1987	only	-	Jan	5	12:05:10s -0:05:10 -
+Rule	sol87	1987	only	-	Jan	6	12:05:40s -0:05:40 -
+Rule	sol87	1987	only	-	Jan	7	12:06:05s -0:06:05 -
+Rule	sol87	1987	only	-	Jan	8	12:06:30s -0:06:30 -
+Rule	sol87	1987	only	-	Jan	9	12:06:55s -0:06:55 -
+Rule	sol87	1987	only	-	Jan	10	12:07:20s -0:07:20 -
+Rule	sol87	1987	only	-	Jan	11	12:07:45s -0:07:45 -
+Rule	sol87	1987	only	-	Jan	12	12:08:10s -0:08:10 -
+Rule	sol87	1987	only	-	Jan	13	12:08:30s -0:08:30 -
+Rule	sol87	1987	only	-	Jan	14	12:08:55s -0:08:55 -
+Rule	sol87	1987	only	-	Jan	15	12:09:15s -0:09:15 -
+Rule	sol87	1987	only	-	Jan	16	12:09:35s -0:09:35 -
+Rule	sol87	1987	only	-	Jan	17	12:09:55s -0:09:55 -
+Rule	sol87	1987	only	-	Jan	18	12:10:15s -0:10:15 -
+Rule	sol87	1987	only	-	Jan	19	12:10:35s -0:10:35 -
+Rule	sol87	1987	only	-	Jan	20	12:10:55s -0:10:55 -
+Rule	sol87	1987	only	-	Jan	21	12:11:10s -0:11:10 -
+Rule	sol87	1987	only	-	Jan	22	12:11:30s -0:11:30 -
+Rule	sol87	1987	only	-	Jan	23	12:11:45s -0:11:45 -
+Rule	sol87	1987	only	-	Jan	24	12:12:00s -0:12:00 -
+Rule	sol87	1987	only	-	Jan	25	12:12:15s -0:12:15 -
+Rule	sol87	1987	only	-	Jan	26	12:12:30s -0:12:30 -
+Rule	sol87	1987	only	-	Jan	27	12:12:40s -0:12:40 -
+Rule	sol87	1987	only	-	Jan	28	12:12:55s -0:12:55 -
+Rule	sol87	1987	only	-	Jan	29	12:13:05s -0:13:05 -
+Rule	sol87	1987	only	-	Jan	30	12:13:15s -0:13:15 -
+Rule	sol87	1987	only	-	Jan	31	12:13:25s -0:13:25 -
+Rule	sol87	1987	only	-	Feb	1	12:13:35s -0:13:35 -
+Rule	sol87	1987	only	-	Feb	2	12:13:40s -0:13:40 -
+Rule	sol87	1987	only	-	Feb	3	12:13:50s -0:13:50 -
+Rule	sol87	1987	only	-	Feb	4	12:13:55s -0:13:55 -
+Rule	sol87	1987	only	-	Feb	5	12:14:00s -0:14:00 -
+Rule	sol87	1987	only	-	Feb	6	12:14:05s -0:14:05 -
+Rule	sol87	1987	only	-	Feb	7	12:14:10s -0:14:10 -
+Rule	sol87	1987	only	-	Feb	8	12:14:10s -0:14:10 -
+Rule	sol87	1987	only	-	Feb	9	12:14:15s -0:14:15 -
+Rule	sol87	1987	only	-	Feb	10	12:14:15s -0:14:15 -
+Rule	sol87	1987	only	-	Feb	11	12:14:15s -0:14:15 -
+Rule	sol87	1987	only	-	Feb	12	12:14:15s -0:14:15 -
+Rule	sol87	1987	only	-	Feb	13	12:14:15s -0:14:15 -
+Rule	sol87	1987	only	-	Feb	14	12:14:15s -0:14:15 -
+Rule	sol87	1987	only	-	Feb	15	12:14:10s -0:14:10 -
+Rule	sol87	1987	only	-	Feb	16	12:14:10s -0:14:10 -
+Rule	sol87	1987	only	-	Feb	17	12:14:05s -0:14:05 -
+Rule	sol87	1987	only	-	Feb	18	12:14:00s -0:14:00 -
+Rule	sol87	1987	only	-	Feb	19	12:13:55s -0:13:55 -
+Rule	sol87	1987	only	-	Feb	20	12:13:50s -0:13:50 -
+Rule	sol87	1987	only	-	Feb	21	12:13:45s -0:13:45 -
+Rule	sol87	1987	only	-	Feb	22	12:13:35s -0:13:35 -
+Rule	sol87	1987	only	-	Feb	23	12:13:30s -0:13:30 -
+Rule	sol87	1987	only	-	Feb	24	12:13:20s -0:13:20 -
+Rule	sol87	1987	only	-	Feb	25	12:13:10s -0:13:10 -
+Rule	sol87	1987	only	-	Feb	26	12:13:00s -0:13:00 -
+Rule	sol87	1987	only	-	Feb	27	12:12:50s -0:12:50 -
+Rule	sol87	1987	only	-	Feb	28	12:12:40s -0:12:40 -
+Rule	sol87	1987	only	-	Mar	1	12:12:30s -0:12:30 -
+Rule	sol87	1987	only	-	Mar	2	12:12:20s -0:12:20 -
+Rule	sol87	1987	only	-	Mar	3	12:12:05s -0:12:05 -
+Rule	sol87	1987	only	-	Mar	4	12:11:55s -0:11:55 -
+Rule	sol87	1987	only	-	Mar	5	12:11:40s -0:11:40 -
+Rule	sol87	1987	only	-	Mar	6	12:11:25s -0:11:25 -
+Rule	sol87	1987	only	-	Mar	7	12:11:15s -0:11:15 -
+Rule	sol87	1987	only	-	Mar	8	12:11:00s -0:11:00 -
+Rule	sol87	1987	only	-	Mar	9	12:10:45s -0:10:45 -
+Rule	sol87	1987	only	-	Mar	10	12:10:30s -0:10:30 -
+Rule	sol87	1987	only	-	Mar	11	12:10:15s -0:10:15 -
+Rule	sol87	1987	only	-	Mar	12	12:09:55s -0:09:55 -
+Rule	sol87	1987	only	-	Mar	13	12:09:40s -0:09:40 -
+Rule	sol87	1987	only	-	Mar	14	12:09:25s -0:09:25 -
+Rule	sol87	1987	only	-	Mar	15	12:09:10s -0:09:10 -
+Rule	sol87	1987	only	-	Mar	16	12:08:50s -0:08:50 -
+Rule	sol87	1987	only	-	Mar	17	12:08:35s -0:08:35 -
+Rule	sol87	1987	only	-	Mar	18	12:08:15s -0:08:15 -
+Rule	sol87	1987	only	-	Mar	19	12:08:00s -0:08:00 -
+Rule	sol87	1987	only	-	Mar	20	12:07:40s -0:07:40 -
+Rule	sol87	1987	only	-	Mar	21	12:07:25s -0:07:25 -
+Rule	sol87	1987	only	-	Mar	22	12:07:05s -0:07:05 -
+Rule	sol87	1987	only	-	Mar	23	12:06:50s -0:06:50 -
+Rule	sol87	1987	only	-	Mar	24	12:06:30s -0:06:30 -
+Rule	sol87	1987	only	-	Mar	25	12:06:10s -0:06:10 -
+Rule	sol87	1987	only	-	Mar	26	12:05:55s -0:05:55 -
+Rule	sol87	1987	only	-	Mar	27	12:05:35s -0:05:35 -
+Rule	sol87	1987	only	-	Mar	28	12:05:15s -0:05:15 -
+Rule	sol87	1987	only	-	Mar	29	12:05:00s -0:05:00 -
+Rule	sol87	1987	only	-	Mar	30	12:04:40s -0:04:40 -
+Rule	sol87	1987	only	-	Mar	31	12:04:25s -0:04:25 -
+Rule	sol87	1987	only	-	Apr	1	12:04:05s -0:04:05 -
+Rule	sol87	1987	only	-	Apr	2	12:03:45s -0:03:45 -
+Rule	sol87	1987	only	-	Apr	3	12:03:30s -0:03:30 -
+Rule	sol87	1987	only	-	Apr	4	12:03:10s -0:03:10 -
+Rule	sol87	1987	only	-	Apr	5	12:02:55s -0:02:55 -
+Rule	sol87	1987	only	-	Apr	6	12:02:35s -0:02:35 -
+Rule	sol87	1987	only	-	Apr	7	12:02:20s -0:02:20 -
+Rule	sol87	1987	only	-	Apr	8	12:02:05s -0:02:05 -
+Rule	sol87	1987	only	-	Apr	9	12:01:45s -0:01:45 -
+Rule	sol87	1987	only	-	Apr	10	12:01:30s -0:01:30 -
+Rule	sol87	1987	only	-	Apr	11	12:01:15s -0:01:15 -
+Rule	sol87	1987	only	-	Apr	12	12:00:55s -0:00:55 -
+Rule	sol87	1987	only	-	Apr	13	12:00:40s -0:00:40 -
+Rule	sol87	1987	only	-	Apr	14	12:00:25s -0:00:25 -
+Rule	sol87	1987	only	-	Apr	15	12:00:10s -0:00:10 -
+Rule	sol87	1987	only	-	Apr	16	11:59:55s 0:00:05 -
+Rule	sol87	1987	only	-	Apr	17	11:59:45s 0:00:15 -
+Rule	sol87	1987	only	-	Apr	18	11:59:30s 0:00:30 -
+Rule	sol87	1987	only	-	Apr	19	11:59:15s 0:00:45 -
+Rule	sol87	1987	only	-	Apr	20	11:59:05s 0:00:55 -
+Rule	sol87	1987	only	-	Apr	21	11:58:50s 0:01:10 -
+Rule	sol87	1987	only	-	Apr	22	11:58:40s 0:01:20 -
+Rule	sol87	1987	only	-	Apr	23	11:58:25s 0:01:35 -
+Rule	sol87	1987	only	-	Apr	24	11:58:15s 0:01:45 -
+Rule	sol87	1987	only	-	Apr	25	11:58:05s 0:01:55 -
+Rule	sol87	1987	only	-	Apr	26	11:57:55s 0:02:05 -
+Rule	sol87	1987	only	-	Apr	27	11:57:45s 0:02:15 -
+Rule	sol87	1987	only	-	Apr	28	11:57:35s 0:02:25 -
+Rule	sol87	1987	only	-	Apr	29	11:57:25s 0:02:35 -
+Rule	sol87	1987	only	-	Apr	30	11:57:15s 0:02:45 -
+Rule	sol87	1987	only	-	May	1	11:57:10s 0:02:50 -
+Rule	sol87	1987	only	-	May	2	11:57:00s 0:03:00 -
+Rule	sol87	1987	only	-	May	3	11:56:55s 0:03:05 -
+Rule	sol87	1987	only	-	May	4	11:56:50s 0:03:10 -
+Rule	sol87	1987	only	-	May	5	11:56:45s 0:03:15 -
+Rule	sol87	1987	only	-	May	6	11:56:40s 0:03:20 -
+Rule	sol87	1987	only	-	May	7	11:56:35s 0:03:25 -
+Rule	sol87	1987	only	-	May	8	11:56:30s 0:03:30 -
+Rule	sol87	1987	only	-	May	9	11:56:25s 0:03:35 -
+Rule	sol87	1987	only	-	May	10	11:56:25s 0:03:35 -
+Rule	sol87	1987	only	-	May	11	11:56:20s 0:03:40 -
+Rule	sol87	1987	only	-	May	12	11:56:20s 0:03:40 -
+Rule	sol87	1987	only	-	May	13	11:56:20s 0:03:40 -
+Rule	sol87	1987	only	-	May	14	11:56:20s 0:03:40 -
+Rule	sol87	1987	only	-	May	15	11:56:20s 0:03:40 -
+Rule	sol87	1987	only	-	May	16	11:56:20s 0:03:40 -
+Rule	sol87	1987	only	-	May	17	11:56:20s 0:03:40 -
+Rule	sol87	1987	only	-	May	18	11:56:20s 0:03:40 -
+Rule	sol87	1987	only	-	May	19	11:56:25s 0:03:35 -
+Rule	sol87	1987	only	-	May	20	11:56:25s 0:03:35 -
+Rule	sol87	1987	only	-	May	21	11:56:30s 0:03:30 -
+Rule	sol87	1987	only	-	May	22	11:56:35s 0:03:25 -
+Rule	sol87	1987	only	-	May	23	11:56:40s 0:03:20 -
+Rule	sol87	1987	only	-	May	24	11:56:45s 0:03:15 -
+Rule	sol87	1987	only	-	May	25	11:56:50s 0:03:10 -
+Rule	sol87	1987	only	-	May	26	11:56:55s 0:03:05 -
+Rule	sol87	1987	only	-	May	27	11:57:00s 0:03:00 -
+Rule	sol87	1987	only	-	May	28	11:57:10s 0:02:50 -
+Rule	sol87	1987	only	-	May	29	11:57:15s 0:02:45 -
+Rule	sol87	1987	only	-	May	30	11:57:25s 0:02:35 -
+Rule	sol87	1987	only	-	May	31	11:57:30s 0:02:30 -
+Rule	sol87	1987	only	-	Jun	1	11:57:40s 0:02:20 -
+Rule	sol87	1987	only	-	Jun	2	11:57:50s 0:02:10 -
+Rule	sol87	1987	only	-	Jun	3	11:58:00s 0:02:00 -
+Rule	sol87	1987	only	-	Jun	4	11:58:10s 0:01:50 -
+Rule	sol87	1987	only	-	Jun	5	11:58:20s 0:01:40 -
+Rule	sol87	1987	only	-	Jun	6	11:58:30s 0:01:30 -
+Rule	sol87	1987	only	-	Jun	7	11:58:40s 0:01:20 -
+Rule	sol87	1987	only	-	Jun	8	11:58:50s 0:01:10 -
+Rule	sol87	1987	only	-	Jun	9	11:59:05s 0:00:55 -
+Rule	sol87	1987	only	-	Jun	10	11:59:15s 0:00:45 -
+Rule	sol87	1987	only	-	Jun	11	11:59:30s 0:00:30 -
+Rule	sol87	1987	only	-	Jun	12	11:59:40s 0:00:20 -
+Rule	sol87	1987	only	-	Jun	13	11:59:50s 0:00:10 -
+Rule	sol87	1987	only	-	Jun	14	12:00:05s -0:00:05 -
+Rule	sol87	1987	only	-	Jun	15	12:00:15s -0:00:15 -
+Rule	sol87	1987	only	-	Jun	16	12:00:30s -0:00:30 -
+Rule	sol87	1987	only	-	Jun	17	12:00:45s -0:00:45 -
+Rule	sol87	1987	only	-	Jun	18	12:00:55s -0:00:55 -
+Rule	sol87	1987	only	-	Jun	19	12:01:10s -0:01:10 -
+Rule	sol87	1987	only	-	Jun	20	12:01:20s -0:01:20 -
+Rule	sol87	1987	only	-	Jun	21	12:01:35s -0:01:35 -
+Rule	sol87	1987	only	-	Jun	22	12:01:50s -0:01:50 -
+Rule	sol87	1987	only	-	Jun	23	12:02:00s -0:02:00 -
+Rule	sol87	1987	only	-	Jun	24	12:02:15s -0:02:15 -
+Rule	sol87	1987	only	-	Jun	25	12:02:25s -0:02:25 -
+Rule	sol87	1987	only	-	Jun	26	12:02:40s -0:02:40 -
+Rule	sol87	1987	only	-	Jun	27	12:02:50s -0:02:50 -
+Rule	sol87	1987	only	-	Jun	28	12:03:05s -0:03:05 -
+Rule	sol87	1987	only	-	Jun	29	12:03:15s -0:03:15 -
+Rule	sol87	1987	only	-	Jun	30	12:03:30s -0:03:30 -
+Rule	sol87	1987	only	-	Jul	1	12:03:40s -0:03:40 -
+Rule	sol87	1987	only	-	Jul	2	12:03:50s -0:03:50 -
+Rule	sol87	1987	only	-	Jul	3	12:04:05s -0:04:05 -
+Rule	sol87	1987	only	-	Jul	4	12:04:15s -0:04:15 -
+Rule	sol87	1987	only	-	Jul	5	12:04:25s -0:04:25 -
+Rule	sol87	1987	only	-	Jul	6	12:04:35s -0:04:35 -
+Rule	sol87	1987	only	-	Jul	7	12:04:45s -0:04:45 -
+Rule	sol87	1987	only	-	Jul	8	12:04:55s -0:04:55 -
+Rule	sol87	1987	only	-	Jul	9	12:05:05s -0:05:05 -
+Rule	sol87	1987	only	-	Jul	10	12:05:15s -0:05:15 -
+Rule	sol87	1987	only	-	Jul	11	12:05:20s -0:05:20 -
+Rule	sol87	1987	only	-	Jul	12	12:05:30s -0:05:30 -
+Rule	sol87	1987	only	-	Jul	13	12:05:40s -0:05:40 -
+Rule	sol87	1987	only	-	Jul	14	12:05:45s -0:05:45 -
+Rule	sol87	1987	only	-	Jul	15	12:05:50s -0:05:50 -
+Rule	sol87	1987	only	-	Jul	16	12:06:00s -0:06:00 -
+Rule	sol87	1987	only	-	Jul	17	12:06:05s -0:06:05 -
+Rule	sol87	1987	only	-	Jul	18	12:06:10s -0:06:10 -
+Rule	sol87	1987	only	-	Jul	19	12:06:15s -0:06:15 -
+Rule	sol87	1987	only	-	Jul	20	12:06:15s -0:06:15 -
+Rule	sol87	1987	only	-	Jul	21	12:06:20s -0:06:20 -
+Rule	sol87	1987	only	-	Jul	22	12:06:25s -0:06:25 -
+Rule	sol87	1987	only	-	Jul	23	12:06:25s -0:06:25 -
+Rule	sol87	1987	only	-	Jul	24	12:06:25s -0:06:25 -
+Rule	sol87	1987	only	-	Jul	25	12:06:30s -0:06:30 -
+Rule	sol87	1987	only	-	Jul	26	12:06:30s -0:06:30 -
+Rule	sol87	1987	only	-	Jul	27	12:06:30s -0:06:30 -
+Rule	sol87	1987	only	-	Jul	28	12:06:30s -0:06:30 -
+Rule	sol87	1987	only	-	Jul	29	12:06:25s -0:06:25 -
+Rule	sol87	1987	only	-	Jul	30	12:06:25s -0:06:25 -
+Rule	sol87	1987	only	-	Jul	31	12:06:25s -0:06:25 -
+Rule	sol87	1987	only	-	Aug	1	12:06:20s -0:06:20 -
+Rule	sol87	1987	only	-	Aug	2	12:06:15s -0:06:15 -
+Rule	sol87	1987	only	-	Aug	3	12:06:10s -0:06:10 -
+Rule	sol87	1987	only	-	Aug	4	12:06:05s -0:06:05 -
+Rule	sol87	1987	only	-	Aug	5	12:06:00s -0:06:00 -
+Rule	sol87	1987	only	-	Aug	6	12:05:55s -0:05:55 -
+Rule	sol87	1987	only	-	Aug	7	12:05:50s -0:05:50 -
+Rule	sol87	1987	only	-	Aug	8	12:05:40s -0:05:40 -
+Rule	sol87	1987	only	-	Aug	9	12:05:35s -0:05:35 -
+Rule	sol87	1987	only	-	Aug	10	12:05:25s -0:05:25 -
+Rule	sol87	1987	only	-	Aug	11	12:05:15s -0:05:15 -
+Rule	sol87	1987	only	-	Aug	12	12:05:05s -0:05:05 -
+Rule	sol87	1987	only	-	Aug	13	12:04:55s -0:04:55 -
+Rule	sol87	1987	only	-	Aug	14	12:04:45s -0:04:45 -
+Rule	sol87	1987	only	-	Aug	15	12:04:35s -0:04:35 -
+Rule	sol87	1987	only	-	Aug	16	12:04:25s -0:04:25 -
+Rule	sol87	1987	only	-	Aug	17	12:04:10s -0:04:10 -
+Rule	sol87	1987	only	-	Aug	18	12:04:00s -0:04:00 -
+Rule	sol87	1987	only	-	Aug	19	12:03:45s -0:03:45 -
+Rule	sol87	1987	only	-	Aug	20	12:03:30s -0:03:30 -
+Rule	sol87	1987	only	-	Aug	21	12:03:15s -0:03:15 -
+Rule	sol87	1987	only	-	Aug	22	12:03:00s -0:03:00 -
+Rule	sol87	1987	only	-	Aug	23	12:02:45s -0:02:45 -
+Rule	sol87	1987	only	-	Aug	24	12:02:30s -0:02:30 -
+Rule	sol87	1987	only	-	Aug	25	12:02:15s -0:02:15 -
+Rule	sol87	1987	only	-	Aug	26	12:02:00s -0:02:00 -
+Rule	sol87	1987	only	-	Aug	27	12:01:40s -0:01:40 -
+Rule	sol87	1987	only	-	Aug	28	12:01:25s -0:01:25 -
+Rule	sol87	1987	only	-	Aug	29	12:01:05s -0:01:05 -
+Rule	sol87	1987	only	-	Aug	30	12:00:50s -0:00:50 -
+Rule	sol87	1987	only	-	Aug	31	12:00:30s -0:00:30 -
+Rule	sol87	1987	only	-	Sep	1	12:00:10s -0:00:10 -
+Rule	sol87	1987	only	-	Sep	2	11:59:50s 0:00:10 -
+Rule	sol87	1987	only	-	Sep	3	11:59:35s 0:00:25 -
+Rule	sol87	1987	only	-	Sep	4	11:59:15s 0:00:45 -
+Rule	sol87	1987	only	-	Sep	5	11:58:55s 0:01:05 -
+Rule	sol87	1987	only	-	Sep	6	11:58:35s 0:01:25 -
+Rule	sol87	1987	only	-	Sep	7	11:58:15s 0:01:45 -
+Rule	sol87	1987	only	-	Sep	8	11:57:55s 0:02:05 -
+Rule	sol87	1987	only	-	Sep	9	11:57:30s 0:02:30 -
+Rule	sol87	1987	only	-	Sep	10	11:57:10s 0:02:50 -
+Rule	sol87	1987	only	-	Sep	11	11:56:50s 0:03:10 -
+Rule	sol87	1987	only	-	Sep	12	11:56:30s 0:03:30 -
+Rule	sol87	1987	only	-	Sep	13	11:56:10s 0:03:50 -
+Rule	sol87	1987	only	-	Sep	14	11:55:45s 0:04:15 -
+Rule	sol87	1987	only	-	Sep	15	11:55:25s 0:04:35 -
+Rule	sol87	1987	only	-	Sep	16	11:55:05s 0:04:55 -
+Rule	sol87	1987	only	-	Sep	17	11:54:45s 0:05:15 -
+Rule	sol87	1987	only	-	Sep	18	11:54:20s 0:05:40 -
+Rule	sol87	1987	only	-	Sep	19	11:54:00s 0:06:00 -
+Rule	sol87	1987	only	-	Sep	20	11:53:40s 0:06:20 -
+Rule	sol87	1987	only	-	Sep	21	11:53:15s 0:06:45 -
+Rule	sol87	1987	only	-	Sep	22	11:52:55s 0:07:05 -
+Rule	sol87	1987	only	-	Sep	23	11:52:35s 0:07:25 -
+Rule	sol87	1987	only	-	Sep	24	11:52:15s 0:07:45 -
+Rule	sol87	1987	only	-	Sep	25	11:51:55s 0:08:05 -
+Rule	sol87	1987	only	-	Sep	26	11:51:35s 0:08:25 -
+Rule	sol87	1987	only	-	Sep	27	11:51:10s 0:08:50 -
+Rule	sol87	1987	only	-	Sep	28	11:50:50s 0:09:10 -
+Rule	sol87	1987	only	-	Sep	29	11:50:30s 0:09:30 -
+Rule	sol87	1987	only	-	Sep	30	11:50:10s 0:09:50 -
+Rule	sol87	1987	only	-	Oct	1	11:49:50s 0:10:10 -
+Rule	sol87	1987	only	-	Oct	2	11:49:35s 0:10:25 -
+Rule	sol87	1987	only	-	Oct	3	11:49:15s 0:10:45 -
+Rule	sol87	1987	only	-	Oct	4	11:48:55s 0:11:05 -
+Rule	sol87	1987	only	-	Oct	5	11:48:35s 0:11:25 -
+Rule	sol87	1987	only	-	Oct	6	11:48:20s 0:11:40 -
+Rule	sol87	1987	only	-	Oct	7	11:48:00s 0:12:00 -
+Rule	sol87	1987	only	-	Oct	8	11:47:45s 0:12:15 -
+Rule	sol87	1987	only	-	Oct	9	11:47:25s 0:12:35 -
+Rule	sol87	1987	only	-	Oct	10	11:47:10s 0:12:50 -
+Rule	sol87	1987	only	-	Oct	11	11:46:55s 0:13:05 -
+Rule	sol87	1987	only	-	Oct	12	11:46:40s 0:13:20 -
+Rule	sol87	1987	only	-	Oct	13	11:46:25s 0:13:35 -
+Rule	sol87	1987	only	-	Oct	14	11:46:10s 0:13:50 -
+Rule	sol87	1987	only	-	Oct	15	11:45:55s 0:14:05 -
+Rule	sol87	1987	only	-	Oct	16	11:45:45s 0:14:15 -
+Rule	sol87	1987	only	-	Oct	17	11:45:30s 0:14:30 -
+Rule	sol87	1987	only	-	Oct	18	11:45:20s 0:14:40 -
+Rule	sol87	1987	only	-	Oct	19	11:45:05s 0:14:55 -
+Rule	sol87	1987	only	-	Oct	20	11:44:55s 0:15:05 -
+Rule	sol87	1987	only	-	Oct	21	11:44:45s 0:15:15 -
+Rule	sol87	1987	only	-	Oct	22	11:44:35s 0:15:25 -
+Rule	sol87	1987	only	-	Oct	23	11:44:25s 0:15:35 -
+Rule	sol87	1987	only	-	Oct	24	11:44:20s 0:15:40 -
+Rule	sol87	1987	only	-	Oct	25	11:44:10s 0:15:50 -
+Rule	sol87	1987	only	-	Oct	26	11:44:05s 0:15:55 -
+Rule	sol87	1987	only	-	Oct	27	11:43:55s 0:16:05 -
+Rule	sol87	1987	only	-	Oct	28	11:43:50s 0:16:10 -
+Rule	sol87	1987	only	-	Oct	29	11:43:45s 0:16:15 -
+Rule	sol87	1987	only	-	Oct	30	11:43:45s 0:16:15 -
+Rule	sol87	1987	only	-	Oct	31	11:43:40s 0:16:20 -
+Rule	sol87	1987	only	-	Nov	1	11:43:40s 0:16:20 -
+Rule	sol87	1987	only	-	Nov	2	11:43:35s 0:16:25 -
+Rule	sol87	1987	only	-	Nov	3	11:43:35s 0:16:25 -
+Rule	sol87	1987	only	-	Nov	4	11:43:35s 0:16:25 -
+Rule	sol87	1987	only	-	Nov	5	11:43:35s 0:16:25 -
+Rule	sol87	1987	only	-	Nov	6	11:43:40s 0:16:20 -
+Rule	sol87	1987	only	-	Nov	7	11:43:40s 0:16:20 -
+Rule	sol87	1987	only	-	Nov	8	11:43:45s 0:16:15 -
+Rule	sol87	1987	only	-	Nov	9	11:43:50s 0:16:10 -
+Rule	sol87	1987	only	-	Nov	10	11:43:55s 0:16:05 -
+Rule	sol87	1987	only	-	Nov	11	11:44:00s 0:16:00 -
+Rule	sol87	1987	only	-	Nov	12	11:44:05s 0:15:55 -
+Rule	sol87	1987	only	-	Nov	13	11:44:15s 0:15:45 -
+Rule	sol87	1987	only	-	Nov	14	11:44:20s 0:15:40 -
+Rule	sol87	1987	only	-	Nov	15	11:44:30s 0:15:30 -
+Rule	sol87	1987	only	-	Nov	16	11:44:40s 0:15:20 -
+Rule	sol87	1987	only	-	Nov	17	11:44:50s 0:15:10 -
+Rule	sol87	1987	only	-	Nov	18	11:45:05s 0:14:55 -
+Rule	sol87	1987	only	-	Nov	19	11:45:15s 0:14:45 -
+Rule	sol87	1987	only	-	Nov	20	11:45:30s 0:14:30 -
+Rule	sol87	1987	only	-	Nov	21	11:45:45s 0:14:15 -
+Rule	sol87	1987	only	-	Nov	22	11:46:00s 0:14:00 -
+Rule	sol87	1987	only	-	Nov	23	11:46:15s 0:13:45 -
+Rule	sol87	1987	only	-	Nov	24	11:46:30s 0:13:30 -
+Rule	sol87	1987	only	-	Nov	25	11:46:50s 0:13:10 -
+Rule	sol87	1987	only	-	Nov	26	11:47:10s 0:12:50 -
+Rule	sol87	1987	only	-	Nov	27	11:47:25s 0:12:35 -
+Rule	sol87	1987	only	-	Nov	28	11:47:45s 0:12:15 -
+Rule	sol87	1987	only	-	Nov	29	11:48:05s 0:11:55 -
+Rule	sol87	1987	only	-	Nov	30	11:48:30s 0:11:30 -
+Rule	sol87	1987	only	-	Dec	1	11:48:50s 0:11:10 -
+Rule	sol87	1987	only	-	Dec	2	11:49:10s 0:10:50 -
+Rule	sol87	1987	only	-	Dec	3	11:49:35s 0:10:25 -
+Rule	sol87	1987	only	-	Dec	4	11:50:00s 0:10:00 -
+Rule	sol87	1987	only	-	Dec	5	11:50:25s 0:09:35 -
+Rule	sol87	1987	only	-	Dec	6	11:50:50s 0:09:10 -
+Rule	sol87	1987	only	-	Dec	7	11:51:15s 0:08:45 -
+Rule	sol87	1987	only	-	Dec	8	11:51:40s 0:08:20 -
+Rule	sol87	1987	only	-	Dec	9	11:52:05s 0:07:55 -
+Rule	sol87	1987	only	-	Dec	10	11:52:30s 0:07:30 -
+Rule	sol87	1987	only	-	Dec	11	11:53:00s 0:07:00 -
+Rule	sol87	1987	only	-	Dec	12	11:53:25s 0:06:35 -
+Rule	sol87	1987	only	-	Dec	13	11:53:55s 0:06:05 -
+Rule	sol87	1987	only	-	Dec	14	11:54:25s 0:05:35 -
+Rule	sol87	1987	only	-	Dec	15	11:54:50s 0:05:10 -
+Rule	sol87	1987	only	-	Dec	16	11:55:20s 0:04:40 -
+Rule	sol87	1987	only	-	Dec	17	11:55:50s 0:04:10 -
+Rule	sol87	1987	only	-	Dec	18	11:56:20s 0:03:40 -
+Rule	sol87	1987	only	-	Dec	19	11:56:50s 0:03:10 -
+Rule	sol87	1987	only	-	Dec	20	11:57:20s 0:02:40 -
+Rule	sol87	1987	only	-	Dec	21	11:57:50s 0:02:10 -
+Rule	sol87	1987	only	-	Dec	22	11:58:20s 0:01:40 -
+Rule	sol87	1987	only	-	Dec	23	11:58:50s 0:01:10 -
+Rule	sol87	1987	only	-	Dec	24	11:59:20s 0:00:40 -
+Rule	sol87	1987	only	-	Dec	25	11:59:50s 0:00:10 -
+Rule	sol87	1987	only	-	Dec	26	12:00:20s -0:00:20 -
+Rule	sol87	1987	only	-	Dec	27	12:00:45s -0:00:45 -
+Rule	sol87	1987	only	-	Dec	28	12:01:15s -0:01:15 -
+Rule	sol87	1987	only	-	Dec	29	12:01:45s -0:01:45 -
+Rule	sol87	1987	only	-	Dec	30	12:02:15s -0:02:15 -
+Rule	sol87	1987	only	-	Dec	31	12:02:45s -0:02:45 -
+
+# Riyadh is at about 46 degrees 46 minutes East:  3 hrs, 7 mins, 4 secs
+# Before and after 1987, we'll operate on local mean solar time.
+
+# Zone	NAME		GMTOFF	RULES/SAVE	FORMAT	[UNTIL]
+Zone	Asia/Riyadh87	3:07:04	-		zzz	1987
+			3:07:04	sol87		zzz	1988
+			3:07:04	-		zzz
+# For backward compatibility...
+Link	Asia/Riyadh87	Mideast/Riyadh87
Index: libkcal/libical/tzdata/europe
===================================================================
--- libkcal/libical/tzdata/europe	(.../tags/KDE/3.5.6/kdepim)	(wersja 0)
+++ libkcal/libical/tzdata/europe	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -0,0 +1,2519 @@
+# @(#)europe	8.10
+# <pre>
+
+# This data is by no means authoritative; if you think you know better,
+# go ahead and edit the file (and please send any changes to
+# tz@elsie.nci.nih.gov for general use in the future).
+
+# From Paul Eggert (2006-03-22):
+# A good source for time zone historical data outside the U.S. is
+# Thomas G. Shanks and Rique Pottenger, The International Atlas (6th edition),
+# San Diego: ACS Publications, Inc. (2003).
+#
+# Gwillim Law writes that a good source
+# for recent time zone data is the International Air Transport
+# Association's Standard Schedules Information Manual (IATA SSIM),
+# published semiannually.  Law sent in several helpful summaries
+# of the IATA's data after 1990.
+#
+# Except where otherwise noted, Shanks & Pottenger is the source for
+# entries through 1991, and IATA SSIM is the source for entries afterwards.
+#
+# Other sources occasionally used include:
+#
+#	Edward W. Whitman, World Time Differences,
+#	Whitman Publishing Co, 2 Niagara Av, Ealing, London (undated),
+#	which I found in the UCLA library.
+#
+#	<a href="http://www.pettswoodvillage.co.uk/Daylight_Savings_William_Willett.pdf">
+#	William Willett, The Waste of Daylight, 19th edition
+#	</a> (1914-03)
+#
+#	Brazil's Departamento Servico da Hora (DSH),
+#	<a href="http://pcdsh01.on.br/HISTHV.htm">
+#	History of Summer Time
+#	</a> (1998-09-21, in Portuguese)
+
+#
+# I invented the abbreviations marked `*' in the following table;
+# the rest are from earlier versions of this file, or from other sources.
+# Corrections are welcome!
+#                   std dst  2dst
+#                   LMT           Local Mean Time
+#       -4:00       AST ADT       Atlantic
+#       -3:00       WGT WGST      Western Greenland*
+#       -1:00       EGT EGST      Eastern Greenland*
+#        0:00       GMT BST  BDST Greenwich, British Summer
+#        0:00       GMT IST       Greenwich, Irish Summer
+#        0:00       WET WEST WEMT Western Europe
+#        0:19:32.13 AMT NST       Amsterdam, Netherlands Summer (1835-1937)*
+#        0:20       NET NEST      Netherlands (1937-1940)*
+#        1:00       CET CEST CEMT Central Europe
+#        1:00:14    SET           Swedish (1879-1899)*
+#        2:00       EET EEST      Eastern Europe
+#        3:00       MSK MSD       Moscow
+#
+# A reliable and entertaining source about time zones, especially in Britain,
+# Derek Howse, Greenwich time and longitude, Philip Wilson Publishers (1997).
+
+# From Peter Ilieve (1994-12-04),
+# The original six [EU members]: Belgium, France, (West) Germany, Italy,
+# Luxembourg, the Netherlands.
+# Plus, from 1 Jan 73: Denmark, Ireland, United Kingdom.
+# Plus, from 1 Jan 81: Greece.
+# Plus, from 1 Jan 86: Spain, Portugal.
+# Plus, from 1 Jan 95: Austria, Finland, Sweden. (Norway negotiated terms for
+# entry but in a referendum on 28 Nov 94 the people voted No by 52.2% to 47.8%
+# on a turnout of 88.6%. This was almost the same result as Norway's previous
+# referendum in 1972, they are the only country to have said No twice.
+# Referendums in the other three countries voted Yes.)
+# ...
+# Estonia ... uses EU dates but not at 01:00 GMT, they use midnight GMT.
+# I don't think they know yet what they will do from 1996 onwards.
+# ...
+# There shouldn't be any [current members who are not using EU rules].
+# A Directive has the force of law, member states are obliged to enact
+# national law to implement it. The only contentious issue was the
+# different end date for the UK and Ireland, and this was always allowed
+# in the Directive.
+
+
+###############################################################################
+
+# Britain (United Kingdom) and Ireland (Eire)
+
+# From Peter Ilieve (1994-07-06):
+#
+# On 17 Jan 1994 the Independent, a UK quality newspaper, had a piece about
+# historical vistas along the Thames in west London. There was a photo
+# and a sketch map showing some of the sightlines involved. One paragraph
+# of the text said:
+#
+# `An old stone obelisk marking a forgotten terrestrial meridian stands
+# beside the river at Kew. In the 18th century, before time and longitude
+# was standardised by the Royal Observatory in Greenwich, scholars observed
+# this stone and the movement of stars from Kew Observatory nearby. They
+# made their calculations and set the time for the Horse Guards and Parliament,
+# but now the stone is obscured by scrubwood and can only be seen by walking
+# along the towpath within a few yards of it.'
+#
+# I have a one inch to one mile map of London and my estimate of the stone's
+# position is 51 deg. 28' 30" N, 0 deg. 18' 45" W. The longitude should
+# be within about +-2". The Ordnance Survey grid reference is TQ172761.
+#
+# [This yields GMTOFF = -0:01:15 for London LMT in the 18th century.]
+
+# From Paul Eggert (1993-11-18):
+#
+# Howse writes that Britain was the first country to use standard time.
+# The railways cared most about the inconsistencies of local mean time,
+# and it was they who forced a uniform time on the country.
+# The original idea was credited to Dr. William Hyde Wollaston (1766-1828)
+# and was popularized by Abraham Follett Osler (1808-1903).
+# The first railway to adopt London time was the Great Western Railway
+# in November 1840; other railways followed suit, and by 1847 most
+# (though not all) railways used London time.  On 1847-09-22 the
+# Railway Clearing House, an industry standards body, recommended that GMT be
+# adopted at all stations as soon as the General Post Office permitted it.
+# The transition occurred on 12-01 for the L&NW, the Caledonian,
+# and presumably other railways; the January 1848 Bradshaw's lists many
+# railways as using GMT.  By 1855 the vast majority of public
+# clocks in Britain were set to GMT (though some, like the great clock
+# on Tom Tower at Christ Church, Oxford, were fitted with two minute hands,
+# one for local time and one for GMT).  The last major holdout was the legal
+# system, which stubbornly stuck to local time for many years, leading
+# to oddities like polls opening at 08:13 and closing at 16:13.
+# The legal system finally switched to GMT when the Statutes (Definition
+# of Time) Act took effect; it received the Royal Assent on 1880-08-02.
+#
+# In the tables below, we condense this complicated story into a single
+# transition date for London, namely 1847-12-01.  We don't know as much
+# about Dublin, so we use 1880-08-02, the legal transition time.
+
+# From Paul Eggert (2003-09-27):
+# Summer Time was first seriously proposed by William Willett (1857-1915),
+# a London builder and member of the Royal Astronomical Society
+# who circulated a pamphlet ``The Waste of Daylight'' (1907)
+# that proposed advancing clocks 20 minutes on each of four Sundays in April,
+# and retarding them by the same amount on four Sundays in September.
+# A bill was drafted in 1909 and introduced in Parliament several times,
+# but it met with ridicule and opposition, especially from farming interests.
+# Later editions of the pamphlet proposed one-hour summer time, and
+# it was eventually adopted as a wartime measure in 1916.
+# See: Summer Time Arrives Early, The Times (2000-05-18).
+# A monument to Willett was unveiled on 1927-05-21, in an open space in
+# a 45-acre wood near Chislehurst, Kent that was purchased by popular
+# subscription and open to the public.  On the south face of the monolith,
+# designed by G. W. Miller, is the the William Willett Memorial Sundial,
+# which is permanently set to Summer Time.
+
+# From Winston Churchill (1934-04-28):
+# It is one of the paradoxes of history that we should owe the boon of
+# summer time, which gives every year to the people of this country
+# between 160 and 170 hours more daylight leisure, to a war which
+# plunged Europe into darkness for four years, and shook the
+# foundations of civilization throughout the world.
+#	-- <a href="http://www.winstonchurchill.org/fh114willett.htm">
+#	"A Silent Toast to William Willett", Pictorial Weekly
+#	</a>
+
+# From Paul Eggert (1996-09-03):
+# The OED Supplement says that the English originally said ``Daylight Saving''
+# when they were debating the adoption of DST in 1908; but by 1916 this
+# term appears only in quotes taken from DST's opponents, whereas the
+# proponents (who eventually won the argument) are quoted as using ``Summer''.
+
+# From Arthur David Olson (1989-01-19):
+#
+# A source at the British Information Office in New York avers that it's
+# known as "British" Summer Time in all parts of the United Kingdom.
+
+# Date: 4 Jan 89 08:57:25 GMT (Wed)
+# From: Jonathan Leffler
+# [British Summer Time] is fixed annually by Act of Parliament.
+# If you can predict what Parliament will do, you should be in
+# politics making a fortune, not computing.
+
+# From Chris Carrier (1996-06-14):
+# I remember reading in various wartime issues of the London Times the
+# acronym BDST for British Double Summer Time.  Look for the published
+# time of sunrise and sunset in The Times, when BDST was in effect, and
+# if you find a zone reference it will say, "All times B.D.S.T."
+
+# From Joseph S. Myers (1999-09-02):
+# ... some military cables (WO 219/4100 - this is a copy from the
+# main SHAEF archives held in the US National Archives, SHAEF/5252/8/516)
+# agree that the usage is BDST (this appears in a message dated 17 Feb 1945).
+
+# From Joseph S. Myers (2000-10-03):
+# On 18th April 1941, Sir Stephen Tallents of the BBC wrote to Sir
+# Alexander Maxwell of the Home Office asking whether there was any
+# official designation; the reply of the 21st was that there wasn't
+# but he couldn't think of anything better than the "Double British
+# Summer Time" that the BBC had been using informally.
+# http://student.cusu.cam.ac.uk/~jsm28/british-time/bbc-19410418.png
+# http://student.cusu.cam.ac.uk/~jsm28/british-time/ho-19410421.png
+
+# From Sir Alexander Maxwell in the above-mentioned letter (1941-04-21):
+# [N]o official designation has as far as I know been adopted for the time
+# which is to be introduced in May....
+# I cannot think of anything better than "Double British Summer Time"
+# which could not be said to run counter to any official description.
+
+# From Paul Eggert (2000-10-02):
+# Howse writes (p 157) `DBST' too, but `BDST' seems to have been common
+# and follows the more usual convention of putting the location name first,
+# so we use `BDST'.
+
+# Peter Ilieve (1998-04-19) described at length
+# the history of summer time legislation in the United Kingdom.
+# Since 1998 Joseph S. Myers has been updating
+# and extending this list, which can be found in
+# <a href="http://student.cusu.cam.ac.uk/~jsm28/british-time/">
+# History of legal time in Britain
+# </a>
+
+# From Joseph S. Myers (1998-01-06):
+#
+# The legal time in the UK outside of summer time is definitely GMT, not UTC;
+# see Lord Tanlaw's speech
+# <a href="http://www.parliament.the-stationery-office.co.uk/pa/ld199697/ldhansrd/pdvn/lds97/text/70611-20.htm#70611-20_head0">
+# (Lords Hansard 11 June 1997 columns 964 to 976)
+# </a>.
+
+# From Paul Eggert (2006-03-22):
+#
+# For lack of other data, follow Shanks & Pottenger for Eire in 1940-1948.
+#
+# Given Ilieve and Myers's data, the following claims by Shanks & Pottenger
+# are incorrect:
+#     * Wales did not switch from GMT to daylight saving time until
+#	1921 Apr 3, when they began to conform with the rest of Great Britain.
+# Actually, Wales was identical after 1880.
+#     * Eire had two transitions on 1916 Oct 1.
+# It actually just had one transition.
+#     * Northern Ireland used single daylight saving time throughout WW II.
+# Actually, it conformed to Britain.
+#     * GB-Eire changed standard time to 1 hour ahead of GMT on 1968-02-18.
+# Actually, that date saw the usual switch to summer time.
+# Standard time was not changed until 1968-10-27 (the clocks didn't change).
+#
+# Here is another incorrect claim by Shanks & Pottenger:
+#     * Jersey, Guernsey, and the Isle of Man did not switch from GMT
+#	to daylight saving time until 1921 Apr 3, when they began to
+#	conform with Great Britain.
+# S.R.&O. 1916, No. 382 and HO 45/10811/312364 (quoted above) say otherwise.
+#
+# The following claim by Shanks & Pottenger is possible though doubtful;
+# we'll ignore it for now.
+#     * Dublin's 1971-10-31 switch was at 02:00, even though London's was 03:00.
+#
+#
+# Whitman says Dublin Mean Time was -0:25:21, which is more precise than
+# Shanks & Pottenger.
+# Perhaps this was Dunsink Observatory Time, as Dunsink Observatory
+# (8 km NW of Dublin's center) seemingly was to Dublin as Greenwich was
+# to London.  For example:
+#
+#   "Timeball on the ballast office is down.  Dunsink time."
+#   -- James Joyce, Ulysses
+
+# From Joseph S. Myers (2005-01-26):
+# Irish laws are available online at www.irishstatutebook.ie.  These include
+# various relating to legal time, for example:
+#
+# ZZA13Y1923.html ZZA12Y1924.html ZZA8Y1925.html ZZSIV20PG1267.html
+#
+# ZZSI71Y1947.html ZZSI128Y1948.html ZZSI23Y1949.html ZZSI41Y1950.html
+# ZZSI27Y1951.html ZZSI73Y1952.html
+#
+# ZZSI11Y1961.html ZZSI232Y1961.html ZZSI182Y1962.html
+# ZZSI167Y1963.html ZZSI257Y1964.html ZZSI198Y1967.html
+# ZZA23Y1968.html ZZA17Y1971.html
+#
+# ZZSI67Y1981.html ZZSI212Y1982.html ZZSI45Y1986.html
+# ZZSI264Y1988.html ZZSI52Y1990.html ZZSI371Y1992.html
+# ZZSI395Y1994.html ZZSI484Y1997.html ZZSI506Y2001.html
+#
+# [These are all relative to the root, e.g., the first is
+# <http://www.irishstatutebook.ie/ZZA13Y1923.html>.]
+#
+# (These are those I found, but there could be more.  In any case these
+# should allow various updates to the comments in the europe file to cover
+# the laws applicable in Ireland.)
+#
+# (Note that the time in the Republic of Ireland since 1968 has been defined
+# in terms of standard time being GMT+1 with a period of winter time when it
+# is GMT, rather than standard time being GMT with a period of summer time
+# being GMT+1.)
+
+# From Paul Eggert (1999-03-28):
+# Clive Feather (<news:859845706.26043.0@office.demon.net>, 1997-03-31)
+# reports that Folkestone (Cheriton) Shuttle Terminal uses Concession Time
+# (CT), equivalent to French civil time.
+# Julian Hill (<news:36118128.5A14@virgin.net>, 1998-09-30) reports that
+# trains between Dollands Moor (the freight facility next door)
+# and Frethun run in CT.
+# My admittedly uninformed guess is that the terminal has two authorities,
+# the French concession operators and the British civil authorities,
+# and that the time depends on who you're talking to.
+# If, say, the British police were called to the station for some reason,
+# I would expect the official police report to use GMT/BST and not CET/CEST.
+# This is a borderline case, but for now let's stick to GMT/BST.
+
+# From an anonymous contributor (1996-06-02):
+# The law governing time in Ireland is under Statutory Instrument SI 395/94,
+# which gives force to European Union 7th Council Directive # 94/21/EC.
+# Under this directive, the Minister for Justice in Ireland makes appropriate
+# regulations. I spoke this morning with the Secretary of the Department of
+# Justice (tel +353 1 678 9711) who confirmed to me that the correct name is
+# "Irish Summer Time", abbreviated to "IST".
+
+# Rule	NAME	FROM	TO	TYPE	IN	ON	AT	SAVE	LETTER/S
+# Summer Time Act, 1916
+Rule	GB-Eire	1916	only	-	May	21	2:00s	1:00	BST
+Rule	GB-Eire	1916	only	-	Oct	 1	2:00s	0	GMT
+# S.R.&O. 1917, No. 358
+Rule	GB-Eire	1917	only	-	Apr	 8	2:00s	1:00	BST
+Rule	GB-Eire	1917	only	-	Sep	17	2:00s	0	GMT
+# S.R.&O. 1918, No. 274
+Rule	GB-Eire	1918	only	-	Mar	24	2:00s	1:00	BST
+Rule	GB-Eire	1918	only	-	Sep	30	2:00s	0	GMT
+# S.R.&O. 1919, No. 297
+Rule	GB-Eire	1919	only	-	Mar	30	2:00s	1:00	BST
+Rule	GB-Eire	1919	only	-	Sep	29	2:00s	0	GMT
+# S.R.&O. 1920, No. 458
+Rule	GB-Eire	1920	only	-	Mar	28	2:00s	1:00	BST
+# S.R.&O. 1920, No. 1844
+Rule	GB-Eire	1920	only	-	Oct	25	2:00s	0	GMT
+# S.R.&O. 1921, No. 363
+Rule	GB-Eire	1921	only	-	Apr	 3	2:00s	1:00	BST
+Rule	GB-Eire	1921	only	-	Oct	 3	2:00s	0	GMT
+# S.R.&O. 1922, No. 264
+Rule	GB-Eire	1922	only	-	Mar	26	2:00s	1:00	BST
+Rule	GB-Eire	1922	only	-	Oct	 8	2:00s	0	GMT
+# The Summer Time Act, 1922
+Rule	GB-Eire	1923	only	-	Apr	Sun>=16	2:00s	1:00	BST
+Rule	GB-Eire	1923	1924	-	Sep	Sun>=16	2:00s	0	GMT
+Rule	GB-Eire	1924	only	-	Apr	Sun>=9	2:00s	1:00	BST
+Rule	GB-Eire	1925	1926	-	Apr	Sun>=16	2:00s	1:00	BST
+# The Summer Time Act, 1925
+Rule	GB-Eire	1925	1938	-	Oct	Sun>=2	2:00s	0	GMT
+Rule	GB-Eire	1927	only	-	Apr	Sun>=9	2:00s	1:00	BST
+Rule	GB-Eire	1928	1929	-	Apr	Sun>=16	2:00s	1:00	BST
+Rule	GB-Eire	1930	only	-	Apr	Sun>=9	2:00s	1:00	BST
+Rule	GB-Eire	1931	1932	-	Apr	Sun>=16	2:00s	1:00	BST
+Rule	GB-Eire	1933	only	-	Apr	Sun>=9	2:00s	1:00	BST
+Rule	GB-Eire	1934	only	-	Apr	Sun>=16	2:00s	1:00	BST
+Rule	GB-Eire	1935	only	-	Apr	Sun>=9	2:00s	1:00	BST
+Rule	GB-Eire	1936	1937	-	Apr	Sun>=16	2:00s	1:00	BST
+Rule	GB-Eire	1938	only	-	Apr	Sun>=9	2:00s	1:00	BST
+Rule	GB-Eire	1939	only	-	Apr	Sun>=16	2:00s	1:00	BST
+# S.R.&O. 1939, No. 1379
+Rule	GB-Eire	1939	only	-	Nov	Sun>=16	2:00s	0	GMT
+# S.R.&O. 1940, No. 172 and No. 1883
+Rule	GB-Eire	1940	only	-	Feb	Sun>=23	2:00s	1:00	BST
+# S.R.&O. 1941, No. 476
+Rule	GB-Eire	1941	only	-	May	Sun>=2	1:00s	2:00	BDST
+Rule	GB-Eire	1941	1943	-	Aug	Sun>=9	1:00s	1:00	BST
+# S.R.&O. 1942, No. 506
+Rule	GB-Eire	1942	1944	-	Apr	Sun>=2	1:00s	2:00	BDST
+# S.R.&O. 1944, No. 932
+Rule	GB-Eire	1944	only	-	Sep	Sun>=16	1:00s	1:00	BST
+# S.R.&O. 1945, No. 312
+Rule	GB-Eire	1945	only	-	Apr	Mon>=2	1:00s	2:00	BDST
+Rule	GB-Eire	1945	only	-	Jul	Sun>=9	1:00s	1:00	BST
+# S.R.&O. 1945, No. 1208
+Rule	GB-Eire	1945	1946	-	Oct	Sun>=2	2:00s	0	GMT
+Rule	GB-Eire	1946	only	-	Apr	Sun>=9	2:00s	1:00	BST
+# The Summer Time Act, 1947
+Rule	GB-Eire	1947	only	-	Mar	16	2:00s	1:00	BST
+Rule	GB-Eire	1947	only	-	Apr	13	1:00s	2:00	BDST
+Rule	GB-Eire	1947	only	-	Aug	10	1:00s	1:00	BST
+Rule	GB-Eire	1947	only	-	Nov	 2	2:00s	0	GMT
+# Summer Time Order, 1948 (S.I. 1948/495)
+Rule	GB-Eire	1948	only	-	Mar	14	2:00s	1:00	BST
+Rule	GB-Eire	1948	only	-	Oct	31	2:00s	0	GMT
+# Summer Time Order, 1949 (S.I. 1949/373)
+Rule	GB-Eire	1949	only	-	Apr	 3	2:00s	1:00	BST
+Rule	GB-Eire	1949	only	-	Oct	30	2:00s	0	GMT
+# Summer Time Order, 1950 (S.I. 1950/518)
+# Summer Time Order, 1951 (S.I. 1951/430)
+# Summer Time Order, 1952 (S.I. 1952/451)
+Rule	GB-Eire	1950	1952	-	Apr	Sun>=14	2:00s	1:00	BST
+Rule	GB-Eire	1950	1952	-	Oct	Sun>=21	2:00s	0	GMT
+# revert to the rules of the Summer Time Act, 1925
+Rule	GB-Eire	1953	only	-	Apr	Sun>=16	2:00s	1:00	BST
+Rule	GB-Eire	1953	1960	-	Oct	Sun>=2	2:00s	0	GMT
+Rule	GB-Eire	1954	only	-	Apr	Sun>=9	2:00s	1:00	BST
+Rule	GB-Eire	1955	1956	-	Apr	Sun>=16	2:00s	1:00	BST
+Rule	GB-Eire	1957	only	-	Apr	Sun>=9	2:00s	1:00	BST
+Rule	GB-Eire	1958	1959	-	Apr	Sun>=16	2:00s	1:00	BST
+Rule	GB-Eire	1960	only	-	Apr	Sun>=9	2:00s	1:00	BST
+# Summer Time Order, 1961 (S.I. 1961/71)
+# Summer Time (1962) Order, 1961 (S.I. 1961/2465)
+# Summer Time Order, 1963 (S.I. 1963/81)
+Rule	GB-Eire	1961	1963	-	Mar	lastSun	2:00s	1:00	BST
+Rule	GB-Eire	1961	1968	-	Oct	Sun>=23	2:00s	0	GMT
+# Summer Time (1964) Order, 1963 (S.I. 1963/2101)
+# Summer Time Order, 1964 (S.I. 1964/1201)
+# Summer Time Order, 1967 (S.I. 1967/1148)
+Rule	GB-Eire	1964	1967	-	Mar	Sun>=19	2:00s	1:00	BST
+# Summer Time Order, 1968 (S.I. 1968/117)
+Rule	GB-Eire	1968	only	-	Feb	18	2:00s	1:00	BST
+# The British Standard Time Act, 1968
+#	(no summer time)
+# The Summer Time Act, 1972
+Rule	GB-Eire	1972	1980	-	Mar	Sun>=16	2:00s	1:00	BST
+Rule	GB-Eire	1972	1980	-	Oct	Sun>=23	2:00s	0	GMT
+# Summer Time Order, 1980 (S.I. 1980/1089)
+# Summer Time Order, 1982 (S.I. 1982/1673)
+# Summer Time Order, 1986 (S.I. 1986/223)
+# Summer Time Order, 1988 (S.I. 1988/931)
+Rule	GB-Eire	1981	1995	-	Mar	lastSun	1:00u	1:00	BST
+Rule	GB-Eire 1981	1989	-	Oct	Sun>=23	1:00u	0	GMT
+# Summer Time Order, 1989 (S.I. 1989/985)
+# Summer Time Order, 1992 (S.I. 1992/1729)
+# Summer Time Order 1994 (S.I. 1994/2798)
+Rule	GB-Eire 1990	1995	-	Oct	Sun>=22	1:00u	0	GMT
+# Summer Time Order 1997 (S.I. 1997/2982)
+# See EU for rules starting in 1996.
+
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone	Europe/London	-0:01:15 -	LMT	1847 Dec  1 0:00s
+			 0:00	GB-Eire	%s	1968 Oct 27
+			 1:00	-	BST	1971 Oct 31 2:00u
+			 0:00	GB-Eire	%s	1996
+			 0:00	EU	GMT/BST
+Link	Europe/London	Europe/Jersey
+Link	Europe/London	Europe/Guernsey
+Link	Europe/London	Europe/Isle_of_Man
+Zone	Europe/Dublin	-0:25:00 -	LMT	1880 Aug  2
+			-0:25:21 -	DMT	1916 May 21 2:00
+			-0:25:21 1:00	IST	1916 Oct  1 2:00s
+			 0:00	GB-Eire	%s	1921 Dec  6 # independence
+			 0:00	GB-Eire	GMT/IST	1940 Feb 25 2:00
+			 0:00	1:00	IST	1946 Oct  6 2:00
+			 0:00	-	GMT	1947 Mar 16 2:00
+			 0:00	1:00	IST	1947 Nov  2 2:00
+			 0:00	-	GMT	1948 Apr 18 2:00
+			 0:00	GB-Eire	GMT/IST	1968 Oct 27
+			 1:00	-	IST	1971 Oct 31 2:00u
+			 0:00	GB-Eire	GMT/IST	1996
+			 0:00	EU	GMT/IST
+
+###############################################################################
+
+# Continental Europe
+
+# EU rules are for the European Union, previously known as the EC, EEC,
+# Common Market, etc.
+
+# Rule	NAME	FROM	TO	TYPE	IN	ON	AT	SAVE	LETTER/S
+Rule	EU	1977	1980	-	Apr	Sun>=1	 1:00u	1:00	S
+Rule	EU	1977	only	-	Sep	lastSun	 1:00u	0	-
+Rule	EU	1978	only	-	Oct	 1	 1:00u	0	-
+Rule	EU	1979	1995	-	Sep	lastSun	 1:00u	0	-
+Rule	EU	1981	max	-	Mar	lastSun	 1:00u	1:00	S
+Rule	EU	1996	max	-	Oct	lastSun	 1:00u	0	-
+# The most recent directive covers the years starting in 2002.  See:
+# <a href="http://europa.eu.int/eur-lex/en/lif/dat/2000/en_300L0084.html"
+# Directive 2000/84/EC of the European Parliament and of the Council
+# of 19 January 2001 on summer-time arrangements.
+# </a>
+
+# W-Eur differs from EU only in that W-Eur uses standard time.
+Rule	W-Eur	1977	1980	-	Apr	Sun>=1	 1:00s	1:00	S
+Rule	W-Eur	1977	only	-	Sep	lastSun	 1:00s	0	-
+Rule	W-Eur	1978	only	-	Oct	 1	 1:00s	0	-
+Rule	W-Eur	1979	1995	-	Sep	lastSun	 1:00s	0	-
+Rule	W-Eur	1981	max	-	Mar	lastSun	 1:00s	1:00	S
+Rule	W-Eur	1996	max	-	Oct	lastSun	 1:00s	0	-
+
+# Older C-Eur rules are for convenience in the tables.
+# From 1977 on, C-Eur differs from EU only in that C-Eur uses standard time.
+Rule	C-Eur	1916	only	-	Apr	30	23:00	1:00	S
+Rule	C-Eur	1916	only	-	Oct	 1	 1:00	0	-
+Rule	C-Eur	1917	1918	-	Apr	Mon>=15	 2:00s	1:00	S
+Rule	C-Eur	1917	1918	-	Sep	Mon>=15	 2:00s	0	-
+Rule	C-Eur	1940	only	-	Apr	 1	 2:00s	1:00	S
+Rule	C-Eur	1942	only	-	Nov	 2	 2:00s	0	-
+Rule	C-Eur	1943	only	-	Mar	29	 2:00s	1:00	S
+Rule	C-Eur	1943	only	-	Oct	 4	 2:00s	0	-
+Rule	C-Eur	1944	only	-	Apr	 3	 2:00s	1:00	S
+# Whitman gives 1944 Oct 7; go with Shanks & Pottenger.
+Rule	C-Eur	1944	only	-	Oct	 2	 2:00s	0	-
+Rule	C-Eur	1977	1980	-	Apr	Sun>=1	 2:00s	1:00	S
+Rule	C-Eur	1977	only	-	Sep	lastSun	 2:00s	0	-
+Rule	C-Eur	1978	only	-	Oct	 1	 2:00s	0	-
+Rule	C-Eur	1979	1995	-	Sep	lastSun	 2:00s	0	-
+Rule	C-Eur	1981	max	-	Mar	lastSun	 2:00s	1:00	S
+Rule	C-Eur	1996	max	-	Oct	lastSun	 2:00s	0	-
+
+# E-Eur differs from EU only in that E-Eur switches at midnight local time.
+Rule	E-Eur	1977	1980	-	Apr	Sun>=1	 0:00	1:00	S
+Rule	E-Eur	1977	only	-	Sep	lastSun	 0:00	0	-
+Rule	E-Eur	1978	only	-	Oct	 1	 0:00	0	-
+Rule	E-Eur	1979	1995	-	Sep	lastSun	 0:00	0	-
+Rule	E-Eur	1981	max	-	Mar	lastSun	 0:00	1:00	S
+Rule	E-Eur	1996	max	-	Oct	lastSun	 0:00	0	-
+
+# Rule	NAME	FROM	TO	TYPE	IN	ON	AT	SAVE	LETTER/S
+Rule	Russia	1917	only	-	Jul	 1	23:00	1:00	MST	# Moscow Summer Time
+Rule	Russia	1917	only	-	Dec	28	 0:00	0	MMT	# Moscow Mean Time
+Rule	Russia	1918	only	-	May	31	22:00	2:00	MDST	# Moscow Double Summer Time
+Rule	Russia	1918	only	-	Sep	16	 1:00	1:00	MST
+Rule	Russia	1919	only	-	May	31	23:00	2:00	MDST
+Rule	Russia	1919	only	-	Jul	 1	 2:00	1:00	S
+Rule	Russia	1919	only	-	Aug	16	 0:00	0	-
+Rule	Russia	1921	only	-	Feb	14	23:00	1:00	S
+Rule	Russia	1921	only	-	Mar	20	23:00	2:00	M # Midsummer
+Rule	Russia	1921	only	-	Sep	 1	 0:00	1:00	S
+Rule	Russia	1921	only	-	Oct	 1	 0:00	0	-
+# Act No.925 of the Council of Ministers of the USSR (1980-10-24):
+Rule	Russia	1981	1984	-	Apr	 1	 0:00	1:00	S
+Rule	Russia	1981	1983	-	Oct	 1	 0:00	0	-
+# Act No.967 of the Council of Ministers of the USSR (1984-09-13), repeated in
+# Act No.227 of the Council of Ministers of the USSR (1989-03-14):
+Rule	Russia	1984	1991	-	Sep	lastSun	 2:00s	0	-
+Rule	Russia	1985	1991	-	Mar	lastSun	 2:00s	1:00	S
+#
+Rule	Russia	1992	only	-	Mar	lastSat	 23:00	1:00	S
+Rule	Russia	1992	only	-	Sep	lastSat	 23:00	0	-
+Rule	Russia	1993	max	-	Mar	lastSun	 2:00s	1:00	S
+Rule	Russia	1993	1995	-	Sep	lastSun	 2:00s	0	-
+Rule	Russia	1996	max	-	Oct	lastSun	 2:00s	0	-
+
+# These are for backward compatibility with older versions.
+
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone	WET		0:00	EU	WE%sT
+Zone	CET		1:00	C-Eur	CE%sT
+Zone	MET		1:00	C-Eur	ME%sT
+Zone	EET		2:00	EU	EE%sT
+
+# Previous editions of this database used abbreviations like MET DST
+# for Central European Summer Time, but this didn't agree with common usage.
+
+# From Markus Kuhn (1996-07-12):
+# The official German names ... are
+#
+#	Mitteleuropaeische Zeit (MEZ)         = UTC+01:00
+#	Mitteleuropaeische Sommerzeit (MESZ)  = UTC+02:00
+#
+# as defined in the German Time Act (Gesetz ueber die Zeitbestimmung (ZeitG),
+# 1978-07-25, Bundesgesetzblatt, Jahrgang 1978, Teil I, S. 1110-1111)....
+# I wrote ... to the German Federal Physical-Technical Institution
+#
+#	Physikalisch-Technische Bundesanstalt (PTB)
+#	Laboratorium 4.41 "Zeiteinheit"
+#	Postfach 3345
+#	D-38023 Braunschweig
+#	phone: +49 531 592-0
+#
+# ... I received today an answer letter from Dr. Peter Hetzel, head of the PTB
+# department for time and frequency transmission.  He explained that the
+# PTB translates MEZ and MESZ into English as
+#
+#	Central European Time (CET)         = UTC+01:00
+#	Central European Summer Time (CEST) = UTC+02:00
+
+
+# Albania
+# Rule	NAME	FROM	TO	TYPE	IN	ON	AT	SAVE	LETTER/S
+Rule	Albania	1940	only	-	Jun	16	0:00	1:00	S
+Rule	Albania	1942	only	-	Nov	 2	3:00	0	-
+Rule	Albania	1943	only	-	Mar	29	2:00	1:00	S
+Rule	Albania	1943	only	-	Apr	10	3:00	0	-
+Rule	Albania	1974	only	-	May	 4	0:00	1:00	S
+Rule	Albania	1974	only	-	Oct	 2	0:00	0	-
+Rule	Albania	1975	only	-	May	 1	0:00	1:00	S
+Rule	Albania	1975	only	-	Oct	 2	0:00	0	-
+Rule	Albania	1976	only	-	May	 2	0:00	1:00	S
+Rule	Albania	1976	only	-	Oct	 3	0:00	0	-
+Rule	Albania	1977	only	-	May	 8	0:00	1:00	S
+Rule	Albania	1977	only	-	Oct	 2	0:00	0	-
+Rule	Albania	1978	only	-	May	 6	0:00	1:00	S
+Rule	Albania	1978	only	-	Oct	 1	0:00	0	-
+Rule	Albania	1979	only	-	May	 5	0:00	1:00	S
+Rule	Albania	1979	only	-	Sep	30	0:00	0	-
+Rule	Albania	1980	only	-	May	 3	0:00	1:00	S
+Rule	Albania	1980	only	-	Oct	 4	0:00	0	-
+Rule	Albania	1981	only	-	Apr	26	0:00	1:00	S
+Rule	Albania	1981	only	-	Sep	27	0:00	0	-
+Rule	Albania	1982	only	-	May	 2	0:00	1:00	S
+Rule	Albania	1982	only	-	Oct	 3	0:00	0	-
+Rule	Albania	1983	only	-	Apr	18	0:00	1:00	S
+Rule	Albania	1983	only	-	Oct	 1	0:00	0	-
+Rule	Albania	1984	only	-	Apr	 1	0:00	1:00	S
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone	Europe/Tirane	1:19:20 -	LMT	1914
+			1:00	-	CET	1940 Jun 16
+			1:00	Albania	CE%sT	1984 Jul
+			1:00	EU	CE%sT
+
+# Andorra
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone	Europe/Andorra	0:06:04 -	LMT	1901
+			0:00	-	WET	1946 Sep 30
+			1:00	-	CET	1985 Mar 31 2:00
+			1:00	EU	CE%sT
+
+# Austria
+
+# From Paul Eggert (2006-03-22): Shanks & Pottenger give 1918-06-16 and
+# 1945-11-18, but the Austrian Federal Office of Metrology and
+# Surveying (BEV) gives 1918-09-16 and for Vienna gives the "alleged"
+# date of 1945-04-12 with no time.  For the 1980-04-06 transition
+# Shanks & Pottenger give 02:00, the BEV 00:00.  Go with the BEV,
+# and guess 02:00 for 1945-04-12.
+
+# Rule	NAME	FROM	TO	TYPE	IN	ON	AT	SAVE	LETTER/S
+Rule	Austria	1920	only	-	Apr	 5	2:00s	1:00	S
+Rule	Austria	1920	only	-	Sep	13	2:00s	0	-
+Rule	Austria	1946	only	-	Apr	14	2:00s	1:00	S
+Rule	Austria	1946	1948	-	Oct	Sun>=1	2:00s	0	-
+Rule	Austria	1947	only	-	Apr	 6	2:00s	1:00	S
+Rule	Austria	1948	only	-	Apr	18	2:00s	1:00	S
+Rule	Austria	1980	only	-	Apr	 6	0:00	1:00	S
+Rule	Austria	1980	only	-	Sep	28	0:00	0	-
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone	Europe/Vienna	1:05:20 -	LMT	1893 Apr
+			1:00	C-Eur	CE%sT	1920
+			1:00	Austria	CE%sT	1940 Apr  1 2:00s
+			1:00	C-Eur	CE%sT	1945 Apr  2 2:00s
+			1:00	1:00	CEST	1945 Apr 12 2:00s
+			1:00	-	CET	1946
+			1:00	Austria	CE%sT	1981
+			1:00	EU	CE%sT
+
+# Belarus
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone	Europe/Minsk	1:50:16 -	LMT	1880
+			1:50	-	MMT	1924 May 2 # Minsk Mean Time
+			2:00	-	EET	1930 Jun 21
+			3:00	-	MSK	1941 Jun 28
+			1:00	C-Eur	CE%sT	1944 Jul  3
+			3:00	Russia	MSK/MSD	1990
+			3:00	-	MSK	1991 Mar 31 2:00s
+			2:00	1:00	EEST	1991 Sep 29 2:00s
+			2:00	-	EET	1992 Mar 29 0:00s
+			2:00	1:00	EEST	1992 Sep 27 0:00s
+			2:00	Russia	EE%sT
+
+# Belgium
+#
+# From Paul Eggert (1997-07-02):
+# Entries from 1918 through 1991 are taken from:
+#	Annuaire de L'Observatoire Royal de Belgique,
+#	Avenue Circulaire, 3, B-1180 BRUXELLES, CLVIIe annee, 1991
+#	(Imprimerie HAYEZ, s.p.r.l., Rue Fin, 4, 1080 BRUXELLES, MCMXC),
+#	pp 8-9.
+# LMT before 1892 was 0:17:30, according to the official journal of Belgium:
+#	Moniteur Belge, Samedi 30 Avril 1892, N.121.
+# Thanks to Pascal Delmoitie for these references.
+# The 1918 rules are listed for completeness; they apply to unoccupied Belgium.
+# Assume Brussels switched to WET in 1918 when the armistice took effect.
+#
+# Rule	NAME	FROM	TO	TYPE	IN	ON	AT	SAVE	LETTER/S
+Rule	Belgium	1918	only	-	Mar	 9	 0:00s	1:00	S
+Rule	Belgium	1918	1919	-	Oct	Sat>=1	23:00s	0	-
+Rule	Belgium	1919	only	-	Mar	 1	23:00s	1:00	S
+Rule	Belgium	1920	only	-	Feb	14	23:00s	1:00	S
+Rule	Belgium	1920	only	-	Oct	23	23:00s	0	-
+Rule	Belgium	1921	only	-	Mar	14	23:00s	1:00	S
+Rule	Belgium	1921	only	-	Oct	25	23:00s	0	-
+Rule	Belgium	1922	only	-	Mar	25	23:00s	1:00	S
+Rule	Belgium	1922	1927	-	Oct	Sat>=1	23:00s	0	-
+Rule	Belgium	1923	only	-	Apr	21	23:00s	1:00	S
+Rule	Belgium	1924	only	-	Mar	29	23:00s	1:00	S
+Rule	Belgium	1925	only	-	Apr	 4	23:00s	1:00	S
+# DSH writes that a royal decree of 1926-02-22 specified the Sun following 3rd
+# Sat in Apr (except if it's Easter, in which case it's one Sunday earlier),
+# to Sun following 1st Sat in Oct, and that a royal decree of 1928-09-15
+# changed the transition times to 02:00 GMT.
+Rule	Belgium	1926	only	-	Apr	17	23:00s	1:00	S
+Rule	Belgium	1927	only	-	Apr	 9	23:00s	1:00	S
+Rule	Belgium	1928	only	-	Apr	14	23:00s	1:00	S
+Rule	Belgium	1928	1938	-	Oct	Sun>=2	 2:00s	0	-
+Rule	Belgium	1929	only	-	Apr	21	 2:00s	1:00	S
+Rule	Belgium	1930	only	-	Apr	13	 2:00s	1:00	S
+Rule	Belgium	1931	only	-	Apr	19	 2:00s	1:00	S
+Rule	Belgium	1932	only	-	Apr	 3	 2:00s	1:00	S
+Rule	Belgium	1933	only	-	Mar	26	 2:00s	1:00	S
+Rule	Belgium	1934	only	-	Apr	 8	 2:00s	1:00	S
+Rule	Belgium	1935	only	-	Mar	31	 2:00s	1:00	S
+Rule	Belgium	1936	only	-	Apr	19	 2:00s	1:00	S
+Rule	Belgium	1937	only	-	Apr	 4	 2:00s	1:00	S
+Rule	Belgium	1938	only	-	Mar	27	 2:00s	1:00	S
+Rule	Belgium	1939	only	-	Apr	16	 2:00s	1:00	S
+Rule	Belgium	1939	only	-	Nov	19	 2:00s	0	-
+Rule	Belgium	1940	only	-	Feb	25	 2:00s	1:00	S
+Rule	Belgium	1944	only	-	Sep	17	 2:00s	0	-
+Rule	Belgium	1945	only	-	Apr	 2	 2:00s	1:00	S
+Rule	Belgium	1945	only	-	Sep	16	 2:00s	0	-
+Rule	Belgium	1946	only	-	May	19	 2:00s	1:00	S
+Rule	Belgium	1946	only	-	Oct	 7	 2:00s	0	-
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone	Europe/Brussels	0:17:30 -	LMT	1880
+			0:17:30	-	BMT	1892 May  1 12:00 # Brussels MT
+			0:00	-	WET	1914 Nov  8
+			1:00	-	CET	1916 May  1  0:00
+			1:00	C-Eur	CE%sT	1918 Nov 11 11:00u
+			0:00	Belgium	WE%sT	1940 May 20  2:00s
+			1:00	C-Eur	CE%sT	1944 Sep  3
+			1:00	Belgium	CE%sT	1977
+			1:00	EU	CE%sT
+
+# Bosnia and Herzegovina
+# see Serbia
+
+# Bulgaria
+#
+# From Plamen Simenov via Steffen Thorsen (1999-09-09):
+# A document of Government of Bulgaria (No.94/1997) says:
+# EET --> EETDST is in 03:00 Local time in last Sunday of March ...
+# EETDST --> EET is in 04:00 Local time in last Sunday of October
+#
+# Rule	NAME	FROM	TO	TYPE	IN	ON	AT	SAVE	LETTER/S
+Rule	Bulg	1979	only	-	Mar	31	23:00	1:00	S
+Rule	Bulg	1979	only	-	Oct	 1	 1:00	0	-
+Rule	Bulg	1980	1982	-	Apr	Sat>=1	23:00	1:00	S
+Rule	Bulg	1980	only	-	Sep	29	 1:00	0	-
+Rule	Bulg	1981	only	-	Sep	27	 2:00	0	-
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone	Europe/Sofia	1:33:16 -	LMT	1880
+			1:56:56	-	IMT	1894 Nov 30 # Istanbul MT?
+			2:00	-	EET	1942 Nov  2  3:00
+			1:00	C-Eur	CE%sT	1945 Apr  2  3:00
+			2:00	-	EET	1979 Mar 31 23:00
+			2:00	Bulg	EE%sT	1982 Sep 26  2:00
+			2:00	C-Eur	EE%sT	1991
+			2:00	E-Eur	EE%sT	1997
+			2:00	EU	EE%sT
+
+# Croatia
+# see Serbia
+
+# Cyprus
+# Please see the `asia' file for Asia/Nicosia.
+
+# Czech Republic
+# Rule	NAME	FROM	TO	TYPE	IN	ON	AT	SAVE	LETTER/S
+Rule	Czech	1945	only	-	Apr	 8	2:00s	1:00	S
+Rule	Czech	1945	only	-	Nov	18	2:00s	0	-
+Rule	Czech	1946	only	-	May	 6	2:00s	1:00	S
+Rule	Czech	1946	1949	-	Oct	Sun>=1	2:00s	0	-
+Rule	Czech	1947	only	-	Apr	20	2:00s	1:00	S
+Rule	Czech	1948	only	-	Apr	18	2:00s	1:00	S
+Rule	Czech	1949	only	-	Apr	 9	2:00s	1:00	S
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone	Europe/Prague	0:57:44 -	LMT	1850
+			0:57:44	-	PMT	1891 Oct     # Prague Mean Time
+			1:00	C-Eur	CE%sT	1944 Sep 17 2:00s
+			1:00	Czech	CE%sT	1979
+			1:00	EU	CE%sT
+
+# Denmark, Faroe Islands, and Greenland
+
+# From Jesper Norgaard Welen (2005-04-26):
+# http://www.hum.aau.dk/~poe/tid/tine/DanskTid.htm says that the law
+# [introducing standard time] was in effect from 1894-01-01....
+# The page http://www.retsinfo.dk/_GETDOCI_/ACCN/A18930008330-REGL
+# confirms this, and states that the law was put forth 1893-03-29.
+#
+# The EU treaty with effect from 1973:
+# http://www.retsinfo.dk/_GETDOCI_/ACCN/A19722110030-REGL
+#
+# This provoked a new law from 1974 to make possible summer time changes
+# in subsequenet decrees with the law
+# http://www.retsinfo.dk/_GETDOCI_/ACCN/A19740022330-REGL
+#
+# It seems however that no decree was set forward until 1980.  I have
+# not found any decree, but in another related law, the effecting DST
+# changes are stated explicitly to be from 1980-04-06 at 02:00 to
+# 1980-09-28 at 02:00.  If this is true, this differs slightly from
+# the EU rule in that DST runs to 02:00, not 03:00.  We don't know
+# when Denmark began using the EU rule correctly, but we have only
+# confirmation of the 1980-time, so I presume it was correct in 1981:
+# The law is about the management of the extra hour, concerning
+# working hours reported and effect on obligatory-rest rules (which
+# was suspended on that night):
+# http://www.retsinfo.dk/_GETDOCI_/ACCN/C19801120554-REGL
+
+# From Jesper Norgaard Welen (2005-06-11):
+# The Herning Folkeblad (1980-09-26) reported that the night between
+# Saturday and Sunday the clock is set back from three to two.
+
+# From Paul Eggert (2005-06-11):
+# Hence the "02:00" of the 1980 law refers to standard time, not
+# wall-clock time, and so the EU rules were in effect in 1980.
+
+# Rule	NAME	FROM	TO	TYPE	IN	ON	AT	SAVE	LETTER/S
+Rule	Denmark	1916	only	-	May	14	23:00	1:00	S
+Rule	Denmark	1916	only	-	Sep	30	23:00	0	-
+Rule	Denmark	1940	only	-	May	15	 0:00	1:00	S
+Rule	Denmark	1945	only	-	Apr	 2	 2:00s	1:00	S
+Rule	Denmark	1945	only	-	Aug	15	 2:00s	0	-
+Rule	Denmark	1946	only	-	May	 1	 2:00s	1:00	S
+Rule	Denmark	1946	only	-	Sep	 1	 2:00s	0	-
+Rule	Denmark	1947	only	-	May	 4	 2:00s	1:00	S
+Rule	Denmark	1947	only	-	Aug	10	 2:00s	0	-
+Rule	Denmark	1948	only	-	May	 9	 2:00s	1:00	S
+Rule	Denmark	1948	only	-	Aug	 8	 2:00s	0	-
+#
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone Europe/Copenhagen	 0:50:20 -	LMT	1890
+			 0:50:20 -	CMT	1894 Jan  1 # Copenhagen MT
+			 1:00	Denmark	CE%sT	1942 Nov  2 2:00s
+			 1:00	C-Eur	CE%sT	1945 Apr  2 2:00
+			 1:00	Denmark	CE%sT	1980
+			 1:00	EU	CE%sT
+Zone Atlantic/Faroe	-0:27:04 -	LMT	1908 Jan 11	# Torshavn
+			 0:00	-	WET	1981
+			 0:00	EU	WE%sT
+#
+# From Paul Eggert (2004-10-31):
+# During World War II, Germany maintained secret manned weather stations in
+# East Greenland and Franz Josef Land, but we don't know their time zones.
+# My source for this is Wilhelm Dege's book mentioned under Svalbard.
+#
+# From Paul Eggert (2006-03-22):
+# Greenland joined the EU as part of Denmark, obtained home rule on 1979-05-01,
+# and left the EU on 1985-02-01.  It therefore should have been using EU
+# rules at least through 1984.  Shanks & Pottenger say Scoresbysund and Godthab
+# used C-Eur rules after 1980, but IATA SSIM (1991/1996) says they use EU
+# rules since at least 1991.  Assume EU rules since 1980.
+
+# From Gwillin Law (2001-06-06), citing
+# <http://www.statkart.no/efs/efshefter/2001/efs5-2001.pdf> (2001-03-15),
+# and with translations corrected by Steffen Thorsen:
+#
+# Greenland has four local times, and the relation to UTC
+# is according to the following time line:
+#
+# The military zone near Thule	UTC-4
+# Standard Greenland time	UTC-3
+# Scoresbysund			UTC-1
+# Danmarkshavn			UTC
+#
+# In the military area near Thule and in Danmarkshavn DST will not be
+# introduced.
+
+# From Rives McDow (2001-11-01):
+#
+# I correspond regularly with the Dansk Polarcenter, and wrote them at
+# the time to clarify the situation in Thule.  Unfortunately, I have
+# not heard back from them regarding my recent letter.  [But I have
+# info from earlier correspondence.]
+#
+# According to the center, a very small local time zone around Thule
+# Air Base keeps the time according to UTC-4, implementing daylight
+# savings using North America rules, changing the time at 02:00 local time....
+#
+# The east coast of Greenland north of the community of Scoresbysund
+# uses UTC in the same way as in Iceland, year round, with no dst.
+# There are just a few stations on this coast, including the
+# Danmarkshavn ICAO weather station mentioned in your September 29th
+# email.  The other stations are two sledge patrol stations in
+# Mestersvig and Daneborg, the air force base at Station Nord, and the
+# DPC research station at Zackenberg.
+#
+# Scoresbysund and two small villages nearby keep time UTC-1 and use
+# the same daylight savings time period as in West Greenland (Godthab).
+#
+# The rest of Greenland, including Godthab (this area, although it
+# includes central Greenland, is known as west Greenland), keeps time
+# UTC-3, with daylight savings methods according to European rules.
+#
+# It is common procedure to use UTC 0 in the wilderness of East and
+# North Greenland, because it is mainly Icelandic aircraft operators
+# maintaining traffic in these areas.  However, the official status of
+# this area is that it sticks with Godthab time.  This area might be
+# considered a dual time zone in some respects because of this.
+
+# From Rives McDow (2001-11-19):
+# I heard back from someone stationed at Thule; the time change took place
+# there at 2:00 AM.
+
+# From Paul Eggert (2006-03-22):
+# From 1997 on the CIA map shows Danmarkshavn on GMT;
+# the 1995 map as like Godthab.
+# For lack of better info, assume they were like Godthab before 1996.
+# startkart.no says Thule does not observe DST, but this is clearly an error,
+# so go with Shanks & Pottenger for Thule transitions until this year.
+# For 2007 on assume Thule will stay in sync with US DST rules.
+#
+# Rule	NAME	FROM	TO	TYPE	IN	ON	AT	SAVE	LETTER/S
+Rule	Thule	1991	1992	-	Mar	lastSun	2:00	1:00	D
+Rule	Thule	1991	1992	-	Sep	lastSun	2:00	0	S
+Rule	Thule	1993	2006	-	Apr	Sun>=1	2:00	1:00	D
+Rule	Thule	1993	2006	-	Oct	lastSun	2:00	0	S
+Rule	Thule	2007	max	-	Mar	Sun>=8	2:00	1:00	D
+Rule	Thule	2007	max	-	Nov	Sun>=1	2:00	0	S
+#
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone America/Danmarkshavn -1:14:40 -	LMT	1916 Jul 28
+			-3:00	-	WGT	1980 Apr  6 2:00
+			-3:00	EU	WG%sT	1996
+			0:00	-	GMT
+Zone America/Scoresbysund -1:27:52 -	LMT	1916 Jul 28 # Ittoqqortoormiit
+			-2:00	-	CGT	1980 Apr  6 2:00
+			-2:00	C-Eur	CG%sT	1981 Mar 29
+			-1:00	EU	EG%sT
+Zone America/Godthab	-3:26:56 -	LMT	1916 Jul 28 # Nuuk
+			-3:00	-	WGT	1980 Apr  6 2:00
+			-3:00	EU	WG%sT
+Zone America/Thule	-4:35:08 -	LMT	1916 Jul 28 # Pituffik air base
+			-4:00	Thule	A%sT
+
+# Estonia
+# From Peter Ilieve (1994-10-15):
+# A relative in Tallinn confirms the accuracy of the data for 1989 onwards
+# [through 1994] and gives the legal authority for it,
+# a regulation of the Government of Estonia, No. 111 of 1989....
+#
+# From Peter Ilieve (1996-10-28):
+# [IATA SSIM (1992/1996) claims that the Baltic republics switch at 01:00s,
+# but a relative confirms that Estonia still switches at 02:00s, writing:]
+# ``I do not [know] exactly but there are some little different
+# (confusing) rules for International Air and Railway Transport Schedules
+# conversion in Sunday connected with end of summer time in Estonia....
+# A discussion is running about the summer time efficiency and effect on
+# human physiology.  It seems that Estonia maybe will not change to
+# summer time next spring.''
+
+# From Peter Ilieve (1998-11-04), heavily edited:
+# <a href="http://trip.rk.ee/cgi-bin/thw?${BASE}=akt&${OOHTML}=rtd&TA=1998&TO=1&AN=1390">
+# The 1998-09-22 Estonian time law
+# </a>
+# refers to the Eighth Directive and cites the association agreement between
+# the EU and Estonia, ratified by the Estonian law (RT II 1995, 22--27, 120).
+#
+# I also asked [my relative] whether they use any standard abbreviation
+# for their standard and summer times. He says no, they use "suveaeg"
+# (summer time) and "talveaeg" (winter time).
+
+# From <a href="http://www.baltictimes.com/">The Baltic Times</a> (1999-09-09)
+# via Steffen Thorsen:
+# This year will mark the last time Estonia shifts to summer time,
+# a council of the ruling coalition announced Sept. 6....
+# But what this could mean for Estonia's chances of joining the European
+# Union are still unclear.  In 1994, the EU declared summer time compulsory
+# for all member states until 2001.  Brussels has yet to decide what to do
+# after that.
+
+# From Mart Oruaas (2000-01-29):
+# Regulation no. 301 (1999-10-12) obsoletes previous regulation
+# no. 206 (1998-09-22) and thus sticks Estonia to +02:00 GMT for all
+# the year round.  The regulation is effective 1999-11-01.
+
+# From Toomas Soome (2002-02-21):
+# The Estonian government has changed once again timezone politics.
+# Now we are using again EU rules.
+#
+# From Urmet Jaanes (2002-03-28):
+# The legislative reference is Government decree No. 84 on 2002-02-21.
+
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone	Europe/Tallinn	1:39:00	-	LMT	1880
+			1:39:00	-	TMT	1918 Feb # Tallinn Mean Time
+			1:00	C-Eur	CE%sT	1919 Jul
+			1:39:00	-	TMT	1921 May
+			2:00	-	EET	1940 Aug  6
+			3:00	-	MSK	1941 Sep 15
+			1:00	C-Eur	CE%sT	1944 Sep 22
+			3:00	Russia	MSK/MSD	1989 Mar 26 2:00s
+			2:00	1:00	EEST	1989 Sep 24 2:00s
+			2:00	C-Eur	EE%sT	1998 Sep 22
+			2:00	EU	EE%sT	1999 Nov  1
+			2:00	-	EET	2002 Feb 21
+			2:00	EU	EE%sT
+
+# Finland
+#
+# From Hannu Strang (1994-09-25 06:03:37 UTC):
+# Well, here in Helsinki we're just changing from summer time to regular one,
+# and it's supposed to change at 4am...
+#
+# From Paul Eggert (2006-03-22):
+# Shanks & Pottenger say Finland has switched at 02:00 standard time
+# since 1981.  Go with Strang instead.
+#
+# Rule	NAME	FROM	TO	TYPE	IN	ON	AT	SAVE	LETTER/S
+Rule	Finland	1942	only	-	Apr	3	0:00	1:00	S
+Rule	Finland	1942	only	-	Oct	3	0:00	0	-
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone	Europe/Helsinki	1:39:52 -	LMT	1878 May 31
+			1:39:52	-	HMT	1921 May    # Helsinki Mean Time
+			2:00	Finland	EE%sT	1981 Mar 29 2:00
+			2:00	EU	EE%sT
+
+# Aaland Is
+Link	Europe/Helsinki	Europe/Mariehamn
+
+
+# France
+
+# From Ciro Discepolo (2000-12-20):
+#
+# Henri Le Corre, Regimes Horaires pour le monde entier, Editions
+# Traditionnelles - Paris 2 books, 1993
+#
+# Gabriel, Traite de l'heure dans le monde, Guy Tredaniel editeur,
+# Paris, 1991
+#
+# Francoise Gauquelin, Problemes de l'heure resolus en astrologie,
+# Guy tredaniel, Paris 1987
+
+
+#
+# Shank & Pottenger seem to use `24:00' ambiguously; resolve it with Whitman.
+# Rule	NAME	FROM	TO	TYPE	IN	ON	AT	SAVE	LETTER/S
+Rule	France	1916	only	-	Jun	14	23:00s	1:00	S
+Rule	France	1916	1919	-	Oct	Sun>=1	23:00s	0	-
+Rule	France	1917	only	-	Mar	24	23:00s	1:00	S
+Rule	France	1918	only	-	Mar	 9	23:00s	1:00	S
+Rule	France	1919	only	-	Mar	 1	23:00s	1:00	S
+Rule	France	1920	only	-	Feb	14	23:00s	1:00	S
+Rule	France	1920	only	-	Oct	23	23:00s	0	-
+Rule	France	1921	only	-	Mar	14	23:00s	1:00	S
+Rule	France	1921	only	-	Oct	25	23:00s	0	-
+Rule	France	1922	only	-	Mar	25	23:00s	1:00	S
+# DSH writes that a law of 1923-05-24 specified 3rd Sat in Apr at 23:00 to 1st
+# Sat in Oct at 24:00; and that in 1930, because of Easter, the transitions
+# were Apr 12 and Oct 5.  Go with Shanks & Pottenger.
+Rule	France	1922	1938	-	Oct	Sat>=1	23:00s	0	-
+Rule	France	1923	only	-	May	26	23:00s	1:00	S
+Rule	France	1924	only	-	Mar	29	23:00s	1:00	S
+Rule	France	1925	only	-	Apr	 4	23:00s	1:00	S
+Rule	France	1926	only	-	Apr	17	23:00s	1:00	S
+Rule	France	1927	only	-	Apr	 9	23:00s	1:00	S
+Rule	France	1928	only	-	Apr	14	23:00s	1:00	S
+Rule	France	1929	only	-	Apr	20	23:00s	1:00	S
+Rule	France	1930	only	-	Apr	12	23:00s	1:00	S
+Rule	France	1931	only	-	Apr	18	23:00s	1:00	S
+Rule	France	1932	only	-	Apr	 2	23:00s	1:00	S
+Rule	France	1933	only	-	Mar	25	23:00s	1:00	S
+Rule	France	1934	only	-	Apr	 7	23:00s	1:00	S
+Rule	France	1935	only	-	Mar	30	23:00s	1:00	S
+Rule	France	1936	only	-	Apr	18	23:00s	1:00	S
+Rule	France	1937	only	-	Apr	 3	23:00s	1:00	S
+Rule	France	1938	only	-	Mar	26	23:00s	1:00	S
+Rule	France	1939	only	-	Apr	15	23:00s	1:00	S
+Rule	France	1939	only	-	Nov	18	23:00s	0	-
+Rule	France	1940	only	-	Feb	25	 2:00	1:00	S
+# The French rules for 1941-1944 were not used in Paris, but Shanks & Pottenger
+# write that they were used in Monaco and in many French locations.
+# Le Corre writes that the upper limit of the free zone was Arneguy, Orthez,
+# Mont-de-Marsan, Bazas, Langon, Lamotte-Montravel, Marouil, La
+# Rochefoucault, Champagne-Mouton, La Roche-Posay, La Haye-Decartes,
+# Loches, Montrichard, Vierzon, Bourges, Moulins, Digoin,
+# Paray-le-Monial, Montceau-les-Mines, Chalons-sur-Saone, Arbois,
+# Dole, Morez, St-Claude, and Collognes (Haute-Savioe).
+Rule	France	1941	only	-	May	 5	 0:00	2:00	M # Midsummer
+# Shanks & Pottenger say this transition occurred at Oct 6 1:00,
+# but go with Denis Excoffier (1997-12-12),
+# who quotes the Ephemerides Astronomiques for 1998 from Bureau des Longitudes
+# as saying 5/10/41 22hUT.
+Rule	France	1941	only	-	Oct	 6	 0:00	1:00	S
+Rule	France	1942	only	-	Mar	 9	 0:00	2:00	M
+Rule	France	1942	only	-	Nov	 2	 3:00	1:00	S
+Rule	France	1943	only	-	Mar	29	 2:00	2:00	M
+Rule	France	1943	only	-	Oct	 4	 3:00	1:00	S
+Rule	France	1944	only	-	Apr	 3	 2:00	2:00	M
+Rule	France	1944	only	-	Oct	 8	 1:00	1:00	S
+Rule	France	1945	only	-	Apr	 2	 2:00	2:00	M
+Rule	France	1945	only	-	Sep	16	 3:00	0	-
+# Shanks & Pottenger give Mar 28 2:00 and Sep 26 3:00;
+# go with Excoffier's 28/3/76 0hUT and 25/9/76 23hUT.
+Rule	France	1976	only	-	Mar	28	 1:00	1:00	S
+Rule	France	1976	only	-	Sep	26	 1:00	0	-
+# Shanks & Pottenger give 0:09:20 for Paris Mean Time, and Whitman 0:09:05,
+# but Howse quotes the actual French legislation as saying 0:09:21.
+# Go with Howse.  Howse writes that the time in France was officially based
+# on PMT-0:09:21 until 1978-08-09, when the time base finally switched to UTC.
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone	Europe/Paris	0:09:21 -	LMT	1891 Mar 15  0:01
+			0:09:21	-	PMT	1911 Mar 11  0:01  # Paris MT
+# Shanks & Pottenger give 1940 Jun 14 0:00; go with Excoffier and Le Corre.
+			0:00	France	WE%sT	1940 Jun 14 23:00
+# Le Corre says Paris stuck with occupied-France time after the liberation;
+# go with Shanks & Pottenger.
+			1:00	C-Eur	CE%sT	1944 Aug 25
+			0:00	France	WE%sT	1945 Sep 16  3:00
+			1:00	France	CE%sT	1977
+			1:00	EU	CE%sT
+
+# Germany
+
+# From Markus Kuhn (1998-09-29):
+# The German time zone web site by the Physikalisch-Technische
+# Bundesanstalt contains DST information back to 1916.
+# [See tz-link.htm for the URL.]
+
+# From Joerg Schilling (2002-10-23):
+# In 1945, Berlin was switched to Moscow Summer time (GMT+4) by <a
+# href="http://www.dhm.de/lemo/html/biografien/BersarinNikolai/">
+# General [Nikolai] Bersarin</a>.
+
+# From Paul Eggert (2003-03-08):
+# <a href="http://www.parlament-berlin.de/pds-fraktion.nsf/727459127c8b66ee8525662300459099/defc77cb784f180ac1256c2b0030274b/$FILE/bersarint.pdf">
+# says that Bersarin issued an order to use Moscow time on May 20.
+# However, Moscow did not observe daylight saving in 1945, so
+# this was equivalent to CEMT (GMT+3), not GMT+4.
+
+
+# Rule	NAME	FROM	TO	TYPE	IN	ON	AT	SAVE	LETTER/S
+Rule	Germany	1945	only	-	Apr	 2	2:00s	1:00	S
+Rule	Germany	1945	only	-	May	24	2:00	2:00	M # Midsummer
+Rule	Germany	1945	only	-	Sep	24	3:00	1:00	S
+Rule	Germany	1945	only	-	Nov	18	2:00s	0	-
+Rule	Germany	1946	only	-	Apr	14	2:00s	1:00	S
+Rule	Germany	1946	only	-	Oct	 7	2:00s	0	-
+Rule	Germany	1947	1949	-	Oct	Sun>=1	2:00s	0	-
+Rule	Germany	1947	only	-	Apr	 6	2:00s	1:00	S
+Rule	Germany	1947	only	-	May	11	2:00s	2:00	M
+Rule	Germany	1947	only	-	Jun	29	3:00	1:00	S
+Rule	Germany	1948	only	-	Apr	18	2:00s	1:00	S
+Rule	Germany	1949	only	-	Apr	10	2:00s	1:00	S
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone	Europe/Berlin	0:53:28 -	LMT	1893 Apr
+			1:00	C-Eur	CE%sT	1945 Apr 2 2:00
+			1:00	Germany	CE%sT	1980
+			1:00	EU	CE%sT
+
+# Georgia
+# Please see the "asia" file for Asia/Tbilisi.
+# Herodotus (Histories, IV.45) says Georgia north of the Phasis (now Rioni)
+# is in Europe.  Our reference location Tbilisi is in the Asian part.
+
+# Gibraltar
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone Europe/Gibraltar	-0:21:24 -	LMT	1880 Aug  2 0:00s
+			0:00	GB-Eire	%s	1957 Apr 14 2:00
+			1:00	-	CET	1982
+			1:00	EU	CE%sT
+
+# Greece
+# Rule	NAME	FROM	TO	TYPE	IN	ON	AT	SAVE	LETTER/S
+# Whitman gives 1932 Jul 5 - Nov 1; go with Shanks & Pottenger.
+Rule	Greece	1932	only	-	Jul	 7	0:00	1:00	S
+Rule	Greece	1932	only	-	Sep	 1	0:00	0	-
+# Whitman gives 1941 Apr 25 - ?; go with Shanks & Pottenger.
+Rule	Greece	1941	only	-	Apr	 7	0:00	1:00	S
+# Whitman gives 1942 Feb 2 - ?; go with Shanks & Pottenger.
+Rule	Greece	1942	only	-	Nov	 2	3:00	0	-
+Rule	Greece	1943	only	-	Mar	30	0:00	1:00	S
+Rule	Greece	1943	only	-	Oct	 4	0:00	0	-
+# Whitman gives 1944 Oct 3 - Oct 31; go with Shanks & Pottenger.
+Rule	Greece	1952	only	-	Jul	 1	0:00	1:00	S
+Rule	Greece	1952	only	-	Nov	 2	0:00	0	-
+Rule	Greece	1975	only	-	Apr	12	0:00s	1:00	S
+Rule	Greece	1975	only	-	Nov	26	0:00s	0	-
+Rule	Greece	1976	only	-	Apr	11	2:00s	1:00	S
+Rule	Greece	1976	only	-	Oct	10	2:00s	0	-
+Rule	Greece	1977	1978	-	Apr	Sun>=1	2:00s	1:00	S
+Rule	Greece	1977	only	-	Sep	26	2:00s	0	-
+Rule	Greece	1978	only	-	Sep	24	4:00	0	-
+Rule	Greece	1979	only	-	Apr	 1	9:00	1:00	S
+Rule	Greece	1979	only	-	Sep	29	2:00	0	-
+Rule	Greece	1980	only	-	Apr	 1	0:00	1:00	S
+Rule	Greece	1980	only	-	Sep	28	0:00	0	-
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone	Europe/Athens	1:34:52 -	LMT	1895 Sep 14
+			1:34:52	-	AMT	1916 Jul 28 0:01     # Athens MT
+			2:00	Greece	EE%sT	1941 Apr 30
+			1:00	Greece	CE%sT	1944 Apr  4
+			2:00	Greece	EE%sT	1981
+			# Shanks & Pottenger say it switched to C-Eur in 1981;
+			# go with EU instead, since Greece joined it on Jan 1.
+			2:00	EU	EE%sT
+
+# Hungary
+# Rule	NAME	FROM	TO	TYPE	IN	ON	AT	SAVE	LETTER/S
+Rule	Hungary	1918	only	-	Apr	 1	 3:00	1:00	S
+Rule	Hungary	1918	only	-	Sep	29	 3:00	0	-
+Rule	Hungary	1919	only	-	Apr	15	 3:00	1:00	S
+Rule	Hungary	1919	only	-	Sep	15	 3:00	0	-
+Rule	Hungary	1920	only	-	Apr	 5	 3:00	1:00	S
+Rule	Hungary	1920	only	-	Sep	30	 3:00	0	-
+Rule	Hungary	1945	only	-	May	 1	23:00	1:00	S
+Rule	Hungary	1945	only	-	Nov	 3	 0:00	0	-
+Rule	Hungary	1946	only	-	Mar	31	 2:00s	1:00	S
+Rule	Hungary	1946	1949	-	Oct	Sun>=1	 2:00s	0	-
+Rule	Hungary	1947	1949	-	Apr	Sun>=4	 2:00s	1:00	S
+Rule	Hungary	1950	only	-	Apr	17	 2:00s	1:00	S
+Rule	Hungary	1950	only	-	Oct	23	 2:00s	0	-
+Rule	Hungary	1954	1955	-	May	23	 0:00	1:00	S
+Rule	Hungary	1954	1955	-	Oct	 3	 0:00	0	-
+Rule	Hungary	1956	only	-	Jun	Sun>=1	 0:00	1:00	S
+Rule	Hungary	1956	only	-	Sep	lastSun	 0:00	0	-
+Rule	Hungary	1957	only	-	Jun	Sun>=1	 1:00	1:00	S
+Rule	Hungary	1957	only	-	Sep	lastSun	 3:00	0	-
+Rule	Hungary	1980	only	-	Apr	 6	 1:00	1:00	S
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone	Europe/Budapest	1:16:20 -	LMT	1890 Oct
+			1:00	C-Eur	CE%sT	1918
+			1:00	Hungary	CE%sT	1941 Apr  6  2:00
+			1:00	C-Eur	CE%sT	1945 May  1 23:00
+			1:00	Hungary	CE%sT	1980 Sep 28  2:00s
+			1:00	EU	CE%sT
+
+# Iceland
+#
+# From Adam David (1993-11-06):
+# The name of the timezone in Iceland for system / mail / news purposes is GMT.
+#
+# (1993-12-05):
+# This material is paraphrased from the 1988 edition of the University of
+# Iceland Almanak.
+#
+# From January 1st, 1908 the whole of Iceland was standardised at 1 hour
+# behind GMT. Previously, local mean solar time was used in different parts
+# of Iceland, the almanak had been based on Reykjavik mean solar time which
+# was 1 hour and 28 minutes behind GMT.
+#
+# "first day of winter" referred to [below] means the first day of the 26 weeks
+# of winter, according to the old icelandic calendar that dates back to the
+# time the norsemen first settled Iceland.  The first day of winter is always
+# Saturday, but is not dependent on the Julian or Gregorian calendars.
+#
+# (1993-12-10):
+# I have a reference from the Oxford Icelandic-English dictionary for the
+# beginning of winter, which ties it to the ecclesiastical calendar (and thus
+# to the julian/gregorian calendar) over the period in question.
+#	the winter begins on the Saturday next before St. Luke's day
+#	(old style), or on St. Luke's day, if a Saturday.
+# St. Luke's day ought to be traceable from ecclesiastical sources. "old style"
+# might be a reference to the Julian calendar as opposed to Gregorian, or it
+# might mean something else (???).
+#
+# From Paul Eggert (2006-03-22):
+# The Iceland Almanak, Shanks & Pottenger, and Whitman disagree on many points.
+# We go with the Almanak, except for one claim from Shanks & Pottenger, namely
+# that Reykavik was 21W57 from 1837 to 1908, local mean time before that.
+#
+# Rule	NAME	FROM	TO	TYPE	IN	ON	AT	SAVE	LETTER/S
+Rule	Iceland	1917	1918	-	Feb	19	23:00	1:00	S
+Rule	Iceland	1917	only	-	Oct	21	 1:00	0	-
+Rule	Iceland	1918	only	-	Nov	16	 1:00	0	-
+Rule	Iceland	1939	only	-	Apr	29	23:00	1:00	S
+Rule	Iceland	1939	only	-	Nov	29	 2:00	0	-
+Rule	Iceland	1940	only	-	Feb	25	 2:00	1:00	S
+Rule	Iceland	1940	only	-	Nov	 3	 2:00	0	-
+Rule	Iceland	1941	only	-	Mar	 2	 1:00s	1:00	S
+Rule	Iceland	1941	only	-	Nov	 2	 1:00s	0	-
+Rule	Iceland	1942	only	-	Mar	 8	 1:00s	1:00	S
+Rule	Iceland	1942	only	-	Oct	25	 1:00s	0	-
+# 1943-1946 - first Sunday in March until first Sunday in winter
+Rule	Iceland	1943	1946	-	Mar	Sun>=1	 1:00s	1:00	S
+Rule	Iceland	1943	1948	-	Oct	Sun>=22	 1:00s	0	-
+# 1947-1967 - first Sunday in April until first Sunday in winter
+Rule	Iceland	1947	1967	-	Apr	Sun>=1	 1:00s	1:00	S
+# 1949 Oct transition delayed by 1 week
+Rule	Iceland	1949	only	-	Oct	30	 1:00s	0	-
+Rule	Iceland	1950	1966	-	Oct	Sun>=22	 1:00s	0	-
+Rule	Iceland	1967	only	-	Oct	29	 1:00s	0	-
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone Atlantic/Reykjavik	-1:27:24 -	LMT	1837
+			-1:27:48 -	RMT	1908 # Reykjavik Mean Time?
+			-1:00	Iceland	IS%sT	1968 Apr 7 1:00s
+			 0:00	-	GMT
+
+# Italy
+#
+# From Paul Eggert (2001-03-06):
+# Sicily and Sardinia each had their own time zones from 1866 to 1893,
+# called Palermo Time (+00:53:28) and Cagliari Time (+00:36:32).
+# During World War II, German-controlled Italy used German time.
+# But these events all occurred before the 1970 cutoff,
+# so record only the time in Rome.
+#
+# From Paul Eggert (2006-03-22):
+# For Italian DST we have three sources: Shanks & Pottenger, Whitman, and
+# F. Pollastri
+# <a href="http://toi.iriti.cnr.it/uk/ienitlt.html">
+# Day-light Saving Time in Italy (2006-02-03)
+# </a>
+# (`FP' below), taken from an Italian National Electrotechnical Institute
+# publication. When the three sources disagree, guess who's right, as follows:
+#
+# year	FP	Shanks&P. (S)	Whitman (W)	Go with:
+# 1916	06-03	06-03 24:00	06-03 00:00	FP & W
+#	09-30	09-30 24:00	09-30 01:00	FP; guess 24:00s
+# 1917	04-01	03-31 24:00	03-31 00:00	FP & S
+#	09-30	09-29 24:00	09-30 01:00	FP & W
+# 1918	03-09	03-09 24:00	03-09 00:00	FP & S
+#	10-06	10-05 24:00	10-06 01:00	FP & W
+# 1919	03-01	03-01 24:00	03-01 00:00	FP & S
+#	10-04	10-04 24:00	10-04 01:00	FP; guess 24:00s
+# 1920	03-20	03-20 24:00	03-20 00:00	FP & S
+#	09-18	09-18 24:00	10-01 01:00	FP; guess 24:00s
+# 1944	04-02	04-03 02:00			S (see C-Eur)
+#	09-16	10-02 03:00			FP; guess 24:00s
+# 1945	09-14	09-16 24:00			FP; guess 24:00s
+# 1970	05-21	05-31 00:00			S
+#	09-20	09-27 00:00			S
+#
+# Rule	NAME	FROM	TO	TYPE	IN	ON	AT	SAVE	LETTER/S
+Rule	Italy	1916	only	-	Jun	 3	0:00s	1:00	S
+Rule	Italy	1916	only	-	Oct	 1	0:00s	0	-
+Rule	Italy	1917	only	-	Apr	 1	0:00s	1:00	S
+Rule	Italy	1917	only	-	Sep	30	0:00s	0	-
+Rule	Italy	1918	only	-	Mar	10	0:00s	1:00	S
+Rule	Italy	1918	1919	-	Oct	Sun>=1	0:00s	0	-
+Rule	Italy	1919	only	-	Mar	 2	0:00s	1:00	S
+Rule	Italy	1920	only	-	Mar	21	0:00s	1:00	S
+Rule	Italy	1920	only	-	Sep	19	0:00s	0	-
+Rule	Italy	1940	only	-	Jun	15	0:00s	1:00	S
+Rule	Italy	1944	only	-	Sep	17	0:00s	0	-
+Rule	Italy	1945	only	-	Apr	 2	2:00	1:00	S
+Rule	Italy	1945	only	-	Sep	15	0:00s	0	-
+Rule	Italy	1946	only	-	Mar	17	2:00s	1:00	S
+Rule	Italy	1946	only	-	Oct	 6	2:00s	0	-
+Rule	Italy	1947	only	-	Mar	16	0:00s	1:00	S
+Rule	Italy	1947	only	-	Oct	 5	0:00s	0	-
+Rule	Italy	1948	only	-	Feb	29	2:00s	1:00	S
+Rule	Italy	1948	only	-	Oct	 3	2:00s	0	-
+Rule	Italy	1966	1968	-	May	Sun>=22	0:00	1:00	S
+Rule	Italy	1966	1969	-	Sep	Sun>=22	0:00	0	-
+Rule	Italy	1969	only	-	Jun	 1	0:00	1:00	S
+Rule	Italy	1970	only	-	May	31	0:00	1:00	S
+Rule	Italy	1970	only	-	Sep	lastSun	0:00	0	-
+Rule	Italy	1971	1972	-	May	Sun>=22	0:00	1:00	S
+Rule	Italy	1971	only	-	Sep	lastSun	1:00	0	-
+Rule	Italy	1972	only	-	Oct	 1	0:00	0	-
+Rule	Italy	1973	only	-	Jun	 3	0:00	1:00	S
+Rule	Italy	1973	1974	-	Sep	lastSun	0:00	0	-
+Rule	Italy	1974	only	-	May	26	0:00	1:00	S
+Rule	Italy	1975	only	-	Jun	 1	0:00s	1:00	S
+Rule	Italy	1975	1977	-	Sep	lastSun	0:00s	0	-
+Rule	Italy	1976	only	-	May	30	0:00s	1:00	S
+Rule	Italy	1977	1979	-	May	Sun>=22	0:00s	1:00	S
+Rule	Italy	1978	only	-	Oct	 1	0:00s	0	-
+Rule	Italy	1979	only	-	Sep	30	0:00s	0	-
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone	Europe/Rome	0:49:56 -	LMT	1866 Sep 22
+			0:49:56	-	RMT	1893 Nov  1 0:00s # Rome Mean
+			1:00	Italy	CE%sT	1942 Nov  2 2:00s
+			1:00	C-Eur	CE%sT	1944 Jul
+			1:00	Italy	CE%sT	1980
+			1:00	EU	CE%sT
+
+Link	Europe/Rome	Europe/Vatican
+Link	Europe/Rome	Europe/San_Marino
+
+# Latvia
+
+# From Liene Kanepe (1998-09-17):
+
+# I asked about this matter Scientific Secretary of the Institute of Astronomy
+# of The University of Latvia Dr. paed Mr. Ilgonis Vilks. I also searched the
+# correct data in juridical acts and I found some juridical documents about
+# changes in the counting of time in Latvia from 1981....
+#
+# Act No.35 of the Council of Ministers of Latvian SSR of 1981-01-22 ...
+# according to the Act No.925 of the Council of Ministers of USSR of 1980-10-24
+# ...: all year round the time of 2nd time zone + 1 hour, in addition turning
+# the hands of the clock 1 hour forward on 1 April at 00:00 (GMT 31 March 21:00)
+# and 1 hour backward on the 1 October at 00:00 (GMT 30 September 20:00).
+#
+# Act No.592 of the Council of Ministers of Latvian SSR of 1984-09-24 ...
+# according to the Act No.967 of the Council of Ministers of USSR of 1984-09-13
+# ...: all year round the time of 2nd time zone + 1 hour, in addition turning
+# the hands of the clock 1 hour forward on the last Sunday of March at 02:00
+# (GMT 23:00 on the previous day) and 1 hour backward on the last Sunday of
+# September at 03:00 (GMT 23:00 on the previous day).
+#
+# Act No.81 of the Council of Ministers of Latvian SSR of 1989-03-22 ...
+# according to the Act No.227 of the Council of Ministers of USSR of 1989-03-14
+# ...: since the last Sunday of March 1989 in Lithuanian SSR, Latvian SSR,
+# Estonian SSR and Kaliningrad region of Russian Federation all year round the
+# time of 2nd time zone (Moscow time minus one hour). On the territory of Latvia
+# transition to summer time is performed on the last Sunday of March at 02:00
+# (GMT 00:00), turning the hands of the clock 1 hour forward.  The end of
+# daylight saving time is performed on the last Sunday of September at 03:00
+# (GMT 00:00), turning the hands of the clock 1 hour backward. Exception is
+# 1989-03-26, when we must not turn the hands of the clock....
+#
+# The Regulations of the Cabinet of Ministers of the Republic of Latvia of
+# 1997-01-21 on transition to Summer time ... established the same order of
+# daylight savings time settings as in the States of the European Union.
+
+# From Andrei Ivanov (2000-03-06):
+# This year Latvia will not switch to Daylight Savings Time (as specified in
+# <a href="http://www.lv-laiks.lv/wwwraksti/2000/071072/vd4.htm">
+# The Regulations of the Cabinet of Ministers of the Rep. of Latvia of
+# 29-Feb-2000 (#79)</a>, in Latvian for subscribers only).
+
+# <a href="http://www.rferl.org/newsline/2001/01/3-CEE/cee-030101.html">
+# From RFE/RL Newsline (2001-01-03), noted after a heads-up by Rives McDow:
+# </a>
+# The Latvian government on 2 January decided that the country will
+# institute daylight-saving time this spring, LETA reported.
+# Last February the three Baltic states decided not to turn back their
+# clocks one hour in the spring....
+# Minister of Economy Aigars Kalvitis noted that Latvia had too few
+# daylight hours and thus decided to comply with a draft European
+# Commission directive that provides for instituting daylight-saving
+# time in EU countries between 2002 and 2006. The Latvian government
+# urged Lithuania and Estonia to adopt a similar time policy, but it
+# appears that they will not do so....
+
+# Rule	NAME	FROM	TO	TYPE	IN	ON	AT	SAVE	LETTER/S
+Rule	Latvia	1989	1996	-	Mar	lastSun	 2:00s	1:00	S
+Rule	Latvia	1989	1996	-	Sep	lastSun	 2:00s	0	-
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone	Europe/Riga	1:36:24	-	LMT	1880
+			1:36:24	-	RMT	1918 Apr 15 2:00 #Riga Mean Time
+			1:36:24	1:00	LST	1918 Sep 16 3:00 #Latvian Summer
+			1:36:24	-	RMT	1919 Apr  1 2:00
+			1:36:24	1:00	LST	1919 May 22 3:00
+			1:36:24	-	RMT	1926 May 11
+			2:00	-	EET	1940 Aug  5
+			3:00	-	MSK	1941 Jul
+			1:00	C-Eur	CE%sT	1944 Oct 13
+			3:00	Russia	MSK/MSD	1989 Mar lastSun 2:00s
+			2:00	1:00	EEST	1989 Sep lastSun 2:00s
+			2:00	Latvia	EE%sT	1997 Jan 21
+			2:00	EU	EE%sT	2000 Feb 29
+			2:00	-	EET	2001 Jan  2
+			2:00	EU	EE%sT
+
+# Liechtenstein
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone	Europe/Vaduz	0:38:04 -	LMT	1894 Jun
+			1:00	-	CET	1981
+			1:00	EU	CE%sT
+
+# Lithuania
+
+# From Paul Eggert (1996-11-22):
+# IATA SSIM (1992/1996) says Lithuania uses W-Eur rules, but since it is
+# known to be wrong about Estonia and Latvia, assume it's wrong here too.
+
+# From Marius Gedminas (1998-08-07):
+# I would like to inform that in this year Lithuanian time zone
+# (Europe/Vilnius) was changed.
+
+# From <a href="http://www.elta.lt/">ELTA</a> No. 972 (2582) (1999-09-29),
+# via Steffen Thorsen:
+# Lithuania has shifted back to the second time zone (GMT plus two hours)
+# to be valid here starting from October 31,
+# as decided by the national government on Wednesday....
+# The Lithuanian government also announced plans to consider a
+# motion to give up shifting to summer time in spring, as it was
+# already done by Estonia.
+
+# From the <a href="http://www.tourism.lt/informa/ff.htm">
+# Fact File, Lithuanian State Department of Tourism
+# </a> (2000-03-27): Local time is GMT+2 hours ..., no daylight saving.
+
+# From a user via Klaus Marten (2003-02-07):
+# As a candidate for membership of the European Union, Lithuania will
+# observe Summer Time in 2003, changing its clocks at the times laid
+# down in EU Directive 2000/84 of 19.I.01 (i.e. at the same times as its
+# neighbour Latvia). The text of the Lithuanian government Order of
+# 7.XI.02 to this effect can be found at
+# http://www.lrvk.lt/nut/11/n1749.htm
+
+
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone	Europe/Vilnius	1:41:16	-	LMT	1880
+			1:24:00	-	WMT	1917	    # Warsaw Mean Time
+			1:35:36	-	KMT	1919 Oct 10 # Kaunas Mean Time
+			1:00	-	CET	1920 Jul 12
+			2:00	-	EET	1920 Oct  9
+			1:00	-	CET	1940 Aug  3
+			3:00	-	MSK	1941 Jun 24
+			1:00	C-Eur	CE%sT	1944 Aug
+			3:00	Russia	MSK/MSD	1991 Mar 31 2:00s
+			2:00	1:00	EEST	1991 Sep 29 2:00s
+			2:00	C-Eur	EE%sT	1998
+			2:00	-	EET	1998 Mar 29 1:00u
+			1:00	EU	CE%sT	1999 Oct 31 1:00u
+			2:00	-	EET	2003 Jan  1
+			2:00	EU	EE%sT
+
+# Luxembourg
+# Whitman disagrees with most of these dates in minor ways;
+# go with Shanks & Pottenger.
+# Rule	NAME	FROM	TO	TYPE	IN	ON	AT	SAVE	LETTER/S
+Rule	Lux	1916	only	-	May	14	23:00	1:00	S
+Rule	Lux	1916	only	-	Oct	 1	 1:00	0	-
+Rule	Lux	1917	only	-	Apr	28	23:00	1:00	S
+Rule	Lux	1917	only	-	Sep	17	 1:00	0	-
+Rule	Lux	1918	only	-	Apr	Mon>=15	 2:00s	1:00	S
+Rule	Lux	1918	only	-	Sep	Mon>=15	 2:00s	0	-
+Rule	Lux	1919	only	-	Mar	 1	23:00	1:00	S
+Rule	Lux	1919	only	-	Oct	 5	 3:00	0	-
+Rule	Lux	1920	only	-	Feb	14	23:00	1:00	S
+Rule	Lux	1920	only	-	Oct	24	 2:00	0	-
+Rule	Lux	1921	only	-	Mar	14	23:00	1:00	S
+Rule	Lux	1921	only	-	Oct	26	 2:00	0	-
+Rule	Lux	1922	only	-	Mar	25	23:00	1:00	S
+Rule	Lux	1922	only	-	Oct	Sun>=2	 1:00	0	-
+Rule	Lux	1923	only	-	Apr	21	23:00	1:00	S
+Rule	Lux	1923	only	-	Oct	Sun>=2	 2:00	0	-
+Rule	Lux	1924	only	-	Mar	29	23:00	1:00	S
+Rule	Lux	1924	1928	-	Oct	Sun>=2	 1:00	0	-
+Rule	Lux	1925	only	-	Apr	 5	23:00	1:00	S
+Rule	Lux	1926	only	-	Apr	17	23:00	1:00	S
+Rule	Lux	1927	only	-	Apr	 9	23:00	1:00	S
+Rule	Lux	1928	only	-	Apr	14	23:00	1:00	S
+Rule	Lux	1929	only	-	Apr	20	23:00	1:00	S
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone Europe/Luxembourg	0:24:36 -	LMT	1904 Jun
+			1:00	Lux	CE%sT	1918 Nov 25
+			0:00	Lux	WE%sT	1929 Oct  6 2:00s
+			0:00	Belgium	WE%sT	1940 May 14 3:00
+			1:00	C-Eur	WE%sT	1944 Sep 18 3:00
+			1:00	Belgium	CE%sT	1977
+			1:00	EU	CE%sT
+
+# Macedonia
+# see Serbia
+
+# Malta
+# Rule	NAME	FROM	TO	TYPE	IN	ON	AT	SAVE	LETTER/S
+Rule	Malta	1973	only	-	Mar	31	0:00s	1:00	S
+Rule	Malta	1973	only	-	Sep	29	0:00s	0	-
+Rule	Malta	1974	only	-	Apr	21	0:00s	1:00	S
+Rule	Malta	1974	only	-	Sep	16	0:00s	0	-
+Rule	Malta	1975	1979	-	Apr	Sun>=15	2:00	1:00	S
+Rule	Malta	1975	1980	-	Sep	Sun>=15	2:00	0	-
+Rule	Malta	1980	only	-	Mar	31	2:00	1:00	S
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone	Europe/Malta	0:58:04 -	LMT	1893 Nov  2 0:00s # Valletta
+			1:00	Italy	CE%sT	1942 Nov  2 2:00s
+			1:00	C-Eur	CE%sT	1945 Apr  2 2:00s
+			1:00	Italy	CE%sT	1973 Mar 31
+			1:00	Malta	CE%sT	1981
+			1:00	EU	CE%sT
+
+# Moldova
+
+# From Paul Eggert (2006-03-22):
+# A previous version of this database followed Shanks & Pottenger, who write
+# that Tiraspol switched to Moscow time on 1992-01-19 at 02:00.
+# However, this is most likely an error, as Moldova declared independence
+# on 1991-08-27 (the 1992-01-19 date is that of a Russian decree).
+# In early 1992 there was large-scale interethnic violence in the area
+# and it's possible that some Russophones continued to observe Moscow time.
+# But [two people] separately reported via
+# Jesper Norgaard that as of 2001-01-24 Tiraspol was like Chisinau.
+# The Tiraspol entry has therefore been removed for now.
+
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone	Europe/Chisinau	1:55:20 -	LMT	1880
+			1:55	-	CMT	1918 Feb 15 # Chisinau MT
+			1:44:24	-	BMT	1931 Jul 24 # Bucharest MT
+			2:00	Romania	EE%sT	1940 Aug 15
+			2:00	1:00	EEST	1941 Jul 17
+			1:00	C-Eur	CE%sT	1944 Aug 24
+			3:00	Russia	MSK/MSD	1990
+			3:00	-	MSK	1990 May 6
+			2:00	-	EET	1991
+			2:00	Russia	EE%sT	1992
+			2:00	E-Eur	EE%sT	1997
+# See Romania commentary for the guessed 1997 transition to EU rules.
+			2:00	EU	EE%sT
+
+# Monaco
+# Shanks & Pottenger give 0:09:20 for Paris Mean Time; go with Howse's
+# more precise 0:09:21.
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone	Europe/Monaco	0:29:32 -	LMT	1891 Mar 15
+			0:09:21	-	PMT	1911 Mar 11    # Paris Mean Time
+			0:00	France	WE%sT	1945 Sep 16 3:00
+			1:00	France	CE%sT	1977
+			1:00	EU	CE%sT
+
+# Montenegro
+# see Serbia
+
+# Netherlands
+
+# Howse writes that the Netherlands' railways used GMT between 1892 and 1940,
+# but for other purposes the Netherlands used Amsterdam mean time.
+
+# However, Robert H. van Gent writes (2001-04-01):
+# Howse's statement is only correct up to 1909. From 1909-05-01 (00:00:00
+# Amsterdam mean time) onwards, the whole of the Netherlands (including
+# the Dutch railways) was required by law to observe Amsterdam mean time
+# (19 minutes 32.13 seconds ahead of GMT). This had already been the
+# common practice (except for the railways) for many decades but it was
+# not until 1909 when the Dutch government finally defined this by law.
+# On 1937-07-01 this was changed to 20 minutes (exactly) ahead of GMT and
+# was generally known as Dutch Time ("Nederlandse Tijd").
+#
+# (2001-04-08):
+# 1892-05-01 was the date when the Dutch railways were by law required to
+# observe GMT while the remainder of the Netherlands adhered to the common
+# practice of following Amsterdam mean time.
+#
+# (2001-04-09):
+# In 1835 the authorities of the province of North Holland requested the
+# municipal authorities of the towns and cities in the province to observe
+# Amsterdam mean time but I do not know in how many cases this request was
+# actually followed.
+#
+# From 1852 onwards the Dutch telegraph offices were by law required to
+# observe Amsterdam mean time. As the time signals from the observatory of
+# Leiden were also distributed by the telegraph system, I assume that most
+# places linked up with the telegraph (and railway) system automatically
+# adopted Amsterdam mean time.
+#
+# Although the early Dutch railway companies initially observed a variety
+# of times, most of them had adopted Amsterdam mean time by 1858 but it
+# was not until 1866 when they were all required by law to observe
+# Amsterdam mean time.
+
+# The data before 1945 are taken from
+# <http://www.phys.uu.nl/~vgent/wettijd/wettijd.htm>.
+
+# Rule	NAME	FROM	TO	TYPE	IN	ON	AT	SAVE	LETTER/S
+Rule	Neth	1916	only	-	May	 1	0:00	1:00	NST	# Netherlands Summer Time
+Rule	Neth	1916	only	-	Oct	 1	0:00	0	AMT	# Amsterdam Mean Time
+Rule	Neth	1917	only	-	Apr	16	2:00s	1:00	NST
+Rule	Neth	1917	only	-	Sep	17	2:00s	0	AMT
+Rule	Neth	1918	1921	-	Apr	Mon>=1	2:00s	1:00	NST
+Rule	Neth	1918	1921	-	Sep	lastMon	2:00s	0	AMT
+Rule	Neth	1922	only	-	Mar	lastSun	2:00s	1:00	NST
+Rule	Neth	1922	1936	-	Oct	Sun>=2	2:00s	0	AMT
+Rule	Neth	1923	only	-	Jun	Fri>=1	2:00s	1:00	NST
+Rule	Neth	1924	only	-	Mar	lastSun	2:00s	1:00	NST
+Rule	Neth	1925	only	-	Jun	Fri>=1	2:00s	1:00	NST
+# From 1926 through 1939 DST began 05-15, except that it was delayed by a week
+# in years when 05-15 fell in the Pentecost weekend.
+Rule	Neth	1926	1931	-	May	15	2:00s	1:00	NST
+Rule	Neth	1932	only	-	May	22	2:00s	1:00	NST
+Rule	Neth	1933	1936	-	May	15	2:00s	1:00	NST
+Rule	Neth	1937	only	-	May	22	2:00s	1:00	NST
+Rule	Neth	1937	only	-	Jul	 1	0:00	1:00	S
+Rule	Neth	1937	1939	-	Oct	Sun>=2	2:00s	0	-
+Rule	Neth	1938	1939	-	May	15	2:00s	1:00	S
+Rule	Neth	1945	only	-	Apr	 2	2:00s	1:00	S
+Rule	Neth	1945	only	-	Sep	16	2:00s	0	-
+#
+# Amsterdam Mean Time was +00:19:32.13 exactly, but the .13 is omitted
+# below because the current format requires GMTOFF to be an integer.
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone Europe/Amsterdam	0:19:32 -	LMT	1835
+			0:19:32	Neth	%s	1937 Jul  1
+			0:20	Neth	NE%sT	1940 May 16 0:00 # Dutch Time
+			1:00	C-Eur	CE%sT	1945 Apr  2 2:00
+			1:00	Neth	CE%sT	1977
+			1:00	EU	CE%sT
+
+# Norway
+# http://met.no/met/met_lex/q_u/sommertid.html (2004-01) agrees with Shanks &
+# Pottenger.
+# Rule	NAME	FROM	TO	TYPE	IN	ON	AT	SAVE	LETTER/S
+Rule	Norway	1916	only	-	May	22	1:00	1:00	S
+Rule	Norway	1916	only	-	Sep	30	0:00	0	-
+Rule	Norway	1945	only	-	Apr	 2	2:00s	1:00	S
+Rule	Norway	1945	only	-	Oct	 1	2:00s	0	-
+Rule	Norway	1959	1964	-	Mar	Sun>=15	2:00s	1:00	S
+Rule	Norway	1959	1965	-	Sep	Sun>=15	2:00s	0	-
+Rule	Norway	1965	only	-	Apr	25	2:00s	1:00	S
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone	Europe/Oslo	0:43:00 -	LMT	1895 Jan  1
+			1:00	Norway	CE%sT	1940 Aug 10 23:00
+			1:00	C-Eur	CE%sT	1945 Apr  2  2:00
+			1:00	Norway	CE%sT	1980
+			1:00	EU	CE%sT
+
+# Svalbard & Jan Mayen
+
+# From Steffen Thorsen (2001-05-01):
+# Although I could not find it explicitly, it seems that Jan Mayen and
+# Svalbard have been using the same time as Norway at least since the
+# time they were declared as parts of Norway.  Svalbard was declared
+# as a part of Norway by law of 1925-07-17 no 11, section 4 and Jan
+# Mayen by law of 1930-02-27 no 2, section 2. (From
+# http://www.lovdata.no/all/nl-19250717-011.html and
+# http://www.lovdata.no/all/nl-19300227-002.html).  The law/regulation
+# for normal/standard time in Norway is from 1894-06-29 no 1 (came
+# into operation on 1895-01-01) and Svalbard/Jan Mayen seem to be a
+# part of this law since 1925/1930. (From
+# http://www.lovdata.no/all/nl-18940629-001.html ) I have not been
+# able to find if Jan Mayen used a different time zone (e.g. -0100)
+# before 1930. Jan Mayen has only been "inhabitated" since 1921 by
+# Norwegian meteorologists and maybe used the same time as Norway ever
+# since 1921.  Svalbard (Arctic/Longyearbyen) has been inhabited since
+# before 1895, and therefore probably changed the local time somewhere
+# between 1895 and 1925 (inclusive).
+
+# From Paul Eggert (2001-05-01):
+#
+# Actually, Jan Mayen was never occupied by Germany during World War II,
+# so it must have diverged from Oslo time during the war, as Oslo was
+# keeping Berlin time.
+#
+# <http://home.no.net/janmayen/history.htm> says that the meteorologists
+# burned down their station in 1940 and left the island, but returned in
+# 1941 with a small Norwegian garrison and continued operations despite
+# frequent air ttacks from Germans.  In 1943 the Americans established a
+# radiolocating station on the island, called "Atlantic City".  Possibly
+# the UTC offset changed during the war, but I think it unlikely that
+# Jan Mayen used German daylight-saving rules.
+#
+# Svalbard is more complicated, as it was raided in August 1941 by an
+# Allied party that evacuated the civilian population to England (says
+# <http://www.bartleby.com/65/sv/Svalbard.html>).  The Svalbard FAQ
+# <http://www.svalbard.com/SvalbardFAQ.html> says that the Germans were
+# expelled on 1942-05-14.  However, small parties of Germans did return,
+# and according to Wilhelm Dege's book "War North of 80" (1954)
+# <http://www.ucalgary.ca/UofC/departments/UP/1-55238/1-55238-110-2.html>
+# the German armed forces at the Svalbard weather station code-named
+# Haudegen did not surrender to the Allies until September 1945.
+#
+# All these events predate our cutoff date of 1970.  Unless we can
+# come up with more definitive info about the timekeeping during the
+# war years it's probably best just do do the following for now:
+Link	Europe/Oslo	Arctic/Longyearbyen
+Link	Europe/Oslo	Atlantic/Jan_Mayen
+
+# Poland
+# Rule	NAME	FROM	TO	TYPE	IN	ON	AT	SAVE	LETTER/S
+Rule	Poland	1918	1919	-	Sep	16	2:00s	0	-
+Rule	Poland	1919	only	-	Apr	15	2:00s	1:00	S
+Rule	Poland	1944	only	-	Apr	 3	2:00s	1:00	S
+# Whitman gives 1944 Nov 30; go with Shanks & Pottenger.
+Rule	Poland	1944	only	-	Oct	 4	2:00	0	-
+# For 1944-1948 Whitman gives the previous day; go with Shanks & Pottenger.
+Rule	Poland	1945	only	-	Apr	29	0:00	1:00	S
+Rule	Poland	1945	only	-	Nov	 1	0:00	0	-
+# For 1946 on the source is Kazimierz Borkowski,
+# Torun Center for Astronomy, Dept. of Radio Astronomy, Nicolaus Copernicus U.,
+# <http://www.astro.uni.torun.pl/~kb/Artykuly/U-PA/Czas2.htm#tth_tAb1>
+# Thanks to Przemyslaw Augustyniak (2005-05-28) for this reference.
+# He also gives these further references:
+# Mon Pol nr 13, poz 162 (1995) <http://www.abc.com.pl/serwis/mp/1995/0162.htm>
+# Druk nr 2180 (2003) <http://www.senat.gov.pl/k5/dok/sejm/053/2180.pdf>
+Rule	Poland	1946	only	-	Apr	14	0:00s	1:00	S
+Rule	Poland	1946	only	-	Oct	 7	2:00s	0	-
+Rule	Poland	1947	only	-	May	 4	2:00s	1:00	S
+Rule	Poland	1947	1949	-	Oct	Sun>=1	2:00s	0	-
+Rule	Poland	1948	only	-	Apr	18	2:00s	1:00	S
+Rule	Poland	1949	only	-	Apr	10	2:00s	1:00	S
+Rule	Poland	1957	only	-	Jun	 2	1:00s	1:00	S
+Rule	Poland	1957	1958	-	Sep	lastSun	1:00s	0	-
+Rule	Poland	1958	only	-	Mar	30	1:00s	1:00	S
+Rule	Poland	1959	only	-	May	31	1:00s	1:00	S
+Rule	Poland	1959	1961	-	Oct	Sun>=1	1:00s	0	-
+Rule	Poland	1960	only	-	Apr	 3	1:00s	1:00	S
+Rule	Poland	1961	1964	-	May	lastSun	1:00s	1:00	S
+Rule	Poland	1962	1964	-	Sep	lastSun	1:00s	0	-
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone	Europe/Warsaw	1:24:00 -	LMT	1880
+			1:24:00	-	WMT	1915 Aug  5   # Warsaw Mean Time
+			1:00	C-Eur	CE%sT	1918 Sep 16 3:00
+			2:00	Poland	EE%sT	1922 Jun
+			1:00	Poland	CE%sT	1940 Jun 23 2:00
+			1:00	C-Eur	CE%sT	1944 Oct
+			1:00	Poland	CE%sT	1977
+			1:00	W-Eur	CE%sT	1988
+			1:00	EU	CE%sT
+
+# Portugal
+#
+# From Rui Pedro Salgueiro (1992-11-12):
+# Portugal has recently (September, 27) changed timezone
+# (from WET to MET or CET) to harmonize with EEC.
+#
+# Martin Bruckmann (1996-02-29) reports via Peter Ilieve
+# that Portugal is reverting to 0:00 by not moving its clocks this spring.
+# The new Prime Minister was fed up with getting up in the dark in the winter.
+#
+# From Paul Eggert (1996-11-12):
+# IATA SSIM (1991-09) reports several 1991-09 and 1992-09 transitions
+# at 02:00u, not 01:00u.  Assume that these are typos.
+# IATA SSIM (1991/1992) reports that the Azores were at -1:00.
+# IATA SSIM (1993-02) says +0:00; later issues (through 1996-09) say -1:00.
+# Guess that the Azores changed to EU rules in 1992 (since that's when Portugal
+# harmonized with the EU), and that they stayed +0:00 that winter.
+#
+# Rule	NAME	FROM	TO	TYPE	IN	ON	AT	SAVE	LETTER/S
+# DSH writes that despite Decree 1,469 (1915), the change to the clocks was not
+# done every year, depending on what Spain did, because of railroad schedules.
+# Go with Shanks & Pottenger.
+Rule	Port	1916	only	-	Jun	17	23:00	1:00	S
+# Whitman gives 1916 Oct 31; go with Shanks & Pottenger.
+Rule	Port	1916	only	-	Nov	 1	 1:00	0	-
+Rule	Port	1917	only	-	Feb	28	23:00s	1:00	S
+Rule	Port	1917	1921	-	Oct	14	23:00s	0	-
+Rule	Port	1918	only	-	Mar	 1	23:00s	1:00	S
+Rule	Port	1919	only	-	Feb	28	23:00s	1:00	S
+Rule	Port	1920	only	-	Feb	29	23:00s	1:00	S
+Rule	Port	1921	only	-	Feb	28	23:00s	1:00	S
+Rule	Port	1924	only	-	Apr	16	23:00s	1:00	S
+Rule	Port	1924	only	-	Oct	14	23:00s	0	-
+Rule	Port	1926	only	-	Apr	17	23:00s	1:00	S
+Rule	Port	1926	1929	-	Oct	Sat>=1	23:00s	0	-
+Rule	Port	1927	only	-	Apr	 9	23:00s	1:00	S
+Rule	Port	1928	only	-	Apr	14	23:00s	1:00	S
+Rule	Port	1929	only	-	Apr	20	23:00s	1:00	S
+Rule	Port	1931	only	-	Apr	18	23:00s	1:00	S
+# Whitman gives 1931 Oct 8; go with Shanks & Pottenger.
+Rule	Port	1931	1932	-	Oct	Sat>=1	23:00s	0	-
+Rule	Port	1932	only	-	Apr	 2	23:00s	1:00	S
+Rule	Port	1934	only	-	Apr	 7	23:00s	1:00	S
+# Whitman gives 1934 Oct 5; go with Shanks & Pottenger.
+Rule	Port	1934	1938	-	Oct	Sat>=1	23:00s	0	-
+# Shanks & Pottenger give 1935 Apr 30; go with Whitman.
+Rule	Port	1935	only	-	Mar	30	23:00s	1:00	S
+Rule	Port	1936	only	-	Apr	18	23:00s	1:00	S
+# Whitman gives 1937 Apr 2; go with Shanks & Pottenger.
+Rule	Port	1937	only	-	Apr	 3	23:00s	1:00	S
+Rule	Port	1938	only	-	Mar	26	23:00s	1:00	S
+Rule	Port	1939	only	-	Apr	15	23:00s	1:00	S
+# Whitman gives 1939 Oct 7; go with Shanks & Pottenger.
+Rule	Port	1939	only	-	Nov	18	23:00s	0	-
+Rule	Port	1940	only	-	Feb	24	23:00s	1:00	S
+# Shanks & Pottenger give 1940 Oct 7; go with Whitman.
+Rule	Port	1940	1941	-	Oct	 5	23:00s	0	-
+Rule	Port	1941	only	-	Apr	 5	23:00s	1:00	S
+Rule	Port	1942	1945	-	Mar	Sat>=8	23:00s	1:00	S
+Rule	Port	1942	only	-	Apr	25	22:00s	2:00	M # Midsummer
+Rule	Port	1942	only	-	Aug	15	22:00s	1:00	S
+Rule	Port	1942	1945	-	Oct	Sat>=24	23:00s	0	-
+Rule	Port	1943	only	-	Apr	17	22:00s	2:00	M
+Rule	Port	1943	1945	-	Aug	Sat>=25	22:00s	1:00	S
+Rule	Port	1944	1945	-	Apr	Sat>=21	22:00s	2:00	M
+Rule	Port	1946	only	-	Apr	Sat>=1	23:00s	1:00	S
+Rule	Port	1946	only	-	Oct	Sat>=1	23:00s	0	-
+Rule	Port	1947	1949	-	Apr	Sun>=1	 2:00s	1:00	S
+Rule	Port	1947	1949	-	Oct	Sun>=1	 2:00s	0	-
+# Shanks & Pottenger say DST was observed in 1950; go with Whitman.
+# Whitman gives Oct lastSun for 1952 on; go with Shanks & Pottenger.
+Rule	Port	1951	1965	-	Apr	Sun>=1	 2:00s	1:00	S
+Rule	Port	1951	1965	-	Oct	Sun>=1	 2:00s	0	-
+Rule	Port	1977	only	-	Mar	27	 0:00s	1:00	S
+Rule	Port	1977	only	-	Sep	25	 0:00s	0	-
+Rule	Port	1978	1979	-	Apr	Sun>=1	 0:00s	1:00	S
+Rule	Port	1978	only	-	Oct	 1	 0:00s	0	-
+Rule	Port	1979	1982	-	Sep	lastSun	 1:00s	0	-
+Rule	Port	1980	only	-	Mar	lastSun	 0:00s	1:00	S
+Rule	Port	1981	1982	-	Mar	lastSun	 1:00s	1:00	S
+Rule	Port	1983	only	-	Mar	lastSun	 2:00s	1:00	S
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+# Shanks & Pottenger say the transition from LMT to WET occurred 1911-05-24;
+# Willett says 1912-01-01.  Go with Willett.
+Zone	Europe/Lisbon	-0:36:32 -	LMT	1884
+			-0:36:32 -	LMT	1912 Jan  1  # Lisbon Mean Time
+			 0:00	Port	WE%sT	1966 Apr  3 2:00
+			 1:00	-	CET	1976 Sep 26 1:00
+			 0:00	Port	WE%sT	1983 Sep 25 1:00s
+			 0:00	W-Eur	WE%sT	1992 Sep 27 1:00s
+			 1:00	EU	CE%sT	1996 Mar 31 1:00u
+			 0:00	EU	WE%sT
+Zone Atlantic/Azores	-1:42:40 -	LMT	1884		# Ponta Delgada
+			-1:54:32 -	HMT	1911 May 24  # Horta Mean Time
+			-2:00	Port	AZO%sT	1966 Apr  3 2:00 # Azores Time
+			-1:00	Port	AZO%sT	1983 Sep 25 1:00s
+			-1:00	W-Eur	AZO%sT	1992 Sep 27 1:00s
+			 0:00	EU	WE%sT	1993 Mar 28 1:00u
+			-1:00	EU	AZO%sT
+Zone Atlantic/Madeira	-1:07:36 -	LMT	1884		# Funchal
+			-1:07:36 -	FMT	1911 May 24  # Funchal Mean Time
+			-1:00	Port	MAD%sT	1966 Apr  3 2:00 # Madeira Time
+			 0:00	Port	WE%sT	1983 Sep 25 1:00s
+			 0:00	EU	WE%sT
+
+# Romania
+#
+# From Paul Eggert (1999-10-07):
+# <a href="http://www.nineoclock.ro/POL/1778pol.html">
+# Nine O'clock</a> (1998-10-23) reports that the switch occurred at
+# 04:00 local time in fall 1998.  For lack of better info,
+# assume that Romania and Moldova switched to EU rules in 1997,
+# the same year as Bulgaria.
+#
+# Rule	NAME	FROM	TO	TYPE	IN	ON	AT	SAVE	LETTER/S
+Rule	Romania	1932	only	-	May	21	 0:00s	1:00	S
+Rule	Romania	1932	1939	-	Oct	Sun>=1	 0:00s	0	-
+Rule	Romania	1933	1939	-	Apr	Sun>=2	 0:00s	1:00	S
+Rule	Romania	1979	only	-	May	27	 0:00	1:00	S
+Rule	Romania	1979	only	-	Sep	lastSun	 0:00	0	-
+Rule	Romania	1980	only	-	Apr	 5	23:00	1:00	S
+Rule	Romania	1980	only	-	Sep	lastSun	 1:00	0	-
+Rule	Romania	1991	1993	-	Mar	lastSun	 0:00s	1:00	S
+Rule	Romania	1991	1993	-	Sep	lastSun	 0:00s	0	-
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone Europe/Bucharest	1:44:24 -	LMT	1891 Oct
+			1:44:24	-	BMT	1931 Jul 24	# Bucharest MT
+			2:00	Romania	EE%sT	1981 Mar 29 2:00s
+			2:00	C-Eur	EE%sT	1991
+			2:00	Romania	EE%sT	1994
+			2:00	E-Eur	EE%sT	1997
+			2:00	EU	EE%sT
+
+# Russia
+
+# From Paul Eggert (2006-03-22):
+# Except for Moscow after 1919-07-01, I invented the time zone abbreviations.
+# Moscow time zone abbreviations after 1919-07-01, and Moscow rules after 1991,
+# are from Andrey A. Chernov.  The rest is from Shanks & Pottenger,
+# except we follow Chernov's report that 1992 DST transitions were Sat
+# 23:00, not Sun 02:00s.
+#
+# From Stanislaw A. Kuzikowski (1994-06-29):
+# But now it is some months since Novosibirsk is 3 hours ahead of Moscow!
+# I do not know why they have decided to make this change;
+# as far as I remember it was done exactly during winter->summer switching
+# so we (Novosibirsk) simply did not switch.
+#
+# From Andrey A. Chernov (1996-10-04):
+# `MSK' and `MSD' were born and used initially on Moscow computers with
+# UNIX-like OSes by several developer groups (e.g. Demos group, Kiae group)....
+# The next step was the UUCP network, the Relcom predecessor
+# (used mainly for mail), and MSK/MSD was actively used there.
+#
+# From Chris Carrier (1996-10-30):
+# According to a friend of mine who rode the Trans-Siberian Railroad from
+# Moscow to Irkutsk in 1995, public air and rail transport in Russia ...
+# still follows Moscow time, no matter where in Russia it is located.
+#
+# For Grozny, Chechnya, we have the following story from
+# John Daniszewski, "Scavengers in the Rubble", Los Angeles Times (2001-02-07):
+# News--often false--is spread by word of mouth.  A rumor that it was
+# time to move the clocks back put this whole city out of sync with
+# the rest of Russia for two weeks--even soldiers stationed here began
+# enforcing curfew at the wrong time.
+#
+# From Gwillim Law (2001-06-05):
+# There's considerable evidence that Sakhalin Island used to be in
+# UTC+11, and has changed to UTC+10, in this decade.  I start with the
+# SSIM, which listed Yuzhno-Sakhalinsk in zone RU10 along with Magadan
+# until February 1997, and then in RU9 with Khabarovsk and Vladivostok
+# since September 1997....  Although the Kuril Islands are
+# administratively part of Sakhalin oblast', they appear to have
+# remained on UTC+11 along with Magadan.
+#
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+#
+# Kaliningradskaya oblast'.
+Zone Europe/Kaliningrad	 1:22:00 -	LMT	1893 Apr
+			 1:00	C-Eur	CE%sT	1945
+			 2:00	Poland	CE%sT	1946
+			 3:00	Russia	MSK/MSD	1991 Mar 31 2:00s
+			 2:00	Russia	EE%sT
+#
+# From Oscar van Vlijmen (2001-08-25): [This region consists of]
+# Respublika Adygeya, Arkhangel'skaya oblast',
+# Belgorodskaya oblast', Bryanskaya oblast', Vladimirskaya oblast',
+# Vologodskaya oblast', Voronezhskaya oblast',
+# Respublika Dagestan, Ivanovskaya oblast', Respublika Ingushetiya,
+# Kabarbino-Balkarskaya Respublika, Respublika Kalmykiya,
+# Kalyzhskaya oblast', Respublika Karachaevo-Cherkessiya,
+# Respublika Kareliya, Respublika Komi,
+# Kostromskaya oblast', Krasnodarskij kraj, Kurskaya oblast',
+# Leningradskaya oblast', Lipetskaya oblast', Respublika Marij El,
+# Respublika Mordoviya, Moskva, Moskovskaya oblast',
+# Murmanskaya oblast', Nenetskij avtonomnyj okrug,
+# Nizhegorodskaya oblast', Novgorodskaya oblast', Orlovskaya oblast',
+# Penzenskaya oblast', Pskovskaya oblast', Rostovskaya oblast',
+# Ryazanskaya oblast', Sankt-Peterburg,
+# Respublika Severnaya Osetiya, Smolenskaya oblast',
+# Stavropol'skij kraj, Tambovskaya oblast', Respublika Tatarstan,
+# Tverskaya oblast', Tyl'skaya oblast', Ul'yanovskaya oblast',
+# Chechenskaya Respublika, Chuvashskaya oblast',
+# Yaroslavskaya oblast'
+Zone Europe/Moscow	 2:30:20 -	LMT	1880
+			 2:30	-	MMT	1916 Jul  3 # Moscow Mean Time
+			 2:30:48 Russia	%s	1919 Jul  1 2:00
+			 3:00	Russia	MSK/MSD	1922 Oct
+			 2:00	-	EET	1930 Jun 21
+			 3:00	Russia	MSK/MSD	1991 Mar 31 2:00s
+			 2:00	Russia	EE%sT	1992 Jan 19 2:00s
+			 3:00	Russia	MSK/MSD
+#
+# Astrakhanskaya oblast', Kirovskaya oblast', Saratovskaya oblast',
+# Volgogradskaya oblast'.  Shanks & Pottenger say Kirov is still at +0400
+# but Wikipedia (2006-05-09) says +0300.  Perhaps it switched after the
+# others?  But we have no data.
+Zone Europe/Volgograd	 2:57:40 -	LMT	1920 Jan  3
+			 3:00	-	TSAT	1925 Apr  6 # Tsaritsyn Time
+			 3:00	-	STAT	1930 Jun 21 # Stalingrad Time
+			 4:00	-	STAT	1961 Nov 11
+			 4:00	Russia	VOL%sT	1989 Mar 26 2:00s # Volgograd T
+			 3:00	Russia	VOL%sT	1991 Mar 31 2:00s
+			 4:00	-	VOLT	1992 Mar 29 2:00s
+			 3:00	Russia	VOL%sT
+#
+# From Oscar van Vlijmen (2001-08-25): [This region consists of]
+# Samarskaya oblast', Udmyrtskaya respublika
+Zone Europe/Samara	 3:20:36 -	LMT	1919 Jul  1 2:00
+			 3:00	-	SAMT	1930 Jun 21
+			 4:00	-	SAMT	1935 Jan 27
+			 4:00	Russia	KUY%sT	1989 Mar 26 2:00s # Kuybyshev
+			 3:00	Russia	KUY%sT	1991 Mar 31 2:00s
+			 2:00	Russia	KUY%sT	1991 Sep 29 2:00s
+			 3:00	-	KUYT	1991 Oct 20 3:00
+			 4:00	Russia	SAM%sT	# Samara Time
+#
+# From Oscar van Vlijmen (2001-08-25): [This region consists of]
+# Respublika Bashkortostan, Komi-Permyatskij avtonomnyj okrug,
+# Kurganskaya oblast', Orenburgskaya oblast', Permskaya oblast',
+# Sverdlovskaya oblast', Tyumenskaya oblast',
+# Khanty-Manskijskij avtonomnyj okrug, Chelyabinskaya oblast',
+# Yamalo-Nenetskij avtonomnyj okrug.
+Zone Asia/Yekaterinburg	 4:02:24 -	LMT	1919 Jul 15 4:00
+			 4:00	-	SVET	1930 Jun 21 # Sverdlovsk Time
+			 5:00	Russia	SVE%sT	1991 Mar 31 2:00s
+			 4:00	Russia	SVE%sT	1992 Jan 19 2:00s
+			 5:00	Russia	YEK%sT	# Yekaterinburg Time
+#
+# From Oscar van Vlijmen (2001-08-25): [This region consists of]
+# Respublika Altaj, Altajskij kraj, Omskaya oblast'.
+Zone Asia/Omsk		 4:53:36 -	LMT	1919 Nov 14
+			 5:00	-	OMST	1930 Jun 21 # Omsk TIme
+			 6:00	Russia	OMS%sT	1991 Mar 31 2:00s
+			 5:00	Russia	OMS%sT	1992 Jan 19 2:00s
+			 6:00	Russia	OMS%sT
+#
+# From Paul Eggert (2006-08-19): I'm guessing about Tomsk here; it's
+# not clear when it switched from +7 to +6.
+# Novosibirskaya oblast', Tomskaya oblast'.
+Zone Asia/Novosibirsk	 5:31:40 -	LMT	1919 Dec 14 6:00
+			 6:00	-	NOVT	1930 Jun 21 # Novosibirsk Time
+			 7:00	Russia	NOV%sT	1991 Mar 31 2:00s
+			 6:00	Russia	NOV%sT	1992 Jan 19 2:00s
+			 7:00	Russia	NOV%sT	1993 May 23 # say Shanks & P.
+			 6:00	Russia	NOV%sT
+#
+# From Oscar van Vlijmen (2001-08-25): [This region consists of]
+# Kemerovskaya oblast', Krasnoyarskij kraj,
+# Tajmyrskij (Dolgano-Nenetskij) avtonomnyj okrug,
+# Respublika Tuva, Respublika Khakasiya, Evenkijskij avtonomnyj okrug.
+Zone Asia/Krasnoyarsk	 6:11:20 -	LMT	1920 Jan  6
+			 6:00	-	KRAT	1930 Jun 21 # Krasnoyarsk Time
+			 7:00	Russia	KRA%sT	1991 Mar 31 2:00s
+			 6:00	Russia	KRA%sT	1992 Jan 19 2:00s
+			 7:00	Russia	KRA%sT
+#
+# From Oscar van Vlijmen (2001-08-25): [This region consists of]
+# Respublika Buryatiya, Irkutskaya oblast',
+# Ust'-Ordynskij Buryatskij avtonomnyj okrug.
+Zone Asia/Irkutsk	 6:57:20 -	LMT	1880
+			 6:57:20 -	IMT	1920 Jan 25 # Irkutsk Mean Time
+			 7:00	-	IRKT	1930 Jun 21 # Irkutsk Time
+			 8:00	Russia	IRK%sT	1991 Mar 31 2:00s
+			 7:00	Russia	IRK%sT	1992 Jan 19 2:00s
+			 8:00	Russia	IRK%sT
+#
+# From Oscar van Vlijmen (2003-10-18): [This region consists of]
+# Aginskij Buryatskij avtonomnyj okrug, Amurskaya oblast',
+# [parts of] Respublika Sakha (Yakutiya), Chitinskaya oblast'.
+# The Sakha districts are: Aldanskij, Amginskij, Anabarskij,
+# Bulunskij, Verkhnekolymskij, Verkhnevilyujskij, Vilyujskij, Gornyj,
+# Zhiganskij, Kobyajskij, Lenskij, Megino-Kangalasskij, Mirninskij,
+# Namskij, Nyurbinskij, Olenekskij, Olekminskij, Srednekolymskij,
+# Suntarskij, Tattinskij, Ust'-Aldanskij, Khangalasskij,
+# Churapchinskij, Eveno-Bytantajskij.
+Zone Asia/Yakutsk	 8:38:40 -	LMT	1919 Dec 15
+			 8:00	-	YAKT	1930 Jun 21 # Yakutsk Time
+			 9:00	Russia	YAK%sT	1991 Mar 31 2:00s
+			 8:00	Russia	YAK%sT	1992 Jan 19 2:00s
+			 9:00	Russia	YAK%sT
+#
+# From Oscar van Vlijmen (2003-10-18): [This region consists of]
+# Evrejskaya avtonomnaya oblast', Khabarovskij kraj, Primorskij kraj,
+# [parts of] Respublika Sakha (Yakutiya).
+# The Sakha districts are: Verkhoyanskij, Tomponskij, Ust'-Majskij,
+# Ust'-Yanskij.
+Zone Asia/Vladivostok	 8:47:44 -	LMT	1922 Nov 15
+			 9:00	-	VLAT	1930 Jun 21 # Vladivostok Time
+			10:00	Russia	VLA%sT	1991 Mar 31 2:00s
+			 9:00	Russia	VLA%sST	1992 Jan 19 2:00s
+			10:00	Russia	VLA%sT
+#
+# Sakhalinskaya oblast'.
+# The Zone name should be Yuzhno-Sakhalinsk, but that's too long.
+Zone Asia/Sakhalin	 9:30:48 -	LMT	1905 Aug 23
+			 9:00	-	CJT	1938
+			 9:00	-	JST	1945 Aug 25
+			11:00	Russia	SAK%sT	1991 Mar 31 2:00s # Sakhalin T.
+			10:00	Russia	SAK%sT	1992 Jan 19 2:00s
+			11:00	Russia	SAK%sT	1997 Mar lastSun 2:00s
+			10:00	Russia	SAK%sT
+#
+# From Oscar van Vlijmen (2003-10-18): [This region consists of]
+# Magadanskaya oblast', Respublika Sakha (Yakutiya).
+# Probably also: Kuril Islands.
+# The Sakha districts are: Abyjskij, Allaikhovskij, Momskij,
+# Nizhnekolymskij, Ojmyakonskij.
+Zone Asia/Magadan	10:03:12 -	LMT	1924 May  2
+			10:00	-	MAGT	1930 Jun 21 # Magadan Time
+			11:00	Russia	MAG%sT	1991 Mar 31 2:00s
+			10:00	Russia	MAG%sT	1992 Jan 19 2:00s
+			11:00	Russia	MAG%sT
+#
+# From Oscar van Vlijmen (2001-08-25): [This region consists of]
+# Kamchatskaya oblast', Koryakskij avtonomnyj okrug.
+#
+# The Zone name should be Asia/Petropavlovsk-Kamchatski, but that's too long.
+Zone Asia/Kamchatka	10:34:36 -	LMT	1922 Nov 10
+			11:00	-	PETT	1930 Jun 21 # P-K Time
+			12:00	Russia	PET%sT	1991 Mar 31 2:00s
+			11:00	Russia	PET%sT	1992 Jan 19 2:00s
+			12:00	Russia	PET%sT
+#
+# Chukotskij avtonomnyj okrug
+Zone Asia/Anadyr	11:49:56 -	LMT	1924 May  2
+			12:00	-	ANAT	1930 Jun 21 # Anadyr Time
+			13:00	Russia	ANA%sT	1982 Apr  1 0:00s
+			12:00	Russia	ANA%sT	1991 Mar 31 2:00s
+			11:00	Russia	ANA%sT	1992 Jan 19 2:00s
+			12:00	Russia	ANA%sT
+
+# Serbia
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone	Europe/Belgrade	1:22:00	-	LMT	1884
+			1:00	-	CET	1941 Apr 18 23:00
+			1:00	C-Eur	CE%sT	1945 May  8  2:00s
+			1:00	1:00	CEST	1945 Sep 16  2:00s
+# Metod Kozelj reports that the legal date of
+# transition to EU rules was 1982-11-27, for all of Yugoslavia at the time.
+# Shanks & Pottenger don't give as much detail, so go with Kozelj.
+			1:00	-	CET	1982 Nov 27
+			1:00	EU	CE%sT
+Link Europe/Belgrade Europe/Ljubljana	# Slovenia
+Link Europe/Belgrade Europe/Podgorica	# Montenegro
+Link Europe/Belgrade Europe/Sarajevo	# Bosnia and Herzegovina
+Link Europe/Belgrade Europe/Skopje	# Macedonia
+Link Europe/Belgrade Europe/Zagreb	# Croatia
+
+# Slovakia
+Link Europe/Prague Europe/Bratislava
+
+# Slovenia
+# see Serbia
+
+# Spain
+# Rule	NAME	FROM	TO	TYPE	IN	ON	AT	SAVE	LETTER/S
+# For 1917-1919 Whitman gives Apr Sat>=1 - Oct Sat>=1;
+# go with Shanks & Pottenger.
+Rule	Spain	1917	only	-	May	 5	23:00s	1:00	S
+Rule	Spain	1917	1919	-	Oct	 6	23:00s	0	-
+Rule	Spain	1918	only	-	Apr	15	23:00s	1:00	S
+Rule	Spain	1919	only	-	Apr	 5	23:00s	1:00	S
+# Whitman gives 1921 Feb 28 - Oct 14; go with Shanks & Pottenger.
+Rule	Spain	1924	only	-	Apr	16	23:00s	1:00	S
+# Whitman gives 1924 Oct 14; go with Shanks & Pottenger.
+Rule	Spain	1924	only	-	Oct	 4	23:00s	0	-
+Rule	Spain	1926	only	-	Apr	17	23:00s	1:00	S
+# Whitman says no DST in 1929; go with Shanks & Pottenger.
+Rule	Spain	1926	1929	-	Oct	Sat>=1	23:00s	0	-
+Rule	Spain	1927	only	-	Apr	 9	23:00s	1:00	S
+Rule	Spain	1928	only	-	Apr	14	23:00s	1:00	S
+Rule	Spain	1929	only	-	Apr	20	23:00s	1:00	S
+# Whitman gives 1937 Jun 16, 1938 Apr 16, 1940 Apr 13;
+# go with Shanks & Pottenger.
+Rule	Spain	1937	only	-	May	22	23:00s	1:00	S
+Rule	Spain	1937	1939	-	Oct	Sat>=1	23:00s	0	-
+Rule	Spain	1938	only	-	Mar	22	23:00s	1:00	S
+Rule	Spain	1939	only	-	Apr	15	23:00s	1:00	S
+Rule	Spain	1940	only	-	Mar	16	23:00s	1:00	S
+# Whitman says no DST 1942-1945; go with Shanks & Pottenger.
+Rule	Spain	1942	only	-	May	 2	22:00s	2:00	M # Midsummer
+Rule	Spain	1942	only	-	Sep	 1	22:00s	1:00	S
+Rule	Spain	1943	1946	-	Apr	Sat>=13	22:00s	2:00	M
+Rule	Spain	1943	only	-	Oct	 3	22:00s	1:00	S
+Rule	Spain	1944	only	-	Oct	10	22:00s	1:00	S
+Rule	Spain	1945	only	-	Sep	30	 1:00	1:00	S
+Rule	Spain	1946	only	-	Sep	30	 0:00	0	-
+Rule	Spain	1949	only	-	Apr	30	23:00	1:00	S
+Rule	Spain	1949	only	-	Sep	30	 1:00	0	-
+Rule	Spain	1974	1975	-	Apr	Sat>=13	23:00	1:00	S
+Rule	Spain	1974	1975	-	Oct	Sun>=1	 1:00	0	-
+Rule	Spain	1976	only	-	Mar	27	23:00	1:00	S
+Rule	Spain	1976	1977	-	Sep	lastSun	 1:00	0	-
+Rule	Spain	1977	1978	-	Apr	 2	23:00	1:00	S
+Rule	Spain	1978	only	-	Oct	 1	 1:00	0	-
+# The following rules are copied from Morocco from 1967 through 1978.
+Rule SpainAfrica 1967	only	-	Jun	 3	12:00	1:00	S
+Rule SpainAfrica 1967	only	-	Oct	 1	 0:00	0	-
+Rule SpainAfrica 1974	only	-	Jun	24	 0:00	1:00	S
+Rule SpainAfrica 1974	only	-	Sep	 1	 0:00	0	-
+Rule SpainAfrica 1976	1977	-	May	 1	 0:00	1:00	S
+Rule SpainAfrica 1976	only	-	Aug	 1	 0:00	0	-
+Rule SpainAfrica 1977	only	-	Sep	28	 0:00	0	-
+Rule SpainAfrica 1978	only	-	Jun	 1	 0:00	1:00	S
+Rule SpainAfrica 1978	only	-	Aug	 4	 0:00	0	-
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone	Europe/Madrid	-0:14:44 -	LMT	1901 Jan  1  0:00s
+			 0:00	Spain	WE%sT	1946 Sep 30
+			 1:00	Spain	CE%sT	1979
+			 1:00	EU	CE%sT
+Zone	Africa/Ceuta	-0:21:16 -	LMT	1901
+			 0:00	-	WET	1918 May  6 23:00
+			 0:00	1:00	WEST	1918 Oct  7 23:00
+			 0:00	-	WET	1924
+			 0:00	Spain	WE%sT	1929
+			 0:00 SpainAfrica WE%sT 1984 Mar 16
+			 1:00	-	CET	1986
+			 1:00	EU	CE%sT
+Zone	Atlantic/Canary	-1:01:36 -	LMT	1922 Mar # Las Palmas de Gran C.
+			-1:00	-	CANT	1946 Sep 30 1:00 # Canaries Time
+			 0:00	-	WET	1980 Apr  6 0:00s
+			 0:00	1:00	WEST	1980 Sep 28 0:00s
+			 0:00	EU	WE%sT
+# IATA SSIM (1996-09) says the Canaries switch at 2:00u, not 1:00u.
+# Ignore this for now, as the Canaries are part of the EU.
+
+# Sweden
+
+# From Ivan Nilsson (2001-04-13), superseding Shanks & Pottenger:
+#
+# The law "Svensk forfattningssamling 1878, no 14" about standard time in 1879:
+# From the beginning of 1879 (that is 01-01 00:00) the time for all
+# places in the country is "the mean solar time for the meridian at
+# three degrees, or twelve minutes of time, to the west of the
+# meridian of the Observatory of Stockholm".  The law is dated 1878-05-31.
+#
+# The observatory at that time had the meridian 18 degrees 03' 30"
+# eastern longitude = 01:12:14 in time.  Less 12 minutes gives the
+# national standard time as 01:00:14 ahead of GMT....
+#
+# About the beginning of CET in Sweden. The lawtext ("Svensk
+# forfattningssamling 1899, no 44") states, that "from the beginning
+# of 1900... ... the same as the mean solar time for the meridian at
+# the distance of one hour of time from the meridian of the English
+# observatory at Greenwich, or at 12 minutes 14 seconds to the west
+# from the meridian of the Observatory of Stockholm". The law is dated
+# 1899-06-16.  In short: At 1900-01-01 00:00:00 the new standard time
+# in Sweden is 01:00:00 ahead of GMT.
+#
+# 1916: The lawtext ("Svensk forfattningssamling 1916, no 124") states
+# that "1916-05-15 is considered to begin one hour earlier". It is
+# pretty obvious that at 05-14 23:00 the clocks are set to 05-15 00:00....
+# Further the law says, that "1916-09-30 is considered to end one hour later".
+#
+# The laws regulating [DST] are available on the site of the Swedish
+# Parliament beginning with 1985 - the laws regulating 1980/1984 are
+# not available on the site (to my knowledge they are only available
+# in Swedish): <http://www.riksdagen.se/english/work/sfst.asp> (type
+# "sommartid" without the quotes in the field "Fritext" and then click
+# the Sok-button).
+#
+# (2001-05-13):
+#
+# I have now found a newspaper stating that at 1916-10-01 01:00
+# summertime the church-clocks etc were set back one hour to show
+# 1916-10-01 00:00 standard time.  The article also reports that some
+# people thought the switch to standard time would take place already
+# at 1916-10-01 00:00 summer time, but they had to wait for another
+# hour before the event took place.
+#
+# Source: The newspaper "Dagens Nyheter", 1916-10-01, page 7 upper left.
+
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone Europe/Stockholm	1:12:12 -	LMT	1879 Jan  1
+			1:00:14	-	SET	1900 Jan  1	# Swedish Time
+			1:00	-	CET	1916 May 14 23:00
+			1:00	1:00	CEST	1916 Oct  1 01:00
+			1:00	-	CET	1980
+			1:00	EU	CE%sT
+
+# Switzerland
+# From Howse:
+# By the end of the 18th century clocks and watches became commonplace
+# and their performance improved enormously.  Communities began to keep
+# mean time in preference to apparent time -- Geneva from 1780 ....
+# Rule	NAME	FROM	TO	TYPE	IN	ON	AT	SAVE	LETTER/S
+# From Whitman (who writes ``Midnight?''):
+Rule	Swiss	1940	only	-	Nov	 2	0:00	1:00	S
+Rule	Swiss	1940	only	-	Dec	31	0:00	0	-
+# From Shanks & Pottenger:
+Rule	Swiss	1941	1942	-	May	Sun>=1	2:00	1:00	S
+Rule	Swiss	1941	1942	-	Oct	Sun>=1	0:00	0	-
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone	Europe/Zurich	0:34:08 -	LMT	1848 Sep 12
+			0:29:44	-	BMT	1894 Jun # Bern Mean Time
+			1:00	Swiss	CE%sT	1981
+			1:00	EU	CE%sT
+
+# Turkey
+
+# From Amar Devegowda (2007-01-03):
+# The time zone rules for Istanbul, Turkey have not been changed for years now.
+# ... The latest rules are available at -
+# http://www.timeanddate.com/worldclock/timezone.html?n=107
+# From Steffen Thorsen (2007-01-03):
+# I have been able to find press records back to 1996 which all say that
+# DST started 01:00 local time and end at 02:00 local time.  I am not sure
+# what happened before that.  One example for each year from 1996 to 2001:
+# http://newspot.byegm.gov.tr/arsiv/1996/21/N4.htm
+# http://www.byegm.gov.tr/YAYINLARIMIZ/CHR/ING97/03/97X03X25.TXT
+# http://www.byegm.gov.tr/YAYINLARIMIZ/CHR/ING98/03/98X03X02.HTM
+# http://www.byegm.gov.tr/YAYINLARIMIZ/CHR/ING99/10/99X10X26.HTM#%2016
+# http://www.byegm.gov.tr/YAYINLARIMIZ/CHR/ING2000/03/00X03X06.HTM#%2021
+# http://www.byegm.gov.tr/YAYINLARIMIZ/CHR/ING2001/03/23x03x01.HTM#%2027
+# From Paul Eggert (2007-01-03):
+# Prefer the above source to Shanks & Pottenger for time stamps after 1990.
+
+# From Steffen Thorsen (2007-03-09):
+# Starting 2007 though, it seems that they are adopting EU's 1:00 UTC
+# start/end time, according to the following page (2007-03-07):
+# http://www.ntvmsnbc.com/news/402029.asp
+# The official document is located here - it is in Turkish...:
+# http://rega.basbakanlik.gov.tr/eskiler/2007/03/20070307-7.htm
+# I was able to locate the following seemingly official document
+# (on a non-government server though) describing dates between 2002 and 2006:
+# http://www.alomaliye.com/bkk_2002_3769.htm
+
+# Rule	NAME	FROM	TO	TYPE	IN	ON	AT	SAVE	LETTER/S
+Rule	Turkey	1916	only	-	May	 1	0:00	1:00	S
+Rule	Turkey	1916	only	-	Oct	 1	0:00	0	-
+Rule	Turkey	1920	only	-	Mar	28	0:00	1:00	S
+Rule	Turkey	1920	only	-	Oct	25	0:00	0	-
+Rule	Turkey	1921	only	-	Apr	 3	0:00	1:00	S
+Rule	Turkey	1921	only	-	Oct	 3	0:00	0	-
+Rule	Turkey	1922	only	-	Mar	26	0:00	1:00	S
+Rule	Turkey	1922	only	-	Oct	 8	0:00	0	-
+# Whitman gives 1923 Apr 28 - Sep 16 and no DST in 1924-1925;
+# go with Shanks & Pottenger.
+Rule	Turkey	1924	only	-	May	13	0:00	1:00	S
+Rule	Turkey	1924	1925	-	Oct	 1	0:00	0	-
+Rule	Turkey	1925	only	-	May	 1	0:00	1:00	S
+Rule	Turkey	1940	only	-	Jun	30	0:00	1:00	S
+Rule	Turkey	1940	only	-	Oct	 5	0:00	0	-
+Rule	Turkey	1940	only	-	Dec	 1	0:00	1:00	S
+Rule	Turkey	1941	only	-	Sep	21	0:00	0	-
+Rule	Turkey	1942	only	-	Apr	 1	0:00	1:00	S
+# Whitman omits the next two transition and gives 1945 Oct 1;
+# go with Shanks & Pottenger.
+Rule	Turkey	1942	only	-	Nov	 1	0:00	0	-
+Rule	Turkey	1945	only	-	Apr	 2	0:00	1:00	S
+Rule	Turkey	1945	only	-	Oct	 8	0:00	0	-
+Rule	Turkey	1946	only	-	Jun	 1	0:00	1:00	S
+Rule	Turkey	1946	only	-	Oct	 1	0:00	0	-
+Rule	Turkey	1947	1948	-	Apr	Sun>=16	0:00	1:00	S
+Rule	Turkey	1947	1950	-	Oct	Sun>=2	0:00	0	-
+Rule	Turkey	1949	only	-	Apr	10	0:00	1:00	S
+Rule	Turkey	1950	only	-	Apr	19	0:00	1:00	S
+Rule	Turkey	1951	only	-	Apr	22	0:00	1:00	S
+Rule	Turkey	1951	only	-	Oct	 8	0:00	0	-
+Rule	Turkey	1962	only	-	Jul	15	0:00	1:00	S
+Rule	Turkey	1962	only	-	Oct	 8	0:00	0	-
+Rule	Turkey	1964	only	-	May	15	0:00	1:00	S
+Rule	Turkey	1964	only	-	Oct	 1	0:00	0	-
+Rule	Turkey	1970	1972	-	May	Sun>=2	0:00	1:00	S
+Rule	Turkey	1970	1972	-	Oct	Sun>=2	0:00	0	-
+Rule	Turkey	1973	only	-	Jun	 3	1:00	1:00	S
+Rule	Turkey	1973	only	-	Nov	 4	3:00	0	-
+Rule	Turkey	1974	only	-	Mar	31	2:00	1:00	S
+Rule	Turkey	1974	only	-	Nov	 3	5:00	0	-
+Rule	Turkey	1975	only	-	Mar	30	0:00	1:00	S
+Rule	Turkey	1975	1976	-	Oct	lastSun	0:00	0	-
+Rule	Turkey	1976	only	-	Jun	 1	0:00	1:00	S
+Rule	Turkey	1977	1978	-	Apr	Sun>=1	0:00	1:00	S
+Rule	Turkey	1977	only	-	Oct	16	0:00	0	-
+Rule	Turkey	1979	1980	-	Apr	Sun>=1	3:00	1:00	S
+Rule	Turkey	1979	1982	-	Oct	Mon>=11	0:00	0	-
+Rule	Turkey	1981	1982	-	Mar	lastSun	3:00	1:00	S
+Rule	Turkey	1983	only	-	Jul	31	0:00	1:00	S
+Rule	Turkey	1983	only	-	Oct	 2	0:00	0	-
+Rule	Turkey	1985	only	-	Apr	20	0:00	1:00	S
+Rule	Turkey	1985	only	-	Sep	28	0:00	0	-
+Rule	Turkey	1986	1990	-	Mar	lastSun	2:00s	1:00	S
+Rule	Turkey	1986	1990	-	Sep	lastSun	2:00s	0	-
+Rule	Turkey	1991	2006	-	Mar	lastSun	1:00s	1:00	S
+Rule	Turkey	1991	1995	-	Sep	lastSun	1:00s	0	-
+Rule	Turkey	1996	2006	-	Oct	lastSun	1:00s	0	-
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone	Europe/Istanbul	1:55:52 -	LMT	1880
+			1:56:56	-	IMT	1910 Oct # Istanbul Mean Time?
+			2:00	Turkey	EE%sT	1978 Oct 15
+			3:00	Turkey	TR%sT	1985 Apr 20 # Turkey Time
+			2:00	Turkey	EE%sT	2007
+			2:00	EU	EE%sT
+Link	Europe/Istanbul	Asia/Istanbul	# Istanbul is in both continents.
+
+# Ukraine
+#
+# From Igor Karpov, who works for the Ukranian Ministry of Justice,
+# via Garrett Wollman (2003-01-27):
+# BTW, I've found the official document on this matter. It's goverment
+# regulations number 509, May 13, 1996. In my poor translation it says:
+# "Time in Ukraine is set to second timezone (Kiev time). Each last Sunday
+# of March at 3am the time is changing to 4am and each last Sunday of
+# October the time at 4am is changing to 3am"
+
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+# Most of Ukraine since 1970 has been like Kiev.
+Zone Europe/Kiev	2:02:04 -	LMT	1880
+			2:02:04	-	KMT	1924 May  2 # Kiev Mean Time
+			2:00	-	EET	1930 Jun 21
+			3:00	-	MSK	1941 Sep 20
+			1:00	C-Eur	CE%sT	1943 Nov  6
+			3:00	Russia	MSK/MSD	1990
+			3:00	-	MSK	1990 Jul  1 2:00
+			2:00	-	EET	1992
+			2:00	E-Eur	EE%sT	1995
+			2:00	EU	EE%sT
+# Ruthenia used CET 1990/1991.
+Zone Europe/Uzhgorod	1:29:12 -	LMT	1890 Oct
+			1:00	-	CET	1940
+			1:00	C-Eur	CE%sT	1944 Oct
+			1:00	1:00	CEST	1944 Oct 26
+			1:00	-	CET	1945 Jun 29
+			3:00	Russia	MSK/MSD	1990
+			3:00	-	MSK	1990 Jul  1 2:00
+			1:00	-	CET	1991 Mar 31 3:00
+			2:00	-	EET	1992
+			2:00	E-Eur	EE%sT	1995
+			2:00	EU	EE%sT
+# Zaporozh'ye and eastern Lugansk oblasts observed DST 1990/1991.
+# Zaporozh'ye has an apostrophe, but Posix file names can't have apostrophes.
+Zone Europe/Zaporozhye	2:20:40 -	LMT	1880
+			2:20	-	CUT	1924 May  2 # Central Ukraine T
+			2:00	-	EET	1930 Jun 21
+			3:00	-	MSK	1941 Aug 25
+			1:00	C-Eur	CE%sT	1943 Oct 25
+			3:00	Russia	MSK/MSD	1991 Mar 31 2:00
+			2:00	E-Eur	EE%sT	1995
+			2:00	EU	EE%sT
+# Central Crimea used Moscow time 1994/1997.
+Zone Europe/Simferopol	2:16:24 -	LMT	1880
+			2:16	-	SMT	1924 May  2 # Simferopol Mean T
+			2:00	-	EET	1930 Jun 21
+			3:00	-	MSK	1941 Nov
+			1:00	C-Eur	CE%sT	1944 Apr 13
+			3:00	Russia	MSK/MSD	1990
+			3:00	-	MSK	1990 Jul  1 2:00
+			2:00	-	EET	1992
+# From Paul Eggert (2006-03-22):
+# The _Economist_ (1994-05-28, p 45) reports that central Crimea switched
+# from Kiev to Moscow time sometime after the January 1994 elections.
+# Shanks (1999) says ``date of change uncertain'', but implies that it happened
+# sometime between the 1994 DST switches.  Shanks & Pottenger simply say
+# 1994-09-25 03:00, but that can't be right.  For now, guess it
+# changed in May.
+			2:00	E-Eur	EE%sT	1994 May
+# From IATA SSIM (1994/1997), which also says that Kerch is still like Kiev.
+			3:00	E-Eur	MSK/MSD	1996 Mar 31 3:00s
+			3:00	1:00	MSD	1996 Oct 27 3:00s
+# IATA SSIM (1997-09) says Crimea switched to EET/EEST.
+# Assume it happened in March by not changing the clocks.
+			3:00	Russia	MSK/MSD	1997
+			3:00	-	MSK	1997 Mar lastSun 1:00u
+			2:00	EU	EE%sT
+
+###############################################################################
+
+# One source shows that Bulgaria, Cyprus, Finland, and Greece observe DST from
+# the last Sunday in March to the last Sunday in September in 1986.
+# The source shows Romania changing a day later than everybody else.
+#
+# According to Bernard Sieloff's source, Poland is in the MET time zone but
+# uses the WE DST rules.  The Western USSR uses EET+1 and ME DST rules.
+# Bernard Sieloff's source claims Romania switches on the same day, but at
+# 00:00 standard time (i.e., 01:00 DST).  It also claims that Turkey
+# switches on the same day, but switches on at 01:00 standard time
+# and off at 00:00 standard time (i.e., 01:00 DST)
+
+# ...
+# Date: Wed, 28 Jan 87 16:56:27 -0100
+# From: Tom Hofmann
+# ...
+#
+# ...the European time rules are...standardized since 1981, when
+# most European coun[tr]ies started DST.  Before that year, only
+# a few countries (UK, France, Italy) had DST, each according
+# to own national rules.  In 1981, however, DST started on
+# 'Apr firstSun', and not on 'Mar lastSun' as in the following
+# years...
+# But also since 1981 there are some more national exceptions
+# than listed in 'europe': Switzerland, for example, joined DST
+# one year later, Denmark ended DST on 'Oct 1' instead of 'Sep
+# lastSun' in 1981---I don't know how they handle now.
+#
+# Finally, DST ist always from 'Apr 1' to 'Oct 1' in the
+# Soviet Union (as far as I know).
+#
+# Tom Hofmann, Scientific Computer Center, CIBA-GEIGY AG,
+# 4002 Basle, Switzerland
+# ...
+
+# ...
+# Date: Wed, 4 Feb 87 22:35:22 +0100
+# From: Dik T. Winter
+# ...
+#
+# The information from Tom Hofmann is (as far as I know) not entirely correct.
+# After a request from chongo at amdahl I tried to retrieve all information
+# about DST in Europe.  I was able to find all from about 1969.
+#
+# ...standardization on DST in Europe started in about 1977 with switches on
+# first Sunday in April and last Sunday in September...
+# In 1981 UK joined Europe insofar that
+# the starting day for both shifted to last Sunday in March.  And from 1982
+# the whole of Europe used DST, with switch dates April 1 and October 1 in
+# the Sov[i]et Union.  In 1985 the SU reverted to standard Europe[a]n switch
+# dates...
+#
+# It should also be remembered that time-zones are not constants; e.g.
+# Portugal switched in 1976 from MET (or CET) to WET with DST...
+# Note also that though there were rules for switch dates not
+# all countries abided to these dates, and many individual deviations
+# occurred, though not since 1982 I believe.  Another note: it is always
+# assumed that DST is 1 hour ahead of normal time, this need not be the
+# case; at least in the Netherlands there have been times when DST was 2 hours
+# in advance of normal time.
+#
+# ...
+# dik t. winter, cwi, amsterdam, nederland
+# ...
+
+# From Bob Devine (1988-01-28):
+# ...
+# Greece: Last Sunday in April to last Sunday in September (iffy on dates).
+# Since 1978.  Change at midnight.
+# ...
+# Monaco: has same DST as France.
+# ...
Index: libkcal/libical/tzdata/solar88
===================================================================
--- libkcal/libical/tzdata/solar88	(.../tags/KDE/3.5.6/kdepim)	(wersja 0)
+++ libkcal/libical/tzdata/solar88	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -0,0 +1,388 @@
+# @(#)solar88	8.1
+
+# Apparent noon times below are for Riyadh; they're a bit off for other places.
+# Times were computed using formulas in the U.S. Naval Observatory's
+# Almanac for Computers 1988; the formulas "will give EqT to an accuracy of
+# [plus or minus two] seconds during the current year."
+#
+# Rounding to the nearest five seconds results in fewer than
+# 256 different "time types"--a limit that's faced because time types are
+# stored on disk as unsigned chars.
+
+# Rule	NAME	FROM	TO	TYPE	IN	ON	AT	SAVE	LETTER/S
+Rule	sol88	1988	only	-	Jan	1	12:03:15s -0:03:15 -
+Rule	sol88	1988	only	-	Jan	2	12:03:40s -0:03:40 -
+Rule	sol88	1988	only	-	Jan	3	12:04:10s -0:04:10 -
+Rule	sol88	1988	only	-	Jan	4	12:04:40s -0:04:40 -
+Rule	sol88	1988	only	-	Jan	5	12:05:05s -0:05:05 -
+Rule	sol88	1988	only	-	Jan	6	12:05:30s -0:05:30 -
+Rule	sol88	1988	only	-	Jan	7	12:06:00s -0:06:00 -
+Rule	sol88	1988	only	-	Jan	8	12:06:25s -0:06:25 -
+Rule	sol88	1988	only	-	Jan	9	12:06:50s -0:06:50 -
+Rule	sol88	1988	only	-	Jan	10	12:07:15s -0:07:15 -
+Rule	sol88	1988	only	-	Jan	11	12:07:40s -0:07:40 -
+Rule	sol88	1988	only	-	Jan	12	12:08:05s -0:08:05 -
+Rule	sol88	1988	only	-	Jan	13	12:08:25s -0:08:25 -
+Rule	sol88	1988	only	-	Jan	14	12:08:50s -0:08:50 -
+Rule	sol88	1988	only	-	Jan	15	12:09:10s -0:09:10 -
+Rule	sol88	1988	only	-	Jan	16	12:09:30s -0:09:30 -
+Rule	sol88	1988	only	-	Jan	17	12:09:50s -0:09:50 -
+Rule	sol88	1988	only	-	Jan	18	12:10:10s -0:10:10 -
+Rule	sol88	1988	only	-	Jan	19	12:10:30s -0:10:30 -
+Rule	sol88	1988	only	-	Jan	20	12:10:50s -0:10:50 -
+Rule	sol88	1988	only	-	Jan	21	12:11:05s -0:11:05 -
+Rule	sol88	1988	only	-	Jan	22	12:11:25s -0:11:25 -
+Rule	sol88	1988	only	-	Jan	23	12:11:40s -0:11:40 -
+Rule	sol88	1988	only	-	Jan	24	12:11:55s -0:11:55 -
+Rule	sol88	1988	only	-	Jan	25	12:12:10s -0:12:10 -
+Rule	sol88	1988	only	-	Jan	26	12:12:25s -0:12:25 -
+Rule	sol88	1988	only	-	Jan	27	12:12:40s -0:12:40 -
+Rule	sol88	1988	only	-	Jan	28	12:12:50s -0:12:50 -
+Rule	sol88	1988	only	-	Jan	29	12:13:00s -0:13:00 -
+Rule	sol88	1988	only	-	Jan	30	12:13:10s -0:13:10 -
+Rule	sol88	1988	only	-	Jan	31	12:13:20s -0:13:20 -
+Rule	sol88	1988	only	-	Feb	1	12:13:30s -0:13:30 -
+Rule	sol88	1988	only	-	Feb	2	12:13:40s -0:13:40 -
+Rule	sol88	1988	only	-	Feb	3	12:13:45s -0:13:45 -
+Rule	sol88	1988	only	-	Feb	4	12:13:55s -0:13:55 -
+Rule	sol88	1988	only	-	Feb	5	12:14:00s -0:14:00 -
+Rule	sol88	1988	only	-	Feb	6	12:14:05s -0:14:05 -
+Rule	sol88	1988	only	-	Feb	7	12:14:10s -0:14:10 -
+Rule	sol88	1988	only	-	Feb	8	12:14:10s -0:14:10 -
+Rule	sol88	1988	only	-	Feb	9	12:14:15s -0:14:15 -
+Rule	sol88	1988	only	-	Feb	10	12:14:15s -0:14:15 -
+Rule	sol88	1988	only	-	Feb	11	12:14:15s -0:14:15 -
+Rule	sol88	1988	only	-	Feb	12	12:14:15s -0:14:15 -
+Rule	sol88	1988	only	-	Feb	13	12:14:15s -0:14:15 -
+Rule	sol88	1988	only	-	Feb	14	12:14:15s -0:14:15 -
+Rule	sol88	1988	only	-	Feb	15	12:14:10s -0:14:10 -
+Rule	sol88	1988	only	-	Feb	16	12:14:10s -0:14:10 -
+Rule	sol88	1988	only	-	Feb	17	12:14:05s -0:14:05 -
+Rule	sol88	1988	only	-	Feb	18	12:14:00s -0:14:00 -
+Rule	sol88	1988	only	-	Feb	19	12:13:55s -0:13:55 -
+Rule	sol88	1988	only	-	Feb	20	12:13:50s -0:13:50 -
+Rule	sol88	1988	only	-	Feb	21	12:13:45s -0:13:45 -
+Rule	sol88	1988	only	-	Feb	22	12:13:40s -0:13:40 -
+Rule	sol88	1988	only	-	Feb	23	12:13:30s -0:13:30 -
+Rule	sol88	1988	only	-	Feb	24	12:13:20s -0:13:20 -
+Rule	sol88	1988	only	-	Feb	25	12:13:15s -0:13:15 -
+Rule	sol88	1988	only	-	Feb	26	12:13:05s -0:13:05 -
+Rule	sol88	1988	only	-	Feb	27	12:12:55s -0:12:55 -
+Rule	sol88	1988	only	-	Feb	28	12:12:45s -0:12:45 -
+Rule	sol88	1988	only	-	Feb	29	12:12:30s -0:12:30 -
+Rule	sol88	1988	only	-	Mar	1	12:12:20s -0:12:20 -
+Rule	sol88	1988	only	-	Mar	2	12:12:10s -0:12:10 -
+Rule	sol88	1988	only	-	Mar	3	12:11:55s -0:11:55 -
+Rule	sol88	1988	only	-	Mar	4	12:11:45s -0:11:45 -
+Rule	sol88	1988	only	-	Mar	5	12:11:30s -0:11:30 -
+Rule	sol88	1988	only	-	Mar	6	12:11:15s -0:11:15 -
+Rule	sol88	1988	only	-	Mar	7	12:11:00s -0:11:00 -
+Rule	sol88	1988	only	-	Mar	8	12:10:45s -0:10:45 -
+Rule	sol88	1988	only	-	Mar	9	12:10:30s -0:10:30 -
+Rule	sol88	1988	only	-	Mar	10	12:10:15s -0:10:15 -
+Rule	sol88	1988	only	-	Mar	11	12:10:00s -0:10:00 -
+Rule	sol88	1988	only	-	Mar	12	12:09:45s -0:09:45 -
+Rule	sol88	1988	only	-	Mar	13	12:09:30s -0:09:30 -
+Rule	sol88	1988	only	-	Mar	14	12:09:10s -0:09:10 -
+Rule	sol88	1988	only	-	Mar	15	12:08:55s -0:08:55 -
+Rule	sol88	1988	only	-	Mar	16	12:08:40s -0:08:40 -
+Rule	sol88	1988	only	-	Mar	17	12:08:20s -0:08:20 -
+Rule	sol88	1988	only	-	Mar	18	12:08:05s -0:08:05 -
+Rule	sol88	1988	only	-	Mar	19	12:07:45s -0:07:45 -
+Rule	sol88	1988	only	-	Mar	20	12:07:30s -0:07:30 -
+Rule	sol88	1988	only	-	Mar	21	12:07:10s -0:07:10 -
+Rule	sol88	1988	only	-	Mar	22	12:06:50s -0:06:50 -
+Rule	sol88	1988	only	-	Mar	23	12:06:35s -0:06:35 -
+Rule	sol88	1988	only	-	Mar	24	12:06:15s -0:06:15 -
+Rule	sol88	1988	only	-	Mar	25	12:06:00s -0:06:00 -
+Rule	sol88	1988	only	-	Mar	26	12:05:40s -0:05:40 -
+Rule	sol88	1988	only	-	Mar	27	12:05:20s -0:05:20 -
+Rule	sol88	1988	only	-	Mar	28	12:05:05s -0:05:05 -
+Rule	sol88	1988	only	-	Mar	29	12:04:45s -0:04:45 -
+Rule	sol88	1988	only	-	Mar	30	12:04:25s -0:04:25 -
+Rule	sol88	1988	only	-	Mar	31	12:04:10s -0:04:10 -
+Rule	sol88	1988	only	-	Apr	1	12:03:50s -0:03:50 -
+Rule	sol88	1988	only	-	Apr	2	12:03:35s -0:03:35 -
+Rule	sol88	1988	only	-	Apr	3	12:03:15s -0:03:15 -
+Rule	sol88	1988	only	-	Apr	4	12:03:00s -0:03:00 -
+Rule	sol88	1988	only	-	Apr	5	12:02:40s -0:02:40 -
+Rule	sol88	1988	only	-	Apr	6	12:02:25s -0:02:25 -
+Rule	sol88	1988	only	-	Apr	7	12:02:05s -0:02:05 -
+Rule	sol88	1988	only	-	Apr	8	12:01:50s -0:01:50 -
+Rule	sol88	1988	only	-	Apr	9	12:01:35s -0:01:35 -
+Rule	sol88	1988	only	-	Apr	10	12:01:15s -0:01:15 -
+Rule	sol88	1988	only	-	Apr	11	12:01:00s -0:01:00 -
+Rule	sol88	1988	only	-	Apr	12	12:00:45s -0:00:45 -
+Rule	sol88	1988	only	-	Apr	13	12:00:30s -0:00:30 -
+Rule	sol88	1988	only	-	Apr	14	12:00:15s -0:00:15 -
+Rule	sol88	1988	only	-	Apr	15	12:00:00s 0:00:00 -
+Rule	sol88	1988	only	-	Apr	16	11:59:45s 0:00:15 -
+Rule	sol88	1988	only	-	Apr	17	11:59:30s 0:00:30 -
+Rule	sol88	1988	only	-	Apr	18	11:59:20s 0:00:40 -
+Rule	sol88	1988	only	-	Apr	19	11:59:05s 0:00:55 -
+Rule	sol88	1988	only	-	Apr	20	11:58:55s 0:01:05 -
+Rule	sol88	1988	only	-	Apr	21	11:58:40s 0:01:20 -
+Rule	sol88	1988	only	-	Apr	22	11:58:30s 0:01:30 -
+Rule	sol88	1988	only	-	Apr	23	11:58:15s 0:01:45 -
+Rule	sol88	1988	only	-	Apr	24	11:58:05s 0:01:55 -
+Rule	sol88	1988	only	-	Apr	25	11:57:55s 0:02:05 -
+Rule	sol88	1988	only	-	Apr	26	11:57:45s 0:02:15 -
+Rule	sol88	1988	only	-	Apr	27	11:57:35s 0:02:25 -
+Rule	sol88	1988	only	-	Apr	28	11:57:30s 0:02:30 -
+Rule	sol88	1988	only	-	Apr	29	11:57:20s 0:02:40 -
+Rule	sol88	1988	only	-	Apr	30	11:57:10s 0:02:50 -
+Rule	sol88	1988	only	-	May	1	11:57:05s 0:02:55 -
+Rule	sol88	1988	only	-	May	2	11:56:55s 0:03:05 -
+Rule	sol88	1988	only	-	May	3	11:56:50s 0:03:10 -
+Rule	sol88	1988	only	-	May	4	11:56:45s 0:03:15 -
+Rule	sol88	1988	only	-	May	5	11:56:40s 0:03:20 -
+Rule	sol88	1988	only	-	May	6	11:56:35s 0:03:25 -
+Rule	sol88	1988	only	-	May	7	11:56:30s 0:03:30 -
+Rule	sol88	1988	only	-	May	8	11:56:25s 0:03:35 -
+Rule	sol88	1988	only	-	May	9	11:56:25s 0:03:35 -
+Rule	sol88	1988	only	-	May	10	11:56:20s 0:03:40 -
+Rule	sol88	1988	only	-	May	11	11:56:20s 0:03:40 -
+Rule	sol88	1988	only	-	May	12	11:56:20s 0:03:40 -
+Rule	sol88	1988	only	-	May	13	11:56:20s 0:03:40 -
+Rule	sol88	1988	only	-	May	14	11:56:20s 0:03:40 -
+Rule	sol88	1988	only	-	May	15	11:56:20s 0:03:40 -
+Rule	sol88	1988	only	-	May	16	11:56:20s 0:03:40 -
+Rule	sol88	1988	only	-	May	17	11:56:20s 0:03:40 -
+Rule	sol88	1988	only	-	May	18	11:56:25s 0:03:35 -
+Rule	sol88	1988	only	-	May	19	11:56:25s 0:03:35 -
+Rule	sol88	1988	only	-	May	20	11:56:30s 0:03:30 -
+Rule	sol88	1988	only	-	May	21	11:56:35s 0:03:25 -
+Rule	sol88	1988	only	-	May	22	11:56:40s 0:03:20 -
+Rule	sol88	1988	only	-	May	23	11:56:45s 0:03:15 -
+Rule	sol88	1988	only	-	May	24	11:56:50s 0:03:10 -
+Rule	sol88	1988	only	-	May	25	11:56:55s 0:03:05 -
+Rule	sol88	1988	only	-	May	26	11:57:00s 0:03:00 -
+Rule	sol88	1988	only	-	May	27	11:57:05s 0:02:55 -
+Rule	sol88	1988	only	-	May	28	11:57:15s 0:02:45 -
+Rule	sol88	1988	only	-	May	29	11:57:20s 0:02:40 -
+Rule	sol88	1988	only	-	May	30	11:57:30s 0:02:30 -
+Rule	sol88	1988	only	-	May	31	11:57:40s 0:02:20 -
+Rule	sol88	1988	only	-	Jun	1	11:57:50s 0:02:10 -
+Rule	sol88	1988	only	-	Jun	2	11:57:55s 0:02:05 -
+Rule	sol88	1988	only	-	Jun	3	11:58:05s 0:01:55 -
+Rule	sol88	1988	only	-	Jun	4	11:58:15s 0:01:45 -
+Rule	sol88	1988	only	-	Jun	5	11:58:30s 0:01:30 -
+Rule	sol88	1988	only	-	Jun	6	11:58:40s 0:01:20 -
+Rule	sol88	1988	only	-	Jun	7	11:58:50s 0:01:10 -
+Rule	sol88	1988	only	-	Jun	8	11:59:00s 0:01:00 -
+Rule	sol88	1988	only	-	Jun	9	11:59:15s 0:00:45 -
+Rule	sol88	1988	only	-	Jun	10	11:59:25s 0:00:35 -
+Rule	sol88	1988	only	-	Jun	11	11:59:35s 0:00:25 -
+Rule	sol88	1988	only	-	Jun	12	11:59:50s 0:00:10 -
+Rule	sol88	1988	only	-	Jun	13	12:00:00s 0:00:00 -
+Rule	sol88	1988	only	-	Jun	14	12:00:15s -0:00:15 -
+Rule	sol88	1988	only	-	Jun	15	12:00:25s -0:00:25 -
+Rule	sol88	1988	only	-	Jun	16	12:00:40s -0:00:40 -
+Rule	sol88	1988	only	-	Jun	17	12:00:55s -0:00:55 -
+Rule	sol88	1988	only	-	Jun	18	12:01:05s -0:01:05 -
+Rule	sol88	1988	only	-	Jun	19	12:01:20s -0:01:20 -
+Rule	sol88	1988	only	-	Jun	20	12:01:30s -0:01:30 -
+Rule	sol88	1988	only	-	Jun	21	12:01:45s -0:01:45 -
+Rule	sol88	1988	only	-	Jun	22	12:02:00s -0:02:00 -
+Rule	sol88	1988	only	-	Jun	23	12:02:10s -0:02:10 -
+Rule	sol88	1988	only	-	Jun	24	12:02:25s -0:02:25 -
+Rule	sol88	1988	only	-	Jun	25	12:02:35s -0:02:35 -
+Rule	sol88	1988	only	-	Jun	26	12:02:50s -0:02:50 -
+Rule	sol88	1988	only	-	Jun	27	12:03:00s -0:03:00 -
+Rule	sol88	1988	only	-	Jun	28	12:03:15s -0:03:15 -
+Rule	sol88	1988	only	-	Jun	29	12:03:25s -0:03:25 -
+Rule	sol88	1988	only	-	Jun	30	12:03:40s -0:03:40 -
+Rule	sol88	1988	only	-	Jul	1	12:03:50s -0:03:50 -
+Rule	sol88	1988	only	-	Jul	2	12:04:00s -0:04:00 -
+Rule	sol88	1988	only	-	Jul	3	12:04:10s -0:04:10 -
+Rule	sol88	1988	only	-	Jul	4	12:04:25s -0:04:25 -
+Rule	sol88	1988	only	-	Jul	5	12:04:35s -0:04:35 -
+Rule	sol88	1988	only	-	Jul	6	12:04:45s -0:04:45 -
+Rule	sol88	1988	only	-	Jul	7	12:04:55s -0:04:55 -
+Rule	sol88	1988	only	-	Jul	8	12:05:05s -0:05:05 -
+Rule	sol88	1988	only	-	Jul	9	12:05:10s -0:05:10 -
+Rule	sol88	1988	only	-	Jul	10	12:05:20s -0:05:20 -
+Rule	sol88	1988	only	-	Jul	11	12:05:30s -0:05:30 -
+Rule	sol88	1988	only	-	Jul	12	12:05:35s -0:05:35 -
+Rule	sol88	1988	only	-	Jul	13	12:05:45s -0:05:45 -
+Rule	sol88	1988	only	-	Jul	14	12:05:50s -0:05:50 -
+Rule	sol88	1988	only	-	Jul	15	12:05:55s -0:05:55 -
+Rule	sol88	1988	only	-	Jul	16	12:06:00s -0:06:00 -
+Rule	sol88	1988	only	-	Jul	17	12:06:05s -0:06:05 -
+Rule	sol88	1988	only	-	Jul	18	12:06:10s -0:06:10 -
+Rule	sol88	1988	only	-	Jul	19	12:06:15s -0:06:15 -
+Rule	sol88	1988	only	-	Jul	20	12:06:20s -0:06:20 -
+Rule	sol88	1988	only	-	Jul	21	12:06:25s -0:06:25 -
+Rule	sol88	1988	only	-	Jul	22	12:06:25s -0:06:25 -
+Rule	sol88	1988	only	-	Jul	23	12:06:25s -0:06:25 -
+Rule	sol88	1988	only	-	Jul	24	12:06:30s -0:06:30 -
+Rule	sol88	1988	only	-	Jul	25	12:06:30s -0:06:30 -
+Rule	sol88	1988	only	-	Jul	26	12:06:30s -0:06:30 -
+Rule	sol88	1988	only	-	Jul	27	12:06:30s -0:06:30 -
+Rule	sol88	1988	only	-	Jul	28	12:06:30s -0:06:30 -
+Rule	sol88	1988	only	-	Jul	29	12:06:25s -0:06:25 -
+Rule	sol88	1988	only	-	Jul	30	12:06:25s -0:06:25 -
+Rule	sol88	1988	only	-	Jul	31	12:06:20s -0:06:20 -
+Rule	sol88	1988	only	-	Aug	1	12:06:15s -0:06:15 -
+Rule	sol88	1988	only	-	Aug	2	12:06:15s -0:06:15 -
+Rule	sol88	1988	only	-	Aug	3	12:06:10s -0:06:10 -
+Rule	sol88	1988	only	-	Aug	4	12:06:05s -0:06:05 -
+Rule	sol88	1988	only	-	Aug	5	12:05:55s -0:05:55 -
+Rule	sol88	1988	only	-	Aug	6	12:05:50s -0:05:50 -
+Rule	sol88	1988	only	-	Aug	7	12:05:45s -0:05:45 -
+Rule	sol88	1988	only	-	Aug	8	12:05:35s -0:05:35 -
+Rule	sol88	1988	only	-	Aug	9	12:05:25s -0:05:25 -
+Rule	sol88	1988	only	-	Aug	10	12:05:20s -0:05:20 -
+Rule	sol88	1988	only	-	Aug	11	12:05:10s -0:05:10 -
+Rule	sol88	1988	only	-	Aug	12	12:05:00s -0:05:00 -
+Rule	sol88	1988	only	-	Aug	13	12:04:50s -0:04:50 -
+Rule	sol88	1988	only	-	Aug	14	12:04:35s -0:04:35 -
+Rule	sol88	1988	only	-	Aug	15	12:04:25s -0:04:25 -
+Rule	sol88	1988	only	-	Aug	16	12:04:15s -0:04:15 -
+Rule	sol88	1988	only	-	Aug	17	12:04:00s -0:04:00 -
+Rule	sol88	1988	only	-	Aug	18	12:03:50s -0:03:50 -
+Rule	sol88	1988	only	-	Aug	19	12:03:35s -0:03:35 -
+Rule	sol88	1988	only	-	Aug	20	12:03:20s -0:03:20 -
+Rule	sol88	1988	only	-	Aug	21	12:03:05s -0:03:05 -
+Rule	sol88	1988	only	-	Aug	22	12:02:50s -0:02:50 -
+Rule	sol88	1988	only	-	Aug	23	12:02:35s -0:02:35 -
+Rule	sol88	1988	only	-	Aug	24	12:02:20s -0:02:20 -
+Rule	sol88	1988	only	-	Aug	25	12:02:00s -0:02:00 -
+Rule	sol88	1988	only	-	Aug	26	12:01:45s -0:01:45 -
+Rule	sol88	1988	only	-	Aug	27	12:01:30s -0:01:30 -
+Rule	sol88	1988	only	-	Aug	28	12:01:10s -0:01:10 -
+Rule	sol88	1988	only	-	Aug	29	12:00:50s -0:00:50 -
+Rule	sol88	1988	only	-	Aug	30	12:00:35s -0:00:35 -
+Rule	sol88	1988	only	-	Aug	31	12:00:15s -0:00:15 -
+Rule	sol88	1988	only	-	Sep	1	11:59:55s 0:00:05 -
+Rule	sol88	1988	only	-	Sep	2	11:59:35s 0:00:25 -
+Rule	sol88	1988	only	-	Sep	3	11:59:20s 0:00:40 -
+Rule	sol88	1988	only	-	Sep	4	11:59:00s 0:01:00 -
+Rule	sol88	1988	only	-	Sep	5	11:58:40s 0:01:20 -
+Rule	sol88	1988	only	-	Sep	6	11:58:20s 0:01:40 -
+Rule	sol88	1988	only	-	Sep	7	11:58:00s 0:02:00 -
+Rule	sol88	1988	only	-	Sep	8	11:57:35s 0:02:25 -
+Rule	sol88	1988	only	-	Sep	9	11:57:15s 0:02:45 -
+Rule	sol88	1988	only	-	Sep	10	11:56:55s 0:03:05 -
+Rule	sol88	1988	only	-	Sep	11	11:56:35s 0:03:25 -
+Rule	sol88	1988	only	-	Sep	12	11:56:15s 0:03:45 -
+Rule	sol88	1988	only	-	Sep	13	11:55:50s 0:04:10 -
+Rule	sol88	1988	only	-	Sep	14	11:55:30s 0:04:30 -
+Rule	sol88	1988	only	-	Sep	15	11:55:10s 0:04:50 -
+Rule	sol88	1988	only	-	Sep	16	11:54:50s 0:05:10 -
+Rule	sol88	1988	only	-	Sep	17	11:54:25s 0:05:35 -
+Rule	sol88	1988	only	-	Sep	18	11:54:05s 0:05:55 -
+Rule	sol88	1988	only	-	Sep	19	11:53:45s 0:06:15 -
+Rule	sol88	1988	only	-	Sep	20	11:53:25s 0:06:35 -
+Rule	sol88	1988	only	-	Sep	21	11:53:00s 0:07:00 -
+Rule	sol88	1988	only	-	Sep	22	11:52:40s 0:07:20 -
+Rule	sol88	1988	only	-	Sep	23	11:52:20s 0:07:40 -
+Rule	sol88	1988	only	-	Sep	24	11:52:00s 0:08:00 -
+Rule	sol88	1988	only	-	Sep	25	11:51:40s 0:08:20 -
+Rule	sol88	1988	only	-	Sep	26	11:51:15s 0:08:45 -
+Rule	sol88	1988	only	-	Sep	27	11:50:55s 0:09:05 -
+Rule	sol88	1988	only	-	Sep	28	11:50:35s 0:09:25 -
+Rule	sol88	1988	only	-	Sep	29	11:50:15s 0:09:45 -
+Rule	sol88	1988	only	-	Sep	30	11:49:55s 0:10:05 -
+Rule	sol88	1988	only	-	Oct	1	11:49:35s 0:10:25 -
+Rule	sol88	1988	only	-	Oct	2	11:49:20s 0:10:40 -
+Rule	sol88	1988	only	-	Oct	3	11:49:00s 0:11:00 -
+Rule	sol88	1988	only	-	Oct	4	11:48:40s 0:11:20 -
+Rule	sol88	1988	only	-	Oct	5	11:48:25s 0:11:35 -
+Rule	sol88	1988	only	-	Oct	6	11:48:05s 0:11:55 -
+Rule	sol88	1988	only	-	Oct	7	11:47:50s 0:12:10 -
+Rule	sol88	1988	only	-	Oct	8	11:47:30s 0:12:30 -
+Rule	sol88	1988	only	-	Oct	9	11:47:15s 0:12:45 -
+Rule	sol88	1988	only	-	Oct	10	11:47:00s 0:13:00 -
+Rule	sol88	1988	only	-	Oct	11	11:46:45s 0:13:15 -
+Rule	sol88	1988	only	-	Oct	12	11:46:30s 0:13:30 -
+Rule	sol88	1988	only	-	Oct	13	11:46:15s 0:13:45 -
+Rule	sol88	1988	only	-	Oct	14	11:46:00s 0:14:00 -
+Rule	sol88	1988	only	-	Oct	15	11:45:45s 0:14:15 -
+Rule	sol88	1988	only	-	Oct	16	11:45:35s 0:14:25 -
+Rule	sol88	1988	only	-	Oct	17	11:45:20s 0:14:40 -
+Rule	sol88	1988	only	-	Oct	18	11:45:10s 0:14:50 -
+Rule	sol88	1988	only	-	Oct	19	11:45:00s 0:15:00 -
+Rule	sol88	1988	only	-	Oct	20	11:44:45s 0:15:15 -
+Rule	sol88	1988	only	-	Oct	21	11:44:40s 0:15:20 -
+Rule	sol88	1988	only	-	Oct	22	11:44:30s 0:15:30 -
+Rule	sol88	1988	only	-	Oct	23	11:44:20s 0:15:40 -
+Rule	sol88	1988	only	-	Oct	24	11:44:10s 0:15:50 -
+Rule	sol88	1988	only	-	Oct	25	11:44:05s 0:15:55 -
+Rule	sol88	1988	only	-	Oct	26	11:44:00s 0:16:00 -
+Rule	sol88	1988	only	-	Oct	27	11:43:55s 0:16:05 -
+Rule	sol88	1988	only	-	Oct	28	11:43:50s 0:16:10 -
+Rule	sol88	1988	only	-	Oct	29	11:43:45s 0:16:15 -
+Rule	sol88	1988	only	-	Oct	30	11:43:40s 0:16:20 -
+Rule	sol88	1988	only	-	Oct	31	11:43:40s 0:16:20 -
+Rule	sol88	1988	only	-	Nov	1	11:43:35s 0:16:25 -
+Rule	sol88	1988	only	-	Nov	2	11:43:35s 0:16:25 -
+Rule	sol88	1988	only	-	Nov	3	11:43:35s 0:16:25 -
+Rule	sol88	1988	only	-	Nov	4	11:43:35s 0:16:25 -
+Rule	sol88	1988	only	-	Nov	5	11:43:40s 0:16:20 -
+Rule	sol88	1988	only	-	Nov	6	11:43:40s 0:16:20 -
+Rule	sol88	1988	only	-	Nov	7	11:43:45s 0:16:15 -
+Rule	sol88	1988	only	-	Nov	8	11:43:45s 0:16:15 -
+Rule	sol88	1988	only	-	Nov	9	11:43:50s 0:16:10 -
+Rule	sol88	1988	only	-	Nov	10	11:44:00s 0:16:00 -
+Rule	sol88	1988	only	-	Nov	11	11:44:05s 0:15:55 -
+Rule	sol88	1988	only	-	Nov	12	11:44:10s 0:15:50 -
+Rule	sol88	1988	only	-	Nov	13	11:44:20s 0:15:40 -
+Rule	sol88	1988	only	-	Nov	14	11:44:30s 0:15:30 -
+Rule	sol88	1988	only	-	Nov	15	11:44:40s 0:15:20 -
+Rule	sol88	1988	only	-	Nov	16	11:44:50s 0:15:10 -
+Rule	sol88	1988	only	-	Nov	17	11:45:00s 0:15:00 -
+Rule	sol88	1988	only	-	Nov	18	11:45:15s 0:14:45 -
+Rule	sol88	1988	only	-	Nov	19	11:45:25s 0:14:35 -
+Rule	sol88	1988	only	-	Nov	20	11:45:40s 0:14:20 -
+Rule	sol88	1988	only	-	Nov	21	11:45:55s 0:14:05 -
+Rule	sol88	1988	only	-	Nov	22	11:46:10s 0:13:50 -
+Rule	sol88	1988	only	-	Nov	23	11:46:30s 0:13:30 -
+Rule	sol88	1988	only	-	Nov	24	11:46:45s 0:13:15 -
+Rule	sol88	1988	only	-	Nov	25	11:47:05s 0:12:55 -
+Rule	sol88	1988	only	-	Nov	26	11:47:20s 0:12:40 -
+Rule	sol88	1988	only	-	Nov	27	11:47:40s 0:12:20 -
+Rule	sol88	1988	only	-	Nov	28	11:48:00s 0:12:00 -
+Rule	sol88	1988	only	-	Nov	29	11:48:25s 0:11:35 -
+Rule	sol88	1988	only	-	Nov	30	11:48:45s 0:11:15 -
+Rule	sol88	1988	only	-	Dec	1	11:49:05s 0:10:55 -
+Rule	sol88	1988	only	-	Dec	2	11:49:30s 0:10:30 -
+Rule	sol88	1988	only	-	Dec	3	11:49:55s 0:10:05 -
+Rule	sol88	1988	only	-	Dec	4	11:50:15s 0:09:45 -
+Rule	sol88	1988	only	-	Dec	5	11:50:40s 0:09:20 -
+Rule	sol88	1988	only	-	Dec	6	11:51:05s 0:08:55 -
+Rule	sol88	1988	only	-	Dec	7	11:51:35s 0:08:25 -
+Rule	sol88	1988	only	-	Dec	8	11:52:00s 0:08:00 -
+Rule	sol88	1988	only	-	Dec	9	11:52:25s 0:07:35 -
+Rule	sol88	1988	only	-	Dec	10	11:52:55s 0:07:05 -
+Rule	sol88	1988	only	-	Dec	11	11:53:20s 0:06:40 -
+Rule	sol88	1988	only	-	Dec	12	11:53:50s 0:06:10 -
+Rule	sol88	1988	only	-	Dec	13	11:54:15s 0:05:45 -
+Rule	sol88	1988	only	-	Dec	14	11:54:45s 0:05:15 -
+Rule	sol88	1988	only	-	Dec	15	11:55:15s 0:04:45 -
+Rule	sol88	1988	only	-	Dec	16	11:55:45s 0:04:15 -
+Rule	sol88	1988	only	-	Dec	17	11:56:15s 0:03:45 -
+Rule	sol88	1988	only	-	Dec	18	11:56:40s 0:03:20 -
+Rule	sol88	1988	only	-	Dec	19	11:57:10s 0:02:50 -
+Rule	sol88	1988	only	-	Dec	20	11:57:40s 0:02:20 -
+Rule	sol88	1988	only	-	Dec	21	11:58:10s 0:01:50 -
+Rule	sol88	1988	only	-	Dec	22	11:58:40s 0:01:20 -
+Rule	sol88	1988	only	-	Dec	23	11:59:10s 0:00:50 -
+Rule	sol88	1988	only	-	Dec	24	11:59:40s 0:00:20 -
+Rule	sol88	1988	only	-	Dec	25	12:00:10s -0:00:10 -
+Rule	sol88	1988	only	-	Dec	26	12:00:40s -0:00:40 -
+Rule	sol88	1988	only	-	Dec	27	12:01:10s -0:01:10 -
+Rule	sol88	1988	only	-	Dec	28	12:01:40s -0:01:40 -
+Rule	sol88	1988	only	-	Dec	29	12:02:10s -0:02:10 -
+Rule	sol88	1988	only	-	Dec	30	12:02:35s -0:02:35 -
+Rule	sol88	1988	only	-	Dec	31	12:03:05s -0:03:05 -
+
+# Riyadh is at about 46 degrees 46 minutes East:  3 hrs, 7 mins, 4 secs
+# Before and after 1988, we'll operate on local mean solar time.
+
+# Zone	NAME		GMTOFF	RULES/SAVE	FORMAT	[UNTIL]
+Zone	Asia/Riyadh88	3:07:04	-		zzz	1988
+			3:07:04	sol88		zzz	1989
+			3:07:04	-		zzz
+# For backward compatibility...
+Link	Asia/Riyadh88	Mideast/Riyadh88
Index: libkcal/libical/tzdata/leapseconds
===================================================================
--- libkcal/libical/tzdata/leapseconds	(.../tags/KDE/3.5.6/kdepim)	(wersja 0)
+++ libkcal/libical/tzdata/leapseconds	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -0,0 +1,82 @@
+# @(#)leapseconds	8.3
+
+# Allowance for leapseconds added to each timezone file.
+
+# The International Earth Rotation Service periodically uses leap seconds
+# to keep UTC to within 0.9 s of UT1
+# (which measures the true angular orientation of the earth in space); see
+# Terry J Quinn, The BIPM and the accurate measure of time,
+# Proc IEEE 79, 7 (July 1991), 894-905.
+# There were no leap seconds before 1972, because the official mechanism
+# accounting for the discrepancy between atomic time and the earth's rotation
+# did not exist until the early 1970s.
+
+# The correction (+ or -) is made at the given time, so lines
+# will typically look like:
+#	Leap	YEAR	MON	DAY	23:59:60	+	R/S
+# or
+#	Leap	YEAR	MON	DAY	23:59:59	-	R/S
+
+# If the leapsecond is Rolling (R) the given time is local time
+# If the leapsecond is Stationary (S) the given time is UTC
+
+# Leap	YEAR	MONTH	DAY	HH:MM:SS	CORR	R/S
+Leap	1972	Jun	30	23:59:60	+	S
+Leap	1972	Dec	31	23:59:60	+	S
+Leap	1973	Dec	31	23:59:60	+	S
+Leap	1974	Dec	31	23:59:60	+	S
+Leap	1975	Dec	31	23:59:60	+	S
+Leap	1976	Dec	31	23:59:60	+	S
+Leap	1977	Dec	31	23:59:60	+	S
+Leap	1978	Dec	31	23:59:60	+	S
+Leap	1979	Dec	31	23:59:60	+	S
+Leap	1981	Jun	30	23:59:60	+	S
+Leap	1982	Jun	30	23:59:60	+	S
+Leap	1983	Jun	30	23:59:60	+	S
+Leap	1985	Jun	30	23:59:60	+	S
+Leap	1987	Dec	31	23:59:60	+	S
+Leap	1989	Dec	31	23:59:60	+	S
+Leap	1990	Dec	31	23:59:60	+	S
+Leap	1992	Jun	30	23:59:60	+	S
+Leap	1993	Jun	30	23:59:60	+	S
+Leap	1994	Jun	30	23:59:60	+	S
+Leap	1995	Dec	31	23:59:60	+	S
+Leap	1997	Jun	30	23:59:60	+	S
+Leap	1998	Dec	31	23:59:60	+	S
+Leap	2005	Dec	31	23:59:60	+	S
+
+# ...
+# Sent: Thursday, February 01, 2007 9:49 AM
+# ...
+# Subject: Bulletin C number 33
+#
+# 	INTERNATIONAL EARTH ROTATION AND REFERENCE SYSTEMS SERVICE (IERS)
+#
+# SERVICE INTERNATIONAL DE LA ROTATION TERRESTRE ET DES SYSTEMES DE REFERENCE
+#
+# SERVICE DE LA ROTATION TERRESTRE
+# OBSERVATOIRE DE PARIS
+# 61, Av. de l'Observatoire 75014 PARIS (France)
+# ...
+#
+#                                                Paris, 1 February 2007
+#                                                Bulletin C 33
+#                                                To authorities responsible
+#                                                for the measurement and
+#                                                distribution of time
+#
+#                           INFORMATION ON UTC - TAI
+#
+# NO positive leap second will be introduced at the end of June 2007.
+# The difference between Coordinated Universal Time UTC and the
+# International Atomic Time TAI is:
+#      from 2006 January 1, 0h UTC, until further notice : UTC-TAI = -33 s
+# Leap seconds can be introduced in UTC at the end of the months of
+# December  or June,  depending on the evolution of UT1-TAI. Bulletin C is
+# mailed every  six months, either to announce a time step in UTC, or to
+# confirm that there  will be no time step at the next possible date.
+#
+# 				Daniel GAMBIS
+# 				Director
+# 				Earth Orientation Center of IERS
+# 				Observatoire de Paris, France
Index: libkcal/libical/tzdata/solar89
===================================================================
--- libkcal/libical/tzdata/solar89	(.../tags/KDE/3.5.6/kdepim)	(wersja 0)
+++ libkcal/libical/tzdata/solar89	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -0,0 +1,393 @@
+# @(#)solar89	8.1
+
+# Apparent noon times below are for Riyadh; they're a bit off for other places.
+# Times were computed using a formula provided by the U. S. Naval Observatory:
+#	eqt = -105.8 * sin(l) + 596.2 * sin(2 * l) + 4.4 * sin(3 * l)
+#		-12.7 * sin(4 * l) - 429.0 * cos(l) - 2.1 * cos (2 * l)
+#		+ 19.3 * cos(3 * l);
+# where l is the "mean longitude of the Sun" given by
+#	l = 279.642 degrees + 0.985647 * d
+# and d is the interval in days from January 0, 0 hours Universal Time
+# (equaling the day of the year plus the fraction of a day from zero hours).
+# The accuracy of the formula is plus or minus three seconds.
+#
+# Rounding to the nearest five seconds results in fewer than
+# 256 different "time types"--a limit that's faced because time types are
+# stored on disk as unsigned chars.
+
+# Rule	NAME	FROM	TO	TYPE	IN	ON	AT	SAVE	LETTER/S
+Rule	sol89	1989	only	-	Jan	1	12:03:35s -0:03:35 -
+Rule	sol89	1989	only	-	Jan	2	12:04:05s -0:04:05 -
+Rule	sol89	1989	only	-	Jan	3	12:04:30s -0:04:30 -
+Rule	sol89	1989	only	-	Jan	4	12:05:00s -0:05:00 -
+Rule	sol89	1989	only	-	Jan	5	12:05:25s -0:05:25 -
+Rule	sol89	1989	only	-	Jan	6	12:05:50s -0:05:50 -
+Rule	sol89	1989	only	-	Jan	7	12:06:15s -0:06:15 -
+Rule	sol89	1989	only	-	Jan	8	12:06:45s -0:06:45 -
+Rule	sol89	1989	only	-	Jan	9	12:07:10s -0:07:10 -
+Rule	sol89	1989	only	-	Jan	10	12:07:35s -0:07:35 -
+Rule	sol89	1989	only	-	Jan	11	12:07:55s -0:07:55 -
+Rule	sol89	1989	only	-	Jan	12	12:08:20s -0:08:20 -
+Rule	sol89	1989	only	-	Jan	13	12:08:45s -0:08:45 -
+Rule	sol89	1989	only	-	Jan	14	12:09:05s -0:09:05 -
+Rule	sol89	1989	only	-	Jan	15	12:09:25s -0:09:25 -
+Rule	sol89	1989	only	-	Jan	16	12:09:45s -0:09:45 -
+Rule	sol89	1989	only	-	Jan	17	12:10:05s -0:10:05 -
+Rule	sol89	1989	only	-	Jan	18	12:10:25s -0:10:25 -
+Rule	sol89	1989	only	-	Jan	19	12:10:45s -0:10:45 -
+Rule	sol89	1989	only	-	Jan	20	12:11:05s -0:11:05 -
+Rule	sol89	1989	only	-	Jan	21	12:11:20s -0:11:20 -
+Rule	sol89	1989	only	-	Jan	22	12:11:35s -0:11:35 -
+Rule	sol89	1989	only	-	Jan	23	12:11:55s -0:11:55 -
+Rule	sol89	1989	only	-	Jan	24	12:12:10s -0:12:10 -
+Rule	sol89	1989	only	-	Jan	25	12:12:20s -0:12:20 -
+Rule	sol89	1989	only	-	Jan	26	12:12:35s -0:12:35 -
+Rule	sol89	1989	only	-	Jan	27	12:12:50s -0:12:50 -
+Rule	sol89	1989	only	-	Jan	28	12:13:00s -0:13:00 -
+Rule	sol89	1989	only	-	Jan	29	12:13:10s -0:13:10 -
+Rule	sol89	1989	only	-	Jan	30	12:13:20s -0:13:20 -
+Rule	sol89	1989	only	-	Jan	31	12:13:30s -0:13:30 -
+Rule	sol89	1989	only	-	Feb	1	12:13:40s -0:13:40 -
+Rule	sol89	1989	only	-	Feb	2	12:13:45s -0:13:45 -
+Rule	sol89	1989	only	-	Feb	3	12:13:55s -0:13:55 -
+Rule	sol89	1989	only	-	Feb	4	12:14:00s -0:14:00 -
+Rule	sol89	1989	only	-	Feb	5	12:14:05s -0:14:05 -
+Rule	sol89	1989	only	-	Feb	6	12:14:10s -0:14:10 -
+Rule	sol89	1989	only	-	Feb	7	12:14:10s -0:14:10 -
+Rule	sol89	1989	only	-	Feb	8	12:14:15s -0:14:15 -
+Rule	sol89	1989	only	-	Feb	9	12:14:15s -0:14:15 -
+Rule	sol89	1989	only	-	Feb	10	12:14:20s -0:14:20 -
+Rule	sol89	1989	only	-	Feb	11	12:14:20s -0:14:20 -
+Rule	sol89	1989	only	-	Feb	12	12:14:20s -0:14:20 -
+Rule	sol89	1989	only	-	Feb	13	12:14:15s -0:14:15 -
+Rule	sol89	1989	only	-	Feb	14	12:14:15s -0:14:15 -
+Rule	sol89	1989	only	-	Feb	15	12:14:10s -0:14:10 -
+Rule	sol89	1989	only	-	Feb	16	12:14:10s -0:14:10 -
+Rule	sol89	1989	only	-	Feb	17	12:14:05s -0:14:05 -
+Rule	sol89	1989	only	-	Feb	18	12:14:00s -0:14:00 -
+Rule	sol89	1989	only	-	Feb	19	12:13:55s -0:13:55 -
+Rule	sol89	1989	only	-	Feb	20	12:13:50s -0:13:50 -
+Rule	sol89	1989	only	-	Feb	21	12:13:40s -0:13:40 -
+Rule	sol89	1989	only	-	Feb	22	12:13:35s -0:13:35 -
+Rule	sol89	1989	only	-	Feb	23	12:13:25s -0:13:25 -
+Rule	sol89	1989	only	-	Feb	24	12:13:15s -0:13:15 -
+Rule	sol89	1989	only	-	Feb	25	12:13:05s -0:13:05 -
+Rule	sol89	1989	only	-	Feb	26	12:12:55s -0:12:55 -
+Rule	sol89	1989	only	-	Feb	27	12:12:45s -0:12:45 -
+Rule	sol89	1989	only	-	Feb	28	12:12:35s -0:12:35 -
+Rule	sol89	1989	only	-	Mar	1	12:12:25s -0:12:25 -
+Rule	sol89	1989	only	-	Mar	2	12:12:10s -0:12:10 -
+Rule	sol89	1989	only	-	Mar	3	12:12:00s -0:12:00 -
+Rule	sol89	1989	only	-	Mar	4	12:11:45s -0:11:45 -
+Rule	sol89	1989	only	-	Mar	5	12:11:35s -0:11:35 -
+Rule	sol89	1989	only	-	Mar	6	12:11:20s -0:11:20 -
+Rule	sol89	1989	only	-	Mar	7	12:11:05s -0:11:05 -
+Rule	sol89	1989	only	-	Mar	8	12:10:50s -0:10:50 -
+Rule	sol89	1989	only	-	Mar	9	12:10:35s -0:10:35 -
+Rule	sol89	1989	only	-	Mar	10	12:10:20s -0:10:20 -
+Rule	sol89	1989	only	-	Mar	11	12:10:05s -0:10:05 -
+Rule	sol89	1989	only	-	Mar	12	12:09:50s -0:09:50 -
+Rule	sol89	1989	only	-	Mar	13	12:09:30s -0:09:30 -
+Rule	sol89	1989	only	-	Mar	14	12:09:15s -0:09:15 -
+Rule	sol89	1989	only	-	Mar	15	12:09:00s -0:09:00 -
+Rule	sol89	1989	only	-	Mar	16	12:08:40s -0:08:40 -
+Rule	sol89	1989	only	-	Mar	17	12:08:25s -0:08:25 -
+Rule	sol89	1989	only	-	Mar	18	12:08:05s -0:08:05 -
+Rule	sol89	1989	only	-	Mar	19	12:07:50s -0:07:50 -
+Rule	sol89	1989	only	-	Mar	20	12:07:30s -0:07:30 -
+Rule	sol89	1989	only	-	Mar	21	12:07:15s -0:07:15 -
+Rule	sol89	1989	only	-	Mar	22	12:06:55s -0:06:55 -
+Rule	sol89	1989	only	-	Mar	23	12:06:35s -0:06:35 -
+Rule	sol89	1989	only	-	Mar	24	12:06:20s -0:06:20 -
+Rule	sol89	1989	only	-	Mar	25	12:06:00s -0:06:00 -
+Rule	sol89	1989	only	-	Mar	26	12:05:40s -0:05:40 -
+Rule	sol89	1989	only	-	Mar	27	12:05:25s -0:05:25 -
+Rule	sol89	1989	only	-	Mar	28	12:05:05s -0:05:05 -
+Rule	sol89	1989	only	-	Mar	29	12:04:50s -0:04:50 -
+Rule	sol89	1989	only	-	Mar	30	12:04:30s -0:04:30 -
+Rule	sol89	1989	only	-	Mar	31	12:04:10s -0:04:10 -
+Rule	sol89	1989	only	-	Apr	1	12:03:55s -0:03:55 -
+Rule	sol89	1989	only	-	Apr	2	12:03:35s -0:03:35 -
+Rule	sol89	1989	only	-	Apr	3	12:03:20s -0:03:20 -
+Rule	sol89	1989	only	-	Apr	4	12:03:00s -0:03:00 -
+Rule	sol89	1989	only	-	Apr	5	12:02:45s -0:02:45 -
+Rule	sol89	1989	only	-	Apr	6	12:02:25s -0:02:25 -
+Rule	sol89	1989	only	-	Apr	7	12:02:10s -0:02:10 -
+Rule	sol89	1989	only	-	Apr	8	12:01:50s -0:01:50 -
+Rule	sol89	1989	only	-	Apr	9	12:01:35s -0:01:35 -
+Rule	sol89	1989	only	-	Apr	10	12:01:20s -0:01:20 -
+Rule	sol89	1989	only	-	Apr	11	12:01:05s -0:01:05 -
+Rule	sol89	1989	only	-	Apr	12	12:00:50s -0:00:50 -
+Rule	sol89	1989	only	-	Apr	13	12:00:35s -0:00:35 -
+Rule	sol89	1989	only	-	Apr	14	12:00:20s -0:00:20 -
+Rule	sol89	1989	only	-	Apr	15	12:00:05s -0:00:05 -
+Rule	sol89	1989	only	-	Apr	16	11:59:50s 0:00:10 -
+Rule	sol89	1989	only	-	Apr	17	11:59:35s 0:00:25 -
+Rule	sol89	1989	only	-	Apr	18	11:59:20s 0:00:40 -
+Rule	sol89	1989	only	-	Apr	19	11:59:10s 0:00:50 -
+Rule	sol89	1989	only	-	Apr	20	11:58:55s 0:01:05 -
+Rule	sol89	1989	only	-	Apr	21	11:58:45s 0:01:15 -
+Rule	sol89	1989	only	-	Apr	22	11:58:30s 0:01:30 -
+Rule	sol89	1989	only	-	Apr	23	11:58:20s 0:01:40 -
+Rule	sol89	1989	only	-	Apr	24	11:58:10s 0:01:50 -
+Rule	sol89	1989	only	-	Apr	25	11:58:00s 0:02:00 -
+Rule	sol89	1989	only	-	Apr	26	11:57:50s 0:02:10 -
+Rule	sol89	1989	only	-	Apr	27	11:57:40s 0:02:20 -
+Rule	sol89	1989	only	-	Apr	28	11:57:30s 0:02:30 -
+Rule	sol89	1989	only	-	Apr	29	11:57:20s 0:02:40 -
+Rule	sol89	1989	only	-	Apr	30	11:57:15s 0:02:45 -
+Rule	sol89	1989	only	-	May	1	11:57:05s 0:02:55 -
+Rule	sol89	1989	only	-	May	2	11:57:00s 0:03:00 -
+Rule	sol89	1989	only	-	May	3	11:56:50s 0:03:10 -
+Rule	sol89	1989	only	-	May	4	11:56:45s 0:03:15 -
+Rule	sol89	1989	only	-	May	5	11:56:40s 0:03:20 -
+Rule	sol89	1989	only	-	May	6	11:56:35s 0:03:25 -
+Rule	sol89	1989	only	-	May	7	11:56:30s 0:03:30 -
+Rule	sol89	1989	only	-	May	8	11:56:30s 0:03:30 -
+Rule	sol89	1989	only	-	May	9	11:56:25s 0:03:35 -
+Rule	sol89	1989	only	-	May	10	11:56:25s 0:03:35 -
+Rule	sol89	1989	only	-	May	11	11:56:20s 0:03:40 -
+Rule	sol89	1989	only	-	May	12	11:56:20s 0:03:40 -
+Rule	sol89	1989	only	-	May	13	11:56:20s 0:03:40 -
+Rule	sol89	1989	only	-	May	14	11:56:20s 0:03:40 -
+Rule	sol89	1989	only	-	May	15	11:56:20s 0:03:40 -
+Rule	sol89	1989	only	-	May	16	11:56:20s 0:03:40 -
+Rule	sol89	1989	only	-	May	17	11:56:20s 0:03:40 -
+Rule	sol89	1989	only	-	May	18	11:56:25s 0:03:35 -
+Rule	sol89	1989	only	-	May	19	11:56:25s 0:03:35 -
+Rule	sol89	1989	only	-	May	20	11:56:30s 0:03:30 -
+Rule	sol89	1989	only	-	May	21	11:56:35s 0:03:25 -
+Rule	sol89	1989	only	-	May	22	11:56:35s 0:03:25 -
+Rule	sol89	1989	only	-	May	23	11:56:40s 0:03:20 -
+Rule	sol89	1989	only	-	May	24	11:56:45s 0:03:15 -
+Rule	sol89	1989	only	-	May	25	11:56:55s 0:03:05 -
+Rule	sol89	1989	only	-	May	26	11:57:00s 0:03:00 -
+Rule	sol89	1989	only	-	May	27	11:57:05s 0:02:55 -
+Rule	sol89	1989	only	-	May	28	11:57:15s 0:02:45 -
+Rule	sol89	1989	only	-	May	29	11:57:20s 0:02:40 -
+Rule	sol89	1989	only	-	May	30	11:57:30s 0:02:30 -
+Rule	sol89	1989	only	-	May	31	11:57:35s 0:02:25 -
+Rule	sol89	1989	only	-	Jun	1	11:57:45s 0:02:15 -
+Rule	sol89	1989	only	-	Jun	2	11:57:55s 0:02:05 -
+Rule	sol89	1989	only	-	Jun	3	11:58:05s 0:01:55 -
+Rule	sol89	1989	only	-	Jun	4	11:58:15s 0:01:45 -
+Rule	sol89	1989	only	-	Jun	5	11:58:25s 0:01:35 -
+Rule	sol89	1989	only	-	Jun	6	11:58:35s 0:01:25 -
+Rule	sol89	1989	only	-	Jun	7	11:58:45s 0:01:15 -
+Rule	sol89	1989	only	-	Jun	8	11:59:00s 0:01:00 -
+Rule	sol89	1989	only	-	Jun	9	11:59:10s 0:00:50 -
+Rule	sol89	1989	only	-	Jun	10	11:59:20s 0:00:40 -
+Rule	sol89	1989	only	-	Jun	11	11:59:35s 0:00:25 -
+Rule	sol89	1989	only	-	Jun	12	11:59:45s 0:00:15 -
+Rule	sol89	1989	only	-	Jun	13	12:00:00s 0:00:00 -
+Rule	sol89	1989	only	-	Jun	14	12:00:10s -0:00:10 -
+Rule	sol89	1989	only	-	Jun	15	12:00:25s -0:00:25 -
+Rule	sol89	1989	only	-	Jun	16	12:00:35s -0:00:35 -
+Rule	sol89	1989	only	-	Jun	17	12:00:50s -0:00:50 -
+Rule	sol89	1989	only	-	Jun	18	12:01:05s -0:01:05 -
+Rule	sol89	1989	only	-	Jun	19	12:01:15s -0:01:15 -
+Rule	sol89	1989	only	-	Jun	20	12:01:30s -0:01:30 -
+Rule	sol89	1989	only	-	Jun	21	12:01:40s -0:01:40 -
+Rule	sol89	1989	only	-	Jun	22	12:01:55s -0:01:55 -
+Rule	sol89	1989	only	-	Jun	23	12:02:10s -0:02:10 -
+Rule	sol89	1989	only	-	Jun	24	12:02:20s -0:02:20 -
+Rule	sol89	1989	only	-	Jun	25	12:02:35s -0:02:35 -
+Rule	sol89	1989	only	-	Jun	26	12:02:45s -0:02:45 -
+Rule	sol89	1989	only	-	Jun	27	12:03:00s -0:03:00 -
+Rule	sol89	1989	only	-	Jun	28	12:03:10s -0:03:10 -
+Rule	sol89	1989	only	-	Jun	29	12:03:25s -0:03:25 -
+Rule	sol89	1989	only	-	Jun	30	12:03:35s -0:03:35 -
+Rule	sol89	1989	only	-	Jul	1	12:03:45s -0:03:45 -
+Rule	sol89	1989	only	-	Jul	2	12:04:00s -0:04:00 -
+Rule	sol89	1989	only	-	Jul	3	12:04:10s -0:04:10 -
+Rule	sol89	1989	only	-	Jul	4	12:04:20s -0:04:20 -
+Rule	sol89	1989	only	-	Jul	5	12:04:30s -0:04:30 -
+Rule	sol89	1989	only	-	Jul	6	12:04:40s -0:04:40 -
+Rule	sol89	1989	only	-	Jul	7	12:04:50s -0:04:50 -
+Rule	sol89	1989	only	-	Jul	8	12:05:00s -0:05:00 -
+Rule	sol89	1989	only	-	Jul	9	12:05:10s -0:05:10 -
+Rule	sol89	1989	only	-	Jul	10	12:05:20s -0:05:20 -
+Rule	sol89	1989	only	-	Jul	11	12:05:25s -0:05:25 -
+Rule	sol89	1989	only	-	Jul	12	12:05:35s -0:05:35 -
+Rule	sol89	1989	only	-	Jul	13	12:05:40s -0:05:40 -
+Rule	sol89	1989	only	-	Jul	14	12:05:50s -0:05:50 -
+Rule	sol89	1989	only	-	Jul	15	12:05:55s -0:05:55 -
+Rule	sol89	1989	only	-	Jul	16	12:06:00s -0:06:00 -
+Rule	sol89	1989	only	-	Jul	17	12:06:05s -0:06:05 -
+Rule	sol89	1989	only	-	Jul	18	12:06:10s -0:06:10 -
+Rule	sol89	1989	only	-	Jul	19	12:06:15s -0:06:15 -
+Rule	sol89	1989	only	-	Jul	20	12:06:20s -0:06:20 -
+Rule	sol89	1989	only	-	Jul	21	12:06:20s -0:06:20 -
+Rule	sol89	1989	only	-	Jul	22	12:06:25s -0:06:25 -
+Rule	sol89	1989	only	-	Jul	23	12:06:25s -0:06:25 -
+Rule	sol89	1989	only	-	Jul	24	12:06:30s -0:06:30 -
+Rule	sol89	1989	only	-	Jul	25	12:06:30s -0:06:30 -
+Rule	sol89	1989	only	-	Jul	26	12:06:30s -0:06:30 -
+Rule	sol89	1989	only	-	Jul	27	12:06:30s -0:06:30 -
+Rule	sol89	1989	only	-	Jul	28	12:06:30s -0:06:30 -
+Rule	sol89	1989	only	-	Jul	29	12:06:25s -0:06:25 -
+Rule	sol89	1989	only	-	Jul	30	12:06:25s -0:06:25 -
+Rule	sol89	1989	only	-	Jul	31	12:06:20s -0:06:20 -
+Rule	sol89	1989	only	-	Aug	1	12:06:20s -0:06:20 -
+Rule	sol89	1989	only	-	Aug	2	12:06:15s -0:06:15 -
+Rule	sol89	1989	only	-	Aug	3	12:06:10s -0:06:10 -
+Rule	sol89	1989	only	-	Aug	4	12:06:05s -0:06:05 -
+Rule	sol89	1989	only	-	Aug	5	12:06:00s -0:06:00 -
+Rule	sol89	1989	only	-	Aug	6	12:05:50s -0:05:50 -
+Rule	sol89	1989	only	-	Aug	7	12:05:45s -0:05:45 -
+Rule	sol89	1989	only	-	Aug	8	12:05:35s -0:05:35 -
+Rule	sol89	1989	only	-	Aug	9	12:05:30s -0:05:30 -
+Rule	sol89	1989	only	-	Aug	10	12:05:20s -0:05:20 -
+Rule	sol89	1989	only	-	Aug	11	12:05:10s -0:05:10 -
+Rule	sol89	1989	only	-	Aug	12	12:05:00s -0:05:00 -
+Rule	sol89	1989	only	-	Aug	13	12:04:50s -0:04:50 -
+Rule	sol89	1989	only	-	Aug	14	12:04:40s -0:04:40 -
+Rule	sol89	1989	only	-	Aug	15	12:04:30s -0:04:30 -
+Rule	sol89	1989	only	-	Aug	16	12:04:15s -0:04:15 -
+Rule	sol89	1989	only	-	Aug	17	12:04:05s -0:04:05 -
+Rule	sol89	1989	only	-	Aug	18	12:03:50s -0:03:50 -
+Rule	sol89	1989	only	-	Aug	19	12:03:35s -0:03:35 -
+Rule	sol89	1989	only	-	Aug	20	12:03:25s -0:03:25 -
+Rule	sol89	1989	only	-	Aug	21	12:03:10s -0:03:10 -
+Rule	sol89	1989	only	-	Aug	22	12:02:55s -0:02:55 -
+Rule	sol89	1989	only	-	Aug	23	12:02:40s -0:02:40 -
+Rule	sol89	1989	only	-	Aug	24	12:02:20s -0:02:20 -
+Rule	sol89	1989	only	-	Aug	25	12:02:05s -0:02:05 -
+Rule	sol89	1989	only	-	Aug	26	12:01:50s -0:01:50 -
+Rule	sol89	1989	only	-	Aug	27	12:01:30s -0:01:30 -
+Rule	sol89	1989	only	-	Aug	28	12:01:15s -0:01:15 -
+Rule	sol89	1989	only	-	Aug	29	12:00:55s -0:00:55 -
+Rule	sol89	1989	only	-	Aug	30	12:00:40s -0:00:40 -
+Rule	sol89	1989	only	-	Aug	31	12:00:20s -0:00:20 -
+Rule	sol89	1989	only	-	Sep	1	12:00:00s 0:00:00 -
+Rule	sol89	1989	only	-	Sep	2	11:59:45s 0:00:15 -
+Rule	sol89	1989	only	-	Sep	3	11:59:25s 0:00:35 -
+Rule	sol89	1989	only	-	Sep	4	11:59:05s 0:00:55 -
+Rule	sol89	1989	only	-	Sep	5	11:58:45s 0:01:15 -
+Rule	sol89	1989	only	-	Sep	6	11:58:25s 0:01:35 -
+Rule	sol89	1989	only	-	Sep	7	11:58:05s 0:01:55 -
+Rule	sol89	1989	only	-	Sep	8	11:57:45s 0:02:15 -
+Rule	sol89	1989	only	-	Sep	9	11:57:20s 0:02:40 -
+Rule	sol89	1989	only	-	Sep	10	11:57:00s 0:03:00 -
+Rule	sol89	1989	only	-	Sep	11	11:56:40s 0:03:20 -
+Rule	sol89	1989	only	-	Sep	12	11:56:20s 0:03:40 -
+Rule	sol89	1989	only	-	Sep	13	11:56:00s 0:04:00 -
+Rule	sol89	1989	only	-	Sep	14	11:55:35s 0:04:25 -
+Rule	sol89	1989	only	-	Sep	15	11:55:15s 0:04:45 -
+Rule	sol89	1989	only	-	Sep	16	11:54:55s 0:05:05 -
+Rule	sol89	1989	only	-	Sep	17	11:54:35s 0:05:25 -
+Rule	sol89	1989	only	-	Sep	18	11:54:10s 0:05:50 -
+Rule	sol89	1989	only	-	Sep	19	11:53:50s 0:06:10 -
+Rule	sol89	1989	only	-	Sep	20	11:53:30s 0:06:30 -
+Rule	sol89	1989	only	-	Sep	21	11:53:10s 0:06:50 -
+Rule	sol89	1989	only	-	Sep	22	11:52:45s 0:07:15 -
+Rule	sol89	1989	only	-	Sep	23	11:52:25s 0:07:35 -
+Rule	sol89	1989	only	-	Sep	24	11:52:05s 0:07:55 -
+Rule	sol89	1989	only	-	Sep	25	11:51:45s 0:08:15 -
+Rule	sol89	1989	only	-	Sep	26	11:51:25s 0:08:35 -
+Rule	sol89	1989	only	-	Sep	27	11:51:05s 0:08:55 -
+Rule	sol89	1989	only	-	Sep	28	11:50:40s 0:09:20 -
+Rule	sol89	1989	only	-	Sep	29	11:50:20s 0:09:40 -
+Rule	sol89	1989	only	-	Sep	30	11:50:00s 0:10:00 -
+Rule	sol89	1989	only	-	Oct	1	11:49:45s 0:10:15 -
+Rule	sol89	1989	only	-	Oct	2	11:49:25s 0:10:35 -
+Rule	sol89	1989	only	-	Oct	3	11:49:05s 0:10:55 -
+Rule	sol89	1989	only	-	Oct	4	11:48:45s 0:11:15 -
+Rule	sol89	1989	only	-	Oct	5	11:48:30s 0:11:30 -
+Rule	sol89	1989	only	-	Oct	6	11:48:10s 0:11:50 -
+Rule	sol89	1989	only	-	Oct	7	11:47:50s 0:12:10 -
+Rule	sol89	1989	only	-	Oct	8	11:47:35s 0:12:25 -
+Rule	sol89	1989	only	-	Oct	9	11:47:20s 0:12:40 -
+Rule	sol89	1989	only	-	Oct	10	11:47:00s 0:13:00 -
+Rule	sol89	1989	only	-	Oct	11	11:46:45s 0:13:15 -
+Rule	sol89	1989	only	-	Oct	12	11:46:30s 0:13:30 -
+Rule	sol89	1989	only	-	Oct	13	11:46:15s 0:13:45 -
+Rule	sol89	1989	only	-	Oct	14	11:46:00s 0:14:00 -
+Rule	sol89	1989	only	-	Oct	15	11:45:50s 0:14:10 -
+Rule	sol89	1989	only	-	Oct	16	11:45:35s 0:14:25 -
+Rule	sol89	1989	only	-	Oct	17	11:45:20s 0:14:40 -
+Rule	sol89	1989	only	-	Oct	18	11:45:10s 0:14:50 -
+Rule	sol89	1989	only	-	Oct	19	11:45:00s 0:15:00 -
+Rule	sol89	1989	only	-	Oct	20	11:44:50s 0:15:10 -
+Rule	sol89	1989	only	-	Oct	21	11:44:40s 0:15:20 -
+Rule	sol89	1989	only	-	Oct	22	11:44:30s 0:15:30 -
+Rule	sol89	1989	only	-	Oct	23	11:44:20s 0:15:40 -
+Rule	sol89	1989	only	-	Oct	24	11:44:10s 0:15:50 -
+Rule	sol89	1989	only	-	Oct	25	11:44:05s 0:15:55 -
+Rule	sol89	1989	only	-	Oct	26	11:44:00s 0:16:00 -
+Rule	sol89	1989	only	-	Oct	27	11:43:50s 0:16:10 -
+Rule	sol89	1989	only	-	Oct	28	11:43:45s 0:16:15 -
+Rule	sol89	1989	only	-	Oct	29	11:43:40s 0:16:20 -
+Rule	sol89	1989	only	-	Oct	30	11:43:40s 0:16:20 -
+Rule	sol89	1989	only	-	Oct	31	11:43:35s 0:16:25 -
+Rule	sol89	1989	only	-	Nov	1	11:43:35s 0:16:25 -
+Rule	sol89	1989	only	-	Nov	2	11:43:35s 0:16:25 -
+Rule	sol89	1989	only	-	Nov	3	11:43:30s 0:16:30 -
+Rule	sol89	1989	only	-	Nov	4	11:43:35s 0:16:25 -
+Rule	sol89	1989	only	-	Nov	5	11:43:35s 0:16:25 -
+Rule	sol89	1989	only	-	Nov	6	11:43:35s 0:16:25 -
+Rule	sol89	1989	only	-	Nov	7	11:43:40s 0:16:20 -
+Rule	sol89	1989	only	-	Nov	8	11:43:45s 0:16:15 -
+Rule	sol89	1989	only	-	Nov	9	11:43:50s 0:16:10 -
+Rule	sol89	1989	only	-	Nov	10	11:43:55s 0:16:05 -
+Rule	sol89	1989	only	-	Nov	11	11:44:00s 0:16:00 -
+Rule	sol89	1989	only	-	Nov	12	11:44:05s 0:15:55 -
+Rule	sol89	1989	only	-	Nov	13	11:44:15s 0:15:45 -
+Rule	sol89	1989	only	-	Nov	14	11:44:25s 0:15:35 -
+Rule	sol89	1989	only	-	Nov	15	11:44:35s 0:15:25 -
+Rule	sol89	1989	only	-	Nov	16	11:44:45s 0:15:15 -
+Rule	sol89	1989	only	-	Nov	17	11:44:55s 0:15:05 -
+Rule	sol89	1989	only	-	Nov	18	11:45:10s 0:14:50 -
+Rule	sol89	1989	only	-	Nov	19	11:45:20s 0:14:40 -
+Rule	sol89	1989	only	-	Nov	20	11:45:35s 0:14:25 -
+Rule	sol89	1989	only	-	Nov	21	11:45:50s 0:14:10 -
+Rule	sol89	1989	only	-	Nov	22	11:46:05s 0:13:55 -
+Rule	sol89	1989	only	-	Nov	23	11:46:25s 0:13:35 -
+Rule	sol89	1989	only	-	Nov	24	11:46:40s 0:13:20 -
+Rule	sol89	1989	only	-	Nov	25	11:47:00s 0:13:00 -
+Rule	sol89	1989	only	-	Nov	26	11:47:20s 0:12:40 -
+Rule	sol89	1989	only	-	Nov	27	11:47:35s 0:12:25 -
+Rule	sol89	1989	only	-	Nov	28	11:47:55s 0:12:05 -
+Rule	sol89	1989	only	-	Nov	29	11:48:20s 0:11:40 -
+Rule	sol89	1989	only	-	Nov	30	11:48:40s 0:11:20 -
+Rule	sol89	1989	only	-	Dec	1	11:49:00s 0:11:00 -
+Rule	sol89	1989	only	-	Dec	2	11:49:25s 0:10:35 -
+Rule	sol89	1989	only	-	Dec	3	11:49:50s 0:10:10 -
+Rule	sol89	1989	only	-	Dec	4	11:50:15s 0:09:45 -
+Rule	sol89	1989	only	-	Dec	5	11:50:35s 0:09:25 -
+Rule	sol89	1989	only	-	Dec	6	11:51:00s 0:09:00 -
+Rule	sol89	1989	only	-	Dec	7	11:51:30s 0:08:30 -
+Rule	sol89	1989	only	-	Dec	8	11:51:55s 0:08:05 -
+Rule	sol89	1989	only	-	Dec	9	11:52:20s 0:07:40 -
+Rule	sol89	1989	only	-	Dec	10	11:52:50s 0:07:10 -
+Rule	sol89	1989	only	-	Dec	11	11:53:15s 0:06:45 -
+Rule	sol89	1989	only	-	Dec	12	11:53:45s 0:06:15 -
+Rule	sol89	1989	only	-	Dec	13	11:54:10s 0:05:50 -
+Rule	sol89	1989	only	-	Dec	14	11:54:40s 0:05:20 -
+Rule	sol89	1989	only	-	Dec	15	11:55:10s 0:04:50 -
+Rule	sol89	1989	only	-	Dec	16	11:55:40s 0:04:20 -
+Rule	sol89	1989	only	-	Dec	17	11:56:05s 0:03:55 -
+Rule	sol89	1989	only	-	Dec	18	11:56:35s 0:03:25 -
+Rule	sol89	1989	only	-	Dec	19	11:57:05s 0:02:55 -
+Rule	sol89	1989	only	-	Dec	20	11:57:35s 0:02:25 -
+Rule	sol89	1989	only	-	Dec	21	11:58:05s 0:01:55 -
+Rule	sol89	1989	only	-	Dec	22	11:58:35s 0:01:25 -
+Rule	sol89	1989	only	-	Dec	23	11:59:05s 0:00:55 -
+Rule	sol89	1989	only	-	Dec	24	11:59:35s 0:00:25 -
+Rule	sol89	1989	only	-	Dec	25	12:00:05s -0:00:05 -
+Rule	sol89	1989	only	-	Dec	26	12:00:35s -0:00:35 -
+Rule	sol89	1989	only	-	Dec	27	12:01:05s -0:01:05 -
+Rule	sol89	1989	only	-	Dec	28	12:01:35s -0:01:35 -
+Rule	sol89	1989	only	-	Dec	29	12:02:00s -0:02:00 -
+Rule	sol89	1989	only	-	Dec	30	12:02:30s -0:02:30 -
+Rule	sol89	1989	only	-	Dec	31	12:03:00s -0:03:00 -
+
+# Riyadh is at about 46 degrees 46 minutes East:  3 hrs, 7 mins, 4 secs
+# Before and after 1989, we'll operate on local mean solar time.
+
+# Zone	NAME		GMTOFF	RULES/SAVE	FORMAT	[UNTIL]
+Zone	Asia/Riyadh89	3:07:04	-		zzz	1989
+			3:07:04	sol89		zzz	1990
+			3:07:04	-		zzz
+# For backward compatibility...
+Link	Asia/Riyadh89	Mideast/Riyadh89
Index: libkcal/libical/tzdata/factory
===================================================================
--- libkcal/libical/tzdata/factory	(.../tags/KDE/3.5.6/kdepim)	(wersja 0)
+++ libkcal/libical/tzdata/factory	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -0,0 +1,8 @@
+# @(#)factory	8.1
+
+# For companies who don't want to put time zone specification in
+# their installation procedures.  When users run date, they'll get the message.
+# Also useful for the "comp.sources" version.
+
+# Zone	NAME	GMTOFF	RULES	FORMAT
+Zone	Factory	0	- "Local time zone must be set--see zic manual page"
Index: libkcal/libical/tzdata/yearistype.sh
===================================================================
--- libkcal/libical/tzdata/yearistype.sh	(.../tags/KDE/3.5.6/kdepim)	(wersja 0)
+++ libkcal/libical/tzdata/yearistype.sh	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -0,0 +1,40 @@
+#! /bin/sh
+
+: 'This file is in the public domain, so clarified as of'
+: '2006-07-17 by Arthur David Olson.'
+
+: '@(#)yearistype.sh	8.2'
+
+case $#-$1 in
+	2-|2-0*|2-*[!0-9]*)
+		echo "$0: wild year - $1" >&2
+		exit 1 ;;
+esac
+
+case $#-$2 in
+	2-even)
+		case $1 in
+			*[24680])			exit 0 ;;
+			*)				exit 1 ;;
+		esac ;;
+	2-nonpres|2-nonuspres)
+		case $1 in
+			*[02468][048]|*[13579][26])	exit 1 ;;
+			*)				exit 0 ;;
+		esac ;;
+	2-odd)
+		case $1 in
+			*[13579])			exit 0 ;;
+			*)				exit 1 ;;
+		esac ;;
+	2-uspres)
+		case $1 in
+			*[02468][048]|*[13579][26])	exit 0 ;;
+			*)				exit 1 ;;
+		esac ;;
+	2-*)
+		echo "$0: wild type - $2" >&2 ;;
+esac
+
+echo "$0: usage is $0 year even|odd|uspres|nonpres|nonuspres" >&2
+exit 1
Index: libkcal/libical/tzdata/pacificnew
===================================================================
--- libkcal/libical/tzdata/pacificnew	(.../tags/KDE/3.5.6/kdepim)	(wersja 0)
+++ libkcal/libical/tzdata/pacificnew	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -0,0 +1,26 @@
+# @(#)pacificnew	8.1
+
+# From Arthur David Olson (1989-04-05):
+# On 1989-04-05, the U. S. House of Representatives passed (238-154) a bill
+# establishing "Pacific Presidential Election Time"; it was not acted on
+# by the Senate or signed into law by the President.
+# You might want to change the "PE" (Presidential Election) below to
+# "Q" (Quadrennial) to maintain three-character zone abbreviations.
+# If you're really conservative, you might want to change it to "D".
+# Avoid "L" (Leap Year), which won't be true in 2100.
+
+# If Presidential Election Time is ever established, replace "XXXX" below
+# with the year the law takes effect and uncomment the "##" lines.
+
+# Rule	NAME	FROM	TO	TYPE	IN	ON	AT	SAVE	LETTER/S
+## Rule	Twilite	XXXX	max	-	Apr	Sun>=1	2:00	1:00	D
+## Rule	Twilite	XXXX	max	uspres	Oct	lastSun	2:00	1:00	PE
+## Rule	Twilite	XXXX	max	uspres	Nov	Sun>=7	2:00	0	S
+## Rule	Twilite	XXXX	max	nonpres	Oct	lastSun	2:00	0	S
+
+# Zone	NAME			GMTOFF	RULES/SAVE	FORMAT	[UNTIL]
+## Zone	America/Los_Angeles-PET	-8:00	US		P%sT	XXXX
+##				-8:00	Twilite		P%sT
+
+# For now...
+Link	America/Los_Angeles	US/Pacific-New	##
Index: libkcal/libical/tzdata/australasia
===================================================================
--- libkcal/libical/tzdata/australasia	(.../tags/KDE/3.5.6/kdepim)	(wersja 0)
+++ libkcal/libical/tzdata/australasia	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -0,0 +1,1431 @@
+# @(#)australasia	8.6
+# <pre>
+
+# This file also includes Pacific islands.
+
+# Notes are at the end of this file
+
+###############################################################################
+
+# Australia
+
+# Please see the notes below for the controversy about "EST" versus "AEST" etc.
+
+# Rule	NAME	FROM	TO	TYPE	IN	ON	AT	SAVE	LETTER/S
+Rule	Aus	1917	only	-	Jan	 1	0:01	1:00	-
+Rule	Aus	1917	only	-	Mar	25	2:00	0	-
+Rule	Aus	1942	only	-	Jan	 1	2:00	1:00	-
+Rule	Aus	1942	only	-	Mar	29	2:00	0	-
+Rule	Aus	1942	only	-	Sep	27	2:00	1:00	-
+Rule	Aus	1943	1944	-	Mar	lastSun	2:00	0	-
+Rule	Aus	1943	only	-	Oct	 3	2:00	1:00	-
+# Go with Whitman and the Australian National Standards Commission, which
+# says W Australia didn't use DST in 1943/1944.  Ignore Whitman's claim that
+# 1944/1945 was just like 1943/1944.
+
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+# Northern Territory
+Zone Australia/Darwin	 8:43:20 -	LMT	1895 Feb
+			 9:00	-	CST	1899 May
+			 9:30	Aus	CST
+# Western Australia
+#
+# Rule	NAME	FROM	TO	TYPE	IN	ON	AT	SAVE	LETTER/S
+Rule	AW	1974	only	-	Oct	lastSun	2:00s	1:00	-
+Rule	AW	1975	only	-	Mar	Sun>=1	2:00s	0	-
+Rule	AW	1983	only	-	Oct	lastSun	2:00s	1:00	-
+Rule	AW	1984	only	-	Mar	Sun>=1	2:00s	0	-
+Rule	AW	1991	only	-	Nov	17	2:00s	1:00	-
+Rule	AW	1992	only	-	Mar	Sun>=1	2:00s	0	-
+Rule	AW	2006	only	-	Dec	 3	2:00s	1:00	-
+Rule	AW	2007	2009	-	Mar	lastSun	2:00s	0	-
+Rule	AW	2007	2008	-	Oct	lastSun	2:00s	1:00	-
+Zone Australia/Perth	 7:43:24 -	LMT	1895 Dec
+			 8:00	Aus	WST	1943 Jul
+			 8:00	AW	WST
+Zone Australia/Eucla	 8:35:28 -	LMT	1895 Dec
+			 8:45	Aus	CWST	1943 Jul
+			 8:45	AW	CWST
+
+# Queensland
+#
+# From Alex Livingston (1996-11-01):
+# I have heard or read more than once that some resort islands off the coast
+# of Queensland chose to keep observing daylight-saving time even after
+# Queensland ceased to.
+#
+# From Paul Eggert (1996-11-22):
+# IATA SSIM (1993-02/1994-09) say that the Holiday Islands (Hayman, Lindeman,
+# Hamilton) observed DST for two years after the rest of Queensland stopped.
+# Hamilton is the largest, but there is also a Hamilton in Victoria,
+# so use Lindeman.
+#
+# Rule	NAME	FROM	TO	TYPE	IN	ON	AT	SAVE	LETTER/S
+Rule	AQ	1971	only	-	Oct	lastSun	2:00s	1:00	-
+Rule	AQ	1972	only	-	Feb	lastSun	2:00s	0	-
+Rule	AQ	1989	1991	-	Oct	lastSun	2:00s	1:00	-
+Rule	AQ	1990	1992	-	Mar	Sun>=1	2:00s	0	-
+Rule	Holiday	1992	1993	-	Oct	lastSun	2:00s	1:00	-
+Rule	Holiday	1993	1994	-	Mar	Sun>=1	2:00s	0	-
+Zone Australia/Brisbane	10:12:08 -	LMT	1895
+			10:00	Aus	EST	1971
+			10:00	AQ	EST
+Zone Australia/Lindeman  9:55:56 -	LMT	1895
+			10:00	Aus	EST	1971
+			10:00	AQ	EST	1992 Jul
+			10:00	Holiday	EST
+
+# South Australia
+# Rule	NAME	FROM	TO	TYPE	IN	ON	AT	SAVE	LETTER/S
+Rule	AS	1971	1985	-	Oct	lastSun	2:00s	1:00	-
+Rule	AS	1986	only	-	Oct	19	2:00s	1:00	-
+Rule	AS	1987	max	-	Oct	lastSun	2:00s	1:00	-
+Rule	AS	1972	only	-	Feb	27	2:00s	0	-
+Rule	AS	1973	1985	-	Mar	Sun>=1	2:00s	0	-
+Rule	AS	1986	1989	-	Mar	Sun>=15	2:00s	0	-
+Rule	AS	1990	only	-	Mar	Sun>=18	2:00s	0	-
+Rule	AS	1991	only	-	Mar	Sun>=1	2:00s	0	-
+Rule	AS	1992	only	-	Mar	Sun>=18	2:00s	0	-
+Rule	AS	1993	only	-	Mar	Sun>=1	2:00s	0	-
+Rule	AS	1994	only	-	Mar	Sun>=18	2:00s	0	-
+Rule	AS	1995	2005	-	Mar	lastSun	2:00s	0	-
+Rule	AS	2006	only	-	Apr	Sun>=1	2:00s	0	-
+Rule	AS	2007	max	-	Mar	lastSun	2:00s	0	-
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone Australia/Adelaide	9:14:20 -	LMT	1895 Feb
+			9:00	-	CST	1899 May
+			9:30	Aus	CST	1971
+			9:30	AS	CST
+
+# Tasmania
+#
+# From Paul Eggert (2005-08-16):
+# <http://www.bom.gov.au/climate/averages/tables/dst_times.shtml>
+# says King Island didn't observe DST from WWII until late 1971.
+#
+# Rule	NAME	FROM	TO	TYPE	IN	ON	AT	SAVE	LETTER/S
+Rule	AT	1967	only	-	Oct	Sun>=1	2:00s	1:00	-
+Rule	AT	1968	only	-	Mar	lastSun	2:00s	0	-
+Rule	AT	1968	1985	-	Oct	lastSun	2:00s	1:00	-
+Rule	AT	1969	1971	-	Mar	Sun>=8	2:00s	0	-
+Rule	AT	1972	only	-	Feb	lastSun	2:00s	0	-
+Rule	AT	1973	1981	-	Mar	Sun>=1	2:00s	0	-
+Rule	AT	1982	1983	-	Mar	lastSun	2:00s	0	-
+Rule	AT	1984	1986	-	Mar	Sun>=1	2:00s	0	-
+Rule	AT	1986	only	-	Oct	Sun>=15	2:00s	1:00	-
+Rule	AT	1987	1990	-	Mar	Sun>=15	2:00s	0	-
+Rule	AT	1987	only	-	Oct	Sun>=22	2:00s	1:00	-
+Rule	AT	1988	1990	-	Oct	lastSun	2:00s	1:00	-
+Rule	AT	1991	1999	-	Oct	Sun>=1	2:00s	1:00	-
+Rule	AT	1991	2005	-	Mar	lastSun	2:00s	0	-
+Rule	AT	2000	only	-	Aug	lastSun	2:00s	1:00	-
+Rule	AT	2001	max	-	Oct	Sun>=1	2:00s	1:00	-
+Rule	AT	2006	only	-	Apr	Sun>=1	2:00s	0	-
+Rule	AT	2007	max	-	Mar	lastSun	2:00s	0	-
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone Australia/Hobart	9:49:16	-	LMT	1895 Sep
+			10:00	-	EST	1916 Oct 1 2:00
+			10:00	1:00	EST	1917 Feb
+			10:00	Aus	EST	1967
+			10:00	AT	EST
+Zone Australia/Currie	9:35:28	-	LMT	1895 Sep
+			10:00	-	EST	1916 Oct 1 2:00
+			10:00	1:00	EST	1917 Feb
+			10:00	Aus	EST	1971 Jul
+			10:00	AT	EST
+
+# Victoria
+# Rule	NAME	FROM	TO	TYPE	IN	ON	AT	SAVE	LETTER/S
+Rule	AV	1971	1985	-	Oct	lastSun	2:00s	1:00	-
+Rule	AV	1972	only	-	Feb	lastSun	2:00s	0	-
+Rule	AV	1973	1985	-	Mar	Sun>=1	2:00s	0	-
+Rule	AV	1986	1990	-	Mar	Sun>=15	2:00s	0	-
+Rule	AV	1986	1987	-	Oct	Sun>=15	2:00s	1:00	-
+Rule	AV	1988	1999	-	Oct	lastSun	2:00s	1:00	-
+Rule	AV	1991	1994	-	Mar	Sun>=1	2:00s	0	-
+Rule	AV	1995	2005	-	Mar	lastSun	2:00s	0	-
+Rule	AV	2000	only	-	Aug	lastSun	2:00s	1:00	-
+Rule	AV	2001	max	-	Oct	lastSun	2:00s	1:00	-
+Rule	AV	2006	only	-	Apr	Sun>=1	2:00s	0	-
+Rule	AV	2007	max	-	Mar	lastSun	2:00s	0	-
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone Australia/Melbourne 9:39:52 -	LMT	1895 Feb
+			10:00	Aus	EST	1971
+			10:00	AV	EST
+
+# New South Wales
+# Rule	NAME	FROM	TO	TYPE	IN	ON	AT	SAVE	LETTER/S
+Rule	AN	1971	1985	-	Oct	lastSun	2:00s	1:00	-
+Rule	AN	1972	only	-	Feb	27	2:00s	0	-
+Rule	AN	1973	1981	-	Mar	Sun>=1	2:00s	0	-
+Rule	AN	1982	only	-	Apr	Sun>=1	2:00s	0	-
+Rule	AN	1983	1985	-	Mar	Sun>=1	2:00s	0	-
+Rule	AN	1986	1989	-	Mar	Sun>=15	2:00s	0	-
+Rule	AN	1986	only	-	Oct	19	2:00s	1:00	-
+Rule	AN	1987	1999	-	Oct	lastSun	2:00s	1:00	-
+Rule	AN	1990	1995	-	Mar	Sun>=1	2:00s	0	-
+Rule	AN	1996	2005	-	Mar	lastSun	2:00s	0	-
+Rule	AN	2000	only	-	Aug	lastSun	2:00s	1:00	-
+Rule	AN	2001	max	-	Oct	lastSun	2:00s	1:00	-
+Rule	AN	2006	only	-	Apr	Sun>=1	2:00s	0	-
+Rule	AN	2007	max	-	Mar	lastSun	2:00s	0	-
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone Australia/Sydney	10:04:52 -	LMT	1895 Feb
+			10:00	Aus	EST	1971
+			10:00	AN	EST
+Zone Australia/Broken_Hill 9:25:48 -	LMT	1895 Feb
+			10:00	-	EST	1896 Aug 23
+			9:00	-	CST	1899 May
+			9:30	Aus	CST	1971
+			9:30	AN	CST	2000
+			9:30	AS	CST
+
+# Lord Howe Island
+# Rule	NAME	FROM	TO	TYPE	IN	ON	AT	SAVE	LETTER/S
+Rule	LH	1981	1984	-	Oct	lastSun	2:00	1:00	-
+Rule	LH	1982	1985	-	Mar	Sun>=1	2:00	0	-
+Rule	LH	1985	only	-	Oct	lastSun	2:00	0:30	-
+Rule	LH	1986	1989	-	Mar	Sun>=15	2:00	0	-
+Rule	LH	1986	only	-	Oct	19	2:00	0:30	-
+Rule	LH	1987	1999	-	Oct	lastSun	2:00	0:30	-
+Rule	LH	1990	1995	-	Mar	Sun>=1	2:00	0	-
+Rule	LH	1996	2005	-	Mar	lastSun	2:00	0	-
+Rule	LH	2000	only	-	Aug	lastSun	2:00	0:30	-
+Rule	LH	2001	max	-	Oct	lastSun	2:00	0:30	-
+Rule	LH	2006	only	-	Apr	Sun>=1	2:00	0	-
+Rule	LH	2007	max	-	Mar	lastSun	2:00	0	-
+Zone Australia/Lord_Howe 10:36:20 -	LMT	1895 Feb
+			10:00	-	EST	1981 Mar
+			10:30	LH	LHST
+
+# Australian miscellany
+#
+# Ashmore Is, Cartier
+# no indigenous inhabitants; only seasonal caretakers
+# no times are set
+#
+# Coral Sea Is
+# no indigenous inhabitants; only meteorologists
+# no times are set
+#
+# Macquarie
+# permanent occupation (scientific station) since 1948;
+# sealing and penguin oil station operated 1888/1917
+# like Australia/Hobart
+
+# Christmas
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone Indian/Christmas	7:02:52 -	LMT	1895 Feb
+			7:00	-	CXT	# Christmas Island Time
+
+# Cook Is
+# From Shanks & Pottenger:
+# Rule	NAME	FROM	TO	TYPE	IN	ON	AT	SAVE	LETTER/S
+Rule	Cook	1978	only	-	Nov	12	0:00	0:30	HS
+Rule	Cook	1979	1991	-	Mar	Sun>=1	0:00	0	-
+Rule	Cook	1979	1990	-	Oct	lastSun	0:00	0:30	HS
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone Pacific/Rarotonga	-10:39:04 -	LMT	1901		# Avarua
+			-10:30	-	CKT	1978 Nov 12	# Cook Is Time
+			-10:00	Cook	CK%sT
+
+# Cocos
+# These islands were ruled by the Ross family from about 1830 to 1978.
+# We don't know when standard time was introduced; for now, we guess 1900.
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone	Indian/Cocos	6:27:40	-	LMT	1900
+			6:30	-	CCT	# Cocos Islands Time
+
+# Fiji
+# Rule	NAME	FROM	TO	TYPE	IN	ON	AT	SAVE	LETTER/S
+Rule	Fiji	1998	1999	-	Nov	Sun>=1	2:00	1:00	S
+Rule	Fiji	1999	2000	-	Feb	lastSun	3:00	0	-
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone	Pacific/Fiji	11:53:40 -	LMT	1915 Oct 26	# Suva
+			12:00	Fiji	FJ%sT	# Fiji Time
+
+# French Polynesia
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone	Pacific/Gambier	 -8:59:48 -	LMT	1912 Oct	# Rikitea
+			 -9:00	-	GAMT	# Gambier Time
+Zone	Pacific/Marquesas -9:18:00 -	LMT	1912 Oct
+			 -9:30	-	MART	# Marquesas Time
+Zone	Pacific/Tahiti	 -9:58:16 -	LMT	1912 Oct	# Papeete
+			-10:00	-	TAHT	# Tahiti Time
+# Clipperton (near North America) is administered from French Polynesia;
+# it is uninhabited.
+
+# Guam
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone	Pacific/Guam	-14:21:00 -	LMT	1844 Dec 31
+			 9:39:00 -	LMT	1901		# Agana
+			10:00	-	GST	2000 Dec 23	# Guam
+			10:00	-	ChST	# Chamorro Standard Time
+
+# Kiribati
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone Pacific/Tarawa	 11:32:04 -	LMT	1901		# Bairiki
+			 12:00	-	GILT		 # Gilbert Is Time
+Zone Pacific/Enderbury	-11:24:20 -	LMT	1901
+			-12:00	-	PHOT	1979 Oct # Phoenix Is Time
+			-11:00	-	PHOT	1995
+			 13:00	-	PHOT
+Zone Pacific/Kiritimati	-10:29:20 -	LMT	1901
+			-10:40	-	LINT	1979 Oct # Line Is Time
+			-10:00	-	LINT	1995
+			 14:00	-	LINT
+
+# N Mariana Is
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone Pacific/Saipan	-14:17:00 -	LMT	1844 Dec 31
+			 9:43:00 -	LMT	1901
+			 9:00	-	MPT	1969 Oct # N Mariana Is Time
+			10:00	-	MPT	2000 Dec 23
+			10:00	-	ChST	# Chamorro Standard Time
+
+# Marshall Is
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone Pacific/Majuro	11:24:48 -	LMT	1901
+			11:00	-	MHT	1969 Oct # Marshall Islands Time
+			12:00	-	MHT
+Zone Pacific/Kwajalein	11:09:20 -	LMT	1901
+			11:00	-	MHT	1969 Oct
+			-12:00	-	KWAT	1993 Aug 20	# Kwajalein Time
+			12:00	-	MHT
+
+# Micronesia
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone Pacific/Truk	10:07:08 -	LMT	1901
+			10:00	-	TRUT			# Truk Time
+Zone Pacific/Ponape	10:32:52 -	LMT	1901		# Kolonia
+			11:00	-	PONT			# Ponape Time
+Zone Pacific/Kosrae	10:51:56 -	LMT	1901
+			11:00	-	KOST	1969 Oct	# Kosrae Time
+			12:00	-	KOST	1999
+			11:00	-	KOST
+
+# Nauru
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone	Pacific/Nauru	11:07:40 -	LMT	1921 Jan 15	# Uaobe
+			11:30	-	NRT	1942 Mar 15	# Nauru Time
+			9:00	-	JST	1944 Aug 15
+			11:30	-	NRT	1979 May
+			12:00	-	NRT
+
+# New Caledonia
+# Rule	NAME	FROM	TO	TYPE	IN	ON	AT	SAVE	LETTER/S
+Rule	NC	1977	1978	-	Dec	Sun>=1	0:00	1:00	S
+Rule	NC	1978	1979	-	Feb	27	0:00	0	-
+Rule	NC	1996	only	-	Dec	 1	2:00s	1:00	S
+# Shanks & Pottenger say the following was at 2:00; go with IATA.
+Rule	NC	1997	only	-	Mar	 2	2:00s	0	-
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone	Pacific/Noumea	11:05:48 -	LMT	1912 Jan 13
+			11:00	NC	NC%sT
+
+
+###############################################################################
+
+# New Zealand
+
+# Rule	NAME	FROM	TO	TYPE	IN	ON	AT	SAVE	LETTER/S
+Rule	NZ	1927	only	-	Nov	 6	2:00	1:00	S
+Rule	NZ	1928	only	-	Mar	 4	2:00	0	M
+Rule	NZ	1928	1933	-	Oct	Sun>=8	2:00	0:30	S
+Rule	NZ	1929	1933	-	Mar	Sun>=15	2:00	0	M
+Rule	NZ	1934	1940	-	Apr	lastSun	2:00	0	M
+Rule	NZ	1934	1940	-	Sep	lastSun	2:00	0:30	S
+Rule	NZ	1946	only	-	Jan	 1	0:00	0	S
+# Since 1957 Chatham has been 45 minutes ahead of NZ, but there's no
+# convenient notation for this so we must duplicate the Rule lines.
+Rule	NZ	1974	only	-	Nov	Sun>=1	2:00s	1:00	D
+Rule	Chatham	1974	only	-	Nov	Sun>=1	2:45s	1:00	D
+Rule	NZ	1975	only	-	Feb	lastSun	2:00s	0	S
+Rule	Chatham	1975	only	-	Feb	lastSun	2:45s	0	S
+Rule	NZ	1975	1988	-	Oct	lastSun	2:00s	1:00	D
+Rule	Chatham	1975	1988	-	Oct	lastSun	2:45s	1:00	D
+Rule	NZ	1976	1989	-	Mar	Sun>=1	2:00s	0	S
+Rule	Chatham	1976	1989	-	Mar	Sun>=1	2:45s	0	S
+Rule	NZ	1989	only	-	Oct	Sun>=8	2:00s	1:00	D
+Rule	Chatham	1989	only	-	Oct	Sun>=8	2:45s	1:00	D
+Rule	NZ	1990	max	-	Oct	Sun>=1	2:00s	1:00	D
+Rule	Chatham	1990	max	-	Oct	Sun>=1	2:45s	1:00	D
+Rule	NZ	1990	max	-	Mar	Sun>=15	2:00s	0	S
+Rule	Chatham	1990	max	-	Mar	Sun>=15	2:45s	0	S
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone Pacific/Auckland	11:39:04 -	LMT	1868 Nov  2
+			11:30	NZ	NZ%sT	1946 Jan  1
+			12:00	NZ	NZ%sT
+Zone Pacific/Chatham	12:13:48 -	LMT	1957 Jan  1
+			12:45	Chatham	CHA%sT
+
+
+# Auckland Is
+# uninhabited; Maori and Moriori, colonial settlers, pastoralists, sealers,
+# and scientific personnel have wintered
+
+# Campbell I
+# minor whaling stations operated 1909/1914
+# scientific station operated 1941/1995;
+# previously whalers, sealers, pastoralists, and scientific personnel wintered
+# was probably like Pacific/Auckland
+
+###############################################################################
+
+
+# Niue
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone	Pacific/Niue	-11:19:40 -	LMT	1901		# Alofi
+			-11:20	-	NUT	1951	# Niue Time
+			-11:30	-	NUT	1978 Oct 1
+			-11:00	-	NUT
+
+# Norfolk
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone	Pacific/Norfolk	11:11:52 -	LMT	1901		# Kingston
+			11:12	-	NMT	1951	# Norfolk Mean Time
+			11:30	-	NFT		# Norfolk Time
+
+# Palau (Belau)
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone Pacific/Palau	8:57:56 -	LMT	1901		# Koror
+			9:00	-	PWT	# Palau Time
+
+# Papua New Guinea
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone Pacific/Port_Moresby 9:48:40 -	LMT	1880
+			9:48:32	-	PMMT	1895	# Port Moresby Mean Time
+			10:00	-	PGT		# Papua New Guinea Time
+
+# Pitcairn
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone Pacific/Pitcairn	-8:40:20 -	LMT	1901		# Adamstown
+			-8:30	-	PNT	1998 Apr 27 00:00
+			-8:00	-	PST	# Pitcairn Standard Time
+
+# American Samoa
+Zone Pacific/Pago_Pago	 12:37:12 -	LMT	1879 Jul  5
+			-11:22:48 -	LMT	1911
+			-11:30	-	SAMT	1950		# Samoa Time
+			-11:00	-	NST	1967 Apr	# N=Nome
+			-11:00	-	BST	1983 Nov 30	# B=Bering
+			-11:00	-	SST			# S=Samoa
+
+# Samoa
+Zone Pacific/Apia	 12:33:04 -	LMT	1879 Jul  5
+			-11:26:56 -	LMT	1911
+			-11:30	-	SAMT	1950		# Samoa Time
+			-11:00	-	WST			# Samoa Time
+
+# Solomon Is
+# excludes Bougainville, for which see Papua New Guinea
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone Pacific/Guadalcanal 10:39:48 -	LMT	1912 Oct	# Honiara
+			11:00	-	SBT	# Solomon Is Time
+
+# Tokelau Is
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone	Pacific/Fakaofo	-11:24:56 -	LMT	1901
+			-10:00	-	TKT	# Tokelau Time
+
+# Tonga
+# Rule	NAME	FROM	TO	TYPE	IN	ON	AT	SAVE	LETTER/S
+Rule	Tonga	1999	only	-	Oct	 7	2:00s	1:00	S
+Rule	Tonga	2000	only	-	Mar	19	2:00s	0	-
+Rule	Tonga	2000	2001	-	Nov	Sun>=1	2:00	1:00	S
+Rule	Tonga	2001	2002	-	Jan	lastSun	2:00	0	-
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone Pacific/Tongatapu	12:19:20 -	LMT	1901
+			12:20	-	TOT	1941 # Tonga Time
+			13:00	-	TOT	1999
+			13:00	Tonga	TO%sT
+
+# Tuvalu
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone Pacific/Funafuti	11:56:52 -	LMT	1901
+			12:00	-	TVT	# Tuvalu Time
+
+
+# US minor outlying islands
+
+# Howland, Baker
+# uninhabited since World War II
+# no information; was probably like Pacific/Pago_Pago
+
+# Jarvis
+# uninhabited since 1958
+# no information; was probably like Pacific/Kiritimati
+
+# Johnston
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone Pacific/Johnston	-10:00	-	HST
+
+# Kingman
+# uninhabited
+
+# Midway
+#
+# From Mark Brader (2005-01-23):
+# [Fallacies and Fantasies of Air Transport History, by R.E.G. Davies,
+# published 1994 by Paladwr Press, McLean, VA, USA; ISBN 0-9626483-5-3]
+# reproduced a Pan American Airways timeables from 1936, for their weekly
+# "Orient Express" flights between San Francisco and Manila, and connecting
+# flights to Chicago and the US East Coast.  As it uses some time zone
+# designations that I've never seen before:....
+# Fri. 6:30A Lv. HONOLOLU (Pearl Harbor), H.I.   H.L.T. Ar. 5:30P Sun.
+#  "   3:00P Ar. MIDWAY ISLAND . . . . . . . . . M.L.T. Lv. 6:00A  "
+#
+Zone Pacific/Midway	-11:49:28 -	LMT	1901
+			-11:00	-	NST	1956 Jun  3
+			-11:00	1:00	NDT	1956 Sep  2
+			-11:00	-	NST	1967 Apr	# N=Nome
+			-11:00	-	BST	1983 Nov 30	# B=Bering
+			-11:00	-	SST			# S=Samoa
+
+# Palmyra
+# uninhabited since World War II; was probably like Pacific/Kiritimati
+
+# Wake
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone	Pacific/Wake	11:06:28 -	LMT	1901
+			12:00	-	WAKT	# Wake Time
+
+
+# Vanuatu
+# Rule	NAME	FROM	TO	TYPE	IN	ON	AT	SAVE	LETTER/S
+Rule	Vanuatu	1983	only	-	Sep	25	0:00	1:00	S
+Rule	Vanuatu	1984	1991	-	Mar	Sun>=23	0:00	0	-
+Rule	Vanuatu	1984	only	-	Oct	23	0:00	1:00	S
+Rule	Vanuatu	1985	1991	-	Sep	Sun>=23	0:00	1:00	S
+Rule	Vanuatu	1992	1993	-	Jan	Sun>=23	0:00	0	-
+Rule	Vanuatu	1992	only	-	Oct	Sun>=23	0:00	1:00	S
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone	Pacific/Efate	11:13:16 -	LMT	1912 Jan 13		# Vila
+			11:00	Vanuatu	VU%sT	# Vanuatu Time
+
+# Wallis and Futuna
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone	Pacific/Wallis	12:15:20 -	LMT	1901
+			12:00	-	WFT	# Wallis & Futuna Time
+
+###############################################################################
+
+# NOTES
+
+# This data is by no means authoritative; if you think you know better,
+# go ahead and edit the file (and please send any changes to
+# tz@elsie.nci.nih.gov for general use in the future).
+
+# From Paul Eggert (2006-03-22):
+# A good source for time zone historical data outside the U.S. is
+# Thomas G. Shanks and Rique Pottenger, The International Atlas (6th edition),
+# San Diego: ACS Publications, Inc. (2003).
+#
+# Gwillim Law writes that a good source
+# for recent time zone data is the International Air Transport
+# Association's Standard Schedules Information Manual (IATA SSIM),
+# published semiannually.  Law sent in several helpful summaries
+# of the IATA's data after 1990.
+#
+# Except where otherwise noted, Shanks & Pottenger is the source for
+# entries through 1990, and IATA SSIM is the source for entries afterwards.
+#
+# Another source occasionally used is Edward W. Whitman, World Time Differences,
+# Whitman Publishing Co, 2 Niagara Av, Ealing, London (undated), which
+# I found in the UCLA library.
+#
+# A reliable and entertaining source about time zones is
+# Derek Howse, Greenwich time and longitude, Philip Wilson Publishers (1997).
+#
+# I invented the abbreviations marked `*' in the following table;
+# the rest are from earlier versions of this file, or from other sources.
+# Corrections are welcome!
+#		std dst
+#		LMT	Local Mean Time
+#	  8:00	WST WST	Western Australia
+#	  8:45	CWST CWST Central Western Australia*
+#	  9:00	JST	Japan
+#	  9:30	CST CST	Central Australia
+#	 10:00	EST EST	Eastern Australia
+#	 10:00	ChST	Chamorro
+#	 10:30	LHST LHST Lord Howe*
+#	 11:30	NZMT NZST New Zealand through 1945
+#	 12:00	NZST NZDT New Zealand 1946-present
+#	 12:45	CHAST CHADT Chatham*
+#	-11:00	SST	Samoa
+#	-10:00	HST	Hawaii
+#	- 8:00	PST	Pitcairn*
+#
+# See the `northamerica' file for Hawaii.
+# See the `southamerica' file for Easter I and the Galapagos Is.
+
+###############################################################################
+
+# Australia
+
+# From Paul Eggert (2005-12-08):
+# <a href="http://www.bom.gov.au/climate/averages/tables/dst_times.shtml">
+# Implementation Dates of Daylight Saving Time within Australia
+# </a> summarizes daylight saving issues in Australia.
+
+# From Arthur David Olson (2005-12-12):
+# <a href="http://www.lawlink.nsw.gov.au/lawlink/Corporate/ll_agdinfo.nsf/pages/community_relations_daylight_saving">
+# Lawlink NSW:Daylight Saving in New South Wales
+# </a> covers New South Wales in particular.
+
+# From John Mackin (1991-03-06):
+# We in Australia have _never_ referred to DST as `daylight' time.
+# It is called `summer' time.  Now by a happy coincidence, `summer'
+# and `standard' happen to start with the same letter; hence, the
+# abbreviation does _not_ change...
+# The legislation does not actually define abbreviations, at least
+# in this State, but the abbreviation is just commonly taken to be the
+# initials of the phrase, and the legislation here uniformly uses
+# the phrase `summer time' and does not use the phrase `daylight
+# time'.
+# Announcers on the Commonwealth radio network, the ABC (for Australian
+# Broadcasting Commission), use the phrases `Eastern Standard Time'
+# or `Eastern Summer Time'.  (Note, though, that as I say in the
+# current australasia file, there is really no such thing.)  Announcers
+# on its overseas service, Radio Australia, use the same phrases
+# prefixed by the word `Australian' when referring to local times;
+# time announcements on that service, naturally enough, are made in UTC.
+
+# From Arthur David Olson (1992-03-08):
+# Given the above, what's chosen for year-round use is:
+#	CST	for any place operating at a GMTOFF of 9:30
+#	WST	for any place operating at a GMTOFF of 8:00
+#	EST	for any place operating at a GMTOFF of 10:00
+
+# From Chuck Soper (2006-06-01):
+# I recently found this Australian government web page on time zones:
+# <http://www.australia.gov.au/about-australia-13time>
+# And this government web page lists time zone names and abbreviations:
+# <http://www.bom.gov.au/climate/averages/tables/daysavtm.shtml>
+
+# From Paul Eggert (2001-04-05), summarizing a long discussion about "EST"
+# versus "AEST" etc.:
+#
+# I see the following points of dispute:
+#
+# * How important are unique time zone abbreviations?
+#
+#   Here I tend to agree with the point (most recently made by Chris
+#   Newman) that unique abbreviations should not be essential for proper
+#   operation of software.  We have other instances of ambiguity
+#   (e.g. "IST" denoting both "Israel Standard Time" and "Indian
+#   Standard Time"), and they are not likely to go away any time soon.
+#   In the old days, some software mistakenly relied on unique
+#   abbreviations, but this is becoming less true with time, and I don't
+#   think it's that important to cater to such software these days.
+#
+#   On the other hand, there is another motivation for unambiguous
+#   abbreviations: it cuts down on human confusion.  This is
+#   particularly true for Australia, where "EST" can mean one thing for
+#   time T and a different thing for time T plus 1 second.
+#
+# * Does the relevant legislation indicate which abbreviations should be used?
+#
+#   Here I tend to think that things are a mess, just as they are in
+#   many other countries.  We Americans are currently disagreeing about
+#   which abbreviation to use for the newly legislated Chamorro Standard
+#   Time, for example.
+#
+#   Personally, I would prefer to use common practice; I would like to
+#   refer to legislation only for examples of common practice, or as a
+#   tiebreaker.
+#
+# * Do Australians more often use "Eastern Daylight Time" or "Eastern
+#   Summer Time"?  Do they typically prefix the time zone names with
+#   the word "Australian"?
+#
+#   My own impression is that both "Daylight Time" and "Summer Time" are
+#   common and are widely understood, but that "Summer Time" is more
+#   popular; and that the leading "A" is also common but is omitted more
+#   often than not.  I just used AltaVista advanced search and got the
+#   following count of page hits:
+#
+#     1,103 "Eastern Summer Time" AND domain:au
+#       971 "Australian Eastern Summer Time" AND domain:au
+#       613 "Eastern Daylight Time" AND domain:au
+#       127 "Australian Eastern Daylight Time" AND domain:au
+#
+#   Here "Summer" seems quite a bit more popular than "Daylight",
+#   particularly when we know the time zone is Australian and not US,
+#   say.  The "Australian" prefix seems to be popular for Eastern Summer
+#   Time, but unpopular for Eastern Daylight Time.
+#
+#   For abbreviations, tools like AltaVista are less useful because of
+#   ambiguity.  Many hits are not really time zones, unfortunately, and
+#   many hits denote US time zones and not Australian ones.  But here
+#   are the hit counts anyway:
+#
+#     161,304 "EST" and domain:au
+#      25,156 "EDT" and domain:au
+#      18,263 "AEST" and domain:au
+#      10,416 "AEDT" and domain:au
+#
+#      14,538 "CST" and domain:au
+#       5,728 "CDT" and domain:au
+#         176 "ACST" and domain:au
+#          29 "ACDT" and domain:au
+#
+#       7,539 "WST" and domain:au
+#          68 "AWST" and domain:au
+#
+#   This data suggest that Australians tend to omit the "A" prefix in
+#   practice.  The situation for "ST" versus "DT" is less clear, given
+#   the ambiguities involved.
+#
+# * How do Australians feel about the abbreviations in the tz database?
+#
+#   If you just count Australians on this list, I count 2 in favor and 3
+#   against.  One of the "against" votes (David Keegel) counseled delay,
+#   saying that both AEST/AEDT and EST/EST are widely used and
+#   understood in Australia.
+
+# From Paul Eggert (1995-12-19):
+# Shanks & Pottenger report 2:00 for all autumn changes in Australia and NZ.
+# Mark Prior writes that his newspaper
+# reports that NSW's fall 1995 change will occur at 2:00,
+# but Robert Elz says it's been 3:00 in Victoria since 1970
+# and perhaps the newspaper's `2:00' is referring to standard time.
+# For now we'll continue to assume 2:00s for changes since 1960.
+
+# From Eric Ulevik (1998-01-05):
+#
+# Here are some URLs to Australian time legislation. These URLs are stable,
+# and should probably be included in the data file. There are probably more
+# relevant entries in this database.
+#
+# NSW (including LHI and Broken Hill):
+# <a href="http://www.austlii.edu.au/au/legis/nsw/consol_act/sta1987137/index.html">
+# Standard Time Act 1987 (updated 1995-04-04)
+# </a>
+# ACT
+# <a href="http://www.austlii.edu.au/au/legis/act/consol_act/stasta1972279/index.html">
+# Standard Time and Summer Time Act 1972
+# </a>
+# SA
+# <a href="http://www.austlii.edu.au/au/legis/sa/consol_act/sta1898137/index.html">
+# Standard Time Act, 1898
+# </a>
+
+# From David Grosz (2005-06-13):
+# It was announced last week that Daylight Saving would be extended by
+# one week next year to allow for the 2006 Commonwealth Games.
+# Daylight Saving is now to end for next year only on the first Sunday
+# in April instead of the last Sunday in March.
+#
+# From Gwillim Law (2005-06-14):
+# I did some Googling and found that all of those states (and territory) plan
+# to extend DST together in 2006.
+# ACT: http://www.cmd.act.gov.au/mediareleases/fileread.cfm?file=86.txt
+# New South Wales: http://www.thecouriermail.news.com.au/common/story_page/0,5936,15538869%255E1702,00.html
+# South Australia: http://www.news.com.au/story/0,10117,15555031-1246,00.html
+# Tasmania: http://www.media.tas.gov.au/release.php?id=14772
+# Victoria: I wasn't able to find anything separate, but the other articles
+# allude to it.
+# But not Queensland
+# http://www.news.com.au/story/0,10117,15564030-1248,00.html.
+
+# Northern Territory
+
+# From George Shepherd via Simon Woodhead via Robert Elz (1991-03-06):
+# # The NORTHERN TERRITORY..  [ Courtesy N.T. Dept of the Chief Minister ]
+# #					[ Nov 1990 ]
+# #	N.T. have never utilised any DST due to sub-tropical/tropical location.
+# ...
+# Zone        Australia/North         9:30    -       CST
+
+# From Bradley White (1991-03-04):
+# A recent excerpt from an Australian newspaper...
+# the Northern Territory do[es] not have daylight saving.
+
+# Western Australia
+
+# From George Shepherd via Simon Woodhead via Robert Elz (1991-03-06):
+# #  The state of WESTERN AUSTRALIA..  [ Courtesy W.A. dept Premier+Cabinet ]
+# #						[ Nov 1990 ]
+# #	W.A. suffers from a great deal of public and political opposition to
+# #	DST in principle. A bill is brought before parliament in most years, but
+# #	usually defeated either in the upper house, or in party caucus
+# #	before reaching parliament.
+# ...
+# Zone	Australia/West		8:00	AW	%sST
+# ...
+# Rule	AW	1974	only	-	Oct	lastSun	2:00	1:00	D
+# Rule	AW	1975	only	-	Mar	Sun>=1	3:00	0	W
+# Rule	AW	1983	only	-	Oct	lastSun	2:00	1:00	D
+# Rule	AW	1984	only	-	Mar	Sun>=1	3:00	0	W
+
+# From Bradley White (1991-03-04):
+# A recent excerpt from an Australian newspaper...
+# Western Australia...do[es] not have daylight saving.
+
+# From John D. Newman via Bradley White (1991-11-02):
+# Western Australia is still on "winter time". Some DH in Sydney
+# rang me at home a few days ago at 6.00am. (He had just arrived at
+# work at 9.00am.)
+# W.A. is switching to Summer Time on Nov 17th just to confuse
+# everybody again.
+
+# From Arthur David Olson (1992-03-08):
+# The 1992 ending date used in the rules is a best guess;
+# it matches what was used in the past.
+
+# <a href="http://www.bom.gov.au/faq/faqgen.htm">
+# The Australian Bureau of Meteorology FAQ
+# </a> (1999-09-27) writes that Giles Meteorological Station uses
+# South Australian time even though it's located in Western Australia.
+
+# Queensland
+# From George Shepherd via Simon Woodhead via Robert Elz (1991-03-06):
+# #   The state of QUEENSLAND.. [ Courtesy Qld. Dept Premier Econ&Trade Devel ]
+# #						[ Dec 1990 ]
+# ...
+# Zone	Australia/Queensland	10:00	AQ	%sST
+# ...
+# Rule	AQ	1971	only	-	Oct	lastSun	2:00	1:00	D
+# Rule	AQ	1972	only	-	Feb	lastSun	3:00	0	E
+# Rule	AQ	1989	max	-	Oct	lastSun	2:00	1:00	D
+# Rule	AQ	1990	max	-	Mar	Sun>=1	3:00	0	E
+
+# From Bradley White (1989-12-24):
+# "Australia/Queensland" now observes daylight time (i.e. from
+# October 1989).
+
+# From Bradley White (1991-03-04):
+# A recent excerpt from an Australian newspaper...
+# ...Queensland...[has] agreed to end daylight saving
+# at 3am tomorrow (March 3)...
+
+# From John Mackin (1991-03-06):
+# I can certainly confirm for my part that Daylight Saving in NSW did in fact
+# end on Sunday, 3 March.  I don't know at what hour, though.  (It surprised
+# me.)
+
+# From Bradley White (1992-03-08):
+# ...there was recently a referendum in Queensland which resulted
+# in the experimental daylight saving system being abandoned. So, ...
+# ...
+# Rule	QLD	1989	1991	-	Oct	lastSun	2:00	1:00	D
+# Rule	QLD	1990	1992	-	Mar	Sun>=1	3:00	0	S
+# ...
+
+# From Arthur David Olson (1992-03-08):
+# The chosen rules the union of the 1971/1972 change and the 1989-1992 changes.
+
+# From Christopher Hunt (2006-11-21), after an advance warning
+# from Jesper Norgaard Welen (2006-11-01):
+# WA are trialing DST for three years.
+# <http://www.parliament.wa.gov.au/parliament/bills.nsf/9A1B183144403DA54825721200088DF1/$File/Bill175-1B.pdf>
+
+# From Rives McDow (2002-04-09):
+# The most interesting region I have found consists of three towns on the
+# southern coast....  South Australia observes daylight saving time; Western
+# Australia does not.  The two states are one and a half hours apart.  The
+# residents decided to forget about this nonsense of changing the clock so
+# much and set the local time 20 hours and 45 minutes from the
+# international date line, or right in the middle of the time of South
+# Australia and Western Australia....
+#
+# From Paul Eggert (2002-04-09):
+# This is confirmed by the section entitled
+# "What's the deal with time zones???" in
+# <http://www.earthsci.unimelb.edu.au/~awatkins/null.html>.
+#
+# From Alex Livingston (2006-12-07):
+# ... it was just on four years ago that I drove along the Eyre Highway,
+# which passes through eastern Western Australia close to the southern
+# coast of the continent.
+#
+# I paid particular attention to the time kept there. There can be no
+# dispute that UTC+08:45 was considered "the time" from the border
+# village just inside the border with South Australia to as far west
+# as just east of Caiguna. There can also be no dispute that Eucla is
+# the largest population centre in this zone....
+#
+# Now that Western Australia is observing daylight saving, the
+# question arose whether this part of the state would follow suit. I
+# just called the border village and confirmed that indeed they have,
+# meaning that they are now observing UTC+09:45.
+#
+# (2006-12-09):
+# I personally doubt that either experimentation with daylight saving
+# in WA or its introduction in SA had anything to do with the genesis
+# of this time zone.  My hunch is that it's been around since well
+# before 1975.  I remember seeing it noted on road maps decades ago.
+
+# From Paul Eggert (2006-12-15):
+# For lack of better info, assume the tradition dates back to the
+# introduction of standard time in 1895.
+
+
+# South Australia, Tasmania, Victoria
+
+# From Arthur David Olson (1992-03-08):
+# The rules from version 7.1 follow.
+# There are lots of differences between these rules and
+# the Shepherd et al. rules.  Since the Shepherd et al. rules
+# and Bradley White's newspaper article are in agreement on
+# current DST ending dates, no worries.
+#
+# Rule	Oz	1971	1985	-	Oct	lastSun	2:00	1:00	-
+# Rule	Oz	1986	max	-	Oct	Sun>=18	2:00	1:00	-
+# Rule	Oz	1972	only	-	Feb	27	3:00	0	-
+# Rule	Oz	1973	1986	-	Mar	Sun>=1	3:00	0	-
+# Rule	Oz	1987	max	-	Mar	Sun>=15	3:00	0	-
+# Zone	Australia/Tasmania	10:00	Oz	EST
+# Zone	Australia/South		9:30	Oz	CST
+# Zone	Australia/Victoria	10:00	Oz	EST	1985 Oct lastSun 2:00
+#				10:00	1:00	EST	1986 Mar Sun>=15 3:00
+#				10:00	Oz	EST
+
+# From Robert Elz (1991-03-06):
+# I believe that the current start date for DST is "lastSun" in Oct...
+# that changed Oct 89.  That is, we're back to the
+# original rule, and that rule currently applies in all the states
+# that have dst, incl Qld.  (Certainly it was true in Vic).
+# The file I'm including says that happened in 1988, I think
+# that's incorrect, but I'm not 100% certain.
+
+# South Australia
+
+# From Bradley White (1991-03-04):
+# A recent excerpt from an Australian newspaper...
+# ...South Australia...[has] agreed to end daylight saving
+# at 3am tomorrow (March 3)...
+
+# From George Shepherd via Simon Woodhead via Robert Elz (1991-03-06):
+# #   The state of SOUTH AUSTRALIA....[ Courtesy of S.A. Dept of Labour ]
+# #						[ Nov 1990 ]
+# ...
+# Zone	Australia/South		9:30	AS	%sST
+# ...
+# Rule	 AS	1971	max	-	Oct	lastSun	2:00	1:00	D
+# Rule	 AS	1972	1985	-	Mar	Sun>=1	3:00	0	C
+# Rule	 AS	1986	1990	-	Mar	Sun>=15	3:00	0	C
+# Rule	 AS	1991	max	-	Mar	Sun>=1	3:00	0	C
+
+# From Bradley White (1992-03-11):
+# Recent correspondence with a friend in Adelaide
+# contained the following exchange:  "Due to the Adelaide Festival,
+# South Australia delays setting back our clocks for a few weeks."
+
+# From Robert Elz (1992-03-13):
+# I heard that apparently (or at least, it appears that)
+# South Aus will have an extra 3 weeks daylight saving every even
+# numbered year (from 1990).  That's when the Adelaide Festival
+# is on...
+
+# From Robert Elz (1992-03-16, 00:57:07 +1000):
+# DST didn't end in Adelaide today (yesterday)....
+# But whether it's "4th Sunday" or "2nd last Sunday" I have no idea whatever...
+# (it's just as likely to be "the Sunday we pick for this year"...).
+
+# From Bradley White (1994-04-11):
+# If Sun, 15 March, 1992 was at +1030 as kre asserts, but yet Sun, 20 March,
+# 1994 was at +0930 as John Connolly's customer seems to assert, then I can
+# only conclude that the actual rule is more complicated....
+
+# From John Warburton (1994-10-07):
+# The new Daylight Savings dates for South Australia ...
+# was gazetted in the Government Hansard on Sep 26 1994....
+# start on last Sunday in October and end in last sunday in March.
+
+# Tasmania
+
+# The rules for 1967 through 1991 were reported by George Shepherd
+# via Simon Woodhead via Robert Elz (1991-03-06):
+# #  The state of TASMANIA.. [Courtesy Tasmanian Dept of Premier + Cabinet ]
+# #					[ Nov 1990 ]
+
+# From Bill Hart via Guy Harris (1991-10-10):
+# Oh yes, the new daylight savings rules are uniquely tasmanian, we have
+# 6 weeks a year now when we are out of sync with the rest of Australia
+# (but nothing new about that).
+
+# From Alex Livingston (1999-10-04):
+# I heard on the ABC (Australian Broadcasting Corporation) radio news on the
+# (long) weekend that Tasmania, which usually goes its own way in this regard,
+# has decided to join with most of NSW, the ACT, and most of Victoria
+# (Australia) and start daylight saving on the last Sunday in August in 2000
+# instead of the first Sunday in October.
+
+# Sim Alam (2000-07-03) reported a legal citation for the 2000/2001 rules:
+# http://www.thelaw.tas.gov.au/fragview/42++1968+GS3A@EN+2000070300
+
+# Victoria
+
+# The rules for 1971 through 1991 were reported by George Shepherd
+# via Simon Woodhead via Robert Elz (1991-03-06):
+# #   The state of VICTORIA.. [ Courtesy of Vic. Dept of Premier + Cabinet ]
+# #						[ Nov 1990 ]
+
+# From Scott Harrington (2001-08-29):
+# On KQED's "City Arts and Lectures" program last night I heard an
+# interesting story about daylight savings time.  Dr. John Heilbron was
+# discussing his book "The Sun in the Church: Cathedrals as Solar
+# Observatories"[1], and in particular the Shrine of Remembrance[2] located
+# in Melbourne, Australia.
+#
+# Apparently the shrine's main purpose is a beam of sunlight which
+# illuminates a special spot on the floor at the 11th hour of the 11th day
+# of the 11th month (Remembrance Day) every year in memory of Australia's
+# fallen WWI soldiers.  And if you go there on Nov. 11, at 11am local time,
+# you will indeed see the sunbeam illuminate the special spot at the
+# expected time.
+#
+# However, that is only because of some special mirror contraption that had
+# to be employed, since due to daylight savings time, the true solar time of
+# the remembrance moment occurs one hour later (or earlier?).  Perhaps
+# someone with more information on this jury-rig can tell us more.
+#
+# [1] http://www.hup.harvard.edu/catalog/HEISUN.html
+# [2] http://www.shrine.org.au
+
+# New South Wales
+
+# From Arthur David Olson:
+# New South Wales and subjurisdictions have their own ideas of a fun time.
+# Based on law library research by John Mackin,
+# who notes:
+#	In Australia, time is not legislated federally, but rather by the
+#	individual states.  Thus, while such terms as ``Eastern Standard Time''
+#	[I mean, of course, Australian EST, not any other kind] are in common
+#	use, _they have NO REAL MEANING_, as they are not defined in the
+#	legislation.  This is very important to understand.
+#	I have researched New South Wales time only...
+
+# From Eric Ulevik (1999-05-26):
+# DST will start in NSW on the last Sunday of August, rather than the usual
+# October in 2000.  [See: Matthew Moore,
+# <a href="http://www.smh.com.au/news/9905/26/pageone/pageone4.html">
+# Two months more daylight saving
+# </a>
+# Sydney Morning Herald (1999-05-26).]
+
+# From Paul Eggert (1999-09-27):
+# See the following official NSW source:
+# <a href="http://dir.gis.nsw.gov.au/cgi-bin/genobject/document/other/daylightsaving/tigGmZ">
+# Daylight Saving in New South Wales.
+# </a>
+#
+# Narrabri Shire (NSW) council has announced it will ignore the extension of
+# daylight saving next year.  See:
+# <a href="http://abc.net.au/news/regionals/neweng/monthly/regeng-22jul1999-1.htm">
+# Narrabri Council to ignore daylight saving
+# </a> (1999-07-22).  For now, we'll wait to see if this really happens.
+#
+# Victoria will following NSW.  See:
+# <a href="http://abc.net.au/local/news/olympics/1999/07/item19990728112314_1.htm">
+# Vic to extend daylight saving
+# </a> (1999-07-28).
+#
+# However, South Australia rejected the DST request.  See:
+# <a href="http://abc.net.au/news/olympics/1999/07/item19990719151754_1.htm">
+# South Australia rejects Olympics daylight savings request
+# </a> (1999-07-19).
+#
+# Queensland also will not observe DST for the Olympics.  See:
+# <a href="http://abc.net.au/news/olympics/1999/06/item19990601114608_1.htm">
+# Qld says no to daylight savings for Olympics
+# </a> (1999-06-01), which quotes Queensland Premier Peter Beattie as saying
+# ``Look you've got to remember in my family when this came up last time
+# I voted for it, my wife voted against it and she said to me it's all very
+# well for you, you don't have to worry about getting the children out of
+# bed, getting them to school, getting them to sleep at night.
+# I've been through all this argument domestically...my wife rules.''
+#
+# Broken Hill will stick with South Australian time in 2000.  See:
+# <a href="http://abc.net.au/news/regionals/brokenh/monthly/regbrok-21jul1999-6.htm">
+# Broken Hill to be behind the times
+# </a> (1999-07-21).
+
+# IATA SSIM (1998-09) says that the spring 2000 change for Australian
+# Capital Territory, New South Wales except Lord Howe Island and Broken
+# Hill, and Victoria will be August 27, presumably due to the Sydney Olympics.
+
+# From Eric Ulevik, referring to Sydney's Sun Herald (2000-08-13), page 29:
+# The Queensland Premier Peter Beattie is encouraging northern NSW
+# towns to use Queensland time.
+
+# Yancowinna
+
+# From John Mackin (1989-01-04):
+# `Broken Hill' means the County of Yancowinna.
+
+# From George Shepherd via Simon Woodhead via Robert Elz (1991-03-06):
+# # YANCOWINNA..  [ Confirmation courtesy of Broken Hill Postmaster ]
+# #					[ Dec 1990 ]
+# ...
+# # Yancowinna uses Central Standard Time, despite [its] location on the
+# # New South Wales side of the S.A. border. Most business and social dealings
+# # are with CST zones, therefore CST is legislated by local government
+# # although the switch to Summer Time occurs in line with N.S.W. There have
+# # been years when this did not apply, but the historical data is not
+# # presently available.
+# Zone	Australia/Yancowinna	9:30	 AY	%sST
+# ...
+# Rule	 AY	1971	1985	-	Oct	lastSun	2:00	1:00	D
+# Rule	 AY	1972	only	-	Feb	lastSun	3:00	0	C
+# [followed by other Rules]
+
+# Lord Howe Island
+
+# From George Shepherd via Simon Woodhead via Robert Elz (1991-03-06):
+# LHI...		[ Courtesy of Pauline Van Winsen ]
+#					[ Dec 1990 ]
+# Lord Howe Island is located off the New South Wales coast, and is half an
+# hour ahead of NSW time.
+
+# From James Lonergan, Secretary, Lord Howe Island Board (2000-01-27):
+# Lord Howe Island summer time in 2000/2001 will commence on the same
+# date as the rest of NSW (i.e. 2000-08-27).  For your information the
+# Lord Howe Island Board (controlling authority for the Island) is
+# seeking the community's views on various options for summer time
+# arrangements on the Island, e.g. advance clocks by 1 full hour
+# instead of only 30 minutes.  Dependant on the wishes of residents
+# the Board may approach the NSW government to change the existing
+# arrangements.  The starting date for summer time on the Island will
+# however always coincide with the rest of NSW.
+
+# From James Lonergan, Secretary, Lord Howe Island Board (2000-10-25):
+# Lord Howe Island advances clocks by 30 minutes during DST in NSW and retards
+# clocks by 30 minutes when DST finishes. Since DST was most recently
+# introduced in NSW, the "changeover" time on the Island has been 02:00 as
+# shown on clocks on LHI. I guess this means that for 30 minutes at the start
+# of DST, LHI is actually 1 hour ahead of the rest of NSW.
+
+# From Paul Eggert (2006-03-22):
+# For Lord Howe dates we use Shanks & Pottenger through 1989, and
+# Lonergan thereafter.  For times we use Lonergan.
+
+###############################################################################
+
+# New Zealand
+
+# From Mark Davies (1990-10-03):
+# the 1989/90 year was a trial of an extended "daylight saving" period.
+# This trial was deemed successful and the extended period adopted for
+# subsequent years (with the addition of a further week at the start).
+# source -- phone call to Ministry of Internal Affairs Head Office.
+
+# From George Shepherd via Simon Woodhead via Robert Elz (1991-03-06):
+# # The Country of New Zealand   (Australia's east island -) Gee they hate that!
+# #				   or is Australia the west island of N.Z.
+# #	[ courtesy of Geoff Tribble.. Auckland N.Z. ]
+# #				[ Nov 1990 ]
+# ...
+# Rule	NZ      1974    1988	-	Oct	lastSun	2:00	1:00	D
+# Rule	NZ	1989	max	-	Oct	Sun>=1	2:00	1:00	D
+# Rule	NZ      1975    1989	-	Mar	Sun>=1	3:00	0	S
+# Rule	NZ	1990	max	-	Mar	lastSun	3:00	0	S
+# ...
+# Zone	NZ			12:00	NZ		NZ%sT	# New Zealand
+# Zone	NZ-CHAT			12:45	-		NZ-CHAT # Chatham Island
+
+# From Arthur David Olson (1992-03-08):
+# The chosen rules use the Davies October 8 values for the start of DST in 1989
+# rather than the October 1 value.
+
+# From Paul Eggert (1995-12-19);
+# Shank & Pottenger report 2:00 for all autumn changes in Australia and NZ.
+# Robert Uzgalis writes that the New Zealand Daylight
+# Savings Time Order in Council dated 1990-06-18 specifies 2:00 standard
+# time on both the first Sunday in October and the third Sunday in March.
+# As with Australia, we'll assume the tradition is 2:00s, not 2:00.
+#
+# From Paul Eggert (2006-03-22):
+# The Department of Internal Affairs (DIA) maintains a brief history,
+# as does Carol Squires; see tz-link.htm for the full references.
+# Use these sources in preference to Shanks & Pottenger.
+#
+# For Chatham, IATA SSIM (1991/1999) gives the NZ rules but with
+# transitions at 2:45 local standard time; this confirms that Chatham
+# is always exactly 45 minutes ahead of Auckland.
+
+###############################################################################
+
+
+# Fiji
+
+# Howse writes (p 153) that in 1879 the British governor of Fiji
+# enacted an ordinance standardizing the islands on Antipodean Time
+# instead of the American system (which was one day behind).
+
+# From Rives McDow (1998-10-08):
+# Fiji will introduce DST effective 0200 local time, 1998-11-01
+# until 0300 local time 1999-02-28.  Each year the DST period will
+# be from the first Sunday in November until the last Sunday in February.
+
+# From Paul Eggert (2000-01-08):
+# IATA SSIM (1999-09) says DST ends 0100 local time.  Go with McDow.
+
+# From the BBC World Service (1998-10-31 11:32 UTC):
+# The Fijiian government says the main reasons for the time change is to
+# improve productivity and reduce road accidents.  But correspondents say it
+# also hopes the move will boost Fiji's ability to compete with other pacific
+# islands in the effort to attract tourists to witness the dawning of the new
+# millenium.
+
+# http://www.fiji.gov.fj/press/2000_09/2000_09_13-05.shtml (2000-09-13)
+# reports that Fiji has discontinued DST.
+
+# Johnston
+
+# Johnston data is from usno1995.
+
+
+# Kiribati
+
+# From Paul Eggert (1996-01-22):
+# Today's _Wall Street Journal_ (page 1) reports that Kiribati
+# ``declared it the same day throught the country as of Jan. 1, 1995''
+# as part of the competition to be first into the 21st century.
+
+
+# Kwajalein
+
+# In comp.risks 14.87 (26 August 1993), Peter Neumann writes:
+# I wonder what happened in Kwajalein, where there was NO Friday,
+# 1993-08-20.  Thursday night at midnight Kwajalein switched sides with
+# respect to the International Date Line, to rejoin its fellow islands,
+# going from 11:59 p.m. Thursday to 12:00 m. Saturday in a blink.
+
+
+# N Mariana Is, Guam
+
+# Howse writes (p 153) ``The Spaniards, on the other hand, reached the
+# Philippines and the Ladrones from America,'' and implies that the Ladrones
+# (now called the Marianas) kept American date for quite some time.
+# For now, we assume the Ladrones switched at the same time as the Philippines;
+# see Asia/Manila.
+
+# US Public Law 106-564 (2000-12-23) made UTC+10 the official standard time,
+# under the name "Chamorro Standard Time".  There is no official abbreviation,
+# but Congressman Robert A. Underwood, author of the bill that became law,
+# wrote in a press release (2000-12-27) that he will seek the use of "ChST".
+
+
+# Micronesia
+
+# Alan Eugene Davis writes (1996-03-16),
+# ``I am certain, having lived there for the past decade, that "Truk"
+# (now properly known as Chuuk) ... is in the time zone GMT+10.''
+#
+# Shanks & Pottenger write that Truk switched from UTC+10 to UTC+11
+# on 1978-10-01; ignore this for now.
+
+# From Paul Eggert (1999-10-29):
+# The Federated States of Micronesia Visitors Board writes in
+# <a href="http://www.fsmgov.org/info/clocks.html">
+# The Federated States of Micronesia - Visitor Information
+# </a> (1999-01-26)
+# that Truk and Yap are UTC+10, and Ponape and Kosrae are UTC+11.
+# We don't know when Kosrae switched from UTC+12; assume January 1 for now.
+
+
+# Midway
+
+# From Charles T O'Connor, KMTH DJ (1956),
+# quoted in the KTMH section of the Radio Heritage Collection
+# <http://radiodx.com/spdxr/KMTH.htm> (2002-12-31):
+# For the past two months we've been on what is known as Daylight
+# Saving Time.  This time has put us on air at 5am in the morning,
+# your time down there in New Zealand.  Starting September 2, 1956
+# we'll again go back to Standard Time.  This'll mean that we'll go to
+# air at 6am your time.
+#
+# From Paul Eggert (2003-03-23):
+# We don't know the date of that quote, but we'll guess they
+# started DST on June 3.  Possibly DST was observed other years
+# in Midway, but we have no record of it.
+
+
+# Pitcairn
+
+# From Rives McDow (1999-11-08):
+# A Proclamation was signed by the Governor of Pitcairn on the 27th March 1998
+# with regard to Pitcairn Standard Time.  The Proclamation is as follows.
+#
+#	The local time for general purposes in the Islands shall be
+#	Co-ordinated Universal time minus 8 hours and shall be known
+#	as Pitcairn Standard Time.
+#
+# ... I have also seen Pitcairn listed as UTC minus 9 hours in several
+# references, and can only assume that this was an error in interpretation
+# somehow in light of this proclamation.
+
+# From Rives McDow (1999-11-09):
+# The Proclamation regarding Pitcairn time came into effect on 27 April 1998
+# ... at midnight.
+
+# From Howie Phelps (1999-11-10), who talked to a Pitcairner via shortwave:
+# Betty Christian told me yesterday that their local time is the same as
+# Pacific Standard Time. They used to be 1/2 hour different from us here in
+# Sacramento but it was changed a couple of years ago.
+
+
+# Samoa
+
+# Howse writes (p 153, citing p 10 of the 1883-11-18 New York Herald)
+# that in 1879 the King of Samoa decided to change
+# ``the date in his kingdom from the Antipodean to the American system,
+# ordaining -- by a masterpiece of diplomatic flattery -- that
+# the Fourth of July should be celebrated twice in that year.''
+
+
+# Tonga
+
+# From Paul Eggert (1996-01-22):
+# Today's _Wall Street Journal_ (p 1) reports that ``Tonga has been plotting
+# to sneak ahead of [New Zealanders] by introducing daylight-saving time.''
+# Since Kiribati has moved the Date Line it's not clear what Tonga will do.
+
+# Don Mundell writes in the 1997-02-20 Tonga Chronicle
+# <a href="http://www.tongatapu.net.to/tonga/homeland/timebegins.htm">
+# How Tonga became `The Land where Time Begins'
+# </a>:
+
+# Until 1941 Tonga maintained a standard time 50 minutes ahead of NZST
+# 12 hours and 20 minutes ahead of GMT.  When New Zealand adjusted its
+# standard time in 1940s, Tonga had the choice of subtracting from its
+# local time to come on the same standard time as New Zealand or of
+# advancing its time to maintain the differential of 13 degrees
+# (approximately 50 minutes ahead of New Zealand time).
+#
+# Because His Majesty King Taufa'ahau Tupou IV, then Crown Prince
+# Tungi, preferred to ensure Tonga's title as the land where time
+# begins, the Legislative Assembly approved the latter change.
+#
+# But some of the older, more conservative members from the outer
+# islands objected. "If at midnight on Dec. 31, we move ahead 40
+# minutes, as your Royal Highness wishes, what becomes of the 40
+# minutes we have lost?"
+#
+# The Crown Prince, presented an unanswerable argument: "Remember that
+# on the World Day of Prayer, you would be the first people on Earth
+# to say your prayers in the morning."
+
+# From Paul Eggert (2006-03-22):
+# Shanks & Pottenger say the transition was on 1968-10-01; go with Mundell.
+
+# From Eric Ulevik (1999-05-03):
+# Tonga's director of tourism, who is also secretary of the National Millenium
+# Committee, has a plan to get Tonga back in front.
+# He has proposed a one-off move to tropical daylight saving for Tonga from
+# October to March, which has won approval in principle from the Tongan
+# Government.
+
+# From Steffen Thorsen (1999-09-09):
+# * Tonga will introduce DST in November
+#
+# I was given this link by John Letts:
+# <a hef="http://news.bbc.co.uk/hi/english/world/asia-pacific/newsid_424000/424764.stm">
+# http://news.bbc.co.uk/hi/english/world/asia-pacific/newsid_424000/424764.stm
+# </a>
+#
+# I have not been able to find exact dates for the transition in November
+# yet. By reading this article it seems like Fiji will be 14 hours ahead
+# of UTC as well, but as far as I know Fiji will only be 13 hours ahead
+# (12 + 1 hour DST).
+
+# From Arthur David Olson (1999-09-20):
+# According to <a href="http://www.tongaonline.com/news/sept1799.html>
+# http://www.tongaonline.com/news/sept1799.html
+# </a>:
+# "Daylight Savings Time will take effect on Oct. 2 through April 15, 2000
+# and annually thereafter from the first Saturday in October through the
+# third Saturday of April.  Under the system approved by Privy Council on
+# Sept. 10, clocks must be turned ahead one hour on the opening day and
+# set back an hour on the closing date."
+# Alas, no indication of the time of day.
+
+# From Rives McDow (1999-10-06):
+# Tonga started its Daylight Saving on Saturday morning October 2nd at 0200am.
+# Daylight Saving ends on April 16 at 0300am which is Sunday morning.
+
+# From Steffen Thorsen (2000-10-31):
+# Back in March I found a notice on the website http://www.tongaonline.com
+# that Tonga changed back to standard time one month early, on March 19
+# instead of the original reported date April 16. Unfortunately, the article
+# is no longer available on the site, and I did not make a copy of the
+# text, and I have forgotten to report it here.
+# (Original URL was: http://www.tongaonline.com/news/march162000.htm )
+
+# From Rives McDow (2000-12-01):
+# Tonga is observing DST as of 2000-11-04 and will stop on 2001-01-27.
+
+# From Sione Moala-Mafi (2001-09-20) via Rives McDow:
+# At 2:00am on the first Sunday of November, the standard time in the Kingdom
+# shall be moved forward by one hour to 3:00am.  At 2:00am on the last Sunday
+# of January the standard time in the Kingdom shall be moved backward by one
+# hour to 1:00am.
+
+# From Pulu 'Anau (2002-11-05):
+# The law was for 3 years, supposedly to get renewed.  It wasn't.
+
+
+# Wake
+
+# From Vernice Anderson, Personal Secretary to Philip Jessup,
+# US Ambassador At Large (oral history interview, 1971-02-02):
+#
+# Saturday, the 14th [of October, 1950] -- ...  The time was all the
+# more confusing at that point, because we had crossed the
+# International Date Line, thus getting two Sundays.  Furthermore, we
+# discovered that Wake Island had two hours of daylight saving time
+# making calculation of time in Washington difficult if not almost
+# impossible.
+#
+# http://www.trumanlibrary.org/wake/meeting.htm
+
+# From Paul Eggert (2003-03-23):
+# We have no other report of DST in Wake Island, so omit this info for now.
+
+###############################################################################
+
+# The International Date Line
+
+# From Gwillim Law (2000-01-03):
+#
+# The International Date Line is not defined by any international standard,
+# convention, or treaty.  Mapmakers are free to draw it as they please.
+# Reputable mapmakers will simply ensure that every point of land appears on
+# the correct side of the IDL, according to the date legally observed there.
+#
+# When Kiribati adopted a uniform date in 1995, thereby moving the Phoenix and
+# Line Islands to the west side of the IDL (or, if you prefer, moving the IDL
+# to the east side of the Phoenix and Line Islands), I suppose that most
+# mapmakers redrew the IDL following the boundary of Kiribati.  Even that line
+# has a rather arbitrary nature.  The straight-line boundaries between Pacific
+# island nations that are shown on many maps are based on an international
+# convention, but are not legally binding national borders.... The date is
+# governed by the IDL; therefore, even on the high seas, there may be some
+# places as late as fourteen hours later than UTC.  And, since the IDL is not
+# an international standard, there are some places on the high seas where the
+# correct date is ambiguous.
+
+# From Wikipedia <http://en.wikipedia.org/wiki/Time_zone> (2005-08-31):
+# Before 1920, all ships kept local apparent time on the high seas by setting
+# their clocks at night or at the morning sight so that, given the ship's
+# speed and direction, it would be 12 o'clock when the Sun crossed the ship's
+# meridian (12 o'clock = local apparent noon).  During 1917, at the
+# Anglo-French Conference on Time-keeping at Sea, it was recommended that all
+# ships, both military and civilian, should adopt hourly standard time zones
+# on the high seas.  Whenever a ship was within the territorial waters of any
+# nation it would use that nation's standard time.  The captain was permitted
+# to change his ship's clocks at a time of his choice following his ship's
+# entry into another zone time--he often chose midnight.  These zones were
+# adopted by all major fleets between 1920 and 1925 but not by many
+# independent merchant ships until World War II.
+
+# From Paul Eggert, using references suggested by Oscar van Vlijmen
+# (2005-03-20):
+#
+# The American Practical Navigator (2002)
+# <http://pollux.nss.nima.mil/pubs/pubs_j_apn_sections.html?rid=187>
+# talks only about the 180-degree meridian with respect to ships in
+# international waters; it ignores the international date line.
Index: libkcal/libical/tzdata/antarctica
===================================================================
--- libkcal/libical/tzdata/antarctica	(.../tags/KDE/3.5.6/kdepim)	(wersja 0)
+++ libkcal/libical/tzdata/antarctica	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -0,0 +1,325 @@
+# @(#)antarctica	8.3
+# <pre>
+
+# From Paul Eggert (1999-11-15):
+# To keep things manageable, we list only locations occupied year-round; see
+# <a href="http://www.comnap.aq/comnap/comnap.nsf/P/Stations/">
+# COMNAP - Stations and Bases
+# </a>
+# and
+# <a href="http://www.spri.cam.ac.uk/bob/periant.htm">
+# Summary of the Peri-Antarctic Islands (1998-07-23)
+# </a>
+# for information.
+# Unless otherwise specified, we have no time zone information.
+#
+# Except for the French entries,
+# I made up all time zone abbreviations mentioned here; corrections welcome!
+# FORMAT is `zzz' and GMTOFF is 0 for locations while uninhabited.
+
+# These rules are stolen from the `europe' file.
+# Rule	NAME	FROM	TO	TYPE	IN	ON	AT	SAVE	LETTER/S
+Rule	RussAQ	1981	1984	-	Apr	 1	 0:00	1:00	S
+Rule	RussAQ	1981	1983	-	Oct	 1	 0:00	0	-
+Rule	RussAQ	1984	1991	-	Sep	lastSun	 2:00s	0	-
+Rule	RussAQ	1985	1991	-	Mar	lastSun	 2:00s	1:00	S
+Rule	RussAQ	1992	only	-	Mar	lastSat	 23:00	1:00	S
+Rule	RussAQ	1992	only	-	Sep	lastSat	 23:00	0	-
+Rule	RussAQ	1993	max	-	Mar	lastSun	 2:00s	1:00	S
+Rule	RussAQ	1993	1995	-	Sep	lastSun	 2:00s	0	-
+Rule	RussAQ	1996	max	-	Oct	lastSun	 2:00s	0	-
+
+# These rules are stolen from the `southamerica' file.
+# Rule	NAME	FROM	TO	TYPE	IN	ON	AT	SAVE	LETTER/S
+Rule	ArgAQ	1964	1966	-	Mar	 1	0:00	0	-
+Rule	ArgAQ	1964	1966	-	Oct	15	0:00	1:00	S
+Rule	ArgAQ	1967	only	-	Apr	 2	0:00	0	-
+Rule	ArgAQ	1967	1968	-	Oct	Sun>=1	0:00	1:00	S
+Rule	ArgAQ	1968	1969	-	Apr	Sun>=1	0:00	0	-
+Rule	ArgAQ	1974	only	-	Jan	23	0:00	1:00	S
+Rule	ArgAQ	1974	only	-	May	 1	0:00	0	-
+Rule	ChileAQ	1972	1986	-	Mar	Sun>=9	3:00u	0	-
+Rule	ChileAQ	1974	1987	-	Oct	Sun>=9	4:00u	1:00	S
+Rule	ChileAQ	1987	only	-	Apr	12	3:00u	0	-
+Rule	ChileAQ	1988	1989	-	Mar	Sun>=9	3:00u	0	-
+Rule	ChileAQ	1988	only	-	Oct	Sun>=1	4:00u	1:00	S
+Rule	ChileAQ	1989	only	-	Oct	Sun>=9	4:00u	1:00	S
+Rule	ChileAQ	1990	only	-	Mar	18	3:00u	0	-
+Rule	ChileAQ	1990	only	-	Sep	16	4:00u	1:00	S
+Rule	ChileAQ	1991	1996	-	Mar	Sun>=9	3:00u	0	-
+Rule	ChileAQ	1991	1997	-	Oct	Sun>=9	4:00u	1:00	S
+Rule	ChileAQ	1997	only	-	Mar	30	3:00u	0	-
+Rule	ChileAQ	1998	only	-	Mar	Sun>=9	3:00u	0	-
+Rule	ChileAQ	1998	only	-	Sep	27	4:00u	1:00	S
+Rule	ChileAQ	1999	only	-	Apr	 4	3:00u	0	-
+Rule	ChileAQ	1999	max	-	Oct	Sun>=9	4:00u	1:00	S
+Rule	ChileAQ	2000	max	-	Mar	Sun>=9	3:00u	0	-
+
+
+# Argentina - year-round bases
+# Belgrano II, Confin Coast, -770227-0343737, since 1972-02-05
+# Esperanza, San Martin Land, -6323-05659, since 1952-12-17
+# Jubany, Potter Peninsula, King George Island, -6414-0602320, since 1982-01
+# Marambio, Seymour I, -6414-05637, since 1969-10-29
+# Orcadas, Laurie I, -6016-04444, since 1904-02-22
+# San Martin, Debenham I, -6807-06708, since 1951-03-21
+#	(except 1960-03 / 1976-03-21)
+
+# Australia - territories
+# Heard Island, McDonald Islands (uninhabited)
+#	previously sealers and scientific personnel wintered
+#	<a href="http://web.archive.org/web/20021204222245/http://www.dstc.qut.edu.au/DST/marg/daylight.html">
+#	Margaret Turner reports
+#	</a> (1999-09-30) that they're UTC+5, with no DST;
+#	presumably this is when they have visitors.
+#
+# year-round bases
+# Casey, Bailey Peninsula, -6617+11032, since 1969
+# Davis, Vestfold Hills, -6835+07759, since 1957-01-13
+#	(except 1964-11 - 1969-02)
+# Mawson, Holme Bay, -6736+06253, since 1954-02-13
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone Antarctica/Casey	0	-	zzz	1969
+			8:00	-	WST	# Western (Aus) Standard Time
+Zone Antarctica/Davis	0	-	zzz	1957 Jan 13
+			7:00	-	DAVT	1964 Nov # Davis Time
+			0	-	zzz	1969 Feb
+			7:00	-	DAVT
+Zone Antarctica/Mawson	0	-	zzz	1954 Feb 13
+			6:00	-	MAWT	# Mawson Time
+# References:
+# <a href="http://www.antdiv.gov.au/aad/exop/sfo/casey/casey_aws.html">
+# Casey Weather (1998-02-26)
+# </a>
+# <a href="http://www.antdiv.gov.au/aad/exop/sfo/davis/video.html">
+# Davis Station, Antarctica (1998-02-26)
+# </a>
+# <a href="http://www.antdiv.gov.au/aad/exop/sfo/mawson/video.html">
+# Mawson Station, Antarctica (1998-02-25)
+# </a>
+
+# Brazil - year-round base
+# Comandante Ferraz, King George Island, -6205+05824, since 1983/4
+
+# Chile - year-round bases and towns
+# Escudero, South Shetland Is, -621157-0585735, since 1994
+# Presidente Eduadro Frei, King George Island, -6214-05848, since 1969-03-07
+# General Bernardo O'Higgins, Antarctic Peninsula, -6319-05704, since 1948-02
+# Capitan Arturo Prat, -6230-05941
+# Villa Las Estrellas (a town), around the Frei base, since 1984-04-09
+# These locations have always used Santiago time; use TZ='America/Santiago'.
+
+# China - year-round bases
+# Great Wall, King George Island, -6213-05858, since 1985-02-20
+# Zhongshan, Larsemann Hills, Prydz Bay, -6922+07623, since 1989-02-26
+
+# France - year-round bases
+#
+# From Antoine Leca (1997-01-20):
+# Time data are from Nicole Pailleau at the IFRTP
+# (French Institute for Polar Research and Technology).
+# She confirms that French Southern Territories and Terre Adelie bases
+# don't observe daylight saving time, even if Terre Adelie supplies came
+# from Tasmania.
+#
+# French Southern Territories with year-round inhabitants
+#
+# Martin-de-Vivies Base, Amsterdam Island, -374105+0773155, since 1950
+# Alfred-Faure Base, Crozet Islands, -462551+0515152, since 1964
+# Port-aux-Francais, Kerguelen Islands, -492110+0701303, since 1951;
+#	whaling & sealing station operated 1908/1914, 1920/1929, and 1951/1956
+#
+# St Paul Island - near Amsterdam, uninhabited
+#	fishing stations operated variously 1819/1931
+#
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone Indian/Kerguelen	0	-	zzz	1950	# Port-aux-Francais
+			5:00	-	TFT	# ISO code TF Time
+#
+# year-round base in the main continent
+# Dumont-d'Urville, Ile des Petrels, -6640+14001, since 1956-11
+#
+# Another base at Port-Martin, 50km east, began operation in 1947.
+# It was destroyed by fire on 1952-01-14.
+#
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone Antarctica/DumontDUrville 0 -	zzz	1947
+			10:00	-	PMT	1952 Jan 14 # Port-Martin Time
+			0	-	zzz	1956 Nov
+			10:00	-	DDUT	# Dumont-d'Urville Time
+# Reference:
+# <a href="http://en.wikipedia.org/wiki/Dumont_d'Urville_Station">
+# Dumont d'Urville Station (2005-12-05)
+# </a>
+
+# Germany - year-round base
+# Georg von Neumayer, -7039-00815
+
+# India - year-round base
+# Dakshin Gangotri, -7005+01200
+
+# Japan - year-round bases
+# Dome Fuji, -7719+03942
+# Syowa, -690022+0393524
+#
+# From Hideyuki Suzuki (1999-02-06):
+# In all Japanese stations, +0300 is used as the standard time.
+#
+# Syowa station, which is the first antarctic station of Japan,
+# was established on 1957-01-29.  Since Syowa station is still the main
+# station of Japan, it's appropriate for the principal location.
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone Antarctica/Syowa	0	-	zzz	1957 Jan 29
+			3:00	-	SYOT	# Syowa Time
+# See:
+# <a href="http://www.nipr.ac.jp/english/ara01.html">
+# NIPR Antarctic Research Activities (1999-08-17)
+# </a>
+
+# S Korea - year-round base
+# King Sejong, King George Island, -6213-05847, since 1988
+
+# New Zealand - claims
+# Balleny Islands (never inhabited)
+# Scott Island (never inhabited)
+#
+# year-round base
+# Scott, Ross Island, since 1957-01, is like Antarctica/McMurdo.
+#
+# These rules for New Zealand are stolen from the `australasia' file.
+# Rule	NAME	FROM	TO	TYPE	IN	ON	AT	SAVE	LETTER/S
+Rule	NZAQ	1974	only	-	Nov	 3	2:00s	1:00	D
+Rule	NZAQ	1975	1988	-	Oct	lastSun	2:00s	1:00	D
+Rule	NZAQ	1989	only	-	Oct	 8	2:00s	1:00	D
+Rule	NZAQ	1990	max	-	Oct	Sun>=1	2:00s	1:00	D
+Rule	NZAQ	1975	only	-	Feb	23	2:00s	0	S
+Rule	NZAQ	1976	1989	-	Mar	Sun>=1	2:00s	0	S
+Rule	NZAQ	1990	max	-	Mar	Sun>=15	2:00s	0	S
+
+# Norway - territories
+# Bouvet (never inhabited)
+#
+# claims
+# Peter I Island (never inhabited)
+
+# Poland - year-round base
+# Arctowski, King George Island, -620945-0582745, since 1977
+
+# Russia - year-round bases
+# Bellingshausen, King George Island, -621159-0585337, since 1968-02-22
+# Mirny, Davis coast, -6633+09301, since 1956-02
+# Molodezhnaya, Alasheyev Bay, -6740+04551,
+#	year-round from 1962-02 to 1999-07-01
+# Novolazarevskaya, Queen Maud Land, -7046+01150,
+#	year-round from 1960/61 to 1992
+
+# Vostok, since 1957-12-16, temporarily closed 1994-02/1994-11
+# <a href="http://quest.arc.nasa.gov/antarctica/QA/computers/Directions,Time,ZIP">
+# From Craig Mundell (1994-12-15)</a>:
+# Vostok, which is one of the Russian stations, is set on the same
+# time as Moscow, Russia.
+#
+# From Lee Hotz (2001-03-08):
+# I queried the folks at Columbia who spent the summer at Vostok and this is
+# what they had to say about time there:
+# ``in the US Camp (East Camp) we have been on New Zealand (McMurdo)
+# time, which is 12 hours ahead of GMT. The Russian Station Vostok was
+# 6 hours behind that (although only 2 miles away, i.e. 6 hours ahead
+# of GMT). This is a time zone I think two hours east of Moscow. The
+# natural time zone is in between the two: 8 hours ahead of GMT.''
+#
+# From Paul Eggert (2001-05-04):
+# This seems to be hopelessly confusing, so I asked Lee Hotz about it
+# in person.  He said that some Antartic locations set their local
+# time so that noon is the warmest part of the day, and that this
+# changes during the year and does not necessarily correspond to mean
+# solar noon.  So the Vostok time might have been whatever the clocks
+# happened to be during their visit.  So we still don't really know what time
+# it is at Vostok.  But we'll guess UTC+6.
+#
+Zone Antarctica/Vostok	0	-	zzz	1957 Dec 16
+			6:00	-	VOST	# Vostok time
+
+# S Africa - year-round bases
+# Marion Island, -4653+03752
+# Sanae, -7141-00250
+
+# UK
+#
+# British Antarctic Territories (BAT) claims
+# South Orkney Islands
+#	scientific station from 1903
+#	whaling station at Signy I 1920/1926
+# South Shetland Islands
+#
+# year-round bases
+# Bird Island, South Georgia, -5400-03803, since 1983
+# Deception Island, -6259-06034, whaling station 1912/1931,
+#	scientific station 1943/1967,
+#	previously sealers and a scientific expedition wintered by accident,
+#	and a garrison was deployed briefly
+# Halley, Coates Land, -7535-02604, since 1956-01-06
+#	Halley is on a moving ice shelf and is periodically relocated
+#	so that it is never more than 10km from its nominal location.
+# Rothera, Adelaide Island, -6734-6808, since 1976-12-01
+#
+# From Paul Eggert (2002-10-22)
+# <http://webexhibits.org/daylightsaving/g.html> says Rothera is -03 all year.
+#
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone Antarctica/Rothera	0	-	zzz	1976 Dec  1
+			-3:00	-	ROTT	# Rothera time
+
+# Uruguay - year round base
+# Artigas, King George Island, -621104-0585107
+
+# USA - year-round bases
+#
+# Palmer, Anvers Island, since 1965 (moved 2 miles in 1968)
+#
+# From Ethan Dicks (1996-10-06):
+# It keeps the same time as Punta Arenas, Chile, because, just like us
+# and the South Pole, that's the other end of their supply line....
+# I verified with someone who was there that since 1980,
+# Palmer has followed Chile.  Prior to that, before the Falklands War,
+# Palmer used to be supplied from Argentina.
+#
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone Antarctica/Palmer	0	-	zzz	1965
+			-4:00	ArgAQ	AR%sT	1969 Oct 5
+			-3:00	ArgAQ	AR%sT	1982 May
+			-4:00	ChileAQ	CL%sT
+#
+#
+# McMurdo, Ross Island, since 1955-12
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone Antarctica/McMurdo	0	-	zzz	1956
+			12:00	NZAQ	NZ%sT
+#
+# Amundsen-Scott, South Pole, continuously occupied since 1956-11-20
+#
+# From Paul Eggert (1996-09-03):
+# Normally it wouldn't have a separate entry, since it's like the
+# larger Antarctica/McMurdo since 1970, but it's too famous to omit.
+#
+# From Chris Carrier (1996-06-27):
+# Siple, the first commander of the South Pole station,
+# stated that he would have liked to have kept GMT at the station,
+# but that he found it more convenient to keep GMT+12
+# as supplies for the station were coming from McMurdo Sound,
+# which was on GMT+12 because New Zealand was on GMT+12 all year
+# at that time (1957).  (Source: Siple's book 90 degrees SOUTH.)
+#
+# From Susan Smith
+# http://www.cybertours.com/whs/pole10.html
+# (1995-11-13 16:24:56 +1300, no longer available):
+# We use the same time as McMurdo does.
+# And they use the same time as Christchurch, NZ does....
+# One last quirk about South Pole time.
+# All the electric clocks are usually wrong.
+# Something about the generators running at 60.1hertz or something
+# makes all of the clocks run fast.  So every couple of days,
+# we have to go around and set them back 5 minutes or so.
+# Maybe if we let them run fast all of the time, we'd get to leave here sooner!!
+#
+Link	Antarctica/McMurdo	Antarctica/South_Pole
Index: libkcal/libical/tzdata/systemv
===================================================================
--- libkcal/libical/tzdata/systemv	(.../tags/KDE/3.5.6/kdepim)	(wersja 0)
+++ libkcal/libical/tzdata/systemv	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -0,0 +1,36 @@
+# @(#)systemv	8.1
+
+# Old rules, should the need arise.
+# No attempt is made to handle Newfoundland, since it cannot be expressed
+# using the System V "TZ" scheme (half-hour offset), or anything outside
+# North America (no support for non-standard DST start/end dates), nor
+# the changes in the DST rules in the US after 1976 (which occurred after
+# the old rules were written).
+#
+# If you need the old rules, uncomment ## lines.
+# Compile this *without* leap second correction for true conformance.
+
+# Rule	NAME	FROM	TO	TYPE	IN	ON	AT	SAVE	LETTER/S
+Rule	SystemV	min	1973	-	Apr	lastSun	2:00	1:00	D
+Rule	SystemV	min	1973	-	Oct	lastSun	2:00	0	S
+Rule	SystemV	1974	only	-	Jan	6	2:00	1:00	D
+Rule	SystemV	1974	only	-	Nov	lastSun	2:00	0	S
+Rule	SystemV	1975	only	-	Feb	23	2:00	1:00	D
+Rule	SystemV	1975	only	-	Oct	lastSun	2:00	0	S
+Rule	SystemV	1976	max	-	Apr	lastSun	2:00	1:00	D
+Rule	SystemV	1976	max	-	Oct	lastSun	2:00	0	S
+
+# Zone	NAME		GMTOFF	RULES/SAVE	FORMAT	[UNTIL]
+## Zone	SystemV/AST4ADT	-4:00	SystemV		A%sT
+## Zone	SystemV/EST5EDT	-5:00	SystemV		E%sT
+## Zone	SystemV/CST6CDT	-6:00	SystemV		C%sT
+## Zone	SystemV/MST7MDT	-7:00	SystemV		M%sT
+## Zone	SystemV/PST8PDT	-8:00	SystemV		P%sT
+## Zone	SystemV/YST9YDT	-9:00	SystemV		Y%sT
+## Zone	SystemV/AST4	-4:00	-		AST
+## Zone	SystemV/EST5	-5:00	-		EST
+## Zone	SystemV/CST6	-6:00	-		CST
+## Zone	SystemV/MST7	-7:00	-		MST
+## Zone	SystemV/PST8	-8:00	-		PST
+## Zone	SystemV/YST9	-9:00	-		YST
+## Zone	SystemV/HST10	-10:00	-		HST
Index: libkcal/libical/tzdata/northamerica
===================================================================
--- libkcal/libical/tzdata/northamerica	(.../tags/KDE/3.5.6/kdepim)	(wersja 0)
+++ libkcal/libical/tzdata/northamerica	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -0,0 +1,2537 @@
+# @(#)northamerica	8.15
+# <pre>
+
+# also includes Central America and the Caribbean
+
+# This data is by no means authoritative; if you think you know better,
+# go ahead and edit the file (and please send any changes to
+# tz@elsie.nci.nih.gov for general use in the future).
+
+# From Paul Eggert (1999-03-22):
+# A reliable and entertaining source about time zones is
+# Derek Howse, Greenwich time and longitude, Philip Wilson Publishers (1997).
+
+###############################################################################
+
+# United States
+
+# From Paul Eggert (1999-03-31):
+# Howse writes (pp 121-125) that time zones were invented by
+# Professor Charles Ferdinand Dowd (1825-1904),
+# Principal of Temple Grove Ladies' Seminary (Saratoga Springs, NY).
+# His pamphlet ``A System of National Time for Railroads'' (1870)
+# was the result of his proposals at the Convention of Railroad Trunk Lines
+# in New York City (1869-10).  His 1870 proposal was based on Washington, DC,
+# but in 1872-05 he moved the proposed origin to Greenwich.
+# His proposal was adopted by the railroads on 1883-11-18 at 12:00,
+# and the most of the country soon followed suit.
+
+# From Paul Eggert (2005-04-16):
+# That 1883 transition occurred at 12:00 new time, not at 12:00 old time.
+# See p 46 of David Prerau, Seize the daylight, Thunder's Mouth Press (2005).
+
+# From Paul Eggert (2006-03-22):
+# A good source for time zone historical data in the US is
+# Thomas G. Shanks, The American Atlas (5th edition),
+# San Diego: ACS Publications, Inc. (1991).
+# Make sure you have the errata sheet; the book is somewhat useless without it.
+# It is the source for most of the pre-1991 US entries below.
+
+# From Paul Eggert (2001-03-06):
+# Daylight Saving Time was first suggested as a joke by Benjamin Franklin
+# in his whimsical essay ``An Economical Project for Diminishing the Cost
+# of Light'' published in the Journal de Paris (1784-04-26).
+# Not everyone is happy with the results:
+#
+#	I don't really care how time is reckoned so long as there is some
+#	agreement about it, but I object to being told that I am saving
+#	daylight when my reason tells me that I am doing nothing of the kind.
+#	I even object to the implication that I am wasting something
+#	valuable if I stay in bed after the sun has risen.  As an admirer
+#	of moonlight I resent the bossy insistence of those who want to
+#	reduce my time for enjoying it.  At the back of the Daylight Saving
+#	scheme I detect the bony, blue-fingered hand of Puritanism, eager
+#	to push people into bed earlier, and get them up earlier, to make
+#	them healthy, wealthy and wise in spite of themselves.
+#
+#	-- Robertson Davies, The diary of Samuel Marchbanks,
+#	   Clarke, Irwin (1947), XIX, Sunday
+#
+# For more about the first ten years of DST in the United States, see
+# Robert Garland's <a href="http://www.clpgh.org/exhibit/dst.html">
+# Ten years of daylight saving from the Pittsburgh standpoint
+# (Carnegie Library of Pittsburgh, 1927)</a>.
+#
+# Shanks says that DST was called "War Time" in the US in 1918 and 1919.
+# However, DST was imposed by the Standard Time Act of 1918, which
+# was the first nationwide legal time standard, and apparently
+# time was just called "Standard Time" or "Daylight Saving Time".
+
+# From Arthur David Olson:
+# US Daylight Saving Time ended on the last Sunday of *October* in 1974.
+# See, for example, the front page of the Saturday, 1974-10-26
+# and Sunday, 1974-10-27 editions of the Washington Post.
+
+# From Arthur David Olson:
+# Before the Uniform Time Act of 1966 took effect in 1967, observance of
+# Daylight Saving Time in the US was by local option, except during wartime.
+
+# From Arthur David Olson (2000-09-25):
+# Last night I heard part of a rebroadcast of a 1945 Arch Oboler radio drama.
+# In the introduction, Oboler spoke of "Eastern Peace Time."
+# An AltaVista search turned up
+# <a href="http://rowayton.org/rhs/hstaug45.html">:
+# "When the time is announced over the radio now, it is 'Eastern Peace
+# Time' instead of the old familiar 'Eastern War Time.'  Peace is wonderful."
+# </a> (August 1945) by way of confirmation.
+
+# From Joseph Gallant citing
+# George H. Douglas, _The Early Days of Radio Broadcasting_ (1987):
+# At 7 P.M. (Eastern War Time) [on 1945-08-14], the networks were set
+# to switch to London for Attlee's address, but the American people
+# never got to hear his speech live. According to one press account,
+# CBS' Bob Trout was first to announce the word of Japan's surrender,
+# but a few seconds later, NBC, ABC and Mutual also flashed the word
+# of surrender, all of whom interrupting the bells of Big Ben in
+# London which were to precede Mr. Attlee's speech.
+
+# From Paul Eggert (2003-02-09): It was Robert St John, not Bob Trout.  From
+# Myrna Oliver's obituary of St John on page B16 of today's Los Angeles Times:
+#
+# ... a war-weary U.S. clung to radios, awaiting word of Japan's surrender.
+# Any announcement from Asia would reach St. John's New York newsroom on a
+# wire service teletype machine, which had prescribed signals for major news.
+# Associated Press, for example, would ring five bells before spewing out
+# typed copy of an important story, and 10 bells for news "of transcendental
+# importance."
+#
+# On Aug. 14, stalling while talking steadily into the NBC networks' open
+# microphone, St. John heard five bells and waited only to hear a sixth bell,
+# before announcing confidently: "Ladies and gentlemen, World War II is over.
+# The Japanese have agreed to our surrender terms."
+#
+# He had scored a 20-second scoop on other broadcasters.
+
+# From Arthur David Olson (2005-08-22):
+# Paul has been careful to use the "US" rules only in those locations
+# that are part of the United States; this reflects the real scope of
+# U.S. government action.  So even though the "US" rules have changed
+# in the latest release, other countries won't be affected.
+
+# Rule	NAME	FROM	TO	TYPE	IN	ON	AT	SAVE	LETTER/S
+Rule	US	1918	1919	-	Mar	lastSun	2:00	1:00	D
+Rule	US	1918	1919	-	Oct	lastSun	2:00	0	S
+Rule	US	1942	only	-	Feb	9	2:00	1:00	W # War
+Rule	US	1945	only	-	Aug	14	23:00u	1:00	P # Peace
+Rule	US	1945	only	-	Sep	30	2:00	0	S
+Rule	US	1967	2006	-	Oct	lastSun	2:00	0	S
+Rule	US	1967	1973	-	Apr	lastSun	2:00	1:00	D
+Rule	US	1974	only	-	Jan	6	2:00	1:00	D
+Rule	US	1975	only	-	Feb	23	2:00	1:00	D
+Rule	US	1976	1986	-	Apr	lastSun	2:00	1:00	D
+Rule	US	1987	2006	-	Apr	Sun>=1	2:00	1:00	D
+Rule	US	2007	max	-	Mar	Sun>=8	2:00	1:00	D
+Rule	US	2007	max	-	Nov	Sun>=1	2:00	0	S
+
+# From Arthur David Olson, 2005-12-19
+# We generate the files specified below to guard against old files with
+# obsolete information being left in the time zone binary directory.
+# We limit the list to names that have appeared in previous versions of
+# this time zone package.
+# We do these as separate Zones rather than as Links to avoid problems if
+# a particular place changes whether it observes DST.
+# We put these specifications here in the northamerica file both to
+# increase the chances that they'll actually get compiled and to
+# avoid the need to duplicate the US rules in another file.
+
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone	EST		 -5:00	-	EST
+Zone	MST		 -7:00	-	MST
+Zone	HST		-10:00	-	HST
+Zone	EST5EDT		 -5:00	US	E%sT
+Zone	CST6CDT		 -6:00	US	C%sT
+Zone	MST7MDT		 -7:00	US	M%sT
+Zone	PST8PDT		 -8:00	US	P%sT
+
+# From Bob Devine (1988-01-28):
+# ...Alaska (and Hawaii) had the timezone names changed in 1967.
+#    old			 new
+#    Pacific Standard Time(PST)  -same-
+#    Yukon Standard Time(YST)    -same-
+#    Central Alaska S.T. (CAT)   Alaska-Hawaii St[an]dard Time (AHST)
+#    Nome Standard Time (NT)     Bering Standard Time (BST)
+#
+# ...Alaska's timezone lines were redrawn in 1983 to give only 2 tz.
+#    The YST zone now covers nearly all of the state, AHST just part
+#    of the Aleutian islands.   No DST.
+
+# From Paul Eggert (1995-12-19):
+# The tables below use `NST', not `NT', for Nome Standard Time.
+# I invented `CAWT' for Central Alaska War Time.
+
+# From U. S. Naval Observatory (1989-01-19):
+# USA  EASTERN       5 H  BEHIND UTC    NEW YORK, WASHINGTON
+# USA  EASTERN       4 H  BEHIND UTC    APR 3 - OCT 30
+# USA  CENTRAL       6 H  BEHIND UTC    CHICAGO, HOUSTON
+# USA  CENTRAL       5 H  BEHIND UTC    APR 3 - OCT 30
+# USA  MOUNTAIN      7 H  BEHIND UTC    DENVER
+# USA  MOUNTAIN      6 H  BEHIND UTC    APR 3 - OCT 30
+# USA  PACIFIC       8 H  BEHIND UTC    L.A., SAN FRANCISCO
+# USA  PACIFIC       7 H  BEHIND UTC    APR 3 - OCT 30
+# USA  ALASKA STD    9 H  BEHIND UTC    MOST OF ALASKA     (AKST)
+# USA  ALASKA STD    8 H  BEHIND UTC    APR 3 - OCT 30 (AKDT)
+# USA  ALEUTIAN     10 H  BEHIND UTC    ISLANDS WEST OF 170W
+# USA  - " -         9 H  BEHIND UTC    APR 3 - OCT 30
+# USA  HAWAII       10 H  BEHIND UTC
+# USA  BERING       11 H  BEHIND UTC    SAMOA, MIDWAY
+
+# From Arthur David Olson (1989-01-21):
+# The above dates are for 1988.
+# Note the "AKST" and "AKDT" abbreviations, the claim that there's
+# no DST in Samoa, and the claim that there is DST in Alaska and the
+# Aleutians.
+
+# From Arthur David Olson (1988-02-13):
+# Legal standard time zone names, from United States Code (1982 Edition and
+# Supplement III), Title 15, Chapter 6, Section 260 and forward.  First, names
+# up to 1967-04-01 (when most provisions of the Uniform Time Act of 1966
+# took effect), as explained in sections 263 and 261:
+#	(none)
+#	United States standard eastern time
+#	United States standard mountain time
+#	United States standard central time
+#	United States standard Pacific time
+#	(none)
+#	United States standard Alaska time
+#	(none)
+# Next, names from 1967-04-01 until 1983-11-30 (the date for
+# public law 98-181):
+#	Atlantic standard time
+#	eastern standard time
+#	central standard time
+#	mountain standard time
+#	Pacific standard time
+#	Yukon standard time
+#	Alaska-Hawaii standard time
+#	Bering standard time
+# And after 1983-11-30:
+#	Atlantic standard time
+#	eastern standard time
+#	central standard time
+#	mountain standard time
+#	Pacific standard time
+#	Alaska standard time
+#	Hawaii-Aleutian standard time
+#	Samoa standard time
+# The law doesn't give abbreviations.
+#
+# From Paul Eggert (2000-01-08), following a heads-up from Rives McDow:
+# Public law 106-564 (2000-12-23) introduced the abbreviation
+# "Chamorro Standard Time" for time in Guam and the Northern Marianas.
+# See the file "australasia".
+
+# From Arthur David Olson, 2005-08-09
+# The following was signed into law on 2005-08-08.
+#
+# H.R. 6, Energy Policy Act of 2005, SEC. 110. DAYLIGHT SAVINGS.
+#   (a) Amendment- Section 3(a) of the Uniform Time Act of 1966 (15
+#   U.S.C. 260a(a)) is amended--
+#     (1) by striking `first Sunday of April' and inserting `second
+#     Sunday of March'; and
+#     (2) by striking `last Sunday of October' and inserting `first
+#     Sunday of November'.
+#   (b) Effective Date- Subsection (a) shall take effect 1 year after the
+#   date of enactment of this Act or March 1, 2007, whichever is later.
+#   (c) Report to Congress- Not later than 9 months after the effective
+#   date stated in subsection (b), the Secretary shall report to Congress
+#   on the impact of this section on energy consumption in the United
+#   States.
+#   (d) Right to Revert- Congress retains the right to revert the
+#   Daylight Saving Time back to the 2005 time schedules once the
+#   Department study is complete.
+
+# US eastern time, represented by New York
+
+# Connecticut, Delaware, District of Columbia, most of Florida,
+# Georgia, southeast Indiana (Dearborn and Ohio counties), eastern Kentucky
+# (except America/Kentucky/Louisville below), Maine, Maryland, Massachusetts,
+# New Hampshire, New Jersey, New York, North Carolina, Ohio,
+# Pennsylvania, Rhode Island, South Carolina, eastern Tennessee,
+# Vermont, Virginia, West Virginia
+
+# From Dave Cantor (2004-11-02):
+# Early this summer I had the occasion to visit the Mount Washington
+# Observatory weather station atop (of course!) Mount Washington [, NH]....
+# One of the staff members said that the station was on Eastern Standard Time
+# and didn't change their clocks for Daylight Saving ... so that their
+# reports will always have times which are 5 hours behind UTC.
+
+# From Paul Eggert (2005-08-26):
+# According to today's Huntsville Times
+# <http://www.al.com/news/huntsvilletimes/index.ssf?/base/news/1125047783228320.xml&coll=1>
+# a few towns on Alabama's "eastern border with Georgia, such as Phenix City
+# in Russell County, Lanett in Chambers County and some towns in Lee County,
+# set their watches and clocks on Eastern time."  It quotes H.H. "Bubba"
+# Roberts, city administrator in Phenix City. as saying "We are in the Central
+# time zone, but we do go by the Eastern time zone because so many people work
+# in Columbus."
+
+# Rule	NAME	FROM	TO	TYPE	IN	ON	AT	SAVE	LETTER
+Rule	NYC	1920	only	-	Mar	lastSun	2:00	1:00	D
+Rule	NYC	1920	only	-	Oct	lastSun	2:00	0	S
+Rule	NYC	1921	1966	-	Apr	lastSun	2:00	1:00	D
+Rule	NYC	1921	1954	-	Sep	lastSun	2:00	0	S
+Rule	NYC	1955	1966	-	Oct	lastSun	2:00	0	S
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone America/New_York	-4:56:02 -	LMT	1883 Nov 18 12:03:58
+			-5:00	US	E%sT	1920
+			-5:00	NYC	E%sT	1942
+			-5:00	US	E%sT	1946
+			-5:00	NYC	E%sT	1967
+			-5:00	US	E%sT
+
+# US central time, represented by Chicago
+
+# Alabama, Arkansas, Florida panhandle (Bay, Calhoun, Escambia,
+# Gulf, Holmes, Jackson, Okaloosa, Santa Rosa, Walton, and
+# Washington counties), Illinois, western Indiana
+# (Gibson, Jasper, Lake, LaPorte, Newton, Porter, Posey, Spencer,
+# Vanderburgh, and Warrick counties), Iowa, most of Kansas, western
+# Kentucky, Louisiana, Minnesota, Mississippi, Missouri, eastern
+# Nebraska, eastern North Dakota, Oklahoma, eastern South Dakota,
+# western Tennessee, most of Texas, Wisconsin
+
+# From Larry M. Smith (2006-04-26) re Wisconsin:
+# http://www.legis.state.wi.us/statutes/Stat0175.pdf ...
+# is currently enforced at the 01:00 time of change.  Because the local
+# "bar time" in the state corresponds to 02:00, a number of citations
+# are issued for the "sale of class 'B' alcohol after prohibited
+# hours" within the deviated hour of this change every year....
+#
+# From Douglas R. Bomberg (2007-03-12):
+# Wisconsin has enacted (nearly eleventh-hour) legislation to get WI
+# Statue 175 closer in synch with the US Congress' intent....
+# http://www.legis.state.wi.us/2007/data/acts/07Act3.pdf
+
+# Rule	NAME	FROM	TO	TYPE	IN	ON	AT	SAVE	LETTER
+Rule	Chicago	1920	only	-	Jun	13	2:00	1:00	D
+Rule	Chicago	1920	1921	-	Oct	lastSun	2:00	0	S
+Rule	Chicago	1921	only	-	Mar	lastSun	2:00	1:00	D
+Rule	Chicago	1922	1966	-	Apr	lastSun	2:00	1:00	D
+Rule	Chicago	1922	1954	-	Sep	lastSun	2:00	0	S
+Rule	Chicago	1955	1966	-	Oct	lastSun	2:00	0	S
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone America/Chicago	-5:50:36 -	LMT	1883 Nov 18 12:09:24
+			-6:00	US	C%sT	1920
+			-6:00	Chicago	C%sT	1936 Mar  1 2:00
+			-5:00	-	EST	1936 Nov 15 2:00
+			-6:00	Chicago	C%sT	1942
+			-6:00	US	C%sT	1946
+			-6:00	Chicago	C%sT	1967
+			-6:00	US	C%sT
+# Oliver County, ND switched from mountain to central time on 1992-10-25.
+Zone America/North_Dakota/Center -6:45:12 - LMT	1883 Nov 18 12:14:48
+			-7:00	US	M%sT	1992 Oct 25 02:00
+			-6:00	US	C%sT
+# Morton County, ND, switched from mountain to central time on
+# 2003-10-26, except for the area around Mandan which was already central time.
+# See <http://dmses.dot.gov/docimages/p63/135818.pdf>.
+# Officially this switch also included part of Sioux County, and
+# Jones, Mellette, and Todd Counties in South Dakota;
+# but in practice these other counties were already observing central time.
+# See <http://www.epa.gov/fedrgstr/EPA-IMPACT/2003/October/Day-28/i27056.htm>.
+Zone America/North_Dakota/New_Salem -6:45:39 - LMT 1883 Nov 18 12:14:21
+			-7:00	US	M%sT	2003 Oct 26 02:00
+			-6:00	US	C%sT
+
+# US mountain time, represented by Denver
+#
+# Colorado, far western Kansas, Montana, western
+# Nebraska, Nevada border (Jackpot, Owyhee, and Mountain City),
+# New Mexico, southwestern North Dakota, far eastern Oregon,
+# western South Dakota, far western Texas (El Paso County, Hudspeth County,
+# and Pine Springs and Nickel Creek in Culberson County), Utah, Wyoming
+#
+# Rule	NAME	FROM	TO	TYPE	IN	ON	AT	SAVE	LETTER
+Rule	Denver	1920	1921	-	Mar	lastSun	2:00	1:00	D
+Rule	Denver	1920	only	-	Oct	lastSun	2:00	0	S
+Rule	Denver	1921	only	-	May	22	2:00	0	S
+Rule	Denver	1965	1966	-	Apr	lastSun	2:00	1:00	D
+Rule	Denver	1965	1966	-	Oct	lastSun	2:00	0	S
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone America/Denver	-6:59:56 -	LMT	1883 Nov 18 12:00:04
+			-7:00	US	M%sT	1920
+			-7:00	Denver	M%sT	1942
+			-7:00	US	M%sT	1946
+			-7:00	Denver	M%sT	1967
+			-7:00	US	M%sT
+
+# US Pacific time, represented by Los Angeles
+#
+# California, northern Idaho (Benewah, Bonner, Boundary, Clearwater,
+# Idaho, Kootenai, Latah, Lewis, Nez Perce, and Shoshone counties),
+# most of Nevada, most of Oregon, and Washington
+#
+# Rule	NAME	FROM	TO	TYPE	IN	ON	AT	SAVE	LETTER
+Rule	CA	1948	only	-	Mar	14	2:00	1:00	D
+Rule	CA	1949	only	-	Jan	 1	2:00	0	S
+Rule	CA	1950	1966	-	Apr	lastSun	2:00	1:00	D
+Rule	CA	1950	1961	-	Sep	lastSun	2:00	0	S
+Rule	CA	1962	1966	-	Oct	lastSun	2:00	0	S
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone America/Los_Angeles -7:52:58 -	LMT	1883 Nov 18 12:07:02
+			-8:00	US	P%sT	1946
+			-8:00	CA	P%sT	1967
+			-8:00	US	P%sT
+
+# Alaska
+# AK%sT is the modern abbreviation for -9:00 per USNO.
+#
+# From Paul Eggert (2001-05-30):
+# Howse writes that Alaska switched from the Julian to the Gregorian calendar,
+# and from east-of-GMT to west-of-GMT days, when the US bought it from Russia.
+# This was on 1867-10-18, a Friday; the previous day was 1867-10-06 Julian,
+# also a Friday.  Include only the time zone part of this transition,
+# ignoring the switch from Julian to Gregorian, since we can't represent
+# the Julian calendar.
+#
+# As far as we know, none of the exact locations mentioned below were
+# permanently inhabited in 1867 by anyone using either calendar.
+# (Yakutat was colonized by the Russians in 1799, but the settlement
+# was destroyed in 1805 by a Yakutat-kon war party.)  However, there
+# were nearby inhabitants in some cases and for our purposes perhaps
+# it's best to simply use the official transition.
+#
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone America/Juneau	 15:02:19 -	LMT	1867 Oct 18
+			 -8:57:41 -	LMT	1900 Aug 20 12:00
+			 -8:00	-	PST	1942
+			 -8:00	US	P%sT	1946
+			 -8:00	-	PST	1969
+			 -8:00	US	P%sT	1983 Oct 30 2:00
+			 -9:00	US	Y%sT	1983 Nov 30
+			 -9:00	US	AK%sT
+Zone America/Yakutat	 14:41:05 -	LMT	1867 Oct 18
+			 -9:18:55 -	LMT	1900 Aug 20 12:00
+			 -9:00	-	YST	1942
+			 -9:00	US	Y%sT	1946
+			 -9:00	-	YST	1969
+			 -9:00	US	Y%sT	1983 Nov 30
+			 -9:00	US	AK%sT
+Zone America/Anchorage	 14:00:24 -	LMT	1867 Oct 18
+			 -9:59:36 -	LMT	1900 Aug 20 12:00
+			-10:00	-	CAT	1942
+			-10:00	US	CAT/CAWT 1945 Aug 14 23:00u
+			-10:00	US	CAT/CAPT 1946 # Peace
+			-10:00	-	CAT	1967 Apr
+			-10:00	-	AHST	1969
+			-10:00	US	AH%sT	1983 Oct 30 2:00
+			 -9:00	US	Y%sT	1983 Nov 30
+			 -9:00	US	AK%sT
+Zone America/Nome	 12:58:21 -	LMT	1867 Oct 18
+			-11:01:38 -	LMT	1900 Aug 20 12:00
+			-11:00	-	NST	1942
+			-11:00	US	N%sT	1946
+			-11:00	-	NST	1967 Apr
+			-11:00	-	BST	1969
+			-11:00	US	B%sT	1983 Oct 30 2:00
+			 -9:00	US	Y%sT	1983 Nov 30
+			 -9:00	US	AK%sT
+Zone America/Adak	 12:13:21 -	LMT	1867 Oct 18
+			-11:46:38 -	LMT	1900 Aug 20 12:00
+			-11:00	-	NST	1942
+			-11:00	US	N%sT	1946
+			-11:00	-	NST	1967 Apr
+			-11:00	-	BST	1969
+			-11:00	US	B%sT	1983 Oct 30 2:00
+			-10:00	US	AH%sT	1983 Nov 30
+			-10:00	US	HA%sT
+# The following switches don't quite make our 1970 cutoff.
+#
+# Shanks writes that part of southwest Alaska (e.g. Aniak)
+# switched from -11:00 to -10:00 on 1968-09-22 at 02:00,
+# and another part (e.g. Akiak) made the same switch five weeks later.
+#
+# From David Flater (2004-11-09):
+# In e-mail, 2004-11-02, Ray Hudson, historian/liaison to the Unalaska
+# Historic Preservation Commission, provided this information, which
+# suggests that Unalaska deviated from statutory time from early 1967
+# possibly until 1983:
+#
+#  Minutes of the Unalaska City Council Meeting, January 10, 1967:
+#  "Except for St. Paul and Akutan, Unalaska is the only important
+#  location not on Alaska Standard Time.  The following resolution was
+#  made by William Robinson and seconded by Henry Swanson:  Be it
+#  resolved that the City of Unalaska hereby goes to Alaska Standard
+#  Time as of midnight Friday, January 13, 1967 (1 A.M. Saturday,
+#  January 14, Alaska Standard Time.)  This resolution was passed with
+#  three votes for and one against."
+
+# Hawaii
+#
+# From Arthur David Olson:
+# And then there's Hawaii.
+# DST was observed for one day in 1933;
+# standard time was changed by half an hour in 1947;
+# it's always standard as of 1986.
+#
+# From Paul Eggert:
+# Shanks says the 1933 experiment lasted for three weeks.  Go with Shanks.
+#
+Zone Pacific/Honolulu	-10:31:26 -	LMT	1900 Jan  1 12:00
+			-10:30	-	HST	1933 Apr 30 2:00
+			-10:30	1:00	HDT	1933 May 21 2:00
+			-10:30	US	H%sT	1947 Jun  8 2:00
+			-10:00	-	HST
+
+# Now we turn to US areas that have diverged from the consensus since 1970.
+
+# Arizona mostly uses MST.
+
+# From Paul Eggert (2002-10-20):
+#
+# The information in the rest of this paragraph is derived from the
+# <a href="http://www.dlapr.lib.az.us/links/daylight.htm">
+# Daylight Saving Time web page (2002-01-23)</a> maintained by the
+# Arizona State Library, Archives and Public Records.
+# Between 1944-01-01 and 1944-04-01 the State of Arizona used standard
+# time, but by federal law railroads, airlines, bus lines, military
+# personnel, and some engaged in interstate commerce continued to
+# observe war (i.e., daylight saving) time.  The 1944-03-17 Phoenix
+# Gazette says that was the date the law changed, and that 04-01 was
+# the date the state's clocks would change.  In 1945 the State of
+# Arizona used standard time all year, again with exceptions only as
+# mandated by federal law.  Arizona observed DST in 1967, but Arizona
+# Laws 1968, ch. 183 (effective 1968-03-21) repealed DST.
+#
+# Shanks says the 1944 experiment came to an end on 1944-03-17.
+# Go with the Arizona State Library instead.
+
+Zone America/Phoenix	-7:28:18 -	LMT	1883 Nov 18 11:31:42
+			-7:00	US	M%sT	1944 Jan  1 00:01
+			-7:00	-	MST	1944 Apr  1 00:01
+			-7:00	US	M%sT	1944 Oct  1 00:01
+			-7:00	-	MST	1967
+			-7:00	US	M%sT	1968 Mar 21
+			-7:00	-	MST
+# From Arthur David Olson (1988-02-13):
+# A writer from the Inter Tribal Council of Arizona, Inc.,
+# notes in private correspondence dated 1987-12-28 that "Presently, only the
+# Navajo Nation participates in the Daylight Saving Time policy, due to its
+# large size and location in three states."  (The "only" means that other
+# tribal nations don't use DST.)
+
+Link America/Denver America/Shiprock
+
+# Southern Idaho (Ada, Adams, Bannock, Bear Lake, Bingham, Blaine,
+# Boise, Bonneville, Butte, Camas, Canyon, Caribou, Cassia, Clark,
+# Custer, Elmore, Franklin, Fremont, Gem, Gooding, Jefferson, Jerome,
+# Lemhi, Lincoln, Madison, Minidoka, Oneida, Owyhee, Payette, Power,
+# Teton, Twin Falls, Valley, Washington counties) and eastern Oregon
+# switched four weeks late in 1974.
+#
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone America/Boise	-7:44:49 -	LMT	1883 Nov 18 12:15:11
+			-8:00	US	P%sT	1923 May 13 2:00
+			-7:00	US	M%sT	1974
+			-7:00	-	MST	1974 Feb  3 2:00
+			-7:00	US	M%sT
+
+# Indiana
+#
+# For a map of Indiana's time zone regions, see:
+# <a href="http://www.mccsc.edu/time.html">
+# What time is it in Indiana?
+# </a> (2006-03-01)
+#
+# From Paul Eggert (2006-03-22):
+# Since 1970, most of Indiana has been like America/Indiana/Indianapolis,
+# with the following exceptions:
+#
+# - Gibson, Jasper, Lake, LaPorte, Newton, Porter, Posey, Spencer,
+#   Vandenburgh, and Warrick counties have been like America/Chicago.
+#
+# - Dearborn and Ohio counties have been like America/New_York.
+#
+# - Clark, Floyd, and Harrison counties have been like
+#   America/Kentucky/Louisville.
+#
+# - Daviess, Dubois, Knox, Martin, Perry, and Pulaski counties
+#   have been like America/Indiana/Vincennes.
+#
+# - Crawford, Pike, Starke, and Switzerland counties have their own time zone
+#   histories as noted below.
+#
+# Shanks partitioned Indiana into 345 regions, each with its own time history,
+# and wrote ``Even newspaper reports present contradictory information.''
+# Those Hoosiers!  Such a flighty and changeable people!
+# Fortunately, most of the complexity occurred before our cutoff date of 1970.
+#
+# Other than Indianapolis, the Indiana place names are so nondescript
+# that they would be ambiguous if we left them at the `America' level.
+# So we reluctantly put them all in a subdirectory `America/Indiana'.
+
+# From Paul Eggert (2005-08-16):
+# http://www.mccsc.edu/time.html says that Indiana will use DST starting 2006.
+
+# From Nathan Stratton Treadway (2006-03-30):
+# http://www.dot.gov/affairs/dot0406.htm [3705 B]
+# From Deborah Goldsmith (2006-01-18):
+# http://dmses.dot.gov/docimages/pdf95/382329_web.pdf [2.9 MB]
+# From Paul Eggert (2006-01-20):
+# It says "DOT is relocating the time zone boundary in Indiana to move Starke,
+# Pulaski, Knox, Daviess, Martin, Pike, Dubois, and Perry Counties from the
+# Eastern Time Zone to the Central Time Zone.... The effective date of
+# this rule is 2:OO a.m. EST Sunday, April 2, 2006, which is the
+# changeover date from standard time to Daylight Saving Time."
+# Strictly speaking, this means the affected counties will change their
+# clocks twice that night, but this obviously is in error.  The intent
+# is that 01:59:59 EST be followed by 02:00:00 CDT.
+
+# From Gwillim Law (2007-02-10):
+# The Associated Press has been reporting that Pulaski County, Indiana is
+# going to switch from Central to Eastern Time on March 11, 2007....
+# http://www.indystar.com/apps/pbcs.dll/article?AID=/20070207/LOCAL190108/702070524/0/LOCAL
+
+# Rule	NAME	FROM	TO	TYPE	IN	ON	AT	SAVE	LETTER
+Rule Indianapolis 1941	only	-	Jun	22	2:00	1:00	D
+Rule Indianapolis 1941	1954	-	Sep	lastSun	2:00	0	S
+Rule Indianapolis 1946	1954	-	Apr	lastSun	2:00	1:00	D
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone America/Indiana/Indianapolis -5:44:38 - LMT 1883 Nov 18 12:15:22
+			-6:00	US	C%sT	1920
+			-6:00 Indianapolis C%sT	1942
+			-6:00	US	C%sT	1946
+			-6:00 Indianapolis C%sT	1955 Apr 24 2:00
+			-5:00	-	EST	1957 Sep 29 2:00
+			-6:00	-	CST	1958 Apr 27 2:00
+			-5:00	-	EST	1969
+			-5:00	US	E%sT	1971
+			-5:00	-	EST	2006
+			-5:00	US	E%sT
+#
+# Eastern Crawford County, Indiana, left its clocks alone in 1974,
+# as well as from 1976 through 2005.
+# Rule	NAME	FROM	TO	TYPE	IN	ON	AT	SAVE	LETTER
+Rule	Marengo	1951	only	-	Apr	lastSun	2:00	1:00	D
+Rule	Marengo	1951	only	-	Sep	lastSun	2:00	0	S
+Rule	Marengo	1954	1960	-	Apr	lastSun	2:00	1:00	D
+Rule	Marengo	1954	1960	-	Sep	lastSun	2:00	0	S
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone America/Indiana/Marengo -5:45:23 -	LMT	1883 Nov 18 12:14:37
+			-6:00	US	C%sT	1951
+			-6:00	Marengo	C%sT	1961 Apr 30 2:00
+			-5:00	-	EST	1969
+			-5:00	US	E%sT	1974 Jan  6 2:00
+			-6:00	1:00	CDT	1974 Oct 27 2:00
+			-5:00	US	E%sT	1976
+			-5:00	-	EST	2006
+			-5:00	US	E%sT
+#
+# Daviess, Dubois, Knox, Martin, and Perry Counties, Indiana,
+# switched from eastern to central time in April 2006.
+# Rule	NAME	FROM	TO	TYPE	IN	ON	AT	SAVE	LETTER
+Rule Vincennes	1946	only	-	Apr	lastSun	2:00	1:00	D
+Rule Vincennes	1946	only	-	Sep	lastSun	2:00	0	S
+Rule Vincennes	1953	1954	-	Apr	lastSun	2:00	1:00	D
+Rule Vincennes	1953	1959	-	Sep	lastSun	2:00	0	S
+Rule Vincennes	1955	only	-	May	 1	0:00	1:00	D
+Rule Vincennes	1956	1963	-	Apr	lastSun	2:00	1:00	D
+Rule Vincennes	1960	only	-	Oct	lastSun	2:00	0	S
+Rule Vincennes	1961	only	-	Sep	lastSun	2:00	0	S
+Rule Vincennes	1962	1963	-	Oct	lastSun	2:00	0	S
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone America/Indiana/Vincennes -5:50:07 - LMT	1883 Nov 18 12:09:53
+			-6:00	US	C%sT	1946
+			-6:00 Vincennes	C%sT	1964 Apr 26 2:00
+			-5:00	-	EST	1969
+			-5:00	US	E%sT	1971
+			-5:00	-	EST	2006 Apr  2 2:00
+			-6:00	US	C%sT
+#
+# Pike County, Indiana moved from central to eastern time in 1977,
+# then switched back in 2006.
+# Rule	NAME	FROM	TO	TYPE	IN	ON	AT	SAVE	LETTER
+Rule	Pike	1955	only	-	May	 1	0:00	1:00	D
+Rule	Pike	1955	1960	-	Sep	lastSun	2:00	0	S
+Rule	Pike	1956	1964	-	Apr	lastSun	2:00	1:00	D
+Rule	Pike	1961	1964	-	Oct	lastSun	2:00	0	S
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone America/Indiana/Petersburg -5:49:07 - LMT	1883 Nov 18 12:10:53
+			-6:00	US	C%sT	1955
+			-6:00	Pike	C%sT	1965 Apr 25 2:00
+			-5:00	-	EST	1966 Oct 30 2:00
+			-6:00	US	C%sT	1977 Oct 30 2:00
+			-5:00	-	EST	2006 Apr  2 2:00
+			-6:00	US	C%sT
+#
+# Starke County, Indiana moved from central to eastern time in 1991,
+# then switched back in 2006.
+# From Arthur David Olson (1991-10-28):
+# An article on page A3 of the Sunday, 1991-10-27 Washington Post
+# notes that Starke County switched from Central time to Eastern time as of
+# 1991-10-27.
+# Rule	NAME	FROM	TO	TYPE	IN	ON	AT	SAVE	LETTER
+Rule	Starke	1947	1961	-	Apr	lastSun	2:00	1:00	D
+Rule	Starke	1947	1954	-	Sep	lastSun	2:00	0	S
+Rule	Starke	1955	1956	-	Oct	lastSun	2:00	0	S
+Rule	Starke	1957	1958	-	Sep	lastSun	2:00	0	S
+Rule	Starke	1959	1961	-	Oct	lastSun	2:00	0	S
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone America/Indiana/Knox -5:46:30 -	LMT	1883 Nov 18 12:13:30
+			-6:00	US	C%sT	1947
+			-6:00	Starke	C%sT	1962 Apr 29 2:00
+			-5:00	-	EST	1963 Oct 27 2:00
+			-6:00	US	C%sT	1991 Oct 27 2:00
+			-5:00	-	EST	2006 Apr  2 2:00
+			-6:00	US	C%sT
+#
+# Pulaski County, Indiana, switched from eastern to central time in
+# April 2006 and then switched back in March 2007.
+# Rule	NAME	FROM	TO	TYPE	IN	ON	AT	SAVE	LETTER
+Rule	Pulaski	1946	1960	-	Apr	lastSun	2:00	1:00	D
+Rule	Pulaski	1946	1954	-	Sep	lastSun	2:00	0	S
+Rule	Pulaski	1955	1956	-	Oct	lastSun	2:00	0	S
+Rule	Pulaski	1957	1960	-	Sep	lastSun	2:00	0	S
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone America/Indiana/Winamac -5:46:25 - LMT	1883 Nov 18 12:13:35
+			-6:00	US	C%sT	1946
+			-6:00	Pulaski	C%sT	1961 Apr 30 2:00
+			-5:00	-	EST	1969
+			-5:00	US	E%sT	1971
+			-5:00	-	EST	2006 Apr  2 2:00
+			-6:00	US	C%sT	2007 Mar 11 2:00
+			-5:00	US	E%sT
+#
+# Switzerland County, Indiana, did not observe DST from 1973 through 2005.
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone America/Indiana/Vevay -5:40:16 -	LMT	1883 Nov 18 12:19:44
+			-6:00	US	C%sT	1954 Apr 25 2:00
+			-5:00	-	EST	1969
+			-5:00	US	E%sT	1973
+			-5:00	-	EST	2006
+			-5:00	US	E%sT
+
+# Part of Kentucky left its clocks alone in 1974.
+# This also includes Clark, Floyd, and Harrison counties in Indiana.
+# Rule	NAME	FROM	TO	TYPE	IN	ON	AT	SAVE	LETTER
+Rule Louisville	1921	only	-	May	1	2:00	1:00	D
+Rule Louisville	1921	only	-	Sep	1	2:00	0	S
+Rule Louisville	1941	1961	-	Apr	lastSun	2:00	1:00	D
+Rule Louisville	1941	only	-	Sep	lastSun	2:00	0	S
+Rule Louisville	1946	only	-	Jun	2	2:00	0	S
+Rule Louisville	1950	1955	-	Sep	lastSun	2:00	0	S
+Rule Louisville	1956	1960	-	Oct	lastSun	2:00	0	S
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone America/Kentucky/Louisville -5:43:02 -	LMT	1883 Nov 18 12:16:58
+			-6:00	US	C%sT	1921
+			-6:00 Louisville C%sT	1942
+			-6:00	US	C%sT	1946
+			-6:00 Louisville C%sT	1961 Jul 23 2:00
+			-5:00	-	EST	1968
+			-5:00	US	E%sT	1974 Jan  6 2:00
+			-6:00	1:00	CDT	1974 Oct 27 2:00
+			-5:00	US	E%sT
+#
+# Wayne County, Kentucky
+#
+# From
+# <a href="http://www.lake-cumberland.com/life/archive/news990129time.shtml">
+# Lake Cumberland LIFE
+# </a> (1999-01-29) via WKYM-101.7:
+# Clinton County has joined Wayne County in asking the DoT to change from
+# the Central to the Eastern time zone....  The Wayne County government made
+# the same request in December.  And while Russell County officials have not
+# taken action, the majority of respondents to a poll conducted there in
+# August indicated they would like to change to "fast time" also.
+# The three Lake Cumberland counties are the farthest east of any U.S.
+# location in the Central time zone.
+#
+# From Rich Wales (2000-08-29):
+# After prolonged debate, and despite continuing deep differences of opinion,
+# Wayne County (central Kentucky) is switching from Central (-0600) to Eastern
+# (-0500) time.  They won't "fall back" this year.  See Sara Shipley,
+# The difference an hour makes, Nando Times (2000-08-29 15:33 -0400).
+#
+# From Paul Eggert (2001-07-16):
+# The final rule was published in the
+# <a href="http://frwebgate.access.gpo.gov/cgi-bin/getdoc.cgi?dbname=2000_register&docid=fr17au00-22">
+# Federal Register 65, 160 (2000-08-17), page 50154-50158.
+# </a>
+#
+Zone America/Kentucky/Monticello -5:39:24 - LMT	1883 Nov 18 12:20:36
+			-6:00	US	C%sT	1946
+			-6:00	-	CST	1968
+			-6:00	US	C%sT	2000 Oct 29  2:00
+			-5:00	US	E%sT
+
+
+# From Rives McDow (2000-08-30):
+# Here ... are all the changes in the US since 1985.
+# Kearny County, KS (put all of county on central;
+#	previously split between MST and CST) ... 1990-10
+# Starke County, IN (from CST to EST) ... 1991-10
+# Oliver County, ND (from MST to CST) ... 1992-10
+# West Wendover, NV (from PST TO MST) ... 1999-10
+# Wayne County, KY (from CST to EST) ... 2000-10
+#
+# From Paul Eggert (2001-07-17):
+# We don't know where the line used to be within Kearny County, KS,
+# so omit that change for now.
+# See America/Indiana/Knox for the Starke County, IN change.
+# See America/North_Dakota/Center for the Oliver County, ND change.
+# West Wendover, NV officially switched from Pacific to mountain time on
+# 1999-10-31.  See the
+# <a href="http://frwebgate.access.gpo.gov/cgi-bin/getdoc.cgi?dbname=1999_register&docid=fr21oc99-15">
+# Federal Register 64, 203 (1999-10-21), page 56705-56707.
+# </a>
+# However, the Federal Register says that West Wendover already operated
+# on mountain time, and the rule merely made this official;
+# hence a separate tz entry is not needed.
+
+# Michigan
+#
+# From Bob Devine (1988-01-28):
+# Michigan didn't observe DST from 1968 to 1973.
+#
+# From Paul Eggert (1999-03-31):
+# Shanks writes that Michigan started using standard time on 1885-09-18,
+# but Howse writes (pp 124-125, referring to Popular Astronomy, 1901-01)
+# that Detroit kept
+#
+#	local time until 1900 when the City Council decreed that clocks should
+#	be put back twenty-eight minutes to Central Standard Time.  Half the
+#	city obeyed, half refused.  After considerable debate, the decision
+#	was rescinded and the city reverted to Sun time.  A derisive offer to
+#	erect a sundial in front of the city hall was referred to the
+#	Committee on Sewers.  Then, in 1905, Central time was adopted
+#	by city vote.
+#
+# This story is too entertaining to be false, so go with Howse over Shanks.
+#
+# From Paul Eggert (2001-03-06):
+# Garland (1927) writes ``Cleveland and Detroit advanced their clocks
+# one hour in 1914.''  This change is not in Shanks.  We have no more
+# info, so omit this for now.
+#
+# Most of Michigan observed DST from 1973 on, but was a bit late in 1975.
+# Rule	NAME	FROM	TO	TYPE	IN	ON	AT	SAVE	LETTER
+Rule	Detroit	1948	only	-	Apr	lastSun	2:00	1:00	D
+Rule	Detroit	1948	only	-	Sep	lastSun	2:00	0	S
+Rule	Detroit	1967	only	-	Jun	14	2:00	1:00	D
+Rule	Detroit	1967	only	-	Oct	lastSun	2:00	0	S
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone America/Detroit	-5:32:11 -	LMT	1905
+			-6:00	-	CST	1915 May 15 2:00
+			-5:00	-	EST	1942
+			-5:00	US	E%sT	1946
+			-5:00	Detroit	E%sT	1973
+			-5:00	US	E%sT	1975
+			-5:00	-	EST	1975 Apr 27 2:00
+			-5:00	US	E%sT
+#
+# Dickinson, Gogebic, Iron, and Menominee Counties, Michigan,
+# switched from EST to CST/CDT in 1973.
+# Rule	NAME	FROM	TO	TYPE	IN	ON	AT	SAVE	LETTER
+Rule Menominee	1946	only	-	Apr	lastSun	2:00	1:00	D
+Rule Menominee	1946	only	-	Sep	lastSun	2:00	0	S
+Rule Menominee	1966	only	-	Apr	lastSun	2:00	1:00	D
+Rule Menominee	1966	only	-	Oct	lastSun	2:00	0	S
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone America/Menominee	-5:50:27 -	LMT	1885 Sep 18 12:00
+			-6:00	US	C%sT	1946
+			-6:00 Menominee	C%sT	1969 Apr 27 2:00
+			-5:00	-	EST	1973 Apr 29 2:00
+			-6:00	US	C%sT
+
+# Navassa
+# administered by the US Fish and Wildlife Service
+# claimed by US under the provisions of the 1856 Guano Islands Act
+# also claimed by Haiti
+# occupied 1857/1900 by the Navassa Phosphate Co
+# US lighthouse 1917/1996-09
+# currently uninhabited
+# see Mark Fineman, ``An Isle Rich in Guano and Discord'',
+# _Los Angeles Times_ (1998-11-10), A1, A10; it cites
+# Jimmy Skaggs, _The Great Guano Rush_ (1994).
+
+################################################################################
+
+
+# From Paul Eggert (2006-03-22):
+# A good source for time zone historical data outside the U.S. is
+# Thomas G. Shanks and Rique Pottenger, The International Atlas (6th edition),
+# San Diego: ACS Publications, Inc. (2003).
+#
+# Gwillim Law writes that a good source
+# for recent time zone data is the International Air Transport
+# Association's Standard Schedules Information Manual (IATA SSIM),
+# published semiannually.  Law sent in several helpful summaries
+# of the IATA's data after 1990.
+#
+# Except where otherwise noted, Shanks & Pottenger is the source for
+# entries through 1990, and IATA SSIM is the source for entries afterwards.
+#
+# Other sources occasionally used include:
+#
+#	Edward W. Whitman, World Time Differences,
+#	Whitman Publishing Co, 2 Niagara Av, Ealing, London (undated),
+#	which I found in the UCLA library.
+#
+#	<a href="http://www.pettswoodvillage.co.uk/Daylight_Savings_William_Willett.pdf">
+#	William Willett, The Waste of Daylight, 19th edition
+#	</a> (1914-03)
+#
+# See the `europe' file for Greenland.
+
+# Canada
+
+# From Alain LaBont<e'> (1994-11-14):
+# I post here the time zone abbreviations standardized in Canada
+# for both English and French in the CAN/CSA-Z234.4-89 standard....
+#
+#	UTC	Standard time	Daylight savings time
+#	offset	French	English	French	English
+#	-2:30	-	-	HAT	NDT
+#	-3	-	-	HAA	ADT
+#	-3:30	HNT	NST	-	-
+#	-4	HNA	AST	HAE	EDT
+#	-5	HNE	EST	HAC	CDT
+#	-6	HNC	CST	HAR	MDT
+#	-7	HNR	MST	HAP	PDT
+#	-8	HNP	PST	HAY	YDT
+#	-9	HNY	YST	-	-
+#
+#	HN: Heure Normale	ST: Standard Time
+#	HA: Heure Avanc<e'>e	DT: Daylight saving Time
+#
+#	A: de l'Atlantique	Atlantic
+#	C: du Centre		Central
+#	E: de l'Est		Eastern
+#	M:			Mountain
+#	N:			Newfoundland
+#	P: du Pacifique		Pacific
+#	R: des Rocheuses
+#	T: de Terre-Neuve
+#	Y: du Yukon		Yukon
+#
+# From Paul Eggert (1994-11-22):
+# Alas, this sort of thing must be handled by localization software.
+
+# Unless otherwise specified, the data for Canada are all from Shanks
+# & Pottenger.
+
+# From Chris Walton (2006-04-01, 2006-04-25, 2006-06-26, 2007-01-31,
+# 2007-03-01):
+# The British Columbia government announced yesterday that it will
+# adjust daylight savings next year to align with changes in the
+# U.S. and the rest of Canada....
+# http://www2.news.gov.bc.ca/news_releases_2005-2009/2006AG0014-000330.htm
+# ...
+# Nova Scotia
+# Daylight saving time will be extended by four weeks starting in 2007....
+# http://www.gov.ns.ca/just/regulations/rg2/2006/ma1206.pdf
+#
+# [For New Brunswick] the new legislation dictates that the time change is to
+# be done at 02:00 instead of 00:01.
+# http://www.gnb.ca/0062/acts/BBA-2006/Chap-19.pdf
+# ...
+# Manitoba has traditionally changed the clock every fall at 03:00.
+# As of 2006, the transition is to take place one hour earlier at 02:00.
+# http://web2.gov.mb.ca/laws/statutes/ccsm/o030e.php
+# ...
+# [Alberta, Ontario, Quebec] will follow US rules.
+# http://www.qp.gov.ab.ca/documents/spring/CH03_06.CFM
+# http://www.e-laws.gov.on.ca/DBLaws/Source/Regs/English/2006/R06111_e.htm
+# http://www2.publicationsduquebec.gouv.qc.ca/dynamicSearch/telecharge.php?type=5&file=2006C39A.PDF
+# ...
+# P.E.I. will follow US rules....
+# http://www.assembly.pe.ca/bills/pdf_chapter/62/3/chapter-41.pdf
+# ...
+# Province of Newfoundland and Labrador....
+# http://www.hoa.gov.nl.ca/hoa/bills/Bill0634.htm
+# ...
+# Yukon
+# http://www.gov.yk.ca/legislation/regs/oic2006_127.pdf
+# ...
+# N.W.T. will follow US rules.  Whoever maintains the government web site
+# does not seem to believe in bookmarks.  To see the news release, click the
+# following link and search for "Daylight Savings Time Change".  Press the
+# "Daylight Savings Time Change" link; it will fire off a popup using
+# JavaScript.
+# http://www.exec.gov.nt.ca/currentnews/currentPR.asp?mode=archive
+# ...
+# Nunavut
+# An amendment to the Interpretation Act was registered on February 19/2007....
+# http://action.attavik.ca/home/justice-gn/attach/2007/gaz02part2.pdf
+
+# From Paul Eggert (2006-04-25):
+# H. David Matthews and Mary Vincent's map
+# <a href="http://www.canadiangeographic.ca/Magazine/SO98/geomap.asp">
+# "It's about TIME", _Canadian Geographic_ (September-October 1998)
+# </a> contains detailed boundaries for regions observing nonstandard
+# time and daylight saving time arrangements in Canada circa 1998.
+#
+# INMS, the Institute for National Measurement Standards in Ottawa, has <a
+# href="http://inms-ienm.nrc-cnrc.gc.ca/en/time_services/daylight_saving_e.php">
+# information about standard and daylight saving time zones in Canada.
+# </a> (updated periodically).
+# Its unofficial information is often taken from Matthews and Vincent.
+
+# From Paul Eggert (2006-06-27):
+# For now, assume all of DST-observing Canada will fall into line with the
+# new US DST rules,
+
+# Rule	NAME	FROM	TO	TYPE	IN	ON	AT	SAVE	LETTER/S
+Rule	Canada	1918	only	-	Apr	14	2:00	1:00	D
+Rule	Canada	1918	only	-	Oct	31	2:00	0	S
+Rule	Canada	1942	only	-	Feb	 9	2:00	1:00	W # War
+Rule	Canada	1945	only	-	Aug	14	23:00u	1:00	P # Peace
+Rule	Canada	1945	only	-	Sep	30	2:00	0	S
+Rule	Canada	1974	1986	-	Apr	lastSun	2:00	1:00	D
+Rule	Canada	1974	2006	-	Oct	lastSun	2:00	0	S
+Rule	Canada	1987	2006	-	Apr	Sun>=1	2:00	1:00	D
+Rule	Canada	2007	max	-	Mar	Sun>=8	2:00	1:00	D
+Rule	Canada	2007	max	-	Nov	Sun>=1	2:00	0	S
+
+
+# Newfoundland and Labrador
+
+# From Paul Eggert (2000-10-02):
+# Matthews and Vincent (1998) write that Labrador should use NST/NDT,
+# but the only part of Labrador that follows the rules is the
+# southeast corner, including Port Hope Simpson and Mary's Harbour,
+# but excluding, say, Black Tickle.
+
+# Rule	NAME	FROM	TO	TYPE	IN	ON	AT	SAVE	LETTER/S
+Rule	StJohns	1917	only	-	Apr	 8	2:00	1:00	D
+Rule	StJohns	1917	only	-	Sep	17	2:00	0	S
+# Whitman gives 1919 Apr 5 and 1920 Apr 5; go with Shanks & Pottenger.
+Rule	StJohns	1919	only	-	May	 5	23:00	1:00	D
+Rule	StJohns	1919	only	-	Aug	12	23:00	0	S
+# For 1931-1935 Whitman gives Apr same date; go with Shanks & Pottenger.
+Rule	StJohns	1920	1935	-	May	Sun>=1	23:00	1:00	D
+Rule	StJohns	1920	1935	-	Oct	lastSun	23:00	0	S
+# For 1936-1941 Whitman gives May Sun>=8 and Oct Sun>=1; go with Shanks &
+# Pottenger.
+Rule	StJohns	1936	1941	-	May	Mon>=9	0:00	1:00	D
+Rule	StJohns	1936	1941	-	Oct	Mon>=2	0:00	0	S
+# Whitman gives the following transitions:
+# 1942 03-01/12-31, 1943 05-30/09-05, 1944 07-10/09-02, 1945 01-01/10-07
+# but go with Shanks & Pottenger and assume they used Canadian rules.
+# For 1946-9 Whitman gives May 5,4,9,1 - Oct 1,5,3,2, and for 1950 he gives
+# Apr 30 - Sep 24; go with Shanks & Pottenger.
+Rule	StJohns	1946	1950	-	May	Sun>=8	2:00	1:00	D
+Rule	StJohns	1946	1950	-	Oct	Sun>=2	2:00	0	S
+Rule	StJohns	1951	1986	-	Apr	lastSun	2:00	1:00	D
+Rule	StJohns	1951	1959	-	Sep	lastSun	2:00	0	S
+Rule	StJohns	1960	1986	-	Oct	lastSun	2:00	0	S
+# From Paul Eggert (2000-10-02):
+# INMS (2000-09-12) says that, since 1988 at least, Newfoundland switches
+# at 00:01 local time.  For now, assume it started in 1987.
+Rule	StJohns	1987	only	-	Apr	Sun>=1	0:01	1:00	D
+Rule	StJohns	1987	2006	-	Oct	lastSun	0:01	0	S
+Rule	StJohns	1988	only	-	Apr	Sun>=1	0:01	2:00	DD
+Rule	StJohns	1989	2006	-	Apr	Sun>=1	0:01	1:00	D
+Rule	StJohns	2007	max	-	Mar	Sun>=8	0:01	1:00	D
+Rule	StJohns	2007	max	-	Nov	Sun>=1	0:01	0	S
+#
+# St John's has an apostrophe, but Posix file names can't have apostrophes.
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone America/St_Johns	-3:30:52 -	LMT	1884
+			-3:30:52 StJohns N%sT	1918
+			-3:30:52 Canada	N%sT	1919
+			-3:30:52 StJohns N%sT	1935 Mar 30
+			-3:30	StJohns	N%sT	1942 May 11
+			-3:30	Canada	N%sT	1946
+			-3:30	StJohns	N%sT
+
+# most of east Labrador
+
+# The name `Happy Valley-Goose Bay' is too long; use `Goose Bay'.
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone America/Goose_Bay	-4:01:40 -	LMT	1884 # Happy Valley-Goose Bay
+			-3:30:52 -	NST	1918
+			-3:30:52 Canada N%sT	1919
+			-3:30:52 -	NST	1935 Mar 30
+			-3:30	-	NST	1936
+			-3:30	StJohns	N%sT	1942 May 11
+			-3:30	Canada	N%sT	1946
+			-3:30	StJohns	N%sT	1966 Mar 15 2:00
+			-4:00	StJohns	A%sT
+
+
+# west Labrador, Nova Scotia, Prince Edward I
+
+# From Paul Eggert (2006-03-22):
+# Shanks & Pottenger write that since 1970 most of this region has been like
+# Halifax.  Many locales did not observe peacetime DST until 1972;
+# Glace Bay, NS is the largest that we know of.
+# Shanks & Pottenger also write that Liverpool, NS was the only town
+# in Canada to observe DST in 1971 but not 1970; for now we'll assume
+# this is a typo.
+
+# Rule	NAME	FROM	TO	TYPE	IN	ON	AT	SAVE	LETTER/S
+Rule	Halifax	1916	only	-	Apr	 1	0:00	1:00	D
+Rule	Halifax	1916	only	-	Oct	 1	0:00	0	S
+Rule	Halifax	1920	only	-	May	 9	0:00	1:00	D
+Rule	Halifax	1920	only	-	Aug	29	0:00	0	S
+Rule	Halifax	1921	only	-	May	 6	0:00	1:00	D
+Rule	Halifax	1921	1922	-	Sep	 5	0:00	0	S
+Rule	Halifax	1922	only	-	Apr	30	0:00	1:00	D
+Rule	Halifax	1923	1925	-	May	Sun>=1	0:00	1:00	D
+Rule	Halifax	1923	only	-	Sep	 4	0:00	0	S
+Rule	Halifax	1924	only	-	Sep	15	0:00	0	S
+Rule	Halifax	1925	only	-	Sep	28	0:00	0	S
+Rule	Halifax	1926	only	-	May	16	0:00	1:00	D
+Rule	Halifax	1926	only	-	Sep	13	0:00	0	S
+Rule	Halifax	1927	only	-	May	 1	0:00	1:00	D
+Rule	Halifax	1927	only	-	Sep	26	0:00	0	S
+Rule	Halifax	1928	1931	-	May	Sun>=8	0:00	1:00	D
+Rule	Halifax	1928	only	-	Sep	 9	0:00	0	S
+Rule	Halifax	1929	only	-	Sep	 3	0:00	0	S
+Rule	Halifax	1930	only	-	Sep	15	0:00	0	S
+Rule	Halifax	1931	1932	-	Sep	Mon>=24	0:00	0	S
+Rule	Halifax	1932	only	-	May	 1	0:00	1:00	D
+Rule	Halifax	1933	only	-	Apr	30	0:00	1:00	D
+Rule	Halifax	1933	only	-	Oct	 2	0:00	0	S
+Rule	Halifax	1934	only	-	May	20	0:00	1:00	D
+Rule	Halifax	1934	only	-	Sep	16	0:00	0	S
+Rule	Halifax	1935	only	-	Jun	 2	0:00	1:00	D
+Rule	Halifax	1935	only	-	Sep	30	0:00	0	S
+Rule	Halifax	1936	only	-	Jun	 1	0:00	1:00	D
+Rule	Halifax	1936	only	-	Sep	14	0:00	0	S
+Rule	Halifax	1937	1938	-	May	Sun>=1	0:00	1:00	D
+Rule	Halifax	1937	1941	-	Sep	Mon>=24	0:00	0	S
+Rule	Halifax	1939	only	-	May	28	0:00	1:00	D
+Rule	Halifax	1940	1941	-	May	Sun>=1	0:00	1:00	D
+Rule	Halifax	1946	1949	-	Apr	lastSun	2:00	1:00	D
+Rule	Halifax	1946	1949	-	Sep	lastSun	2:00	0	S
+Rule	Halifax	1951	1954	-	Apr	lastSun	2:00	1:00	D
+Rule	Halifax	1951	1954	-	Sep	lastSun	2:00	0	S
+Rule	Halifax	1956	1959	-	Apr	lastSun	2:00	1:00	D
+Rule	Halifax	1956	1959	-	Sep	lastSun	2:00	0	S
+Rule	Halifax	1962	1973	-	Apr	lastSun	2:00	1:00	D
+Rule	Halifax	1962	1973	-	Oct	lastSun	2:00	0	S
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone America/Halifax	-4:14:24 -	LMT	1902 Jun 15
+			-4:00	Halifax	A%sT	1918
+			-4:00	Canada	A%sT	1919
+			-4:00	Halifax	A%sT	1942 Feb  9 2:00s
+			-4:00	Canada	A%sT	1946
+			-4:00	Halifax	A%sT	1974
+			-4:00	Canada	A%sT
+Zone America/Glace_Bay	-3:59:48 -	LMT	1902 Jun 15
+			-4:00	Canada	A%sT	1953
+			-4:00	Halifax	A%sT	1954
+			-4:00	-	AST	1972
+			-4:00	Halifax	A%sT	1974
+			-4:00	Canada	A%sT
+
+# New Brunswick
+
+# From Paul Eggert (2007-01-31):
+# The Time Definition Act <http://www.gnb.ca/0062/PDF-acts/t-06.pdf>
+# says they changed at 00:01 through 2006, and
+# <http://www.canlii.org/nb/laws/sta/t-6/20030127/whole.html> makes it
+# clear that this was the case since at least 1993.
+# For now, assume it started in 1993.
+
+# Rule	NAME	FROM	TO	TYPE	IN	ON	AT	SAVE	LETTER/S
+Rule	Moncton	1933	1935	-	Jun	Sun>=8	1:00	1:00	D
+Rule	Moncton	1933	1935	-	Sep	Sun>=8	1:00	0	S
+Rule	Moncton	1936	1938	-	Jun	Sun>=1	1:00	1:00	D
+Rule	Moncton	1936	1938	-	Sep	Sun>=1	1:00	0	S
+Rule	Moncton	1939	only	-	May	27	1:00	1:00	D
+Rule	Moncton	1939	1941	-	Sep	Sat>=21	1:00	0	S
+Rule	Moncton	1940	only	-	May	19	1:00	1:00	D
+Rule	Moncton	1941	only	-	May	 4	1:00	1:00	D
+Rule	Moncton	1946	1972	-	Apr	lastSun	2:00	1:00	D
+Rule	Moncton	1946	1956	-	Sep	lastSun	2:00	0	S
+Rule	Moncton	1957	1972	-	Oct	lastSun	2:00	0	S
+Rule	Moncton	1993	2006	-	Apr	Sun>=1	0:01	1:00	D
+Rule	Moncton	1993	2006	-	Oct	lastSun	0:01	0	S
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone America/Moncton	-4:19:08 -	LMT	1883 Dec  9
+			-5:00	-	EST	1902 Jun 15
+			-4:00	Canada	A%sT	1933
+			-4:00	Moncton	A%sT	1942
+			-4:00	Canada	A%sT	1946
+			-4:00	Moncton	A%sT	1973
+			-4:00	Canada	A%sT	1993
+			-4:00	Moncton	A%sT	2007
+			-4:00	Canada	A%sT
+
+# Quebec
+
+# From Paul Eggert (2006-07-09):
+# Shanks & Pottenger write that since 1970 most of Quebec has been
+# like Montreal.
+
+# From Paul Eggert (2006-06-27):
+# Matthews and Vincent (1998) also write that Quebec east of the -63
+# meridian is supposed to observe AST, but residents as far east as
+# Natashquan use EST/EDT, and residents east of Natashquan use AST.
+# In "Official time in Quebec" the Quebec department of justice writes in
+# http://www.justice.gouv.qc.ca/english/publications/generale/temps-regl-1-a.htm
+# that "The residents of the Municipality of the
+# Cote-Nord-du-Golfe-Saint-Laurent and the municipalities of Saint-Augustin,
+# Bonne-Esperance and Blanc-Sablon apply the Official Time Act as it is
+# written and use Atlantic standard time all year round. The same applies to
+# the residents of the Native facilities along the lower North Shore."
+# <http://www.assnat.qc.ca/eng/37legislature2/Projets-loi/Publics/06-a002.htm>
+# says this common practice was codified into law as of 2007.
+# For lack of better info, guess this practice began around 1970, contra to
+# Shanks & Pottenger who have this region observing AST/ADT.
+
+# Rule	NAME	FROM	TO	TYPE	IN	ON	AT	SAVE	LETTER/S
+Rule	Mont	1917	only	-	Mar	25	2:00	1:00	D
+Rule	Mont	1917	only	-	Apr	24	0:00	0	S
+Rule	Mont	1919	only	-	Mar	31	2:30	1:00	D
+Rule	Mont	1919	only	-	Oct	25	2:30	0	S
+Rule	Mont	1920	only	-	May	 2	2:30	1:00	D
+Rule	Mont	1920	1922	-	Oct	Sun>=1	2:30	0	S
+Rule	Mont	1921	only	-	May	 1	2:00	1:00	D
+Rule	Mont	1922	only	-	Apr	30	2:00	1:00	D
+Rule	Mont	1924	only	-	May	17	2:00	1:00	D
+Rule	Mont	1924	1926	-	Sep	lastSun	2:30	0	S
+Rule	Mont	1925	1926	-	May	Sun>=1	2:00	1:00	D
+# The 1927-to-1937 rules can be expressed more simply as
+# Rule	Mont	1927	1937	-	Apr	lastSat	24:00	1:00	D
+# Rule	Mont	1927	1937	-	Sep	lastSat	24:00	0	S
+# The rules below avoid use of 24:00
+# (which pre-1998 versions of zic cannot handle).
+Rule	Mont	1927	only	-	May	1	0:00	1:00	D
+Rule	Mont	1927	1932	-	Sep	lastSun	0:00	0	S
+Rule	Mont	1928	1931	-	Apr	lastSun	0:00	1:00	D
+Rule	Mont	1932	only	-	May	1	0:00	1:00	D
+Rule	Mont	1933	1940	-	Apr	lastSun	0:00	1:00	D
+Rule	Mont	1933	only	-	Oct	1	0:00	0	S
+Rule	Mont	1934	1939	-	Sep	lastSun	0:00	0	S
+Rule	Mont	1946	1973	-	Apr	lastSun	2:00	1:00	D
+Rule	Mont	1945	1948	-	Sep	lastSun	2:00	0	S
+Rule	Mont	1949	1950	-	Oct	lastSun	2:00	0	S
+Rule	Mont	1951	1956	-	Sep	lastSun	2:00	0	S
+Rule	Mont	1957	1973	-	Oct	lastSun	2:00	0	S
+
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone America/Blanc-Sablon -3:48:28 -	LMT	1884
+			-4:00	Canada	A%sT	1970
+			-4:00	-	AST
+Zone America/Montreal	-4:54:16 -	LMT	1884
+			-5:00	Mont	E%sT	1918
+			-5:00	Canada	E%sT	1919
+			-5:00	Mont	E%sT	1942 Feb  9 2:00s
+			-5:00	Canada	E%sT	1946
+			-5:00	Mont	E%sT	1974
+			-5:00	Canada	E%sT
+
+
+# Ontario
+
+# From Paul Eggert (2006-07-09):
+# Shanks & Pottenger write that since 1970 most of Ontario has been like
+# Toronto.
+# Thunder Bay skipped DST in 1973.
+# Many smaller locales did not observe peacetime DST until 1974;
+# Nipigon (EST) and Rainy River (CST) are the largest that we know of.
+# Far west Ontario is like Winnipeg; far east Quebec is like Halifax.
+
+# From Mark Brader (2003-07-26):
+# [According to the Toronto Star] Orillia, Ontario, adopted DST
+# effective Saturday, 1912-06-22, 22:00; the article mentions that
+# Port Arthur (now part of Thunder Bay, Ontario) as well as Moose Jaw
+# have already done so.  In Orillia DST was to run until Saturday,
+# 1912-08-31 (no time mentioned), but it was met with considerable
+# hostility from certain segments of the public, and was revoked after
+# only two weeks -- I copied it as Saturday, 1912-07-07, 22:00, but
+# presumably that should be -07-06.  (1912-06-19, -07-12; also letters
+# earlier in June).
+#
+# Kenora, Ontario, was to abandon DST on 1914-06-01 (-05-21).
+
+# From Paul Eggert (1997-10-17):
+# Mark Brader writes that an article in the 1997-10-14 Toronto Star
+# says that Atikokan, Ontario currently does not observe DST,
+# but will vote on 11-10 whether to use EST/EDT.
+# He also writes that the
+# <a href="http://www.gov.on.ca/MBS/english/publications/statregs/conttext.html">
+# Ontario Time Act (1990, Chapter T.9)
+# </a>
+# says that Ontario east of 90W uses EST/EDT, and west of 90W uses CST/CDT.
+# Officially Atikokan is therefore on CST/CDT, and most likely this report
+# concerns a non-official time observed as a matter of local practice.
+#
+# From Paul Eggert (2000-10-02):
+# Matthews and Vincent (1998) write that Atikokan, Pickle Lake, and
+# New Osnaburgh observe CST all year, that Big Trout Lake observes
+# CST/CDT, and that Upsala and Shebandowan observe EST/EDT, all in
+# violation of the official Ontario rules.
+#
+# From Paul Eggert (2006-07-09):
+# Chris Walton (2006-07-06) mentioned an article by Stephanie MacLellan in the
+# 2005-07-21 Chronicle-Journal, which said:
+#
+#	The clocks in Atikokan stay set on standard time year-round.
+#	This means they spend about half the time on central time and
+#	the other half on eastern time.
+#
+#	For the most part, the system works, Mayor Dennis Brown said.
+#
+#	"The majority of businesses in Atikokan deal more with Eastern
+#	Canada, but there are some that deal with Western Canada," he
+#	said.  "I don't see any changes happening here."
+#
+# Walton also writes "Supposedly Pickle Lake and Mishkeegogamang
+# [New Osnaburgh] follow the same practice."
+
+# From Garry McKinnon (2006-07-14) via Chris Walton:
+# I chatted with a member of my board who has an outstanding memory
+# and a long history in Atikokan (and in the telecom industry) and he
+# can say for certain that Atikokan has been practicing the current
+# time keeping since 1952, at least.
+
+# From Paul Eggert (2006-07-17):
+# Shanks & Pottenger say that Atikokan has agreed with Rainy River
+# ever since standard time was introduced, but the information from
+# McKinnon sounds more authoritative.  For now, assume that Atikokan
+# switched to EST immediately after WWII era daylight saving time
+# ended.  This matches the old (less-populous) America/Coral_Harbour
+# entry since our cutoff date of 1970, so we can move
+# America/Coral_Harbour to the 'backward' file.
+
+# Rule	NAME	FROM	TO	TYPE	IN	ON	AT	SAVE	LETTER/S
+Rule	Toronto	1919	only	-	Mar	30	23:30	1:00	D
+Rule	Toronto	1919	only	-	Oct	26	0:00	0	S
+Rule	Toronto	1920	only	-	May	 2	2:00	1:00	D
+Rule	Toronto	1920	only	-	Sep	26	0:00	0	S
+Rule	Toronto	1921	only	-	May	15	2:00	1:00	D
+Rule	Toronto	1921	only	-	Sep	15	2:00	0	S
+Rule	Toronto	1922	1923	-	May	Sun>=8	2:00	1:00	D
+# Shanks & Pottenger say 1923-09-19; assume it's a typo and that "-16"
+# was meant.
+Rule	Toronto	1922	1926	-	Sep	Sun>=15	2:00	0	S
+Rule	Toronto	1924	1927	-	May	Sun>=1	2:00	1:00	D
+# The 1927-to-1939 rules can be expressed more simply as
+# Rule	Toronto	1927	1937	-	Sep	Sun>=25	2:00	0	S
+# Rule	Toronto	1928	1937	-	Apr	Sun>=25	2:00	1:00	D
+# Rule	Toronto	1938	1940	-	Apr	lastSun	2:00	1:00	D
+# Rule	Toronto	1938	1939	-	Sep	lastSun	2:00	0	S
+# The rules below avoid use of Sun>=25
+# (which pre-2004 versions of zic cannot handle).
+Rule	Toronto	1927	1932	-	Sep	lastSun	2:00	0	S
+Rule	Toronto	1928	1931	-	Apr	lastSun	2:00	1:00	D
+Rule	Toronto	1932	only	-	May	1	2:00	1:00	D
+Rule	Toronto	1933	1940	-	Apr	lastSun	2:00	1:00	D
+Rule	Toronto	1933	only	-	Oct	1	2:00	0	S
+Rule	Toronto	1934	1939	-	Sep	lastSun	2:00	0	S
+Rule	Toronto	1945	1946	-	Sep	lastSun	2:00	0	S
+Rule	Toronto	1946	only	-	Apr	lastSun	2:00	1:00	D
+Rule	Toronto	1947	1949	-	Apr	lastSun	0:00	1:00	D
+Rule	Toronto	1947	1948	-	Sep	lastSun	0:00	0	S
+Rule	Toronto	1949	only	-	Nov	lastSun	0:00	0	S
+Rule	Toronto	1950	1973	-	Apr	lastSun	2:00	1:00	D
+Rule	Toronto	1950	only	-	Nov	lastSun	2:00	0	S
+Rule	Toronto	1951	1956	-	Sep	lastSun	2:00	0	S
+# Shanks & Pottenger say Toronto ended DST a week early in 1971,
+# namely on 1971-10-24, but Mark Brader wrote (2003-05-31) that this
+# is wrong, and that he had confirmed it by checking the 1971-10-30
+# Toronto Star, which said that DST was ending 1971-10-31 as usual.
+Rule	Toronto	1957	1973	-	Oct	lastSun	2:00	0	S
+
+# From Paul Eggert (2003-07-27):
+# Willett (1914-03) writes (p. 17) "In the Cities of Fort William, and
+# Port Arthur, Ontario, the principle of the Bill has been in
+# operation for the past three years, and in the City of Moose Jaw,
+# Saskatchewan, for one year."
+
+# From David Bryan via Tory Tronrud, Director/Curator,
+# Thunder Bay Museum (2003-11-12):
+# There is some suggestion, however, that, by-law or not, daylight
+# savings time was being practiced in Fort William and Port Arthur
+# before 1909.... [I]n 1910, the line between the Eastern and Central
+# Time Zones was permanently moved about two hundred miles west to
+# include the Thunder Bay area....  When Canada adopted daylight
+# savings time in 1916, Fort William and Port Arthur, having done so
+# already, did not change their clocks....  During the Second World
+# War,... [t]he cities agreed to implement DST during the summer
+# months for the remainder of the war years.
+
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone America/Toronto	-5:17:32 -	LMT	1895
+			-5:00	Canada	E%sT	1919
+			-5:00	Toronto	E%sT	1942 Feb  9 2:00s
+			-5:00	Canada	E%sT	1946
+			-5:00	Toronto	E%sT	1974
+			-5:00	Canada	E%sT
+Zone America/Thunder_Bay -5:57:00 -	LMT	1895
+			-6:00	-	CST	1910
+			-5:00	-	EST	1942
+			-5:00	Canada	E%sT	1970
+			-5:00	Mont	E%sT	1973
+			-5:00	-	EST	1974
+			-5:00	Canada	E%sT
+Zone America/Nipigon	-5:53:04 -	LMT	1895
+			-5:00	Canada	E%sT	1940 Sep 29
+			-5:00	1:00	EDT	1942 Feb  9 2:00s
+			-5:00	Canada	E%sT
+Zone America/Rainy_River -6:18:16 -	LMT	1895
+			-6:00	Canada	C%sT	1940 Sep 29
+			-6:00	1:00	CDT	1942 Feb  9 2:00s
+			-6:00	Canada	C%sT
+Zone America/Atikokan	-6:06:28 -	LMT	1895
+			-6:00	Canada	C%sT	1940 Sep 29
+			-6:00	1:00	CDT	1942 Feb  9 2:00s
+			-6:00	Canada	C%sT	1945 Sep 30 2:00
+			-5:00	-	EST
+
+
+# Manitoba
+
+# From Rob Douglas (2006-04-06):
+# the old Manitoba Time Act - as amended by Bill 2, assented to
+# March 27, 1987 ... said ...
+# "between two o'clock Central Standard Time in the morning of
+# the first Sunday of April of each year and two o'clock Central
+# Standard Time in the morning of the last Sunday of October next
+# following, one hour in advance of Central Standard Time."...
+# I believe that the English legislation [of the old time act] had =
+# been assented to (March 22, 1967)....
+# Also, as far as I can tell, there was no order-in-council varying
+# the time of Daylight Saving Time for 2005 and so the provisions of
+# the 1987 version would apply - the changeover was at 2:00 Central
+# Standard Time (i.e. not until 3:00 Central Daylight Time).
+
+# From Paul Eggert (2006-04-10):
+# Shanks & Pottenger say Manitoba switched at 02:00 (not 02:00s)
+# starting 1966.  Since 02:00s is clearly correct for 1967 on, assume
+# it was also 02:00s in 1966.
+
+# Rule	NAME	FROM	TO	TYPE	IN	ON	AT	SAVE	LETTER/S
+Rule	Winn	1916	only	-	Apr	23	0:00	1:00	D
+Rule	Winn	1916	only	-	Sep	17	0:00	0	S
+Rule	Winn	1918	only	-	Apr	14	2:00	1:00	D
+Rule	Winn	1918	only	-	Oct	31	2:00	0	S
+Rule	Winn	1937	only	-	May	16	2:00	1:00	D
+Rule	Winn	1937	only	-	Sep	26	2:00	0	S
+Rule	Winn	1942	only	-	Feb	 9	2:00	1:00	W # War
+Rule	Winn	1945	only	-	Aug	14	23:00u	1:00	P # Peace
+Rule	Winn	1945	only	-	Sep	lastSun	2:00	0	S
+Rule	Winn	1946	only	-	May	12	2:00	1:00	D
+Rule	Winn	1946	only	-	Oct	13	2:00	0	S
+Rule	Winn	1947	1949	-	Apr	lastSun	2:00	1:00	D
+Rule	Winn	1947	1949	-	Sep	lastSun	2:00	0	S
+Rule	Winn	1950	only	-	May	 1	2:00	1:00	D
+Rule	Winn	1950	only	-	Sep	30	2:00	0	S
+Rule	Winn	1951	1960	-	Apr	lastSun	2:00	1:00	D
+Rule	Winn	1951	1958	-	Sep	lastSun	2:00	0	S
+Rule	Winn	1959	only	-	Oct	lastSun	2:00	0	S
+Rule	Winn	1960	only	-	Sep	lastSun	2:00	0	S
+Rule	Winn	1963	only	-	Apr	lastSun	2:00	1:00	D
+Rule	Winn	1963	only	-	Sep	22	2:00	0	S
+Rule	Winn	1966	1986	-	Apr	lastSun	2:00s	1:00	D
+Rule	Winn	1966	2005	-	Oct	lastSun	2:00s	0	S
+Rule	Winn	1987	2005	-	Apr	Sun>=1	2:00s	1:00	D
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone America/Winnipeg	-6:28:36 -	LMT	1887 Jul 16
+			-6:00	Winn	C%sT	2006
+			-6:00	Canada	C%sT
+
+
+# Saskatchewan
+
+# From Mark Brader (2003-07-26):
+# The first actual adoption of DST in Canada was at the municipal
+# level.  As the [Toronto] Star put it (1912-06-07), "While people
+# elsewhere have long been talking of legislation to save daylight,
+# the city of Moose Jaw [Saskatchewan] has acted on its own hook."
+# DST in Moose Jaw began on Saturday, 1912-06-01 (no time mentioned:
+# presumably late evening, as below), and would run until "the end of
+# the summer".  The discrepancy between municipal time and railroad
+# time was noted.
+
+# From Paul Eggert (2003-07-27):
+# Willett (1914-03) notes that DST "has been in operation ... in the
+# City of Moose Jaw, Saskatchewan, for one year."
+
+# From Paul Eggert (2006-03-22):
+# Shanks & Pottenger say that since 1970 this region has mostly been as Regina.
+# Some western towns (e.g. Swift Current) switched from MST/MDT to CST in 1972.
+# Other western towns (e.g. Lloydminster) are like Edmonton.
+# Matthews and Vincent (1998) write that Denare Beach and Creighton
+# are like Winnipeg, in violation of Saskatchewan law.
+
+# From W. Jones (1992-11-06):
+# The. . .below is based on information I got from our law library, the
+# provincial archives, and the provincial Community Services department.
+# A precise history would require digging through newspaper archives, and
+# since you didn't say what you wanted, I didn't bother.
+#
+# Saskatchewan is split by a time zone meridian (105W) and over the years
+# the boundary became pretty ragged as communities near it reevaluated
+# their affiliations in one direction or the other.  In 1965 a provincial
+# referendum favoured legislating common time practices.
+#
+# On 15 April 1966 the Time Act (c. T-14, Revised Statutes of
+# Saskatchewan 1978) was proclaimed, and established that the eastern
+# part of Saskatchewan would use CST year round, that districts in
+# northwest Saskatchewan would by default follow CST but could opt to
+# follow Mountain Time rules (thus 1 hour difference in the winter and
+# zero in the summer), and that districts in southwest Saskatchewan would
+# by default follow MT but could opt to follow CST.
+#
+# It took a few years for the dust to settle (I know one story of a town
+# on one time zone having its school in another, such that a mom had to
+# serve her family lunch in two shifts), but presently it seems that only
+# a few towns on the border with Alberta (e.g. Lloydminster) follow MT
+# rules any more; all other districts appear to have used CST year round
+# since sometime in the 1960s.
+
+# From Chris Walton (2006-06-26):
+# The Saskatchewan time act which was last updated in 1996 is about 30 pages
+# long and rather painful to read.
+# http://www.qp.gov.sk.ca/documents/English/Statutes/Statutes/T14.pdf
+
+# Rule	NAME	FROM	TO	TYPE	IN	ON	AT	SAVE	LETTER/S
+Rule	Regina	1918	only	-	Apr	14	2:00	1:00	D
+Rule	Regina	1918	only	-	Oct	31	2:00	0	S
+Rule	Regina	1930	1934	-	May	Sun>=1	0:00	1:00	D
+Rule	Regina	1930	1934	-	Oct	Sun>=1	0:00	0	S
+Rule	Regina	1937	1941	-	Apr	Sun>=8	0:00	1:00	D
+Rule	Regina	1937	only	-	Oct	Sun>=8	0:00	0	S
+Rule	Regina	1938	only	-	Oct	Sun>=1	0:00	0	S
+Rule	Regina	1939	1941	-	Oct	Sun>=8	0:00	0	S
+Rule	Regina	1942	only	-	Feb	 9	2:00	1:00	W # War
+Rule	Regina	1945	only	-	Aug	14	23:00u	1:00	P # Peace
+Rule	Regina	1945	only	-	Sep	lastSun	2:00	0	S
+Rule	Regina	1946	only	-	Apr	Sun>=8	2:00	1:00	D
+Rule	Regina	1946	only	-	Oct	Sun>=8	2:00	0	S
+Rule	Regina	1947	1957	-	Apr	lastSun	2:00	1:00	D
+Rule	Regina	1947	1957	-	Sep	lastSun	2:00	0	S
+Rule	Regina	1959	only	-	Apr	lastSun	2:00	1:00	D
+Rule	Regina	1959	only	-	Oct	lastSun	2:00	0	S
+#
+Rule	Swift	1957	only	-	Apr	lastSun	2:00	1:00	D
+Rule	Swift	1957	only	-	Oct	lastSun	2:00	0	S
+Rule	Swift	1959	1961	-	Apr	lastSun	2:00	1:00	D
+Rule	Swift	1959	only	-	Oct	lastSun	2:00	0	S
+Rule	Swift	1960	1961	-	Sep	lastSun	2:00	0	S
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone America/Regina	-6:58:36 -	LMT	1905 Sep
+			-7:00	Regina	M%sT	1960 Apr lastSun 2:00
+			-6:00	-	CST
+Zone America/Swift_Current -7:11:20 -	LMT	1905 Sep
+			-7:00	Canada	M%sT	1946 Apr lastSun 2:00
+			-7:00	Regina	M%sT	1950
+			-7:00	Swift	M%sT	1972 Apr lastSun 2:00
+			-6:00	-	CST
+
+
+# Alberta
+
+# Rule	NAME	FROM	TO	TYPE	IN	ON	AT	SAVE	LETTER/S
+Rule	Edm	1918	1919	-	Apr	Sun>=8	2:00	1:00	D
+Rule	Edm	1918	only	-	Oct	31	2:00	0	S
+Rule	Edm	1919	only	-	May	27	2:00	0	S
+Rule	Edm	1920	1923	-	Apr	lastSun	2:00	1:00	D
+Rule	Edm	1920	only	-	Oct	lastSun	2:00	0	S
+Rule	Edm	1921	1923	-	Sep	lastSun	2:00	0	S
+Rule	Edm	1942	only	-	Feb	 9	2:00	1:00	W # War
+Rule	Edm	1945	only	-	Aug	14	23:00u	1:00	P # Peace
+Rule	Edm	1945	only	-	Sep	lastSun	2:00	0	S
+Rule	Edm	1947	only	-	Apr	lastSun	2:00	1:00	D
+Rule	Edm	1947	only	-	Sep	lastSun	2:00	0	S
+Rule	Edm	1967	only	-	Apr	lastSun	2:00	1:00	D
+Rule	Edm	1967	only	-	Oct	lastSun	2:00	0	S
+Rule	Edm	1969	only	-	Apr	lastSun	2:00	1:00	D
+Rule	Edm	1969	only	-	Oct	lastSun	2:00	0	S
+Rule	Edm	1972	1986	-	Apr	lastSun	2:00	1:00	D
+Rule	Edm	1972	2006	-	Oct	lastSun	2:00	0	S
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone America/Edmonton	-7:33:52 -	LMT	1906 Sep
+			-7:00	Edm	M%sT	1987
+			-7:00	Canada	M%sT
+
+
+# British Columbia
+
+# From Paul Eggert (2006-03-22):
+# Shanks & Pottenger write that since 1970 most of this region has
+# been like Vancouver.
+# Dawson Creek uses MST.  Much of east BC is like Edmonton.
+# Matthews and Vincent (1998) write that Creston is like Dawson Creek.
+
+# Rule	NAME	FROM	TO	TYPE	IN	ON	AT	SAVE	LETTER/S
+Rule	Vanc	1918	only	-	Apr	14	2:00	1:00	D
+Rule	Vanc	1918	only	-	Oct	31	2:00	0	S
+Rule	Vanc	1942	only	-	Feb	 9	2:00	1:00	W # War
+Rule	Vanc	1945	only	-	Aug	14	23:00u	1:00	P # Peace
+Rule	Vanc	1945	only	-	Sep	30	2:00	0	S
+Rule	Vanc	1946	1986	-	Apr	lastSun	2:00	1:00	D
+Rule	Vanc	1946	only	-	Oct	13	2:00	0	S
+Rule	Vanc	1947	1961	-	Sep	lastSun	2:00	0	S
+Rule	Vanc	1962	2006	-	Oct	lastSun	2:00	0	S
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone America/Vancouver	-8:12:28 -	LMT	1884
+			-8:00	Vanc	P%sT	1987
+			-8:00	Canada	P%sT
+Zone America/Dawson_Creek -8:00:56 -	LMT	1884
+			-8:00	Canada	P%sT	1947
+			-8:00	Vanc	P%sT	1972 Aug 30 2:00
+			-7:00	-	MST
+
+
+# Northwest Territories, Nunavut, Yukon
+
+# From Paul Eggert (2006-03-22):
+# Dawson switched to PST in 1973.  Inuvik switched to MST in 1979.
+# Mathew Englander (1996-10-07) gives the following refs:
+#	* 1967. Paragraph 28(34)(g) of the Interpretation Act, S.C. 1967-68,
+#	c. 7 defines Yukon standard time as UTC-9.  This is still valid;
+#	see Interpretation Act, R.S.C. 1985, c. I-21, s. 35(1).
+#	* C.O. 1973/214 switched Yukon to PST on 1973-10-28 00:00.
+#	* O.I.C. 1980/02 established DST.
+#	* O.I.C. 1987/056 changed DST to Apr firstSun 2:00 to Oct lastSun 2:00.
+# Shanks & Pottenger say Yukon's 1973-10-28 switch was at 2:00; go
+# with Englander.
+# From Chris Walton (2006-06-26):
+# Here is a link to the old daylight saving portion of the interpretation
+# act which was last updated in 1987:
+# http://www.gov.yk.ca/legislation/regs/oic1987_056.pdf
+
+# From Rives McDow (1999-09-04):
+# Nunavut ... moved ... to incorporate the whole territory into one time zone.
+# <a href="http://www.nunatsiaq.com/nunavut/nvt90903_13.html">
+# Nunavut moves to single time zone Oct. 31
+# </a>
+#
+# From Antoine Leca (1999-09-06):
+# We then need to create a new timezone for the Kitikmeot region of Nunavut
+# to differentiate it from the Yellowknife region.
+
+# From Paul Eggert (1999-09-20):
+# <a href="http://www.nunavut.com/basicfacts/english/basicfacts_1territory.html">
+# Basic Facts: The New Territory
+# </a> (1999) reports that Pangnirtung operates on eastern time,
+# and that Coral Harbour does not observe DST.  We don't know when
+# Pangnirtung switched to eastern time; we'll guess 1995.
+
+# From Rives McDow (1999-11-08):
+# On October 31, when the rest of Nunavut went to Central time,
+# Pangnirtung wobbled.  Here is the result of their wobble:
+#
+# The following businesses and organizations in Pangnirtung use Central Time:
+#
+#	First Air, Power Corp, Nunavut Construction, Health Center, RCMP,
+#	Eastern Arctic National Parks, A & D Specialist
+#
+# The following businesses and organizations in Pangnirtung use Eastern Time:
+#
+#	Hamlet office, All other businesses, Both schools, Airport operator
+#
+# This has made for an interesting situation there, which warranted the news.
+# No one there that I spoke with seems concerned, or has plans to
+# change the local methods of keeping time, as it evidently does not
+# really interfere with any activities or make things difficult locally.
+# They plan to celebrate New Year's turn-over twice, one hour apart,
+# so it appears that the situation will last at least that long.
+# The Nunavut Intergovernmental Affairs hopes that they will "come to
+# their senses", but the locals evidently don't see any problem with
+# the current state of affairs.
+
+# From Michaela Rodrigue, writing in the
+# <a href="http://www.nunatsiaq.com/archives/nunavut991130/nvt91119_17.html">
+# Nunatsiaq News (1999-11-19)</a>:
+# Clyde River, Pangnirtung and Sanikiluaq now operate with two time zones,
+# central - or Nunavut time - for government offices, and eastern time
+# for municipal offices and schools....  Igloolik [was similar but then]
+# made the switch to central time on Saturday, Nov. 6.
+
+# From Paul Eggert (2000-10-02):
+# Matthews and Vincent (1998) say the following, but we lack histories
+# for these potential new Zones.
+#
+# The Canadian Forces station at Alert uses Eastern Time while the
+# handful of residents at the Eureka weather station [in the Central
+# zone] skip daylight savings.  Baffin Island, which is crossed by the
+# Central, Eastern and Atlantic Time zones only uses Eastern Time.
+# Gjoa Haven, Taloyoak and Pelly Bay all use Mountain instead of
+# Central Time and Southampton Island [in the Central zone] is not
+# required to use daylight savings.
+
+# From
+# <a href="http://www.nunatsiaq.com/archives/nunavut001130/nvt21110_02.html">
+# Nunavut now has two time zones
+# </a> (2000-11-10):
+# The Nunavut government would allow its employees in Kugluktuk and
+# Cambridge Bay to operate on central time year-round, putting them
+# one hour behind the rest of Nunavut for six months during the winter.
+# At the end of October the two communities had rebelled against
+# Nunavut's unified time zone, refusing to shift to eastern time with
+# the rest of the territory for the winter.  Cambridge Bay remained on
+# central time, while Kugluktuk, even farther west, reverted to
+# mountain time, which they had used before the advent of Nunavut's
+# unified time zone in 1999.
+#
+# From Rives McDow (2001-01-20), quoting the Nunavut government:
+# The preceding decision came into effect at midnight, Saturday Nov 4, 2000.
+
+# From Paul Eggert (2000-12-04):
+# Let's just keep track of the official times for now.
+
+# From Rives McDow (2001-03-07):
+# The premier of Nunavut has issued a ministerial statement advising
+# that effective 2001-04-01, the territory of Nunavut will revert
+# back to three time zones (mountain, central, and eastern).  Of the
+# cities in Nunavut, Coral Harbor is the only one that I know of that
+# has said it will not observe dst, staying on EST year round.  I'm
+# checking for more info, and will get back to you if I come up with
+# more.
+# [Also see <http://www.nunatsiaq.com/nunavut/nvt10309_06.html> (2001-03-09).]
+
+# From Gwillim Law (2005-05-21):
+# According to maps at
+# http://inms-ienm.nrc-cnrc.gc.ca/images/time_services/TZ01SWE.jpg
+# http://inms-ienm.nrc-cnrc.gc.ca/images/time_services/TZ01SSE.jpg
+# (both dated 2003), and
+# http://www.canadiangeographic.ca/Magazine/SO98/geomap.asp
+# (from a 1998 Canadian Geographic article), the de facto and de jure time
+# for Southampton Island (at the north end of Hudson Bay) is UTC-5 all year
+# round.  Using Google, it's easy to find other websites that confirm this.
+# I wasn't able to find how far back this time regimen goes, but since it
+# predates the creation of Nunavut, it probably goes back many years....
+# The Inuktitut name of Coral Harbour is Sallit, but it's rarely used.
+#
+# From Paul Eggert (2005-07-26):
+# For lack of better information, assume that Southampton Island observed
+# daylight saving only during wartime.
+
+# From Chris Walton (2007-03-01):
+# ... the community of Resolute (located on Cornwallis Island in
+# Nunavut) moved from Central Time to Eastern Time last November.
+# Basically the community did not change its clocks at the end of
+# daylight saving....
+# http://www.nnsl.com/frames/newspapers/2006-11/nov13_06none.html
+
+# From Chris Walton (2007-03-14):
+# Today I phoned the "hamlet office" to find out what Resolute was doing with
+# its clocks.
+#
+# The individual that answered the phone confirmed that the clocks did not
+# move at the end of daylight saving on October 29/2006.  He also told me that
+# the clocks did not move this past weekend (March 11/2007)....
+#
+# America/Resolute should use the "Canada" Rule up to October 29/2006.
+# After that it should be fixed on Eastern Standard Time until further notice.
+
+# Rule	NAME	FROM	TO	TYPE	IN	ON	AT	SAVE	LETTER/S
+Rule	NT_YK	1918	only	-	Apr	14	2:00	1:00	D
+Rule	NT_YK	1918	only	-	Oct	27	2:00	0	S
+Rule	NT_YK	1919	only	-	May	25	2:00	1:00	D
+Rule	NT_YK	1919	only	-	Nov	 1	0:00	0	S
+Rule	NT_YK	1942	only	-	Feb	 9	2:00	1:00	W # War
+Rule	NT_YK	1945	only	-	Aug	14	23:00u	1:00	P # Peace
+Rule	NT_YK	1945	only	-	Sep	30	2:00	0	S
+Rule	NT_YK	1965	only	-	Apr	lastSun	0:00	2:00	DD
+Rule	NT_YK	1965	only	-	Oct	lastSun	2:00	0	S
+Rule	NT_YK	1980	1986	-	Apr	lastSun	2:00	1:00	D
+Rule	NT_YK	1980	2006	-	Oct	lastSun	2:00	0	S
+Rule	NT_YK	1987	2006	-	Apr	Sun>=1	2:00	1:00	D
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+# aka Panniqtuuq
+Zone America/Pangnirtung 0	-	zzz	1921 # trading post est.
+			-4:00	NT_YK	A%sT	1995 Apr Sun>=1 2:00
+			-5:00	Canada	E%sT	1999 Oct 31 2:00
+			-6:00	Canada	C%sT	2000 Oct 29 2:00
+			-5:00	Canada	E%sT
+# formerly Frobisher Bay
+Zone America/Iqaluit	0	-	zzz	1942 Aug # Frobisher Bay est.
+			-5:00	NT_YK	E%sT	1999 Oct 31 2:00
+			-6:00	Canada	C%sT	2000 Oct 29 2:00
+			-5:00	Canada	E%sT
+# aka Qausuittuq
+Zone America/Resolute	0	-	zzz	1947 Aug 31 # Resolute founded
+			-6:00	NT_YK	C%sT	2000 Oct 29 2:00
+			-5:00	-	EST	2001 Apr  1 3:00
+			-6:00	Canada	C%sT	2006 Oct 29 2:00
+			-5:00	-	EST
+# aka Kangiqiniq
+Zone America/Rankin_Inlet 0	-	zzz	1957 # Rankin Inlet founded
+			-6:00	NT_YK	C%sT	2000 Oct 29 2:00
+			-5:00	-	EST	2001 Apr  1 3:00
+			-6:00	Canada	C%sT
+# aka Iqaluktuuttiaq
+Zone America/Cambridge_Bay 0	-	zzz	1920 # trading post est.?
+			-7:00	NT_YK	M%sT	1999 Oct 31 2:00
+			-6:00	Canada	C%sT	2000 Oct 29 2:00
+			-5:00	-	EST	2000 Nov  5 0:00
+			-6:00	-	CST	2001 Apr  1 3:00
+			-7:00	Canada	M%sT
+Zone America/Yellowknife 0	-	zzz	1935 # Yellowknife founded?
+			-7:00	NT_YK	M%sT	1980
+			-7:00	Canada	M%sT
+Zone America/Inuvik	0	-	zzz	1953 # Inuvik founded
+			-8:00	NT_YK	P%sT	1979 Apr lastSun 2:00
+			-7:00	NT_YK	M%sT	1980
+			-7:00	Canada	M%sT
+Zone America/Whitehorse	-9:00:12 -	LMT	1900 Aug 20
+			-9:00	NT_YK	Y%sT	1966 Jul 1 2:00
+			-8:00	NT_YK	P%sT	1980
+			-8:00	Canada	P%sT
+Zone America/Dawson	-9:17:40 -	LMT	1900 Aug 20
+			-9:00	NT_YK	Y%sT	1973 Oct 28 0:00
+			-8:00	NT_YK	P%sT	1980
+			-8:00	Canada	P%sT
+
+
+###############################################################################
+
+# Mexico
+
+# From Paul Eggert (2001-03-05):
+# The Investigation and Analysis Service of the
+# Mexican Library of Congress (MLoC) has published a
+# <a href="http://www.cddhcu.gob.mx/bibliot/publica/inveyana/polisoc/horver/">
+# history of Mexican local time (in Spanish)
+# </a>.
+#
+# Here are the discrepancies between Shanks & Pottenger (S&P) and the MLoC.
+# (In all cases we go with the MLoC.)
+# S&P report that Baja was at -8:00 in 1922/1923.
+# S&P say the 1930 transition in Baja was 1930-11-16.
+# S&P report no DST during summer 1931.
+# S&P report a transition at 1932-03-30 23:00, not 1932-04-01.
+
+# From Gwillim Law (2001-02-20):
+# There are some other discrepancies between the Decrees page and the
+# tz database.  I think they can best be explained by supposing that
+# the researchers who prepared the Decrees page failed to find some of
+# the relevant documents.
+
+# From Alan Perry (1996-02-15):
+# A guy from our Mexico subsidiary finally found the Presidential Decree
+# outlining the timezone changes in Mexico.
+#
+# ------------- Begin Forwarded Message -------------
+#
+# I finally got my hands on the Official Presidential Decree that sets up the
+# rules for the DST changes. The rules are:
+#
+# 1. The country is divided in 3 timezones:
+#    - Baja California Norte (the Mexico/BajaNorte TZ)
+#    - Baja California Sur, Nayarit, Sinaloa and Sonora (the Mexico/BajaSur TZ)
+#    - The rest of the country (the Mexico/General TZ)
+#
+# 2. From the first Sunday in April at 2:00 AM to the last Sunday in October
+#    at 2:00 AM, the times in each zone are as follows:
+#    BajaNorte: GMT+7
+#    BajaSur:   GMT+6
+#    General:   GMT+5
+#
+# 3. The rest of the year, the times are as follows:
+#    BajaNorte: GMT+8
+#    BajaSur:   GMT+7
+#    General:   GMT+6
+#
+# The Decree was published in Mexico's Official Newspaper on January 4th.
+#
+# -------------- End Forwarded Message --------------
+# From Paul Eggert (1996-06-12):
+# For an English translation of the decree, see
+# <a href="http://mexico-travel.com/extra/timezone_eng.html">
+# ``Diario Oficial: Time Zone Changeover'' (1996-01-04).
+# </a>
+
+# From Rives McDow (1998-10-08):
+# The State of Quintana Roo has reverted back to central STD and DST times
+# (i.e. UTC -0600 and -0500 as of 1998-08-02).
+
+# From Rives McDow (2000-01-10):
+# Effective April 4, 1999 at 2:00 AM local time, Sonora changed to the time
+# zone 5 hours from the International Date Line, and will not observe daylight
+# savings time so as to stay on the same time zone as the southern part of
+# Arizona year round.
+
+# From Jesper Norgaard, translating
+# <http://www.reforma.com/nacional/articulo/064327/> (2001-01-17):
+# In Oaxaca, the 55.000 teachers from the Section 22 of the National
+# Syndicate of Education Workers, refuse to apply daylight saving each
+# year, so that the more than 10,000 schools work at normal hour the
+# whole year.
+
+# From Gwillim Law (2001-01-19):
+# <http://www.reforma.com/negocios_y_dinero/articulo/064481/> ... says
+# (translated):...
+# January 17, 2000 - The Energy Secretary, Ernesto Martens, announced
+# that Summer Time will be reduced from seven to five months, starting
+# this year....
+# <http://www.publico.com.mx/scripts/texto3.asp?action=pagina&pag=21&pos=p&secc=naci&date=01/17/2001>
+# [translated], says "summer time will ... take effect on the first Sunday
+# in May, and end on the last Sunday of September.
+
+# From Arthur David Olson (2001-01-25):
+# The 2001-01-24 traditional Washington Post contained the page one
+# story "Timely Issue Divides Mexicans."...
+# http://www.washingtonpost.com/wp-dyn/articles/A37383-2001Jan23.html
+# ... Mexico City Mayor Lopez Obrador "...is threatening to keep
+# Mexico City and its 20 million residents on a different time than
+# the rest of the country..." In particular, Lopez Obrador would abolish
+# observation of Daylight Saving Time.
+
+# <a href="http://www.conae.gob.mx/ahorro/decretohorver2001.html#decre">
+# Official statute published by the Energy Department
+# </a> (2001-02-01) shows Baja and Chihauhua as still using US DST rules,
+# and Sonora with no DST.  This was reported by Jesper Norgaard (2001-02-03).
+
+# From Paul Eggert (2001-03-03):
+#
+# <a href="http://www.latimes.com/news/nation/20010303/t000018766.html">
+# James F. Smith writes in today's LA Times
+# </a>
+# * Sonora will continue to observe standard time.
+# * Last week Mexico City's mayor Andres Manuel Lopez Obrador decreed that
+#   the Federal District will not adopt DST.
+# * 4 of 16 district leaders announced they'll ignore the decree.
+# * The decree does not affect federal-controlled facilities including
+#   the airport, banks, hospitals, and schools.
+#
+# For now we'll assume that the Federal District will bow to federal rules.
+
+# From Jesper Norgaard (2001-04-01):
+# I found some references to the Mexican application of daylight
+# saving, which modifies what I had already sent you, stating earlier
+# that a number of northern Mexican states would go on daylight
+# saving. The modification reverts this to only cover Baja California
+# (Norte), while all other states (except Sonora, who has no daylight
+# saving all year) will follow the original decree of president
+# Vicente Fox, starting daylight saving May 6, 2001 and ending
+# September 30, 2001.
+# References: "Diario de Monterrey" <www.diariodemonterrey.com/index.asp>
+# Palabra <http://palabra.infosel.com/010331/primera/ppri3101.pdf> (2001-03-31)
+
+# From Reuters (2001-09-04):
+# Mexico's Supreme Court on Tuesday declared that daylight savings was
+# unconstitutional in Mexico City, creating the possibility the
+# capital will be in a different time zone from the rest of the nation
+# next year....  The Supreme Court's ruling takes effect at 2:00
+# a.m. (0800 GMT) on Sept. 30, when Mexico is scheduled to revert to
+# standard time. "This is so residents of the Federal District are not
+# subject to unexpected time changes," a statement from the court said.
+
+# From Jesper Norgaard Welen (2002-03-12):
+# ... consulting my local grocery store(!) and my coworkers, they all insisted
+# that a new decision had been made to reinstate US style DST in Mexico....
+# http://www.conae.gob.mx/ahorro/horaver2001_m1_2002.html (2002-02-20)
+# confirms this.  Sonora as usual is the only state where DST is not applied.
+
+# Rule	NAME	FROM	TO	TYPE	IN	ON	AT	SAVE	LETTER/S
+Rule	Mexico	1939	only	-	Feb	5	0:00	1:00	D
+Rule	Mexico	1939	only	-	Jun	25	0:00	0	S
+Rule	Mexico	1940	only	-	Dec	9	0:00	1:00	D
+Rule	Mexico	1941	only	-	Apr	1	0:00	0	S
+Rule	Mexico	1943	only	-	Dec	16	0:00	1:00	W # War
+Rule	Mexico	1944	only	-	May	1	0:00	0	S
+Rule	Mexico	1950	only	-	Feb	12	0:00	1:00	D
+Rule	Mexico	1950	only	-	Jul	30	0:00	0	S
+Rule	Mexico	1996	2000	-	Apr	Sun>=1	2:00	1:00	D
+Rule	Mexico	1996	2000	-	Oct	lastSun	2:00	0	S
+Rule	Mexico	2001	only	-	May	Sun>=1	2:00	1:00	D
+Rule	Mexico	2001	only	-	Sep	lastSun	2:00	0	S
+Rule	Mexico	2002	max	-	Apr	Sun>=1	2:00	1:00	D
+Rule	Mexico	2002	max	-	Oct	lastSun	2:00	0	S
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+# Quintana Roo
+Zone America/Cancun	-5:47:04 -	LMT	1922 Jan  1  0:12:56
+			-6:00	-	CST	1981 Dec 23
+			-5:00	Mexico	E%sT	1998 Aug  2  2:00
+			-6:00	Mexico	C%sT
+# Campeche, Yucatan
+Zone America/Merida	-5:58:28 -	LMT	1922 Jan  1  0:01:32
+			-6:00	-	CST	1981 Dec 23
+			-5:00	-	EST	1982 Dec  2
+			-6:00	Mexico	C%sT
+# Coahuila, Durango, Nuevo Leon, Tamaulipas
+Zone America/Monterrey	-6:41:16 -	LMT	1921 Dec 31 23:18:44
+			-6:00	-	CST	1988
+			-6:00	US	C%sT	1989
+			-6:00	Mexico	C%sT
+# Central Mexico
+Zone America/Mexico_City -6:36:36 -	LMT	1922 Jan  1  0:23:24
+			-7:00	-	MST	1927 Jun 10 23:00
+			-6:00	-	CST	1930 Nov 15
+			-7:00	-	MST	1931 May  1 23:00
+			-6:00	-	CST	1931 Oct
+			-7:00	-	MST	1932 Apr  1
+			-6:00	Mexico	C%sT	2001 Sep 30 02:00
+			-6:00	-	CST	2002 Feb 20
+			-6:00	Mexico	C%sT
+# Chihuahua
+Zone America/Chihuahua	-7:04:20 -	LMT	1921 Dec 31 23:55:40
+			-7:00	-	MST	1927 Jun 10 23:00
+			-6:00	-	CST	1930 Nov 15
+			-7:00	-	MST	1931 May  1 23:00
+			-6:00	-	CST	1931 Oct
+			-7:00	-	MST	1932 Apr  1
+			-6:00	-	CST	1996
+			-6:00	Mexico	C%sT	1998
+			-6:00	-	CST	1998 Apr Sun>=1 3:00
+			-7:00	Mexico	M%sT
+# Sonora
+Zone America/Hermosillo	-7:23:52 -	LMT	1921 Dec 31 23:36:08
+			-7:00	-	MST	1927 Jun 10 23:00
+			-6:00	-	CST	1930 Nov 15
+			-7:00	-	MST	1931 May  1 23:00
+			-6:00	-	CST	1931 Oct
+			-7:00	-	MST	1932 Apr  1
+			-6:00	-	CST	1942 Apr 24
+			-7:00	-	MST	1949 Jan 14
+			-8:00	-	PST	1970
+			-7:00	Mexico	M%sT	1999
+			-7:00	-	MST
+# Baja California Sur, Nayarit, Sinaloa
+Zone America/Mazatlan	-7:05:40 -	LMT	1921 Dec 31 23:54:20
+			-7:00	-	MST	1927 Jun 10 23:00
+			-6:00	-	CST	1930 Nov 15
+			-7:00	-	MST	1931 May  1 23:00
+			-6:00	-	CST	1931 Oct
+			-7:00	-	MST	1932 Apr  1
+			-6:00	-	CST	1942 Apr 24
+			-7:00	-	MST	1949 Jan 14
+			-8:00	-	PST	1970
+			-7:00	Mexico	M%sT
+# Baja California
+Zone America/Tijuana	-7:48:04 -	LMT	1922 Jan  1  0:11:56
+			-7:00	-	MST	1924
+			-8:00	-	PST	1927 Jun 10 23:00
+			-7:00	-	MST	1930 Nov 15
+			-8:00	-	PST	1931 Apr  1
+			-8:00	1:00	PDT	1931 Sep 30
+			-8:00	-	PST	1942 Apr 24
+			-8:00	1:00	PWT	1945 Aug 14 23:00u
+			-8:00	1:00	PPT	1945 Nov 12 # Peace
+			-8:00	-	PST	1948 Apr  5
+			-8:00	1:00	PDT	1949 Jan 14
+			-8:00	-	PST	1954
+			-8:00	CA	P%sT	1961
+			-8:00	-	PST	1976
+			-8:00	US	P%sT	1996
+			-8:00	Mexico	P%sT	2001
+			-8:00	US	P%sT	2002 Feb 20
+			-8:00	Mexico	P%sT
+# From Paul Eggert (2006-03-22):
+# Formerly there was an America/Ensenada zone, which differed from
+# America/Tijuana only in that it did not observe DST from 1976
+# through 1995.  This was as per Shanks (1999).  But Shanks & Pottenger say
+# Ensenada did not observe DST from 1948 through 1975.  Guy Harris reports
+# that the 1987 OAG says "Only Ensenada, Mexicale, San Felipe and
+# Tijuana observe DST," which agrees with Shanks & Pottenger but implies that
+# DST-observance was a town-by-town matter back then.  This concerns
+# data after 1970 so most likely there should be at least one Zone
+# other than America/Tijuana for Baja, but it's not clear yet what its
+# name or contents should be.
+#
+# Revillagigedo Is
+# no information
+
+###############################################################################
+
+# Anguilla
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone America/Anguilla	-4:12:16 -	LMT	1912 Mar 2
+			-4:00	-	AST
+
+# Antigua and Barbuda
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone	America/Antigua	-4:07:12 -	LMT	1912 Mar 2
+			-5:00	-	EST	1951
+			-4:00	-	AST
+
+# Bahamas
+#
+# From Sue Williams (2006-12-07):
+# The Bahamas announced about a month ago that they plan to change their DST
+# rules to sync with the U.S. starting in 2007....
+# http://www.jonesbahamas.com/?c=45&a=10412
+
+# Rule	NAME	FROM	TO	TYPE	IN	ON	AT	SAVE	LETTER/S
+Rule	Bahamas	1964	2006	-	Oct	lastSun	2:00	0	S
+Rule	Bahamas	1964	1986	-	Apr	lastSun	2:00	1:00	D
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone	America/Nassau	-5:09:24 -	LMT	1912 Mar 2
+			-5:00	Bahamas	E%sT	1976
+			-5:00	US	E%sT
+
+# Barbados
+# Rule	NAME	FROM	TO	TYPE	IN	ON	AT	SAVE	LETTER/S
+Rule	Barb	1977	only	-	Jun	12	2:00	1:00	D
+Rule	Barb	1977	1978	-	Oct	Sun>=1	2:00	0	S
+Rule	Barb	1978	1980	-	Apr	Sun>=15	2:00	1:00	D
+Rule	Barb	1979	only	-	Sep	30	2:00	0	S
+Rule	Barb	1980	only	-	Sep	25	2:00	0	S
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone America/Barbados	-3:58:28 -	LMT	1924		# Bridgetown
+			-3:58:28 -	BMT	1932	  # Bridgetown Mean Time
+			-4:00	Barb	A%sT
+
+# Belize
+# Whitman entirely disagrees with Shanks; go with Shanks & Pottenger.
+# Rule	NAME	FROM	TO	TYPE	IN	ON	AT	SAVE	LETTER/S
+Rule	Belize	1918	1942	-	Oct	Sun>=2	0:00	0:30	HD
+Rule	Belize	1919	1943	-	Feb	Sun>=9	0:00	0	S
+Rule	Belize	1973	only	-	Dec	 5	0:00	1:00	D
+Rule	Belize	1974	only	-	Feb	 9	0:00	0	S
+Rule	Belize	1982	only	-	Dec	18	0:00	1:00	D
+Rule	Belize	1983	only	-	Feb	12	0:00	0	S
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone	America/Belize	-5:52:48 -	LMT	1912 Apr
+			-6:00	Belize	C%sT
+
+# Bermuda
+
+# From Dan Jones, reporting in The Royal Gazette (2006-06-26):
+
+# Next year, however, clocks in the US will go forward on the second Sunday
+# in March, until the first Sunday in November.  And, after the Time Zone
+# (Seasonal Variation) Bill 2006 was passed in the House of Assembly on
+# Friday, the same thing will happen in Bermuda.
+# http://www.theroyalgazette.com/apps/pbcs.dll/article?AID=/20060529/NEWS/105290135
+
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone Atlantic/Bermuda	-4:19:04 -	LMT	1930 Jan  1 2:00    # Hamilton
+			-4:00	-	AST	1974 Apr 28 2:00
+			-4:00	Bahamas	A%sT	1976
+			-4:00	US	A%sT
+
+# Cayman Is
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone	America/Cayman	-5:25:32 -	LMT	1890		# Georgetown
+			-5:07:12 -	KMT	1912 Feb    # Kingston Mean Time
+			-5:00	-	EST
+
+# Costa Rica
+# Rule	NAME	FROM	TO	TYPE	IN	ON	AT	SAVE	LETTER/S
+Rule	CR	1979	1980	-	Feb	lastSun	0:00	1:00	D
+Rule	CR	1979	1980	-	Jun	Sun>=1	0:00	0	S
+Rule	CR	1991	1992	-	Jan	Sat>=15	0:00	1:00	D
+# IATA SSIM (1991-09) says the following was at 1:00;
+# go with Shanks & Pottenger.
+Rule	CR	1991	only	-	Jul	 1	0:00	0	S
+Rule	CR	1992	only	-	Mar	15	0:00	0	S
+# There are too many San Joses elsewhere, so we'll use `Costa Rica'.
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone America/Costa_Rica	-5:36:20 -	LMT	1890		# San Jose
+			-5:36:20 -	SJMT	1921 Jan 15 # San Jose Mean Time
+			-6:00	CR	C%sT
+# Coco
+# no information; probably like America/Costa_Rica
+
+# Cuba
+
+# From Arthur David Olson (1999-03-29):
+# The 1999-03-28 exhibition baseball game held in Havana, Cuba, between
+# the Cuban National Team and the Baltimore Orioles was carried live on
+# the Orioles Radio Network, including affiliate WTOP in Washington, DC.
+# During the game, play-by-play announcer Jim Hunter noted that
+# "We'll be losing two hours of sleep...Cuba switched to Daylight Saving
+# Time today."  (The "two hour" remark referred to losing one hour of
+# sleep on 1999-03-28--when the announcers were in Cuba as it switched
+# to DST--and one more hour on 1999-04-04--when the announcers will have
+# returned to Baltimore, which switches on that date.)
+
+# From Evert van der Veer via Steffen Thorsen (2004-10-28):
+# Cuba is not going back to standard time this year.
+# From Paul Eggert (2006-03-22):
+# http://www.granma.cu/ingles/2004/septiembre/juev30/41medid-i.html
+# says that it's due to a problem at the Antonio Guiteras
+# thermoelectric plant, and says "This October there will be no return
+# to normal hours (after daylight saving time)".
+# For now, let's assume that it's a temporary measure.
+
+# From Carlos A. Carnero Delgado (2005-11-12):
+# This year (just like in 2004-2005) there's no change in time zone
+# adjustment in Cuba.  We will stay in daylight saving time:
+# http://www.granma.cu/espanol/2005/noviembre/mier9/horario.html
+
+# From Jesper Norgaard Welen (2006-10-21):
+# An article in GRANMA INTERNACIONAL claims that Cuba will end
+# the 3 years of permanent DST next weekend, see
+# http://www.granma.cu/ingles/2006/octubre/lun16/43horario.html
+# "On Saturday night, October 28 going into Sunday, October 29, at 01:00,
+# watches should be set back one hour -- going back to 00:00 hours -- returning
+# to the normal schedule....
+
+# From Paul Eggert (2007-03-02):
+# http://www.granma.cubaweb.cu/english/news/art89.html, dated yesterday,
+# says Cuban clocks will advance at midnight on March 10.
+# For lack of better information, assume Cuba will use US rules,
+# except that it switches at midnight standard time as usual.
+
+# Rule	NAME	FROM	TO	TYPE	IN	ON	AT	SAVE	LETTER/S
+Rule	Cuba	1928	only	-	Jun	10	0:00	1:00	D
+Rule	Cuba	1928	only	-	Oct	10	0:00	0	S
+Rule	Cuba	1940	1942	-	Jun	Sun>=1	0:00	1:00	D
+Rule	Cuba	1940	1942	-	Sep	Sun>=1	0:00	0	S
+Rule	Cuba	1945	1946	-	Jun	Sun>=1	0:00	1:00	D
+Rule	Cuba	1945	1946	-	Sep	Sun>=1	0:00	0	S
+Rule	Cuba	1965	only	-	Jun	1	0:00	1:00	D
+Rule	Cuba	1965	only	-	Sep	30	0:00	0	S
+Rule	Cuba	1966	only	-	May	29	0:00	1:00	D
+Rule	Cuba	1966	only	-	Oct	2	0:00	0	S
+Rule	Cuba	1967	only	-	Apr	8	0:00	1:00	D
+Rule	Cuba	1967	1968	-	Sep	Sun>=8	0:00	0	S
+Rule	Cuba	1968	only	-	Apr	14	0:00	1:00	D
+Rule	Cuba	1969	1977	-	Apr	lastSun	0:00	1:00	D
+Rule	Cuba	1969	1971	-	Oct	lastSun	0:00	0	S
+Rule	Cuba	1972	1974	-	Oct	8	0:00	0	S
+Rule	Cuba	1975	1977	-	Oct	lastSun	0:00	0	S
+Rule	Cuba	1978	only	-	May	7	0:00	1:00	D
+Rule	Cuba	1978	1990	-	Oct	Sun>=8	0:00	0	S
+Rule	Cuba	1979	1980	-	Mar	Sun>=15	0:00	1:00	D
+Rule	Cuba	1981	1985	-	May	Sun>=5	0:00	1:00	D
+Rule	Cuba	1986	1989	-	Mar	Sun>=14	0:00	1:00	D
+Rule	Cuba	1990	1997	-	Apr	Sun>=1	0:00	1:00	D
+Rule	Cuba	1991	1995	-	Oct	Sun>=8	0:00s	0	S
+Rule	Cuba	1996	only	-	Oct	 6	0:00s	0	S
+Rule	Cuba	1997	only	-	Oct	12	0:00s	0	S
+Rule	Cuba	1998	1999	-	Mar	lastSun	0:00s	1:00	D
+Rule	Cuba	1998	2003	-	Oct	lastSun	0:00s	0	S
+Rule	Cuba	2000	2006	-	Apr	Sun>=1	0:00s	1:00	D
+Rule	Cuba	2006	only	-	Oct	lastSun	0:00s	0	S
+Rule	Cuba	2007	max	-	Mar	Sun>=8	0:00s	1:00	D
+Rule	Cuba	2007	max	-	Nov	Sun>=1	0:00s	0	S
+
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone	America/Havana	-5:29:28 -	LMT	1890
+			-5:29:36 -	HMT	1925 Jul 19 12:00 # Havana MT
+			-5:00	Cuba	C%sT
+
+# Dominica
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone America/Dominica	-4:05:36 -	LMT	1911 Jul 1 0:01		# Roseau
+			-4:00	-	AST
+
+# Dominican Republic
+
+# From Steffen Thorsen (2000-10-30):
+# Enrique Morales reported to me that the Dominican Republic has changed the
+# time zone to Eastern Standard Time as of Sunday 29 at 2 am....
+# http://www.listin.com.do/antes/261000/republica/princi.html
+
+# From Paul Eggert (2000-12-04):
+# That URL (2000-10-26, in Spanish) says they planned to use US-style DST.
+
+# From Rives McDow (2000-12-01):
+# Dominican Republic changed its mind and presidential decree on Tuesday,
+# November 28, 2000, with a new decree.  On Sunday, December 3 at 1:00 AM the
+# Dominican Republic will be reverting to 8 hours from the International Date
+# Line, and will not be using DST in the foreseeable future.  The reason they
+# decided to use DST was to be in synch with Puerto Rico, who was also going
+# to implement DST.  When Puerto Rico didn't implement DST, the president
+# decided to revert.
+
+
+# Rule	NAME	FROM	TO	TYPE	IN	ON	AT	SAVE	LETTER/S
+Rule	DR	1966	only	-	Oct	30	0:00	1:00	D
+Rule	DR	1967	only	-	Feb	28	0:00	0	S
+Rule	DR	1969	1973	-	Oct	lastSun	0:00	0:30	HD
+Rule	DR	1970	only	-	Feb	21	0:00	0	S
+Rule	DR	1971	only	-	Jan	20	0:00	0	S
+Rule	DR	1972	1974	-	Jan	21	0:00	0	S
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone America/Santo_Domingo -4:39:36 -	LMT	1890
+			-4:40	-	SDMT	1933 Apr  1 12:00 # S. Dom. MT
+			-5:00	DR	E%sT	1974 Oct 27
+			-4:00	-	AST	2000 Oct 29 02:00
+			-5:00	US	E%sT	2000 Dec  3 01:00
+			-4:00	-	AST
+
+# El Salvador
+
+# Rule	NAME	FROM	TO	TYPE	IN	ON	AT	SAVE	LETTER/S
+Rule	Salv	1987	1988	-	May	Sun>=1	0:00	1:00	D
+Rule	Salv	1987	1988	-	Sep	lastSun	0:00	0	S
+# There are too many San Salvadors elsewhere, so use America/El_Salvador
+# instead of America/San_Salvador.
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone America/El_Salvador -5:56:48 -	LMT	1921		# San Salvador
+			-6:00	Salv	C%sT
+
+# Grenada
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone	America/Grenada	-4:07:00 -	LMT	1911 Jul	# St George's
+			-4:00	-	AST
+
+# Guadeloupe
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone America/Guadeloupe	-4:06:08 -	LMT	1911 Jun 8	# Pointe a Pitre
+			-4:00	-	AST
+
+# Guatemala
+#
+# From Gwillim Law (2006-04-22), after a heads-up from Oscar van Vlijmen:
+# Diario Co Latino, at
+# http://www.diariocolatino.com/internacionales/detalles.asp?NewsID=8079,
+# says in an article dated 2006-04-19 that the Guatemalan government had
+# decided on that date to advance official time by 60 minutes, to lessen the
+# impact of the elevated cost of oil....  Daylight saving time will last from
+# 2006-04-29 24:00 (Guatemalan standard time) to 2006-09-30 (time unspecified).
+# From Paul Eggert (2006-06-22):
+# The Ministry of Energy and Mines, press release CP-15/2006
+# (2006-04-19), says DST ends at 24:00.  See
+# <http://www.sieca.org.gt/Sitio_publico/Energeticos/Doc/Medidas/Cambio_Horario_Nac_190406.pdf>.
+
+# Rule	NAME	FROM	TO	TYPE	IN	ON	AT	SAVE	LETTER/S
+Rule	Guat	1973	only	-	Nov	25	0:00	1:00	D
+Rule	Guat	1974	only	-	Feb	24	0:00	0	S
+Rule	Guat	1983	only	-	May	21	0:00	1:00	D
+Rule	Guat	1983	only	-	Sep	22	0:00	0	S
+Rule	Guat	1991	only	-	Mar	23	0:00	1:00	D
+Rule	Guat	1991	only	-	Sep	 7	0:00	0	S
+Rule	Guat	2006	only	-	Apr	30	0:00	1:00	D
+Rule	Guat	2006	only	-	Oct	 1	0:00	0	S
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone America/Guatemala	-6:02:04 -	LMT	1918 Oct 5
+			-6:00	Guat	C%sT
+
+# Haiti
+# From Gwillim Law (2005-04-15):
+# Risto O. Nykanen wrote me that Haiti is now on DST.
+# I searched for confirmation, and I found a
+# <a href="http://www.haitianconsulate.org/time.doc"> press release
+# on the Web page of the Haitian Consulate in Chicago (2005-03-31),
+# </a>.  Translated from French, it says:
+#
+#  "The Prime Minister's Communication Office notifies the public in general
+#   and the press in particular that, following a decision of the Interior
+#   Ministry and the Territorial Collectivities [I suppose that means the
+#   provinces], Haiti will move to Eastern Daylight Time in the night from next
+#   Saturday the 2nd to Sunday the 3rd.
+#
+#  "Consequently, the Prime Minister's Communication Office wishes to inform
+#   the population that the country's clocks will be set forward one hour
+#   starting at midnight.  This provision will hold until the last Saturday in
+#   October 2005.
+#
+#  "Port-au-Prince, March 31, 2005"
+#
+# From Steffen Thorsen (2006-04-04):
+# I have been informed by users that Haiti observes DST this year like
+# last year, so the current "only" rule for 2005 might be changed to a
+# "max" rule or to last until 2006. (Who knows if they will observe DST
+# next year or if they will extend their DST like US/Canada next year).
+#
+# I have found this article about it (in French):
+# http://www.haitipressnetwork.com/news.cfm?articleID=7612
+#
+# The reason seems to be an energy crisis.
+
+
+# Rule	NAME	FROM	TO	TYPE	IN	ON	AT	SAVE	LETTER/S
+Rule	Haiti	1983	only	-	May	8	0:00	1:00	D
+Rule	Haiti	1984	1987	-	Apr	lastSun	0:00	1:00	D
+Rule	Haiti	1983	1987	-	Oct	lastSun	0:00	0	S
+# Shanks & Pottenger say AT is 2:00, but IATA SSIM (1991/1997) says 1:00s.
+# Go with IATA.
+Rule	Haiti	1988	1997	-	Apr	Sun>=1	1:00s	1:00	D
+Rule	Haiti	1988	1997	-	Oct	lastSun	1:00s	0	S
+Rule	Haiti	2005	max	-	Apr	Sun>=1	0:00	1:00	D
+Rule	Haiti	2005	max	-	Oct	lastSun	0:00	0	S
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone America/Port-au-Prince -4:49:20 -	LMT	1890
+			-4:49	-	PPMT	1917 Jan 24 12:00 # P-a-P MT
+			-5:00	Haiti	E%sT
+
+# Honduras
+# Shanks & Pottenger say 1921 Jan 1; go with Whitman's more precise Apr 1.
+
+# From Paul Eggert (2006-05-05):
+# worldtimezone.com reports a 2006-05-02 Spanish-language AP article
+# saying Honduras will start using DST midnight Saturday, effective 4
+# months until September.  La Tribuna reported today
+# <http://www.latribuna.hn/99299.html> that Manuel Zelaya, the president
+# of Honduras, refused to back down on this.
+
+# From Jesper Norgaard Welen (2006-08-08):
+# It seems that Honduras has returned from DST to standard time this Monday at
+# 00:00 hours (prolonging Sunday to 25 hours duration).
+# http://www.worldtimezone.com/dst_news/dst_news_honduras04.html
+
+# From Paul Eggert (2006-08-08):
+# Also see Diario El Heraldo, The country returns to standard time (2006-08-08)
+# <http://www.elheraldo.hn/nota.php?nid=54941&sec=12>.
+# It mentions executive decree 18-2006.
+
+# From Steffen Thorsen (2006-08-17):
+# Honduras will observe DST from 2007 to 2009, exact dates are not
+# published, I have located this authoritative source:
+# http://www.presidencia.gob.hn/noticia.aspx?nId=47
+
+# Rule	NAME	FROM	TO	TYPE	IN	ON	AT	SAVE	LETTER/S
+Rule	Hond	1987	1988	-	May	Sun>=1	0:00	1:00	D
+Rule	Hond	1987	1988	-	Sep	lastSun	0:00	0	S
+Rule	Hond	2006	2009	-	May	Sun>=1	0:00	1:00	D
+Rule	Hond	2006	2009	-	Aug	Mon>=1	0:00	0	S
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone America/Tegucigalpa -5:48:52 -	LMT	1921 Apr
+			-6:00	Hond	C%sT
+#
+# Great Swan I ceded by US to Honduras in 1972
+
+# Jamaica
+
+# From Bob Devine (1988-01-28):
+# Follows US rules.
+
+# From U. S. Naval Observatory (1989-01-19):
+# JAMAICA             5 H  BEHIND UTC
+
+# From Shanks & Pottenger:
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone	America/Jamaica	-5:07:12 -	LMT	1890		# Kingston
+			-5:07:12 -	KMT	1912 Feb    # Kingston Mean Time
+			-5:00	-	EST	1974 Apr 28 2:00
+			-5:00	US	E%sT	1984
+			-5:00	-	EST
+
+# Martinique
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone America/Martinique	-4:04:20 -      LMT	1890		# Fort-de-France
+			-4:04:20 -	FFMT	1911 May     # Fort-de-France MT
+			-4:00	-	AST	1980 Apr  6
+			-4:00	1:00	ADT	1980 Sep 28
+			-4:00	-	AST
+
+# Montserrat
+# From Paul Eggert (2006-03-22):
+# In 1995 volcanic eruptions forced evacuation of Plymouth, the capital.
+# world.gazetteer.com says Cork Hill is the most populous location now.
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone America/Montserrat	-4:08:52 -	LMT	1911 Jul 1 0:01   # Cork Hill
+			-4:00	-	AST
+
+# Nicaragua
+#
+# This uses Shanks & Pottenger for times before 2005.
+#
+# From Steffen Thorsen (2005-04-12):
+# I've got reports from 8 different people that Nicaragua just started
+# DST on Sunday 2005-04-10, in order to save energy because of
+# expensive petroleum.  The exact end date for DST is not yet
+# announced, only "September" but some sites also say "mid-September".
+# Some background information is available on the President's official site:
+# http://www.presidencia.gob.ni/Presidencia/Files_index/Secretaria/Notas%20de%20Prensa/Presidente/2005/ABRIL/Gobierno-de-nicaragua-adelanta-hora-oficial-06abril.htm
+# The Decree, no 23-2005 is available here:
+# http://www.presidencia.gob.ni/buscador_gaceta/BD/DECRETOS/2005/Decreto%2023-2005%20Se%20adelanta%20en%20una%20hora%20en%20todo%20el%20territorio%20nacional%20apartir%20de%20las%2024horas%20del%2009%20de%20Abril.pdf
+#
+# From Paul Eggert (2005-05-01):
+# The decree doesn't say anything about daylight saving, but for now let's
+# assume that it is daylight saving....
+#
+# From Gwillim Law (2005-04-21):
+# The Associated Press story on the time change, which can be found at
+# http://www.lapalmainteractivo.com/guias/content/gen/ap/America_Latina/AMC_GEN_NICARAGUA_HORA.html
+# and elsewhere, says (fifth paragraph, translated from Spanish):  "The last
+# time that a change of clocks was applied to save energy was in the year 2000
+# during the Arnoldo Aleman administration."...
+# The northamerica file says that Nicaragua has been on UTC-6 continuously
+# since December 1998.  I wasn't able to find any details of Nicaraguan time
+# changes in 2000.  Perhaps a note could be added to the northamerica file, to
+# the effect that we have indirect evidence that DST was observed in 2000.
+#
+# From Jesper Norgaard Welen (2005-11-02):
+# Nicaragua left DST the 2005-10-02 at 00:00 (local time).
+# http://www.presidencia.gob.ni/presidencia/files_index/secretaria/comunicados/2005/septiembre/26septiembre-cambio-hora.htm
+# (2005-09-26)
+#
+# From Jesper Norgaard Welen (2006-05-05):
+# http://www.elnuevodiario.com.ni/2006/05/01/nacionales/18410
+# (my informal translation)
+# By order of the president of the republic, Enrique Bolanos, Nicaragua
+# advanced by sixty minutes their official time, yesterday at 2 in the
+# morning, and will stay that way until 30.th. of september.
+#
+# From Jesper Norgaard Welen (2006-09-30):
+# http://www.presidencia.gob.ni/buscador_gaceta/BD/DECRETOS/2006/D-063-2006P-PRN-Cambio-Hora.pdf
+# My informal translation runs:
+# The natural sun time is restored in all the national territory, in that the
+# time is returned one hour at 01:00 am of October 1 of 2006.
+#
+# Rule	NAME	FROM	TO	TYPE	IN	ON	AT	SAVE	LETTER/S
+Rule	Nic	1979	1980	-	Mar	Sun>=16	0:00	1:00	D
+Rule	Nic	1979	1980	-	Jun	Mon>=23	0:00	0	S
+Rule	Nic	2005	only	-	Apr	10	0:00	1:00	D
+Rule	Nic	2005	only	-	Oct	Sun>=1	0:00	0	S
+Rule	Nic	2006	only	-	Apr	30	2:00	1:00	D
+Rule	Nic	2006	only	-	Oct	Sun>=1	1:00	0	S
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone	America/Managua	-5:45:08 -	LMT	1890
+			-5:45:12 -	MMT	1934 Jun 23 # Managua Mean Time?
+			-6:00	-	CST	1973 May
+			-5:00	-	EST	1975 Feb 16
+			-6:00	Nic	C%sT	1992 Jan  1 4:00
+			-5:00	-	EST	1992 Sep 24
+			-6:00	-	CST	1993
+			-5:00	-	EST	1997
+			-6:00	Nic	C%sT
+
+# Panama
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone	America/Panama	-5:18:08 -	LMT	1890
+			-5:19:36 -	CMT	1908 Apr 22   # Colon Mean Time
+			-5:00	-	EST
+
+# Puerto Rico
+# There are too many San Juans elsewhere, so we'll use `Puerto_Rico'.
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone America/Puerto_Rico -4:24:25 -	LMT	1899 Mar 28 12:00    # San Juan
+			-4:00	-	AST	1942 May  3
+			-4:00	US	A%sT	1946
+			-4:00	-	AST
+
+# St Kitts-Nevis
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone America/St_Kitts	-4:10:52 -	LMT	1912 Mar 2	# Basseterre
+			-4:00	-	AST
+
+# St Lucia
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone America/St_Lucia	-4:04:00 -	LMT	1890		# Castries
+			-4:04:00 -	CMT	1912	    # Castries Mean Time
+			-4:00	-	AST
+
+# St Pierre and Miquelon
+# There are too many St Pierres elsewhere, so we'll use `Miquelon'.
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone America/Miquelon	-3:44:40 -	LMT	1911 May 15	# St Pierre
+			-4:00	-	AST	1980 May
+			-3:00	-	PMST	1987 # Pierre & Miquelon Time
+			-3:00	Canada	PM%sT
+
+# St Vincent and the Grenadines
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone America/St_Vincent	-4:04:56 -	LMT	1890		# Kingstown
+			-4:04:56 -	KMT	1912	   # Kingstown Mean Time
+			-4:00	-	AST
+
+# Turks and Caicos
+# From Paul Eggert (2006-03-22):
+# Shanks & Pottenger say they use US DST rules, but IATA SSIM (1991/1998)
+# says they switch at midnight.  Go with IATA SSIM.
+# Rule	NAME	FROM	TO	TYPE	IN	ON	AT	SAVE	LETTER/S
+Rule	TC	1979	1986	-	Apr	lastSun	0:00	1:00	D
+Rule	TC	1979	max	-	Oct	lastSun	0:00	0	S
+Rule	TC	1987	max	-	Apr	Sun>=1	0:00	1:00	D
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone America/Grand_Turk	-4:44:32 -	LMT	1890
+			-5:07:12 -	KMT	1912 Feb    # Kingston Mean Time
+			-5:00	TC	E%sT
+
+# British Virgin Is
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone America/Tortola	-4:18:28 -	LMT	1911 Jul    # Road Town
+			-4:00	-	AST
+
+# Virgin Is
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone America/St_Thomas	-4:19:44 -	LMT	1911 Jul    # Charlotte Amalie
+			-4:00	-	AST
Index: libkcal/libical/tzdata/asia
===================================================================
--- libkcal/libical/tzdata/asia	(.../tags/KDE/3.5.6/kdepim)	(wersja 0)
+++ libkcal/libical/tzdata/asia	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -0,0 +1,1787 @@
+# @(#)asia	8.10
+# <pre>
+
+# This data is by no means authoritative; if you think you know better,
+# go ahead and edit the file (and please send any changes to
+# tz@elsie.nci.nih.gov for general use in the future).
+
+# From Paul Eggert (2006-03-22):
+#
+# A good source for time zone historical data outside the U.S. is
+# Thomas G. Shanks and Rique Pottenger, The International Atlas (6th edition),
+# San Diego: ACS Publications, Inc. (2003).
+#
+# Gwillim Law writes that a good source
+# for recent time zone data is the International Air Transport
+# Association's Standard Schedules Information Manual (IATA SSIM),
+# published semiannually.  Law sent in several helpful summaries
+# of the IATA's data after 1990.
+#
+# Except where otherwise noted, Shanks & Pottenger is the source for
+# entries through 1990, and IATA SSIM is the source for entries afterwards.
+#
+# Another source occasionally used is Edward W. Whitman, World Time Differences,
+# Whitman Publishing Co, 2 Niagara Av, Ealing, London (undated), which
+# I found in the UCLA library.
+#
+# A reliable and entertaining source about time zones is
+# Derek Howse, Greenwich time and longitude, Philip Wilson Publishers (1997).
+#
+# I invented the abbreviations marked `*' in the following table;
+# the rest are from earlier versions of this file, or from other sources.
+# Corrections are welcome!
+#	     std  dst
+#	     LMT	Local Mean Time
+#	2:00 EET  EEST	Eastern European Time
+#	2:00 IST  IDT	Israel
+#	3:00 AST  ADT	Arabia*
+#	3:30 IRST IRDT	Iran
+#	4:00 GST	Gulf*
+#	5:30 IST	India
+#	7:00 ICT	Indochina*
+#	7:00 WIT	west Indonesia
+#	8:00 CIT	central Indonesia
+#	8:00 CST	China
+#	9:00 CJT	Central Japanese Time (1896/1937)*
+#	9:00 EIT	east Indonesia
+#	9:00 JST  JDT	Japan
+#	9:00 KST  KDT	Korea
+#	9:30 CST	(Australian) Central Standard Time
+#
+# See the `europe' file for Russia and Turkey in Asia.
+
+# From Guy Harris:
+# Incorporates data for Singapore from Robert Elz' asia 1.1, as well as
+# additional information from Tom Yap, Sun Microsystems Intercontinental
+# Technical Support (including a page from the Official Airline Guide -
+# Worldwide Edition).  The names for time zones are guesses.
+
+###############################################################################
+
+# These rules are stolen from the `europe' file.
+# Rule	NAME	FROM	TO	TYPE	IN	ON	AT	SAVE	LETTER/S
+Rule	EUAsia	1981	max	-	Mar	lastSun	 1:00u	1:00	S
+Rule	EUAsia	1979	1995	-	Sep	lastSun	 1:00u	0	-
+Rule	EUAsia	1996	max	-	Oct	lastSun	 1:00u	0	-
+Rule E-EurAsia	1981	max	-	Mar	lastSun	 0:00	1:00	S
+Rule E-EurAsia	1979	1995	-	Sep	lastSun	 0:00	0	-
+Rule E-EurAsia	1996	max	-	Oct	lastSun	 0:00	0	-
+Rule RussiaAsia	1981	1984	-	Apr	1	 0:00	1:00	S
+Rule RussiaAsia	1981	1983	-	Oct	1	 0:00	0	-
+Rule RussiaAsia	1984	1991	-	Sep	lastSun	 2:00s	0	-
+Rule RussiaAsia	1985	1991	-	Mar	lastSun	 2:00s	1:00	S
+Rule RussiaAsia	1992	only	-	Mar	lastSat	23:00	1:00	S
+Rule RussiaAsia	1992	only	-	Sep	lastSat	23:00	0	-
+Rule RussiaAsia	1993	max	-	Mar	lastSun	 2:00s	1:00	S
+Rule RussiaAsia	1993	1995	-	Sep	lastSun	 2:00s	0	-
+Rule RussiaAsia	1996	max	-	Oct	lastSun	 2:00s	0	-
+
+# Afghanistan
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone	Asia/Kabul	4:36:48 -	LMT	1890
+			4:00	-	AFT	1945
+			4:30	-	AFT
+
+# Armenia
+# From Paul Eggert (2006-03-22):
+# Shanks & Pottenger have Yerevan switching to 3:00 (with Russian DST)
+# in spring 1991, then to 4:00 with no DST in fall 1995, then
+# readopting Russian DST in 1997.  Go with Shanks & Pottenger, even
+# when they disagree with others.  Edgar Der-Danieliantz
+# reported (1996-05-04) that Yerevan probably wouldn't use DST
+# in 1996, though it did use DST in 1995.  IATA SSIM (1991/1998) reports that
+# Armenia switched from 3:00 to 4:00 in 1998 and observed DST after 1991,
+# but started switching at 3:00s in 1998.
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone	Asia/Yerevan	2:58:00 -	LMT	1924 May  2
+			3:00	-	YERT	1957 Mar    # Yerevan Time
+			4:00 RussiaAsia YER%sT	1991 Mar 31 2:00s
+			3:00	1:00	YERST	1991 Sep 23 # independence
+			3:00 RussiaAsia	AM%sT	1995 Sep 24 2:00s
+			4:00	-	AMT	1997
+			4:00 RussiaAsia	AM%sT
+
+# Azerbaijan
+# From Rustam Aliyev of the Azerbaijan Internet Forum (2005-10-23):
+# According to the resolution of Cabinet of Ministers, 1997
+# Resolution available at: http://aif.az/docs/daylight_res.pdf
+# Rule	NAME	FROM	TO	TYPE	IN	ON	AT	SAVE	LETTER/S
+Rule	Azer	1997	max	-	Mar	lastSun	 4:00	1:00	S
+Rule	Azer	1997	max	-	Oct	lastSun	 5:00	0	-
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone	Asia/Baku	3:19:24 -	LMT	1924 May  2
+			3:00	-	BAKT	1957 Mar    # Baku Time
+			4:00 RussiaAsia BAK%sT	1991 Mar 31 2:00s
+			3:00	1:00	BAKST	1991 Aug 30 # independence
+			3:00 RussiaAsia	AZ%sT	1992 Sep lastSat 23:00
+			4:00	-	AZT	1996 # Azerbaijan time
+			4:00	EUAsia	AZ%sT	1997
+			4:00	Azer	AZ%sT
+
+# Bahrain
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone	Asia/Bahrain	3:22:20 -	LMT	1920		# Al Manamah
+			4:00	-	GST	1972 Jun
+			3:00	-	AST
+
+# Bangladesh
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone	Asia/Dhaka	6:01:40 -	LMT	1890
+			5:53:20	-	HMT	1941 Oct    # Howrah Mean Time?
+			6:30	-	BURT	1942 May 15 # Burma Time
+			5:30	-	IST	1942 Sep
+			6:30	-	BURT	1951 Sep 30
+			6:00	-	DACT	1971 Mar 26 # Dacca Time
+			6:00	-	BDT	# Bangladesh Time
+
+# Bhutan
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone	Asia/Thimphu	5:58:36 -	LMT	1947 Aug 15 # or Thimbu
+			5:30	-	IST	1987 Oct
+			6:00	-	BTT	# Bhutan Time
+
+# British Indian Ocean Territory
+# Whitman and the 1995 CIA time zone map say 5:00, but the
+# 1997 and later maps say 6:00.  Assume the switch occurred in 1996.
+# We have no information as to when standard time was introduced;
+# assume it occurred in 1907, the same year as Mauritius (which
+# then contained the Chagos Archipelago).
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone	Indian/Chagos	4:49:40	-	LMT	1907
+			5:00	-	IOT	1996 # BIOT Time
+			6:00	-	IOT
+
+# Brunei
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone	Asia/Brunei	7:39:40 -	LMT	1926 Mar   # Bandar Seri Begawan
+			7:30	-	BNT	1933
+			8:00	-	BNT
+
+# Burma / Myanmar
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone	Asia/Rangoon	6:24:40 -	LMT	1880		# or Yangon
+			6:24:36	-	RMT	1920	   # Rangoon Mean Time?
+			6:30	-	BURT	1942 May   # Burma Time
+			9:00	-	JST	1945 May 3
+			6:30	-	MMT		   # Myanmar Time
+
+# Cambodia
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone	Asia/Phnom_Penh	6:59:40 -	LMT	1906 Jun  9
+			7:06:20	-	SMT	1911 Mar 11 0:01 # Saigon MT?
+			7:00	-	ICT	1912 May
+			8:00	-	ICT	1931 May
+			7:00	-	ICT
+
+# China
+
+# From Guy Harris:
+# People's Republic of China.  Yes, they really have only one time zone.
+
+# From Bob Devine (1988-01-28):
+# No they don't.  See TIME mag, 1986-02-17 p.52.  Even though
+# China is across 4 physical time zones, before Feb 1, 1986 only the
+# Peking (Bejing) time zone was recognized.  Since that date, China
+# has two of 'em -- Peking's and Urumqi (named after the capital of
+# the Xinjiang Uyghur Autonomous Region).  I don't know about DST for it.
+#
+# . . .I just deleted the DST table and this editor makes it too
+# painful to suck in another copy..  So, here is what I have for
+# DST start/end dates for Peking's time zone (info from AP):
+#
+#     1986 May 4 - Sept 14
+#     1987 mid-April - ??
+
+# From U. S. Naval Observatory (1989-01-19):
+# CHINA               8 H  AHEAD OF UTC  ALL OF CHINA, INCL TAIWAN
+# CHINA               9 H  AHEAD OF UTC  APR 17 - SEP 10
+
+# From Paul Eggert (2006-03-22):
+# Shanks & Pottenger write that China (except for Hong Kong and Macau)
+# has had a single time zone since 1980 May 1, observing summer DST
+# from 1986 through 1991; this contradicts Devine's
+# note about Time magazine, though apparently _something_ happened in 1986.
+# Go with Shanks & Pottenger for now.  I made up names for the other
+# pre-1980 time zones.
+
+# From Shanks & Pottenger:
+# Rule	NAME	FROM	TO	TYPE	IN	ON	AT	SAVE	LETTER/S
+Rule	Shang	1940	only	-	Jun	 3	0:00	1:00	D
+Rule	Shang	1940	1941	-	Oct	 1	0:00	0	S
+Rule	Shang	1941	only	-	Mar	16	0:00	1:00	D
+Rule	PRC	1986	only	-	May	 4	0:00	1:00	D
+Rule	PRC	1986	1991	-	Sep	Sun>=11	0:00	0	S
+Rule	PRC	1987	1991	-	Apr	Sun>=10	0:00	1:00	D
+
+# From Anthony Fok (2001-12-20):
+# BTW, I did some research on-line and found some info regarding these five
+# historic timezones from some Taiwan websites.  And yes, there are official
+# Chinese names for these locales (before 1949).
+#
+# From Jesper Norgaard Welen (2006-07-14):
+# I have investigated the timezones around 1970 on the
+# http://www.astro.com/atlas site [with provinces and county
+# boundaries summarized below]....  A few other exceptions were two
+# counties on the Sichuan side of the Xizang-Sichuan border,
+# counties Dege and Baiyu which lies on the Sichuan side and are
+# therefore supposed to be GMT+7, Xizang region being GMT+6, but Dege
+# county is GMT+8 according to astro.com while Baiyu county is GMT+6
+# (could be true), for the moment I am assuming that those two
+# counties are mistakes in the astro.com data.
+
+
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+# Changbai Time ("Long-white Time", Long-white = Heilongjiang area)
+# Heilongjiang (except Mohe county), Jilin
+Zone	Asia/Harbin	8:26:44	-	LMT	1928 # or Haerbin
+			8:30	-	CHAT	1932 Mar # Changbai Time
+			8:00	-	CST	1940
+			9:00	-	CHAT	1966 May
+			8:30	-	CHAT	1980 May
+			8:00	PRC	C%sT
+# Zhongyuan Time ("Central plain Time")
+# most of China
+Zone	Asia/Shanghai	8:05:52	-	LMT	1928
+			8:00	Shang	C%sT	1949
+			8:00	PRC	C%sT
+# Long-shu Time (probably due to Long and Shu being two names of that area)
+# Guangxi, Guizhou, Hainan, Ningxia, Sichuan, Shaanxi, and Yunnan;
+# most of Gansu; west Inner Mongolia; west Qinghai; and the Guangdong
+# counties Deqing, Enping, Kaiping, Luoding, Taishan, Xinxing,
+# Yangchun, Yangjiang, Yu'nan, and Yunfu.
+Zone	Asia/Chongqing	7:06:20	-	LMT	1928 # or Chungking
+			7:00	-	LONT	1980 May # Long-shu Time
+			8:00	PRC	C%sT
+# Xin-zang Time ("Xinjiang-Tibet Time")
+# The Gansu counties Aksay, Anxi, Dunhuang, Subei; west Qinghai;
+# the Guangdong counties  Xuwen, Haikang, Suixi, Lianjiang,
+# Zhanjiang, Wuchuan, Huazhou, Gaozhou, Maoming, Dianbai, and Xinyi;
+# east Tibet, including Lhasa, Chamdo, Shigaise, Jimsar, Shawan and Hutubi;
+# east Xinjiang, including Urumqi, Turpan, Karamay, Korla, Minfeng, Jinghe,
+# Wusu, Qiemo, Xinyan, Wulanwusu, Jinghe, Yumin, Tacheng, Tuoli, Emin,
+# Shihezi, Changji, Yanqi, Heshuo, Tuokexun, Tulufan, Shanshan, Hami,
+# Fukang, Kuitun, Kumukuli, Miquan, Qitai, and Turfan.
+Zone	Asia/Urumqi	5:50:20	-	LMT	1928 # or Urumchi
+			6:00	-	URUT	1980 May # Urumqi Time
+			8:00	PRC	C%sT
+# Kunlun Time
+# West Tibet, including Pulan, Aheqi, Shufu, Shule;
+# West Xinjiang, including Aksu, Atushi, Yining, Hetian, Cele, Luopu, Nileke,
+# Zhaosu, Tekesi, Gongliu, Chabuchaer, Huocheng, Bole, Pishan, Suiding,
+# and Yarkand.
+Zone	Asia/Kashgar	5:03:56	-	LMT	1928 # or Kashi or Kaxgar
+			5:30	-	KAST	1940	 # Kashgar Time
+			5:00	-	KAST	1980 May
+			8:00	PRC	C%sT
+
+# Hong Kong (Xianggang)
+# Rule	NAME	FROM	TO	TYPE	IN	ON	AT	SAVE	LETTER/S
+Rule	HK	1946	only	-	Apr	20	3:30	1:00	S
+Rule	HK	1946	only	-	Dec	1	3:30	0	-
+Rule	HK	1947	only	-	Apr	13	3:30	1:00	S
+Rule	HK	1947	only	-	Dec	30	3:30	0	-
+Rule	HK	1948	only	-	May	2	3:30	1:00	S
+Rule	HK	1948	1952	-	Oct	lastSun	3:30	0	-
+Rule	HK	1949	1953	-	Apr	Sun>=1	3:30	1:00	S
+Rule	HK	1953	only	-	Nov	1	3:30	0	-
+Rule	HK	1954	1964	-	Mar	Sun>=18	3:30	1:00	S
+Rule	HK	1954	only	-	Oct	31	3:30	0	-
+Rule	HK	1955	1964	-	Nov	Sun>=1	3:30	0	-
+Rule	HK	1965	1977	-	Apr	Sun>=16	3:30	1:00	S
+Rule	HK	1965	1977	-	Oct	Sun>=16	3:30	0	-
+Rule	HK	1979	1980	-	May	Sun>=8	3:30	1:00	S
+Rule	HK	1979	1980	-	Oct	Sun>=16	3:30	0	-
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone	Asia/Hong_Kong	7:36:36 -	LMT	1904 Oct 30
+			8:00	HK	HK%sT
+
+
+###############################################################################
+
+# Taiwan
+
+# Shanks & Pottenger write that Taiwan observed DST during 1945, when it
+# was still controlled by Japan.  This is hard to believe, but we don't
+# have any other information.
+
+# Rule	NAME	FROM	TO	TYPE	IN	ON	AT	SAVE	LETTER/S
+Rule	Taiwan	1945	1951	-	May	1	0:00	1:00	D
+Rule	Taiwan	1945	1951	-	Oct	1	0:00	0	S
+Rule	Taiwan	1952	only	-	Mar	1	0:00	1:00	D
+Rule	Taiwan	1952	1954	-	Nov	1	0:00	0	S
+Rule	Taiwan	1953	1959	-	Apr	1	0:00	1:00	D
+Rule	Taiwan	1955	1961	-	Oct	1	0:00	0	S
+Rule	Taiwan	1960	1961	-	Jun	1	0:00	1:00	D
+Rule	Taiwan	1974	1975	-	Apr	1	0:00	1:00	D
+Rule	Taiwan	1974	1975	-	Oct	1	0:00	0	S
+Rule	Taiwan	1980	only	-	Jun	30	0:00	1:00	D
+Rule	Taiwan	1980	only	-	Sep	30	0:00	0	S
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone	Asia/Taipei	8:06:00 -	LMT	1896 # or Taibei or T'ai-pei
+			8:00	Taiwan	C%sT
+
+# Macau (Macao, Aomen)
+# Rule	NAME	FROM	TO	TYPE	IN	ON	AT	SAVE	LETTER/S
+Rule	Macau	1961	1962	-	Mar	Sun>=16	3:30	1:00	S
+Rule	Macau	1961	1964	-	Nov	Sun>=1	3:30	0	-
+Rule	Macau	1963	only	-	Mar	Sun>=16	0:00	1:00	S
+Rule	Macau	1964	only	-	Mar	Sun>=16	3:30	1:00	S
+Rule	Macau	1965	only	-	Mar	Sun>=16	0:00	1:00	S
+Rule	Macau	1965	only	-	Oct	31	0:00	0	-
+Rule	Macau	1966	1971	-	Apr	Sun>=16	3:30	1:00	S
+Rule	Macau	1966	1971	-	Oct	Sun>=16	3:30	0	-
+Rule	Macau	1972	1974	-	Apr	Sun>=15	0:00	1:00	S
+Rule	Macau	1972	1973	-	Oct	Sun>=15	0:00	0	-
+Rule	Macau	1974	1977	-	Oct	Sun>=15	3:30	0	-
+Rule	Macau	1975	1977	-	Apr	Sun>=15	3:30	1:00	S
+Rule	Macau	1978	1980	-	Apr	Sun>=15	0:00	1:00	S
+Rule	Macau	1978	1980	-	Oct	Sun>=15	0:00	0	-
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone	Asia/Macau	7:34:20 -	LMT	1912
+			8:00	Macau	MO%sT	1999 Dec 20 # return to China
+			8:00	PRC	C%sT
+
+
+###############################################################################
+
+# Cyprus
+# Rule	NAME	FROM	TO	TYPE	IN	ON	AT	SAVE	LETTER/S
+Rule	Cyprus	1975	only	-	Apr	13	0:00	1:00	S
+Rule	Cyprus	1975	only	-	Oct	12	0:00	0	-
+Rule	Cyprus	1976	only	-	May	15	0:00	1:00	S
+Rule	Cyprus	1976	only	-	Oct	11	0:00	0	-
+Rule	Cyprus	1977	1980	-	Apr	Sun>=1	0:00	1:00	S
+Rule	Cyprus	1977	only	-	Sep	25	0:00	0	-
+Rule	Cyprus	1978	only	-	Oct	2	0:00	0	-
+Rule	Cyprus	1979	1997	-	Sep	lastSun	0:00	0	-
+Rule	Cyprus	1981	1998	-	Mar	lastSun	0:00	1:00	S
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone	Asia/Nicosia	2:13:28 -	LMT	1921 Nov 14
+			2:00	Cyprus	EE%sT	1998 Sep
+			2:00	EUAsia	EE%sT
+# IATA SSIM (1998-09) has Cyprus using EU rules for the first time.
+
+# Classically, Cyprus belongs to Asia; e.g. see Herodotus, Histories, I.72.
+# However, for various reasons many users expect to find it under Europe.
+Link	Asia/Nicosia	Europe/Nicosia
+
+# Georgia
+# From Paul Eggert (1994-11-19):
+# Today's _Economist_ (p 60) reports that Georgia moved its clocks forward
+# an hour recently, due to a law proposed by Zurab Murvanidze,
+# an MP who went on a hunger strike for 11 days to force discussion about it!
+# We have no details, but we'll guess they didn't move the clocks back in fall.
+#
+# From Mathew Englander, quoting AP (1996-10-23 13:05-04):
+# Instead of putting back clocks at the end of October, Georgia
+# will stay on daylight savings time this winter to save energy,
+# President Eduard Shevardnadze decreed Wednesday.
+#
+# From the BBC via Joseph S. Myers (2004-06-27):
+#
+# Georgia moved closer to Western Europe on Sunday...  The former Soviet
+# republic has changed its time zone back to that of Moscow.  As a result it
+# is now just four hours ahead of Greenwich Mean Time, rather than five hours
+# ahead.  The switch was decreed by the pro-Western president of Georgia,
+# Mikhail Saakashvili, who said the change was partly prompted by the process
+# of integration into Europe.
+
+# From Teimuraz Abashidze (2005-11-07):
+# Government of Georgia ... decided to NOT CHANGE daylight savings time on
+# [Oct.] 30, as it was done before during last more than 10 years.
+# Currently, we are in fact GMT +4:00, as before 30 October it was GMT
+# +3:00.... The problem is, there is NO FORMAL LAW or governmental document
+# about it.  As far as I can find, I was told, that there is no document,
+# because we just DIDN'T ISSUE document about switching to winter time....
+# I don't know what can be done, especially knowing that some years ago our
+# DST rules where changed THREE TIMES during one month.
+
+
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone	Asia/Tbilisi	2:59:16 -	LMT	1880
+			2:59:16	-	TBMT	1924 May  2 # Tbilisi Mean Time
+			3:00	-	TBIT	1957 Mar    # Tbilisi Time
+			4:00 RussiaAsia TBI%sT	1991 Mar 31 2:00s
+			3:00	1:00	TBIST	1991 Apr  9 # independence
+			3:00 RussiaAsia GE%sT	1992 # Georgia Time
+			3:00 E-EurAsia	GE%sT	1994 Sep lastSun
+			4:00 E-EurAsia	GE%sT	1996 Oct lastSun
+			4:00	1:00	GEST	1997 Mar lastSun
+			4:00 E-EurAsia	GE%sT	2004 Jun 27
+			3:00 RussiaAsia	GE%sT	2005 Mar lastSun 2:00
+			4:00	-	GET
+
+# East Timor
+
+# See Indonesia for the 1945 transition.
+
+# From Joao Carrascalao, brother of the former governor of East Timor, in
+# <a href="http://etan.org/et99c/december/26-31/30ETMAY.htm">
+# East Timor may be late for its millennium
+# </a> (1999-12-26/31):
+# Portugal tried to change the time forward in 1974 because the sun
+# rises too early but the suggestion raised a lot of problems with the
+# Timorese and I still don't think it would work today because it
+# conflicts with their way of life.
+
+# From Paul Eggert (2000-12-04):
+# We don't have any record of the above attempt.
+# Most likely our records are incomplete, but we have no better data.
+
+# <a href="http://www.hri.org/news/world/undh/last/00-08-16.undh.html">
+# From Manoel de Almeida e Silva, Deputy Spokesman for the UN Secretary-General
+# (2000-08-16)</a>:
+# The Cabinet of the East Timor Transition Administration decided
+# today to advance East Timor's time by one hour.  The time change,
+# which will be permanent, with no seasonal adjustment, will happen at
+# midnight on Saturday, September 16.
+
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone	Asia/Dili	8:22:20 -	LMT	1912
+			8:00	-	TLT	1942 Feb 21 23:00 # E Timor Time
+			9:00	-	JST	1945 Sep 23
+			9:00	-	TLT	1976 May  3
+			8:00	-	CIT	2000 Sep 17 00:00
+			9:00	-	TLT
+
+# India
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone	Asia/Calcutta	5:53:28 -	LMT	1880	# Kolkata
+			5:53:20	-	HMT	1941 Oct    # Howrah Mean Time?
+			6:30	-	BURT	1942 May 15 # Burma Time
+			5:30	-	IST	1942 Sep
+			5:30	1:00	IST	1945 Oct 15
+			5:30	-	IST
+# The following are like Asia/Calcutta:
+#	Andaman Is
+#	Lakshadweep (Laccadive, Minicoy and Amindivi Is)
+#	Nicobar Is
+
+# Indonesia
+#
+# From Gwillim Law (2001-05-28), overriding Shanks & Pottenger:
+# <http://www.sumatera-inc.com/go_to_invest/about_indonesia.asp#standtime>
+# says that Indonesia's time zones changed on 1988-01-01.  Looking at some
+# time zone maps, I think that must refer to Western Borneo (Kalimantan Barat
+# and Kalimantan Tengah) switching from UTC+8 to UTC+7.
+#
+# From Paul Eggert (2007-03-10):
+# Here is another correction to Shanks & Pottenger.
+# JohnTWB writes that Japanese forces did not surrender control in
+# Indonesia until 1945-09-01 00:00 at the earliest (in Jakarta) and
+# other formal surrender ceremonies were September 9, 11, and 13, plus
+# September 12 for the regional surrender to Mountbatten in Singapore.
+# These would be the earliest possible times for a change.
+# Regimes horaires pour le monde entier, by Henri Le Corre, (Editions
+# Traditionnelles, 1987, Paris) says that Java and Madura switched
+# from JST to UTC+07:30 on 1945-09-23, and gives 1944-09-01 for Jayapura
+# (Hollandia).  For now, assume all Indonesian locations other than Jayapura
+# switched on 1945-09-23.
+#
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone Asia/Jakarta	7:07:12 -	LMT	1867 Aug 10
+# Shanks & Pottenger say the next transition was at 1924 Jan 1 0:13,
+# but this must be a typo.
+			7:07:12	-	JMT	1923 Dec 31 23:47:12 # Jakarta
+			7:20	-	JAVT	1932 Nov	 # Java Time
+			7:30	-	WIT	1942 Mar 23
+			9:00	-	JST	1945 Sep 23
+			7:30	-	WIT	1948 May
+			8:00	-	WIT	1950 May
+			7:30	-	WIT	1964
+			7:00	-	WIT
+Zone Asia/Pontianak	7:17:20	-	LMT	1908 May
+			7:17:20	-	PMT	1932 Nov    # Pontianak MT
+			7:30	-	WIT	1942 Jan 29
+			9:00	-	JST	1945 Sep 23
+			7:30	-	WIT	1948 May
+			8:00	-	WIT	1950 May
+			7:30	-	WIT	1964
+			8:00	-	CIT	1988 Jan  1
+			7:00	-	WIT
+Zone Asia/Makassar	7:57:36 -	LMT	1920
+			7:57:36	-	MMT	1932 Nov    # Macassar MT
+			8:00	-	CIT	1942 Feb  9
+			9:00	-	JST	1945 Sep 23
+			8:00	-	CIT
+Zone Asia/Jayapura	9:22:48 -	LMT	1932 Nov
+			9:00	-	EIT	1944 Sep  1
+			9:30	-	CST	1964
+			9:00	-	EIT
+
+# Iran
+
+# From Roozbeh Pournader (2003-03-15):
+# This is an English translation of what I just found (originally in Persian).
+# The Gregorian dates in brackets are mine:
+#
+#	Official Newspaper No. 13548-1370/6/25 [1991-09-16]
+#	No. 16760/T233 H				1370/6/10 [1991-09-01]
+#
+#	The Rule About Change of the Official Time of the Country
+#
+#	The Board of Ministers, in the meeting dated 1370/5/23 [1991-08-14],
+#	based on the suggestion number 2221/D dated 1370/4/22 [1991-07-13]
+#	of the Country's Organization for Official and Employment Affairs,
+#	and referring to the law for equating the working hours of workers
+#	and officers in the whole country dated 1359/4/23 [1980-07-14], and
+#	for synchronizing the official times of the country, agreed that:
+#
+#	The official time of the country will should move forward one hour
+#	at the 24[:00] hours of the first day of Farvardin and should return
+#	to its previous state at the 24[:00] hours of the 30th day of
+#	Shahrivar.
+#
+#	First Deputy to the President - Hassan Habibi
+#
+# From personal experience, that agrees with what has been followed
+# for at least the last 5 years.  Before that, for a few years, the
+# date used was the first Thursday night of Farvardin and the last
+# Thursday night of Shahrivar, but I can't give exact dates....
+# I have also changed the abbreviations to what is considered correct
+# here in Iran, IRST for regular time and IRDT for daylight saving time.
+#
+# From Roozbeh Pournader (2005-04-05):
+# The text of the Iranian law, in effect since 1925, clearly mentions
+# that the true solar year is the measure, and there is no arithmetic
+# leap year calculation involved.  There has never been any serious
+# plan to change that law....
+#
+# From Paul Eggert (2006-03-22):
+# Go with Shanks & Pottenger before Sept. 1991, and with Pournader thereafter.
+# I used Ed Reingold's cal-persia in GNU Emacs 21.2 to check Persian dates,
+# stopping after 2037 when 32-bit time_t's overflow.
+# That cal-persia used Birashk's approximation, which disagrees with the solar
+# calendar predictions for the year 2025, so I corrected those dates by hand.
+#
+# From Oscar van Vlijmen (2005-03-30), writing about future
+# discrepancies between cal-persia and the Iranian calendar:
+# For 2091 solar-longitude-after yields 2091-03-20 08:40:07.7 UT for
+# the vernal equinox and that gets so close to 12:00 some local
+# Iranian time that the definition of the correct location needs to be
+# known exactly, amongst other factors.  2157 is even closer:
+# 2157-03-20 08:37:15.5 UT.  But the Gregorian year 2025 should give
+# no interpretation problem whatsoever.  By the way, another instant
+# in the near future where there will be a discrepancy between
+# arithmetical and astronomical Iranian calendars will be in 2058:
+# vernal equinox on 2058-03-20 09:03:05.9 UT.  The Java version of
+# Reingold's/Dershowitz' calculator gives correctly the Gregorian date
+# 2058-03-21 for 1 Farvardin 1437 (astronomical).
+#
+# From Paul Eggert (2006-03-22):
+# The above comments about post-2006 transitions may become relevant again,
+# if Iran ever resuscitates DST, so we'll leave the comments in.
+#
+# From Steffen Thorsen (2006-03-22):
+# Several of my users have reported that Iran will not observe DST anymore:
+# http://www.irna.ir/en/news/view/line-17/0603193812164948.htm
+#
+# Rule	NAME	FROM	TO	TYPE	IN	ON	AT	SAVE	LETTER/S
+Rule	Iran	1978	1980	-	Mar	21	0:00	1:00	D
+Rule	Iran	1978	only	-	Oct	21	0:00	0	S
+Rule	Iran	1979	only	-	Sep	19	0:00	0	S
+Rule	Iran	1980	only	-	Sep	23	0:00	0	S
+Rule	Iran	1991	only	-	May	 3	0:00	1:00	D
+Rule	Iran	1992	1995	-	Mar	22	0:00	1:00	D
+Rule	Iran	1991	1995	-	Sep	22	0:00	0	S
+Rule	Iran	1996	only	-	Mar	21	0:00	1:00	D
+Rule	Iran	1996	only	-	Sep	21	0:00	0	S
+Rule	Iran	1997	1999	-	Mar	22	0:00	1:00	D
+Rule	Iran	1997	1999	-	Sep	22	0:00	0	S
+Rule	Iran	2000	only	-	Mar	21	0:00	1:00	D
+Rule	Iran	2000	only	-	Sep	21	0:00	0	S
+Rule	Iran	2001	2003	-	Mar	22	0:00	1:00	D
+Rule	Iran	2001	2003	-	Sep	22	0:00	0	S
+Rule	Iran	2004	only	-	Mar	21	0:00	1:00	D
+Rule	Iran	2004	only	-	Sep	21	0:00	0	S
+Rule	Iran	2005	only	-	Mar	22	0:00	1:00	D
+Rule	Iran	2005	only	-	Sep	22	0:00	0	S
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone	Asia/Tehran	3:25:44	-	LMT	1916
+			3:25:44	-	TMT	1946	# Tehran Mean Time
+			3:30	-	IRST	1977 Nov
+			4:00	Iran	IR%sT	1979
+			3:30	Iran	IR%sT
+
+
+# Iraq
+#
+# From Jonathan Lennox (2000-06-12):
+# An article in this week's Economist ("Inside the Saddam-free zone", p. 50 in
+# the U.S. edition) on the Iraqi Kurds contains a paragraph:
+# "The three northern provinces ... switched their clocks this spring and
+# are an hour ahead of Baghdad."
+#
+# But Rives McDow (2000-06-18) quotes a contact in Iraqi-Kurdistan as follows:
+# In the past, some Kurdish nationalists, as a protest to the Iraqi
+# Government, did not adhere to daylight saving time.  They referred
+# to daylight saving as Saddam time.  But, as of today, the time zone
+# in Iraqi-Kurdistan is on standard time with Baghdad, Iraq.
+#
+# So we'll ignore the Economist's claim.
+
+# Rule	NAME	FROM	TO	TYPE	IN	ON	AT	SAVE	LETTER/S
+Rule	Iraq	1982	only	-	May	1	0:00	1:00	D
+Rule	Iraq	1982	1984	-	Oct	1	0:00	0	S
+Rule	Iraq	1983	only	-	Mar	31	0:00	1:00	D
+Rule	Iraq	1984	1985	-	Apr	1	0:00	1:00	D
+Rule	Iraq	1985	1990	-	Sep	lastSun	1:00s	0	S
+Rule	Iraq	1986	1990	-	Mar	lastSun	1:00s	1:00	D
+# IATA SSIM (1991/1996) says Apr 1 12:01am UTC; guess the `:01' is a typo.
+# Shanks & Pottenger say Iraq did not observe DST 1992/1997; ignore this.
+#
+Rule	Iraq	1991	max	-	Apr	 1	3:00s	1:00	D
+Rule	Iraq	1991	max	-	Oct	 1	3:00s	0	S
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone	Asia/Baghdad	2:57:40	-	LMT	1890
+			2:57:36	-	BMT	1918	    # Baghdad Mean Time?
+			3:00	-	AST	1982 May
+			3:00	Iraq	A%sT
+
+
+###############################################################################
+
+# Israel
+
+# From Ephraim Silverberg (2001-01-11):
+#
+# I coined "IST/IDT" circa 1988.  Until then there were three
+# different abbreviations in use:
+#
+# JST  Jerusalem Standard Time [Danny Braniss, Hebrew University]
+# IZT  Israel Zonal (sic) Time [Prof. Haim Papo, Technion]
+# EEST Eastern Europe Standard Time [used by almost everyone else]
+#
+# Since timezones should be called by country and not capital cities,
+# I ruled out JST.  As Israel is in Asia Minor and not Eastern Europe,
+# EEST was equally unacceptable.  Since "zonal" was not compatible with
+# any other timezone abbreviation, I felt that 'IST' was the way to go
+# and, indeed, it has received almost universal acceptance in timezone
+# settings in Israeli computers.
+#
+# In any case, I am happy to share timezone abbreviations with India,
+# high on my favorite-country list (and not only because my wife's
+# family is from India).
+
+# From Shanks & Pottenger:
+# Rule	NAME	FROM	TO	TYPE	IN	ON	AT	SAVE	LETTER/S
+Rule	Zion	1940	only	-	Jun	 1	0:00	1:00	D
+Rule	Zion	1942	1944	-	Nov	 1	0:00	0	S
+Rule	Zion	1943	only	-	Apr	 1	2:00	1:00	D
+Rule	Zion	1944	only	-	Apr	 1	0:00	1:00	D
+Rule	Zion	1945	only	-	Apr	16	0:00	1:00	D
+Rule	Zion	1945	only	-	Nov	 1	2:00	0	S
+Rule	Zion	1946	only	-	Apr	16	2:00	1:00	D
+Rule	Zion	1946	only	-	Nov	 1	0:00	0	S
+Rule	Zion	1948	only	-	May	23	0:00	2:00	DD
+Rule	Zion	1948	only	-	Sep	 1	0:00	1:00	D
+Rule	Zion	1948	1949	-	Nov	 1	2:00	0	S
+Rule	Zion	1949	only	-	May	 1	0:00	1:00	D
+Rule	Zion	1950	only	-	Apr	16	0:00	1:00	D
+Rule	Zion	1950	only	-	Sep	15	3:00	0	S
+Rule	Zion	1951	only	-	Apr	 1	0:00	1:00	D
+Rule	Zion	1951	only	-	Nov	11	3:00	0	S
+Rule	Zion	1952	only	-	Apr	20	2:00	1:00	D
+Rule	Zion	1952	only	-	Oct	19	3:00	0	S
+Rule	Zion	1953	only	-	Apr	12	2:00	1:00	D
+Rule	Zion	1953	only	-	Sep	13	3:00	0	S
+Rule	Zion	1954	only	-	Jun	13	0:00	1:00	D
+Rule	Zion	1954	only	-	Sep	12	0:00	0	S
+Rule	Zion	1955	only	-	Jun	11	2:00	1:00	D
+Rule	Zion	1955	only	-	Sep	11	0:00	0	S
+Rule	Zion	1956	only	-	Jun	 3	0:00	1:00	D
+Rule	Zion	1956	only	-	Sep	30	3:00	0	S
+Rule	Zion	1957	only	-	Apr	29	2:00	1:00	D
+Rule	Zion	1957	only	-	Sep	22	0:00	0	S
+Rule	Zion	1974	only	-	Jul	 7	0:00	1:00	D
+Rule	Zion	1974	only	-	Oct	13	0:00	0	S
+Rule	Zion	1975	only	-	Apr	20	0:00	1:00	D
+Rule	Zion	1975	only	-	Aug	31	0:00	0	S
+Rule	Zion	1985	only	-	Apr	14	0:00	1:00	D
+Rule	Zion	1985	only	-	Sep	15	0:00	0	S
+Rule	Zion	1986	only	-	May	18	0:00	1:00	D
+Rule	Zion	1986	only	-	Sep	 7	0:00	0	S
+Rule	Zion	1987	only	-	Apr	15	0:00	1:00	D
+Rule	Zion	1987	only	-	Sep	13	0:00	0	S
+Rule	Zion	1988	only	-	Apr	 9	0:00	1:00	D
+Rule	Zion	1988	only	-	Sep	 3	0:00	0	S
+
+# From Ephraim Silverberg
+# (1997-03-04, 1998-03-16, 1998-12-28, 2000-01-17, 2000-07-25, 2004-12-22,
+# and 2005-02-17):
+
+# According to the Office of the Secretary General of the Ministry of
+# Interior, there is NO set rule for Daylight-Savings/Standard time changes.
+# One thing is entrenched in law, however: that there must be at least 150
+# days of daylight savings time annually.  From 1993-1998, the change to
+# daylight savings time was on a Friday morning from midnight IST to
+# 1 a.m IDT; up until 1998, the change back to standard time was on a
+# Saturday night from midnight daylight savings time to 11 p.m. standard
+# time.  1996 is an exception to this rule where the change back to standard
+# time took place on Sunday night instead of Saturday night to avoid
+# conflicts with the Jewish New Year.  In 1999, the change to
+# daylight savings time was still on a Friday morning but from
+# 2 a.m. IST to 3 a.m. IDT; furthermore, the change back to standard time
+# was also on a Friday morning from 2 a.m. IDT to 1 a.m. IST for
+# 1999 only.  In the year 2000, the change to daylight savings time was
+# similar to 1999, but although the change back will be on a Friday, it
+# will take place from 1 a.m. IDT to midnight IST.  Starting in 2001, all
+# changes to/from will take place at 1 a.m. old time, but now there is no
+# rule as to what day of the week it will take place in as the start date
+# (except in 2003) is the night after the Passover Seder (i.e. the eve
+# of the 16th of Nisan in the lunar Hebrew calendar) and the end date
+# (except in 2002) is three nights before Yom Kippur [Day of Atonement]
+# (the eve of the 7th of Tishrei in the lunar Hebrew calendar).
+
+# Rule	NAME	FROM	TO	TYPE	IN	ON	AT	SAVE	LETTER/S
+Rule	Zion	1989	only	-	Apr	30	0:00	1:00	D
+Rule	Zion	1989	only	-	Sep	 3	0:00	0	S
+Rule	Zion	1990	only	-	Mar	25	0:00	1:00	D
+Rule	Zion	1990	only	-	Aug	26	0:00	0	S
+Rule	Zion	1991	only	-	Mar	24	0:00	1:00	D
+Rule	Zion	1991	only	-	Sep	 1	0:00	0	S
+Rule	Zion	1992	only	-	Mar	29	0:00	1:00	D
+Rule	Zion	1992	only	-	Sep	 6	0:00	0	S
+Rule	Zion	1993	only	-	Apr	 2	0:00	1:00	D
+Rule	Zion	1993	only	-	Sep	 5	0:00	0	S
+
+# The dates for 1994-1995 were obtained from Office of the Spokeswoman for the
+# Ministry of Interior, Jerusalem, Israel.  The spokeswoman can be reached by
+# calling the office directly at 972-2-6701447 or 972-2-6701448.
+
+# Rule	NAME    FROM    TO      TYPE    IN      ON      AT      SAVE    LETTER/S
+Rule	Zion	1994	only	-	Apr	 1	0:00	1:00	D
+Rule	Zion	1994	only	-	Aug	28	0:00	0	S
+Rule	Zion	1995	only	-	Mar	31	0:00	1:00	D
+Rule	Zion	1995	only	-	Sep	 3	0:00	0	S
+
+# The dates for 1996 were determined by the Minister of Interior of the
+# time, Haim Ramon.  The official announcement regarding 1996-1998
+# (with the dates for 1997-1998 no longer being relevant) can be viewed at:
+#
+#   ftp://ftp.cs.huji.ac.il/pub/tz/announcements/1996-1998.ramon.ps.gz
+#
+# The dates for 1997-1998 were altered by his successor, Rabbi Eli Suissa.
+#
+# The official announcements for the years 1997-1999 can be viewed at:
+#
+#   ftp://ftp.cs.huji.ac.il/pub/tz/announcements/YYYY.ps.gz
+#
+#       where YYYY is the relevant year.
+
+# Rule	NAME	FROM	TO	TYPE	IN	ON	AT	SAVE	LETTER/S
+Rule	Zion	1996	only	-	Mar	15	0:00	1:00	D
+Rule	Zion	1996	only	-	Sep	16	0:00	0	S
+Rule	Zion	1997	only	-	Mar	21	0:00	1:00	D
+Rule	Zion	1997	only	-	Sep	14	0:00	0	S
+Rule	Zion	1998	only	-	Mar	20	0:00	1:00	D
+Rule	Zion	1998	only	-	Sep	 6	0:00	0	S
+Rule	Zion	1999	only	-	Apr	 2	2:00	1:00	D
+Rule	Zion	1999	only	-	Sep	 3	2:00	0	S
+
+# The Knesset Interior Committee has changed the dates for 2000 for
+# the third time in just over a year and have set new dates for the
+# years 2001-2004 as well.
+#
+# The official announcement for the start date of 2000 can be viewed at:
+#
+#	ftp://ftp.cs.huji.ac.il/pub/tz/announcements/2000-start.ps.gz
+#
+# The official announcement for the end date of 2000 and the dates
+# for the years 2001-2004 can be viewed at:
+#
+#	ftp://ftp.cs.huji.ac.il/pub/tz/announcements/2000-2004.ps.gz
+
+# Rule	NAME	FROM	TO	TYPE	IN	ON	AT	SAVE	LETTER/S
+Rule	Zion	2000	only	-	Apr	14	2:00	1:00	D
+Rule	Zion	2000	only	-	Oct	 6	1:00	0	S
+Rule	Zion	2001	only	-	Apr	 9	1:00	1:00	D
+Rule	Zion	2001	only	-	Sep	24	1:00	0	S
+Rule	Zion	2002	only	-	Mar	29	1:00	1:00	D
+Rule	Zion	2002	only	-	Oct	 7	1:00	0	S
+Rule	Zion	2003	only	-	Mar	28	1:00	1:00	D
+Rule	Zion	2003	only	-	Oct	 3	1:00	0	S
+Rule	Zion	2004	only	-	Apr	 7	1:00	1:00	D
+Rule	Zion	2004	only	-	Sep	22	1:00	0	S
+
+# The proposed law agreed upon by the Knesset Interior Committee on
+# 2005-02-14 is that, for 2005 and beyond, DST starts at 02:00 the
+# last Friday before April 2nd (i.e. the last Friday in March or April
+# 1st itself if it falls on a Friday) and ends at 02:00 on the Saturday
+# night _before_ the fast of Yom Kippur.
+#
+# Those who can read Hebrew can view the announcement at:
+#
+#	ftp://ftp.cs.huji.ac.il/pub/tz/announcements/2005+beyond.ps
+
+# From Paul Eggert (2005-02-22):
+# I used Ephraim Silverberg's dst-israel.el program
+# <ftp://ftp.cs.huji.ac.il/pub/tz/software/dst-israel.el> (2005-02-20)
+# along with Ed Reingold's cal-hebrew in GNU Emacs 21.4,
+# to generate the transitions in this list.
+# (I replaced "lastFri" with "Fri>=26" by hand.)
+# The spring transitions below all correspond to the following Rule:
+#
+# Rule	Zion	2005	max	-	Mar	Fri>=26	2:00	1:00	D
+#
+# but older zic implementations (e.g., Solaris 8) do not support
+# "Fri>=26" to mean April 1 in years like 2005, so for now we list the
+# springtime transitions explicitly.
+
+# Rule	NAME	FROM	TO	TYPE	IN	ON	AT	SAVE	LETTER/S
+Rule	Zion	2005	only	-	Apr	 1	2:00	1:00	D
+Rule	Zion	2005	only	-	Oct	 9	2:00	0	S
+Rule	Zion	2006	2010	-	Mar	Fri>=26	2:00	1:00	D
+Rule	Zion	2006	only	-	Oct	 1	2:00	0	S
+Rule	Zion	2007	only	-	Sep	16	2:00	0	S
+Rule	Zion	2008	only	-	Oct	 5	2:00	0	S
+Rule	Zion	2009	only	-	Sep	27	2:00	0	S
+Rule	Zion	2010	only	-	Sep	12	2:00	0	S
+Rule	Zion	2011	only	-	Apr	 1	2:00	1:00	D
+Rule	Zion	2011	only	-	Oct	 2	2:00	0	S
+Rule	Zion	2012	2015	-	Mar	Fri>=26	2:00	1:00	D
+Rule	Zion	2012	only	-	Sep	23	2:00	0	S
+Rule	Zion	2013	only	-	Sep	 8	2:00	0	S
+Rule	Zion	2014	only	-	Sep	28	2:00	0	S
+Rule	Zion	2015	only	-	Sep	20	2:00	0	S
+Rule	Zion	2016	only	-	Apr	 1	2:00	1:00	D
+Rule	Zion	2016	only	-	Oct	 9	2:00	0	S
+Rule	Zion	2017	2021	-	Mar	Fri>=26	2:00	1:00	D
+Rule	Zion	2017	only	-	Sep	24	2:00	0	S
+Rule	Zion	2018	only	-	Sep	16	2:00	0	S
+Rule	Zion	2019	only	-	Oct	 6	2:00	0	S
+Rule	Zion	2020	only	-	Sep	27	2:00	0	S
+Rule	Zion	2021	only	-	Sep	12	2:00	0	S
+Rule	Zion	2022	only	-	Apr	 1	2:00	1:00	D
+Rule	Zion	2022	only	-	Oct	 2	2:00	0	S
+Rule	Zion	2023	2032	-	Mar	Fri>=26	2:00	1:00	D
+Rule	Zion	2023	only	-	Sep	24	2:00	0	S
+Rule	Zion	2024	only	-	Oct	 6	2:00	0	S
+Rule	Zion	2025	only	-	Sep	28	2:00	0	S
+Rule	Zion	2026	only	-	Sep	20	2:00	0	S
+Rule	Zion	2027	only	-	Oct	10	2:00	0	S
+Rule	Zion	2028	only	-	Sep	24	2:00	0	S
+Rule	Zion	2029	only	-	Sep	16	2:00	0	S
+Rule	Zion	2030	only	-	Oct	 6	2:00	0	S
+Rule	Zion	2031	only	-	Sep	21	2:00	0	S
+Rule	Zion	2032	only	-	Sep	12	2:00	0	S
+Rule	Zion	2033	only	-	Apr	 1	2:00	1:00	D
+Rule	Zion	2033	only	-	Oct	 2	2:00	0	S
+Rule	Zion	2034	2037	-	Mar	Fri>=26	2:00	1:00	D
+Rule	Zion	2034	only	-	Sep	17	2:00	0	S
+Rule	Zion	2035	only	-	Oct	 7	2:00	0	S
+Rule	Zion	2036	only	-	Sep	28	2:00	0	S
+Rule	Zion	2037	only	-	Sep	13	2:00	0	S
+
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone	Asia/Jerusalem	2:20:56 -	LMT	1880
+			2:20:40	-	JMT	1918	# Jerusalem Mean Time?
+			2:00	Zion	I%sT
+
+
+
+###############################################################################
+
+# Japan
+
+# `9:00' and `JST' is from Guy Harris.
+
+# From Paul Eggert (1995-03-06):
+# Today's _Asahi Evening News_ (page 4) reports that Japan had
+# daylight saving between 1948 and 1951, but ``the system was discontinued
+# because the public believed it would lead to longer working hours.''
+
+# From Mayumi Negishi in the 2005-08-10 Japan Times
+# <http://www.japantimes.co.jp/cgi-bin/getarticle.pl5?nn20050810f2.htm>:
+# Occupation authorities imposed daylight-saving time on Japan on
+# [1948-05-01]....  But lack of prior debate and the execution of
+# daylight-saving time just three days after the bill was passed generated
+# deep hatred of the concept....  The Diet unceremoniously passed a bill to
+# dump the unpopular system in October 1951, less than a month after the San
+# Francisco Peace Treaty was signed.  (A government poll in 1951 showed 53%
+# of the Japanese wanted to scrap daylight-saving time, as opposed to 30% who
+# wanted to keep it.)
+
+# From Paul Eggert (2006-03-22):
+# Shanks & Pottenger write that DST in Japan during those years was as follows:
+# Rule	NAME	FROM	TO	TYPE	IN	ON	AT	SAVE	LETTER/S
+Rule	Japan	1948	only	-	May	Sun>=1	2:00	1:00	D
+Rule	Japan	1948	1951	-	Sep	Sat>=8	2:00	0	S
+Rule	Japan	1949	only	-	Apr	Sun>=1	2:00	1:00	D
+Rule	Japan	1950	1951	-	May	Sun>=1	2:00	1:00	D
+# but the only locations using it (for birth certificates, presumably, since
+# their audience is astrologers) were US military bases.  For now, assume
+# that for most purposes daylight-saving time was observed; otherwise, what
+# would have been the point of the 1951 poll?
+
+# From Hideyuki Suzuki (1998-11-09):
+# 'Tokyo' usually stands for the former location of Tokyo Astronomical
+# Observatory: E 139 44' 40".90 (9h 18m 58s.727), N 35 39' 16".0.
+# This data is from 'Rika Nenpyou (Chronological Scientific Tables) 1996'
+# edited by National Astronomical Observatory of Japan....
+# JST (Japan Standard Time) has been used since 1888-01-01 00:00 (JST).
+# The law is enacted on 1886-07-07.
+
+# From Hideyuki Suzuki (1998-11-16):
+# The ordinance No. 51 (1886) established "standard time" in Japan,
+# which stands for the time on E 135 degree.
+# In the ordinance No. 167 (1895), "standard time" was renamed to "central
+# standard time".  And the same ordinance also established "western standard
+# time", which stands for the time on E 120 degree....  But "western standard
+# time" was abolished in the ordinance No. 529 (1937).  In the ordinance No.
+# 167, there is no mention regarding for what place western standard time is
+# standard....
+#
+# I wrote "ordinance" above, but I don't know how to translate.
+# In Japanese it's "chokurei", which means ordinance from emperor.
+
+# Shanks & Pottenger claim JST in use since 1896, and that a few
+# places (e.g. Ishigaki) use +0800; go with Suzuki.  Guess that all
+# ordinances took effect on Jan 1.
+
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone	Asia/Tokyo	9:18:59	-	LMT	1887 Dec 31 15:00u
+			9:00	-	JST	1896
+			9:00	-	CJT	1938
+			9:00	Japan	J%sT
+# Since 1938, all Japanese possessions have been like Asia/Tokyo.
+
+# Jordan
+#
+# From <a href="http://star.arabia.com/990701/JO9.html">
+# Jordan Week (1999-07-01) </a> via Steffen Thorsen (1999-09-09):
+# Clocks in Jordan were forwarded one hour on Wednesday at midnight,
+# in accordance with the government's decision to implement summer time
+# all year round.
+#
+# From <a href="http://star.arabia.com/990930/JO9.html">
+# Jordan Week (1999-09-30) </a> via Steffen Thorsen (1999-11-09):
+# Winter time starts today Thursday, 30 September. Clocks will be turned back
+# by one hour.  This is the latest government decision and it's final!
+# The decision was taken because of the increase in working hours in
+# government's departments from six to seven hours.
+#
+# From Paul Eggert (2005-11-22):
+# Starting 2003 transitions are from Steffen Thorsen's web site timeanddate.com.
+#
+# From Steffen Thorsen (2005-11-23):
+# For Jordan I have received multiple independent user reports every year
+# about DST end dates, as the end-rule is different every year.
+#
+# From Steffen Thorsen (2006-10-01), after a heads-up from Hilal Malawi:
+# http://www.petranews.gov.jo/nepras/2006/Sep/05/4000.htm
+# "Jordan will switch to winter time on Friday, October 27".
+#
+# Rule	NAME	FROM	TO	TYPE	IN	ON	AT	SAVE	LETTER/S
+Rule	Jordan	1973	only	-	Jun	6	0:00	1:00	S
+Rule	Jordan	1973	1975	-	Oct	1	0:00	0	-
+Rule	Jordan	1974	1977	-	May	1	0:00	1:00	S
+Rule	Jordan	1976	only	-	Nov	1	0:00	0	-
+Rule	Jordan	1977	only	-	Oct	1	0:00	0	-
+Rule	Jordan	1978	only	-	Apr	30	0:00	1:00	S
+Rule	Jordan	1978	only	-	Sep	30	0:00	0	-
+Rule	Jordan	1985	only	-	Apr	1	0:00	1:00	S
+Rule	Jordan	1985	only	-	Oct	1	0:00	0	-
+Rule	Jordan	1986	1988	-	Apr	Fri>=1	0:00	1:00	S
+Rule	Jordan	1986	1990	-	Oct	Fri>=1	0:00	0	-
+Rule	Jordan	1989	only	-	May	8	0:00	1:00	S
+Rule	Jordan	1990	only	-	Apr	27	0:00	1:00	S
+Rule	Jordan	1991	only	-	Apr	17	0:00	1:00	S
+Rule	Jordan	1991	only	-	Sep	27	0:00	0	-
+Rule	Jordan	1992	only	-	Apr	10	0:00	1:00	S
+Rule	Jordan	1992	1993	-	Oct	Fri>=1	0:00	0	-
+Rule	Jordan	1993	1998	-	Apr	Fri>=1	0:00	1:00	S
+Rule	Jordan	1994	only	-	Sep	Fri>=15	0:00	0	-
+Rule	Jordan	1995	1998	-	Sep	Fri>=15	0:00s	0	-
+Rule	Jordan	1999	only	-	Jul	 1	0:00s	1:00	S
+Rule	Jordan	1999	2002	-	Sep	lastThu	0:00s	0	-
+Rule	Jordan	2000	max	-	Mar	lastThu	0:00s	1:00	S
+Rule	Jordan	2003	only	-	Oct	24	0:00s	0	-
+Rule	Jordan	2004	only	-	Oct	15	0:00s	0	-
+Rule	Jordan	2005	only	-	Sep	lastFri	0:00s	0	-
+Rule	Jordan	2006	max	-	Oct	lastFri	0:00s	0	-
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone	Asia/Amman	2:23:44 -	LMT	1931
+			2:00	Jordan	EE%sT
+
+
+# Kazakhstan
+
+# From Paul Eggert (1996-11-22):
+# Andrew Evtichov (1996-04-13) writes that Kazakhstan
+# stayed in sync with Moscow after 1990, and that Aqtobe (formerly Aktyubinsk)
+# and Aqtau (formerly Shevchenko) are the largest cities in their zones.
+# Guess that Aqtau and Aqtobe diverged in 1995, since that's the first time
+# IATA SSIM mentions a third time zone in Kazakhstan.
+
+# From Paul Eggert (2006-03-22):
+# German Iofis, ELSI, Almaty (2001-10-09) reports that Kazakhstan uses
+# RussiaAsia rules, instead of switching at 00:00 as the IATA has it.
+# Go with Shanks & Pottenger, who have them always using RussiaAsia rules.
+# Also go with the following claims of Shanks & Pottenger:
+#
+# - Kazakhstan did not observe DST in 1991.
+# - Qyzylorda switched from +5:00 to +6:00 on 1992-01-19 02:00.
+# - Oral switched from +5:00 to +4:00 in spring 1989.
+
+# <a href="http://www.kazsociety.org.uk/news/2005/03/30.htm">
+# From Kazakhstan Embassy's News Bulletin #11 (2005-03-21):
+# </a>
+# The Government of Kazakhstan passed a resolution March 15 abolishing
+# daylight saving time citing lack of economic benefits and health
+# complications coupled with a decrease in productivity.
+#
+# From Branislav Kojic (in Astana) via Gwillim Law (2005-06-28):
+# ... what happened was that the former Kazakhstan Eastern time zone
+# was "blended" with the Central zone.  Therefore, Kazakhstan now has
+# two time zones, and difference between them is one hour.  The zone
+# closer to UTC is the former Western zone (probably still called the
+# same), encompassing four provinces in the west: Aqtobe, Atyrau,
+# Mangghystau, and West Kazakhstan.  The other zone encompasses
+# everything else....  I guess that would make Kazakhstan time zones
+# de jure UTC+5 and UTC+6 respectively.
+
+#
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+#
+# Almaty (formerly Alma-Ata), representing most locations in Kazakhstan
+Zone	Asia/Almaty	5:07:48 -	LMT	1924 May  2 # or Alma-Ata
+			5:00	-	ALMT	1930 Jun 21 # Alma-Ata Time
+			6:00 RussiaAsia ALM%sT	1991
+			6:00	-	ALMT	1992
+			6:00 RussiaAsia	ALM%sT	2005 Mar 15
+			6:00	-	ALMT
+# Qyzylorda (aka Kyzylorda, Kizilorda, Kzyl-Orda, etc.)
+Zone	Asia/Qyzylorda	4:21:52 -	LMT	1924 May  2
+			4:00	-	KIZT	1930 Jun 21 # Kizilorda Time
+			5:00	-	KIZT	1981 Apr  1
+			5:00	1:00	KIZST	1981 Oct  1
+			6:00	-	KIZT	1982 Apr  1
+			5:00 RussiaAsia	KIZ%sT	1991
+			5:00	-	KIZT	1991 Dec 16 # independence
+			5:00	-	QYZT	1992 Jan 19 2:00
+			6:00 RussiaAsia	QYZ%sT	2005 Mar 15
+			6:00	-	QYZT
+# Aqtobe (aka Aktobe, formerly Akt'ubinsk)
+Zone	Asia/Aqtobe	3:48:40	-	LMT	1924 May  2
+			4:00	-	AKTT	1930 Jun 21 # Aktyubinsk Time
+			5:00	-	AKTT	1981 Apr  1
+			5:00	1:00	AKTST	1981 Oct  1
+			6:00	-	AKTT	1982 Apr  1
+			5:00 RussiaAsia	AKT%sT	1991
+			5:00	-	AKTT	1991 Dec 16 # independence
+			5:00 RussiaAsia	AQT%sT	2005 Mar 15 # Aqtobe Time
+			5:00	-	AQTT
+# Mangghystau
+# Aqtau was not founded until 1963, but it represents an inhabited region,
+# so include time stamps before 1963.
+Zone	Asia/Aqtau	3:21:04	-	LMT	1924 May  2
+			4:00	-	FORT	1930 Jun 21 # Fort Shevchenko T
+			5:00	-	FORT	1963
+			5:00	-	SHET	1981 Oct  1 # Shevchenko Time
+			6:00	-	SHET	1982 Apr  1
+			5:00 RussiaAsia	SHE%sT	1991
+			5:00	-	SHET	1991 Dec 16 # independence
+			5:00 RussiaAsia	AQT%sT	1995 Mar lastSun 2:00 # Aqtau Time
+			4:00 RussiaAsia	AQT%sT	2005 Mar 15
+			5:00	-	AQTT
+# West Kazakhstan
+Zone	Asia/Oral	3:25:24	-	LMT	1924 May  2 # or Ural'sk
+			4:00	-	URAT	1930 Jun 21 # Ural'sk time
+			5:00	-	URAT	1981 Apr  1
+			5:00	1:00	URAST	1981 Oct  1
+			6:00	-	URAT	1982 Apr  1
+			5:00 RussiaAsia	URA%sT	1989 Mar 26 2:00
+			4:00 RussiaAsia	URA%sT	1991
+			4:00	-	URAT	1991 Dec 16 # independence
+			4:00 RussiaAsia	ORA%sT	2005 Mar 15 # Oral Time
+			5:00	-	ORAT
+
+# Kyrgyzstan (Kirgizstan)
+# Transitions through 1991 are from Shanks & Pottenger.
+
+# From Paul Eggert (2005-08-15):
+# According to an article dated today in the Kyrgyzstan Development Gateway
+# <http://eng.gateway.kg/cgi-bin/page.pl?id=1&story_name=doc9979.shtml>
+# Kyrgyzstan is canceling the daylight saving time system.  I take the article
+# to mean that they will leave their clocks at 6 hours ahead of UTC.
+# From Malik Abdugaliev (2005-09-21):
+# Our government cancels daylight saving time 6th of August 2005.
+# From 2005-08-12 our GMT-offset is +6, w/o any daylight saving.
+
+# Rule	NAME	FROM	TO	TYPE	IN	ON	AT	SAVE	LETTER/S
+Rule	Kyrgyz	1992	1996	-	Apr	Sun>=7	0:00s	1:00	S
+Rule	Kyrgyz	1992	1996	-	Sep	lastSun	0:00	0	-
+Rule	Kyrgyz	1997	2005	-	Mar	lastSun	2:30	1:00	S
+Rule	Kyrgyz	1997	2004	-	Oct	lastSun	2:30	0	-
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone	Asia/Bishkek	4:58:24 -	LMT	1924 May  2
+			5:00	-	FRUT	1930 Jun 21 # Frunze Time
+			6:00 RussiaAsia FRU%sT	1991 Mar 31 2:00s
+			5:00	1:00	FRUST	1991 Aug 31 2:00 # independence
+			5:00	Kyrgyz	KG%sT	2005 Aug 12    # Kyrgyzstan Time
+			6:00	-	KGT
+
+###############################################################################
+
+# Korea (North and South)
+
+# From Annie I. Bang (2006-07-10) in
+# <http://www.koreaherald.co.kr/SITE/data/html_dir/2006/07/10/200607100012.asp>:
+# The Ministry of Commerce, Industry and Energy has already
+# commissioned a research project [to reintroduce DST] and has said
+# the system may begin as early as 2008....  Korea ran a daylight
+# saving program from 1949-61 but stopped it during the 1950-53 Korean War.
+
+# From Shanks & Pottenger:
+# Rule	NAME	FROM	TO	TYPE	IN	ON	AT	SAVE	LETTER/S
+Rule	ROK	1960	only	-	May	15	0:00	1:00	D
+Rule	ROK	1960	only	-	Sep	13	0:00	0	S
+Rule	ROK	1987	1988	-	May	Sun>=8	0:00	1:00	D
+Rule	ROK	1987	1988	-	Oct	Sun>=8	0:00	0	S
+
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone	Asia/Seoul	8:27:52	-	LMT	1890
+			8:30	-	KST	1904 Dec
+			9:00	-	KST	1928
+			8:30	-	KST	1932
+			9:00	-	KST	1954 Mar 21
+			8:00	ROK	K%sT	1961 Aug 10
+			8:30	-	KST	1968 Oct
+			9:00	ROK	K%sT
+Zone	Asia/Pyongyang	8:23:00 -	LMT	1890
+			8:30	-	KST	1904 Dec
+			9:00	-	KST	1928
+			8:30	-	KST	1932
+			9:00	-	KST	1954 Mar 21
+			8:00	-	KST	1961 Aug 10
+			9:00	-	KST
+
+###############################################################################
+
+# Kuwait
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone	Asia/Kuwait	3:11:56 -	LMT	1950
+			3:00	-	AST
+
+# Laos
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone	Asia/Vientiane	6:50:24 -	LMT	1906 Jun  9 # or Viangchan
+			7:06:20	-	SMT	1911 Mar 11 0:01 # Saigon MT?
+			7:00	-	ICT	1912 May
+			8:00	-	ICT	1931 May
+			7:00	-	ICT
+
+# Lebanon
+# Rule	NAME	FROM	TO	TYPE	IN	ON	AT	SAVE	LETTER/S
+Rule	Lebanon	1920	only	-	Mar	28	0:00	1:00	S
+Rule	Lebanon	1920	only	-	Oct	25	0:00	0	-
+Rule	Lebanon	1921	only	-	Apr	3	0:00	1:00	S
+Rule	Lebanon	1921	only	-	Oct	3	0:00	0	-
+Rule	Lebanon	1922	only	-	Mar	26	0:00	1:00	S
+Rule	Lebanon	1922	only	-	Oct	8	0:00	0	-
+Rule	Lebanon	1923	only	-	Apr	22	0:00	1:00	S
+Rule	Lebanon	1923	only	-	Sep	16	0:00	0	-
+Rule	Lebanon	1957	1961	-	May	1	0:00	1:00	S
+Rule	Lebanon	1957	1961	-	Oct	1	0:00	0	-
+Rule	Lebanon	1972	only	-	Jun	22	0:00	1:00	S
+Rule	Lebanon	1972	1977	-	Oct	1	0:00	0	-
+Rule	Lebanon	1973	1977	-	May	1	0:00	1:00	S
+Rule	Lebanon	1978	only	-	Apr	30	0:00	1:00	S
+Rule	Lebanon	1978	only	-	Sep	30	0:00	0	-
+Rule	Lebanon	1984	1987	-	May	1	0:00	1:00	S
+Rule	Lebanon	1984	1991	-	Oct	16	0:00	0	-
+Rule	Lebanon	1988	only	-	Jun	1	0:00	1:00	S
+Rule	Lebanon	1989	only	-	May	10	0:00	1:00	S
+Rule	Lebanon	1990	1992	-	May	1	0:00	1:00	S
+Rule	Lebanon	1992	only	-	Oct	4	0:00	0	-
+Rule	Lebanon	1993	max	-	Mar	lastSun	0:00	1:00	S
+Rule	Lebanon	1993	1998	-	Sep	lastSun	0:00	0	-
+Rule	Lebanon	1999	max	-	Oct	lastSun	0:00	0	-
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone	Asia/Beirut	2:22:00 -	LMT	1880
+			2:00	Lebanon	EE%sT
+
+# Malaysia
+# Rule	NAME	FROM	TO	TYPE	IN	ON	AT	SAVE	LETTER/S
+Rule	NBorneo	1935	1941	-	Sep	14	0:00	0:20	TS # one-Third Summer
+Rule	NBorneo	1935	1941	-	Dec	14	0:00	0	-
+#
+# peninsular Malaysia
+# The data here are taken from Mok Ly Yng (2003-10-30)
+# <http://www.math.nus.edu.sg/aslaksen/teaching/timezone.html>.
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone Asia/Kuala_Lumpur	6:46:46 -	LMT	1901 Jan  1
+			6:55:25	-	SMT	1905 Jun  1 # Singapore M.T.
+			7:00	-	MALT	1933 Jan  1 # Malaya Time
+			7:00	0:20	MALST	1936 Jan  1
+			7:20	-	MALT	1941 Sep  1
+			7:30	-	MALT	1942 Feb 16
+			9:00	-	JST	1945 Sep 12
+			7:30	-	MALT	1982 Jan  1
+			8:00	-	MYT	# Malaysia Time
+# Sabah & Sarawak
+# From Paul Eggert (2006-03-22):
+# The data here are mostly from Shanks & Pottenger, but the 1942, 1945 and 1982
+# transition dates are from Mok Ly Yng.
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone Asia/Kuching	7:21:20	-	LMT	1926 Mar
+			7:30	-	BORT	1933	# Borneo Time
+			8:00	NBorneo	BOR%sT	1942 Feb 16
+			9:00	-	JST	1945 Sep 12
+			8:00	-	BORT	1982 Jan  1
+			8:00	-	MYT
+
+# Maldives
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone	Indian/Maldives	4:54:00 -	LMT	1880	# Male
+			4:54:00	-	MMT	1960	# Male Mean Time
+			5:00	-	MVT		# Maldives Time
+
+# Mongolia
+
+# Shanks & Pottenger say that Mongolia has three time zones, but
+# usno1995 and the CIA map Standard Time Zones of the World (2005-03)
+# both say that it has just one.
+
+# From Oscar van Vlijmen (1999-12-11):
+# <a href="http://www.mongoliatourism.gov.mn/general.htm">
+# General Information Mongolia
+# </a> (1999-09)
+# "Time: Mongolia has two time zones. Three westernmost provinces of
+# Bayan-Ulgii, Uvs, and Hovd are one hour earlier than the capital city, and
+# the rest of the country follows the Ulaanbaatar time, which is UTC/GMT plus
+# eight hours."
+
+# From Rives McDow (1999-12-13):
+# Mongolia discontinued the use of daylight savings time in 1999; 1998
+# being the last year it was implemented.  The dates of implementation I am
+# unsure of, but most probably it was similar to Russia, except for the time
+# of implementation may have been different....
+# Some maps in the past have indicated that there was an additional time
+# zone in the eastern part of Mongolia, including the provinces of Dornod,
+# Suhbaatar, and possibly Khentij.
+
+# From Paul Eggert (1999-12-15):
+# Naming and spelling is tricky in Mongolia.
+# We'll use Hovd (also spelled Chovd and Khovd) to represent the west zone;
+# the capital of the Hovd province is sometimes called Hovd, sometimes Dund-Us,
+# and sometimes Jirgalanta (with variant spellings), but the name Hovd
+# is good enough for our purposes.
+
+# From Rives McDow (2001-05-13):
+# In addition to Mongolia starting daylight savings as reported earlier
+# (adopted DST on 2001-04-27 02:00 local time, ending 2001-09-28),
+# there are three time zones.
+#
+# Provinces [at 7:00]: Bayan-ulgii, Uvs, Khovd, Zavkhan, Govi-Altai
+# Provinces [at 8:00]: Khovsgol, Bulgan, Arkhangai, Khentii, Tov,
+#	Bayankhongor, Ovorkhangai, Dundgovi, Dornogovi, Omnogovi
+# Provinces [at 9:00]: Dornod, Sukhbaatar
+#
+# [The province of Selenge is omitted from the above lists.]
+
+# From Ganbold Ts., Ulaanbaatar (2004-04-17):
+# Daylight saving occurs at 02:00 local time last Saturday of March.
+# It will change back to normal at 02:00 local time last Saturday of
+# September.... As I remember this rule was changed in 2001.
+#
+# From Paul Eggert (2004-04-17):
+# For now, assume Rives McDow's informant got confused about Friday vs
+# Saturday, and that his 2001 dates should have 1 added to them.
+
+# From Paul Eggert (2005-07-26):
+# We have wildly conflicting information about Mongolia's time zones.
+# Bill Bonnet (2005-05-19) reports that the US Embassy in Ulaanbaatar says
+# there is only one time zone and that DST is observed, citing Microsoft
+# Windows XP as the source.  Risto Nykanen (2005-05-16) reports that
+# travelmongolia.org says there are two time zones (UTC+7, UTC+8) with no DST.
+# Oscar van Vlijmen (2005-05-20) reports that the Mongolian Embassy in
+# Washington, DC says there are two time zones, with DST observed.
+# He also found
+# <http://ubpost.mongolnews.mn/index.php?subaction=showcomments&id=1111634894&archive=&start_from=&ucat=1&>
+# which also says that there is DST, and which has a comment by "Toddius"
+# (2005-03-31 06:05 +0700) saying "Mongolia actually has 3.5 time zones.
+# The West (OLGII) is +7 GMT, most of the country is ULAT is +8 GMT
+# and some Eastern provinces are +9 GMT but Sukhbaatar Aimag is SUHK +8.5 GMT.
+# The SUKH timezone is new this year, it is one of the few things the
+# parliament passed during the tumultuous winter session."
+# For now, let's ignore this information, until we have more confirmation.
+
+# From Ganbold Ts. (2007-02-26):
+# Parliament of Mongolia has just changed the daylight-saving rule in February.
+# They decided not to adopt daylight-saving time....
+# http://www.mongolnews.mn/index.php?module=unuudur&sec=view&id=15742
+
+# Rule	NAME	FROM	TO	TYPE	IN	ON	AT	SAVE	LETTER/S
+Rule	Mongol	1983	1984	-	Apr	1	0:00	1:00	S
+Rule	Mongol	1983	only	-	Oct	1	0:00	0	-
+# Shanks & Pottenger and IATA SSIM say 1990s switches occurred at 00:00,
+# but McDow says the 2001 switches occurred at 02:00.  Also, IATA SSIM
+# (1996-09) says 1996-10-25.  Go with Shanks & Pottenger through 1998.
+#
+# Shanks & Pottenger say that the Sept. 1984 through Sept. 1990 switches
+# in Choibalsan (more precisely, in Dornod and Sukhbaatar) took place
+# at 02:00 standard time, not at 00:00 local time as in the rest of
+# the country.  That would be odd, and possibly is a result of their
+# correction of 02:00 (in the previous edition) not being done correctly
+# in the latest edition; so ignore it for now.
+
+Rule	Mongol	1985	1998	-	Mar	lastSun	0:00	1:00	S
+Rule	Mongol	1984	1998	-	Sep	lastSun	0:00	0	-
+# IATA SSIM (1999-09) says Mongolia no longer observes DST.
+Rule	Mongol	2001	only	-	Apr	lastSat	2:00	1:00	S
+Rule	Mongol	2001	2006	-	Sep	lastSat	2:00	0	-
+Rule	Mongol	2002	2006	-	Mar	lastSat	2:00	1:00	S
+
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+# Hovd, a.k.a. Chovd, Dund-Us, Dzhargalant, Khovd, Jirgalanta
+Zone	Asia/Hovd	6:06:36 -	LMT	1905 Aug
+			6:00	-	HOVT	1978	# Hovd Time
+			7:00	Mongol	HOV%sT
+# Ulaanbaatar, a.k.a. Ulan Bataar, Ulan Bator, Urga
+Zone	Asia/Ulaanbaatar 7:07:32 -	LMT	1905 Aug
+			7:00	-	ULAT	1978	# Ulaanbaatar Time
+			8:00	Mongol	ULA%sT
+# Choibalsan, a.k.a. Bajan Tuemen, Bajan Tumen, Chojbalsan,
+# Choybalsan, Sanbejse, Tchoibalsan
+Zone	Asia/Choibalsan	7:38:00 -	LMT	1905 Aug
+			7:00	-	ULAT	1978
+			8:00	-	ULAT	1983 Apr
+			9:00	Mongol	CHO%sT	# Choibalsan Time
+
+# Nepal
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone	Asia/Katmandu	5:41:16 -	LMT	1920
+			5:30	-	IST	1986
+			5:45	-	NPT	# Nepal Time
+
+# Oman
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone	Asia/Muscat	3:54:20 -	LMT	1920
+			4:00	-	GST
+
+# Pakistan
+
+# From Rives McDow (2002-03-13):
+# I have been advised that Pakistan has decided to adopt dst on a
+# TRIAL basis for one year, starting 00:01 local time on April 7, 2002
+# and ending at 00:01 local time October 6, 2002.  This is what I was
+# told, but I believe that the actual time of change may be 00:00; the
+# 00:01 was to make it clear which day it was on.
+
+# From Paul Eggert (2002-03-15):
+# Jesper Norgaard found this URL:
+# http://www.pak.gov.pk/public/news/app/app06_dec.htm
+# (dated 2001-12-06) which says that the Cabinet adopted a scheme "to
+# advance the clocks by one hour on the night between the first
+# Saturday and Sunday of April and revert to the original position on
+# 15th October each year".  This agrees with McDow's 04-07 at 00:00,
+# but disagrees about the October transition, and makes it sound like
+# it's not on a trial basis.  Also, the "between the first Saturday
+# and Sunday of April" phrase, if taken literally, means that the
+# transition takes place at 00:00 on the first Sunday on or after 04-02.
+
+# From Paul Eggert (2003-02-09):
+# DAWN <http://www.dawn.com/2002/10/06/top13.htm> reported on 2002-10-05
+# that 2002 DST ended that day at midnight.  Go with McDow for now.
+
+# From Steffen Thorsen (2003-03-14):
+# According to http://www.dawn.com/2003/03/07/top15.htm
+# there will be no DST in Pakistan this year:
+#
+# ISLAMABAD, March 6: Information and Media Development Minister Sheikh
+# Rashid Ahmed on Thursday said the cabinet had reversed a previous
+# decision to advance clocks by one hour in summer and put them back by
+# one hour in winter with the aim of saving light hours and energy.
+#
+# The minister told a news conference that the experiment had rather
+# shown 8 per cent higher consumption of electricity.
+
+
+# Rule	NAME	FROM	TO	TYPE	IN	ON	AT	SAVE	LETTER/S
+Rule Pakistan	2002	only	-	Apr	Sun>=2	0:01	1:00	S
+Rule Pakistan	2002	only	-	Oct	Sun>=2	0:01	0	-
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone	Asia/Karachi	4:28:12 -	LMT	1907
+			5:30	-	IST	1942 Sep
+			5:30	1:00	IST	1945 Oct 15
+			5:30	-	IST	1951 Sep 30
+			5:00	-	KART	1971 Mar 26 # Karachi Time
+			5:00 Pakistan	PK%sT	# Pakistan Time
+
+# Palestine
+
+# From Amos Shapir (1998-02-15):
+#
+# From 1917 until 1948-05-15, all of Palestine, including the parts now
+# known as the Gaza Strip and the West Bank, was under British rule.
+# Therefore the rules given for Israel for that period, apply there too...
+#
+# The Gaza Strip was under Egyptian rule between 1948-05-15 until 1967-06-05
+# (except a short occupation by Israel from 1956-11 till 1957-03, but no
+# time zone was affected then).  It was never formally annexed to Egypt,
+# though.
+#
+# The rest of Palestine was under Jordanian rule at that time, formally
+# annexed in 1950 as the West Bank (and the word "Trans" was dropped from
+# the country's previous name of "the Hashemite Kingdom of the
+# Trans-Jordan").  So the rules for Jordan for that time apply.  Major
+# towns in that area are Nablus (Shchem), El-Halil (Hebron), Ramallah, and
+# East Jerusalem.
+#
+# Both areas were occupied by Israel in June 1967, but not annexed (except
+# for East Jerusalem).  They were on Israel time since then; there might
+# have been a Military Governor's order about time zones, but I'm not aware
+# of any (such orders may have been issued semi-annually whenever summer
+# time was in effect, but maybe the legal aspect of time was just neglected).
+#
+# The Palestinian Authority was established in 1993, and got hold of most
+# towns in the West Bank and Gaza by 1995.  I know that in order to
+# demonstrate...independence, they have been switching to
+# summer time and back on a different schedule than Israel's, but I don't
+# know when this was started, or what algorithm is used (most likely the
+# Jordanian one).
+#
+# To summarize, the table should probably look something like that:
+#
+# Area \ when | 1918-1947 | 1948-1967 | 1967-1995 | 1996-
+# ------------+-----------+-----------+-----------+-----------
+# Israel      | Zion      | Zion      | Zion      | Zion
+# West bank   | Zion      | Jordan    | Zion      | Jordan
+# Gaza        | Zion      | Egypt     | Zion      | Jordan
+#
+# I guess more info may be available from the PA's web page (if/when they
+# have one).
+
+# From Paul Eggert (2006-03-22):
+# Shanks & Pottenger write that Gaza did not observe DST until 1957, but go
+# with Shapir and assume that it observed DST from 1940 through 1947,
+# and that it used Jordanian rules starting in 1996.
+# We don't yet need a separate entry for the West Bank, since
+# the only differences between it and Gaza that we know about
+# occurred before our cutoff date of 1970.
+# However, as we get more information, we may need to add entries
+# for parts of the West Bank as they transitioned from Israel's rules
+# to Palestine's rules.  If you have more info about this, please
+# send it to tz@elsie.nci.nih.gov for incorporation into future editions.
+
+# From IINS News Service - Israel - 1998-03-23 10:38:07 Israel time,
+# forwarded by Ephraim Silverberg:
+#
+# Despite the fact that Israel changed over to daylight savings time
+# last week, the PLO Authority (PA) has decided not to turn its clocks
+# one-hour forward at this time.  As a sign of independence from Israeli rule,
+# the PA has decided to implement DST in April.
+
+# From Paul Eggert (1999-09-20):
+# Daoud Kuttab writes in
+# <a href="http://www.jpost.com/com/Archive/22.Apr.1999/Opinion/Article-2.html">
+# Holiday havoc
+# </a> (Jerusalem Post, 1999-04-22) that
+# the Palestinian National Authority changed to DST on 1999-04-15.
+# I vaguely recall that they switch back in October (sorry, forgot the source).
+# For now, let's assume that the spring switch was at 24:00,
+# and that they switch at 0:00 on the 3rd Fridays of April and October.
+
+# From Paul Eggert (2005-11-22):
+# Starting 2004 transitions are from Steffen Thorsen's web site timeanddate.com.
+
+# From Steffen Thorsen (2005-11-23):
+# A user from Gaza reported that Gaza made the change early because of
+# the Ramadan.  Next year Ramadan will be even earlier, so I think
+# there is a good chance next year's end date will be around two weeks
+# earlier--the same goes for Jordan.
+
+# From Steffen Thorsen (2006-08-17):
+# I was informed by a user in Bethlehem that in Bethlehem it started the
+# same day as Israel, and after checking with other users in the area, I
+# was informed that they started DST one day after Israel.  I was not
+# able to find any authoritative sources at the time, nor details if
+# Gaza changed as well, but presumed Gaza to follow the same rules as
+# the West Bank.
+
+# From Steffen Thorsen (2006-09-26):
+# according to the Palestine News Network (2006-09-19):
+# http://english.pnn.ps/index.php?option=com_content&task=view&id=596&Itemid=5
+# > The Council of Ministers announced that this year its winter schedule
+# > will begin early, as of midnight Thursday.  It is also time to turn
+# > back the clocks for winter.  Friday will begin an hour late this week.
+# I guess it is likely that next year's date will be moved as well,
+# because of the Ramadan.
+
+# The rules for Egypt are stolen from the `africa' file.
+# Rule	NAME	FROM	TO	TYPE	IN	ON	AT	SAVE	LETTER/S
+Rule EgyptAsia	1957	only	-	May	10	0:00	1:00	S
+Rule EgyptAsia	1957	1958	-	Oct	 1	0:00	0	-
+Rule EgyptAsia	1958	only	-	May	 1	0:00	1:00	S
+Rule EgyptAsia	1959	1967	-	May	 1	1:00	1:00	S
+Rule EgyptAsia	1959	1965	-	Sep	30	3:00	0	-
+Rule EgyptAsia	1966	only	-	Oct	 1	3:00	0	-
+
+Rule Palestine	1999	2005	-	Apr	Fri>=15	0:00	1:00	S
+Rule Palestine	1999	2003	-	Oct	Fri>=15	0:00	0	-
+Rule Palestine	2004	only	-	Oct	 1	1:00	0	-
+Rule Palestine	2005	only	-	Oct	 4	2:00	0	-
+Rule Palestine	2006	max	-	Apr	 1	0:00	1:00	S
+Rule Palestine	2006	only	-	Sep	22	0:00	0	-
+Rule Palestine	2007	max	-	Oct	Fri>=15	0:00	0	-
+
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone	Asia/Gaza	2:17:52	-	LMT	1900 Oct
+			2:00	Zion	EET	1948 May 15
+			2:00 EgyptAsia	EE%sT	1967 Jun  5
+			2:00	Zion	I%sT	1996
+			2:00	Jordan	EE%sT	1999
+			2:00 Palestine	EE%sT
+
+# Paracel Is
+# no information
+
+# Philippines
+# On 1844-08-16, Narciso Claveria, governor-general of the
+# Philippines, issued a proclamation announcing that 1844-12-30 was to
+# be immediately followed by 1845-01-01.  Robert H. van Gent has a
+# transcript of the decree in <http://www.phys.uu.nl/~vgent/idl/idl.htm>.
+# The rest of the data are from Shanks & Pottenger.
+
+# From Paul Eggert (2006-04-25):
+# Tomorrow's Manila Standard reports that the Philippines Department of
+# Trade and Industry is considering adopting DST this June when the
+# rainy season begins.  See
+# <http://www.manilastandardtoday.com/?page=politics02_april26_2006>.
+# For now, we'll ignore this, since it's not definite and we lack details.
+#
+# From Jesper Norgaard Welen (2006-04-26):
+# ... claims that Philippines had DST last time in 1990:
+# http://story.philippinetimes.com/p.x/ct/9/id/145be20cc6b121c0/cid/3e5bbccc730d258c/
+# [a story dated 2006-04-25 by Cris Larano of Dow Jones Newswires,
+# but no details]
+
+# Rule	NAME	FROM	TO	TYPE	IN	ON	AT	SAVE	LETTER/S
+Rule	Phil	1936	only	-	Nov	1	0:00	1:00	S
+Rule	Phil	1937	only	-	Feb	1	0:00	0	-
+Rule	Phil	1954	only	-	Apr	12	0:00	1:00	S
+Rule	Phil	1954	only	-	Jul	1	0:00	0	-
+Rule	Phil	1978	only	-	Mar	22	0:00	1:00	S
+Rule	Phil	1978	only	-	Sep	21	0:00	0	-
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone	Asia/Manila	-15:56:00 -	LMT	1844 Dec 31
+			8:04:00 -	LMT	1899 May 11
+			8:00	Phil	PH%sT	1942 May
+			9:00	-	JST	1944 Nov
+			8:00	Phil	PH%sT
+
+# Qatar
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone	Asia/Qatar	3:26:08 -	LMT	1920	# Al Dawhah / Doha
+			4:00	-	GST	1972 Jun
+			3:00	-	AST
+
+# Saudi Arabia
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone	Asia/Riyadh	3:06:52 -	LMT	1950
+			3:00	-	AST
+
+# Singapore
+# The data here are taken from Mok Ly Yng (2003-10-30)
+# <http://www.math.nus.edu.sg/aslaksen/teaching/timezone.html>.
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone	Asia/Singapore	6:55:25 -	LMT	1901 Jan  1
+			6:55:25	-	SMT	1905 Jun  1 # Singapore M.T.
+			7:00	-	MALT	1933 Jan  1 # Malaya Time
+			7:00	0:20	MALST	1936 Jan  1
+			7:20	-	MALT	1941 Sep  1
+			7:30	-	MALT	1942 Feb 16
+			9:00	-	JST	1945 Sep 12
+			7:30	-	MALT	1965 Aug  9 # independence
+			7:30	-	SGT	1982 Jan  1 # Singapore Time
+			8:00	-	SGT
+
+# Spratly Is
+# no information
+
+# Sri Lanka
+# From Paul Eggert (1996-09-03):
+# "Sri Lanka advances clock by an hour to avoid blackout"
+# (www.virtual-pc.com/lankaweb/news/items/240596-2.html, 1996-05-24,
+# no longer available as of 1999-08-17)
+# reported ``the country's standard time will be put forward by one hour at
+# midnight Friday (1830 GMT) `in the light of the present power crisis'.''
+#
+# From Dharmasiri Senanayake, Sri Lanka Media Minister (1996-10-24), as quoted
+# by Shamindra in
+# <a href="news:54rka5$m5h@mtinsc01-mgt.ops.worldnet.att.net">
+# Daily News - Hot News Section (1996-10-26)
+# </a>:
+# With effect from 12.30 a.m. on 26th October 1996
+# Sri Lanka will be six (06) hours ahead of GMT.
+
+# From Jesper Norgaard Welen (2006-04-14), quoting Sri Lanka News Online
+# <http://news.sinhalaya.com/wmview.php?ArtID=11002> (2006-04-13):
+# 0030 hrs on April 15, 2006 (midnight of April 14, 2006 +30 minutes)
+# at present, become 2400 hours of April 14, 2006 (midnight of April 14, 2006).
+
+# From Peter Apps and Ranga Sirila of Reuters (2006-04-12) in:
+# <http://today.reuters.co.uk/news/newsArticle.aspx?type=scienceNews&storyID=2006-04-12T172228Z_01_COL295762_RTRIDST_0_SCIENCE-SRILANKA-TIME-DC.XML>
+# [The Tamil Tigers] never accepted the original 1996 time change and simply
+# kept their clocks set five and a half hours ahead of Greenwich Mean
+# Time (GMT), in line with neighbor India.
+# From Paul Eggert (2006-04-18):
+# People who live in regions under Tamil control can use TZ='Asia/Calcutta',
+# as that zone has agreed with the Tamil areas since our cutoff date of 1970.
+
+# From K Sethu (2006-04-25):
+# I think the abbreviation LKT originated from the world of computers at
+# the time of or subsequent to the time zone changes by SL Government
+# twice in 1996 and probably SL Government or its standardization
+# agencies never declared an abbreviation as a national standard.
+#
+# I recollect before the recent change the government annoucemments
+# mentioning it as simply changing Sri Lanka Standard Time or Sri Lanka
+# Time and no mention was made about the abbreviation.
+#
+# If we look at Sri Lanka Department of Government's "Official News
+# Website of Sri Lanka" ... http://www.news.lk/ we can see that they
+# use SLT as abbreviation in time stamp at the beginning of each news
+# item....
+#
+# Within Sri Lanka I think LKT is well known among computer users and
+# adminsitrators.  In my opinion SLT may not be a good choice because the
+# nation's largest telcom / internet operator Sri Lanka Telcom is well
+# known by that abbreviation - simply as SLT (there IP domains are
+# slt.lk and sltnet.lk).
+#
+# But if indeed our government has adopted SLT as standard abbreviation
+# (that we have not known so far) then  it is better that it be used for
+# all computers.
+
+# From Paul Eggert (2006-04-25):
+# One possibility is that we wait for a bit for the dust to settle down
+# and then see what people actually say in practice.
+
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone	Asia/Colombo	5:19:24 -	LMT	1880
+			5:19:32	-	MMT	1906	# Moratuwa Mean Time
+			5:30	-	IST	1942 Jan  5
+			5:30	0:30	IHST	1942 Sep
+			5:30	1:00	IST	1945 Oct 16 2:00
+			5:30	-	IST	1996 May 25 0:00
+			6:30	-	LKT	1996 Oct 26 0:30
+			6:00	-	LKT	2006 Apr 15 0:30
+			5:30	-	IST
+
+# Syria
+# Rule	NAME	FROM	TO	TYPE	IN	ON	AT	SAVE	LETTER/S
+Rule	Syria	1920	1923	-	Apr	Sun>=15	2:00	1:00	S
+Rule	Syria	1920	1923	-	Oct	Sun>=1	2:00	0	-
+Rule	Syria	1962	only	-	Apr	29	2:00	1:00	S
+Rule	Syria	1962	only	-	Oct	1	2:00	0	-
+Rule	Syria	1963	1965	-	May	1	2:00	1:00	S
+Rule	Syria	1963	only	-	Sep	30	2:00	0	-
+Rule	Syria	1964	only	-	Oct	1	2:00	0	-
+Rule	Syria	1965	only	-	Sep	30	2:00	0	-
+Rule	Syria	1966	only	-	Apr	24	2:00	1:00	S
+Rule	Syria	1966	1976	-	Oct	1	2:00	0	-
+Rule	Syria	1967	1978	-	May	1	2:00	1:00	S
+Rule	Syria	1977	1978	-	Sep	1	2:00	0	-
+Rule	Syria	1983	1984	-	Apr	9	2:00	1:00	S
+Rule	Syria	1983	1984	-	Oct	1	2:00	0	-
+Rule	Syria	1986	only	-	Feb	16	2:00	1:00	S
+Rule	Syria	1986	only	-	Oct	9	2:00	0	-
+Rule	Syria	1987	only	-	Mar	1	2:00	1:00	S
+Rule	Syria	1987	1988	-	Oct	31	2:00	0	-
+Rule	Syria	1988	only	-	Mar	15	2:00	1:00	S
+Rule	Syria	1989	only	-	Mar	31	2:00	1:00	S
+Rule	Syria	1989	only	-	Oct	1	2:00	0	-
+Rule	Syria	1990	only	-	Apr	1	2:00	1:00	S
+Rule	Syria	1990	only	-	Sep	30	2:00	0	-
+Rule	Syria	1991	only	-	Apr	 1	0:00	1:00	S
+Rule	Syria	1991	1992	-	Oct	 1	0:00	0	-
+Rule	Syria	1992	only	-	Apr	 8	0:00	1:00	S
+Rule	Syria	1993	only	-	Mar	26	0:00	1:00	S
+Rule	Syria	1993	only	-	Sep	25	0:00	0	-
+# IATA SSIM (1998-02) says 1998-04-02;
+# (1998-09) says 1999-03-29 and 1999-09-29; (1999-02) says 1999-04-02,
+# 2000-04-02, and 2001-04-02; (1999-09) says 2000-03-31 and 2001-03-31;
+# (2006) says 2006-03-31 and 2006-09-22;
+# for now ignore all these claims and go with Shanks & Pottenger,
+# except for the 2006-09-22 claim (which seems right for Ramadan).
+Rule	Syria	1994	1996	-	Apr	 1	0:00	1:00	S
+Rule	Syria	1994	2005	-	Oct	 1	0:00	0	-
+Rule	Syria	1997	1998	-	Mar	lastMon	0:00	1:00	S
+Rule	Syria	1999	max	-	Apr	 1	0:00	1:00	S
+# From Stephen Colebourne (2006-09-18):
+# According to IATA data, Syria will change DST on 21st September [21:00 UTC]
+# this year [only]....  This is probably related to Ramadan, like Egypt.
+Rule	Syria	2006	only	-	Sep	22	0:00	0	-
+Rule	Syria	2007	max	-	Oct	 1	0:00	0	-
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone	Asia/Damascus	2:25:12 -	LMT	1920	# Dimashq
+			2:00	Syria	EE%sT
+
+# Tajikistan
+# From Shanks & Pottenger.
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone	Asia/Dushanbe	4:35:12 -	LMT	1924 May  2
+			5:00	-	DUST	1930 Jun 21 # Dushanbe Time
+			6:00 RussiaAsia DUS%sT	1991 Mar 31 2:00s
+			5:00	1:00	DUSST	1991 Sep  9 2:00s
+			5:00	-	TJT		    # Tajikistan Time
+
+# Thailand
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone	Asia/Bangkok	6:42:04	-	LMT	1880
+			6:42:04	-	BMT	1920 Apr # Bangkok Mean Time
+			7:00	-	ICT
+
+# Turkmenistan
+# From Shanks & Pottenger.
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone	Asia/Ashgabat	3:53:32 -	LMT	1924 May  2 # or Ashkhabad
+			4:00	-	ASHT	1930 Jun 21 # Ashkhabad Time
+			5:00 RussiaAsia	ASH%sT	1991 Mar 31 2:00
+			4:00 RussiaAsia	ASH%sT	1991 Oct 27 # independence
+			4:00 RussiaAsia	TM%sT	1992 Jan 19 2:00
+			5:00	-	TMT
+
+# United Arab Emirates
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone	Asia/Dubai	3:41:12 -	LMT	1920
+			4:00	-	GST
+
+# Uzbekistan
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone	Asia/Samarkand	4:27:12 -	LMT	1924 May  2
+			4:00	-	SAMT	1930 Jun 21 # Samarkand Time
+			5:00	-	SAMT	1981 Apr  1
+			5:00	1:00	SAMST	1981 Oct  1
+			6:00	-	TAST	1982 Apr  1 # Tashkent Time
+			5:00 RussiaAsia	SAM%sT	1991 Sep  1 # independence
+			5:00 RussiaAsia	UZ%sT	1992
+			5:00	-	UZT
+Zone	Asia/Tashkent	4:37:12 -	LMT	1924 May  2
+			5:00	-	TAST	1930 Jun 21 # Tashkent Time
+			6:00 RussiaAsia	TAS%sT	1991 Mar 31 2:00
+			5:00 RussiaAsia	TAS%sT	1991 Sep  1 # independence
+			5:00 RussiaAsia	UZ%sT	1992
+			5:00	-	UZT
+
+# Vietnam
+
+# From Paul Eggert (1993-11-18):
+# Saigon's official name is Thanh-Pho Ho Chi Minh, but it's too long.
+# We'll stick with the traditional name for now.
+
+# From Shanks & Pottenger:
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone	Asia/Saigon	7:06:40 -	LMT	1906 Jun  9
+			7:06:20	-	SMT	1911 Mar 11 0:01 # Saigon MT?
+			7:00	-	ICT	1912 May
+			8:00	-	ICT	1931 May
+			7:00	-	ICT
+
+# Yemen
+# Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
+Zone	Asia/Aden	3:00:48	-	LMT	1950
+			3:00	-	AST
Index: libkcal/libical/tzdata/backward
===================================================================
--- libkcal/libical/tzdata/backward	(.../tags/KDE/3.5.6/kdepim)	(wersja 0)
+++ libkcal/libical/tzdata/backward	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -0,0 +1,109 @@
+# @(#)backward	8.3
+
+# This file provides links between current names for time zones
+# and their old names.  Many names changed in late 1993.
+
+Link	Africa/Asmara		Africa/Asmera
+Link	Africa/Bamako		Africa/Timbuktu
+Link	America/Argentina/Catamarca	America/Argentina/ComodRivadavia
+Link	America/Adak		America/Atka
+Link	America/Argentina/Buenos_Aires	America/Buenos_Aires
+Link	America/Argentina/Catamarca	America/Catamarca
+Link	America/Atikokan	America/Coral_Harbour
+Link	America/Argentina/Cordoba	America/Cordoba
+Link	America/Tijuana		America/Ensenada
+Link	America/Indiana/Indianapolis	America/Fort_Wayne
+Link	America/Indiana/Indianapolis	America/Indianapolis
+Link	America/Argentina/Jujuy	America/Jujuy
+Link	America/Indiana/Knox	America/Knox_IN
+Link	America/Kentucky/Louisville	America/Louisville
+Link	America/Argentina/Mendoza	America/Mendoza
+Link	America/Rio_Branco	America/Porto_Acre
+Link	America/Argentina/Cordoba	America/Rosario
+Link	America/St_Thomas	America/Virgin
+Link	Asia/Ashgabat		Asia/Ashkhabad
+Link	Asia/Chongqing		Asia/Chungking
+Link	Asia/Dhaka		Asia/Dacca
+Link	Asia/Macau		Asia/Macao
+Link	Asia/Jerusalem		Asia/Tel_Aviv
+Link	Asia/Thimphu		Asia/Thimbu
+Link	Asia/Makassar		Asia/Ujung_Pandang
+Link	Asia/Ulaanbaatar	Asia/Ulan_Bator
+Link	Atlantic/Faroe		Atlantic/Faeroe
+Link	Australia/Sydney	Australia/ACT
+Link	Australia/Sydney	Australia/Canberra
+Link	Australia/Lord_Howe	Australia/LHI
+Link	Australia/Sydney	Australia/NSW
+Link	Australia/Darwin	Australia/North
+Link	Australia/Brisbane	Australia/Queensland
+Link	Australia/Adelaide	Australia/South
+Link	Australia/Hobart	Australia/Tasmania
+Link	Australia/Melbourne	Australia/Victoria
+Link	Australia/Perth		Australia/West
+Link	Australia/Broken_Hill	Australia/Yancowinna
+Link	America/Rio_Branco	Brazil/Acre
+Link	America/Noronha		Brazil/DeNoronha
+Link	America/Sao_Paulo	Brazil/East
+Link	America/Manaus		Brazil/West
+Link	America/Halifax		Canada/Atlantic
+Link	America/Winnipeg	Canada/Central
+Link	America/Regina		Canada/East-Saskatchewan
+Link	America/Toronto		Canada/Eastern
+Link	America/Edmonton	Canada/Mountain
+Link	America/St_Johns	Canada/Newfoundland
+Link	America/Vancouver	Canada/Pacific
+Link	America/Regina		Canada/Saskatchewan
+Link	America/Whitehorse	Canada/Yukon
+Link	America/Santiago	Chile/Continental
+Link	Pacific/Easter		Chile/EasterIsland
+Link	America/Havana		Cuba
+Link	Africa/Cairo		Egypt
+Link	Europe/Dublin		Eire
+Link	Europe/London		Europe/Belfast
+Link	Europe/Chisinau		Europe/Tiraspol
+Link	Europe/London		GB
+Link	Europe/London		GB-Eire
+Link	Etc/GMT			GMT+0
+Link	Etc/GMT			GMT-0
+Link	Etc/GMT			GMT0
+Link	Etc/GMT			Greenwich
+Link	Asia/Hong_Kong		Hongkong
+Link	Atlantic/Reykjavik	Iceland
+Link	Asia/Tehran		Iran
+Link	Asia/Jerusalem		Israel
+Link	America/Jamaica		Jamaica
+Link	Asia/Tokyo		Japan
+Link	Pacific/Kwajalein	Kwajalein
+Link	Africa/Tripoli		Libya
+Link	America/Tijuana		Mexico/BajaNorte
+Link	America/Mazatlan	Mexico/BajaSur
+Link	America/Mexico_City	Mexico/General
+Link	Pacific/Auckland	NZ
+Link	Pacific/Chatham		NZ-CHAT
+Link	America/Denver		Navajo
+Link	Asia/Shanghai		PRC
+Link	Pacific/Pago_Pago	Pacific/Samoa
+Link	Pacific/Truk		Pacific/Yap
+Link	Europe/Warsaw		Poland
+Link	Europe/Lisbon		Portugal
+Link	Asia/Taipei		ROC
+Link	Asia/Seoul		ROK
+Link	Asia/Singapore		Singapore
+Link	Europe/Istanbul		Turkey
+Link	Etc/UCT			UCT
+Link	America/Anchorage	US/Alaska
+Link	America/Adak		US/Aleutian
+Link	America/Phoenix		US/Arizona
+Link	America/Chicago		US/Central
+Link	America/Indiana/Indianapolis	US/East-Indiana
+Link	America/New_York	US/Eastern
+Link	Pacific/Honolulu	US/Hawaii
+Link	America/Indiana/Knox	US/Indiana-Starke
+Link	America/Detroit		US/Michigan
+Link	America/Denver		US/Mountain
+Link	America/Los_Angeles	US/Pacific
+Link	Pacific/Pago_Pago	US/Samoa
+Link	Etc/UTC			UTC
+Link	Etc/UTC			Universal
+Link	Europe/Moscow		W-SU
+Link	Etc/UTC			Zulu
Index: libkcal/libical/zoneinfo/Atlantic/Faeroe.ics
===================================================================
--- libkcal/libical/zoneinfo/Atlantic/Faeroe.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Atlantic/Faeroe.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,22 +0,0 @@
-BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
-VERSION:2.0
-BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/Atlantic/Faeroe
-X-LIC-LOCATION:Atlantic/Faeroe
-BEGIN:DAYLIGHT
-TZOFFSETFROM:+0000
-TZOFFSETTO:+0100
-TZNAME:WEST
-DTSTART:19700329T010000
-RRULE:FREQ=YEARLY;BYMONTH=3;BYDAY=-1SU
-END:DAYLIGHT
-BEGIN:STANDARD
-TZOFFSETFROM:+0100
-TZOFFSETTO:+0000
-TZNAME:WET
-DTSTART:19701025T020000
-RRULE:FREQ=YEARLY;BYMONTH=10;BYDAY=-1SU
-END:STANDARD
-END:VTIMEZONE
-END:VCALENDAR
Index: libkcal/libical/zoneinfo/Atlantic/Madeira.ics
===================================================================
--- libkcal/libical/zoneinfo/Atlantic/Madeira.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Atlantic/Madeira.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,22 +1,201 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/Atlantic/Madeira
+TZID:/kde.org/Olson_20070327_1/Atlantic/Madeira
 X-LIC-LOCATION:Atlantic/Madeira
 BEGIN:DAYLIGHT
 TZOFFSETFROM:+0000
 TZOFFSETTO:+0100
 TZNAME:WEST
-DTSTART:19700329T010000
+DTSTART:19840325T010000
 RRULE:FREQ=YEARLY;BYMONTH=3;BYDAY=-1SU
 END:DAYLIGHT
 BEGIN:STANDARD
 TZOFFSETFROM:+0100
 TZOFFSETTO:+0000
 TZNAME:WET
-DTSTART:19701025T020000
+DTSTART:19961027T020000
 RRULE:FREQ=YEARLY;BYMONTH=10;BYDAY=-1SU
 END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-010736
+TZOFFSETTO:-010736
+TZNAME:FMT
+DTSTART:18840101T000000
+RDATE:18840101T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-010736
+TZOFFSETTO:-0100
+TZNAME:MADT
+DTSTART:19110524T000000
+RDATE:19110524T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0100
+TZOFFSETTO:+0000
+TZNAME:MADST
+DTSTART:19160617T230000
+RDATE:19160617T230000
+RDATE:19170228T230000
+RDATE:19180301T230000
+RDATE:19190228T230000
+RDATE:19200229T230000
+RDATE:19210228T230000
+RDATE:19240416T230000
+RDATE:19260417T230000
+RDATE:19270409T230000
+RDATE:19280414T230000
+RDATE:19290420T230000
+RDATE:19310418T230000
+RDATE:19320402T230000
+RDATE:19340407T230000
+RDATE:19350330T230000
+RDATE:19360418T230000
+RDATE:19370403T230000
+RDATE:19380326T230000
+RDATE:19390415T230000
+RDATE:19400224T230000
+RDATE:19410405T230000
+RDATE:19420314T230000
+RDATE:19430313T230000
+RDATE:19440311T230000
+RDATE:19450310T230000
+RDATE:19460406T230000
+RDATE:19470406T020000
+RDATE:19480404T020000
+RDATE:19490403T020000
+RDATE:19510401T020000
+RDATE:19520406T020000
+RDATE:19530405T020000
+RDATE:19540404T020000
+RDATE:19550403T020000
+RDATE:19560401T020000
+RDATE:19570407T020000
+RDATE:19580406T020000
+RDATE:19590405T020000
+RDATE:19600403T020000
+RDATE:19610402T020000
+RDATE:19620401T020000
+RDATE:19630407T020000
+RDATE:19640405T020000
+RDATE:19650404T020000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0000
+TZOFFSETTO:-0100
+TZNAME:MADT
+DTSTART:19161101T010000
+RDATE:19161101T010000
+RDATE:19171015T000000
+RDATE:19181015T000000
+RDATE:19191015T000000
+RDATE:19201015T000000
+RDATE:19211015T000000
+RDATE:19241015T000000
+RDATE:19261003T000000
+RDATE:19271002T000000
+RDATE:19281007T000000
+RDATE:19291006T000000
+RDATE:19311004T000000
+RDATE:19321002T000000
+RDATE:19341007T000000
+RDATE:19351006T000000
+RDATE:19361004T000000
+RDATE:19371003T000000
+RDATE:19381002T000000
+RDATE:19391119T000000
+RDATE:19401006T000000
+RDATE:19411006T000000
+RDATE:19421025T000000
+RDATE:19431031T000000
+RDATE:19441029T000000
+RDATE:19451028T000000
+RDATE:19461006T000000
+RDATE:19471005T030000
+RDATE:19481003T030000
+RDATE:19491002T030000
+RDATE:19511007T030000
+RDATE:19521005T030000
+RDATE:19531004T030000
+RDATE:19541003T030000
+RDATE:19551002T030000
+RDATE:19561007T030000
+RDATE:19571006T030000
+RDATE:19581005T030000
+RDATE:19591004T030000
+RDATE:19601002T030000
+RDATE:19611001T030000
+RDATE:19621007T030000
+RDATE:19631006T030000
+RDATE:19641004T030000
+RDATE:19651003T030000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0000
+TZOFFSETTO:+0100
+TZNAME:MADMT
+DTSTART:19420425T230000
+RDATE:19420425T230000
+RDATE:19430417T230000
+RDATE:19440422T230000
+RDATE:19450421T230000
+END:DAYLIGHT
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0100
+TZOFFSETTO:+0000
+TZNAME:MADST
+DTSTART:19420816T000000
+RDATE:19420816T000000
+RDATE:19430829T000000
+RDATE:19440827T000000
+RDATE:19450826T000000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:-0100
+TZOFFSETTO:+0000
+TZNAME:WET
+DTSTART:19660403T020000
+RDATE:19660403T020000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0000
+TZOFFSETTO:+0100
+TZNAME:WEST
+DTSTART:19770327T000000
+RDATE:19770327T000000
+RDATE:19780402T000000
+RDATE:19790401T000000
+RDATE:19800330T000000
+RDATE:19810329T010000
+RDATE:19820328T010000
+RDATE:19830327T020000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0100
+TZOFFSETTO:+0000
+TZNAME:WET
+DTSTART:19770925T010000
+RDATE:19770925T010000
+RDATE:19781001T010000
+RDATE:19790930T020000
+RDATE:19800928T020000
+RDATE:19810927T020000
+RDATE:19820926T020000
+RDATE:19830925T020000
+RDATE:19840930T020000
+RDATE:19850929T020000
+RDATE:19860928T020000
+RDATE:19870927T020000
+RDATE:19880925T020000
+RDATE:19890924T020000
+RDATE:19900930T020000
+RDATE:19910929T020000
+RDATE:19920927T020000
+RDATE:19930926T020000
+RDATE:19940925T020000
+RDATE:19950924T020000
+END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Atlantic/Madeira.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Atlantic/St_Helena.ics
===================================================================
--- libkcal/libical/zoneinfo/Atlantic/St_Helena.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Atlantic/St_Helena.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +1,22 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/Atlantic/St_Helena
+TZID:/kde.org/Olson_20070327_1/Atlantic/St_Helena
 X-LIC-LOCATION:Atlantic/St_Helena
 BEGIN:STANDARD
-TZOFFSETFROM:+0000
+TZOFFSETFROM:-002248
+TZOFFSETTO:-002248
+TZNAME:JMT
+DTSTART:18900101T000000
+RDATE:18900101T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-002248
 TZOFFSETTO:+0000
 TZNAME:GMT
-DTSTART:19700101T000000
+DTSTART:19510101T000000
+RDATE:19510101T000000
 END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Atlantic/St_Helena.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Atlantic/Azores.ics
===================================================================
--- libkcal/libical/zoneinfo/Atlantic/Azores.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Atlantic/Azores.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,22 +1,223 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/Atlantic/Azores
+TZID:/kde.org/Olson_20070327_1/Atlantic/Azores
 X-LIC-LOCATION:Atlantic/Azores
 BEGIN:DAYLIGHT
 TZOFFSETFROM:-0100
 TZOFFSETTO:+0000
 TZNAME:AZOST
-DTSTART:19700329T000000
+DTSTART:19940327T000000
 RRULE:FREQ=YEARLY;BYMONTH=3;BYDAY=-1SU
 END:DAYLIGHT
 BEGIN:STANDARD
 TZOFFSETFROM:+0000
 TZOFFSETTO:-0100
 TZNAME:AZOT
-DTSTART:19701025T010000
+DTSTART:19961027T010000
 RRULE:FREQ=YEARLY;BYMONTH=10;BYDAY=-1SU
 END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-014240
+TZOFFSETTO:-015432
+TZNAME:HMT
+DTSTART:18840101T000000
+RDATE:18840101T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-015432
+TZOFFSETTO:-0200
+TZNAME:AZOT
+DTSTART:19110524T000000
+RDATE:19110524T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0200
+TZOFFSETTO:-0100
+TZNAME:AZOST
+DTSTART:19160617T230000
+RDATE:19160617T230000
+RDATE:19170228T230000
+RDATE:19180301T230000
+RDATE:19190228T230000
+RDATE:19200229T230000
+RDATE:19210228T230000
+RDATE:19240416T230000
+RDATE:19260417T230000
+RDATE:19270409T230000
+RDATE:19280414T230000
+RDATE:19290420T230000
+RDATE:19310418T230000
+RDATE:19320402T230000
+RDATE:19340407T230000
+RDATE:19350330T230000
+RDATE:19360418T230000
+RDATE:19370403T230000
+RDATE:19380326T230000
+RDATE:19390415T230000
+RDATE:19400224T230000
+RDATE:19410405T230000
+RDATE:19420314T230000
+RDATE:19430313T230000
+RDATE:19440311T230000
+RDATE:19450310T230000
+RDATE:19460406T230000
+RDATE:19470406T020000
+RDATE:19480404T020000
+RDATE:19490403T020000
+RDATE:19510401T020000
+RDATE:19520406T020000
+RDATE:19530405T020000
+RDATE:19540404T020000
+RDATE:19550403T020000
+RDATE:19560401T020000
+RDATE:19570407T020000
+RDATE:19580406T020000
+RDATE:19590405T020000
+RDATE:19600403T020000
+RDATE:19610402T020000
+RDATE:19620401T020000
+RDATE:19630407T020000
+RDATE:19640405T020000
+RDATE:19650404T020000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:-0100
+TZOFFSETTO:-0200
+TZNAME:AZOT
+DTSTART:19161101T010000
+RDATE:19161101T010000
+RDATE:19171015T000000
+RDATE:19181015T000000
+RDATE:19191015T000000
+RDATE:19201015T000000
+RDATE:19211015T000000
+RDATE:19241015T000000
+RDATE:19261003T000000
+RDATE:19271002T000000
+RDATE:19281007T000000
+RDATE:19291006T000000
+RDATE:19311004T000000
+RDATE:19321002T000000
+RDATE:19341007T000000
+RDATE:19351006T000000
+RDATE:19361004T000000
+RDATE:19371003T000000
+RDATE:19381002T000000
+RDATE:19391119T000000
+RDATE:19401006T000000
+RDATE:19411006T000000
+RDATE:19421025T000000
+RDATE:19431031T000000
+RDATE:19441029T000000
+RDATE:19451028T000000
+RDATE:19461006T000000
+RDATE:19471005T030000
+RDATE:19481003T030000
+RDATE:19491002T030000
+RDATE:19511007T030000
+RDATE:19521005T030000
+RDATE:19531004T030000
+RDATE:19541003T030000
+RDATE:19551002T030000
+RDATE:19561007T030000
+RDATE:19571006T030000
+RDATE:19581005T030000
+RDATE:19591004T030000
+RDATE:19601002T030000
+RDATE:19611001T030000
+RDATE:19621007T030000
+RDATE:19631006T030000
+RDATE:19641004T030000
+RDATE:19651003T030000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0100
+TZOFFSETTO:+0000
+TZNAME:AZOMT
+DTSTART:19420425T230000
+RDATE:19420425T230000
+RDATE:19430417T230000
+RDATE:19440422T230000
+RDATE:19450421T230000
+END:DAYLIGHT
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0000
+TZOFFSETTO:-0100
+TZNAME:AZOST
+DTSTART:19420816T000000
+RDATE:19420816T000000
+RDATE:19430829T000000
+RDATE:19440827T000000
+RDATE:19450826T000000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:-0200
+TZOFFSETTO:-0100
+TZNAME:AZOT
+DTSTART:19660403T020000
+RDATE:19660403T020000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0100
+TZOFFSETTO:+0000
+TZNAME:AZOST
+DTSTART:19770327T000000
+RDATE:19770327T000000
+RDATE:19780402T000000
+RDATE:19790401T000000
+RDATE:19800330T000000
+RDATE:19810329T010000
+RDATE:19820328T010000
+RDATE:19830327T020000
+RDATE:19840325T010000
+RDATE:19850331T010000
+RDATE:19860330T010000
+RDATE:19870329T010000
+RDATE:19880327T010000
+RDATE:19890326T010000
+RDATE:19900325T010000
+RDATE:19910331T010000
+RDATE:19920329T010000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0000
+TZOFFSETTO:-0100
+TZNAME:AZOT
+DTSTART:19770925T010000
+RDATE:19770925T010000
+RDATE:19781001T010000
+RDATE:19790930T020000
+RDATE:19800928T020000
+RDATE:19810927T020000
+RDATE:19820926T020000
+RDATE:19830925T020000
+RDATE:19840930T020000
+RDATE:19850929T020000
+RDATE:19860928T020000
+RDATE:19870927T020000
+RDATE:19880925T020000
+RDATE:19890924T020000
+RDATE:19900930T020000
+RDATE:19910929T020000
+RDATE:19930926T010000
+RDATE:19940925T010000
+RDATE:19950924T010000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0000
+TZOFFSETTO:+0000
+TZNAME:WET
+DTSTART:19920927T020000
+RDATE:19920927T020000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0000
+TZOFFSETTO:+0000
+TZNAME:AZOST
+DTSTART:19930328T010000
+RDATE:19930328T010000
+END:DAYLIGHT
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Atlantic/Azores.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Atlantic/Faroe.ics
===================================================================
--- libkcal/libical/zoneinfo/Atlantic/Faroe.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 0)
+++ libkcal/libical/zoneinfo/Atlantic/Faroe.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -0,0 +1,57 @@
+BEGIN:VCALENDAR
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
+VERSION:2.0
+BEGIN:VTIMEZONE
+TZID:/kde.org/Olson_20070327_1/Atlantic/Faroe
+X-LIC-LOCATION:Atlantic/Faroe
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0000
+TZOFFSETTO:+0100
+TZNAME:WEST
+DTSTART:19810329T010000
+RRULE:FREQ=YEARLY;BYMONTH=3;BYDAY=-1SU
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0100
+TZOFFSETTO:+0000
+TZNAME:WET
+DTSTART:19961027T020000
+RRULE:FREQ=YEARLY;BYMONTH=10;BYDAY=-1SU
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-002704
+TZOFFSETTO:+0000
+TZNAME:WET
+DTSTART:19080111T000000
+RDATE:19080111T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0000
+TZOFFSETTO:+0000
+TZNAME:WET
+DTSTART:19810101T000000
+RDATE:19810101T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0100
+TZOFFSETTO:+0000
+TZNAME:WET
+DTSTART:19810927T020000
+RDATE:19810927T020000
+RDATE:19820926T020000
+RDATE:19830925T020000
+RDATE:19840930T020000
+RDATE:19850929T020000
+RDATE:19860928T020000
+RDATE:19870927T020000
+RDATE:19880925T020000
+RDATE:19890924T020000
+RDATE:19900930T020000
+RDATE:19910929T020000
+RDATE:19920927T020000
+RDATE:19930926T020000
+RDATE:19940925T020000
+RDATE:19950924T020000
+END:STANDARD
+END:VTIMEZONE
+END:VCALENDAR
Index: libkcal/libical/zoneinfo/Atlantic/Canary.ics
===================================================================
--- libkcal/libical/zoneinfo/Atlantic/Canary.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Atlantic/Canary.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,22 +1,72 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/Atlantic/Canary
+TZID:/kde.org/Olson_20070327_1/Atlantic/Canary
 X-LIC-LOCATION:Atlantic/Canary
 BEGIN:DAYLIGHT
 TZOFFSETFROM:+0000
 TZOFFSETTO:+0100
 TZNAME:WEST
-DTSTART:19700329T010000
+DTSTART:19810329T010000
 RRULE:FREQ=YEARLY;BYMONTH=3;BYDAY=-1SU
 END:DAYLIGHT
 BEGIN:STANDARD
 TZOFFSETFROM:+0100
 TZOFFSETTO:+0000
 TZNAME:WET
-DTSTART:19701025T020000
+DTSTART:19961027T020000
 RRULE:FREQ=YEARLY;BYMONTH=10;BYDAY=-1SU
 END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-010136
+TZOFFSETTO:-0100
+TZNAME:CANT
+DTSTART:19220301T000000
+RDATE:19220301T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-0100
+TZOFFSETTO:+0000
+TZNAME:WET
+DTSTART:19460930T010000
+RDATE:19460930T010000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0000
+TZOFFSETTO:+0100
+TZNAME:WEST
+DTSTART:19800406T000000
+RDATE:19800406T000000
+END:DAYLIGHT
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0100
+TZOFFSETTO:+0100
+TZNAME:WEST
+DTSTART:19800928T010000
+RDATE:19800928T010000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0100
+TZOFFSETTO:+0000
+TZNAME:WET
+DTSTART:19800928T020000
+RDATE:19800928T020000
+RDATE:19810927T020000
+RDATE:19820926T020000
+RDATE:19830925T020000
+RDATE:19840930T020000
+RDATE:19850929T020000
+RDATE:19860928T020000
+RDATE:19870927T020000
+RDATE:19880925T020000
+RDATE:19890924T020000
+RDATE:19900930T020000
+RDATE:19910929T020000
+RDATE:19920927T020000
+RDATE:19930926T020000
+RDATE:19940925T020000
+RDATE:19950924T020000
+END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Atlantic/Canary.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Atlantic/Cape_Verde.ics
===================================================================
--- libkcal/libical/zoneinfo/Atlantic/Cape_Verde.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Atlantic/Cape_Verde.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +1,36 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/Atlantic/Cape_Verde
+TZID:/kde.org/Olson_20070327_1/Atlantic/Cape_Verde
 X-LIC-LOCATION:Atlantic/Cape_Verde
 BEGIN:STANDARD
+TZOFFSETFROM:-013404
+TZOFFSETTO:-0200
+TZNAME:CVT
+DTSTART:19070101T000000
+RDATE:19070101T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0200
+TZOFFSETTO:-0100
+TZNAME:CVST
+DTSTART:19420901T000000
+RDATE:19420901T000000
+END:DAYLIGHT
+BEGIN:STANDARD
 TZOFFSETFROM:-0100
+TZOFFSETTO:-0200
+TZNAME:CVT
+DTSTART:19451015T000000
+RDATE:19451015T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-0200
 TZOFFSETTO:-0100
 TZNAME:CVT
-DTSTART:19700101T000000
+DTSTART:19751125T020000
+RDATE:19751125T020000
 END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Atlantic/Cape_Verde.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Atlantic/Bermuda.ics
===================================================================
--- libkcal/libical/zoneinfo/Atlantic/Bermuda.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Atlantic/Bermuda.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,22 +1,114 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/Atlantic/Bermuda
+TZID:/kde.org/Olson_20070327_1/Atlantic/Bermuda
 X-LIC-LOCATION:Atlantic/Bermuda
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0400
+TZOFFSETTO:-0300
+TZNAME:ADT
+DTSTART:20070311T020000
+RRULE:FREQ=YEARLY;BYMONTH=3;BYDAY=2SU
+END:DAYLIGHT
 BEGIN:STANDARD
 TZOFFSETFROM:-0300
 TZOFFSETTO:-0400
 TZNAME:AST
-DTSTART:19701025T020000
-RRULE:FREQ=YEARLY;BYMONTH=10;BYDAY=-1SU
+DTSTART:20071104T020000
+RRULE:FREQ=YEARLY;BYMONTH=11;BYDAY=1SU
 END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-041904
+TZOFFSETTO:-0400
+TZNAME:AST
+DTSTART:19300101T020000
+RDATE:19300101T020000
+END:STANDARD
 BEGIN:DAYLIGHT
 TZOFFSETFROM:-0400
 TZOFFSETTO:-0300
 TZNAME:ADT
-DTSTART:19700405T020000
-RRULE:FREQ=YEARLY;BYMONTH=4;BYDAY=1SU
+DTSTART:19740428T020000
+RDATE:19740428T020000
+RDATE:19750427T020000
+RDATE:19760425T020000
+RDATE:19770424T020000
+RDATE:19780430T020000
+RDATE:19790429T020000
+RDATE:19800427T020000
+RDATE:19810426T020000
+RDATE:19820425T020000
+RDATE:19830424T020000
+RDATE:19840429T020000
+RDATE:19850428T020000
+RDATE:19860427T020000
+RDATE:19870405T020000
+RDATE:19880403T020000
+RDATE:19890402T020000
+RDATE:19900401T020000
+RDATE:19910407T020000
+RDATE:19920405T020000
+RDATE:19930404T020000
+RDATE:19940403T020000
+RDATE:19950402T020000
+RDATE:19960407T020000
+RDATE:19970406T020000
+RDATE:19980405T020000
+RDATE:19990404T020000
+RDATE:20000402T020000
+RDATE:20010401T020000
+RDATE:20020407T020000
+RDATE:20030406T020000
+RDATE:20040404T020000
+RDATE:20050403T020000
+RDATE:20060402T020000
 END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:-0300
+TZOFFSETTO:-0400
+TZNAME:AST
+DTSTART:19741027T020000
+RDATE:19741027T020000
+RDATE:19751026T020000
+RDATE:19761031T020000
+RDATE:19771030T020000
+RDATE:19781029T020000
+RDATE:19791028T020000
+RDATE:19801026T020000
+RDATE:19811025T020000
+RDATE:19821031T020000
+RDATE:19831030T020000
+RDATE:19841028T020000
+RDATE:19851027T020000
+RDATE:19861026T020000
+RDATE:19871025T020000
+RDATE:19881030T020000
+RDATE:19891029T020000
+RDATE:19901028T020000
+RDATE:19911027T020000
+RDATE:19921025T020000
+RDATE:19931031T020000
+RDATE:19941030T020000
+RDATE:19951029T020000
+RDATE:19961027T020000
+RDATE:19971026T020000
+RDATE:19981025T020000
+RDATE:19991031T020000
+RDATE:20001029T020000
+RDATE:20011028T020000
+RDATE:20021027T020000
+RDATE:20031026T020000
+RDATE:20041031T020000
+RDATE:20051030T020000
+RDATE:20061029T020000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-0400
+TZOFFSETTO:-0400
+TZNAME:AST
+DTSTART:19760101T000000
+RDATE:19760101T000000
+END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Atlantic/Bermuda.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Atlantic/Reykjavik.ics
===================================================================
--- libkcal/libical/zoneinfo/Atlantic/Reykjavik.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Atlantic/Reykjavik.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +1,103 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/Atlantic/Reykjavik
+TZID:/kde.org/Olson_20070327_1/Atlantic/Reykjavik
 X-LIC-LOCATION:Atlantic/Reykjavik
 BEGIN:STANDARD
+TZOFFSETFROM:-012724
+TZOFFSETTO:-012748
+TZNAME:RMT
+DTSTART:18370101T000000
+RDATE:18370101T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-012748
+TZOFFSETTO:-0100
+TZNAME:IST
+DTSTART:19080101T000000
+RDATE:19080101T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0100
+TZOFFSETTO:+0000
+TZNAME:ISST
+DTSTART:19170219T230000
+RDATE:19170219T230000
+RDATE:19180219T230000
+RDATE:19390429T230000
+RDATE:19400225T020000
+RDATE:19410302T010000
+RDATE:19420308T010000
+RDATE:19430307T010000
+RDATE:19440305T010000
+RDATE:19450304T010000
+RDATE:19460303T010000
+RDATE:19470406T010000
+RDATE:19480404T010000
+RDATE:19490403T010000
+RDATE:19500402T010000
+RDATE:19510401T010000
+RDATE:19520406T010000
+RDATE:19530405T010000
+RDATE:19540404T010000
+RDATE:19550403T010000
+RDATE:19560401T010000
+RDATE:19570407T010000
+RDATE:19580406T010000
+RDATE:19590405T010000
+RDATE:19600403T010000
+RDATE:19610402T010000
+RDATE:19620401T010000
+RDATE:19630407T010000
+RDATE:19640405T010000
+RDATE:19650404T010000
+RDATE:19660403T010000
+RDATE:19670402T010000
+END:DAYLIGHT
+BEGIN:STANDARD
 TZOFFSETFROM:+0000
+TZOFFSETTO:-0100
+TZNAME:IST
+DTSTART:19171021T010000
+RDATE:19171021T010000
+RDATE:19181116T010000
+RDATE:19391129T020000
+RDATE:19401103T020000
+RDATE:19411102T020000
+RDATE:19421025T020000
+RDATE:19431024T020000
+RDATE:19441022T020000
+RDATE:19451028T020000
+RDATE:19461027T020000
+RDATE:19471026T020000
+RDATE:19481024T020000
+RDATE:19491030T020000
+RDATE:19501022T020000
+RDATE:19511028T020000
+RDATE:19521026T020000
+RDATE:19531025T020000
+RDATE:19541024T020000
+RDATE:19551023T020000
+RDATE:19561028T020000
+RDATE:19571027T020000
+RDATE:19581026T020000
+RDATE:19591025T020000
+RDATE:19601023T020000
+RDATE:19611022T020000
+RDATE:19621028T020000
+RDATE:19631027T020000
+RDATE:19641025T020000
+RDATE:19651024T020000
+RDATE:19661023T020000
+RDATE:19671029T020000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-0100
 TZOFFSETTO:+0000
 TZNAME:GMT
-DTSTART:19700101T000000
+DTSTART:19680407T010000
+RDATE:19680407T010000
 END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Atlantic/Reykjavik.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Atlantic/South_Georgia.ics
===================================================================
--- libkcal/libical/zoneinfo/Atlantic/South_Georgia.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Atlantic/South_Georgia.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +1,15 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_4/Atlantic/South_Georgia
+TZID:/kde.org/Olson_20070327_1/Atlantic/South_Georgia
 X-LIC-LOCATION:Atlantic/South_Georgia
 BEGIN:STANDARD
-TZOFFSETFROM:-0200
+TZOFFSETFROM:-022608
 TZOFFSETTO:-0200
 TZNAME:GST
-DTSTART:19700101T000000
+DTSTART:18900101T000000
+RDATE:18900101T000000
 END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Atlantic/South_Georgia.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Atlantic/Stanley.ics
===================================================================
--- libkcal/libical/zoneinfo/Atlantic/Stanley.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Atlantic/Stanley.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,22 +1,120 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/Atlantic/Stanley
+TZID:/kde.org/Olson_20070327_1/Atlantic/Stanley
 X-LIC-LOCATION:Atlantic/Stanley
 BEGIN:STANDARD
 TZOFFSETFROM:-0300
 TZOFFSETTO:-0400
 TZNAME:FKT
-DTSTART:19700419T020000
+DTSTART:20010415T020000
 RRULE:FREQ=YEARLY;BYMONTH=4;BYDAY=3SU
 END:STANDARD
 BEGIN:DAYLIGHT
 TZOFFSETFROM:-0400
 TZOFFSETTO:-0300
 TZNAME:FKST
-DTSTART:19700906T020000
+DTSTART:20010902T020000
 RRULE:FREQ=YEARLY;BYMONTH=9;BYDAY=1SU
 END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:-035124
+TZOFFSETTO:-035124
+TZNAME:SMT
+DTSTART:18900101T000000
+RDATE:18900101T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-035124
+TZOFFSETTO:-0400
+TZNAME:FKT
+DTSTART:19120312T000000
+RDATE:19120312T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0400
+TZOFFSETTO:-0300
+TZNAME:FKST
+DTSTART:19370926T000000
+RDATE:19370926T000000
+RDATE:19380925T000000
+RDATE:19391001T000000
+RDATE:19400929T000000
+RDATE:19410928T000000
+RDATE:19420927T000000
+RDATE:19860914T000000
+RDATE:19870913T000000
+RDATE:19880911T000000
+RDATE:19890910T000000
+RDATE:19900909T000000
+RDATE:19910915T000000
+RDATE:19920913T000000
+RDATE:19930912T000000
+RDATE:19940911T000000
+RDATE:19950910T000000
+RDATE:19960915T000000
+RDATE:19970914T000000
+RDATE:19980913T000000
+RDATE:19990912T000000
+RDATE:20000910T000000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:-0300
+TZOFFSETTO:-0400
+TZNAME:FKT
+DTSTART:19380320T000000
+RDATE:19380320T000000
+RDATE:19390319T000000
+RDATE:19400324T000000
+RDATE:19410323T000000
+RDATE:19420322T000000
+RDATE:19430101T000000
+RDATE:19860420T000000
+RDATE:19870419T000000
+RDATE:19880417T000000
+RDATE:19890416T000000
+RDATE:19900422T000000
+RDATE:19910421T000000
+RDATE:19920419T000000
+RDATE:19930418T000000
+RDATE:19940417T000000
+RDATE:19950416T000000
+RDATE:19960421T000000
+RDATE:19970420T000000
+RDATE:19980419T000000
+RDATE:19990418T000000
+RDATE:20000416T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-0400
+TZOFFSETTO:-0300
+TZNAME:FKT
+DTSTART:19830501T000000
+RDATE:19830501T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0300
+TZOFFSETTO:-0200
+TZNAME:FKST
+DTSTART:19830925T000000
+RDATE:19830925T000000
+RDATE:19840916T000000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:-0200
+TZOFFSETTO:-0300
+TZNAME:FKT
+DTSTART:19840429T000000
+RDATE:19840429T000000
+RDATE:19850428T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0300
+TZOFFSETTO:-0300
+TZNAME:FKST
+DTSTART:19850915T000000
+RDATE:19850915T000000
+END:DAYLIGHT
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Atlantic/Stanley.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Atlantic/Jan_Mayen.ics
===================================================================
--- libkcal/libical/zoneinfo/Atlantic/Jan_Mayen.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Atlantic/Jan_Mayen.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,22 +1,89 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/Atlantic/Jan_Mayen
+TZID:/kde.org/Olson_20070327_1/Atlantic/Jan_Mayen
 X-LIC-LOCATION:Atlantic/Jan_Mayen
 BEGIN:DAYLIGHT
 TZOFFSETFROM:+0100
 TZOFFSETTO:+0200
 TZNAME:CEST
-DTSTART:19700329T020000
+DTSTART:19810329T020000
 RRULE:FREQ=YEARLY;BYMONTH=3;BYDAY=-1SU
 END:DAYLIGHT
 BEGIN:STANDARD
 TZOFFSETFROM:+0200
 TZOFFSETTO:+0100
 TZNAME:CET
-DTSTART:19701025T030000
+DTSTART:19961027T030000
 RRULE:FREQ=YEARLY;BYMONTH=10;BYDAY=-1SU
 END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0043
+TZOFFSETTO:+0100
+TZNAME:CET
+DTSTART:18950101T000000
+RDATE:18950101T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0100
+TZOFFSETTO:+0200
+TZNAME:CEST
+DTSTART:19160522T010000
+RDATE:19160522T010000
+RDATE:19400810T230000
+RDATE:19430329T020000
+RDATE:19440403T020000
+RDATE:19450402T020000
+RDATE:19590315T020000
+RDATE:19600320T020000
+RDATE:19610319T020000
+RDATE:19620318T020000
+RDATE:19630317T020000
+RDATE:19640315T020000
+RDATE:19650425T020000
+RDATE:19800406T020000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0200
+TZOFFSETTO:+0100
+TZNAME:CET
+DTSTART:19160930T000000
+RDATE:19160930T000000
+RDATE:19421102T030000
+RDATE:19431004T030000
+RDATE:19441002T030000
+RDATE:19451001T030000
+RDATE:19590920T030000
+RDATE:19600918T030000
+RDATE:19610917T030000
+RDATE:19620916T030000
+RDATE:19630915T030000
+RDATE:19640920T030000
+RDATE:19650919T030000
+RDATE:19800928T030000
+RDATE:19810927T030000
+RDATE:19820926T030000
+RDATE:19830925T030000
+RDATE:19840930T030000
+RDATE:19850929T030000
+RDATE:19860928T030000
+RDATE:19870927T030000
+RDATE:19880925T030000
+RDATE:19890924T030000
+RDATE:19900930T030000
+RDATE:19910929T030000
+RDATE:19920927T030000
+RDATE:19930926T030000
+RDATE:19940925T030000
+RDATE:19950924T030000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0100
+TZOFFSETTO:+0100
+TZNAME:CET
+DTSTART:19800101T000000
+RDATE:19800101T000000
+END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Atlantic/Jan_Mayen.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Europe/Belfast.ics
===================================================================
--- libkcal/libical/zoneinfo/Europe/Belfast.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Europe/Belfast.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,22 +0,0 @@
-BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
-VERSION:2.0
-BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/Europe/Belfast
-X-LIC-LOCATION:Europe/Belfast
-BEGIN:DAYLIGHT
-TZOFFSETFROM:+0000
-TZOFFSETTO:+0100
-TZNAME:BST
-DTSTART:19700329T010000
-RRULE:FREQ=YEARLY;BYMONTH=3;BYDAY=-1SU
-END:DAYLIGHT
-BEGIN:STANDARD
-TZOFFSETFROM:+0100
-TZOFFSETTO:+0000
-TZNAME:GMT
-DTSTART:19701025T020000
-RRULE:FREQ=YEARLY;BYMONTH=10;BYDAY=-1SU
-END:STANDARD
-END:VTIMEZONE
-END:VCALENDAR
Index: libkcal/libical/zoneinfo/Europe/Rome.ics
===================================================================
--- libkcal/libical/zoneinfo/Europe/Rome.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Europe/Rome.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,22 +1,131 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/Europe/Rome
+TZID:/kde.org/Olson_20070327_1/Europe/Rome
 X-LIC-LOCATION:Europe/Rome
 BEGIN:DAYLIGHT
 TZOFFSETFROM:+0100
 TZOFFSETTO:+0200
 TZNAME:CEST
-DTSTART:19700329T020000
+DTSTART:19810329T020000
 RRULE:FREQ=YEARLY;BYMONTH=3;BYDAY=-1SU
 END:DAYLIGHT
 BEGIN:STANDARD
 TZOFFSETFROM:+0200
 TZOFFSETTO:+0100
 TZNAME:CET
-DTSTART:19701025T030000
+DTSTART:19961027T030000
 RRULE:FREQ=YEARLY;BYMONTH=10;BYDAY=-1SU
 END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+004956
+TZOFFSETTO:+004956
+TZNAME:RMT
+DTSTART:18660922T000000
+RDATE:18660922T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+004956
+TZOFFSETTO:+0100
+TZNAME:CET
+DTSTART:18931101T000000
+RDATE:18931101T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0100
+TZOFFSETTO:+0200
+TZNAME:CEST
+DTSTART:19160603T000000
+RDATE:19160603T000000
+RDATE:19170401T000000
+RDATE:19180310T000000
+RDATE:19190302T000000
+RDATE:19200321T000000
+RDATE:19400615T000000
+RDATE:19430329T020000
+RDATE:19440403T020000
+RDATE:19450402T020000
+RDATE:19460317T020000
+RDATE:19470316T000000
+RDATE:19480229T020000
+RDATE:19660522T000000
+RDATE:19670528T000000
+RDATE:19680526T000000
+RDATE:19690601T000000
+RDATE:19700531T000000
+RDATE:19710523T000000
+RDATE:19720528T000000
+RDATE:19730603T000000
+RDATE:19740526T000000
+RDATE:19750601T000000
+RDATE:19760530T000000
+RDATE:19770522T000000
+RDATE:19780528T000000
+RDATE:19790527T000000
+RDATE:19800406T020000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0200
+TZOFFSETTO:+0100
+TZNAME:CET
+DTSTART:19161001T010000
+RDATE:19161001T010000
+RDATE:19170930T010000
+RDATE:19181006T010000
+RDATE:19191005T010000
+RDATE:19200919T010000
+RDATE:19421102T030000
+RDATE:19431004T030000
+RDATE:19440917T010000
+RDATE:19450915T010000
+RDATE:19461006T030000
+RDATE:19471005T010000
+RDATE:19481003T030000
+RDATE:19660925T000000
+RDATE:19670924T000000
+RDATE:19680922T000000
+RDATE:19690928T000000
+RDATE:19700927T000000
+RDATE:19710926T010000
+RDATE:19721001T000000
+RDATE:19730930T000000
+RDATE:19740929T000000
+RDATE:19750928T010000
+RDATE:19760926T010000
+RDATE:19770925T010000
+RDATE:19781001T010000
+RDATE:19790930T010000
+RDATE:19800928T030000
+RDATE:19810927T030000
+RDATE:19820926T030000
+RDATE:19830925T030000
+RDATE:19840930T030000
+RDATE:19850929T030000
+RDATE:19860928T030000
+RDATE:19870927T030000
+RDATE:19880925T030000
+RDATE:19890924T030000
+RDATE:19900930T030000
+RDATE:19910929T030000
+RDATE:19920927T030000
+RDATE:19930926T030000
+RDATE:19940925T030000
+RDATE:19950924T030000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0200
+TZOFFSETTO:+0200
+TZNAME:CEST
+DTSTART:19440701T000000
+RDATE:19440701T000000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0100
+TZOFFSETTO:+0100
+TZNAME:CET
+DTSTART:19800101T000000
+RDATE:19800101T000000
+END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Europe/Rome.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Europe/Chisinau.ics
===================================================================
--- libkcal/libical/zoneinfo/Europe/Chisinau.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Europe/Chisinau.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,22 +1,161 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/Europe/Chisinau
+TZID:/kde.org/Olson_20070327_1/Europe/Chisinau
 X-LIC-LOCATION:Europe/Chisinau
 BEGIN:DAYLIGHT
 TZOFFSETFROM:+0200
 TZOFFSETTO:+0300
 TZNAME:EEST
-DTSTART:19700329T030000
+DTSTART:19970330T030000
 RRULE:FREQ=YEARLY;BYMONTH=3;BYDAY=-1SU
 END:DAYLIGHT
 BEGIN:STANDARD
 TZOFFSETFROM:+0300
 TZOFFSETTO:+0200
 TZNAME:EET
-DTSTART:19701025T040000
+DTSTART:19971026T040000
 RRULE:FREQ=YEARLY;BYMONTH=10;BYDAY=-1SU
 END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+015520
+TZOFFSETTO:+0155
+TZNAME:CMT
+DTSTART:18800101T000000
+RDATE:18800101T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0155
+TZOFFSETTO:+014424
+TZNAME:BMT
+DTSTART:19180215T000000
+RDATE:19180215T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+014424
+TZOFFSETTO:+0200
+TZNAME:EET
+DTSTART:19310724T000000
+RDATE:19310724T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0200
+TZOFFSETTO:+0300
+TZNAME:EEST
+DTSTART:19320521T000000
+RDATE:19320521T000000
+RDATE:19330402T000000
+RDATE:19340408T000000
+RDATE:19350407T000000
+RDATE:19360405T000000
+RDATE:19370404T000000
+RDATE:19380403T000000
+RDATE:19390402T000000
+RDATE:19400815T000000
+RDATE:19910331T020000
+RDATE:19920329T000000
+RDATE:19930328T000000
+RDATE:19940327T000000
+RDATE:19950326T000000
+RDATE:19960331T000000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0300
+TZOFFSETTO:+0200
+TZNAME:EET
+DTSTART:19321002T010000
+RDATE:19321002T010000
+RDATE:19331001T010000
+RDATE:19341007T010000
+RDATE:19351006T010000
+RDATE:19361004T010000
+RDATE:19371003T010000
+RDATE:19381002T010000
+RDATE:19391001T010000
+RDATE:19900506T000000
+RDATE:19910929T030000
+RDATE:19920927T000000
+RDATE:19930926T000000
+RDATE:19940925T000000
+RDATE:19950924T000000
+RDATE:19961027T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0300
+TZOFFSETTO:+0200
+TZNAME:CEST
+DTSTART:19410717T000000
+RDATE:19410717T000000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0200
+TZOFFSETTO:+0100
+TZNAME:CET
+DTSTART:19421102T030000
+RDATE:19421102T030000
+RDATE:19431004T030000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0100
+TZOFFSETTO:+0200
+TZNAME:CEST
+DTSTART:19430329T020000
+RDATE:19430329T020000
+RDATE:19440403T020000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0200
+TZOFFSETTO:+0300
+TZNAME:MSK
+DTSTART:19440824T000000
+RDATE:19440824T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0300
+TZOFFSETTO:+0400
+TZNAME:MSD
+DTSTART:19810401T000000
+RDATE:19810401T000000
+RDATE:19820401T000000
+RDATE:19830401T000000
+RDATE:19840401T000000
+RDATE:19850331T020000
+RDATE:19860330T020000
+RDATE:19870329T020000
+RDATE:19880327T020000
+RDATE:19890326T020000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0400
+TZOFFSETTO:+0300
+TZNAME:MSK
+DTSTART:19811001T000000
+RDATE:19811001T000000
+RDATE:19821001T000000
+RDATE:19831001T000000
+RDATE:19840930T030000
+RDATE:19850929T030000
+RDATE:19860928T030000
+RDATE:19870927T030000
+RDATE:19880925T030000
+RDATE:19890924T030000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0300
+TZOFFSETTO:+0300
+TZNAME:MSK
+DTSTART:19900101T000000
+RDATE:19900101T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0200
+TZOFFSETTO:+0200
+TZNAME:EET
+DTSTART:19910101T000000
+RDATE:19910101T000000
+RDATE:19920101T000000
+RDATE:19970101T000000
+END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Europe/Chisinau.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Europe/Warsaw.ics
===================================================================
--- libkcal/libical/zoneinfo/Europe/Warsaw.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Europe/Warsaw.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,22 +1,152 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/Europe/Warsaw
+TZID:/kde.org/Olson_20070327_1/Europe/Warsaw
 X-LIC-LOCATION:Europe/Warsaw
 BEGIN:DAYLIGHT
 TZOFFSETFROM:+0100
 TZOFFSETTO:+0200
 TZNAME:CEST
-DTSTART:19700329T020000
+DTSTART:19880327T020000
 RRULE:FREQ=YEARLY;BYMONTH=3;BYDAY=-1SU
 END:DAYLIGHT
 BEGIN:STANDARD
 TZOFFSETFROM:+0200
 TZOFFSETTO:+0100
 TZNAME:CET
-DTSTART:19701025T030000
+DTSTART:19961027T030000
 RRULE:FREQ=YEARLY;BYMONTH=10;BYDAY=-1SU
 END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0124
+TZOFFSETTO:+0124
+TZNAME:WMT
+DTSTART:18800101T000000
+RDATE:18800101T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0124
+TZOFFSETTO:+0100
+TZNAME:CET
+DTSTART:19150805T000000
+RDATE:19150805T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0100
+TZOFFSETTO:+0200
+TZNAME:CEST
+DTSTART:19160430T230000
+RDATE:19160430T230000
+RDATE:19170416T020000
+RDATE:19180415T020000
+RDATE:19400623T020000
+RDATE:19430329T020000
+RDATE:19440403T020000
+RDATE:19450429T000000
+RDATE:19460414T000000
+RDATE:19470504T020000
+RDATE:19480418T020000
+RDATE:19490410T020000
+RDATE:19570602T010000
+RDATE:19580330T010000
+RDATE:19590531T010000
+RDATE:19600403T010000
+RDATE:19610528T010000
+RDATE:19620527T010000
+RDATE:19630526T010000
+RDATE:19640531T010000
+RDATE:19770403T010000
+RDATE:19780402T010000
+RDATE:19790401T010000
+RDATE:19800406T010000
+RDATE:19810329T010000
+RDATE:19820328T010000
+RDATE:19830327T010000
+RDATE:19840325T010000
+RDATE:19850331T010000
+RDATE:19860330T010000
+RDATE:19870329T010000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0200
+TZOFFSETTO:+0100
+TZNAME:CET
+DTSTART:19161001T010000
+RDATE:19161001T010000
+RDATE:19170917T030000
+RDATE:19220601T000000
+RDATE:19421102T030000
+RDATE:19431004T030000
+RDATE:19441004T020000
+RDATE:19451101T000000
+RDATE:19461007T030000
+RDATE:19471005T030000
+RDATE:19481003T030000
+RDATE:19491002T030000
+RDATE:19570929T020000
+RDATE:19580928T020000
+RDATE:19591004T020000
+RDATE:19601002T020000
+RDATE:19611001T020000
+RDATE:19620930T020000
+RDATE:19630929T020000
+RDATE:19640927T020000
+RDATE:19770925T020000
+RDATE:19781001T020000
+RDATE:19790930T020000
+RDATE:19800928T020000
+RDATE:19810927T020000
+RDATE:19820926T020000
+RDATE:19830925T020000
+RDATE:19840930T020000
+RDATE:19850929T020000
+RDATE:19860928T020000
+RDATE:19870927T020000
+RDATE:19880925T030000
+RDATE:19890924T030000
+RDATE:19900930T030000
+RDATE:19910929T030000
+RDATE:19920927T030000
+RDATE:19930926T030000
+RDATE:19940925T030000
+RDATE:19950924T030000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0200
+TZOFFSETTO:+0200
+TZNAME:EET
+DTSTART:19180916T030000
+RDATE:19180916T030000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0200
+TZOFFSETTO:+0300
+TZNAME:EEST
+DTSTART:19190415T020000
+RDATE:19190415T020000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0300
+TZOFFSETTO:+0200
+TZNAME:EET
+DTSTART:19190916T030000
+RDATE:19190916T030000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0200
+TZOFFSETTO:+0200
+TZNAME:CEST
+DTSTART:19441001T000000
+RDATE:19441001T000000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0100
+TZOFFSETTO:+0100
+TZNAME:CET
+DTSTART:19770101T000000
+RDATE:19770101T000000
+RDATE:19880101T000000
+END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Europe/Warsaw.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Europe/Helsinki.ics
===================================================================
--- libkcal/libical/zoneinfo/Europe/Helsinki.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Europe/Helsinki.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,22 +1,72 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/Europe/Helsinki
+TZID:/kde.org/Olson_20070327_1/Europe/Helsinki
 X-LIC-LOCATION:Europe/Helsinki
 BEGIN:DAYLIGHT
 TZOFFSETFROM:+0200
 TZOFFSETTO:+0300
 TZNAME:EEST
-DTSTART:19700329T030000
+DTSTART:19810329T030000
 RRULE:FREQ=YEARLY;BYMONTH=3;BYDAY=-1SU
 END:DAYLIGHT
 BEGIN:STANDARD
 TZOFFSETFROM:+0300
 TZOFFSETTO:+0200
 TZNAME:EET
-DTSTART:19701025T040000
+DTSTART:19961027T040000
 RRULE:FREQ=YEARLY;BYMONTH=10;BYDAY=-1SU
 END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+013952
+TZOFFSETTO:+013952
+TZNAME:HMT
+DTSTART:18780531T000000
+RDATE:18780531T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+013952
+TZOFFSETTO:+0200
+TZNAME:EET
+DTSTART:19210501T000000
+RDATE:19210501T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0200
+TZOFFSETTO:+0300
+TZNAME:EEST
+DTSTART:19420403T000000
+RDATE:19420403T000000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0300
+TZOFFSETTO:+0200
+TZNAME:EET
+DTSTART:19421003T000000
+RDATE:19421003T000000
+RDATE:19810927T040000
+RDATE:19820926T040000
+RDATE:19830925T040000
+RDATE:19840930T040000
+RDATE:19850929T040000
+RDATE:19860928T040000
+RDATE:19870927T040000
+RDATE:19880925T040000
+RDATE:19890924T040000
+RDATE:19900930T040000
+RDATE:19910929T040000
+RDATE:19920927T040000
+RDATE:19930926T040000
+RDATE:19940925T040000
+RDATE:19950924T040000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0200
+TZOFFSETTO:+0200
+TZNAME:EET
+DTSTART:19810329T020000
+RDATE:19810329T020000
+END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Europe/Helsinki.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Europe/Podgorica.ics
===================================================================
--- libkcal/libical/zoneinfo/Europe/Podgorica.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 0)
+++ libkcal/libical/zoneinfo/Europe/Podgorica.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -0,0 +1,69 @@
+BEGIN:VCALENDAR
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
+VERSION:2.0
+BEGIN:VTIMEZONE
+TZID:/kde.org/Olson_20070327_1/Europe/Podgorica
+X-LIC-LOCATION:Europe/Podgorica
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0100
+TZOFFSETTO:+0200
+TZNAME:CEST
+DTSTART:19830327T020000
+RRULE:FREQ=YEARLY;BYMONTH=3;BYDAY=-1SU
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0200
+TZOFFSETTO:+0100
+TZNAME:CET
+DTSTART:19961027T030000
+RRULE:FREQ=YEARLY;BYMONTH=10;BYDAY=-1SU
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0122
+TZOFFSETTO:+0100
+TZNAME:CET
+DTSTART:18840101T000000
+RDATE:18840101T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0100
+TZOFFSETTO:+0200
+TZNAME:CEST
+DTSTART:19410418T230000
+RDATE:19410418T230000
+RDATE:19430329T020000
+RDATE:19440403T020000
+RDATE:19450508T020000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0200
+TZOFFSETTO:+0100
+TZNAME:CET
+DTSTART:19421102T030000
+RDATE:19421102T030000
+RDATE:19431004T030000
+RDATE:19441002T030000
+RDATE:19450916T030000
+RDATE:19830925T030000
+RDATE:19840930T030000
+RDATE:19850929T030000
+RDATE:19860928T030000
+RDATE:19870927T030000
+RDATE:19880925T030000
+RDATE:19890924T030000
+RDATE:19900930T030000
+RDATE:19910929T030000
+RDATE:19920927T030000
+RDATE:19930926T030000
+RDATE:19940925T030000
+RDATE:19950924T030000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0100
+TZOFFSETTO:+0100
+TZNAME:CET
+DTSTART:19821127T000000
+RDATE:19821127T000000
+END:STANDARD
+END:VTIMEZONE
+END:VCALENDAR
Index: libkcal/libical/zoneinfo/Europe/Berlin.ics
===================================================================
--- libkcal/libical/zoneinfo/Europe/Berlin.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Europe/Berlin.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,22 +1,103 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/Europe/Berlin
+TZID:/kde.org/Olson_20070327_1/Europe/Berlin
 X-LIC-LOCATION:Europe/Berlin
 BEGIN:DAYLIGHT
 TZOFFSETFROM:+0100
 TZOFFSETTO:+0200
 TZNAME:CEST
-DTSTART:19700329T020000
+DTSTART:19810329T020000
 RRULE:FREQ=YEARLY;BYMONTH=3;BYDAY=-1SU
 END:DAYLIGHT
 BEGIN:STANDARD
 TZOFFSETFROM:+0200
 TZOFFSETTO:+0100
 TZNAME:CET
-DTSTART:19701025T030000
+DTSTART:19961027T030000
 RRULE:FREQ=YEARLY;BYMONTH=10;BYDAY=-1SU
 END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+005328
+TZOFFSETTO:+0100
+TZNAME:CET
+DTSTART:18930401T000000
+RDATE:18930401T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0100
+TZOFFSETTO:+0200
+TZNAME:CEST
+DTSTART:19160430T230000
+RDATE:19160430T230000
+RDATE:19170416T020000
+RDATE:19180415T020000
+RDATE:19400401T020000
+RDATE:19430329T020000
+RDATE:19440403T020000
+RDATE:19450402T020000
+RDATE:19460414T020000
+RDATE:19470406T020000
+RDATE:19480418T020000
+RDATE:19490410T020000
+RDATE:19800406T020000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0200
+TZOFFSETTO:+0100
+TZNAME:CET
+DTSTART:19161001T010000
+RDATE:19161001T010000
+RDATE:19170917T030000
+RDATE:19180916T030000
+RDATE:19421102T030000
+RDATE:19431004T030000
+RDATE:19441002T030000
+RDATE:19451118T030000
+RDATE:19461007T030000
+RDATE:19471005T030000
+RDATE:19481003T030000
+RDATE:19491002T030000
+RDATE:19800928T030000
+RDATE:19810927T030000
+RDATE:19820926T030000
+RDATE:19830925T030000
+RDATE:19840930T030000
+RDATE:19850929T030000
+RDATE:19860928T030000
+RDATE:19870927T030000
+RDATE:19880925T030000
+RDATE:19890924T030000
+RDATE:19900930T030000
+RDATE:19910929T030000
+RDATE:19920927T030000
+RDATE:19930926T030000
+RDATE:19940925T030000
+RDATE:19950924T030000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0200
+TZOFFSETTO:+0300
+TZNAME:CEMT
+DTSTART:19450524T020000
+RDATE:19450524T020000
+RDATE:19470511T030000
+END:DAYLIGHT
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0300
+TZOFFSETTO:+0200
+TZNAME:CEST
+DTSTART:19450924T030000
+RDATE:19450924T030000
+RDATE:19470629T030000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0100
+TZOFFSETTO:+0100
+TZNAME:CET
+DTSTART:19800101T000000
+RDATE:19800101T000000
+END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Europe/Berlin.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Europe/Oslo.ics
===================================================================
--- libkcal/libical/zoneinfo/Europe/Oslo.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Europe/Oslo.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,22 +1,89 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/Europe/Oslo
+TZID:/kde.org/Olson_20070327_1/Europe/Oslo
 X-LIC-LOCATION:Europe/Oslo
 BEGIN:DAYLIGHT
 TZOFFSETFROM:+0100
 TZOFFSETTO:+0200
 TZNAME:CEST
-DTSTART:19700329T020000
+DTSTART:19810329T020000
 RRULE:FREQ=YEARLY;BYMONTH=3;BYDAY=-1SU
 END:DAYLIGHT
 BEGIN:STANDARD
 TZOFFSETFROM:+0200
 TZOFFSETTO:+0100
 TZNAME:CET
-DTSTART:19701025T030000
+DTSTART:19961027T030000
 RRULE:FREQ=YEARLY;BYMONTH=10;BYDAY=-1SU
 END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0043
+TZOFFSETTO:+0100
+TZNAME:CET
+DTSTART:18950101T000000
+RDATE:18950101T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0100
+TZOFFSETTO:+0200
+TZNAME:CEST
+DTSTART:19160522T010000
+RDATE:19160522T010000
+RDATE:19400810T230000
+RDATE:19430329T020000
+RDATE:19440403T020000
+RDATE:19450402T020000
+RDATE:19590315T020000
+RDATE:19600320T020000
+RDATE:19610319T020000
+RDATE:19620318T020000
+RDATE:19630317T020000
+RDATE:19640315T020000
+RDATE:19650425T020000
+RDATE:19800406T020000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0200
+TZOFFSETTO:+0100
+TZNAME:CET
+DTSTART:19160930T000000
+RDATE:19160930T000000
+RDATE:19421102T030000
+RDATE:19431004T030000
+RDATE:19441002T030000
+RDATE:19451001T030000
+RDATE:19590920T030000
+RDATE:19600918T030000
+RDATE:19610917T030000
+RDATE:19620916T030000
+RDATE:19630915T030000
+RDATE:19640920T030000
+RDATE:19650919T030000
+RDATE:19800928T030000
+RDATE:19810927T030000
+RDATE:19820926T030000
+RDATE:19830925T030000
+RDATE:19840930T030000
+RDATE:19850929T030000
+RDATE:19860928T030000
+RDATE:19870927T030000
+RDATE:19880925T030000
+RDATE:19890924T030000
+RDATE:19900930T030000
+RDATE:19910929T030000
+RDATE:19920927T030000
+RDATE:19930926T030000
+RDATE:19940925T030000
+RDATE:19950924T030000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0100
+TZOFFSETTO:+0100
+TZNAME:CET
+DTSTART:19800101T000000
+RDATE:19800101T000000
+END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Europe/Oslo.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Europe/Dublin.ics
===================================================================
--- libkcal/libical/zoneinfo/Europe/Dublin.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Europe/Dublin.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,22 +1,201 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/Europe/Dublin
+TZID:/kde.org/Olson_20070327_1/Europe/Dublin
 X-LIC-LOCATION:Europe/Dublin
 BEGIN:DAYLIGHT
 TZOFFSETFROM:+0000
 TZOFFSETTO:+0100
 TZNAME:IST
-DTSTART:19700329T010000
+DTSTART:19810329T010000
 RRULE:FREQ=YEARLY;BYMONTH=3;BYDAY=-1SU
 END:DAYLIGHT
 BEGIN:STANDARD
 TZOFFSETFROM:+0100
 TZOFFSETTO:+0000
 TZNAME:GMT
-DTSTART:19701025T020000
+DTSTART:19961027T020000
 RRULE:FREQ=YEARLY;BYMONTH=10;BYDAY=-1SU
 END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-0025
+TZOFFSETTO:-002521
+TZNAME:DMT
+DTSTART:18800802T000000
+RDATE:18800802T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-002521
+TZOFFSETTO:+003439
+TZNAME:IST
+DTSTART:19160521T020000
+RDATE:19160521T020000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+003439
+TZOFFSETTO:+0000
+TZNAME:GMT
+DTSTART:19161001T030000
+RDATE:19161001T030000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0000
+TZOFFSETTO:+0100
+TZNAME:BST
+DTSTART:19170408T020000
+RDATE:19170408T020000
+RDATE:19180324T020000
+RDATE:19190330T020000
+RDATE:19200328T020000
+RDATE:19210403T020000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0100
+TZOFFSETTO:+0000
+TZNAME:GMT
+DTSTART:19170917T030000
+RDATE:19170917T030000
+RDATE:19180930T030000
+RDATE:19190929T030000
+RDATE:19201025T030000
+RDATE:19211003T030000
+RDATE:19221008T030000
+RDATE:19230916T030000
+RDATE:19240921T030000
+RDATE:19251004T030000
+RDATE:19261003T030000
+RDATE:19271002T030000
+RDATE:19281007T030000
+RDATE:19291006T030000
+RDATE:19301005T030000
+RDATE:19311004T030000
+RDATE:19321002T030000
+RDATE:19331008T030000
+RDATE:19341007T030000
+RDATE:19351006T030000
+RDATE:19361004T030000
+RDATE:19371003T030000
+RDATE:19381002T030000
+RDATE:19391119T030000
+RDATE:19461006T020000
+RDATE:19471102T020000
+RDATE:19481031T030000
+RDATE:19491030T030000
+RDATE:19501022T030000
+RDATE:19511021T030000
+RDATE:19521026T030000
+RDATE:19531004T030000
+RDATE:19541003T030000
+RDATE:19551002T030000
+RDATE:19561007T030000
+RDATE:19571006T030000
+RDATE:19581005T030000
+RDATE:19591004T030000
+RDATE:19601002T030000
+RDATE:19611029T030000
+RDATE:19621028T030000
+RDATE:19631027T030000
+RDATE:19641025T030000
+RDATE:19651024T030000
+RDATE:19661023T030000
+RDATE:19671029T030000
+RDATE:19711031T030000
+RDATE:19721029T030000
+RDATE:19731028T030000
+RDATE:19741027T030000
+RDATE:19751026T030000
+RDATE:19761024T030000
+RDATE:19771023T030000
+RDATE:19781029T030000
+RDATE:19791028T030000
+RDATE:19801026T030000
+RDATE:19811025T020000
+RDATE:19821024T020000
+RDATE:19831023T020000
+RDATE:19841028T020000
+RDATE:19851027T020000
+RDATE:19861026T020000
+RDATE:19871025T020000
+RDATE:19881023T020000
+RDATE:19891029T020000
+RDATE:19901028T020000
+RDATE:19911027T020000
+RDATE:19921025T020000
+RDATE:19931024T020000
+RDATE:19941023T020000
+RDATE:19951022T020000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0000
+TZOFFSETTO:+0000
+TZNAME:GMT
+DTSTART:19211206T000000
+RDATE:19211206T000000
+RDATE:19960101T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0000
+TZOFFSETTO:+0100
+TZNAME:IST
+DTSTART:19220326T020000
+RDATE:19220326T020000
+RDATE:19230422T020000
+RDATE:19240413T020000
+RDATE:19250419T020000
+RDATE:19260418T020000
+RDATE:19270410T020000
+RDATE:19280422T020000
+RDATE:19290421T020000
+RDATE:19300413T020000
+RDATE:19310419T020000
+RDATE:19320417T020000
+RDATE:19330409T020000
+RDATE:19340422T020000
+RDATE:19350414T020000
+RDATE:19360419T020000
+RDATE:19370418T020000
+RDATE:19380410T020000
+RDATE:19390416T020000
+RDATE:19400225T020000
+RDATE:19470316T020000
+RDATE:19480418T020000
+RDATE:19490403T020000
+RDATE:19500416T020000
+RDATE:19510415T020000
+RDATE:19520420T020000
+RDATE:19530419T020000
+RDATE:19540411T020000
+RDATE:19550417T020000
+RDATE:19560422T020000
+RDATE:19570414T020000
+RDATE:19580420T020000
+RDATE:19590419T020000
+RDATE:19600410T020000
+RDATE:19610326T020000
+RDATE:19620325T020000
+RDATE:19630331T020000
+RDATE:19640322T020000
+RDATE:19650321T020000
+RDATE:19660320T020000
+RDATE:19670319T020000
+RDATE:19680218T020000
+RDATE:19720319T020000
+RDATE:19730318T020000
+RDATE:19740317T020000
+RDATE:19750316T020000
+RDATE:19760321T020000
+RDATE:19770320T020000
+RDATE:19780319T020000
+RDATE:19790318T020000
+RDATE:19800316T020000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0100
+TZOFFSETTO:+0100
+TZNAME:IST
+DTSTART:19681027T000000
+RDATE:19681027T000000
+END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Europe/Dublin.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Europe/Paris.ics
===================================================================
--- libkcal/libical/zoneinfo/Europe/Paris.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Europe/Paris.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,22 +1,168 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/Europe/Paris
+TZID:/kde.org/Olson_20070327_1/Europe/Paris
 X-LIC-LOCATION:Europe/Paris
 BEGIN:DAYLIGHT
 TZOFFSETFROM:+0100
 TZOFFSETTO:+0200
 TZNAME:CEST
-DTSTART:19700329T020000
+DTSTART:19810329T020000
 RRULE:FREQ=YEARLY;BYMONTH=3;BYDAY=-1SU
 END:DAYLIGHT
 BEGIN:STANDARD
 TZOFFSETFROM:+0200
 TZOFFSETTO:+0100
 TZNAME:CET
-DTSTART:19701025T030000
+DTSTART:19961027T030000
 RRULE:FREQ=YEARLY;BYMONTH=10;BYDAY=-1SU
 END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+000921
+TZOFFSETTO:+000921
+TZNAME:PMT
+DTSTART:18910315T000100
+RDATE:18910315T000100
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+000921
+TZOFFSETTO:+0000
+TZNAME:WET
+DTSTART:19110311T000100
+RDATE:19110311T000100
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0000
+TZOFFSETTO:+0100
+TZNAME:WEST
+DTSTART:19160614T230000
+RDATE:19160614T230000
+RDATE:19170324T230000
+RDATE:19180309T230000
+RDATE:19190301T230000
+RDATE:19200214T230000
+RDATE:19210314T230000
+RDATE:19220325T230000
+RDATE:19230526T230000
+RDATE:19240329T230000
+RDATE:19250404T230000
+RDATE:19260417T230000
+RDATE:19270409T230000
+RDATE:19280414T230000
+RDATE:19290420T230000
+RDATE:19300412T230000
+RDATE:19310418T230000
+RDATE:19320402T230000
+RDATE:19330325T230000
+RDATE:19340407T230000
+RDATE:19350330T230000
+RDATE:19360418T230000
+RDATE:19370403T230000
+RDATE:19380326T230000
+RDATE:19390415T230000
+RDATE:19400225T020000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0100
+TZOFFSETTO:+0000
+TZNAME:WET
+DTSTART:19161002T000000
+RDATE:19161002T000000
+RDATE:19171008T000000
+RDATE:19181007T000000
+RDATE:19191006T000000
+RDATE:19201024T000000
+RDATE:19211026T000000
+RDATE:19221008T000000
+RDATE:19231007T000000
+RDATE:19241005T000000
+RDATE:19251004T000000
+RDATE:19261003T000000
+RDATE:19271002T000000
+RDATE:19281007T000000
+RDATE:19291006T000000
+RDATE:19301005T000000
+RDATE:19311004T000000
+RDATE:19321002T000000
+RDATE:19331008T000000
+RDATE:19341007T000000
+RDATE:19351006T000000
+RDATE:19361004T000000
+RDATE:19371003T000000
+RDATE:19381002T000000
+RDATE:19391119T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0100
+TZOFFSETTO:+0200
+TZNAME:CEST
+DTSTART:19400614T230000
+RDATE:19400614T230000
+RDATE:19430329T020000
+RDATE:19440403T020000
+RDATE:19760328T010000
+RDATE:19770403T020000
+RDATE:19780402T020000
+RDATE:19790401T020000
+RDATE:19800406T020000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0200
+TZOFFSETTO:+0100
+TZNAME:CET
+DTSTART:19421102T030000
+RDATE:19421102T030000
+RDATE:19431004T030000
+RDATE:19450916T030000
+RDATE:19760926T010000
+RDATE:19770925T030000
+RDATE:19781001T030000
+RDATE:19790930T030000
+RDATE:19800928T030000
+RDATE:19810927T030000
+RDATE:19820926T030000
+RDATE:19830925T030000
+RDATE:19840930T030000
+RDATE:19850929T030000
+RDATE:19860928T030000
+RDATE:19870927T030000
+RDATE:19880925T030000
+RDATE:19890924T030000
+RDATE:19900930T030000
+RDATE:19910929T030000
+RDATE:19920927T030000
+RDATE:19930926T030000
+RDATE:19940925T030000
+RDATE:19950924T030000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0200
+TZOFFSETTO:+0200
+TZNAME:WEMT
+DTSTART:19440825T000000
+RDATE:19440825T000000
+END:DAYLIGHT
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0200
+TZOFFSETTO:+0100
+TZNAME:WEST
+DTSTART:19441008T010000
+RDATE:19441008T010000
+END:DAYLIGHT
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0100
+TZOFFSETTO:+0200
+TZNAME:WEMT
+DTSTART:19450402T020000
+RDATE:19450402T020000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0100
+TZOFFSETTO:+0100
+TZNAME:CET
+DTSTART:19770101T000000
+RDATE:19770101T000000
+END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Europe/Paris.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Europe/Simferopol.ics
===================================================================
--- libkcal/libical/zoneinfo/Europe/Simferopol.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Europe/Simferopol.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,22 +1,150 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/Europe/Simferopol
+TZID:/kde.org/Olson_20070327_1/Europe/Simferopol
 X-LIC-LOCATION:Europe/Simferopol
 BEGIN:STANDARD
 TZOFFSETFROM:+0300
 TZOFFSETTO:+0200
 TZNAME:EET
-DTSTART:19701025T040000
+DTSTART:19971026T040000
 RRULE:FREQ=YEARLY;BYMONTH=10;BYDAY=-1SU
 END:STANDARD
 BEGIN:DAYLIGHT
 TZOFFSETFROM:+0200
 TZOFFSETTO:+0300
 TZNAME:EEST
-DTSTART:19700329T030000
+DTSTART:19980329T030000
 RRULE:FREQ=YEARLY;BYMONTH=3;BYDAY=-1SU
 END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+021624
+TZOFFSETTO:+0216
+TZNAME:SMT
+DTSTART:18800101T000000
+RDATE:18800101T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0216
+TZOFFSETTO:+0200
+TZNAME:EET
+DTSTART:19240502T000000
+RDATE:19240502T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0200
+TZOFFSETTO:+0300
+TZNAME:MSK
+DTSTART:19300621T000000
+RDATE:19300621T000000
+RDATE:19440413T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0300
+TZOFFSETTO:+0200
+TZNAME:CEST
+DTSTART:19411101T000000
+RDATE:19411101T000000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0200
+TZOFFSETTO:+0100
+TZNAME:CET
+DTSTART:19421102T030000
+RDATE:19421102T030000
+RDATE:19431004T030000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0100
+TZOFFSETTO:+0200
+TZNAME:CEST
+DTSTART:19430329T020000
+RDATE:19430329T020000
+RDATE:19440403T020000
+END:DAYLIGHT
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0300
+TZOFFSETTO:+0400
+TZNAME:MSD
+DTSTART:19810401T000000
+RDATE:19810401T000000
+RDATE:19820401T000000
+RDATE:19830401T000000
+RDATE:19840401T000000
+RDATE:19850331T020000
+RDATE:19860330T020000
+RDATE:19870329T020000
+RDATE:19880327T020000
+RDATE:19890326T020000
+RDATE:19940501T000000
+RDATE:19950326T000000
+RDATE:19960331T000000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0400
+TZOFFSETTO:+0300
+TZNAME:MSK
+DTSTART:19811001T000000
+RDATE:19811001T000000
+RDATE:19821001T000000
+RDATE:19831001T000000
+RDATE:19840930T030000
+RDATE:19850929T030000
+RDATE:19860928T030000
+RDATE:19870927T030000
+RDATE:19880925T030000
+RDATE:19890924T030000
+RDATE:19940925T000000
+RDATE:19950924T000000
+RDATE:19961027T040000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0300
+TZOFFSETTO:+0300
+TZNAME:MSK
+DTSTART:19900101T000000
+RDATE:19900101T000000
+RDATE:19970101T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0300
+TZOFFSETTO:+0200
+TZNAME:EET
+DTSTART:19900701T020000
+RDATE:19900701T020000
+RDATE:19920927T000000
+RDATE:19930926T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0200
+TZOFFSETTO:+0200
+TZNAME:EET
+DTSTART:19920101T000000
+RDATE:19920101T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0200
+TZOFFSETTO:+0300
+TZNAME:EEST
+DTSTART:19920329T000000
+RDATE:19920329T000000
+RDATE:19930328T000000
+RDATE:19940327T000000
+END:DAYLIGHT
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0400
+TZOFFSETTO:+0400
+TZNAME:MSD
+DTSTART:19960331T040000
+RDATE:19960331T040000
+END:DAYLIGHT
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0300
+TZOFFSETTO:+0300
+TZNAME:EEST
+DTSTART:19970330T040000
+RDATE:19970330T040000
+END:DAYLIGHT
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Europe/Simferopol.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Europe/Vienna.ics
===================================================================
--- libkcal/libical/zoneinfo/Europe/Vienna.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Europe/Vienna.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,22 +1,89 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/Europe/Vienna
+TZID:/kde.org/Olson_20070327_1/Europe/Vienna
 X-LIC-LOCATION:Europe/Vienna
 BEGIN:DAYLIGHT
 TZOFFSETFROM:+0100
 TZOFFSETTO:+0200
 TZNAME:CEST
-DTSTART:19700329T020000
+DTSTART:19810329T020000
 RRULE:FREQ=YEARLY;BYMONTH=3;BYDAY=-1SU
 END:DAYLIGHT
 BEGIN:STANDARD
 TZOFFSETFROM:+0200
 TZOFFSETTO:+0100
 TZNAME:CET
-DTSTART:19701025T030000
+DTSTART:19961027T030000
 RRULE:FREQ=YEARLY;BYMONTH=10;BYDAY=-1SU
 END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+010520
+TZOFFSETTO:+0100
+TZNAME:CET
+DTSTART:18930401T000000
+RDATE:18930401T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0100
+TZOFFSETTO:+0200
+TZNAME:CEST
+DTSTART:19160430T230000
+RDATE:19160430T230000
+RDATE:19170416T020000
+RDATE:19180415T020000
+RDATE:19200405T020000
+RDATE:19400401T020000
+RDATE:19430329T020000
+RDATE:19440403T020000
+RDATE:19450402T020000
+RDATE:19460414T020000
+RDATE:19470406T020000
+RDATE:19480418T020000
+RDATE:19800406T000000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0200
+TZOFFSETTO:+0100
+TZNAME:CET
+DTSTART:19161001T010000
+RDATE:19161001T010000
+RDATE:19170917T030000
+RDATE:19180916T030000
+RDATE:19200913T030000
+RDATE:19421102T030000
+RDATE:19431004T030000
+RDATE:19441002T030000
+RDATE:19450412T030000
+RDATE:19461006T030000
+RDATE:19471005T030000
+RDATE:19481003T030000
+RDATE:19800928T000000
+RDATE:19810927T030000
+RDATE:19820926T030000
+RDATE:19830925T030000
+RDATE:19840930T030000
+RDATE:19850929T030000
+RDATE:19860928T030000
+RDATE:19870927T030000
+RDATE:19880925T030000
+RDATE:19890924T030000
+RDATE:19900930T030000
+RDATE:19910929T030000
+RDATE:19920927T030000
+RDATE:19930926T030000
+RDATE:19940925T030000
+RDATE:19950924T030000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0100
+TZOFFSETTO:+0100
+TZNAME:CET
+DTSTART:19200101T000000
+RDATE:19200101T000000
+RDATE:19460101T000000
+RDATE:19810101T000000
+END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Europe/Vienna.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Europe/Minsk.ics
===================================================================
--- libkcal/libical/zoneinfo/Europe/Minsk.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Europe/Minsk.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,22 +1,129 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/Europe/Minsk
+TZID:/kde.org/Olson_20070327_1/Europe/Minsk
 X-LIC-LOCATION:Europe/Minsk
 BEGIN:DAYLIGHT
 TZOFFSETFROM:+0200
 TZOFFSETTO:+0300
 TZNAME:EEST
-DTSTART:19700329T020000
+DTSTART:19930328T020000
 RRULE:FREQ=YEARLY;BYMONTH=3;BYDAY=-1SU
 END:DAYLIGHT
 BEGIN:STANDARD
 TZOFFSETFROM:+0300
 TZOFFSETTO:+0200
 TZNAME:EET
-DTSTART:19701025T030000
+DTSTART:19961027T030000
 RRULE:FREQ=YEARLY;BYMONTH=10;BYDAY=-1SU
 END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+015016
+TZOFFSETTO:+0150
+TZNAME:MMT
+DTSTART:18800101T000000
+RDATE:18800101T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0150
+TZOFFSETTO:+0200
+TZNAME:EET
+DTSTART:19240502T000000
+RDATE:19240502T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0200
+TZOFFSETTO:+0300
+TZNAME:MSK
+DTSTART:19300621T000000
+RDATE:19300621T000000
+RDATE:19440703T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0300
+TZOFFSETTO:+0200
+TZNAME:CEST
+DTSTART:19410628T000000
+RDATE:19410628T000000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0200
+TZOFFSETTO:+0100
+TZNAME:CET
+DTSTART:19421102T030000
+RDATE:19421102T030000
+RDATE:19431004T030000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0100
+TZOFFSETTO:+0200
+TZNAME:CEST
+DTSTART:19430329T020000
+RDATE:19430329T020000
+RDATE:19440403T020000
+END:DAYLIGHT
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0300
+TZOFFSETTO:+0400
+TZNAME:MSD
+DTSTART:19810401T000000
+RDATE:19810401T000000
+RDATE:19820401T000000
+RDATE:19830401T000000
+RDATE:19840401T000000
+RDATE:19850331T020000
+RDATE:19860330T020000
+RDATE:19870329T020000
+RDATE:19880327T020000
+RDATE:19890326T020000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0400
+TZOFFSETTO:+0300
+TZNAME:MSK
+DTSTART:19811001T000000
+RDATE:19811001T000000
+RDATE:19821001T000000
+RDATE:19831001T000000
+RDATE:19840930T030000
+RDATE:19850929T030000
+RDATE:19860928T030000
+RDATE:19870927T030000
+RDATE:19880925T030000
+RDATE:19890924T030000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0300
+TZOFFSETTO:+0300
+TZNAME:MSK
+DTSTART:19900101T000000
+RDATE:19900101T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0300
+TZOFFSETTO:+0300
+TZNAME:EEST
+DTSTART:19910331T020000
+RDATE:19910331T020000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0300
+TZOFFSETTO:+0200
+TZNAME:EET
+DTSTART:19910929T030000
+RDATE:19910929T030000
+RDATE:19920927T010000
+RDATE:19930926T030000
+RDATE:19940925T030000
+RDATE:19950924T030000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0200
+TZOFFSETTO:+0300
+TZNAME:EEST
+DTSTART:19920329T000000
+RDATE:19920329T000000
+END:DAYLIGHT
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Europe/Minsk.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Europe/Istanbul.ics
===================================================================
--- libkcal/libical/zoneinfo/Europe/Istanbul.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Europe/Istanbul.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,22 +1,187 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/Europe/Istanbul
+TZID:/kde.org/Olson_20070327_1/Europe/Istanbul
 X-LIC-LOCATION:Europe/Istanbul
 BEGIN:DAYLIGHT
 TZOFFSETFROM:+0200
 TZOFFSETTO:+0300
 TZNAME:EEST
-DTSTART:19700329T030000
+DTSTART:20070325T030000
 RRULE:FREQ=YEARLY;BYMONTH=3;BYDAY=-1SU
 END:DAYLIGHT
 BEGIN:STANDARD
 TZOFFSETFROM:+0300
 TZOFFSETTO:+0200
 TZNAME:EET
-DTSTART:19701025T040000
+DTSTART:20071028T040000
 RRULE:FREQ=YEARLY;BYMONTH=10;BYDAY=-1SU
 END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+015552
+TZOFFSETTO:+015656
+TZNAME:IMT
+DTSTART:18800101T000000
+RDATE:18800101T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+015656
+TZOFFSETTO:+0200
+TZNAME:EET
+DTSTART:19101001T000000
+RDATE:19101001T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0200
+TZOFFSETTO:+0300
+TZNAME:EEST
+DTSTART:19160501T000000
+RDATE:19160501T000000
+RDATE:19200328T000000
+RDATE:19210403T000000
+RDATE:19220326T000000
+RDATE:19240513T000000
+RDATE:19250501T000000
+RDATE:19400630T000000
+RDATE:19401201T000000
+RDATE:19420401T000000
+RDATE:19450402T000000
+RDATE:19460601T000000
+RDATE:19470420T000000
+RDATE:19480418T000000
+RDATE:19490410T000000
+RDATE:19500419T000000
+RDATE:19510422T000000
+RDATE:19620715T000000
+RDATE:19640515T000000
+RDATE:19700503T000000
+RDATE:19710502T000000
+RDATE:19720507T000000
+RDATE:19730603T010000
+RDATE:19740331T020000
+RDATE:19750330T000000
+RDATE:19760601T000000
+RDATE:19770403T000000
+RDATE:19780402T000000
+RDATE:19860330T020000
+RDATE:19870329T020000
+RDATE:19880327T020000
+RDATE:19890326T020000
+RDATE:19900325T020000
+RDATE:19910331T010000
+RDATE:19920329T010000
+RDATE:19930328T010000
+RDATE:19940327T010000
+RDATE:19950326T010000
+RDATE:19960331T010000
+RDATE:19970330T010000
+RDATE:19980329T010000
+RDATE:19990328T010000
+RDATE:20000326T010000
+RDATE:20010325T010000
+RDATE:20020331T010000
+RDATE:20030330T010000
+RDATE:20040328T010000
+RDATE:20050327T010000
+RDATE:20060326T010000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0300
+TZOFFSETTO:+0200
+TZNAME:EET
+DTSTART:19161001T000000
+RDATE:19161001T000000
+RDATE:19201025T000000
+RDATE:19211003T000000
+RDATE:19221008T000000
+RDATE:19241001T000000
+RDATE:19251001T000000
+RDATE:19401005T000000
+RDATE:19410921T000000
+RDATE:19421101T000000
+RDATE:19451008T000000
+RDATE:19461001T000000
+RDATE:19471005T000000
+RDATE:19481003T000000
+RDATE:19491002T000000
+RDATE:19501008T000000
+RDATE:19511008T000000
+RDATE:19621008T000000
+RDATE:19641001T000000
+RDATE:19701004T000000
+RDATE:19711003T000000
+RDATE:19721008T000000
+RDATE:19731104T030000
+RDATE:19741103T050000
+RDATE:19751026T000000
+RDATE:19761031T000000
+RDATE:19771016T000000
+RDATE:19850928T000000
+RDATE:19860928T030000
+RDATE:19870927T030000
+RDATE:19880925T030000
+RDATE:19890924T030000
+RDATE:19900930T030000
+RDATE:19910929T020000
+RDATE:19920927T020000
+RDATE:19930926T020000
+RDATE:19940925T020000
+RDATE:19950924T020000
+RDATE:19961027T020000
+RDATE:19971026T020000
+RDATE:19981025T020000
+RDATE:19991031T020000
+RDATE:20001029T020000
+RDATE:20011028T020000
+RDATE:20021027T020000
+RDATE:20031026T020000
+RDATE:20041031T020000
+RDATE:20051030T020000
+RDATE:20061029T020000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0300
+TZOFFSETTO:+0400
+TZNAME:TRST
+DTSTART:19781015T000000
+RDATE:19781015T000000
+RDATE:19800406T030000
+RDATE:19810329T030000
+RDATE:19820328T030000
+RDATE:19830731T000000
+END:DAYLIGHT
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0400
+TZOFFSETTO:+0400
+TZNAME:TRST
+DTSTART:19790401T030000
+RDATE:19790401T030000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0400
+TZOFFSETTO:+0300
+TZNAME:TRT
+DTSTART:19791015T000000
+RDATE:19791015T000000
+RDATE:19801013T000000
+RDATE:19811012T000000
+RDATE:19821011T000000
+RDATE:19831002T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0300
+TZOFFSETTO:+0300
+TZNAME:EEST
+DTSTART:19850420T000000
+RDATE:19850420T000000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0200
+TZOFFSETTO:+0200
+TZNAME:EET
+DTSTART:20070101T000000
+RDATE:20070101T000000
+END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Europe/Istanbul.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Europe/Athens.ics
===================================================================
--- libkcal/libical/zoneinfo/Europe/Athens.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Europe/Athens.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,22 +1,116 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/Europe/Athens
+TZID:/kde.org/Olson_20070327_1/Europe/Athens
 X-LIC-LOCATION:Europe/Athens
 BEGIN:DAYLIGHT
 TZOFFSETFROM:+0200
 TZOFFSETTO:+0300
 TZNAME:EEST
-DTSTART:19700329T030000
+DTSTART:19810329T030000
 RRULE:FREQ=YEARLY;BYMONTH=3;BYDAY=-1SU
 END:DAYLIGHT
 BEGIN:STANDARD
 TZOFFSETFROM:+0300
 TZOFFSETTO:+0200
 TZNAME:EET
-DTSTART:19701025T040000
+DTSTART:19961027T040000
 RRULE:FREQ=YEARLY;BYMONTH=10;BYDAY=-1SU
 END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+013452
+TZOFFSETTO:+013452
+TZNAME:AMT
+DTSTART:18950914T000000
+RDATE:18950914T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+013452
+TZOFFSETTO:+0200
+TZNAME:EET
+DTSTART:19160728T000100
+RDATE:19160728T000100
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0200
+TZOFFSETTO:+0300
+TZNAME:EEST
+DTSTART:19320707T000000
+RDATE:19320707T000000
+RDATE:19410407T000000
+RDATE:19520701T000000
+RDATE:19750412T000000
+RDATE:19760411T020000
+RDATE:19770403T020000
+RDATE:19780402T020000
+RDATE:19790401T090000
+RDATE:19800401T000000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0300
+TZOFFSETTO:+0200
+TZNAME:EET
+DTSTART:19320901T000000
+RDATE:19320901T000000
+RDATE:19521102T000000
+RDATE:19751126T010000
+RDATE:19761010T030000
+RDATE:19770926T030000
+RDATE:19780924T040000
+RDATE:19790929T020000
+RDATE:19800928T000000
+RDATE:19810927T040000
+RDATE:19820926T040000
+RDATE:19830925T040000
+RDATE:19840930T040000
+RDATE:19850929T040000
+RDATE:19860928T040000
+RDATE:19870927T040000
+RDATE:19880925T040000
+RDATE:19890924T040000
+RDATE:19900930T040000
+RDATE:19910929T040000
+RDATE:19920927T040000
+RDATE:19930926T040000
+RDATE:19940925T040000
+RDATE:19950924T040000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0300
+TZOFFSETTO:+0200
+TZNAME:CEST
+DTSTART:19410430T000000
+RDATE:19410430T000000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0200
+TZOFFSETTO:+0100
+TZNAME:CET
+DTSTART:19421102T030000
+RDATE:19421102T030000
+RDATE:19431004T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0100
+TZOFFSETTO:+0200
+TZNAME:CEST
+DTSTART:19430330T000000
+RDATE:19430330T000000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0100
+TZOFFSETTO:+0200
+TZNAME:EET
+DTSTART:19440404T000000
+RDATE:19440404T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0200
+TZOFFSETTO:+0200
+TZNAME:EET
+DTSTART:19810101T000000
+RDATE:19810101T000000
+END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Europe/Athens.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Europe/Kaliningrad.ics
===================================================================
--- libkcal/libical/zoneinfo/Europe/Kaliningrad.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Europe/Kaliningrad.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,22 +1,138 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/Europe/Kaliningrad
+TZID:/kde.org/Olson_20070327_1/Europe/Kaliningrad
 X-LIC-LOCATION:Europe/Kaliningrad
 BEGIN:DAYLIGHT
 TZOFFSETFROM:+0200
 TZOFFSETTO:+0300
 TZNAME:EEST
-DTSTART:19700329T020000
+DTSTART:19930328T020000
 RRULE:FREQ=YEARLY;BYMONTH=3;BYDAY=-1SU
 END:DAYLIGHT
 BEGIN:STANDARD
 TZOFFSETFROM:+0300
 TZOFFSETTO:+0200
 TZNAME:EET
-DTSTART:19701025T030000
+DTSTART:19961027T030000
 RRULE:FREQ=YEARLY;BYMONTH=10;BYDAY=-1SU
 END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0122
+TZOFFSETTO:+0100
+TZNAME:CET
+DTSTART:18930401T000000
+RDATE:18930401T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0100
+TZOFFSETTO:+0200
+TZNAME:CEST
+DTSTART:19160430T230000
+RDATE:19160430T230000
+RDATE:19170416T020000
+RDATE:19180415T020000
+RDATE:19400401T020000
+RDATE:19430329T020000
+RDATE:19440403T020000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0200
+TZOFFSETTO:+0100
+TZNAME:CET
+DTSTART:19161001T010000
+RDATE:19161001T010000
+RDATE:19170917T030000
+RDATE:19180916T030000
+RDATE:19421102T030000
+RDATE:19431004T030000
+RDATE:19441002T030000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0100
+TZOFFSETTO:+0200
+TZNAME:CET
+DTSTART:19450101T000000
+RDATE:19450101T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0200
+TZOFFSETTO:+0300
+TZNAME:CEST
+DTSTART:19450429T000000
+RDATE:19450429T000000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0300
+TZOFFSETTO:+0200
+TZNAME:CET
+DTSTART:19451101T000000
+RDATE:19451101T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0200
+TZOFFSETTO:+0300
+TZNAME:MSK
+DTSTART:19460101T000000
+RDATE:19460101T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0300
+TZOFFSETTO:+0400
+TZNAME:MSD
+DTSTART:19810401T000000
+RDATE:19810401T000000
+RDATE:19820401T000000
+RDATE:19830401T000000
+RDATE:19840401T000000
+RDATE:19850331T020000
+RDATE:19860330T020000
+RDATE:19870329T020000
+RDATE:19880327T020000
+RDATE:19890326T020000
+RDATE:19900325T020000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0400
+TZOFFSETTO:+0300
+TZNAME:MSK
+DTSTART:19811001T000000
+RDATE:19811001T000000
+RDATE:19821001T000000
+RDATE:19831001T000000
+RDATE:19840930T030000
+RDATE:19850929T030000
+RDATE:19860928T030000
+RDATE:19870927T030000
+RDATE:19880925T030000
+RDATE:19890924T030000
+RDATE:19900930T030000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0300
+TZOFFSETTO:+0300
+TZNAME:EEST
+DTSTART:19910331T020000
+RDATE:19910331T020000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0300
+TZOFFSETTO:+0200
+TZNAME:EET
+DTSTART:19910929T030000
+RDATE:19910929T030000
+RDATE:19920926T230000
+RDATE:19930926T030000
+RDATE:19940925T030000
+RDATE:19950924T030000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0200
+TZOFFSETTO:+0300
+TZNAME:EEST
+DTSTART:19920328T230000
+RDATE:19920328T230000
+END:DAYLIGHT
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Europe/Kaliningrad.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Europe/Bratislava.ics
===================================================================
--- libkcal/libical/zoneinfo/Europe/Bratislava.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Europe/Bratislava.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,22 +1,96 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/Europe/Bratislava
+TZID:/kde.org/Olson_20070327_1/Europe/Bratislava
 X-LIC-LOCATION:Europe/Bratislava
 BEGIN:DAYLIGHT
 TZOFFSETFROM:+0100
 TZOFFSETTO:+0200
 TZNAME:CEST
-DTSTART:19700329T020000
+DTSTART:19810329T020000
 RRULE:FREQ=YEARLY;BYMONTH=3;BYDAY=-1SU
 END:DAYLIGHT
 BEGIN:STANDARD
 TZOFFSETFROM:+0200
 TZOFFSETTO:+0100
 TZNAME:CET
-DTSTART:19701025T030000
+DTSTART:19961027T030000
 RRULE:FREQ=YEARLY;BYMONTH=10;BYDAY=-1SU
 END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+005744
+TZOFFSETTO:+005744
+TZNAME:PMT
+DTSTART:18500101T000000
+RDATE:18500101T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+005744
+TZOFFSETTO:+0100
+TZNAME:CET
+DTSTART:18911001T000000
+RDATE:18911001T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0100
+TZOFFSETTO:+0200
+TZNAME:CEST
+DTSTART:19160430T230000
+RDATE:19160430T230000
+RDATE:19170416T020000
+RDATE:19180415T020000
+RDATE:19400401T020000
+RDATE:19430329T020000
+RDATE:19440403T020000
+RDATE:19450408T020000
+RDATE:19460506T020000
+RDATE:19470420T020000
+RDATE:19480418T020000
+RDATE:19490409T020000
+RDATE:19790401T020000
+RDATE:19800406T020000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0200
+TZOFFSETTO:+0100
+TZNAME:CET
+DTSTART:19161001T010000
+RDATE:19161001T010000
+RDATE:19170917T030000
+RDATE:19180916T030000
+RDATE:19421102T030000
+RDATE:19431004T030000
+RDATE:19440917T030000
+RDATE:19451118T030000
+RDATE:19461006T030000
+RDATE:19471005T030000
+RDATE:19481003T030000
+RDATE:19491002T030000
+RDATE:19790930T030000
+RDATE:19800928T030000
+RDATE:19810927T030000
+RDATE:19820926T030000
+RDATE:19830925T030000
+RDATE:19840930T030000
+RDATE:19850929T030000
+RDATE:19860928T030000
+RDATE:19870927T030000
+RDATE:19880925T030000
+RDATE:19890924T030000
+RDATE:19900930T030000
+RDATE:19910929T030000
+RDATE:19920927T030000
+RDATE:19930926T030000
+RDATE:19940925T030000
+RDATE:19950924T030000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0100
+TZOFFSETTO:+0100
+TZNAME:CET
+DTSTART:19790101T000000
+RDATE:19790101T000000
+END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Europe/Bratislava.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Europe/London.ics
===================================================================
--- libkcal/libical/zoneinfo/Europe/London.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Europe/London.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,22 +1,208 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/Europe/London
+TZID:/kde.org/Olson_20070327_1/Europe/London
 X-LIC-LOCATION:Europe/London
 BEGIN:DAYLIGHT
 TZOFFSETFROM:+0000
 TZOFFSETTO:+0100
 TZNAME:BST
-DTSTART:19700329T010000
+DTSTART:19810329T010000
 RRULE:FREQ=YEARLY;BYMONTH=3;BYDAY=-1SU
 END:DAYLIGHT
 BEGIN:STANDARD
 TZOFFSETFROM:+0100
 TZOFFSETTO:+0000
 TZNAME:GMT
-DTSTART:19701025T020000
+DTSTART:19961027T020000
 RRULE:FREQ=YEARLY;BYMONTH=10;BYDAY=-1SU
 END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-000115
+TZOFFSETTO:+0000
+TZNAME:GMT
+DTSTART:18471201T000000
+RDATE:18471201T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0000
+TZOFFSETTO:+0100
+TZNAME:BST
+DTSTART:19160521T020000
+RDATE:19160521T020000
+RDATE:19170408T020000
+RDATE:19180324T020000
+RDATE:19190330T020000
+RDATE:19200328T020000
+RDATE:19210403T020000
+RDATE:19220326T020000
+RDATE:19230422T020000
+RDATE:19240413T020000
+RDATE:19250419T020000
+RDATE:19260418T020000
+RDATE:19270410T020000
+RDATE:19280422T020000
+RDATE:19290421T020000
+RDATE:19300413T020000
+RDATE:19310419T020000
+RDATE:19320417T020000
+RDATE:19330409T020000
+RDATE:19340422T020000
+RDATE:19350414T020000
+RDATE:19360419T020000
+RDATE:19370418T020000
+RDATE:19380410T020000
+RDATE:19390416T020000
+RDATE:19400225T020000
+RDATE:19460414T020000
+RDATE:19470316T020000
+RDATE:19480314T020000
+RDATE:19490403T020000
+RDATE:19500416T020000
+RDATE:19510415T020000
+RDATE:19520420T020000
+RDATE:19530419T020000
+RDATE:19540411T020000
+RDATE:19550417T020000
+RDATE:19560422T020000
+RDATE:19570414T020000
+RDATE:19580420T020000
+RDATE:19590419T020000
+RDATE:19600410T020000
+RDATE:19610326T020000
+RDATE:19620325T020000
+RDATE:19630331T020000
+RDATE:19640322T020000
+RDATE:19650321T020000
+RDATE:19660320T020000
+RDATE:19670319T020000
+RDATE:19680218T020000
+RDATE:19720319T020000
+RDATE:19730318T020000
+RDATE:19740317T020000
+RDATE:19750316T020000
+RDATE:19760321T020000
+RDATE:19770320T020000
+RDATE:19780319T020000
+RDATE:19790318T020000
+RDATE:19800316T020000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0100
+TZOFFSETTO:+0000
+TZNAME:GMT
+DTSTART:19161001T030000
+RDATE:19161001T030000
+RDATE:19170917T030000
+RDATE:19180930T030000
+RDATE:19190929T030000
+RDATE:19201025T030000
+RDATE:19211003T030000
+RDATE:19221008T030000
+RDATE:19230916T030000
+RDATE:19240921T030000
+RDATE:19251004T030000
+RDATE:19261003T030000
+RDATE:19271002T030000
+RDATE:19281007T030000
+RDATE:19291006T030000
+RDATE:19301005T030000
+RDATE:19311004T030000
+RDATE:19321002T030000
+RDATE:19331008T030000
+RDATE:19341007T030000
+RDATE:19351006T030000
+RDATE:19361004T030000
+RDATE:19371003T030000
+RDATE:19381002T030000
+RDATE:19391119T030000
+RDATE:19451007T030000
+RDATE:19461006T030000
+RDATE:19471102T030000
+RDATE:19481031T030000
+RDATE:19491030T030000
+RDATE:19501022T030000
+RDATE:19511021T030000
+RDATE:19521026T030000
+RDATE:19531004T030000
+RDATE:19541003T030000
+RDATE:19551002T030000
+RDATE:19561007T030000
+RDATE:19571006T030000
+RDATE:19581005T030000
+RDATE:19591004T030000
+RDATE:19601002T030000
+RDATE:19611029T030000
+RDATE:19621028T030000
+RDATE:19631027T030000
+RDATE:19641025T030000
+RDATE:19651024T030000
+RDATE:19661023T030000
+RDATE:19671029T030000
+RDATE:19711031T030000
+RDATE:19721029T030000
+RDATE:19731028T030000
+RDATE:19741027T030000
+RDATE:19751026T030000
+RDATE:19761024T030000
+RDATE:19771023T030000
+RDATE:19781029T030000
+RDATE:19791028T030000
+RDATE:19801026T030000
+RDATE:19811025T020000
+RDATE:19821024T020000
+RDATE:19831023T020000
+RDATE:19841028T020000
+RDATE:19851027T020000
+RDATE:19861026T020000
+RDATE:19871025T020000
+RDATE:19881023T020000
+RDATE:19891029T020000
+RDATE:19901028T020000
+RDATE:19911027T020000
+RDATE:19921025T020000
+RDATE:19931024T020000
+RDATE:19941023T020000
+RDATE:19951022T020000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0100
+TZOFFSETTO:+0200
+TZNAME:BDST
+DTSTART:19410504T020000
+RDATE:19410504T020000
+RDATE:19420405T020000
+RDATE:19430404T020000
+RDATE:19440402T020000
+RDATE:19450402T020000
+RDATE:19470413T020000
+END:DAYLIGHT
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0200
+TZOFFSETTO:+0100
+TZNAME:BST
+DTSTART:19410810T030000
+RDATE:19410810T030000
+RDATE:19420809T030000
+RDATE:19430815T030000
+RDATE:19440917T030000
+RDATE:19450715T030000
+RDATE:19470810T030000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0100
+TZOFFSETTO:+0100
+TZNAME:BST
+DTSTART:19681027T000000
+RDATE:19681027T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0000
+TZOFFSETTO:+0000
+TZNAME:GMT
+DTSTART:19960101T000000
+RDATE:19960101T000000
+END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Europe/London.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Europe/Vaduz.ics
===================================================================
--- libkcal/libical/zoneinfo/Europe/Vaduz.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Europe/Vaduz.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,22 +1,57 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/Europe/Vaduz
+TZID:/kde.org/Olson_20070327_1/Europe/Vaduz
 X-LIC-LOCATION:Europe/Vaduz
 BEGIN:DAYLIGHT
 TZOFFSETFROM:+0100
 TZOFFSETTO:+0200
 TZNAME:CEST
-DTSTART:19700329T020000
+DTSTART:19810329T020000
 RRULE:FREQ=YEARLY;BYMONTH=3;BYDAY=-1SU
 END:DAYLIGHT
 BEGIN:STANDARD
 TZOFFSETFROM:+0200
 TZOFFSETTO:+0100
 TZNAME:CET
-DTSTART:19701025T030000
+DTSTART:19961027T030000
 RRULE:FREQ=YEARLY;BYMONTH=10;BYDAY=-1SU
 END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+003804
+TZOFFSETTO:+0100
+TZNAME:CET
+DTSTART:18940601T000000
+RDATE:18940601T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0100
+TZOFFSETTO:+0100
+TZNAME:CET
+DTSTART:19810101T000000
+RDATE:19810101T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0200
+TZOFFSETTO:+0100
+TZNAME:CET
+DTSTART:19810927T030000
+RDATE:19810927T030000
+RDATE:19820926T030000
+RDATE:19830925T030000
+RDATE:19840930T030000
+RDATE:19850929T030000
+RDATE:19860928T030000
+RDATE:19870927T030000
+RDATE:19880925T030000
+RDATE:19890924T030000
+RDATE:19900930T030000
+RDATE:19910929T030000
+RDATE:19920927T030000
+RDATE:19930926T030000
+RDATE:19940925T030000
+RDATE:19950924T030000
+END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Europe/Vaduz.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Europe/Malta.ics
===================================================================
--- libkcal/libical/zoneinfo/Europe/Malta.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Europe/Malta.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,22 +1,117 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/Europe/Malta
+TZID:/kde.org/Olson_20070327_1/Europe/Malta
 X-LIC-LOCATION:Europe/Malta
 BEGIN:DAYLIGHT
 TZOFFSETFROM:+0100
 TZOFFSETTO:+0200
 TZNAME:CEST
-DTSTART:19700329T020000
+DTSTART:19810329T020000
 RRULE:FREQ=YEARLY;BYMONTH=3;BYDAY=-1SU
 END:DAYLIGHT
 BEGIN:STANDARD
 TZOFFSETFROM:+0200
 TZOFFSETTO:+0100
 TZNAME:CET
-DTSTART:19701025T030000
+DTSTART:19961027T030000
 RRULE:FREQ=YEARLY;BYMONTH=10;BYDAY=-1SU
 END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+005804
+TZOFFSETTO:+0100
+TZNAME:CET
+DTSTART:18931102T000000
+RDATE:18931102T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0100
+TZOFFSETTO:+0200
+TZNAME:CEST
+DTSTART:19160603T000000
+RDATE:19160603T000000
+RDATE:19170401T000000
+RDATE:19180310T000000
+RDATE:19190302T000000
+RDATE:19200321T000000
+RDATE:19400615T000000
+RDATE:19430329T020000
+RDATE:19440403T020000
+RDATE:19450402T020000
+RDATE:19460317T020000
+RDATE:19470316T000000
+RDATE:19480229T020000
+RDATE:19660522T000000
+RDATE:19670528T000000
+RDATE:19680526T000000
+RDATE:19690601T000000
+RDATE:19700531T000000
+RDATE:19710523T000000
+RDATE:19720528T000000
+RDATE:19730331T000000
+RDATE:19740421T000000
+RDATE:19750420T020000
+RDATE:19760418T020000
+RDATE:19770417T020000
+RDATE:19780416T020000
+RDATE:19790415T020000
+RDATE:19800331T020000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0200
+TZOFFSETTO:+0100
+TZNAME:CET
+DTSTART:19161001T010000
+RDATE:19161001T010000
+RDATE:19170930T010000
+RDATE:19181006T010000
+RDATE:19191005T010000
+RDATE:19200919T010000
+RDATE:19421102T030000
+RDATE:19431004T030000
+RDATE:19441002T030000
+RDATE:19450915T010000
+RDATE:19461006T030000
+RDATE:19471005T010000
+RDATE:19481003T030000
+RDATE:19660925T000000
+RDATE:19670924T000000
+RDATE:19680922T000000
+RDATE:19690928T000000
+RDATE:19700927T000000
+RDATE:19710926T010000
+RDATE:19721001T000000
+RDATE:19730929T010000
+RDATE:19740916T010000
+RDATE:19750921T020000
+RDATE:19760919T020000
+RDATE:19770918T020000
+RDATE:19780917T020000
+RDATE:19790916T020000
+RDATE:19800921T020000
+RDATE:19810927T030000
+RDATE:19820926T030000
+RDATE:19830925T030000
+RDATE:19840930T030000
+RDATE:19850929T030000
+RDATE:19860928T030000
+RDATE:19870927T030000
+RDATE:19880925T030000
+RDATE:19890924T030000
+RDATE:19900930T030000
+RDATE:19910929T030000
+RDATE:19920927T030000
+RDATE:19930926T030000
+RDATE:19940925T030000
+RDATE:19950924T030000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0100
+TZOFFSETTO:+0100
+TZNAME:CET
+DTSTART:19810101T000000
+RDATE:19810101T000000
+END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Europe/Malta.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Europe/Kiev.ics
===================================================================
--- libkcal/libical/zoneinfo/Europe/Kiev.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Europe/Kiev.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,22 +1,137 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/Europe/Kiev
+TZID:/kde.org/Olson_20070327_1/Europe/Kiev
 X-LIC-LOCATION:Europe/Kiev
 BEGIN:DAYLIGHT
 TZOFFSETFROM:+0200
 TZOFFSETTO:+0300
 TZNAME:EEST
-DTSTART:19700329T030000
+DTSTART:19950326T030000
 RRULE:FREQ=YEARLY;BYMONTH=3;BYDAY=-1SU
 END:DAYLIGHT
 BEGIN:STANDARD
 TZOFFSETFROM:+0300
 TZOFFSETTO:+0200
 TZNAME:EET
-DTSTART:19701025T040000
+DTSTART:19961027T040000
 RRULE:FREQ=YEARLY;BYMONTH=10;BYDAY=-1SU
 END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+020204
+TZOFFSETTO:+020204
+TZNAME:KMT
+DTSTART:18800101T000000
+RDATE:18800101T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+020204
+TZOFFSETTO:+0200
+TZNAME:EET
+DTSTART:19240502T000000
+RDATE:19240502T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0200
+TZOFFSETTO:+0300
+TZNAME:MSK
+DTSTART:19300621T000000
+RDATE:19300621T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0300
+TZOFFSETTO:+0200
+TZNAME:CEST
+DTSTART:19410920T000000
+RDATE:19410920T000000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0200
+TZOFFSETTO:+0100
+TZNAME:CET
+DTSTART:19421102T030000
+RDATE:19421102T030000
+RDATE:19431004T030000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0100
+TZOFFSETTO:+0200
+TZNAME:CEST
+DTSTART:19430329T020000
+RDATE:19430329T020000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0100
+TZOFFSETTO:+0300
+TZNAME:MSK
+DTSTART:19431106T000000
+RDATE:19431106T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0300
+TZOFFSETTO:+0400
+TZNAME:MSD
+DTSTART:19810401T000000
+RDATE:19810401T000000
+RDATE:19820401T000000
+RDATE:19830401T000000
+RDATE:19840401T000000
+RDATE:19850331T020000
+RDATE:19860330T020000
+RDATE:19870329T020000
+RDATE:19880327T020000
+RDATE:19890326T020000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0400
+TZOFFSETTO:+0300
+TZNAME:MSK
+DTSTART:19811001T000000
+RDATE:19811001T000000
+RDATE:19821001T000000
+RDATE:19831001T000000
+RDATE:19840930T030000
+RDATE:19850929T030000
+RDATE:19860928T030000
+RDATE:19870927T030000
+RDATE:19880925T030000
+RDATE:19890924T030000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0300
+TZOFFSETTO:+0300
+TZNAME:MSK
+DTSTART:19900101T000000
+RDATE:19900101T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0300
+TZOFFSETTO:+0200
+TZNAME:EET
+DTSTART:19900701T020000
+RDATE:19900701T020000
+RDATE:19920927T000000
+RDATE:19930926T000000
+RDATE:19940925T000000
+RDATE:19950924T040000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0200
+TZOFFSETTO:+0200
+TZNAME:EET
+DTSTART:19920101T000000
+RDATE:19920101T000000
+RDATE:19950101T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0200
+TZOFFSETTO:+0300
+TZNAME:EEST
+DTSTART:19920329T000000
+RDATE:19920329T000000
+RDATE:19930328T000000
+RDATE:19940327T000000
+END:DAYLIGHT
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Europe/Kiev.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Europe/Madrid.ics
===================================================================
--- libkcal/libical/zoneinfo/Europe/Madrid.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Europe/Madrid.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,22 +1,136 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/Europe/Madrid
+TZID:/kde.org/Olson_20070327_1/Europe/Madrid
 X-LIC-LOCATION:Europe/Madrid
 BEGIN:DAYLIGHT
 TZOFFSETFROM:+0100
 TZOFFSETTO:+0200
 TZNAME:CEST
-DTSTART:19700329T020000
+DTSTART:19810329T020000
 RRULE:FREQ=YEARLY;BYMONTH=3;BYDAY=-1SU
 END:DAYLIGHT
 BEGIN:STANDARD
 TZOFFSETFROM:+0200
 TZOFFSETTO:+0100
 TZNAME:CET
-DTSTART:19701025T030000
+DTSTART:19961027T030000
 RRULE:FREQ=YEARLY;BYMONTH=10;BYDAY=-1SU
 END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-001444
+TZOFFSETTO:+0000
+TZNAME:WET
+DTSTART:19010101T000000
+RDATE:19010101T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0000
+TZOFFSETTO:+0100
+TZNAME:WEST
+DTSTART:19170505T230000
+RDATE:19170505T230000
+RDATE:19180415T230000
+RDATE:19190405T230000
+RDATE:19240416T230000
+RDATE:19260417T230000
+RDATE:19270409T230000
+RDATE:19280414T230000
+RDATE:19290420T230000
+RDATE:19370522T230000
+RDATE:19380322T230000
+RDATE:19390415T230000
+RDATE:19400316T230000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0100
+TZOFFSETTO:+0000
+TZNAME:WET
+DTSTART:19171007T000000
+RDATE:19171007T000000
+RDATE:19181007T000000
+RDATE:19191007T000000
+RDATE:19241005T000000
+RDATE:19261003T000000
+RDATE:19271002T000000
+RDATE:19281007T000000
+RDATE:19291006T000000
+RDATE:19371003T000000
+RDATE:19381002T000000
+RDATE:19391008T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0100
+TZOFFSETTO:+0200
+TZNAME:WEMT
+DTSTART:19420502T230000
+RDATE:19420502T230000
+RDATE:19430417T230000
+RDATE:19440415T230000
+RDATE:19450414T230000
+RDATE:19460413T230000
+END:DAYLIGHT
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0200
+TZOFFSETTO:+0100
+TZNAME:WEST
+DTSTART:19420902T000000
+RDATE:19420902T000000
+RDATE:19431004T000000
+RDATE:19441011T000000
+RDATE:19450930T010000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0200
+TZOFFSETTO:+0100
+TZNAME:CET
+DTSTART:19460930T000000
+RDATE:19460930T000000
+RDATE:19490930T010000
+RDATE:19741006T010000
+RDATE:19751005T010000
+RDATE:19760926T010000
+RDATE:19770925T010000
+RDATE:19781001T010000
+RDATE:19790930T030000
+RDATE:19800928T030000
+RDATE:19810927T030000
+RDATE:19820926T030000
+RDATE:19830925T030000
+RDATE:19840930T030000
+RDATE:19850929T030000
+RDATE:19860928T030000
+RDATE:19870927T030000
+RDATE:19880925T030000
+RDATE:19890924T030000
+RDATE:19900930T030000
+RDATE:19910929T030000
+RDATE:19920927T030000
+RDATE:19930926T030000
+RDATE:19940925T030000
+RDATE:19950924T030000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0100
+TZOFFSETTO:+0200
+TZNAME:CEST
+DTSTART:19490430T230000
+RDATE:19490430T230000
+RDATE:19740413T230000
+RDATE:19750419T230000
+RDATE:19760327T230000
+RDATE:19770402T230000
+RDATE:19780402T230000
+RDATE:19790401T020000
+RDATE:19800406T020000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0100
+TZOFFSETTO:+0100
+TZNAME:CET
+DTSTART:19790101T000000
+RDATE:19790101T000000
+END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Europe/Madrid.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Europe/Jersey.ics
===================================================================
--- libkcal/libical/zoneinfo/Europe/Jersey.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 0)
+++ libkcal/libical/zoneinfo/Europe/Jersey.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -0,0 +1,208 @@
+BEGIN:VCALENDAR
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
+VERSION:2.0
+BEGIN:VTIMEZONE
+TZID:/kde.org/Olson_20070327_1/Europe/Jersey
+X-LIC-LOCATION:Europe/Jersey
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0000
+TZOFFSETTO:+0100
+TZNAME:BST
+DTSTART:19810329T010000
+RRULE:FREQ=YEARLY;BYMONTH=3;BYDAY=-1SU
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0100
+TZOFFSETTO:+0000
+TZNAME:GMT
+DTSTART:19961027T020000
+RRULE:FREQ=YEARLY;BYMONTH=10;BYDAY=-1SU
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-000115
+TZOFFSETTO:+0000
+TZNAME:GMT
+DTSTART:18471201T000000
+RDATE:18471201T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0000
+TZOFFSETTO:+0100
+TZNAME:BST
+DTSTART:19160521T020000
+RDATE:19160521T020000
+RDATE:19170408T020000
+RDATE:19180324T020000
+RDATE:19190330T020000
+RDATE:19200328T020000
+RDATE:19210403T020000
+RDATE:19220326T020000
+RDATE:19230422T020000
+RDATE:19240413T020000
+RDATE:19250419T020000
+RDATE:19260418T020000
+RDATE:19270410T020000
+RDATE:19280422T020000
+RDATE:19290421T020000
+RDATE:19300413T020000
+RDATE:19310419T020000
+RDATE:19320417T020000
+RDATE:19330409T020000
+RDATE:19340422T020000
+RDATE:19350414T020000
+RDATE:19360419T020000
+RDATE:19370418T020000
+RDATE:19380410T020000
+RDATE:19390416T020000
+RDATE:19400225T020000
+RDATE:19460414T020000
+RDATE:19470316T020000
+RDATE:19480314T020000
+RDATE:19490403T020000
+RDATE:19500416T020000
+RDATE:19510415T020000
+RDATE:19520420T020000
+RDATE:19530419T020000
+RDATE:19540411T020000
+RDATE:19550417T020000
+RDATE:19560422T020000
+RDATE:19570414T020000
+RDATE:19580420T020000
+RDATE:19590419T020000
+RDATE:19600410T020000
+RDATE:19610326T020000
+RDATE:19620325T020000
+RDATE:19630331T020000
+RDATE:19640322T020000
+RDATE:19650321T020000
+RDATE:19660320T020000
+RDATE:19670319T020000
+RDATE:19680218T020000
+RDATE:19720319T020000
+RDATE:19730318T020000
+RDATE:19740317T020000
+RDATE:19750316T020000
+RDATE:19760321T020000
+RDATE:19770320T020000
+RDATE:19780319T020000
+RDATE:19790318T020000
+RDATE:19800316T020000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0100
+TZOFFSETTO:+0000
+TZNAME:GMT
+DTSTART:19161001T030000
+RDATE:19161001T030000
+RDATE:19170917T030000
+RDATE:19180930T030000
+RDATE:19190929T030000
+RDATE:19201025T030000
+RDATE:19211003T030000
+RDATE:19221008T030000
+RDATE:19230916T030000
+RDATE:19240921T030000
+RDATE:19251004T030000
+RDATE:19261003T030000
+RDATE:19271002T030000
+RDATE:19281007T030000
+RDATE:19291006T030000
+RDATE:19301005T030000
+RDATE:19311004T030000
+RDATE:19321002T030000
+RDATE:19331008T030000
+RDATE:19341007T030000
+RDATE:19351006T030000
+RDATE:19361004T030000
+RDATE:19371003T030000
+RDATE:19381002T030000
+RDATE:19391119T030000
+RDATE:19451007T030000
+RDATE:19461006T030000
+RDATE:19471102T030000
+RDATE:19481031T030000
+RDATE:19491030T030000
+RDATE:19501022T030000
+RDATE:19511021T030000
+RDATE:19521026T030000
+RDATE:19531004T030000
+RDATE:19541003T030000
+RDATE:19551002T030000
+RDATE:19561007T030000
+RDATE:19571006T030000
+RDATE:19581005T030000
+RDATE:19591004T030000
+RDATE:19601002T030000
+RDATE:19611029T030000
+RDATE:19621028T030000
+RDATE:19631027T030000
+RDATE:19641025T030000
+RDATE:19651024T030000
+RDATE:19661023T030000
+RDATE:19671029T030000
+RDATE:19711031T030000
+RDATE:19721029T030000
+RDATE:19731028T030000
+RDATE:19741027T030000
+RDATE:19751026T030000
+RDATE:19761024T030000
+RDATE:19771023T030000
+RDATE:19781029T030000
+RDATE:19791028T030000
+RDATE:19801026T030000
+RDATE:19811025T020000
+RDATE:19821024T020000
+RDATE:19831023T020000
+RDATE:19841028T020000
+RDATE:19851027T020000
+RDATE:19861026T020000
+RDATE:19871025T020000
+RDATE:19881023T020000
+RDATE:19891029T020000
+RDATE:19901028T020000
+RDATE:19911027T020000
+RDATE:19921025T020000
+RDATE:19931024T020000
+RDATE:19941023T020000
+RDATE:19951022T020000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0100
+TZOFFSETTO:+0200
+TZNAME:BDST
+DTSTART:19410504T020000
+RDATE:19410504T020000
+RDATE:19420405T020000
+RDATE:19430404T020000
+RDATE:19440402T020000
+RDATE:19450402T020000
+RDATE:19470413T020000
+END:DAYLIGHT
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0200
+TZOFFSETTO:+0100
+TZNAME:BST
+DTSTART:19410810T030000
+RDATE:19410810T030000
+RDATE:19420809T030000
+RDATE:19430815T030000
+RDATE:19440917T030000
+RDATE:19450715T030000
+RDATE:19470810T030000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0100
+TZOFFSETTO:+0100
+TZNAME:BST
+DTSTART:19681027T000000
+RDATE:19681027T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0000
+TZOFFSETTO:+0000
+TZNAME:GMT
+DTSTART:19960101T000000
+RDATE:19960101T000000
+END:STANDARD
+END:VTIMEZONE
+END:VCALENDAR
Index: libkcal/libical/zoneinfo/Europe/Ljubljana.ics
===================================================================
--- libkcal/libical/zoneinfo/Europe/Ljubljana.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Europe/Ljubljana.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,22 +1,69 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/Europe/Ljubljana
+TZID:/kde.org/Olson_20070327_1/Europe/Ljubljana
 X-LIC-LOCATION:Europe/Ljubljana
 BEGIN:DAYLIGHT
 TZOFFSETFROM:+0100
 TZOFFSETTO:+0200
 TZNAME:CEST
-DTSTART:19700329T020000
+DTSTART:19830327T020000
 RRULE:FREQ=YEARLY;BYMONTH=3;BYDAY=-1SU
 END:DAYLIGHT
 BEGIN:STANDARD
 TZOFFSETFROM:+0200
 TZOFFSETTO:+0100
 TZNAME:CET
-DTSTART:19701025T030000
+DTSTART:19961027T030000
 RRULE:FREQ=YEARLY;BYMONTH=10;BYDAY=-1SU
 END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0122
+TZOFFSETTO:+0100
+TZNAME:CET
+DTSTART:18840101T000000
+RDATE:18840101T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0100
+TZOFFSETTO:+0200
+TZNAME:CEST
+DTSTART:19410418T230000
+RDATE:19410418T230000
+RDATE:19430329T020000
+RDATE:19440403T020000
+RDATE:19450508T020000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0200
+TZOFFSETTO:+0100
+TZNAME:CET
+DTSTART:19421102T030000
+RDATE:19421102T030000
+RDATE:19431004T030000
+RDATE:19441002T030000
+RDATE:19450916T030000
+RDATE:19830925T030000
+RDATE:19840930T030000
+RDATE:19850929T030000
+RDATE:19860928T030000
+RDATE:19870927T030000
+RDATE:19880925T030000
+RDATE:19890924T030000
+RDATE:19900930T030000
+RDATE:19910929T030000
+RDATE:19920927T030000
+RDATE:19930926T030000
+RDATE:19940925T030000
+RDATE:19950924T030000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0100
+TZOFFSETTO:+0100
+TZNAME:CET
+DTSTART:19821127T000000
+RDATE:19821127T000000
+END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Europe/Ljubljana.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Europe/Brussels.ics
===================================================================
--- libkcal/libical/zoneinfo/Europe/Brussels.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Europe/Brussels.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,22 +1,164 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/Europe/Brussels
+TZID:/kde.org/Olson_20070327_1/Europe/Brussels
 X-LIC-LOCATION:Europe/Brussels
 BEGIN:DAYLIGHT
 TZOFFSETFROM:+0100
 TZOFFSETTO:+0200
 TZNAME:CEST
-DTSTART:19700329T020000
+DTSTART:19810329T020000
 RRULE:FREQ=YEARLY;BYMONTH=3;BYDAY=-1SU
 END:DAYLIGHT
 BEGIN:STANDARD
 TZOFFSETFROM:+0200
 TZOFFSETTO:+0100
 TZNAME:CET
-DTSTART:19701025T030000
+DTSTART:19961027T030000
 RRULE:FREQ=YEARLY;BYMONTH=10;BYDAY=-1SU
 END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+001730
+TZOFFSETTO:+001730
+TZNAME:BMT
+DTSTART:18800101T000000
+RDATE:18800101T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+001730
+TZOFFSETTO:+0000
+TZNAME:WET
+DTSTART:18920501T120000
+RDATE:18920501T120000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0000
+TZOFFSETTO:+0100
+TZNAME:CET
+DTSTART:19141108T000000
+RDATE:19141108T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0100
+TZOFFSETTO:+0200
+TZNAME:CEST
+DTSTART:19160501T000000
+RDATE:19160501T000000
+RDATE:19170416T020000
+RDATE:19180415T020000
+RDATE:19400520T030000
+RDATE:19430329T020000
+RDATE:19440403T020000
+RDATE:19450402T020000
+RDATE:19460519T020000
+RDATE:19770403T020000
+RDATE:19780402T020000
+RDATE:19790401T020000
+RDATE:19800406T020000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0200
+TZOFFSETTO:+0100
+TZNAME:CET
+DTSTART:19161001T010000
+RDATE:19161001T010000
+RDATE:19170917T030000
+RDATE:19180916T030000
+RDATE:19421102T030000
+RDATE:19431004T030000
+RDATE:19440917T030000
+RDATE:19450916T030000
+RDATE:19461007T030000
+RDATE:19770925T030000
+RDATE:19781001T030000
+RDATE:19790930T030000
+RDATE:19800928T030000
+RDATE:19810927T030000
+RDATE:19820926T030000
+RDATE:19830925T030000
+RDATE:19840930T030000
+RDATE:19850929T030000
+RDATE:19860928T030000
+RDATE:19870927T030000
+RDATE:19880925T030000
+RDATE:19890924T030000
+RDATE:19900930T030000
+RDATE:19910929T030000
+RDATE:19920927T030000
+RDATE:19930926T030000
+RDATE:19940925T030000
+RDATE:19950924T030000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0100
+TZOFFSETTO:+0000
+TZNAME:WET
+DTSTART:19181111T120000
+RDATE:19181111T120000
+RDATE:19191005T000000
+RDATE:19201024T000000
+RDATE:19211026T000000
+RDATE:19221008T000000
+RDATE:19231007T000000
+RDATE:19241005T000000
+RDATE:19251004T000000
+RDATE:19261003T000000
+RDATE:19271002T000000
+RDATE:19281007T030000
+RDATE:19291006T030000
+RDATE:19301005T030000
+RDATE:19311004T030000
+RDATE:19321002T030000
+RDATE:19331008T030000
+RDATE:19341007T030000
+RDATE:19351006T030000
+RDATE:19361004T030000
+RDATE:19371003T030000
+RDATE:19381002T030000
+RDATE:19391119T030000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0000
+TZOFFSETTO:+0100
+TZNAME:WEST
+DTSTART:19190301T230000
+RDATE:19190301T230000
+RDATE:19200214T230000
+RDATE:19210314T230000
+RDATE:19220325T230000
+RDATE:19230421T230000
+RDATE:19240329T230000
+RDATE:19250404T230000
+RDATE:19260417T230000
+RDATE:19270409T230000
+RDATE:19280414T230000
+RDATE:19290421T020000
+RDATE:19300413T020000
+RDATE:19310419T020000
+RDATE:19320403T020000
+RDATE:19330326T020000
+RDATE:19340408T020000
+RDATE:19350331T020000
+RDATE:19360419T020000
+RDATE:19370404T020000
+RDATE:19380327T020000
+RDATE:19390416T020000
+RDATE:19400225T020000
+END:DAYLIGHT
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0200
+TZOFFSETTO:+0200
+TZNAME:CEST
+DTSTART:19440903T000000
+RDATE:19440903T000000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0100
+TZOFFSETTO:+0100
+TZNAME:CET
+DTSTART:19770101T000000
+RDATE:19770101T000000
+END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Europe/Brussels.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Europe/Stockholm.ics
===================================================================
--- libkcal/libical/zoneinfo/Europe/Stockholm.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Europe/Stockholm.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,22 +1,74 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/Europe/Stockholm
+TZID:/kde.org/Olson_20070327_1/Europe/Stockholm
 X-LIC-LOCATION:Europe/Stockholm
 BEGIN:DAYLIGHT
 TZOFFSETFROM:+0100
 TZOFFSETTO:+0200
 TZNAME:CEST
-DTSTART:19700329T020000
+DTSTART:19810329T020000
 RRULE:FREQ=YEARLY;BYMONTH=3;BYDAY=-1SU
 END:DAYLIGHT
 BEGIN:STANDARD
 TZOFFSETFROM:+0200
 TZOFFSETTO:+0100
 TZNAME:CET
-DTSTART:19701025T030000
+DTSTART:19961027T030000
 RRULE:FREQ=YEARLY;BYMONTH=10;BYDAY=-1SU
 END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+011212
+TZOFFSETTO:+010014
+TZNAME:SET
+DTSTART:18790101T000000
+RDATE:18790101T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+010014
+TZOFFSETTO:+0100
+TZNAME:CET
+DTSTART:19000101T000000
+RDATE:19000101T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0100
+TZOFFSETTO:+0200
+TZNAME:CEST
+DTSTART:19160514T230000
+RDATE:19160514T230000
+RDATE:19800406T020000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0200
+TZOFFSETTO:+0100
+TZNAME:CET
+DTSTART:19161001T010000
+RDATE:19161001T010000
+RDATE:19800928T030000
+RDATE:19810927T030000
+RDATE:19820926T030000
+RDATE:19830925T030000
+RDATE:19840930T030000
+RDATE:19850929T030000
+RDATE:19860928T030000
+RDATE:19870927T030000
+RDATE:19880925T030000
+RDATE:19890924T030000
+RDATE:19900930T030000
+RDATE:19910929T030000
+RDATE:19920927T030000
+RDATE:19930926T030000
+RDATE:19940925T030000
+RDATE:19950924T030000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0100
+TZOFFSETTO:+0100
+TZNAME:CET
+DTSTART:19800101T000000
+RDATE:19800101T000000
+END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Europe/Stockholm.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Europe/Samara.ics
===================================================================
--- libkcal/libical/zoneinfo/Europe/Samara.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Europe/Samara.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,22 +1,125 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/Europe/Samara
+TZID:/kde.org/Olson_20070327_1/Europe/Samara
 X-LIC-LOCATION:Europe/Samara
 BEGIN:DAYLIGHT
 TZOFFSETFROM:+0400
 TZOFFSETTO:+0500
 TZNAME:SAMST
-DTSTART:19700329T020000
+DTSTART:19930328T020000
 RRULE:FREQ=YEARLY;BYMONTH=3;BYDAY=-1SU
 END:DAYLIGHT
 BEGIN:STANDARD
 TZOFFSETFROM:+0500
 TZOFFSETTO:+0400
 TZNAME:SAMT
-DTSTART:19701025T030000
+DTSTART:19961027T030000
 RRULE:FREQ=YEARLY;BYMONTH=10;BYDAY=-1SU
 END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+032036
+TZOFFSETTO:+0300
+TZNAME:SAMT
+DTSTART:19190701T020000
+RDATE:19190701T020000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0300
+TZOFFSETTO:+0400
+TZNAME:SAMT
+DTSTART:19300621T000000
+RDATE:19300621T000000
+RDATE:19911020T030000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0400
+TZOFFSETTO:+0400
+TZNAME:KUYT
+DTSTART:19350127T000000
+RDATE:19350127T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0400
+TZOFFSETTO:+0500
+TZNAME:KUYST
+DTSTART:19810401T000000
+RDATE:19810401T000000
+RDATE:19820401T000000
+RDATE:19830401T000000
+RDATE:19840401T000000
+RDATE:19850331T020000
+RDATE:19860330T020000
+RDATE:19870329T020000
+RDATE:19880327T020000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0500
+TZOFFSETTO:+0400
+TZNAME:KUYT
+DTSTART:19811001T000000
+RDATE:19811001T000000
+RDATE:19821001T000000
+RDATE:19831001T000000
+RDATE:19840930T030000
+RDATE:19850929T030000
+RDATE:19860928T030000
+RDATE:19870927T030000
+RDATE:19880925T030000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0400
+TZOFFSETTO:+0400
+TZNAME:KUYST
+DTSTART:19890326T020000
+RDATE:19890326T020000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0400
+TZOFFSETTO:+0300
+TZNAME:KUYT
+DTSTART:19890924T030000
+RDATE:19890924T030000
+RDATE:19900930T030000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0300
+TZOFFSETTO:+0400
+TZNAME:KUYST
+DTSTART:19900325T020000
+RDATE:19900325T020000
+END:DAYLIGHT
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0300
+TZOFFSETTO:+0300
+TZNAME:KUYST
+DTSTART:19910331T020000
+RDATE:19910331T020000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0300
+TZOFFSETTO:+0300
+TZNAME:KUYT
+DTSTART:19910929T030000
+RDATE:19910929T030000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0400
+TZOFFSETTO:+0500
+TZNAME:SAMST
+DTSTART:19920328T230000
+RDATE:19920328T230000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0500
+TZOFFSETTO:+0400
+TZNAME:SAMT
+DTSTART:19920926T230000
+RDATE:19920926T230000
+RDATE:19930926T030000
+RDATE:19940925T030000
+RDATE:19950924T030000
+END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Europe/Samara.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Europe/Zurich.ics
===================================================================
--- libkcal/libical/zoneinfo/Europe/Zurich.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Europe/Zurich.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,22 +1,76 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/Europe/Zurich
+TZID:/kde.org/Olson_20070327_1/Europe/Zurich
 X-LIC-LOCATION:Europe/Zurich
 BEGIN:DAYLIGHT
 TZOFFSETFROM:+0100
 TZOFFSETTO:+0200
 TZNAME:CEST
-DTSTART:19700329T020000
+DTSTART:19810329T020000
 RRULE:FREQ=YEARLY;BYMONTH=3;BYDAY=-1SU
 END:DAYLIGHT
 BEGIN:STANDARD
 TZOFFSETFROM:+0200
 TZOFFSETTO:+0100
 TZNAME:CET
-DTSTART:19701025T030000
+DTSTART:19961027T030000
 RRULE:FREQ=YEARLY;BYMONTH=10;BYDAY=-1SU
 END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+003408
+TZOFFSETTO:+002944
+TZNAME:BMT
+DTSTART:18480912T000000
+RDATE:18480912T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+002944
+TZOFFSETTO:+0100
+TZNAME:CET
+DTSTART:18940601T000000
+RDATE:18940601T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0100
+TZOFFSETTO:+0200
+TZNAME:CEST
+DTSTART:19401102T000000
+RDATE:19401102T000000
+RDATE:19410504T020000
+RDATE:19420503T020000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0200
+TZOFFSETTO:+0100
+TZNAME:CET
+DTSTART:19401231T000000
+RDATE:19401231T000000
+RDATE:19411005T000000
+RDATE:19421004T000000
+RDATE:19810927T030000
+RDATE:19820926T030000
+RDATE:19830925T030000
+RDATE:19840930T030000
+RDATE:19850929T030000
+RDATE:19860928T030000
+RDATE:19870927T030000
+RDATE:19880925T030000
+RDATE:19890924T030000
+RDATE:19900930T030000
+RDATE:19910929T030000
+RDATE:19920927T030000
+RDATE:19930926T030000
+RDATE:19940925T030000
+RDATE:19950924T030000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0100
+TZOFFSETTO:+0100
+TZNAME:CET
+DTSTART:19810101T000000
+RDATE:19810101T000000
+END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Europe/Zurich.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Europe/Belgrade.ics
===================================================================
--- libkcal/libical/zoneinfo/Europe/Belgrade.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Europe/Belgrade.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,22 +1,69 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/Europe/Belgrade
+TZID:/kde.org/Olson_20070327_1/Europe/Belgrade
 X-LIC-LOCATION:Europe/Belgrade
 BEGIN:DAYLIGHT
 TZOFFSETFROM:+0100
 TZOFFSETTO:+0200
 TZNAME:CEST
-DTSTART:19700329T020000
+DTSTART:19830327T020000
 RRULE:FREQ=YEARLY;BYMONTH=3;BYDAY=-1SU
 END:DAYLIGHT
 BEGIN:STANDARD
 TZOFFSETFROM:+0200
 TZOFFSETTO:+0100
 TZNAME:CET
-DTSTART:19701025T030000
+DTSTART:19961027T030000
 RRULE:FREQ=YEARLY;BYMONTH=10;BYDAY=-1SU
 END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0122
+TZOFFSETTO:+0100
+TZNAME:CET
+DTSTART:18840101T000000
+RDATE:18840101T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0100
+TZOFFSETTO:+0200
+TZNAME:CEST
+DTSTART:19410418T230000
+RDATE:19410418T230000
+RDATE:19430329T020000
+RDATE:19440403T020000
+RDATE:19450508T020000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0200
+TZOFFSETTO:+0100
+TZNAME:CET
+DTSTART:19421102T030000
+RDATE:19421102T030000
+RDATE:19431004T030000
+RDATE:19441002T030000
+RDATE:19450916T030000
+RDATE:19830925T030000
+RDATE:19840930T030000
+RDATE:19850929T030000
+RDATE:19860928T030000
+RDATE:19870927T030000
+RDATE:19880925T030000
+RDATE:19890924T030000
+RDATE:19900930T030000
+RDATE:19910929T030000
+RDATE:19920927T030000
+RDATE:19930926T030000
+RDATE:19940925T030000
+RDATE:19950924T030000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0100
+TZOFFSETTO:+0100
+TZNAME:CET
+DTSTART:19821127T000000
+RDATE:19821127T000000
+END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Europe/Belgrade.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Europe/Moscow.ics
===================================================================
--- libkcal/libical/zoneinfo/Europe/Moscow.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Europe/Moscow.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,22 +1,155 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/Europe/Moscow
+TZID:/kde.org/Olson_20070327_1/Europe/Moscow
 X-LIC-LOCATION:Europe/Moscow
 BEGIN:DAYLIGHT
 TZOFFSETFROM:+0300
 TZOFFSETTO:+0400
 TZNAME:MSD
-DTSTART:19700329T020000
+DTSTART:19930328T020000
 RRULE:FREQ=YEARLY;BYMONTH=3;BYDAY=-1SU
 END:DAYLIGHT
 BEGIN:STANDARD
 TZOFFSETFROM:+0400
 TZOFFSETTO:+0300
 TZNAME:MSK
-DTSTART:19701025T030000
+DTSTART:19961027T030000
 RRULE:FREQ=YEARLY;BYMONTH=10;BYDAY=-1SU
 END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+023020
+TZOFFSETTO:+0230
+TZNAME:MMT
+DTSTART:18800101T000000
+RDATE:18800101T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0230
+TZOFFSETTO:+023048
+TZNAME:MMT
+DTSTART:19160703T000000
+RDATE:19160703T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+023048
+TZOFFSETTO:+033048
+TZNAME:MST
+DTSTART:19170701T230000
+RDATE:19170701T230000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+033048
+TZOFFSETTO:+023048
+TZNAME:MMT
+DTSTART:19171228T000000
+RDATE:19171228T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+023048
+TZOFFSETTO:+043048
+TZNAME:MDST
+DTSTART:19180531T220000
+RDATE:19180531T220000
+END:DAYLIGHT
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+043048
+TZOFFSETTO:+033048
+TZNAME:MST
+DTSTART:19180916T010000
+RDATE:19180916T010000
+END:DAYLIGHT
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+033048
+TZOFFSETTO:+043048
+TZNAME:MDST
+DTSTART:19190531T230000
+RDATE:19190531T230000
+END:DAYLIGHT
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+043048
+TZOFFSETTO:+0400
+TZNAME:MSD
+DTSTART:19190701T020000
+RDATE:19190701T020000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0400
+TZOFFSETTO:+0300
+TZNAME:MSK
+DTSTART:19190816T000000
+RDATE:19190816T000000
+RDATE:19211001T000000
+RDATE:19811001T000000
+RDATE:19821001T000000
+RDATE:19831001T000000
+RDATE:19840930T030000
+RDATE:19850929T030000
+RDATE:19860928T030000
+RDATE:19870927T030000
+RDATE:19880925T030000
+RDATE:19890924T030000
+RDATE:19900930T030000
+RDATE:19920926T230000
+RDATE:19930926T030000
+RDATE:19940925T030000
+RDATE:19950924T030000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0300
+TZOFFSETTO:+0400
+TZNAME:MSD
+DTSTART:19210214T230000
+RDATE:19210214T230000
+RDATE:19810401T000000
+RDATE:19820401T000000
+RDATE:19830401T000000
+RDATE:19840401T000000
+RDATE:19850331T020000
+RDATE:19860330T020000
+RDATE:19870329T020000
+RDATE:19880327T020000
+RDATE:19890326T020000
+RDATE:19900325T020000
+RDATE:19920328T230000
+END:DAYLIGHT
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0400
+TZOFFSETTO:+0500
+TZNAME:MSD
+DTSTART:19210320T230000
+RDATE:19210320T230000
+END:DAYLIGHT
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0500
+TZOFFSETTO:+0400
+TZNAME:MSD
+DTSTART:19210901T000000
+RDATE:19210901T000000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0300
+TZOFFSETTO:+0200
+TZNAME:EET
+DTSTART:19221001T000000
+RDATE:19221001T000000
+RDATE:19910929T030000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0200
+TZOFFSETTO:+0300
+TZNAME:MSK
+DTSTART:19300621T000000
+RDATE:19300621T000000
+RDATE:19920119T020000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0300
+TZOFFSETTO:+0300
+TZNAME:EEST
+DTSTART:19910331T020000
+RDATE:19910331T020000
+END:DAYLIGHT
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Europe/Moscow.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Europe/Budapest.ics
===================================================================
--- libkcal/libical/zoneinfo/Europe/Budapest.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Europe/Budapest.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,22 +1,101 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/Europe/Budapest
+TZID:/kde.org/Olson_20070327_1/Europe/Budapest
 X-LIC-LOCATION:Europe/Budapest
 BEGIN:DAYLIGHT
 TZOFFSETFROM:+0100
 TZOFFSETTO:+0200
 TZNAME:CEST
-DTSTART:19700329T020000
+DTSTART:19810329T020000
 RRULE:FREQ=YEARLY;BYMONTH=3;BYDAY=-1SU
 END:DAYLIGHT
 BEGIN:STANDARD
 TZOFFSETFROM:+0200
 TZOFFSETTO:+0100
 TZNAME:CET
-DTSTART:19701025T030000
+DTSTART:19961027T030000
 RRULE:FREQ=YEARLY;BYMONTH=10;BYDAY=-1SU
 END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+011620
+TZOFFSETTO:+0100
+TZNAME:CET
+DTSTART:18901001T000000
+RDATE:18901001T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0100
+TZOFFSETTO:+0200
+TZNAME:CEST
+DTSTART:19160430T230000
+RDATE:19160430T230000
+RDATE:19170416T020000
+RDATE:19180401T030000
+RDATE:19190415T030000
+RDATE:19200405T030000
+RDATE:19410406T020000
+RDATE:19430329T020000
+RDATE:19440403T020000
+RDATE:19450501T230000
+RDATE:19460331T020000
+RDATE:19470406T020000
+RDATE:19480404T020000
+RDATE:19490410T020000
+RDATE:19500417T020000
+RDATE:19540523T000000
+RDATE:19550523T000000
+RDATE:19560603T000000
+RDATE:19570602T010000
+RDATE:19800406T010000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0200
+TZOFFSETTO:+0100
+TZNAME:CET
+DTSTART:19161001T010000
+RDATE:19161001T010000
+RDATE:19170917T030000
+RDATE:19180929T030000
+RDATE:19190915T030000
+RDATE:19200930T030000
+RDATE:19421102T030000
+RDATE:19431004T030000
+RDATE:19441002T030000
+RDATE:19451103T000000
+RDATE:19461006T030000
+RDATE:19471005T030000
+RDATE:19481003T030000
+RDATE:19491002T030000
+RDATE:19501023T030000
+RDATE:19541003T000000
+RDATE:19551003T000000
+RDATE:19560930T000000
+RDATE:19570929T030000
+RDATE:19800928T030000
+RDATE:19810927T030000
+RDATE:19820926T030000
+RDATE:19830925T030000
+RDATE:19840930T030000
+RDATE:19850929T030000
+RDATE:19860928T030000
+RDATE:19870927T030000
+RDATE:19880925T030000
+RDATE:19890924T030000
+RDATE:19900930T030000
+RDATE:19910929T030000
+RDATE:19920927T030000
+RDATE:19930926T030000
+RDATE:19940925T030000
+RDATE:19950924T030000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0100
+TZOFFSETTO:+0100
+TZNAME:CET
+DTSTART:19180101T000000
+RDATE:19180101T000000
+END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Europe/Budapest.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Europe/Copenhagen.ics
===================================================================
--- libkcal/libical/zoneinfo/Europe/Copenhagen.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Europe/Copenhagen.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,22 +1,88 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/Europe/Copenhagen
+TZID:/kde.org/Olson_20070327_1/Europe/Copenhagen
 X-LIC-LOCATION:Europe/Copenhagen
 BEGIN:DAYLIGHT
 TZOFFSETFROM:+0100
 TZOFFSETTO:+0200
 TZNAME:CEST
-DTSTART:19700329T020000
+DTSTART:19810329T020000
 RRULE:FREQ=YEARLY;BYMONTH=3;BYDAY=-1SU
 END:DAYLIGHT
 BEGIN:STANDARD
 TZOFFSETFROM:+0200
 TZOFFSETTO:+0100
 TZNAME:CET
-DTSTART:19701025T030000
+DTSTART:19961027T030000
 RRULE:FREQ=YEARLY;BYMONTH=10;BYDAY=-1SU
 END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+005020
+TZOFFSETTO:+005020
+TZNAME:CMT
+DTSTART:18900101T000000
+RDATE:18900101T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+005020
+TZOFFSETTO:+0100
+TZNAME:CET
+DTSTART:18940101T000000
+RDATE:18940101T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0100
+TZOFFSETTO:+0200
+TZNAME:CEST
+DTSTART:19160514T230000
+RDATE:19160514T230000
+RDATE:19400515T000000
+RDATE:19430329T020000
+RDATE:19440403T020000
+RDATE:19450402T020000
+RDATE:19460501T020000
+RDATE:19470504T020000
+RDATE:19480509T020000
+RDATE:19800406T020000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0200
+TZOFFSETTO:+0100
+TZNAME:CET
+DTSTART:19160930T230000
+RDATE:19160930T230000
+RDATE:19421102T030000
+RDATE:19431004T030000
+RDATE:19441002T030000
+RDATE:19450815T030000
+RDATE:19460901T030000
+RDATE:19470810T030000
+RDATE:19480808T030000
+RDATE:19800928T030000
+RDATE:19810927T030000
+RDATE:19820926T030000
+RDATE:19830925T030000
+RDATE:19840930T030000
+RDATE:19850929T030000
+RDATE:19860928T030000
+RDATE:19870927T030000
+RDATE:19880925T030000
+RDATE:19890924T030000
+RDATE:19900930T030000
+RDATE:19910929T030000
+RDATE:19920927T030000
+RDATE:19930926T030000
+RDATE:19940925T030000
+RDATE:19950924T030000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0100
+TZOFFSETTO:+0100
+TZNAME:CET
+DTSTART:19800101T000000
+RDATE:19800101T000000
+END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Europe/Copenhagen.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Europe/Gibraltar.ics
===================================================================
--- libkcal/libical/zoneinfo/Europe/Gibraltar.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Europe/Gibraltar.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,22 +1,171 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/Europe/Gibraltar
+TZID:/kde.org/Olson_20070327_1/Europe/Gibraltar
 X-LIC-LOCATION:Europe/Gibraltar
 BEGIN:DAYLIGHT
 TZOFFSETFROM:+0100
 TZOFFSETTO:+0200
 TZNAME:CEST
-DTSTART:19700329T020000
+DTSTART:19820328T020000
 RRULE:FREQ=YEARLY;BYMONTH=3;BYDAY=-1SU
 END:DAYLIGHT
 BEGIN:STANDARD
 TZOFFSETFROM:+0200
 TZOFFSETTO:+0100
 TZNAME:CET
-DTSTART:19701025T030000
+DTSTART:19961027T030000
 RRULE:FREQ=YEARLY;BYMONTH=10;BYDAY=-1SU
 END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-002124
+TZOFFSETTO:+0000
+TZNAME:GMT
+DTSTART:18800802T000000
+RDATE:18800802T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0000
+TZOFFSETTO:+0100
+TZNAME:BST
+DTSTART:19160521T020000
+RDATE:19160521T020000
+RDATE:19170408T020000
+RDATE:19180324T020000
+RDATE:19190330T020000
+RDATE:19200328T020000
+RDATE:19210403T020000
+RDATE:19220326T020000
+RDATE:19230422T020000
+RDATE:19240413T020000
+RDATE:19250419T020000
+RDATE:19260418T020000
+RDATE:19270410T020000
+RDATE:19280422T020000
+RDATE:19290421T020000
+RDATE:19300413T020000
+RDATE:19310419T020000
+RDATE:19320417T020000
+RDATE:19330409T020000
+RDATE:19340422T020000
+RDATE:19350414T020000
+RDATE:19360419T020000
+RDATE:19370418T020000
+RDATE:19380410T020000
+RDATE:19390416T020000
+RDATE:19400225T020000
+RDATE:19460414T020000
+RDATE:19470316T020000
+RDATE:19480314T020000
+RDATE:19490403T020000
+RDATE:19500416T020000
+RDATE:19510415T020000
+RDATE:19520420T020000
+RDATE:19530419T020000
+RDATE:19540411T020000
+RDATE:19550417T020000
+RDATE:19560422T020000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0100
+TZOFFSETTO:+0000
+TZNAME:GMT
+DTSTART:19161001T030000
+RDATE:19161001T030000
+RDATE:19170917T030000
+RDATE:19180930T030000
+RDATE:19190929T030000
+RDATE:19201025T030000
+RDATE:19211003T030000
+RDATE:19221008T030000
+RDATE:19230916T030000
+RDATE:19240921T030000
+RDATE:19251004T030000
+RDATE:19261003T030000
+RDATE:19271002T030000
+RDATE:19281007T030000
+RDATE:19291006T030000
+RDATE:19301005T030000
+RDATE:19311004T030000
+RDATE:19321002T030000
+RDATE:19331008T030000
+RDATE:19341007T030000
+RDATE:19351006T030000
+RDATE:19361004T030000
+RDATE:19371003T030000
+RDATE:19381002T030000
+RDATE:19391119T030000
+RDATE:19451007T030000
+RDATE:19461006T030000
+RDATE:19471102T030000
+RDATE:19481031T030000
+RDATE:19491030T030000
+RDATE:19501022T030000
+RDATE:19511021T030000
+RDATE:19521026T030000
+RDATE:19531004T030000
+RDATE:19541003T030000
+RDATE:19551002T030000
+RDATE:19561007T030000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0100
+TZOFFSETTO:+0200
+TZNAME:BDST
+DTSTART:19410504T020000
+RDATE:19410504T020000
+RDATE:19420405T020000
+RDATE:19430404T020000
+RDATE:19440402T020000
+RDATE:19450402T020000
+RDATE:19470413T020000
+END:DAYLIGHT
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0200
+TZOFFSETTO:+0100
+TZNAME:BST
+DTSTART:19410810T030000
+RDATE:19410810T030000
+RDATE:19420809T030000
+RDATE:19430815T030000
+RDATE:19440917T030000
+RDATE:19450715T030000
+RDATE:19470810T030000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0000
+TZOFFSETTO:+0100
+TZNAME:CET
+DTSTART:19570414T020000
+RDATE:19570414T020000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0100
+TZOFFSETTO:+0100
+TZNAME:CET
+DTSTART:19820101T000000
+RDATE:19820101T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0200
+TZOFFSETTO:+0100
+TZNAME:CET
+DTSTART:19820926T030000
+RDATE:19820926T030000
+RDATE:19830925T030000
+RDATE:19840930T030000
+RDATE:19850929T030000
+RDATE:19860928T030000
+RDATE:19870927T030000
+RDATE:19880925T030000
+RDATE:19890924T030000
+RDATE:19900930T030000
+RDATE:19910929T030000
+RDATE:19920927T030000
+RDATE:19930926T030000
+RDATE:19940925T030000
+RDATE:19950924T030000
+END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Europe/Gibraltar.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Europe/Sarajevo.ics
===================================================================
--- libkcal/libical/zoneinfo/Europe/Sarajevo.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Europe/Sarajevo.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,22 +1,69 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/Europe/Sarajevo
+TZID:/kde.org/Olson_20070327_1/Europe/Sarajevo
 X-LIC-LOCATION:Europe/Sarajevo
 BEGIN:DAYLIGHT
 TZOFFSETFROM:+0100
 TZOFFSETTO:+0200
 TZNAME:CEST
-DTSTART:19700329T020000
+DTSTART:19830327T020000
 RRULE:FREQ=YEARLY;BYMONTH=3;BYDAY=-1SU
 END:DAYLIGHT
 BEGIN:STANDARD
 TZOFFSETFROM:+0200
 TZOFFSETTO:+0100
 TZNAME:CET
-DTSTART:19701025T030000
+DTSTART:19961027T030000
 RRULE:FREQ=YEARLY;BYMONTH=10;BYDAY=-1SU
 END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0122
+TZOFFSETTO:+0100
+TZNAME:CET
+DTSTART:18840101T000000
+RDATE:18840101T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0100
+TZOFFSETTO:+0200
+TZNAME:CEST
+DTSTART:19410418T230000
+RDATE:19410418T230000
+RDATE:19430329T020000
+RDATE:19440403T020000
+RDATE:19450508T020000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0200
+TZOFFSETTO:+0100
+TZNAME:CET
+DTSTART:19421102T030000
+RDATE:19421102T030000
+RDATE:19431004T030000
+RDATE:19441002T030000
+RDATE:19450916T030000
+RDATE:19830925T030000
+RDATE:19840930T030000
+RDATE:19850929T030000
+RDATE:19860928T030000
+RDATE:19870927T030000
+RDATE:19880925T030000
+RDATE:19890924T030000
+RDATE:19900930T030000
+RDATE:19910929T030000
+RDATE:19920927T030000
+RDATE:19930926T030000
+RDATE:19940925T030000
+RDATE:19950924T030000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0100
+TZOFFSETTO:+0100
+TZNAME:CET
+DTSTART:19821127T000000
+RDATE:19821127T000000
+END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Europe/Sarajevo.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Europe/Zagreb.ics
===================================================================
--- libkcal/libical/zoneinfo/Europe/Zagreb.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Europe/Zagreb.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,22 +1,69 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/Europe/Zagreb
+TZID:/kde.org/Olson_20070327_1/Europe/Zagreb
 X-LIC-LOCATION:Europe/Zagreb
 BEGIN:DAYLIGHT
 TZOFFSETFROM:+0100
 TZOFFSETTO:+0200
 TZNAME:CEST
-DTSTART:19700329T020000
+DTSTART:19830327T020000
 RRULE:FREQ=YEARLY;BYMONTH=3;BYDAY=-1SU
 END:DAYLIGHT
 BEGIN:STANDARD
 TZOFFSETFROM:+0200
 TZOFFSETTO:+0100
 TZNAME:CET
-DTSTART:19701025T030000
+DTSTART:19961027T030000
 RRULE:FREQ=YEARLY;BYMONTH=10;BYDAY=-1SU
 END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0122
+TZOFFSETTO:+0100
+TZNAME:CET
+DTSTART:18840101T000000
+RDATE:18840101T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0100
+TZOFFSETTO:+0200
+TZNAME:CEST
+DTSTART:19410418T230000
+RDATE:19410418T230000
+RDATE:19430329T020000
+RDATE:19440403T020000
+RDATE:19450508T020000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0200
+TZOFFSETTO:+0100
+TZNAME:CET
+DTSTART:19421102T030000
+RDATE:19421102T030000
+RDATE:19431004T030000
+RDATE:19441002T030000
+RDATE:19450916T030000
+RDATE:19830925T030000
+RDATE:19840930T030000
+RDATE:19850929T030000
+RDATE:19860928T030000
+RDATE:19870927T030000
+RDATE:19880925T030000
+RDATE:19890924T030000
+RDATE:19900930T030000
+RDATE:19910929T030000
+RDATE:19920927T030000
+RDATE:19930926T030000
+RDATE:19940925T030000
+RDATE:19950924T030000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0100
+TZOFFSETTO:+0100
+TZNAME:CET
+DTSTART:19821127T000000
+RDATE:19821127T000000
+END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Europe/Zagreb.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Europe/Zaporozhye.ics
===================================================================
--- libkcal/libical/zoneinfo/Europe/Zaporozhye.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Europe/Zaporozhye.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,22 +1,138 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/Europe/Zaporozhye
+TZID:/kde.org/Olson_20070327_1/Europe/Zaporozhye
 X-LIC-LOCATION:Europe/Zaporozhye
 BEGIN:DAYLIGHT
 TZOFFSETFROM:+0200
 TZOFFSETTO:+0300
 TZNAME:EEST
-DTSTART:19700329T030000
+DTSTART:19950326T030000
 RRULE:FREQ=YEARLY;BYMONTH=3;BYDAY=-1SU
 END:DAYLIGHT
 BEGIN:STANDARD
 TZOFFSETFROM:+0300
 TZOFFSETTO:+0200
 TZNAME:EET
-DTSTART:19701025T040000
+DTSTART:19961027T040000
 RRULE:FREQ=YEARLY;BYMONTH=10;BYDAY=-1SU
 END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+022040
+TZOFFSETTO:+0220
+TZNAME:CUT
+DTSTART:18800101T000000
+RDATE:18800101T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0220
+TZOFFSETTO:+0200
+TZNAME:EET
+DTSTART:19240502T000000
+RDATE:19240502T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0200
+TZOFFSETTO:+0300
+TZNAME:MSK
+DTSTART:19300621T000000
+RDATE:19300621T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0300
+TZOFFSETTO:+0200
+TZNAME:CEST
+DTSTART:19410825T000000
+RDATE:19410825T000000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0200
+TZOFFSETTO:+0100
+TZNAME:CET
+DTSTART:19421102T030000
+RDATE:19421102T030000
+RDATE:19431004T030000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0100
+TZOFFSETTO:+0200
+TZNAME:CEST
+DTSTART:19430329T020000
+RDATE:19430329T020000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0100
+TZOFFSETTO:+0300
+TZNAME:MSK
+DTSTART:19431025T000000
+RDATE:19431025T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0300
+TZOFFSETTO:+0400
+TZNAME:MSD
+DTSTART:19810401T000000
+RDATE:19810401T000000
+RDATE:19820401T000000
+RDATE:19830401T000000
+RDATE:19840401T000000
+RDATE:19850331T020000
+RDATE:19860330T020000
+RDATE:19870329T020000
+RDATE:19880327T020000
+RDATE:19890326T020000
+RDATE:19900325T020000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0400
+TZOFFSETTO:+0300
+TZNAME:MSK
+DTSTART:19811001T000000
+RDATE:19811001T000000
+RDATE:19821001T000000
+RDATE:19831001T000000
+RDATE:19840930T030000
+RDATE:19850929T030000
+RDATE:19860928T030000
+RDATE:19870927T030000
+RDATE:19880925T030000
+RDATE:19890924T030000
+RDATE:19900930T030000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0300
+TZOFFSETTO:+0300
+TZNAME:EEST
+DTSTART:19910331T020000
+RDATE:19910331T020000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0300
+TZOFFSETTO:+0200
+TZNAME:EET
+DTSTART:19910929T000000
+RDATE:19910929T000000
+RDATE:19920927T000000
+RDATE:19930926T000000
+RDATE:19940925T000000
+RDATE:19950924T040000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0200
+TZOFFSETTO:+0300
+TZNAME:EEST
+DTSTART:19920329T000000
+RDATE:19920329T000000
+RDATE:19930328T000000
+RDATE:19940327T000000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0200
+TZOFFSETTO:+0200
+TZNAME:EET
+DTSTART:19950101T000000
+RDATE:19950101T000000
+END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Europe/Zaporozhye.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Europe/Isle_of_Man.ics
===================================================================
--- libkcal/libical/zoneinfo/Europe/Isle_of_Man.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 0)
+++ libkcal/libical/zoneinfo/Europe/Isle_of_Man.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -0,0 +1,208 @@
+BEGIN:VCALENDAR
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
+VERSION:2.0
+BEGIN:VTIMEZONE
+TZID:/kde.org/Olson_20070327_1/Europe/Isle_of_Man
+X-LIC-LOCATION:Europe/Isle_of_Man
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0000
+TZOFFSETTO:+0100
+TZNAME:BST
+DTSTART:19810329T010000
+RRULE:FREQ=YEARLY;BYMONTH=3;BYDAY=-1SU
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0100
+TZOFFSETTO:+0000
+TZNAME:GMT
+DTSTART:19961027T020000
+RRULE:FREQ=YEARLY;BYMONTH=10;BYDAY=-1SU
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-000115
+TZOFFSETTO:+0000
+TZNAME:GMT
+DTSTART:18471201T000000
+RDATE:18471201T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0000
+TZOFFSETTO:+0100
+TZNAME:BST
+DTSTART:19160521T020000
+RDATE:19160521T020000
+RDATE:19170408T020000
+RDATE:19180324T020000
+RDATE:19190330T020000
+RDATE:19200328T020000
+RDATE:19210403T020000
+RDATE:19220326T020000
+RDATE:19230422T020000
+RDATE:19240413T020000
+RDATE:19250419T020000
+RDATE:19260418T020000
+RDATE:19270410T020000
+RDATE:19280422T020000
+RDATE:19290421T020000
+RDATE:19300413T020000
+RDATE:19310419T020000
+RDATE:19320417T020000
+RDATE:19330409T020000
+RDATE:19340422T020000
+RDATE:19350414T020000
+RDATE:19360419T020000
+RDATE:19370418T020000
+RDATE:19380410T020000
+RDATE:19390416T020000
+RDATE:19400225T020000
+RDATE:19460414T020000
+RDATE:19470316T020000
+RDATE:19480314T020000
+RDATE:19490403T020000
+RDATE:19500416T020000
+RDATE:19510415T020000
+RDATE:19520420T020000
+RDATE:19530419T020000
+RDATE:19540411T020000
+RDATE:19550417T020000
+RDATE:19560422T020000
+RDATE:19570414T020000
+RDATE:19580420T020000
+RDATE:19590419T020000
+RDATE:19600410T020000
+RDATE:19610326T020000
+RDATE:19620325T020000
+RDATE:19630331T020000
+RDATE:19640322T020000
+RDATE:19650321T020000
+RDATE:19660320T020000
+RDATE:19670319T020000
+RDATE:19680218T020000
+RDATE:19720319T020000
+RDATE:19730318T020000
+RDATE:19740317T020000
+RDATE:19750316T020000
+RDATE:19760321T020000
+RDATE:19770320T020000
+RDATE:19780319T020000
+RDATE:19790318T020000
+RDATE:19800316T020000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0100
+TZOFFSETTO:+0000
+TZNAME:GMT
+DTSTART:19161001T030000
+RDATE:19161001T030000
+RDATE:19170917T030000
+RDATE:19180930T030000
+RDATE:19190929T030000
+RDATE:19201025T030000
+RDATE:19211003T030000
+RDATE:19221008T030000
+RDATE:19230916T030000
+RDATE:19240921T030000
+RDATE:19251004T030000
+RDATE:19261003T030000
+RDATE:19271002T030000
+RDATE:19281007T030000
+RDATE:19291006T030000
+RDATE:19301005T030000
+RDATE:19311004T030000
+RDATE:19321002T030000
+RDATE:19331008T030000
+RDATE:19341007T030000
+RDATE:19351006T030000
+RDATE:19361004T030000
+RDATE:19371003T030000
+RDATE:19381002T030000
+RDATE:19391119T030000
+RDATE:19451007T030000
+RDATE:19461006T030000
+RDATE:19471102T030000
+RDATE:19481031T030000
+RDATE:19491030T030000
+RDATE:19501022T030000
+RDATE:19511021T030000
+RDATE:19521026T030000
+RDATE:19531004T030000
+RDATE:19541003T030000
+RDATE:19551002T030000
+RDATE:19561007T030000
+RDATE:19571006T030000
+RDATE:19581005T030000
+RDATE:19591004T030000
+RDATE:19601002T030000
+RDATE:19611029T030000
+RDATE:19621028T030000
+RDATE:19631027T030000
+RDATE:19641025T030000
+RDATE:19651024T030000
+RDATE:19661023T030000
+RDATE:19671029T030000
+RDATE:19711031T030000
+RDATE:19721029T030000
+RDATE:19731028T030000
+RDATE:19741027T030000
+RDATE:19751026T030000
+RDATE:19761024T030000
+RDATE:19771023T030000
+RDATE:19781029T030000
+RDATE:19791028T030000
+RDATE:19801026T030000
+RDATE:19811025T020000
+RDATE:19821024T020000
+RDATE:19831023T020000
+RDATE:19841028T020000
+RDATE:19851027T020000
+RDATE:19861026T020000
+RDATE:19871025T020000
+RDATE:19881023T020000
+RDATE:19891029T020000
+RDATE:19901028T020000
+RDATE:19911027T020000
+RDATE:19921025T020000
+RDATE:19931024T020000
+RDATE:19941023T020000
+RDATE:19951022T020000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0100
+TZOFFSETTO:+0200
+TZNAME:BDST
+DTSTART:19410504T020000
+RDATE:19410504T020000
+RDATE:19420405T020000
+RDATE:19430404T020000
+RDATE:19440402T020000
+RDATE:19450402T020000
+RDATE:19470413T020000
+END:DAYLIGHT
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0200
+TZOFFSETTO:+0100
+TZNAME:BST
+DTSTART:19410810T030000
+RDATE:19410810T030000
+RDATE:19420809T030000
+RDATE:19430815T030000
+RDATE:19440917T030000
+RDATE:19450715T030000
+RDATE:19470810T030000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0100
+TZOFFSETTO:+0100
+TZNAME:BST
+DTSTART:19681027T000000
+RDATE:19681027T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0000
+TZOFFSETTO:+0000
+TZNAME:GMT
+DTSTART:19960101T000000
+RDATE:19960101T000000
+END:STANDARD
+END:VTIMEZONE
+END:VCALENDAR
Index: libkcal/libical/zoneinfo/Europe/Monaco.ics
===================================================================
--- libkcal/libical/zoneinfo/Europe/Monaco.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Europe/Monaco.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,22 +1,163 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/Europe/Monaco
+TZID:/kde.org/Olson_20070327_1/Europe/Monaco
 X-LIC-LOCATION:Europe/Monaco
 BEGIN:DAYLIGHT
 TZOFFSETFROM:+0100
 TZOFFSETTO:+0200
 TZNAME:CEST
-DTSTART:19700329T020000
+DTSTART:19810329T020000
 RRULE:FREQ=YEARLY;BYMONTH=3;BYDAY=-1SU
 END:DAYLIGHT
 BEGIN:STANDARD
 TZOFFSETFROM:+0200
 TZOFFSETTO:+0100
 TZNAME:CET
-DTSTART:19701025T030000
+DTSTART:19961027T030000
 RRULE:FREQ=YEARLY;BYMONTH=10;BYDAY=-1SU
 END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+002932
+TZOFFSETTO:+000921
+TZNAME:PMT
+DTSTART:18910315T000000
+RDATE:18910315T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+000921
+TZOFFSETTO:+0000
+TZNAME:WET
+DTSTART:19110311T000000
+RDATE:19110311T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0000
+TZOFFSETTO:+0100
+TZNAME:WEST
+DTSTART:19160614T230000
+RDATE:19160614T230000
+RDATE:19170324T230000
+RDATE:19180309T230000
+RDATE:19190301T230000
+RDATE:19200214T230000
+RDATE:19210314T230000
+RDATE:19220325T230000
+RDATE:19230526T230000
+RDATE:19240329T230000
+RDATE:19250404T230000
+RDATE:19260417T230000
+RDATE:19270409T230000
+RDATE:19280414T230000
+RDATE:19290420T230000
+RDATE:19300412T230000
+RDATE:19310418T230000
+RDATE:19320402T230000
+RDATE:19330325T230000
+RDATE:19340407T230000
+RDATE:19350330T230000
+RDATE:19360418T230000
+RDATE:19370403T230000
+RDATE:19380326T230000
+RDATE:19390415T230000
+RDATE:19400225T020000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0100
+TZOFFSETTO:+0000
+TZNAME:WET
+DTSTART:19161002T000000
+RDATE:19161002T000000
+RDATE:19171008T000000
+RDATE:19181007T000000
+RDATE:19191006T000000
+RDATE:19201024T000000
+RDATE:19211026T000000
+RDATE:19221008T000000
+RDATE:19231007T000000
+RDATE:19241005T000000
+RDATE:19251004T000000
+RDATE:19261003T000000
+RDATE:19271002T000000
+RDATE:19281007T000000
+RDATE:19291006T000000
+RDATE:19301005T000000
+RDATE:19311004T000000
+RDATE:19321002T000000
+RDATE:19331008T000000
+RDATE:19341007T000000
+RDATE:19351006T000000
+RDATE:19361004T000000
+RDATE:19371003T000000
+RDATE:19381002T000000
+RDATE:19391119T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0100
+TZOFFSETTO:+0200
+TZNAME:WEMT
+DTSTART:19410505T000000
+RDATE:19410505T000000
+RDATE:19420309T000000
+RDATE:19430329T020000
+RDATE:19440403T020000
+RDATE:19450402T020000
+END:DAYLIGHT
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0200
+TZOFFSETTO:+0100
+TZNAME:WEST
+DTSTART:19411006T000000
+RDATE:19411006T000000
+RDATE:19421102T030000
+RDATE:19431004T030000
+RDATE:19441008T010000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0200
+TZOFFSETTO:+0100
+TZNAME:CET
+DTSTART:19450916T030000
+RDATE:19450916T030000
+RDATE:19760926T010000
+RDATE:19770925T030000
+RDATE:19781001T030000
+RDATE:19790930T030000
+RDATE:19800928T030000
+RDATE:19810927T030000
+RDATE:19820926T030000
+RDATE:19830925T030000
+RDATE:19840930T030000
+RDATE:19850929T030000
+RDATE:19860928T030000
+RDATE:19870927T030000
+RDATE:19880925T030000
+RDATE:19890924T030000
+RDATE:19900930T030000
+RDATE:19910929T030000
+RDATE:19920927T030000
+RDATE:19930926T030000
+RDATE:19940925T030000
+RDATE:19950924T030000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0100
+TZOFFSETTO:+0200
+TZNAME:CEST
+DTSTART:19760328T010000
+RDATE:19760328T010000
+RDATE:19770403T020000
+RDATE:19780402T020000
+RDATE:19790401T020000
+RDATE:19800406T020000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0100
+TZOFFSETTO:+0100
+TZNAME:CET
+DTSTART:19770101T000000
+RDATE:19770101T000000
+END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Europe/Monaco.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Europe/Amsterdam.ics
===================================================================
--- libkcal/libical/zoneinfo/Europe/Amsterdam.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Europe/Amsterdam.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,22 +1,164 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/Europe/Amsterdam
+TZID:/kde.org/Olson_20070327_1/Europe/Amsterdam
 X-LIC-LOCATION:Europe/Amsterdam
 BEGIN:DAYLIGHT
 TZOFFSETFROM:+0100
 TZOFFSETTO:+0200
 TZNAME:CEST
-DTSTART:19700329T020000
+DTSTART:19810329T020000
 RRULE:FREQ=YEARLY;BYMONTH=3;BYDAY=-1SU
 END:DAYLIGHT
 BEGIN:STANDARD
 TZOFFSETFROM:+0200
 TZOFFSETTO:+0100
 TZNAME:CET
-DTSTART:19701025T030000
+DTSTART:19961027T030000
 RRULE:FREQ=YEARLY;BYMONTH=10;BYDAY=-1SU
 END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+001932
+TZOFFSETTO:+001932
+TZNAME:AMT
+DTSTART:18350101T000000
+RDATE:18350101T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+001932
+TZOFFSETTO:+011932
+TZNAME:NST
+DTSTART:19160501T000000
+RDATE:19160501T000000
+RDATE:19170416T020000
+RDATE:19180401T020000
+RDATE:19190407T020000
+RDATE:19200405T020000
+RDATE:19210404T020000
+RDATE:19220326T020000
+RDATE:19230601T020000
+RDATE:19240330T020000
+RDATE:19250605T020000
+RDATE:19260515T020000
+RDATE:19270515T020000
+RDATE:19280515T020000
+RDATE:19290515T020000
+RDATE:19300515T020000
+RDATE:19310515T020000
+RDATE:19320522T020000
+RDATE:19330515T020000
+RDATE:19340515T020000
+RDATE:19350515T020000
+RDATE:19360515T020000
+RDATE:19370522T020000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+011932
+TZOFFSETTO:+001932
+TZNAME:AMT
+DTSTART:19161001T000000
+RDATE:19161001T000000
+RDATE:19170917T030000
+RDATE:19180930T030000
+RDATE:19190929T030000
+RDATE:19200927T030000
+RDATE:19210926T030000
+RDATE:19221008T030000
+RDATE:19231007T030000
+RDATE:19241005T030000
+RDATE:19251004T030000
+RDATE:19261003T030000
+RDATE:19271002T030000
+RDATE:19281007T030000
+RDATE:19291006T030000
+RDATE:19301005T030000
+RDATE:19311004T030000
+RDATE:19321002T030000
+RDATE:19331008T030000
+RDATE:19341007T030000
+RDATE:19351006T030000
+RDATE:19361004T030000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+011932
+TZOFFSETTO:+0120
+TZNAME:NEST
+DTSTART:19370701T000000
+RDATE:19370701T000000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0120
+TZOFFSETTO:+0020
+TZNAME:NET
+DTSTART:19371003T030000
+RDATE:19371003T030000
+RDATE:19381002T030000
+RDATE:19391008T030000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0020
+TZOFFSETTO:+0120
+TZNAME:NEST
+DTSTART:19380515T020000
+RDATE:19380515T020000
+RDATE:19390515T020000
+END:DAYLIGHT
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0020
+TZOFFSETTO:+0200
+TZNAME:CEST
+DTSTART:19400516T000000
+RDATE:19400516T000000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0200
+TZOFFSETTO:+0100
+TZNAME:CET
+DTSTART:19421102T030000
+RDATE:19421102T030000
+RDATE:19431004T030000
+RDATE:19441002T030000
+RDATE:19450916T030000
+RDATE:19770925T030000
+RDATE:19781001T030000
+RDATE:19790930T030000
+RDATE:19800928T030000
+RDATE:19810927T030000
+RDATE:19820926T030000
+RDATE:19830925T030000
+RDATE:19840930T030000
+RDATE:19850929T030000
+RDATE:19860928T030000
+RDATE:19870927T030000
+RDATE:19880925T030000
+RDATE:19890924T030000
+RDATE:19900930T030000
+RDATE:19910929T030000
+RDATE:19920927T030000
+RDATE:19930926T030000
+RDATE:19940925T030000
+RDATE:19950924T030000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0100
+TZOFFSETTO:+0200
+TZNAME:CEST
+DTSTART:19430329T020000
+RDATE:19430329T020000
+RDATE:19440403T020000
+RDATE:19450402T020000
+RDATE:19770403T020000
+RDATE:19780402T020000
+RDATE:19790401T020000
+RDATE:19800406T020000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0100
+TZOFFSETTO:+0100
+TZNAME:CET
+DTSTART:19770101T000000
+RDATE:19770101T000000
+END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Europe/Amsterdam.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Europe/Bucharest.ics
===================================================================
--- libkcal/libical/zoneinfo/Europe/Bucharest.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Europe/Bucharest.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,22 +1,109 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/Europe/Bucharest
+TZID:/kde.org/Olson_20070327_1/Europe/Bucharest
 X-LIC-LOCATION:Europe/Bucharest
 BEGIN:DAYLIGHT
 TZOFFSETFROM:+0200
 TZOFFSETTO:+0300
 TZNAME:EEST
-DTSTART:19700329T030000
+DTSTART:19970330T030000
 RRULE:FREQ=YEARLY;BYMONTH=3;BYDAY=-1SU
 END:DAYLIGHT
 BEGIN:STANDARD
 TZOFFSETFROM:+0300
 TZOFFSETTO:+0200
 TZNAME:EET
-DTSTART:19701025T040000
+DTSTART:19971026T040000
 RRULE:FREQ=YEARLY;BYMONTH=10;BYDAY=-1SU
 END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+014424
+TZOFFSETTO:+014424
+TZNAME:BMT
+DTSTART:18911001T000000
+RDATE:18911001T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+014424
+TZOFFSETTO:+0200
+TZNAME:EET
+DTSTART:19310724T000000
+RDATE:19310724T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0200
+TZOFFSETTO:+0300
+TZNAME:EEST
+DTSTART:19320521T000000
+RDATE:19320521T000000
+RDATE:19330402T000000
+RDATE:19340408T000000
+RDATE:19350407T000000
+RDATE:19360405T000000
+RDATE:19370404T000000
+RDATE:19380403T000000
+RDATE:19390402T000000
+RDATE:19790527T000000
+RDATE:19800405T230000
+RDATE:19810329T020000
+RDATE:19820328T020000
+RDATE:19830327T020000
+RDATE:19840325T020000
+RDATE:19850331T020000
+RDATE:19860330T020000
+RDATE:19870329T020000
+RDATE:19880327T020000
+RDATE:19890326T020000
+RDATE:19900325T020000
+RDATE:19910331T000000
+RDATE:19920329T000000
+RDATE:19930328T000000
+RDATE:19940327T000000
+RDATE:19950326T000000
+RDATE:19960331T000000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0300
+TZOFFSETTO:+0200
+TZNAME:EET
+DTSTART:19321002T010000
+RDATE:19321002T010000
+RDATE:19331001T010000
+RDATE:19341007T010000
+RDATE:19351006T010000
+RDATE:19361004T010000
+RDATE:19371003T010000
+RDATE:19381002T010000
+RDATE:19391001T010000
+RDATE:19790930T000000
+RDATE:19800928T010000
+RDATE:19810927T030000
+RDATE:19820926T030000
+RDATE:19830925T030000
+RDATE:19840930T030000
+RDATE:19850929T030000
+RDATE:19860928T030000
+RDATE:19870927T030000
+RDATE:19880925T030000
+RDATE:19890924T030000
+RDATE:19900930T030000
+RDATE:19910929T010000
+RDATE:19920927T010000
+RDATE:19930926T010000
+RDATE:19940925T000000
+RDATE:19950924T000000
+RDATE:19961027T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0200
+TZOFFSETTO:+0200
+TZNAME:EET
+DTSTART:19910101T000000
+RDATE:19910101T000000
+RDATE:19940101T000000
+RDATE:19970101T000000
+END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Europe/Bucharest.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Europe/Riga.ics
===================================================================
--- libkcal/libical/zoneinfo/Europe/Riga.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Europe/Riga.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,22 +1,167 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/Europe/Riga
+TZID:/kde.org/Olson_20070327_1/Europe/Riga
 X-LIC-LOCATION:Europe/Riga
 BEGIN:DAYLIGHT
 TZOFFSETFROM:+0200
 TZOFFSETTO:+0300
 TZNAME:EEST
-DTSTART:19700329T030000
+DTSTART:20010325T030000
 RRULE:FREQ=YEARLY;BYMONTH=3;BYDAY=-1SU
 END:DAYLIGHT
 BEGIN:STANDARD
 TZOFFSETFROM:+0300
 TZOFFSETTO:+0200
 TZNAME:EET
-DTSTART:19701025T040000
+DTSTART:20011028T040000
 RRULE:FREQ=YEARLY;BYMONTH=10;BYDAY=-1SU
 END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+013624
+TZOFFSETTO:+013624
+TZNAME:RMT
+DTSTART:18800101T000000
+RDATE:18800101T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+013624
+TZOFFSETTO:+023624
+TZNAME:LST
+DTSTART:19180415T020000
+RDATE:19180415T020000
+RDATE:19190401T020000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+023624
+TZOFFSETTO:+013624
+TZNAME:RMT
+DTSTART:19180916T030000
+RDATE:19180916T030000
+RDATE:19190522T030000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+013624
+TZOFFSETTO:+0200
+TZNAME:EET
+DTSTART:19260511T000000
+RDATE:19260511T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0200
+TZOFFSETTO:+0300
+TZNAME:MSK
+DTSTART:19400805T000000
+RDATE:19400805T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0300
+TZOFFSETTO:+0200
+TZNAME:CEST
+DTSTART:19410701T000000
+RDATE:19410701T000000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0200
+TZOFFSETTO:+0100
+TZNAME:CET
+DTSTART:19421102T030000
+RDATE:19421102T030000
+RDATE:19431004T030000
+RDATE:19441002T030000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0100
+TZOFFSETTO:+0200
+TZNAME:CEST
+DTSTART:19430329T020000
+RDATE:19430329T020000
+RDATE:19440403T020000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0100
+TZOFFSETTO:+0300
+TZNAME:MSK
+DTSTART:19441013T000000
+RDATE:19441013T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0300
+TZOFFSETTO:+0400
+TZNAME:MSD
+DTSTART:19810401T000000
+RDATE:19810401T000000
+RDATE:19820401T000000
+RDATE:19830401T000000
+RDATE:19840401T000000
+RDATE:19850331T020000
+RDATE:19860330T020000
+RDATE:19870329T020000
+RDATE:19880327T020000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0400
+TZOFFSETTO:+0300
+TZNAME:MSK
+DTSTART:19811001T000000
+RDATE:19811001T000000
+RDATE:19821001T000000
+RDATE:19831001T000000
+RDATE:19840930T030000
+RDATE:19850929T030000
+RDATE:19860928T030000
+RDATE:19870927T030000
+RDATE:19880925T030000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0300
+TZOFFSETTO:+0300
+TZNAME:EEST
+DTSTART:19890326T020000
+RDATE:19890326T020000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0300
+TZOFFSETTO:+0200
+TZNAME:EET
+DTSTART:19890924T030000
+RDATE:19890924T030000
+RDATE:19900930T030000
+RDATE:19910929T030000
+RDATE:19920927T030000
+RDATE:19930926T030000
+RDATE:19940925T030000
+RDATE:19950924T030000
+RDATE:19960929T030000
+RDATE:19971026T040000
+RDATE:19981025T040000
+RDATE:19991031T040000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0200
+TZOFFSETTO:+0300
+TZNAME:EEST
+DTSTART:19900325T020000
+RDATE:19900325T020000
+RDATE:19910331T020000
+RDATE:19920329T020000
+RDATE:19930328T020000
+RDATE:19940327T020000
+RDATE:19950326T020000
+RDATE:19960331T020000
+RDATE:19970330T030000
+RDATE:19980329T030000
+RDATE:19990328T030000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0200
+TZOFFSETTO:+0200
+TZNAME:EET
+DTSTART:19970121T000000
+RDATE:19970121T000000
+RDATE:20000229T000000
+RDATE:20010102T000000
+END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Europe/Riga.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Europe/Tirane.ics
===================================================================
--- libkcal/libical/zoneinfo/Europe/Tirane.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Europe/Tirane.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,22 +1,85 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/Europe/Tirane
+TZID:/kde.org/Olson_20070327_1/Europe/Tirane
 X-LIC-LOCATION:Europe/Tirane
 BEGIN:DAYLIGHT
 TZOFFSETFROM:+0100
 TZOFFSETTO:+0200
 TZNAME:CEST
-DTSTART:19700329T020000
+DTSTART:19850331T020000
 RRULE:FREQ=YEARLY;BYMONTH=3;BYDAY=-1SU
 END:DAYLIGHT
 BEGIN:STANDARD
 TZOFFSETFROM:+0200
 TZOFFSETTO:+0100
 TZNAME:CET
-DTSTART:19701025T030000
+DTSTART:19961027T030000
 RRULE:FREQ=YEARLY;BYMONTH=10;BYDAY=-1SU
 END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+011920
+TZOFFSETTO:+0100
+TZNAME:CET
+DTSTART:19140101T000000
+RDATE:19140101T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0100
+TZOFFSETTO:+0200
+TZNAME:CEST
+DTSTART:19400616T000000
+RDATE:19400616T000000
+RDATE:19430329T020000
+RDATE:19740504T000000
+RDATE:19750501T000000
+RDATE:19760502T000000
+RDATE:19770508T000000
+RDATE:19780506T000000
+RDATE:19790505T000000
+RDATE:19800503T000000
+RDATE:19810426T000000
+RDATE:19820502T000000
+RDATE:19830418T000000
+RDATE:19840401T000000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0200
+TZOFFSETTO:+0100
+TZNAME:CET
+DTSTART:19421102T030000
+RDATE:19421102T030000
+RDATE:19430410T030000
+RDATE:19741002T000000
+RDATE:19751002T000000
+RDATE:19761003T000000
+RDATE:19771002T000000
+RDATE:19781001T000000
+RDATE:19790930T000000
+RDATE:19801004T000000
+RDATE:19810927T000000
+RDATE:19821003T000000
+RDATE:19831001T000000
+RDATE:19840930T030000
+RDATE:19850929T030000
+RDATE:19860928T030000
+RDATE:19870927T030000
+RDATE:19880925T030000
+RDATE:19890924T030000
+RDATE:19900930T030000
+RDATE:19910929T030000
+RDATE:19920927T030000
+RDATE:19930926T030000
+RDATE:19940925T030000
+RDATE:19950924T030000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0200
+TZOFFSETTO:+0200
+TZNAME:CEST
+DTSTART:19840701T000000
+RDATE:19840701T000000
+END:DAYLIGHT
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Europe/Tirane.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Europe/Prague.ics
===================================================================
--- libkcal/libical/zoneinfo/Europe/Prague.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Europe/Prague.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,22 +1,96 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/Europe/Prague
+TZID:/kde.org/Olson_20070327_1/Europe/Prague
 X-LIC-LOCATION:Europe/Prague
 BEGIN:DAYLIGHT
 TZOFFSETFROM:+0100
 TZOFFSETTO:+0200
 TZNAME:CEST
-DTSTART:19700329T020000
+DTSTART:19810329T020000
 RRULE:FREQ=YEARLY;BYMONTH=3;BYDAY=-1SU
 END:DAYLIGHT
 BEGIN:STANDARD
 TZOFFSETFROM:+0200
 TZOFFSETTO:+0100
 TZNAME:CET
-DTSTART:19701025T030000
+DTSTART:19961027T030000
 RRULE:FREQ=YEARLY;BYMONTH=10;BYDAY=-1SU
 END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+005744
+TZOFFSETTO:+005744
+TZNAME:PMT
+DTSTART:18500101T000000
+RDATE:18500101T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+005744
+TZOFFSETTO:+0100
+TZNAME:CET
+DTSTART:18911001T000000
+RDATE:18911001T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0100
+TZOFFSETTO:+0200
+TZNAME:CEST
+DTSTART:19160430T230000
+RDATE:19160430T230000
+RDATE:19170416T020000
+RDATE:19180415T020000
+RDATE:19400401T020000
+RDATE:19430329T020000
+RDATE:19440403T020000
+RDATE:19450408T020000
+RDATE:19460506T020000
+RDATE:19470420T020000
+RDATE:19480418T020000
+RDATE:19490409T020000
+RDATE:19790401T020000
+RDATE:19800406T020000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0200
+TZOFFSETTO:+0100
+TZNAME:CET
+DTSTART:19161001T010000
+RDATE:19161001T010000
+RDATE:19170917T030000
+RDATE:19180916T030000
+RDATE:19421102T030000
+RDATE:19431004T030000
+RDATE:19440917T030000
+RDATE:19451118T030000
+RDATE:19461006T030000
+RDATE:19471005T030000
+RDATE:19481003T030000
+RDATE:19491002T030000
+RDATE:19790930T030000
+RDATE:19800928T030000
+RDATE:19810927T030000
+RDATE:19820926T030000
+RDATE:19830925T030000
+RDATE:19840930T030000
+RDATE:19850929T030000
+RDATE:19860928T030000
+RDATE:19870927T030000
+RDATE:19880925T030000
+RDATE:19890924T030000
+RDATE:19900930T030000
+RDATE:19910929T030000
+RDATE:19920927T030000
+RDATE:19930926T030000
+RDATE:19940925T030000
+RDATE:19950924T030000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0100
+TZOFFSETTO:+0100
+TZNAME:CET
+DTSTART:19790101T000000
+RDATE:19790101T000000
+END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Europe/Prague.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Europe/Volgograd.ics
===================================================================
--- libkcal/libical/zoneinfo/Europe/Volgograd.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 0)
+++ libkcal/libical/zoneinfo/Europe/Volgograd.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -0,0 +1,112 @@
+BEGIN:VCALENDAR
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
+VERSION:2.0
+BEGIN:VTIMEZONE
+TZID:/kde.org/Olson_20070327_1/Europe/Volgograd
+X-LIC-LOCATION:Europe/Volgograd
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0300
+TZOFFSETTO:+0400
+TZNAME:VOLST
+DTSTART:19930328T020000
+RRULE:FREQ=YEARLY;BYMONTH=3;BYDAY=-1SU
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0400
+TZOFFSETTO:+0300
+TZNAME:VOLT
+DTSTART:19961027T030000
+RRULE:FREQ=YEARLY;BYMONTH=10;BYDAY=-1SU
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+025740
+TZOFFSETTO:+0300
+TZNAME:TSAT
+DTSTART:19200103T000000
+RDATE:19200103T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0300
+TZOFFSETTO:+0300
+TZNAME:STAT
+DTSTART:19250406T000000
+RDATE:19250406T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0300
+TZOFFSETTO:+0400
+TZNAME:STAT
+DTSTART:19300621T000000
+RDATE:19300621T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0400
+TZOFFSETTO:+0400
+TZNAME:VOLT
+DTSTART:19611111T000000
+RDATE:19611111T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0400
+TZOFFSETTO:+0500
+TZNAME:VOLST
+DTSTART:19810401T000000
+RDATE:19810401T000000
+RDATE:19820401T000000
+RDATE:19830401T000000
+RDATE:19840401T000000
+RDATE:19850331T020000
+RDATE:19860330T020000
+RDATE:19870329T020000
+RDATE:19880327T020000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0500
+TZOFFSETTO:+0400
+TZNAME:VOLT
+DTSTART:19811001T000000
+RDATE:19811001T000000
+RDATE:19821001T000000
+RDATE:19831001T000000
+RDATE:19840930T030000
+RDATE:19850929T030000
+RDATE:19860928T030000
+RDATE:19870927T030000
+RDATE:19880925T030000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0400
+TZOFFSETTO:+0400
+TZNAME:VOLST
+DTSTART:19890326T020000
+RDATE:19890326T020000
+RDATE:19920329T020000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0400
+TZOFFSETTO:+0300
+TZNAME:VOLT
+DTSTART:19890924T030000
+RDATE:19890924T030000
+RDATE:19900930T030000
+RDATE:19920926T230000
+RDATE:19930926T030000
+RDATE:19940925T030000
+RDATE:19950924T030000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0300
+TZOFFSETTO:+0400
+TZNAME:VOLST
+DTSTART:19900325T020000
+RDATE:19900325T020000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0300
+TZOFFSETTO:+0400
+TZNAME:VOLT
+DTSTART:19910331T020000
+RDATE:19910331T020000
+END:STANDARD
+END:VTIMEZONE
+END:VCALENDAR
Index: libkcal/libical/zoneinfo/Europe/Nicosia.ics
===================================================================
--- libkcal/libical/zoneinfo/Europe/Nicosia.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Europe/Nicosia.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,22 +1,95 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/Europe/Nicosia
+TZID:/kde.org/Olson_20070327_1/Europe/Nicosia
 X-LIC-LOCATION:Europe/Nicosia
 BEGIN:STANDARD
 TZOFFSETFROM:+0300
 TZOFFSETTO:+0200
 TZNAME:EET
-DTSTART:19701025T040000
+DTSTART:19981025T040000
 RRULE:FREQ=YEARLY;BYMONTH=10;BYDAY=-1SU
 END:STANDARD
 BEGIN:DAYLIGHT
 TZOFFSETFROM:+0200
 TZOFFSETTO:+0300
 TZNAME:EEST
-DTSTART:19700329T030000
+DTSTART:19990328T030000
 RRULE:FREQ=YEARLY;BYMONTH=3;BYDAY=-1SU
 END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+021328
+TZOFFSETTO:+0200
+TZNAME:EET
+DTSTART:19211114T000000
+RDATE:19211114T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0200
+TZOFFSETTO:+0300
+TZNAME:EEST
+DTSTART:19750413T000000
+RDATE:19750413T000000
+RDATE:19760515T000000
+RDATE:19770403T000000
+RDATE:19780402T000000
+RDATE:19790401T000000
+RDATE:19800406T000000
+RDATE:19810329T000000
+RDATE:19820328T000000
+RDATE:19830327T000000
+RDATE:19840325T000000
+RDATE:19850331T000000
+RDATE:19860330T000000
+RDATE:19870329T000000
+RDATE:19880327T000000
+RDATE:19890326T000000
+RDATE:19900325T000000
+RDATE:19910331T000000
+RDATE:19920329T000000
+RDATE:19930328T000000
+RDATE:19940327T000000
+RDATE:19950326T000000
+RDATE:19960331T000000
+RDATE:19970330T000000
+RDATE:19980329T000000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0300
+TZOFFSETTO:+0200
+TZNAME:EET
+DTSTART:19751012T000000
+RDATE:19751012T000000
+RDATE:19761011T000000
+RDATE:19770925T000000
+RDATE:19781002T000000
+RDATE:19790930T000000
+RDATE:19800928T000000
+RDATE:19810927T000000
+RDATE:19820926T000000
+RDATE:19830925T000000
+RDATE:19840930T000000
+RDATE:19850929T000000
+RDATE:19860928T000000
+RDATE:19870927T000000
+RDATE:19880925T000000
+RDATE:19890924T000000
+RDATE:19900930T000000
+RDATE:19910929T000000
+RDATE:19920927T000000
+RDATE:19930926T000000
+RDATE:19940925T000000
+RDATE:19950924T000000
+RDATE:19960929T000000
+RDATE:19970928T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0300
+TZOFFSETTO:+0300
+TZNAME:EEST
+DTSTART:19980901T000000
+RDATE:19980901T000000
+END:DAYLIGHT
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Europe/Nicosia.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Europe/Vatican.ics
===================================================================
--- libkcal/libical/zoneinfo/Europe/Vatican.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Europe/Vatican.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,22 +1,131 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/Europe/Vatican
+TZID:/kde.org/Olson_20070327_1/Europe/Vatican
 X-LIC-LOCATION:Europe/Vatican
 BEGIN:DAYLIGHT
 TZOFFSETFROM:+0100
 TZOFFSETTO:+0200
 TZNAME:CEST
-DTSTART:19700329T020000
+DTSTART:19810329T020000
 RRULE:FREQ=YEARLY;BYMONTH=3;BYDAY=-1SU
 END:DAYLIGHT
 BEGIN:STANDARD
 TZOFFSETFROM:+0200
 TZOFFSETTO:+0100
 TZNAME:CET
-DTSTART:19701025T030000
+DTSTART:19961027T030000
 RRULE:FREQ=YEARLY;BYMONTH=10;BYDAY=-1SU
 END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+004956
+TZOFFSETTO:+004956
+TZNAME:RMT
+DTSTART:18660922T000000
+RDATE:18660922T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+004956
+TZOFFSETTO:+0100
+TZNAME:CET
+DTSTART:18931101T000000
+RDATE:18931101T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0100
+TZOFFSETTO:+0200
+TZNAME:CEST
+DTSTART:19160603T000000
+RDATE:19160603T000000
+RDATE:19170401T000000
+RDATE:19180310T000000
+RDATE:19190302T000000
+RDATE:19200321T000000
+RDATE:19400615T000000
+RDATE:19430329T020000
+RDATE:19440403T020000
+RDATE:19450402T020000
+RDATE:19460317T020000
+RDATE:19470316T000000
+RDATE:19480229T020000
+RDATE:19660522T000000
+RDATE:19670528T000000
+RDATE:19680526T000000
+RDATE:19690601T000000
+RDATE:19700531T000000
+RDATE:19710523T000000
+RDATE:19720528T000000
+RDATE:19730603T000000
+RDATE:19740526T000000
+RDATE:19750601T000000
+RDATE:19760530T000000
+RDATE:19770522T000000
+RDATE:19780528T000000
+RDATE:19790527T000000
+RDATE:19800406T020000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0200
+TZOFFSETTO:+0100
+TZNAME:CET
+DTSTART:19161001T010000
+RDATE:19161001T010000
+RDATE:19170930T010000
+RDATE:19181006T010000
+RDATE:19191005T010000
+RDATE:19200919T010000
+RDATE:19421102T030000
+RDATE:19431004T030000
+RDATE:19440917T010000
+RDATE:19450915T010000
+RDATE:19461006T030000
+RDATE:19471005T010000
+RDATE:19481003T030000
+RDATE:19660925T000000
+RDATE:19670924T000000
+RDATE:19680922T000000
+RDATE:19690928T000000
+RDATE:19700927T000000
+RDATE:19710926T010000
+RDATE:19721001T000000
+RDATE:19730930T000000
+RDATE:19740929T000000
+RDATE:19750928T010000
+RDATE:19760926T010000
+RDATE:19770925T010000
+RDATE:19781001T010000
+RDATE:19790930T010000
+RDATE:19800928T030000
+RDATE:19810927T030000
+RDATE:19820926T030000
+RDATE:19830925T030000
+RDATE:19840930T030000
+RDATE:19850929T030000
+RDATE:19860928T030000
+RDATE:19870927T030000
+RDATE:19880925T030000
+RDATE:19890924T030000
+RDATE:19900930T030000
+RDATE:19910929T030000
+RDATE:19920927T030000
+RDATE:19930926T030000
+RDATE:19940925T030000
+RDATE:19950924T030000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0200
+TZOFFSETTO:+0200
+TZNAME:CEST
+DTSTART:19440701T000000
+RDATE:19440701T000000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0100
+TZOFFSETTO:+0100
+TZNAME:CET
+DTSTART:19800101T000000
+RDATE:19800101T000000
+END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Europe/Vatican.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Europe/Lisbon.ics
===================================================================
--- libkcal/libical/zoneinfo/Europe/Lisbon.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Europe/Lisbon.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,22 +1,227 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/Europe/Lisbon
+TZID:/kde.org/Olson_20070327_1/Europe/Lisbon
 X-LIC-LOCATION:Europe/Lisbon
 BEGIN:STANDARD
 TZOFFSETFROM:+0100
 TZOFFSETTO:+0000
 TZNAME:WET
-DTSTART:19701025T020000
+DTSTART:19961027T020000
 RRULE:FREQ=YEARLY;BYMONTH=10;BYDAY=-1SU
 END:STANDARD
 BEGIN:DAYLIGHT
 TZOFFSETFROM:+0000
 TZOFFSETTO:+0100
 TZNAME:WEST
-DTSTART:19700329T010000
+DTSTART:19970330T010000
 RRULE:FREQ=YEARLY;BYMONTH=3;BYDAY=-1SU
 END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:-003632
+TZOFFSETTO:-003632
+TZNAME:LMT
+DTSTART:18840101T000000
+RDATE:18840101T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-003632
+TZOFFSETTO:+0000
+TZNAME:WET
+DTSTART:19120101T000000
+RDATE:19120101T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0000
+TZOFFSETTO:+0100
+TZNAME:WEST
+DTSTART:19160617T230000
+RDATE:19160617T230000
+RDATE:19170228T230000
+RDATE:19180301T230000
+RDATE:19190228T230000
+RDATE:19200229T230000
+RDATE:19210228T230000
+RDATE:19240416T230000
+RDATE:19260417T230000
+RDATE:19270409T230000
+RDATE:19280414T230000
+RDATE:19290420T230000
+RDATE:19310418T230000
+RDATE:19320402T230000
+RDATE:19340407T230000
+RDATE:19350330T230000
+RDATE:19360418T230000
+RDATE:19370403T230000
+RDATE:19380326T230000
+RDATE:19390415T230000
+RDATE:19400224T230000
+RDATE:19410405T230000
+RDATE:19420314T230000
+RDATE:19430313T230000
+RDATE:19440311T230000
+RDATE:19450310T230000
+RDATE:19460406T230000
+RDATE:19470406T020000
+RDATE:19480404T020000
+RDATE:19490403T020000
+RDATE:19510401T020000
+RDATE:19520406T020000
+RDATE:19530405T020000
+RDATE:19540404T020000
+RDATE:19550403T020000
+RDATE:19560401T020000
+RDATE:19570407T020000
+RDATE:19580406T020000
+RDATE:19590405T020000
+RDATE:19600403T020000
+RDATE:19610402T020000
+RDATE:19620401T020000
+RDATE:19630407T020000
+RDATE:19640405T020000
+RDATE:19650404T020000
+RDATE:19770327T000000
+RDATE:19780402T000000
+RDATE:19790401T000000
+RDATE:19800330T000000
+RDATE:19810329T010000
+RDATE:19820328T010000
+RDATE:19830327T020000
+RDATE:19840325T010000
+RDATE:19850331T010000
+RDATE:19860330T010000
+RDATE:19870329T010000
+RDATE:19880327T010000
+RDATE:19890326T010000
+RDATE:19900325T010000
+RDATE:19910331T010000
+RDATE:19920329T010000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0100
+TZOFFSETTO:+0000
+TZNAME:WET
+DTSTART:19161101T010000
+RDATE:19161101T010000
+RDATE:19171015T000000
+RDATE:19181015T000000
+RDATE:19191015T000000
+RDATE:19201015T000000
+RDATE:19211015T000000
+RDATE:19241015T000000
+RDATE:19261003T000000
+RDATE:19271002T000000
+RDATE:19281007T000000
+RDATE:19291006T000000
+RDATE:19311004T000000
+RDATE:19321002T000000
+RDATE:19341007T000000
+RDATE:19351006T000000
+RDATE:19361004T000000
+RDATE:19371003T000000
+RDATE:19381002T000000
+RDATE:19391119T000000
+RDATE:19401006T000000
+RDATE:19411006T000000
+RDATE:19421025T000000
+RDATE:19431031T000000
+RDATE:19441029T000000
+RDATE:19451028T000000
+RDATE:19461006T000000
+RDATE:19471005T030000
+RDATE:19481003T030000
+RDATE:19491002T030000
+RDATE:19511007T030000
+RDATE:19521005T030000
+RDATE:19531004T030000
+RDATE:19541003T030000
+RDATE:19551002T030000
+RDATE:19561007T030000
+RDATE:19571006T030000
+RDATE:19581005T030000
+RDATE:19591004T030000
+RDATE:19601002T030000
+RDATE:19611001T030000
+RDATE:19621007T030000
+RDATE:19631006T030000
+RDATE:19641004T030000
+RDATE:19651003T030000
+RDATE:19760926T010000
+RDATE:19770925T010000
+RDATE:19781001T010000
+RDATE:19790930T020000
+RDATE:19800928T020000
+RDATE:19810927T020000
+RDATE:19820926T020000
+RDATE:19830925T020000
+RDATE:19840930T020000
+RDATE:19850929T020000
+RDATE:19860928T020000
+RDATE:19870927T020000
+RDATE:19880925T020000
+RDATE:19890924T020000
+RDATE:19900930T020000
+RDATE:19910929T020000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0100
+TZOFFSETTO:+0200
+TZNAME:WEMT
+DTSTART:19420425T230000
+RDATE:19420425T230000
+RDATE:19430417T230000
+RDATE:19440422T230000
+RDATE:19450421T230000
+END:DAYLIGHT
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0200
+TZOFFSETTO:+0100
+TZNAME:WEST
+DTSTART:19420816T000000
+RDATE:19420816T000000
+RDATE:19430829T000000
+RDATE:19440827T000000
+RDATE:19450826T000000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0000
+TZOFFSETTO:+0100
+TZNAME:CET
+DTSTART:19660403T020000
+RDATE:19660403T020000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0100
+TZOFFSETTO:+0100
+TZNAME:CET
+DTSTART:19920927T020000
+RDATE:19920927T020000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0100
+TZOFFSETTO:+0200
+TZNAME:CEST
+DTSTART:19930328T020000
+RDATE:19930328T020000
+RDATE:19940327T020000
+RDATE:19950326T020000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0200
+TZOFFSETTO:+0100
+TZNAME:CET
+DTSTART:19930926T030000
+RDATE:19930926T030000
+RDATE:19940925T030000
+RDATE:19950924T030000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0100
+TZOFFSETTO:+0100
+TZNAME:WEST
+DTSTART:19960331T020000
+RDATE:19960331T020000
+END:DAYLIGHT
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Europe/Lisbon.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Europe/Andorra.ics
===================================================================
--- libkcal/libical/zoneinfo/Europe/Andorra.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Europe/Andorra.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,22 +1,53 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/Europe/Andorra
+TZID:/kde.org/Olson_20070327_1/Europe/Andorra
 X-LIC-LOCATION:Europe/Andorra
 BEGIN:DAYLIGHT
 TZOFFSETFROM:+0100
 TZOFFSETTO:+0200
 TZNAME:CEST
-DTSTART:19700329T020000
+DTSTART:19850331T020000
 RRULE:FREQ=YEARLY;BYMONTH=3;BYDAY=-1SU
 END:DAYLIGHT
 BEGIN:STANDARD
 TZOFFSETFROM:+0200
 TZOFFSETTO:+0100
 TZNAME:CET
-DTSTART:19701025T030000
+DTSTART:19961027T030000
 RRULE:FREQ=YEARLY;BYMONTH=10;BYDAY=-1SU
 END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+000604
+TZOFFSETTO:+0000
+TZNAME:WET
+DTSTART:19010101T000000
+RDATE:19010101T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0000
+TZOFFSETTO:+0100
+TZNAME:CET
+DTSTART:19460930T000000
+RDATE:19460930T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0200
+TZOFFSETTO:+0100
+TZNAME:CET
+DTSTART:19850929T030000
+RDATE:19850929T030000
+RDATE:19860928T030000
+RDATE:19870927T030000
+RDATE:19880925T030000
+RDATE:19890924T030000
+RDATE:19900930T030000
+RDATE:19910929T030000
+RDATE:19920927T030000
+RDATE:19930926T030000
+RDATE:19940925T030000
+RDATE:19950924T030000
+END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Europe/Andorra.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Europe/San_Marino.ics
===================================================================
--- libkcal/libical/zoneinfo/Europe/San_Marino.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Europe/San_Marino.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,22 +1,131 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/Europe/San_Marino
+TZID:/kde.org/Olson_20070327_1/Europe/San_Marino
 X-LIC-LOCATION:Europe/San_Marino
 BEGIN:DAYLIGHT
 TZOFFSETFROM:+0100
 TZOFFSETTO:+0200
 TZNAME:CEST
-DTSTART:19700329T020000
+DTSTART:19810329T020000
 RRULE:FREQ=YEARLY;BYMONTH=3;BYDAY=-1SU
 END:DAYLIGHT
 BEGIN:STANDARD
 TZOFFSETFROM:+0200
 TZOFFSETTO:+0100
 TZNAME:CET
-DTSTART:19701025T030000
+DTSTART:19961027T030000
 RRULE:FREQ=YEARLY;BYMONTH=10;BYDAY=-1SU
 END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+004956
+TZOFFSETTO:+004956
+TZNAME:RMT
+DTSTART:18660922T000000
+RDATE:18660922T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+004956
+TZOFFSETTO:+0100
+TZNAME:CET
+DTSTART:18931101T000000
+RDATE:18931101T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0100
+TZOFFSETTO:+0200
+TZNAME:CEST
+DTSTART:19160603T000000
+RDATE:19160603T000000
+RDATE:19170401T000000
+RDATE:19180310T000000
+RDATE:19190302T000000
+RDATE:19200321T000000
+RDATE:19400615T000000
+RDATE:19430329T020000
+RDATE:19440403T020000
+RDATE:19450402T020000
+RDATE:19460317T020000
+RDATE:19470316T000000
+RDATE:19480229T020000
+RDATE:19660522T000000
+RDATE:19670528T000000
+RDATE:19680526T000000
+RDATE:19690601T000000
+RDATE:19700531T000000
+RDATE:19710523T000000
+RDATE:19720528T000000
+RDATE:19730603T000000
+RDATE:19740526T000000
+RDATE:19750601T000000
+RDATE:19760530T000000
+RDATE:19770522T000000
+RDATE:19780528T000000
+RDATE:19790527T000000
+RDATE:19800406T020000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0200
+TZOFFSETTO:+0100
+TZNAME:CET
+DTSTART:19161001T010000
+RDATE:19161001T010000
+RDATE:19170930T010000
+RDATE:19181006T010000
+RDATE:19191005T010000
+RDATE:19200919T010000
+RDATE:19421102T030000
+RDATE:19431004T030000
+RDATE:19440917T010000
+RDATE:19450915T010000
+RDATE:19461006T030000
+RDATE:19471005T010000
+RDATE:19481003T030000
+RDATE:19660925T000000
+RDATE:19670924T000000
+RDATE:19680922T000000
+RDATE:19690928T000000
+RDATE:19700927T000000
+RDATE:19710926T010000
+RDATE:19721001T000000
+RDATE:19730930T000000
+RDATE:19740929T000000
+RDATE:19750928T010000
+RDATE:19760926T010000
+RDATE:19770925T010000
+RDATE:19781001T010000
+RDATE:19790930T010000
+RDATE:19800928T030000
+RDATE:19810927T030000
+RDATE:19820926T030000
+RDATE:19830925T030000
+RDATE:19840930T030000
+RDATE:19850929T030000
+RDATE:19860928T030000
+RDATE:19870927T030000
+RDATE:19880925T030000
+RDATE:19890924T030000
+RDATE:19900930T030000
+RDATE:19910929T030000
+RDATE:19920927T030000
+RDATE:19930926T030000
+RDATE:19940925T030000
+RDATE:19950924T030000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0200
+TZOFFSETTO:+0200
+TZNAME:CEST
+DTSTART:19440701T000000
+RDATE:19440701T000000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0100
+TZOFFSETTO:+0100
+TZNAME:CET
+DTSTART:19800101T000000
+RDATE:19800101T000000
+END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Europe/San_Marino.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Europe/Luxembourg.ics
===================================================================
--- libkcal/libical/zoneinfo/Europe/Luxembourg.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Europe/Luxembourg.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,22 +1,155 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/Europe/Luxembourg
+TZID:/kde.org/Olson_20070327_1/Europe/Luxembourg
 X-LIC-LOCATION:Europe/Luxembourg
 BEGIN:DAYLIGHT
 TZOFFSETFROM:+0100
 TZOFFSETTO:+0200
 TZNAME:CEST
-DTSTART:19700329T020000
+DTSTART:19810329T020000
 RRULE:FREQ=YEARLY;BYMONTH=3;BYDAY=-1SU
 END:DAYLIGHT
 BEGIN:STANDARD
 TZOFFSETFROM:+0200
 TZOFFSETTO:+0100
 TZNAME:CET
-DTSTART:19701025T030000
+DTSTART:19961027T030000
 RRULE:FREQ=YEARLY;BYMONTH=10;BYDAY=-1SU
 END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+002436
+TZOFFSETTO:+0100
+TZNAME:CET
+DTSTART:19040601T000000
+RDATE:19040601T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0100
+TZOFFSETTO:+0200
+TZNAME:CEST
+DTSTART:19160514T230000
+RDATE:19160514T230000
+RDATE:19170428T230000
+RDATE:19180415T020000
+RDATE:19450402T020000
+RDATE:19460519T020000
+RDATE:19770403T020000
+RDATE:19780402T020000
+RDATE:19790401T020000
+RDATE:19800406T020000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0200
+TZOFFSETTO:+0100
+TZNAME:CET
+DTSTART:19161001T010000
+RDATE:19161001T010000
+RDATE:19170917T010000
+RDATE:19180916T030000
+RDATE:19440918T030000
+RDATE:19450916T030000
+RDATE:19461007T030000
+RDATE:19770925T030000
+RDATE:19781001T030000
+RDATE:19790930T030000
+RDATE:19800928T030000
+RDATE:19810927T030000
+RDATE:19820926T030000
+RDATE:19830925T030000
+RDATE:19840930T030000
+RDATE:19850929T030000
+RDATE:19860928T030000
+RDATE:19870927T030000
+RDATE:19880925T030000
+RDATE:19890924T030000
+RDATE:19900930T030000
+RDATE:19910929T030000
+RDATE:19920927T030000
+RDATE:19930926T030000
+RDATE:19940925T030000
+RDATE:19950924T030000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0100
+TZOFFSETTO:+0000
+TZNAME:WET
+DTSTART:19181125T000000
+RDATE:19181125T000000
+RDATE:19191005T030000
+RDATE:19201024T020000
+RDATE:19211026T020000
+RDATE:19221008T010000
+RDATE:19231007T020000
+RDATE:19241005T010000
+RDATE:19251004T010000
+RDATE:19261003T010000
+RDATE:19271002T010000
+RDATE:19281007T010000
+RDATE:19291006T030000
+RDATE:19301005T030000
+RDATE:19311004T030000
+RDATE:19321002T030000
+RDATE:19331008T030000
+RDATE:19341007T030000
+RDATE:19351006T030000
+RDATE:19361004T030000
+RDATE:19371003T030000
+RDATE:19381002T030000
+RDATE:19391119T030000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0000
+TZOFFSETTO:+0100
+TZNAME:WEST
+DTSTART:19190301T230000
+RDATE:19190301T230000
+RDATE:19200214T230000
+RDATE:19210314T230000
+RDATE:19220325T230000
+RDATE:19230421T230000
+RDATE:19240329T230000
+RDATE:19250405T230000
+RDATE:19260417T230000
+RDATE:19270409T230000
+RDATE:19280414T230000
+RDATE:19290420T230000
+RDATE:19300413T020000
+RDATE:19310419T020000
+RDATE:19320403T020000
+RDATE:19330326T020000
+RDATE:19340408T020000
+RDATE:19350331T020000
+RDATE:19360419T020000
+RDATE:19370404T020000
+RDATE:19380327T020000
+RDATE:19390416T020000
+RDATE:19400225T020000
+END:DAYLIGHT
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0100
+TZOFFSETTO:+0200
+TZNAME:WEST
+DTSTART:19400514T030000
+RDATE:19400514T030000
+RDATE:19430329T020000
+RDATE:19440403T020000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0200
+TZOFFSETTO:+0100
+TZNAME:WET
+DTSTART:19421102T030000
+RDATE:19421102T030000
+RDATE:19431004T030000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0100
+TZOFFSETTO:+0100
+TZNAME:CET
+DTSTART:19770101T000000
+RDATE:19770101T000000
+END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Europe/Luxembourg.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Europe/Vilnius.ics
===================================================================
--- libkcal/libical/zoneinfo/Europe/Vilnius.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Europe/Vilnius.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +1,170 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/Europe/Vilnius
+TZID:/kde.org/Olson_20070327_1/Europe/Vilnius
 X-LIC-LOCATION:Europe/Vilnius
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0200
+TZOFFSETTO:+0300
+TZNAME:EEST
+DTSTART:20030330T030000
+RRULE:FREQ=YEARLY;BYMONTH=3;BYDAY=-1SU
+END:DAYLIGHT
 BEGIN:STANDARD
+TZOFFSETFROM:+0300
+TZOFFSETTO:+0200
+TZNAME:EET
+DTSTART:20031026T040000
+RRULE:FREQ=YEARLY;BYMONTH=10;BYDAY=-1SU
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+014116
+TZOFFSETTO:+0124
+TZNAME:WMT
+DTSTART:18800101T000000
+RDATE:18800101T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0124
+TZOFFSETTO:+013536
+TZNAME:KMT
+DTSTART:19170101T000000
+RDATE:19170101T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+013536
+TZOFFSETTO:+0100
+TZNAME:CET
+DTSTART:19191010T000000
+RDATE:19191010T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0100
+TZOFFSETTO:+0200
+TZNAME:EET
+DTSTART:19200712T000000
+RDATE:19200712T000000
+END:STANDARD
+BEGIN:STANDARD
 TZOFFSETFROM:+0200
+TZOFFSETTO:+0100
+TZNAME:CET
+DTSTART:19201009T000000
+RDATE:19201009T000000
+RDATE:19421102T030000
+RDATE:19431004T030000
+RDATE:19981025T030000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0100
+TZOFFSETTO:+0300
+TZNAME:MSK
+DTSTART:19400803T000000
+RDATE:19400803T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0300
 TZOFFSETTO:+0200
+TZNAME:CEST
+DTSTART:19410624T000000
+RDATE:19410624T000000
+END:DAYLIGHT
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0100
+TZOFFSETTO:+0200
+TZNAME:CEST
+DTSTART:19430329T020000
+RDATE:19430329T020000
+RDATE:19440403T020000
+RDATE:19990328T020000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0200
+TZOFFSETTO:+0300
+TZNAME:MSK
+DTSTART:19440801T000000
+RDATE:19440801T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0300
+TZOFFSETTO:+0400
+TZNAME:MSD
+DTSTART:19810401T000000
+RDATE:19810401T000000
+RDATE:19820401T000000
+RDATE:19830401T000000
+RDATE:19840401T000000
+RDATE:19850331T020000
+RDATE:19860330T020000
+RDATE:19870329T020000
+RDATE:19880327T020000
+RDATE:19890326T020000
+RDATE:19900325T020000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0400
+TZOFFSETTO:+0300
+TZNAME:MSK
+DTSTART:19811001T000000
+RDATE:19811001T000000
+RDATE:19821001T000000
+RDATE:19831001T000000
+RDATE:19840930T030000
+RDATE:19850929T030000
+RDATE:19860928T030000
+RDATE:19870927T030000
+RDATE:19880925T030000
+RDATE:19890924T030000
+RDATE:19900930T030000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0300
+TZOFFSETTO:+0300
+TZNAME:EEST
+DTSTART:19910331T020000
+RDATE:19910331T020000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0300
+TZOFFSETTO:+0200
 TZNAME:EET
-DTSTART:19700101T000000
+DTSTART:19910929T030000
+RDATE:19910929T030000
+RDATE:19920927T030000
+RDATE:19930926T030000
+RDATE:19940925T030000
+RDATE:19950924T030000
+RDATE:19961027T030000
+RDATE:19971026T030000
 END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0200
+TZOFFSETTO:+0300
+TZNAME:EEST
+DTSTART:19920329T020000
+RDATE:19920329T020000
+RDATE:19930328T020000
+RDATE:19940327T020000
+RDATE:19950326T020000
+RDATE:19960331T020000
+RDATE:19970330T020000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0200
+TZOFFSETTO:+0200
+TZNAME:EET
+DTSTART:19980101T000000
+RDATE:19980101T000000
+RDATE:19991031T030000
+RDATE:20030101T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0200
+TZOFFSETTO:+0200
+TZNAME:CEST
+DTSTART:19980329T030000
+RDATE:19980329T030000
+END:DAYLIGHT
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Europe/Vilnius.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Europe/Skopje.ics
===================================================================
--- libkcal/libical/zoneinfo/Europe/Skopje.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Europe/Skopje.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,22 +1,69 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/Europe/Skopje
+TZID:/kde.org/Olson_20070327_1/Europe/Skopje
 X-LIC-LOCATION:Europe/Skopje
 BEGIN:DAYLIGHT
 TZOFFSETFROM:+0100
 TZOFFSETTO:+0200
 TZNAME:CEST
-DTSTART:19700329T020000
+DTSTART:19830327T020000
 RRULE:FREQ=YEARLY;BYMONTH=3;BYDAY=-1SU
 END:DAYLIGHT
 BEGIN:STANDARD
 TZOFFSETFROM:+0200
 TZOFFSETTO:+0100
 TZNAME:CET
-DTSTART:19701025T030000
+DTSTART:19961027T030000
 RRULE:FREQ=YEARLY;BYMONTH=10;BYDAY=-1SU
 END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0122
+TZOFFSETTO:+0100
+TZNAME:CET
+DTSTART:18840101T000000
+RDATE:18840101T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0100
+TZOFFSETTO:+0200
+TZNAME:CEST
+DTSTART:19410418T230000
+RDATE:19410418T230000
+RDATE:19430329T020000
+RDATE:19440403T020000
+RDATE:19450508T020000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0200
+TZOFFSETTO:+0100
+TZNAME:CET
+DTSTART:19421102T030000
+RDATE:19421102T030000
+RDATE:19431004T030000
+RDATE:19441002T030000
+RDATE:19450916T030000
+RDATE:19830925T030000
+RDATE:19840930T030000
+RDATE:19850929T030000
+RDATE:19860928T030000
+RDATE:19870927T030000
+RDATE:19880925T030000
+RDATE:19890924T030000
+RDATE:19900930T030000
+RDATE:19910929T030000
+RDATE:19920927T030000
+RDATE:19930926T030000
+RDATE:19940925T030000
+RDATE:19950924T030000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0100
+TZOFFSETTO:+0100
+TZNAME:CET
+DTSTART:19821127T000000
+RDATE:19821127T000000
+END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Europe/Skopje.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Europe/Mariehamn.ics
===================================================================
--- libkcal/libical/zoneinfo/Europe/Mariehamn.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 0)
+++ libkcal/libical/zoneinfo/Europe/Mariehamn.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -0,0 +1,72 @@
+BEGIN:VCALENDAR
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
+VERSION:2.0
+BEGIN:VTIMEZONE
+TZID:/kde.org/Olson_20070327_1/Europe/Mariehamn
+X-LIC-LOCATION:Europe/Mariehamn
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0200
+TZOFFSETTO:+0300
+TZNAME:EEST
+DTSTART:19810329T030000
+RRULE:FREQ=YEARLY;BYMONTH=3;BYDAY=-1SU
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0300
+TZOFFSETTO:+0200
+TZNAME:EET
+DTSTART:19961027T040000
+RRULE:FREQ=YEARLY;BYMONTH=10;BYDAY=-1SU
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+013952
+TZOFFSETTO:+013952
+TZNAME:HMT
+DTSTART:18780531T000000
+RDATE:18780531T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+013952
+TZOFFSETTO:+0200
+TZNAME:EET
+DTSTART:19210501T000000
+RDATE:19210501T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0200
+TZOFFSETTO:+0300
+TZNAME:EEST
+DTSTART:19420403T000000
+RDATE:19420403T000000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0300
+TZOFFSETTO:+0200
+TZNAME:EET
+DTSTART:19421003T000000
+RDATE:19421003T000000
+RDATE:19810927T040000
+RDATE:19820926T040000
+RDATE:19830925T040000
+RDATE:19840930T040000
+RDATE:19850929T040000
+RDATE:19860928T040000
+RDATE:19870927T040000
+RDATE:19880925T040000
+RDATE:19890924T040000
+RDATE:19900930T040000
+RDATE:19910929T040000
+RDATE:19920927T040000
+RDATE:19930926T040000
+RDATE:19940925T040000
+RDATE:19950924T040000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0200
+TZOFFSETTO:+0200
+TZNAME:EET
+DTSTART:19810329T020000
+RDATE:19810329T020000
+END:STANDARD
+END:VTIMEZONE
+END:VCALENDAR
Index: libkcal/libical/zoneinfo/Europe/Guernsey.ics
===================================================================
--- libkcal/libical/zoneinfo/Europe/Guernsey.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 0)
+++ libkcal/libical/zoneinfo/Europe/Guernsey.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -0,0 +1,208 @@
+BEGIN:VCALENDAR
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
+VERSION:2.0
+BEGIN:VTIMEZONE
+TZID:/kde.org/Olson_20070327_1/Europe/Guernsey
+X-LIC-LOCATION:Europe/Guernsey
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0000
+TZOFFSETTO:+0100
+TZNAME:BST
+DTSTART:19810329T010000
+RRULE:FREQ=YEARLY;BYMONTH=3;BYDAY=-1SU
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0100
+TZOFFSETTO:+0000
+TZNAME:GMT
+DTSTART:19961027T020000
+RRULE:FREQ=YEARLY;BYMONTH=10;BYDAY=-1SU
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-000115
+TZOFFSETTO:+0000
+TZNAME:GMT
+DTSTART:18471201T000000
+RDATE:18471201T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0000
+TZOFFSETTO:+0100
+TZNAME:BST
+DTSTART:19160521T020000
+RDATE:19160521T020000
+RDATE:19170408T020000
+RDATE:19180324T020000
+RDATE:19190330T020000
+RDATE:19200328T020000
+RDATE:19210403T020000
+RDATE:19220326T020000
+RDATE:19230422T020000
+RDATE:19240413T020000
+RDATE:19250419T020000
+RDATE:19260418T020000
+RDATE:19270410T020000
+RDATE:19280422T020000
+RDATE:19290421T020000
+RDATE:19300413T020000
+RDATE:19310419T020000
+RDATE:19320417T020000
+RDATE:19330409T020000
+RDATE:19340422T020000
+RDATE:19350414T020000
+RDATE:19360419T020000
+RDATE:19370418T020000
+RDATE:19380410T020000
+RDATE:19390416T020000
+RDATE:19400225T020000
+RDATE:19460414T020000
+RDATE:19470316T020000
+RDATE:19480314T020000
+RDATE:19490403T020000
+RDATE:19500416T020000
+RDATE:19510415T020000
+RDATE:19520420T020000
+RDATE:19530419T020000
+RDATE:19540411T020000
+RDATE:19550417T020000
+RDATE:19560422T020000
+RDATE:19570414T020000
+RDATE:19580420T020000
+RDATE:19590419T020000
+RDATE:19600410T020000
+RDATE:19610326T020000
+RDATE:19620325T020000
+RDATE:19630331T020000
+RDATE:19640322T020000
+RDATE:19650321T020000
+RDATE:19660320T020000
+RDATE:19670319T020000
+RDATE:19680218T020000
+RDATE:19720319T020000
+RDATE:19730318T020000
+RDATE:19740317T020000
+RDATE:19750316T020000
+RDATE:19760321T020000
+RDATE:19770320T020000
+RDATE:19780319T020000
+RDATE:19790318T020000
+RDATE:19800316T020000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0100
+TZOFFSETTO:+0000
+TZNAME:GMT
+DTSTART:19161001T030000
+RDATE:19161001T030000
+RDATE:19170917T030000
+RDATE:19180930T030000
+RDATE:19190929T030000
+RDATE:19201025T030000
+RDATE:19211003T030000
+RDATE:19221008T030000
+RDATE:19230916T030000
+RDATE:19240921T030000
+RDATE:19251004T030000
+RDATE:19261003T030000
+RDATE:19271002T030000
+RDATE:19281007T030000
+RDATE:19291006T030000
+RDATE:19301005T030000
+RDATE:19311004T030000
+RDATE:19321002T030000
+RDATE:19331008T030000
+RDATE:19341007T030000
+RDATE:19351006T030000
+RDATE:19361004T030000
+RDATE:19371003T030000
+RDATE:19381002T030000
+RDATE:19391119T030000
+RDATE:19451007T030000
+RDATE:19461006T030000
+RDATE:19471102T030000
+RDATE:19481031T030000
+RDATE:19491030T030000
+RDATE:19501022T030000
+RDATE:19511021T030000
+RDATE:19521026T030000
+RDATE:19531004T030000
+RDATE:19541003T030000
+RDATE:19551002T030000
+RDATE:19561007T030000
+RDATE:19571006T030000
+RDATE:19581005T030000
+RDATE:19591004T030000
+RDATE:19601002T030000
+RDATE:19611029T030000
+RDATE:19621028T030000
+RDATE:19631027T030000
+RDATE:19641025T030000
+RDATE:19651024T030000
+RDATE:19661023T030000
+RDATE:19671029T030000
+RDATE:19711031T030000
+RDATE:19721029T030000
+RDATE:19731028T030000
+RDATE:19741027T030000
+RDATE:19751026T030000
+RDATE:19761024T030000
+RDATE:19771023T030000
+RDATE:19781029T030000
+RDATE:19791028T030000
+RDATE:19801026T030000
+RDATE:19811025T020000
+RDATE:19821024T020000
+RDATE:19831023T020000
+RDATE:19841028T020000
+RDATE:19851027T020000
+RDATE:19861026T020000
+RDATE:19871025T020000
+RDATE:19881023T020000
+RDATE:19891029T020000
+RDATE:19901028T020000
+RDATE:19911027T020000
+RDATE:19921025T020000
+RDATE:19931024T020000
+RDATE:19941023T020000
+RDATE:19951022T020000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0100
+TZOFFSETTO:+0200
+TZNAME:BDST
+DTSTART:19410504T020000
+RDATE:19410504T020000
+RDATE:19420405T020000
+RDATE:19430404T020000
+RDATE:19440402T020000
+RDATE:19450402T020000
+RDATE:19470413T020000
+END:DAYLIGHT
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0200
+TZOFFSETTO:+0100
+TZNAME:BST
+DTSTART:19410810T030000
+RDATE:19410810T030000
+RDATE:19420809T030000
+RDATE:19430815T030000
+RDATE:19440917T030000
+RDATE:19450715T030000
+RDATE:19470810T030000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0100
+TZOFFSETTO:+0100
+TZNAME:BST
+DTSTART:19681027T000000
+RDATE:19681027T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0000
+TZOFFSETTO:+0000
+TZNAME:GMT
+DTSTART:19960101T000000
+RDATE:19960101T000000
+END:STANDARD
+END:VTIMEZONE
+END:VCALENDAR
Index: libkcal/libical/zoneinfo/Europe/Sofia.ics
===================================================================
--- libkcal/libical/zoneinfo/Europe/Sofia.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Europe/Sofia.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,22 +1,123 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/Europe/Sofia
+TZID:/kde.org/Olson_20070327_1/Europe/Sofia
 X-LIC-LOCATION:Europe/Sofia
 BEGIN:DAYLIGHT
 TZOFFSETFROM:+0200
 TZOFFSETTO:+0300
 TZNAME:EEST
-DTSTART:19700329T030000
+DTSTART:19970330T030000
 RRULE:FREQ=YEARLY;BYMONTH=3;BYDAY=-1SU
 END:DAYLIGHT
 BEGIN:STANDARD
 TZOFFSETFROM:+0300
 TZOFFSETTO:+0200
 TZNAME:EET
-DTSTART:19701025T040000
+DTSTART:19971026T040000
 RRULE:FREQ=YEARLY;BYMONTH=10;BYDAY=-1SU
 END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+013316
+TZOFFSETTO:+015656
+TZNAME:IMT
+DTSTART:18800101T000000
+RDATE:18800101T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+015656
+TZOFFSETTO:+0200
+TZNAME:EET
+DTSTART:18941130T000000
+RDATE:18941130T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0200
+TZOFFSETTO:+0100
+TZNAME:CET
+DTSTART:19421102T020000
+RDATE:19421102T020000
+RDATE:19431004T030000
+RDATE:19441002T030000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0100
+TZOFFSETTO:+0200
+TZNAME:CEST
+DTSTART:19430329T020000
+RDATE:19430329T020000
+RDATE:19440403T020000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0100
+TZOFFSETTO:+0200
+TZNAME:EET
+DTSTART:19450402T030000
+RDATE:19450402T030000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0200
+TZOFFSETTO:+0300
+TZNAME:EEST
+DTSTART:19790331T230000
+RDATE:19790331T230000
+RDATE:19800405T230000
+RDATE:19810404T230000
+RDATE:19820403T230000
+RDATE:19830327T020000
+RDATE:19840325T020000
+RDATE:19850331T020000
+RDATE:19860330T020000
+RDATE:19870329T020000
+RDATE:19880327T020000
+RDATE:19890326T020000
+RDATE:19900325T020000
+RDATE:19910331T000000
+RDATE:19920329T000000
+RDATE:19930328T000000
+RDATE:19940327T000000
+RDATE:19950326T000000
+RDATE:19960331T000000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0300
+TZOFFSETTO:+0200
+TZNAME:EET
+DTSTART:19791001T010000
+RDATE:19791001T010000
+RDATE:19800929T010000
+RDATE:19810927T020000
+RDATE:19820926T030000
+RDATE:19830925T030000
+RDATE:19840930T030000
+RDATE:19850929T030000
+RDATE:19860928T030000
+RDATE:19870927T030000
+RDATE:19880925T030000
+RDATE:19890924T030000
+RDATE:19900930T030000
+RDATE:19910929T000000
+RDATE:19920927T000000
+RDATE:19930926T000000
+RDATE:19940925T000000
+RDATE:19950924T000000
+RDATE:19961027T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0300
+TZOFFSETTO:+0300
+TZNAME:EEST
+DTSTART:19820926T020000
+RDATE:19820926T020000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0200
+TZOFFSETTO:+0200
+TZNAME:EET
+DTSTART:19910101T000000
+RDATE:19910101T000000
+RDATE:19970101T000000
+END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Europe/Sofia.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Europe/Tallinn.ics
===================================================================
--- libkcal/libical/zoneinfo/Europe/Tallinn.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Europe/Tallinn.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,22 +1,160 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20020614_6/Europe/Tallinn
+TZID:/kde.org/Olson_20070327_1/Europe/Tallinn
 X-LIC-LOCATION:Europe/Tallinn
 BEGIN:DAYLIGHT
 TZOFFSETFROM:+0200
 TZOFFSETTO:+0300
 TZNAME:EEST
-DTSTART:19700329T030000
+DTSTART:20020331T030000
 RRULE:FREQ=YEARLY;BYMONTH=3;BYDAY=-1SU
 END:DAYLIGHT
 BEGIN:STANDARD
 TZOFFSETFROM:+0300
 TZOFFSETTO:+0200
 TZNAME:EET
-DTSTART:19701025T040000
+DTSTART:20021027T040000
 RRULE:FREQ=YEARLY;BYMONTH=10;BYDAY=-1SU
 END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0139
+TZOFFSETTO:+0139
+TZNAME:TMT
+DTSTART:18800101T000000
+RDATE:18800101T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0139
+TZOFFSETTO:+0100
+TZNAME:CET
+DTSTART:19180201T000000
+RDATE:19180201T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0100
+TZOFFSETTO:+0200
+TZNAME:CEST
+DTSTART:19180415T020000
+RDATE:19180415T020000
+RDATE:19430329T020000
+RDATE:19440403T020000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0200
+TZOFFSETTO:+0100
+TZNAME:CET
+DTSTART:19180916T030000
+RDATE:19180916T030000
+RDATE:19421102T030000
+RDATE:19431004T030000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0100
+TZOFFSETTO:+0139
+TZNAME:TMT
+DTSTART:19190701T000000
+RDATE:19190701T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0139
+TZOFFSETTO:+0200
+TZNAME:EET
+DTSTART:19210501T000000
+RDATE:19210501T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0200
+TZOFFSETTO:+0300
+TZNAME:MSK
+DTSTART:19400806T000000
+RDATE:19400806T000000
+RDATE:19440922T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0300
+TZOFFSETTO:+0200
+TZNAME:CEST
+DTSTART:19410915T000000
+RDATE:19410915T000000
+END:DAYLIGHT
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0300
+TZOFFSETTO:+0400
+TZNAME:MSD
+DTSTART:19810401T000000
+RDATE:19810401T000000
+RDATE:19820401T000000
+RDATE:19830401T000000
+RDATE:19840401T000000
+RDATE:19850331T020000
+RDATE:19860330T020000
+RDATE:19870329T020000
+RDATE:19880327T020000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0400
+TZOFFSETTO:+0300
+TZNAME:MSK
+DTSTART:19811001T000000
+RDATE:19811001T000000
+RDATE:19821001T000000
+RDATE:19831001T000000
+RDATE:19840930T030000
+RDATE:19850929T030000
+RDATE:19860928T030000
+RDATE:19870927T030000
+RDATE:19880925T030000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0300
+TZOFFSETTO:+0300
+TZNAME:EEST
+DTSTART:19890326T020000
+RDATE:19890326T020000
+RDATE:19980922T000000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0300
+TZOFFSETTO:+0200
+TZNAME:EET
+DTSTART:19890924T030000
+RDATE:19890924T030000
+RDATE:19900930T030000
+RDATE:19910929T030000
+RDATE:19920927T030000
+RDATE:19930926T030000
+RDATE:19940925T030000
+RDATE:19950924T030000
+RDATE:19961027T030000
+RDATE:19971026T030000
+RDATE:19981025T040000
+RDATE:19991031T040000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0200
+TZOFFSETTO:+0300
+TZNAME:EEST
+DTSTART:19900325T020000
+RDATE:19900325T020000
+RDATE:19910331T020000
+RDATE:19920329T020000
+RDATE:19930328T020000
+RDATE:19940327T020000
+RDATE:19950326T020000
+RDATE:19960331T020000
+RDATE:19970330T020000
+RDATE:19980329T020000
+RDATE:19990328T030000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0200
+TZOFFSETTO:+0200
+TZNAME:EET
+DTSTART:19991101T000000
+RDATE:19991101T000000
+RDATE:20020221T000000
+END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Europe/Tallinn.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Europe/Uzhgorod.ics
===================================================================
--- libkcal/libical/zoneinfo/Europe/Uzhgorod.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Europe/Uzhgorod.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,22 +1,146 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/Europe/Uzhgorod
+TZID:/kde.org/Olson_20070327_1/Europe/Uzhgorod
 X-LIC-LOCATION:Europe/Uzhgorod
 BEGIN:DAYLIGHT
 TZOFFSETFROM:+0200
 TZOFFSETTO:+0300
 TZNAME:EEST
-DTSTART:19700329T030000
+DTSTART:19950326T030000
 RRULE:FREQ=YEARLY;BYMONTH=3;BYDAY=-1SU
 END:DAYLIGHT
 BEGIN:STANDARD
 TZOFFSETFROM:+0300
 TZOFFSETTO:+0200
 TZNAME:EET
-DTSTART:19701025T040000
+DTSTART:19961027T040000
 RRULE:FREQ=YEARLY;BYMONTH=10;BYDAY=-1SU
 END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+012912
+TZOFFSETTO:+0100
+TZNAME:CET
+DTSTART:18901001T000000
+RDATE:18901001T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0100
+TZOFFSETTO:+0100
+TZNAME:CET
+DTSTART:19400101T000000
+RDATE:19400101T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0100
+TZOFFSETTO:+0200
+TZNAME:CEST
+DTSTART:19400401T020000
+RDATE:19400401T020000
+RDATE:19430329T020000
+RDATE:19440403T020000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0200
+TZOFFSETTO:+0100
+TZNAME:CET
+DTSTART:19421102T030000
+RDATE:19421102T030000
+RDATE:19431004T030000
+RDATE:19441026T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0200
+TZOFFSETTO:+0200
+TZNAME:CEST
+DTSTART:19441001T000000
+RDATE:19441001T000000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0100
+TZOFFSETTO:+0300
+TZNAME:MSK
+DTSTART:19450629T000000
+RDATE:19450629T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0300
+TZOFFSETTO:+0400
+TZNAME:MSD
+DTSTART:19810401T000000
+RDATE:19810401T000000
+RDATE:19820401T000000
+RDATE:19830401T000000
+RDATE:19840401T000000
+RDATE:19850331T020000
+RDATE:19860330T020000
+RDATE:19870329T020000
+RDATE:19880327T020000
+RDATE:19890326T020000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0400
+TZOFFSETTO:+0300
+TZNAME:MSK
+DTSTART:19811001T000000
+RDATE:19811001T000000
+RDATE:19821001T000000
+RDATE:19831001T000000
+RDATE:19840930T030000
+RDATE:19850929T030000
+RDATE:19860928T030000
+RDATE:19870927T030000
+RDATE:19880925T030000
+RDATE:19890924T030000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0300
+TZOFFSETTO:+0300
+TZNAME:MSK
+DTSTART:19900101T000000
+RDATE:19900101T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0300
+TZOFFSETTO:+0100
+TZNAME:CET
+DTSTART:19900701T020000
+RDATE:19900701T020000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0100
+TZOFFSETTO:+0200
+TZNAME:EET
+DTSTART:19910331T030000
+RDATE:19910331T030000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0200
+TZOFFSETTO:+0200
+TZNAME:EET
+DTSTART:19920101T000000
+RDATE:19920101T000000
+RDATE:19950101T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0200
+TZOFFSETTO:+0300
+TZNAME:EEST
+DTSTART:19920329T000000
+RDATE:19920329T000000
+RDATE:19930328T000000
+RDATE:19940327T000000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0300
+TZOFFSETTO:+0200
+TZNAME:EET
+DTSTART:19920927T000000
+RDATE:19920927T000000
+RDATE:19930926T000000
+RDATE:19940925T000000
+RDATE:19950924T040000
+END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Europe/Uzhgorod.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/America/Catamarca.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Catamarca.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/America/Catamarca.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +0,0 @@
-BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
-VERSION:2.0
-BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/America/Catamarca
-X-LIC-LOCATION:America/Catamarca
-BEGIN:STANDARD
-TZOFFSETFROM:-0300
-TZOFFSETTO:-0300
-TZNAME:ART
-DTSTART:19700101T000000
-END:STANDARD
-END:VTIMEZONE
-END:VCALENDAR
Index: libkcal/libical/zoneinfo/America/Rosario.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Rosario.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/America/Rosario.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +0,0 @@
-BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
-VERSION:2.0
-BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/America/Rosario
-X-LIC-LOCATION:America/Rosario
-BEGIN:STANDARD
-TZOFFSETFROM:-0300
-TZOFFSETTO:-0300
-TZNAME:ART
-DTSTART:19700101T000000
-END:STANDARD
-END:VTIMEZONE
-END:VCALENDAR
Index: libkcal/libical/zoneinfo/America/Cordoba.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Cordoba.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/America/Cordoba.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +0,0 @@
-BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
-VERSION:2.0
-BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/America/Cordoba
-X-LIC-LOCATION:America/Cordoba
-BEGIN:STANDARD
-TZOFFSETFROM:-0300
-TZOFFSETTO:-0300
-TZNAME:ART
-DTSTART:19700101T000000
-END:STANDARD
-END:VTIMEZONE
-END:VCALENDAR
Index: libkcal/libical/zoneinfo/America/Indianapolis.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Indianapolis.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/America/Indianapolis.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +0,0 @@
-BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
-VERSION:2.0
-BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/America/Indianapolis
-X-LIC-LOCATION:America/Indianapolis
-BEGIN:STANDARD
-TZOFFSETFROM:-0500
-TZOFFSETTO:-0500
-TZNAME:EST
-DTSTART:19700101T000000
-END:STANDARD
-END:VTIMEZONE
-END:VCALENDAR
Index: libkcal/libical/zoneinfo/America/Louisville.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Louisville.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/America/Louisville.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,22 +0,0 @@
-BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
-VERSION:2.0
-BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/America/Louisville
-X-LIC-LOCATION:America/Louisville
-BEGIN:STANDARD
-TZOFFSETFROM:-0400
-TZOFFSETTO:-0500
-TZNAME:EST
-DTSTART:19701025T020000
-RRULE:FREQ=YEARLY;BYMONTH=10;BYDAY=-1SU
-END:STANDARD
-BEGIN:DAYLIGHT
-TZOFFSETFROM:-0500
-TZOFFSETTO:-0400
-TZNAME:EDT
-DTSTART:19700405T020000
-RRULE:FREQ=YEARLY;BYMONTH=4;BYDAY=1SU
-END:DAYLIGHT
-END:VTIMEZONE
-END:VCALENDAR
Index: libkcal/libical/zoneinfo/America/Jujuy.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Jujuy.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/America/Jujuy.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +0,0 @@
-BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
-VERSION:2.0
-BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/America/Jujuy
-X-LIC-LOCATION:America/Jujuy
-BEGIN:STANDARD
-TZOFFSETFROM:-0300
-TZOFFSETTO:-0300
-TZNAME:ART
-DTSTART:19700101T000000
-END:STANDARD
-END:VTIMEZONE
-END:VCALENDAR
Index: libkcal/libical/zoneinfo/America/Buenos_Aires.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Buenos_Aires.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/America/Buenos_Aires.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +0,0 @@
-BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
-VERSION:2.0
-BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/America/Buenos_Aires
-X-LIC-LOCATION:America/Buenos_Aires
-BEGIN:STANDARD
-TZOFFSETFROM:-0300
-TZOFFSETTO:-0300
-TZNAME:ART
-DTSTART:19700101T000000
-END:STANDARD
-END:VTIMEZONE
-END:VCALENDAR
Index: libkcal/libical/zoneinfo/America/Mendoza.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Mendoza.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/America/Mendoza.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +0,0 @@
-BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
-VERSION:2.0
-BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/America/Mendoza
-X-LIC-LOCATION:America/Mendoza
-BEGIN:STANDARD
-TZOFFSETFROM:-0300
-TZOFFSETTO:-0300
-TZNAME:ART
-DTSTART:19700101T000000
-END:STANDARD
-END:VTIMEZONE
-END:VCALENDAR
Index: libkcal/libical/zoneinfo/America/Port_of_Spain.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Port_of_Spain.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/America/Port_of_Spain.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +1,15 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_4/America/Port_of_Spain
+TZID:/kde.org/Olson_20070327_1/America/Port_of_Spain
 X-LIC-LOCATION:America/Port_of_Spain
 BEGIN:STANDARD
-TZOFFSETFROM:-0400
+TZOFFSETFROM:-040604
 TZOFFSETTO:-0400
 TZNAME:AST
-DTSTART:19700101T000000
+DTSTART:19120302T000000
+RDATE:19120302T000000
 END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/America/Port_of_Spain.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/America/Regina.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Regina.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/America/Regina.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +1,97 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/America/Regina
+TZID:/kde.org/Olson_20070327_1/America/Regina
 X-LIC-LOCATION:America/Regina
 BEGIN:STANDARD
+TZOFFSETFROM:-065836
+TZOFFSETTO:-0700
+TZNAME:MST
+DTSTART:19050901T000000
+RDATE:19050901T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0700
+TZOFFSETTO:-0600
+TZNAME:MDT
+DTSTART:19180414T020000
+RDATE:19180414T020000
+RDATE:19300504T000000
+RDATE:19310503T000000
+RDATE:19320501T000000
+RDATE:19330507T000000
+RDATE:19340506T000000
+RDATE:19370411T000000
+RDATE:19380410T000000
+RDATE:19390409T000000
+RDATE:19400414T000000
+RDATE:19410413T000000
+RDATE:19460414T020000
+RDATE:19470427T020000
+RDATE:19480425T020000
+RDATE:19490424T020000
+RDATE:19500430T020000
+RDATE:19510429T020000
+RDATE:19520427T020000
+RDATE:19530426T020000
+RDATE:19540425T020000
+RDATE:19550424T020000
+RDATE:19560429T020000
+RDATE:19570428T020000
+RDATE:19590426T020000
+END:DAYLIGHT
+BEGIN:STANDARD
 TZOFFSETFROM:-0600
+TZOFFSETTO:-0700
+TZNAME:MST
+DTSTART:19181031T020000
+RDATE:19181031T020000
+RDATE:19301005T000000
+RDATE:19311004T000000
+RDATE:19321002T000000
+RDATE:19331001T000000
+RDATE:19341007T000000
+RDATE:19371010T000000
+RDATE:19381002T000000
+RDATE:19391008T000000
+RDATE:19401013T000000
+RDATE:19411012T000000
+RDATE:19450930T020000
+RDATE:19461013T020000
+RDATE:19470928T020000
+RDATE:19480926T020000
+RDATE:19490925T020000
+RDATE:19500924T020000
+RDATE:19510930T020000
+RDATE:19520928T020000
+RDATE:19530927T020000
+RDATE:19540926T020000
+RDATE:19550925T020000
+RDATE:19560930T020000
+RDATE:19570929T020000
+RDATE:19591025T020000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0700
 TZOFFSETTO:-0600
+TZNAME:MWT
+DTSTART:19420209T020000
+RDATE:19420209T020000
+END:DAYLIGHT
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0600
+TZOFFSETTO:-0600
+TZNAME:MPT
+DTSTART:19450814T170000
+RDATE:19450814T170000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:-0700
+TZOFFSETTO:-0600
 TZNAME:CST
-DTSTART:19700101T000000
+DTSTART:19600424T020000
+RDATE:19600424T020000
 END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/America/Regina.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/America/Glace_Bay.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Glace_Bay.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/America/Glace_Bay.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,22 +1,140 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/America/Glace_Bay
+TZID:/kde.org/Olson_20070327_1/America/Glace_Bay
 X-LIC-LOCATION:America/Glace_Bay
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0400
+TZOFFSETTO:-0300
+TZNAME:ADT
+DTSTART:20070311T020000
+RRULE:FREQ=YEARLY;BYMONTH=3;BYDAY=2SU
+END:DAYLIGHT
 BEGIN:STANDARD
 TZOFFSETFROM:-0300
 TZOFFSETTO:-0400
 TZNAME:AST
-DTSTART:19701025T020000
-RRULE:FREQ=YEARLY;BYMONTH=10;BYDAY=-1SU
+DTSTART:20071104T020000
+RRULE:FREQ=YEARLY;BYMONTH=11;BYDAY=1SU
 END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-035948
+TZOFFSETTO:-0400
+TZNAME:AST
+DTSTART:19020615T000000
+RDATE:19020615T000000
+END:STANDARD
 BEGIN:DAYLIGHT
 TZOFFSETFROM:-0400
 TZOFFSETTO:-0300
 TZNAME:ADT
-DTSTART:19700405T020000
-RRULE:FREQ=YEARLY;BYMONTH=4;BYDAY=1SU
+DTSTART:19180414T020000
+RDATE:19180414T020000
+RDATE:19530426T020000
+RDATE:19720430T020000
+RDATE:19730429T020000
+RDATE:19740428T020000
+RDATE:19750427T020000
+RDATE:19760425T020000
+RDATE:19770424T020000
+RDATE:19780430T020000
+RDATE:19790429T020000
+RDATE:19800427T020000
+RDATE:19810426T020000
+RDATE:19820425T020000
+RDATE:19830424T020000
+RDATE:19840429T020000
+RDATE:19850428T020000
+RDATE:19860427T020000
+RDATE:19870405T020000
+RDATE:19880403T020000
+RDATE:19890402T020000
+RDATE:19900401T020000
+RDATE:19910407T020000
+RDATE:19920405T020000
+RDATE:19930404T020000
+RDATE:19940403T020000
+RDATE:19950402T020000
+RDATE:19960407T020000
+RDATE:19970406T020000
+RDATE:19980405T020000
+RDATE:19990404T020000
+RDATE:20000402T020000
+RDATE:20010401T020000
+RDATE:20020407T020000
+RDATE:20030406T020000
+RDATE:20040404T020000
+RDATE:20050403T020000
+RDATE:20060402T020000
 END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:-0300
+TZOFFSETTO:-0400
+TZNAME:AST
+DTSTART:19181031T020000
+RDATE:19181031T020000
+RDATE:19450930T020000
+RDATE:19530927T020000
+RDATE:19721029T020000
+RDATE:19731028T020000
+RDATE:19741027T020000
+RDATE:19751026T020000
+RDATE:19761031T020000
+RDATE:19771030T020000
+RDATE:19781029T020000
+RDATE:19791028T020000
+RDATE:19801026T020000
+RDATE:19811025T020000
+RDATE:19821031T020000
+RDATE:19831030T020000
+RDATE:19841028T020000
+RDATE:19851027T020000
+RDATE:19861026T020000
+RDATE:19871025T020000
+RDATE:19881030T020000
+RDATE:19891029T020000
+RDATE:19901028T020000
+RDATE:19911027T020000
+RDATE:19921025T020000
+RDATE:19931031T020000
+RDATE:19941030T020000
+RDATE:19951029T020000
+RDATE:19961027T020000
+RDATE:19971026T020000
+RDATE:19981025T020000
+RDATE:19991031T020000
+RDATE:20001029T020000
+RDATE:20011028T020000
+RDATE:20021027T020000
+RDATE:20031026T020000
+RDATE:20041031T020000
+RDATE:20051030T020000
+RDATE:20061029T020000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0400
+TZOFFSETTO:-0300
+TZNAME:AWT
+DTSTART:19420209T020000
+RDATE:19420209T020000
+END:DAYLIGHT
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0300
+TZOFFSETTO:-0300
+TZNAME:APT
+DTSTART:19450814T200000
+RDATE:19450814T200000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:-0400
+TZOFFSETTO:-0400
+TZNAME:AST
+DTSTART:19530101T000000
+RDATE:19530101T000000
+RDATE:19540101T000000
+RDATE:19720101T000000
+RDATE:19740101T000000
+END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/America/Glace_Bay.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/America/Mazatlan.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Mazatlan.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/America/Mazatlan.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,22 +1,79 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20020614_6/America/Mazatlan
+TZID:/kde.org/Olson_20070327_1/America/Mazatlan
 X-LIC-LOCATION:America/Mazatlan
 BEGIN:DAYLIGHT
 TZOFFSETFROM:-0700
 TZOFFSETTO:-0600
 TZNAME:MDT
-DTSTART:19700405T020000
+DTSTART:20020407T020000
 RRULE:FREQ=YEARLY;BYMONTH=4;BYDAY=1SU
 END:DAYLIGHT
 BEGIN:STANDARD
 TZOFFSETFROM:-0600
 TZOFFSETTO:-0700
 TZNAME:MST
-DTSTART:19701025T020000
+DTSTART:20021027T020000
 RRULE:FREQ=YEARLY;BYMONTH=10;BYDAY=-1SU
 END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-070540
+TZOFFSETTO:-0700
+TZNAME:MST
+DTSTART:19211231T235420
+RDATE:19211231T235420
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-0700
+TZOFFSETTO:-0600
+TZNAME:CST
+DTSTART:19270610T230000
+RDATE:19270610T230000
+RDATE:19310501T230000
+RDATE:19320401T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-0600
+TZOFFSETTO:-0700
+TZNAME:MST
+DTSTART:19301115T000000
+RDATE:19301115T000000
+RDATE:19311001T000000
+RDATE:19420424T000000
+RDATE:19961027T020000
+RDATE:19971026T020000
+RDATE:19981025T020000
+RDATE:19991031T020000
+RDATE:20001029T020000
+RDATE:20010930T020000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-0700
+TZOFFSETTO:-0800
+TZNAME:PST
+DTSTART:19490114T000000
+RDATE:19490114T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-0800
+TZOFFSETTO:-0700
+TZNAME:MST
+DTSTART:19700101T000000
+RDATE:19700101T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0700
+TZOFFSETTO:-0600
+TZNAME:MDT
+DTSTART:19960407T020000
+RDATE:19960407T020000
+RDATE:19970406T020000
+RDATE:19980405T020000
+RDATE:19990404T020000
+RDATE:20000402T020000
+RDATE:20010506T020000
+END:DAYLIGHT
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/America/Mazatlan.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/America/St_Vincent.ics
===================================================================
--- libkcal/libical/zoneinfo/America/St_Vincent.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/America/St_Vincent.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +1,22 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/America/St_Vincent
+TZID:/kde.org/Olson_20070327_1/America/St_Vincent
 X-LIC-LOCATION:America/St_Vincent
 BEGIN:STANDARD
-TZOFFSETFROM:-0400
+TZOFFSETFROM:-040456
+TZOFFSETTO:-040456
+TZNAME:KMT
+DTSTART:18900101T000000
+RDATE:18900101T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-040456
 TZOFFSETTO:-0400
 TZNAME:AST
-DTSTART:19700101T000000
+DTSTART:19120101T000000
+RDATE:19120101T000000
 END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/America/St_Vincent.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/America/Asuncion.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Asuncion.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/America/Asuncion.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,22 +1,121 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20020614_6/America/Asuncion
+TZID:/kde.org/Olson_20070327_1/America/Asuncion
 X-LIC-LOCATION:America/Asuncion
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0400
+TZOFFSETTO:-0300
+TZNAME:PYST
+DTSTART:20041017T000000
+RRULE:FREQ=YEARLY;BYMONTH=10;BYDAY=3SU
+END:DAYLIGHT
 BEGIN:STANDARD
 TZOFFSETFROM:-0300
 TZOFFSETTO:-0400
 TZNAME:PYT
-DTSTART:19700405T000000
-RRULE:FREQ=YEARLY;BYMONTH=4;BYDAY=1SU
+DTSTART:20050313T000000
+RRULE:FREQ=YEARLY;BYMONTH=3;BYDAY=2SU
 END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-035040
+TZOFFSETTO:-035040
+TZNAME:AMT
+DTSTART:18900101T000000
+RDATE:18900101T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-035040
+TZOFFSETTO:-0400
+TZNAME:PYT
+DTSTART:19311010T000000
+RDATE:19311010T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-0400
+TZOFFSETTO:-0300
+TZNAME:PYT
+DTSTART:19721001T000000
+RDATE:19721001T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-0300
+TZOFFSETTO:-0400
+TZNAME:PYT
+DTSTART:19740401T000000
+RDATE:19740401T000000
+RDATE:19760301T000000
+RDATE:19770301T000000
+RDATE:19780301T000000
+RDATE:19790401T000000
+RDATE:19800401T000000
+RDATE:19810401T000000
+RDATE:19820401T000000
+RDATE:19830401T000000
+RDATE:19840401T000000
+RDATE:19850401T000000
+RDATE:19860401T000000
+RDATE:19870401T000000
+RDATE:19880401T000000
+RDATE:19890401T000000
+RDATE:19900401T000000
+RDATE:19910401T000000
+RDATE:19920301T000000
+RDATE:19930331T000000
+RDATE:19940227T000000
+RDATE:19950226T000000
+RDATE:19960301T000000
+RDATE:19970223T000000
+RDATE:19980301T000000
+RDATE:19990307T000000
+RDATE:20000305T000000
+RDATE:20010304T000000
+RDATE:20020407T000000
+RDATE:20030406T000000
+RDATE:20040404T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-0400
+TZOFFSETTO:-0400
+TZNAME:PYT
+DTSTART:19750301T000000
+RDATE:19750301T000000
+END:STANDARD
 BEGIN:DAYLIGHT
 TZOFFSETFROM:-0400
 TZOFFSETTO:-0300
 TZNAME:PYST
-DTSTART:19700906T000000
-RRULE:FREQ=YEARLY;BYMONTH=9;BYDAY=1SU
+DTSTART:19751001T000000
+RDATE:19751001T000000
+RDATE:19761001T000000
+RDATE:19771001T000000
+RDATE:19781001T000000
+RDATE:19791001T000000
+RDATE:19801001T000000
+RDATE:19811001T000000
+RDATE:19821001T000000
+RDATE:19831001T000000
+RDATE:19841001T000000
+RDATE:19851001T000000
+RDATE:19861001T000000
+RDATE:19871001T000000
+RDATE:19881001T000000
+RDATE:19891022T000000
+RDATE:19901001T000000
+RDATE:19911006T000000
+RDATE:19921005T000000
+RDATE:19931001T000000
+RDATE:19941001T000000
+RDATE:19951001T000000
+RDATE:19961006T000000
+RDATE:19971005T000000
+RDATE:19981004T000000
+RDATE:19991003T000000
+RDATE:20001001T000000
+RDATE:20011007T000000
+RDATE:20020901T000000
+RDATE:20030907T000000
 END:DAYLIGHT
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/America/Asuncion.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/America/Campo_Grande.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Campo_Grande.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 0)
+++ libkcal/libical/zoneinfo/America/Campo_Grande.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -0,0 +1,105 @@
+BEGIN:VCALENDAR
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
+VERSION:2.0
+BEGIN:VTIMEZONE
+TZID:/kde.org/Olson_20070327_1/America/Campo_Grande
+X-LIC-LOCATION:America/Campo_Grande
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0400
+TZOFFSETTO:-0300
+TZNAME:AMST
+DTSTART:20061105T000000
+RRULE:FREQ=YEARLY;BYMONTH=11;BYDAY=1SU
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:-0300
+TZOFFSETTO:-0400
+TZNAME:AMT
+DTSTART:20070225T000000
+RRULE:FREQ=YEARLY;BYMONTH=2;BYDAY=-1SU
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-033828
+TZOFFSETTO:-0400
+TZNAME:AMT
+DTSTART:19140101T000000
+RDATE:19140101T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0400
+TZOFFSETTO:-0300
+TZNAME:AMST
+DTSTART:19311003T110000
+RDATE:19311003T110000
+RDATE:19321003T000000
+RDATE:19491201T000000
+RDATE:19501201T000000
+RDATE:19511201T000000
+RDATE:19521201T000000
+RDATE:19631209T000000
+RDATE:19650131T000000
+RDATE:19651201T000000
+RDATE:19661101T000000
+RDATE:19671101T000000
+RDATE:19851102T000000
+RDATE:19861025T000000
+RDATE:19871025T000000
+RDATE:19881016T000000
+RDATE:19891015T000000
+RDATE:19901021T000000
+RDATE:19911020T000000
+RDATE:19921025T000000
+RDATE:19931017T000000
+RDATE:19941016T000000
+RDATE:19951015T000000
+RDATE:19961006T000000
+RDATE:19971006T000000
+RDATE:19981011T000000
+RDATE:19991003T000000
+RDATE:20001008T000000
+RDATE:20011014T000000
+RDATE:20021103T000000
+RDATE:20031019T000000
+RDATE:20041102T000000
+RDATE:20051016T000000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:-0300
+TZOFFSETTO:-0400
+TZNAME:AMT
+DTSTART:19320401T000000
+RDATE:19320401T000000
+RDATE:19330401T000000
+RDATE:19500416T010000
+RDATE:19510401T000000
+RDATE:19520401T000000
+RDATE:19530301T000000
+RDATE:19640301T000000
+RDATE:19650331T000000
+RDATE:19660301T000000
+RDATE:19670301T000000
+RDATE:19680301T000000
+RDATE:19860315T000000
+RDATE:19870214T000000
+RDATE:19880207T000000
+RDATE:19890129T000000
+RDATE:19900211T000000
+RDATE:19910217T000000
+RDATE:19920209T000000
+RDATE:19930131T000000
+RDATE:19940220T000000
+RDATE:19950219T000000
+RDATE:19960211T000000
+RDATE:19970216T000000
+RDATE:19980301T000000
+RDATE:19990221T000000
+RDATE:20000227T000000
+RDATE:20010218T000000
+RDATE:20020217T000000
+RDATE:20030216T000000
+RDATE:20040215T000000
+RDATE:20050220T000000
+RDATE:20060219T000000
+END:STANDARD
+END:VTIMEZONE
+END:VCALENDAR
Index: libkcal/libical/zoneinfo/America/Montreal.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Montreal.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/America/Montreal.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,22 +1,233 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/America/Montreal
+TZID:/kde.org/Olson_20070327_1/America/Montreal
 X-LIC-LOCATION:America/Montreal
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0500
+TZOFFSETTO:-0400
+TZNAME:EDT
+DTSTART:20070311T020000
+RRULE:FREQ=YEARLY;BYMONTH=3;BYDAY=2SU
+END:DAYLIGHT
 BEGIN:STANDARD
 TZOFFSETFROM:-0400
 TZOFFSETTO:-0500
 TZNAME:EST
-DTSTART:19701025T020000
-RRULE:FREQ=YEARLY;BYMONTH=10;BYDAY=-1SU
+DTSTART:20071104T020000
+RRULE:FREQ=YEARLY;BYMONTH=11;BYDAY=1SU
 END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-045416
+TZOFFSETTO:-0500
+TZNAME:EST
+DTSTART:18840101T000000
+RDATE:18840101T000000
+END:STANDARD
 BEGIN:DAYLIGHT
 TZOFFSETFROM:-0500
 TZOFFSETTO:-0400
 TZNAME:EDT
-DTSTART:19700405T020000
-RRULE:FREQ=YEARLY;BYMONTH=4;BYDAY=1SU
+DTSTART:19170325T020000
+RDATE:19170325T020000
+RDATE:19180414T020000
+RDATE:19190331T023000
+RDATE:19200502T023000
+RDATE:19210501T020000
+RDATE:19220430T020000
+RDATE:19240517T020000
+RDATE:19250503T020000
+RDATE:19260502T020000
+RDATE:19270501T000000
+RDATE:19280429T000000
+RDATE:19290428T000000
+RDATE:19300427T000000
+RDATE:19310426T000000
+RDATE:19320501T000000
+RDATE:19330430T000000
+RDATE:19340429T000000
+RDATE:19350428T000000
+RDATE:19360426T000000
+RDATE:19370425T000000
+RDATE:19380424T000000
+RDATE:19390430T000000
+RDATE:19400428T000000
+RDATE:19460428T020000
+RDATE:19470427T020000
+RDATE:19480425T020000
+RDATE:19490424T020000
+RDATE:19500430T020000
+RDATE:19510429T020000
+RDATE:19520427T020000
+RDATE:19530426T020000
+RDATE:19540425T020000
+RDATE:19550424T020000
+RDATE:19560429T020000
+RDATE:19570428T020000
+RDATE:19580427T020000
+RDATE:19590426T020000
+RDATE:19600424T020000
+RDATE:19610430T020000
+RDATE:19620429T020000
+RDATE:19630428T020000
+RDATE:19640426T020000
+RDATE:19650425T020000
+RDATE:19660424T020000
+RDATE:19670430T020000
+RDATE:19680428T020000
+RDATE:19690427T020000
+RDATE:19700426T020000
+RDATE:19710425T020000
+RDATE:19720430T020000
+RDATE:19730429T020000
+RDATE:19740428T020000
+RDATE:19750427T020000
+RDATE:19760425T020000
+RDATE:19770424T020000
+RDATE:19780430T020000
+RDATE:19790429T020000
+RDATE:19800427T020000
+RDATE:19810426T020000
+RDATE:19820425T020000
+RDATE:19830424T020000
+RDATE:19840429T020000
+RDATE:19850428T020000
+RDATE:19860427T020000
+RDATE:19870405T020000
+RDATE:19880403T020000
+RDATE:19890402T020000
+RDATE:19900401T020000
+RDATE:19910407T020000
+RDATE:19920405T020000
+RDATE:19930404T020000
+RDATE:19940403T020000
+RDATE:19950402T020000
+RDATE:19960407T020000
+RDATE:19970406T020000
+RDATE:19980405T020000
+RDATE:19990404T020000
+RDATE:20000402T020000
+RDATE:20010401T020000
+RDATE:20020407T020000
+RDATE:20030406T020000
+RDATE:20040404T020000
+RDATE:20050403T020000
+RDATE:20060402T020000
 END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:-0400
+TZOFFSETTO:-0500
+TZNAME:EST
+DTSTART:19170424T000000
+RDATE:19170424T000000
+RDATE:19181031T020000
+RDATE:19191025T023000
+RDATE:19201003T023000
+RDATE:19211002T023000
+RDATE:19221001T023000
+RDATE:19240928T023000
+RDATE:19250927T023000
+RDATE:19260926T023000
+RDATE:19270925T000000
+RDATE:19280930T000000
+RDATE:19290929T000000
+RDATE:19300928T000000
+RDATE:19310927T000000
+RDATE:19320925T000000
+RDATE:19331001T000000
+RDATE:19340930T000000
+RDATE:19350929T000000
+RDATE:19360927T000000
+RDATE:19370926T000000
+RDATE:19380925T000000
+RDATE:19390924T000000
+RDATE:19450930T020000
+RDATE:19460929T020000
+RDATE:19470928T020000
+RDATE:19480926T020000
+RDATE:19491030T020000
+RDATE:19501029T020000
+RDATE:19510930T020000
+RDATE:19520928T020000
+RDATE:19530927T020000
+RDATE:19540926T020000
+RDATE:19550925T020000
+RDATE:19560930T020000
+RDATE:19571027T020000
+RDATE:19581026T020000
+RDATE:19591025T020000
+RDATE:19601030T020000
+RDATE:19611029T020000
+RDATE:19621028T020000
+RDATE:19631027T020000
+RDATE:19641025T020000
+RDATE:19651031T020000
+RDATE:19661030T020000
+RDATE:19671029T020000
+RDATE:19681027T020000
+RDATE:19691026T020000
+RDATE:19701025T020000
+RDATE:19711031T020000
+RDATE:19721029T020000
+RDATE:19731028T020000
+RDATE:19741027T020000
+RDATE:19751026T020000
+RDATE:19761031T020000
+RDATE:19771030T020000
+RDATE:19781029T020000
+RDATE:19791028T020000
+RDATE:19801026T020000
+RDATE:19811025T020000
+RDATE:19821031T020000
+RDATE:19831030T020000
+RDATE:19841028T020000
+RDATE:19851027T020000
+RDATE:19861026T020000
+RDATE:19871025T020000
+RDATE:19881030T020000
+RDATE:19891029T020000
+RDATE:19901028T020000
+RDATE:19911027T020000
+RDATE:19921025T020000
+RDATE:19931031T020000
+RDATE:19941030T020000
+RDATE:19951029T020000
+RDATE:19961027T020000
+RDATE:19971026T020000
+RDATE:19981025T020000
+RDATE:19991031T020000
+RDATE:20001029T020000
+RDATE:20011028T020000
+RDATE:20021027T020000
+RDATE:20031026T020000
+RDATE:20041031T020000
+RDATE:20051030T020000
+RDATE:20061029T020000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-0500
+TZOFFSETTO:-0500
+TZNAME:EST
+DTSTART:19180101T000000
+RDATE:19180101T000000
+RDATE:19190101T000000
+RDATE:19460101T000000
+RDATE:19740101T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0400
+TZOFFSETTO:-0400
+TZNAME:EWT
+DTSTART:19420209T020000
+RDATE:19420209T020000
+END:DAYLIGHT
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0400
+TZOFFSETTO:-0400
+TZNAME:EPT
+DTSTART:19450814T190000
+RDATE:19450814T190000
+END:DAYLIGHT
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/America/Montreal.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/America/Thule.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Thule.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/America/Thule.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,22 +1,73 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20020614_6/America/Thule
+TZID:/kde.org/Olson_20070327_1/America/Thule
 X-LIC-LOCATION:America/Thule
 BEGIN:DAYLIGHT
 TZOFFSETFROM:-0400
 TZOFFSETTO:-0300
 TZNAME:ADT
-DTSTART:19700405T020000
-RRULE:FREQ=YEARLY;BYMONTH=4;BYDAY=1SU
+DTSTART:20070311T020000
+RRULE:FREQ=YEARLY;BYMONTH=3;BYDAY=2SU
 END:DAYLIGHT
 BEGIN:STANDARD
 TZOFFSETFROM:-0300
 TZOFFSETTO:-0400
 TZNAME:AST
-DTSTART:19701025T020000
-RRULE:FREQ=YEARLY;BYMONTH=10;BYDAY=-1SU
+DTSTART:20071104T020000
+RRULE:FREQ=YEARLY;BYMONTH=11;BYDAY=1SU
 END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-043508
+TZOFFSETTO:-0400
+TZNAME:AST
+DTSTART:19160728T000000
+RDATE:19160728T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0400
+TZOFFSETTO:-0300
+TZNAME:ADT
+DTSTART:19910331T020000
+RDATE:19910331T020000
+RDATE:19920329T020000
+RDATE:19930404T020000
+RDATE:19940403T020000
+RDATE:19950402T020000
+RDATE:19960407T020000
+RDATE:19970406T020000
+RDATE:19980405T020000
+RDATE:19990404T020000
+RDATE:20000402T020000
+RDATE:20010401T020000
+RDATE:20020407T020000
+RDATE:20030406T020000
+RDATE:20040404T020000
+RDATE:20050403T020000
+RDATE:20060402T020000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:-0300
+TZOFFSETTO:-0400
+TZNAME:AST
+DTSTART:19910929T020000
+RDATE:19910929T020000
+RDATE:19920927T020000
+RDATE:19931031T020000
+RDATE:19941030T020000
+RDATE:19951029T020000
+RDATE:19961027T020000
+RDATE:19971026T020000
+RDATE:19981025T020000
+RDATE:19991031T020000
+RDATE:20001029T020000
+RDATE:20011028T020000
+RDATE:20021027T020000
+RDATE:20031026T020000
+RDATE:20041031T020000
+RDATE:20051030T020000
+RDATE:20061029T020000
+END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/America/Thule.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/America/Cayenne.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Cayenne.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/America/Cayenne.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +1,22 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/America/Cayenne
+TZID:/kde.org/Olson_20070327_1/America/Cayenne
 X-LIC-LOCATION:America/Cayenne
 BEGIN:STANDARD
-TZOFFSETFROM:-0300
+TZOFFSETFROM:-032920
+TZOFFSETTO:-0400
+TZNAME:GFT
+DTSTART:19110701T000000
+RDATE:19110701T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-0400
 TZOFFSETTO:-0300
 TZNAME:GFT
-DTSTART:19700101T000000
+DTSTART:19671001T000000
+RDATE:19671001T000000
 END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/America/Cayenne.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/America/Yakutat.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Yakutat.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/America/Yakutat.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,22 +1,167 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/America/Yakutat
+TZID:/kde.org/Olson_20070327_1/America/Yakutat
 X-LIC-LOCATION:America/Yakutat
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0900
+TZOFFSETTO:-0800
+TZNAME:AKDT
+DTSTART:20070311T020000
+RRULE:FREQ=YEARLY;BYMONTH=3;BYDAY=2SU
+END:DAYLIGHT
 BEGIN:STANDARD
 TZOFFSETFROM:-0800
 TZOFFSETTO:-0900
 TZNAME:AKST
-DTSTART:19701025T020000
-RRULE:FREQ=YEARLY;BYMONTH=10;BYDAY=-1SU
+DTSTART:20071104T020000
+RRULE:FREQ=YEARLY;BYMONTH=11;BYDAY=1SU
 END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+144105
+TZOFFSETTO:-091855
+TZNAME:LMT
+DTSTART:18671018T000000
+RDATE:18671018T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-091855
+TZOFFSETTO:-0900
+TZNAME:YST
+DTSTART:19000820T120000
+RDATE:19000820T120000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-0900
+TZOFFSETTO:-0900
+TZNAME:YST
+DTSTART:19420101T000000
+RDATE:19420101T000000
+RDATE:19460101T000000
+RDATE:19690101T000000
+END:STANDARD
 BEGIN:DAYLIGHT
 TZOFFSETFROM:-0900
 TZOFFSETTO:-0800
+TZNAME:YWT
+DTSTART:19420209T020000
+RDATE:19420209T020000
+END:DAYLIGHT
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0800
+TZOFFSETTO:-0800
+TZNAME:YPT
+DTSTART:19450814T150000
+RDATE:19450814T150000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:-0800
+TZOFFSETTO:-0900
+TZNAME:YST
+DTSTART:19450930T020000
+RDATE:19450930T020000
+RDATE:19691026T020000
+RDATE:19701025T020000
+RDATE:19711031T020000
+RDATE:19721029T020000
+RDATE:19731028T020000
+RDATE:19741027T020000
+RDATE:19751026T020000
+RDATE:19761031T020000
+RDATE:19771030T020000
+RDATE:19781029T020000
+RDATE:19791028T020000
+RDATE:19801026T020000
+RDATE:19811025T020000
+RDATE:19821031T020000
+RDATE:19831030T020000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0900
+TZOFFSETTO:-0800
+TZNAME:YDT
+DTSTART:19690427T020000
+RDATE:19690427T020000
+RDATE:19700426T020000
+RDATE:19710425T020000
+RDATE:19720430T020000
+RDATE:19730429T020000
+RDATE:19740106T020000
+RDATE:19750223T020000
+RDATE:19760425T020000
+RDATE:19770424T020000
+RDATE:19780430T020000
+RDATE:19790429T020000
+RDATE:19800427T020000
+RDATE:19810426T020000
+RDATE:19820425T020000
+RDATE:19830424T020000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:-0900
+TZOFFSETTO:-0900
+TZNAME:AKST
+DTSTART:19831130T000000
+RDATE:19831130T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0900
+TZOFFSETTO:-0800
 TZNAME:AKDT
-DTSTART:19700405T020000
-RRULE:FREQ=YEARLY;BYMONTH=4;BYDAY=1SU
+DTSTART:19840429T020000
+RDATE:19840429T020000
+RDATE:19850428T020000
+RDATE:19860427T020000
+RDATE:19870405T020000
+RDATE:19880403T020000
+RDATE:19890402T020000
+RDATE:19900401T020000
+RDATE:19910407T020000
+RDATE:19920405T020000
+RDATE:19930404T020000
+RDATE:19940403T020000
+RDATE:19950402T020000
+RDATE:19960407T020000
+RDATE:19970406T020000
+RDATE:19980405T020000
+RDATE:19990404T020000
+RDATE:20000402T020000
+RDATE:20010401T020000
+RDATE:20020407T020000
+RDATE:20030406T020000
+RDATE:20040404T020000
+RDATE:20050403T020000
+RDATE:20060402T020000
 END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:-0800
+TZOFFSETTO:-0900
+TZNAME:AKST
+DTSTART:19841028T020000
+RDATE:19841028T020000
+RDATE:19851027T020000
+RDATE:19861026T020000
+RDATE:19871025T020000
+RDATE:19881030T020000
+RDATE:19891029T020000
+RDATE:19901028T020000
+RDATE:19911027T020000
+RDATE:19921025T020000
+RDATE:19931031T020000
+RDATE:19941030T020000
+RDATE:19951029T020000
+RDATE:19961027T020000
+RDATE:19971026T020000
+RDATE:19981025T020000
+RDATE:19991031T020000
+RDATE:20001029T020000
+RDATE:20011028T020000
+RDATE:20021027T020000
+RDATE:20031026T020000
+RDATE:20041031T020000
+RDATE:20051030T020000
+RDATE:20061029T020000
+END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/America/Yakutat.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/America/Denver.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Denver.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/America/Denver.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,22 +1,158 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/America/Denver
+TZID:/kde.org/Olson_20070327_1/America/Denver
 X-LIC-LOCATION:America/Denver
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0700
+TZOFFSETTO:-0600
+TZNAME:MDT
+DTSTART:20070311T020000
+RRULE:FREQ=YEARLY;BYMONTH=3;BYDAY=2SU
+END:DAYLIGHT
 BEGIN:STANDARD
 TZOFFSETFROM:-0600
 TZOFFSETTO:-0700
 TZNAME:MST
-DTSTART:19701025T020000
-RRULE:FREQ=YEARLY;BYMONTH=10;BYDAY=-1SU
+DTSTART:20071104T020000
+RRULE:FREQ=YEARLY;BYMONTH=11;BYDAY=1SU
 END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-065956
+TZOFFSETTO:-0700
+TZNAME:MST
+DTSTART:18831118T120004
+RDATE:18831118T120004
+END:STANDARD
 BEGIN:DAYLIGHT
 TZOFFSETFROM:-0700
 TZOFFSETTO:-0600
 TZNAME:MDT
-DTSTART:19700405T020000
-RRULE:FREQ=YEARLY;BYMONTH=4;BYDAY=1SU
+DTSTART:19180331T020000
+RDATE:19180331T020000
+RDATE:19190330T020000
+RDATE:19200328T020000
+RDATE:19210327T020000
+RDATE:19650425T020000
+RDATE:19660424T020000
+RDATE:19670430T020000
+RDATE:19680428T020000
+RDATE:19690427T020000
+RDATE:19700426T020000
+RDATE:19710425T020000
+RDATE:19720430T020000
+RDATE:19730429T020000
+RDATE:19740106T020000
+RDATE:19750223T020000
+RDATE:19760425T020000
+RDATE:19770424T020000
+RDATE:19780430T020000
+RDATE:19790429T020000
+RDATE:19800427T020000
+RDATE:19810426T020000
+RDATE:19820425T020000
+RDATE:19830424T020000
+RDATE:19840429T020000
+RDATE:19850428T020000
+RDATE:19860427T020000
+RDATE:19870405T020000
+RDATE:19880403T020000
+RDATE:19890402T020000
+RDATE:19900401T020000
+RDATE:19910407T020000
+RDATE:19920405T020000
+RDATE:19930404T020000
+RDATE:19940403T020000
+RDATE:19950402T020000
+RDATE:19960407T020000
+RDATE:19970406T020000
+RDATE:19980405T020000
+RDATE:19990404T020000
+RDATE:20000402T020000
+RDATE:20010401T020000
+RDATE:20020407T020000
+RDATE:20030406T020000
+RDATE:20040404T020000
+RDATE:20050403T020000
+RDATE:20060402T020000
 END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:-0600
+TZOFFSETTO:-0700
+TZNAME:MST
+DTSTART:19181027T020000
+RDATE:19181027T020000
+RDATE:19191026T020000
+RDATE:19201031T020000
+RDATE:19210522T020000
+RDATE:19450930T020000
+RDATE:19651031T020000
+RDATE:19661030T020000
+RDATE:19671029T020000
+RDATE:19681027T020000
+RDATE:19691026T020000
+RDATE:19701025T020000
+RDATE:19711031T020000
+RDATE:19721029T020000
+RDATE:19731028T020000
+RDATE:19741027T020000
+RDATE:19751026T020000
+RDATE:19761031T020000
+RDATE:19771030T020000
+RDATE:19781029T020000
+RDATE:19791028T020000
+RDATE:19801026T020000
+RDATE:19811025T020000
+RDATE:19821031T020000
+RDATE:19831030T020000
+RDATE:19841028T020000
+RDATE:19851027T020000
+RDATE:19861026T020000
+RDATE:19871025T020000
+RDATE:19881030T020000
+RDATE:19891029T020000
+RDATE:19901028T020000
+RDATE:19911027T020000
+RDATE:19921025T020000
+RDATE:19931031T020000
+RDATE:19941030T020000
+RDATE:19951029T020000
+RDATE:19961027T020000
+RDATE:19971026T020000
+RDATE:19981025T020000
+RDATE:19991031T020000
+RDATE:20001029T020000
+RDATE:20011028T020000
+RDATE:20021027T020000
+RDATE:20031026T020000
+RDATE:20041031T020000
+RDATE:20051030T020000
+RDATE:20061029T020000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-0700
+TZOFFSETTO:-0700
+TZNAME:MST
+DTSTART:19200101T000000
+RDATE:19200101T000000
+RDATE:19420101T000000
+RDATE:19460101T000000
+RDATE:19670101T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0700
+TZOFFSETTO:-0600
+TZNAME:MWT
+DTSTART:19420209T020000
+RDATE:19420209T020000
+END:DAYLIGHT
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0600
+TZOFFSETTO:-0600
+TZNAME:MPT
+DTSTART:19450814T170000
+RDATE:19450814T170000
+END:DAYLIGHT
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/America/Denver.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/America/Scoresbysund.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Scoresbysund.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/America/Scoresbysund.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,22 +1,71 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/America/Scoresbysund
+TZID:/kde.org/Olson_20070327_1/America/Scoresbysund
 X-LIC-LOCATION:America/Scoresbysund
 BEGIN:DAYLIGHT
 TZOFFSETFROM:-0100
 TZOFFSETTO:+0000
 TZNAME:EGST
-DTSTART:19700329T000000
+DTSTART:19820328T000000
 RRULE:FREQ=YEARLY;BYMONTH=3;BYDAY=-1SU
 END:DAYLIGHT
 BEGIN:STANDARD
 TZOFFSETFROM:+0000
 TZOFFSETTO:-0100
 TZNAME:EGT
-DTSTART:19701025T010000
+DTSTART:19961027T010000
 RRULE:FREQ=YEARLY;BYMONTH=10;BYDAY=-1SU
 END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-012752
+TZOFFSETTO:-0200
+TZNAME:CGT
+DTSTART:19160728T000000
+RDATE:19160728T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0200
+TZOFFSETTO:-0100
+TZNAME:CGST
+DTSTART:19800406T020000
+RDATE:19800406T020000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:-0100
+TZOFFSETTO:-0200
+TZNAME:CGT
+DTSTART:19800928T030000
+RDATE:19800928T030000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0200
+TZOFFSETTO:+0000
+TZNAME:EGST
+DTSTART:19810329T000000
+RDATE:19810329T000000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0000
+TZOFFSETTO:-0100
+TZNAME:EGT
+DTSTART:19810927T010000
+RDATE:19810927T010000
+RDATE:19820926T010000
+RDATE:19830925T010000
+RDATE:19840930T010000
+RDATE:19850929T010000
+RDATE:19860928T010000
+RDATE:19870927T010000
+RDATE:19880925T010000
+RDATE:19890924T010000
+RDATE:19900930T010000
+RDATE:19910929T010000
+RDATE:19920927T010000
+RDATE:19930926T010000
+RDATE:19940925T010000
+RDATE:19950924T010000
+END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/America/Scoresbysund.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/America/Monterrey.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Monterrey.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/America/Monterrey.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,22 +1,63 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20020614_6/America/Monterrey
+TZID:/kde.org/Olson_20070327_1/America/Monterrey
 X-LIC-LOCATION:America/Monterrey
 BEGIN:DAYLIGHT
 TZOFFSETFROM:-0600
 TZOFFSETTO:-0500
 TZNAME:CDT
-DTSTART:19700405T020000
+DTSTART:20020407T020000
 RRULE:FREQ=YEARLY;BYMONTH=4;BYDAY=1SU
 END:DAYLIGHT
 BEGIN:STANDARD
 TZOFFSETFROM:-0500
 TZOFFSETTO:-0600
 TZNAME:CST
-DTSTART:19701025T020000
+DTSTART:20021027T020000
 RRULE:FREQ=YEARLY;BYMONTH=10;BYDAY=-1SU
 END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-064116
+TZOFFSETTO:-0600
+TZNAME:CST
+DTSTART:19211231T231844
+RDATE:19211231T231844
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-0600
+TZOFFSETTO:-0600
+TZNAME:CST
+DTSTART:19880101T000000
+RDATE:19880101T000000
+RDATE:19890101T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0600
+TZOFFSETTO:-0500
+TZNAME:CDT
+DTSTART:19880403T020000
+RDATE:19880403T020000
+RDATE:19960407T020000
+RDATE:19970406T020000
+RDATE:19980405T020000
+RDATE:19990404T020000
+RDATE:20000402T020000
+RDATE:20010506T020000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:-0500
+TZOFFSETTO:-0600
+TZNAME:CST
+DTSTART:19881030T020000
+RDATE:19881030T020000
+RDATE:19961027T020000
+RDATE:19971026T020000
+RDATE:19981025T020000
+RDATE:19991031T020000
+RDATE:20001029T020000
+RDATE:20010930T020000
+END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/America/Monterrey.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/America/Jamaica.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Jamaica.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/America/Jamaica.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +1,61 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/America/Jamaica
+TZID:/kde.org/Olson_20070327_1/America/Jamaica
 X-LIC-LOCATION:America/Jamaica
 BEGIN:STANDARD
+TZOFFSETFROM:-050712
+TZOFFSETTO:-050712
+TZNAME:KMT
+DTSTART:18900101T000000
+RDATE:18900101T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-050712
+TZOFFSETTO:-0500
+TZNAME:EST
+DTSTART:19120201T000000
+RDATE:19120201T000000
+END:STANDARD
+BEGIN:DAYLIGHT
 TZOFFSETFROM:-0500
+TZOFFSETTO:-0400
+TZNAME:EDT
+DTSTART:19740428T020000
+RDATE:19740428T020000
+RDATE:19750223T020000
+RDATE:19760425T020000
+RDATE:19770424T020000
+RDATE:19780430T020000
+RDATE:19790429T020000
+RDATE:19800427T020000
+RDATE:19810426T020000
+RDATE:19820425T020000
+RDATE:19830424T020000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:-0400
 TZOFFSETTO:-0500
 TZNAME:EST
-DTSTART:19700101T000000
+DTSTART:19741027T020000
+RDATE:19741027T020000
+RDATE:19751026T020000
+RDATE:19761031T020000
+RDATE:19771030T020000
+RDATE:19781029T020000
+RDATE:19791028T020000
+RDATE:19801026T020000
+RDATE:19811025T020000
+RDATE:19821031T020000
+RDATE:19831030T020000
 END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-0500
+TZOFFSETTO:-0500
+TZNAME:EST
+DTSTART:19840101T000000
+RDATE:19840101T000000
+END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/America/Jamaica.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/America/Indiana/Petersburg.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Indiana/Petersburg.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 0)
+++ libkcal/libical/zoneinfo/America/Indiana/Petersburg.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -0,0 +1,131 @@
+BEGIN:VCALENDAR
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
+VERSION:2.0
+BEGIN:VTIMEZONE
+TZID:/kde.org/Olson_20070327_1/America/Indiana/Petersburg
+X-LIC-LOCATION:America/Indiana/Petersburg
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0600
+TZOFFSETTO:-0500
+TZNAME:CDT
+DTSTART:20070311T020000
+RRULE:FREQ=YEARLY;BYMONTH=3;BYDAY=2SU
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:-0500
+TZOFFSETTO:-0600
+TZNAME:CST
+DTSTART:20071104T020000
+RRULE:FREQ=YEARLY;BYMONTH=11;BYDAY=1SU
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-054907
+TZOFFSETTO:-0600
+TZNAME:CST
+DTSTART:18831118T121053
+RDATE:18831118T121053
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0600
+TZOFFSETTO:-0500
+TZNAME:CDT
+DTSTART:19180331T020000
+RDATE:19180331T020000
+RDATE:19190330T020000
+RDATE:19550501T000000
+RDATE:19560429T020000
+RDATE:19570428T020000
+RDATE:19580427T020000
+RDATE:19590426T020000
+RDATE:19600424T020000
+RDATE:19610430T020000
+RDATE:19620429T020000
+RDATE:19630428T020000
+RDATE:19640426T020000
+RDATE:19670430T020000
+RDATE:19680428T020000
+RDATE:19690427T020000
+RDATE:19700426T020000
+RDATE:19710425T020000
+RDATE:19720430T020000
+RDATE:19730429T020000
+RDATE:19740106T020000
+RDATE:19750223T020000
+RDATE:19760425T020000
+RDATE:19770424T020000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:-0500
+TZOFFSETTO:-0600
+TZNAME:CST
+DTSTART:19181027T020000
+RDATE:19181027T020000
+RDATE:19191026T020000
+RDATE:19450930T020000
+RDATE:19550925T020000
+RDATE:19560930T020000
+RDATE:19570929T020000
+RDATE:19580928T020000
+RDATE:19590927T020000
+RDATE:19600925T020000
+RDATE:19611029T020000
+RDATE:19621028T020000
+RDATE:19631027T020000
+RDATE:19641025T020000
+RDATE:19661030T020000
+RDATE:19671029T020000
+RDATE:19681027T020000
+RDATE:19691026T020000
+RDATE:19701025T020000
+RDATE:19711031T020000
+RDATE:19721029T020000
+RDATE:19731028T020000
+RDATE:19741027T020000
+RDATE:19751026T020000
+RDATE:19761031T020000
+RDATE:20061029T020000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0600
+TZOFFSETTO:-0500
+TZNAME:CWT
+DTSTART:19420209T020000
+RDATE:19420209T020000
+END:DAYLIGHT
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0500
+TZOFFSETTO:-0500
+TZNAME:CPT
+DTSTART:19450814T180000
+RDATE:19450814T180000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:-0600
+TZOFFSETTO:-0600
+TZNAME:CST
+DTSTART:19550101T000000
+RDATE:19550101T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-0600
+TZOFFSETTO:-0500
+TZNAME:EST
+DTSTART:19650425T020000
+RDATE:19650425T020000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-0500
+TZOFFSETTO:-0500
+TZNAME:EST
+DTSTART:19771030T020000
+RDATE:19771030T020000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0500
+TZOFFSETTO:-0500
+TZNAME:CDT
+DTSTART:20060402T020000
+RDATE:20060402T020000
+END:DAYLIGHT
+END:VTIMEZONE
+END:VCALENDAR
Index: libkcal/libical/zoneinfo/America/Indiana/Marengo.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Indiana/Marengo.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/America/Indiana/Marengo.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +1,133 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/America/Indiana/Marengo
+TZID:/kde.org/Olson_20070327_1/America/Indiana/Marengo
 X-LIC-LOCATION:America/Indiana/Marengo
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0500
+TZOFFSETTO:-0400
+TZNAME:EDT
+DTSTART:20070311T020000
+RRULE:FREQ=YEARLY;BYMONTH=3;BYDAY=2SU
+END:DAYLIGHT
 BEGIN:STANDARD
+TZOFFSETFROM:-0400
+TZOFFSETTO:-0500
+TZNAME:EST
+DTSTART:20071104T020000
+RRULE:FREQ=YEARLY;BYMONTH=11;BYDAY=1SU
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-054523
+TZOFFSETTO:-0600
+TZNAME:CST
+DTSTART:18831118T121437
+RDATE:18831118T121437
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0600
+TZOFFSETTO:-0500
+TZNAME:CDT
+DTSTART:19180331T020000
+RDATE:19180331T020000
+RDATE:19190330T020000
+RDATE:19510429T020000
+RDATE:19540425T020000
+RDATE:19550424T020000
+RDATE:19560429T020000
+RDATE:19570428T020000
+RDATE:19580427T020000
+RDATE:19590426T020000
+RDATE:19600424T020000
+END:DAYLIGHT
+BEGIN:STANDARD
 TZOFFSETFROM:-0500
+TZOFFSETTO:-0600
+TZNAME:CST
+DTSTART:19181027T020000
+RDATE:19181027T020000
+RDATE:19191026T020000
+RDATE:19450930T020000
+RDATE:19510930T020000
+RDATE:19540926T020000
+RDATE:19550925T020000
+RDATE:19560930T020000
+RDATE:19570929T020000
+RDATE:19580928T020000
+RDATE:19590927T020000
+RDATE:19600925T020000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0600
 TZOFFSETTO:-0500
+TZNAME:CWT
+DTSTART:19420209T020000
+RDATE:19420209T020000
+END:DAYLIGHT
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0500
+TZOFFSETTO:-0500
+TZNAME:CPT
+DTSTART:19450814T180000
+RDATE:19450814T180000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:-0600
+TZOFFSETTO:-0600
+TZNAME:CST
+DTSTART:19510101T000000
+RDATE:19510101T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-0600
+TZOFFSETTO:-0500
 TZNAME:EST
-DTSTART:19700101T000000
+DTSTART:19610430T020000
+RDATE:19610430T020000
 END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-0500
+TZOFFSETTO:-0500
+TZNAME:EST
+DTSTART:19690101T000000
+RDATE:19690101T000000
+RDATE:19741027T020000
+RDATE:19760101T000000
+RDATE:20060101T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0500
+TZOFFSETTO:-0400
+TZNAME:EDT
+DTSTART:19690427T020000
+RDATE:19690427T020000
+RDATE:19700426T020000
+RDATE:19710425T020000
+RDATE:19720430T020000
+RDATE:19730429T020000
+RDATE:19750223T020000
+RDATE:20060402T020000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:-0400
+TZOFFSETTO:-0500
+TZNAME:EST
+DTSTART:19691026T020000
+RDATE:19691026T020000
+RDATE:19701025T020000
+RDATE:19711031T020000
+RDATE:19721029T020000
+RDATE:19731028T020000
+RDATE:19751026T020000
+RDATE:20061029T020000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0500
+TZOFFSETTO:-0500
+TZNAME:CDT
+DTSTART:19740106T020000
+RDATE:19740106T020000
+END:DAYLIGHT
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/America/Indiana/Marengo.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/America/Indiana/Vincennes.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Indiana/Vincennes.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 0)
+++ libkcal/libical/zoneinfo/America/Indiana/Vincennes.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -0,0 +1,130 @@
+BEGIN:VCALENDAR
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
+VERSION:2.0
+BEGIN:VTIMEZONE
+TZID:/kde.org/Olson_20070327_1/America/Indiana/Vincennes
+X-LIC-LOCATION:America/Indiana/Vincennes
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0600
+TZOFFSETTO:-0500
+TZNAME:CDT
+DTSTART:20070311T020000
+RRULE:FREQ=YEARLY;BYMONTH=3;BYDAY=2SU
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:-0500
+TZOFFSETTO:-0600
+TZNAME:CST
+DTSTART:20071104T020000
+RRULE:FREQ=YEARLY;BYMONTH=11;BYDAY=1SU
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-055007
+TZOFFSETTO:-0600
+TZNAME:CST
+DTSTART:18831118T120953
+RDATE:18831118T120953
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0600
+TZOFFSETTO:-0500
+TZNAME:CDT
+DTSTART:19180331T020000
+RDATE:19180331T020000
+RDATE:19190330T020000
+RDATE:19460428T020000
+RDATE:19530426T020000
+RDATE:19540425T020000
+RDATE:19550501T000000
+RDATE:19560429T020000
+RDATE:19570428T020000
+RDATE:19580427T020000
+RDATE:19590426T020000
+RDATE:19600424T020000
+RDATE:19610430T020000
+RDATE:19620429T020000
+RDATE:19630428T020000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:-0500
+TZOFFSETTO:-0600
+TZNAME:CST
+DTSTART:19181027T020000
+RDATE:19181027T020000
+RDATE:19191026T020000
+RDATE:19450930T020000
+RDATE:19460929T020000
+RDATE:19530927T020000
+RDATE:19540926T020000
+RDATE:19550925T020000
+RDATE:19560930T020000
+RDATE:19570929T020000
+RDATE:19580928T020000
+RDATE:19590927T020000
+RDATE:19601030T020000
+RDATE:19610924T020000
+RDATE:19621028T020000
+RDATE:19631027T020000
+RDATE:20061029T020000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0600
+TZOFFSETTO:-0500
+TZNAME:CWT
+DTSTART:19420209T020000
+RDATE:19420209T020000
+END:DAYLIGHT
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0500
+TZOFFSETTO:-0500
+TZNAME:CPT
+DTSTART:19450814T180000
+RDATE:19450814T180000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:-0600
+TZOFFSETTO:-0600
+TZNAME:CST
+DTSTART:19460101T000000
+RDATE:19460101T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-0600
+TZOFFSETTO:-0500
+TZNAME:EST
+DTSTART:19640426T020000
+RDATE:19640426T020000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-0500
+TZOFFSETTO:-0500
+TZNAME:EST
+DTSTART:19690101T000000
+RDATE:19690101T000000
+RDATE:19710101T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0500
+TZOFFSETTO:-0400
+TZNAME:EDT
+DTSTART:19690427T020000
+RDATE:19690427T020000
+RDATE:19700426T020000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:-0400
+TZOFFSETTO:-0500
+TZNAME:EST
+DTSTART:19691026T020000
+RDATE:19691026T020000
+RDATE:19701025T020000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0500
+TZOFFSETTO:-0500
+TZNAME:CDT
+DTSTART:20060402T020000
+RDATE:20060402T020000
+END:DAYLIGHT
+END:VTIMEZONE
+END:VCALENDAR
Index: libkcal/libical/zoneinfo/America/Indiana/Indianapolis.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Indiana/Indianapolis.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/America/Indiana/Indianapolis.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +1,125 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/America/Indiana/Indianapolis
+TZID:/kde.org/Olson_20070327_1/America/Indiana/Indianapolis
 X-LIC-LOCATION:America/Indiana/Indianapolis
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0500
+TZOFFSETTO:-0400
+TZNAME:EDT
+DTSTART:20070311T020000
+RRULE:FREQ=YEARLY;BYMONTH=3;BYDAY=2SU
+END:DAYLIGHT
 BEGIN:STANDARD
+TZOFFSETFROM:-0400
+TZOFFSETTO:-0500
+TZNAME:EST
+DTSTART:20071104T020000
+RRULE:FREQ=YEARLY;BYMONTH=11;BYDAY=1SU
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-054438
+TZOFFSETTO:-0600
+TZNAME:CST
+DTSTART:18831118T121522
+RDATE:18831118T121522
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0600
+TZOFFSETTO:-0500
+TZNAME:CDT
+DTSTART:19180331T020000
+RDATE:19180331T020000
+RDATE:19190330T020000
+RDATE:19410622T020000
+RDATE:19460428T020000
+RDATE:19470427T020000
+RDATE:19480425T020000
+RDATE:19490424T020000
+RDATE:19500430T020000
+RDATE:19510429T020000
+RDATE:19520427T020000
+RDATE:19530426T020000
+RDATE:19540425T020000
+END:DAYLIGHT
+BEGIN:STANDARD
 TZOFFSETFROM:-0500
+TZOFFSETTO:-0600
+TZNAME:CST
+DTSTART:19181027T020000
+RDATE:19181027T020000
+RDATE:19191026T020000
+RDATE:19410928T020000
+RDATE:19450930T020000
+RDATE:19460929T020000
+RDATE:19470928T020000
+RDATE:19480926T020000
+RDATE:19490925T020000
+RDATE:19500924T020000
+RDATE:19510930T020000
+RDATE:19520928T020000
+RDATE:19530927T020000
+RDATE:19540926T020000
+RDATE:19570929T020000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-0600
+TZOFFSETTO:-0600
+TZNAME:CST
+DTSTART:19200101T000000
+RDATE:19200101T000000
+RDATE:19420101T000000
+RDATE:19460101T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0600
 TZOFFSETTO:-0500
+TZNAME:CWT
+DTSTART:19420209T020000
+RDATE:19420209T020000
+END:DAYLIGHT
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0500
+TZOFFSETTO:-0500
+TZNAME:CPT
+DTSTART:19450814T180000
+RDATE:19450814T180000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:-0600
+TZOFFSETTO:-0500
 TZNAME:EST
-DTSTART:19700101T000000
+DTSTART:19550424T020000
+RDATE:19550424T020000
+RDATE:19580427T020000
 END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-0500
+TZOFFSETTO:-0500
+TZNAME:EST
+DTSTART:19690101T000000
+RDATE:19690101T000000
+RDATE:19710101T000000
+RDATE:20060101T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0500
+TZOFFSETTO:-0400
+TZNAME:EDT
+DTSTART:19690427T020000
+RDATE:19690427T020000
+RDATE:19700426T020000
+RDATE:20060402T020000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:-0400
+TZOFFSETTO:-0500
+TZNAME:EST
+DTSTART:19691026T020000
+RDATE:19691026T020000
+RDATE:19701025T020000
+RDATE:20061029T020000
+END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/America/Indiana/Indianapolis.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/America/Indiana/Vevay.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Indiana/Vevay.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/America/Indiana/Vevay.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +1,98 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/America/Indiana/Vevay
+TZID:/kde.org/Olson_20070327_1/America/Indiana/Vevay
 X-LIC-LOCATION:America/Indiana/Vevay
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0500
+TZOFFSETTO:-0400
+TZNAME:EDT
+DTSTART:20070311T020000
+RRULE:FREQ=YEARLY;BYMONTH=3;BYDAY=2SU
+END:DAYLIGHT
 BEGIN:STANDARD
+TZOFFSETFROM:-0400
+TZOFFSETTO:-0500
+TZNAME:EST
+DTSTART:20071104T020000
+RRULE:FREQ=YEARLY;BYMONTH=11;BYDAY=1SU
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-054016
+TZOFFSETTO:-0600
+TZNAME:CST
+DTSTART:18831118T121944
+RDATE:18831118T121944
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0600
+TZOFFSETTO:-0500
+TZNAME:CDT
+DTSTART:19180331T020000
+RDATE:19180331T020000
+RDATE:19190330T020000
+END:DAYLIGHT
+BEGIN:STANDARD
 TZOFFSETFROM:-0500
+TZOFFSETTO:-0600
+TZNAME:CST
+DTSTART:19181027T020000
+RDATE:19181027T020000
+RDATE:19191026T020000
+RDATE:19450930T020000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0600
 TZOFFSETTO:-0500
+TZNAME:CWT
+DTSTART:19420209T020000
+RDATE:19420209T020000
+END:DAYLIGHT
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0500
+TZOFFSETTO:-0500
+TZNAME:CPT
+DTSTART:19450814T180000
+RDATE:19450814T180000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:-0600
+TZOFFSETTO:-0500
 TZNAME:EST
-DTSTART:19700101T000000
+DTSTART:19540425T020000
+RDATE:19540425T020000
 END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-0500
+TZOFFSETTO:-0500
+TZNAME:EST
+DTSTART:19690101T000000
+RDATE:19690101T000000
+RDATE:19730101T000000
+RDATE:20060101T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0500
+TZOFFSETTO:-0400
+TZNAME:EDT
+DTSTART:19690427T020000
+RDATE:19690427T020000
+RDATE:19700426T020000
+RDATE:19710425T020000
+RDATE:19720430T020000
+RDATE:20060402T020000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:-0400
+TZOFFSETTO:-0500
+TZNAME:EST
+DTSTART:19691026T020000
+RDATE:19691026T020000
+RDATE:19701025T020000
+RDATE:19711031T020000
+RDATE:19721029T020000
+RDATE:20061029T020000
+END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/America/Indiana/Vevay.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/America/Indiana/Knox.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Indiana/Knox.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/America/Indiana/Knox.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +1,169 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/America/Indiana/Knox
+TZID:/kde.org/Olson_20070327_1/America/Indiana/Knox
 X-LIC-LOCATION:America/Indiana/Knox
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0600
+TZOFFSETTO:-0500
+TZNAME:CDT
+DTSTART:20070311T020000
+RRULE:FREQ=YEARLY;BYMONTH=3;BYDAY=2SU
+END:DAYLIGHT
 BEGIN:STANDARD
 TZOFFSETFROM:-0500
+TZOFFSETTO:-0600
+TZNAME:CST
+DTSTART:20071104T020000
+RRULE:FREQ=YEARLY;BYMONTH=11;BYDAY=1SU
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-054630
+TZOFFSETTO:-0600
+TZNAME:CST
+DTSTART:18831118T121330
+RDATE:18831118T121330
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0600
 TZOFFSETTO:-0500
+TZNAME:CDT
+DTSTART:19180331T020000
+RDATE:19180331T020000
+RDATE:19190330T020000
+RDATE:19470427T020000
+RDATE:19480425T020000
+RDATE:19490424T020000
+RDATE:19500430T020000
+RDATE:19510429T020000
+RDATE:19520427T020000
+RDATE:19530426T020000
+RDATE:19540425T020000
+RDATE:19550424T020000
+RDATE:19560429T020000
+RDATE:19570428T020000
+RDATE:19580427T020000
+RDATE:19590426T020000
+RDATE:19600424T020000
+RDATE:19610430T020000
+RDATE:19670430T020000
+RDATE:19680428T020000
+RDATE:19690427T020000
+RDATE:19700426T020000
+RDATE:19710425T020000
+RDATE:19720430T020000
+RDATE:19730429T020000
+RDATE:19740106T020000
+RDATE:19750223T020000
+RDATE:19760425T020000
+RDATE:19770424T020000
+RDATE:19780430T020000
+RDATE:19790429T020000
+RDATE:19800427T020000
+RDATE:19810426T020000
+RDATE:19820425T020000
+RDATE:19830424T020000
+RDATE:19840429T020000
+RDATE:19850428T020000
+RDATE:19860427T020000
+RDATE:19870405T020000
+RDATE:19880403T020000
+RDATE:19890402T020000
+RDATE:19900401T020000
+RDATE:19910407T020000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:-0500
+TZOFFSETTO:-0600
+TZNAME:CST
+DTSTART:19181027T020000
+RDATE:19181027T020000
+RDATE:19191026T020000
+RDATE:19450930T020000
+RDATE:19470928T020000
+RDATE:19480926T020000
+RDATE:19490925T020000
+RDATE:19500924T020000
+RDATE:19510930T020000
+RDATE:19520928T020000
+RDATE:19530927T020000
+RDATE:19540926T020000
+RDATE:19551030T020000
+RDATE:19561028T020000
+RDATE:19570929T020000
+RDATE:19580928T020000
+RDATE:19591025T020000
+RDATE:19601030T020000
+RDATE:19611029T020000
+RDATE:19631027T020000
+RDATE:19671029T020000
+RDATE:19681027T020000
+RDATE:19691026T020000
+RDATE:19701025T020000
+RDATE:19711031T020000
+RDATE:19721029T020000
+RDATE:19731028T020000
+RDATE:19741027T020000
+RDATE:19751026T020000
+RDATE:19761031T020000
+RDATE:19771030T020000
+RDATE:19781029T020000
+RDATE:19791028T020000
+RDATE:19801026T020000
+RDATE:19811025T020000
+RDATE:19821031T020000
+RDATE:19831030T020000
+RDATE:19841028T020000
+RDATE:19851027T020000
+RDATE:19861026T020000
+RDATE:19871025T020000
+RDATE:19881030T020000
+RDATE:19891029T020000
+RDATE:19901028T020000
+RDATE:20061029T020000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0600
+TZOFFSETTO:-0500
+TZNAME:CWT
+DTSTART:19420209T020000
+RDATE:19420209T020000
+END:DAYLIGHT
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0500
+TZOFFSETTO:-0500
+TZNAME:CPT
+DTSTART:19450814T180000
+RDATE:19450814T180000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:-0600
+TZOFFSETTO:-0600
+TZNAME:CST
+DTSTART:19470101T000000
+RDATE:19470101T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-0600
+TZOFFSETTO:-0500
 TZNAME:EST
-DTSTART:19700101T000000
+DTSTART:19620429T020000
+RDATE:19620429T020000
 END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-0500
+TZOFFSETTO:-0500
+TZNAME:EST
+DTSTART:19911027T020000
+RDATE:19911027T020000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0500
+TZOFFSETTO:-0500
+TZNAME:CDT
+DTSTART:20060402T020000
+RDATE:20060402T020000
+END:DAYLIGHT
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/America/Indiana/Knox.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/America/Indiana/Winamac.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Indiana/Winamac.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 0)
+++ libkcal/libical/zoneinfo/America/Indiana/Winamac.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -0,0 +1,143 @@
+BEGIN:VCALENDAR
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
+VERSION:2.0
+BEGIN:VTIMEZONE
+TZID:/kde.org/Olson_20070327_1/America/Indiana/Winamac
+X-LIC-LOCATION:America/Indiana/Winamac
+BEGIN:STANDARD
+TZOFFSETFROM:-0400
+TZOFFSETTO:-0500
+TZNAME:EST
+DTSTART:20071104T020000
+RRULE:FREQ=YEARLY;BYMONTH=11;BYDAY=1SU
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0500
+TZOFFSETTO:-0400
+TZNAME:EDT
+DTSTART:20080309T020000
+RRULE:FREQ=YEARLY;BYMONTH=3;BYDAY=2SU
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:-054625
+TZOFFSETTO:-0600
+TZNAME:CST
+DTSTART:18831118T121335
+RDATE:18831118T121335
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0600
+TZOFFSETTO:-0500
+TZNAME:CDT
+DTSTART:19180331T020000
+RDATE:19180331T020000
+RDATE:19190330T020000
+RDATE:19460428T020000
+RDATE:19470427T020000
+RDATE:19480425T020000
+RDATE:19490424T020000
+RDATE:19500430T020000
+RDATE:19510429T020000
+RDATE:19520427T020000
+RDATE:19530426T020000
+RDATE:19540425T020000
+RDATE:19550424T020000
+RDATE:19560429T020000
+RDATE:19570428T020000
+RDATE:19580427T020000
+RDATE:19590426T020000
+RDATE:19600424T020000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:-0500
+TZOFFSETTO:-0600
+TZNAME:CST
+DTSTART:19181027T020000
+RDATE:19181027T020000
+RDATE:19191026T020000
+RDATE:19450930T020000
+RDATE:19460929T020000
+RDATE:19470928T020000
+RDATE:19480926T020000
+RDATE:19490925T020000
+RDATE:19500924T020000
+RDATE:19510930T020000
+RDATE:19520928T020000
+RDATE:19530927T020000
+RDATE:19540926T020000
+RDATE:19551030T020000
+RDATE:19561028T020000
+RDATE:19570929T020000
+RDATE:19580928T020000
+RDATE:19590927T020000
+RDATE:19600925T020000
+RDATE:20061029T020000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0600
+TZOFFSETTO:-0500
+TZNAME:CWT
+DTSTART:19420209T020000
+RDATE:19420209T020000
+END:DAYLIGHT
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0500
+TZOFFSETTO:-0500
+TZNAME:CPT
+DTSTART:19450814T180000
+RDATE:19450814T180000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:-0600
+TZOFFSETTO:-0600
+TZNAME:CST
+DTSTART:19460101T000000
+RDATE:19460101T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-0600
+TZOFFSETTO:-0500
+TZNAME:EST
+DTSTART:19610430T020000
+RDATE:19610430T020000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-0500
+TZOFFSETTO:-0500
+TZNAME:EST
+DTSTART:19690101T000000
+RDATE:19690101T000000
+RDATE:19710101T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0500
+TZOFFSETTO:-0400
+TZNAME:EDT
+DTSTART:19690427T020000
+RDATE:19690427T020000
+RDATE:19700426T020000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:-0400
+TZOFFSETTO:-0500
+TZNAME:EST
+DTSTART:19691026T020000
+RDATE:19691026T020000
+RDATE:19701025T020000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0500
+TZOFFSETTO:-0500
+TZNAME:CDT
+DTSTART:20060402T020000
+RDATE:20060402T020000
+END:DAYLIGHT
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0600
+TZOFFSETTO:-0400
+TZNAME:EDT
+DTSTART:20070311T020000
+RDATE:20070311T020000
+END:DAYLIGHT
+END:VTIMEZONE
+END:VCALENDAR
Index: libkcal/libical/zoneinfo/America/Juneau.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Juneau.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/America/Juneau.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,22 +1,173 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/America/Juneau
+TZID:/kde.org/Olson_20070327_1/America/Juneau
 X-LIC-LOCATION:America/Juneau
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0900
+TZOFFSETTO:-0800
+TZNAME:AKDT
+DTSTART:20070311T020000
+RRULE:FREQ=YEARLY;BYMONTH=3;BYDAY=2SU
+END:DAYLIGHT
 BEGIN:STANDARD
 TZOFFSETFROM:-0800
 TZOFFSETTO:-0900
 TZNAME:AKST
-DTSTART:19701025T020000
-RRULE:FREQ=YEARLY;BYMONTH=10;BYDAY=-1SU
+DTSTART:20071104T020000
+RRULE:FREQ=YEARLY;BYMONTH=11;BYDAY=1SU
 END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+150219
+TZOFFSETTO:-085741
+TZNAME:LMT
+DTSTART:18671018T000000
+RDATE:18671018T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-085741
+TZOFFSETTO:-0800
+TZNAME:PST
+DTSTART:19000820T120000
+RDATE:19000820T120000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-0800
+TZOFFSETTO:-0800
+TZNAME:PST
+DTSTART:19420101T000000
+RDATE:19420101T000000
+RDATE:19460101T000000
+RDATE:19690101T000000
+END:STANDARD
 BEGIN:DAYLIGHT
+TZOFFSETFROM:-0800
+TZOFFSETTO:-0700
+TZNAME:PWT
+DTSTART:19420209T020000
+RDATE:19420209T020000
+END:DAYLIGHT
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0700
+TZOFFSETTO:-0700
+TZNAME:PPT
+DTSTART:19450814T160000
+RDATE:19450814T160000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:-0700
+TZOFFSETTO:-0800
+TZNAME:PST
+DTSTART:19450930T020000
+RDATE:19450930T020000
+RDATE:19691026T020000
+RDATE:19701025T020000
+RDATE:19711031T020000
+RDATE:19721029T020000
+RDATE:19731028T020000
+RDATE:19741027T020000
+RDATE:19751026T020000
+RDATE:19761031T020000
+RDATE:19771030T020000
+RDATE:19781029T020000
+RDATE:19791028T020000
+RDATE:19801026T020000
+RDATE:19811025T020000
+RDATE:19821031T020000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0800
+TZOFFSETTO:-0700
+TZNAME:PDT
+DTSTART:19690427T020000
+RDATE:19690427T020000
+RDATE:19700426T020000
+RDATE:19710425T020000
+RDATE:19720430T020000
+RDATE:19730429T020000
+RDATE:19740106T020000
+RDATE:19750223T020000
+RDATE:19760425T020000
+RDATE:19770424T020000
+RDATE:19780430T020000
+RDATE:19790429T020000
+RDATE:19800427T020000
+RDATE:19810426T020000
+RDATE:19820425T020000
+RDATE:19830424T020000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:-0700
+TZOFFSETTO:-0900
+TZNAME:YST
+DTSTART:19831030T020000
+RDATE:19831030T020000
+END:STANDARD
+BEGIN:STANDARD
 TZOFFSETFROM:-0900
+TZOFFSETTO:-0900
+TZNAME:AKST
+DTSTART:19831130T000000
+RDATE:19831130T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0900
 TZOFFSETTO:-0800
 TZNAME:AKDT
-DTSTART:19700405T020000
-RRULE:FREQ=YEARLY;BYMONTH=4;BYDAY=1SU
+DTSTART:19840429T020000
+RDATE:19840429T020000
+RDATE:19850428T020000
+RDATE:19860427T020000
+RDATE:19870405T020000
+RDATE:19880403T020000
+RDATE:19890402T020000
+RDATE:19900401T020000
+RDATE:19910407T020000
+RDATE:19920405T020000
+RDATE:19930404T020000
+RDATE:19940403T020000
+RDATE:19950402T020000
+RDATE:19960407T020000
+RDATE:19970406T020000
+RDATE:19980405T020000
+RDATE:19990404T020000
+RDATE:20000402T020000
+RDATE:20010401T020000
+RDATE:20020407T020000
+RDATE:20030406T020000
+RDATE:20040404T020000
+RDATE:20050403T020000
+RDATE:20060402T020000
 END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:-0800
+TZOFFSETTO:-0900
+TZNAME:AKST
+DTSTART:19841028T020000
+RDATE:19841028T020000
+RDATE:19851027T020000
+RDATE:19861026T020000
+RDATE:19871025T020000
+RDATE:19881030T020000
+RDATE:19891029T020000
+RDATE:19901028T020000
+RDATE:19911027T020000
+RDATE:19921025T020000
+RDATE:19931031T020000
+RDATE:19941030T020000
+RDATE:19951029T020000
+RDATE:19961027T020000
+RDATE:19971026T020000
+RDATE:19981025T020000
+RDATE:19991031T020000
+RDATE:20001029T020000
+RDATE:20011028T020000
+RDATE:20021027T020000
+RDATE:20031026T020000
+RDATE:20041031T020000
+RDATE:20051030T020000
+RDATE:20061029T020000
+END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/America/Juneau.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/America/Fortaleza.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Fortaleza.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/America/Fortaleza.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,22 +1,75 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/America/Fortaleza
+TZID:/kde.org/Olson_20070327_1/America/Fortaleza
 X-LIC-LOCATION:America/Fortaleza
+BEGIN:STANDARD
+TZOFFSETFROM:-0234
+TZOFFSETTO:-0300
+TZNAME:BRT
+DTSTART:19140101T000000
+RDATE:19140101T000000
+END:STANDARD
 BEGIN:DAYLIGHT
 TZOFFSETFROM:-0300
 TZOFFSETTO:-0200
 TZNAME:BRST
-DTSTART:19701011T000000
-RRULE:FREQ=YEARLY;BYMONTH=10;BYDAY=2SU
+DTSTART:19311003T110000
+RDATE:19311003T110000
+RDATE:19321003T000000
+RDATE:19491201T000000
+RDATE:19501201T000000
+RDATE:19511201T000000
+RDATE:19521201T000000
+RDATE:19631209T000000
+RDATE:19650131T000000
+RDATE:19651201T000000
+RDATE:19661101T000000
+RDATE:19671101T000000
+RDATE:19851102T000000
+RDATE:19861025T000000
+RDATE:19871025T000000
+RDATE:19881016T000000
+RDATE:19891015T000000
+RDATE:19991003T000000
+RDATE:20001008T000000
+RDATE:20011014T000000
 END:DAYLIGHT
 BEGIN:STANDARD
 TZOFFSETFROM:-0200
 TZOFFSETTO:-0300
 TZNAME:BRT
-DTSTART:19700215T000000
-RRULE:FREQ=YEARLY;BYMONTH=2;BYDAY=3SU
+DTSTART:19320401T000000
+RDATE:19320401T000000
+RDATE:19330401T000000
+RDATE:19500416T010000
+RDATE:19510401T000000
+RDATE:19520401T000000
+RDATE:19530301T000000
+RDATE:19640301T000000
+RDATE:19650331T000000
+RDATE:19660301T000000
+RDATE:19670301T000000
+RDATE:19680301T000000
+RDATE:19860315T000000
+RDATE:19870214T000000
+RDATE:19880207T000000
+RDATE:19890129T000000
+RDATE:19900211T000000
+RDATE:20000227T000000
+RDATE:20001022T000000
+RDATE:20020217T000000
 END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-0300
+TZOFFSETTO:-0300
+TZNAME:BRT
+DTSTART:19900917T000000
+RDATE:19900917T000000
+RDATE:19990930T000000
+RDATE:20010913T000000
+RDATE:20021001T000000
+END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/America/Fortaleza.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/America/Araguaina.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Araguaina.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/America/Araguaina.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,22 +1,84 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/America/Araguaina
+TZID:/kde.org/Olson_20070327_1/America/Araguaina
 X-LIC-LOCATION:America/Araguaina
+BEGIN:STANDARD
+TZOFFSETFROM:-031248
+TZOFFSETTO:-0300
+TZNAME:BRT
+DTSTART:19140101T000000
+RDATE:19140101T000000
+END:STANDARD
 BEGIN:DAYLIGHT
 TZOFFSETFROM:-0300
 TZOFFSETTO:-0200
 TZNAME:BRST
-DTSTART:19701011T000000
-RRULE:FREQ=YEARLY;BYMONTH=10;BYDAY=2SU
+DTSTART:19311003T110000
+RDATE:19311003T110000
+RDATE:19321003T000000
+RDATE:19491201T000000
+RDATE:19501201T000000
+RDATE:19511201T000000
+RDATE:19521201T000000
+RDATE:19631209T000000
+RDATE:19650131T000000
+RDATE:19651201T000000
+RDATE:19661101T000000
+RDATE:19671101T000000
+RDATE:19851102T000000
+RDATE:19861025T000000
+RDATE:19871025T000000
+RDATE:19881016T000000
+RDATE:19891015T000000
+RDATE:19951015T000000
+RDATE:19961006T000000
+RDATE:19971006T000000
+RDATE:19981011T000000
+RDATE:19991003T000000
+RDATE:20001008T000000
+RDATE:20011014T000000
+RDATE:20021103T000000
 END:DAYLIGHT
 BEGIN:STANDARD
 TZOFFSETFROM:-0200
 TZOFFSETTO:-0300
 TZNAME:BRT
-DTSTART:19700215T000000
-RRULE:FREQ=YEARLY;BYMONTH=2;BYDAY=3SU
+DTSTART:19320401T000000
+RDATE:19320401T000000
+RDATE:19330401T000000
+RDATE:19500416T010000
+RDATE:19510401T000000
+RDATE:19520401T000000
+RDATE:19530301T000000
+RDATE:19640301T000000
+RDATE:19650331T000000
+RDATE:19660301T000000
+RDATE:19670301T000000
+RDATE:19680301T000000
+RDATE:19860315T000000
+RDATE:19870214T000000
+RDATE:19880207T000000
+RDATE:19890129T000000
+RDATE:19900211T000000
+RDATE:19960211T000000
+RDATE:19970216T000000
+RDATE:19980301T000000
+RDATE:19990221T000000
+RDATE:20000227T000000
+RDATE:20010218T000000
+RDATE:20020217T000000
+RDATE:20030216T000000
 END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-0300
+TZOFFSETTO:-0300
+TZNAME:BRT
+DTSTART:19900917T000000
+RDATE:19900917T000000
+RDATE:19950914T000000
+RDATE:20030924T000000
+END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/America/Araguaina.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/America/Yellowknife.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Yellowknife.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/America/Yellowknife.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,22 +1,131 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/America/Yellowknife
+TZID:/kde.org/Olson_20070327_1/America/Yellowknife
 X-LIC-LOCATION:America/Yellowknife
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0700
+TZOFFSETTO:-0600
+TZNAME:MDT
+DTSTART:20070311T020000
+RRULE:FREQ=YEARLY;BYMONTH=3;BYDAY=2SU
+END:DAYLIGHT
 BEGIN:STANDARD
 TZOFFSETFROM:-0600
 TZOFFSETTO:-0700
 TZNAME:MST
-DTSTART:19701025T020000
-RRULE:FREQ=YEARLY;BYMONTH=10;BYDAY=-1SU
+DTSTART:20071104T020000
+RRULE:FREQ=YEARLY;BYMONTH=11;BYDAY=1SU
 END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0000
+TZOFFSETTO:-0700
+TZNAME:MST
+DTSTART:19350101T000000
+RDATE:19350101T000000
+END:STANDARD
 BEGIN:DAYLIGHT
 TZOFFSETFROM:-0700
 TZOFFSETTO:-0600
+TZNAME:MWT
+DTSTART:19420209T020000
+RDATE:19420209T020000
+END:DAYLIGHT
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0600
+TZOFFSETTO:-0600
+TZNAME:MPT
+DTSTART:19450814T170000
+RDATE:19450814T170000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:-0600
+TZOFFSETTO:-0700
+TZNAME:MST
+DTSTART:19450930T020000
+RDATE:19450930T020000
+RDATE:19801026T020000
+RDATE:19811025T020000
+RDATE:19821031T020000
+RDATE:19831030T020000
+RDATE:19841028T020000
+RDATE:19851027T020000
+RDATE:19861026T020000
+RDATE:19871025T020000
+RDATE:19881030T020000
+RDATE:19891029T020000
+RDATE:19901028T020000
+RDATE:19911027T020000
+RDATE:19921025T020000
+RDATE:19931031T020000
+RDATE:19941030T020000
+RDATE:19951029T020000
+RDATE:19961027T020000
+RDATE:19971026T020000
+RDATE:19981025T020000
+RDATE:19991031T020000
+RDATE:20001029T020000
+RDATE:20011028T020000
+RDATE:20021027T020000
+RDATE:20031026T020000
+RDATE:20041031T020000
+RDATE:20051030T020000
+RDATE:20061029T020000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0700
+TZOFFSETTO:-0500
+TZNAME:MDDT
+DTSTART:19650425T000000
+RDATE:19650425T000000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:-0500
+TZOFFSETTO:-0700
+TZNAME:MST
+DTSTART:19651031T020000
+RDATE:19651031T020000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-0700
+TZOFFSETTO:-0700
+TZNAME:MST
+DTSTART:19800101T000000
+RDATE:19800101T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0700
+TZOFFSETTO:-0600
 TZNAME:MDT
-DTSTART:19700405T020000
-RRULE:FREQ=YEARLY;BYMONTH=4;BYDAY=1SU
+DTSTART:19800427T020000
+RDATE:19800427T020000
+RDATE:19810426T020000
+RDATE:19820425T020000
+RDATE:19830424T020000
+RDATE:19840429T020000
+RDATE:19850428T020000
+RDATE:19860427T020000
+RDATE:19870405T020000
+RDATE:19880403T020000
+RDATE:19890402T020000
+RDATE:19900401T020000
+RDATE:19910407T020000
+RDATE:19920405T020000
+RDATE:19930404T020000
+RDATE:19940403T020000
+RDATE:19950402T020000
+RDATE:19960407T020000
+RDATE:19970406T020000
+RDATE:19980405T020000
+RDATE:19990404T020000
+RDATE:20000402T020000
+RDATE:20010401T020000
+RDATE:20020407T020000
+RDATE:20030406T020000
+RDATE:20040404T020000
+RDATE:20050403T020000
+RDATE:20060402T020000
 END:DAYLIGHT
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/America/Yellowknife.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/America/Miquelon.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Miquelon.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/America/Miquelon.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,22 +1,95 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/America/Miquelon
+TZID:/kde.org/Olson_20070327_1/America/Miquelon
 X-LIC-LOCATION:America/Miquelon
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0300
+TZOFFSETTO:-0200
+TZNAME:PMDT
+DTSTART:20070311T020000
+RRULE:FREQ=YEARLY;BYMONTH=3;BYDAY=2SU
+END:DAYLIGHT
 BEGIN:STANDARD
 TZOFFSETFROM:-0200
 TZOFFSETTO:-0300
 TZNAME:PMST
-DTSTART:19701025T020000
-RRULE:FREQ=YEARLY;BYMONTH=10;BYDAY=-1SU
+DTSTART:20071104T020000
+RRULE:FREQ=YEARLY;BYMONTH=11;BYDAY=1SU
 END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-034440
+TZOFFSETTO:-0400
+TZNAME:AST
+DTSTART:19110515T000000
+RDATE:19110515T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-0400
+TZOFFSETTO:-0300
+TZNAME:PMST
+DTSTART:19800501T000000
+RDATE:19800501T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-0300
+TZOFFSETTO:-0300
+TZNAME:PMST
+DTSTART:19870101T000000
+RDATE:19870101T000000
+END:STANDARD
 BEGIN:DAYLIGHT
 TZOFFSETFROM:-0300
 TZOFFSETTO:-0200
 TZNAME:PMDT
-DTSTART:19700405T020000
-RRULE:FREQ=YEARLY;BYMONTH=4;BYDAY=1SU
+DTSTART:19870405T020000
+RDATE:19870405T020000
+RDATE:19880403T020000
+RDATE:19890402T020000
+RDATE:19900401T020000
+RDATE:19910407T020000
+RDATE:19920405T020000
+RDATE:19930404T020000
+RDATE:19940403T020000
+RDATE:19950402T020000
+RDATE:19960407T020000
+RDATE:19970406T020000
+RDATE:19980405T020000
+RDATE:19990404T020000
+RDATE:20000402T020000
+RDATE:20010401T020000
+RDATE:20020407T020000
+RDATE:20030406T020000
+RDATE:20040404T020000
+RDATE:20050403T020000
+RDATE:20060402T020000
 END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:-0200
+TZOFFSETTO:-0300
+TZNAME:PMST
+DTSTART:19871025T020000
+RDATE:19871025T020000
+RDATE:19881030T020000
+RDATE:19891029T020000
+RDATE:19901028T020000
+RDATE:19911027T020000
+RDATE:19921025T020000
+RDATE:19931031T020000
+RDATE:19941030T020000
+RDATE:19951029T020000
+RDATE:19961027T020000
+RDATE:19971026T020000
+RDATE:19981025T020000
+RDATE:19991031T020000
+RDATE:20001029T020000
+RDATE:20011028T020000
+RDATE:20021027T020000
+RDATE:20031026T020000
+RDATE:20041031T020000
+RDATE:20051030T020000
+RDATE:20061029T020000
+END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/America/Miquelon.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/America/Guadeloupe.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Guadeloupe.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/America/Guadeloupe.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +1,15 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_4/America/Guadeloupe
+TZID:/kde.org/Olson_20070327_1/America/Guadeloupe
 X-LIC-LOCATION:America/Guadeloupe
 BEGIN:STANDARD
-TZOFFSETFROM:-0400
+TZOFFSETFROM:-040608
 TZOFFSETTO:-0400
 TZNAME:AST
-DTSTART:19700101T000000
+DTSTART:19110608T000000
+RDATE:19110608T000000
 END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/America/Guadeloupe.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/America/Los_Angeles.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Los_Angeles.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/America/Los_Angeles.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,22 +1,184 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/America/Los_Angeles
+TZID:/kde.org/Olson_20070327_1/America/Los_Angeles
 X-LIC-LOCATION:America/Los_Angeles
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0800
+TZOFFSETTO:-0700
+TZNAME:PDT
+DTSTART:20070311T020000
+RRULE:FREQ=YEARLY;BYMONTH=3;BYDAY=2SU
+END:DAYLIGHT
 BEGIN:STANDARD
 TZOFFSETFROM:-0700
 TZOFFSETTO:-0800
 TZNAME:PST
-DTSTART:19701025T020000
-RRULE:FREQ=YEARLY;BYMONTH=10;BYDAY=-1SU
+DTSTART:20071104T020000
+RRULE:FREQ=YEARLY;BYMONTH=11;BYDAY=1SU
 END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-075258
+TZOFFSETTO:-0800
+TZNAME:PST
+DTSTART:18831118T120702
+RDATE:18831118T120702
+END:STANDARD
 BEGIN:DAYLIGHT
 TZOFFSETFROM:-0800
 TZOFFSETTO:-0700
 TZNAME:PDT
-DTSTART:19700405T020000
-RRULE:FREQ=YEARLY;BYMONTH=4;BYDAY=1SU
+DTSTART:19180331T020000
+RDATE:19180331T020000
+RDATE:19190330T020000
+RDATE:19480314T020000
+RDATE:19500430T020000
+RDATE:19510429T020000
+RDATE:19520427T020000
+RDATE:19530426T020000
+RDATE:19540425T020000
+RDATE:19550424T020000
+RDATE:19560429T020000
+RDATE:19570428T020000
+RDATE:19580427T020000
+RDATE:19590426T020000
+RDATE:19600424T020000
+RDATE:19610430T020000
+RDATE:19620429T020000
+RDATE:19630428T020000
+RDATE:19640426T020000
+RDATE:19650425T020000
+RDATE:19660424T020000
+RDATE:19670430T020000
+RDATE:19680428T020000
+RDATE:19690427T020000
+RDATE:19700426T020000
+RDATE:19710425T020000
+RDATE:19720430T020000
+RDATE:19730429T020000
+RDATE:19740106T020000
+RDATE:19750223T020000
+RDATE:19760425T020000
+RDATE:19770424T020000
+RDATE:19780430T020000
+RDATE:19790429T020000
+RDATE:19800427T020000
+RDATE:19810426T020000
+RDATE:19820425T020000
+RDATE:19830424T020000
+RDATE:19840429T020000
+RDATE:19850428T020000
+RDATE:19860427T020000
+RDATE:19870405T020000
+RDATE:19880403T020000
+RDATE:19890402T020000
+RDATE:19900401T020000
+RDATE:19910407T020000
+RDATE:19920405T020000
+RDATE:19930404T020000
+RDATE:19940403T020000
+RDATE:19950402T020000
+RDATE:19960407T020000
+RDATE:19970406T020000
+RDATE:19980405T020000
+RDATE:19990404T020000
+RDATE:20000402T020000
+RDATE:20010401T020000
+RDATE:20020407T020000
+RDATE:20030406T020000
+RDATE:20040404T020000
+RDATE:20050403T020000
+RDATE:20060402T020000
 END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:-0700
+TZOFFSETTO:-0800
+TZNAME:PST
+DTSTART:19181027T020000
+RDATE:19181027T020000
+RDATE:19191026T020000
+RDATE:19450930T020000
+RDATE:19490101T020000
+RDATE:19500924T020000
+RDATE:19510930T020000
+RDATE:19520928T020000
+RDATE:19530927T020000
+RDATE:19540926T020000
+RDATE:19550925T020000
+RDATE:19560930T020000
+RDATE:19570929T020000
+RDATE:19580928T020000
+RDATE:19590927T020000
+RDATE:19600925T020000
+RDATE:19610924T020000
+RDATE:19621028T020000
+RDATE:19631027T020000
+RDATE:19641025T020000
+RDATE:19651031T020000
+RDATE:19661030T020000
+RDATE:19671029T020000
+RDATE:19681027T020000
+RDATE:19691026T020000
+RDATE:19701025T020000
+RDATE:19711031T020000
+RDATE:19721029T020000
+RDATE:19731028T020000
+RDATE:19741027T020000
+RDATE:19751026T020000
+RDATE:19761031T020000
+RDATE:19771030T020000
+RDATE:19781029T020000
+RDATE:19791028T020000
+RDATE:19801026T020000
+RDATE:19811025T020000
+RDATE:19821031T020000
+RDATE:19831030T020000
+RDATE:19841028T020000
+RDATE:19851027T020000
+RDATE:19861026T020000
+RDATE:19871025T020000
+RDATE:19881030T020000
+RDATE:19891029T020000
+RDATE:19901028T020000
+RDATE:19911027T020000
+RDATE:19921025T020000
+RDATE:19931031T020000
+RDATE:19941030T020000
+RDATE:19951029T020000
+RDATE:19961027T020000
+RDATE:19971026T020000
+RDATE:19981025T020000
+RDATE:19991031T020000
+RDATE:20001029T020000
+RDATE:20011028T020000
+RDATE:20021027T020000
+RDATE:20031026T020000
+RDATE:20041031T020000
+RDATE:20051030T020000
+RDATE:20061029T020000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0800
+TZOFFSETTO:-0700
+TZNAME:PWT
+DTSTART:19420209T020000
+RDATE:19420209T020000
+END:DAYLIGHT
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0700
+TZOFFSETTO:-0700
+TZNAME:PPT
+DTSTART:19450814T160000
+RDATE:19450814T160000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:-0800
+TZOFFSETTO:-0800
+TZNAME:PST
+DTSTART:19460101T000000
+RDATE:19460101T000000
+RDATE:19670101T000000
+END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/America/Los_Angeles.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/America/Tijuana.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Tijuana.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/America/Tijuana.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,22 +1,106 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/America/Tijuana
+TZID:/kde.org/Olson_20070327_1/America/Tijuana
 X-LIC-LOCATION:America/Tijuana
 BEGIN:STANDARD
 TZOFFSETFROM:-0700
 TZOFFSETTO:-0800
 TZNAME:PST
-DTSTART:19701025T020000
+DTSTART:19761031T020000
 RRULE:FREQ=YEARLY;BYMONTH=10;BYDAY=-1SU
 END:STANDARD
 BEGIN:DAYLIGHT
 TZOFFSETFROM:-0800
 TZOFFSETTO:-0700
 TZNAME:PDT
-DTSTART:19700405T020000
+DTSTART:19870405T020000
 RRULE:FREQ=YEARLY;BYMONTH=4;BYDAY=1SU
 END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:-074804
+TZOFFSETTO:-0700
+TZNAME:MST
+DTSTART:19220101T001156
+RDATE:19220101T001156
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-0700
+TZOFFSETTO:-0800
+TZNAME:PST
+DTSTART:19240101T000000
+RDATE:19240101T000000
+RDATE:19301115T000000
+RDATE:19310930T000000
+RDATE:19451112T000000
+RDATE:19490114T000000
+RDATE:19540926T020000
+RDATE:19550925T020000
+RDATE:19560930T020000
+RDATE:19570929T020000
+RDATE:19580928T020000
+RDATE:19590927T020000
+RDATE:19600925T020000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-0800
+TZOFFSETTO:-0700
+TZNAME:MST
+DTSTART:19270610T230000
+RDATE:19270610T230000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0800
+TZOFFSETTO:-0700
+TZNAME:PDT
+DTSTART:19310401T000000
+RDATE:19310401T000000
+RDATE:19480405T000000
+RDATE:19540425T020000
+RDATE:19550424T020000
+RDATE:19560429T020000
+RDATE:19570428T020000
+RDATE:19580427T020000
+RDATE:19590426T020000
+RDATE:19600424T020000
+RDATE:19760425T020000
+RDATE:19770424T020000
+RDATE:19780430T020000
+RDATE:19790429T020000
+RDATE:19800427T020000
+RDATE:19810426T020000
+RDATE:19820425T020000
+RDATE:19830424T020000
+RDATE:19840429T020000
+RDATE:19850428T020000
+RDATE:19860427T020000
+END:DAYLIGHT
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0800
+TZOFFSETTO:-0700
+TZNAME:PWT
+DTSTART:19420424T000000
+RDATE:19420424T000000
+END:DAYLIGHT
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0700
+TZOFFSETTO:-0700
+TZNAME:PPT
+DTSTART:19450814T160000
+RDATE:19450814T160000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:-0800
+TZOFFSETTO:-0800
+TZNAME:PST
+DTSTART:19540101T000000
+RDATE:19540101T000000
+RDATE:19610101T000000
+RDATE:19760101T000000
+RDATE:19960101T000000
+RDATE:20010101T000000
+RDATE:20020220T000000
+END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/America/Tijuana.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/America/Anguilla.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Anguilla.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/America/Anguilla.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +1,15 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_4/America/Anguilla
+TZID:/kde.org/Olson_20070327_1/America/Anguilla
 X-LIC-LOCATION:America/Anguilla
 BEGIN:STANDARD
-TZOFFSETFROM:-0400
+TZOFFSETFROM:-041216
 TZOFFSETTO:-0400
 TZNAME:AST
-DTSTART:19700101T000000
+DTSTART:19120302T000000
+RDATE:19120302T000000
 END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/America/Anguilla.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/America/Caracas.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Caracas.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/America/Caracas.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +1,29 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/America/Caracas
+TZID:/kde.org/Olson_20070327_1/America/Caracas
 X-LIC-LOCATION:America/Caracas
 BEGIN:STANDARD
-TZOFFSETFROM:-0400
+TZOFFSETFROM:-042744
+TZOFFSETTO:-042740
+TZNAME:CMT
+DTSTART:18900101T000000
+RDATE:18900101T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-042740
+TZOFFSETTO:-0430
+TZNAME:VET
+DTSTART:19120212T000000
+RDATE:19120212T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-0430
 TZOFFSETTO:-0400
 TZNAME:VET
-DTSTART:19700101T000000
+DTSTART:19650101T000000
+RDATE:19650101T000000
 END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/America/Caracas.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/America/Montserrat.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Montserrat.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/America/Montserrat.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +1,15 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_4/America/Montserrat
+TZID:/kde.org/Olson_20070327_1/America/Montserrat
 X-LIC-LOCATION:America/Montserrat
 BEGIN:STANDARD
-TZOFFSETFROM:-0400
+TZOFFSETFROM:-040852
 TZOFFSETTO:-0400
 TZNAME:AST
-DTSTART:19700101T000000
+DTSTART:19110701T000100
+RDATE:19110701T000100
 END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/America/Montserrat.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/America/Chihuahua.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Chihuahua.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/America/Chihuahua.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,22 +1,90 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20020614_6/America/Chihuahua
+TZID:/kde.org/Olson_20070327_1/America/Chihuahua
 X-LIC-LOCATION:America/Chihuahua
 BEGIN:DAYLIGHT
 TZOFFSETFROM:-0700
 TZOFFSETTO:-0600
 TZNAME:MDT
-DTSTART:19700405T020000
+DTSTART:20020407T020000
 RRULE:FREQ=YEARLY;BYMONTH=4;BYDAY=1SU
 END:DAYLIGHT
 BEGIN:STANDARD
 TZOFFSETFROM:-0600
 TZOFFSETTO:-0700
 TZNAME:MST
-DTSTART:19701025T020000
+DTSTART:20021027T020000
 RRULE:FREQ=YEARLY;BYMONTH=10;BYDAY=-1SU
 END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-070420
+TZOFFSETTO:-0700
+TZNAME:MST
+DTSTART:19211231T235540
+RDATE:19211231T235540
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-0700
+TZOFFSETTO:-0600
+TZNAME:CST
+DTSTART:19270610T230000
+RDATE:19270610T230000
+RDATE:19310501T230000
+RDATE:19320401T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-0600
+TZOFFSETTO:-0700
+TZNAME:MST
+DTSTART:19301115T000000
+RDATE:19301115T000000
+RDATE:19311001T000000
+RDATE:19981025T020000
+RDATE:19991031T020000
+RDATE:20001029T020000
+RDATE:20010930T020000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-0600
+TZOFFSETTO:-0600
+TZNAME:CST
+DTSTART:19960101T000000
+RDATE:19960101T000000
+RDATE:19980101T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0600
+TZOFFSETTO:-0500
+TZNAME:CDT
+DTSTART:19960407T020000
+RDATE:19960407T020000
+RDATE:19970406T020000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:-0500
+TZOFFSETTO:-0600
+TZNAME:CST
+DTSTART:19961027T020000
+RDATE:19961027T020000
+RDATE:19971026T020000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0600
+TZOFFSETTO:-0600
+TZNAME:MDT
+DTSTART:19980405T020000
+RDATE:19980405T020000
+END:DAYLIGHT
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0700
+TZOFFSETTO:-0600
+TZNAME:MDT
+DTSTART:19990404T020000
+RDATE:19990404T020000
+RDATE:20000402T020000
+RDATE:20010506T020000
+END:DAYLIGHT
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/America/Chihuahua.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/America/Guatemala.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Guatemala.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/America/Guatemala.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +1,35 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/America/Guatemala
+TZID:/kde.org/Olson_20070327_1/America/Guatemala
 X-LIC-LOCATION:America/Guatemala
 BEGIN:STANDARD
+TZOFFSETFROM:-060204
+TZOFFSETTO:-0600
+TZNAME:CST
+DTSTART:19181005T000000
+RDATE:19181005T000000
+END:STANDARD
+BEGIN:DAYLIGHT
 TZOFFSETFROM:-0600
+TZOFFSETTO:-0500
+TZNAME:CDT
+DTSTART:19731125T000000
+RDATE:19731125T000000
+RDATE:19830521T000000
+RDATE:19910323T000000
+RDATE:20060430T000000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:-0500
 TZOFFSETTO:-0600
 TZNAME:CST
-DTSTART:19700101T000000
+DTSTART:19740224T000000
+RDATE:19740224T000000
+RDATE:19830922T000000
+RDATE:19910907T000000
+RDATE:20061001T000000
 END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/America/Guatemala.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/America/North_Dakota/New_Salem.ics
===================================================================
--- libkcal/libical/zoneinfo/America/North_Dakota/New_Salem.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 0)
+++ libkcal/libical/zoneinfo/America/North_Dakota/New_Salem.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -0,0 +1,158 @@
+BEGIN:VCALENDAR
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
+VERSION:2.0
+BEGIN:VTIMEZONE
+TZID:/kde.org/Olson_20070327_1/America/North_Dakota/New_Salem
+X-LIC-LOCATION:America/North_Dakota/New_Salem
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0600
+TZOFFSETTO:-0500
+TZNAME:CDT
+DTSTART:20070311T020000
+RRULE:FREQ=YEARLY;BYMONTH=3;BYDAY=2SU
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:-0500
+TZOFFSETTO:-0600
+TZNAME:CST
+DTSTART:20071104T020000
+RRULE:FREQ=YEARLY;BYMONTH=11;BYDAY=1SU
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-064539
+TZOFFSETTO:-0700
+TZNAME:MST
+DTSTART:18831118T121421
+RDATE:18831118T121421
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0700
+TZOFFSETTO:-0600
+TZNAME:MDT
+DTSTART:19180331T020000
+RDATE:19180331T020000
+RDATE:19190330T020000
+RDATE:19670430T020000
+RDATE:19680428T020000
+RDATE:19690427T020000
+RDATE:19700426T020000
+RDATE:19710425T020000
+RDATE:19720430T020000
+RDATE:19730429T020000
+RDATE:19740106T020000
+RDATE:19750223T020000
+RDATE:19760425T020000
+RDATE:19770424T020000
+RDATE:19780430T020000
+RDATE:19790429T020000
+RDATE:19800427T020000
+RDATE:19810426T020000
+RDATE:19820425T020000
+RDATE:19830424T020000
+RDATE:19840429T020000
+RDATE:19850428T020000
+RDATE:19860427T020000
+RDATE:19870405T020000
+RDATE:19880403T020000
+RDATE:19890402T020000
+RDATE:19900401T020000
+RDATE:19910407T020000
+RDATE:19920405T020000
+RDATE:19930404T020000
+RDATE:19940403T020000
+RDATE:19950402T020000
+RDATE:19960407T020000
+RDATE:19970406T020000
+RDATE:19980405T020000
+RDATE:19990404T020000
+RDATE:20000402T020000
+RDATE:20010401T020000
+RDATE:20020407T020000
+RDATE:20030406T020000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:-0600
+TZOFFSETTO:-0700
+TZNAME:MST
+DTSTART:19181027T020000
+RDATE:19181027T020000
+RDATE:19191026T020000
+RDATE:19450930T020000
+RDATE:19671029T020000
+RDATE:19681027T020000
+RDATE:19691026T020000
+RDATE:19701025T020000
+RDATE:19711031T020000
+RDATE:19721029T020000
+RDATE:19731028T020000
+RDATE:19741027T020000
+RDATE:19751026T020000
+RDATE:19761031T020000
+RDATE:19771030T020000
+RDATE:19781029T020000
+RDATE:19791028T020000
+RDATE:19801026T020000
+RDATE:19811025T020000
+RDATE:19821031T020000
+RDATE:19831030T020000
+RDATE:19841028T020000
+RDATE:19851027T020000
+RDATE:19861026T020000
+RDATE:19871025T020000
+RDATE:19881030T020000
+RDATE:19891029T020000
+RDATE:19901028T020000
+RDATE:19911027T020000
+RDATE:19921025T020000
+RDATE:19931031T020000
+RDATE:19941030T020000
+RDATE:19951029T020000
+RDATE:19961027T020000
+RDATE:19971026T020000
+RDATE:19981025T020000
+RDATE:19991031T020000
+RDATE:20001029T020000
+RDATE:20011028T020000
+RDATE:20021027T020000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0700
+TZOFFSETTO:-0600
+TZNAME:MWT
+DTSTART:19420209T020000
+RDATE:19420209T020000
+END:DAYLIGHT
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0600
+TZOFFSETTO:-0600
+TZNAME:MPT
+DTSTART:19450814T170000
+RDATE:19450814T170000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:-0600
+TZOFFSETTO:-0600
+TZNAME:CST
+DTSTART:20031026T020000
+RDATE:20031026T020000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0600
+TZOFFSETTO:-0500
+TZNAME:CDT
+DTSTART:20040404T020000
+RDATE:20040404T020000
+RDATE:20050403T020000
+RDATE:20060402T020000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:-0500
+TZOFFSETTO:-0600
+TZNAME:CST
+DTSTART:20041031T020000
+RDATE:20041031T020000
+RDATE:20051030T020000
+RDATE:20061029T020000
+END:STANDARD
+END:VTIMEZONE
+END:VCALENDAR
Index: libkcal/libical/zoneinfo/America/North_Dakota/Center.ics
===================================================================
--- libkcal/libical/zoneinfo/America/North_Dakota/Center.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/America/North_Dakota/Center.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,22 +1,158 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_2/America/North_Dakota/Center
+TZID:/kde.org/Olson_20070327_1/America/North_Dakota/Center
 X-LIC-LOCATION:America/North_Dakota/Center
 BEGIN:DAYLIGHT
 TZOFFSETFROM:-0600
 TZOFFSETTO:-0500
 TZNAME:CDT
-DTSTART:19700405T020000
-RRULE:FREQ=YEARLY;BYMONTH=4;BYDAY=1SU
+DTSTART:20070311T020000
+RRULE:FREQ=YEARLY;BYMONTH=3;BYDAY=2SU
 END:DAYLIGHT
 BEGIN:STANDARD
 TZOFFSETFROM:-0500
 TZOFFSETTO:-0600
 TZNAME:CST
-DTSTART:19701025T020000
-RRULE:FREQ=YEARLY;BYMONTH=10;BYDAY=-1SU
+DTSTART:20071104T020000
+RRULE:FREQ=YEARLY;BYMONTH=11;BYDAY=1SU
 END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-064512
+TZOFFSETTO:-0700
+TZNAME:MST
+DTSTART:18831118T121448
+RDATE:18831118T121448
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0700
+TZOFFSETTO:-0600
+TZNAME:MDT
+DTSTART:19180331T020000
+RDATE:19180331T020000
+RDATE:19190330T020000
+RDATE:19670430T020000
+RDATE:19680428T020000
+RDATE:19690427T020000
+RDATE:19700426T020000
+RDATE:19710425T020000
+RDATE:19720430T020000
+RDATE:19730429T020000
+RDATE:19740106T020000
+RDATE:19750223T020000
+RDATE:19760425T020000
+RDATE:19770424T020000
+RDATE:19780430T020000
+RDATE:19790429T020000
+RDATE:19800427T020000
+RDATE:19810426T020000
+RDATE:19820425T020000
+RDATE:19830424T020000
+RDATE:19840429T020000
+RDATE:19850428T020000
+RDATE:19860427T020000
+RDATE:19870405T020000
+RDATE:19880403T020000
+RDATE:19890402T020000
+RDATE:19900401T020000
+RDATE:19910407T020000
+RDATE:19920405T020000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:-0600
+TZOFFSETTO:-0700
+TZNAME:MST
+DTSTART:19181027T020000
+RDATE:19181027T020000
+RDATE:19191026T020000
+RDATE:19450930T020000
+RDATE:19671029T020000
+RDATE:19681027T020000
+RDATE:19691026T020000
+RDATE:19701025T020000
+RDATE:19711031T020000
+RDATE:19721029T020000
+RDATE:19731028T020000
+RDATE:19741027T020000
+RDATE:19751026T020000
+RDATE:19761031T020000
+RDATE:19771030T020000
+RDATE:19781029T020000
+RDATE:19791028T020000
+RDATE:19801026T020000
+RDATE:19811025T020000
+RDATE:19821031T020000
+RDATE:19831030T020000
+RDATE:19841028T020000
+RDATE:19851027T020000
+RDATE:19861026T020000
+RDATE:19871025T020000
+RDATE:19881030T020000
+RDATE:19891029T020000
+RDATE:19901028T020000
+RDATE:19911027T020000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0700
+TZOFFSETTO:-0600
+TZNAME:MWT
+DTSTART:19420209T020000
+RDATE:19420209T020000
+END:DAYLIGHT
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0600
+TZOFFSETTO:-0600
+TZNAME:MPT
+DTSTART:19450814T170000
+RDATE:19450814T170000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:-0600
+TZOFFSETTO:-0600
+TZNAME:CST
+DTSTART:19921025T020000
+RDATE:19921025T020000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0600
+TZOFFSETTO:-0500
+TZNAME:CDT
+DTSTART:19930404T020000
+RDATE:19930404T020000
+RDATE:19940403T020000
+RDATE:19950402T020000
+RDATE:19960407T020000
+RDATE:19970406T020000
+RDATE:19980405T020000
+RDATE:19990404T020000
+RDATE:20000402T020000
+RDATE:20010401T020000
+RDATE:20020407T020000
+RDATE:20030406T020000
+RDATE:20040404T020000
+RDATE:20050403T020000
+RDATE:20060402T020000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:-0500
+TZOFFSETTO:-0600
+TZNAME:CST
+DTSTART:19931031T020000
+RDATE:19931031T020000
+RDATE:19941030T020000
+RDATE:19951029T020000
+RDATE:19961027T020000
+RDATE:19971026T020000
+RDATE:19981025T020000
+RDATE:19991031T020000
+RDATE:20001029T020000
+RDATE:20011028T020000
+RDATE:20021027T020000
+RDATE:20031026T020000
+RDATE:20041031T020000
+RDATE:20051030T020000
+RDATE:20061029T020000
+END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR
Index: libkcal/libical/zoneinfo/America/Porto_Velho.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Porto_Velho.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/America/Porto_Velho.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +1,62 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/America/Porto_Velho
+TZID:/kde.org/Olson_20070327_1/America/Porto_Velho
 X-LIC-LOCATION:America/Porto_Velho
 BEGIN:STANDARD
+TZOFFSETFROM:-041536
+TZOFFSETTO:-0400
+TZNAME:AMT
+DTSTART:19140101T000000
+RDATE:19140101T000000
+END:STANDARD
+BEGIN:DAYLIGHT
 TZOFFSETFROM:-0400
+TZOFFSETTO:-0300
+TZNAME:AMST
+DTSTART:19311003T110000
+RDATE:19311003T110000
+RDATE:19321003T000000
+RDATE:19491201T000000
+RDATE:19501201T000000
+RDATE:19511201T000000
+RDATE:19521201T000000
+RDATE:19631209T000000
+RDATE:19650131T000000
+RDATE:19651201T000000
+RDATE:19661101T000000
+RDATE:19671101T000000
+RDATE:19851102T000000
+RDATE:19861025T000000
+RDATE:19871025T000000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:-0300
 TZOFFSETTO:-0400
 TZNAME:AMT
-DTSTART:19700101T000000
+DTSTART:19320401T000000
+RDATE:19320401T000000
+RDATE:19330401T000000
+RDATE:19500416T010000
+RDATE:19510401T000000
+RDATE:19520401T000000
+RDATE:19530301T000000
+RDATE:19640301T000000
+RDATE:19650331T000000
+RDATE:19660301T000000
+RDATE:19670301T000000
+RDATE:19680301T000000
+RDATE:19860315T000000
+RDATE:19870214T000000
+RDATE:19880207T000000
 END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-0400
+TZOFFSETTO:-0400
+TZNAME:AMT
+DTSTART:19880912T000000
+RDATE:19880912T000000
+END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/America/Porto_Velho.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/America/Santo_Domingo.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Santo_Domingo.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/America/Santo_Domingo.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +1,67 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/America/Santo_Domingo
+TZID:/kde.org/Olson_20070327_1/America/Santo_Domingo
 X-LIC-LOCATION:America/Santo_Domingo
 BEGIN:STANDARD
+TZOFFSETFROM:-043936
+TZOFFSETTO:-0440
+TZNAME:SDMT
+DTSTART:18900101T000000
+RDATE:18900101T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-0440
+TZOFFSETTO:-0500
+TZNAME:EST
+DTSTART:19330401T120000
+RDATE:19330401T120000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0500
+TZOFFSETTO:-0400
+TZNAME:EDT
+DTSTART:19661030T000000
+RDATE:19661030T000000
+END:DAYLIGHT
+BEGIN:STANDARD
 TZOFFSETFROM:-0400
+TZOFFSETTO:-0500
+TZNAME:EST
+DTSTART:19670228T000000
+RDATE:19670228T000000
+RDATE:20001029T020000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0500
+TZOFFSETTO:-0430
+TZNAME:EHDT
+DTSTART:19691026T000000
+RDATE:19691026T000000
+RDATE:19701025T000000
+RDATE:19711031T000000
+RDATE:19721029T000000
+RDATE:19731028T000000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:-0430
+TZOFFSETTO:-0500
+TZNAME:EST
+DTSTART:19700221T000000
+RDATE:19700221T000000
+RDATE:19710120T000000
+RDATE:19720121T000000
+RDATE:19730121T000000
+RDATE:19740121T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-0500
 TZOFFSETTO:-0400
 TZNAME:AST
-DTSTART:19700101T000000
+DTSTART:19741027T000000
+RDATE:19741027T000000
+RDATE:20001203T010000
 END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/America/Santo_Domingo.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/America/St_Thomas.ics
===================================================================
--- libkcal/libical/zoneinfo/America/St_Thomas.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/America/St_Thomas.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +1,15 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_4/America/St_Thomas
+TZID:/kde.org/Olson_20070327_1/America/St_Thomas
 X-LIC-LOCATION:America/St_Thomas
 BEGIN:STANDARD
-TZOFFSETFROM:-0400
+TZOFFSETFROM:-041944
 TZOFFSETTO:-0400
 TZNAME:AST
-DTSTART:19700101T000000
+DTSTART:19110701T000000
+RDATE:19110701T000000
 END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/America/St_Thomas.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/America/St_Lucia.ics
===================================================================
--- libkcal/libical/zoneinfo/America/St_Lucia.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/America/St_Lucia.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +1,22 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/America/St_Lucia
+TZID:/kde.org/Olson_20070327_1/America/St_Lucia
 X-LIC-LOCATION:America/St_Lucia
 BEGIN:STANDARD
-TZOFFSETFROM:-0400
+TZOFFSETFROM:-0404
+TZOFFSETTO:-0404
+TZNAME:CMT
+DTSTART:18900101T000000
+RDATE:18900101T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-0404
 TZOFFSETTO:-0400
 TZNAME:AST
-DTSTART:19700101T000000
+DTSTART:19120101T000000
+RDATE:19120101T000000
 END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/America/St_Lucia.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/America/Bahia.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Bahia.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 0)
+++ libkcal/libical/zoneinfo/America/Bahia.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -0,0 +1,92 @@
+BEGIN:VCALENDAR
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
+VERSION:2.0
+BEGIN:VTIMEZONE
+TZID:/kde.org/Olson_20070327_1/America/Bahia
+X-LIC-LOCATION:America/Bahia
+BEGIN:STANDARD
+TZOFFSETFROM:-023404
+TZOFFSETTO:-0300
+TZNAME:BRT
+DTSTART:19140101T000000
+RDATE:19140101T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0300
+TZOFFSETTO:-0200
+TZNAME:BRST
+DTSTART:19311003T110000
+RDATE:19311003T110000
+RDATE:19321003T000000
+RDATE:19491201T000000
+RDATE:19501201T000000
+RDATE:19511201T000000
+RDATE:19521201T000000
+RDATE:19631209T000000
+RDATE:19650131T000000
+RDATE:19651201T000000
+RDATE:19661101T000000
+RDATE:19671101T000000
+RDATE:19851102T000000
+RDATE:19861025T000000
+RDATE:19871025T000000
+RDATE:19881016T000000
+RDATE:19891015T000000
+RDATE:19901021T000000
+RDATE:19911020T000000
+RDATE:19921025T000000
+RDATE:19931017T000000
+RDATE:19941016T000000
+RDATE:19951015T000000
+RDATE:19961006T000000
+RDATE:19971006T000000
+RDATE:19981011T000000
+RDATE:19991003T000000
+RDATE:20001008T000000
+RDATE:20011014T000000
+RDATE:20021103T000000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:-0200
+TZOFFSETTO:-0300
+TZNAME:BRT
+DTSTART:19320401T000000
+RDATE:19320401T000000
+RDATE:19330401T000000
+RDATE:19500416T010000
+RDATE:19510401T000000
+RDATE:19520401T000000
+RDATE:19530301T000000
+RDATE:19640301T000000
+RDATE:19650331T000000
+RDATE:19660301T000000
+RDATE:19670301T000000
+RDATE:19680301T000000
+RDATE:19860315T000000
+RDATE:19870214T000000
+RDATE:19880207T000000
+RDATE:19890129T000000
+RDATE:19900211T000000
+RDATE:19910217T000000
+RDATE:19920209T000000
+RDATE:19930131T000000
+RDATE:19940220T000000
+RDATE:19950219T000000
+RDATE:19960211T000000
+RDATE:19970216T000000
+RDATE:19980301T000000
+RDATE:19990221T000000
+RDATE:20000227T000000
+RDATE:20010218T000000
+RDATE:20020217T000000
+RDATE:20030216T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-0300
+TZOFFSETTO:-0300
+TZNAME:BRT
+DTSTART:20030924T000000
+RDATE:20030924T000000
+END:STANDARD
+END:VTIMEZONE
+END:VCALENDAR
Index: libkcal/libical/zoneinfo/America/Noronha.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Noronha.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/America/Noronha.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +1,75 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/America/Noronha
+TZID:/kde.org/Olson_20070327_1/America/Noronha
 X-LIC-LOCATION:America/Noronha
 BEGIN:STANDARD
+TZOFFSETFROM:-020940
+TZOFFSETTO:-0200
+TZNAME:FNT
+DTSTART:19140101T000000
+RDATE:19140101T000000
+END:STANDARD
+BEGIN:DAYLIGHT
 TZOFFSETFROM:-0200
+TZOFFSETTO:-0100
+TZNAME:FNST
+DTSTART:19311003T110000
+RDATE:19311003T110000
+RDATE:19321003T000000
+RDATE:19491201T000000
+RDATE:19501201T000000
+RDATE:19511201T000000
+RDATE:19521201T000000
+RDATE:19631209T000000
+RDATE:19650131T000000
+RDATE:19651201T000000
+RDATE:19661101T000000
+RDATE:19671101T000000
+RDATE:19851102T000000
+RDATE:19861025T000000
+RDATE:19871025T000000
+RDATE:19881016T000000
+RDATE:19891015T000000
+RDATE:19991003T000000
+RDATE:20001008T000000
+RDATE:20011014T000000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:-0100
 TZOFFSETTO:-0200
 TZNAME:FNT
-DTSTART:19700101T000000
+DTSTART:19320401T000000
+RDATE:19320401T000000
+RDATE:19330401T000000
+RDATE:19500416T010000
+RDATE:19510401T000000
+RDATE:19520401T000000
+RDATE:19530301T000000
+RDATE:19640301T000000
+RDATE:19650331T000000
+RDATE:19660301T000000
+RDATE:19670301T000000
+RDATE:19680301T000000
+RDATE:19860315T000000
+RDATE:19870214T000000
+RDATE:19880207T000000
+RDATE:19890129T000000
+RDATE:19900211T000000
+RDATE:20000227T000000
+RDATE:20001015T000000
+RDATE:20020217T000000
 END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-0200
+TZOFFSETTO:-0200
+TZNAME:FNT
+DTSTART:19900917T000000
+RDATE:19900917T000000
+RDATE:19990930T000000
+RDATE:20010913T000000
+RDATE:20021001T000000
+END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/America/Noronha.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/America/Santiago.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Santiago.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/America/Santiago.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,22 +1,184 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/America/Santiago
+TZID:/kde.org/Olson_20070327_1/America/Santiago
 X-LIC-LOCATION:America/Santiago
 BEGIN:DAYLIGHT
 TZOFFSETFROM:-0400
 TZOFFSETTO:-0300
 TZNAME:CLST
-DTSTART:19701011T000000
-RRULE:FREQ=YEARLY;BYMONTH=10;BYDAY=2SU
+DTSTART:19991010T000000
+RRULE:FREQ=YEARLY;BYMONTH=10;BYMONTHDAY=9,10,11,12,13,14,15;BYDAY=SU
 END:DAYLIGHT
 BEGIN:STANDARD
 TZOFFSETFROM:-0300
 TZOFFSETTO:-0400
 TZNAME:CLT
-DTSTART:19700315T000000
-RRULE:FREQ=YEARLY;BYMONTH=3;BYDAY=2SU
+DTSTART:20000312T000000
+RRULE:FREQ=YEARLY;BYMONTH=3;BYMONTHDAY=9,10,11,12,13,14,15;BYDAY=SU
 END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-044246
+TZOFFSETTO:-044246
+TZNAME:SMT
+DTSTART:18900101T000000
+RDATE:18900101T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-044246
+TZOFFSETTO:-0500
+TZNAME:CLT
+DTSTART:19100101T000000
+RDATE:19100101T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-0500
+TZOFFSETTO:-044246
+TZNAME:SMT
+DTSTART:19160701T000000
+RDATE:19160701T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-044246
+TZOFFSETTO:-0400
+TZNAME:CLT
+DTSTART:19180901T000000
+RDATE:19180901T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-0400
+TZOFFSETTO:-044246
+TZNAME:SMT
+DTSTART:19190701T000000
+RDATE:19190701T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-044246
+TZOFFSETTO:-0400
+TZNAME:CLST
+DTSTART:19270901T000000
+RDATE:19270901T000000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:-0400
+TZOFFSETTO:-0500
+TZNAME:CLT
+DTSTART:19280401T000000
+RDATE:19280401T000000
+RDATE:19290401T000000
+RDATE:19300401T000000
+RDATE:19310401T000000
+RDATE:19320401T000000
+RDATE:19420601T000000
+RDATE:19460831T230000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0500
+TZOFFSETTO:-0400
+TZNAME:CLST
+DTSTART:19280901T000000
+RDATE:19280901T000000
+RDATE:19290901T000000
+RDATE:19300901T000000
+RDATE:19310901T000000
+RDATE:19320901T000000
+RDATE:19420801T000000
+END:DAYLIGHT
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0400
+TZOFFSETTO:-0400
+TZNAME:CLST
+DTSTART:19460715T000000
+RDATE:19460715T000000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:-0500
+TZOFFSETTO:-0500
+TZNAME:CLT
+DTSTART:19470331T230000
+RDATE:19470331T230000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-0500
+TZOFFSETTO:-0400
+TZNAME:CLT
+DTSTART:19470522T000000
+RDATE:19470522T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0400
+TZOFFSETTO:-0300
+TZNAME:CLST
+DTSTART:19681103T000000
+RDATE:19681103T000000
+RDATE:19691123T000000
+RDATE:19701011T000000
+RDATE:19711010T000000
+RDATE:19721015T000000
+RDATE:19730930T000000
+RDATE:19741013T000000
+RDATE:19751012T000000
+RDATE:19761010T000000
+RDATE:19771009T000000
+RDATE:19781015T000000
+RDATE:19791014T000000
+RDATE:19801012T000000
+RDATE:19811011T000000
+RDATE:19821010T000000
+RDATE:19831009T000000
+RDATE:19841014T000000
+RDATE:19851013T000000
+RDATE:19861012T000000
+RDATE:19871011T000000
+RDATE:19881002T000000
+RDATE:19891015T000000
+RDATE:19900916T000000
+RDATE:19911013T000000
+RDATE:19921011T000000
+RDATE:19931010T000000
+RDATE:19941009T000000
+RDATE:19951015T000000
+RDATE:19961013T000000
+RDATE:19971012T000000
+RDATE:19980927T000000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:-0300
+TZOFFSETTO:-0400
+TZNAME:CLT
+DTSTART:19690330T000000
+RDATE:19690330T000000
+RDATE:19700329T000000
+RDATE:19710314T000000
+RDATE:19720312T000000
+RDATE:19730311T000000
+RDATE:19740310T000000
+RDATE:19750309T000000
+RDATE:19760314T000000
+RDATE:19770313T000000
+RDATE:19780312T000000
+RDATE:19790311T000000
+RDATE:19800309T000000
+RDATE:19810315T000000
+RDATE:19820314T000000
+RDATE:19830313T000000
+RDATE:19840311T000000
+RDATE:19850310T000000
+RDATE:19860309T000000
+RDATE:19870412T000000
+RDATE:19880313T000000
+RDATE:19890312T000000
+RDATE:19900318T000000
+RDATE:19910310T000000
+RDATE:19920315T000000
+RDATE:19930314T000000
+RDATE:19940313T000000
+RDATE:19950312T000000
+RDATE:19960310T000000
+RDATE:19970330T000000
+RDATE:19980315T000000
+RDATE:19990404T000000
+END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/America/Santiago.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/America/Boa_Vista.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Boa_Vista.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/America/Boa_Vista.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +1,67 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/America/Boa_Vista
+TZID:/kde.org/Olson_20070327_1/America/Boa_Vista
 X-LIC-LOCATION:America/Boa_Vista
 BEGIN:STANDARD
+TZOFFSETFROM:-040240
+TZOFFSETTO:-0400
+TZNAME:AMT
+DTSTART:19140101T000000
+RDATE:19140101T000000
+END:STANDARD
+BEGIN:DAYLIGHT
 TZOFFSETFROM:-0400
+TZOFFSETTO:-0300
+TZNAME:AMST
+DTSTART:19311003T110000
+RDATE:19311003T110000
+RDATE:19321003T000000
+RDATE:19491201T000000
+RDATE:19501201T000000
+RDATE:19511201T000000
+RDATE:19521201T000000
+RDATE:19631209T000000
+RDATE:19650131T000000
+RDATE:19651201T000000
+RDATE:19661101T000000
+RDATE:19671101T000000
+RDATE:19851102T000000
+RDATE:19861025T000000
+RDATE:19871025T000000
+RDATE:19991003T000000
+RDATE:20001008T000000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:-0300
 TZOFFSETTO:-0400
 TZNAME:AMT
-DTSTART:19700101T000000
+DTSTART:19320401T000000
+RDATE:19320401T000000
+RDATE:19330401T000000
+RDATE:19500416T010000
+RDATE:19510401T000000
+RDATE:19520401T000000
+RDATE:19530301T000000
+RDATE:19640301T000000
+RDATE:19650331T000000
+RDATE:19660301T000000
+RDATE:19670301T000000
+RDATE:19680301T000000
+RDATE:19860315T000000
+RDATE:19870214T000000
+RDATE:19880207T000000
+RDATE:20000227T000000
+RDATE:20001015T000000
 END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-0400
+TZOFFSETTO:-0400
+TZNAME:AMT
+DTSTART:19880912T000000
+RDATE:19880912T000000
+RDATE:19990930T000000
+END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/America/Boa_Vista.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/America/Cancun.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Cancun.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/America/Cancun.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,22 +1,79 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20020614_6/America/Cancun
+TZID:/kde.org/Olson_20070327_1/America/Cancun
 X-LIC-LOCATION:America/Cancun
 BEGIN:DAYLIGHT
 TZOFFSETFROM:-0600
 TZOFFSETTO:-0500
 TZNAME:CDT
-DTSTART:19700405T020000
+DTSTART:20020407T020000
 RRULE:FREQ=YEARLY;BYMONTH=4;BYDAY=1SU
 END:DAYLIGHT
 BEGIN:STANDARD
 TZOFFSETFROM:-0500
 TZOFFSETTO:-0600
 TZNAME:CST
-DTSTART:19701025T020000
+DTSTART:20021027T020000
 RRULE:FREQ=YEARLY;BYMONTH=10;BYDAY=-1SU
 END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-054704
+TZOFFSETTO:-0600
+TZNAME:CST
+DTSTART:19220101T001256
+RDATE:19220101T001256
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-0600
+TZOFFSETTO:-0500
+TZNAME:EST
+DTSTART:19811223T000000
+RDATE:19811223T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0500
+TZOFFSETTO:-0400
+TZNAME:EDT
+DTSTART:19960407T020000
+RDATE:19960407T020000
+RDATE:19970406T020000
+RDATE:19980405T020000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:-0400
+TZOFFSETTO:-0500
+TZNAME:EST
+DTSTART:19961027T020000
+RDATE:19961027T020000
+RDATE:19971026T020000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0400
+TZOFFSETTO:-0500
+TZNAME:CDT
+DTSTART:19980802T020000
+RDATE:19980802T020000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:-0500
+TZOFFSETTO:-0600
+TZNAME:CST
+DTSTART:19981025T020000
+RDATE:19981025T020000
+RDATE:19991031T020000
+RDATE:20001029T020000
+RDATE:20010930T020000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0600
+TZOFFSETTO:-0500
+TZNAME:CDT
+DTSTART:19990404T020000
+RDATE:19990404T020000
+RDATE:20000402T020000
+RDATE:20010506T020000
+END:DAYLIGHT
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/America/Cancun.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/America/Costa_Rica.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Costa_Rica.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/America/Costa_Rica.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +1,42 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/America/Costa_Rica
+TZID:/kde.org/Olson_20070327_1/America/Costa_Rica
 X-LIC-LOCATION:America/Costa_Rica
 BEGIN:STANDARD
+TZOFFSETFROM:-053620
+TZOFFSETTO:-053620
+TZNAME:SJMT
+DTSTART:18900101T000000
+RDATE:18900101T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-053620
+TZOFFSETTO:-0600
+TZNAME:CST
+DTSTART:19210115T000000
+RDATE:19210115T000000
+END:STANDARD
+BEGIN:DAYLIGHT
 TZOFFSETFROM:-0600
+TZOFFSETTO:-0500
+TZNAME:CDT
+DTSTART:19790225T000000
+RDATE:19790225T000000
+RDATE:19800224T000000
+RDATE:19910119T000000
+RDATE:19920118T000000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:-0500
 TZOFFSETTO:-0600
 TZNAME:CST
-DTSTART:19700101T000000
+DTSTART:19790603T000000
+RDATE:19790603T000000
+RDATE:19800601T000000
+RDATE:19910701T000000
+RDATE:19920315T000000
 END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/America/Costa_Rica.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/America/Cambridge_Bay.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Cambridge_Bay.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/America/Cambridge_Bay.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,22 +1,155 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/America/Cambridge_Bay
+TZID:/kde.org/Olson_20070327_1/America/Cambridge_Bay
 X-LIC-LOCATION:America/Cambridge_Bay
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0700
+TZOFFSETTO:-0600
+TZNAME:MDT
+DTSTART:20070311T020000
+RRULE:FREQ=YEARLY;BYMONTH=3;BYDAY=2SU
+END:DAYLIGHT
 BEGIN:STANDARD
 TZOFFSETFROM:-0600
 TZOFFSETTO:-0700
 TZNAME:MST
-DTSTART:19701025T020000
-RRULE:FREQ=YEARLY;BYMONTH=10;BYDAY=-1SU
+DTSTART:20071104T020000
+RRULE:FREQ=YEARLY;BYMONTH=11;BYDAY=1SU
 END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0000
+TZOFFSETTO:-0700
+TZNAME:MST
+DTSTART:19200101T000000
+RDATE:19200101T000000
+END:STANDARD
 BEGIN:DAYLIGHT
 TZOFFSETFROM:-0700
 TZOFFSETTO:-0600
+TZNAME:MWT
+DTSTART:19420209T020000
+RDATE:19420209T020000
+END:DAYLIGHT
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0600
+TZOFFSETTO:-0600
+TZNAME:MPT
+DTSTART:19450814T170000
+RDATE:19450814T170000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:-0600
+TZOFFSETTO:-0700
+TZNAME:MST
+DTSTART:19450930T020000
+RDATE:19450930T020000
+RDATE:19801026T020000
+RDATE:19811025T020000
+RDATE:19821031T020000
+RDATE:19831030T020000
+RDATE:19841028T020000
+RDATE:19851027T020000
+RDATE:19861026T020000
+RDATE:19871025T020000
+RDATE:19881030T020000
+RDATE:19891029T020000
+RDATE:19901028T020000
+RDATE:19911027T020000
+RDATE:19921025T020000
+RDATE:19931031T020000
+RDATE:19941030T020000
+RDATE:19951029T020000
+RDATE:19961027T020000
+RDATE:19971026T020000
+RDATE:19981025T020000
+RDATE:20011028T020000
+RDATE:20021027T020000
+RDATE:20031026T020000
+RDATE:20041031T020000
+RDATE:20051030T020000
+RDATE:20061029T020000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0700
+TZOFFSETTO:-0500
+TZNAME:MDDT
+DTSTART:19650425T000000
+RDATE:19650425T000000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:-0500
+TZOFFSETTO:-0700
+TZNAME:MST
+DTSTART:19651031T020000
+RDATE:19651031T020000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0700
+TZOFFSETTO:-0600
 TZNAME:MDT
-DTSTART:19700405T020000
-RRULE:FREQ=YEARLY;BYMONTH=4;BYDAY=1SU
+DTSTART:19800427T020000
+RDATE:19800427T020000
+RDATE:19810426T020000
+RDATE:19820425T020000
+RDATE:19830424T020000
+RDATE:19840429T020000
+RDATE:19850428T020000
+RDATE:19860427T020000
+RDATE:19870405T020000
+RDATE:19880403T020000
+RDATE:19890402T020000
+RDATE:19900401T020000
+RDATE:19910407T020000
+RDATE:19920405T020000
+RDATE:19930404T020000
+RDATE:19940403T020000
+RDATE:19950402T020000
+RDATE:19960407T020000
+RDATE:19970406T020000
+RDATE:19980405T020000
+RDATE:19990404T020000
+RDATE:20020407T020000
+RDATE:20030406T020000
+RDATE:20040404T020000
+RDATE:20050403T020000
+RDATE:20060402T020000
 END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:-0600
+TZOFFSETTO:-0600
+TZNAME:CST
+DTSTART:19991031T020000
+RDATE:19991031T020000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0600
+TZOFFSETTO:-0500
+TZNAME:CDT
+DTSTART:20000402T020000
+RDATE:20000402T020000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:-0500
+TZOFFSETTO:-0500
+TZNAME:EST
+DTSTART:20001029T020000
+RDATE:20001029T020000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-0500
+TZOFFSETTO:-0600
+TZNAME:CST
+DTSTART:20001105T000000
+RDATE:20001105T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0600
+TZOFFSETTO:-0600
+TZNAME:MDT
+DTSTART:20010401T020000
+RDATE:20010401T020000
+END:DAYLIGHT
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/America/Cambridge_Bay.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/America/Managua.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Managua.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/America/Managua.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +1,54 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/America/Managua
+TZID:/kde.org/Olson_20070327_1/America/Managua
 X-LIC-LOCATION:America/Managua
 BEGIN:STANDARD
+TZOFFSETFROM:-054508
+TZOFFSETTO:-054512
+TZNAME:MMT
+DTSTART:18900101T000000
+RDATE:18900101T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-054512
+TZOFFSETTO:-0600
+TZNAME:CST
+DTSTART:19340623T000000
+RDATE:19340623T000000
+END:STANDARD
+BEGIN:STANDARD
 TZOFFSETFROM:-0600
+TZOFFSETTO:-0500
+TZNAME:EST
+DTSTART:19730501T000000
+RDATE:19730501T000000
+RDATE:19920101T040000
+RDATE:19930101T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-0500
 TZOFFSETTO:-0600
 TZNAME:CST
-DTSTART:19700101T000000
+DTSTART:19750216T000000
+RDATE:19750216T000000
+RDATE:19790625T000000
+RDATE:19800623T000000
+RDATE:19920924T000000
+RDATE:19970101T000000
+RDATE:20051002T000000
+RDATE:20061001T010000
 END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0600
+TZOFFSETTO:-0500
+TZNAME:CDT
+DTSTART:19790318T000000
+RDATE:19790318T000000
+RDATE:19800316T000000
+RDATE:20050410T000000
+RDATE:20060430T020000
+END:DAYLIGHT
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/America/Managua.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/America/Phoenix.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Phoenix.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/America/Phoenix.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +1,51 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/America/Phoenix
+TZID:/kde.org/Olson_20070327_1/America/Phoenix
 X-LIC-LOCATION:America/Phoenix
 BEGIN:STANDARD
+TZOFFSETFROM:-072818
+TZOFFSETTO:-0700
+TZNAME:MST
+DTSTART:18831118T113142
+RDATE:18831118T113142
+END:STANDARD
+BEGIN:DAYLIGHT
 TZOFFSETFROM:-0700
+TZOFFSETTO:-0600
+TZNAME:MDT
+DTSTART:19180331T020000
+RDATE:19180331T020000
+RDATE:19190330T020000
+RDATE:19670430T020000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:-0600
 TZOFFSETTO:-0700
 TZNAME:MST
-DTSTART:19700101T000000
+DTSTART:19181027T020000
+RDATE:19181027T020000
+RDATE:19191026T020000
+RDATE:19440101T000100
+RDATE:19441001T000100
+RDATE:19671029T020000
 END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0700
+TZOFFSETTO:-0600
+TZNAME:MWT
+DTSTART:19420209T020000
+RDATE:19420209T020000
+RDATE:19440401T000100
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:-0700
+TZOFFSETTO:-0700
+TZNAME:MST
+DTSTART:19670101T000000
+RDATE:19670101T000000
+RDATE:19680321T000000
+END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/America/Phoenix.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/America/Halifax.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Halifax.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/America/Halifax.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,22 +1,228 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/America/Halifax
+TZID:/kde.org/Olson_20070327_1/America/Halifax
 X-LIC-LOCATION:America/Halifax
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0400
+TZOFFSETTO:-0300
+TZNAME:ADT
+DTSTART:20070311T020000
+RRULE:FREQ=YEARLY;BYMONTH=3;BYDAY=2SU
+END:DAYLIGHT
 BEGIN:STANDARD
 TZOFFSETFROM:-0300
 TZOFFSETTO:-0400
 TZNAME:AST
-DTSTART:19701025T020000
-RRULE:FREQ=YEARLY;BYMONTH=10;BYDAY=-1SU
+DTSTART:20071104T020000
+RRULE:FREQ=YEARLY;BYMONTH=11;BYDAY=1SU
 END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-041424
+TZOFFSETTO:-0400
+TZNAME:AST
+DTSTART:19020615T000000
+RDATE:19020615T000000
+END:STANDARD
 BEGIN:DAYLIGHT
 TZOFFSETFROM:-0400
 TZOFFSETTO:-0300
 TZNAME:ADT
-DTSTART:19700405T020000
-RRULE:FREQ=YEARLY;BYMONTH=4;BYDAY=1SU
+DTSTART:19160401T000000
+RDATE:19160401T000000
+RDATE:19180414T020000
+RDATE:19200509T000000
+RDATE:19210506T000000
+RDATE:19220430T000000
+RDATE:19230506T000000
+RDATE:19240504T000000
+RDATE:19250503T000000
+RDATE:19260516T000000
+RDATE:19270501T000000
+RDATE:19280513T000000
+RDATE:19290512T000000
+RDATE:19300511T000000
+RDATE:19310510T000000
+RDATE:19320501T000000
+RDATE:19330430T000000
+RDATE:19340520T000000
+RDATE:19350602T000000
+RDATE:19360601T000000
+RDATE:19370502T000000
+RDATE:19380501T000000
+RDATE:19390528T000000
+RDATE:19400505T000000
+RDATE:19410504T000000
+RDATE:19460428T020000
+RDATE:19470427T020000
+RDATE:19480425T020000
+RDATE:19490424T020000
+RDATE:19510429T020000
+RDATE:19520427T020000
+RDATE:19530426T020000
+RDATE:19540425T020000
+RDATE:19560429T020000
+RDATE:19570428T020000
+RDATE:19580427T020000
+RDATE:19590426T020000
+RDATE:19620429T020000
+RDATE:19630428T020000
+RDATE:19640426T020000
+RDATE:19650425T020000
+RDATE:19660424T020000
+RDATE:19670430T020000
+RDATE:19680428T020000
+RDATE:19690427T020000
+RDATE:19700426T020000
+RDATE:19710425T020000
+RDATE:19720430T020000
+RDATE:19730429T020000
+RDATE:19740428T020000
+RDATE:19750427T020000
+RDATE:19760425T020000
+RDATE:19770424T020000
+RDATE:19780430T020000
+RDATE:19790429T020000
+RDATE:19800427T020000
+RDATE:19810426T020000
+RDATE:19820425T020000
+RDATE:19830424T020000
+RDATE:19840429T020000
+RDATE:19850428T020000
+RDATE:19860427T020000
+RDATE:19870405T020000
+RDATE:19880403T020000
+RDATE:19890402T020000
+RDATE:19900401T020000
+RDATE:19910407T020000
+RDATE:19920405T020000
+RDATE:19930404T020000
+RDATE:19940403T020000
+RDATE:19950402T020000
+RDATE:19960407T020000
+RDATE:19970406T020000
+RDATE:19980405T020000
+RDATE:19990404T020000
+RDATE:20000402T020000
+RDATE:20010401T020000
+RDATE:20020407T020000
+RDATE:20030406T020000
+RDATE:20040404T020000
+RDATE:20050403T020000
+RDATE:20060402T020000
 END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:-0300
+TZOFFSETTO:-0400
+TZNAME:AST
+DTSTART:19161001T000000
+RDATE:19161001T000000
+RDATE:19181031T020000
+RDATE:19200829T000000
+RDATE:19210905T000000
+RDATE:19220905T000000
+RDATE:19230904T000000
+RDATE:19240915T000000
+RDATE:19250928T000000
+RDATE:19260913T000000
+RDATE:19270926T000000
+RDATE:19280909T000000
+RDATE:19290903T000000
+RDATE:19300915T000000
+RDATE:19310928T000000
+RDATE:19320926T000000
+RDATE:19331002T000000
+RDATE:19340916T000000
+RDATE:19350930T000000
+RDATE:19360914T000000
+RDATE:19370927T000000
+RDATE:19380926T000000
+RDATE:19390925T000000
+RDATE:19400930T000000
+RDATE:19410929T000000
+RDATE:19450930T020000
+RDATE:19460929T020000
+RDATE:19470928T020000
+RDATE:19480926T020000
+RDATE:19490925T020000
+RDATE:19510930T020000
+RDATE:19520928T020000
+RDATE:19530927T020000
+RDATE:19540926T020000
+RDATE:19560930T020000
+RDATE:19570929T020000
+RDATE:19580928T020000
+RDATE:19590927T020000
+RDATE:19621028T020000
+RDATE:19631027T020000
+RDATE:19641025T020000
+RDATE:19651031T020000
+RDATE:19661030T020000
+RDATE:19671029T020000
+RDATE:19681027T020000
+RDATE:19691026T020000
+RDATE:19701025T020000
+RDATE:19711031T020000
+RDATE:19721029T020000
+RDATE:19731028T020000
+RDATE:19741027T020000
+RDATE:19751026T020000
+RDATE:19761031T020000
+RDATE:19771030T020000
+RDATE:19781029T020000
+RDATE:19791028T020000
+RDATE:19801026T020000
+RDATE:19811025T020000
+RDATE:19821031T020000
+RDATE:19831030T020000
+RDATE:19841028T020000
+RDATE:19851027T020000
+RDATE:19861026T020000
+RDATE:19871025T020000
+RDATE:19881030T020000
+RDATE:19891029T020000
+RDATE:19901028T020000
+RDATE:19911027T020000
+RDATE:19921025T020000
+RDATE:19931031T020000
+RDATE:19941030T020000
+RDATE:19951029T020000
+RDATE:19961027T020000
+RDATE:19971026T020000
+RDATE:19981025T020000
+RDATE:19991031T020000
+RDATE:20001029T020000
+RDATE:20011028T020000
+RDATE:20021027T020000
+RDATE:20031026T020000
+RDATE:20041031T020000
+RDATE:20051030T020000
+RDATE:20061029T020000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-0400
+TZOFFSETTO:-0400
+TZNAME:AST
+DTSTART:19180101T000000
+RDATE:19180101T000000
+RDATE:19190101T000000
+RDATE:19460101T000000
+RDATE:19740101T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0400
+TZOFFSETTO:-0300
+TZNAME:AWT
+DTSTART:19420209T020000
+RDATE:19420209T020000
+END:DAYLIGHT
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0300
+TZOFFSETTO:-0300
+TZNAME:APT
+DTSTART:19450814T200000
+RDATE:19450814T200000
+END:DAYLIGHT
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/America/Halifax.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/America/Menominee.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Menominee.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/America/Menominee.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,22 +1,152 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/America/Menominee
+TZID:/kde.org/Olson_20070327_1/America/Menominee
 X-LIC-LOCATION:America/Menominee
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0600
+TZOFFSETTO:-0500
+TZNAME:CDT
+DTSTART:20070311T020000
+RRULE:FREQ=YEARLY;BYMONTH=3;BYDAY=2SU
+END:DAYLIGHT
 BEGIN:STANDARD
 TZOFFSETFROM:-0500
 TZOFFSETTO:-0600
 TZNAME:CST
-DTSTART:19701025T020000
-RRULE:FREQ=YEARLY;BYMONTH=10;BYDAY=-1SU
+DTSTART:20071104T020000
+RRULE:FREQ=YEARLY;BYMONTH=11;BYDAY=1SU
 END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-055027
+TZOFFSETTO:-0600
+TZNAME:CST
+DTSTART:18850918T120000
+RDATE:18850918T120000
+END:STANDARD
 BEGIN:DAYLIGHT
 TZOFFSETFROM:-0600
 TZOFFSETTO:-0500
 TZNAME:CDT
-DTSTART:19700405T020000
-RRULE:FREQ=YEARLY;BYMONTH=4;BYDAY=1SU
+DTSTART:19180331T020000
+RDATE:19180331T020000
+RDATE:19190330T020000
+RDATE:19460428T020000
+RDATE:19660424T020000
+RDATE:19740106T020000
+RDATE:19750223T020000
+RDATE:19760425T020000
+RDATE:19770424T020000
+RDATE:19780430T020000
+RDATE:19790429T020000
+RDATE:19800427T020000
+RDATE:19810426T020000
+RDATE:19820425T020000
+RDATE:19830424T020000
+RDATE:19840429T020000
+RDATE:19850428T020000
+RDATE:19860427T020000
+RDATE:19870405T020000
+RDATE:19880403T020000
+RDATE:19890402T020000
+RDATE:19900401T020000
+RDATE:19910407T020000
+RDATE:19920405T020000
+RDATE:19930404T020000
+RDATE:19940403T020000
+RDATE:19950402T020000
+RDATE:19960407T020000
+RDATE:19970406T020000
+RDATE:19980405T020000
+RDATE:19990404T020000
+RDATE:20000402T020000
+RDATE:20010401T020000
+RDATE:20020407T020000
+RDATE:20030406T020000
+RDATE:20040404T020000
+RDATE:20050403T020000
+RDATE:20060402T020000
 END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:-0500
+TZOFFSETTO:-0600
+TZNAME:CST
+DTSTART:19181027T020000
+RDATE:19181027T020000
+RDATE:19191026T020000
+RDATE:19450930T020000
+RDATE:19460929T020000
+RDATE:19661030T020000
+RDATE:19731028T020000
+RDATE:19741027T020000
+RDATE:19751026T020000
+RDATE:19761031T020000
+RDATE:19771030T020000
+RDATE:19781029T020000
+RDATE:19791028T020000
+RDATE:19801026T020000
+RDATE:19811025T020000
+RDATE:19821031T020000
+RDATE:19831030T020000
+RDATE:19841028T020000
+RDATE:19851027T020000
+RDATE:19861026T020000
+RDATE:19871025T020000
+RDATE:19881030T020000
+RDATE:19891029T020000
+RDATE:19901028T020000
+RDATE:19911027T020000
+RDATE:19921025T020000
+RDATE:19931031T020000
+RDATE:19941030T020000
+RDATE:19951029T020000
+RDATE:19961027T020000
+RDATE:19971026T020000
+RDATE:19981025T020000
+RDATE:19991031T020000
+RDATE:20001029T020000
+RDATE:20011028T020000
+RDATE:20021027T020000
+RDATE:20031026T020000
+RDATE:20041031T020000
+RDATE:20051030T020000
+RDATE:20061029T020000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0600
+TZOFFSETTO:-0500
+TZNAME:CWT
+DTSTART:19420209T020000
+RDATE:19420209T020000
+END:DAYLIGHT
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0500
+TZOFFSETTO:-0500
+TZNAME:CPT
+DTSTART:19450814T180000
+RDATE:19450814T180000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:-0600
+TZOFFSETTO:-0600
+TZNAME:CST
+DTSTART:19460101T000000
+RDATE:19460101T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-0600
+TZOFFSETTO:-0500
+TZNAME:EST
+DTSTART:19690427T020000
+RDATE:19690427T020000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0500
+TZOFFSETTO:-0500
+TZNAME:CDT
+DTSTART:19730429T020000
+RDATE:19730429T020000
+END:DAYLIGHT
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/America/Menominee.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/America/Hermosillo.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Hermosillo.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/America/Hermosillo.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +1,66 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/America/Hermosillo
+TZID:/kde.org/Olson_20070327_1/America/Hermosillo
 X-LIC-LOCATION:America/Hermosillo
 BEGIN:STANDARD
+TZOFFSETFROM:-072352
+TZOFFSETTO:-0700
+TZNAME:MST
+DTSTART:19211231T233608
+RDATE:19211231T233608
+END:STANDARD
+BEGIN:STANDARD
 TZOFFSETFROM:-0700
+TZOFFSETTO:-0600
+TZNAME:CST
+DTSTART:19270610T230000
+RDATE:19270610T230000
+RDATE:19310501T230000
+RDATE:19320401T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-0600
 TZOFFSETTO:-0700
 TZNAME:MST
+DTSTART:19301115T000000
+RDATE:19301115T000000
+RDATE:19311001T000000
+RDATE:19420424T000000
+RDATE:19961027T020000
+RDATE:19971026T020000
+RDATE:19981025T020000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-0700
+TZOFFSETTO:-0800
+TZNAME:PST
+DTSTART:19490114T000000
+RDATE:19490114T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-0800
+TZOFFSETTO:-0700
+TZNAME:MST
 DTSTART:19700101T000000
+RDATE:19700101T000000
 END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0700
+TZOFFSETTO:-0600
+TZNAME:MDT
+DTSTART:19960407T020000
+RDATE:19960407T020000
+RDATE:19970406T020000
+RDATE:19980405T020000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:-0700
+TZOFFSETTO:-0700
+TZNAME:MST
+DTSTART:19990101T000000
+RDATE:19990101T000000
+END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/America/Hermosillo.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/America/Curacao.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Curacao.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/America/Curacao.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +1,22 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/America/Curacao
+TZID:/kde.org/Olson_20070327_1/America/Curacao
 X-LIC-LOCATION:America/Curacao
 BEGIN:STANDARD
-TZOFFSETFROM:-0400
+TZOFFSETFROM:-043544
+TZOFFSETTO:-0430
+TZNAME:ANT
+DTSTART:19120212T000000
+RDATE:19120212T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-0430
 TZOFFSETTO:-0400
 TZNAME:AST
-DTSTART:19700101T000000
+DTSTART:19650101T000000
+RDATE:19650101T000000
 END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/America/Curacao.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/America/Paramaribo.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Paramaribo.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/America/Paramaribo.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +1,43 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/America/Paramaribo
+TZID:/kde.org/Olson_20070327_1/America/Paramaribo
 X-LIC-LOCATION:America/Paramaribo
 BEGIN:STANDARD
-TZOFFSETFROM:-0300
+TZOFFSETFROM:-034040
+TZOFFSETTO:-034052
+TZNAME:PMT
+DTSTART:19110101T000000
+RDATE:19110101T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-034052
+TZOFFSETTO:-034036
+TZNAME:PMT
+DTSTART:19350101T000000
+RDATE:19350101T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-034036
+TZOFFSETTO:-0330
+TZNAME:NEGT
+DTSTART:19451001T000000
+RDATE:19451001T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-0330
+TZOFFSETTO:-0330
+TZNAME:SRT
+DTSTART:19751120T000000
+RDATE:19751120T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-0330
 TZOFFSETTO:-0300
 TZNAME:SRT
-DTSTART:19700101T000000
+DTSTART:19841001T000000
+RDATE:19841001T000000
 END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/America/Paramaribo.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/America/Martinique.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Martinique.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/America/Martinique.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +1,36 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/America/Martinique
+TZID:/kde.org/Olson_20070327_1/America/Martinique
 X-LIC-LOCATION:America/Martinique
 BEGIN:STANDARD
+TZOFFSETFROM:-040420
+TZOFFSETTO:-040420
+TZNAME:FFMT
+DTSTART:18900101T000000
+RDATE:18900101T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-040420
+TZOFFSETTO:-0400
+TZNAME:AST
+DTSTART:19110501T000000
+RDATE:19110501T000000
+END:STANDARD
+BEGIN:DAYLIGHT
 TZOFFSETFROM:-0400
+TZOFFSETTO:-0300
+TZNAME:ADT
+DTSTART:19800406T000000
+RDATE:19800406T000000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:-0300
 TZOFFSETTO:-0400
 TZNAME:AST
-DTSTART:19700101T000000
+DTSTART:19800928T000000
+RDATE:19800928T000000
 END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/America/Martinique.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/America/Winnipeg.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Winnipeg.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/America/Winnipeg.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,22 +1,183 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/America/Winnipeg
+TZID:/kde.org/Olson_20070327_1/America/Winnipeg
 X-LIC-LOCATION:America/Winnipeg
 BEGIN:DAYLIGHT
 TZOFFSETFROM:-0600
 TZOFFSETTO:-0500
 TZNAME:CDT
-DTSTART:19700405T020000
-RRULE:FREQ=YEARLY;BYMONTH=4;BYDAY=1SU
+DTSTART:20070311T020000
+RRULE:FREQ=YEARLY;BYMONTH=3;BYDAY=2SU
 END:DAYLIGHT
 BEGIN:STANDARD
 TZOFFSETFROM:-0500
 TZOFFSETTO:-0600
 TZNAME:CST
-DTSTART:19701025T030000
-RRULE:FREQ=YEARLY;BYMONTH=10;BYDAY=-1SU
+DTSTART:20071104T020000
+RRULE:FREQ=YEARLY;BYMONTH=11;BYDAY=1SU
 END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-062836
+TZOFFSETTO:-0600
+TZNAME:CST
+DTSTART:18870716T000000
+RDATE:18870716T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0600
+TZOFFSETTO:-0500
+TZNAME:CDT
+DTSTART:19160423T000000
+RDATE:19160423T000000
+RDATE:19180414T020000
+RDATE:19370516T020000
+RDATE:19460512T020000
+RDATE:19470427T020000
+RDATE:19480425T020000
+RDATE:19490424T020000
+RDATE:19500501T020000
+RDATE:19510429T020000
+RDATE:19520427T020000
+RDATE:19530426T020000
+RDATE:19540425T020000
+RDATE:19550424T020000
+RDATE:19560429T020000
+RDATE:19570428T020000
+RDATE:19580427T020000
+RDATE:19590426T020000
+RDATE:19600424T020000
+RDATE:19630428T020000
+RDATE:19660424T020000
+RDATE:19670430T020000
+RDATE:19680428T020000
+RDATE:19690427T020000
+RDATE:19700426T020000
+RDATE:19710425T020000
+RDATE:19720430T020000
+RDATE:19730429T020000
+RDATE:19740428T020000
+RDATE:19750427T020000
+RDATE:19760425T020000
+RDATE:19770424T020000
+RDATE:19780430T020000
+RDATE:19790429T020000
+RDATE:19800427T020000
+RDATE:19810426T020000
+RDATE:19820425T020000
+RDATE:19830424T020000
+RDATE:19840429T020000
+RDATE:19850428T020000
+RDATE:19860427T020000
+RDATE:19870405T020000
+RDATE:19880403T020000
+RDATE:19890402T020000
+RDATE:19900401T020000
+RDATE:19910407T020000
+RDATE:19920405T020000
+RDATE:19930404T020000
+RDATE:19940403T020000
+RDATE:19950402T020000
+RDATE:19960407T020000
+RDATE:19970406T020000
+RDATE:19980405T020000
+RDATE:19990404T020000
+RDATE:20000402T020000
+RDATE:20010401T020000
+RDATE:20020407T020000
+RDATE:20030406T020000
+RDATE:20040404T020000
+RDATE:20050403T020000
+RDATE:20060402T020000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:-0500
+TZOFFSETTO:-0600
+TZNAME:CST
+DTSTART:19160917T000000
+RDATE:19160917T000000
+RDATE:19181031T020000
+RDATE:19370926T020000
+RDATE:19450930T020000
+RDATE:19461013T020000
+RDATE:19470928T020000
+RDATE:19480926T020000
+RDATE:19490925T020000
+RDATE:19500930T020000
+RDATE:19510930T020000
+RDATE:19520928T020000
+RDATE:19530927T020000
+RDATE:19540926T020000
+RDATE:19550925T020000
+RDATE:19560930T020000
+RDATE:19570929T020000
+RDATE:19580928T020000
+RDATE:19591025T020000
+RDATE:19600925T020000
+RDATE:19630922T020000
+RDATE:19661030T030000
+RDATE:19671029T030000
+RDATE:19681027T030000
+RDATE:19691026T030000
+RDATE:19701025T030000
+RDATE:19711031T030000
+RDATE:19721029T030000
+RDATE:19731028T030000
+RDATE:19741027T030000
+RDATE:19751026T030000
+RDATE:19761031T030000
+RDATE:19771030T030000
+RDATE:19781029T030000
+RDATE:19791028T030000
+RDATE:19801026T030000
+RDATE:19811025T030000
+RDATE:19821031T030000
+RDATE:19831030T030000
+RDATE:19841028T030000
+RDATE:19851027T030000
+RDATE:19861026T030000
+RDATE:19871025T030000
+RDATE:19881030T030000
+RDATE:19891029T030000
+RDATE:19901028T030000
+RDATE:19911027T030000
+RDATE:19921025T030000
+RDATE:19931031T030000
+RDATE:19941030T030000
+RDATE:19951029T030000
+RDATE:19961027T030000
+RDATE:19971026T030000
+RDATE:19981025T030000
+RDATE:19991031T030000
+RDATE:20001029T030000
+RDATE:20011028T030000
+RDATE:20021027T030000
+RDATE:20031026T030000
+RDATE:20041031T030000
+RDATE:20051030T030000
+RDATE:20061029T020000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0600
+TZOFFSETTO:-0500
+TZNAME:CWT
+DTSTART:19420209T020000
+RDATE:19420209T020000
+END:DAYLIGHT
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0500
+TZOFFSETTO:-0500
+TZNAME:CPT
+DTSTART:19450814T180000
+RDATE:19450814T180000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:-0600
+TZOFFSETTO:-0600
+TZNAME:CST
+DTSTART:20060101T000000
+RDATE:20060101T000000
+END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/America/Winnipeg.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/America/Lima.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Lima.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/America/Lima.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +1,48 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/America/Lima
+TZID:/kde.org/Olson_20070327_1/America/Lima
 X-LIC-LOCATION:America/Lima
 BEGIN:STANDARD
+TZOFFSETFROM:-050812
+TZOFFSETTO:-050836
+TZNAME:LMT
+DTSTART:18900101T000000
+RDATE:18900101T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-050836
+TZOFFSETTO:-0500
+TZNAME:PET
+DTSTART:19080728T000000
+RDATE:19080728T000000
+END:STANDARD
+BEGIN:DAYLIGHT
 TZOFFSETFROM:-0500
+TZOFFSETTO:-0400
+TZNAME:PEST
+DTSTART:19380101T000000
+RDATE:19380101T000000
+RDATE:19380925T000000
+RDATE:19390924T000000
+RDATE:19860101T000000
+RDATE:19870101T000000
+RDATE:19900101T000000
+RDATE:19940101T000000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:-0400
 TZOFFSETTO:-0500
 TZNAME:PET
-DTSTART:19700101T000000
+DTSTART:19380401T000000
+RDATE:19380401T000000
+RDATE:19390326T000000
+RDATE:19400324T000000
+RDATE:19860401T000000
+RDATE:19870401T000000
+RDATE:19900401T000000
+RDATE:19940401T000000
 END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/America/Lima.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/America/Shiprock.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Shiprock.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/America/Shiprock.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,22 +1,158 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/America/Shiprock
+TZID:/kde.org/Olson_20070327_1/America/Shiprock
 X-LIC-LOCATION:America/Shiprock
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0700
+TZOFFSETTO:-0600
+TZNAME:MDT
+DTSTART:20070311T020000
+RRULE:FREQ=YEARLY;BYMONTH=3;BYDAY=2SU
+END:DAYLIGHT
 BEGIN:STANDARD
 TZOFFSETFROM:-0600
 TZOFFSETTO:-0700
 TZNAME:MST
-DTSTART:19701025T020000
-RRULE:FREQ=YEARLY;BYMONTH=10;BYDAY=-1SU
+DTSTART:20071104T020000
+RRULE:FREQ=YEARLY;BYMONTH=11;BYDAY=1SU
 END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-065956
+TZOFFSETTO:-0700
+TZNAME:MST
+DTSTART:18831118T120004
+RDATE:18831118T120004
+END:STANDARD
 BEGIN:DAYLIGHT
 TZOFFSETFROM:-0700
 TZOFFSETTO:-0600
 TZNAME:MDT
-DTSTART:19700405T020000
-RRULE:FREQ=YEARLY;BYMONTH=4;BYDAY=1SU
+DTSTART:19180331T020000
+RDATE:19180331T020000
+RDATE:19190330T020000
+RDATE:19200328T020000
+RDATE:19210327T020000
+RDATE:19650425T020000
+RDATE:19660424T020000
+RDATE:19670430T020000
+RDATE:19680428T020000
+RDATE:19690427T020000
+RDATE:19700426T020000
+RDATE:19710425T020000
+RDATE:19720430T020000
+RDATE:19730429T020000
+RDATE:19740106T020000
+RDATE:19750223T020000
+RDATE:19760425T020000
+RDATE:19770424T020000
+RDATE:19780430T020000
+RDATE:19790429T020000
+RDATE:19800427T020000
+RDATE:19810426T020000
+RDATE:19820425T020000
+RDATE:19830424T020000
+RDATE:19840429T020000
+RDATE:19850428T020000
+RDATE:19860427T020000
+RDATE:19870405T020000
+RDATE:19880403T020000
+RDATE:19890402T020000
+RDATE:19900401T020000
+RDATE:19910407T020000
+RDATE:19920405T020000
+RDATE:19930404T020000
+RDATE:19940403T020000
+RDATE:19950402T020000
+RDATE:19960407T020000
+RDATE:19970406T020000
+RDATE:19980405T020000
+RDATE:19990404T020000
+RDATE:20000402T020000
+RDATE:20010401T020000
+RDATE:20020407T020000
+RDATE:20030406T020000
+RDATE:20040404T020000
+RDATE:20050403T020000
+RDATE:20060402T020000
 END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:-0600
+TZOFFSETTO:-0700
+TZNAME:MST
+DTSTART:19181027T020000
+RDATE:19181027T020000
+RDATE:19191026T020000
+RDATE:19201031T020000
+RDATE:19210522T020000
+RDATE:19450930T020000
+RDATE:19651031T020000
+RDATE:19661030T020000
+RDATE:19671029T020000
+RDATE:19681027T020000
+RDATE:19691026T020000
+RDATE:19701025T020000
+RDATE:19711031T020000
+RDATE:19721029T020000
+RDATE:19731028T020000
+RDATE:19741027T020000
+RDATE:19751026T020000
+RDATE:19761031T020000
+RDATE:19771030T020000
+RDATE:19781029T020000
+RDATE:19791028T020000
+RDATE:19801026T020000
+RDATE:19811025T020000
+RDATE:19821031T020000
+RDATE:19831030T020000
+RDATE:19841028T020000
+RDATE:19851027T020000
+RDATE:19861026T020000
+RDATE:19871025T020000
+RDATE:19881030T020000
+RDATE:19891029T020000
+RDATE:19901028T020000
+RDATE:19911027T020000
+RDATE:19921025T020000
+RDATE:19931031T020000
+RDATE:19941030T020000
+RDATE:19951029T020000
+RDATE:19961027T020000
+RDATE:19971026T020000
+RDATE:19981025T020000
+RDATE:19991031T020000
+RDATE:20001029T020000
+RDATE:20011028T020000
+RDATE:20021027T020000
+RDATE:20031026T020000
+RDATE:20041031T020000
+RDATE:20051030T020000
+RDATE:20061029T020000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-0700
+TZOFFSETTO:-0700
+TZNAME:MST
+DTSTART:19200101T000000
+RDATE:19200101T000000
+RDATE:19420101T000000
+RDATE:19460101T000000
+RDATE:19670101T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0700
+TZOFFSETTO:-0600
+TZNAME:MWT
+DTSTART:19420209T020000
+RDATE:19420209T020000
+END:DAYLIGHT
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0600
+TZOFFSETTO:-0600
+TZNAME:MPT
+DTSTART:19450814T170000
+RDATE:19450814T170000
+END:DAYLIGHT
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/America/Shiprock.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/America/Edmonton.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Edmonton.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/America/Edmonton.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,22 +1,151 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/America/Edmonton
+TZID:/kde.org/Olson_20070327_1/America/Edmonton
 X-LIC-LOCATION:America/Edmonton
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0700
+TZOFFSETTO:-0600
+TZNAME:MDT
+DTSTART:20070311T020000
+RRULE:FREQ=YEARLY;BYMONTH=3;BYDAY=2SU
+END:DAYLIGHT
 BEGIN:STANDARD
 TZOFFSETFROM:-0600
 TZOFFSETTO:-0700
 TZNAME:MST
-DTSTART:19701025T020000
-RRULE:FREQ=YEARLY;BYMONTH=10;BYDAY=-1SU
+DTSTART:20071104T020000
+RRULE:FREQ=YEARLY;BYMONTH=11;BYDAY=1SU
 END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-073352
+TZOFFSETTO:-0700
+TZNAME:MST
+DTSTART:19060901T000000
+RDATE:19060901T000000
+END:STANDARD
 BEGIN:DAYLIGHT
 TZOFFSETFROM:-0700
 TZOFFSETTO:-0600
 TZNAME:MDT
-DTSTART:19700405T020000
-RRULE:FREQ=YEARLY;BYMONTH=4;BYDAY=1SU
+DTSTART:19180414T020000
+RDATE:19180414T020000
+RDATE:19190413T020000
+RDATE:19200425T020000
+RDATE:19210424T020000
+RDATE:19220430T020000
+RDATE:19230429T020000
+RDATE:19470427T020000
+RDATE:19670430T020000
+RDATE:19690427T020000
+RDATE:19720430T020000
+RDATE:19730429T020000
+RDATE:19740428T020000
+RDATE:19750427T020000
+RDATE:19760425T020000
+RDATE:19770424T020000
+RDATE:19780430T020000
+RDATE:19790429T020000
+RDATE:19800427T020000
+RDATE:19810426T020000
+RDATE:19820425T020000
+RDATE:19830424T020000
+RDATE:19840429T020000
+RDATE:19850428T020000
+RDATE:19860427T020000
+RDATE:19870405T020000
+RDATE:19880403T020000
+RDATE:19890402T020000
+RDATE:19900401T020000
+RDATE:19910407T020000
+RDATE:19920405T020000
+RDATE:19930404T020000
+RDATE:19940403T020000
+RDATE:19950402T020000
+RDATE:19960407T020000
+RDATE:19970406T020000
+RDATE:19980405T020000
+RDATE:19990404T020000
+RDATE:20000402T020000
+RDATE:20010401T020000
+RDATE:20020407T020000
+RDATE:20030406T020000
+RDATE:20040404T020000
+RDATE:20050403T020000
+RDATE:20060402T020000
 END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:-0600
+TZOFFSETTO:-0700
+TZNAME:MST
+DTSTART:19181031T020000
+RDATE:19181031T020000
+RDATE:19190527T020000
+RDATE:19201031T020000
+RDATE:19210925T020000
+RDATE:19220924T020000
+RDATE:19230930T020000
+RDATE:19450930T020000
+RDATE:19470928T020000
+RDATE:19671029T020000
+RDATE:19691026T020000
+RDATE:19721029T020000
+RDATE:19731028T020000
+RDATE:19741027T020000
+RDATE:19751026T020000
+RDATE:19761031T020000
+RDATE:19771030T020000
+RDATE:19781029T020000
+RDATE:19791028T020000
+RDATE:19801026T020000
+RDATE:19811025T020000
+RDATE:19821031T020000
+RDATE:19831030T020000
+RDATE:19841028T020000
+RDATE:19851027T020000
+RDATE:19861026T020000
+RDATE:19871025T020000
+RDATE:19881030T020000
+RDATE:19891029T020000
+RDATE:19901028T020000
+RDATE:19911027T020000
+RDATE:19921025T020000
+RDATE:19931031T020000
+RDATE:19941030T020000
+RDATE:19951029T020000
+RDATE:19961027T020000
+RDATE:19971026T020000
+RDATE:19981025T020000
+RDATE:19991031T020000
+RDATE:20001029T020000
+RDATE:20011028T020000
+RDATE:20021027T020000
+RDATE:20031026T020000
+RDATE:20041031T020000
+RDATE:20051030T020000
+RDATE:20061029T020000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0700
+TZOFFSETTO:-0600
+TZNAME:MWT
+DTSTART:19420209T020000
+RDATE:19420209T020000
+END:DAYLIGHT
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0600
+TZOFFSETTO:-0600
+TZNAME:MPT
+DTSTART:19450814T170000
+RDATE:19450814T170000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:-0700
+TZOFFSETTO:-0700
+TZNAME:MST
+DTSTART:19870101T000000
+RDATE:19870101T000000
+END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/America/Edmonton.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/America/Dominica.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Dominica.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/America/Dominica.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +1,15 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_4/America/Dominica
+TZID:/kde.org/Olson_20070327_1/America/Dominica
 X-LIC-LOCATION:America/Dominica
 BEGIN:STANDARD
-TZOFFSETFROM:-0400
+TZOFFSETFROM:-040536
 TZOFFSETTO:-0400
 TZNAME:AST
-DTSTART:19700101T000000
+DTSTART:19110701T000100
+RDATE:19110701T000100
 END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/America/Dominica.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/America/Belem.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Belem.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/America/Belem.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +1,62 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/America/Belem
+TZID:/kde.org/Olson_20070327_1/America/Belem
 X-LIC-LOCATION:America/Belem
 BEGIN:STANDARD
+TZOFFSETFROM:-031356
+TZOFFSETTO:-0300
+TZNAME:BRT
+DTSTART:19140101T000000
+RDATE:19140101T000000
+END:STANDARD
+BEGIN:DAYLIGHT
 TZOFFSETFROM:-0300
+TZOFFSETTO:-0200
+TZNAME:BRST
+DTSTART:19311003T110000
+RDATE:19311003T110000
+RDATE:19321003T000000
+RDATE:19491201T000000
+RDATE:19501201T000000
+RDATE:19511201T000000
+RDATE:19521201T000000
+RDATE:19631209T000000
+RDATE:19650131T000000
+RDATE:19651201T000000
+RDATE:19661101T000000
+RDATE:19671101T000000
+RDATE:19851102T000000
+RDATE:19861025T000000
+RDATE:19871025T000000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:-0200
 TZOFFSETTO:-0300
 TZNAME:BRT
-DTSTART:19700101T000000
+DTSTART:19320401T000000
+RDATE:19320401T000000
+RDATE:19330401T000000
+RDATE:19500416T010000
+RDATE:19510401T000000
+RDATE:19520401T000000
+RDATE:19530301T000000
+RDATE:19640301T000000
+RDATE:19650331T000000
+RDATE:19660301T000000
+RDATE:19670301T000000
+RDATE:19680301T000000
+RDATE:19860315T000000
+RDATE:19870214T000000
+RDATE:19880207T000000
 END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-0300
+TZOFFSETTO:-0300
+TZNAME:BRT
+DTSTART:19880912T000000
+RDATE:19880912T000000
+END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/America/Belem.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/America/Anchorage.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Anchorage.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/America/Anchorage.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,22 +1,186 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/America/Anchorage
+TZID:/kde.org/Olson_20070327_1/America/Anchorage
 X-LIC-LOCATION:America/Anchorage
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0900
+TZOFFSETTO:-0800
+TZNAME:AKDT
+DTSTART:20070311T020000
+RRULE:FREQ=YEARLY;BYMONTH=3;BYDAY=2SU
+END:DAYLIGHT
 BEGIN:STANDARD
 TZOFFSETFROM:-0800
 TZOFFSETTO:-0900
 TZNAME:AKST
-DTSTART:19701025T020000
-RRULE:FREQ=YEARLY;BYMONTH=10;BYDAY=-1SU
+DTSTART:20071104T020000
+RRULE:FREQ=YEARLY;BYMONTH=11;BYDAY=1SU
 END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+140024
+TZOFFSETTO:-095936
+TZNAME:LMT
+DTSTART:18671018T000000
+RDATE:18671018T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-095936
+TZOFFSETTO:-1000
+TZNAME:CAT
+DTSTART:19000820T120000
+RDATE:19000820T120000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-1000
+TZOFFSETTO:-1000
+TZNAME:CAT
+DTSTART:19420101T000000
+RDATE:19420101T000000
+RDATE:19460101T000000
+END:STANDARD
 BEGIN:DAYLIGHT
+TZOFFSETFROM:-1000
+TZOFFSETTO:-0900
+TZNAME:CAWT
+DTSTART:19420209T020000
+RDATE:19420209T020000
+END:DAYLIGHT
+BEGIN:DAYLIGHT
 TZOFFSETFROM:-0900
+TZOFFSETTO:-0900
+TZNAME:CAPT
+DTSTART:19450814T140000
+RDATE:19450814T140000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:-0900
+TZOFFSETTO:-1000
+TZNAME:CAT
+DTSTART:19450930T020000
+RDATE:19450930T020000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-1000
+TZOFFSETTO:-1000
+TZNAME:AHST
+DTSTART:19670401T000000
+RDATE:19670401T000000
+RDATE:19690101T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-1000
+TZOFFSETTO:-0900
+TZNAME:AHDT
+DTSTART:19690427T020000
+RDATE:19690427T020000
+RDATE:19700426T020000
+RDATE:19710425T020000
+RDATE:19720430T020000
+RDATE:19730429T020000
+RDATE:19740106T020000
+RDATE:19750223T020000
+RDATE:19760425T020000
+RDATE:19770424T020000
+RDATE:19780430T020000
+RDATE:19790429T020000
+RDATE:19800427T020000
+RDATE:19810426T020000
+RDATE:19820425T020000
+RDATE:19830424T020000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:-0900
+TZOFFSETTO:-1000
+TZNAME:AHST
+DTSTART:19691026T020000
+RDATE:19691026T020000
+RDATE:19701025T020000
+RDATE:19711031T020000
+RDATE:19721029T020000
+RDATE:19731028T020000
+RDATE:19741027T020000
+RDATE:19751026T020000
+RDATE:19761031T020000
+RDATE:19771030T020000
+RDATE:19781029T020000
+RDATE:19791028T020000
+RDATE:19801026T020000
+RDATE:19811025T020000
+RDATE:19821031T020000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-0900
+TZOFFSETTO:-0900
+TZNAME:YST
+DTSTART:19831030T020000
+RDATE:19831030T020000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-0900
+TZOFFSETTO:-0900
+TZNAME:AKST
+DTSTART:19831130T000000
+RDATE:19831130T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0900
 TZOFFSETTO:-0800
 TZNAME:AKDT
-DTSTART:19700405T020000
-RRULE:FREQ=YEARLY;BYMONTH=4;BYDAY=1SU
+DTSTART:19840429T020000
+RDATE:19840429T020000
+RDATE:19850428T020000
+RDATE:19860427T020000
+RDATE:19870405T020000
+RDATE:19880403T020000
+RDATE:19890402T020000
+RDATE:19900401T020000
+RDATE:19910407T020000
+RDATE:19920405T020000
+RDATE:19930404T020000
+RDATE:19940403T020000
+RDATE:19950402T020000
+RDATE:19960407T020000
+RDATE:19970406T020000
+RDATE:19980405T020000
+RDATE:19990404T020000
+RDATE:20000402T020000
+RDATE:20010401T020000
+RDATE:20020407T020000
+RDATE:20030406T020000
+RDATE:20040404T020000
+RDATE:20050403T020000
+RDATE:20060402T020000
 END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:-0800
+TZOFFSETTO:-0900
+TZNAME:AKST
+DTSTART:19841028T020000
+RDATE:19841028T020000
+RDATE:19851027T020000
+RDATE:19861026T020000
+RDATE:19871025T020000
+RDATE:19881030T020000
+RDATE:19891029T020000
+RDATE:19901028T020000
+RDATE:19911027T020000
+RDATE:19921025T020000
+RDATE:19931031T020000
+RDATE:19941030T020000
+RDATE:19951029T020000
+RDATE:19961027T020000
+RDATE:19971026T020000
+RDATE:19981025T020000
+RDATE:19991031T020000
+RDATE:20001029T020000
+RDATE:20011028T020000
+RDATE:20021027T020000
+RDATE:20031026T020000
+RDATE:20041031T020000
+RDATE:20051030T020000
+RDATE:20061029T020000
+END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/America/Anchorage.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/America/Rainy_River.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Rainy_River.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/America/Rainy_River.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,22 +1,125 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/America/Rainy_River
+TZID:/kde.org/Olson_20070327_1/America/Rainy_River
 X-LIC-LOCATION:America/Rainy_River
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0600
+TZOFFSETTO:-0500
+TZNAME:CDT
+DTSTART:20070311T020000
+RRULE:FREQ=YEARLY;BYMONTH=3;BYDAY=2SU
+END:DAYLIGHT
 BEGIN:STANDARD
 TZOFFSETFROM:-0500
 TZOFFSETTO:-0600
 TZNAME:CST
-DTSTART:19701025T020000
-RRULE:FREQ=YEARLY;BYMONTH=10;BYDAY=-1SU
+DTSTART:20071104T020000
+RRULE:FREQ=YEARLY;BYMONTH=11;BYDAY=1SU
 END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-061816
+TZOFFSETTO:-0600
+TZNAME:CST
+DTSTART:18950101T000000
+RDATE:18950101T000000
+END:STANDARD
 BEGIN:DAYLIGHT
 TZOFFSETFROM:-0600
 TZOFFSETTO:-0500
 TZNAME:CDT
-DTSTART:19700405T020000
-RRULE:FREQ=YEARLY;BYMONTH=4;BYDAY=1SU
+DTSTART:19180414T020000
+RDATE:19180414T020000
+RDATE:19400929T000000
+RDATE:19740428T020000
+RDATE:19750427T020000
+RDATE:19760425T020000
+RDATE:19770424T020000
+RDATE:19780430T020000
+RDATE:19790429T020000
+RDATE:19800427T020000
+RDATE:19810426T020000
+RDATE:19820425T020000
+RDATE:19830424T020000
+RDATE:19840429T020000
+RDATE:19850428T020000
+RDATE:19860427T020000
+RDATE:19870405T020000
+RDATE:19880403T020000
+RDATE:19890402T020000
+RDATE:19900401T020000
+RDATE:19910407T020000
+RDATE:19920405T020000
+RDATE:19930404T020000
+RDATE:19940403T020000
+RDATE:19950402T020000
+RDATE:19960407T020000
+RDATE:19970406T020000
+RDATE:19980405T020000
+RDATE:19990404T020000
+RDATE:20000402T020000
+RDATE:20010401T020000
+RDATE:20020407T020000
+RDATE:20030406T020000
+RDATE:20040404T020000
+RDATE:20050403T020000
+RDATE:20060402T020000
 END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:-0500
+TZOFFSETTO:-0600
+TZNAME:CST
+DTSTART:19181031T020000
+RDATE:19181031T020000
+RDATE:19450930T020000
+RDATE:19741027T020000
+RDATE:19751026T020000
+RDATE:19761031T020000
+RDATE:19771030T020000
+RDATE:19781029T020000
+RDATE:19791028T020000
+RDATE:19801026T020000
+RDATE:19811025T020000
+RDATE:19821031T020000
+RDATE:19831030T020000
+RDATE:19841028T020000
+RDATE:19851027T020000
+RDATE:19861026T020000
+RDATE:19871025T020000
+RDATE:19881030T020000
+RDATE:19891029T020000
+RDATE:19901028T020000
+RDATE:19911027T020000
+RDATE:19921025T020000
+RDATE:19931031T020000
+RDATE:19941030T020000
+RDATE:19951029T020000
+RDATE:19961027T020000
+RDATE:19971026T020000
+RDATE:19981025T020000
+RDATE:19991031T020000
+RDATE:20001029T020000
+RDATE:20011028T020000
+RDATE:20021027T020000
+RDATE:20031026T020000
+RDATE:20041031T020000
+RDATE:20051030T020000
+RDATE:20061029T020000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0500
+TZOFFSETTO:-0500
+TZNAME:CWT
+DTSTART:19420209T020000
+RDATE:19420209T020000
+END:DAYLIGHT
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0500
+TZOFFSETTO:-0500
+TZNAME:CPT
+DTSTART:19450814T180000
+RDATE:19450814T180000
+END:DAYLIGHT
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/America/Rainy_River.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/America/Argentina/Jujuy.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Argentina/Jujuy.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/America/Argentina/Jujuy.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +1,150 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/America/Argentina/Jujuy
+TZID:/kde.org/Olson_20070327_1/America/Argentina/Jujuy
 X-LIC-LOCATION:America/Argentina/Jujuy
 BEGIN:STANDARD
+TZOFFSETFROM:-042112
+TZOFFSETTO:-041648
+TZNAME:CMT
+DTSTART:18941031T000000
+RDATE:18941031T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-041648
+TZOFFSETTO:-0400
+TZNAME:ART
+DTSTART:19200501T000000
+RDATE:19200501T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0400
+TZOFFSETTO:-0300
+TZNAME:ARST
+DTSTART:19301201T000000
+RDATE:19301201T000000
+RDATE:19311015T000000
+RDATE:19321101T000000
+RDATE:19331101T000000
+RDATE:19341101T000000
+RDATE:19351101T000000
+RDATE:19361101T000000
+RDATE:19371101T000000
+RDATE:19381101T000000
+RDATE:19391101T000000
+RDATE:19400701T000000
+RDATE:19411015T000000
+RDATE:19431015T000000
+RDATE:19461001T000000
+RDATE:19631215T000000
+RDATE:19641015T000000
+RDATE:19651015T000000
+RDATE:19661015T000000
+RDATE:19671001T000000
+RDATE:19681006T000000
+END:DAYLIGHT
+BEGIN:STANDARD
 TZOFFSETFROM:-0300
+TZOFFSETTO:-0400
+TZNAME:ART
+DTSTART:19310401T000000
+RDATE:19310401T000000
+RDATE:19320301T000000
+RDATE:19330301T000000
+RDATE:19340301T000000
+RDATE:19350301T000000
+RDATE:19360301T000000
+RDATE:19370301T000000
+RDATE:19380301T000000
+RDATE:19390301T000000
+RDATE:19400301T000000
+RDATE:19410615T000000
+RDATE:19430801T000000
+RDATE:19460301T000000
+RDATE:19631001T000000
+RDATE:19640301T000000
+RDATE:19650301T000000
+RDATE:19660301T000000
+RDATE:19670402T000000
+RDATE:19680407T000000
+RDATE:19690406T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-0400
 TZOFFSETTO:-0300
 TZNAME:ART
-DTSTART:19700101T000000
+DTSTART:19691005T000000
+RDATE:19691005T000000
 END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0300
+TZOFFSETTO:-0200
+TZNAME:ARST
+DTSTART:19740123T000000
+RDATE:19740123T000000
+RDATE:19881201T000000
+RDATE:19891015T000000
+RDATE:19921018T000000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:-0200
+TZOFFSETTO:-0300
+TZNAME:ART
+DTSTART:19740501T000000
+RDATE:19740501T000000
+RDATE:19890305T000000
+RDATE:19920301T000000
+RDATE:19930307T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-0200
+TZOFFSETTO:-0400
+TZNAME:WART
+DTSTART:19900304T000000
+RDATE:19900304T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0400
+TZOFFSETTO:-0300
+TZNAME:WARST
+DTSTART:19901028T000000
+RDATE:19901028T000000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:-0300
+TZOFFSETTO:-0400
+TZNAME:WART
+DTSTART:19910317T000000
+RDATE:19910317T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0400
+TZOFFSETTO:-0200
+TZNAME:ARST
+DTSTART:19911006T000000
+RDATE:19911006T000000
+END:DAYLIGHT
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0200
+TZOFFSETTO:-0200
+TZNAME:ARST
+DTSTART:19920101T000000
+RDATE:19920101T000000
+END:DAYLIGHT
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0300
+TZOFFSETTO:-0300
+TZNAME:ARST
+DTSTART:19991003T000000
+RDATE:19991003T000000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:-0300
+TZOFFSETTO:-0300
+TZNAME:ART
+DTSTART:20000303T000000
+RDATE:20000303T000000
+END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR
Index: libkcal/libical/zoneinfo/America/Argentina/Rio_Gallegos.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Argentina/Rio_Gallegos.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 0)
+++ libkcal/libical/zoneinfo/America/Argentina/Rio_Gallegos.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -0,0 +1,127 @@
+BEGIN:VCALENDAR
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
+VERSION:2.0
+BEGIN:VTIMEZONE
+TZID:/kde.org/Olson_20070327_1/America/Argentina/Rio_Gallegos
+X-LIC-LOCATION:America/Argentina/Rio_Gallegos
+BEGIN:STANDARD
+TZOFFSETFROM:-043652
+TZOFFSETTO:-041648
+TZNAME:CMT
+DTSTART:18941031T000000
+RDATE:18941031T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-041648
+TZOFFSETTO:-0400
+TZNAME:ART
+DTSTART:19200501T000000
+RDATE:19200501T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0400
+TZOFFSETTO:-0300
+TZNAME:ARST
+DTSTART:19301201T000000
+RDATE:19301201T000000
+RDATE:19311015T000000
+RDATE:19321101T000000
+RDATE:19331101T000000
+RDATE:19341101T000000
+RDATE:19351101T000000
+RDATE:19361101T000000
+RDATE:19371101T000000
+RDATE:19381101T000000
+RDATE:19391101T000000
+RDATE:19400701T000000
+RDATE:19411015T000000
+RDATE:19431015T000000
+RDATE:19461001T000000
+RDATE:19631215T000000
+RDATE:19641015T000000
+RDATE:19651015T000000
+RDATE:19661015T000000
+RDATE:19671001T000000
+RDATE:19681006T000000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:-0300
+TZOFFSETTO:-0400
+TZNAME:ART
+DTSTART:19310401T000000
+RDATE:19310401T000000
+RDATE:19320301T000000
+RDATE:19330301T000000
+RDATE:19340301T000000
+RDATE:19350301T000000
+RDATE:19360301T000000
+RDATE:19370301T000000
+RDATE:19380301T000000
+RDATE:19390301T000000
+RDATE:19400301T000000
+RDATE:19410615T000000
+RDATE:19430801T000000
+RDATE:19460301T000000
+RDATE:19631001T000000
+RDATE:19640301T000000
+RDATE:19650301T000000
+RDATE:19660301T000000
+RDATE:19670402T000000
+RDATE:19680407T000000
+RDATE:19690406T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-0400
+TZOFFSETTO:-0300
+TZNAME:ART
+DTSTART:19691005T000000
+RDATE:19691005T000000
+RDATE:20040620T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0300
+TZOFFSETTO:-0200
+TZNAME:ARST
+DTSTART:19740123T000000
+RDATE:19740123T000000
+RDATE:19881201T000000
+RDATE:19891015T000000
+RDATE:19901021T000000
+RDATE:19911020T000000
+RDATE:19921018T000000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:-0200
+TZOFFSETTO:-0300
+TZNAME:ART
+DTSTART:19740501T000000
+RDATE:19740501T000000
+RDATE:19890305T000000
+RDATE:19900304T000000
+RDATE:19910303T000000
+RDATE:19920301T000000
+RDATE:19930307T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0300
+TZOFFSETTO:-0300
+TZNAME:ARST
+DTSTART:19991003T000000
+RDATE:19991003T000000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:-0300
+TZOFFSETTO:-0300
+TZNAME:ART
+DTSTART:20000303T000000
+RDATE:20000303T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-0300
+TZOFFSETTO:-0400
+TZNAME:WART
+DTSTART:20040601T000000
+RDATE:20040601T000000
+END:STANDARD
+END:VTIMEZONE
+END:VCALENDAR
Index: libkcal/libical/zoneinfo/America/Argentina/Cordoba.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Argentina/Cordoba.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/America/Argentina/Cordoba.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +1,131 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/America/Argentina/Cordoba
+TZID:/kde.org/Olson_20070327_1/America/Argentina/Cordoba
 X-LIC-LOCATION:America/Argentina/Cordoba
 BEGIN:STANDARD
+TZOFFSETFROM:-041648
+TZOFFSETTO:-041648
+TZNAME:CMT
+DTSTART:18941031T000000
+RDATE:18941031T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-041648
+TZOFFSETTO:-0400
+TZNAME:ART
+DTSTART:19200501T000000
+RDATE:19200501T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0400
+TZOFFSETTO:-0300
+TZNAME:ARST
+DTSTART:19301201T000000
+RDATE:19301201T000000
+RDATE:19311015T000000
+RDATE:19321101T000000
+RDATE:19331101T000000
+RDATE:19341101T000000
+RDATE:19351101T000000
+RDATE:19361101T000000
+RDATE:19371101T000000
+RDATE:19381101T000000
+RDATE:19391101T000000
+RDATE:19400701T000000
+RDATE:19411015T000000
+RDATE:19431015T000000
+RDATE:19461001T000000
+RDATE:19631215T000000
+RDATE:19641015T000000
+RDATE:19651015T000000
+RDATE:19661015T000000
+RDATE:19671001T000000
+RDATE:19681006T000000
+END:DAYLIGHT
+BEGIN:STANDARD
 TZOFFSETFROM:-0300
+TZOFFSETTO:-0400
+TZNAME:ART
+DTSTART:19310401T000000
+RDATE:19310401T000000
+RDATE:19320301T000000
+RDATE:19330301T000000
+RDATE:19340301T000000
+RDATE:19350301T000000
+RDATE:19360301T000000
+RDATE:19370301T000000
+RDATE:19380301T000000
+RDATE:19390301T000000
+RDATE:19400301T000000
+RDATE:19410615T000000
+RDATE:19430801T000000
+RDATE:19460301T000000
+RDATE:19631001T000000
+RDATE:19640301T000000
+RDATE:19650301T000000
+RDATE:19660301T000000
+RDATE:19670402T000000
+RDATE:19680407T000000
+RDATE:19690406T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-0400
 TZOFFSETTO:-0300
 TZNAME:ART
-DTSTART:19700101T000000
+DTSTART:19691005T000000
+RDATE:19691005T000000
 END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0300
+TZOFFSETTO:-0200
+TZNAME:ARST
+DTSTART:19740123T000000
+RDATE:19740123T000000
+RDATE:19881201T000000
+RDATE:19891015T000000
+RDATE:19901021T000000
+RDATE:19921018T000000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:-0200
+TZOFFSETTO:-0300
+TZNAME:ART
+DTSTART:19740501T000000
+RDATE:19740501T000000
+RDATE:19890305T000000
+RDATE:19900304T000000
+RDATE:19920301T000000
+RDATE:19930307T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-0200
+TZOFFSETTO:-0400
+TZNAME:WART
+DTSTART:19910303T000000
+RDATE:19910303T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0400
+TZOFFSETTO:-0200
+TZNAME:ARST
+DTSTART:19911020T000000
+RDATE:19911020T000000
+END:DAYLIGHT
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0300
+TZOFFSETTO:-0300
+TZNAME:ARST
+DTSTART:19991003T000000
+RDATE:19991003T000000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:-0300
+TZOFFSETTO:-0300
+TZNAME:ART
+DTSTART:20000303T000000
+RDATE:20000303T000000
+END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR
Index: libkcal/libical/zoneinfo/America/Argentina/Catamarca.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Argentina/Catamarca.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/America/Argentina/Catamarca.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +1,139 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/America/Argentina/Catamarca
+TZID:/kde.org/Olson_20070327_1/America/Argentina/Catamarca
 X-LIC-LOCATION:America/Argentina/Catamarca
 BEGIN:STANDARD
+TZOFFSETFROM:-042308
+TZOFFSETTO:-041648
+TZNAME:CMT
+DTSTART:18941031T000000
+RDATE:18941031T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-041648
+TZOFFSETTO:-0400
+TZNAME:ART
+DTSTART:19200501T000000
+RDATE:19200501T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0400
+TZOFFSETTO:-0300
+TZNAME:ARST
+DTSTART:19301201T000000
+RDATE:19301201T000000
+RDATE:19311015T000000
+RDATE:19321101T000000
+RDATE:19331101T000000
+RDATE:19341101T000000
+RDATE:19351101T000000
+RDATE:19361101T000000
+RDATE:19371101T000000
+RDATE:19381101T000000
+RDATE:19391101T000000
+RDATE:19400701T000000
+RDATE:19411015T000000
+RDATE:19431015T000000
+RDATE:19461001T000000
+RDATE:19631215T000000
+RDATE:19641015T000000
+RDATE:19651015T000000
+RDATE:19661015T000000
+RDATE:19671001T000000
+RDATE:19681006T000000
+END:DAYLIGHT
+BEGIN:STANDARD
 TZOFFSETFROM:-0300
+TZOFFSETTO:-0400
+TZNAME:ART
+DTSTART:19310401T000000
+RDATE:19310401T000000
+RDATE:19320301T000000
+RDATE:19330301T000000
+RDATE:19340301T000000
+RDATE:19350301T000000
+RDATE:19360301T000000
+RDATE:19370301T000000
+RDATE:19380301T000000
+RDATE:19390301T000000
+RDATE:19400301T000000
+RDATE:19410615T000000
+RDATE:19430801T000000
+RDATE:19460301T000000
+RDATE:19631001T000000
+RDATE:19640301T000000
+RDATE:19650301T000000
+RDATE:19660301T000000
+RDATE:19670402T000000
+RDATE:19680407T000000
+RDATE:19690406T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-0400
 TZOFFSETTO:-0300
 TZNAME:ART
-DTSTART:19700101T000000
+DTSTART:19691005T000000
+RDATE:19691005T000000
+RDATE:20040620T000000
 END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0300
+TZOFFSETTO:-0200
+TZNAME:ARST
+DTSTART:19740123T000000
+RDATE:19740123T000000
+RDATE:19881201T000000
+RDATE:19891015T000000
+RDATE:19901021T000000
+RDATE:19921018T000000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:-0200
+TZOFFSETTO:-0300
+TZNAME:ART
+DTSTART:19740501T000000
+RDATE:19740501T000000
+RDATE:19890305T000000
+RDATE:19900304T000000
+RDATE:19920301T000000
+RDATE:19930307T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-0200
+TZOFFSETTO:-0400
+TZNAME:WART
+DTSTART:19910303T000000
+RDATE:19910303T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0400
+TZOFFSETTO:-0200
+TZNAME:ARST
+DTSTART:19911020T000000
+RDATE:19911020T000000
+END:DAYLIGHT
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0300
+TZOFFSETTO:-0300
+TZNAME:ARST
+DTSTART:19991003T000000
+RDATE:19991003T000000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:-0300
+TZOFFSETTO:-0300
+TZNAME:ART
+DTSTART:20000303T000000
+RDATE:20000303T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-0300
+TZOFFSETTO:-0400
+TZNAME:WART
+DTSTART:20040601T000000
+RDATE:20040601T000000
+END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR
Index: libkcal/libical/zoneinfo/America/Argentina/Tucuman.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Argentina/Tucuman.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 0)
+++ libkcal/libical/zoneinfo/America/Argentina/Tucuman.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -0,0 +1,139 @@
+BEGIN:VCALENDAR
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
+VERSION:2.0
+BEGIN:VTIMEZONE
+TZID:/kde.org/Olson_20070327_1/America/Argentina/Tucuman
+X-LIC-LOCATION:America/Argentina/Tucuman
+BEGIN:STANDARD
+TZOFFSETFROM:-042052
+TZOFFSETTO:-041648
+TZNAME:CMT
+DTSTART:18941031T000000
+RDATE:18941031T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-041648
+TZOFFSETTO:-0400
+TZNAME:ART
+DTSTART:19200501T000000
+RDATE:19200501T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0400
+TZOFFSETTO:-0300
+TZNAME:ARST
+DTSTART:19301201T000000
+RDATE:19301201T000000
+RDATE:19311015T000000
+RDATE:19321101T000000
+RDATE:19331101T000000
+RDATE:19341101T000000
+RDATE:19351101T000000
+RDATE:19361101T000000
+RDATE:19371101T000000
+RDATE:19381101T000000
+RDATE:19391101T000000
+RDATE:19400701T000000
+RDATE:19411015T000000
+RDATE:19431015T000000
+RDATE:19461001T000000
+RDATE:19631215T000000
+RDATE:19641015T000000
+RDATE:19651015T000000
+RDATE:19661015T000000
+RDATE:19671001T000000
+RDATE:19681006T000000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:-0300
+TZOFFSETTO:-0400
+TZNAME:ART
+DTSTART:19310401T000000
+RDATE:19310401T000000
+RDATE:19320301T000000
+RDATE:19330301T000000
+RDATE:19340301T000000
+RDATE:19350301T000000
+RDATE:19360301T000000
+RDATE:19370301T000000
+RDATE:19380301T000000
+RDATE:19390301T000000
+RDATE:19400301T000000
+RDATE:19410615T000000
+RDATE:19430801T000000
+RDATE:19460301T000000
+RDATE:19631001T000000
+RDATE:19640301T000000
+RDATE:19650301T000000
+RDATE:19660301T000000
+RDATE:19670402T000000
+RDATE:19680407T000000
+RDATE:19690406T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-0400
+TZOFFSETTO:-0300
+TZNAME:ART
+DTSTART:19691005T000000
+RDATE:19691005T000000
+RDATE:20040613T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0300
+TZOFFSETTO:-0200
+TZNAME:ARST
+DTSTART:19740123T000000
+RDATE:19740123T000000
+RDATE:19881201T000000
+RDATE:19891015T000000
+RDATE:19901021T000000
+RDATE:19921018T000000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:-0200
+TZOFFSETTO:-0300
+TZNAME:ART
+DTSTART:19740501T000000
+RDATE:19740501T000000
+RDATE:19890305T000000
+RDATE:19900304T000000
+RDATE:19920301T000000
+RDATE:19930307T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-0200
+TZOFFSETTO:-0400
+TZNAME:WART
+DTSTART:19910303T000000
+RDATE:19910303T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0400
+TZOFFSETTO:-0200
+TZNAME:ARST
+DTSTART:19911020T000000
+RDATE:19911020T000000
+END:DAYLIGHT
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0300
+TZOFFSETTO:-0300
+TZNAME:ARST
+DTSTART:19991003T000000
+RDATE:19991003T000000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:-0300
+TZOFFSETTO:-0300
+TZNAME:ART
+DTSTART:20000303T000000
+RDATE:20000303T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-0300
+TZOFFSETTO:-0400
+TZNAME:WART
+DTSTART:20040601T000000
+RDATE:20040601T000000
+END:STANDARD
+END:VTIMEZONE
+END:VCALENDAR
Index: libkcal/libical/zoneinfo/America/Argentina/Mendoza.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Argentina/Mendoza.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/America/Argentina/Mendoza.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +1,145 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/America/Argentina/Mendoza
+TZID:/kde.org/Olson_20070327_1/America/Argentina/Mendoza
 X-LIC-LOCATION:America/Argentina/Mendoza
 BEGIN:STANDARD
+TZOFFSETFROM:-043516
+TZOFFSETTO:-041648
+TZNAME:CMT
+DTSTART:18941031T000000
+RDATE:18941031T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-041648
+TZOFFSETTO:-0400
+TZNAME:ART
+DTSTART:19200501T000000
+RDATE:19200501T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0400
+TZOFFSETTO:-0300
+TZNAME:ARST
+DTSTART:19301201T000000
+RDATE:19301201T000000
+RDATE:19311015T000000
+RDATE:19321101T000000
+RDATE:19331101T000000
+RDATE:19341101T000000
+RDATE:19351101T000000
+RDATE:19361101T000000
+RDATE:19371101T000000
+RDATE:19381101T000000
+RDATE:19391101T000000
+RDATE:19400701T000000
+RDATE:19411015T000000
+RDATE:19431015T000000
+RDATE:19461001T000000
+RDATE:19631215T000000
+RDATE:19641015T000000
+RDATE:19651015T000000
+RDATE:19661015T000000
+RDATE:19671001T000000
+RDATE:19681006T000000
+END:DAYLIGHT
+BEGIN:STANDARD
 TZOFFSETFROM:-0300
+TZOFFSETTO:-0400
+TZNAME:ART
+DTSTART:19310401T000000
+RDATE:19310401T000000
+RDATE:19320301T000000
+RDATE:19330301T000000
+RDATE:19340301T000000
+RDATE:19350301T000000
+RDATE:19360301T000000
+RDATE:19370301T000000
+RDATE:19380301T000000
+RDATE:19390301T000000
+RDATE:19400301T000000
+RDATE:19410615T000000
+RDATE:19430801T000000
+RDATE:19460301T000000
+RDATE:19631001T000000
+RDATE:19640301T000000
+RDATE:19650301T000000
+RDATE:19660301T000000
+RDATE:19670402T000000
+RDATE:19680407T000000
+RDATE:19690406T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-0400
 TZOFFSETTO:-0300
 TZNAME:ART
-DTSTART:19700101T000000
+DTSTART:19691005T000000
+RDATE:19691005T000000
+RDATE:20040926T000000
 END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0300
+TZOFFSETTO:-0200
+TZNAME:ARST
+DTSTART:19740123T000000
+RDATE:19740123T000000
+RDATE:19881201T000000
+RDATE:19891015T000000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:-0200
+TZOFFSETTO:-0300
+TZNAME:ART
+DTSTART:19740501T000000
+RDATE:19740501T000000
+RDATE:19890305T000000
+RDATE:19930307T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-0200
+TZOFFSETTO:-0400
+TZNAME:WART
+DTSTART:19900304T000000
+RDATE:19900304T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0400
+TZOFFSETTO:-0300
+TZNAME:WARST
+DTSTART:19901015T000000
+RDATE:19901015T000000
+RDATE:19911015T000000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:-0300
+TZOFFSETTO:-0400
+TZNAME:WART
+DTSTART:19910301T000000
+RDATE:19910301T000000
+RDATE:19920301T000000
+RDATE:20040523T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0400
+TZOFFSETTO:-0200
+TZNAME:ARST
+DTSTART:19921018T000000
+RDATE:19921018T000000
+END:DAYLIGHT
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0300
+TZOFFSETTO:-0300
+TZNAME:ARST
+DTSTART:19991003T000000
+RDATE:19991003T000000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:-0300
+TZOFFSETTO:-0300
+TZNAME:ART
+DTSTART:20000303T000000
+RDATE:20000303T000000
+END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR
Index: libkcal/libical/zoneinfo/America/Argentina/Buenos_Aires.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Argentina/Buenos_Aires.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/America/Argentina/Buenos_Aires.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +1,119 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/America/Argentina/Buenos_Aires
+TZID:/kde.org/Olson_20070327_1/America/Argentina/Buenos_Aires
 X-LIC-LOCATION:America/Argentina/Buenos_Aires
 BEGIN:STANDARD
+TZOFFSETFROM:-035348
+TZOFFSETTO:-041648
+TZNAME:CMT
+DTSTART:18941031T000000
+RDATE:18941031T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-041648
+TZOFFSETTO:-0400
+TZNAME:ART
+DTSTART:19200501T000000
+RDATE:19200501T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0400
+TZOFFSETTO:-0300
+TZNAME:ARST
+DTSTART:19301201T000000
+RDATE:19301201T000000
+RDATE:19311015T000000
+RDATE:19321101T000000
+RDATE:19331101T000000
+RDATE:19341101T000000
+RDATE:19351101T000000
+RDATE:19361101T000000
+RDATE:19371101T000000
+RDATE:19381101T000000
+RDATE:19391101T000000
+RDATE:19400701T000000
+RDATE:19411015T000000
+RDATE:19431015T000000
+RDATE:19461001T000000
+RDATE:19631215T000000
+RDATE:19641015T000000
+RDATE:19651015T000000
+RDATE:19661015T000000
+RDATE:19671001T000000
+RDATE:19681006T000000
+END:DAYLIGHT
+BEGIN:STANDARD
 TZOFFSETFROM:-0300
+TZOFFSETTO:-0400
+TZNAME:ART
+DTSTART:19310401T000000
+RDATE:19310401T000000
+RDATE:19320301T000000
+RDATE:19330301T000000
+RDATE:19340301T000000
+RDATE:19350301T000000
+RDATE:19360301T000000
+RDATE:19370301T000000
+RDATE:19380301T000000
+RDATE:19390301T000000
+RDATE:19400301T000000
+RDATE:19410615T000000
+RDATE:19430801T000000
+RDATE:19460301T000000
+RDATE:19631001T000000
+RDATE:19640301T000000
+RDATE:19650301T000000
+RDATE:19660301T000000
+RDATE:19670402T000000
+RDATE:19680407T000000
+RDATE:19690406T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-0400
 TZOFFSETTO:-0300
 TZNAME:ART
-DTSTART:19700101T000000
+DTSTART:19691005T000000
+RDATE:19691005T000000
 END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0300
+TZOFFSETTO:-0200
+TZNAME:ARST
+DTSTART:19740123T000000
+RDATE:19740123T000000
+RDATE:19881201T000000
+RDATE:19891015T000000
+RDATE:19901021T000000
+RDATE:19911020T000000
+RDATE:19921018T000000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:-0200
+TZOFFSETTO:-0300
+TZNAME:ART
+DTSTART:19740501T000000
+RDATE:19740501T000000
+RDATE:19890305T000000
+RDATE:19900304T000000
+RDATE:19910303T000000
+RDATE:19920301T000000
+RDATE:19930307T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0300
+TZOFFSETTO:-0300
+TZNAME:ARST
+DTSTART:19991003T000000
+RDATE:19991003T000000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:-0300
+TZOFFSETTO:-0300
+TZNAME:ART
+DTSTART:20000303T000000
+RDATE:20000303T000000
+END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR
Index: libkcal/libical/zoneinfo/America/Argentina/San_Juan.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Argentina/San_Juan.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 0)
+++ libkcal/libical/zoneinfo/America/Argentina/San_Juan.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -0,0 +1,134 @@
+BEGIN:VCALENDAR
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
+VERSION:2.0
+BEGIN:VTIMEZONE
+TZID:/kde.org/Olson_20070327_1/America/Argentina/San_Juan
+X-LIC-LOCATION:America/Argentina/San_Juan
+BEGIN:STANDARD
+TZOFFSETFROM:-043404
+TZOFFSETTO:-041648
+TZNAME:CMT
+DTSTART:18941031T000000
+RDATE:18941031T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-041648
+TZOFFSETTO:-0400
+TZNAME:ART
+DTSTART:19200501T000000
+RDATE:19200501T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0400
+TZOFFSETTO:-0300
+TZNAME:ARST
+DTSTART:19301201T000000
+RDATE:19301201T000000
+RDATE:19311015T000000
+RDATE:19321101T000000
+RDATE:19331101T000000
+RDATE:19341101T000000
+RDATE:19351101T000000
+RDATE:19361101T000000
+RDATE:19371101T000000
+RDATE:19381101T000000
+RDATE:19391101T000000
+RDATE:19400701T000000
+RDATE:19411015T000000
+RDATE:19431015T000000
+RDATE:19461001T000000
+RDATE:19631215T000000
+RDATE:19641015T000000
+RDATE:19651015T000000
+RDATE:19661015T000000
+RDATE:19671001T000000
+RDATE:19681006T000000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:-0300
+TZOFFSETTO:-0400
+TZNAME:ART
+DTSTART:19310401T000000
+RDATE:19310401T000000
+RDATE:19320301T000000
+RDATE:19330301T000000
+RDATE:19340301T000000
+RDATE:19350301T000000
+RDATE:19360301T000000
+RDATE:19370301T000000
+RDATE:19380301T000000
+RDATE:19390301T000000
+RDATE:19400301T000000
+RDATE:19410615T000000
+RDATE:19430801T000000
+RDATE:19460301T000000
+RDATE:19631001T000000
+RDATE:19640301T000000
+RDATE:19650301T000000
+RDATE:19660301T000000
+RDATE:19670402T000000
+RDATE:19680407T000000
+RDATE:19690406T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-0400
+TZOFFSETTO:-0300
+TZNAME:ART
+DTSTART:19691005T000000
+RDATE:19691005T000000
+RDATE:19910507T000000
+RDATE:20040725T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0300
+TZOFFSETTO:-0200
+TZNAME:ARST
+DTSTART:19740123T000000
+RDATE:19740123T000000
+RDATE:19881201T000000
+RDATE:19891015T000000
+RDATE:19901021T000000
+RDATE:19911020T000000
+RDATE:19921018T000000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:-0200
+TZOFFSETTO:-0300
+TZNAME:ART
+DTSTART:19740501T000000
+RDATE:19740501T000000
+RDATE:19890305T000000
+RDATE:19900304T000000
+RDATE:19920301T000000
+RDATE:19930307T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-0200
+TZOFFSETTO:-0400
+TZNAME:WART
+DTSTART:19910301T000000
+RDATE:19910301T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0300
+TZOFFSETTO:-0300
+TZNAME:ARST
+DTSTART:19991003T000000
+RDATE:19991003T000000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:-0300
+TZOFFSETTO:-0300
+TZNAME:ART
+DTSTART:20000303T000000
+RDATE:20000303T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-0300
+TZOFFSETTO:-0400
+TZNAME:WART
+DTSTART:20040531T000000
+RDATE:20040531T000000
+END:STANDARD
+END:VTIMEZONE
+END:VCALENDAR
Index: libkcal/libical/zoneinfo/America/Argentina/Ushuaia.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Argentina/Ushuaia.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 0)
+++ libkcal/libical/zoneinfo/America/Argentina/Ushuaia.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -0,0 +1,127 @@
+BEGIN:VCALENDAR
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
+VERSION:2.0
+BEGIN:VTIMEZONE
+TZID:/kde.org/Olson_20070327_1/America/Argentina/Ushuaia
+X-LIC-LOCATION:America/Argentina/Ushuaia
+BEGIN:STANDARD
+TZOFFSETFROM:-043312
+TZOFFSETTO:-041648
+TZNAME:CMT
+DTSTART:18941031T000000
+RDATE:18941031T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-041648
+TZOFFSETTO:-0400
+TZNAME:ART
+DTSTART:19200501T000000
+RDATE:19200501T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0400
+TZOFFSETTO:-0300
+TZNAME:ARST
+DTSTART:19301201T000000
+RDATE:19301201T000000
+RDATE:19311015T000000
+RDATE:19321101T000000
+RDATE:19331101T000000
+RDATE:19341101T000000
+RDATE:19351101T000000
+RDATE:19361101T000000
+RDATE:19371101T000000
+RDATE:19381101T000000
+RDATE:19391101T000000
+RDATE:19400701T000000
+RDATE:19411015T000000
+RDATE:19431015T000000
+RDATE:19461001T000000
+RDATE:19631215T000000
+RDATE:19641015T000000
+RDATE:19651015T000000
+RDATE:19661015T000000
+RDATE:19671001T000000
+RDATE:19681006T000000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:-0300
+TZOFFSETTO:-0400
+TZNAME:ART
+DTSTART:19310401T000000
+RDATE:19310401T000000
+RDATE:19320301T000000
+RDATE:19330301T000000
+RDATE:19340301T000000
+RDATE:19350301T000000
+RDATE:19360301T000000
+RDATE:19370301T000000
+RDATE:19380301T000000
+RDATE:19390301T000000
+RDATE:19400301T000000
+RDATE:19410615T000000
+RDATE:19430801T000000
+RDATE:19460301T000000
+RDATE:19631001T000000
+RDATE:19640301T000000
+RDATE:19650301T000000
+RDATE:19660301T000000
+RDATE:19670402T000000
+RDATE:19680407T000000
+RDATE:19690406T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-0400
+TZOFFSETTO:-0300
+TZNAME:ART
+DTSTART:19691005T000000
+RDATE:19691005T000000
+RDATE:20040620T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0300
+TZOFFSETTO:-0200
+TZNAME:ARST
+DTSTART:19740123T000000
+RDATE:19740123T000000
+RDATE:19881201T000000
+RDATE:19891015T000000
+RDATE:19901021T000000
+RDATE:19911020T000000
+RDATE:19921018T000000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:-0200
+TZOFFSETTO:-0300
+TZNAME:ART
+DTSTART:19740501T000000
+RDATE:19740501T000000
+RDATE:19890305T000000
+RDATE:19900304T000000
+RDATE:19910303T000000
+RDATE:19920301T000000
+RDATE:19930307T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0300
+TZOFFSETTO:-0300
+TZNAME:ARST
+DTSTART:19991003T000000
+RDATE:19991003T000000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:-0300
+TZOFFSETTO:-0300
+TZNAME:ART
+DTSTART:20000303T000000
+RDATE:20000303T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-0300
+TZOFFSETTO:-0400
+TZNAME:WART
+DTSTART:20040530T000000
+RDATE:20040530T000000
+END:STANDARD
+END:VTIMEZONE
+END:VCALENDAR
Index: libkcal/libical/zoneinfo/America/Argentina/La_Rioja.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Argentina/La_Rioja.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 0)
+++ libkcal/libical/zoneinfo/America/Argentina/La_Rioja.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -0,0 +1,134 @@
+BEGIN:VCALENDAR
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
+VERSION:2.0
+BEGIN:VTIMEZONE
+TZID:/kde.org/Olson_20070327_1/America/Argentina/La_Rioja
+X-LIC-LOCATION:America/Argentina/La_Rioja
+BEGIN:STANDARD
+TZOFFSETFROM:-042724
+TZOFFSETTO:-041648
+TZNAME:CMT
+DTSTART:18941031T000000
+RDATE:18941031T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-041648
+TZOFFSETTO:-0400
+TZNAME:ART
+DTSTART:19200501T000000
+RDATE:19200501T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0400
+TZOFFSETTO:-0300
+TZNAME:ARST
+DTSTART:19301201T000000
+RDATE:19301201T000000
+RDATE:19311015T000000
+RDATE:19321101T000000
+RDATE:19331101T000000
+RDATE:19341101T000000
+RDATE:19351101T000000
+RDATE:19361101T000000
+RDATE:19371101T000000
+RDATE:19381101T000000
+RDATE:19391101T000000
+RDATE:19400701T000000
+RDATE:19411015T000000
+RDATE:19431015T000000
+RDATE:19461001T000000
+RDATE:19631215T000000
+RDATE:19641015T000000
+RDATE:19651015T000000
+RDATE:19661015T000000
+RDATE:19671001T000000
+RDATE:19681006T000000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:-0300
+TZOFFSETTO:-0400
+TZNAME:ART
+DTSTART:19310401T000000
+RDATE:19310401T000000
+RDATE:19320301T000000
+RDATE:19330301T000000
+RDATE:19340301T000000
+RDATE:19350301T000000
+RDATE:19360301T000000
+RDATE:19370301T000000
+RDATE:19380301T000000
+RDATE:19390301T000000
+RDATE:19400301T000000
+RDATE:19410615T000000
+RDATE:19430801T000000
+RDATE:19460301T000000
+RDATE:19631001T000000
+RDATE:19640301T000000
+RDATE:19650301T000000
+RDATE:19660301T000000
+RDATE:19670402T000000
+RDATE:19680407T000000
+RDATE:19690406T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-0400
+TZOFFSETTO:-0300
+TZNAME:ART
+DTSTART:19691005T000000
+RDATE:19691005T000000
+RDATE:19910507T000000
+RDATE:20040620T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0300
+TZOFFSETTO:-0200
+TZNAME:ARST
+DTSTART:19740123T000000
+RDATE:19740123T000000
+RDATE:19881201T000000
+RDATE:19891015T000000
+RDATE:19901021T000000
+RDATE:19911020T000000
+RDATE:19921018T000000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:-0200
+TZOFFSETTO:-0300
+TZNAME:ART
+DTSTART:19740501T000000
+RDATE:19740501T000000
+RDATE:19890305T000000
+RDATE:19900304T000000
+RDATE:19920301T000000
+RDATE:19930307T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-0200
+TZOFFSETTO:-0400
+TZNAME:WART
+DTSTART:19910301T000000
+RDATE:19910301T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0300
+TZOFFSETTO:-0300
+TZNAME:ARST
+DTSTART:19991003T000000
+RDATE:19991003T000000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:-0300
+TZOFFSETTO:-0300
+TZNAME:ART
+DTSTART:20000303T000000
+RDATE:20000303T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-0300
+TZOFFSETTO:-0400
+TZNAME:WART
+DTSTART:20040601T000000
+RDATE:20040601T000000
+END:STANDARD
+END:VTIMEZONE
+END:VCALENDAR
Index: libkcal/libical/zoneinfo/America/Pangnirtung.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Pangnirtung.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/America/Pangnirtung.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,22 +1,160 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/America/Pangnirtung
+TZID:/kde.org/Olson_20070327_1/America/Pangnirtung
 X-LIC-LOCATION:America/Pangnirtung
 BEGIN:DAYLIGHT
 TZOFFSETFROM:-0500
 TZOFFSETTO:-0400
 TZNAME:EDT
-DTSTART:19700405T020000
-RRULE:FREQ=YEARLY;BYMONTH=4;BYDAY=1SU
+DTSTART:20070311T020000
+RRULE:FREQ=YEARLY;BYMONTH=3;BYDAY=2SU
 END:DAYLIGHT
 BEGIN:STANDARD
 TZOFFSETFROM:-0400
 TZOFFSETTO:-0500
 TZNAME:EST
-DTSTART:19701025T020000
-RRULE:FREQ=YEARLY;BYMONTH=10;BYDAY=-1SU
+DTSTART:20071104T020000
+RRULE:FREQ=YEARLY;BYMONTH=11;BYDAY=1SU
 END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0000
+TZOFFSETTO:-0400
+TZNAME:AST
+DTSTART:19210101T000000
+RDATE:19210101T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0400
+TZOFFSETTO:-0300
+TZNAME:AWT
+DTSTART:19420209T020000
+RDATE:19420209T020000
+END:DAYLIGHT
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0300
+TZOFFSETTO:-0300
+TZNAME:APT
+DTSTART:19450814T200000
+RDATE:19450814T200000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:-0300
+TZOFFSETTO:-0400
+TZNAME:AST
+DTSTART:19450930T020000
+RDATE:19450930T020000
+RDATE:19801026T020000
+RDATE:19811025T020000
+RDATE:19821031T020000
+RDATE:19831030T020000
+RDATE:19841028T020000
+RDATE:19851027T020000
+RDATE:19861026T020000
+RDATE:19871025T020000
+RDATE:19881030T020000
+RDATE:19891029T020000
+RDATE:19901028T020000
+RDATE:19911027T020000
+RDATE:19921025T020000
+RDATE:19931031T020000
+RDATE:19941030T020000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0400
+TZOFFSETTO:-0200
+TZNAME:ADDT
+DTSTART:19650425T000000
+RDATE:19650425T000000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:-0200
+TZOFFSETTO:-0400
+TZNAME:AST
+DTSTART:19651031T020000
+RDATE:19651031T020000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0400
+TZOFFSETTO:-0300
+TZNAME:ADT
+DTSTART:19800427T020000
+RDATE:19800427T020000
+RDATE:19810426T020000
+RDATE:19820425T020000
+RDATE:19830424T020000
+RDATE:19840429T020000
+RDATE:19850428T020000
+RDATE:19860427T020000
+RDATE:19870405T020000
+RDATE:19880403T020000
+RDATE:19890402T020000
+RDATE:19900401T020000
+RDATE:19910407T020000
+RDATE:19920405T020000
+RDATE:19930404T020000
+RDATE:19940403T020000
+END:DAYLIGHT
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0400
+TZOFFSETTO:-0400
+TZNAME:EDT
+DTSTART:19950402T020000
+RDATE:19950402T020000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:-0400
+TZOFFSETTO:-0500
+TZNAME:EST
+DTSTART:19951029T020000
+RDATE:19951029T020000
+RDATE:19961027T020000
+RDATE:19971026T020000
+RDATE:19981025T020000
+RDATE:20011028T020000
+RDATE:20021027T020000
+RDATE:20031026T020000
+RDATE:20041031T020000
+RDATE:20051030T020000
+RDATE:20061029T020000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0500
+TZOFFSETTO:-0400
+TZNAME:EDT
+DTSTART:19960407T020000
+RDATE:19960407T020000
+RDATE:19970406T020000
+RDATE:19980405T020000
+RDATE:19990404T020000
+RDATE:20010401T020000
+RDATE:20020407T020000
+RDATE:20030406T020000
+RDATE:20040404T020000
+RDATE:20050403T020000
+RDATE:20060402T020000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:-0400
+TZOFFSETTO:-0600
+TZNAME:CST
+DTSTART:19991031T020000
+RDATE:19991031T020000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0600
+TZOFFSETTO:-0500
+TZNAME:CDT
+DTSTART:20000402T020000
+RDATE:20000402T020000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:-0500
+TZOFFSETTO:-0500
+TZNAME:EST
+DTSTART:20001029T020000
+RDATE:20001029T020000
+END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/America/Pangnirtung.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/America/Maceio.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Maceio.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/America/Maceio.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,22 +1,79 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/America/Maceio
+TZID:/kde.org/Olson_20070327_1/America/Maceio
 X-LIC-LOCATION:America/Maceio
+BEGIN:STANDARD
+TZOFFSETFROM:-022252
+TZOFFSETTO:-0300
+TZNAME:BRT
+DTSTART:19140101T000000
+RDATE:19140101T000000
+END:STANDARD
 BEGIN:DAYLIGHT
 TZOFFSETFROM:-0300
 TZOFFSETTO:-0200
 TZNAME:BRST
-DTSTART:19701011T000000
-RRULE:FREQ=YEARLY;BYMONTH=10;BYDAY=2SU
+DTSTART:19311003T110000
+RDATE:19311003T110000
+RDATE:19321003T000000
+RDATE:19491201T000000
+RDATE:19501201T000000
+RDATE:19511201T000000
+RDATE:19521201T000000
+RDATE:19631209T000000
+RDATE:19650131T000000
+RDATE:19651201T000000
+RDATE:19661101T000000
+RDATE:19671101T000000
+RDATE:19851102T000000
+RDATE:19861025T000000
+RDATE:19871025T000000
+RDATE:19881016T000000
+RDATE:19891015T000000
+RDATE:19951015T000000
+RDATE:19991003T000000
+RDATE:20001008T000000
+RDATE:20011014T000000
 END:DAYLIGHT
 BEGIN:STANDARD
 TZOFFSETFROM:-0200
 TZOFFSETTO:-0300
 TZNAME:BRT
-DTSTART:19700215T000000
-RRULE:FREQ=YEARLY;BYMONTH=2;BYDAY=3SU
+DTSTART:19320401T000000
+RDATE:19320401T000000
+RDATE:19330401T000000
+RDATE:19500416T010000
+RDATE:19510401T000000
+RDATE:19520401T000000
+RDATE:19530301T000000
+RDATE:19640301T000000
+RDATE:19650331T000000
+RDATE:19660301T000000
+RDATE:19670301T000000
+RDATE:19680301T000000
+RDATE:19860315T000000
+RDATE:19870214T000000
+RDATE:19880207T000000
+RDATE:19890129T000000
+RDATE:19900211T000000
+RDATE:19960211T000000
+RDATE:20000227T000000
+RDATE:20001022T000000
+RDATE:20020217T000000
 END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-0300
+TZOFFSETTO:-0300
+TZNAME:BRT
+DTSTART:19900917T000000
+RDATE:19900917T000000
+RDATE:19951013T000000
+RDATE:19960904T000000
+RDATE:19990930T000000
+RDATE:20010913T000000
+RDATE:20021001T000000
+END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/America/Maceio.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/America/New_York.ics
===================================================================
--- libkcal/libical/zoneinfo/America/New_York.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/America/New_York.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,22 +1,236 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/America/New_York
+TZID:/kde.org/Olson_20070327_1/America/New_York
 X-LIC-LOCATION:America/New_York
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0500
+TZOFFSETTO:-0400
+TZNAME:EDT
+DTSTART:20070311T020000
+RRULE:FREQ=YEARLY;BYMONTH=3;BYDAY=2SU
+END:DAYLIGHT
 BEGIN:STANDARD
 TZOFFSETFROM:-0400
 TZOFFSETTO:-0500
 TZNAME:EST
-DTSTART:19701025T020000
-RRULE:FREQ=YEARLY;BYMONTH=10;BYDAY=-1SU
+DTSTART:20071104T020000
+RRULE:FREQ=YEARLY;BYMONTH=11;BYDAY=1SU
 END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-045602
+TZOFFSETTO:-0500
+TZNAME:EST
+DTSTART:18831118T120358
+RDATE:18831118T120358
+END:STANDARD
 BEGIN:DAYLIGHT
 TZOFFSETFROM:-0500
 TZOFFSETTO:-0400
 TZNAME:EDT
-DTSTART:19700405T020000
-RRULE:FREQ=YEARLY;BYMONTH=4;BYDAY=1SU
+DTSTART:19180331T020000
+RDATE:19180331T020000
+RDATE:19190330T020000
+RDATE:19200328T020000
+RDATE:19210424T020000
+RDATE:19220430T020000
+RDATE:19230429T020000
+RDATE:19240427T020000
+RDATE:19250426T020000
+RDATE:19260425T020000
+RDATE:19270424T020000
+RDATE:19280429T020000
+RDATE:19290428T020000
+RDATE:19300427T020000
+RDATE:19310426T020000
+RDATE:19320424T020000
+RDATE:19330430T020000
+RDATE:19340429T020000
+RDATE:19350428T020000
+RDATE:19360426T020000
+RDATE:19370425T020000
+RDATE:19380424T020000
+RDATE:19390430T020000
+RDATE:19400428T020000
+RDATE:19410427T020000
+RDATE:19460428T020000
+RDATE:19470427T020000
+RDATE:19480425T020000
+RDATE:19490424T020000
+RDATE:19500430T020000
+RDATE:19510429T020000
+RDATE:19520427T020000
+RDATE:19530426T020000
+RDATE:19540425T020000
+RDATE:19550424T020000
+RDATE:19560429T020000
+RDATE:19570428T020000
+RDATE:19580427T020000
+RDATE:19590426T020000
+RDATE:19600424T020000
+RDATE:19610430T020000
+RDATE:19620429T020000
+RDATE:19630428T020000
+RDATE:19640426T020000
+RDATE:19650425T020000
+RDATE:19660424T020000
+RDATE:19670430T020000
+RDATE:19680428T020000
+RDATE:19690427T020000
+RDATE:19700426T020000
+RDATE:19710425T020000
+RDATE:19720430T020000
+RDATE:19730429T020000
+RDATE:19740106T020000
+RDATE:19750223T020000
+RDATE:19760425T020000
+RDATE:19770424T020000
+RDATE:19780430T020000
+RDATE:19790429T020000
+RDATE:19800427T020000
+RDATE:19810426T020000
+RDATE:19820425T020000
+RDATE:19830424T020000
+RDATE:19840429T020000
+RDATE:19850428T020000
+RDATE:19860427T020000
+RDATE:19870405T020000
+RDATE:19880403T020000
+RDATE:19890402T020000
+RDATE:19900401T020000
+RDATE:19910407T020000
+RDATE:19920405T020000
+RDATE:19930404T020000
+RDATE:19940403T020000
+RDATE:19950402T020000
+RDATE:19960407T020000
+RDATE:19970406T020000
+RDATE:19980405T020000
+RDATE:19990404T020000
+RDATE:20000402T020000
+RDATE:20010401T020000
+RDATE:20020407T020000
+RDATE:20030406T020000
+RDATE:20040404T020000
+RDATE:20050403T020000
+RDATE:20060402T020000
 END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:-0400
+TZOFFSETTO:-0500
+TZNAME:EST
+DTSTART:19181027T020000
+RDATE:19181027T020000
+RDATE:19191026T020000
+RDATE:19201031T020000
+RDATE:19210925T020000
+RDATE:19220924T020000
+RDATE:19230930T020000
+RDATE:19240928T020000
+RDATE:19250927T020000
+RDATE:19260926T020000
+RDATE:19270925T020000
+RDATE:19280930T020000
+RDATE:19290929T020000
+RDATE:19300928T020000
+RDATE:19310927T020000
+RDATE:19320925T020000
+RDATE:19330924T020000
+RDATE:19340930T020000
+RDATE:19350929T020000
+RDATE:19360927T020000
+RDATE:19370926T020000
+RDATE:19380925T020000
+RDATE:19390924T020000
+RDATE:19400929T020000
+RDATE:19410928T020000
+RDATE:19450930T020000
+RDATE:19460929T020000
+RDATE:19470928T020000
+RDATE:19480926T020000
+RDATE:19490925T020000
+RDATE:19500924T020000
+RDATE:19510930T020000
+RDATE:19520928T020000
+RDATE:19530927T020000
+RDATE:19540926T020000
+RDATE:19551030T020000
+RDATE:19561028T020000
+RDATE:19571027T020000
+RDATE:19581026T020000
+RDATE:19591025T020000
+RDATE:19601030T020000
+RDATE:19611029T020000
+RDATE:19621028T020000
+RDATE:19631027T020000
+RDATE:19641025T020000
+RDATE:19651031T020000
+RDATE:19661030T020000
+RDATE:19671029T020000
+RDATE:19681027T020000
+RDATE:19691026T020000
+RDATE:19701025T020000
+RDATE:19711031T020000
+RDATE:19721029T020000
+RDATE:19731028T020000
+RDATE:19741027T020000
+RDATE:19751026T020000
+RDATE:19761031T020000
+RDATE:19771030T020000
+RDATE:19781029T020000
+RDATE:19791028T020000
+RDATE:19801026T020000
+RDATE:19811025T020000
+RDATE:19821031T020000
+RDATE:19831030T020000
+RDATE:19841028T020000
+RDATE:19851027T020000
+RDATE:19861026T020000
+RDATE:19871025T020000
+RDATE:19881030T020000
+RDATE:19891029T020000
+RDATE:19901028T020000
+RDATE:19911027T020000
+RDATE:19921025T020000
+RDATE:19931031T020000
+RDATE:19941030T020000
+RDATE:19951029T020000
+RDATE:19961027T020000
+RDATE:19971026T020000
+RDATE:19981025T020000
+RDATE:19991031T020000
+RDATE:20001029T020000
+RDATE:20011028T020000
+RDATE:20021027T020000
+RDATE:20031026T020000
+RDATE:20041031T020000
+RDATE:20051030T020000
+RDATE:20061029T020000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-0500
+TZOFFSETTO:-0500
+TZNAME:EST
+DTSTART:19200101T000000
+RDATE:19200101T000000
+RDATE:19420101T000000
+RDATE:19460101T000000
+RDATE:19670101T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0500
+TZOFFSETTO:-0400
+TZNAME:EWT
+DTSTART:19420209T020000
+RDATE:19420209T020000
+END:DAYLIGHT
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0400
+TZOFFSETTO:-0400
+TZNAME:EPT
+DTSTART:19450814T190000
+RDATE:19450814T190000
+END:DAYLIGHT
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/America/New_York.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/America/Panama.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Panama.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/America/Panama.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +1,22 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/America/Panama
+TZID:/kde.org/Olson_20070327_1/America/Panama
 X-LIC-LOCATION:America/Panama
 BEGIN:STANDARD
-TZOFFSETFROM:-0500
+TZOFFSETFROM:-051808
+TZOFFSETTO:-051936
+TZNAME:CMT
+DTSTART:18900101T000000
+RDATE:18900101T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-051936
 TZOFFSETTO:-0500
 TZNAME:EST
-DTSTART:19700101T000000
+DTSTART:19080422T000000
+RDATE:19080422T000000
 END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/America/Panama.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/America/Adak.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Adak.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/America/Adak.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,22 +1,186 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/America/Adak
+TZID:/kde.org/Olson_20070327_1/America/Adak
 X-LIC-LOCATION:America/Adak
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-1000
+TZOFFSETTO:-0900
+TZNAME:HADT
+DTSTART:20070311T020000
+RRULE:FREQ=YEARLY;BYMONTH=3;BYDAY=2SU
+END:DAYLIGHT
 BEGIN:STANDARD
 TZOFFSETFROM:-0900
 TZOFFSETTO:-1000
 TZNAME:HAST
-DTSTART:19701025T020000
-RRULE:FREQ=YEARLY;BYMONTH=10;BYDAY=-1SU
+DTSTART:20071104T020000
+RRULE:FREQ=YEARLY;BYMONTH=11;BYDAY=1SU
 END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+121321
+TZOFFSETTO:-114638
+TZNAME:LMT
+DTSTART:18671018T000000
+RDATE:18671018T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-114638
+TZOFFSETTO:-1100
+TZNAME:NST
+DTSTART:19000820T120000
+RDATE:19000820T120000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-1100
+TZOFFSETTO:-1100
+TZNAME:NST
+DTSTART:19420101T000000
+RDATE:19420101T000000
+RDATE:19460101T000000
+END:STANDARD
 BEGIN:DAYLIGHT
+TZOFFSETFROM:-1100
+TZOFFSETTO:-1000
+TZNAME:NWT
+DTSTART:19420209T020000
+RDATE:19420209T020000
+END:DAYLIGHT
+BEGIN:DAYLIGHT
 TZOFFSETFROM:-1000
+TZOFFSETTO:-1000
+TZNAME:NPT
+DTSTART:19450814T130000
+RDATE:19450814T130000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:-1000
+TZOFFSETTO:-1100
+TZNAME:NST
+DTSTART:19450930T020000
+RDATE:19450930T020000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-1100
+TZOFFSETTO:-1100
+TZNAME:BST
+DTSTART:19670401T000000
+RDATE:19670401T000000
+RDATE:19690101T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-1100
+TZOFFSETTO:-1000
+TZNAME:BDT
+DTSTART:19690427T020000
+RDATE:19690427T020000
+RDATE:19700426T020000
+RDATE:19710425T020000
+RDATE:19720430T020000
+RDATE:19730429T020000
+RDATE:19740106T020000
+RDATE:19750223T020000
+RDATE:19760425T020000
+RDATE:19770424T020000
+RDATE:19780430T020000
+RDATE:19790429T020000
+RDATE:19800427T020000
+RDATE:19810426T020000
+RDATE:19820425T020000
+RDATE:19830424T020000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:-1000
+TZOFFSETTO:-1100
+TZNAME:BST
+DTSTART:19691026T020000
+RDATE:19691026T020000
+RDATE:19701025T020000
+RDATE:19711031T020000
+RDATE:19721029T020000
+RDATE:19731028T020000
+RDATE:19741027T020000
+RDATE:19751026T020000
+RDATE:19761031T020000
+RDATE:19771030T020000
+RDATE:19781029T020000
+RDATE:19791028T020000
+RDATE:19801026T020000
+RDATE:19811025T020000
+RDATE:19821031T020000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-1000
+TZOFFSETTO:-1000
+TZNAME:AHST
+DTSTART:19831030T020000
+RDATE:19831030T020000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-1000
+TZOFFSETTO:-1000
+TZNAME:HAST
+DTSTART:19831130T000000
+RDATE:19831130T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-1000
 TZOFFSETTO:-0900
 TZNAME:HADT
-DTSTART:19700405T020000
-RRULE:FREQ=YEARLY;BYMONTH=4;BYDAY=1SU
+DTSTART:19840429T020000
+RDATE:19840429T020000
+RDATE:19850428T020000
+RDATE:19860427T020000
+RDATE:19870405T020000
+RDATE:19880403T020000
+RDATE:19890402T020000
+RDATE:19900401T020000
+RDATE:19910407T020000
+RDATE:19920405T020000
+RDATE:19930404T020000
+RDATE:19940403T020000
+RDATE:19950402T020000
+RDATE:19960407T020000
+RDATE:19970406T020000
+RDATE:19980405T020000
+RDATE:19990404T020000
+RDATE:20000402T020000
+RDATE:20010401T020000
+RDATE:20020407T020000
+RDATE:20030406T020000
+RDATE:20040404T020000
+RDATE:20050403T020000
+RDATE:20060402T020000
 END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:-0900
+TZOFFSETTO:-1000
+TZNAME:HAST
+DTSTART:19841028T020000
+RDATE:19841028T020000
+RDATE:19851027T020000
+RDATE:19861026T020000
+RDATE:19871025T020000
+RDATE:19881030T020000
+RDATE:19891029T020000
+RDATE:19901028T020000
+RDATE:19911027T020000
+RDATE:19921025T020000
+RDATE:19931031T020000
+RDATE:19941030T020000
+RDATE:19951029T020000
+RDATE:19961027T020000
+RDATE:19971026T020000
+RDATE:19981025T020000
+RDATE:19991031T020000
+RDATE:20001029T020000
+RDATE:20011028T020000
+RDATE:20021027T020000
+RDATE:20031026T020000
+RDATE:20041031T020000
+RDATE:20051030T020000
+RDATE:20061029T020000
+END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/America/Adak.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/America/Merida.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Merida.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/America/Merida.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,22 +1,61 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20020614_6/America/Merida
+TZID:/kde.org/Olson_20070327_1/America/Merida
 X-LIC-LOCATION:America/Merida
 BEGIN:DAYLIGHT
 TZOFFSETFROM:-0600
 TZOFFSETTO:-0500
 TZNAME:CDT
-DTSTART:19700405T020000
+DTSTART:20020407T020000
 RRULE:FREQ=YEARLY;BYMONTH=4;BYDAY=1SU
 END:DAYLIGHT
 BEGIN:STANDARD
 TZOFFSETFROM:-0500
 TZOFFSETTO:-0600
 TZNAME:CST
-DTSTART:19701025T020000
+DTSTART:20021027T020000
 RRULE:FREQ=YEARLY;BYMONTH=10;BYDAY=-1SU
 END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-055828
+TZOFFSETTO:-0600
+TZNAME:CST
+DTSTART:19220101T000132
+RDATE:19220101T000132
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-0600
+TZOFFSETTO:-0500
+TZNAME:EST
+DTSTART:19811223T000000
+RDATE:19811223T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-0500
+TZOFFSETTO:-0600
+TZNAME:CST
+DTSTART:19821202T000000
+RDATE:19821202T000000
+RDATE:19961027T020000
+RDATE:19971026T020000
+RDATE:19981025T020000
+RDATE:19991031T020000
+RDATE:20001029T020000
+RDATE:20010930T020000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0600
+TZOFFSETTO:-0500
+TZNAME:CDT
+DTSTART:19960407T020000
+RDATE:19960407T020000
+RDATE:19970406T020000
+RDATE:19980405T020000
+RDATE:19990404T020000
+RDATE:20000402T020000
+RDATE:20010506T020000
+END:DAYLIGHT
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/America/Merida.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/America/Resolute.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Resolute.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 0)
+++ libkcal/libical/zoneinfo/America/Resolute.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -0,0 +1,107 @@
+BEGIN:VCALENDAR
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
+VERSION:2.0
+BEGIN:VTIMEZONE
+TZID:/kde.org/Olson_20070327_1/America/Resolute
+X-LIC-LOCATION:America/Resolute
+BEGIN:STANDARD
+TZOFFSETFROM:+0000
+TZOFFSETTO:-0600
+TZNAME:CST
+DTSTART:19470831T000000
+RDATE:19470831T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0600
+TZOFFSETTO:-0400
+TZNAME:CDDT
+DTSTART:19650425T000000
+RDATE:19650425T000000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:-0400
+TZOFFSETTO:-0600
+TZNAME:CST
+DTSTART:19651031T020000
+RDATE:19651031T020000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0600
+TZOFFSETTO:-0500
+TZNAME:CDT
+DTSTART:19800427T020000
+RDATE:19800427T020000
+RDATE:19810426T020000
+RDATE:19820425T020000
+RDATE:19830424T020000
+RDATE:19840429T020000
+RDATE:19850428T020000
+RDATE:19860427T020000
+RDATE:19870405T020000
+RDATE:19880403T020000
+RDATE:19890402T020000
+RDATE:19900401T020000
+RDATE:19910407T020000
+RDATE:19920405T020000
+RDATE:19930404T020000
+RDATE:19940403T020000
+RDATE:19950402T020000
+RDATE:19960407T020000
+RDATE:19970406T020000
+RDATE:19980405T020000
+RDATE:19990404T020000
+RDATE:20000402T020000
+RDATE:20020407T020000
+RDATE:20030406T020000
+RDATE:20040404T020000
+RDATE:20050403T020000
+RDATE:20060402T020000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:-0500
+TZOFFSETTO:-0600
+TZNAME:CST
+DTSTART:19801026T020000
+RDATE:19801026T020000
+RDATE:19811025T020000
+RDATE:19821031T020000
+RDATE:19831030T020000
+RDATE:19841028T020000
+RDATE:19851027T020000
+RDATE:19861026T020000
+RDATE:19871025T020000
+RDATE:19881030T020000
+RDATE:19891029T020000
+RDATE:19901028T020000
+RDATE:19911027T020000
+RDATE:19921025T020000
+RDATE:19931031T020000
+RDATE:19941030T020000
+RDATE:19951029T020000
+RDATE:19961027T020000
+RDATE:19971026T020000
+RDATE:19981025T020000
+RDATE:19991031T020000
+RDATE:20011028T020000
+RDATE:20021027T020000
+RDATE:20031026T020000
+RDATE:20041031T020000
+RDATE:20051030T020000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-0500
+TZOFFSETTO:-0500
+TZNAME:EST
+DTSTART:20001029T020000
+RDATE:20001029T020000
+RDATE:20061029T020000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0500
+TZOFFSETTO:-0500
+TZNAME:CDT
+DTSTART:20010401T020000
+RDATE:20010401T020000
+END:DAYLIGHT
+END:VTIMEZONE
+END:VCALENDAR
Index: libkcal/libical/zoneinfo/America/Nipigon.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Nipigon.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/America/Nipigon.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,22 +1,125 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/America/Nipigon
+TZID:/kde.org/Olson_20070327_1/America/Nipigon
 X-LIC-LOCATION:America/Nipigon
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0500
+TZOFFSETTO:-0400
+TZNAME:EDT
+DTSTART:20070311T020000
+RRULE:FREQ=YEARLY;BYMONTH=3;BYDAY=2SU
+END:DAYLIGHT
 BEGIN:STANDARD
 TZOFFSETFROM:-0400
 TZOFFSETTO:-0500
 TZNAME:EST
-DTSTART:19701025T020000
-RRULE:FREQ=YEARLY;BYMONTH=10;BYDAY=-1SU
+DTSTART:20071104T020000
+RRULE:FREQ=YEARLY;BYMONTH=11;BYDAY=1SU
 END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-055304
+TZOFFSETTO:-0500
+TZNAME:EST
+DTSTART:18950101T000000
+RDATE:18950101T000000
+END:STANDARD
 BEGIN:DAYLIGHT
 TZOFFSETFROM:-0500
 TZOFFSETTO:-0400
 TZNAME:EDT
-DTSTART:19700405T020000
-RRULE:FREQ=YEARLY;BYMONTH=4;BYDAY=1SU
+DTSTART:19180414T020000
+RDATE:19180414T020000
+RDATE:19400929T000000
+RDATE:19740428T020000
+RDATE:19750427T020000
+RDATE:19760425T020000
+RDATE:19770424T020000
+RDATE:19780430T020000
+RDATE:19790429T020000
+RDATE:19800427T020000
+RDATE:19810426T020000
+RDATE:19820425T020000
+RDATE:19830424T020000
+RDATE:19840429T020000
+RDATE:19850428T020000
+RDATE:19860427T020000
+RDATE:19870405T020000
+RDATE:19880403T020000
+RDATE:19890402T020000
+RDATE:19900401T020000
+RDATE:19910407T020000
+RDATE:19920405T020000
+RDATE:19930404T020000
+RDATE:19940403T020000
+RDATE:19950402T020000
+RDATE:19960407T020000
+RDATE:19970406T020000
+RDATE:19980405T020000
+RDATE:19990404T020000
+RDATE:20000402T020000
+RDATE:20010401T020000
+RDATE:20020407T020000
+RDATE:20030406T020000
+RDATE:20040404T020000
+RDATE:20050403T020000
+RDATE:20060402T020000
 END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:-0400
+TZOFFSETTO:-0500
+TZNAME:EST
+DTSTART:19181031T020000
+RDATE:19181031T020000
+RDATE:19450930T020000
+RDATE:19741027T020000
+RDATE:19751026T020000
+RDATE:19761031T020000
+RDATE:19771030T020000
+RDATE:19781029T020000
+RDATE:19791028T020000
+RDATE:19801026T020000
+RDATE:19811025T020000
+RDATE:19821031T020000
+RDATE:19831030T020000
+RDATE:19841028T020000
+RDATE:19851027T020000
+RDATE:19861026T020000
+RDATE:19871025T020000
+RDATE:19881030T020000
+RDATE:19891029T020000
+RDATE:19901028T020000
+RDATE:19911027T020000
+RDATE:19921025T020000
+RDATE:19931031T020000
+RDATE:19941030T020000
+RDATE:19951029T020000
+RDATE:19961027T020000
+RDATE:19971026T020000
+RDATE:19981025T020000
+RDATE:19991031T020000
+RDATE:20001029T020000
+RDATE:20011028T020000
+RDATE:20021027T020000
+RDATE:20031026T020000
+RDATE:20041031T020000
+RDATE:20051030T020000
+RDATE:20061029T020000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0400
+TZOFFSETTO:-0400
+TZNAME:EWT
+DTSTART:19420209T020000
+RDATE:19420209T020000
+END:DAYLIGHT
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0400
+TZOFFSETTO:-0400
+TZNAME:EPT
+DTSTART:19450814T190000
+RDATE:19450814T190000
+END:DAYLIGHT
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/America/Nipigon.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/America/Dawson_Creek.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Dawson_Creek.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/America/Dawson_Creek.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +1,109 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/America/Dawson_Creek
+TZID:/kde.org/Olson_20070327_1/America/Dawson_Creek
 X-LIC-LOCATION:America/Dawson_Creek
 BEGIN:STANDARD
+TZOFFSETFROM:-080056
+TZOFFSETTO:-0800
+TZNAME:PST
+DTSTART:18840101T000000
+RDATE:18840101T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0800
+TZOFFSETTO:-0700
+TZNAME:PDT
+DTSTART:19180414T020000
+RDATE:19180414T020000
+RDATE:19470427T020000
+RDATE:19480425T020000
+RDATE:19490424T020000
+RDATE:19500430T020000
+RDATE:19510429T020000
+RDATE:19520427T020000
+RDATE:19530426T020000
+RDATE:19540425T020000
+RDATE:19550424T020000
+RDATE:19560429T020000
+RDATE:19570428T020000
+RDATE:19580427T020000
+RDATE:19590426T020000
+RDATE:19600424T020000
+RDATE:19610430T020000
+RDATE:19620429T020000
+RDATE:19630428T020000
+RDATE:19640426T020000
+RDATE:19650425T020000
+RDATE:19660424T020000
+RDATE:19670430T020000
+RDATE:19680428T020000
+RDATE:19690427T020000
+RDATE:19700426T020000
+RDATE:19710425T020000
+RDATE:19720430T020000
+END:DAYLIGHT
+BEGIN:STANDARD
 TZOFFSETFROM:-0700
+TZOFFSETTO:-0800
+TZNAME:PST
+DTSTART:19181031T020000
+RDATE:19181031T020000
+RDATE:19450930T020000
+RDATE:19470928T020000
+RDATE:19480926T020000
+RDATE:19490925T020000
+RDATE:19500924T020000
+RDATE:19510930T020000
+RDATE:19520928T020000
+RDATE:19530927T020000
+RDATE:19540926T020000
+RDATE:19550925T020000
+RDATE:19560930T020000
+RDATE:19570929T020000
+RDATE:19580928T020000
+RDATE:19590927T020000
+RDATE:19600925T020000
+RDATE:19610924T020000
+RDATE:19621028T020000
+RDATE:19631027T020000
+RDATE:19641025T020000
+RDATE:19651031T020000
+RDATE:19661030T020000
+RDATE:19671029T020000
+RDATE:19681027T020000
+RDATE:19691026T020000
+RDATE:19701025T020000
+RDATE:19711031T020000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0800
 TZOFFSETTO:-0700
+TZNAME:PWT
+DTSTART:19420209T020000
+RDATE:19420209T020000
+END:DAYLIGHT
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0700
+TZOFFSETTO:-0700
+TZNAME:PPT
+DTSTART:19450814T160000
+RDATE:19450814T160000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:-0800
+TZOFFSETTO:-0800
+TZNAME:PST
+DTSTART:19470101T000000
+RDATE:19470101T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-0700
+TZOFFSETTO:-0700
 TZNAME:MST
-DTSTART:19700101T000000
+DTSTART:19720830T020000
+RDATE:19720830T020000
 END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/America/Dawson_Creek.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/America/Thunder_Bay.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Thunder_Bay.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/America/Thunder_Bay.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,22 +1,145 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/America/Thunder_Bay
+TZID:/kde.org/Olson_20070327_1/America/Thunder_Bay
 X-LIC-LOCATION:America/Thunder_Bay
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0500
+TZOFFSETTO:-0400
+TZNAME:EDT
+DTSTART:20070311T020000
+RRULE:FREQ=YEARLY;BYMONTH=3;BYDAY=2SU
+END:DAYLIGHT
 BEGIN:STANDARD
 TZOFFSETFROM:-0400
 TZOFFSETTO:-0500
 TZNAME:EST
-DTSTART:19701025T020000
-RRULE:FREQ=YEARLY;BYMONTH=10;BYDAY=-1SU
+DTSTART:20071104T020000
+RRULE:FREQ=YEARLY;BYMONTH=11;BYDAY=1SU
 END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-0557
+TZOFFSETTO:-0600
+TZNAME:CST
+DTSTART:18950101T000000
+RDATE:18950101T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-0600
+TZOFFSETTO:-0500
+TZNAME:EST
+DTSTART:19100101T000000
+RDATE:19100101T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-0500
+TZOFFSETTO:-0500
+TZNAME:EST
+DTSTART:19420101T000000
+RDATE:19420101T000000
+RDATE:19700101T000000
+RDATE:19730101T000000
+RDATE:19740101T000000
+END:STANDARD
 BEGIN:DAYLIGHT
 TZOFFSETFROM:-0500
 TZOFFSETTO:-0400
+TZNAME:EWT
+DTSTART:19420209T020000
+RDATE:19420209T020000
+END:DAYLIGHT
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0400
+TZOFFSETTO:-0400
+TZNAME:EPT
+DTSTART:19450814T190000
+RDATE:19450814T190000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:-0400
+TZOFFSETTO:-0500
+TZNAME:EST
+DTSTART:19450930T020000
+RDATE:19450930T020000
+RDATE:19701025T020000
+RDATE:19711031T020000
+RDATE:19721029T020000
+RDATE:19741027T020000
+RDATE:19751026T020000
+RDATE:19761031T020000
+RDATE:19771030T020000
+RDATE:19781029T020000
+RDATE:19791028T020000
+RDATE:19801026T020000
+RDATE:19811025T020000
+RDATE:19821031T020000
+RDATE:19831030T020000
+RDATE:19841028T020000
+RDATE:19851027T020000
+RDATE:19861026T020000
+RDATE:19871025T020000
+RDATE:19881030T020000
+RDATE:19891029T020000
+RDATE:19901028T020000
+RDATE:19911027T020000
+RDATE:19921025T020000
+RDATE:19931031T020000
+RDATE:19941030T020000
+RDATE:19951029T020000
+RDATE:19961027T020000
+RDATE:19971026T020000
+RDATE:19981025T020000
+RDATE:19991031T020000
+RDATE:20001029T020000
+RDATE:20011028T020000
+RDATE:20021027T020000
+RDATE:20031026T020000
+RDATE:20041031T020000
+RDATE:20051030T020000
+RDATE:20061029T020000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0500
+TZOFFSETTO:-0400
 TZNAME:EDT
-DTSTART:19700405T020000
-RRULE:FREQ=YEARLY;BYMONTH=4;BYDAY=1SU
+DTSTART:19700426T020000
+RDATE:19700426T020000
+RDATE:19710425T020000
+RDATE:19720430T020000
+RDATE:19740428T020000
+RDATE:19750427T020000
+RDATE:19760425T020000
+RDATE:19770424T020000
+RDATE:19780430T020000
+RDATE:19790429T020000
+RDATE:19800427T020000
+RDATE:19810426T020000
+RDATE:19820425T020000
+RDATE:19830424T020000
+RDATE:19840429T020000
+RDATE:19850428T020000
+RDATE:19860427T020000
+RDATE:19870405T020000
+RDATE:19880403T020000
+RDATE:19890402T020000
+RDATE:19900401T020000
+RDATE:19910407T020000
+RDATE:19920405T020000
+RDATE:19930404T020000
+RDATE:19940403T020000
+RDATE:19950402T020000
+RDATE:19960407T020000
+RDATE:19970406T020000
+RDATE:19980405T020000
+RDATE:19990404T020000
+RDATE:20000402T020000
+RDATE:20010401T020000
+RDATE:20020407T020000
+RDATE:20030406T020000
+RDATE:20040404T020000
+RDATE:20050403T020000
+RDATE:20060402T020000
 END:DAYLIGHT
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/America/Thunder_Bay.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/America/Toronto.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Toronto.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/America/Toronto.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,22 +1,232 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/America/Toronto
+TZID:/kde.org/Olson_20070327_1/America/Toronto
 X-LIC-LOCATION:America/Toronto
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0500
+TZOFFSETTO:-0400
+TZNAME:EDT
+DTSTART:20070311T020000
+RRULE:FREQ=YEARLY;BYMONTH=3;BYDAY=2SU
+END:DAYLIGHT
 BEGIN:STANDARD
 TZOFFSETFROM:-0400
 TZOFFSETTO:-0500
 TZNAME:EST
-DTSTART:19701025T020000
-RRULE:FREQ=YEARLY;BYMONTH=10;BYDAY=-1SU
+DTSTART:20071104T020000
+RRULE:FREQ=YEARLY;BYMONTH=11;BYDAY=1SU
 END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-051732
+TZOFFSETTO:-0500
+TZNAME:EST
+DTSTART:18950101T000000
+RDATE:18950101T000000
+END:STANDARD
 BEGIN:DAYLIGHT
 TZOFFSETFROM:-0500
 TZOFFSETTO:-0400
 TZNAME:EDT
-DTSTART:19700405T020000
-RRULE:FREQ=YEARLY;BYMONTH=4;BYDAY=1SU
+DTSTART:19180414T020000
+RDATE:19180414T020000
+RDATE:19190330T233000
+RDATE:19200502T020000
+RDATE:19210515T020000
+RDATE:19220514T020000
+RDATE:19230513T020000
+RDATE:19240504T020000
+RDATE:19250503T020000
+RDATE:19260502T020000
+RDATE:19270501T020000
+RDATE:19280429T020000
+RDATE:19290428T020000
+RDATE:19300427T020000
+RDATE:19310426T020000
+RDATE:19320501T020000
+RDATE:19330430T020000
+RDATE:19340429T020000
+RDATE:19350428T020000
+RDATE:19360426T020000
+RDATE:19370425T020000
+RDATE:19380424T020000
+RDATE:19390430T020000
+RDATE:19400428T020000
+RDATE:19460428T020000
+RDATE:19470427T000000
+RDATE:19480425T000000
+RDATE:19490424T000000
+RDATE:19500430T020000
+RDATE:19510429T020000
+RDATE:19520427T020000
+RDATE:19530426T020000
+RDATE:19540425T020000
+RDATE:19550424T020000
+RDATE:19560429T020000
+RDATE:19570428T020000
+RDATE:19580427T020000
+RDATE:19590426T020000
+RDATE:19600424T020000
+RDATE:19610430T020000
+RDATE:19620429T020000
+RDATE:19630428T020000
+RDATE:19640426T020000
+RDATE:19650425T020000
+RDATE:19660424T020000
+RDATE:19670430T020000
+RDATE:19680428T020000
+RDATE:19690427T020000
+RDATE:19700426T020000
+RDATE:19710425T020000
+RDATE:19720430T020000
+RDATE:19730429T020000
+RDATE:19740428T020000
+RDATE:19750427T020000
+RDATE:19760425T020000
+RDATE:19770424T020000
+RDATE:19780430T020000
+RDATE:19790429T020000
+RDATE:19800427T020000
+RDATE:19810426T020000
+RDATE:19820425T020000
+RDATE:19830424T020000
+RDATE:19840429T020000
+RDATE:19850428T020000
+RDATE:19860427T020000
+RDATE:19870405T020000
+RDATE:19880403T020000
+RDATE:19890402T020000
+RDATE:19900401T020000
+RDATE:19910407T020000
+RDATE:19920405T020000
+RDATE:19930404T020000
+RDATE:19940403T020000
+RDATE:19950402T020000
+RDATE:19960407T020000
+RDATE:19970406T020000
+RDATE:19980405T020000
+RDATE:19990404T020000
+RDATE:20000402T020000
+RDATE:20010401T020000
+RDATE:20020407T020000
+RDATE:20030406T020000
+RDATE:20040404T020000
+RDATE:20050403T020000
+RDATE:20060402T020000
 END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:-0400
+TZOFFSETTO:-0500
+TZNAME:EST
+DTSTART:19181031T020000
+RDATE:19181031T020000
+RDATE:19191026T000000
+RDATE:19200926T000000
+RDATE:19210915T020000
+RDATE:19220917T020000
+RDATE:19230916T020000
+RDATE:19240921T020000
+RDATE:19250920T020000
+RDATE:19260919T020000
+RDATE:19270925T020000
+RDATE:19280930T020000
+RDATE:19290929T020000
+RDATE:19300928T020000
+RDATE:19310927T020000
+RDATE:19320925T020000
+RDATE:19331001T020000
+RDATE:19340930T020000
+RDATE:19350929T020000
+RDATE:19360927T020000
+RDATE:19370926T020000
+RDATE:19380925T020000
+RDATE:19390924T020000
+RDATE:19450930T020000
+RDATE:19460929T020000
+RDATE:19470928T000000
+RDATE:19480926T000000
+RDATE:19491127T000000
+RDATE:19501126T020000
+RDATE:19510930T020000
+RDATE:19520928T020000
+RDATE:19530927T020000
+RDATE:19540926T020000
+RDATE:19550925T020000
+RDATE:19560930T020000
+RDATE:19571027T020000
+RDATE:19581026T020000
+RDATE:19591025T020000
+RDATE:19601030T020000
+RDATE:19611029T020000
+RDATE:19621028T020000
+RDATE:19631027T020000
+RDATE:19641025T020000
+RDATE:19651031T020000
+RDATE:19661030T020000
+RDATE:19671029T020000
+RDATE:19681027T020000
+RDATE:19691026T020000
+RDATE:19701025T020000
+RDATE:19711031T020000
+RDATE:19721029T020000
+RDATE:19731028T020000
+RDATE:19741027T020000
+RDATE:19751026T020000
+RDATE:19761031T020000
+RDATE:19771030T020000
+RDATE:19781029T020000
+RDATE:19791028T020000
+RDATE:19801026T020000
+RDATE:19811025T020000
+RDATE:19821031T020000
+RDATE:19831030T020000
+RDATE:19841028T020000
+RDATE:19851027T020000
+RDATE:19861026T020000
+RDATE:19871025T020000
+RDATE:19881030T020000
+RDATE:19891029T020000
+RDATE:19901028T020000
+RDATE:19911027T020000
+RDATE:19921025T020000
+RDATE:19931031T020000
+RDATE:19941030T020000
+RDATE:19951029T020000
+RDATE:19961027T020000
+RDATE:19971026T020000
+RDATE:19981025T020000
+RDATE:19991031T020000
+RDATE:20001029T020000
+RDATE:20011028T020000
+RDATE:20021027T020000
+RDATE:20031026T020000
+RDATE:20041031T020000
+RDATE:20051030T020000
+RDATE:20061029T020000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-0500
+TZOFFSETTO:-0500
+TZNAME:EST
+DTSTART:19190101T000000
+RDATE:19190101T000000
+RDATE:19460101T000000
+RDATE:19740101T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0400
+TZOFFSETTO:-0400
+TZNAME:EWT
+DTSTART:19420209T020000
+RDATE:19420209T020000
+END:DAYLIGHT
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0400
+TZOFFSETTO:-0400
+TZNAME:EPT
+DTSTART:19450814T190000
+RDATE:19450814T190000
+END:DAYLIGHT
 END:VTIMEZONE
 END:VCALENDAR
Index: libkcal/libical/zoneinfo/America/Port-au-Prince.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Port-au-Prince.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/America/Port-au-Prince.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +1,78 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/America/Port-au-Prince
+TZID:/kde.org/Olson_20070327_1/America/Port-au-Prince
 X-LIC-LOCATION:America/Port-au-Prince
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0500
+TZOFFSETTO:-0400
+TZNAME:EDT
+DTSTART:20050403T000000
+RRULE:FREQ=YEARLY;BYMONTH=4;BYDAY=1SU
+END:DAYLIGHT
 BEGIN:STANDARD
+TZOFFSETFROM:-0400
+TZOFFSETTO:-0500
+TZNAME:EST
+DTSTART:20051030T000000
+RRULE:FREQ=YEARLY;BYMONTH=10;BYDAY=-1SU
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-044920
+TZOFFSETTO:-0449
+TZNAME:PPMT
+DTSTART:18900101T000000
+RDATE:18900101T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-0449
+TZOFFSETTO:-0500
+TZNAME:EST
+DTSTART:19170124T120000
+RDATE:19170124T120000
+END:STANDARD
+BEGIN:DAYLIGHT
 TZOFFSETFROM:-0500
+TZOFFSETTO:-0400
+TZNAME:EDT
+DTSTART:19830508T000000
+RDATE:19830508T000000
+RDATE:19840429T000000
+RDATE:19850428T000000
+RDATE:19860427T000000
+RDATE:19870426T000000
+RDATE:19880403T010000
+RDATE:19890402T010000
+RDATE:19900401T010000
+RDATE:19910407T010000
+RDATE:19920405T010000
+RDATE:19930404T010000
+RDATE:19940403T010000
+RDATE:19950402T010000
+RDATE:19960407T010000
+RDATE:19970406T010000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:-0400
 TZOFFSETTO:-0500
 TZNAME:EST
-DTSTART:19700101T000000
+DTSTART:19831030T000000
+RDATE:19831030T000000
+RDATE:19841028T000000
+RDATE:19851027T000000
+RDATE:19861026T000000
+RDATE:19871025T000000
+RDATE:19881030T020000
+RDATE:19891029T020000
+RDATE:19901028T020000
+RDATE:19911027T020000
+RDATE:19921025T020000
+RDATE:19931031T020000
+RDATE:19941030T020000
+RDATE:19951029T020000
+RDATE:19961027T020000
+RDATE:19971026T020000
 END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/America/Port-au-Prince.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/America/La_Paz.ics
===================================================================
--- libkcal/libical/zoneinfo/America/La_Paz.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/America/La_Paz.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +1,29 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/America/La_Paz
+TZID:/kde.org/Olson_20070327_1/America/La_Paz
 X-LIC-LOCATION:America/La_Paz
 BEGIN:STANDARD
-TZOFFSETFROM:-0400
+TZOFFSETFROM:-043236
+TZOFFSETTO:-043236
+TZNAME:CMT
+DTSTART:18900101T000000
+RDATE:18900101T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-043236
+TZOFFSETTO:-033236
+TZNAME:BOST
+DTSTART:19311015T000000
+RDATE:19311015T000000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:-033236
 TZOFFSETTO:-0400
 TZNAME:BOT
-DTSTART:19700101T000000
+DTSTART:19320321T000000
+RDATE:19320321T000000
 END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/America/La_Paz.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/America/Goose_Bay.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Goose_Bay.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/America/Goose_Bay.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,22 +1,258 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/America/Goose_Bay
+TZID:/kde.org/Olson_20070327_1/America/Goose_Bay
 X-LIC-LOCATION:America/Goose_Bay
 BEGIN:DAYLIGHT
 TZOFFSETFROM:-0400
 TZOFFSETTO:-0300
 TZNAME:ADT
-DTSTART:19700405T000100
-RRULE:FREQ=YEARLY;BYMONTH=4;BYDAY=1SU
+DTSTART:20070311T000100
+RRULE:FREQ=YEARLY;BYMONTH=3;BYDAY=2SU
 END:DAYLIGHT
 BEGIN:STANDARD
 TZOFFSETFROM:-0300
 TZOFFSETTO:-0400
 TZNAME:AST
-DTSTART:19701025T000100
-RRULE:FREQ=YEARLY;BYMONTH=10;BYDAY=-1SU
+DTSTART:20071104T000100
+RRULE:FREQ=YEARLY;BYMONTH=11;BYDAY=1SU
 END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-040140
+TZOFFSETTO:-033052
+TZNAME:NST
+DTSTART:18840101T000000
+RDATE:18840101T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-033052
+TZOFFSETTO:-033052
+TZNAME:NST
+DTSTART:19180101T000000
+RDATE:19180101T000000
+RDATE:19190101T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-033052
+TZOFFSETTO:-023052
+TZNAME:NDT
+DTSTART:19180414T020000
+RDATE:19180414T020000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:-023052
+TZOFFSETTO:-033052
+TZNAME:NST
+DTSTART:19181031T020000
+RDATE:19181031T020000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-033052
+TZOFFSETTO:-0330
+TZNAME:NST
+DTSTART:19350330T000000
+RDATE:19350330T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-0330
+TZOFFSETTO:-0330
+TZNAME:NST
+DTSTART:19360101T000000
+RDATE:19360101T000000
+RDATE:19460101T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0330
+TZOFFSETTO:-0230
+TZNAME:NDT
+DTSTART:19360511T000000
+RDATE:19360511T000000
+RDATE:19370510T000000
+RDATE:19380509T000000
+RDATE:19390515T000000
+RDATE:19400513T000000
+RDATE:19410512T000000
+RDATE:19460512T020000
+RDATE:19470511T020000
+RDATE:19480509T020000
+RDATE:19490508T020000
+RDATE:19500514T020000
+RDATE:19510429T020000
+RDATE:19520427T020000
+RDATE:19530426T020000
+RDATE:19540425T020000
+RDATE:19550424T020000
+RDATE:19560429T020000
+RDATE:19570428T020000
+RDATE:19580427T020000
+RDATE:19590426T020000
+RDATE:19600424T020000
+RDATE:19610430T020000
+RDATE:19620429T020000
+RDATE:19630428T020000
+RDATE:19640426T020000
+RDATE:19650425T020000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:-0230
+TZOFFSETTO:-0330
+TZNAME:NST
+DTSTART:19361005T000000
+RDATE:19361005T000000
+RDATE:19371004T000000
+RDATE:19381003T000000
+RDATE:19391002T000000
+RDATE:19401007T000000
+RDATE:19411006T000000
+RDATE:19450930T020000
+RDATE:19461006T020000
+RDATE:19471005T020000
+RDATE:19481003T020000
+RDATE:19491002T020000
+RDATE:19501008T020000
+RDATE:19510930T020000
+RDATE:19520928T020000
+RDATE:19530927T020000
+RDATE:19540926T020000
+RDATE:19550925T020000
+RDATE:19560930T020000
+RDATE:19570929T020000
+RDATE:19580928T020000
+RDATE:19590927T020000
+RDATE:19601030T020000
+RDATE:19611029T020000
+RDATE:19621028T020000
+RDATE:19631027T020000
+RDATE:19641025T020000
+RDATE:19651031T020000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0330
+TZOFFSETTO:-0230
+TZNAME:NWT
+DTSTART:19420511T000000
+RDATE:19420511T000000
+END:DAYLIGHT
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0230
+TZOFFSETTO:-0230
+TZNAME:NPT
+DTSTART:19450814T203000
+RDATE:19450814T203000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:-0330
+TZOFFSETTO:-0400
+TZNAME:AST
+DTSTART:19660315T020000
+RDATE:19660315T020000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0400
+TZOFFSETTO:-0300
+TZNAME:ADT
+DTSTART:19660424T020000
+RDATE:19660424T020000
+RDATE:19670430T020000
+RDATE:19680428T020000
+RDATE:19690427T020000
+RDATE:19700426T020000
+RDATE:19710425T020000
+RDATE:19720430T020000
+RDATE:19730429T020000
+RDATE:19740428T020000
+RDATE:19750427T020000
+RDATE:19760425T020000
+RDATE:19770424T020000
+RDATE:19780430T020000
+RDATE:19790429T020000
+RDATE:19800427T020000
+RDATE:19810426T020000
+RDATE:19820425T020000
+RDATE:19830424T020000
+RDATE:19840429T020000
+RDATE:19850428T020000
+RDATE:19860427T020000
+RDATE:19870405T000100
+RDATE:19890402T000100
+RDATE:19900401T000100
+RDATE:19910407T000100
+RDATE:19920405T000100
+RDATE:19930404T000100
+RDATE:19940403T000100
+RDATE:19950402T000100
+RDATE:19960407T000100
+RDATE:19970406T000100
+RDATE:19980405T000100
+RDATE:19990404T000100
+RDATE:20000402T000100
+RDATE:20010401T000100
+RDATE:20020407T000100
+RDATE:20030406T000100
+RDATE:20040404T000100
+RDATE:20050403T000100
+RDATE:20060402T000100
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:-0300
+TZOFFSETTO:-0400
+TZNAME:AST
+DTSTART:19661030T020000
+RDATE:19661030T020000
+RDATE:19671029T020000
+RDATE:19681027T020000
+RDATE:19691026T020000
+RDATE:19701025T020000
+RDATE:19711031T020000
+RDATE:19721029T020000
+RDATE:19731028T020000
+RDATE:19741027T020000
+RDATE:19751026T020000
+RDATE:19761031T020000
+RDATE:19771030T020000
+RDATE:19781029T020000
+RDATE:19791028T020000
+RDATE:19801026T020000
+RDATE:19811025T020000
+RDATE:19821031T020000
+RDATE:19831030T020000
+RDATE:19841028T020000
+RDATE:19851027T020000
+RDATE:19861026T020000
+RDATE:19871025T000100
+RDATE:19891029T000100
+RDATE:19901028T000100
+RDATE:19911027T000100
+RDATE:19921025T000100
+RDATE:19931031T000100
+RDATE:19941030T000100
+RDATE:19951029T000100
+RDATE:19961027T000100
+RDATE:19971026T000100
+RDATE:19981025T000100
+RDATE:19991031T000100
+RDATE:20001029T000100
+RDATE:20011028T000100
+RDATE:20021027T000100
+RDATE:20031026T000100
+RDATE:20041031T000100
+RDATE:20051030T000100
+RDATE:20061029T000100
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0400
+TZOFFSETTO:-0200
+TZNAME:ADDT
+DTSTART:19880403T000100
+RDATE:19880403T000100
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:-0200
+TZOFFSETTO:-0400
+TZNAME:AST
+DTSTART:19881030T000100
+RDATE:19881030T000100
+END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/America/Goose_Bay.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/America/Godthab.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Godthab.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/America/Godthab.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,22 +1,58 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/America/Godthab
+TZID:/kde.org/Olson_20070327_1/America/Godthab
 X-LIC-LOCATION:America/Godthab
 BEGIN:DAYLIGHT
 TZOFFSETFROM:-0300
 TZOFFSETTO:-0200
 TZNAME:WGST
-DTSTART:19700328T220000
-RRULE:FREQ=YEARLY;BYMONTH=3;BYDAY=-1SA
+DTSTART:19810328T220000
+RRULE:FREQ=YEARLY;BYMONTH=3;BYMONTHDAY=24,25,26,27,28,29,30;BYDAY=SA
 END:DAYLIGHT
 BEGIN:STANDARD
 TZOFFSETFROM:-0200
 TZOFFSETTO:-0300
 TZNAME:WGT
-DTSTART:19701024T230000
-RRULE:FREQ=YEARLY;BYMONTH=10;BYDAY=-1SA
+DTSTART:19961026T230000
+RRULE:FREQ=YEARLY;BYMONTH=10;BYMONTHDAY=24,25,26,27,28,29,30;BYDAY=SA
 END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-032656
+TZOFFSETTO:-0300
+TZNAME:WGT
+DTSTART:19160728T000000
+RDATE:19160728T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0300
+TZOFFSETTO:-0200
+TZNAME:WGST
+DTSTART:19800406T020000
+RDATE:19800406T020000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:-0200
+TZOFFSETTO:-0300
+TZNAME:WGT
+DTSTART:19800927T230000
+RDATE:19800927T230000
+RDATE:19810926T230000
+RDATE:19820925T230000
+RDATE:19830924T230000
+RDATE:19840929T230000
+RDATE:19850928T230000
+RDATE:19860927T230000
+RDATE:19870926T230000
+RDATE:19880924T230000
+RDATE:19890923T230000
+RDATE:19900929T230000
+RDATE:19910928T230000
+RDATE:19920926T230000
+RDATE:19930925T230000
+RDATE:19940924T230000
+RDATE:19950923T230000
+END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/America/Godthab.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/America/Cayman.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Cayman.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/America/Cayman.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +1,22 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/America/Cayman
+TZID:/kde.org/Olson_20070327_1/America/Cayman
 X-LIC-LOCATION:America/Cayman
 BEGIN:STANDARD
-TZOFFSETFROM:-0500
+TZOFFSETFROM:-052532
+TZOFFSETTO:-050712
+TZNAME:KMT
+DTSTART:18900101T000000
+RDATE:18900101T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-050712
 TZOFFSETTO:-0500
 TZNAME:EST
-DTSTART:19700101T000000
+DTSTART:19120201T000000
+RDATE:19120201T000000
 END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/America/Cayman.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/America/Vancouver.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Vancouver.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/America/Vancouver.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,22 +1,187 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/America/Vancouver
+TZID:/kde.org/Olson_20070327_1/America/Vancouver
 X-LIC-LOCATION:America/Vancouver
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0800
+TZOFFSETTO:-0700
+TZNAME:PDT
+DTSTART:20070311T020000
+RRULE:FREQ=YEARLY;BYMONTH=3;BYDAY=2SU
+END:DAYLIGHT
 BEGIN:STANDARD
 TZOFFSETFROM:-0700
 TZOFFSETTO:-0800
 TZNAME:PST
-DTSTART:19701025T020000
-RRULE:FREQ=YEARLY;BYMONTH=10;BYDAY=-1SU
+DTSTART:20071104T020000
+RRULE:FREQ=YEARLY;BYMONTH=11;BYDAY=1SU
 END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-081228
+TZOFFSETTO:-0800
+TZNAME:PST
+DTSTART:18840101T000000
+RDATE:18840101T000000
+END:STANDARD
 BEGIN:DAYLIGHT
 TZOFFSETFROM:-0800
 TZOFFSETTO:-0700
 TZNAME:PDT
-DTSTART:19700405T020000
-RRULE:FREQ=YEARLY;BYMONTH=4;BYDAY=1SU
+DTSTART:19180414T020000
+RDATE:19180414T020000
+RDATE:19460428T020000
+RDATE:19470427T020000
+RDATE:19480425T020000
+RDATE:19490424T020000
+RDATE:19500430T020000
+RDATE:19510429T020000
+RDATE:19520427T020000
+RDATE:19530426T020000
+RDATE:19540425T020000
+RDATE:19550424T020000
+RDATE:19560429T020000
+RDATE:19570428T020000
+RDATE:19580427T020000
+RDATE:19590426T020000
+RDATE:19600424T020000
+RDATE:19610430T020000
+RDATE:19620429T020000
+RDATE:19630428T020000
+RDATE:19640426T020000
+RDATE:19650425T020000
+RDATE:19660424T020000
+RDATE:19670430T020000
+RDATE:19680428T020000
+RDATE:19690427T020000
+RDATE:19700426T020000
+RDATE:19710425T020000
+RDATE:19720430T020000
+RDATE:19730429T020000
+RDATE:19740428T020000
+RDATE:19750427T020000
+RDATE:19760425T020000
+RDATE:19770424T020000
+RDATE:19780430T020000
+RDATE:19790429T020000
+RDATE:19800427T020000
+RDATE:19810426T020000
+RDATE:19820425T020000
+RDATE:19830424T020000
+RDATE:19840429T020000
+RDATE:19850428T020000
+RDATE:19860427T020000
+RDATE:19870405T020000
+RDATE:19880403T020000
+RDATE:19890402T020000
+RDATE:19900401T020000
+RDATE:19910407T020000
+RDATE:19920405T020000
+RDATE:19930404T020000
+RDATE:19940403T020000
+RDATE:19950402T020000
+RDATE:19960407T020000
+RDATE:19970406T020000
+RDATE:19980405T020000
+RDATE:19990404T020000
+RDATE:20000402T020000
+RDATE:20010401T020000
+RDATE:20020407T020000
+RDATE:20030406T020000
+RDATE:20040404T020000
+RDATE:20050403T020000
+RDATE:20060402T020000
 END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:-0700
+TZOFFSETTO:-0800
+TZNAME:PST
+DTSTART:19181031T020000
+RDATE:19181031T020000
+RDATE:19450930T020000
+RDATE:19461013T020000
+RDATE:19470928T020000
+RDATE:19480926T020000
+RDATE:19490925T020000
+RDATE:19500924T020000
+RDATE:19510930T020000
+RDATE:19520928T020000
+RDATE:19530927T020000
+RDATE:19540926T020000
+RDATE:19550925T020000
+RDATE:19560930T020000
+RDATE:19570929T020000
+RDATE:19580928T020000
+RDATE:19590927T020000
+RDATE:19600925T020000
+RDATE:19610924T020000
+RDATE:19621028T020000
+RDATE:19631027T020000
+RDATE:19641025T020000
+RDATE:19651031T020000
+RDATE:19661030T020000
+RDATE:19671029T020000
+RDATE:19681027T020000
+RDATE:19691026T020000
+RDATE:19701025T020000
+RDATE:19711031T020000
+RDATE:19721029T020000
+RDATE:19731028T020000
+RDATE:19741027T020000
+RDATE:19751026T020000
+RDATE:19761031T020000
+RDATE:19771030T020000
+RDATE:19781029T020000
+RDATE:19791028T020000
+RDATE:19801026T020000
+RDATE:19811025T020000
+RDATE:19821031T020000
+RDATE:19831030T020000
+RDATE:19841028T020000
+RDATE:19851027T020000
+RDATE:19861026T020000
+RDATE:19871025T020000
+RDATE:19881030T020000
+RDATE:19891029T020000
+RDATE:19901028T020000
+RDATE:19911027T020000
+RDATE:19921025T020000
+RDATE:19931031T020000
+RDATE:19941030T020000
+RDATE:19951029T020000
+RDATE:19961027T020000
+RDATE:19971026T020000
+RDATE:19981025T020000
+RDATE:19991031T020000
+RDATE:20001029T020000
+RDATE:20011028T020000
+RDATE:20021027T020000
+RDATE:20031026T020000
+RDATE:20041031T020000
+RDATE:20051030T020000
+RDATE:20061029T020000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0800
+TZOFFSETTO:-0700
+TZNAME:PWT
+DTSTART:19420209T020000
+RDATE:19420209T020000
+END:DAYLIGHT
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0700
+TZOFFSETTO:-0700
+TZNAME:PPT
+DTSTART:19450814T160000
+RDATE:19450814T160000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:-0800
+TZOFFSETTO:-0800
+TZNAME:PST
+DTSTART:19870101T000000
+RDATE:19870101T000000
+END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/America/Vancouver.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/America/Bogota.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Bogota.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/America/Bogota.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +1,36 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/America/Bogota
+TZID:/kde.org/Olson_20070327_1/America/Bogota
 X-LIC-LOCATION:America/Bogota
 BEGIN:STANDARD
+TZOFFSETFROM:-045620
+TZOFFSETTO:-045620
+TZNAME:BMT
+DTSTART:18840313T000000
+RDATE:18840313T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-045620
+TZOFFSETTO:-0500
+TZNAME:COT
+DTSTART:19141123T000000
+RDATE:19141123T000000
+END:STANDARD
+BEGIN:DAYLIGHT
 TZOFFSETFROM:-0500
+TZOFFSETTO:-0400
+TZNAME:COST
+DTSTART:19920503T000000
+RDATE:19920503T000000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:-0400
 TZOFFSETTO:-0500
 TZNAME:COT
-DTSTART:19700101T000000
+DTSTART:19930404T000000
+RDATE:19930404T000000
 END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/America/Bogota.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/America/Moncton.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Moncton.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 0)
+++ libkcal/libical/zoneinfo/America/Moncton.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -0,0 +1,215 @@
+BEGIN:VCALENDAR
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
+VERSION:2.0
+BEGIN:VTIMEZONE
+TZID:/kde.org/Olson_20070327_1/America/Moncton
+X-LIC-LOCATION:America/Moncton
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0400
+TZOFFSETTO:-0300
+TZNAME:ADT
+DTSTART:20070311T020000
+RRULE:FREQ=YEARLY;BYMONTH=3;BYDAY=2SU
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:-0300
+TZOFFSETTO:-0400
+TZNAME:AST
+DTSTART:20071104T020000
+RRULE:FREQ=YEARLY;BYMONTH=11;BYDAY=1SU
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-041908
+TZOFFSETTO:-0500
+TZNAME:EST
+DTSTART:18831209T000000
+RDATE:18831209T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-0500
+TZOFFSETTO:-0400
+TZNAME:AST
+DTSTART:19020615T000000
+RDATE:19020615T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0400
+TZOFFSETTO:-0300
+TZNAME:ADT
+DTSTART:19180414T020000
+RDATE:19180414T020000
+RDATE:19330611T010000
+RDATE:19340610T010000
+RDATE:19350609T010000
+RDATE:19360607T010000
+RDATE:19370606T010000
+RDATE:19380605T010000
+RDATE:19390527T010000
+RDATE:19400519T010000
+RDATE:19410504T010000
+RDATE:19460428T020000
+RDATE:19470427T020000
+RDATE:19480425T020000
+RDATE:19490424T020000
+RDATE:19500430T020000
+RDATE:19510429T020000
+RDATE:19520427T020000
+RDATE:19530426T020000
+RDATE:19540425T020000
+RDATE:19550424T020000
+RDATE:19560429T020000
+RDATE:19570428T020000
+RDATE:19580427T020000
+RDATE:19590426T020000
+RDATE:19600424T020000
+RDATE:19610430T020000
+RDATE:19620429T020000
+RDATE:19630428T020000
+RDATE:19640426T020000
+RDATE:19650425T020000
+RDATE:19660424T020000
+RDATE:19670430T020000
+RDATE:19680428T020000
+RDATE:19690427T020000
+RDATE:19700426T020000
+RDATE:19710425T020000
+RDATE:19720430T020000
+RDATE:19740428T020000
+RDATE:19750427T020000
+RDATE:19760425T020000
+RDATE:19770424T020000
+RDATE:19780430T020000
+RDATE:19790429T020000
+RDATE:19800427T020000
+RDATE:19810426T020000
+RDATE:19820425T020000
+RDATE:19830424T020000
+RDATE:19840429T020000
+RDATE:19850428T020000
+RDATE:19860427T020000
+RDATE:19870405T020000
+RDATE:19880403T020000
+RDATE:19890402T020000
+RDATE:19900401T020000
+RDATE:19910407T020000
+RDATE:19920405T020000
+RDATE:19930404T000100
+RDATE:19940403T000100
+RDATE:19950402T000100
+RDATE:19960407T000100
+RDATE:19970406T000100
+RDATE:19980405T000100
+RDATE:19990404T000100
+RDATE:20000402T000100
+RDATE:20010401T000100
+RDATE:20020407T000100
+RDATE:20030406T000100
+RDATE:20040404T000100
+RDATE:20050403T000100
+RDATE:20060402T000100
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:-0300
+TZOFFSETTO:-0400
+TZNAME:AST
+DTSTART:19181031T020000
+RDATE:19181031T020000
+RDATE:19330910T010000
+RDATE:19340909T010000
+RDATE:19350908T010000
+RDATE:19360906T010000
+RDATE:19370905T010000
+RDATE:19380904T010000
+RDATE:19390923T010000
+RDATE:19400921T010000
+RDATE:19410927T010000
+RDATE:19450930T020000
+RDATE:19460929T020000
+RDATE:19470928T020000
+RDATE:19480926T020000
+RDATE:19490925T020000
+RDATE:19500924T020000
+RDATE:19510930T020000
+RDATE:19520928T020000
+RDATE:19530927T020000
+RDATE:19540926T020000
+RDATE:19550925T020000
+RDATE:19560930T020000
+RDATE:19571027T020000
+RDATE:19581026T020000
+RDATE:19591025T020000
+RDATE:19601030T020000
+RDATE:19611029T020000
+RDATE:19621028T020000
+RDATE:19631027T020000
+RDATE:19641025T020000
+RDATE:19651031T020000
+RDATE:19661030T020000
+RDATE:19671029T020000
+RDATE:19681027T020000
+RDATE:19691026T020000
+RDATE:19701025T020000
+RDATE:19711031T020000
+RDATE:19721029T020000
+RDATE:19741027T020000
+RDATE:19751026T020000
+RDATE:19761031T020000
+RDATE:19771030T020000
+RDATE:19781029T020000
+RDATE:19791028T020000
+RDATE:19801026T020000
+RDATE:19811025T020000
+RDATE:19821031T020000
+RDATE:19831030T020000
+RDATE:19841028T020000
+RDATE:19851027T020000
+RDATE:19861026T020000
+RDATE:19871025T020000
+RDATE:19881030T020000
+RDATE:19891029T020000
+RDATE:19901028T020000
+RDATE:19911027T020000
+RDATE:19921025T020000
+RDATE:19931031T000100
+RDATE:19941030T000100
+RDATE:19951029T000100
+RDATE:19961027T000100
+RDATE:19971026T000100
+RDATE:19981025T000100
+RDATE:19991031T000100
+RDATE:20001029T000100
+RDATE:20011028T000100
+RDATE:20021027T000100
+RDATE:20031026T000100
+RDATE:20041031T000100
+RDATE:20051030T000100
+RDATE:20061029T000100
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-0400
+TZOFFSETTO:-0400
+TZNAME:AST
+DTSTART:19330101T000000
+RDATE:19330101T000000
+RDATE:19420101T000000
+RDATE:19460101T000000
+RDATE:19730101T000000
+RDATE:19930101T000000
+RDATE:20070101T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0400
+TZOFFSETTO:-0300
+TZNAME:AWT
+DTSTART:19420209T020000
+RDATE:19420209T020000
+END:DAYLIGHT
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0300
+TZOFFSETTO:-0300
+TZNAME:APT
+DTSTART:19450814T200000
+RDATE:19450814T200000
+END:DAYLIGHT
+END:VTIMEZONE
+END:VCALENDAR
Index: libkcal/libical/zoneinfo/America/Rio_Branco.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Rio_Branco.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/America/Rio_Branco.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +1,62 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/America/Rio_Branco
+TZID:/kde.org/Olson_20070327_1/America/Rio_Branco
 X-LIC-LOCATION:America/Rio_Branco
 BEGIN:STANDARD
+TZOFFSETFROM:-043112
+TZOFFSETTO:-0500
+TZNAME:ACT
+DTSTART:19140101T000000
+RDATE:19140101T000000
+END:STANDARD
+BEGIN:DAYLIGHT
 TZOFFSETFROM:-0500
+TZOFFSETTO:-0400
+TZNAME:ACST
+DTSTART:19311003T110000
+RDATE:19311003T110000
+RDATE:19321003T000000
+RDATE:19491201T000000
+RDATE:19501201T000000
+RDATE:19511201T000000
+RDATE:19521201T000000
+RDATE:19631209T000000
+RDATE:19650131T000000
+RDATE:19651201T000000
+RDATE:19661101T000000
+RDATE:19671101T000000
+RDATE:19851102T000000
+RDATE:19861025T000000
+RDATE:19871025T000000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:-0400
 TZOFFSETTO:-0500
 TZNAME:ACT
-DTSTART:19700101T000000
+DTSTART:19320401T000000
+RDATE:19320401T000000
+RDATE:19330401T000000
+RDATE:19500416T010000
+RDATE:19510401T000000
+RDATE:19520401T000000
+RDATE:19530301T000000
+RDATE:19640301T000000
+RDATE:19650331T000000
+RDATE:19660301T000000
+RDATE:19670301T000000
+RDATE:19680301T000000
+RDATE:19860315T000000
+RDATE:19870214T000000
+RDATE:19880207T000000
 END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-0500
+TZOFFSETTO:-0500
+TZNAME:ACT
+DTSTART:19880912T000000
+RDATE:19880912T000000
+END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/America/Rio_Branco.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/America/Whitehorse.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Whitehorse.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/America/Whitehorse.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,22 +1,153 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/America/Whitehorse
+TZID:/kde.org/Olson_20070327_1/America/Whitehorse
 X-LIC-LOCATION:America/Whitehorse
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0800
+TZOFFSETTO:-0700
+TZNAME:PDT
+DTSTART:20070311T020000
+RRULE:FREQ=YEARLY;BYMONTH=3;BYDAY=2SU
+END:DAYLIGHT
 BEGIN:STANDARD
 TZOFFSETFROM:-0700
 TZOFFSETTO:-0800
 TZNAME:PST
-DTSTART:19701025T020000
-RRULE:FREQ=YEARLY;BYMONTH=10;BYDAY=-1SU
+DTSTART:20071104T020000
+RRULE:FREQ=YEARLY;BYMONTH=11;BYDAY=1SU
 END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-090012
+TZOFFSETTO:-0900
+TZNAME:YST
+DTSTART:19000820T000000
+RDATE:19000820T000000
+END:STANDARD
 BEGIN:DAYLIGHT
+TZOFFSETFROM:-0900
+TZOFFSETTO:-0800
+TZNAME:YDT
+DTSTART:19180414T020000
+RDATE:19180414T020000
+RDATE:19190525T020000
+END:DAYLIGHT
+BEGIN:STANDARD
 TZOFFSETFROM:-0800
+TZOFFSETTO:-0900
+TZNAME:YST
+DTSTART:19181027T020000
+RDATE:19181027T020000
+RDATE:19191101T000000
+RDATE:19450930T020000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0900
+TZOFFSETTO:-0800
+TZNAME:YWT
+DTSTART:19420209T020000
+RDATE:19420209T020000
+END:DAYLIGHT
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0800
+TZOFFSETTO:-0800
+TZNAME:YPT
+DTSTART:19450814T150000
+RDATE:19450814T150000
+END:DAYLIGHT
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0900
 TZOFFSETTO:-0700
+TZNAME:YDDT
+DTSTART:19650425T000000
+RDATE:19650425T000000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:-0700
+TZOFFSETTO:-0900
+TZNAME:YST
+DTSTART:19651031T020000
+RDATE:19651031T020000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-0900
+TZOFFSETTO:-0800
+DTSTART:19660701T020000
+RDATE:19660701T020000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-0800
+TZOFFSETTO:-0800
+TZNAME:PST
+DTSTART:19800101T000000
+RDATE:19800101T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0800
+TZOFFSETTO:-0700
 TZNAME:PDT
-DTSTART:19700405T020000
-RRULE:FREQ=YEARLY;BYMONTH=4;BYDAY=1SU
+DTSTART:19800427T020000
+RDATE:19800427T020000
+RDATE:19810426T020000
+RDATE:19820425T020000
+RDATE:19830424T020000
+RDATE:19840429T020000
+RDATE:19850428T020000
+RDATE:19860427T020000
+RDATE:19870405T020000
+RDATE:19880403T020000
+RDATE:19890402T020000
+RDATE:19900401T020000
+RDATE:19910407T020000
+RDATE:19920405T020000
+RDATE:19930404T020000
+RDATE:19940403T020000
+RDATE:19950402T020000
+RDATE:19960407T020000
+RDATE:19970406T020000
+RDATE:19980405T020000
+RDATE:19990404T020000
+RDATE:20000402T020000
+RDATE:20010401T020000
+RDATE:20020407T020000
+RDATE:20030406T020000
+RDATE:20040404T020000
+RDATE:20050403T020000
+RDATE:20060402T020000
 END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:-0700
+TZOFFSETTO:-0800
+TZNAME:PST
+DTSTART:19801026T020000
+RDATE:19801026T020000
+RDATE:19811025T020000
+RDATE:19821031T020000
+RDATE:19831030T020000
+RDATE:19841028T020000
+RDATE:19851027T020000
+RDATE:19861026T020000
+RDATE:19871025T020000
+RDATE:19881030T020000
+RDATE:19891029T020000
+RDATE:19901028T020000
+RDATE:19911027T020000
+RDATE:19921025T020000
+RDATE:19931031T020000
+RDATE:19941030T020000
+RDATE:19951029T020000
+RDATE:19961027T020000
+RDATE:19971026T020000
+RDATE:19981025T020000
+RDATE:19991031T020000
+RDATE:20001029T020000
+RDATE:20011028T020000
+RDATE:20021027T020000
+RDATE:20031026T020000
+RDATE:20041031T020000
+RDATE:20051030T020000
+RDATE:20061029T020000
+END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/America/Whitehorse.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/America/Cuiaba.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Cuiaba.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/America/Cuiaba.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,22 +1,111 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/America/Cuiaba
+TZID:/kde.org/Olson_20070327_1/America/Cuiaba
 X-LIC-LOCATION:America/Cuiaba
 BEGIN:DAYLIGHT
 TZOFFSETFROM:-0400
 TZOFFSETTO:-0300
 TZNAME:AMST
-DTSTART:19701011T000000
-RRULE:FREQ=YEARLY;BYMONTH=10;BYDAY=2SU
+DTSTART:20061105T000000
+RRULE:FREQ=YEARLY;BYMONTH=11;BYDAY=1SU
 END:DAYLIGHT
 BEGIN:STANDARD
 TZOFFSETFROM:-0300
 TZOFFSETTO:-0400
 TZNAME:AMT
-DTSTART:19700215T000000
-RRULE:FREQ=YEARLY;BYMONTH=2;BYDAY=3SU
+DTSTART:20070225T000000
+RRULE:FREQ=YEARLY;BYMONTH=2;BYDAY=-1SU
 END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-034420
+TZOFFSETTO:-0400
+TZNAME:AMT
+DTSTART:19140101T000000
+RDATE:19140101T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0400
+TZOFFSETTO:-0300
+TZNAME:AMST
+DTSTART:19311003T110000
+RDATE:19311003T110000
+RDATE:19321003T000000
+RDATE:19491201T000000
+RDATE:19501201T000000
+RDATE:19511201T000000
+RDATE:19521201T000000
+RDATE:19631209T000000
+RDATE:19650131T000000
+RDATE:19651201T000000
+RDATE:19661101T000000
+RDATE:19671101T000000
+RDATE:19851102T000000
+RDATE:19861025T000000
+RDATE:19871025T000000
+RDATE:19881016T000000
+RDATE:19891015T000000
+RDATE:19901021T000000
+RDATE:19911020T000000
+RDATE:19921025T000000
+RDATE:19931017T000000
+RDATE:19941016T000000
+RDATE:19951015T000000
+RDATE:19961006T000000
+RDATE:19971006T000000
+RDATE:19981011T000000
+RDATE:19991003T000000
+RDATE:20001008T000000
+RDATE:20011014T000000
+RDATE:20021103T000000
+RDATE:20041102T000000
+RDATE:20051016T000000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:-0300
+TZOFFSETTO:-0400
+TZNAME:AMT
+DTSTART:19320401T000000
+RDATE:19320401T000000
+RDATE:19330401T000000
+RDATE:19500416T010000
+RDATE:19510401T000000
+RDATE:19520401T000000
+RDATE:19530301T000000
+RDATE:19640301T000000
+RDATE:19650331T000000
+RDATE:19660301T000000
+RDATE:19670301T000000
+RDATE:19680301T000000
+RDATE:19860315T000000
+RDATE:19870214T000000
+RDATE:19880207T000000
+RDATE:19890129T000000
+RDATE:19900211T000000
+RDATE:19910217T000000
+RDATE:19920209T000000
+RDATE:19930131T000000
+RDATE:19940220T000000
+RDATE:19950219T000000
+RDATE:19960211T000000
+RDATE:19970216T000000
+RDATE:19980301T000000
+RDATE:19990221T000000
+RDATE:20000227T000000
+RDATE:20010218T000000
+RDATE:20020217T000000
+RDATE:20030216T000000
+RDATE:20050220T000000
+RDATE:20060219T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-0400
+TZOFFSETTO:-0400
+TZNAME:AMT
+DTSTART:20030924T000000
+RDATE:20030924T000000
+RDATE:20041001T000000
+END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/America/Cuiaba.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/America/Tortola.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Tortola.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/America/Tortola.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +1,15 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_4/America/Tortola
+TZID:/kde.org/Olson_20070327_1/America/Tortola
 X-LIC-LOCATION:America/Tortola
 BEGIN:STANDARD
-TZOFFSETFROM:-0400
+TZOFFSETFROM:-041828
 TZOFFSETTO:-0400
 TZNAME:AST
-DTSTART:19700101T000000
+DTSTART:19110701T000000
+RDATE:19110701T000000
 END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/America/Tortola.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/America/St_Johns.ics
===================================================================
--- libkcal/libical/zoneinfo/America/St_Johns.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/America/St_Johns.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,22 +1,268 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/America/St_Johns
+TZID:/kde.org/Olson_20070327_1/America/St_Johns
 X-LIC-LOCATION:America/St_Johns
 BEGIN:DAYLIGHT
 TZOFFSETFROM:-0330
 TZOFFSETTO:-0230
 TZNAME:NDT
-DTSTART:19700405T000100
-RRULE:FREQ=YEARLY;BYMONTH=4;BYDAY=1SU
+DTSTART:20070311T000100
+RRULE:FREQ=YEARLY;BYMONTH=3;BYDAY=2SU
 END:DAYLIGHT
 BEGIN:STANDARD
 TZOFFSETFROM:-0230
 TZOFFSETTO:-0330
 TZNAME:NST
-DTSTART:19701025T000100
-RRULE:FREQ=YEARLY;BYMONTH=10;BYDAY=-1SU
+DTSTART:20071104T000100
+RRULE:FREQ=YEARLY;BYMONTH=11;BYDAY=1SU
 END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-033052
+TZOFFSETTO:-033052
+TZNAME:NST
+DTSTART:18840101T000000
+RDATE:18840101T000000
+RDATE:19180101T000000
+RDATE:19190101T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-033052
+TZOFFSETTO:-023052
+TZNAME:NDT
+DTSTART:19170408T020000
+RDATE:19170408T020000
+RDATE:19180414T020000
+RDATE:19190505T230000
+RDATE:19200502T230000
+RDATE:19210501T230000
+RDATE:19220507T230000
+RDATE:19230506T230000
+RDATE:19240504T230000
+RDATE:19250503T230000
+RDATE:19260502T230000
+RDATE:19270501T230000
+RDATE:19280506T230000
+RDATE:19290505T230000
+RDATE:19300504T230000
+RDATE:19310503T230000
+RDATE:19320501T230000
+RDATE:19330507T230000
+RDATE:19340506T230000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:-023052
+TZOFFSETTO:-033052
+TZNAME:NST
+DTSTART:19170917T020000
+RDATE:19170917T020000
+RDATE:19181031T020000
+RDATE:19190812T230000
+RDATE:19201031T230000
+RDATE:19211030T230000
+RDATE:19221029T230000
+RDATE:19231028T230000
+RDATE:19241026T230000
+RDATE:19251025T230000
+RDATE:19261031T230000
+RDATE:19271030T230000
+RDATE:19281028T230000
+RDATE:19291027T230000
+RDATE:19301026T230000
+RDATE:19311025T230000
+RDATE:19321030T230000
+RDATE:19331029T230000
+RDATE:19341028T230000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-033052
+TZOFFSETTO:-0330
+TZNAME:NST
+DTSTART:19350330T000000
+RDATE:19350330T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0330
+TZOFFSETTO:-0230
+TZNAME:NDT
+DTSTART:19350505T230000
+RDATE:19350505T230000
+RDATE:19360511T000000
+RDATE:19370510T000000
+RDATE:19380509T000000
+RDATE:19390515T000000
+RDATE:19400513T000000
+RDATE:19410512T000000
+RDATE:19460512T020000
+RDATE:19470511T020000
+RDATE:19480509T020000
+RDATE:19490508T020000
+RDATE:19500514T020000
+RDATE:19510429T020000
+RDATE:19520427T020000
+RDATE:19530426T020000
+RDATE:19540425T020000
+RDATE:19550424T020000
+RDATE:19560429T020000
+RDATE:19570428T020000
+RDATE:19580427T020000
+RDATE:19590426T020000
+RDATE:19600424T020000
+RDATE:19610430T020000
+RDATE:19620429T020000
+RDATE:19630428T020000
+RDATE:19640426T020000
+RDATE:19650425T020000
+RDATE:19660424T020000
+RDATE:19670430T020000
+RDATE:19680428T020000
+RDATE:19690427T020000
+RDATE:19700426T020000
+RDATE:19710425T020000
+RDATE:19720430T020000
+RDATE:19730429T020000
+RDATE:19740428T020000
+RDATE:19750427T020000
+RDATE:19760425T020000
+RDATE:19770424T020000
+RDATE:19780430T020000
+RDATE:19790429T020000
+RDATE:19800427T020000
+RDATE:19810426T020000
+RDATE:19820425T020000
+RDATE:19830424T020000
+RDATE:19840429T020000
+RDATE:19850428T020000
+RDATE:19860427T020000
+RDATE:19870405T000100
+RDATE:19890402T000100
+RDATE:19900401T000100
+RDATE:19910407T000100
+RDATE:19920405T000100
+RDATE:19930404T000100
+RDATE:19940403T000100
+RDATE:19950402T000100
+RDATE:19960407T000100
+RDATE:19970406T000100
+RDATE:19980405T000100
+RDATE:19990404T000100
+RDATE:20000402T000100
+RDATE:20010401T000100
+RDATE:20020407T000100
+RDATE:20030406T000100
+RDATE:20040404T000100
+RDATE:20050403T000100
+RDATE:20060402T000100
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:-0230
+TZOFFSETTO:-0330
+TZNAME:NST
+DTSTART:19351027T230000
+RDATE:19351027T230000
+RDATE:19361005T000000
+RDATE:19371004T000000
+RDATE:19381003T000000
+RDATE:19391002T000000
+RDATE:19401007T000000
+RDATE:19411006T000000
+RDATE:19450930T020000
+RDATE:19461006T020000
+RDATE:19471005T020000
+RDATE:19481003T020000
+RDATE:19491002T020000
+RDATE:19501008T020000
+RDATE:19510930T020000
+RDATE:19520928T020000
+RDATE:19530927T020000
+RDATE:19540926T020000
+RDATE:19550925T020000
+RDATE:19560930T020000
+RDATE:19570929T020000
+RDATE:19580928T020000
+RDATE:19590927T020000
+RDATE:19601030T020000
+RDATE:19611029T020000
+RDATE:19621028T020000
+RDATE:19631027T020000
+RDATE:19641025T020000
+RDATE:19651031T020000
+RDATE:19661030T020000
+RDATE:19671029T020000
+RDATE:19681027T020000
+RDATE:19691026T020000
+RDATE:19701025T020000
+RDATE:19711031T020000
+RDATE:19721029T020000
+RDATE:19731028T020000
+RDATE:19741027T020000
+RDATE:19751026T020000
+RDATE:19761031T020000
+RDATE:19771030T020000
+RDATE:19781029T020000
+RDATE:19791028T020000
+RDATE:19801026T020000
+RDATE:19811025T020000
+RDATE:19821031T020000
+RDATE:19831030T020000
+RDATE:19841028T020000
+RDATE:19851027T020000
+RDATE:19861026T020000
+RDATE:19871025T000100
+RDATE:19891029T000100
+RDATE:19901028T000100
+RDATE:19911027T000100
+RDATE:19921025T000100
+RDATE:19931031T000100
+RDATE:19941030T000100
+RDATE:19951029T000100
+RDATE:19961027T000100
+RDATE:19971026T000100
+RDATE:19981025T000100
+RDATE:19991031T000100
+RDATE:20001029T000100
+RDATE:20011028T000100
+RDATE:20021027T000100
+RDATE:20031026T000100
+RDATE:20041031T000100
+RDATE:20051030T000100
+RDATE:20061029T000100
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0330
+TZOFFSETTO:-0230
+TZNAME:NWT
+DTSTART:19420511T000000
+RDATE:19420511T000000
+END:DAYLIGHT
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0230
+TZOFFSETTO:-0230
+TZNAME:NPT
+DTSTART:19450814T203000
+RDATE:19450814T203000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:-0330
+TZOFFSETTO:-0330
+TZNAME:NST
+DTSTART:19460101T000000
+RDATE:19460101T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0330
+TZOFFSETTO:-0130
+TZNAME:NDDT
+DTSTART:19880403T000100
+RDATE:19880403T000100
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:-0130
+TZOFFSETTO:-0330
+TZNAME:NST
+DTSTART:19881030T000100
+RDATE:19881030T000100
+END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/America/St_Johns.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/America/Antigua.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Antigua.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/America/Antigua.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +1,22 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/America/Antigua
+TZID:/kde.org/Olson_20070327_1/America/Antigua
 X-LIC-LOCATION:America/Antigua
 BEGIN:STANDARD
-TZOFFSETFROM:-0400
+TZOFFSETFROM:-040712
+TZOFFSETTO:-0500
+TZNAME:EST
+DTSTART:19120302T000000
+RDATE:19120302T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-0500
 TZOFFSETTO:-0400
 TZNAME:AST
-DTSTART:19700101T000000
+DTSTART:19510101T000000
+RDATE:19510101T000000
 END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/America/Antigua.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/America/Puerto_Rico.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Puerto_Rico.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/America/Puerto_Rico.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +1,43 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/America/Puerto_Rico
+TZID:/kde.org/Olson_20070327_1/America/Puerto_Rico
 X-LIC-LOCATION:America/Puerto_Rico
 BEGIN:STANDARD
+TZOFFSETFROM:-042425
+TZOFFSETTO:-0400
+TZNAME:AST
+DTSTART:18990328T120000
+RDATE:18990328T120000
+END:STANDARD
+BEGIN:DAYLIGHT
 TZOFFSETFROM:-0400
+TZOFFSETTO:-0300
+TZNAME:AWT
+DTSTART:19420503T000000
+RDATE:19420503T000000
+END:DAYLIGHT
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0300
+TZOFFSETTO:-0300
+TZNAME:APT
+DTSTART:19450814T200000
+RDATE:19450814T200000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:-0300
 TZOFFSETTO:-0400
 TZNAME:AST
-DTSTART:19700101T000000
+DTSTART:19450930T020000
+RDATE:19450930T020000
 END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-0400
+TZOFFSETTO:-0400
+TZNAME:AST
+DTSTART:19460101T000000
+RDATE:19460101T000000
+END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/America/Puerto_Rico.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/America/Havana.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Havana.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/America/Havana.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,22 +1,148 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/America/Havana
+TZID:/kde.org/Olson_20070327_1/America/Havana
 X-LIC-LOCATION:America/Havana
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0500
+TZOFFSETTO:-0400
+TZNAME:CDT
+DTSTART:20070311T000000
+RRULE:FREQ=YEARLY;BYMONTH=3;BYDAY=2SU
+END:DAYLIGHT
 BEGIN:STANDARD
 TZOFFSETFROM:-0400
 TZOFFSETTO:-0500
 TZNAME:CST
-DTSTART:19701025T010000
-RRULE:FREQ=YEARLY;BYMONTH=10;BYDAY=-1SU
+DTSTART:20071104T010000
+RRULE:FREQ=YEARLY;BYMONTH=11;BYDAY=1SU
 END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-052928
+TZOFFSETTO:-052936
+TZNAME:HMT
+DTSTART:18900101T000000
+RDATE:18900101T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-052936
+TZOFFSETTO:-0500
+TZNAME:CST
+DTSTART:19250719T120000
+RDATE:19250719T120000
+END:STANDARD
 BEGIN:DAYLIGHT
 TZOFFSETFROM:-0500
 TZOFFSETTO:-0400
 TZNAME:CDT
-DTSTART:19700405T000000
-RRULE:FREQ=YEARLY;BYMONTH=4;BYDAY=1SU
+DTSTART:19280610T000000
+RDATE:19280610T000000
+RDATE:19400602T000000
+RDATE:19410601T000000
+RDATE:19420607T000000
+RDATE:19450603T000000
+RDATE:19460602T000000
+RDATE:19650601T000000
+RDATE:19660529T000000
+RDATE:19670408T000000
+RDATE:19680414T000000
+RDATE:19690427T000000
+RDATE:19700426T000000
+RDATE:19710425T000000
+RDATE:19720430T000000
+RDATE:19730429T000000
+RDATE:19740428T000000
+RDATE:19750427T000000
+RDATE:19760425T000000
+RDATE:19770424T000000
+RDATE:19780507T000000
+RDATE:19790318T000000
+RDATE:19800316T000000
+RDATE:19810510T000000
+RDATE:19820509T000000
+RDATE:19830508T000000
+RDATE:19840506T000000
+RDATE:19850505T000000
+RDATE:19860316T000000
+RDATE:19870315T000000
+RDATE:19880320T000000
+RDATE:19890319T000000
+RDATE:19900401T000000
+RDATE:19910407T000000
+RDATE:19920405T000000
+RDATE:19930404T000000
+RDATE:19940403T000000
+RDATE:19950402T000000
+RDATE:19960407T000000
+RDATE:19970406T000000
+RDATE:19980329T000000
+RDATE:19990328T000000
+RDATE:20000402T000000
+RDATE:20010401T000000
+RDATE:20020407T000000
+RDATE:20030406T000000
+RDATE:20040404T000000
 END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:-0400
+TZOFFSETTO:-0500
+TZNAME:CST
+DTSTART:19281010T000000
+RDATE:19281010T000000
+RDATE:19400901T000000
+RDATE:19410907T000000
+RDATE:19420906T000000
+RDATE:19450902T000000
+RDATE:19460901T000000
+RDATE:19650930T000000
+RDATE:19661002T000000
+RDATE:19670910T000000
+RDATE:19680908T000000
+RDATE:19691026T000000
+RDATE:19701025T000000
+RDATE:19711031T000000
+RDATE:19721008T000000
+RDATE:19731008T000000
+RDATE:19741008T000000
+RDATE:19751026T000000
+RDATE:19761031T000000
+RDATE:19771030T000000
+RDATE:19781008T000000
+RDATE:19791014T000000
+RDATE:19801012T000000
+RDATE:19811011T000000
+RDATE:19821010T000000
+RDATE:19831009T000000
+RDATE:19841014T000000
+RDATE:19851013T000000
+RDATE:19861012T000000
+RDATE:19871011T000000
+RDATE:19881009T000000
+RDATE:19891008T000000
+RDATE:19901014T000000
+RDATE:19911013T010000
+RDATE:19921011T010000
+RDATE:19931010T010000
+RDATE:19941009T010000
+RDATE:19951008T010000
+RDATE:19961006T010000
+RDATE:19971012T010000
+RDATE:19981025T010000
+RDATE:19991031T010000
+RDATE:20001029T010000
+RDATE:20011028T010000
+RDATE:20021027T010000
+RDATE:20031026T010000
+RDATE:20061029T010000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0400
+TZOFFSETTO:-0400
+TZNAME:CDT
+DTSTART:20050403T010000
+RDATE:20050403T010000
+RDATE:20060402T010000
+END:DAYLIGHT
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/America/Havana.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/America/St_Kitts.ics
===================================================================
--- libkcal/libical/zoneinfo/America/St_Kitts.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/America/St_Kitts.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +1,15 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_4/America/St_Kitts
+TZID:/kde.org/Olson_20070327_1/America/St_Kitts
 X-LIC-LOCATION:America/St_Kitts
 BEGIN:STANDARD
-TZOFFSETFROM:-0400
+TZOFFSETFROM:-041052
 TZOFFSETTO:-0400
 TZNAME:AST
-DTSTART:19700101T000000
+DTSTART:19120302T000000
+RDATE:19120302T000000
 END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/America/St_Kitts.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/America/Inuvik.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Inuvik.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/America/Inuvik.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,22 +1,122 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/America/Inuvik
+TZID:/kde.org/Olson_20070327_1/America/Inuvik
 X-LIC-LOCATION:America/Inuvik
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0700
+TZOFFSETTO:-0600
+TZNAME:MDT
+DTSTART:20070311T020000
+RRULE:FREQ=YEARLY;BYMONTH=3;BYDAY=2SU
+END:DAYLIGHT
 BEGIN:STANDARD
 TZOFFSETFROM:-0600
 TZOFFSETTO:-0700
 TZNAME:MST
-DTSTART:19701025T020000
-RRULE:FREQ=YEARLY;BYMONTH=10;BYDAY=-1SU
+DTSTART:20071104T020000
+RRULE:FREQ=YEARLY;BYMONTH=11;BYDAY=1SU
 END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0000
+TZOFFSETTO:-0800
+TZNAME:PST
+DTSTART:19530101T000000
+RDATE:19530101T000000
+END:STANDARD
 BEGIN:DAYLIGHT
+TZOFFSETFROM:-0800
+TZOFFSETTO:-0600
+TZNAME:PDDT
+DTSTART:19650425T000000
+RDATE:19650425T000000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:-0600
+TZOFFSETTO:-0800
+TZNAME:PST
+DTSTART:19651031T020000
+RDATE:19651031T020000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-0800
+TZOFFSETTO:-0700
+DTSTART:19790429T020000
+RDATE:19790429T020000
+END:STANDARD
+BEGIN:STANDARD
 TZOFFSETFROM:-0700
+TZOFFSETTO:-0700
+TZNAME:MST
+DTSTART:19800101T000000
+RDATE:19800101T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0700
 TZOFFSETTO:-0600
 TZNAME:MDT
-DTSTART:19700405T020000
-RRULE:FREQ=YEARLY;BYMONTH=4;BYDAY=1SU
+DTSTART:19800427T020000
+RDATE:19800427T020000
+RDATE:19810426T020000
+RDATE:19820425T020000
+RDATE:19830424T020000
+RDATE:19840429T020000
+RDATE:19850428T020000
+RDATE:19860427T020000
+RDATE:19870405T020000
+RDATE:19880403T020000
+RDATE:19890402T020000
+RDATE:19900401T020000
+RDATE:19910407T020000
+RDATE:19920405T020000
+RDATE:19930404T020000
+RDATE:19940403T020000
+RDATE:19950402T020000
+RDATE:19960407T020000
+RDATE:19970406T020000
+RDATE:19980405T020000
+RDATE:19990404T020000
+RDATE:20000402T020000
+RDATE:20010401T020000
+RDATE:20020407T020000
+RDATE:20030406T020000
+RDATE:20040404T020000
+RDATE:20050403T020000
+RDATE:20060402T020000
 END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:-0600
+TZOFFSETTO:-0700
+TZNAME:MST
+DTSTART:19801026T020000
+RDATE:19801026T020000
+RDATE:19811025T020000
+RDATE:19821031T020000
+RDATE:19831030T020000
+RDATE:19841028T020000
+RDATE:19851027T020000
+RDATE:19861026T020000
+RDATE:19871025T020000
+RDATE:19881030T020000
+RDATE:19891029T020000
+RDATE:19901028T020000
+RDATE:19911027T020000
+RDATE:19921025T020000
+RDATE:19931031T020000
+RDATE:19941030T020000
+RDATE:19951029T020000
+RDATE:19961027T020000
+RDATE:19971026T020000
+RDATE:19981025T020000
+RDATE:19991031T020000
+RDATE:20001029T020000
+RDATE:20011028T020000
+RDATE:20021027T020000
+RDATE:20031026T020000
+RDATE:20041031T020000
+RDATE:20051030T020000
+RDATE:20061029T020000
+END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/America/Inuvik.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/America/Iqaluit.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Iqaluit.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/America/Iqaluit.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,22 +1,135 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/America/Iqaluit
+TZID:/kde.org/Olson_20070327_1/America/Iqaluit
 X-LIC-LOCATION:America/Iqaluit
 BEGIN:DAYLIGHT
 TZOFFSETFROM:-0500
 TZOFFSETTO:-0400
 TZNAME:EDT
-DTSTART:19700405T020000
-RRULE:FREQ=YEARLY;BYMONTH=4;BYDAY=1SU
+DTSTART:20070311T020000
+RRULE:FREQ=YEARLY;BYMONTH=3;BYDAY=2SU
 END:DAYLIGHT
 BEGIN:STANDARD
 TZOFFSETFROM:-0400
 TZOFFSETTO:-0500
 TZNAME:EST
-DTSTART:19701025T020000
-RRULE:FREQ=YEARLY;BYMONTH=10;BYDAY=-1SU
+DTSTART:20071104T020000
+RRULE:FREQ=YEARLY;BYMONTH=11;BYDAY=1SU
 END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0000
+TZOFFSETTO:-0400
+TZNAME:EWT
+DTSTART:19420801T000000
+RDATE:19420801T000000
+END:DAYLIGHT
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0400
+TZOFFSETTO:-0400
+TZNAME:EPT
+DTSTART:19450814T190000
+RDATE:19450814T190000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:-0400
+TZOFFSETTO:-0500
+TZNAME:EST
+DTSTART:19450930T020000
+RDATE:19450930T020000
+RDATE:19801026T020000
+RDATE:19811025T020000
+RDATE:19821031T020000
+RDATE:19831030T020000
+RDATE:19841028T020000
+RDATE:19851027T020000
+RDATE:19861026T020000
+RDATE:19871025T020000
+RDATE:19881030T020000
+RDATE:19891029T020000
+RDATE:19901028T020000
+RDATE:19911027T020000
+RDATE:19921025T020000
+RDATE:19931031T020000
+RDATE:19941030T020000
+RDATE:19951029T020000
+RDATE:19961027T020000
+RDATE:19971026T020000
+RDATE:19981025T020000
+RDATE:20011028T020000
+RDATE:20021027T020000
+RDATE:20031026T020000
+RDATE:20041031T020000
+RDATE:20051030T020000
+RDATE:20061029T020000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0500
+TZOFFSETTO:-0300
+TZNAME:EDDT
+DTSTART:19650425T000000
+RDATE:19650425T000000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:-0300
+TZOFFSETTO:-0500
+TZNAME:EST
+DTSTART:19651031T020000
+RDATE:19651031T020000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0500
+TZOFFSETTO:-0400
+TZNAME:EDT
+DTSTART:19800427T020000
+RDATE:19800427T020000
+RDATE:19810426T020000
+RDATE:19820425T020000
+RDATE:19830424T020000
+RDATE:19840429T020000
+RDATE:19850428T020000
+RDATE:19860427T020000
+RDATE:19870405T020000
+RDATE:19880403T020000
+RDATE:19890402T020000
+RDATE:19900401T020000
+RDATE:19910407T020000
+RDATE:19920405T020000
+RDATE:19930404T020000
+RDATE:19940403T020000
+RDATE:19950402T020000
+RDATE:19960407T020000
+RDATE:19970406T020000
+RDATE:19980405T020000
+RDATE:19990404T020000
+RDATE:20010401T020000
+RDATE:20020407T020000
+RDATE:20030406T020000
+RDATE:20040404T020000
+RDATE:20050403T020000
+RDATE:20060402T020000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:-0400
+TZOFFSETTO:-0600
+TZNAME:CST
+DTSTART:19991031T020000
+RDATE:19991031T020000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0600
+TZOFFSETTO:-0500
+TZNAME:CDT
+DTSTART:20000402T020000
+RDATE:20000402T020000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:-0500
+TZOFFSETTO:-0500
+TZNAME:EST
+DTSTART:20001029T020000
+RDATE:20001029T020000
+END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/America/Iqaluit.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/America/Montevideo.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Montevideo.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/America/Montevideo.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +1,151 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/America/Montevideo
+TZID:/kde.org/Olson_20070327_1/America/Montevideo
 X-LIC-LOCATION:America/Montevideo
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0300
+TZOFFSETTO:-0200
+TZNAME:UYST
+DTSTART:20061001T020000
+RRULE:FREQ=YEARLY;BYMONTH=10;BYDAY=1SU
+END:DAYLIGHT
 BEGIN:STANDARD
+TZOFFSETFROM:-0200
+TZOFFSETTO:-0300
+TZNAME:UYT
+DTSTART:20070311T020000
+RRULE:FREQ=YEARLY;BYMONTH=3;BYDAY=2SU
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-034444
+TZOFFSETTO:-034444
+TZNAME:MMT
+DTSTART:18980628T000000
+RDATE:18980628T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-034444
+TZOFFSETTO:-0330
+TZNAME:UYT
+DTSTART:19200501T000000
+RDATE:19200501T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0330
+TZOFFSETTO:-0300
+TZNAME:UYHST
+DTSTART:19231002T000000
+RDATE:19231002T000000
+RDATE:19241001T000000
+RDATE:19251001T000000
+RDATE:19331029T000000
+RDATE:19341028T000000
+RDATE:19351027T000000
+RDATE:19361101T000000
+RDATE:19371031T000000
+RDATE:19381030T000000
+RDATE:19391029T000000
+RDATE:19401027T000000
+RDATE:19410801T000000
+END:DAYLIGHT
+BEGIN:STANDARD
 TZOFFSETFROM:-0300
+TZOFFSETTO:-0330
+TZNAME:UYT
+DTSTART:19240401T000000
+RDATE:19240401T000000
+RDATE:19250401T000000
+RDATE:19260401T000000
+RDATE:19340401T000000
+RDATE:19350331T000000
+RDATE:19360329T000000
+RDATE:19370328T000000
+RDATE:19380327T000000
+RDATE:19390326T000000
+RDATE:19400331T000000
+RDATE:19410330T000000
+RDATE:19420101T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0330
+TZOFFSETTO:-0200
+TZNAME:UYST
+DTSTART:19421214T000000
+RDATE:19421214T000000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:-0200
 TZOFFSETTO:-0300
 TZNAME:UYT
-DTSTART:19700101T000000
+DTSTART:19430314T000000
+RDATE:19430314T000000
+RDATE:19591115T000000
+RDATE:19600306T000000
+RDATE:19650926T000000
+RDATE:19661031T000000
+RDATE:19671031T000000
+RDATE:19720815T000000
+RDATE:19761001T000000
+RDATE:19780401T000000
+RDATE:19800501T000000
+RDATE:19880314T000000
+RDATE:19890312T000000
+RDATE:19900304T000000
+RDATE:19910303T000000
+RDATE:19920301T000000
+RDATE:19930228T000000
+RDATE:20050327T020000
+RDATE:20060312T020000
 END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0300
+TZOFFSETTO:-0200
+TZNAME:UYST
+DTSTART:19590524T000000
+RDATE:19590524T000000
+RDATE:19600117T000000
+RDATE:19650404T000000
+RDATE:19660403T000000
+RDATE:19670402T000000
+RDATE:19720424T000000
+RDATE:19771204T000000
+RDATE:19791001T000000
+RDATE:19871214T000000
+RDATE:19881211T000000
+RDATE:19891029T000000
+RDATE:19901021T000000
+RDATE:19911027T000000
+RDATE:19921018T000000
+RDATE:20040919T000000
+RDATE:20051009T020000
+END:DAYLIGHT
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0300
+TZOFFSETTO:-0230
+TZNAME:UYHST
+DTSTART:19680527T000000
+RDATE:19680527T000000
+RDATE:19690527T000000
+RDATE:19700527T000000
+RDATE:19740310T000000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:-0230
+TZOFFSETTO:-0300
+TZNAME:UYT
+DTSTART:19681202T000000
+RDATE:19681202T000000
+RDATE:19691202T000000
+RDATE:19701202T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0230
+TZOFFSETTO:-0200
+TZNAME:UYST
+DTSTART:19741222T000000
+RDATE:19741222T000000
+END:DAYLIGHT
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/America/Montevideo.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/America/Detroit.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Detroit.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/America/Detroit.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,22 +1,145 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/America/Detroit
+TZID:/kde.org/Olson_20070327_1/America/Detroit
 X-LIC-LOCATION:America/Detroit
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0500
+TZOFFSETTO:-0400
+TZNAME:EDT
+DTSTART:20070311T020000
+RRULE:FREQ=YEARLY;BYMONTH=3;BYDAY=2SU
+END:DAYLIGHT
 BEGIN:STANDARD
 TZOFFSETFROM:-0400
 TZOFFSETTO:-0500
 TZNAME:EST
-DTSTART:19701025T020000
-RRULE:FREQ=YEARLY;BYMONTH=10;BYDAY=-1SU
+DTSTART:20071104T020000
+RRULE:FREQ=YEARLY;BYMONTH=11;BYDAY=1SU
 END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-053211
+TZOFFSETTO:-0600
+TZNAME:CST
+DTSTART:19050101T000000
+RDATE:19050101T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-0600
+TZOFFSETTO:-0500
+TZNAME:EST
+DTSTART:19150515T020000
+RDATE:19150515T020000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-0500
+TZOFFSETTO:-0500
+TZNAME:EST
+DTSTART:19420101T000000
+RDATE:19420101T000000
+RDATE:19460101T000000
+RDATE:19730101T000000
+RDATE:19750101T000000
+END:STANDARD
 BEGIN:DAYLIGHT
 TZOFFSETFROM:-0500
 TZOFFSETTO:-0400
+TZNAME:EWT
+DTSTART:19420209T020000
+RDATE:19420209T020000
+END:DAYLIGHT
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0400
+TZOFFSETTO:-0400
+TZNAME:EPT
+DTSTART:19450814T190000
+RDATE:19450814T190000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:-0400
+TZOFFSETTO:-0500
+TZNAME:EST
+DTSTART:19450930T020000
+RDATE:19450930T020000
+RDATE:19480926T020000
+RDATE:19671029T020000
+RDATE:19731028T020000
+RDATE:19741027T020000
+RDATE:19751026T020000
+RDATE:19761031T020000
+RDATE:19771030T020000
+RDATE:19781029T020000
+RDATE:19791028T020000
+RDATE:19801026T020000
+RDATE:19811025T020000
+RDATE:19821031T020000
+RDATE:19831030T020000
+RDATE:19841028T020000
+RDATE:19851027T020000
+RDATE:19861026T020000
+RDATE:19871025T020000
+RDATE:19881030T020000
+RDATE:19891029T020000
+RDATE:19901028T020000
+RDATE:19911027T020000
+RDATE:19921025T020000
+RDATE:19931031T020000
+RDATE:19941030T020000
+RDATE:19951029T020000
+RDATE:19961027T020000
+RDATE:19971026T020000
+RDATE:19981025T020000
+RDATE:19991031T020000
+RDATE:20001029T020000
+RDATE:20011028T020000
+RDATE:20021027T020000
+RDATE:20031026T020000
+RDATE:20041031T020000
+RDATE:20051030T020000
+RDATE:20061029T020000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0500
+TZOFFSETTO:-0400
 TZNAME:EDT
-DTSTART:19700405T020000
-RRULE:FREQ=YEARLY;BYMONTH=4;BYDAY=1SU
+DTSTART:19480425T020000
+RDATE:19480425T020000
+RDATE:19670614T020000
+RDATE:19730429T020000
+RDATE:19740106T020000
+RDATE:19750427T020000
+RDATE:19760425T020000
+RDATE:19770424T020000
+RDATE:19780430T020000
+RDATE:19790429T020000
+RDATE:19800427T020000
+RDATE:19810426T020000
+RDATE:19820425T020000
+RDATE:19830424T020000
+RDATE:19840429T020000
+RDATE:19850428T020000
+RDATE:19860427T020000
+RDATE:19870405T020000
+RDATE:19880403T020000
+RDATE:19890402T020000
+RDATE:19900401T020000
+RDATE:19910407T020000
+RDATE:19920405T020000
+RDATE:19930404T020000
+RDATE:19940403T020000
+RDATE:19950402T020000
+RDATE:19960407T020000
+RDATE:19970406T020000
+RDATE:19980405T020000
+RDATE:19990404T020000
+RDATE:20000402T020000
+RDATE:20010401T020000
+RDATE:20020407T020000
+RDATE:20030406T020000
+RDATE:20040404T020000
+RDATE:20050403T020000
+RDATE:20060402T020000
 END:DAYLIGHT
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/America/Detroit.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/America/Belize.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Belize.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/America/Belize.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +1,93 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/America/Belize
+TZID:/kde.org/Olson_20070327_1/America/Belize
 X-LIC-LOCATION:America/Belize
 BEGIN:STANDARD
+TZOFFSETFROM:-055248
+TZOFFSETTO:-0600
+TZNAME:CST
+DTSTART:19120401T000000
+RDATE:19120401T000000
+END:STANDARD
+BEGIN:DAYLIGHT
 TZOFFSETFROM:-0600
+TZOFFSETTO:-0530
+TZNAME:CHDT
+DTSTART:19181006T000000
+RDATE:19181006T000000
+RDATE:19191005T000000
+RDATE:19201003T000000
+RDATE:19211002T000000
+RDATE:19221008T000000
+RDATE:19231007T000000
+RDATE:19241005T000000
+RDATE:19251004T000000
+RDATE:19261003T000000
+RDATE:19271002T000000
+RDATE:19281007T000000
+RDATE:19291006T000000
+RDATE:19301005T000000
+RDATE:19311004T000000
+RDATE:19321002T000000
+RDATE:19331008T000000
+RDATE:19341007T000000
+RDATE:19351006T000000
+RDATE:19361004T000000
+RDATE:19371003T000000
+RDATE:19381002T000000
+RDATE:19391008T000000
+RDATE:19401006T000000
+RDATE:19411005T000000
+RDATE:19421004T000000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:-0530
 TZOFFSETTO:-0600
 TZNAME:CST
-DTSTART:19700101T000000
+DTSTART:19190209T000000
+RDATE:19190209T000000
+RDATE:19200215T000000
+RDATE:19210213T000000
+RDATE:19220212T000000
+RDATE:19230211T000000
+RDATE:19240210T000000
+RDATE:19250215T000000
+RDATE:19260214T000000
+RDATE:19270213T000000
+RDATE:19280212T000000
+RDATE:19290210T000000
+RDATE:19300209T000000
+RDATE:19310215T000000
+RDATE:19320214T000000
+RDATE:19330212T000000
+RDATE:19340211T000000
+RDATE:19350210T000000
+RDATE:19360209T000000
+RDATE:19370214T000000
+RDATE:19380213T000000
+RDATE:19390212T000000
+RDATE:19400211T000000
+RDATE:19410209T000000
+RDATE:19420215T000000
+RDATE:19430214T000000
 END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0600
+TZOFFSETTO:-0500
+TZNAME:CDT
+DTSTART:19731205T000000
+RDATE:19731205T000000
+RDATE:19821218T000000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:-0500
+TZOFFSETTO:-0600
+TZNAME:CST
+DTSTART:19740209T000000
+RDATE:19740209T000000
+RDATE:19830212T000000
+END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/America/Belize.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/America/Eirunepe.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Eirunepe.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/America/Eirunepe.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +1,66 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/America/Eirunepe
+TZID:/kde.org/Olson_20070327_1/America/Eirunepe
 X-LIC-LOCATION:America/Eirunepe
 BEGIN:STANDARD
+TZOFFSETFROM:-043928
+TZOFFSETTO:-0500
+TZNAME:ACT
+DTSTART:19140101T000000
+RDATE:19140101T000000
+END:STANDARD
+BEGIN:DAYLIGHT
 TZOFFSETFROM:-0500
+TZOFFSETTO:-0400
+TZNAME:ACST
+DTSTART:19311003T110000
+RDATE:19311003T110000
+RDATE:19321003T000000
+RDATE:19491201T000000
+RDATE:19501201T000000
+RDATE:19511201T000000
+RDATE:19521201T000000
+RDATE:19631209T000000
+RDATE:19650131T000000
+RDATE:19651201T000000
+RDATE:19661101T000000
+RDATE:19671101T000000
+RDATE:19851102T000000
+RDATE:19861025T000000
+RDATE:19871025T000000
+RDATE:19931017T000000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:-0400
 TZOFFSETTO:-0500
 TZNAME:ACT
-DTSTART:19700101T000000
+DTSTART:19320401T000000
+RDATE:19320401T000000
+RDATE:19330401T000000
+RDATE:19500416T010000
+RDATE:19510401T000000
+RDATE:19520401T000000
+RDATE:19530301T000000
+RDATE:19640301T000000
+RDATE:19650331T000000
+RDATE:19660301T000000
+RDATE:19670301T000000
+RDATE:19680301T000000
+RDATE:19860315T000000
+RDATE:19870214T000000
+RDATE:19880207T000000
+RDATE:19940220T000000
 END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-0500
+TZOFFSETTO:-0500
+TZNAME:ACT
+DTSTART:19880912T000000
+RDATE:19880912T000000
+RDATE:19930928T000000
+RDATE:19940922T000000
+END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/America/Eirunepe.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/America/Mexico_City.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Mexico_City.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/America/Mexico_City.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,22 +1,91 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20020614_6/America/Mexico_City
+TZID:/kde.org/Olson_20070327_1/America/Mexico_City
 X-LIC-LOCATION:America/Mexico_City
 BEGIN:DAYLIGHT
 TZOFFSETFROM:-0600
 TZOFFSETTO:-0500
 TZNAME:CDT
-DTSTART:19700405T020000
+DTSTART:20020407T020000
 RRULE:FREQ=YEARLY;BYMONTH=4;BYDAY=1SU
 END:DAYLIGHT
 BEGIN:STANDARD
 TZOFFSETFROM:-0500
 TZOFFSETTO:-0600
 TZNAME:CST
-DTSTART:19701025T020000
+DTSTART:20021027T020000
 RRULE:FREQ=YEARLY;BYMONTH=10;BYDAY=-1SU
 END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-063636
+TZOFFSETTO:-0700
+TZNAME:MST
+DTSTART:19220101T002324
+RDATE:19220101T002324
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-0700
+TZOFFSETTO:-0600
+TZNAME:CST
+DTSTART:19270610T230000
+RDATE:19270610T230000
+RDATE:19310501T230000
+RDATE:19320401T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-0600
+TZOFFSETTO:-0700
+TZNAME:MST
+DTSTART:19301115T000000
+RDATE:19301115T000000
+RDATE:19311001T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0600
+TZOFFSETTO:-0500
+TZNAME:CDT
+DTSTART:19390205T000000
+RDATE:19390205T000000
+RDATE:19401209T000000
+RDATE:19500212T000000
+RDATE:19960407T020000
+RDATE:19970406T020000
+RDATE:19980405T020000
+RDATE:19990404T020000
+RDATE:20000402T020000
+RDATE:20010506T020000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:-0500
+TZOFFSETTO:-0600
+TZNAME:CST
+DTSTART:19390625T000000
+RDATE:19390625T000000
+RDATE:19410401T000000
+RDATE:19440501T000000
+RDATE:19500730T000000
+RDATE:19961027T020000
+RDATE:19971026T020000
+RDATE:19981025T020000
+RDATE:19991031T020000
+RDATE:20001029T020000
+RDATE:20010930T020000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0600
+TZOFFSETTO:-0500
+TZNAME:CWT
+DTSTART:19431216T000000
+RDATE:19431216T000000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:-0600
+TZOFFSETTO:-0600
+TZNAME:CST
+DTSTART:20020220T000000
+RDATE:20020220T000000
+END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/America/Mexico_City.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/America/Barbados.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Barbados.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/America/Barbados.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +1,42 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/America/Barbados
+TZID:/kde.org/Olson_20070327_1/America/Barbados
 X-LIC-LOCATION:America/Barbados
 BEGIN:STANDARD
+TZOFFSETFROM:-035828
+TZOFFSETTO:-035828
+TZNAME:BMT
+DTSTART:19240101T000000
+RDATE:19240101T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-035828
+TZOFFSETTO:-0400
+TZNAME:AST
+DTSTART:19320101T000000
+RDATE:19320101T000000
+END:STANDARD
+BEGIN:DAYLIGHT
 TZOFFSETFROM:-0400
+TZOFFSETTO:-0300
+TZNAME:ADT
+DTSTART:19770612T020000
+RDATE:19770612T020000
+RDATE:19780416T020000
+RDATE:19790415T020000
+RDATE:19800420T020000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:-0300
 TZOFFSETTO:-0400
 TZNAME:AST
-DTSTART:19700101T000000
+DTSTART:19771002T020000
+RDATE:19771002T020000
+RDATE:19781001T020000
+RDATE:19790930T020000
+RDATE:19800925T020000
 END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/America/Barbados.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/America/Danmarkshavn.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Danmarkshavn.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/America/Danmarkshavn.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +1,66 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_2/America/Danmarkshavn
+TZID:/kde.org/Olson_20070327_1/America/Danmarkshavn
 X-LIC-LOCATION:America/Danmarkshavn
 BEGIN:STANDARD
-TZOFFSETFROM:+0000
+TZOFFSETFROM:-011440
+TZOFFSETTO:-0300
+TZNAME:WGT
+DTSTART:19160728T000000
+RDATE:19160728T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0300
+TZOFFSETTO:-0200
+TZNAME:WGST
+DTSTART:19800406T020000
+RDATE:19800406T020000
+RDATE:19810328T220000
+RDATE:19820327T220000
+RDATE:19830326T220000
+RDATE:19840324T220000
+RDATE:19850330T220000
+RDATE:19860329T220000
+RDATE:19870328T220000
+RDATE:19880326T220000
+RDATE:19890325T220000
+RDATE:19900324T220000
+RDATE:19910330T220000
+RDATE:19920328T220000
+RDATE:19930327T220000
+RDATE:19940326T220000
+RDATE:19950325T220000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:-0200
+TZOFFSETTO:-0300
+TZNAME:WGT
+DTSTART:19800927T230000
+RDATE:19800927T230000
+RDATE:19810926T230000
+RDATE:19820925T230000
+RDATE:19830924T230000
+RDATE:19840929T230000
+RDATE:19850928T230000
+RDATE:19860927T230000
+RDATE:19870926T230000
+RDATE:19880924T230000
+RDATE:19890923T230000
+RDATE:19900929T230000
+RDATE:19910928T230000
+RDATE:19920926T230000
+RDATE:19930925T230000
+RDATE:19940924T230000
+RDATE:19950923T230000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-0300
 TZOFFSETTO:+0000
 TZNAME:GMT
-DTSTART:19700101T000000
+DTSTART:19960101T000000
+RDATE:19960101T000000
 END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR
Index: libkcal/libical/zoneinfo/America/Rankin_Inlet.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Rankin_Inlet.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/America/Rankin_Inlet.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,22 +1,121 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/America/Rankin_Inlet
+TZID:/kde.org/Olson_20070327_1/America/Rankin_Inlet
 X-LIC-LOCATION:America/Rankin_Inlet
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0600
+TZOFFSETTO:-0500
+TZNAME:CDT
+DTSTART:20070311T020000
+RRULE:FREQ=YEARLY;BYMONTH=3;BYDAY=2SU
+END:DAYLIGHT
 BEGIN:STANDARD
 TZOFFSETFROM:-0500
 TZOFFSETTO:-0600
 TZNAME:CST
-DTSTART:19701025T020000
-RRULE:FREQ=YEARLY;BYMONTH=10;BYDAY=-1SU
+DTSTART:20071104T020000
+RRULE:FREQ=YEARLY;BYMONTH=11;BYDAY=1SU
 END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0000
+TZOFFSETTO:-0600
+TZNAME:CST
+DTSTART:19570101T000000
+RDATE:19570101T000000
+END:STANDARD
 BEGIN:DAYLIGHT
 TZOFFSETFROM:-0600
+TZOFFSETTO:-0400
+TZNAME:CDDT
+DTSTART:19650425T000000
+RDATE:19650425T000000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:-0400
+TZOFFSETTO:-0600
+TZNAME:CST
+DTSTART:19651031T020000
+RDATE:19651031T020000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0600
 TZOFFSETTO:-0500
 TZNAME:CDT
-DTSTART:19700405T020000
-RRULE:FREQ=YEARLY;BYMONTH=4;BYDAY=1SU
+DTSTART:19800427T020000
+RDATE:19800427T020000
+RDATE:19810426T020000
+RDATE:19820425T020000
+RDATE:19830424T020000
+RDATE:19840429T020000
+RDATE:19850428T020000
+RDATE:19860427T020000
+RDATE:19870405T020000
+RDATE:19880403T020000
+RDATE:19890402T020000
+RDATE:19900401T020000
+RDATE:19910407T020000
+RDATE:19920405T020000
+RDATE:19930404T020000
+RDATE:19940403T020000
+RDATE:19950402T020000
+RDATE:19960407T020000
+RDATE:19970406T020000
+RDATE:19980405T020000
+RDATE:19990404T020000
+RDATE:20000402T020000
+RDATE:20020407T020000
+RDATE:20030406T020000
+RDATE:20040404T020000
+RDATE:20050403T020000
+RDATE:20060402T020000
 END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:-0500
+TZOFFSETTO:-0600
+TZNAME:CST
+DTSTART:19801026T020000
+RDATE:19801026T020000
+RDATE:19811025T020000
+RDATE:19821031T020000
+RDATE:19831030T020000
+RDATE:19841028T020000
+RDATE:19851027T020000
+RDATE:19861026T020000
+RDATE:19871025T020000
+RDATE:19881030T020000
+RDATE:19891029T020000
+RDATE:19901028T020000
+RDATE:19911027T020000
+RDATE:19921025T020000
+RDATE:19931031T020000
+RDATE:19941030T020000
+RDATE:19951029T020000
+RDATE:19961027T020000
+RDATE:19971026T020000
+RDATE:19981025T020000
+RDATE:19991031T020000
+RDATE:20011028T020000
+RDATE:20021027T020000
+RDATE:20031026T020000
+RDATE:20041031T020000
+RDATE:20051030T020000
+RDATE:20061029T020000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-0500
+TZOFFSETTO:-0500
+TZNAME:EST
+DTSTART:20001029T020000
+RDATE:20001029T020000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0500
+TZOFFSETTO:-0500
+TZNAME:CDT
+DTSTART:20010401T020000
+RDATE:20010401T020000
+END:DAYLIGHT
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/America/Rankin_Inlet.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/America/Kentucky/Monticello.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Kentucky/Monticello.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/America/Kentucky/Monticello.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,22 +1,164 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/America/Kentucky/Monticello
+TZID:/kde.org/Olson_20070327_1/America/Kentucky/Monticello
 X-LIC-LOCATION:America/Kentucky/Monticello
 BEGIN:DAYLIGHT
 TZOFFSETFROM:-0500
 TZOFFSETTO:-0400
 TZNAME:EDT
-DTSTART:19700405T020000
-RRULE:FREQ=YEARLY;BYMONTH=4;BYDAY=1SU
+DTSTART:20070311T020000
+RRULE:FREQ=YEARLY;BYMONTH=3;BYDAY=2SU
 END:DAYLIGHT
 BEGIN:STANDARD
 TZOFFSETFROM:-0400
 TZOFFSETTO:-0500
 TZNAME:EST
-DTSTART:19701025T020000
-RRULE:FREQ=YEARLY;BYMONTH=10;BYDAY=-1SU
+DTSTART:20071104T020000
+RRULE:FREQ=YEARLY;BYMONTH=11;BYDAY=1SU
 END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-053924
+TZOFFSETTO:-0600
+TZNAME:CST
+DTSTART:18831118T122036
+RDATE:18831118T122036
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0600
+TZOFFSETTO:-0500
+TZNAME:CDT
+DTSTART:19180331T020000
+RDATE:19180331T020000
+RDATE:19190330T020000
+RDATE:19680428T020000
+RDATE:19690427T020000
+RDATE:19700426T020000
+RDATE:19710425T020000
+RDATE:19720430T020000
+RDATE:19730429T020000
+RDATE:19740106T020000
+RDATE:19750223T020000
+RDATE:19760425T020000
+RDATE:19770424T020000
+RDATE:19780430T020000
+RDATE:19790429T020000
+RDATE:19800427T020000
+RDATE:19810426T020000
+RDATE:19820425T020000
+RDATE:19830424T020000
+RDATE:19840429T020000
+RDATE:19850428T020000
+RDATE:19860427T020000
+RDATE:19870405T020000
+RDATE:19880403T020000
+RDATE:19890402T020000
+RDATE:19900401T020000
+RDATE:19910407T020000
+RDATE:19920405T020000
+RDATE:19930404T020000
+RDATE:19940403T020000
+RDATE:19950402T020000
+RDATE:19960407T020000
+RDATE:19970406T020000
+RDATE:19980405T020000
+RDATE:19990404T020000
+RDATE:20000402T020000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:-0500
+TZOFFSETTO:-0600
+TZNAME:CST
+DTSTART:19181027T020000
+RDATE:19181027T020000
+RDATE:19191026T020000
+RDATE:19450930T020000
+RDATE:19681027T020000
+RDATE:19691026T020000
+RDATE:19701025T020000
+RDATE:19711031T020000
+RDATE:19721029T020000
+RDATE:19731028T020000
+RDATE:19741027T020000
+RDATE:19751026T020000
+RDATE:19761031T020000
+RDATE:19771030T020000
+RDATE:19781029T020000
+RDATE:19791028T020000
+RDATE:19801026T020000
+RDATE:19811025T020000
+RDATE:19821031T020000
+RDATE:19831030T020000
+RDATE:19841028T020000
+RDATE:19851027T020000
+RDATE:19861026T020000
+RDATE:19871025T020000
+RDATE:19881030T020000
+RDATE:19891029T020000
+RDATE:19901028T020000
+RDATE:19911027T020000
+RDATE:19921025T020000
+RDATE:19931031T020000
+RDATE:19941030T020000
+RDATE:19951029T020000
+RDATE:19961027T020000
+RDATE:19971026T020000
+RDATE:19981025T020000
+RDATE:19991031T020000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0600
+TZOFFSETTO:-0500
+TZNAME:CWT
+DTSTART:19420209T020000
+RDATE:19420209T020000
+END:DAYLIGHT
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0500
+TZOFFSETTO:-0500
+TZNAME:CPT
+DTSTART:19450814T180000
+RDATE:19450814T180000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:-0600
+TZOFFSETTO:-0600
+TZNAME:CST
+DTSTART:19460101T000000
+RDATE:19460101T000000
+RDATE:19680101T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-0500
+TZOFFSETTO:-0500
+TZNAME:EST
+DTSTART:20001029T020000
+RDATE:20001029T020000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0500
+TZOFFSETTO:-0400
+TZNAME:EDT
+DTSTART:20010401T020000
+RDATE:20010401T020000
+RDATE:20020407T020000
+RDATE:20030406T020000
+RDATE:20040404T020000
+RDATE:20050403T020000
+RDATE:20060402T020000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:-0400
+TZOFFSETTO:-0500
+TZNAME:EST
+DTSTART:20011028T020000
+RDATE:20011028T020000
+RDATE:20021027T020000
+RDATE:20031026T020000
+RDATE:20041031T020000
+RDATE:20051030T020000
+RDATE:20061029T020000
+END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/America/Kentucky/Monticello.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/America/Kentucky/Louisville.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Kentucky/Louisville.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/America/Kentucky/Louisville.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,22 +1,205 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/America/Kentucky/Louisville
+TZID:/kde.org/Olson_20070327_1/America/Kentucky/Louisville
 X-LIC-LOCATION:America/Kentucky/Louisville
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0500
+TZOFFSETTO:-0400
+TZNAME:EDT
+DTSTART:20070311T020000
+RRULE:FREQ=YEARLY;BYMONTH=3;BYDAY=2SU
+END:DAYLIGHT
 BEGIN:STANDARD
 TZOFFSETFROM:-0400
 TZOFFSETTO:-0500
 TZNAME:EST
-DTSTART:19701025T020000
-RRULE:FREQ=YEARLY;BYMONTH=10;BYDAY=-1SU
+DTSTART:20071104T020000
+RRULE:FREQ=YEARLY;BYMONTH=11;BYDAY=1SU
 END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-054302
+TZOFFSETTO:-0600
+TZNAME:CST
+DTSTART:18831118T121658
+RDATE:18831118T121658
+END:STANDARD
 BEGIN:DAYLIGHT
+TZOFFSETFROM:-0600
+TZOFFSETTO:-0500
+TZNAME:CDT
+DTSTART:19180331T020000
+RDATE:19180331T020000
+RDATE:19190330T020000
+RDATE:19210501T020000
+RDATE:19410427T020000
+RDATE:19460101T000000
+RDATE:19470427T020000
+RDATE:19510429T020000
+RDATE:19520427T020000
+RDATE:19530426T020000
+RDATE:19540425T020000
+RDATE:19550424T020000
+RDATE:19560429T020000
+RDATE:19570428T020000
+RDATE:19580427T020000
+RDATE:19590426T020000
+RDATE:19600424T020000
+RDATE:19610430T020000
+END:DAYLIGHT
+BEGIN:STANDARD
 TZOFFSETFROM:-0500
+TZOFFSETTO:-0600
+TZNAME:CST
+DTSTART:19181027T020000
+RDATE:19181027T020000
+RDATE:19191026T020000
+RDATE:19210901T020000
+RDATE:19410928T020000
+RDATE:19450930T020000
+RDATE:19460602T020000
+RDATE:19500924T020000
+RDATE:19510930T020000
+RDATE:19520928T020000
+RDATE:19530927T020000
+RDATE:19540926T020000
+RDATE:19550925T020000
+RDATE:19561028T020000
+RDATE:19571027T020000
+RDATE:19581026T020000
+RDATE:19591025T020000
+RDATE:19601030T020000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-0600
+TZOFFSETTO:-0600
+TZNAME:CST
+DTSTART:19210101T000000
+RDATE:19210101T000000
+RDATE:19420101T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0600
+TZOFFSETTO:-0500
+TZNAME:CWT
+DTSTART:19420209T020000
+RDATE:19420209T020000
+END:DAYLIGHT
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0500
+TZOFFSETTO:-0500
+TZNAME:CPT
+DTSTART:19450814T180000
+RDATE:19450814T180000
+END:DAYLIGHT
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0500
+TZOFFSETTO:-0500
+TZNAME:CDT
+DTSTART:19460428T020000
+RDATE:19460428T020000
+RDATE:19480425T020000
+RDATE:19490424T020000
+RDATE:19500430T020000
+RDATE:19740106T020000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:-0500
+TZOFFSETTO:-0500
+TZNAME:EST
+DTSTART:19610723T020000
+RDATE:19610723T020000
+RDATE:19680101T000000
+RDATE:19741027T020000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0500
 TZOFFSETTO:-0400
 TZNAME:EDT
-DTSTART:19700405T020000
-RRULE:FREQ=YEARLY;BYMONTH=4;BYDAY=1SU
+DTSTART:19680428T020000
+RDATE:19680428T020000
+RDATE:19690427T020000
+RDATE:19700426T020000
+RDATE:19710425T020000
+RDATE:19720430T020000
+RDATE:19730429T020000
+RDATE:19750223T020000
+RDATE:19760425T020000
+RDATE:19770424T020000
+RDATE:19780430T020000
+RDATE:19790429T020000
+RDATE:19800427T020000
+RDATE:19810426T020000
+RDATE:19820425T020000
+RDATE:19830424T020000
+RDATE:19840429T020000
+RDATE:19850428T020000
+RDATE:19860427T020000
+RDATE:19870405T020000
+RDATE:19880403T020000
+RDATE:19890402T020000
+RDATE:19900401T020000
+RDATE:19910407T020000
+RDATE:19920405T020000
+RDATE:19930404T020000
+RDATE:19940403T020000
+RDATE:19950402T020000
+RDATE:19960407T020000
+RDATE:19970406T020000
+RDATE:19980405T020000
+RDATE:19990404T020000
+RDATE:20000402T020000
+RDATE:20010401T020000
+RDATE:20020407T020000
+RDATE:20030406T020000
+RDATE:20040404T020000
+RDATE:20050403T020000
+RDATE:20060402T020000
 END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:-0400
+TZOFFSETTO:-0500
+TZNAME:EST
+DTSTART:19681027T020000
+RDATE:19681027T020000
+RDATE:19691026T020000
+RDATE:19701025T020000
+RDATE:19711031T020000
+RDATE:19721029T020000
+RDATE:19731028T020000
+RDATE:19751026T020000
+RDATE:19761031T020000
+RDATE:19771030T020000
+RDATE:19781029T020000
+RDATE:19791028T020000
+RDATE:19801026T020000
+RDATE:19811025T020000
+RDATE:19821031T020000
+RDATE:19831030T020000
+RDATE:19841028T020000
+RDATE:19851027T020000
+RDATE:19861026T020000
+RDATE:19871025T020000
+RDATE:19881030T020000
+RDATE:19891029T020000
+RDATE:19901028T020000
+RDATE:19911027T020000
+RDATE:19921025T020000
+RDATE:19931031T020000
+RDATE:19941030T020000
+RDATE:19951029T020000
+RDATE:19961027T020000
+RDATE:19971026T020000
+RDATE:19981025T020000
+RDATE:19991031T020000
+RDATE:20001029T020000
+RDATE:20011028T020000
+RDATE:20021027T020000
+RDATE:20031026T020000
+RDATE:20041031T020000
+RDATE:20051030T020000
+RDATE:20061029T020000
+END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/America/Kentucky/Louisville.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/America/Sao_Paulo.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Sao_Paulo.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/America/Sao_Paulo.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,22 +1,112 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/America/Sao_Paulo
+TZID:/kde.org/Olson_20070327_1/America/Sao_Paulo
 X-LIC-LOCATION:America/Sao_Paulo
 BEGIN:DAYLIGHT
 TZOFFSETFROM:-0300
 TZOFFSETTO:-0200
 TZNAME:BRST
-DTSTART:19701011T000000
-RRULE:FREQ=YEARLY;BYMONTH=10;BYDAY=2SU
+DTSTART:20061105T000000
+RRULE:FREQ=YEARLY;BYMONTH=11;BYDAY=1SU
 END:DAYLIGHT
 BEGIN:STANDARD
 TZOFFSETFROM:-0200
 TZOFFSETTO:-0300
 TZNAME:BRT
-DTSTART:19700215T000000
-RRULE:FREQ=YEARLY;BYMONTH=2;BYDAY=3SU
+DTSTART:20070225T000000
+RRULE:FREQ=YEARLY;BYMONTH=2;BYDAY=-1SU
 END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-030628
+TZOFFSETTO:-0300
+TZNAME:BRT
+DTSTART:19140101T000000
+RDATE:19140101T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0300
+TZOFFSETTO:-0200
+TZNAME:BRST
+DTSTART:19311003T110000
+RDATE:19311003T110000
+RDATE:19321003T000000
+RDATE:19491201T000000
+RDATE:19501201T000000
+RDATE:19511201T000000
+RDATE:19521201T000000
+RDATE:19631023T000000
+RDATE:19650131T000000
+RDATE:19651201T000000
+RDATE:19661101T000000
+RDATE:19671101T000000
+RDATE:19851102T000000
+RDATE:19861025T000000
+RDATE:19871025T000000
+RDATE:19881016T000000
+RDATE:19891015T000000
+RDATE:19901021T000000
+RDATE:19911020T000000
+RDATE:19921025T000000
+RDATE:19931017T000000
+RDATE:19941016T000000
+RDATE:19951015T000000
+RDATE:19961006T000000
+RDATE:19971006T000000
+RDATE:19981011T000000
+RDATE:19991003T000000
+RDATE:20001008T000000
+RDATE:20011014T000000
+RDATE:20021103T000000
+RDATE:20031019T000000
+RDATE:20041102T000000
+RDATE:20051016T000000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:-0200
+TZOFFSETTO:-0300
+TZNAME:BRT
+DTSTART:19320401T000000
+RDATE:19320401T000000
+RDATE:19330401T000000
+RDATE:19500416T010000
+RDATE:19510401T000000
+RDATE:19520401T000000
+RDATE:19530301T000000
+RDATE:19640301T000000
+RDATE:19650331T000000
+RDATE:19660301T000000
+RDATE:19670301T000000
+RDATE:19680301T000000
+RDATE:19860315T000000
+RDATE:19870214T000000
+RDATE:19880207T000000
+RDATE:19890129T000000
+RDATE:19900211T000000
+RDATE:19910217T000000
+RDATE:19920209T000000
+RDATE:19930131T000000
+RDATE:19940220T000000
+RDATE:19950219T000000
+RDATE:19960211T000000
+RDATE:19970216T000000
+RDATE:19980301T000000
+RDATE:19990221T000000
+RDATE:20000227T000000
+RDATE:20010218T000000
+RDATE:20020217T000000
+RDATE:20030216T000000
+RDATE:20040215T000000
+RDATE:20050220T000000
+RDATE:20060219T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0200
+TZOFFSETTO:-0200
+TZNAME:BRST
+DTSTART:19640101T000000
+RDATE:19640101T000000
+END:DAYLIGHT
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/America/Sao_Paulo.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/America/Manaus.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Manaus.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/America/Manaus.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +1,66 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/America/Manaus
+TZID:/kde.org/Olson_20070327_1/America/Manaus
 X-LIC-LOCATION:America/Manaus
 BEGIN:STANDARD
+TZOFFSETFROM:-040004
+TZOFFSETTO:-0400
+TZNAME:AMT
+DTSTART:19140101T000000
+RDATE:19140101T000000
+END:STANDARD
+BEGIN:DAYLIGHT
 TZOFFSETFROM:-0400
+TZOFFSETTO:-0300
+TZNAME:AMST
+DTSTART:19311003T110000
+RDATE:19311003T110000
+RDATE:19321003T000000
+RDATE:19491201T000000
+RDATE:19501201T000000
+RDATE:19511201T000000
+RDATE:19521201T000000
+RDATE:19631209T000000
+RDATE:19650131T000000
+RDATE:19651201T000000
+RDATE:19661101T000000
+RDATE:19671101T000000
+RDATE:19851102T000000
+RDATE:19861025T000000
+RDATE:19871025T000000
+RDATE:19931017T000000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:-0300
 TZOFFSETTO:-0400
 TZNAME:AMT
-DTSTART:19700101T000000
+DTSTART:19320401T000000
+RDATE:19320401T000000
+RDATE:19330401T000000
+RDATE:19500416T010000
+RDATE:19510401T000000
+RDATE:19520401T000000
+RDATE:19530301T000000
+RDATE:19640301T000000
+RDATE:19650331T000000
+RDATE:19660301T000000
+RDATE:19670301T000000
+RDATE:19680301T000000
+RDATE:19860315T000000
+RDATE:19870214T000000
+RDATE:19880207T000000
+RDATE:19940220T000000
 END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-0400
+TZOFFSETTO:-0400
+TZNAME:AMT
+DTSTART:19880912T000000
+RDATE:19880912T000000
+RDATE:19930928T000000
+RDATE:19940922T000000
+END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/America/Manaus.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/America/Guyana.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Guyana.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/America/Guyana.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +1,36 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/America/Guyana
+TZID:/kde.org/Olson_20070327_1/America/Guyana
 X-LIC-LOCATION:America/Guyana
 BEGIN:STANDARD
-TZOFFSETFROM:-0400
+TZOFFSETFROM:-035240
+TZOFFSETTO:-0345
+TZNAME:GBGT
+DTSTART:19150301T000000
+RDATE:19150301T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-0345
+TZOFFSETTO:-0345
+TZNAME:GYT
+DTSTART:19660526T000000
+RDATE:19660526T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-0345
+TZOFFSETTO:-0300
+TZNAME:GYT
+DTSTART:19750731T000000
+RDATE:19750731T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-0300
 TZOFFSETTO:-0400
 TZNAME:GYT
-DTSTART:19700101T000000
+DTSTART:19910101T000000
+RDATE:19910101T000000
 END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/America/Guyana.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/America/Tegucigalpa.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Tegucigalpa.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/America/Tegucigalpa.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +1,39 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/America/Tegucigalpa
+TZID:/kde.org/Olson_20070327_1/America/Tegucigalpa
 X-LIC-LOCATION:America/Tegucigalpa
 BEGIN:STANDARD
+TZOFFSETFROM:-054852
+TZOFFSETTO:-0600
+TZNAME:CST
+DTSTART:19210401T000000
+RDATE:19210401T000000
+END:STANDARD
+BEGIN:DAYLIGHT
 TZOFFSETFROM:-0600
+TZOFFSETTO:-0500
+TZNAME:CDT
+DTSTART:19870503T000000
+RDATE:19870503T000000
+RDATE:19880501T000000
+RDATE:20060507T000000
+RDATE:20070506T000000
+RDATE:20080504T000000
+RDATE:20090503T000000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:-0500
 TZOFFSETTO:-0600
 TZNAME:CST
-DTSTART:19700101T000000
+DTSTART:19870927T000000
+RDATE:19870927T000000
+RDATE:19880925T000000
+RDATE:20060807T000000
+RDATE:20070806T000000
+RDATE:20080804T000000
+RDATE:20090803T000000
 END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/America/Tegucigalpa.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/America/Aruba.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Aruba.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/America/Aruba.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +1,22 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/America/Aruba
+TZID:/kde.org/Olson_20070327_1/America/Aruba
 X-LIC-LOCATION:America/Aruba
 BEGIN:STANDARD
-TZOFFSETFROM:-0400
+TZOFFSETFROM:-044024
+TZOFFSETTO:-0430
+TZNAME:ANT
+DTSTART:19120212T000000
+RDATE:19120212T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-0430
 TZOFFSETTO:-0400
 TZNAME:AST
-DTSTART:19700101T000000
+DTSTART:19650101T000000
+RDATE:19650101T000000
 END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/America/Aruba.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/America/Nassau.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Nassau.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/America/Nassau.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,22 +1,134 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/America/Nassau
+TZID:/kde.org/Olson_20070327_1/America/Nassau
 X-LIC-LOCATION:America/Nassau
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0500
+TZOFFSETTO:-0400
+TZNAME:EDT
+DTSTART:20070311T020000
+RRULE:FREQ=YEARLY;BYMONTH=3;BYDAY=2SU
+END:DAYLIGHT
 BEGIN:STANDARD
 TZOFFSETFROM:-0400
 TZOFFSETTO:-0500
 TZNAME:EST
-DTSTART:19701025T020000
-RRULE:FREQ=YEARLY;BYMONTH=10;BYDAY=-1SU
+DTSTART:20071104T020000
+RRULE:FREQ=YEARLY;BYMONTH=11;BYDAY=1SU
 END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-050924
+TZOFFSETTO:-0500
+TZNAME:EST
+DTSTART:19120302T000000
+RDATE:19120302T000000
+END:STANDARD
 BEGIN:DAYLIGHT
 TZOFFSETFROM:-0500
 TZOFFSETTO:-0400
 TZNAME:EDT
-DTSTART:19700405T020000
-RRULE:FREQ=YEARLY;BYMONTH=4;BYDAY=1SU
+DTSTART:19640426T020000
+RDATE:19640426T020000
+RDATE:19650425T020000
+RDATE:19660424T020000
+RDATE:19670430T020000
+RDATE:19680428T020000
+RDATE:19690427T020000
+RDATE:19700426T020000
+RDATE:19710425T020000
+RDATE:19720430T020000
+RDATE:19730429T020000
+RDATE:19740428T020000
+RDATE:19750427T020000
+RDATE:19760425T020000
+RDATE:19770424T020000
+RDATE:19780430T020000
+RDATE:19790429T020000
+RDATE:19800427T020000
+RDATE:19810426T020000
+RDATE:19820425T020000
+RDATE:19830424T020000
+RDATE:19840429T020000
+RDATE:19850428T020000
+RDATE:19860427T020000
+RDATE:19870405T020000
+RDATE:19880403T020000
+RDATE:19890402T020000
+RDATE:19900401T020000
+RDATE:19910407T020000
+RDATE:19920405T020000
+RDATE:19930404T020000
+RDATE:19940403T020000
+RDATE:19950402T020000
+RDATE:19960407T020000
+RDATE:19970406T020000
+RDATE:19980405T020000
+RDATE:19990404T020000
+RDATE:20000402T020000
+RDATE:20010401T020000
+RDATE:20020407T020000
+RDATE:20030406T020000
+RDATE:20040404T020000
+RDATE:20050403T020000
+RDATE:20060402T020000
 END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:-0400
+TZOFFSETTO:-0500
+TZNAME:EST
+DTSTART:19641025T020000
+RDATE:19641025T020000
+RDATE:19651031T020000
+RDATE:19661030T020000
+RDATE:19671029T020000
+RDATE:19681027T020000
+RDATE:19691026T020000
+RDATE:19701025T020000
+RDATE:19711031T020000
+RDATE:19721029T020000
+RDATE:19731028T020000
+RDATE:19741027T020000
+RDATE:19751026T020000
+RDATE:19761031T020000
+RDATE:19771030T020000
+RDATE:19781029T020000
+RDATE:19791028T020000
+RDATE:19801026T020000
+RDATE:19811025T020000
+RDATE:19821031T020000
+RDATE:19831030T020000
+RDATE:19841028T020000
+RDATE:19851027T020000
+RDATE:19861026T020000
+RDATE:19871025T020000
+RDATE:19881030T020000
+RDATE:19891029T020000
+RDATE:19901028T020000
+RDATE:19911027T020000
+RDATE:19921025T020000
+RDATE:19931031T020000
+RDATE:19941030T020000
+RDATE:19951029T020000
+RDATE:19961027T020000
+RDATE:19971026T020000
+RDATE:19981025T020000
+RDATE:19991031T020000
+RDATE:20001029T020000
+RDATE:20011028T020000
+RDATE:20021027T020000
+RDATE:20031026T020000
+RDATE:20041031T020000
+RDATE:20051030T020000
+RDATE:20061029T020000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-0500
+TZOFFSETTO:-0500
+TZNAME:EST
+DTSTART:19760101T000000
+RDATE:19760101T000000
+END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/America/Nassau.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/America/El_Salvador.ics
===================================================================
--- libkcal/libical/zoneinfo/America/El_Salvador.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/America/El_Salvador.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +1,31 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/America/El_Salvador
+TZID:/kde.org/Olson_20070327_1/America/El_Salvador
 X-LIC-LOCATION:America/El_Salvador
 BEGIN:STANDARD
+TZOFFSETFROM:-055648
+TZOFFSETTO:-0600
+TZNAME:CST
+DTSTART:19210101T000000
+RDATE:19210101T000000
+END:STANDARD
+BEGIN:DAYLIGHT
 TZOFFSETFROM:-0600
+TZOFFSETTO:-0500
+TZNAME:CDT
+DTSTART:19870503T000000
+RDATE:19870503T000000
+RDATE:19880501T000000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:-0500
 TZOFFSETTO:-0600
 TZNAME:CST
-DTSTART:19700101T000000
+DTSTART:19870927T000000
+RDATE:19870927T000000
+RDATE:19880925T000000
 END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/America/El_Salvador.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/America/Blanc-Sablon.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Blanc-Sablon.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 0)
+++ libkcal/libical/zoneinfo/America/Blanc-Sablon.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -0,0 +1,51 @@
+BEGIN:VCALENDAR
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
+VERSION:2.0
+BEGIN:VTIMEZONE
+TZID:/kde.org/Olson_20070327_1/America/Blanc-Sablon
+X-LIC-LOCATION:America/Blanc-Sablon
+BEGIN:STANDARD
+TZOFFSETFROM:-034828
+TZOFFSETTO:-0400
+TZNAME:AST
+DTSTART:18840101T000000
+RDATE:18840101T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0400
+TZOFFSETTO:-0300
+TZNAME:ADT
+DTSTART:19180414T020000
+RDATE:19180414T020000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:-0300
+TZOFFSETTO:-0400
+TZNAME:AST
+DTSTART:19181031T020000
+RDATE:19181031T020000
+RDATE:19450930T020000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0400
+TZOFFSETTO:-0300
+TZNAME:AWT
+DTSTART:19420209T020000
+RDATE:19420209T020000
+END:DAYLIGHT
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0300
+TZOFFSETTO:-0300
+TZNAME:APT
+DTSTART:19450814T200000
+RDATE:19450814T200000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:-0400
+TZOFFSETTO:-0400
+TZNAME:AST
+DTSTART:19700101T000000
+RDATE:19700101T000000
+END:STANDARD
+END:VTIMEZONE
+END:VCALENDAR
Index: libkcal/libical/zoneinfo/America/Dawson.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Dawson.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/America/Dawson.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,22 +1,153 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/America/Dawson
+TZID:/kde.org/Olson_20070327_1/America/Dawson
 X-LIC-LOCATION:America/Dawson
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0800
+TZOFFSETTO:-0700
+TZNAME:PDT
+DTSTART:20070311T020000
+RRULE:FREQ=YEARLY;BYMONTH=3;BYDAY=2SU
+END:DAYLIGHT
 BEGIN:STANDARD
 TZOFFSETFROM:-0700
 TZOFFSETTO:-0800
 TZNAME:PST
-DTSTART:19701025T020000
-RRULE:FREQ=YEARLY;BYMONTH=10;BYDAY=-1SU
+DTSTART:20071104T020000
+RRULE:FREQ=YEARLY;BYMONTH=11;BYDAY=1SU
 END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-091740
+TZOFFSETTO:-0900
+TZNAME:YST
+DTSTART:19000820T000000
+RDATE:19000820T000000
+END:STANDARD
 BEGIN:DAYLIGHT
+TZOFFSETFROM:-0900
+TZOFFSETTO:-0800
+TZNAME:YDT
+DTSTART:19180414T020000
+RDATE:19180414T020000
+RDATE:19190525T020000
+END:DAYLIGHT
+BEGIN:STANDARD
 TZOFFSETFROM:-0800
+TZOFFSETTO:-0900
+TZNAME:YST
+DTSTART:19181027T020000
+RDATE:19181027T020000
+RDATE:19191101T000000
+RDATE:19450930T020000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0900
+TZOFFSETTO:-0800
+TZNAME:YWT
+DTSTART:19420209T020000
+RDATE:19420209T020000
+END:DAYLIGHT
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0800
+TZOFFSETTO:-0800
+TZNAME:YPT
+DTSTART:19450814T150000
+RDATE:19450814T150000
+END:DAYLIGHT
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0900
 TZOFFSETTO:-0700
+TZNAME:YDDT
+DTSTART:19650425T000000
+RDATE:19650425T000000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:-0700
+TZOFFSETTO:-0900
+TZNAME:YST
+DTSTART:19651031T020000
+RDATE:19651031T020000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-0900
+TZOFFSETTO:-0800
+DTSTART:19731028T000000
+RDATE:19731028T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-0800
+TZOFFSETTO:-0800
+TZNAME:PST
+DTSTART:19800101T000000
+RDATE:19800101T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0800
+TZOFFSETTO:-0700
 TZNAME:PDT
-DTSTART:19700405T020000
-RRULE:FREQ=YEARLY;BYMONTH=4;BYDAY=1SU
+DTSTART:19800427T020000
+RDATE:19800427T020000
+RDATE:19810426T020000
+RDATE:19820425T020000
+RDATE:19830424T020000
+RDATE:19840429T020000
+RDATE:19850428T020000
+RDATE:19860427T020000
+RDATE:19870405T020000
+RDATE:19880403T020000
+RDATE:19890402T020000
+RDATE:19900401T020000
+RDATE:19910407T020000
+RDATE:19920405T020000
+RDATE:19930404T020000
+RDATE:19940403T020000
+RDATE:19950402T020000
+RDATE:19960407T020000
+RDATE:19970406T020000
+RDATE:19980405T020000
+RDATE:19990404T020000
+RDATE:20000402T020000
+RDATE:20010401T020000
+RDATE:20020407T020000
+RDATE:20030406T020000
+RDATE:20040404T020000
+RDATE:20050403T020000
+RDATE:20060402T020000
 END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:-0700
+TZOFFSETTO:-0800
+TZNAME:PST
+DTSTART:19801026T020000
+RDATE:19801026T020000
+RDATE:19811025T020000
+RDATE:19821031T020000
+RDATE:19831030T020000
+RDATE:19841028T020000
+RDATE:19851027T020000
+RDATE:19861026T020000
+RDATE:19871025T020000
+RDATE:19881030T020000
+RDATE:19891029T020000
+RDATE:19901028T020000
+RDATE:19911027T020000
+RDATE:19921025T020000
+RDATE:19931031T020000
+RDATE:19941030T020000
+RDATE:19951029T020000
+RDATE:19961027T020000
+RDATE:19971026T020000
+RDATE:19981025T020000
+RDATE:19991031T020000
+RDATE:20001029T020000
+RDATE:20011028T020000
+RDATE:20021027T020000
+RDATE:20031026T020000
+RDATE:20041031T020000
+RDATE:20051030T020000
+RDATE:20061029T020000
+END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/America/Dawson.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/America/Chicago.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Chicago.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/America/Chicago.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,22 +1,242 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/America/Chicago
+TZID:/kde.org/Olson_20070327_1/America/Chicago
 X-LIC-LOCATION:America/Chicago
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0600
+TZOFFSETTO:-0500
+TZNAME:CDT
+DTSTART:20070311T020000
+RRULE:FREQ=YEARLY;BYMONTH=3;BYDAY=2SU
+END:DAYLIGHT
 BEGIN:STANDARD
 TZOFFSETFROM:-0500
 TZOFFSETTO:-0600
 TZNAME:CST
-DTSTART:19701025T020000
-RRULE:FREQ=YEARLY;BYMONTH=10;BYDAY=-1SU
+DTSTART:20071104T020000
+RRULE:FREQ=YEARLY;BYMONTH=11;BYDAY=1SU
 END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-055036
+TZOFFSETTO:-0600
+TZNAME:CST
+DTSTART:18831118T120924
+RDATE:18831118T120924
+END:STANDARD
 BEGIN:DAYLIGHT
 TZOFFSETFROM:-0600
 TZOFFSETTO:-0500
 TZNAME:CDT
-DTSTART:19700405T020000
-RRULE:FREQ=YEARLY;BYMONTH=4;BYDAY=1SU
+DTSTART:19180331T020000
+RDATE:19180331T020000
+RDATE:19190330T020000
+RDATE:19200613T020000
+RDATE:19210327T020000
+RDATE:19220430T020000
+RDATE:19230429T020000
+RDATE:19240427T020000
+RDATE:19250426T020000
+RDATE:19260425T020000
+RDATE:19270424T020000
+RDATE:19280429T020000
+RDATE:19290428T020000
+RDATE:19300427T020000
+RDATE:19310426T020000
+RDATE:19320424T020000
+RDATE:19330430T020000
+RDATE:19340429T020000
+RDATE:19350428T020000
+RDATE:19370425T020000
+RDATE:19380424T020000
+RDATE:19390430T020000
+RDATE:19400428T020000
+RDATE:19410427T020000
+RDATE:19460428T020000
+RDATE:19470427T020000
+RDATE:19480425T020000
+RDATE:19490424T020000
+RDATE:19500430T020000
+RDATE:19510429T020000
+RDATE:19520427T020000
+RDATE:19530426T020000
+RDATE:19540425T020000
+RDATE:19550424T020000
+RDATE:19560429T020000
+RDATE:19570428T020000
+RDATE:19580427T020000
+RDATE:19590426T020000
+RDATE:19600424T020000
+RDATE:19610430T020000
+RDATE:19620429T020000
+RDATE:19630428T020000
+RDATE:19640426T020000
+RDATE:19650425T020000
+RDATE:19660424T020000
+RDATE:19670430T020000
+RDATE:19680428T020000
+RDATE:19690427T020000
+RDATE:19700426T020000
+RDATE:19710425T020000
+RDATE:19720430T020000
+RDATE:19730429T020000
+RDATE:19740106T020000
+RDATE:19750223T020000
+RDATE:19760425T020000
+RDATE:19770424T020000
+RDATE:19780430T020000
+RDATE:19790429T020000
+RDATE:19800427T020000
+RDATE:19810426T020000
+RDATE:19820425T020000
+RDATE:19830424T020000
+RDATE:19840429T020000
+RDATE:19850428T020000
+RDATE:19860427T020000
+RDATE:19870405T020000
+RDATE:19880403T020000
+RDATE:19890402T020000
+RDATE:19900401T020000
+RDATE:19910407T020000
+RDATE:19920405T020000
+RDATE:19930404T020000
+RDATE:19940403T020000
+RDATE:19950402T020000
+RDATE:19960407T020000
+RDATE:19970406T020000
+RDATE:19980405T020000
+RDATE:19990404T020000
+RDATE:20000402T020000
+RDATE:20010401T020000
+RDATE:20020407T020000
+RDATE:20030406T020000
+RDATE:20040404T020000
+RDATE:20050403T020000
+RDATE:20060402T020000
 END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:-0500
+TZOFFSETTO:-0600
+TZNAME:CST
+DTSTART:19181027T020000
+RDATE:19181027T020000
+RDATE:19191026T020000
+RDATE:19201031T020000
+RDATE:19211030T020000
+RDATE:19220924T020000
+RDATE:19230930T020000
+RDATE:19240928T020000
+RDATE:19250927T020000
+RDATE:19260926T020000
+RDATE:19270925T020000
+RDATE:19280930T020000
+RDATE:19290929T020000
+RDATE:19300928T020000
+RDATE:19310927T020000
+RDATE:19320925T020000
+RDATE:19330924T020000
+RDATE:19340930T020000
+RDATE:19350929T020000
+RDATE:19361115T020000
+RDATE:19370926T020000
+RDATE:19380925T020000
+RDATE:19390924T020000
+RDATE:19400929T020000
+RDATE:19410928T020000
+RDATE:19450930T020000
+RDATE:19460929T020000
+RDATE:19470928T020000
+RDATE:19480926T020000
+RDATE:19490925T020000
+RDATE:19500924T020000
+RDATE:19510930T020000
+RDATE:19520928T020000
+RDATE:19530927T020000
+RDATE:19540926T020000
+RDATE:19551030T020000
+RDATE:19561028T020000
+RDATE:19571027T020000
+RDATE:19581026T020000
+RDATE:19591025T020000
+RDATE:19601030T020000
+RDATE:19611029T020000
+RDATE:19621028T020000
+RDATE:19631027T020000
+RDATE:19641025T020000
+RDATE:19651031T020000
+RDATE:19661030T020000
+RDATE:19671029T020000
+RDATE:19681027T020000
+RDATE:19691026T020000
+RDATE:19701025T020000
+RDATE:19711031T020000
+RDATE:19721029T020000
+RDATE:19731028T020000
+RDATE:19741027T020000
+RDATE:19751026T020000
+RDATE:19761031T020000
+RDATE:19771030T020000
+RDATE:19781029T020000
+RDATE:19791028T020000
+RDATE:19801026T020000
+RDATE:19811025T020000
+RDATE:19821031T020000
+RDATE:19831030T020000
+RDATE:19841028T020000
+RDATE:19851027T020000
+RDATE:19861026T020000
+RDATE:19871025T020000
+RDATE:19881030T020000
+RDATE:19891029T020000
+RDATE:19901028T020000
+RDATE:19911027T020000
+RDATE:19921025T020000
+RDATE:19931031T020000
+RDATE:19941030T020000
+RDATE:19951029T020000
+RDATE:19961027T020000
+RDATE:19971026T020000
+RDATE:19981025T020000
+RDATE:19991031T020000
+RDATE:20001029T020000
+RDATE:20011028T020000
+RDATE:20021027T020000
+RDATE:20031026T020000
+RDATE:20041031T020000
+RDATE:20051030T020000
+RDATE:20061029T020000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-0600
+TZOFFSETTO:-0600
+TZNAME:CST
+DTSTART:19200101T000000
+RDATE:19200101T000000
+RDATE:19420101T000000
+RDATE:19460101T000000
+RDATE:19670101T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-0600
+TZOFFSETTO:-0500
+TZNAME:EST
+DTSTART:19360301T020000
+RDATE:19360301T020000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0600
+TZOFFSETTO:-0500
+TZNAME:CWT
+DTSTART:19420209T020000
+RDATE:19420209T020000
+END:DAYLIGHT
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0500
+TZOFFSETTO:-0500
+TZNAME:CPT
+DTSTART:19450814T180000
+RDATE:19450814T180000
+END:DAYLIGHT
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/America/Chicago.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/America/Recife.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Recife.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/America/Recife.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,22 +1,75 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/America/Recife
+TZID:/kde.org/Olson_20070327_1/America/Recife
 X-LIC-LOCATION:America/Recife
+BEGIN:STANDARD
+TZOFFSETFROM:-021936
+TZOFFSETTO:-0300
+TZNAME:BRT
+DTSTART:19140101T000000
+RDATE:19140101T000000
+END:STANDARD
 BEGIN:DAYLIGHT
 TZOFFSETFROM:-0300
 TZOFFSETTO:-0200
 TZNAME:BRST
-DTSTART:19701011T000000
-RRULE:FREQ=YEARLY;BYMONTH=10;BYDAY=2SU
+DTSTART:19311003T110000
+RDATE:19311003T110000
+RDATE:19321003T000000
+RDATE:19491201T000000
+RDATE:19501201T000000
+RDATE:19511201T000000
+RDATE:19521201T000000
+RDATE:19631209T000000
+RDATE:19650131T000000
+RDATE:19651201T000000
+RDATE:19661101T000000
+RDATE:19671101T000000
+RDATE:19851102T000000
+RDATE:19861025T000000
+RDATE:19871025T000000
+RDATE:19881016T000000
+RDATE:19891015T000000
+RDATE:19991003T000000
+RDATE:20001008T000000
+RDATE:20011014T000000
 END:DAYLIGHT
 BEGIN:STANDARD
 TZOFFSETFROM:-0200
 TZOFFSETTO:-0300
 TZNAME:BRT
-DTSTART:19700215T000000
-RRULE:FREQ=YEARLY;BYMONTH=2;BYDAY=3SU
+DTSTART:19320401T000000
+RDATE:19320401T000000
+RDATE:19330401T000000
+RDATE:19500416T010000
+RDATE:19510401T000000
+RDATE:19520401T000000
+RDATE:19530301T000000
+RDATE:19640301T000000
+RDATE:19650331T000000
+RDATE:19660301T000000
+RDATE:19670301T000000
+RDATE:19680301T000000
+RDATE:19860315T000000
+RDATE:19870214T000000
+RDATE:19880207T000000
+RDATE:19890129T000000
+RDATE:19900211T000000
+RDATE:20000227T000000
+RDATE:20001015T000000
+RDATE:20020217T000000
 END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-0300
+TZOFFSETTO:-0300
+TZNAME:BRT
+DTSTART:19900917T000000
+RDATE:19900917T000000
+RDATE:19990930T000000
+RDATE:20010913T000000
+RDATE:20021001T000000
+END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/America/Recife.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/America/Nome.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Nome.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/America/Nome.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,22 +1,186 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/America/Nome
+TZID:/kde.org/Olson_20070327_1/America/Nome
 X-LIC-LOCATION:America/Nome
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0900
+TZOFFSETTO:-0800
+TZNAME:AKDT
+DTSTART:20070311T020000
+RRULE:FREQ=YEARLY;BYMONTH=3;BYDAY=2SU
+END:DAYLIGHT
 BEGIN:STANDARD
 TZOFFSETFROM:-0800
 TZOFFSETTO:-0900
 TZNAME:AKST
-DTSTART:19701025T020000
-RRULE:FREQ=YEARLY;BYMONTH=10;BYDAY=-1SU
+DTSTART:20071104T020000
+RRULE:FREQ=YEARLY;BYMONTH=11;BYDAY=1SU
 END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+125821
+TZOFFSETTO:-110138
+TZNAME:LMT
+DTSTART:18671018T000000
+RDATE:18671018T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-110138
+TZOFFSETTO:-1100
+TZNAME:NST
+DTSTART:19000820T120000
+RDATE:19000820T120000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-1100
+TZOFFSETTO:-1100
+TZNAME:NST
+DTSTART:19420101T000000
+RDATE:19420101T000000
+RDATE:19460101T000000
+END:STANDARD
 BEGIN:DAYLIGHT
+TZOFFSETFROM:-1100
+TZOFFSETTO:-1000
+TZNAME:NWT
+DTSTART:19420209T020000
+RDATE:19420209T020000
+END:DAYLIGHT
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-1000
+TZOFFSETTO:-1000
+TZNAME:NPT
+DTSTART:19450814T130000
+RDATE:19450814T130000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:-1000
+TZOFFSETTO:-1100
+TZNAME:NST
+DTSTART:19450930T020000
+RDATE:19450930T020000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-1100
+TZOFFSETTO:-1100
+TZNAME:BST
+DTSTART:19670401T000000
+RDATE:19670401T000000
+RDATE:19690101T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-1100
+TZOFFSETTO:-1000
+TZNAME:BDT
+DTSTART:19690427T020000
+RDATE:19690427T020000
+RDATE:19700426T020000
+RDATE:19710425T020000
+RDATE:19720430T020000
+RDATE:19730429T020000
+RDATE:19740106T020000
+RDATE:19750223T020000
+RDATE:19760425T020000
+RDATE:19770424T020000
+RDATE:19780430T020000
+RDATE:19790429T020000
+RDATE:19800427T020000
+RDATE:19810426T020000
+RDATE:19820425T020000
+RDATE:19830424T020000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:-1000
+TZOFFSETTO:-1100
+TZNAME:BST
+DTSTART:19691026T020000
+RDATE:19691026T020000
+RDATE:19701025T020000
+RDATE:19711031T020000
+RDATE:19721029T020000
+RDATE:19731028T020000
+RDATE:19741027T020000
+RDATE:19751026T020000
+RDATE:19761031T020000
+RDATE:19771030T020000
+RDATE:19781029T020000
+RDATE:19791028T020000
+RDATE:19801026T020000
+RDATE:19811025T020000
+RDATE:19821031T020000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-1000
+TZOFFSETTO:-0900
+TZNAME:YST
+DTSTART:19831030T020000
+RDATE:19831030T020000
+END:STANDARD
+BEGIN:STANDARD
 TZOFFSETFROM:-0900
+TZOFFSETTO:-0900
+TZNAME:AKST
+DTSTART:19831130T000000
+RDATE:19831130T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0900
 TZOFFSETTO:-0800
 TZNAME:AKDT
-DTSTART:19700405T020000
-RRULE:FREQ=YEARLY;BYMONTH=4;BYDAY=1SU
+DTSTART:19840429T020000
+RDATE:19840429T020000
+RDATE:19850428T020000
+RDATE:19860427T020000
+RDATE:19870405T020000
+RDATE:19880403T020000
+RDATE:19890402T020000
+RDATE:19900401T020000
+RDATE:19910407T020000
+RDATE:19920405T020000
+RDATE:19930404T020000
+RDATE:19940403T020000
+RDATE:19950402T020000
+RDATE:19960407T020000
+RDATE:19970406T020000
+RDATE:19980405T020000
+RDATE:19990404T020000
+RDATE:20000402T020000
+RDATE:20010401T020000
+RDATE:20020407T020000
+RDATE:20030406T020000
+RDATE:20040404T020000
+RDATE:20050403T020000
+RDATE:20060402T020000
 END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:-0800
+TZOFFSETTO:-0900
+TZNAME:AKST
+DTSTART:19841028T020000
+RDATE:19841028T020000
+RDATE:19851027T020000
+RDATE:19861026T020000
+RDATE:19871025T020000
+RDATE:19881030T020000
+RDATE:19891029T020000
+RDATE:19901028T020000
+RDATE:19911027T020000
+RDATE:19921025T020000
+RDATE:19931031T020000
+RDATE:19941030T020000
+RDATE:19951029T020000
+RDATE:19961027T020000
+RDATE:19971026T020000
+RDATE:19981025T020000
+RDATE:19991031T020000
+RDATE:20001029T020000
+RDATE:20011028T020000
+RDATE:20021027T020000
+RDATE:20031026T020000
+RDATE:20041031T020000
+RDATE:20051030T020000
+RDATE:20061029T020000
+END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/America/Nome.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/America/Swift_Current.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Swift_Current.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/America/Swift_Current.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +1,74 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/America/Swift_Current
+TZID:/kde.org/Olson_20070327_1/America/Swift_Current
 X-LIC-LOCATION:America/Swift_Current
 BEGIN:STANDARD
+TZOFFSETFROM:-071120
+TZOFFSETTO:-0700
+TZNAME:MST
+DTSTART:19050901T000000
+RDATE:19050901T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0700
+TZOFFSETTO:-0600
+TZNAME:MDT
+DTSTART:19180414T020000
+RDATE:19180414T020000
+RDATE:19460428T020000
+RDATE:19470427T020000
+RDATE:19480425T020000
+RDATE:19490424T020000
+RDATE:19570428T020000
+RDATE:19590426T020000
+RDATE:19600424T020000
+RDATE:19610430T020000
+END:DAYLIGHT
+BEGIN:STANDARD
 TZOFFSETFROM:-0600
+TZOFFSETTO:-0700
+TZNAME:MST
+DTSTART:19181031T020000
+RDATE:19181031T020000
+RDATE:19450930T020000
+RDATE:19461013T020000
+RDATE:19470928T020000
+RDATE:19480926T020000
+RDATE:19490925T020000
+RDATE:19571027T020000
+RDATE:19591025T020000
+RDATE:19600925T020000
+RDATE:19610924T020000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0700
 TZOFFSETTO:-0600
+TZNAME:MWT
+DTSTART:19420209T020000
+RDATE:19420209T020000
+END:DAYLIGHT
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0600
+TZOFFSETTO:-0600
+TZNAME:MPT
+DTSTART:19450814T170000
+RDATE:19450814T170000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:-0700
+TZOFFSETTO:-0700
+TZNAME:MST
+DTSTART:19500101T000000
+RDATE:19500101T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-0700
+TZOFFSETTO:-0600
 TZNAME:CST
-DTSTART:19700101T000000
+DTSTART:19720430T020000
+RDATE:19720430T020000
 END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/America/Swift_Current.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/America/Grand_Turk.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Grand_Turk.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/America/Grand_Turk.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,22 +1,50 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/America/Grand_Turk
+TZID:/kde.org/Olson_20070327_1/America/Grand_Turk
 X-LIC-LOCATION:America/Grand_Turk
 BEGIN:STANDARD
 TZOFFSETFROM:-0400
 TZOFFSETTO:-0500
 TZNAME:EST
-DTSTART:19701025T000000
+DTSTART:19791028T000000
 RRULE:FREQ=YEARLY;BYMONTH=10;BYDAY=-1SU
 END:STANDARD
 BEGIN:DAYLIGHT
 TZOFFSETFROM:-0500
 TZOFFSETTO:-0400
 TZNAME:EDT
-DTSTART:19700405T000000
+DTSTART:19870405T000000
 RRULE:FREQ=YEARLY;BYMONTH=4;BYDAY=1SU
 END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:-044432
+TZOFFSETTO:-050712
+TZNAME:KMT
+DTSTART:18900101T000000
+RDATE:18900101T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-050712
+TZOFFSETTO:-0500
+TZNAME:EST
+DTSTART:19120201T000000
+RDATE:19120201T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0500
+TZOFFSETTO:-0400
+TZNAME:EDT
+DTSTART:19790429T000000
+RDATE:19790429T000000
+RDATE:19800427T000000
+RDATE:19810426T000000
+RDATE:19820425T000000
+RDATE:19830424T000000
+RDATE:19840429T000000
+RDATE:19850428T000000
+RDATE:19860427T000000
+END:DAYLIGHT
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/America/Grand_Turk.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/America/Guayaquil.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Guayaquil.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/America/Guayaquil.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +1,22 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/America/Guayaquil
+TZID:/kde.org/Olson_20070327_1/America/Guayaquil
 X-LIC-LOCATION:America/Guayaquil
 BEGIN:STANDARD
-TZOFFSETFROM:-0500
+TZOFFSETFROM:-051920
+TZOFFSETTO:-0514
+TZNAME:QMT
+DTSTART:18900101T000000
+RDATE:18900101T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-0514
 TZOFFSETTO:-0500
 TZNAME:ECT
-DTSTART:19700101T000000
+DTSTART:19310101T000000
+RDATE:19310101T000000
 END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/America/Guayaquil.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/America/Grenada.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Grenada.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/America/Grenada.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +1,15 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_4/America/Grenada
+TZID:/kde.org/Olson_20070327_1/America/Grenada
 X-LIC-LOCATION:America/Grenada
 BEGIN:STANDARD
-TZOFFSETFROM:-0400
+TZOFFSETFROM:-0407
 TZOFFSETTO:-0400
 TZNAME:AST
-DTSTART:19700101T000000
+DTSTART:19110701T000000
+RDATE:19110701T000000
 END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/America/Grenada.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/America/Atikokan.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Atikokan.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 0)
+++ libkcal/libical/zoneinfo/America/Atikokan.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -0,0 +1,51 @@
+BEGIN:VCALENDAR
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
+VERSION:2.0
+BEGIN:VTIMEZONE
+TZID:/kde.org/Olson_20070327_1/America/Atikokan
+X-LIC-LOCATION:America/Atikokan
+BEGIN:STANDARD
+TZOFFSETFROM:-060628
+TZOFFSETTO:-0600
+TZNAME:CST
+DTSTART:18950101T000000
+RDATE:18950101T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0600
+TZOFFSETTO:-0500
+TZNAME:CDT
+DTSTART:19180414T020000
+RDATE:19180414T020000
+RDATE:19400929T000000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:-0500
+TZOFFSETTO:-0600
+TZNAME:CST
+DTSTART:19181031T020000
+RDATE:19181031T020000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0500
+TZOFFSETTO:-0500
+TZNAME:CWT
+DTSTART:19420209T020000
+RDATE:19420209T020000
+END:DAYLIGHT
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0500
+TZOFFSETTO:-0500
+TZNAME:CPT
+DTSTART:19450814T180000
+RDATE:19450814T180000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:-0500
+TZOFFSETTO:-0500
+TZNAME:EST
+DTSTART:19450930T020000
+RDATE:19450930T020000
+END:STANDARD
+END:VTIMEZONE
+END:VCALENDAR
Index: libkcal/libical/zoneinfo/America/Boise.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Boise.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/America/Boise.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,22 +1,166 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/America/Boise
+TZID:/kde.org/Olson_20070327_1/America/Boise
 X-LIC-LOCATION:America/Boise
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0700
+TZOFFSETTO:-0600
+TZNAME:MDT
+DTSTART:20070311T020000
+RRULE:FREQ=YEARLY;BYMONTH=3;BYDAY=2SU
+END:DAYLIGHT
 BEGIN:STANDARD
 TZOFFSETFROM:-0600
 TZOFFSETTO:-0700
 TZNAME:MST
-DTSTART:19701025T020000
-RRULE:FREQ=YEARLY;BYMONTH=10;BYDAY=-1SU
+DTSTART:20071104T020000
+RRULE:FREQ=YEARLY;BYMONTH=11;BYDAY=1SU
 END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-074449
+TZOFFSETTO:-0800
+TZNAME:PST
+DTSTART:18831118T121511
+RDATE:18831118T121511
+END:STANDARD
 BEGIN:DAYLIGHT
+TZOFFSETFROM:-0800
+TZOFFSETTO:-0700
+TZNAME:PDT
+DTSTART:19180331T020000
+RDATE:19180331T020000
+RDATE:19190330T020000
+END:DAYLIGHT
+BEGIN:STANDARD
 TZOFFSETFROM:-0700
+TZOFFSETTO:-0800
+TZNAME:PST
+DTSTART:19181027T020000
+RDATE:19181027T020000
+RDATE:19191026T020000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-0800
+TZOFFSETTO:-0700
+TZNAME:MST
+DTSTART:19230513T020000
+RDATE:19230513T020000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0700
 TZOFFSETTO:-0600
+TZNAME:MWT
+DTSTART:19420209T020000
+RDATE:19420209T020000
+END:DAYLIGHT
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0600
+TZOFFSETTO:-0600
+TZNAME:MPT
+DTSTART:19450814T170000
+RDATE:19450814T170000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:-0600
+TZOFFSETTO:-0700
+TZNAME:MST
+DTSTART:19450930T020000
+RDATE:19450930T020000
+RDATE:19671029T020000
+RDATE:19681027T020000
+RDATE:19691026T020000
+RDATE:19701025T020000
+RDATE:19711031T020000
+RDATE:19721029T020000
+RDATE:19731028T020000
+RDATE:19741027T020000
+RDATE:19751026T020000
+RDATE:19761031T020000
+RDATE:19771030T020000
+RDATE:19781029T020000
+RDATE:19791028T020000
+RDATE:19801026T020000
+RDATE:19811025T020000
+RDATE:19821031T020000
+RDATE:19831030T020000
+RDATE:19841028T020000
+RDATE:19851027T020000
+RDATE:19861026T020000
+RDATE:19871025T020000
+RDATE:19881030T020000
+RDATE:19891029T020000
+RDATE:19901028T020000
+RDATE:19911027T020000
+RDATE:19921025T020000
+RDATE:19931031T020000
+RDATE:19941030T020000
+RDATE:19951029T020000
+RDATE:19961027T020000
+RDATE:19971026T020000
+RDATE:19981025T020000
+RDATE:19991031T020000
+RDATE:20001029T020000
+RDATE:20011028T020000
+RDATE:20021027T020000
+RDATE:20031026T020000
+RDATE:20041031T020000
+RDATE:20051030T020000
+RDATE:20061029T020000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0700
+TZOFFSETTO:-0600
 TZNAME:MDT
-DTSTART:19700405T020000
-RRULE:FREQ=YEARLY;BYMONTH=4;BYDAY=1SU
+DTSTART:19670430T020000
+RDATE:19670430T020000
+RDATE:19680428T020000
+RDATE:19690427T020000
+RDATE:19700426T020000
+RDATE:19710425T020000
+RDATE:19720430T020000
+RDATE:19730429T020000
+RDATE:19740203T020000
+RDATE:19750223T020000
+RDATE:19760425T020000
+RDATE:19770424T020000
+RDATE:19780430T020000
+RDATE:19790429T020000
+RDATE:19800427T020000
+RDATE:19810426T020000
+RDATE:19820425T020000
+RDATE:19830424T020000
+RDATE:19840429T020000
+RDATE:19850428T020000
+RDATE:19860427T020000
+RDATE:19870405T020000
+RDATE:19880403T020000
+RDATE:19890402T020000
+RDATE:19900401T020000
+RDATE:19910407T020000
+RDATE:19920405T020000
+RDATE:19930404T020000
+RDATE:19940403T020000
+RDATE:19950402T020000
+RDATE:19960407T020000
+RDATE:19970406T020000
+RDATE:19980405T020000
+RDATE:19990404T020000
+RDATE:20000402T020000
+RDATE:20010401T020000
+RDATE:20020407T020000
+RDATE:20030406T020000
+RDATE:20040404T020000
+RDATE:20050403T020000
+RDATE:20060402T020000
 END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:-0700
+TZOFFSETTO:-0700
+TZNAME:MST
+DTSTART:19740101T000000
+RDATE:19740101T000000
+END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/America/Boise.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Indian/Mauritius.ics
===================================================================
--- libkcal/libical/zoneinfo/Indian/Mauritius.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Indian/Mauritius.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +1,15 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_4/Indian/Mauritius
+TZID:/kde.org/Olson_20070327_1/Indian/Mauritius
 X-LIC-LOCATION:Indian/Mauritius
 BEGIN:STANDARD
-TZOFFSETFROM:+0400
+TZOFFSETFROM:+0350
 TZOFFSETTO:+0400
 TZNAME:MUT
-DTSTART:19700101T000000
+DTSTART:19070101T000000
+RDATE:19070101T000000
 END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Indian/Mauritius.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Indian/Mayotte.ics
===================================================================
--- libkcal/libical/zoneinfo/Indian/Mayotte.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Indian/Mayotte.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +1,15 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_4/Indian/Mayotte
+TZID:/kde.org/Olson_20070327_1/Indian/Mayotte
 X-LIC-LOCATION:Indian/Mayotte
 BEGIN:STANDARD
-TZOFFSETFROM:+0300
+TZOFFSETFROM:+030056
 TZOFFSETTO:+0300
 TZNAME:EAT
-DTSTART:19700101T000000
+DTSTART:19110701T000000
+RDATE:19110701T000000
 END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Indian/Mayotte.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Indian/Chagos.ics
===================================================================
--- libkcal/libical/zoneinfo/Indian/Chagos.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Indian/Chagos.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +1,22 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_4/Indian/Chagos
+TZID:/kde.org/Olson_20070327_1/Indian/Chagos
 X-LIC-LOCATION:Indian/Chagos
 BEGIN:STANDARD
-TZOFFSETFROM:+0600
+TZOFFSETFROM:+044940
+TZOFFSETTO:+0500
+TZNAME:IOT
+DTSTART:19070101T000000
+RDATE:19070101T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0500
 TZOFFSETTO:+0600
 TZNAME:IOT
-DTSTART:19700101T000000
+DTSTART:19960101T000000
+RDATE:19960101T000000
 END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Indian/Chagos.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Indian/Maldives.ics
===================================================================
--- libkcal/libical/zoneinfo/Indian/Maldives.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Indian/Maldives.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +1,22 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/Indian/Maldives
+TZID:/kde.org/Olson_20070327_1/Indian/Maldives
 X-LIC-LOCATION:Indian/Maldives
 BEGIN:STANDARD
-TZOFFSETFROM:+0500
+TZOFFSETFROM:+0454
+TZOFFSETTO:+0454
+TZNAME:MMT
+DTSTART:18800101T000000
+RDATE:18800101T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0454
 TZOFFSETTO:+0500
 TZNAME:MVT
-DTSTART:19700101T000000
+DTSTART:19600101T000000
+RDATE:19600101T000000
 END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Indian/Maldives.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Indian/Cocos.ics
===================================================================
--- libkcal/libical/zoneinfo/Indian/Cocos.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Indian/Cocos.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +1,15 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_4/Indian/Cocos
+TZID:/kde.org/Olson_20070327_1/Indian/Cocos
 X-LIC-LOCATION:Indian/Cocos
 BEGIN:STANDARD
-TZOFFSETFROM:+0630
+TZOFFSETFROM:+062740
 TZOFFSETTO:+0630
 TZNAME:CCT
-DTSTART:19700101T000000
+DTSTART:19000101T000000
+RDATE:19000101T000000
 END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Indian/Cocos.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Indian/Mahe.ics
===================================================================
--- libkcal/libical/zoneinfo/Indian/Mahe.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Indian/Mahe.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +1,15 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_4/Indian/Mahe
+TZID:/kde.org/Olson_20070327_1/Indian/Mahe
 X-LIC-LOCATION:Indian/Mahe
 BEGIN:STANDARD
-TZOFFSETFROM:+0400
+TZOFFSETFROM:+034148
 TZOFFSETTO:+0400
 TZNAME:SCT
-DTSTART:19700101T000000
+DTSTART:19060601T000000
+RDATE:19060601T000000
 END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Indian/Mahe.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Indian/Christmas.ics
===================================================================
--- libkcal/libical/zoneinfo/Indian/Christmas.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Indian/Christmas.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +1,15 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_4/Indian/Christmas
+TZID:/kde.org/Olson_20070327_1/Indian/Christmas
 X-LIC-LOCATION:Indian/Christmas
 BEGIN:STANDARD
-TZOFFSETFROM:+0700
+TZOFFSETFROM:+070252
 TZOFFSETTO:+0700
 TZNAME:CXT
-DTSTART:19700101T000000
+DTSTART:18950201T000000
+RDATE:18950201T000000
 END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Indian/Christmas.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Indian/Comoro.ics
===================================================================
--- libkcal/libical/zoneinfo/Indian/Comoro.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Indian/Comoro.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +1,15 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_4/Indian/Comoro
+TZID:/kde.org/Olson_20070327_1/Indian/Comoro
 X-LIC-LOCATION:Indian/Comoro
 BEGIN:STANDARD
-TZOFFSETFROM:+0300
+TZOFFSETFROM:+025304
 TZOFFSETTO:+0300
 TZNAME:EAT
-DTSTART:19700101T000000
+DTSTART:19110701T000000
+RDATE:19110701T000000
 END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Indian/Comoro.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Indian/Reunion.ics
===================================================================
--- libkcal/libical/zoneinfo/Indian/Reunion.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Indian/Reunion.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +1,15 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_4/Indian/Reunion
+TZID:/kde.org/Olson_20070327_1/Indian/Reunion
 X-LIC-LOCATION:Indian/Reunion
 BEGIN:STANDARD
-TZOFFSETFROM:+0400
+TZOFFSETFROM:+034152
 TZOFFSETTO:+0400
 TZNAME:RET
-DTSTART:19700101T000000
+DTSTART:19110601T000000
+RDATE:19110601T000000
 END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Indian/Reunion.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Indian/Antananarivo.ics
===================================================================
--- libkcal/libical/zoneinfo/Indian/Antananarivo.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Indian/Antananarivo.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +1,29 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/Indian/Antananarivo
+TZID:/kde.org/Olson_20070327_1/Indian/Antananarivo
 X-LIC-LOCATION:Indian/Antananarivo
 BEGIN:STANDARD
+TZOFFSETFROM:+031004
+TZOFFSETTO:+0300
+TZNAME:EAT
+DTSTART:19110701T000000
+RDATE:19110701T000000
+END:STANDARD
+BEGIN:DAYLIGHT
 TZOFFSETFROM:+0300
+TZOFFSETTO:+0400
+TZNAME:EAST
+DTSTART:19540227T230000
+RDATE:19540227T230000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0400
 TZOFFSETTO:+0300
 TZNAME:EAT
-DTSTART:19700101T000000
+DTSTART:19540530T000000
+RDATE:19540530T000000
 END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Indian/Antananarivo.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Indian/Kerguelen.ics
===================================================================
--- libkcal/libical/zoneinfo/Indian/Kerguelen.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Indian/Kerguelen.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +1,15 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_4/Indian/Kerguelen
+TZID:/kde.org/Olson_20070327_1/Indian/Kerguelen
 X-LIC-LOCATION:Indian/Kerguelen
 BEGIN:STANDARD
-TZOFFSETFROM:+0500
+TZOFFSETFROM:+0000
 TZOFFSETTO:+0500
 TZNAME:TFT
-DTSTART:19700101T000000
+DTSTART:19500101T000000
+RDATE:19500101T000000
 END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Indian/Kerguelen.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/zones.tab
===================================================================
--- libkcal/libical/zoneinfo/zones.tab	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/zones.tab	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -2,7 +2,7 @@
 +0053300 +0001300 Africa/Accra
 +0090200 +0384200 Africa/Addis_Ababa
 +0364700 +0030300 Africa/Algiers
-+0152000 +0385300 Africa/Asmera
++0152000 +0385300 Africa/Asmara
 +0123900 -0080000 Africa/Bamako
 +0042200 +0183500 Africa/Bangui
 +0132800 -0163900 Africa/Banjul
@@ -46,7 +46,6 @@
 +0122200 -0013100 Africa/Ouagadougou
 +0062900 +0023700 Africa/Porto-Novo
 +0002000 +0064400 Africa/Sao_Tome
-+0144600 -0030100 Africa/Timbuktu
 +0325400 +0131100 Africa/Tripoli
 +0364800 +0101100 Africa/Tunis
 -0223400 +0170600 Africa/Windhoek
@@ -59,25 +58,31 @@
 -0282800 -0654700 America/Argentina/Catamarca
 -0312400 -0641100 America/Argentina/Cordoba
 -0241100 -0651800 America/Argentina/Jujuy
+-0292600 -0665100 America/Argentina/La_Rioja
 -0325300 -0684900 America/Argentina/Mendoza
+-0513800 -0691300 America/Argentina/Rio_Gallegos
+-0313200 -0683100 America/Argentina/San_Juan
+-0264900 -0651300 America/Argentina/Tucuman
+-0544800 -0681800 America/Argentina/Ushuaia
 +0123000 -0685800 America/Aruba
 -0251600 -0574000 America/Asuncion
++0484531 -0913718 America/Atikokan
+-0125900 -0383100 America/Bahia
 +0130600 -0593700 America/Barbados
 -0012700 -0482900 America/Belem
 +0173000 -0881200 America/Belize
++0512500 -0570700 America/Blanc-Sablon
 +0024900 -0604000 America/Boa_Vista
 +0043600 -0740500 America/Bogota
 +0433649 -1161209 America/Boise
--0343600 -0582700 America/Buenos_Aires
 +0690300 -1050500 America/Cambridge_Bay
+-0202700 -0543700 America/Campo_Grande
 +0210500 -0864600 America/Cancun
 +0103000 -0665600 America/Caracas
--0282800 -0654700 America/Catamarca
 +0045600 -0522000 America/Cayenne
 +0191800 -0812300 America/Cayman
 +0415100 -0873900 America/Chicago
 +0283800 -1060500 America/Chihuahua
--0312400 -0641100 America/Cordoba
 +0095600 -0840500 America/Costa_Rica
 -0153500 -0560500 America/Cuiaba
 +0121100 -0690000 America/Curacao
@@ -106,39 +111,40 @@
 +0394606 -0860929 America/Indiana/Indianapolis
 +0411745 -0863730 America/Indiana/Knox
 +0382232 -0862041 America/Indiana/Marengo
++0382931 -0871643 America/Indiana/Petersburg
 +0384452 -0850402 America/Indiana/Vevay
-+0394606 -0860929 America/Indianapolis
-+0682500 -1133000 America/Inuvik
++0384038 -0873143 America/Indiana/Vincennes
++0410305 -0863611 America/Indiana/Winamac
++0682059 -1334300 America/Inuvik
 +0634400 -0682800 America/Iqaluit
 +0180000 -0764800 America/Jamaica
--0241100 -0651800 America/Jujuy
 +0581807 -1342511 America/Juneau
 +0381515 -0854534 America/Kentucky/Louisville
 +0364947 -0845057 America/Kentucky/Monticello
 -0163000 -0680900 America/La_Paz
 -0120300 -0770300 America/Lima
 +0340308 -1181434 America/Los_Angeles
-+0381515 -0854534 America/Louisville
 -0094000 -0354300 America/Maceio
 +0120900 -0861700 America/Managua
 -0030800 -0600100 America/Manaus
 +0143600 -0610500 America/Martinique
 +0231300 -1062500 America/Mazatlan
--0325300 -0684900 America/Mendoza
 +0450628 -0873651 America/Menominee
 +0205800 -0893700 America/Merida
 +0192400 -0990900 America/Mexico_City
 +0470300 -0562000 America/Miquelon
++0460600 -0644700 America/Moncton
 +0254000 -1001900 America/Monterrey
 -0345300 -0561100 America/Montevideo
 +0453100 -0733400 America/Montreal
-+0164400 -0621300 America/Montserrat
++0164300 -0621300 America/Montserrat
 +0250500 -0772100 America/Nassau
 +0404251 -0740023 America/New_York
 +0490100 -0881600 America/Nipigon
 +0643004 -1652423 America/Nome
 -0035100 -0322500 America/Noronha
 +0470659 -1011757 America/North_Dakota/Center
++0465042 -1012439 America/North_Dakota/New_Salem
 +0085800 -0793200 America/Panama
 +0660800 -0654400 America/Pangnirtung
 +0055000 -0551000 America/Paramaribo
@@ -147,15 +153,16 @@
 +0103900 -0613100 America/Port_of_Spain
 -0084600 -0635400 America/Porto_Velho
 +0182806 -0660622 America/Puerto_Rico
-+0484300 -0942900 America/Rainy_River
-+0624500 -0921000 America/Rankin_Inlet
++0484300 -0943400 America/Rainy_River
++0624900 -0920459 America/Rankin_Inlet
 -0080300 -0345400 America/Recife
 +0502400 -1043900 America/Regina
++0744144 -0944945 America/Resolute
 -0095800 -0674800 America/Rio_Branco
 -0332700 -0704000 America/Santiago
 +0182800 -0695400 America/Santo_Domingo
 -0233200 -0463700 America/Sao_Paulo
-+0703000 -0221500 America/Scoresbysund
++0702900 -0215800 America/Scoresbysund
 +0364708 -1084111 America/Shiprock
 +0473400 -0524300 America/St_Johns
 +0171800 -0624300 America/St_Kitts
@@ -180,6 +187,7 @@
 -0673600 +0625300 Antarctica/Mawson
 -0775000 +1663600 Antarctica/McMurdo
 -0644800 -0640600 Antarctica/Palmer
+-0673400 -0680800 Antarctica/Rothera
 -0900000 +0000000 Antarctica/South_Pole
 -0690022 +0393524 Antarctica/Syowa
 -0782400 +1065400 Antarctica/Vostok
@@ -225,18 +233,20 @@
 +0031000 +1014200 Asia/Kuala_Lumpur
 +0013300 +1102000 Asia/Kuching
 +0292000 +0475900 Asia/Kuwait
-+0221400 +1133500 Asia/Macao
 +0221400 +1133500 Asia/Macau
 +0593400 +1504800 Asia/Magadan
+-0050700 +1192400 Asia/Makassar
 +0143500 +1210000 Asia/Manila
 +0233600 +0583500 Asia/Muscat
 +0351000 +0332200 Asia/Nicosia
 +0550200 +0825500 Asia/Novosibirsk
 +0550000 +0732400 Asia/Omsk
++0511300 +0512100 Asia/Oral
 +0113300 +1045500 Asia/Phnom_Penh
 +0000200 +1092000 Asia/Pontianak
 +0390100 +1254500 Asia/Pyongyang
 +0251700 +0513200 Asia/Qatar
++0444800 +0652800 Asia/Qyzylorda
 +0164700 +0961000 Asia/Rangoon
 +0243800 +0464300 Asia/Riyadh
 +0104500 +1064000 Asia/Saigon
@@ -262,7 +272,7 @@
 +0321700 -0644600 Atlantic/Bermuda
 +0280600 -0152400 Atlantic/Canary
 +0145500 -0233100 Atlantic/Cape_Verde
-+0620100 -0064600 Atlantic/Faeroe
++0620100 -0064600 Atlantic/Faroe
 +0705900 -0080500 Atlantic/Jan_Mayen
 +0323800 -0165400 Atlantic/Madeira
 +0640900 -0215100 Atlantic/Reykjavik
@@ -272,7 +282,9 @@
 -0345500 +1383500 Australia/Adelaide
 -0272800 +1530200 Australia/Brisbane
 -0315700 +1412700 Australia/Broken_Hill
+-0395600 +1435200 Australia/Currie
 -0122800 +1305000 Australia/Darwin
+-0314300 +1285200 Australia/Eucla
 -0425300 +1471900 Australia/Hobart
 -0201600 +1490000 Australia/Lindeman
 -0313300 +1590500 Australia/Lord_Howe
@@ -282,7 +294,6 @@
 +0522200 +0045400 Europe/Amsterdam
 +0423000 +0013100 Europe/Andorra
 +0375800 +0234300 Europe/Athens
-+0543500 -0055500 Europe/Belfast
 +0445000 +0203000 Europe/Belgrade
 +0523000 +0132200 Europe/Berlin
 +0480900 +0170700 Europe/Bratislava
@@ -293,8 +304,11 @@
 +0554000 +0123500 Europe/Copenhagen
 +0532000 -0061500 Europe/Dublin
 +0360800 -0052100 Europe/Gibraltar
++0492700 -0023200 Europe/Guernsey
 +0601000 +0245800 Europe/Helsinki
++0540900 -0042800 Europe/Isle_of_Man
 +0410100 +0285800 Europe/Istanbul
++0491200 -0020700 Europe/Jersey
 +0544300 +0203000 Europe/Kaliningrad
 +0502600 +0303100 Europe/Kiev
 +0384300 -0090800 Europe/Lisbon
@@ -303,12 +317,14 @@
 +0493600 +0060900 Europe/Luxembourg
 +0402400 -0034100 Europe/Madrid
 +0355400 +0143100 Europe/Malta
++0600600 +0195700 Europe/Mariehamn
 +0535400 +0273400 Europe/Minsk
 +0434200 +0072300 Europe/Monaco
 +0554500 +0373500 Europe/Moscow
 +0351000 +0332200 Europe/Nicosia
 +0595500 +0104500 Europe/Oslo
 +0485200 +0022000 Europe/Paris
++0422600 +0191600 Europe/Podgorica
 +0500500 +0142600 Europe/Prague
 +0565700 +0240600 Europe/Riga
 +0415400 +0122900 Europe/Rome
@@ -326,6 +342,7 @@
 +0415400 +0122700 Europe/Vatican
 +0481300 +0162000 Europe/Vienna
 +0544100 +0251900 Europe/Vilnius
++0484400 +0442500 Europe/Volgograd
 +0521500 +0210000 Europe/Warsaw
 +0454800 +0155800 Europe/Zagreb
 +0475000 +0351000 Europe/Zaporozhye
@@ -343,8 +360,8 @@
 -0205200 +0552800 Indian/Reunion
 -0135000 -1714400 Pacific/Apia
 -0365200 +1744600 Pacific/Auckland
--0435500 -1763000 Pacific/Chatham
--0271000 -1092700 Pacific/Easter
+-0435700 -1763300 Pacific/Chatham
+-0270900 -1092600 Pacific/Easter
 -0174000 +1682500 Pacific/Efate
 -0030800 -1710500 Pacific/Enderbury
 -0092200 -1711400 Pacific/Fakaofo
@@ -379,4 +396,3 @@
 +0072500 +1514700 Pacific/Truk
 +0191700 +1663700 Pacific/Wake
 -0131800 -1761000 Pacific/Wallis
-+0093100 +1380800 Pacific/Yap

Zmiany atrybutów dla: libkcal/libical/zoneinfo/zones.tab
___________________________________________________________________
Nazwa: svn:keywords
   - Author Date Id Revision

Index: libkcal/libical/zoneinfo/zones.h
===================================================================
--- libkcal/libical/zoneinfo/zones.h	(.../tags/KDE/3.5.6/kdepim)	(wersja 0)
+++ libkcal/libical/zoneinfo/zones.h	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -0,0 +1,398 @@
+N_("Africa/Abidjan");
+N_("Africa/Accra");
+N_("Africa/Addis_Ababa");
+N_("Africa/Algiers");
+N_("Africa/Asmara");
+N_("Africa/Bamako");
+N_("Africa/Bangui");
+N_("Africa/Banjul");
+N_("Africa/Bissau");
+N_("Africa/Blantyre");
+N_("Africa/Brazzaville");
+N_("Africa/Bujumbura");
+N_("Africa/Cairo");
+N_("Africa/Casablanca");
+N_("Africa/Ceuta");
+N_("Africa/Conakry");
+N_("Africa/Dakar");
+N_("Africa/Dar_es_Salaam");
+N_("Africa/Djibouti");
+N_("Africa/Douala");
+N_("Africa/El_Aaiun");
+N_("Africa/Freetown");
+N_("Africa/Gaborone");
+N_("Africa/Harare");
+N_("Africa/Johannesburg");
+N_("Africa/Kampala");
+N_("Africa/Khartoum");
+N_("Africa/Kigali");
+N_("Africa/Kinshasa");
+N_("Africa/Lagos");
+N_("Africa/Libreville");
+N_("Africa/Lome");
+N_("Africa/Luanda");
+N_("Africa/Lubumbashi");
+N_("Africa/Lusaka");
+N_("Africa/Malabo");
+N_("Africa/Maputo");
+N_("Africa/Maseru");
+N_("Africa/Mbabane");
+N_("Africa/Mogadishu");
+N_("Africa/Monrovia");
+N_("Africa/Nairobi");
+N_("Africa/Ndjamena");
+N_("Africa/Niamey");
+N_("Africa/Nouakchott");
+N_("Africa/Ouagadougou");
+N_("Africa/Porto-Novo");
+N_("Africa/Sao_Tome");
+N_("Africa/Tripoli");
+N_("Africa/Tunis");
+N_("Africa/Windhoek");
+N_("America/Adak");
+N_("America/Anchorage");
+N_("America/Anguilla");
+N_("America/Antigua");
+N_("America/Araguaina");
+N_("America/Argentina/Buenos_Aires");
+N_("America/Argentina/Catamarca");
+N_("America/Argentina/Cordoba");
+N_("America/Argentina/Jujuy");
+N_("America/Argentina/La_Rioja");
+N_("America/Argentina/Mendoza");
+N_("America/Argentina/Rio_Gallegos");
+N_("America/Argentina/San_Juan");
+N_("America/Argentina/Tucuman");
+N_("America/Argentina/Ushuaia");
+N_("America/Aruba");
+N_("America/Asuncion");
+N_("America/Atikokan");
+N_("America/Bahia");
+N_("America/Barbados");
+N_("America/Belem");
+N_("America/Belize");
+N_("America/Blanc-Sablon");
+N_("America/Boa_Vista");
+N_("America/Bogota");
+N_("America/Boise");
+N_("America/Cambridge_Bay");
+N_("America/Campo_Grande");
+N_("America/Cancun");
+N_("America/Caracas");
+N_("America/Cayenne");
+N_("America/Cayman");
+N_("America/Chicago");
+N_("America/Chihuahua");
+N_("America/Costa_Rica");
+N_("America/Cuiaba");
+N_("America/Curacao");
+N_("America/Danmarkshavn");
+N_("America/Dawson");
+N_("America/Dawson_Creek");
+N_("America/Denver");
+N_("America/Detroit");
+N_("America/Dominica");
+N_("America/Edmonton");
+N_("America/Eirunepe");
+N_("America/El_Salvador");
+N_("America/Fortaleza");
+N_("America/Glace_Bay");
+N_("America/Godthab");
+N_("America/Goose_Bay");
+N_("America/Grand_Turk");
+N_("America/Grenada");
+N_("America/Guadeloupe");
+N_("America/Guatemala");
+N_("America/Guayaquil");
+N_("America/Guyana");
+N_("America/Halifax");
+N_("America/Havana");
+N_("America/Hermosillo");
+N_("America/Indiana/Indianapolis");
+N_("America/Indiana/Knox");
+N_("America/Indiana/Marengo");
+N_("America/Indiana/Petersburg");
+N_("America/Indiana/Vevay");
+N_("America/Indiana/Vincennes");
+N_("America/Indiana/Winamac");
+N_("America/Inuvik");
+N_("America/Iqaluit");
+N_("America/Jamaica");
+N_("America/Juneau");
+N_("America/Kentucky/Louisville");
+N_("America/Kentucky/Monticello");
+N_("America/La_Paz");
+N_("America/Lima");
+N_("America/Los_Angeles");
+N_("America/Maceio");
+N_("America/Managua");
+N_("America/Manaus");
+N_("America/Martinique");
+N_("America/Mazatlan");
+N_("America/Menominee");
+N_("America/Merida");
+N_("America/Mexico_City");
+N_("America/Miquelon");
+N_("America/Moncton");
+N_("America/Monterrey");
+N_("America/Montevideo");
+N_("America/Montreal");
+N_("America/Montserrat");
+N_("America/Nassau");
+N_("America/New_York");
+N_("America/Nipigon");
+N_("America/Nome");
+N_("America/Noronha");
+N_("America/North_Dakota/Center");
+N_("America/North_Dakota/New_Salem");
+N_("America/Panama");
+N_("America/Pangnirtung");
+N_("America/Paramaribo");
+N_("America/Phoenix");
+N_("America/Port-au-Prince");
+N_("America/Port_of_Spain");
+N_("America/Porto_Velho");
+N_("America/Puerto_Rico");
+N_("America/Rainy_River");
+N_("America/Rankin_Inlet");
+N_("America/Recife");
+N_("America/Regina");
+N_("America/Resolute");
+N_("America/Rio_Branco");
+N_("America/Santiago");
+N_("America/Santo_Domingo");
+N_("America/Sao_Paulo");
+N_("America/Scoresbysund");
+N_("America/Shiprock");
+N_("America/St_Johns");
+N_("America/St_Kitts");
+N_("America/St_Lucia");
+N_("America/St_Thomas");
+N_("America/St_Vincent");
+N_("America/Swift_Current");
+N_("America/Tegucigalpa");
+N_("America/Thule");
+N_("America/Thunder_Bay");
+N_("America/Tijuana");
+N_("America/Toronto");
+N_("America/Tortola");
+N_("America/Vancouver");
+N_("America/Whitehorse");
+N_("America/Winnipeg");
+N_("America/Yakutat");
+N_("America/Yellowknife");
+N_("Antarctica/Casey");
+N_("Antarctica/Davis");
+N_("Antarctica/DumontDUrville");
+N_("Antarctica/Mawson");
+N_("Antarctica/McMurdo");
+N_("Antarctica/Palmer");
+N_("Antarctica/Rothera");
+N_("Antarctica/South_Pole");
+N_("Antarctica/Syowa");
+N_("Antarctica/Vostok");
+N_("Arctic/Longyearbyen");
+N_("Asia/Aden");
+N_("Asia/Almaty");
+N_("Asia/Amman");
+N_("Asia/Anadyr");
+N_("Asia/Aqtau");
+N_("Asia/Aqtobe");
+N_("Asia/Ashgabat");
+N_("Asia/Baghdad");
+N_("Asia/Bahrain");
+N_("Asia/Baku");
+N_("Asia/Bangkok");
+N_("Asia/Beirut");
+N_("Asia/Bishkek");
+N_("Asia/Brunei");
+N_("Asia/Calcutta");
+N_("Asia/Choibalsan");
+N_("Asia/Chongqing");
+N_("Asia/Colombo");
+N_("Asia/Damascus");
+N_("Asia/Dhaka");
+N_("Asia/Dili");
+N_("Asia/Dubai");
+N_("Asia/Dushanbe");
+N_("Asia/Gaza");
+N_("Asia/Harbin");
+N_("Asia/Hong_Kong");
+N_("Asia/Hovd");
+N_("Asia/Irkutsk");
+N_("Asia/Istanbul");
+N_("Asia/Jakarta");
+N_("Asia/Jayapura");
+N_("Asia/Jerusalem");
+N_("Asia/Kabul");
+N_("Asia/Kamchatka");
+N_("Asia/Karachi");
+N_("Asia/Kashgar");
+N_("Asia/Katmandu");
+N_("Asia/Krasnoyarsk");
+N_("Asia/Kuala_Lumpur");
+N_("Asia/Kuching");
+N_("Asia/Kuwait");
+N_("Asia/Macau");
+N_("Asia/Magadan");
+N_("Asia/Makassar");
+N_("Asia/Manila");
+N_("Asia/Muscat");
+N_("Asia/Nicosia");
+N_("Asia/Novosibirsk");
+N_("Asia/Omsk");
+N_("Asia/Oral");
+N_("Asia/Phnom_Penh");
+N_("Asia/Pontianak");
+N_("Asia/Pyongyang");
+N_("Asia/Qatar");
+N_("Asia/Qyzylorda");
+N_("Asia/Rangoon");
+N_("Asia/Riyadh");
+N_("Asia/Saigon");
+N_("Asia/Sakhalin");
+N_("Asia/Samarkand");
+N_("Asia/Seoul");
+N_("Asia/Shanghai");
+N_("Asia/Singapore");
+N_("Asia/Taipei");
+N_("Asia/Tashkent");
+N_("Asia/Tbilisi");
+N_("Asia/Tehran");
+N_("Asia/Thimphu");
+N_("Asia/Tokyo");
+N_("Asia/Ulaanbaatar");
+N_("Asia/Urumqi");
+N_("Asia/Vientiane");
+N_("Asia/Vladivostok");
+N_("Asia/Yakutsk");
+N_("Asia/Yekaterinburg");
+N_("Asia/Yerevan");
+N_("Atlantic/Azores");
+N_("Atlantic/Bermuda");
+N_("Atlantic/Canary");
+N_("Atlantic/Cape_Verde");
+N_("Atlantic/Faroe");
+N_("Atlantic/Jan_Mayen");
+N_("Atlantic/Madeira");
+N_("Atlantic/Reykjavik");
+N_("Atlantic/South_Georgia");
+N_("Atlantic/St_Helena");
+N_("Atlantic/Stanley");
+N_("Australia/Adelaide");
+N_("Australia/Brisbane");
+N_("Australia/Broken_Hill");
+N_("Australia/Currie");
+N_("Australia/Darwin");
+N_("Australia/Eucla");
+N_("Australia/Hobart");
+N_("Australia/Lindeman");
+N_("Australia/Lord_Howe");
+N_("Australia/Melbourne");
+N_("Australia/Perth");
+N_("Australia/Sydney");
+N_("Europe/Amsterdam");
+N_("Europe/Andorra");
+N_("Europe/Athens");
+N_("Europe/Belgrade");
+N_("Europe/Berlin");
+N_("Europe/Bratislava");
+N_("Europe/Brussels");
+N_("Europe/Bucharest");
+N_("Europe/Budapest");
+N_("Europe/Chisinau");
+N_("Europe/Copenhagen");
+N_("Europe/Dublin");
+N_("Europe/Gibraltar");
+N_("Europe/Guernsey");
+N_("Europe/Helsinki");
+N_("Europe/Isle_of_Man");
+N_("Europe/Istanbul");
+N_("Europe/Jersey");
+N_("Europe/Kaliningrad");
+N_("Europe/Kiev");
+N_("Europe/Lisbon");
+N_("Europe/Ljubljana");
+N_("Europe/London");
+N_("Europe/Luxembourg");
+N_("Europe/Madrid");
+N_("Europe/Malta");
+N_("Europe/Mariehamn");
+N_("Europe/Minsk");
+N_("Europe/Monaco");
+N_("Europe/Moscow");
+N_("Europe/Nicosia");
+N_("Europe/Oslo");
+N_("Europe/Paris");
+N_("Europe/Podgorica");
+N_("Europe/Prague");
+N_("Europe/Riga");
+N_("Europe/Rome");
+N_("Europe/Samara");
+N_("Europe/San_Marino");
+N_("Europe/Sarajevo");
+N_("Europe/Simferopol");
+N_("Europe/Skopje");
+N_("Europe/Sofia");
+N_("Europe/Stockholm");
+N_("Europe/Tallinn");
+N_("Europe/Tirane");
+N_("Europe/Uzhgorod");
+N_("Europe/Vaduz");
+N_("Europe/Vatican");
+N_("Europe/Vienna");
+N_("Europe/Vilnius");
+N_("Europe/Volgograd");
+N_("Europe/Warsaw");
+N_("Europe/Zagreb");
+N_("Europe/Zaporozhye");
+N_("Europe/Zurich");
+N_("Indian/Antananarivo");
+N_("Indian/Chagos");
+N_("Indian/Christmas");
+N_("Indian/Cocos");
+N_("Indian/Comoro");
+N_("Indian/Kerguelen");
+N_("Indian/Mahe");
+N_("Indian/Maldives");
+N_("Indian/Mauritius");
+N_("Indian/Mayotte");
+N_("Indian/Reunion");
+N_("Pacific/Apia");
+N_("Pacific/Auckland");
+N_("Pacific/Chatham");
+N_("Pacific/Easter");
+N_("Pacific/Efate");
+N_("Pacific/Enderbury");
+N_("Pacific/Fakaofo");
+N_("Pacific/Fiji");
+N_("Pacific/Funafuti");
+N_("Pacific/Galapagos");
+N_("Pacific/Gambier");
+N_("Pacific/Guadalcanal");
+N_("Pacific/Guam");
+N_("Pacific/Honolulu");
+N_("Pacific/Johnston");
+N_("Pacific/Kiritimati");
+N_("Pacific/Kosrae");
+N_("Pacific/Kwajalein");
+N_("Pacific/Majuro");
+N_("Pacific/Marquesas");
+N_("Pacific/Midway");
+N_("Pacific/Nauru");
+N_("Pacific/Niue");
+N_("Pacific/Norfolk");
+N_("Pacific/Noumea");
+N_("Pacific/Pago_Pago");
+N_("Pacific/Palau");
+N_("Pacific/Pitcairn");
+N_("Pacific/Ponape");
+N_("Pacific/Port_Moresby");
+N_("Pacific/Rarotonga");
+N_("Pacific/Saipan");
+N_("Pacific/Tahiti");
+N_("Pacific/Tarawa");
+N_("Pacific/Tongatapu");
+N_("Pacific/Truk");
+N_("Pacific/Wake");
+N_("Pacific/Wallis");
Index: libkcal/libical/zoneinfo/Africa/Timbuktu.ics
===================================================================
--- libkcal/libical/zoneinfo/Africa/Timbuktu.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Africa/Timbuktu.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +0,0 @@
-BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
-VERSION:2.0
-BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_4/Africa/Timbuktu
-X-LIC-LOCATION:Africa/Timbuktu
-BEGIN:STANDARD
-TZOFFSETFROM:+0000
-TZOFFSETTO:+0000
-TZNAME:GMT
-DTSTART:19700101T000000
-END:STANDARD
-END:VTIMEZONE
-END:VCALENDAR
Index: libkcal/libical/zoneinfo/Africa/Asmera.ics
===================================================================
--- libkcal/libical/zoneinfo/Africa/Asmera.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Africa/Asmera.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +0,0 @@
-BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
-VERSION:2.0
-BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/Africa/Asmera
-X-LIC-LOCATION:Africa/Asmera
-BEGIN:STANDARD
-TZOFFSETFROM:+0300
-TZOFFSETTO:+0300
-TZNAME:EAT
-DTSTART:19700101T000000
-END:STANDARD
-END:VTIMEZONE
-END:VCALENDAR
Index: libkcal/libical/zoneinfo/Africa/Luanda.ics
===================================================================
--- libkcal/libical/zoneinfo/Africa/Luanda.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Africa/Luanda.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +1,22 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/Africa/Luanda
+TZID:/kde.org/Olson_20070327_1/Africa/Luanda
 X-LIC-LOCATION:Africa/Luanda
 BEGIN:STANDARD
-TZOFFSETFROM:+0100
+TZOFFSETFROM:+005256
+TZOFFSETTO:+005204
+TZNAME:AOT
+DTSTART:18920101T000000
+RDATE:18920101T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+005204
 TZOFFSETTO:+0100
 TZNAME:WAT
-DTSTART:19700101T000000
+DTSTART:19110526T000000
+RDATE:19110526T000000
 END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Africa/Luanda.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Africa/Lagos.ics
===================================================================
--- libkcal/libical/zoneinfo/Africa/Lagos.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Africa/Lagos.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +1,15 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_4/Africa/Lagos
+TZID:/kde.org/Olson_20070327_1/Africa/Lagos
 X-LIC-LOCATION:Africa/Lagos
 BEGIN:STANDARD
-TZOFFSETFROM:+0100
+TZOFFSETFROM:+001336
 TZOFFSETTO:+0100
 TZNAME:WAT
-DTSTART:19700101T000000
+DTSTART:19190901T000000
+RDATE:19190901T000000
 END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Africa/Lagos.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Africa/Douala.ics
===================================================================
--- libkcal/libical/zoneinfo/Africa/Douala.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Africa/Douala.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +1,15 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_4/Africa/Douala
+TZID:/kde.org/Olson_20070327_1/Africa/Douala
 X-LIC-LOCATION:Africa/Douala
 BEGIN:STANDARD
-TZOFFSETFROM:+0100
+TZOFFSETFROM:+003848
 TZOFFSETTO:+0100
 TZNAME:WAT
-DTSTART:19700101T000000
+DTSTART:19120101T000000
+RDATE:19120101T000000
 END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Africa/Douala.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Africa/Bangui.ics
===================================================================
--- libkcal/libical/zoneinfo/Africa/Bangui.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Africa/Bangui.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +1,15 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_4/Africa/Bangui
+TZID:/kde.org/Olson_20070327_1/Africa/Bangui
 X-LIC-LOCATION:Africa/Bangui
 BEGIN:STANDARD
-TZOFFSETFROM:+0100
+TZOFFSETFROM:+011420
 TZOFFSETTO:+0100
 TZNAME:WAT
-DTSTART:19700101T000000
+DTSTART:19120101T000000
+RDATE:19120101T000000
 END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Africa/Bangui.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Africa/Sao_Tome.ics
===================================================================
--- libkcal/libical/zoneinfo/Africa/Sao_Tome.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Africa/Sao_Tome.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +1,22 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/Africa/Sao_Tome
+TZID:/kde.org/Olson_20070327_1/Africa/Sao_Tome
 X-LIC-LOCATION:Africa/Sao_Tome
 BEGIN:STANDARD
-TZOFFSETFROM:+0000
+TZOFFSETFROM:+002656
+TZOFFSETTO:-003632
+TZNAME:LMT
+DTSTART:18840101T000000
+RDATE:18840101T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-003632
 TZOFFSETTO:+0000
 TZNAME:GMT
-DTSTART:19700101T000000
+DTSTART:19120101T000000
+RDATE:19120101T000000
 END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Africa/Sao_Tome.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Africa/Windhoek.ics
===================================================================
--- libkcal/libical/zoneinfo/Africa/Windhoek.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Africa/Windhoek.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,22 +1,64 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/Africa/Windhoek
+TZID:/kde.org/Olson_20070327_1/Africa/Windhoek
 X-LIC-LOCATION:Africa/Windhoek
 BEGIN:DAYLIGHT
 TZOFFSETFROM:+0100
 TZOFFSETTO:+0200
 TZNAME:WAST
-DTSTART:19700906T020000
+DTSTART:19940904T020000
 RRULE:FREQ=YEARLY;BYMONTH=9;BYDAY=1SU
 END:DAYLIGHT
 BEGIN:STANDARD
 TZOFFSETFROM:+0200
 TZOFFSETTO:+0100
 TZNAME:WAT
-DTSTART:19700405T020000
+DTSTART:19950402T020000
 RRULE:FREQ=YEARLY;BYMONTH=4;BYDAY=1SU
 END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+010824
+TZOFFSETTO:+0130
+TZNAME:SWAT
+DTSTART:18920208T000000
+RDATE:18920208T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0130
+TZOFFSETTO:+0200
+TZNAME:SAST
+DTSTART:19030301T000000
+RDATE:19030301T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0200
+TZOFFSETTO:+0300
+TZNAME:SAST
+DTSTART:19420920T020000
+RDATE:19420920T020000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0300
+TZOFFSETTO:+0200
+TZNAME:SAST
+DTSTART:19430321T020000
+RDATE:19430321T020000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0200
+TZOFFSETTO:+0200
+TZNAME:CAT
+DTSTART:19900321T000000
+RDATE:19900321T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0200
+TZOFFSETTO:+0100
+TZNAME:WAT
+DTSTART:19940403T000000
+RDATE:19940403T000000
+END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Africa/Windhoek.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Africa/Djibouti.ics
===================================================================
--- libkcal/libical/zoneinfo/Africa/Djibouti.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Africa/Djibouti.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +1,15 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_4/Africa/Djibouti
+TZID:/kde.org/Olson_20070327_1/Africa/Djibouti
 X-LIC-LOCATION:Africa/Djibouti
 BEGIN:STANDARD
-TZOFFSETFROM:+0300
+TZOFFSETFROM:+025236
 TZOFFSETTO:+0300
 TZNAME:EAT
-DTSTART:19700101T000000
+DTSTART:19110701T000000
+RDATE:19110701T000000
 END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Africa/Djibouti.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Africa/Accra.ics
===================================================================
--- libkcal/libical/zoneinfo/Africa/Accra.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Africa/Accra.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +1,41 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/Africa/Accra
+TZID:/kde.org/Olson_20070327_1/Africa/Accra
 X-LIC-LOCATION:Africa/Accra
 BEGIN:STANDARD
+TZOFFSETFROM:-000052
+TZOFFSETTO:+0000
+TZNAME:GMT
+DTSTART:19180101T000000
+RDATE:19180101T000000
+END:STANDARD
+BEGIN:DAYLIGHT
 TZOFFSETFROM:+0000
+TZOFFSETTO:+0020
+TZNAME:GHST
+DTSTART:19360901T000000
+RDATE:19360901T000000
+RDATE:19370901T000000
+RDATE:19380901T000000
+RDATE:19390901T000000
+RDATE:19400901T000000
+RDATE:19410901T000000
+RDATE:19420901T000000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0020
 TZOFFSETTO:+0000
 TZNAME:GMT
-DTSTART:19700101T000000
+DTSTART:19361231T000000
+RDATE:19361231T000000
+RDATE:19371231T000000
+RDATE:19381231T000000
+RDATE:19391231T000000
+RDATE:19401231T000000
+RDATE:19411231T000000
+RDATE:19421231T000000
 END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Africa/Accra.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Africa/Banjul.ics
===================================================================
--- libkcal/libical/zoneinfo/Africa/Banjul.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Africa/Banjul.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +1,29 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/Africa/Banjul
+TZID:/kde.org/Olson_20070327_1/Africa/Banjul
 X-LIC-LOCATION:Africa/Banjul
 BEGIN:STANDARD
-TZOFFSETFROM:+0000
+TZOFFSETFROM:-010636
+TZOFFSETTO:-010636
+TZNAME:BMT
+DTSTART:19120101T000000
+RDATE:19120101T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-010636
+TZOFFSETTO:-0100
+TZNAME:WAT
+DTSTART:19350101T000000
+RDATE:19350101T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-0100
 TZOFFSETTO:+0000
 TZNAME:GMT
-DTSTART:19700101T000000
+DTSTART:19640101T000000
+RDATE:19640101T000000
 END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Africa/Banjul.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Africa/El_Aaiun.ics
===================================================================
--- libkcal/libical/zoneinfo/Africa/El_Aaiun.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Africa/El_Aaiun.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +1,22 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/Africa/El_Aaiun
+TZID:/kde.org/Olson_20070327_1/Africa/El_Aaiun
 X-LIC-LOCATION:Africa/El_Aaiun
 BEGIN:STANDARD
-TZOFFSETFROM:+0000
+TZOFFSETFROM:-005248
+TZOFFSETTO:-0100
+TZNAME:WAT
+DTSTART:19340101T000000
+RDATE:19340101T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-0100
 TZOFFSETTO:+0000
 TZNAME:WET
-DTSTART:19700101T000000
+DTSTART:19760414T000000
+RDATE:19760414T000000
 END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Africa/El_Aaiun.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Africa/Ndjamena.ics
===================================================================
--- libkcal/libical/zoneinfo/Africa/Ndjamena.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Africa/Ndjamena.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +1,29 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/Africa/Ndjamena
+TZID:/kde.org/Olson_20070327_1/Africa/Ndjamena
 X-LIC-LOCATION:Africa/Ndjamena
 BEGIN:STANDARD
+TZOFFSETFROM:+010012
+TZOFFSETTO:+0100
+TZNAME:WAT
+DTSTART:19120101T000000
+RDATE:19120101T000000
+END:STANDARD
+BEGIN:DAYLIGHT
 TZOFFSETFROM:+0100
+TZOFFSETTO:+0200
+TZNAME:WAST
+DTSTART:19791014T000000
+RDATE:19791014T000000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0200
 TZOFFSETTO:+0100
 TZNAME:WAT
-DTSTART:19700101T000000
+DTSTART:19800308T000000
+RDATE:19800308T000000
 END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Africa/Ndjamena.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Africa/Ouagadougou.ics
===================================================================
--- libkcal/libical/zoneinfo/Africa/Ouagadougou.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Africa/Ouagadougou.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +1,15 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_4/Africa/Ouagadougou
+TZID:/kde.org/Olson_20070327_1/Africa/Ouagadougou
 X-LIC-LOCATION:Africa/Ouagadougou
 BEGIN:STANDARD
-TZOFFSETFROM:+0000
+TZOFFSETFROM:-000604
 TZOFFSETTO:+0000
 TZNAME:GMT
-DTSTART:19700101T000000
+DTSTART:19120101T000000
+RDATE:19120101T000000
 END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Africa/Ouagadougou.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Africa/Mogadishu.ics
===================================================================
--- libkcal/libical/zoneinfo/Africa/Mogadishu.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Africa/Mogadishu.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +1,29 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/Africa/Mogadishu
+TZID:/kde.org/Olson_20070327_1/Africa/Mogadishu
 X-LIC-LOCATION:Africa/Mogadishu
 BEGIN:STANDARD
+TZOFFSETFROM:+030128
+TZOFFSETTO:+0300
+TZNAME:EAT
+DTSTART:18931101T000000
+RDATE:18931101T000000
+END:STANDARD
+BEGIN:STANDARD
 TZOFFSETFROM:+0300
+TZOFFSETTO:+0230
+TZNAME:BEAT
+DTSTART:19310101T000000
+RDATE:19310101T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0230
 TZOFFSETTO:+0300
 TZNAME:EAT
-DTSTART:19700101T000000
+DTSTART:19570101T000000
+RDATE:19570101T000000
 END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Africa/Mogadishu.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Africa/Porto-Novo.ics
===================================================================
--- libkcal/libical/zoneinfo/Africa/Porto-Novo.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Africa/Porto-Novo.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +1,22 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/Africa/Porto-Novo
+TZID:/kde.org/Olson_20070327_1/Africa/Porto-Novo
 X-LIC-LOCATION:Africa/Porto-Novo
 BEGIN:STANDARD
-TZOFFSETFROM:+0100
+TZOFFSETFROM:+001028
+TZOFFSETTO:+0000
+TZNAME:GMT
+DTSTART:19120101T000000
+RDATE:19120101T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0000
 TZOFFSETTO:+0100
 TZNAME:WAT
-DTSTART:19700101T000000
+DTSTART:19340226T000000
+RDATE:19340226T000000
 END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Africa/Porto-Novo.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Africa/Johannesburg.ics
===================================================================
--- libkcal/libical/zoneinfo/Africa/Johannesburg.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Africa/Johannesburg.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +1,38 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/Africa/Johannesburg
+TZID:/kde.org/Olson_20070327_1/Africa/Johannesburg
 X-LIC-LOCATION:Africa/Johannesburg
 BEGIN:STANDARD
+TZOFFSETFROM:+0152
+TZOFFSETTO:+0130
+TZNAME:SAST
+DTSTART:18920208T000000
+RDATE:18920208T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0130
+TZOFFSETTO:+0200
+TZNAME:SAST
+DTSTART:19030301T000000
+RDATE:19030301T000000
+END:STANDARD
+BEGIN:DAYLIGHT
 TZOFFSETFROM:+0200
+TZOFFSETTO:+0300
+TZNAME:SAST
+DTSTART:19420920T020000
+RDATE:19420920T020000
+RDATE:19430919T020000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0300
 TZOFFSETTO:+0200
 TZNAME:SAST
-DTSTART:19700101T000000
+DTSTART:19430321T020000
+RDATE:19430321T020000
+RDATE:19440319T020000
 END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Africa/Johannesburg.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Africa/Brazzaville.ics
===================================================================
--- libkcal/libical/zoneinfo/Africa/Brazzaville.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Africa/Brazzaville.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +1,15 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_4/Africa/Brazzaville
+TZID:/kde.org/Olson_20070327_1/Africa/Brazzaville
 X-LIC-LOCATION:Africa/Brazzaville
 BEGIN:STANDARD
-TZOFFSETFROM:+0100
+TZOFFSETFROM:+010108
 TZOFFSETTO:+0100
 TZNAME:WAT
-DTSTART:19700101T000000
+DTSTART:19120101T000000
+RDATE:19120101T000000
 END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Africa/Brazzaville.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Africa/Abidjan.ics
===================================================================
--- libkcal/libical/zoneinfo/Africa/Abidjan.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Africa/Abidjan.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +1,15 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_4/Africa/Abidjan
+TZID:/kde.org/Olson_20070327_1/Africa/Abidjan
 X-LIC-LOCATION:Africa/Abidjan
 BEGIN:STANDARD
-TZOFFSETFROM:+0000
+TZOFFSETFROM:-001608
 TZOFFSETTO:+0000
 TZNAME:GMT
-DTSTART:19700101T000000
+DTSTART:19120101T000000
+RDATE:19120101T000000
 END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Africa/Abidjan.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Africa/Libreville.ics
===================================================================
--- libkcal/libical/zoneinfo/Africa/Libreville.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Africa/Libreville.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +1,15 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_4/Africa/Libreville
+TZID:/kde.org/Olson_20070327_1/Africa/Libreville
 X-LIC-LOCATION:Africa/Libreville
 BEGIN:STANDARD
-TZOFFSETFROM:+0100
+TZOFFSETFROM:+003748
 TZOFFSETTO:+0100
 TZNAME:WAT
-DTSTART:19700101T000000
+DTSTART:19120101T000000
+RDATE:19120101T000000
 END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Africa/Libreville.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Africa/Freetown.ics
===================================================================
--- libkcal/libical/zoneinfo/Africa/Freetown.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Africa/Freetown.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +1,81 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/Africa/Freetown
+TZID:/kde.org/Olson_20070327_1/Africa/Freetown
 X-LIC-LOCATION:Africa/Freetown
 BEGIN:STANDARD
+TZOFFSETFROM:-0053
+TZOFFSETTO:-0053
+TZNAME:FMT
+DTSTART:18820101T000000
+RDATE:18820101T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-0053
+TZOFFSETTO:-0100
+TZNAME:WAT
+DTSTART:19130601T000000
+RDATE:19130601T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0100
+TZOFFSETTO:-0020
+TZNAME:SLST
+DTSTART:19350601T000000
+RDATE:19350601T000000
+RDATE:19360601T000000
+RDATE:19370601T000000
+RDATE:19380601T000000
+RDATE:19390601T000000
+RDATE:19400601T000000
+RDATE:19410601T000000
+RDATE:19420601T000000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:-0020
+TZOFFSETTO:-0100
+TZNAME:WAT
+DTSTART:19351001T000000
+RDATE:19351001T000000
+RDATE:19361001T000000
+RDATE:19371001T000000
+RDATE:19381001T000000
+RDATE:19391001T000000
+RDATE:19401001T000000
+RDATE:19411001T000000
+RDATE:19421001T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-0100
+TZOFFSETTO:+0000
+TZNAME:GMT
+DTSTART:19570101T000000
+RDATE:19570101T000000
+END:STANDARD
+BEGIN:DAYLIGHT
 TZOFFSETFROM:+0000
+TZOFFSETTO:+0100
+TZNAME:SLST
+DTSTART:19570601T000000
+RDATE:19570601T000000
+RDATE:19580601T000000
+RDATE:19590601T000000
+RDATE:19600601T000000
+RDATE:19610601T000000
+RDATE:19620601T000000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0100
 TZOFFSETTO:+0000
 TZNAME:GMT
-DTSTART:19700101T000000
+DTSTART:19570901T000000
+RDATE:19570901T000000
+RDATE:19580901T000000
+RDATE:19590901T000000
+RDATE:19600901T000000
+RDATE:19610901T000000
+RDATE:19620901T000000
 END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Africa/Freetown.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Africa/Addis_Ababa.ics
===================================================================
--- libkcal/libical/zoneinfo/Africa/Addis_Ababa.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Africa/Addis_Ababa.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +1,22 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/Africa/Addis_Ababa
+TZID:/kde.org/Olson_20070327_1/Africa/Addis_Ababa
 X-LIC-LOCATION:Africa/Addis_Ababa
 BEGIN:STANDARD
-TZOFFSETFROM:+0300
+TZOFFSETFROM:+023448
+TZOFFSETTO:+023520
+TZNAME:ADMT
+DTSTART:18700101T000000
+RDATE:18700101T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+023520
 TZOFFSETTO:+0300
 TZNAME:EAT
-DTSTART:19700101T000000
+DTSTART:19360505T000000
+RDATE:19360505T000000
 END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Africa/Addis_Ababa.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Africa/Bamako.ics
===================================================================
--- libkcal/libical/zoneinfo/Africa/Bamako.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Africa/Bamako.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +1,29 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/Africa/Bamako
+TZID:/kde.org/Olson_20070327_1/Africa/Bamako
 X-LIC-LOCATION:Africa/Bamako
 BEGIN:STANDARD
+TZOFFSETFROM:-0032
+TZOFFSETTO:+0000
+TZNAME:GMT
+DTSTART:19120101T000000
+RDATE:19120101T000000
+END:STANDARD
+BEGIN:STANDARD
 TZOFFSETFROM:+0000
+TZOFFSETTO:-0100
+TZNAME:WAT
+DTSTART:19340226T000000
+RDATE:19340226T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-0100
 TZOFFSETTO:+0000
 TZNAME:GMT
-DTSTART:19700101T000000
+DTSTART:19600620T000000
+RDATE:19600620T000000
 END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Africa/Bamako.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Africa/Lubumbashi.ics
===================================================================
--- libkcal/libical/zoneinfo/Africa/Lubumbashi.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Africa/Lubumbashi.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +1,15 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_4/Africa/Lubumbashi
+TZID:/kde.org/Olson_20070327_1/Africa/Lubumbashi
 X-LIC-LOCATION:Africa/Lubumbashi
 BEGIN:STANDARD
-TZOFFSETFROM:+0200
+TZOFFSETFROM:+014952
 TZOFFSETTO:+0200
 TZNAME:CAT
-DTSTART:19700101T000000
+DTSTART:18971109T000000
+RDATE:18971109T000000
 END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Africa/Lubumbashi.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Africa/Gaborone.ics
===================================================================
--- libkcal/libical/zoneinfo/Africa/Gaborone.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Africa/Gaborone.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +1,29 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/Africa/Gaborone
+TZID:/kde.org/Olson_20070327_1/Africa/Gaborone
 X-LIC-LOCATION:Africa/Gaborone
 BEGIN:STANDARD
+TZOFFSETFROM:+014340
+TZOFFSETTO:+0200
+TZNAME:CAT
+DTSTART:18850101T000000
+RDATE:18850101T000000
+END:STANDARD
+BEGIN:DAYLIGHT
 TZOFFSETFROM:+0200
+TZOFFSETTO:+0300
+TZNAME:CAST
+DTSTART:19430919T020000
+RDATE:19430919T020000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0300
 TZOFFSETTO:+0200
 TZNAME:CAT
-DTSTART:19700101T000000
+DTSTART:19440319T020000
+RDATE:19440319T020000
 END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Africa/Gaborone.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Africa/Cairo.ics
===================================================================
--- libkcal/libical/zoneinfo/Africa/Cairo.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Africa/Cairo.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,22 +1,147 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/Africa/Cairo
+TZID:/kde.org/Olson_20070327_1/Africa/Cairo
 X-LIC-LOCATION:Africa/Cairo
 BEGIN:DAYLIGHT
 TZOFFSETFROM:+0200
 TZOFFSETTO:+0300
 TZNAME:EEST
-DTSTART:19700424T000000
+DTSTART:19950428T000000
 RRULE:FREQ=YEARLY;BYMONTH=4;BYDAY=-1FR
 END:DAYLIGHT
 BEGIN:STANDARD
+TZOFFSETFROM:+0200
+TZOFFSETTO:+0200
+TZNAME:EET
+DTSTART:20070927T230000
+RRULE:FREQ=YEARLY;BYMONTH=9;BYDAY=-1TH
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0205
+TZOFFSETTO:+0200
+TZNAME:EET
+DTSTART:19001001T000000
+RDATE:19001001T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0200
+TZOFFSETTO:+0300
+TZNAME:EEST
+DTSTART:19400715T000000
+RDATE:19400715T000000
+RDATE:19410415T000000
+RDATE:19420401T000000
+RDATE:19430401T000000
+RDATE:19440401T000000
+RDATE:19450416T000000
+RDATE:19570510T000000
+RDATE:19580501T000000
+RDATE:19590501T010000
+RDATE:19600501T010000
+RDATE:19610501T010000
+RDATE:19620501T010000
+RDATE:19630501T010000
+RDATE:19640501T010000
+RDATE:19650501T010000
+RDATE:19660501T010000
+RDATE:19670501T010000
+RDATE:19680501T010000
+RDATE:19690501T010000
+RDATE:19700501T010000
+RDATE:19710501T010000
+RDATE:19720501T010000
+RDATE:19730501T010000
+RDATE:19740501T010000
+RDATE:19750501T010000
+RDATE:19760501T010000
+RDATE:19770501T010000
+RDATE:19780501T010000
+RDATE:19790501T010000
+RDATE:19800501T010000
+RDATE:19810501T010000
+RDATE:19820725T010000
+RDATE:19830712T010000
+RDATE:19840501T010000
+RDATE:19850501T010000
+RDATE:19860501T010000
+RDATE:19870501T010000
+RDATE:19880501T010000
+RDATE:19890506T010000
+RDATE:19900501T010000
+RDATE:19910501T010000
+RDATE:19920501T010000
+RDATE:19930501T010000
+RDATE:19940501T010000
+END:DAYLIGHT
+BEGIN:STANDARD
 TZOFFSETFROM:+0300
 TZOFFSETTO:+0200
 TZNAME:EET
-DTSTART:19700925T000000
-RRULE:FREQ=YEARLY;BYMONTH=9;BYDAY=-1FR
+DTSTART:19401001T000000
+RDATE:19401001T000000
+RDATE:19410916T000000
+RDATE:19421027T000000
+RDATE:19431101T000000
+RDATE:19441101T000000
+RDATE:19451101T000000
+RDATE:19571001T000000
+RDATE:19581001T000000
+RDATE:19590930T030000
+RDATE:19600930T030000
+RDATE:19610930T030000
+RDATE:19620930T030000
+RDATE:19630930T030000
+RDATE:19640930T030000
+RDATE:19650930T030000
+RDATE:19661001T030000
+RDATE:19671001T030000
+RDATE:19681001T030000
+RDATE:19691001T030000
+RDATE:19701001T030000
+RDATE:19711001T030000
+RDATE:19721001T030000
+RDATE:19731001T030000
+RDATE:19741001T030000
+RDATE:19751001T030000
+RDATE:19761001T030000
+RDATE:19771001T030000
+RDATE:19781001T030000
+RDATE:19791001T030000
+RDATE:19801001T030000
+RDATE:19811001T030000
+RDATE:19821001T030000
+RDATE:19831001T030000
+RDATE:19841001T030000
+RDATE:19851001T030000
+RDATE:19861001T030000
+RDATE:19871001T030000
+RDATE:19881001T030000
+RDATE:19891001T030000
+RDATE:19901001T030000
+RDATE:19911001T030000
+RDATE:19921001T030000
+RDATE:19931001T030000
+RDATE:19941001T030000
+RDATE:19950929T000000
+RDATE:19960927T000000
+RDATE:19970926T000000
+RDATE:19980925T000000
+RDATE:19991001T000000
+RDATE:20000929T000000
+RDATE:20010928T000000
+RDATE:20020927T000000
 END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0200
+TZOFFSETTO:+0200
+TZNAME:EET
+DTSTART:20030925T230000
+RDATE:20030925T230000
+RDATE:20040930T230000
+RDATE:20050929T230000
+RDATE:20060921T230000
+END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Africa/Cairo.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Africa/Kigali.ics
===================================================================
--- libkcal/libical/zoneinfo/Africa/Kigali.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Africa/Kigali.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +1,15 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_4/Africa/Kigali
+TZID:/kde.org/Olson_20070327_1/Africa/Kigali
 X-LIC-LOCATION:Africa/Kigali
 BEGIN:STANDARD
-TZOFFSETFROM:+0200
+TZOFFSETFROM:+020016
 TZOFFSETTO:+0200
 TZNAME:CAT
-DTSTART:19700101T000000
+DTSTART:19350601T000000
+RDATE:19350601T000000
 END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Africa/Kigali.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Africa/Ceuta.ics
===================================================================
--- libkcal/libical/zoneinfo/Africa/Ceuta.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Africa/Ceuta.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,22 +1,99 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/Africa/Ceuta
+TZID:/kde.org/Olson_20070327_1/Africa/Ceuta
 X-LIC-LOCATION:Africa/Ceuta
 BEGIN:DAYLIGHT
 TZOFFSETFROM:+0100
 TZOFFSETTO:+0200
 TZNAME:CEST
-DTSTART:19700329T020000
+DTSTART:19860330T020000
 RRULE:FREQ=YEARLY;BYMONTH=3;BYDAY=-1SU
 END:DAYLIGHT
 BEGIN:STANDARD
 TZOFFSETFROM:+0200
 TZOFFSETTO:+0100
 TZNAME:CET
-DTSTART:19701025T030000
+DTSTART:19961027T030000
 RRULE:FREQ=YEARLY;BYMONTH=10;BYDAY=-1SU
 END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-002116
+TZOFFSETTO:+0000
+TZNAME:WET
+DTSTART:19010101T000000
+RDATE:19010101T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0000
+TZOFFSETTO:+0100
+TZNAME:WEST
+DTSTART:19180506T230000
+RDATE:19180506T230000
+RDATE:19240416T230000
+RDATE:19260417T230000
+RDATE:19270409T230000
+RDATE:19280414T230000
+RDATE:19670603T120000
+RDATE:19740624T000000
+RDATE:19760501T000000
+RDATE:19770501T000000
+RDATE:19780601T000000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0100
+TZOFFSETTO:+0000
+TZNAME:WET
+DTSTART:19181007T230000
+RDATE:19181007T230000
+RDATE:19241005T000000
+RDATE:19261003T000000
+RDATE:19271002T000000
+RDATE:19281007T000000
+RDATE:19671001T000000
+RDATE:19740901T000000
+RDATE:19760801T000000
+RDATE:19770928T000000
+RDATE:19780804T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0000
+TZOFFSETTO:+0000
+TZNAME:WET
+DTSTART:19240101T000000
+RDATE:19240101T000000
+RDATE:19290101T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0000
+TZOFFSETTO:+0100
+TZNAME:CET
+DTSTART:19840316T000000
+RDATE:19840316T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0100
+TZOFFSETTO:+0100
+TZNAME:CET
+DTSTART:19860101T000000
+RDATE:19860101T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0200
+TZOFFSETTO:+0100
+TZNAME:CET
+DTSTART:19860928T030000
+RDATE:19860928T030000
+RDATE:19870927T030000
+RDATE:19880925T030000
+RDATE:19890924T030000
+RDATE:19900930T030000
+RDATE:19910929T030000
+RDATE:19920927T030000
+RDATE:19930926T030000
+RDATE:19940925T030000
+RDATE:19950924T030000
+END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Africa/Ceuta.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Africa/Harare.ics
===================================================================
--- libkcal/libical/zoneinfo/Africa/Harare.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Africa/Harare.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +1,15 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_4/Africa/Harare
+TZID:/kde.org/Olson_20070327_1/Africa/Harare
 X-LIC-LOCATION:Africa/Harare
 BEGIN:STANDARD
-TZOFFSETFROM:+0200
+TZOFFSETFROM:+020412
 TZOFFSETTO:+0200
 TZNAME:CAT
-DTSTART:19700101T000000
+DTSTART:19030301T000000
+RDATE:19030301T000000
 END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Africa/Harare.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Africa/Tunis.ics
===================================================================
--- libkcal/libical/zoneinfo/Africa/Tunis.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Africa/Tunis.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +1,74 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/Africa/Tunis
+TZID:/kde.org/Olson_20070327_1/Africa/Tunis
 X-LIC-LOCATION:Africa/Tunis
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0100
+TZOFFSETTO:+0200
+TZNAME:CEST
+DTSTART:20060326T020000
+RRULE:FREQ=YEARLY;BYMONTH=3;BYDAY=-1SU
+END:DAYLIGHT
 BEGIN:STANDARD
+TZOFFSETFROM:+0200
+TZOFFSETTO:+0100
+TZNAME:CET
+DTSTART:20061029T030000
+RRULE:FREQ=YEARLY;BYMONTH=10;BYDAY=-1SU
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+004044
+TZOFFSETTO:+000921
+TZNAME:PMT
+DTSTART:18810512T000000
+RDATE:18810512T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+000921
+TZOFFSETTO:+0100
+TZNAME:CET
+DTSTART:19110311T000000
+RDATE:19110311T000000
+END:STANDARD
+BEGIN:DAYLIGHT
 TZOFFSETFROM:+0100
+TZOFFSETTO:+0200
+TZNAME:CEST
+DTSTART:19390415T230000
+RDATE:19390415T230000
+RDATE:19400225T230000
+RDATE:19420309T000000
+RDATE:19430329T020000
+RDATE:19430425T020000
+RDATE:19440403T020000
+RDATE:19450402T020000
+RDATE:19770430T000000
+RDATE:19780501T000000
+RDATE:19880601T000000
+RDATE:19890326T000000
+RDATE:19900501T000000
+RDATE:20050501T000000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0200
 TZOFFSETTO:+0100
 TZNAME:CET
-DTSTART:19700101T000000
+DTSTART:19391119T000000
+RDATE:19391119T000000
+RDATE:19411006T000000
+RDATE:19421102T030000
+RDATE:19430417T020000
+RDATE:19431004T020000
+RDATE:19441008T000000
+RDATE:19450916T000000
+RDATE:19770924T010000
+RDATE:19781001T010000
+RDATE:19880925T010000
+RDATE:19890924T010000
+RDATE:19900930T010000
+RDATE:20050930T020000
 END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Africa/Tunis.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Africa/Asmara.ics
===================================================================
--- libkcal/libical/zoneinfo/Africa/Asmara.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 0)
+++ libkcal/libical/zoneinfo/Africa/Asmara.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -0,0 +1,29 @@
+BEGIN:VCALENDAR
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
+VERSION:2.0
+BEGIN:VTIMEZONE
+TZID:/kde.org/Olson_20070327_1/Africa/Asmara
+X-LIC-LOCATION:Africa/Asmara
+BEGIN:STANDARD
+TZOFFSETFROM:+023532
+TZOFFSETTO:+023532
+TZNAME:AMT
+DTSTART:18700101T000000
+RDATE:18700101T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+023532
+TZOFFSETTO:+023520
+TZNAME:ADMT
+DTSTART:18900101T000000
+RDATE:18900101T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+023520
+TZOFFSETTO:+0300
+TZNAME:EAT
+DTSTART:19360505T000000
+RDATE:19360505T000000
+END:STANDARD
+END:VTIMEZONE
+END:VCALENDAR
Index: libkcal/libical/zoneinfo/Africa/Maputo.ics
===================================================================
--- libkcal/libical/zoneinfo/Africa/Maputo.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Africa/Maputo.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +1,15 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_4/Africa/Maputo
+TZID:/kde.org/Olson_20070327_1/Africa/Maputo
 X-LIC-LOCATION:Africa/Maputo
 BEGIN:STANDARD
-TZOFFSETFROM:+0200
+TZOFFSETFROM:+021020
 TZOFFSETTO:+0200
 TZNAME:CAT
-DTSTART:19700101T000000
+DTSTART:19030301T000000
+RDATE:19030301T000000
 END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Africa/Maputo.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Africa/Kampala.ics
===================================================================
--- libkcal/libical/zoneinfo/Africa/Kampala.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Africa/Kampala.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +1,36 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/Africa/Kampala
+TZID:/kde.org/Olson_20070327_1/Africa/Kampala
 X-LIC-LOCATION:Africa/Kampala
 BEGIN:STANDARD
+TZOFFSETFROM:+020940
+TZOFFSETTO:+0300
+TZNAME:EAT
+DTSTART:19280701T000000
+RDATE:19280701T000000
+END:STANDARD
+BEGIN:STANDARD
 TZOFFSETFROM:+0300
+TZOFFSETTO:+0230
+TZNAME:BEAT
+DTSTART:19300101T000000
+RDATE:19300101T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0230
+TZOFFSETTO:+024445
+TZNAME:BEAUT
+DTSTART:19480101T000000
+RDATE:19480101T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+024445
 TZOFFSETTO:+0300
 TZNAME:EAT
-DTSTART:19700101T000000
+DTSTART:19570101T000000
+RDATE:19570101T000000
 END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Africa/Kampala.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Africa/Conakry.ics
===================================================================
--- libkcal/libical/zoneinfo/Africa/Conakry.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Africa/Conakry.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +1,29 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/Africa/Conakry
+TZID:/kde.org/Olson_20070327_1/Africa/Conakry
 X-LIC-LOCATION:Africa/Conakry
 BEGIN:STANDARD
+TZOFFSETFROM:-005452
+TZOFFSETTO:+0000
+TZNAME:GMT
+DTSTART:19120101T000000
+RDATE:19120101T000000
+END:STANDARD
+BEGIN:STANDARD
 TZOFFSETFROM:+0000
+TZOFFSETTO:-0100
+TZNAME:WAT
+DTSTART:19340226T000000
+RDATE:19340226T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-0100
 TZOFFSETTO:+0000
 TZNAME:GMT
-DTSTART:19700101T000000
+DTSTART:19600101T000000
+RDATE:19600101T000000
 END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Africa/Conakry.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Africa/Casablanca.ics
===================================================================
--- libkcal/libical/zoneinfo/Africa/Casablanca.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Africa/Casablanca.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +1,51 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/Africa/Casablanca
+TZID:/kde.org/Olson_20070327_1/Africa/Casablanca
 X-LIC-LOCATION:Africa/Casablanca
 BEGIN:STANDARD
+TZOFFSETFROM:-003020
+TZOFFSETTO:+0000
+TZNAME:WET
+DTSTART:19131026T000000
+RDATE:19131026T000000
+END:STANDARD
+BEGIN:DAYLIGHT
 TZOFFSETFROM:+0000
+TZOFFSETTO:+0100
+TZNAME:WEST
+DTSTART:19390912T000000
+RDATE:19390912T000000
+RDATE:19400225T000000
+RDATE:19500611T000000
+RDATE:19670603T120000
+RDATE:19740624T000000
+RDATE:19760501T000000
+RDATE:19770501T000000
+RDATE:19780601T000000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0100
 TZOFFSETTO:+0000
 TZNAME:WET
-DTSTART:19700101T000000
+DTSTART:19391119T000000
+RDATE:19391119T000000
+RDATE:19451118T000000
+RDATE:19501029T000000
+RDATE:19671001T000000
+RDATE:19740901T000000
+RDATE:19760801T000000
+RDATE:19770928T000000
+RDATE:19780804T000000
+RDATE:19860101T000000
 END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0000
+TZOFFSETTO:+0100
+TZNAME:CET
+DTSTART:19840316T000000
+RDATE:19840316T000000
+END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Africa/Casablanca.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Africa/Dar_es_Salaam.ics
===================================================================
--- libkcal/libical/zoneinfo/Africa/Dar_es_Salaam.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Africa/Dar_es_Salaam.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +1,29 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/Africa/Dar_es_Salaam
+TZID:/kde.org/Olson_20070327_1/Africa/Dar_es_Salaam
 X-LIC-LOCATION:Africa/Dar_es_Salaam
 BEGIN:STANDARD
+TZOFFSETFROM:+023708
+TZOFFSETTO:+0300
+TZNAME:EAT
+DTSTART:19310101T000000
+RDATE:19310101T000000
+END:STANDARD
+BEGIN:STANDARD
 TZOFFSETFROM:+0300
+TZOFFSETTO:+024445
+TZNAME:BEAUT
+DTSTART:19480101T000000
+RDATE:19480101T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+024445
 TZOFFSETTO:+0300
 TZNAME:EAT
-DTSTART:19700101T000000
+DTSTART:19610101T000000
+RDATE:19610101T000000
 END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Africa/Dar_es_Salaam.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Africa/Nouakchott.ics
===================================================================
--- libkcal/libical/zoneinfo/Africa/Nouakchott.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Africa/Nouakchott.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +1,29 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/Africa/Nouakchott
+TZID:/kde.org/Olson_20070327_1/Africa/Nouakchott
 X-LIC-LOCATION:Africa/Nouakchott
 BEGIN:STANDARD
+TZOFFSETFROM:-010348
+TZOFFSETTO:+0000
+TZNAME:GMT
+DTSTART:19120101T000000
+RDATE:19120101T000000
+END:STANDARD
+BEGIN:STANDARD
 TZOFFSETFROM:+0000
+TZOFFSETTO:-0100
+TZNAME:WAT
+DTSTART:19340226T000000
+RDATE:19340226T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-0100
 TZOFFSETTO:+0000
 TZNAME:GMT
-DTSTART:19700101T000000
+DTSTART:19601128T000000
+RDATE:19601128T000000
 END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Africa/Nouakchott.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Africa/Blantyre.ics
===================================================================
--- libkcal/libical/zoneinfo/Africa/Blantyre.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Africa/Blantyre.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +1,15 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_4/Africa/Blantyre
+TZID:/kde.org/Olson_20070327_1/Africa/Blantyre
 X-LIC-LOCATION:Africa/Blantyre
 BEGIN:STANDARD
-TZOFFSETFROM:+0200
+TZOFFSETFROM:+0220
 TZOFFSETTO:+0200
 TZNAME:CAT
-DTSTART:19700101T000000
+DTSTART:19030301T000000
+RDATE:19030301T000000
 END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Africa/Blantyre.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Africa/Lusaka.ics
===================================================================
--- libkcal/libical/zoneinfo/Africa/Lusaka.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Africa/Lusaka.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +1,15 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_4/Africa/Lusaka
+TZID:/kde.org/Olson_20070327_1/Africa/Lusaka
 X-LIC-LOCATION:Africa/Lusaka
 BEGIN:STANDARD
-TZOFFSETFROM:+0200
+TZOFFSETFROM:+015308
 TZOFFSETTO:+0200
 TZNAME:CAT
-DTSTART:19700101T000000
+DTSTART:19030301T000000
+RDATE:19030301T000000
 END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Africa/Lusaka.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Africa/Dakar.ics
===================================================================
--- libkcal/libical/zoneinfo/Africa/Dakar.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Africa/Dakar.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +1,22 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/Africa/Dakar
+TZID:/kde.org/Olson_20070327_1/Africa/Dakar
 X-LIC-LOCATION:Africa/Dakar
 BEGIN:STANDARD
-TZOFFSETFROM:+0000
+TZOFFSETFROM:-010944
+TZOFFSETTO:-0100
+TZNAME:WAT
+DTSTART:19120101T000000
+RDATE:19120101T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-0100
 TZOFFSETTO:+0000
 TZNAME:GMT
-DTSTART:19700101T000000
+DTSTART:19410601T000000
+RDATE:19410601T000000
 END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Africa/Dakar.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Africa/Niamey.ics
===================================================================
--- libkcal/libical/zoneinfo/Africa/Niamey.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Africa/Niamey.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +1,29 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/Africa/Niamey
+TZID:/kde.org/Olson_20070327_1/Africa/Niamey
 X-LIC-LOCATION:Africa/Niamey
 BEGIN:STANDARD
-TZOFFSETFROM:+0100
+TZOFFSETFROM:+000828
+TZOFFSETTO:-0100
+TZNAME:WAT
+DTSTART:19120101T000000
+RDATE:19120101T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-0100
+TZOFFSETTO:+0000
+TZNAME:GMT
+DTSTART:19340226T000000
+RDATE:19340226T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0000
 TZOFFSETTO:+0100
 TZNAME:WAT
-DTSTART:19700101T000000
+DTSTART:19600101T000000
+RDATE:19600101T000000
 END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Africa/Niamey.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Africa/Tripoli.ics
===================================================================
--- libkcal/libical/zoneinfo/Africa/Tripoli.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Africa/Tripoli.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +1,67 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/Africa/Tripoli
+TZID:/kde.org/Olson_20070327_1/Africa/Tripoli
 X-LIC-LOCATION:Africa/Tripoli
 BEGIN:STANDARD
+TZOFFSETFROM:+005244
+TZOFFSETTO:+0100
+TZNAME:CET
+DTSTART:19200101T000000
+RDATE:19200101T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0100
+TZOFFSETTO:+0200
+TZNAME:CEST
+DTSTART:19511014T020000
+RDATE:19511014T020000
+RDATE:19531009T020000
+RDATE:19550930T000000
+RDATE:19820401T000000
+RDATE:19830401T000000
+RDATE:19840401T000000
+RDATE:19850406T000000
+RDATE:19860404T000000
+RDATE:19870401T000000
+RDATE:19880401T000000
+RDATE:19890401T000000
+RDATE:19970404T000000
+END:DAYLIGHT
+BEGIN:STANDARD
 TZOFFSETFROM:+0200
+TZOFFSETTO:+0100
+TZNAME:CET
+DTSTART:19520101T000000
+RDATE:19520101T000000
+RDATE:19540101T000000
+RDATE:19560101T000000
+RDATE:19820101T000000
+RDATE:19821001T000000
+RDATE:19831001T000000
+RDATE:19841001T000000
+RDATE:19851001T000000
+RDATE:19861003T000000
+RDATE:19871001T000000
+RDATE:19881001T000000
+RDATE:19891001T000000
+RDATE:19960930T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0100
 TZOFFSETTO:+0200
 TZNAME:EET
-DTSTART:19700101T000000
+DTSTART:19590101T000000
+RDATE:19590101T000000
+RDATE:19900504T000000
 END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0200
+TZOFFSETTO:+0200
+TZNAME:EET
+DTSTART:19971004T000000
+RDATE:19971004T000000
+END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Africa/Tripoli.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Africa/Nairobi.ics
===================================================================
--- libkcal/libical/zoneinfo/Africa/Nairobi.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Africa/Nairobi.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +1,36 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/Africa/Nairobi
+TZID:/kde.org/Olson_20070327_1/Africa/Nairobi
 X-LIC-LOCATION:Africa/Nairobi
 BEGIN:STANDARD
+TZOFFSETFROM:+022716
+TZOFFSETTO:+0300
+TZNAME:EAT
+DTSTART:19280701T000000
+RDATE:19280701T000000
+END:STANDARD
+BEGIN:STANDARD
 TZOFFSETFROM:+0300
+TZOFFSETTO:+0230
+TZNAME:BEAT
+DTSTART:19300101T000000
+RDATE:19300101T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0230
+TZOFFSETTO:+024445
+TZNAME:BEAUT
+DTSTART:19400101T000000
+RDATE:19400101T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+024445
 TZOFFSETTO:+0300
 TZNAME:EAT
-DTSTART:19700101T000000
+DTSTART:19600101T000000
+RDATE:19600101T000000
 END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Africa/Nairobi.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Africa/Mbabane.ics
===================================================================
--- libkcal/libical/zoneinfo/Africa/Mbabane.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Africa/Mbabane.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +1,15 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_4/Africa/Mbabane
+TZID:/kde.org/Olson_20070327_1/Africa/Mbabane
 X-LIC-LOCATION:Africa/Mbabane
 BEGIN:STANDARD
-TZOFFSETFROM:+0200
+TZOFFSETFROM:+020424
 TZOFFSETTO:+0200
 TZNAME:SAST
-DTSTART:19700101T000000
+DTSTART:19030301T000000
+RDATE:19030301T000000
 END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Africa/Mbabane.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Africa/Algiers.ics
===================================================================
--- libkcal/libical/zoneinfo/Africa/Algiers.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Africa/Algiers.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +1,90 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/Africa/Algiers
+TZID:/kde.org/Olson_20070327_1/Africa/Algiers
 X-LIC-LOCATION:Africa/Algiers
 BEGIN:STANDARD
+TZOFFSETFROM:+001212
+TZOFFSETTO:+000921
+TZNAME:PMT
+DTSTART:18910315T000100
+RDATE:18910315T000100
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+000921
+TZOFFSETTO:+0000
+TZNAME:WET
+DTSTART:19110311T000000
+RDATE:19110311T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0000
+TZOFFSETTO:+0100
+TZNAME:WEST
+DTSTART:19160614T230000
+RDATE:19160614T230000
+RDATE:19170324T230000
+RDATE:19180309T230000
+RDATE:19190301T230000
+RDATE:19200214T230000
+RDATE:19210314T230000
+RDATE:19390911T230000
+RDATE:19710425T230000
+RDATE:19770506T000000
+RDATE:19800425T000000
+END:DAYLIGHT
+BEGIN:STANDARD
 TZOFFSETFROM:+0100
+TZOFFSETTO:+0000
+TZNAME:WET
+DTSTART:19161002T000000
+RDATE:19161002T000000
+RDATE:19171008T000000
+RDATE:19181007T000000
+RDATE:19191006T000000
+RDATE:19201024T000000
+RDATE:19210622T000000
+RDATE:19391119T010000
+RDATE:19461007T000000
+RDATE:19630414T000000
+RDATE:19710927T000000
+RDATE:19791026T000000
+RDATE:19801031T020000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0000
 TZOFFSETTO:+0100
 TZNAME:CET
-DTSTART:19700101T000000
+DTSTART:19400225T020000
+RDATE:19400225T020000
+RDATE:19560129T000000
+RDATE:19810501T000000
 END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0100
+TZOFFSETTO:+0200
+TZNAME:CEST
+DTSTART:19440403T020000
+RDATE:19440403T020000
+RDATE:19450402T020000
+RDATE:19780324T010000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0200
+TZOFFSETTO:+0100
+TZNAME:CET
+DTSTART:19441008T020000
+RDATE:19441008T020000
+RDATE:19450916T010000
+RDATE:19780922T030000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0100
+TZOFFSETTO:+0100
+TZNAME:CET
+DTSTART:19771021T000000
+RDATE:19771021T000000
+END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Africa/Algiers.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Africa/Bissau.ics
===================================================================
--- libkcal/libical/zoneinfo/Africa/Bissau.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Africa/Bissau.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +1,22 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/Africa/Bissau
+TZID:/kde.org/Olson_20070327_1/Africa/Bissau
 X-LIC-LOCATION:Africa/Bissau
 BEGIN:STANDARD
-TZOFFSETFROM:+0000
+TZOFFSETFROM:-010220
+TZOFFSETTO:-0100
+TZNAME:WAT
+DTSTART:19110526T000000
+RDATE:19110526T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-0100
 TZOFFSETTO:+0000
 TZNAME:GMT
-DTSTART:19700101T000000
+DTSTART:19750101T000000
+RDATE:19750101T000000
 END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Africa/Bissau.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Africa/Khartoum.ics
===================================================================
--- libkcal/libical/zoneinfo/Africa/Khartoum.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Africa/Khartoum.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +1,66 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/Africa/Khartoum
+TZID:/kde.org/Olson_20070327_1/Africa/Khartoum
 X-LIC-LOCATION:Africa/Khartoum
 BEGIN:STANDARD
+TZOFFSETFROM:+021008
+TZOFFSETTO:+0200
+TZNAME:CAT
+DTSTART:19310101T000000
+RDATE:19310101T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0200
+TZOFFSETTO:+0300
+TZNAME:CAST
+DTSTART:19700501T000000
+RDATE:19700501T000000
+RDATE:19710430T000000
+RDATE:19720430T000000
+RDATE:19730429T000000
+RDATE:19740428T000000
+RDATE:19750427T000000
+RDATE:19760425T000000
+RDATE:19770424T000000
+RDATE:19780430T000000
+RDATE:19790429T000000
+RDATE:19800427T000000
+RDATE:19810426T000000
+RDATE:19820425T000000
+RDATE:19830424T000000
+RDATE:19840429T000000
+RDATE:19850428T000000
+END:DAYLIGHT
+BEGIN:STANDARD
 TZOFFSETFROM:+0300
+TZOFFSETTO:+0200
+TZNAME:CAT
+DTSTART:19701015T000000
+RDATE:19701015T000000
+RDATE:19711015T000000
+RDATE:19721015T000000
+RDATE:19731015T000000
+RDATE:19741015T000000
+RDATE:19751015T000000
+RDATE:19761015T000000
+RDATE:19771015T000000
+RDATE:19781015T000000
+RDATE:19791015T000000
+RDATE:19801015T000000
+RDATE:19811015T000000
+RDATE:19821015T000000
+RDATE:19831015T000000
+RDATE:19841015T000000
+RDATE:19851015T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0200
 TZOFFSETTO:+0300
 TZNAME:EAT
-DTSTART:19700101T000000
+DTSTART:20000115T120000
+RDATE:20000115T120000
 END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Africa/Khartoum.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Africa/Monrovia.ics
===================================================================
--- libkcal/libical/zoneinfo/Africa/Monrovia.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Africa/Monrovia.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +1,29 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/Africa/Monrovia
+TZID:/kde.org/Olson_20070327_1/Africa/Monrovia
 X-LIC-LOCATION:Africa/Monrovia
 BEGIN:STANDARD
-TZOFFSETFROM:+0000
+TZOFFSETFROM:-004308
+TZOFFSETTO:-004308
+TZNAME:MMT
+DTSTART:18820101T000000
+RDATE:18820101T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-004308
+TZOFFSETTO:-004430
+TZNAME:LRT
+DTSTART:19190301T000000
+RDATE:19190301T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-004430
 TZOFFSETTO:+0000
 TZNAME:GMT
-DTSTART:19700101T000000
+DTSTART:19720501T000000
+RDATE:19720501T000000
 END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Africa/Monrovia.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Africa/Malabo.ics
===================================================================
--- libkcal/libical/zoneinfo/Africa/Malabo.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Africa/Malabo.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +1,22 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/Africa/Malabo
+TZID:/kde.org/Olson_20070327_1/Africa/Malabo
 X-LIC-LOCATION:Africa/Malabo
 BEGIN:STANDARD
-TZOFFSETFROM:+0100
+TZOFFSETFROM:+003508
+TZOFFSETTO:+0000
+TZNAME:GMT
+DTSTART:19120101T000000
+RDATE:19120101T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0000
 TZOFFSETTO:+0100
 TZNAME:WAT
-DTSTART:19700101T000000
+DTSTART:19631215T000000
+RDATE:19631215T000000
 END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Africa/Malabo.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Africa/Lome.ics
===================================================================
--- libkcal/libical/zoneinfo/Africa/Lome.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Africa/Lome.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +1,15 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_4/Africa/Lome
+TZID:/kde.org/Olson_20070327_1/Africa/Lome
 X-LIC-LOCATION:Africa/Lome
 BEGIN:STANDARD
-TZOFFSETFROM:+0000
+TZOFFSETFROM:+000452
 TZOFFSETTO:+0000
 TZNAME:GMT
-DTSTART:19700101T000000
+DTSTART:18930101T000000
+RDATE:18930101T000000
 END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Africa/Lome.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Africa/Bujumbura.ics
===================================================================
--- libkcal/libical/zoneinfo/Africa/Bujumbura.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Africa/Bujumbura.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +1,15 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_4/Africa/Bujumbura
+TZID:/kde.org/Olson_20070327_1/Africa/Bujumbura
 X-LIC-LOCATION:Africa/Bujumbura
 BEGIN:STANDARD
-TZOFFSETFROM:+0200
+TZOFFSETFROM:+015728
 TZOFFSETTO:+0200
 TZNAME:CAT
-DTSTART:19700101T000000
+DTSTART:18900101T000000
+RDATE:18900101T000000
 END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Africa/Bujumbura.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Africa/Maseru.ics
===================================================================
--- libkcal/libical/zoneinfo/Africa/Maseru.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Africa/Maseru.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +1,29 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/Africa/Maseru
+TZID:/kde.org/Olson_20070327_1/Africa/Maseru
 X-LIC-LOCATION:Africa/Maseru
 BEGIN:STANDARD
+TZOFFSETFROM:+0150
+TZOFFSETTO:+0200
+TZNAME:SAST
+DTSTART:19030301T000000
+RDATE:19030301T000000
+END:STANDARD
+BEGIN:DAYLIGHT
 TZOFFSETFROM:+0200
+TZOFFSETTO:+0300
+TZNAME:SAST
+DTSTART:19430919T020000
+RDATE:19430919T020000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0300
 TZOFFSETTO:+0200
 TZNAME:SAST
-DTSTART:19700101T000000
+DTSTART:19440319T020000
+RDATE:19440319T020000
 END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Africa/Maseru.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Africa/Kinshasa.ics
===================================================================
--- libkcal/libical/zoneinfo/Africa/Kinshasa.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Africa/Kinshasa.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +1,15 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_4/Africa/Kinshasa
+TZID:/kde.org/Olson_20070327_1/Africa/Kinshasa
 X-LIC-LOCATION:Africa/Kinshasa
 BEGIN:STANDARD
-TZOFFSETFROM:+0100
+TZOFFSETFROM:+010112
 TZOFFSETTO:+0100
 TZNAME:WAT
-DTSTART:19700101T000000
+DTSTART:18971109T000000
+RDATE:18971109T000000
 END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Africa/Kinshasa.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Arctic/Longyearbyen.ics
===================================================================
--- libkcal/libical/zoneinfo/Arctic/Longyearbyen.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Arctic/Longyearbyen.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,22 +1,89 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/Arctic/Longyearbyen
+TZID:/kde.org/Olson_20070327_1/Arctic/Longyearbyen
 X-LIC-LOCATION:Arctic/Longyearbyen
 BEGIN:DAYLIGHT
 TZOFFSETFROM:+0100
 TZOFFSETTO:+0200
 TZNAME:CEST
-DTSTART:19700329T020000
+DTSTART:19810329T020000
 RRULE:FREQ=YEARLY;BYMONTH=3;BYDAY=-1SU
 END:DAYLIGHT
 BEGIN:STANDARD
 TZOFFSETFROM:+0200
 TZOFFSETTO:+0100
 TZNAME:CET
-DTSTART:19701025T030000
+DTSTART:19961027T030000
 RRULE:FREQ=YEARLY;BYMONTH=10;BYDAY=-1SU
 END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0043
+TZOFFSETTO:+0100
+TZNAME:CET
+DTSTART:18950101T000000
+RDATE:18950101T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0100
+TZOFFSETTO:+0200
+TZNAME:CEST
+DTSTART:19160522T010000
+RDATE:19160522T010000
+RDATE:19400810T230000
+RDATE:19430329T020000
+RDATE:19440403T020000
+RDATE:19450402T020000
+RDATE:19590315T020000
+RDATE:19600320T020000
+RDATE:19610319T020000
+RDATE:19620318T020000
+RDATE:19630317T020000
+RDATE:19640315T020000
+RDATE:19650425T020000
+RDATE:19800406T020000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0200
+TZOFFSETTO:+0100
+TZNAME:CET
+DTSTART:19160930T000000
+RDATE:19160930T000000
+RDATE:19421102T030000
+RDATE:19431004T030000
+RDATE:19441002T030000
+RDATE:19451001T030000
+RDATE:19590920T030000
+RDATE:19600918T030000
+RDATE:19610917T030000
+RDATE:19620916T030000
+RDATE:19630915T030000
+RDATE:19640920T030000
+RDATE:19650919T030000
+RDATE:19800928T030000
+RDATE:19810927T030000
+RDATE:19820926T030000
+RDATE:19830925T030000
+RDATE:19840930T030000
+RDATE:19850929T030000
+RDATE:19860928T030000
+RDATE:19870927T030000
+RDATE:19880925T030000
+RDATE:19890924T030000
+RDATE:19900930T030000
+RDATE:19910929T030000
+RDATE:19920927T030000
+RDATE:19930926T030000
+RDATE:19940925T030000
+RDATE:19950924T030000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0100
+TZOFFSETTO:+0100
+TZNAME:CET
+DTSTART:19800101T000000
+RDATE:19800101T000000
+END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Arctic/Longyearbyen.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Australia/Lord_Howe.ics
===================================================================
--- libkcal/libical/zoneinfo/Australia/Lord_Howe.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Australia/Lord_Howe.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,22 +1,111 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/Australia/Lord_Howe
+TZID:/kde.org/Olson_20070327_1/Australia/Lord_Howe
 X-LIC-LOCATION:Australia/Lord_Howe
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+1030
+TZOFFSETTO:+1100
+TZNAME:LHST
+DTSTART:20011028T020000
+RRULE:FREQ=YEARLY;BYMONTH=10;BYDAY=-1SU
+END:DAYLIGHT
 BEGIN:STANDARD
-TZOFFSETFROM:+1100
+TZOFFSETFROM:+1030
 TZOFFSETTO:+1030
 TZNAME:LHST
-DTSTART:19700329T020000
+DTSTART:20070325T020000
 RRULE:FREQ=YEARLY;BYMONTH=3;BYDAY=-1SU
 END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+103620
+TZOFFSETTO:+1000
+TZNAME:EST
+DTSTART:18950201T000000
+RDATE:18950201T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+1000
+TZOFFSETTO:+1030
+TZNAME:LHST
+DTSTART:19810301T000000
+RDATE:19810301T000000
+END:STANDARD
 BEGIN:DAYLIGHT
 TZOFFSETFROM:+1030
+TZOFFSETTO:+1130
+TZNAME:LHST
+DTSTART:19811025T020000
+RDATE:19811025T020000
+RDATE:19821031T020000
+RDATE:19831030T020000
+RDATE:19841028T020000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+1130
+TZOFFSETTO:+1030
+TZNAME:LHST
+DTSTART:19820307T020000
+RDATE:19820307T020000
+RDATE:19830306T020000
+RDATE:19840304T020000
+RDATE:19850303T020000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+1030
 TZOFFSETTO:+1100
 TZNAME:LHST
-DTSTART:19701025T020000
-RRULE:FREQ=YEARLY;BYMONTH=10;BYDAY=-1SU
+DTSTART:19851027T020000
+RDATE:19851027T020000
+RDATE:19861019T020000
+RDATE:19871025T020000
+RDATE:19881030T020000
+RDATE:19891029T020000
+RDATE:19901028T020000
+RDATE:19911027T020000
+RDATE:19921025T020000
+RDATE:19931031T020000
+RDATE:19941030T020000
+RDATE:19951029T020000
+RDATE:19961027T020000
+RDATE:19971026T020000
+RDATE:19981025T020000
+RDATE:19991031T020000
+RDATE:20000827T020000
 END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+1100
+TZOFFSETTO:+1030
+TZNAME:LHST
+DTSTART:19860316T020000
+RDATE:19860316T020000
+RDATE:19870315T020000
+RDATE:19880320T020000
+RDATE:19890319T020000
+RDATE:19900304T020000
+RDATE:19910303T020000
+RDATE:19920301T020000
+RDATE:19930307T020000
+RDATE:19940306T020000
+RDATE:19950305T020000
+RDATE:19960331T020000
+RDATE:19970330T020000
+RDATE:19980329T020000
+RDATE:19990328T020000
+RDATE:20000326T020000
+RDATE:20010325T020000
+RDATE:20020331T020000
+RDATE:20030330T020000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+1030
+TZOFFSETTO:+1030
+TZNAME:LHST
+DTSTART:20040328T020000
+RDATE:20040328T020000
+RDATE:20050327T020000
+RDATE:20060402T020000
+END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Australia/Lord_Howe.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Australia/Perth.ics
===================================================================
--- libkcal/libical/zoneinfo/Australia/Perth.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Australia/Perth.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +1,52 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/Australia/Perth
+TZID:/kde.org/Olson_20070327_1/Australia/Perth
 X-LIC-LOCATION:Australia/Perth
 BEGIN:STANDARD
+TZOFFSETFROM:+074324
+TZOFFSETTO:+0800
+TZNAME:WST
+DTSTART:18951201T000000
+RDATE:18951201T000000
+END:STANDARD
+BEGIN:DAYLIGHT
 TZOFFSETFROM:+0800
+TZOFFSETTO:+0900
+TZNAME:WST
+DTSTART:19170101T000100
+RDATE:19170101T000100
+RDATE:19420101T020000
+RDATE:19420927T020000
+RDATE:19741027T020000
+RDATE:19831030T020000
+RDATE:19911117T020000
+RDATE:20061203T020000
+RDATE:20071028T020000
+RDATE:20081026T020000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0900
 TZOFFSETTO:+0800
 TZNAME:WST
-DTSTART:19700101T000000
+DTSTART:19170325T020000
+RDATE:19170325T020000
+RDATE:19420329T020000
+RDATE:19430328T020000
+RDATE:19750302T030000
+RDATE:19840304T030000
+RDATE:19920301T030000
+RDATE:20070325T030000
+RDATE:20080330T030000
+RDATE:20090329T030000
 END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0800
+TZOFFSETTO:+0800
+TZNAME:WST
+DTSTART:19430701T000000
+RDATE:19430701T000000
+END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Australia/Perth.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Australia/Darwin.ics
===================================================================
--- libkcal/libical/zoneinfo/Australia/Darwin.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Australia/Darwin.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +1,42 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/Australia/Darwin
+TZID:/kde.org/Olson_20070327_1/Australia/Darwin
 X-LIC-LOCATION:Australia/Darwin
 BEGIN:STANDARD
+TZOFFSETFROM:+084320
+TZOFFSETTO:+0900
+TZNAME:CST
+DTSTART:18950201T000000
+RDATE:18950201T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0900
+TZOFFSETTO:+0930
+TZNAME:CST
+DTSTART:18990501T000000
+RDATE:18990501T000000
+END:STANDARD
+BEGIN:DAYLIGHT
 TZOFFSETFROM:+0930
+TZOFFSETTO:+1030
+TZNAME:CST
+DTSTART:19170101T000100
+RDATE:19170101T000100
+RDATE:19420101T020000
+RDATE:19420927T020000
+RDATE:19431003T020000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+1030
 TZOFFSETTO:+0930
 TZNAME:CST
-DTSTART:19700101T000000
+DTSTART:19170325T020000
+RDATE:19170325T020000
+RDATE:19420329T020000
+RDATE:19430328T020000
+RDATE:19440326T020000
 END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Australia/Darwin.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Australia/Brisbane.ics
===================================================================
--- libkcal/libical/zoneinfo/Australia/Brisbane.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Australia/Brisbane.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +1,50 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/Australia/Brisbane
+TZID:/kde.org/Olson_20070327_1/Australia/Brisbane
 X-LIC-LOCATION:Australia/Brisbane
 BEGIN:STANDARD
+TZOFFSETFROM:+101208
+TZOFFSETTO:+1000
+TZNAME:EST
+DTSTART:18950101T000000
+RDATE:18950101T000000
+END:STANDARD
+BEGIN:DAYLIGHT
 TZOFFSETFROM:+1000
+TZOFFSETTO:+1100
+TZNAME:EST
+DTSTART:19170101T000100
+RDATE:19170101T000100
+RDATE:19420101T020000
+RDATE:19420927T020000
+RDATE:19431003T020000
+RDATE:19711031T020000
+RDATE:19891029T020000
+RDATE:19901028T020000
+RDATE:19911027T020000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+1100
 TZOFFSETTO:+1000
 TZNAME:EST
-DTSTART:19700101T000000
+DTSTART:19170325T020000
+RDATE:19170325T020000
+RDATE:19420329T020000
+RDATE:19430328T020000
+RDATE:19440326T020000
+RDATE:19720227T030000
+RDATE:19900304T030000
+RDATE:19910303T030000
+RDATE:19920301T030000
 END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+1000
+TZOFFSETTO:+1000
+TZNAME:EST
+DTSTART:19710101T000000
+RDATE:19710101T000000
+END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Australia/Brisbane.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Australia/Lindeman.ics
===================================================================
--- libkcal/libical/zoneinfo/Australia/Lindeman.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Australia/Lindeman.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +1,55 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/Australia/Lindeman
+TZID:/kde.org/Olson_20070327_1/Australia/Lindeman
 X-LIC-LOCATION:Australia/Lindeman
 BEGIN:STANDARD
+TZOFFSETFROM:+095556
+TZOFFSETTO:+1000
+TZNAME:EST
+DTSTART:18950101T000000
+RDATE:18950101T000000
+END:STANDARD
+BEGIN:DAYLIGHT
 TZOFFSETFROM:+1000
+TZOFFSETTO:+1100
+TZNAME:EST
+DTSTART:19170101T000100
+RDATE:19170101T000100
+RDATE:19420101T020000
+RDATE:19420927T020000
+RDATE:19431003T020000
+RDATE:19711031T020000
+RDATE:19891029T020000
+RDATE:19901028T020000
+RDATE:19911027T020000
+RDATE:19921025T020000
+RDATE:19931031T020000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+1100
 TZOFFSETTO:+1000
 TZNAME:EST
-DTSTART:19700101T000000
+DTSTART:19170325T020000
+RDATE:19170325T020000
+RDATE:19420329T020000
+RDATE:19430328T020000
+RDATE:19440326T020000
+RDATE:19720227T030000
+RDATE:19900304T030000
+RDATE:19910303T030000
+RDATE:19920301T030000
+RDATE:19930307T030000
+RDATE:19940306T030000
 END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+1000
+TZOFFSETTO:+1000
+TZNAME:EST
+DTSTART:19710101T000000
+RDATE:19710101T000000
+RDATE:19920701T000000
+END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Australia/Lindeman.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Australia/Adelaide.ics
===================================================================
--- libkcal/libical/zoneinfo/Australia/Adelaide.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Australia/Adelaide.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,22 +1,114 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/Australia/Adelaide
+TZID:/kde.org/Olson_20070327_1/Australia/Adelaide
 X-LIC-LOCATION:Australia/Adelaide
 BEGIN:DAYLIGHT
 TZOFFSETFROM:+0930
 TZOFFSETTO:+1030
 TZNAME:CST
-DTSTART:19701025T020000
+DTSTART:19871025T020000
 RRULE:FREQ=YEARLY;BYMONTH=10;BYDAY=-1SU
 END:DAYLIGHT
 BEGIN:STANDARD
-TZOFFSETFROM:+1030
+TZOFFSETFROM:+0930
 TZOFFSETTO:+0930
 TZNAME:CST
-DTSTART:19700329T030000
+DTSTART:20070325T020000
 RRULE:FREQ=YEARLY;BYMONTH=3;BYDAY=-1SU
 END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+091420
+TZOFFSETTO:+0900
+TZNAME:CST
+DTSTART:18950201T000000
+RDATE:18950201T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0900
+TZOFFSETTO:+0930
+TZNAME:CST
+DTSTART:18990501T000000
+RDATE:18990501T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0930
+TZOFFSETTO:+1030
+TZNAME:CST
+DTSTART:19170101T000100
+RDATE:19170101T000100
+RDATE:19420101T020000
+RDATE:19420927T020000
+RDATE:19431003T020000
+RDATE:19711031T020000
+RDATE:19721029T020000
+RDATE:19731028T020000
+RDATE:19741027T020000
+RDATE:19751026T020000
+RDATE:19761031T020000
+RDATE:19771030T020000
+RDATE:19781029T020000
+RDATE:19791028T020000
+RDATE:19801026T020000
+RDATE:19811025T020000
+RDATE:19821031T020000
+RDATE:19831030T020000
+RDATE:19841028T020000
+RDATE:19851027T020000
+RDATE:19861019T020000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+1030
+TZOFFSETTO:+0930
+TZNAME:CST
+DTSTART:19170325T020000
+RDATE:19170325T020000
+RDATE:19420329T020000
+RDATE:19430328T020000
+RDATE:19440326T020000
+RDATE:19720227T030000
+RDATE:19730304T030000
+RDATE:19740303T030000
+RDATE:19750302T030000
+RDATE:19760307T030000
+RDATE:19770306T030000
+RDATE:19780305T030000
+RDATE:19790304T030000
+RDATE:19800302T030000
+RDATE:19810301T030000
+RDATE:19820307T030000
+RDATE:19830306T030000
+RDATE:19840304T030000
+RDATE:19850303T030000
+RDATE:19860316T030000
+RDATE:19870315T030000
+RDATE:19880320T030000
+RDATE:19890319T030000
+RDATE:19900318T030000
+RDATE:19910303T030000
+RDATE:19920322T030000
+RDATE:19930307T030000
+RDATE:19940320T030000
+RDATE:19950326T030000
+RDATE:19960331T030000
+RDATE:19970330T030000
+RDATE:19980329T030000
+RDATE:19990328T030000
+RDATE:20000326T030000
+RDATE:20010325T030000
+RDATE:20020331T030000
+RDATE:20030330T030000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0930
+TZOFFSETTO:+0930
+TZNAME:CST
+DTSTART:19710101T000000
+RDATE:19710101T000000
+RDATE:20040328T020000
+RDATE:20050327T020000
+RDATE:20060402T020000
+END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Australia/Adelaide.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Australia/Broken_Hill.ics
===================================================================
--- libkcal/libical/zoneinfo/Australia/Broken_Hill.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Australia/Broken_Hill.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,22 +1,128 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/Australia/Broken_Hill
+TZID:/kde.org/Olson_20070327_1/Australia/Broken_Hill
 X-LIC-LOCATION:Australia/Broken_Hill
 BEGIN:DAYLIGHT
 TZOFFSETFROM:+0930
 TZOFFSETTO:+1030
 TZNAME:CST
-DTSTART:19701025T020000
+DTSTART:19871025T020000
 RRULE:FREQ=YEARLY;BYMONTH=10;BYDAY=-1SU
 END:DAYLIGHT
 BEGIN:STANDARD
-TZOFFSETFROM:+1030
+TZOFFSETFROM:+0930
 TZOFFSETTO:+0930
 TZNAME:CST
-DTSTART:19700329T030000
+DTSTART:20070325T020000
 RRULE:FREQ=YEARLY;BYMONTH=3;BYDAY=-1SU
 END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+092548
+TZOFFSETTO:+1000
+TZNAME:EST
+DTSTART:18950201T000000
+RDATE:18950201T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+1000
+TZOFFSETTO:+0900
+TZNAME:CST
+DTSTART:18960823T000000
+RDATE:18960823T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0900
+TZOFFSETTO:+0930
+TZNAME:CST
+DTSTART:18990501T000000
+RDATE:18990501T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0930
+TZOFFSETTO:+1030
+TZNAME:CST
+DTSTART:19170101T000100
+RDATE:19170101T000100
+RDATE:19420101T020000
+RDATE:19420927T020000
+RDATE:19431003T020000
+RDATE:19711031T020000
+RDATE:19721029T020000
+RDATE:19731028T020000
+RDATE:19741027T020000
+RDATE:19751026T020000
+RDATE:19761031T020000
+RDATE:19771030T020000
+RDATE:19781029T020000
+RDATE:19791028T020000
+RDATE:19801026T020000
+RDATE:19811025T020000
+RDATE:19821031T020000
+RDATE:19831030T020000
+RDATE:19841028T020000
+RDATE:19851027T020000
+RDATE:19861019T020000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+1030
+TZOFFSETTO:+0930
+TZNAME:CST
+DTSTART:19170325T020000
+RDATE:19170325T020000
+RDATE:19420329T020000
+RDATE:19430328T020000
+RDATE:19440326T020000
+RDATE:19720227T030000
+RDATE:19730304T030000
+RDATE:19740303T030000
+RDATE:19750302T030000
+RDATE:19760307T030000
+RDATE:19770306T030000
+RDATE:19780305T030000
+RDATE:19790304T030000
+RDATE:19800302T030000
+RDATE:19810301T030000
+RDATE:19820404T030000
+RDATE:19830306T030000
+RDATE:19840304T030000
+RDATE:19850303T030000
+RDATE:19860316T030000
+RDATE:19870315T030000
+RDATE:19880320T030000
+RDATE:19890319T030000
+RDATE:19900304T030000
+RDATE:19910303T030000
+RDATE:19920301T030000
+RDATE:19930307T030000
+RDATE:19940306T030000
+RDATE:19950305T030000
+RDATE:19960331T030000
+RDATE:19970330T030000
+RDATE:19980329T030000
+RDATE:19990328T030000
+RDATE:20000326T030000
+RDATE:20010325T030000
+RDATE:20020331T030000
+RDATE:20030330T030000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0930
+TZOFFSETTO:+0930
+TZNAME:CST
+DTSTART:19710101T000000
+RDATE:19710101T000000
+RDATE:20040328T020000
+RDATE:20050327T020000
+RDATE:20060402T020000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+1030
+TZOFFSETTO:+1030
+TZNAME:CST
+DTSTART:20000101T000000
+RDATE:20000101T000000
+END:DAYLIGHT
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Australia/Broken_Hill.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Australia/Melbourne.ics
===================================================================
--- libkcal/libical/zoneinfo/Australia/Melbourne.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Australia/Melbourne.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,22 +1,121 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/Australia/Melbourne
+TZID:/kde.org/Olson_20070327_1/Australia/Melbourne
 X-LIC-LOCATION:Australia/Melbourne
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+1000
+TZOFFSETTO:+1100
+TZNAME:EST
+DTSTART:20011028T020000
+RRULE:FREQ=YEARLY;BYMONTH=10;BYDAY=-1SU
+END:DAYLIGHT
 BEGIN:STANDARD
-TZOFFSETFROM:+1100
+TZOFFSETFROM:+1000
 TZOFFSETTO:+1000
 TZNAME:EST
-DTSTART:19700329T030000
+DTSTART:20070325T020000
 RRULE:FREQ=YEARLY;BYMONTH=3;BYDAY=-1SU
 END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+093952
+TZOFFSETTO:+1000
+TZNAME:EST
+DTSTART:18950201T000000
+RDATE:18950201T000000
+END:STANDARD
 BEGIN:DAYLIGHT
 TZOFFSETFROM:+1000
 TZOFFSETTO:+1100
 TZNAME:EST
-DTSTART:19701025T020000
-RRULE:FREQ=YEARLY;BYMONTH=10;BYDAY=-1SU
+DTSTART:19170101T000100
+RDATE:19170101T000100
+RDATE:19420101T020000
+RDATE:19420927T020000
+RDATE:19431003T020000
+RDATE:19711031T020000
+RDATE:19721029T020000
+RDATE:19731028T020000
+RDATE:19741027T020000
+RDATE:19751026T020000
+RDATE:19761031T020000
+RDATE:19771030T020000
+RDATE:19781029T020000
+RDATE:19791028T020000
+RDATE:19801026T020000
+RDATE:19811025T020000
+RDATE:19821031T020000
+RDATE:19831030T020000
+RDATE:19841028T020000
+RDATE:19851027T020000
+RDATE:19861019T020000
+RDATE:19871018T020000
+RDATE:19881030T020000
+RDATE:19891029T020000
+RDATE:19901028T020000
+RDATE:19911027T020000
+RDATE:19921025T020000
+RDATE:19931031T020000
+RDATE:19941030T020000
+RDATE:19951029T020000
+RDATE:19961027T020000
+RDATE:19971026T020000
+RDATE:19981025T020000
+RDATE:19991031T020000
+RDATE:20000827T020000
 END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+1100
+TZOFFSETTO:+1000
+TZNAME:EST
+DTSTART:19170325T020000
+RDATE:19170325T020000
+RDATE:19420329T020000
+RDATE:19430328T020000
+RDATE:19440326T020000
+RDATE:19720227T030000
+RDATE:19730304T030000
+RDATE:19740303T030000
+RDATE:19750302T030000
+RDATE:19760307T030000
+RDATE:19770306T030000
+RDATE:19780305T030000
+RDATE:19790304T030000
+RDATE:19800302T030000
+RDATE:19810301T030000
+RDATE:19820307T030000
+RDATE:19830306T030000
+RDATE:19840304T030000
+RDATE:19850303T030000
+RDATE:19860316T030000
+RDATE:19870315T030000
+RDATE:19880320T030000
+RDATE:19890319T030000
+RDATE:19900318T030000
+RDATE:19910303T030000
+RDATE:19920301T030000
+RDATE:19930307T030000
+RDATE:19940306T030000
+RDATE:19950326T030000
+RDATE:19960331T030000
+RDATE:19970330T030000
+RDATE:19980329T030000
+RDATE:19990328T030000
+RDATE:20000326T030000
+RDATE:20010325T030000
+RDATE:20020331T030000
+RDATE:20030330T030000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+1000
+TZOFFSETTO:+1000
+TZNAME:EST
+DTSTART:19710101T000000
+RDATE:19710101T000000
+RDATE:20040328T020000
+RDATE:20050327T020000
+RDATE:20060402T020000
+END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Australia/Melbourne.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Australia/Currie.ics
===================================================================
--- libkcal/libical/zoneinfo/Australia/Currie.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 0)
+++ libkcal/libical/zoneinfo/Australia/Currie.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -0,0 +1,128 @@
+BEGIN:VCALENDAR
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
+VERSION:2.0
+BEGIN:VTIMEZONE
+TZID:/kde.org/Olson_20070327_1/Australia/Currie
+X-LIC-LOCATION:Australia/Currie
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+1000
+TZOFFSETTO:+1100
+TZNAME:EST
+DTSTART:20011007T020000
+RRULE:FREQ=YEARLY;BYMONTH=10;BYDAY=1SU
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+1000
+TZOFFSETTO:+1000
+TZNAME:EST
+DTSTART:20070325T020000
+RRULE:FREQ=YEARLY;BYMONTH=3;BYDAY=-1SU
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+093528
+TZOFFSETTO:+1000
+TZNAME:EST
+DTSTART:18950901T000000
+RDATE:18950901T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+1000
+TZOFFSETTO:+1100
+TZNAME:EST
+DTSTART:19161001T020000
+RDATE:19161001T020000
+RDATE:19420101T020000
+RDATE:19420927T020000
+RDATE:19431003T020000
+RDATE:19711031T020000
+RDATE:19721029T020000
+RDATE:19731028T020000
+RDATE:19741027T020000
+RDATE:19751026T020000
+RDATE:19761031T020000
+RDATE:19771030T020000
+RDATE:19781029T020000
+RDATE:19791028T020000
+RDATE:19801026T020000
+RDATE:19811025T020000
+RDATE:19821031T020000
+RDATE:19831030T020000
+RDATE:19841028T020000
+RDATE:19851027T020000
+RDATE:19861019T020000
+RDATE:19871025T020000
+RDATE:19881030T020000
+RDATE:19891029T020000
+RDATE:19901028T020000
+RDATE:19911006T020000
+RDATE:19921004T020000
+RDATE:19931003T020000
+RDATE:19941002T020000
+RDATE:19951001T020000
+RDATE:19961006T020000
+RDATE:19971005T020000
+RDATE:19981004T020000
+RDATE:19991003T020000
+RDATE:20000827T020000
+END:DAYLIGHT
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+1100
+TZOFFSETTO:+1100
+TZNAME:EST
+DTSTART:19170201T000000
+RDATE:19170201T000000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+1100
+TZOFFSETTO:+1000
+TZNAME:EST
+DTSTART:19170325T020000
+RDATE:19170325T020000
+RDATE:19420329T020000
+RDATE:19430328T020000
+RDATE:19440326T020000
+RDATE:19720227T030000
+RDATE:19730304T030000
+RDATE:19740303T030000
+RDATE:19750302T030000
+RDATE:19760307T030000
+RDATE:19770306T030000
+RDATE:19780305T030000
+RDATE:19790304T030000
+RDATE:19800302T030000
+RDATE:19810301T030000
+RDATE:19820328T030000
+RDATE:19830327T030000
+RDATE:19840304T030000
+RDATE:19850303T030000
+RDATE:19860302T030000
+RDATE:19870315T030000
+RDATE:19880320T030000
+RDATE:19890319T030000
+RDATE:19900318T030000
+RDATE:19910331T030000
+RDATE:19920329T030000
+RDATE:19930328T030000
+RDATE:19940327T030000
+RDATE:19950326T030000
+RDATE:19960331T030000
+RDATE:19970330T030000
+RDATE:19980329T030000
+RDATE:19990328T030000
+RDATE:20000326T030000
+RDATE:20010325T030000
+RDATE:20020331T030000
+RDATE:20030330T030000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+1000
+TZOFFSETTO:+1000
+TZNAME:EST
+DTSTART:19710701T000000
+RDATE:19710701T000000
+RDATE:20040328T020000
+RDATE:20050327T020000
+RDATE:20060402T020000
+END:STANDARD
+END:VTIMEZONE
+END:VCALENDAR
Index: libkcal/libical/zoneinfo/Australia/Eucla.ics
===================================================================
--- libkcal/libical/zoneinfo/Australia/Eucla.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 0)
+++ libkcal/libical/zoneinfo/Australia/Eucla.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -0,0 +1,52 @@
+BEGIN:VCALENDAR
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
+VERSION:2.0
+BEGIN:VTIMEZONE
+TZID:/kde.org/Olson_20070327_1/Australia/Eucla
+X-LIC-LOCATION:Australia/Eucla
+BEGIN:STANDARD
+TZOFFSETFROM:+083528
+TZOFFSETTO:+0845
+TZNAME:CWST
+DTSTART:18951201T000000
+RDATE:18951201T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0845
+TZOFFSETTO:+0945
+TZNAME:CWST
+DTSTART:19170101T000100
+RDATE:19170101T000100
+RDATE:19420101T020000
+RDATE:19420927T020000
+RDATE:19741027T020000
+RDATE:19831030T020000
+RDATE:19911117T020000
+RDATE:20061203T020000
+RDATE:20071028T020000
+RDATE:20081026T020000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0945
+TZOFFSETTO:+0845
+TZNAME:CWST
+DTSTART:19170325T020000
+RDATE:19170325T020000
+RDATE:19420329T020000
+RDATE:19430328T020000
+RDATE:19750302T030000
+RDATE:19840304T030000
+RDATE:19920301T030000
+RDATE:20070325T030000
+RDATE:20080330T030000
+RDATE:20090329T030000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0845
+TZOFFSETTO:+0845
+TZNAME:CWST
+DTSTART:19430701T000000
+RDATE:19430701T000000
+END:STANDARD
+END:VTIMEZONE
+END:VCALENDAR
Index: libkcal/libical/zoneinfo/Australia/Sydney.ics
===================================================================
--- libkcal/libical/zoneinfo/Australia/Sydney.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Australia/Sydney.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,22 +1,121 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/Australia/Sydney
+TZID:/kde.org/Olson_20070327_1/Australia/Sydney
 X-LIC-LOCATION:Australia/Sydney
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+1000
+TZOFFSETTO:+1100
+TZNAME:EST
+DTSTART:20011028T020000
+RRULE:FREQ=YEARLY;BYMONTH=10;BYDAY=-1SU
+END:DAYLIGHT
 BEGIN:STANDARD
-TZOFFSETFROM:+1100
+TZOFFSETFROM:+1000
 TZOFFSETTO:+1000
 TZNAME:EST
-DTSTART:19700329T030000
+DTSTART:20070325T020000
 RRULE:FREQ=YEARLY;BYMONTH=3;BYDAY=-1SU
 END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+100452
+TZOFFSETTO:+1000
+TZNAME:EST
+DTSTART:18950201T000000
+RDATE:18950201T000000
+END:STANDARD
 BEGIN:DAYLIGHT
 TZOFFSETFROM:+1000
 TZOFFSETTO:+1100
 TZNAME:EST
-DTSTART:19701025T020000
-RRULE:FREQ=YEARLY;BYMONTH=10;BYDAY=-1SU
+DTSTART:19170101T000100
+RDATE:19170101T000100
+RDATE:19420101T020000
+RDATE:19420927T020000
+RDATE:19431003T020000
+RDATE:19711031T020000
+RDATE:19721029T020000
+RDATE:19731028T020000
+RDATE:19741027T020000
+RDATE:19751026T020000
+RDATE:19761031T020000
+RDATE:19771030T020000
+RDATE:19781029T020000
+RDATE:19791028T020000
+RDATE:19801026T020000
+RDATE:19811025T020000
+RDATE:19821031T020000
+RDATE:19831030T020000
+RDATE:19841028T020000
+RDATE:19851027T020000
+RDATE:19861019T020000
+RDATE:19871025T020000
+RDATE:19881030T020000
+RDATE:19891029T020000
+RDATE:19901028T020000
+RDATE:19911027T020000
+RDATE:19921025T020000
+RDATE:19931031T020000
+RDATE:19941030T020000
+RDATE:19951029T020000
+RDATE:19961027T020000
+RDATE:19971026T020000
+RDATE:19981025T020000
+RDATE:19991031T020000
+RDATE:20000827T020000
 END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+1100
+TZOFFSETTO:+1000
+TZNAME:EST
+DTSTART:19170325T020000
+RDATE:19170325T020000
+RDATE:19420329T020000
+RDATE:19430328T020000
+RDATE:19440326T020000
+RDATE:19720227T030000
+RDATE:19730304T030000
+RDATE:19740303T030000
+RDATE:19750302T030000
+RDATE:19760307T030000
+RDATE:19770306T030000
+RDATE:19780305T030000
+RDATE:19790304T030000
+RDATE:19800302T030000
+RDATE:19810301T030000
+RDATE:19820404T030000
+RDATE:19830306T030000
+RDATE:19840304T030000
+RDATE:19850303T030000
+RDATE:19860316T030000
+RDATE:19870315T030000
+RDATE:19880320T030000
+RDATE:19890319T030000
+RDATE:19900304T030000
+RDATE:19910303T030000
+RDATE:19920301T030000
+RDATE:19930307T030000
+RDATE:19940306T030000
+RDATE:19950305T030000
+RDATE:19960331T030000
+RDATE:19970330T030000
+RDATE:19980329T030000
+RDATE:19990328T030000
+RDATE:20000326T030000
+RDATE:20010325T030000
+RDATE:20020331T030000
+RDATE:20030330T030000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+1000
+TZOFFSETTO:+1000
+TZNAME:EST
+DTSTART:19710101T000000
+RDATE:19710101T000000
+RDATE:20040328T020000
+RDATE:20050327T020000
+RDATE:20060402T020000
+END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Australia/Sydney.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Australia/Hobart.ics
===================================================================
--- libkcal/libical/zoneinfo/Australia/Hobart.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Australia/Hobart.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,22 +1,136 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/Australia/Hobart
+TZID:/kde.org/Olson_20070327_1/Australia/Hobart
 X-LIC-LOCATION:Australia/Hobart
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+1000
+TZOFFSETTO:+1100
+TZNAME:EST
+DTSTART:20011007T020000
+RRULE:FREQ=YEARLY;BYMONTH=10;BYDAY=1SU
+END:DAYLIGHT
 BEGIN:STANDARD
-TZOFFSETFROM:+1100
+TZOFFSETFROM:+1000
 TZOFFSETTO:+1000
 TZNAME:EST
-DTSTART:19700329T030000
+DTSTART:20070325T020000
 RRULE:FREQ=YEARLY;BYMONTH=3;BYDAY=-1SU
 END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+094916
+TZOFFSETTO:+1000
+TZNAME:EST
+DTSTART:18950901T000000
+RDATE:18950901T000000
+END:STANDARD
 BEGIN:DAYLIGHT
 TZOFFSETFROM:+1000
 TZOFFSETTO:+1100
 TZNAME:EST
-DTSTART:19701004T020000
-RRULE:FREQ=YEARLY;BYMONTH=10;BYDAY=1SU
+DTSTART:19161001T020000
+RDATE:19161001T020000
+RDATE:19420101T020000
+RDATE:19420927T020000
+RDATE:19431003T020000
+RDATE:19671001T020000
+RDATE:19681027T020000
+RDATE:19691026T020000
+RDATE:19701025T020000
+RDATE:19711031T020000
+RDATE:19721029T020000
+RDATE:19731028T020000
+RDATE:19741027T020000
+RDATE:19751026T020000
+RDATE:19761031T020000
+RDATE:19771030T020000
+RDATE:19781029T020000
+RDATE:19791028T020000
+RDATE:19801026T020000
+RDATE:19811025T020000
+RDATE:19821031T020000
+RDATE:19831030T020000
+RDATE:19841028T020000
+RDATE:19851027T020000
+RDATE:19861019T020000
+RDATE:19871025T020000
+RDATE:19881030T020000
+RDATE:19891029T020000
+RDATE:19901028T020000
+RDATE:19911006T020000
+RDATE:19921004T020000
+RDATE:19931003T020000
+RDATE:19941002T020000
+RDATE:19951001T020000
+RDATE:19961006T020000
+RDATE:19971005T020000
+RDATE:19981004T020000
+RDATE:19991003T020000
+RDATE:20000827T020000
 END:DAYLIGHT
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+1100
+TZOFFSETTO:+1100
+TZNAME:EST
+DTSTART:19170201T000000
+RDATE:19170201T000000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+1100
+TZOFFSETTO:+1000
+TZNAME:EST
+DTSTART:19170325T020000
+RDATE:19170325T020000
+RDATE:19420329T020000
+RDATE:19430328T020000
+RDATE:19440326T020000
+RDATE:19680331T030000
+RDATE:19690309T030000
+RDATE:19700308T030000
+RDATE:19710314T030000
+RDATE:19720227T030000
+RDATE:19730304T030000
+RDATE:19740303T030000
+RDATE:19750302T030000
+RDATE:19760307T030000
+RDATE:19770306T030000
+RDATE:19780305T030000
+RDATE:19790304T030000
+RDATE:19800302T030000
+RDATE:19810301T030000
+RDATE:19820328T030000
+RDATE:19830327T030000
+RDATE:19840304T030000
+RDATE:19850303T030000
+RDATE:19860302T030000
+RDATE:19870315T030000
+RDATE:19880320T030000
+RDATE:19890319T030000
+RDATE:19900318T030000
+RDATE:19910331T030000
+RDATE:19920329T030000
+RDATE:19930328T030000
+RDATE:19940327T030000
+RDATE:19950326T030000
+RDATE:19960331T030000
+RDATE:19970330T030000
+RDATE:19980329T030000
+RDATE:19990328T030000
+RDATE:20000326T030000
+RDATE:20010325T030000
+RDATE:20020331T030000
+RDATE:20030330T030000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+1000
+TZOFFSETTO:+1000
+TZNAME:EST
+DTSTART:19670101T000000
+RDATE:19670101T000000
+RDATE:20040328T020000
+RDATE:20050327T020000
+RDATE:20060402T020000
+END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Australia/Hobart.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Antarctica/Syowa.ics
===================================================================
--- libkcal/libical/zoneinfo/Antarctica/Syowa.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Antarctica/Syowa.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +1,15 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_4/Antarctica/Syowa
+TZID:/kde.org/Olson_20070327_1/Antarctica/Syowa
 X-LIC-LOCATION:Antarctica/Syowa
 BEGIN:STANDARD
-TZOFFSETFROM:+0300
+TZOFFSETFROM:+0000
 TZOFFSETTO:+0300
 TZNAME:SYOT
-DTSTART:19700101T000000
+DTSTART:19570129T000000
+RDATE:19570129T000000
 END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Antarctica/Syowa.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Antarctica/Casey.ics
===================================================================
--- libkcal/libical/zoneinfo/Antarctica/Casey.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Antarctica/Casey.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +1,15 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_4/Antarctica/Casey
+TZID:/kde.org/Olson_20070327_1/Antarctica/Casey
 X-LIC-LOCATION:Antarctica/Casey
 BEGIN:STANDARD
-TZOFFSETFROM:+0800
+TZOFFSETFROM:+0000
 TZOFFSETTO:+0800
 TZNAME:WST
-DTSTART:19700101T000000
+DTSTART:19690101T000000
+RDATE:19690101T000000
 END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Antarctica/Casey.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Antarctica/Mawson.ics
===================================================================
--- libkcal/libical/zoneinfo/Antarctica/Mawson.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Antarctica/Mawson.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +1,15 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_4/Antarctica/Mawson
+TZID:/kde.org/Olson_20070327_1/Antarctica/Mawson
 X-LIC-LOCATION:Antarctica/Mawson
 BEGIN:STANDARD
-TZOFFSETFROM:+0600
+TZOFFSETFROM:+0000
 TZOFFSETTO:+0600
 TZNAME:MAWT
-DTSTART:19700101T000000
+DTSTART:19540213T000000
+RDATE:19540213T000000
 END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Antarctica/Mawson.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Antarctica/Rothera.ics
===================================================================
--- libkcal/libical/zoneinfo/Antarctica/Rothera.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 0)
+++ libkcal/libical/zoneinfo/Antarctica/Rothera.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -0,0 +1,15 @@
+BEGIN:VCALENDAR
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
+VERSION:2.0
+BEGIN:VTIMEZONE
+TZID:/kde.org/Olson_20070327_1/Antarctica/Rothera
+X-LIC-LOCATION:Antarctica/Rothera
+BEGIN:STANDARD
+TZOFFSETFROM:+0000
+TZOFFSETTO:-0300
+TZNAME:ROTT
+DTSTART:19761201T000000
+RDATE:19761201T000000
+END:STANDARD
+END:VTIMEZONE
+END:VCALENDAR
Index: libkcal/libical/zoneinfo/Antarctica/Vostok.ics
===================================================================
--- libkcal/libical/zoneinfo/Antarctica/Vostok.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Antarctica/Vostok.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +1,15 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_4/Antarctica/Vostok
+TZID:/kde.org/Olson_20070327_1/Antarctica/Vostok
 X-LIC-LOCATION:Antarctica/Vostok
 BEGIN:STANDARD
-TZOFFSETFROM:+0600
+TZOFFSETFROM:+0000
 TZOFFSETTO:+0600
 TZNAME:VOST
-DTSTART:19700101T000000
+DTSTART:19571216T000000
+RDATE:19571216T000000
 END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Antarctica/Vostok.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Antarctica/Davis.ics
===================================================================
--- libkcal/libical/zoneinfo/Antarctica/Davis.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Antarctica/Davis.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +1,23 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/Antarctica/Davis
+TZID:/kde.org/Olson_20070327_1/Antarctica/Davis
 X-LIC-LOCATION:Antarctica/Davis
 BEGIN:STANDARD
-TZOFFSETFROM:+0700
+TZOFFSETFROM:+0000
 TZOFFSETTO:+0700
 TZNAME:DAVT
-DTSTART:19700101T000000
+DTSTART:19570113T000000
+RDATE:19570113T000000
+RDATE:19690201T000000
 END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0700
+TZOFFSETTO:+0000
+TZNAME:zzz
+DTSTART:19641101T000000
+RDATE:19641101T000000
+END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Antarctica/Davis.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Antarctica/McMurdo.ics
===================================================================
--- libkcal/libical/zoneinfo/Antarctica/McMurdo.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Antarctica/McMurdo.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,22 +1,72 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/Antarctica/McMurdo
+TZID:/kde.org/Olson_20070327_1/Antarctica/McMurdo
 X-LIC-LOCATION:Antarctica/McMurdo
 BEGIN:STANDARD
 TZOFFSETFROM:+1300
 TZOFFSETTO:+1200
 TZNAME:NZST
-DTSTART:19700315T030000
+DTSTART:19900318T030000
 RRULE:FREQ=YEARLY;BYMONTH=3;BYDAY=3SU
 END:STANDARD
 BEGIN:DAYLIGHT
 TZOFFSETFROM:+1200
 TZOFFSETTO:+1300
 TZNAME:NZDT
-DTSTART:19701004T020000
+DTSTART:19901007T020000
 RRULE:FREQ=YEARLY;BYMONTH=10;BYDAY=1SU
 END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0000
+TZOFFSETTO:+1200
+TZNAME:NZST
+DTSTART:19560101T000000
+RDATE:19560101T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+1200
+TZOFFSETTO:+1300
+TZNAME:NZDT
+DTSTART:19741103T020000
+RDATE:19741103T020000
+RDATE:19751026T020000
+RDATE:19761031T020000
+RDATE:19771030T020000
+RDATE:19781029T020000
+RDATE:19791028T020000
+RDATE:19801026T020000
+RDATE:19811025T020000
+RDATE:19821031T020000
+RDATE:19831030T020000
+RDATE:19841028T020000
+RDATE:19851027T020000
+RDATE:19861026T020000
+RDATE:19871025T020000
+RDATE:19881030T020000
+RDATE:19891008T020000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+1300
+TZOFFSETTO:+1200
+TZNAME:NZST
+DTSTART:19750223T030000
+RDATE:19750223T030000
+RDATE:19760307T030000
+RDATE:19770306T030000
+RDATE:19780305T030000
+RDATE:19790304T030000
+RDATE:19800302T030000
+RDATE:19810301T030000
+RDATE:19820307T030000
+RDATE:19830306T030000
+RDATE:19840304T030000
+RDATE:19850303T030000
+RDATE:19860302T030000
+RDATE:19870301T030000
+RDATE:19880306T030000
+RDATE:19890305T030000
+END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Antarctica/McMurdo.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Antarctica/DumontDUrville.ics
===================================================================
--- libkcal/libical/zoneinfo/Antarctica/DumontDUrville.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Antarctica/DumontDUrville.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +1,29 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/Antarctica/DumontDUrville
+TZID:/kde.org/Olson_20070327_1/Antarctica/DumontDUrville
 X-LIC-LOCATION:Antarctica/DumontDUrville
 BEGIN:STANDARD
+TZOFFSETFROM:+0000
+TZOFFSETTO:+1000
+TZNAME:PMT
+DTSTART:19470101T000000
+RDATE:19470101T000000
+END:STANDARD
+BEGIN:STANDARD
 TZOFFSETFROM:+1000
+TZOFFSETTO:+0000
+TZNAME:zzz
+DTSTART:19520114T000000
+RDATE:19520114T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0000
 TZOFFSETTO:+1000
 TZNAME:DDUT
-DTSTART:19700101T000000
+DTSTART:19561101T000000
+RDATE:19561101T000000
 END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Antarctica/DumontDUrville.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Antarctica/Palmer.ics
===================================================================
--- libkcal/libical/zoneinfo/Antarctica/Palmer.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Antarctica/Palmer.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,22 +1,118 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/Antarctica/Palmer
+TZID:/kde.org/Olson_20070327_1/Antarctica/Palmer
 X-LIC-LOCATION:Antarctica/Palmer
 BEGIN:DAYLIGHT
 TZOFFSETFROM:-0400
 TZOFFSETTO:-0300
 TZNAME:CLST
-DTSTART:19701011T000000
-RRULE:FREQ=YEARLY;BYMONTH=10;BYDAY=2SU
+DTSTART:19991010T000000
+RRULE:FREQ=YEARLY;BYMONTH=10;BYMONTHDAY=9,10,11,12,13,14,15;BYDAY=SU
 END:DAYLIGHT
 BEGIN:STANDARD
 TZOFFSETFROM:-0300
 TZOFFSETTO:-0400
 TZNAME:CLT
-DTSTART:19700315T000000
-RRULE:FREQ=YEARLY;BYMONTH=3;BYDAY=2SU
+DTSTART:20000312T000000
+RRULE:FREQ=YEARLY;BYMONTH=3;BYMONTHDAY=9,10,11,12,13,14,15;BYDAY=SU
 END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0000
+TZOFFSETTO:-0300
+TZNAME:ARST
+DTSTART:19650101T000000
+RDATE:19650101T000000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:-0300
+TZOFFSETTO:-0400
+TZNAME:ART
+DTSTART:19650301T000000
+RDATE:19650301T000000
+RDATE:19660301T000000
+RDATE:19670402T000000
+RDATE:19680407T000000
+RDATE:19690406T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0400
+TZOFFSETTO:-0300
+TZNAME:ARST
+DTSTART:19651015T000000
+RDATE:19651015T000000
+RDATE:19661015T000000
+RDATE:19671001T000000
+RDATE:19681006T000000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:-0400
+TZOFFSETTO:-0300
+TZNAME:ART
+DTSTART:19691005T000000
+RDATE:19691005T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0300
+TZOFFSETTO:-0200
+TZNAME:ARST
+DTSTART:19740123T000000
+RDATE:19740123T000000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:-0200
+TZOFFSETTO:-0300
+TZNAME:ART
+DTSTART:19740501T000000
+RDATE:19740501T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-0300
+TZOFFSETTO:-0400
+TZNAME:CLT
+DTSTART:19820501T000000
+RDATE:19820501T000000
+RDATE:19830313T000000
+RDATE:19840311T000000
+RDATE:19850310T000000
+RDATE:19860309T000000
+RDATE:19870412T000000
+RDATE:19880313T000000
+RDATE:19890312T000000
+RDATE:19900318T000000
+RDATE:19910310T000000
+RDATE:19920315T000000
+RDATE:19930314T000000
+RDATE:19940313T000000
+RDATE:19950312T000000
+RDATE:19960310T000000
+RDATE:19970330T000000
+RDATE:19980315T000000
+RDATE:19990404T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0400
+TZOFFSETTO:-0300
+TZNAME:CLST
+DTSTART:19821010T000000
+RDATE:19821010T000000
+RDATE:19831009T000000
+RDATE:19841014T000000
+RDATE:19851013T000000
+RDATE:19861012T000000
+RDATE:19871011T000000
+RDATE:19881002T000000
+RDATE:19891015T000000
+RDATE:19900916T000000
+RDATE:19911013T000000
+RDATE:19921011T000000
+RDATE:19931010T000000
+RDATE:19941009T000000
+RDATE:19951015T000000
+RDATE:19961013T000000
+RDATE:19971012T000000
+RDATE:19980927T000000
+END:DAYLIGHT
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Antarctica/Palmer.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Antarctica/South_Pole.ics
===================================================================
--- libkcal/libical/zoneinfo/Antarctica/South_Pole.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Antarctica/South_Pole.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,22 +1,72 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/Antarctica/South_Pole
+TZID:/kde.org/Olson_20070327_1/Antarctica/South_Pole
 X-LIC-LOCATION:Antarctica/South_Pole
 BEGIN:STANDARD
 TZOFFSETFROM:+1300
 TZOFFSETTO:+1200
 TZNAME:NZST
-DTSTART:19700315T030000
+DTSTART:19900318T030000
 RRULE:FREQ=YEARLY;BYMONTH=3;BYDAY=3SU
 END:STANDARD
 BEGIN:DAYLIGHT
 TZOFFSETFROM:+1200
 TZOFFSETTO:+1300
 TZNAME:NZDT
-DTSTART:19701004T020000
+DTSTART:19901007T020000
 RRULE:FREQ=YEARLY;BYMONTH=10;BYDAY=1SU
 END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0000
+TZOFFSETTO:+1200
+TZNAME:NZST
+DTSTART:19560101T000000
+RDATE:19560101T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+1200
+TZOFFSETTO:+1300
+TZNAME:NZDT
+DTSTART:19741103T020000
+RDATE:19741103T020000
+RDATE:19751026T020000
+RDATE:19761031T020000
+RDATE:19771030T020000
+RDATE:19781029T020000
+RDATE:19791028T020000
+RDATE:19801026T020000
+RDATE:19811025T020000
+RDATE:19821031T020000
+RDATE:19831030T020000
+RDATE:19841028T020000
+RDATE:19851027T020000
+RDATE:19861026T020000
+RDATE:19871025T020000
+RDATE:19881030T020000
+RDATE:19891008T020000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+1300
+TZOFFSETTO:+1200
+TZNAME:NZST
+DTSTART:19750223T030000
+RDATE:19750223T030000
+RDATE:19760307T030000
+RDATE:19770306T030000
+RDATE:19780305T030000
+RDATE:19790304T030000
+RDATE:19800302T030000
+RDATE:19810301T030000
+RDATE:19820307T030000
+RDATE:19830306T030000
+RDATE:19840304T030000
+RDATE:19850303T030000
+RDATE:19860302T030000
+RDATE:19870301T030000
+RDATE:19880306T030000
+RDATE:19890305T030000
+END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Antarctica/South_Pole.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Makefile.am
===================================================================
--- libkcal/libical/zoneinfo/Makefile.am	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Makefile.am	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -6,6 +6,7 @@
 DIRS = \
 	Africa			\
 	America			\
+	America/Argentina	\
 	America/Indiana		\
 	America/Kentucky	\
 	America/North_Dakota	\

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Makefile.am
___________________________________________________________________
Nazwa: svn:mime-type
   - text/x-am
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Asia/Chungking.ics
===================================================================
--- libkcal/libical/zoneinfo/Asia/Chungking.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Asia/Chungking.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,46 +0,0 @@
-BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
-VERSION:2.0
-BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20010831_3/Asia/Chungking
-X-LIC-LOCATION:Asia/Chungking
-BEGIN:STANDARD
-TZOFFSETFROM:+0706
-TZOFFSETTO:+0700
-TZNAME:CHUT
-DTSTART:19280101T000000
-RDATE:19280101T000000
-END:STANDARD
-BEGIN:STANDARD
-TZOFFSETFROM:+0700
-TZOFFSETTO:+0800
-TZNAME:CST
-DTSTART:19800501T000000
-RDATE:19800501T000000
-END:STANDARD
-BEGIN:DAYLIGHT
-TZOFFSETFROM:+0800
-TZOFFSETTO:+0900
-TZNAME:CDT
-DTSTART:19860504T000000
-RDATE:19860504T000000
-RDATE:19870412T000000
-RDATE:19880410T000000
-RDATE:19890416T000000
-RDATE:19900415T000000
-RDATE:19910414T000000
-END:DAYLIGHT
-BEGIN:STANDARD
-TZOFFSETFROM:+0900
-TZOFFSETTO:+0800
-TZNAME:CST
-DTSTART:19860914T000000
-RDATE:19860914T000000
-RDATE:19870913T000000
-RDATE:19880911T000000
-RDATE:19890917T000000
-RDATE:19900916T000000
-RDATE:19910915T000000
-END:STANDARD
-END:VTIMEZONE
-END:VCALENDAR
Index: libkcal/libical/zoneinfo/Asia/Macao.ics
===================================================================
--- libkcal/libical/zoneinfo/Asia/Macao.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Asia/Macao.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +0,0 @@
-BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
-VERSION:2.0
-BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/Asia/Macao
-X-LIC-LOCATION:Asia/Macao
-BEGIN:STANDARD
-TZOFFSETFROM:+0800
-TZOFFSETTO:+0800
-TZNAME:CST
-DTSTART:19700101T000000
-END:STANDARD
-END:VTIMEZONE
-END:VCALENDAR
Index: libkcal/libical/zoneinfo/Asia/Ujung_Pandang.ics
===================================================================
--- libkcal/libical/zoneinfo/Asia/Ujung_Pandang.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Asia/Ujung_Pandang.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +0,0 @@
-BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
-VERSION:2.0
-BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/Asia/Ujung_Pandang
-X-LIC-LOCATION:Asia/Ujung_Pandang
-BEGIN:STANDARD
-TZOFFSETFROM:+0800
-TZOFFSETTO:+0800
-TZNAME:CIT
-DTSTART:19700101T000000
-END:STANDARD
-END:VTIMEZONE
-END:VCALENDAR
Index: libkcal/libical/zoneinfo/Asia/Makassar.ics
===================================================================
--- libkcal/libical/zoneinfo/Asia/Makassar.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 0)
+++ libkcal/libical/zoneinfo/Asia/Makassar.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -0,0 +1,36 @@
+BEGIN:VCALENDAR
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
+VERSION:2.0
+BEGIN:VTIMEZONE
+TZID:/kde.org/Olson_20070327_1/Asia/Makassar
+X-LIC-LOCATION:Asia/Makassar
+BEGIN:STANDARD
+TZOFFSETFROM:+075736
+TZOFFSETTO:+075736
+TZNAME:MMT
+DTSTART:19200101T000000
+RDATE:19200101T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+075736
+TZOFFSETTO:+0800
+TZNAME:CIT
+DTSTART:19321101T000000
+RDATE:19321101T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0800
+TZOFFSETTO:+0900
+TZNAME:JST
+DTSTART:19420209T000000
+RDATE:19420209T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0900
+TZOFFSETTO:+0800
+TZNAME:CIT
+DTSTART:19450923T000000
+RDATE:19450923T000000
+END:STANDARD
+END:VTIMEZONE
+END:VCALENDAR
Index: libkcal/libical/zoneinfo/Asia/Karachi.ics
===================================================================
--- libkcal/libical/zoneinfo/Asia/Karachi.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Asia/Karachi.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,22 +1,57 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20020614_6/Asia/Karachi
+TZID:/kde.org/Olson_20070327_1/Asia/Karachi
 X-LIC-LOCATION:Asia/Karachi
+BEGIN:STANDARD
+TZOFFSETFROM:+042812
+TZOFFSETTO:+0530
+TZNAME:IST
+DTSTART:19070101T000000
+RDATE:19070101T000000
+END:STANDARD
 BEGIN:DAYLIGHT
+TZOFFSETFROM:+0530
+TZOFFSETTO:+0630
+TZNAME:IST
+DTSTART:19420901T000000
+RDATE:19420901T000000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0630
+TZOFFSETTO:+0530
+TZNAME:IST
+DTSTART:19451015T000000
+RDATE:19451015T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0530
+TZOFFSETTO:+0500
+TZNAME:KART
+DTSTART:19510930T000000
+RDATE:19510930T000000
+END:STANDARD
+BEGIN:STANDARD
 TZOFFSETFROM:+0500
+TZOFFSETTO:+0500
+TZNAME:PKT
+DTSTART:19710326T000000
+RDATE:19710326T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0500
 TZOFFSETTO:+0600
 TZNAME:PKST
-DTSTART:19700405T000000
-RRULE:FREQ=YEARLY;BYMONTH=4;BYDAY=1SU
+DTSTART:20020407T000100
+RDATE:20020407T000100
 END:DAYLIGHT
 BEGIN:STANDARD
 TZOFFSETFROM:+0600
 TZOFFSETTO:+0500
 TZNAME:PKT
-DTSTART:19701015T000000
-RRULE:FREQ=YEARLY;BYMONTH=10;BYDAY=3SU
+DTSTART:20021006T000100
+RDATE:20021006T000100
 END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Asia/Karachi.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Asia/Rangoon.ics
===================================================================
--- libkcal/libical/zoneinfo/Asia/Rangoon.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Asia/Rangoon.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +1,36 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/Asia/Rangoon
+TZID:/kde.org/Olson_20070327_1/Asia/Rangoon
 X-LIC-LOCATION:Asia/Rangoon
 BEGIN:STANDARD
+TZOFFSETFROM:+062440
+TZOFFSETTO:+062436
+TZNAME:RMT
+DTSTART:18800101T000000
+RDATE:18800101T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+062436
+TZOFFSETTO:+0630
+TZNAME:BURT
+DTSTART:19200101T000000
+RDATE:19200101T000000
+END:STANDARD
+BEGIN:STANDARD
 TZOFFSETFROM:+0630
+TZOFFSETTO:+0900
+TZNAME:JST
+DTSTART:19420501T000000
+RDATE:19420501T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0900
 TZOFFSETTO:+0630
 TZNAME:MMT
-DTSTART:19700101T000000
+DTSTART:19450503T000000
+RDATE:19450503T000000
 END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Asia/Rangoon.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Asia/Harbin.ics
===================================================================
--- libkcal/libical/zoneinfo/Asia/Harbin.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Asia/Harbin.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +1,61 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/Asia/Harbin
+TZID:/kde.org/Olson_20070327_1/Asia/Harbin
 X-LIC-LOCATION:Asia/Harbin
 BEGIN:STANDARD
+TZOFFSETFROM:+082644
+TZOFFSETTO:+0830
+TZNAME:CHAT
+DTSTART:19280101T000000
+RDATE:19280101T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0830
+TZOFFSETTO:+0800
+TZNAME:CST
+DTSTART:19320301T000000
+RDATE:19320301T000000
+RDATE:19800501T000000
+END:STANDARD
+BEGIN:STANDARD
 TZOFFSETFROM:+0800
+TZOFFSETTO:+0900
+TZNAME:CHAT
+DTSTART:19400101T000000
+RDATE:19400101T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0900
+TZOFFSETTO:+0830
+TZNAME:CHAT
+DTSTART:19660501T000000
+RDATE:19660501T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0800
+TZOFFSETTO:+0900
+TZNAME:CDT
+DTSTART:19860504T000000
+RDATE:19860504T000000
+RDATE:19870412T000000
+RDATE:19880410T000000
+RDATE:19890416T000000
+RDATE:19900415T000000
+RDATE:19910414T000000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0900
 TZOFFSETTO:+0800
 TZNAME:CST
-DTSTART:19700101T000000
+DTSTART:19860914T000000
+RDATE:19860914T000000
+RDATE:19870913T000000
+RDATE:19880911T000000
+RDATE:19890917T000000
+RDATE:19900916T000000
+RDATE:19910915T000000
 END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Asia/Harbin.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Asia/Novosibirsk.ics
===================================================================
--- libkcal/libical/zoneinfo/Asia/Novosibirsk.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Asia/Novosibirsk.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,22 +1,96 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/Asia/Novosibirsk
+TZID:/kde.org/Olson_20070327_1/Asia/Novosibirsk
 X-LIC-LOCATION:Asia/Novosibirsk
 BEGIN:DAYLIGHT
 TZOFFSETFROM:+0600
 TZOFFSETTO:+0700
 TZNAME:NOVST
-DTSTART:19700329T020000
+DTSTART:19940327T020000
 RRULE:FREQ=YEARLY;BYMONTH=3;BYDAY=-1SU
 END:DAYLIGHT
 BEGIN:STANDARD
 TZOFFSETFROM:+0700
 TZOFFSETTO:+0600
 TZNAME:NOVT
-DTSTART:19701025T030000
+DTSTART:19961027T030000
 RRULE:FREQ=YEARLY;BYMONTH=10;BYDAY=-1SU
 END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+053140
+TZOFFSETTO:+0600
+TZNAME:NOVT
+DTSTART:19191214T060000
+RDATE:19191214T060000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0600
+TZOFFSETTO:+0700
+TZNAME:NOVT
+DTSTART:19300621T000000
+RDATE:19300621T000000
+RDATE:19920119T020000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0700
+TZOFFSETTO:+0800
+TZNAME:NOVST
+DTSTART:19810401T000000
+RDATE:19810401T000000
+RDATE:19820401T000000
+RDATE:19830401T000000
+RDATE:19840401T000000
+RDATE:19850331T020000
+RDATE:19860330T020000
+RDATE:19870329T020000
+RDATE:19880327T020000
+RDATE:19890326T020000
+RDATE:19900325T020000
+RDATE:19920328T230000
+RDATE:19930328T020000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0800
+TZOFFSETTO:+0700
+TZNAME:NOVT
+DTSTART:19811001T000000
+RDATE:19811001T000000
+RDATE:19821001T000000
+RDATE:19831001T000000
+RDATE:19840930T030000
+RDATE:19850929T030000
+RDATE:19860928T030000
+RDATE:19870927T030000
+RDATE:19880925T030000
+RDATE:19890924T030000
+RDATE:19900930T030000
+RDATE:19920926T230000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0700
+TZOFFSETTO:+0700
+TZNAME:NOVST
+DTSTART:19910331T020000
+RDATE:19910331T020000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0700
+TZOFFSETTO:+0600
+TZNAME:NOVT
+DTSTART:19910929T030000
+RDATE:19910929T030000
+RDATE:19930926T030000
+RDATE:19940925T030000
+RDATE:19950924T030000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0800
+TZOFFSETTO:+0700
+TZNAME:NOVST
+DTSTART:19930523T000000
+RDATE:19930523T000000
+END:DAYLIGHT
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Asia/Novosibirsk.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Asia/Yerevan.ics
===================================================================
--- libkcal/libical/zoneinfo/Asia/Yerevan.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Asia/Yerevan.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,22 +1,110 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/Asia/Yerevan
+TZID:/kde.org/Olson_20070327_1/Asia/Yerevan
 X-LIC-LOCATION:Asia/Yerevan
 BEGIN:DAYLIGHT
 TZOFFSETFROM:+0400
 TZOFFSETTO:+0500
 TZNAME:AMST
-DTSTART:19700329T020000
+DTSTART:19970330T020000
 RRULE:FREQ=YEARLY;BYMONTH=3;BYDAY=-1SU
 END:DAYLIGHT
 BEGIN:STANDARD
 TZOFFSETFROM:+0500
 TZOFFSETTO:+0400
 TZNAME:AMT
-DTSTART:19701025T030000
+DTSTART:19971026T030000
 RRULE:FREQ=YEARLY;BYMONTH=10;BYDAY=-1SU
 END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0258
+TZOFFSETTO:+0300
+TZNAME:YERT
+DTSTART:19240502T000000
+RDATE:19240502T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0300
+TZOFFSETTO:+0400
+TZNAME:YERT
+DTSTART:19570301T000000
+RDATE:19570301T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0400
+TZOFFSETTO:+0500
+TZNAME:YERST
+DTSTART:19810401T000000
+RDATE:19810401T000000
+RDATE:19820401T000000
+RDATE:19830401T000000
+RDATE:19840401T000000
+RDATE:19850331T020000
+RDATE:19860330T020000
+RDATE:19870329T020000
+RDATE:19880327T020000
+RDATE:19890326T020000
+RDATE:19900325T020000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0500
+TZOFFSETTO:+0400
+TZNAME:YERT
+DTSTART:19811001T000000
+RDATE:19811001T000000
+RDATE:19821001T000000
+RDATE:19831001T000000
+RDATE:19840930T030000
+RDATE:19850929T030000
+RDATE:19860928T030000
+RDATE:19870927T030000
+RDATE:19880925T030000
+RDATE:19890924T030000
+RDATE:19900930T030000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0400
+TZOFFSETTO:+0400
+TZNAME:YERST
+DTSTART:19910331T020000
+RDATE:19910331T020000
+END:DAYLIGHT
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0400
+TZOFFSETTO:+0400
+TZNAME:AMST
+DTSTART:19910923T000000
+RDATE:19910923T000000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0400
+TZOFFSETTO:+0300
+TZNAME:AMT
+DTSTART:19910929T030000
+RDATE:19910929T030000
+RDATE:19920926T230000
+RDATE:19930926T030000
+RDATE:19940925T030000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0300
+TZOFFSETTO:+0400
+TZNAME:AMST
+DTSTART:19920328T230000
+RDATE:19920328T230000
+RDATE:19930328T020000
+RDATE:19940327T020000
+RDATE:19950326T020000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0400
+TZOFFSETTO:+0400
+TZNAME:AMT
+DTSTART:19950924T030000
+RDATE:19950924T030000
+RDATE:19970101T000000
+END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Asia/Yerevan.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Asia/Ashgabat.ics
===================================================================
--- libkcal/libical/zoneinfo/Asia/Ashgabat.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Asia/Ashgabat.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +1,82 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/Asia/Ashgabat
+TZID:/kde.org/Olson_20070327_1/Asia/Ashgabat
 X-LIC-LOCATION:Asia/Ashgabat
 BEGIN:STANDARD
+TZOFFSETFROM:+035332
+TZOFFSETTO:+0400
+TZNAME:ASHT
+DTSTART:19240502T000000
+RDATE:19240502T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0400
+TZOFFSETTO:+0500
+TZNAME:ASHT
+DTSTART:19300621T000000
+RDATE:19300621T000000
+END:STANDARD
+BEGIN:DAYLIGHT
 TZOFFSETFROM:+0500
+TZOFFSETTO:+0600
+TZNAME:ASHST
+DTSTART:19810401T000000
+RDATE:19810401T000000
+RDATE:19820401T000000
+RDATE:19830401T000000
+RDATE:19840401T000000
+RDATE:19850331T020000
+RDATE:19860330T020000
+RDATE:19870329T020000
+RDATE:19880327T020000
+RDATE:19890326T020000
+RDATE:19900325T020000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0600
 TZOFFSETTO:+0500
+TZNAME:ASHT
+DTSTART:19811001T000000
+RDATE:19811001T000000
+RDATE:19821001T000000
+RDATE:19831001T000000
+RDATE:19840930T030000
+RDATE:19850929T030000
+RDATE:19860928T030000
+RDATE:19870927T030000
+RDATE:19880925T030000
+RDATE:19890924T030000
+RDATE:19900930T030000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0500
+TZOFFSETTO:+0500
+TZNAME:ASHST
+DTSTART:19910331T020000
+RDATE:19910331T020000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0500
+TZOFFSETTO:+0400
+TZNAME:ASHT
+DTSTART:19910929T030000
+RDATE:19910929T030000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0400
+TZOFFSETTO:+0400
 TZNAME:TMT
-DTSTART:19700101T000000
+DTSTART:19911027T000000
+RDATE:19911027T000000
 END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0400
+TZOFFSETTO:+0500
+TZNAME:TMT
+DTSTART:19920119T020000
+RDATE:19920119T020000
+END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Asia/Ashgabat.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Asia/Ulaanbaatar.ics
===================================================================
--- libkcal/libical/zoneinfo/Asia/Ulaanbaatar.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Asia/Ulaanbaatar.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +1,78 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/Asia/Ulaanbaatar
+TZID:/kde.org/Olson_20070327_1/Asia/Ulaanbaatar
 X-LIC-LOCATION:Asia/Ulaanbaatar
 BEGIN:STANDARD
+TZOFFSETFROM:+070732
+TZOFFSETTO:+0700
+TZNAME:ULAT
+DTSTART:19050801T000000
+RDATE:19050801T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0700
+TZOFFSETTO:+0800
+TZNAME:ULAT
+DTSTART:19780101T000000
+RDATE:19780101T000000
+END:STANDARD
+BEGIN:DAYLIGHT
 TZOFFSETFROM:+0800
+TZOFFSETTO:+0900
+TZNAME:ULAST
+DTSTART:19830401T000000
+RDATE:19830401T000000
+RDATE:19840401T000000
+RDATE:19850331T000000
+RDATE:19860330T000000
+RDATE:19870329T000000
+RDATE:19880327T000000
+RDATE:19890326T000000
+RDATE:19900325T000000
+RDATE:19910331T000000
+RDATE:19920329T000000
+RDATE:19930328T000000
+RDATE:19940327T000000
+RDATE:19950326T000000
+RDATE:19960331T000000
+RDATE:19970330T000000
+RDATE:19980329T000000
+RDATE:20010428T020000
+RDATE:20020330T020000
+RDATE:20030329T020000
+RDATE:20040327T020000
+RDATE:20050326T020000
+RDATE:20060325T020000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0900
 TZOFFSETTO:+0800
 TZNAME:ULAT
-DTSTART:19700101T000000
+DTSTART:19831001T000000
+RDATE:19831001T000000
+RDATE:19840930T000000
+RDATE:19850929T000000
+RDATE:19860928T000000
+RDATE:19870927T000000
+RDATE:19880925T000000
+RDATE:19890924T000000
+RDATE:19900930T000000
+RDATE:19910929T000000
+RDATE:19920927T000000
+RDATE:19930926T000000
+RDATE:19940925T000000
+RDATE:19950924T000000
+RDATE:19960929T000000
+RDATE:19970928T000000
+RDATE:19980927T000000
+RDATE:20010929T020000
+RDATE:20020928T020000
+RDATE:20030927T020000
+RDATE:20040925T020000
+RDATE:20050924T020000
+RDATE:20060930T020000
 END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Asia/Ulaanbaatar.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Asia/Jakarta.ics
===================================================================
--- libkcal/libical/zoneinfo/Asia/Jakarta.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Asia/Jakarta.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +1,64 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/Asia/Jakarta
+TZID:/kde.org/Olson_20070327_1/Asia/Jakarta
 X-LIC-LOCATION:Asia/Jakarta
 BEGIN:STANDARD
-TZOFFSETFROM:+0700
+TZOFFSETFROM:+070712
+TZOFFSETTO:+070712
+TZNAME:JMT
+DTSTART:18670810T000000
+RDATE:18670810T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+070712
+TZOFFSETTO:+0720
+TZNAME:JAVT
+DTSTART:19231231T234712
+RDATE:19231231T234712
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0720
+TZOFFSETTO:+0730
+TZNAME:WIT
+DTSTART:19321101T000000
+RDATE:19321101T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0730
+TZOFFSETTO:+0900
+TZNAME:JST
+DTSTART:19420323T000000
+RDATE:19420323T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0900
+TZOFFSETTO:+0730
+TZNAME:WIT
+DTSTART:19450923T000000
+RDATE:19450923T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0730
+TZOFFSETTO:+0800
+TZNAME:WIT
+DTSTART:19480501T000000
+RDATE:19480501T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0800
+TZOFFSETTO:+0730
+TZNAME:WIT
+DTSTART:19500501T000000
+RDATE:19500501T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0730
 TZOFFSETTO:+0700
 TZNAME:WIT
-DTSTART:19700101T000000
+DTSTART:19640101T000000
+RDATE:19640101T000000
 END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Asia/Jakarta.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Asia/Thimphu.ics
===================================================================
--- libkcal/libical/zoneinfo/Asia/Thimphu.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Asia/Thimphu.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +1,22 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/Asia/Thimphu
+TZID:/kde.org/Olson_20070327_1/Asia/Thimphu
 X-LIC-LOCATION:Asia/Thimphu
 BEGIN:STANDARD
-TZOFFSETFROM:+0600
+TZOFFSETFROM:+055836
+TZOFFSETTO:+0530
+TZNAME:IST
+DTSTART:19470815T000000
+RDATE:19470815T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0530
 TZOFFSETTO:+0600
 TZNAME:BTT
-DTSTART:19700101T000000
+DTSTART:19871001T000000
+RDATE:19871001T000000
 END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Asia/Thimphu.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Asia/Saigon.ics
===================================================================
--- libkcal/libical/zoneinfo/Asia/Saigon.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Asia/Saigon.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +1,36 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/Asia/Saigon
+TZID:/kde.org/Olson_20070327_1/Asia/Saigon
 X-LIC-LOCATION:Asia/Saigon
 BEGIN:STANDARD
+TZOFFSETFROM:+070640
+TZOFFSETTO:+070620
+TZNAME:SMT
+DTSTART:19060609T000000
+RDATE:19060609T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+070620
+TZOFFSETTO:+0700
+TZNAME:ICT
+DTSTART:19110311T000100
+RDATE:19110311T000100
+END:STANDARD
+BEGIN:STANDARD
 TZOFFSETFROM:+0700
+TZOFFSETTO:+0800
+TZNAME:ICT
+DTSTART:19120501T000000
+RDATE:19120501T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0800
 TZOFFSETTO:+0700
 TZNAME:ICT
-DTSTART:19700101T000000
+DTSTART:19310501T000000
+RDATE:19310501T000000
 END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Asia/Saigon.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Asia/Riyadh.ics
===================================================================
--- libkcal/libical/zoneinfo/Asia/Riyadh.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Asia/Riyadh.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +1,15 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_4/Asia/Riyadh
+TZID:/kde.org/Olson_20070327_1/Asia/Riyadh
 X-LIC-LOCATION:Asia/Riyadh
 BEGIN:STANDARD
-TZOFFSETFROM:+0300
+TZOFFSETFROM:+030652
 TZOFFSETTO:+0300
 TZNAME:AST
-DTSTART:19700101T000000
+DTSTART:19500101T000000
+RDATE:19500101T000000
 END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Asia/Riyadh.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Asia/Bishkek.ics
===================================================================
--- libkcal/libical/zoneinfo/Asia/Bishkek.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Asia/Bishkek.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,22 +1,108 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/Asia/Bishkek
+TZID:/kde.org/Olson_20070327_1/Asia/Bishkek
 X-LIC-LOCATION:Asia/Bishkek
+BEGIN:STANDARD
+TZOFFSETFROM:+045824
+TZOFFSETTO:+0500
+TZNAME:FRUT
+DTSTART:19240502T000000
+RDATE:19240502T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0500
+TZOFFSETTO:+0600
+TZNAME:FRUT
+DTSTART:19300621T000000
+RDATE:19300621T000000
+END:STANDARD
 BEGIN:DAYLIGHT
+TZOFFSETFROM:+0600
+TZOFFSETTO:+0700
+TZNAME:FRUST
+DTSTART:19810401T000000
+RDATE:19810401T000000
+RDATE:19820401T000000
+RDATE:19830401T000000
+RDATE:19840401T000000
+RDATE:19850331T020000
+RDATE:19860330T020000
+RDATE:19870329T020000
+RDATE:19880327T020000
+RDATE:19890326T020000
+RDATE:19900325T020000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0700
+TZOFFSETTO:+0600
+TZNAME:FRUT
+DTSTART:19811001T000000
+RDATE:19811001T000000
+RDATE:19821001T000000
+RDATE:19831001T000000
+RDATE:19840930T030000
+RDATE:19850929T030000
+RDATE:19860928T030000
+RDATE:19870927T030000
+RDATE:19880925T030000
+RDATE:19890924T030000
+RDATE:19900930T030000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0600
+TZOFFSETTO:+0600
+TZNAME:FRUST
+DTSTART:19910331T020000
+RDATE:19910331T020000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0600
+TZOFFSETTO:+0500
+TZNAME:KGT
+DTSTART:19910831T020000
+RDATE:19910831T020000
+RDATE:19920927T000000
+RDATE:19930926T000000
+RDATE:19940925T000000
+RDATE:19950924T000000
+RDATE:19960929T000000
+RDATE:19971026T023000
+RDATE:19981025T023000
+RDATE:19991031T023000
+RDATE:20001029T023000
+RDATE:20011028T023000
+RDATE:20021027T023000
+RDATE:20031026T023000
+RDATE:20041031T023000
+END:STANDARD
+BEGIN:DAYLIGHT
 TZOFFSETFROM:+0500
 TZOFFSETTO:+0600
 TZNAME:KGST
-DTSTART:19700329T023000
-RRULE:FREQ=YEARLY;BYMONTH=3;BYDAY=-1SU
+DTSTART:19920412T000000
+RDATE:19920412T000000
+RDATE:19930411T000000
+RDATE:19940410T000000
+RDATE:19950409T000000
+RDATE:19960407T000000
+RDATE:19970330T023000
+RDATE:19980329T023000
+RDATE:19990328T023000
+RDATE:20000326T023000
+RDATE:20010325T023000
+RDATE:20020331T023000
+RDATE:20030330T023000
+RDATE:20040328T023000
+RDATE:20050327T023000
 END:DAYLIGHT
 BEGIN:STANDARD
 TZOFFSETFROM:+0600
-TZOFFSETTO:+0500
+TZOFFSETTO:+0600
 TZNAME:KGT
-DTSTART:19701025T023000
-RRULE:FREQ=YEARLY;BYMONTH=10;BYDAY=-1SU
+DTSTART:20050812T000000
+RDATE:20050812T000000
 END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Asia/Bishkek.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Asia/Dili.ics
===================================================================
--- libkcal/libical/zoneinfo/Asia/Dili.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Asia/Dili.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +1,43 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/Asia/Dili
+TZID:/kde.org/Olson_20070327_1/Asia/Dili
 X-LIC-LOCATION:Asia/Dili
 BEGIN:STANDARD
+TZOFFSETFROM:+082220
+TZOFFSETTO:+0800
+TZNAME:TLT
+DTSTART:19120101T000000
+RDATE:19120101T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0800
+TZOFFSETTO:+0900
+TZNAME:JST
+DTSTART:19420221T230000
+RDATE:19420221T230000
+END:STANDARD
+BEGIN:STANDARD
 TZOFFSETFROM:+0900
 TZOFFSETTO:+0900
-TZNAME:TPT
-DTSTART:19700101T000000
+TZNAME:TLT
+DTSTART:19450923T000000
+RDATE:19450923T000000
 END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0900
+TZOFFSETTO:+0800
+TZNAME:CIT
+DTSTART:19760503T000000
+RDATE:19760503T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0800
+TZOFFSETTO:+0900
+TZNAME:TLT
+DTSTART:20000917T000000
+RDATE:20000917T000000
+END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Asia/Dili.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Asia/Istanbul.ics
===================================================================
--- libkcal/libical/zoneinfo/Asia/Istanbul.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Asia/Istanbul.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,22 +1,187 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/Asia/Istanbul
+TZID:/kde.org/Olson_20070327_1/Asia/Istanbul
 X-LIC-LOCATION:Asia/Istanbul
 BEGIN:DAYLIGHT
 TZOFFSETFROM:+0200
 TZOFFSETTO:+0300
 TZNAME:EEST
-DTSTART:19700329T030000
+DTSTART:20070325T030000
 RRULE:FREQ=YEARLY;BYMONTH=3;BYDAY=-1SU
 END:DAYLIGHT
 BEGIN:STANDARD
 TZOFFSETFROM:+0300
 TZOFFSETTO:+0200
 TZNAME:EET
-DTSTART:19701025T040000
+DTSTART:20071028T040000
 RRULE:FREQ=YEARLY;BYMONTH=10;BYDAY=-1SU
 END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+015552
+TZOFFSETTO:+015656
+TZNAME:IMT
+DTSTART:18800101T000000
+RDATE:18800101T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+015656
+TZOFFSETTO:+0200
+TZNAME:EET
+DTSTART:19101001T000000
+RDATE:19101001T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0200
+TZOFFSETTO:+0300
+TZNAME:EEST
+DTSTART:19160501T000000
+RDATE:19160501T000000
+RDATE:19200328T000000
+RDATE:19210403T000000
+RDATE:19220326T000000
+RDATE:19240513T000000
+RDATE:19250501T000000
+RDATE:19400630T000000
+RDATE:19401201T000000
+RDATE:19420401T000000
+RDATE:19450402T000000
+RDATE:19460601T000000
+RDATE:19470420T000000
+RDATE:19480418T000000
+RDATE:19490410T000000
+RDATE:19500419T000000
+RDATE:19510422T000000
+RDATE:19620715T000000
+RDATE:19640515T000000
+RDATE:19700503T000000
+RDATE:19710502T000000
+RDATE:19720507T000000
+RDATE:19730603T010000
+RDATE:19740331T020000
+RDATE:19750330T000000
+RDATE:19760601T000000
+RDATE:19770403T000000
+RDATE:19780402T000000
+RDATE:19860330T020000
+RDATE:19870329T020000
+RDATE:19880327T020000
+RDATE:19890326T020000
+RDATE:19900325T020000
+RDATE:19910331T010000
+RDATE:19920329T010000
+RDATE:19930328T010000
+RDATE:19940327T010000
+RDATE:19950326T010000
+RDATE:19960331T010000
+RDATE:19970330T010000
+RDATE:19980329T010000
+RDATE:19990328T010000
+RDATE:20000326T010000
+RDATE:20010325T010000
+RDATE:20020331T010000
+RDATE:20030330T010000
+RDATE:20040328T010000
+RDATE:20050327T010000
+RDATE:20060326T010000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0300
+TZOFFSETTO:+0200
+TZNAME:EET
+DTSTART:19161001T000000
+RDATE:19161001T000000
+RDATE:19201025T000000
+RDATE:19211003T000000
+RDATE:19221008T000000
+RDATE:19241001T000000
+RDATE:19251001T000000
+RDATE:19401005T000000
+RDATE:19410921T000000
+RDATE:19421101T000000
+RDATE:19451008T000000
+RDATE:19461001T000000
+RDATE:19471005T000000
+RDATE:19481003T000000
+RDATE:19491002T000000
+RDATE:19501008T000000
+RDATE:19511008T000000
+RDATE:19621008T000000
+RDATE:19641001T000000
+RDATE:19701004T000000
+RDATE:19711003T000000
+RDATE:19721008T000000
+RDATE:19731104T030000
+RDATE:19741103T050000
+RDATE:19751026T000000
+RDATE:19761031T000000
+RDATE:19771016T000000
+RDATE:19850928T000000
+RDATE:19860928T030000
+RDATE:19870927T030000
+RDATE:19880925T030000
+RDATE:19890924T030000
+RDATE:19900930T030000
+RDATE:19910929T020000
+RDATE:19920927T020000
+RDATE:19930926T020000
+RDATE:19940925T020000
+RDATE:19950924T020000
+RDATE:19961027T020000
+RDATE:19971026T020000
+RDATE:19981025T020000
+RDATE:19991031T020000
+RDATE:20001029T020000
+RDATE:20011028T020000
+RDATE:20021027T020000
+RDATE:20031026T020000
+RDATE:20041031T020000
+RDATE:20051030T020000
+RDATE:20061029T020000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0300
+TZOFFSETTO:+0400
+TZNAME:TRST
+DTSTART:19781015T000000
+RDATE:19781015T000000
+RDATE:19800406T030000
+RDATE:19810329T030000
+RDATE:19820328T030000
+RDATE:19830731T000000
+END:DAYLIGHT
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0400
+TZOFFSETTO:+0400
+TZNAME:TRST
+DTSTART:19790401T030000
+RDATE:19790401T030000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0400
+TZOFFSETTO:+0300
+TZNAME:TRT
+DTSTART:19791015T000000
+RDATE:19791015T000000
+RDATE:19801013T000000
+RDATE:19811012T000000
+RDATE:19821011T000000
+RDATE:19831002T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0300
+TZOFFSETTO:+0300
+TZNAME:EEST
+DTSTART:19850420T000000
+RDATE:19850420T000000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0200
+TZOFFSETTO:+0200
+TZNAME:EET
+DTSTART:20070101T000000
+RDATE:20070101T000000
+END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Asia/Istanbul.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Asia/Pontianak.ics
===================================================================
--- libkcal/libical/zoneinfo/Asia/Pontianak.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Asia/Pontianak.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +1,64 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/Asia/Pontianak
+TZID:/kde.org/Olson_20070327_1/Asia/Pontianak
 X-LIC-LOCATION:Asia/Pontianak
 BEGIN:STANDARD
-TZOFFSETFROM:+0700
+TZOFFSETFROM:+071720
+TZOFFSETTO:+071720
+TZNAME:PMT
+DTSTART:19080501T000000
+RDATE:19080501T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+071720
+TZOFFSETTO:+0730
+TZNAME:WIT
+DTSTART:19321101T000000
+RDATE:19321101T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0730
+TZOFFSETTO:+0900
+TZNAME:JST
+DTSTART:19420129T000000
+RDATE:19420129T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0900
+TZOFFSETTO:+0730
+TZNAME:WIT
+DTSTART:19450923T000000
+RDATE:19450923T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0730
+TZOFFSETTO:+0800
+TZNAME:WIT
+DTSTART:19480501T000000
+RDATE:19480501T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0800
+TZOFFSETTO:+0730
+TZNAME:WIT
+DTSTART:19500501T000000
+RDATE:19500501T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0730
+TZOFFSETTO:+0800
+TZNAME:CIT
+DTSTART:19640101T000000
+RDATE:19640101T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0800
 TZOFFSETTO:+0700
 TZNAME:WIT
-DTSTART:19700101T000000
+DTSTART:19880101T000000
+RDATE:19880101T000000
 END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Asia/Pontianak.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Asia/Kamchatka.ics
===================================================================
--- libkcal/libical/zoneinfo/Asia/Kamchatka.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Asia/Kamchatka.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,22 +1,88 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/Asia/Kamchatka
+TZID:/kde.org/Olson_20070327_1/Asia/Kamchatka
 X-LIC-LOCATION:Asia/Kamchatka
 BEGIN:DAYLIGHT
 TZOFFSETFROM:+1200
 TZOFFSETTO:+1300
 TZNAME:PETST
-DTSTART:19700329T020000
+DTSTART:19930328T020000
 RRULE:FREQ=YEARLY;BYMONTH=3;BYDAY=-1SU
 END:DAYLIGHT
 BEGIN:STANDARD
 TZOFFSETFROM:+1300
 TZOFFSETTO:+1200
 TZNAME:PETT
-DTSTART:19701025T030000
+DTSTART:19961027T030000
 RRULE:FREQ=YEARLY;BYMONTH=10;BYDAY=-1SU
 END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+103436
+TZOFFSETTO:+1100
+TZNAME:PETT
+DTSTART:19221110T000000
+RDATE:19221110T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+1100
+TZOFFSETTO:+1200
+TZNAME:PETT
+DTSTART:19300621T000000
+RDATE:19300621T000000
+RDATE:19920119T020000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+1200
+TZOFFSETTO:+1300
+TZNAME:PETST
+DTSTART:19810401T000000
+RDATE:19810401T000000
+RDATE:19820401T000000
+RDATE:19830401T000000
+RDATE:19840401T000000
+RDATE:19850331T020000
+RDATE:19860330T020000
+RDATE:19870329T020000
+RDATE:19880327T020000
+RDATE:19890326T020000
+RDATE:19900325T020000
+RDATE:19920328T230000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+1300
+TZOFFSETTO:+1200
+TZNAME:PETT
+DTSTART:19811001T000000
+RDATE:19811001T000000
+RDATE:19821001T000000
+RDATE:19831001T000000
+RDATE:19840930T030000
+RDATE:19850929T030000
+RDATE:19860928T030000
+RDATE:19870927T030000
+RDATE:19880925T030000
+RDATE:19890924T030000
+RDATE:19900930T030000
+RDATE:19920926T230000
+RDATE:19930926T030000
+RDATE:19940925T030000
+RDATE:19950924T030000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+1200
+TZOFFSETTO:+1200
+TZNAME:PETST
+DTSTART:19910331T020000
+RDATE:19910331T020000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+1200
+TZOFFSETTO:+1100
+TZNAME:PETT
+DTSTART:19910929T030000
+RDATE:19910929T030000
+END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Asia/Kamchatka.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Asia/Seoul.ics
===================================================================
--- libkcal/libical/zoneinfo/Asia/Seoul.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Asia/Seoul.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +1,69 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/Asia/Seoul
+TZID:/kde.org/Olson_20070327_1/Asia/Seoul
 X-LIC-LOCATION:Asia/Seoul
 BEGIN:STANDARD
+TZOFFSETFROM:+082752
+TZOFFSETTO:+0830
+TZNAME:KST
+DTSTART:18900101T000000
+RDATE:18900101T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0830
+TZOFFSETTO:+0900
+TZNAME:KST
+DTSTART:19041201T000000
+RDATE:19041201T000000
+RDATE:19320101T000000
+RDATE:19681001T000000
+END:STANDARD
+BEGIN:STANDARD
 TZOFFSETFROM:+0900
+TZOFFSETTO:+0830
+TZNAME:KST
+DTSTART:19280101T000000
+RDATE:19280101T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0900
+TZOFFSETTO:+0800
+TZNAME:KST
+DTSTART:19540321T000000
+RDATE:19540321T000000
+RDATE:19600913T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0800
 TZOFFSETTO:+0900
+TZNAME:KDT
+DTSTART:19600515T000000
+RDATE:19600515T000000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0800
+TZOFFSETTO:+0830
 TZNAME:KST
-DTSTART:19700101T000000
+DTSTART:19610810T000000
+RDATE:19610810T000000
 END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0900
+TZOFFSETTO:+1000
+TZNAME:KDT
+DTSTART:19870510T000000
+RDATE:19870510T000000
+RDATE:19880508T000000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+1000
+TZOFFSETTO:+0900
+TZNAME:KST
+DTSTART:19871011T000000
+RDATE:19871011T000000
+RDATE:19881009T000000
+END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Asia/Seoul.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Asia/Oral.ics
===================================================================
--- libkcal/libical/zoneinfo/Asia/Oral.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 0)
+++ libkcal/libical/zoneinfo/Asia/Oral.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -0,0 +1,143 @@
+BEGIN:VCALENDAR
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
+VERSION:2.0
+BEGIN:VTIMEZONE
+TZID:/kde.org/Olson_20070327_1/Asia/Oral
+X-LIC-LOCATION:Asia/Oral
+BEGIN:STANDARD
+TZOFFSETFROM:+032524
+TZOFFSETTO:+0400
+TZNAME:URAT
+DTSTART:19240502T000000
+RDATE:19240502T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0400
+TZOFFSETTO:+0500
+TZNAME:URAT
+DTSTART:19300621T000000
+RDATE:19300621T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0500
+TZOFFSETTO:+0600
+TZNAME:URAST
+DTSTART:19810401T000000
+RDATE:19810401T000000
+RDATE:19830401T000000
+RDATE:19840401T000000
+RDATE:19850331T020000
+RDATE:19860330T020000
+RDATE:19870329T020000
+RDATE:19880327T020000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0600
+TZOFFSETTO:+0600
+TZNAME:URAT
+DTSTART:19811001T000000
+RDATE:19811001T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0600
+TZOFFSETTO:+0600
+TZNAME:URAST
+DTSTART:19820401T000000
+RDATE:19820401T000000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0600
+TZOFFSETTO:+0500
+TZNAME:URAT
+DTSTART:19821001T000000
+RDATE:19821001T000000
+RDATE:19831001T000000
+RDATE:19840930T030000
+RDATE:19850929T030000
+RDATE:19860928T030000
+RDATE:19870927T030000
+RDATE:19880925T030000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0500
+TZOFFSETTO:+0500
+TZNAME:URAST
+DTSTART:19890326T020000
+RDATE:19890326T020000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0500
+TZOFFSETTO:+0400
+TZNAME:URAT
+DTSTART:19890924T030000
+RDATE:19890924T030000
+RDATE:19900930T030000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0400
+TZOFFSETTO:+0500
+TZNAME:URAST
+DTSTART:19900325T020000
+RDATE:19900325T020000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0400
+TZOFFSETTO:+0400
+TZNAME:URAT
+DTSTART:19910101T000000
+RDATE:19910101T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0400
+TZOFFSETTO:+0400
+TZNAME:ORAT
+DTSTART:19911216T000000
+RDATE:19911216T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0400
+TZOFFSETTO:+0500
+TZNAME:ORAST
+DTSTART:19920328T230000
+RDATE:19920328T230000
+RDATE:19930328T020000
+RDATE:19940327T020000
+RDATE:19950326T020000
+RDATE:19960331T020000
+RDATE:19970330T020000
+RDATE:19980329T020000
+RDATE:19990328T020000
+RDATE:20000326T020000
+RDATE:20010325T020000
+RDATE:20020331T020000
+RDATE:20030330T020000
+RDATE:20040328T020000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0500
+TZOFFSETTO:+0400
+TZNAME:ORAT
+DTSTART:19920926T230000
+RDATE:19920926T230000
+RDATE:19930926T030000
+RDATE:19940925T030000
+RDATE:19950924T030000
+RDATE:19961027T030000
+RDATE:19971026T030000
+RDATE:19981025T030000
+RDATE:19991031T030000
+RDATE:20001029T030000
+RDATE:20011028T030000
+RDATE:20021027T030000
+RDATE:20031026T030000
+RDATE:20041031T030000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0400
+TZOFFSETTO:+0500
+TZNAME:ORAT
+DTSTART:20050315T000000
+RDATE:20050315T000000
+END:STANDARD
+END:VTIMEZONE
+END:VCALENDAR
Index: libkcal/libical/zoneinfo/Asia/Choibalsan.ics
===================================================================
--- libkcal/libical/zoneinfo/Asia/Choibalsan.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Asia/Choibalsan.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +1,84 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_2/Asia/Choibalsan
+TZID:/kde.org/Olson_20070327_1/Asia/Choibalsan
 X-LIC-LOCATION:Asia/Choibalsan
 BEGIN:STANDARD
-TZOFFSETFROM:+0900
+TZOFFSETFROM:+0738
+TZOFFSETTO:+0700
+TZNAME:ULAT
+DTSTART:19050801T000000
+RDATE:19050801T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0700
+TZOFFSETTO:+0800
+TZNAME:ULAT
+DTSTART:19780101T000000
+RDATE:19780101T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0800
+TZOFFSETTO:+1000
+TZNAME:CHOST
+DTSTART:19830401T000000
+RDATE:19830401T000000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+1000
 TZOFFSETTO:+0900
 TZNAME:CHOT
-DTSTART:19700101T000000
+DTSTART:19831001T000000
+RDATE:19831001T000000
+RDATE:19840930T000000
+RDATE:19850929T000000
+RDATE:19860928T000000
+RDATE:19870927T000000
+RDATE:19880925T000000
+RDATE:19890924T000000
+RDATE:19900930T000000
+RDATE:19910929T000000
+RDATE:19920927T000000
+RDATE:19930926T000000
+RDATE:19940925T000000
+RDATE:19950924T000000
+RDATE:19960929T000000
+RDATE:19970928T000000
+RDATE:19980927T000000
+RDATE:20010929T020000
+RDATE:20020928T020000
+RDATE:20030927T020000
+RDATE:20040925T020000
+RDATE:20050924T020000
+RDATE:20060930T020000
 END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0900
+TZOFFSETTO:+1000
+TZNAME:CHOST
+DTSTART:19840401T000000
+RDATE:19840401T000000
+RDATE:19850331T000000
+RDATE:19860330T000000
+RDATE:19870329T000000
+RDATE:19880327T000000
+RDATE:19890326T000000
+RDATE:19900325T000000
+RDATE:19910331T000000
+RDATE:19920329T000000
+RDATE:19930328T000000
+RDATE:19940327T000000
+RDATE:19950326T000000
+RDATE:19960331T000000
+RDATE:19970330T000000
+RDATE:19980329T000000
+RDATE:20010428T020000
+RDATE:20020330T020000
+RDATE:20030329T020000
+RDATE:20040327T020000
+RDATE:20050326T020000
+RDATE:20060325T020000
+END:DAYLIGHT
 END:VTIMEZONE
 END:VCALENDAR
Index: libkcal/libical/zoneinfo/Asia/Kuwait.ics
===================================================================
--- libkcal/libical/zoneinfo/Asia/Kuwait.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Asia/Kuwait.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +1,15 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_4/Asia/Kuwait
+TZID:/kde.org/Olson_20070327_1/Asia/Kuwait
 X-LIC-LOCATION:Asia/Kuwait
 BEGIN:STANDARD
-TZOFFSETFROM:+0300
+TZOFFSETFROM:+031156
 TZOFFSETTO:+0300
 TZNAME:AST
-DTSTART:19700101T000000
+DTSTART:19500101T000000
+RDATE:19500101T000000
 END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Asia/Kuwait.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Asia/Krasnoyarsk.ics
===================================================================
--- libkcal/libical/zoneinfo/Asia/Krasnoyarsk.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Asia/Krasnoyarsk.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,22 +1,88 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/Asia/Krasnoyarsk
+TZID:/kde.org/Olson_20070327_1/Asia/Krasnoyarsk
 X-LIC-LOCATION:Asia/Krasnoyarsk
 BEGIN:DAYLIGHT
 TZOFFSETFROM:+0700
 TZOFFSETTO:+0800
 TZNAME:KRAST
-DTSTART:19700329T020000
+DTSTART:19930328T020000
 RRULE:FREQ=YEARLY;BYMONTH=3;BYDAY=-1SU
 END:DAYLIGHT
 BEGIN:STANDARD
 TZOFFSETFROM:+0800
 TZOFFSETTO:+0700
 TZNAME:KRAT
-DTSTART:19701025T030000
+DTSTART:19961027T030000
 RRULE:FREQ=YEARLY;BYMONTH=10;BYDAY=-1SU
 END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+061120
+TZOFFSETTO:+0600
+TZNAME:KRAT
+DTSTART:19200106T000000
+RDATE:19200106T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0600
+TZOFFSETTO:+0700
+TZNAME:KRAT
+DTSTART:19300621T000000
+RDATE:19300621T000000
+RDATE:19920119T020000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0700
+TZOFFSETTO:+0800
+TZNAME:KRAST
+DTSTART:19810401T000000
+RDATE:19810401T000000
+RDATE:19820401T000000
+RDATE:19830401T000000
+RDATE:19840401T000000
+RDATE:19850331T020000
+RDATE:19860330T020000
+RDATE:19870329T020000
+RDATE:19880327T020000
+RDATE:19890326T020000
+RDATE:19900325T020000
+RDATE:19920328T230000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0800
+TZOFFSETTO:+0700
+TZNAME:KRAT
+DTSTART:19811001T000000
+RDATE:19811001T000000
+RDATE:19821001T000000
+RDATE:19831001T000000
+RDATE:19840930T030000
+RDATE:19850929T030000
+RDATE:19860928T030000
+RDATE:19870927T030000
+RDATE:19880925T030000
+RDATE:19890924T030000
+RDATE:19900930T030000
+RDATE:19920926T230000
+RDATE:19930926T030000
+RDATE:19940925T030000
+RDATE:19950924T030000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0700
+TZOFFSETTO:+0700
+TZNAME:KRAST
+DTSTART:19910331T020000
+RDATE:19910331T020000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0700
+TZOFFSETTO:+0600
+TZNAME:KRAT
+DTSTART:19910929T030000
+RDATE:19910929T030000
+END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Asia/Krasnoyarsk.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Asia/Omsk.ics
===================================================================
--- libkcal/libical/zoneinfo/Asia/Omsk.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Asia/Omsk.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,22 +1,88 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/Asia/Omsk
+TZID:/kde.org/Olson_20070327_1/Asia/Omsk
 X-LIC-LOCATION:Asia/Omsk
 BEGIN:DAYLIGHT
 TZOFFSETFROM:+0600
 TZOFFSETTO:+0700
 TZNAME:OMSST
-DTSTART:19700329T020000
+DTSTART:19930328T020000
 RRULE:FREQ=YEARLY;BYMONTH=3;BYDAY=-1SU
 END:DAYLIGHT
 BEGIN:STANDARD
 TZOFFSETFROM:+0700
 TZOFFSETTO:+0600
 TZNAME:OMST
-DTSTART:19701025T030000
+DTSTART:19961027T030000
 RRULE:FREQ=YEARLY;BYMONTH=10;BYDAY=-1SU
 END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+045336
+TZOFFSETTO:+0500
+TZNAME:OMST
+DTSTART:19191114T000000
+RDATE:19191114T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0500
+TZOFFSETTO:+0600
+TZNAME:OMST
+DTSTART:19300621T000000
+RDATE:19300621T000000
+RDATE:19920119T020000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0600
+TZOFFSETTO:+0700
+TZNAME:OMSST
+DTSTART:19810401T000000
+RDATE:19810401T000000
+RDATE:19820401T000000
+RDATE:19830401T000000
+RDATE:19840401T000000
+RDATE:19850331T020000
+RDATE:19860330T020000
+RDATE:19870329T020000
+RDATE:19880327T020000
+RDATE:19890326T020000
+RDATE:19900325T020000
+RDATE:19920328T230000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0700
+TZOFFSETTO:+0600
+TZNAME:OMST
+DTSTART:19811001T000000
+RDATE:19811001T000000
+RDATE:19821001T000000
+RDATE:19831001T000000
+RDATE:19840930T030000
+RDATE:19850929T030000
+RDATE:19860928T030000
+RDATE:19870927T030000
+RDATE:19880925T030000
+RDATE:19890924T030000
+RDATE:19900930T030000
+RDATE:19920926T230000
+RDATE:19930926T030000
+RDATE:19940925T030000
+RDATE:19950924T030000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0600
+TZOFFSETTO:+0600
+TZNAME:OMSST
+DTSTART:19910331T020000
+RDATE:19910331T020000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0600
+TZOFFSETTO:+0500
+TZNAME:OMST
+DTSTART:19910929T030000
+RDATE:19910929T030000
+END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Asia/Omsk.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Asia/Baghdad.ics
===================================================================
--- libkcal/libical/zoneinfo/Asia/Baghdad.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Asia/Baghdad.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,22 +1,66 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/Asia/Baghdad
+TZID:/kde.org/Olson_20070327_1/Asia/Baghdad
 X-LIC-LOCATION:Asia/Baghdad
 BEGIN:DAYLIGHT
 TZOFFSETFROM:+0300
 TZOFFSETTO:+0400
 TZNAME:ADT
-DTSTART:19700401T030000
-RRULE:FREQ=YEARLY;BYMONTH=4;BYDAY=1SU
+DTSTART:19910401T030000
+RRULE:FREQ=YEARLY
 END:DAYLIGHT
 BEGIN:STANDARD
 TZOFFSETFROM:+0400
 TZOFFSETTO:+0300
 TZNAME:AST
-DTSTART:19701001T040000
-RRULE:FREQ=YEARLY;BYMONTH=10;BYDAY=1SU
+DTSTART:19911001T040000
+RRULE:FREQ=YEARLY
 END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+025740
+TZOFFSETTO:+025736
+TZNAME:BMT
+DTSTART:18900101T000000
+RDATE:18900101T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+025736
+TZOFFSETTO:+0300
+TZNAME:AST
+DTSTART:19180101T000000
+RDATE:19180101T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0300
+TZOFFSETTO:+0400
+TZNAME:ADT
+DTSTART:19820501T000000
+RDATE:19820501T000000
+RDATE:19830331T000000
+RDATE:19840401T000000
+RDATE:19850401T000000
+RDATE:19860330T010000
+RDATE:19870329T010000
+RDATE:19880327T010000
+RDATE:19890326T010000
+RDATE:19900325T010000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0400
+TZOFFSETTO:+0300
+TZNAME:AST
+DTSTART:19821001T000000
+RDATE:19821001T000000
+RDATE:19831001T000000
+RDATE:19841001T000000
+RDATE:19850929T020000
+RDATE:19860928T020000
+RDATE:19870927T020000
+RDATE:19880925T020000
+RDATE:19890924T020000
+RDATE:19900930T020000
+END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Asia/Baghdad.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Asia/Taipei.ics
===================================================================
--- libkcal/libical/zoneinfo/Asia/Taipei.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Asia/Taipei.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +1,67 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/Asia/Taipei
+TZID:/kde.org/Olson_20070327_1/Asia/Taipei
 X-LIC-LOCATION:Asia/Taipei
 BEGIN:STANDARD
+TZOFFSETFROM:+0806
+TZOFFSETTO:+0800
+TZNAME:CST
+DTSTART:18960101T000000
+RDATE:18960101T000000
+END:STANDARD
+BEGIN:DAYLIGHT
 TZOFFSETFROM:+0800
+TZOFFSETTO:+0900
+TZNAME:CDT
+DTSTART:19450501T000000
+RDATE:19450501T000000
+RDATE:19460501T000000
+RDATE:19470501T000000
+RDATE:19480501T000000
+RDATE:19490501T000000
+RDATE:19500501T000000
+RDATE:19510501T000000
+RDATE:19520301T000000
+RDATE:19530401T000000
+RDATE:19540401T000000
+RDATE:19550401T000000
+RDATE:19560401T000000
+RDATE:19570401T000000
+RDATE:19580401T000000
+RDATE:19590401T000000
+RDATE:19600601T000000
+RDATE:19610601T000000
+RDATE:19740401T000000
+RDATE:19750401T000000
+RDATE:19800630T000000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0900
 TZOFFSETTO:+0800
 TZNAME:CST
-DTSTART:19700101T000000
+DTSTART:19451001T000000
+RDATE:19451001T000000
+RDATE:19461001T000000
+RDATE:19471001T000000
+RDATE:19481001T000000
+RDATE:19491001T000000
+RDATE:19501001T000000
+RDATE:19511001T000000
+RDATE:19521101T000000
+RDATE:19531101T000000
+RDATE:19541101T000000
+RDATE:19551001T000000
+RDATE:19561001T000000
+RDATE:19571001T000000
+RDATE:19581001T000000
+RDATE:19591001T000000
+RDATE:19601001T000000
+RDATE:19611001T000000
+RDATE:19741001T000000
+RDATE:19751001T000000
+RDATE:19800930T000000
 END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Asia/Taipei.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Asia/Yekaterinburg.ics
===================================================================
--- libkcal/libical/zoneinfo/Asia/Yekaterinburg.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Asia/Yekaterinburg.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,22 +1,106 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/Asia/Yekaterinburg
+TZID:/kde.org/Olson_20070327_1/Asia/Yekaterinburg
 X-LIC-LOCATION:Asia/Yekaterinburg
 BEGIN:DAYLIGHT
 TZOFFSETFROM:+0500
 TZOFFSETTO:+0600
 TZNAME:YEKST
-DTSTART:19700329T020000
+DTSTART:19930328T020000
 RRULE:FREQ=YEARLY;BYMONTH=3;BYDAY=-1SU
 END:DAYLIGHT
 BEGIN:STANDARD
 TZOFFSETFROM:+0600
 TZOFFSETTO:+0500
 TZNAME:YEKT
-DTSTART:19701025T030000
+DTSTART:19961027T030000
 RRULE:FREQ=YEARLY;BYMONTH=10;BYDAY=-1SU
 END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+040224
+TZOFFSETTO:+0400
+TZNAME:SVET
+DTSTART:19190715T040000
+RDATE:19190715T040000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0400
+TZOFFSETTO:+0500
+TZNAME:SVET
+DTSTART:19300621T000000
+RDATE:19300621T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0500
+TZOFFSETTO:+0600
+TZNAME:SVEST
+DTSTART:19810401T000000
+RDATE:19810401T000000
+RDATE:19820401T000000
+RDATE:19830401T000000
+RDATE:19840401T000000
+RDATE:19850331T020000
+RDATE:19860330T020000
+RDATE:19870329T020000
+RDATE:19880327T020000
+RDATE:19890326T020000
+RDATE:19900325T020000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0600
+TZOFFSETTO:+0500
+TZNAME:SVET
+DTSTART:19811001T000000
+RDATE:19811001T000000
+RDATE:19821001T000000
+RDATE:19831001T000000
+RDATE:19840930T030000
+RDATE:19850929T030000
+RDATE:19860928T030000
+RDATE:19870927T030000
+RDATE:19880925T030000
+RDATE:19890924T030000
+RDATE:19900930T030000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0500
+TZOFFSETTO:+0500
+TZNAME:SVEST
+DTSTART:19910331T020000
+RDATE:19910331T020000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0500
+TZOFFSETTO:+0400
+TZNAME:SVET
+DTSTART:19910929T030000
+RDATE:19910929T030000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0400
+TZOFFSETTO:+0500
+TZNAME:YEKT
+DTSTART:19920119T020000
+RDATE:19920119T020000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0500
+TZOFFSETTO:+0600
+TZNAME:YEKST
+DTSTART:19920328T230000
+RDATE:19920328T230000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0600
+TZOFFSETTO:+0500
+TZNAME:YEKT
+DTSTART:19920926T230000
+RDATE:19920926T230000
+RDATE:19930926T030000
+RDATE:19940925T030000
+RDATE:19950924T030000
+END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Asia/Yekaterinburg.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Asia/Jayapura.ics
===================================================================
--- libkcal/libical/zoneinfo/Asia/Jayapura.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Asia/Jayapura.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +1,29 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/Asia/Jayapura
+TZID:/kde.org/Olson_20070327_1/Asia/Jayapura
 X-LIC-LOCATION:Asia/Jayapura
 BEGIN:STANDARD
+TZOFFSETFROM:+092248
+TZOFFSETTO:+0900
+TZNAME:EIT
+DTSTART:19321101T000000
+RDATE:19321101T000000
+END:STANDARD
+BEGIN:STANDARD
 TZOFFSETFROM:+0900
+TZOFFSETTO:+0930
+TZNAME:CST
+DTSTART:19440901T000000
+RDATE:19440901T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0930
 TZOFFSETTO:+0900
 TZNAME:EIT
-DTSTART:19700101T000000
+DTSTART:19640101T000000
+RDATE:19640101T000000
 END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Asia/Jayapura.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Asia/Baku.ics
===================================================================
--- libkcal/libical/zoneinfo/Asia/Baku.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Asia/Baku.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,22 +1,119 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/Asia/Baku
+TZID:/kde.org/Olson_20070327_1/Asia/Baku
 X-LIC-LOCATION:Asia/Baku
 BEGIN:DAYLIGHT
 TZOFFSETFROM:+0400
 TZOFFSETTO:+0500
 TZNAME:AZST
-DTSTART:19700329T010000
+DTSTART:19970330T040000
 RRULE:FREQ=YEARLY;BYMONTH=3;BYDAY=-1SU
 END:DAYLIGHT
 BEGIN:STANDARD
 TZOFFSETFROM:+0500
 TZOFFSETTO:+0400
 TZNAME:AZT
-DTSTART:19701025T010000
+DTSTART:19971026T050000
 RRULE:FREQ=YEARLY;BYMONTH=10;BYDAY=-1SU
 END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+031924
+TZOFFSETTO:+0300
+TZNAME:BAKT
+DTSTART:19240502T000000
+RDATE:19240502T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0300
+TZOFFSETTO:+0400
+TZNAME:BAKT
+DTSTART:19570301T000000
+RDATE:19570301T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0400
+TZOFFSETTO:+0500
+TZNAME:BAKST
+DTSTART:19810401T000000
+RDATE:19810401T000000
+RDATE:19820401T000000
+RDATE:19830401T000000
+RDATE:19840401T000000
+RDATE:19850331T020000
+RDATE:19860330T020000
+RDATE:19870329T020000
+RDATE:19880327T020000
+RDATE:19890326T020000
+RDATE:19900325T020000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0500
+TZOFFSETTO:+0400
+TZNAME:BAKT
+DTSTART:19811001T000000
+RDATE:19811001T000000
+RDATE:19821001T000000
+RDATE:19831001T000000
+RDATE:19840930T030000
+RDATE:19850929T030000
+RDATE:19860928T030000
+RDATE:19870927T030000
+RDATE:19880925T030000
+RDATE:19890924T030000
+RDATE:19900930T030000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0400
+TZOFFSETTO:+0400
+TZNAME:BAKST
+DTSTART:19910331T020000
+RDATE:19910331T020000
+END:DAYLIGHT
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0400
+TZOFFSETTO:+0400
+TZNAME:AZST
+DTSTART:19910830T000000
+RDATE:19910830T000000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0400
+TZOFFSETTO:+0300
+TZNAME:AZT
+DTSTART:19910929T030000
+RDATE:19910929T030000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0300
+TZOFFSETTO:+0400
+TZNAME:AZST
+DTSTART:19920328T230000
+RDATE:19920328T230000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0400
+TZOFFSETTO:+0400
+TZNAME:AZT
+DTSTART:19920926T230000
+RDATE:19920926T230000
+RDATE:19960101T000000
+RDATE:19970101T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0400
+TZOFFSETTO:+0500
+TZNAME:AZST
+DTSTART:19960331T050000
+RDATE:19960331T050000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0500
+TZOFFSETTO:+0400
+TZNAME:AZT
+DTSTART:19961027T060000
+RDATE:19961027T060000
+END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Asia/Baku.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Asia/Urumqi.ics
===================================================================
--- libkcal/libical/zoneinfo/Asia/Urumqi.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Asia/Urumqi.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +1,46 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/Asia/Urumqi
+TZID:/kde.org/Olson_20070327_1/Asia/Urumqi
 X-LIC-LOCATION:Asia/Urumqi
 BEGIN:STANDARD
+TZOFFSETFROM:+055020
+TZOFFSETTO:+0600
+TZNAME:URUT
+DTSTART:19280101T000000
+RDATE:19280101T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0600
+TZOFFSETTO:+0800
+TZNAME:CST
+DTSTART:19800501T000000
+RDATE:19800501T000000
+END:STANDARD
+BEGIN:DAYLIGHT
 TZOFFSETFROM:+0800
+TZOFFSETTO:+0900
+TZNAME:CDT
+DTSTART:19860504T000000
+RDATE:19860504T000000
+RDATE:19870412T000000
+RDATE:19880410T000000
+RDATE:19890416T000000
+RDATE:19900415T000000
+RDATE:19910414T000000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0900
 TZOFFSETTO:+0800
 TZNAME:CST
-DTSTART:19700101T000000
+DTSTART:19860914T000000
+RDATE:19860914T000000
+RDATE:19870913T000000
+RDATE:19880911T000000
+RDATE:19890917T000000
+RDATE:19900916T000000
+RDATE:19910915T000000
 END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Asia/Urumqi.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Asia/Vientiane.ics
===================================================================
--- libkcal/libical/zoneinfo/Asia/Vientiane.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Asia/Vientiane.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +1,36 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/Asia/Vientiane
+TZID:/kde.org/Olson_20070327_1/Asia/Vientiane
 X-LIC-LOCATION:Asia/Vientiane
 BEGIN:STANDARD
+TZOFFSETFROM:+065024
+TZOFFSETTO:+070620
+TZNAME:SMT
+DTSTART:19060609T000000
+RDATE:19060609T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+070620
+TZOFFSETTO:+0700
+TZNAME:ICT
+DTSTART:19110311T000100
+RDATE:19110311T000100
+END:STANDARD
+BEGIN:STANDARD
 TZOFFSETFROM:+0700
+TZOFFSETTO:+0800
+TZNAME:ICT
+DTSTART:19120501T000000
+RDATE:19120501T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0800
 TZOFFSETTO:+0700
 TZNAME:ICT
-DTSTART:19700101T000000
+DTSTART:19310501T000000
+RDATE:19310501T000000
 END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Asia/Vientiane.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Asia/Dubai.ics
===================================================================
--- libkcal/libical/zoneinfo/Asia/Dubai.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Asia/Dubai.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +1,15 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_4/Asia/Dubai
+TZID:/kde.org/Olson_20070327_1/Asia/Dubai
 X-LIC-LOCATION:Asia/Dubai
 BEGIN:STANDARD
-TZOFFSETFROM:+0400
+TZOFFSETFROM:+034112
 TZOFFSETTO:+0400
 TZNAME:GST
-DTSTART:19700101T000000
+DTSTART:19200101T000000
+RDATE:19200101T000000
 END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Asia/Dubai.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Asia/Nicosia.ics
===================================================================
--- libkcal/libical/zoneinfo/Asia/Nicosia.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Asia/Nicosia.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,22 +1,95 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/Asia/Nicosia
+TZID:/kde.org/Olson_20070327_1/Asia/Nicosia
 X-LIC-LOCATION:Asia/Nicosia
 BEGIN:STANDARD
 TZOFFSETFROM:+0300
 TZOFFSETTO:+0200
 TZNAME:EET
-DTSTART:19701025T040000
+DTSTART:19981025T040000
 RRULE:FREQ=YEARLY;BYMONTH=10;BYDAY=-1SU
 END:STANDARD
 BEGIN:DAYLIGHT
 TZOFFSETFROM:+0200
 TZOFFSETTO:+0300
 TZNAME:EEST
-DTSTART:19700329T030000
+DTSTART:19990328T030000
 RRULE:FREQ=YEARLY;BYMONTH=3;BYDAY=-1SU
 END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+021328
+TZOFFSETTO:+0200
+TZNAME:EET
+DTSTART:19211114T000000
+RDATE:19211114T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0200
+TZOFFSETTO:+0300
+TZNAME:EEST
+DTSTART:19750413T000000
+RDATE:19750413T000000
+RDATE:19760515T000000
+RDATE:19770403T000000
+RDATE:19780402T000000
+RDATE:19790401T000000
+RDATE:19800406T000000
+RDATE:19810329T000000
+RDATE:19820328T000000
+RDATE:19830327T000000
+RDATE:19840325T000000
+RDATE:19850331T000000
+RDATE:19860330T000000
+RDATE:19870329T000000
+RDATE:19880327T000000
+RDATE:19890326T000000
+RDATE:19900325T000000
+RDATE:19910331T000000
+RDATE:19920329T000000
+RDATE:19930328T000000
+RDATE:19940327T000000
+RDATE:19950326T000000
+RDATE:19960331T000000
+RDATE:19970330T000000
+RDATE:19980329T000000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0300
+TZOFFSETTO:+0200
+TZNAME:EET
+DTSTART:19751012T000000
+RDATE:19751012T000000
+RDATE:19761011T000000
+RDATE:19770925T000000
+RDATE:19781002T000000
+RDATE:19790930T000000
+RDATE:19800928T000000
+RDATE:19810927T000000
+RDATE:19820926T000000
+RDATE:19830925T000000
+RDATE:19840930T000000
+RDATE:19850929T000000
+RDATE:19860928T000000
+RDATE:19870927T000000
+RDATE:19880925T000000
+RDATE:19890924T000000
+RDATE:19900930T000000
+RDATE:19910929T000000
+RDATE:19920927T000000
+RDATE:19930926T000000
+RDATE:19940925T000000
+RDATE:19950924T000000
+RDATE:19960929T000000
+RDATE:19970928T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0300
+TZOFFSETTO:+0300
+TZNAME:EEST
+DTSTART:19980901T000000
+RDATE:19980901T000000
+END:DAYLIGHT
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Asia/Nicosia.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Asia/Singapore.ics
===================================================================
--- libkcal/libical/zoneinfo/Asia/Singapore.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Asia/Singapore.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +1,71 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/Asia/Singapore
+TZID:/kde.org/Olson_20070327_1/Asia/Singapore
 X-LIC-LOCATION:Asia/Singapore
 BEGIN:STANDARD
-TZOFFSETFROM:+0800
+TZOFFSETFROM:+065525
+TZOFFSETTO:+065525
+TZNAME:SMT
+DTSTART:19010101T000000
+RDATE:19010101T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+065525
+TZOFFSETTO:+0700
+TZNAME:MALT
+DTSTART:19050601T000000
+RDATE:19050601T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0700
+TZOFFSETTO:+0720
+TZNAME:MALST
+DTSTART:19330101T000000
+RDATE:19330101T000000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0720
+TZOFFSETTO:+0720
+TZNAME:MALT
+DTSTART:19360101T000000
+RDATE:19360101T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0720
+TZOFFSETTO:+0730
+TZNAME:MALT
+DTSTART:19410901T000000
+RDATE:19410901T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0730
+TZOFFSETTO:+0900
+TZNAME:JST
+DTSTART:19420216T000000
+RDATE:19420216T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0900
+TZOFFSETTO:+0730
+TZNAME:MALT
+DTSTART:19450912T000000
+RDATE:19450912T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0730
+TZOFFSETTO:+0730
+TZNAME:SGT
+DTSTART:19650809T000000
+RDATE:19650809T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0730
 TZOFFSETTO:+0800
 TZNAME:SGT
-DTSTART:19700101T000000
+DTSTART:19820101T000000
+RDATE:19820101T000000
 END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Asia/Singapore.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Asia/Dushanbe.ics
===================================================================
--- libkcal/libical/zoneinfo/Asia/Dushanbe.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Asia/Dushanbe.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +1,68 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/Asia/Dushanbe
+TZID:/kde.org/Olson_20070327_1/Asia/Dushanbe
 X-LIC-LOCATION:Asia/Dushanbe
 BEGIN:STANDARD
+TZOFFSETFROM:+043512
+TZOFFSETTO:+0500
+TZNAME:DUST
+DTSTART:19240502T000000
+RDATE:19240502T000000
+END:STANDARD
+BEGIN:STANDARD
 TZOFFSETFROM:+0500
+TZOFFSETTO:+0600
+TZNAME:DUST
+DTSTART:19300621T000000
+RDATE:19300621T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0600
+TZOFFSETTO:+0700
+TZNAME:DUSST
+DTSTART:19810401T000000
+RDATE:19810401T000000
+RDATE:19820401T000000
+RDATE:19830401T000000
+RDATE:19840401T000000
+RDATE:19850331T020000
+RDATE:19860330T020000
+RDATE:19870329T020000
+RDATE:19880327T020000
+RDATE:19890326T020000
+RDATE:19900325T020000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0700
+TZOFFSETTO:+0600
+TZNAME:DUST
+DTSTART:19811001T000000
+RDATE:19811001T000000
+RDATE:19821001T000000
+RDATE:19831001T000000
+RDATE:19840930T030000
+RDATE:19850929T030000
+RDATE:19860928T030000
+RDATE:19870927T030000
+RDATE:19880925T030000
+RDATE:19890924T030000
+RDATE:19900930T030000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0600
+TZOFFSETTO:+0600
+TZNAME:DUSST
+DTSTART:19910331T020000
+RDATE:19910331T020000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0600
 TZOFFSETTO:+0500
 TZNAME:TJT
-DTSTART:19700101T000000
+DTSTART:19910909T030000
+RDATE:19910909T030000
 END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Asia/Dushanbe.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Asia/Sakhalin.ics
===================================================================
--- libkcal/libical/zoneinfo/Asia/Sakhalin.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Asia/Sakhalin.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,22 +1,107 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_2/Asia/Sakhalin
+TZID:/kde.org/Olson_20070327_1/Asia/Sakhalin
 X-LIC-LOCATION:Asia/Sakhalin
 BEGIN:STANDARD
 TZOFFSETFROM:+1100
 TZOFFSETTO:+1000
 TZNAME:SAKT
-DTSTART:19701025T030000
+DTSTART:19971026T030000
 RRULE:FREQ=YEARLY;BYMONTH=10;BYDAY=-1SU
 END:STANDARD
 BEGIN:DAYLIGHT
 TZOFFSETFROM:+1000
 TZOFFSETTO:+1100
 TZNAME:SAKST
-DTSTART:19700329T020000
+DTSTART:19980329T020000
 RRULE:FREQ=YEARLY;BYMONTH=3;BYDAY=-1SU
 END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+093048
+TZOFFSETTO:+0900
+TZNAME:CJT
+DTSTART:19050823T000000
+RDATE:19050823T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0900
+TZOFFSETTO:+0900
+TZNAME:JST
+DTSTART:19380101T000000
+RDATE:19380101T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0900
+TZOFFSETTO:+1100
+TZNAME:SAKT
+DTSTART:19450825T000000
+RDATE:19450825T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+1100
+TZOFFSETTO:+1200
+TZNAME:SAKST
+DTSTART:19810401T000000
+RDATE:19810401T000000
+RDATE:19820401T000000
+RDATE:19830401T000000
+RDATE:19840401T000000
+RDATE:19850331T020000
+RDATE:19860330T020000
+RDATE:19870329T020000
+RDATE:19880327T020000
+RDATE:19890326T020000
+RDATE:19900325T020000
+RDATE:19920328T230000
+RDATE:19930328T020000
+RDATE:19940327T020000
+RDATE:19950326T020000
+RDATE:19960331T020000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+1200
+TZOFFSETTO:+1100
+TZNAME:SAKT
+DTSTART:19811001T000000
+RDATE:19811001T000000
+RDATE:19821001T000000
+RDATE:19831001T000000
+RDATE:19840930T030000
+RDATE:19850929T030000
+RDATE:19860928T030000
+RDATE:19870927T030000
+RDATE:19880925T030000
+RDATE:19890924T030000
+RDATE:19900930T030000
+RDATE:19920926T230000
+RDATE:19930926T030000
+RDATE:19940925T030000
+RDATE:19950924T030000
+RDATE:19961027T030000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+1100
+TZOFFSETTO:+1100
+TZNAME:SAKST
+DTSTART:19910331T020000
+RDATE:19910331T020000
+RDATE:19970330T020000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+1100
+TZOFFSETTO:+1000
+TZNAME:SAKT
+DTSTART:19910929T030000
+RDATE:19910929T030000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+1000
+TZOFFSETTO:+1100
+TZNAME:SAKT
+DTSTART:19920119T020000
+RDATE:19920119T020000
+END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR
Index: libkcal/libical/zoneinfo/Asia/Qyzylorda.ics
===================================================================
--- libkcal/libical/zoneinfo/Asia/Qyzylorda.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 0)
+++ libkcal/libical/zoneinfo/Asia/Qyzylorda.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -0,0 +1,132 @@
+BEGIN:VCALENDAR
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
+VERSION:2.0
+BEGIN:VTIMEZONE
+TZID:/kde.org/Olson_20070327_1/Asia/Qyzylorda
+X-LIC-LOCATION:Asia/Qyzylorda
+BEGIN:STANDARD
+TZOFFSETFROM:+042152
+TZOFFSETTO:+0400
+TZNAME:KIZT
+DTSTART:19240502T000000
+RDATE:19240502T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0400
+TZOFFSETTO:+0500
+TZNAME:KIZT
+DTSTART:19300621T000000
+RDATE:19300621T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0500
+TZOFFSETTO:+0600
+TZNAME:KIZST
+DTSTART:19810401T000000
+RDATE:19810401T000000
+RDATE:19830401T000000
+RDATE:19840401T000000
+RDATE:19850331T020000
+RDATE:19860330T020000
+RDATE:19870329T020000
+RDATE:19880327T020000
+RDATE:19890326T020000
+RDATE:19900325T020000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0600
+TZOFFSETTO:+0600
+TZNAME:KIZT
+DTSTART:19811001T000000
+RDATE:19811001T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0600
+TZOFFSETTO:+0600
+TZNAME:KIZST
+DTSTART:19820401T000000
+RDATE:19820401T000000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0600
+TZOFFSETTO:+0500
+TZNAME:KIZT
+DTSTART:19821001T000000
+RDATE:19821001T000000
+RDATE:19831001T000000
+RDATE:19840930T030000
+RDATE:19850929T030000
+RDATE:19860928T030000
+RDATE:19870927T030000
+RDATE:19880925T030000
+RDATE:19890924T030000
+RDATE:19900930T030000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0500
+TZOFFSETTO:+0500
+TZNAME:KIZT
+DTSTART:19910101T000000
+RDATE:19910101T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0500
+TZOFFSETTO:+0500
+TZNAME:QYZT
+DTSTART:19911216T000000
+RDATE:19911216T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0500
+TZOFFSETTO:+0600
+TZNAME:QYZT
+DTSTART:19920119T020000
+RDATE:19920119T020000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0600
+TZOFFSETTO:+0700
+TZNAME:QYZST
+DTSTART:19920328T230000
+RDATE:19920328T230000
+RDATE:19930328T020000
+RDATE:19940327T020000
+RDATE:19950326T020000
+RDATE:19960331T020000
+RDATE:19970330T020000
+RDATE:19980329T020000
+RDATE:19990328T020000
+RDATE:20000326T020000
+RDATE:20010325T020000
+RDATE:20020331T020000
+RDATE:20030330T020000
+RDATE:20040328T020000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0700
+TZOFFSETTO:+0600
+TZNAME:QYZT
+DTSTART:19920926T230000
+RDATE:19920926T230000
+RDATE:19930926T030000
+RDATE:19940925T030000
+RDATE:19950924T030000
+RDATE:19961027T030000
+RDATE:19971026T030000
+RDATE:19981025T030000
+RDATE:19991031T030000
+RDATE:20001029T030000
+RDATE:20011028T030000
+RDATE:20021027T030000
+RDATE:20031026T030000
+RDATE:20041031T030000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0600
+TZOFFSETTO:+0600
+TZNAME:QYZT
+DTSTART:20050315T000000
+RDATE:20050315T000000
+END:STANDARD
+END:VTIMEZONE
+END:VCALENDAR
Index: libkcal/libical/zoneinfo/Asia/Kabul.ics
===================================================================
--- libkcal/libical/zoneinfo/Asia/Kabul.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Asia/Kabul.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +1,22 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/Asia/Kabul
+TZID:/kde.org/Olson_20070327_1/Asia/Kabul
 X-LIC-LOCATION:Asia/Kabul
 BEGIN:STANDARD
-TZOFFSETFROM:+0430
+TZOFFSETFROM:+043648
+TZOFFSETTO:+0400
+TZNAME:AFT
+DTSTART:18900101T000000
+RDATE:18900101T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0400
 TZOFFSETTO:+0430
 TZNAME:AFT
-DTSTART:19700101T000000
+DTSTART:19450101T000000
+RDATE:19450101T000000
 END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Asia/Kabul.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Asia/Calcutta.ics
===================================================================
--- libkcal/libical/zoneinfo/Asia/Calcutta.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Asia/Calcutta.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +1,37 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/Asia/Calcutta
+TZID:/kde.org/Olson_20070327_1/Asia/Calcutta
 X-LIC-LOCATION:Asia/Calcutta
 BEGIN:STANDARD
-TZOFFSETFROM:+0530
+TZOFFSETFROM:+055328
+TZOFFSETTO:+055320
+TZNAME:HMT
+DTSTART:18800101T000000
+RDATE:18800101T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+055320
+TZOFFSETTO:+0630
+TZNAME:BURT
+DTSTART:19411001T000000
+RDATE:19411001T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0630
 TZOFFSETTO:+0530
 TZNAME:IST
-DTSTART:19700101T000000
+DTSTART:19420515T000000
+RDATE:19420515T000000
+RDATE:19451015T000000
 END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0530
+TZOFFSETTO:+0630
+TZNAME:IST
+DTSTART:19420901T000000
+RDATE:19420901T000000
+END:DAYLIGHT
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Asia/Calcutta.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Asia/Samarkand.ics
===================================================================
--- libkcal/libical/zoneinfo/Asia/Samarkand.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Asia/Samarkand.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +1,88 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/Asia/Samarkand
+TZID:/kde.org/Olson_20070327_1/Asia/Samarkand
 X-LIC-LOCATION:Asia/Samarkand
 BEGIN:STANDARD
+TZOFFSETFROM:+042712
+TZOFFSETTO:+0400
+TZNAME:SAMT
+DTSTART:19240502T000000
+RDATE:19240502T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0400
+TZOFFSETTO:+0500
+TZNAME:SAMT
+DTSTART:19300621T000000
+RDATE:19300621T000000
+END:STANDARD
+BEGIN:DAYLIGHT
 TZOFFSETFROM:+0500
+TZOFFSETTO:+0600
+TZNAME:SAMST
+DTSTART:19810401T000000
+RDATE:19810401T000000
+RDATE:19830401T000000
+RDATE:19840401T000000
+RDATE:19850331T020000
+RDATE:19860330T020000
+RDATE:19870329T020000
+RDATE:19880327T020000
+RDATE:19890326T020000
+RDATE:19900325T020000
+RDATE:19910331T020000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0600
+TZOFFSETTO:+0600
+TZNAME:TAST
+DTSTART:19811001T000000
+RDATE:19811001T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0600
+TZOFFSETTO:+0600
+TZNAME:SAMST
+DTSTART:19820401T000000
+RDATE:19820401T000000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0600
 TZOFFSETTO:+0500
+TZNAME:SAMT
+DTSTART:19821001T000000
+RDATE:19821001T000000
+RDATE:19831001T000000
+RDATE:19840930T030000
+RDATE:19850929T030000
+RDATE:19860928T030000
+RDATE:19870927T030000
+RDATE:19880925T030000
+RDATE:19890924T030000
+RDATE:19900930T030000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0600
+TZOFFSETTO:+0600
+TZNAME:UZST
+DTSTART:19910901T000000
+RDATE:19910901T000000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0600
+TZOFFSETTO:+0500
 TZNAME:UZT
-DTSTART:19700101T000000
+DTSTART:19910929T030000
+RDATE:19910929T030000
 END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0500
+TZOFFSETTO:+0500
+TZNAME:UZT
+DTSTART:19920101T000000
+RDATE:19920101T000000
+END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Asia/Samarkand.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Asia/Manila.ics
===================================================================
--- libkcal/libical/zoneinfo/Asia/Manila.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Asia/Manila.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +1,48 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/Asia/Manila
+TZID:/kde.org/Olson_20070327_1/Asia/Manila
 X-LIC-LOCATION:Asia/Manila
 BEGIN:STANDARD
+TZOFFSETFROM:-1556
+TZOFFSETTO:+0804
+TZNAME:LMT
+DTSTART:18441231T000000
+RDATE:18441231T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0804
+TZOFFSETTO:+0800
+TZNAME:PHT
+DTSTART:18990511T000000
+RDATE:18990511T000000
+END:STANDARD
+BEGIN:DAYLIGHT
 TZOFFSETFROM:+0800
+TZOFFSETTO:+0900
+TZNAME:PHST
+DTSTART:19361101T000000
+RDATE:19361101T000000
+RDATE:19540412T000000
+RDATE:19780322T000000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0900
 TZOFFSETTO:+0800
 TZNAME:PHT
-DTSTART:19700101T000000
+DTSTART:19370201T000000
+RDATE:19370201T000000
+RDATE:19441101T000000
+RDATE:19540701T000000
+RDATE:19780921T000000
 END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0800
+TZOFFSETTO:+0900
+TZNAME:JST
+DTSTART:19420501T000000
+RDATE:19420501T000000
+END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Asia/Manila.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Asia/Kuala_Lumpur.ics
===================================================================
--- libkcal/libical/zoneinfo/Asia/Kuala_Lumpur.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Asia/Kuala_Lumpur.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +1,64 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/Asia/Kuala_Lumpur
+TZID:/kde.org/Olson_20070327_1/Asia/Kuala_Lumpur
 X-LIC-LOCATION:Asia/Kuala_Lumpur
 BEGIN:STANDARD
-TZOFFSETFROM:+0800
+TZOFFSETFROM:+064646
+TZOFFSETTO:+065525
+TZNAME:SMT
+DTSTART:19010101T000000
+RDATE:19010101T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+065525
+TZOFFSETTO:+0700
+TZNAME:MALT
+DTSTART:19050601T000000
+RDATE:19050601T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0700
+TZOFFSETTO:+0720
+TZNAME:MALST
+DTSTART:19330101T000000
+RDATE:19330101T000000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0720
+TZOFFSETTO:+0720
+TZNAME:MALT
+DTSTART:19360101T000000
+RDATE:19360101T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0720
+TZOFFSETTO:+0730
+TZNAME:MALT
+DTSTART:19410901T000000
+RDATE:19410901T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0730
+TZOFFSETTO:+0900
+TZNAME:JST
+DTSTART:19420216T000000
+RDATE:19420216T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0900
+TZOFFSETTO:+0730
+TZNAME:MALT
+DTSTART:19450912T000000
+RDATE:19450912T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0730
 TZOFFSETTO:+0800
 TZNAME:MYT
-DTSTART:19700101T000000
+DTSTART:19820101T000000
+RDATE:19820101T000000
 END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Asia/Kuala_Lumpur.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Asia/Katmandu.ics
===================================================================
--- libkcal/libical/zoneinfo/Asia/Katmandu.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Asia/Katmandu.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +1,22 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/Asia/Katmandu
+TZID:/kde.org/Olson_20070327_1/Asia/Katmandu
 X-LIC-LOCATION:Asia/Katmandu
 BEGIN:STANDARD
-TZOFFSETFROM:+0545
+TZOFFSETFROM:+054116
+TZOFFSETTO:+0530
+TZNAME:IST
+DTSTART:19200101T000000
+RDATE:19200101T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0530
 TZOFFSETTO:+0545
 TZNAME:NPT
-DTSTART:19700101T000000
+DTSTART:19860101T000000
+RDATE:19860101T000000
 END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Asia/Katmandu.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Asia/Bahrain.ics
===================================================================
--- libkcal/libical/zoneinfo/Asia/Bahrain.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Asia/Bahrain.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +1,22 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/Asia/Bahrain
+TZID:/kde.org/Olson_20070327_1/Asia/Bahrain
 X-LIC-LOCATION:Asia/Bahrain
 BEGIN:STANDARD
-TZOFFSETFROM:+0300
+TZOFFSETFROM:+032220
+TZOFFSETTO:+0400
+TZNAME:GST
+DTSTART:19200101T000000
+RDATE:19200101T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0400
 TZOFFSETTO:+0300
 TZNAME:AST
-DTSTART:19700101T000000
+DTSTART:19720601T000000
+RDATE:19720601T000000
 END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Asia/Bahrain.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Asia/Aden.ics
===================================================================
--- libkcal/libical/zoneinfo/Asia/Aden.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Asia/Aden.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +1,15 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_4/Asia/Aden
+TZID:/kde.org/Olson_20070327_1/Asia/Aden
 X-LIC-LOCATION:Asia/Aden
 BEGIN:STANDARD
-TZOFFSETFROM:+0300
+TZOFFSETFROM:+030048
 TZOFFSETTO:+0300
 TZNAME:AST
-DTSTART:19700101T000000
+DTSTART:19500101T000000
+RDATE:19500101T000000
 END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Asia/Aden.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Asia/Qatar.ics
===================================================================
--- libkcal/libical/zoneinfo/Asia/Qatar.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Asia/Qatar.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +1,22 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/Asia/Qatar
+TZID:/kde.org/Olson_20070327_1/Asia/Qatar
 X-LIC-LOCATION:Asia/Qatar
 BEGIN:STANDARD
-TZOFFSETFROM:+0300
+TZOFFSETFROM:+032608
+TZOFFSETTO:+0400
+TZNAME:GST
+DTSTART:19200101T000000
+RDATE:19200101T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0400
 TZOFFSETTO:+0300
 TZNAME:AST
-DTSTART:19700101T000000
+DTSTART:19720601T000000
+RDATE:19720601T000000
 END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Asia/Qatar.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Asia/Dhaka.ics
===================================================================
--- libkcal/libical/zoneinfo/Asia/Dhaka.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Asia/Dhaka.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +1,50 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/Asia/Dhaka
+TZID:/kde.org/Olson_20070327_1/Asia/Dhaka
 X-LIC-LOCATION:Asia/Dhaka
 BEGIN:STANDARD
+TZOFFSETFROM:+060140
+TZOFFSETTO:+055320
+TZNAME:HMT
+DTSTART:18900101T000000
+RDATE:18900101T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+055320
+TZOFFSETTO:+0630
+TZNAME:BURT
+DTSTART:19411001T000000
+RDATE:19411001T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0630
+TZOFFSETTO:+0530
+TZNAME:IST
+DTSTART:19420515T000000
+RDATE:19420515T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0530
+TZOFFSETTO:+0630
+TZNAME:BURT
+DTSTART:19420901T000000
+RDATE:19420901T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0630
+TZOFFSETTO:+0600
+TZNAME:DACT
+DTSTART:19510930T000000
+RDATE:19510930T000000
+END:STANDARD
+BEGIN:STANDARD
 TZOFFSETFROM:+0600
 TZOFFSETTO:+0600
 TZNAME:BDT
-DTSTART:19700101T000000
+DTSTART:19710326T000000
+RDATE:19710326T000000
 END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Asia/Dhaka.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Asia/Pyongyang.ics
===================================================================
--- libkcal/libical/zoneinfo/Asia/Pyongyang.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Asia/Pyongyang.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +1,44 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/Asia/Pyongyang
+TZID:/kde.org/Olson_20070327_1/Asia/Pyongyang
 X-LIC-LOCATION:Asia/Pyongyang
 BEGIN:STANDARD
+TZOFFSETFROM:+0823
+TZOFFSETTO:+0830
+TZNAME:KST
+DTSTART:18900101T000000
+RDATE:18900101T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0830
+TZOFFSETTO:+0900
+TZNAME:KST
+DTSTART:19041201T000000
+RDATE:19041201T000000
+RDATE:19320101T000000
+END:STANDARD
+BEGIN:STANDARD
 TZOFFSETFROM:+0900
+TZOFFSETTO:+0830
+TZNAME:KST
+DTSTART:19280101T000000
+RDATE:19280101T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0900
+TZOFFSETTO:+0800
+TZNAME:KST
+DTSTART:19540321T000000
+RDATE:19540321T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0800
 TZOFFSETTO:+0900
 TZNAME:KST
-DTSTART:19700101T000000
+DTSTART:19610810T000000
+RDATE:19610810T000000
 END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Asia/Pyongyang.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Asia/Aqtobe.ics
===================================================================
--- libkcal/libical/zoneinfo/Asia/Aqtobe.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Asia/Aqtobe.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,22 +1,119 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20020614_6/Asia/Aqtobe
+TZID:/kde.org/Olson_20070327_1/Asia/Aqtobe
 X-LIC-LOCATION:Asia/Aqtobe
+BEGIN:STANDARD
+TZOFFSETFROM:+034840
+TZOFFSETTO:+0400
+TZNAME:AKTT
+DTSTART:19240502T000000
+RDATE:19240502T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0400
+TZOFFSETTO:+0500
+TZNAME:AKTT
+DTSTART:19300621T000000
+RDATE:19300621T000000
+END:STANDARD
 BEGIN:DAYLIGHT
 TZOFFSETFROM:+0500
 TZOFFSETTO:+0600
+TZNAME:AKTST
+DTSTART:19810401T000000
+RDATE:19810401T000000
+RDATE:19830401T000000
+RDATE:19840401T000000
+RDATE:19850331T020000
+RDATE:19860330T020000
+RDATE:19870329T020000
+RDATE:19880327T020000
+RDATE:19890326T020000
+RDATE:19900325T020000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0600
+TZOFFSETTO:+0600
+TZNAME:AKTT
+DTSTART:19811001T000000
+RDATE:19811001T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0600
+TZOFFSETTO:+0600
+TZNAME:AKTST
+DTSTART:19820401T000000
+RDATE:19820401T000000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0600
+TZOFFSETTO:+0500
+TZNAME:AKTT
+DTSTART:19821001T000000
+RDATE:19821001T000000
+RDATE:19831001T000000
+RDATE:19840930T030000
+RDATE:19850929T030000
+RDATE:19860928T030000
+RDATE:19870927T030000
+RDATE:19880925T030000
+RDATE:19890924T030000
+RDATE:19900930T030000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0500
+TZOFFSETTO:+0500
+TZNAME:AKTT
+DTSTART:19910101T000000
+RDATE:19910101T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0500
+TZOFFSETTO:+0500
+TZNAME:AQTT
+DTSTART:19911216T000000
+RDATE:19911216T000000
+RDATE:20050315T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0500
+TZOFFSETTO:+0600
 TZNAME:AQTST
-DTSTART:19700329T020000
-RRULE:FREQ=YEARLY;BYMONTH=3;BYDAY=-1SU
+DTSTART:19920328T230000
+RDATE:19920328T230000
+RDATE:19930328T020000
+RDATE:19940327T020000
+RDATE:19950326T020000
+RDATE:19960331T020000
+RDATE:19970330T020000
+RDATE:19980329T020000
+RDATE:19990328T020000
+RDATE:20000326T020000
+RDATE:20010325T020000
+RDATE:20020331T020000
+RDATE:20030330T020000
+RDATE:20040328T020000
 END:DAYLIGHT
 BEGIN:STANDARD
 TZOFFSETFROM:+0600
 TZOFFSETTO:+0500
 TZNAME:AQTT
-DTSTART:19701025T030000
-RRULE:FREQ=YEARLY;BYMONTH=10;BYDAY=-1SU
+DTSTART:19920926T230000
+RDATE:19920926T230000
+RDATE:19930926T030000
+RDATE:19940925T030000
+RDATE:19950924T030000
+RDATE:19961027T030000
+RDATE:19971026T030000
+RDATE:19981025T030000
+RDATE:19991031T030000
+RDATE:20001029T030000
+RDATE:20011028T030000
+RDATE:20021027T030000
+RDATE:20031026T030000
+RDATE:20041031T030000
 END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Asia/Aqtobe.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Asia/Aqtau.ics
===================================================================
--- libkcal/libical/zoneinfo/Asia/Aqtau.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Asia/Aqtau.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,22 +1,143 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20020614_6/Asia/Aqtau
+TZID:/kde.org/Olson_20070327_1/Asia/Aqtau
 X-LIC-LOCATION:Asia/Aqtau
-BEGIN:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+032104
+TZOFFSETTO:+0400
+TZNAME:FORT
+DTSTART:19240502T000000
+RDATE:19240502T000000
+END:STANDARD
+BEGIN:STANDARD
 TZOFFSETFROM:+0400
 TZOFFSETTO:+0500
+TZNAME:FORT
+DTSTART:19300621T000000
+RDATE:19300621T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0500
+TZOFFSETTO:+0500
+TZNAME:SHET
+DTSTART:19630101T000000
+RDATE:19630101T000000
+RDATE:19910101T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0500
+TZOFFSETTO:+0600
+TZNAME:SHET
+DTSTART:19811001T000000
+RDATE:19811001T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0600
+TZOFFSETTO:+0600
+TZNAME:SHEST
+DTSTART:19820401T000000
+RDATE:19820401T000000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0600
+TZOFFSETTO:+0500
+TZNAME:SHET
+DTSTART:19821001T000000
+RDATE:19821001T000000
+RDATE:19831001T000000
+RDATE:19840930T030000
+RDATE:19850929T030000
+RDATE:19860928T030000
+RDATE:19870927T030000
+RDATE:19880925T030000
+RDATE:19890924T030000
+RDATE:19900930T030000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0500
+TZOFFSETTO:+0600
+TZNAME:SHEST
+DTSTART:19830401T000000
+RDATE:19830401T000000
+RDATE:19840401T000000
+RDATE:19850331T020000
+RDATE:19860330T020000
+RDATE:19870329T020000
+RDATE:19880327T020000
+RDATE:19890326T020000
+RDATE:19900325T020000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0500
+TZOFFSETTO:+0500
+TZNAME:AQTT
+DTSTART:19911216T000000
+RDATE:19911216T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0500
+TZOFFSETTO:+0600
 TZNAME:AQTST
-DTSTART:19700329T020000
-RRULE:FREQ=YEARLY;BYMONTH=3;BYDAY=-1SU
+DTSTART:19920328T230000
+RDATE:19920328T230000
+RDATE:19930328T020000
+RDATE:19940327T020000
 END:DAYLIGHT
 BEGIN:STANDARD
+TZOFFSETFROM:+0600
+TZOFFSETTO:+0500
+TZNAME:AQTT
+DTSTART:19920926T230000
+RDATE:19920926T230000
+RDATE:19930926T030000
+RDATE:19940925T030000
+END:STANDARD
+BEGIN:DAYLIGHT
 TZOFFSETFROM:+0500
+TZOFFSETTO:+0500
+TZNAME:AQTST
+DTSTART:19950326T020000
+RDATE:19950326T020000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0500
 TZOFFSETTO:+0400
 TZNAME:AQTT
-DTSTART:19701025T030000
-RRULE:FREQ=YEARLY;BYMONTH=10;BYDAY=-1SU
+DTSTART:19950924T030000
+RDATE:19950924T030000
+RDATE:19961027T030000
+RDATE:19971026T030000
+RDATE:19981025T030000
+RDATE:19991031T030000
+RDATE:20001029T030000
+RDATE:20011028T030000
+RDATE:20021027T030000
+RDATE:20031026T030000
+RDATE:20041031T030000
 END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0400
+TZOFFSETTO:+0500
+TZNAME:AQTST
+DTSTART:19960331T020000
+RDATE:19960331T020000
+RDATE:19970330T020000
+RDATE:19980329T020000
+RDATE:19990328T020000
+RDATE:20000326T020000
+RDATE:20010325T020000
+RDATE:20020331T020000
+RDATE:20030330T020000
+RDATE:20040328T020000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0400
+TZOFFSETTO:+0500
+TZNAME:AQTT
+DTSTART:20050315T000000
+RDATE:20050315T000000
+END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Asia/Aqtau.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Asia/Chongqing.ics
===================================================================
--- libkcal/libical/zoneinfo/Asia/Chongqing.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Asia/Chongqing.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +1,46 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_2/Asia/Chongqing
+TZID:/kde.org/Olson_20070327_1/Asia/Chongqing
 X-LIC-LOCATION:Asia/Chongqing
 BEGIN:STANDARD
+TZOFFSETFROM:+070620
+TZOFFSETTO:+0700
+TZNAME:LONT
+DTSTART:19280101T000000
+RDATE:19280101T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0700
+TZOFFSETTO:+0800
+TZNAME:CST
+DTSTART:19800501T000000
+RDATE:19800501T000000
+END:STANDARD
+BEGIN:DAYLIGHT
 TZOFFSETFROM:+0800
+TZOFFSETTO:+0900
+TZNAME:CDT
+DTSTART:19860504T000000
+RDATE:19860504T000000
+RDATE:19870412T000000
+RDATE:19880410T000000
+RDATE:19890416T000000
+RDATE:19900415T000000
+RDATE:19910414T000000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0900
 TZOFFSETTO:+0800
 TZNAME:CST
-DTSTART:19700101T000000
+DTSTART:19860914T000000
+RDATE:19860914T000000
+RDATE:19870913T000000
+RDATE:19880911T000000
+RDATE:19890917T000000
+RDATE:19900916T000000
+RDATE:19910915T000000
 END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR
Index: libkcal/libical/zoneinfo/Asia/Anadyr.ics
===================================================================
--- libkcal/libical/zoneinfo/Asia/Anadyr.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Asia/Anadyr.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,22 +1,112 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/Asia/Anadyr
+TZID:/kde.org/Olson_20070327_1/Asia/Anadyr
 X-LIC-LOCATION:Asia/Anadyr
 BEGIN:DAYLIGHT
 TZOFFSETFROM:+1200
 TZOFFSETTO:+1300
 TZNAME:ANAST
-DTSTART:19700329T020000
+DTSTART:19930328T020000
 RRULE:FREQ=YEARLY;BYMONTH=3;BYDAY=-1SU
 END:DAYLIGHT
 BEGIN:STANDARD
 TZOFFSETFROM:+1300
 TZOFFSETTO:+1200
 TZNAME:ANAT
-DTSTART:19701025T030000
+DTSTART:19961027T030000
 RRULE:FREQ=YEARLY;BYMONTH=10;BYDAY=-1SU
 END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+114956
+TZOFFSETTO:+1200
+TZNAME:ANAT
+DTSTART:19240502T000000
+RDATE:19240502T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+1200
+TZOFFSETTO:+1300
+TZNAME:ANAT
+DTSTART:19300621T000000
+RDATE:19300621T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+1300
+TZOFFSETTO:+1400
+TZNAME:ANAST
+DTSTART:19810401T000000
+RDATE:19810401T000000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+1400
+TZOFFSETTO:+1300
+TZNAME:ANAT
+DTSTART:19811001T000000
+RDATE:19811001T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+1300
+TZOFFSETTO:+1300
+TZNAME:ANAST
+DTSTART:19820401T000000
+RDATE:19820401T000000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+1300
+TZOFFSETTO:+1200
+TZNAME:ANAT
+DTSTART:19821001T000000
+RDATE:19821001T000000
+RDATE:19831001T000000
+RDATE:19840930T030000
+RDATE:19850929T030000
+RDATE:19860928T030000
+RDATE:19870927T030000
+RDATE:19880925T030000
+RDATE:19890924T030000
+RDATE:19900930T030000
+RDATE:19920926T230000
+RDATE:19930926T030000
+RDATE:19940925T030000
+RDATE:19950924T030000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+1200
+TZOFFSETTO:+1300
+TZNAME:ANAST
+DTSTART:19830401T000000
+RDATE:19830401T000000
+RDATE:19840401T000000
+RDATE:19850331T020000
+RDATE:19860330T020000
+RDATE:19870329T020000
+RDATE:19880327T020000
+RDATE:19890326T020000
+RDATE:19900325T020000
+RDATE:19920328T230000
+END:DAYLIGHT
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+1200
+TZOFFSETTO:+1200
+TZNAME:ANAST
+DTSTART:19910331T020000
+RDATE:19910331T020000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+1200
+TZOFFSETTO:+1100
+TZNAME:ANAT
+DTSTART:19910929T030000
+RDATE:19910929T030000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+1100
+TZOFFSETTO:+1200
+TZNAME:ANAT
+DTSTART:19920119T020000
+RDATE:19920119T020000
+END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Asia/Anadyr.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Asia/Kashgar.ics
===================================================================
--- libkcal/libical/zoneinfo/Asia/Kashgar.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Asia/Kashgar.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +1,53 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/Asia/Kashgar
+TZID:/kde.org/Olson_20070327_1/Asia/Kashgar
 X-LIC-LOCATION:Asia/Kashgar
 BEGIN:STANDARD
+TZOFFSETFROM:+050356
+TZOFFSETTO:+0530
+TZNAME:KAST
+DTSTART:19280101T000000
+RDATE:19280101T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0530
+TZOFFSETTO:+0500
+TZNAME:KAST
+DTSTART:19400101T000000
+RDATE:19400101T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0500
+TZOFFSETTO:+0800
+TZNAME:CST
+DTSTART:19800501T000000
+RDATE:19800501T000000
+END:STANDARD
+BEGIN:DAYLIGHT
 TZOFFSETFROM:+0800
+TZOFFSETTO:+0900
+TZNAME:CDT
+DTSTART:19860504T000000
+RDATE:19860504T000000
+RDATE:19870412T000000
+RDATE:19880410T000000
+RDATE:19890416T000000
+RDATE:19900415T000000
+RDATE:19910414T000000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0900
 TZOFFSETTO:+0800
 TZNAME:CST
-DTSTART:19700101T000000
+DTSTART:19860914T000000
+RDATE:19860914T000000
+RDATE:19870913T000000
+RDATE:19880911T000000
+RDATE:19890917T000000
+RDATE:19900916T000000
+RDATE:19910915T000000
 END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Asia/Kashgar.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Asia/Tashkent.ics
===================================================================
--- libkcal/libical/zoneinfo/Asia/Tashkent.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Asia/Tashkent.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +1,82 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/Asia/Tashkent
+TZID:/kde.org/Olson_20070327_1/Asia/Tashkent
 X-LIC-LOCATION:Asia/Tashkent
 BEGIN:STANDARD
+TZOFFSETFROM:+043712
+TZOFFSETTO:+0500
+TZNAME:TAST
+DTSTART:19240502T000000
+RDATE:19240502T000000
+END:STANDARD
+BEGIN:STANDARD
 TZOFFSETFROM:+0500
+TZOFFSETTO:+0600
+TZNAME:TAST
+DTSTART:19300621T000000
+RDATE:19300621T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0600
+TZOFFSETTO:+0700
+TZNAME:TASST
+DTSTART:19810401T000000
+RDATE:19810401T000000
+RDATE:19820401T000000
+RDATE:19830401T000000
+RDATE:19840401T000000
+RDATE:19850331T020000
+RDATE:19860330T020000
+RDATE:19870329T020000
+RDATE:19880327T020000
+RDATE:19890326T020000
+RDATE:19900325T020000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0700
+TZOFFSETTO:+0600
+TZNAME:TAST
+DTSTART:19811001T000000
+RDATE:19811001T000000
+RDATE:19821001T000000
+RDATE:19831001T000000
+RDATE:19840930T030000
+RDATE:19850929T030000
+RDATE:19860928T030000
+RDATE:19870927T030000
+RDATE:19880925T030000
+RDATE:19890924T030000
+RDATE:19900930T030000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0600
+TZOFFSETTO:+0600
+TZNAME:TASST
+DTSTART:19910331T020000
+RDATE:19910331T020000
+END:DAYLIGHT
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0600
+TZOFFSETTO:+0600
+TZNAME:UZST
+DTSTART:19910901T000000
+RDATE:19910901T000000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0600
 TZOFFSETTO:+0500
 TZNAME:UZT
-DTSTART:19700101T000000
+DTSTART:19910929T030000
+RDATE:19910929T030000
 END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0500
+TZOFFSETTO:+0500
+TZNAME:UZT
+DTSTART:19920101T000000
+RDATE:19920101T000000
+END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Asia/Tashkent.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Asia/Tehran.ics
===================================================================
--- libkcal/libical/zoneinfo/Asia/Tehran.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Asia/Tehran.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +1,96 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/Asia/Tehran
+TZID:/kde.org/Olson_20070327_1/Asia/Tehran
 X-LIC-LOCATION:Asia/Tehran
 BEGIN:STANDARD
+TZOFFSETFROM:+032544
+TZOFFSETTO:+032544
+TZNAME:TMT
+DTSTART:19160101T000000
+RDATE:19160101T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+032544
+TZOFFSETTO:+0330
+TZNAME:IRST
+DTSTART:19460101T000000
+RDATE:19460101T000000
+END:STANDARD
+BEGIN:STANDARD
 TZOFFSETFROM:+0330
+TZOFFSETTO:+0400
+TZNAME:IRST
+DTSTART:19771101T000000
+RDATE:19771101T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0400
+TZOFFSETTO:+0500
+TZNAME:IRDT
+DTSTART:19780321T000000
+RDATE:19780321T000000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0500
+TZOFFSETTO:+0400
+TZNAME:IRST
+DTSTART:19781021T000000
+RDATE:19781021T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0400
 TZOFFSETTO:+0330
-TZNAME:IRT
-DTSTART:19700101T000000
+TZNAME:IRST
+DTSTART:19790101T000000
+RDATE:19790101T000000
 END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0330
+TZOFFSETTO:+0430
+TZNAME:IRDT
+DTSTART:19790321T000000
+RDATE:19790321T000000
+RDATE:19800321T000000
+RDATE:19910503T000000
+RDATE:19920322T000000
+RDATE:19930322T000000
+RDATE:19940322T000000
+RDATE:19950322T000000
+RDATE:19960321T000000
+RDATE:19970322T000000
+RDATE:19980322T000000
+RDATE:19990322T000000
+RDATE:20000321T000000
+RDATE:20010322T000000
+RDATE:20020322T000000
+RDATE:20030322T000000
+RDATE:20040321T000000
+RDATE:20050322T000000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0430
+TZOFFSETTO:+0330
+TZNAME:IRST
+DTSTART:19790919T000000
+RDATE:19790919T000000
+RDATE:19800923T000000
+RDATE:19910922T000000
+RDATE:19920922T000000
+RDATE:19930922T000000
+RDATE:19940922T000000
+RDATE:19950922T000000
+RDATE:19960921T000000
+RDATE:19970922T000000
+RDATE:19980922T000000
+RDATE:19990922T000000
+RDATE:20000921T000000
+RDATE:20010922T000000
+RDATE:20020922T000000
+RDATE:20030922T000000
+RDATE:20040921T000000
+RDATE:20050922T000000
+END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Asia/Tehran.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Asia/Magadan.ics
===================================================================
--- libkcal/libical/zoneinfo/Asia/Magadan.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Asia/Magadan.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,22 +1,88 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/Asia/Magadan
+TZID:/kde.org/Olson_20070327_1/Asia/Magadan
 X-LIC-LOCATION:Asia/Magadan
 BEGIN:DAYLIGHT
 TZOFFSETFROM:+1100
 TZOFFSETTO:+1200
 TZNAME:MAGST
-DTSTART:19700329T020000
+DTSTART:19930328T020000
 RRULE:FREQ=YEARLY;BYMONTH=3;BYDAY=-1SU
 END:DAYLIGHT
 BEGIN:STANDARD
 TZOFFSETFROM:+1200
 TZOFFSETTO:+1100
 TZNAME:MAGT
-DTSTART:19701025T030000
+DTSTART:19961027T030000
 RRULE:FREQ=YEARLY;BYMONTH=10;BYDAY=-1SU
 END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+100312
+TZOFFSETTO:+1000
+TZNAME:MAGT
+DTSTART:19240502T000000
+RDATE:19240502T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+1000
+TZOFFSETTO:+1100
+TZNAME:MAGT
+DTSTART:19300621T000000
+RDATE:19300621T000000
+RDATE:19920119T020000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+1100
+TZOFFSETTO:+1200
+TZNAME:MAGST
+DTSTART:19810401T000000
+RDATE:19810401T000000
+RDATE:19820401T000000
+RDATE:19830401T000000
+RDATE:19840401T000000
+RDATE:19850331T020000
+RDATE:19860330T020000
+RDATE:19870329T020000
+RDATE:19880327T020000
+RDATE:19890326T020000
+RDATE:19900325T020000
+RDATE:19920328T230000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+1200
+TZOFFSETTO:+1100
+TZNAME:MAGT
+DTSTART:19811001T000000
+RDATE:19811001T000000
+RDATE:19821001T000000
+RDATE:19831001T000000
+RDATE:19840930T030000
+RDATE:19850929T030000
+RDATE:19860928T030000
+RDATE:19870927T030000
+RDATE:19880925T030000
+RDATE:19890924T030000
+RDATE:19900930T030000
+RDATE:19920926T230000
+RDATE:19930926T030000
+RDATE:19940925T030000
+RDATE:19950924T030000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+1100
+TZOFFSETTO:+1100
+TZNAME:MAGST
+DTSTART:19910331T020000
+RDATE:19910331T020000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+1100
+TZOFFSETTO:+1000
+TZNAME:MAGT
+DTSTART:19910929T030000
+RDATE:19910929T030000
+END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Asia/Magadan.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Asia/Colombo.ics
===================================================================
--- libkcal/libical/zoneinfo/Asia/Colombo.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Asia/Colombo.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +1,64 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/Asia/Colombo
+TZID:/kde.org/Olson_20070327_1/Asia/Colombo
 X-LIC-LOCATION:Asia/Colombo
 BEGIN:STANDARD
+TZOFFSETFROM:+051924
+TZOFFSETTO:+051932
+TZNAME:MMT
+DTSTART:18800101T000000
+RDATE:18800101T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+051932
+TZOFFSETTO:+0530
+TZNAME:IST
+DTSTART:19060101T000000
+RDATE:19060101T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0530
+TZOFFSETTO:+0600
+TZNAME:IHST
+DTSTART:19420105T000000
+RDATE:19420105T000000
+END:DAYLIGHT
+BEGIN:DAYLIGHT
 TZOFFSETFROM:+0600
+TZOFFSETTO:+0630
+TZNAME:IST
+DTSTART:19420901T000000
+RDATE:19420901T000000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0630
+TZOFFSETTO:+0530
+TZNAME:IST
+DTSTART:19451016T020000
+RDATE:19451016T020000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0530
+TZOFFSETTO:+0630
+TZNAME:LKT
+DTSTART:19960525T000000
+RDATE:19960525T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0630
 TZOFFSETTO:+0600
 TZNAME:LKT
-DTSTART:19700101T000000
+DTSTART:19961026T003000
+RDATE:19961026T003000
 END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0600
+TZOFFSETTO:+0530
+TZNAME:IST
+DTSTART:20060415T003000
+RDATE:20060415T003000
+END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Asia/Colombo.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Asia/Phnom_Penh.ics
===================================================================
--- libkcal/libical/zoneinfo/Asia/Phnom_Penh.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Asia/Phnom_Penh.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +1,36 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/Asia/Phnom_Penh
+TZID:/kde.org/Olson_20070327_1/Asia/Phnom_Penh
 X-LIC-LOCATION:Asia/Phnom_Penh
 BEGIN:STANDARD
+TZOFFSETFROM:+065940
+TZOFFSETTO:+070620
+TZNAME:SMT
+DTSTART:19060609T000000
+RDATE:19060609T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+070620
+TZOFFSETTO:+0700
+TZNAME:ICT
+DTSTART:19110311T000100
+RDATE:19110311T000100
+END:STANDARD
+BEGIN:STANDARD
 TZOFFSETFROM:+0700
+TZOFFSETTO:+0800
+TZNAME:ICT
+DTSTART:19120501T000000
+RDATE:19120501T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0800
 TZOFFSETTO:+0700
 TZNAME:ICT
-DTSTART:19700101T000000
+DTSTART:19310501T000000
+RDATE:19310501T000000
 END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Asia/Phnom_Penh.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Asia/Yakutsk.ics
===================================================================
--- libkcal/libical/zoneinfo/Asia/Yakutsk.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Asia/Yakutsk.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,22 +1,88 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/Asia/Yakutsk
+TZID:/kde.org/Olson_20070327_1/Asia/Yakutsk
 X-LIC-LOCATION:Asia/Yakutsk
 BEGIN:DAYLIGHT
 TZOFFSETFROM:+0900
 TZOFFSETTO:+1000
 TZNAME:YAKST
-DTSTART:19700329T020000
+DTSTART:19930328T020000
 RRULE:FREQ=YEARLY;BYMONTH=3;BYDAY=-1SU
 END:DAYLIGHT
 BEGIN:STANDARD
 TZOFFSETFROM:+1000
 TZOFFSETTO:+0900
 TZNAME:YAKT
-DTSTART:19701025T030000
+DTSTART:19961027T030000
 RRULE:FREQ=YEARLY;BYMONTH=10;BYDAY=-1SU
 END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+083840
+TZOFFSETTO:+0800
+TZNAME:YAKT
+DTSTART:19191215T000000
+RDATE:19191215T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0800
+TZOFFSETTO:+0900
+TZNAME:YAKT
+DTSTART:19300621T000000
+RDATE:19300621T000000
+RDATE:19920119T020000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0900
+TZOFFSETTO:+1000
+TZNAME:YAKST
+DTSTART:19810401T000000
+RDATE:19810401T000000
+RDATE:19820401T000000
+RDATE:19830401T000000
+RDATE:19840401T000000
+RDATE:19850331T020000
+RDATE:19860330T020000
+RDATE:19870329T020000
+RDATE:19880327T020000
+RDATE:19890326T020000
+RDATE:19900325T020000
+RDATE:19920328T230000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+1000
+TZOFFSETTO:+0900
+TZNAME:YAKT
+DTSTART:19811001T000000
+RDATE:19811001T000000
+RDATE:19821001T000000
+RDATE:19831001T000000
+RDATE:19840930T030000
+RDATE:19850929T030000
+RDATE:19860928T030000
+RDATE:19870927T030000
+RDATE:19880925T030000
+RDATE:19890924T030000
+RDATE:19900930T030000
+RDATE:19920926T230000
+RDATE:19930926T030000
+RDATE:19940925T030000
+RDATE:19950924T030000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0900
+TZOFFSETTO:+0900
+TZNAME:YAKST
+DTSTART:19910331T020000
+RDATE:19910331T020000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0900
+TZOFFSETTO:+0800
+TZNAME:YAKT
+DTSTART:19910929T030000
+RDATE:19910929T030000
+END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Asia/Yakutsk.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Asia/Muscat.ics
===================================================================
--- libkcal/libical/zoneinfo/Asia/Muscat.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Asia/Muscat.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +1,15 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_4/Asia/Muscat
+TZID:/kde.org/Olson_20070327_1/Asia/Muscat
 X-LIC-LOCATION:Asia/Muscat
 BEGIN:STANDARD
-TZOFFSETFROM:+0400
+TZOFFSETFROM:+035420
 TZOFFSETTO:+0400
 TZNAME:GST
-DTSTART:19700101T000000
+DTSTART:19200101T000000
+RDATE:19200101T000000
 END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Asia/Muscat.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Asia/Damascus.ics
===================================================================
--- libkcal/libical/zoneinfo/Asia/Damascus.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Asia/Damascus.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,22 +1,121 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/Asia/Damascus
+TZID:/kde.org/Olson_20070327_1/Asia/Damascus
 X-LIC-LOCATION:Asia/Damascus
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0200
+TZOFFSETTO:+0300
+TZNAME:EEST
+DTSTART:19990401T000000
+RRULE:FREQ=YEARLY
+END:DAYLIGHT
 BEGIN:STANDARD
 TZOFFSETFROM:+0300
 TZOFFSETTO:+0200
 TZNAME:EET
-DTSTART:19701001T000000
-RRULE:FREQ=YEARLY;BYMONTH=10;BYDAY=1SU
+DTSTART:20071001T000000
+RRULE:FREQ=YEARLY
 END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+022512
+TZOFFSETTO:+0200
+TZNAME:EET
+DTSTART:19200101T000000
+RDATE:19200101T000000
+END:STANDARD
 BEGIN:DAYLIGHT
 TZOFFSETFROM:+0200
 TZOFFSETTO:+0300
 TZNAME:EEST
-DTSTART:19700401T000000
-RRULE:FREQ=YEARLY;BYMONTH=4;BYDAY=1SU
+DTSTART:19200418T020000
+RDATE:19200418T020000
+RDATE:19210417T020000
+RDATE:19220416T020000
+RDATE:19230415T020000
+RDATE:19620429T020000
+RDATE:19630501T020000
+RDATE:19640501T020000
+RDATE:19650501T020000
+RDATE:19660424T020000
+RDATE:19670501T020000
+RDATE:19680501T020000
+RDATE:19690501T020000
+RDATE:19700501T020000
+RDATE:19710501T020000
+RDATE:19720501T020000
+RDATE:19730501T020000
+RDATE:19740501T020000
+RDATE:19750501T020000
+RDATE:19760501T020000
+RDATE:19770501T020000
+RDATE:19780501T020000
+RDATE:19830409T020000
+RDATE:19840409T020000
+RDATE:19860216T020000
+RDATE:19870301T020000
+RDATE:19880315T020000
+RDATE:19890331T020000
+RDATE:19900401T020000
+RDATE:19910401T000000
+RDATE:19920408T000000
+RDATE:19930326T000000
+RDATE:19940401T000000
+RDATE:19950401T000000
+RDATE:19960401T000000
+RDATE:19970331T000000
+RDATE:19980330T000000
 END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0300
+TZOFFSETTO:+0200
+TZNAME:EET
+DTSTART:19201003T020000
+RDATE:19201003T020000
+RDATE:19211002T020000
+RDATE:19221001T020000
+RDATE:19231007T020000
+RDATE:19621001T020000
+RDATE:19630930T020000
+RDATE:19641001T020000
+RDATE:19650930T020000
+RDATE:19661001T020000
+RDATE:19671001T020000
+RDATE:19681001T020000
+RDATE:19691001T020000
+RDATE:19701001T020000
+RDATE:19711001T020000
+RDATE:19721001T020000
+RDATE:19731001T020000
+RDATE:19741001T020000
+RDATE:19751001T020000
+RDATE:19761001T020000
+RDATE:19770901T020000
+RDATE:19780901T020000
+RDATE:19831001T020000
+RDATE:19841001T020000
+RDATE:19861009T020000
+RDATE:19871031T020000
+RDATE:19881031T020000
+RDATE:19891001T020000
+RDATE:19900930T020000
+RDATE:19911001T000000
+RDATE:19921001T000000
+RDATE:19930925T000000
+RDATE:19941001T000000
+RDATE:19951001T000000
+RDATE:19961001T000000
+RDATE:19971001T000000
+RDATE:19981001T000000
+RDATE:19991001T000000
+RDATE:20001001T000000
+RDATE:20011001T000000
+RDATE:20021001T000000
+RDATE:20031001T000000
+RDATE:20041001T000000
+RDATE:20051001T000000
+RDATE:20060922T000000
+END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Asia/Damascus.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Asia/Hovd.ics
===================================================================
--- libkcal/libical/zoneinfo/Asia/Hovd.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Asia/Hovd.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +1,78 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/Asia/Hovd
+TZID:/kde.org/Olson_20070327_1/Asia/Hovd
 X-LIC-LOCATION:Asia/Hovd
 BEGIN:STANDARD
+TZOFFSETFROM:+060636
+TZOFFSETTO:+0600
+TZNAME:HOVT
+DTSTART:19050801T000000
+RDATE:19050801T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0600
+TZOFFSETTO:+0700
+TZNAME:HOVT
+DTSTART:19780101T000000
+RDATE:19780101T000000
+END:STANDARD
+BEGIN:DAYLIGHT
 TZOFFSETFROM:+0700
+TZOFFSETTO:+0800
+TZNAME:HOVST
+DTSTART:19830401T000000
+RDATE:19830401T000000
+RDATE:19840401T000000
+RDATE:19850331T000000
+RDATE:19860330T000000
+RDATE:19870329T000000
+RDATE:19880327T000000
+RDATE:19890326T000000
+RDATE:19900325T000000
+RDATE:19910331T000000
+RDATE:19920329T000000
+RDATE:19930328T000000
+RDATE:19940327T000000
+RDATE:19950326T000000
+RDATE:19960331T000000
+RDATE:19970330T000000
+RDATE:19980329T000000
+RDATE:20010428T020000
+RDATE:20020330T020000
+RDATE:20030329T020000
+RDATE:20040327T020000
+RDATE:20050326T020000
+RDATE:20060325T020000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0800
 TZOFFSETTO:+0700
 TZNAME:HOVT
-DTSTART:19700101T000000
+DTSTART:19831001T000000
+RDATE:19831001T000000
+RDATE:19840930T000000
+RDATE:19850929T000000
+RDATE:19860928T000000
+RDATE:19870927T000000
+RDATE:19880925T000000
+RDATE:19890924T000000
+RDATE:19900930T000000
+RDATE:19910929T000000
+RDATE:19920927T000000
+RDATE:19930926T000000
+RDATE:19940925T000000
+RDATE:19950924T000000
+RDATE:19960929T000000
+RDATE:19970928T000000
+RDATE:19980927T000000
+RDATE:20010929T020000
+RDATE:20020928T020000
+RDATE:20030927T020000
+RDATE:20040925T020000
+RDATE:20050924T020000
+RDATE:20060930T020000
 END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Asia/Hovd.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Asia/Tokyo.ics
===================================================================
--- libkcal/libical/zoneinfo/Asia/Tokyo.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Asia/Tokyo.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +1,49 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/Asia/Tokyo
+TZID:/kde.org/Olson_20070327_1/Asia/Tokyo
 X-LIC-LOCATION:Asia/Tokyo
 BEGIN:STANDARD
+TZOFFSETFROM:+091859
+TZOFFSETTO:+0900
+TZNAME:JST
+DTSTART:18880101T001859
+RDATE:18880101T001859
+END:STANDARD
+BEGIN:STANDARD
 TZOFFSETFROM:+0900
 TZOFFSETTO:+0900
+TZNAME:CJT
+DTSTART:18960101T000000
+RDATE:18960101T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0900
+TZOFFSETTO:+0900
 TZNAME:JST
-DTSTART:19700101T000000
+DTSTART:19380101T000000
+RDATE:19380101T000000
 END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0900
+TZOFFSETTO:+1000
+TZNAME:JDT
+DTSTART:19480502T020000
+RDATE:19480502T020000
+RDATE:19490403T020000
+RDATE:19500507T020000
+RDATE:19510506T020000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+1000
+TZOFFSETTO:+0900
+TZNAME:JST
+DTSTART:19480911T020000
+RDATE:19480911T020000
+RDATE:19490910T020000
+RDATE:19500909T020000
+RDATE:19510908T020000
+END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Asia/Tokyo.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Asia/Vladivostok.ics
===================================================================
--- libkcal/libical/zoneinfo/Asia/Vladivostok.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Asia/Vladivostok.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,22 +1,88 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/Asia/Vladivostok
+TZID:/kde.org/Olson_20070327_1/Asia/Vladivostok
 X-LIC-LOCATION:Asia/Vladivostok
 BEGIN:DAYLIGHT
 TZOFFSETFROM:+1000
 TZOFFSETTO:+1100
 TZNAME:VLAST
-DTSTART:19700329T020000
+DTSTART:19930328T020000
 RRULE:FREQ=YEARLY;BYMONTH=3;BYDAY=-1SU
 END:DAYLIGHT
 BEGIN:STANDARD
 TZOFFSETFROM:+1100
 TZOFFSETTO:+1000
 TZNAME:VLAT
-DTSTART:19701025T030000
+DTSTART:19961027T030000
 RRULE:FREQ=YEARLY;BYMONTH=10;BYDAY=-1SU
 END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+084744
+TZOFFSETTO:+0900
+TZNAME:VLAT
+DTSTART:19221115T000000
+RDATE:19221115T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0900
+TZOFFSETTO:+1000
+TZNAME:VLAT
+DTSTART:19300621T000000
+RDATE:19300621T000000
+RDATE:19920119T020000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+1000
+TZOFFSETTO:+1100
+TZNAME:VLAST
+DTSTART:19810401T000000
+RDATE:19810401T000000
+RDATE:19820401T000000
+RDATE:19830401T000000
+RDATE:19840401T000000
+RDATE:19850331T020000
+RDATE:19860330T020000
+RDATE:19870329T020000
+RDATE:19880327T020000
+RDATE:19890326T020000
+RDATE:19900325T020000
+RDATE:19920328T230000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+1100
+TZOFFSETTO:+1000
+TZNAME:VLAT
+DTSTART:19811001T000000
+RDATE:19811001T000000
+RDATE:19821001T000000
+RDATE:19831001T000000
+RDATE:19840930T030000
+RDATE:19850929T030000
+RDATE:19860928T030000
+RDATE:19870927T030000
+RDATE:19880925T030000
+RDATE:19890924T030000
+RDATE:19900930T030000
+RDATE:19920926T230000
+RDATE:19930926T030000
+RDATE:19940925T030000
+RDATE:19950924T030000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+1000
+TZOFFSETTO:+1000
+TZNAME:VLASST
+DTSTART:19910331T020000
+RDATE:19910331T020000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+1000
+TZOFFSETTO:+0900
+TZNAME:VLAST
+DTSTART:19910929T030000
+RDATE:19910929T030000
+END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Asia/Vladivostok.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Asia/Hong_Kong.ics
===================================================================
--- libkcal/libical/zoneinfo/Asia/Hong_Kong.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Asia/Hong_Kong.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +1,95 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/Asia/Hong_Kong
+TZID:/kde.org/Olson_20070327_1/Asia/Hong_Kong
 X-LIC-LOCATION:Asia/Hong_Kong
 BEGIN:STANDARD
+TZOFFSETFROM:+073636
+TZOFFSETTO:+0800
+TZNAME:HKT
+DTSTART:19041030T000000
+RDATE:19041030T000000
+END:STANDARD
+BEGIN:DAYLIGHT
 TZOFFSETFROM:+0800
+TZOFFSETTO:+0900
+TZNAME:HKST
+DTSTART:19460420T033000
+RDATE:19460420T033000
+RDATE:19470413T033000
+RDATE:19480502T033000
+RDATE:19490403T033000
+RDATE:19500402T033000
+RDATE:19510401T033000
+RDATE:19520406T033000
+RDATE:19530405T033000
+RDATE:19540321T033000
+RDATE:19550320T033000
+RDATE:19560318T033000
+RDATE:19570324T033000
+RDATE:19580323T033000
+RDATE:19590322T033000
+RDATE:19600320T033000
+RDATE:19610319T033000
+RDATE:19620318T033000
+RDATE:19630324T033000
+RDATE:19640322T033000
+RDATE:19650418T033000
+RDATE:19660417T033000
+RDATE:19670416T033000
+RDATE:19680421T033000
+RDATE:19690420T033000
+RDATE:19700419T033000
+RDATE:19710418T033000
+RDATE:19720416T033000
+RDATE:19730422T033000
+RDATE:19740421T033000
+RDATE:19750420T033000
+RDATE:19760418T033000
+RDATE:19770417T033000
+RDATE:19790513T033000
+RDATE:19800511T033000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0900
 TZOFFSETTO:+0800
 TZNAME:HKT
-DTSTART:19700101T000000
+DTSTART:19461201T033000
+RDATE:19461201T033000
+RDATE:19471230T033000
+RDATE:19481031T033000
+RDATE:19491030T033000
+RDATE:19501029T033000
+RDATE:19511028T033000
+RDATE:19521026T033000
+RDATE:19531101T033000
+RDATE:19541031T033000
+RDATE:19551106T033000
+RDATE:19561104T033000
+RDATE:19571103T033000
+RDATE:19581102T033000
+RDATE:19591101T033000
+RDATE:19601106T033000
+RDATE:19611105T033000
+RDATE:19621104T033000
+RDATE:19631103T033000
+RDATE:19641101T033000
+RDATE:19651017T033000
+RDATE:19661016T033000
+RDATE:19671022T033000
+RDATE:19681020T033000
+RDATE:19691019T033000
+RDATE:19701018T033000
+RDATE:19711017T033000
+RDATE:19721022T033000
+RDATE:19731021T033000
+RDATE:19741020T033000
+RDATE:19751019T033000
+RDATE:19761017T033000
+RDATE:19771016T033000
+RDATE:19791021T033000
+RDATE:19801019T033000
 END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Asia/Hong_Kong.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Asia/Bangkok.ics
===================================================================
--- libkcal/libical/zoneinfo/Asia/Bangkok.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Asia/Bangkok.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +1,22 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/Asia/Bangkok
+TZID:/kde.org/Olson_20070327_1/Asia/Bangkok
 X-LIC-LOCATION:Asia/Bangkok
 BEGIN:STANDARD
-TZOFFSETFROM:+0700
+TZOFFSETFROM:+064204
+TZOFFSETTO:+064204
+TZNAME:BMT
+DTSTART:18800101T000000
+RDATE:18800101T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+064204
 TZOFFSETTO:+0700
 TZNAME:ICT
-DTSTART:19700101T000000
+DTSTART:19200401T000000
+RDATE:19200401T000000
 END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Asia/Bangkok.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Asia/Shanghai.ics
===================================================================
--- libkcal/libical/zoneinfo/Asia/Shanghai.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Asia/Shanghai.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +1,50 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/Asia/Shanghai
+TZID:/kde.org/Olson_20070327_1/Asia/Shanghai
 X-LIC-LOCATION:Asia/Shanghai
 BEGIN:STANDARD
+TZOFFSETFROM:+080552
+TZOFFSETTO:+0800
+TZNAME:CST
+DTSTART:19280101T000000
+RDATE:19280101T000000
+END:STANDARD
+BEGIN:DAYLIGHT
 TZOFFSETFROM:+0800
+TZOFFSETTO:+0900
+TZNAME:CDT
+DTSTART:19400603T000000
+RDATE:19400603T000000
+RDATE:19410316T000000
+RDATE:19860504T000000
+RDATE:19870412T000000
+RDATE:19880410T000000
+RDATE:19890416T000000
+RDATE:19900415T000000
+RDATE:19910414T000000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0900
 TZOFFSETTO:+0800
 TZNAME:CST
-DTSTART:19700101T000000
+DTSTART:19401001T000000
+RDATE:19401001T000000
+RDATE:19411001T000000
+RDATE:19860914T000000
+RDATE:19870913T000000
+RDATE:19880911T000000
+RDATE:19890917T000000
+RDATE:19900916T000000
+RDATE:19910915T000000
 END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0800
+TZOFFSETTO:+0800
+TZNAME:CST
+DTSTART:19490101T000000
+RDATE:19490101T000000
+END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Asia/Shanghai.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Asia/Gaza.ics
===================================================================
--- libkcal/libical/zoneinfo/Asia/Gaza.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Asia/Gaza.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,22 +1,147 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/Asia/Gaza
+TZID:/kde.org/Olson_20070327_1/Asia/Gaza
 X-LIC-LOCATION:Asia/Gaza
 BEGIN:DAYLIGHT
 TZOFFSETFROM:+0200
 TZOFFSETTO:+0300
 TZNAME:EEST
-DTSTART:19700417T000000
-RRULE:FREQ=YEARLY;BYMONTH=4;BYDAY=3FR
+DTSTART:20060401T000000
+RRULE:FREQ=YEARLY
 END:DAYLIGHT
 BEGIN:STANDARD
 TZOFFSETFROM:+0300
 TZOFFSETTO:+0200
 TZNAME:EET
-DTSTART:19701016T000000
+DTSTART:20071019T000000
 RRULE:FREQ=YEARLY;BYMONTH=10;BYDAY=3FR
 END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+021752
+TZOFFSETTO:+0200
+TZNAME:EET
+DTSTART:19001001T000000
+RDATE:19001001T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0200
+TZOFFSETTO:+0300
+TZNAME:EET
+DTSTART:19400601T000000
+RDATE:19400601T000000
+RDATE:19430401T020000
+RDATE:19440401T000000
+RDATE:19450416T000000
+RDATE:19460416T020000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0300
+TZOFFSETTO:+0200
+TZNAME:EET
+DTSTART:19421101T000000
+RDATE:19421101T000000
+RDATE:19431101T000000
+RDATE:19441101T000000
+RDATE:19451101T020000
+RDATE:19461101T000000
+RDATE:19571001T000000
+RDATE:19581001T000000
+RDATE:19590930T030000
+RDATE:19600930T030000
+RDATE:19610930T030000
+RDATE:19620930T030000
+RDATE:19630930T030000
+RDATE:19640930T030000
+RDATE:19650930T030000
+RDATE:19661001T030000
+RDATE:19960920T010000
+RDATE:19970919T010000
+RDATE:19980918T010000
+RDATE:19991015T000000
+RDATE:20001020T000000
+RDATE:20011019T000000
+RDATE:20021018T000000
+RDATE:20031017T000000
+RDATE:20041001T010000
+RDATE:20051004T020000
+RDATE:20060922T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0200
+TZOFFSETTO:+0200
+TZNAME:EET
+DTSTART:19480515T000000
+RDATE:19480515T000000
+RDATE:19960101T000000
+RDATE:19990101T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0200
+TZOFFSETTO:+0300
+TZNAME:EEST
+DTSTART:19570510T000000
+RDATE:19570510T000000
+RDATE:19580501T000000
+RDATE:19590501T010000
+RDATE:19600501T010000
+RDATE:19610501T010000
+RDATE:19620501T010000
+RDATE:19630501T010000
+RDATE:19640501T010000
+RDATE:19650501T010000
+RDATE:19660501T010000
+RDATE:19670501T010000
+RDATE:19960405T000000
+RDATE:19970404T000000
+RDATE:19980403T000000
+RDATE:19990416T000000
+RDATE:20000421T000000
+RDATE:20010420T000000
+RDATE:20020419T000000
+RDATE:20030418T000000
+RDATE:20040416T000000
+RDATE:20050415T000000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0300
+TZOFFSETTO:+0200
+TZNAME:IST
+DTSTART:19670605T000000
+RDATE:19670605T000000
+RDATE:19741013T000000
+RDATE:19750831T000000
+RDATE:19850915T000000
+RDATE:19860907T000000
+RDATE:19870913T000000
+RDATE:19880903T000000
+RDATE:19890903T000000
+RDATE:19900826T000000
+RDATE:19910901T000000
+RDATE:19920906T000000
+RDATE:19930905T000000
+RDATE:19940828T000000
+RDATE:19950903T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0200
+TZOFFSETTO:+0300
+TZNAME:IDT
+DTSTART:19740707T000000
+RDATE:19740707T000000
+RDATE:19750420T000000
+RDATE:19850414T000000
+RDATE:19860518T000000
+RDATE:19870415T000000
+RDATE:19880409T000000
+RDATE:19890430T000000
+RDATE:19900325T000000
+RDATE:19910324T000000
+RDATE:19920329T000000
+RDATE:19930402T000000
+RDATE:19940401T000000
+RDATE:19950331T000000
+END:DAYLIGHT
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Asia/Gaza.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Asia/Brunei.ics
===================================================================
--- libkcal/libical/zoneinfo/Asia/Brunei.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Asia/Brunei.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +1,22 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/Asia/Brunei
+TZID:/kde.org/Olson_20070327_1/Asia/Brunei
 X-LIC-LOCATION:Asia/Brunei
 BEGIN:STANDARD
-TZOFFSETFROM:+0800
+TZOFFSETFROM:+073940
+TZOFFSETTO:+0730
+TZNAME:BNT
+DTSTART:19260301T000000
+RDATE:19260301T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0730
 TZOFFSETTO:+0800
 TZNAME:BNT
-DTSTART:19700101T000000
+DTSTART:19330101T000000
+RDATE:19330101T000000
 END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Asia/Brunei.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Asia/Macau.ics
===================================================================
--- libkcal/libical/zoneinfo/Asia/Macau.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Asia/Macau.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +1,74 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/Asia/Macau
+TZID:/kde.org/Olson_20070327_1/Asia/Macau
 X-LIC-LOCATION:Asia/Macau
 BEGIN:STANDARD
+TZOFFSETFROM:+073420
+TZOFFSETTO:+0800
+TZNAME:MOT
+DTSTART:19120101T000000
+RDATE:19120101T000000
+END:STANDARD
+BEGIN:DAYLIGHT
 TZOFFSETFROM:+0800
+TZOFFSETTO:+0900
+TZNAME:MOST
+DTSTART:19610319T033000
+RDATE:19610319T033000
+RDATE:19620318T033000
+RDATE:19630317T000000
+RDATE:19640322T033000
+RDATE:19650321T000000
+RDATE:19660417T033000
+RDATE:19670416T033000
+RDATE:19680421T033000
+RDATE:19690420T033000
+RDATE:19700419T033000
+RDATE:19710418T033000
+RDATE:19720416T000000
+RDATE:19730415T000000
+RDATE:19740421T000000
+RDATE:19750420T033000
+RDATE:19760418T033000
+RDATE:19770417T033000
+RDATE:19780416T000000
+RDATE:19790415T000000
+RDATE:19800420T000000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0900
 TZOFFSETTO:+0800
+TZNAME:MOT
+DTSTART:19611105T033000
+RDATE:19611105T033000
+RDATE:19621104T033000
+RDATE:19631103T033000
+RDATE:19641101T033000
+RDATE:19651031T000000
+RDATE:19661016T033000
+RDATE:19671022T033000
+RDATE:19681020T033000
+RDATE:19691019T033000
+RDATE:19701018T033000
+RDATE:19711017T033000
+RDATE:19721015T000000
+RDATE:19731021T000000
+RDATE:19741020T033000
+RDATE:19751019T033000
+RDATE:19761017T033000
+RDATE:19771016T033000
+RDATE:19781015T000000
+RDATE:19791021T000000
+RDATE:19801019T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0800
+TZOFFSETTO:+0800
 TZNAME:CST
-DTSTART:19700101T000000
+DTSTART:19991220T000000
+RDATE:19991220T000000
 END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR
Index: libkcal/libical/zoneinfo/Asia/Almaty.ics
===================================================================
--- libkcal/libical/zoneinfo/Asia/Almaty.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Asia/Almaty.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,22 +1,89 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20020614_6/Asia/Almaty
+TZID:/kde.org/Olson_20070327_1/Asia/Almaty
 X-LIC-LOCATION:Asia/Almaty
+BEGIN:STANDARD
+TZOFFSETFROM:+050748
+TZOFFSETTO:+0500
+TZNAME:ALMT
+DTSTART:19240502T000000
+RDATE:19240502T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0500
+TZOFFSETTO:+0600
+TZNAME:ALMT
+DTSTART:19300621T000000
+RDATE:19300621T000000
+END:STANDARD
 BEGIN:DAYLIGHT
 TZOFFSETFROM:+0600
 TZOFFSETTO:+0700
 TZNAME:ALMST
-DTSTART:19700329T020000
-RRULE:FREQ=YEARLY;BYMONTH=3;BYDAY=-1SU
+DTSTART:19810401T000000
+RDATE:19810401T000000
+RDATE:19820401T000000
+RDATE:19830401T000000
+RDATE:19840401T000000
+RDATE:19850331T020000
+RDATE:19860330T020000
+RDATE:19870329T020000
+RDATE:19880327T020000
+RDATE:19890326T020000
+RDATE:19900325T020000
+RDATE:19920328T230000
+RDATE:19930328T020000
+RDATE:19940327T020000
+RDATE:19950326T020000
+RDATE:19960331T020000
+RDATE:19970330T020000
+RDATE:19980329T020000
+RDATE:19990328T020000
+RDATE:20000326T020000
+RDATE:20010325T020000
+RDATE:20020331T020000
+RDATE:20030330T020000
+RDATE:20040328T020000
 END:DAYLIGHT
 BEGIN:STANDARD
 TZOFFSETFROM:+0700
 TZOFFSETTO:+0600
 TZNAME:ALMT
-DTSTART:19701025T030000
-RRULE:FREQ=YEARLY;BYMONTH=10;BYDAY=-1SU
+DTSTART:19811001T000000
+RDATE:19811001T000000
+RDATE:19821001T000000
+RDATE:19831001T000000
+RDATE:19840930T030000
+RDATE:19850929T030000
+RDATE:19860928T030000
+RDATE:19870927T030000
+RDATE:19880925T030000
+RDATE:19890924T030000
+RDATE:19900930T030000
+RDATE:19920926T230000
+RDATE:19930926T030000
+RDATE:19940925T030000
+RDATE:19950924T030000
+RDATE:19961027T030000
+RDATE:19971026T030000
+RDATE:19981025T030000
+RDATE:19991031T030000
+RDATE:20001029T030000
+RDATE:20011028T030000
+RDATE:20021027T030000
+RDATE:20031026T030000
+RDATE:20041031T030000
 END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0600
+TZOFFSETTO:+0600
+TZNAME:ALMT
+DTSTART:19910101T000000
+RDATE:19910101T000000
+RDATE:19920101T000000
+RDATE:20050315T000000
+END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Asia/Almaty.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Asia/Jerusalem.ics
===================================================================
--- libkcal/libical/zoneinfo/Asia/Jerusalem.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Asia/Jerusalem.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,22 +1,187 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/Asia/Jerusalem
+TZID:/kde.org/Olson_20070327_1/Asia/Jerusalem
 X-LIC-LOCATION:Asia/Jerusalem
+BEGIN:STANDARD
+TZOFFSETFROM:+022056
+TZOFFSETTO:+022040
+TZNAME:JMT
+DTSTART:18800101T000000
+RDATE:18800101T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+022040
+TZOFFSETTO:+0200
+TZNAME:IST
+DTSTART:19180101T000000
+RDATE:19180101T000000
+END:STANDARD
 BEGIN:DAYLIGHT
 TZOFFSETFROM:+0200
 TZOFFSETTO:+0300
 TZNAME:IDT
-DTSTART:19700401T010000
-RRULE:FREQ=YEARLY;BYMONTH=4;BYDAY=1SU
+DTSTART:19400601T000000
+RDATE:19400601T000000
+RDATE:19430401T020000
+RDATE:19440401T000000
+RDATE:19450416T000000
+RDATE:19460416T020000
+RDATE:19490501T000000
+RDATE:19500416T000000
+RDATE:19510401T000000
+RDATE:19520420T020000
+RDATE:19530412T020000
+RDATE:19540613T000000
+RDATE:19550611T020000
+RDATE:19560603T000000
+RDATE:19570429T020000
+RDATE:19740707T000000
+RDATE:19750420T000000
+RDATE:19850414T000000
+RDATE:19860518T000000
+RDATE:19870415T000000
+RDATE:19880409T000000
+RDATE:19890430T000000
+RDATE:19900325T000000
+RDATE:19910324T000000
+RDATE:19920329T000000
+RDATE:19930402T000000
+RDATE:19940401T000000
+RDATE:19950331T000000
+RDATE:19960315T000000
+RDATE:19970321T000000
+RDATE:19980320T000000
+RDATE:19990402T020000
+RDATE:20000414T020000
+RDATE:20010409T010000
+RDATE:20020329T010000
+RDATE:20030328T010000
+RDATE:20040407T010000
+RDATE:20050401T020000
+RDATE:20060331T020000
+RDATE:20070330T020000
+RDATE:20080328T020000
+RDATE:20090327T020000
+RDATE:20100326T020000
+RDATE:20110401T020000
+RDATE:20120330T020000
+RDATE:20130329T020000
+RDATE:20140328T020000
+RDATE:20150327T020000
+RDATE:20160401T020000
+RDATE:20170331T020000
+RDATE:20180330T020000
+RDATE:20190329T020000
+RDATE:20200327T020000
+RDATE:20210326T020000
+RDATE:20220401T020000
+RDATE:20230331T020000
+RDATE:20240329T020000
+RDATE:20250328T020000
+RDATE:20260327T020000
+RDATE:20270326T020000
+RDATE:20280331T020000
+RDATE:20290330T020000
+RDATE:20300329T020000
+RDATE:20310328T020000
+RDATE:20320326T020000
+RDATE:20330401T020000
+RDATE:20340331T020000
+RDATE:20350330T020000
+RDATE:20360328T020000
+RDATE:20370327T020000
 END:DAYLIGHT
 BEGIN:STANDARD
 TZOFFSETFROM:+0300
 TZOFFSETTO:+0200
 TZNAME:IST
-DTSTART:19701001T010000
-RRULE:FREQ=YEARLY;BYMONTH=10;BYDAY=1SU
+DTSTART:19421101T000000
+RDATE:19421101T000000
+RDATE:19431101T000000
+RDATE:19441101T000000
+RDATE:19451101T020000
+RDATE:19461101T000000
+RDATE:19481101T020000
+RDATE:19491101T020000
+RDATE:19500915T030000
+RDATE:19511111T030000
+RDATE:19521019T030000
+RDATE:19530913T030000
+RDATE:19540912T000000
+RDATE:19550911T000000
+RDATE:19560930T030000
+RDATE:19570922T000000
+RDATE:19741013T000000
+RDATE:19750831T000000
+RDATE:19850915T000000
+RDATE:19860907T000000
+RDATE:19870913T000000
+RDATE:19880903T000000
+RDATE:19890903T000000
+RDATE:19900826T000000
+RDATE:19910901T000000
+RDATE:19920906T000000
+RDATE:19930905T000000
+RDATE:19940828T000000
+RDATE:19950903T000000
+RDATE:19960916T000000
+RDATE:19970914T000000
+RDATE:19980906T000000
+RDATE:19990903T020000
+RDATE:20001006T010000
+RDATE:20010924T010000
+RDATE:20021007T010000
+RDATE:20031003T010000
+RDATE:20040922T010000
+RDATE:20051009T020000
+RDATE:20061001T020000
+RDATE:20070916T020000
+RDATE:20081005T020000
+RDATE:20090927T020000
+RDATE:20100912T020000
+RDATE:20111002T020000
+RDATE:20120923T020000
+RDATE:20130908T020000
+RDATE:20140928T020000
+RDATE:20150920T020000
+RDATE:20161009T020000
+RDATE:20170924T020000
+RDATE:20180916T020000
+RDATE:20191006T020000
+RDATE:20200927T020000
+RDATE:20210912T020000
+RDATE:20221002T020000
+RDATE:20230924T020000
+RDATE:20241006T020000
+RDATE:20250928T020000
+RDATE:20260920T020000
+RDATE:20271010T020000
+RDATE:20280924T020000
+RDATE:20290916T020000
+RDATE:20301006T020000
+RDATE:20310921T020000
+RDATE:20320912T020000
+RDATE:20331002T020000
+RDATE:20340917T020000
+RDATE:20351007T020000
+RDATE:20360928T020000
+RDATE:20370913T020000
 END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0200
+TZOFFSETTO:+0400
+TZNAME:IDDT
+DTSTART:19480523T000000
+RDATE:19480523T000000
+END:DAYLIGHT
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0400
+TZOFFSETTO:+0300
+TZNAME:IDT
+DTSTART:19480901T000000
+RDATE:19480901T000000
+END:DAYLIGHT
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Asia/Jerusalem.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Asia/Kuching.ics
===================================================================
--- libkcal/libical/zoneinfo/Asia/Kuching.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Asia/Kuching.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +1,69 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/Asia/Kuching
+TZID:/kde.org/Olson_20070327_1/Asia/Kuching
 X-LIC-LOCATION:Asia/Kuching
 BEGIN:STANDARD
+TZOFFSETFROM:+072120
+TZOFFSETTO:+0730
+TZNAME:BORT
+DTSTART:19260301T000000
+RDATE:19260301T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0730
+TZOFFSETTO:+0800
+TZNAME:BORT
+DTSTART:19330101T000000
+RDATE:19330101T000000
+END:STANDARD
+BEGIN:DAYLIGHT
 TZOFFSETFROM:+0800
+TZOFFSETTO:+0820
+TZNAME:BORTST
+DTSTART:19350914T000000
+RDATE:19350914T000000
+RDATE:19360914T000000
+RDATE:19370914T000000
+RDATE:19380914T000000
+RDATE:19390914T000000
+RDATE:19400914T000000
+RDATE:19410914T000000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0820
 TZOFFSETTO:+0800
+TZNAME:BORT
+DTSTART:19351214T000000
+RDATE:19351214T000000
+RDATE:19361214T000000
+RDATE:19371214T000000
+RDATE:19381214T000000
+RDATE:19391214T000000
+RDATE:19401214T000000
+RDATE:19411214T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0800
+TZOFFSETTO:+0900
+TZNAME:JST
+DTSTART:19420216T000000
+RDATE:19420216T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0900
+TZOFFSETTO:+0800
+TZNAME:BORT
+DTSTART:19450912T000000
+RDATE:19450912T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0800
+TZOFFSETTO:+0800
 TZNAME:MYT
-DTSTART:19700101T000000
+DTSTART:19820101T000000
+RDATE:19820101T000000
 END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Asia/Kuching.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Asia/Amman.ics
===================================================================
--- libkcal/libical/zoneinfo/Asia/Amman.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Asia/Amman.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,22 +1,89 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/Asia/Amman
+TZID:/kde.org/Olson_20070327_1/Asia/Amman
 X-LIC-LOCATION:Asia/Amman
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0200
+TZOFFSETTO:+0300
+TZNAME:EEST
+DTSTART:20000330T000000
+RRULE:FREQ=YEARLY;BYMONTH=3;BYDAY=-1TH
+END:DAYLIGHT
 BEGIN:STANDARD
 TZOFFSETFROM:+0300
 TZOFFSETTO:+0200
 TZNAME:EET
-DTSTART:19700924T010000
-RRULE:FREQ=YEARLY;BYMONTH=9;BYDAY=-1TH
+DTSTART:20061027T010000
+RRULE:FREQ=YEARLY;BYMONTH=10;BYDAY=-1FR
 END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+022344
+TZOFFSETTO:+0200
+TZNAME:EET
+DTSTART:19310101T000000
+RDATE:19310101T000000
+END:STANDARD
 BEGIN:DAYLIGHT
 TZOFFSETFROM:+0200
 TZOFFSETTO:+0300
 TZNAME:EEST
-DTSTART:19700326T000000
-RRULE:FREQ=YEARLY;BYMONTH=3;BYDAY=-1TH
+DTSTART:19730606T000000
+RDATE:19730606T000000
+RDATE:19740501T000000
+RDATE:19750501T000000
+RDATE:19760501T000000
+RDATE:19770501T000000
+RDATE:19780430T000000
+RDATE:19850401T000000
+RDATE:19860404T000000
+RDATE:19870403T000000
+RDATE:19880401T000000
+RDATE:19890508T000000
+RDATE:19900427T000000
+RDATE:19910417T000000
+RDATE:19920410T000000
+RDATE:19930402T000000
+RDATE:19940401T000000
+RDATE:19950407T000000
+RDATE:19960405T000000
+RDATE:19970404T000000
+RDATE:19980403T000000
+RDATE:19990701T000000
 END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0300
+TZOFFSETTO:+0200
+TZNAME:EET
+DTSTART:19731001T000000
+RDATE:19731001T000000
+RDATE:19741001T000000
+RDATE:19751001T000000
+RDATE:19761101T000000
+RDATE:19771001T000000
+RDATE:19780930T000000
+RDATE:19851001T000000
+RDATE:19861003T000000
+RDATE:19871002T000000
+RDATE:19881007T000000
+RDATE:19891006T000000
+RDATE:19901005T000000
+RDATE:19910927T000000
+RDATE:19921002T000000
+RDATE:19931001T000000
+RDATE:19940916T000000
+RDATE:19950915T010000
+RDATE:19960920T010000
+RDATE:19970919T010000
+RDATE:19980918T010000
+RDATE:19990930T010000
+RDATE:20000928T010000
+RDATE:20010927T010000
+RDATE:20020926T010000
+RDATE:20031024T010000
+RDATE:20041015T010000
+RDATE:20050930T010000
+END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Asia/Amman.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Asia/Beirut.ics
===================================================================
--- libkcal/libical/zoneinfo/Asia/Beirut.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Asia/Beirut.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,22 +1,97 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/Asia/Beirut
+TZID:/kde.org/Olson_20070327_1/Asia/Beirut
 X-LIC-LOCATION:Asia/Beirut
 BEGIN:DAYLIGHT
 TZOFFSETFROM:+0200
 TZOFFSETTO:+0300
 TZNAME:EEST
-DTSTART:19700329T000000
+DTSTART:19930328T000000
 RRULE:FREQ=YEARLY;BYMONTH=3;BYDAY=-1SU
 END:DAYLIGHT
 BEGIN:STANDARD
 TZOFFSETFROM:+0300
 TZOFFSETTO:+0200
 TZNAME:EET
-DTSTART:19701025T000000
+DTSTART:19991031T000000
 RRULE:FREQ=YEARLY;BYMONTH=10;BYDAY=-1SU
 END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0222
+TZOFFSETTO:+0200
+TZNAME:EET
+DTSTART:18800101T000000
+RDATE:18800101T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0200
+TZOFFSETTO:+0300
+TZNAME:EEST
+DTSTART:19200328T000000
+RDATE:19200328T000000
+RDATE:19210403T000000
+RDATE:19220326T000000
+RDATE:19230422T000000
+RDATE:19570501T000000
+RDATE:19580501T000000
+RDATE:19590501T000000
+RDATE:19600501T000000
+RDATE:19610501T000000
+RDATE:19720622T000000
+RDATE:19730501T000000
+RDATE:19740501T000000
+RDATE:19750501T000000
+RDATE:19760501T000000
+RDATE:19770501T000000
+RDATE:19780430T000000
+RDATE:19840501T000000
+RDATE:19850501T000000
+RDATE:19860501T000000
+RDATE:19870501T000000
+RDATE:19880601T000000
+RDATE:19890510T000000
+RDATE:19900501T000000
+RDATE:19910501T000000
+RDATE:19920501T000000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0300
+TZOFFSETTO:+0200
+TZNAME:EET
+DTSTART:19201025T000000
+RDATE:19201025T000000
+RDATE:19211003T000000
+RDATE:19221008T000000
+RDATE:19230916T000000
+RDATE:19571001T000000
+RDATE:19581001T000000
+RDATE:19591001T000000
+RDATE:19601001T000000
+RDATE:19611001T000000
+RDATE:19721001T000000
+RDATE:19731001T000000
+RDATE:19741001T000000
+RDATE:19751001T000000
+RDATE:19761001T000000
+RDATE:19771001T000000
+RDATE:19780930T000000
+RDATE:19841016T000000
+RDATE:19851016T000000
+RDATE:19861016T000000
+RDATE:19871016T000000
+RDATE:19881016T000000
+RDATE:19891016T000000
+RDATE:19901016T000000
+RDATE:19911016T000000
+RDATE:19921004T000000
+RDATE:19930926T000000
+RDATE:19940925T000000
+RDATE:19950924T000000
+RDATE:19960929T000000
+RDATE:19970928T000000
+RDATE:19980927T000000
+END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Asia/Beirut.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Asia/Irkutsk.ics
===================================================================
--- libkcal/libical/zoneinfo/Asia/Irkutsk.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Asia/Irkutsk.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,22 +1,95 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/Asia/Irkutsk
+TZID:/kde.org/Olson_20070327_1/Asia/Irkutsk
 X-LIC-LOCATION:Asia/Irkutsk
 BEGIN:DAYLIGHT
 TZOFFSETFROM:+0800
 TZOFFSETTO:+0900
 TZNAME:IRKST
-DTSTART:19700329T020000
+DTSTART:19930328T020000
 RRULE:FREQ=YEARLY;BYMONTH=3;BYDAY=-1SU
 END:DAYLIGHT
 BEGIN:STANDARD
 TZOFFSETFROM:+0900
 TZOFFSETTO:+0800
 TZNAME:IRKT
-DTSTART:19701025T030000
+DTSTART:19961027T030000
 RRULE:FREQ=YEARLY;BYMONTH=10;BYDAY=-1SU
 END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+065720
+TZOFFSETTO:+065720
+TZNAME:IMT
+DTSTART:18800101T000000
+RDATE:18800101T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+065720
+TZOFFSETTO:+0700
+TZNAME:IRKT
+DTSTART:19200125T000000
+RDATE:19200125T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0700
+TZOFFSETTO:+0800
+TZNAME:IRKT
+DTSTART:19300621T000000
+RDATE:19300621T000000
+RDATE:19920119T020000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0800
+TZOFFSETTO:+0900
+TZNAME:IRKST
+DTSTART:19810401T000000
+RDATE:19810401T000000
+RDATE:19820401T000000
+RDATE:19830401T000000
+RDATE:19840401T000000
+RDATE:19850331T020000
+RDATE:19860330T020000
+RDATE:19870329T020000
+RDATE:19880327T020000
+RDATE:19890326T020000
+RDATE:19900325T020000
+RDATE:19920328T230000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0900
+TZOFFSETTO:+0800
+TZNAME:IRKT
+DTSTART:19811001T000000
+RDATE:19811001T000000
+RDATE:19821001T000000
+RDATE:19831001T000000
+RDATE:19840930T030000
+RDATE:19850929T030000
+RDATE:19860928T030000
+RDATE:19870927T030000
+RDATE:19880925T030000
+RDATE:19890924T030000
+RDATE:19900930T030000
+RDATE:19920926T230000
+RDATE:19930926T030000
+RDATE:19940925T030000
+RDATE:19950924T030000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0800
+TZOFFSETTO:+0800
+TZNAME:IRKST
+DTSTART:19910331T020000
+RDATE:19910331T020000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0800
+TZOFFSETTO:+0700
+TZNAME:IRKT
+DTSTART:19910929T030000
+RDATE:19910929T030000
+END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Asia/Irkutsk.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Asia/Tbilisi.ics
===================================================================
--- libkcal/libical/zoneinfo/Asia/Tbilisi.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Asia/Tbilisi.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,22 +1,159 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/Asia/Tbilisi
+TZID:/kde.org/Olson_20070327_1/Asia/Tbilisi
 X-LIC-LOCATION:Asia/Tbilisi
 BEGIN:STANDARD
+TZOFFSETFROM:+025916
+TZOFFSETTO:+025916
+TZNAME:TBMT
+DTSTART:18800101T000000
+RDATE:18800101T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+025916
+TZOFFSETTO:+0300
+TZNAME:TBIT
+DTSTART:19240502T000000
+RDATE:19240502T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0300
+TZOFFSETTO:+0400
+TZNAME:TBIT
+DTSTART:19570301T000000
+RDATE:19570301T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0400
+TZOFFSETTO:+0500
+TZNAME:TBIST
+DTSTART:19810401T000000
+RDATE:19810401T000000
+RDATE:19820401T000000
+RDATE:19830401T000000
+RDATE:19840401T000000
+RDATE:19850331T020000
+RDATE:19860330T020000
+RDATE:19870329T020000
+RDATE:19880327T020000
+RDATE:19890326T020000
+RDATE:19900325T020000
+END:DAYLIGHT
+BEGIN:STANDARD
 TZOFFSETFROM:+0500
 TZOFFSETTO:+0400
+TZNAME:TBIT
+DTSTART:19811001T000000
+RDATE:19811001T000000
+RDATE:19821001T000000
+RDATE:19831001T000000
+RDATE:19840930T030000
+RDATE:19850929T030000
+RDATE:19860928T030000
+RDATE:19870927T030000
+RDATE:19880925T030000
+RDATE:19890924T030000
+RDATE:19900930T030000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0400
+TZOFFSETTO:+0400
+TZNAME:TBIST
+DTSTART:19910331T020000
+RDATE:19910331T020000
+END:DAYLIGHT
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0400
+TZOFFSETTO:+0400
+TZNAME:GEST
+DTSTART:19910409T000000
+RDATE:19910409T000000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0400
+TZOFFSETTO:+0300
 TZNAME:GET
-DTSTART:19701025T000000
-RRULE:FREQ=YEARLY;BYMONTH=10;BYDAY=-1SU
+DTSTART:19910929T030000
+RDATE:19910929T030000
+RDATE:19920927T000000
+RDATE:19930926T000000
+RDATE:20041031T030000
 END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0300
+TZOFFSETTO:+0300
+TZNAME:GET
+DTSTART:19920101T000000
+RDATE:19920101T000000
+END:STANDARD
 BEGIN:DAYLIGHT
+TZOFFSETFROM:+0300
+TZOFFSETTO:+0400
+TZNAME:GEST
+DTSTART:19920329T000000
+RDATE:19920329T000000
+RDATE:19930328T000000
+RDATE:19940327T000000
+END:DAYLIGHT
+BEGIN:STANDARD
 TZOFFSETFROM:+0400
+TZOFFSETTO:+0400
+TZNAME:GET
+DTSTART:19940925T000000
+RDATE:19940925T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0400
 TZOFFSETTO:+0500
 TZNAME:GEST
-DTSTART:19700329T000000
-RRULE:FREQ=YEARLY;BYMONTH=3;BYDAY=-1SU
+DTSTART:19950326T000000
+RDATE:19950326T000000
+RDATE:19960331T000000
+RDATE:19980329T000000
+RDATE:19990328T000000
+RDATE:20000326T000000
+RDATE:20010325T000000
+RDATE:20020331T000000
+RDATE:20030330T000000
+RDATE:20040328T000000
 END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0500
+TZOFFSETTO:+0400
+TZNAME:GET
+DTSTART:19950924T000000
+RDATE:19950924T000000
+RDATE:19971026T000000
+RDATE:19981025T000000
+RDATE:19991031T000000
+RDATE:20001029T000000
+RDATE:20011028T000000
+RDATE:20021027T000000
+RDATE:20031026T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0500
+TZOFFSETTO:+0500
+TZNAME:GEST
+DTSTART:19961027T000000
+RDATE:19961027T000000
+RDATE:19970330T000000
+END:DAYLIGHT
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0500
+TZOFFSETTO:+0400
+TZNAME:GEST
+DTSTART:20040627T000000
+RDATE:20040627T000000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+0300
+TZOFFSETTO:+0400
+TZNAME:GET
+DTSTART:20050327T020000
+RDATE:20050327T020000
+END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Asia/Tbilisi.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Pacific/Yap.ics
===================================================================
--- libkcal/libical/zoneinfo/Pacific/Yap.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Pacific/Yap.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +0,0 @@
-BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
-VERSION:2.0
-BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/Pacific/Yap
-X-LIC-LOCATION:Pacific/Yap
-BEGIN:STANDARD
-TZOFFSETFROM:+1000
-TZOFFSETTO:+1000
-TZNAME:YAPT
-DTSTART:19700101T000000
-END:STANDARD
-END:VTIMEZONE
-END:VCALENDAR
Index: libkcal/libical/zoneinfo/Pacific/Palau.ics
===================================================================
--- libkcal/libical/zoneinfo/Pacific/Palau.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Pacific/Palau.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +1,15 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_4/Pacific/Palau
+TZID:/kde.org/Olson_20070327_1/Pacific/Palau
 X-LIC-LOCATION:Pacific/Palau
 BEGIN:STANDARD
-TZOFFSETFROM:+0900
+TZOFFSETFROM:+085756
 TZOFFSETTO:+0900
 TZNAME:PWT
-DTSTART:19700101T000000
+DTSTART:19010101T000000
+RDATE:19010101T000000
 END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Pacific/Palau.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Pacific/Tongatapu.ics
===================================================================
--- libkcal/libical/zoneinfo/Pacific/Tongatapu.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Pacific/Tongatapu.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,22 +1,47 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20020614_6/Pacific/Tongatapu
+TZID:/kde.org/Olson_20070327_1/Pacific/Tongatapu
 X-LIC-LOCATION:Pacific/Tongatapu
+BEGIN:STANDARD
+TZOFFSETFROM:+121920
+TZOFFSETTO:+1220
+TZNAME:TOT
+DTSTART:19010101T000000
+RDATE:19010101T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+1220
+TZOFFSETTO:+1300
+TZNAME:TOT
+DTSTART:19410101T000000
+RDATE:19410101T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+1300
+TZOFFSETTO:+1300
+TZNAME:TOT
+DTSTART:19990101T000000
+RDATE:19990101T000000
+END:STANDARD
 BEGIN:DAYLIGHT
 TZOFFSETFROM:+1300
 TZOFFSETTO:+1400
 TZNAME:TOST
-DTSTART:19701101T020000
-RRULE:FREQ=YEARLY;BYMONTH=11;BYDAY=1SU
+DTSTART:19991007T020000
+RDATE:19991007T020000
+RDATE:20001105T020000
+RDATE:20011104T020000
 END:DAYLIGHT
 BEGIN:STANDARD
 TZOFFSETFROM:+1400
 TZOFFSETTO:+1300
 TZNAME:TOT
-DTSTART:19700125T020000
-RRULE:FREQ=YEARLY;BYMONTH=1;BYDAY=-1SU
+DTSTART:20000319T030000
+RDATE:20000319T030000
+RDATE:20010128T020000
+RDATE:20020127T020000
 END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Pacific/Tongatapu.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Pacific/Fakaofo.ics
===================================================================
--- libkcal/libical/zoneinfo/Pacific/Fakaofo.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Pacific/Fakaofo.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +1,15 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_4/Pacific/Fakaofo
+TZID:/kde.org/Olson_20070327_1/Pacific/Fakaofo
 X-LIC-LOCATION:Pacific/Fakaofo
 BEGIN:STANDARD
-TZOFFSETFROM:-1000
+TZOFFSETFROM:-112456
 TZOFFSETTO:-1000
 TZNAME:TKT
-DTSTART:19700101T000000
+DTSTART:19010101T000000
+RDATE:19010101T000000
 END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Pacific/Fakaofo.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Pacific/Gambier.ics
===================================================================
--- libkcal/libical/zoneinfo/Pacific/Gambier.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Pacific/Gambier.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +1,15 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_4/Pacific/Gambier
+TZID:/kde.org/Olson_20070327_1/Pacific/Gambier
 X-LIC-LOCATION:Pacific/Gambier
 BEGIN:STANDARD
-TZOFFSETFROM:-0900
+TZOFFSETFROM:-085948
 TZOFFSETTO:-0900
 TZNAME:GAMT
-DTSTART:19700101T000000
+DTSTART:19121001T000000
+RDATE:19121001T000000
 END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Pacific/Gambier.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Pacific/Norfolk.ics
===================================================================
--- libkcal/libical/zoneinfo/Pacific/Norfolk.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Pacific/Norfolk.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +1,22 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/Pacific/Norfolk
+TZID:/kde.org/Olson_20070327_1/Pacific/Norfolk
 X-LIC-LOCATION:Pacific/Norfolk
 BEGIN:STANDARD
-TZOFFSETFROM:+1130
+TZOFFSETFROM:+111152
+TZOFFSETTO:+1112
+TZNAME:NMT
+DTSTART:19010101T000000
+RDATE:19010101T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+1112
 TZOFFSETTO:+1130
 TZNAME:NFT
-DTSTART:19700101T000000
+DTSTART:19510101T000000
+RDATE:19510101T000000
 END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Pacific/Norfolk.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Pacific/Apia.ics
===================================================================
--- libkcal/libical/zoneinfo/Pacific/Apia.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Pacific/Apia.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +1,29 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/Pacific/Apia
+TZID:/kde.org/Olson_20070327_1/Pacific/Apia
 X-LIC-LOCATION:Pacific/Apia
 BEGIN:STANDARD
-TZOFFSETFROM:-1100
+TZOFFSETFROM:+123304
+TZOFFSETTO:-112656
+TZNAME:LMT
+DTSTART:18790705T000000
+RDATE:18790705T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-112656
+TZOFFSETTO:-1130
+TZNAME:SAMT
+DTSTART:19110101T000000
+RDATE:19110101T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-1130
 TZOFFSETTO:-1100
 TZNAME:WST
-DTSTART:19700101T000000
+DTSTART:19500101T000000
+RDATE:19500101T000000
 END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Pacific/Apia.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Pacific/Saipan.ics
===================================================================
--- libkcal/libical/zoneinfo/Pacific/Saipan.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Pacific/Saipan.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +1,36 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/Pacific/Saipan
+TZID:/kde.org/Olson_20070327_1/Pacific/Saipan
 X-LIC-LOCATION:Pacific/Saipan
 BEGIN:STANDARD
+TZOFFSETFROM:-1417
+TZOFFSETTO:+0943
+TZNAME:LMT
+DTSTART:18441231T000000
+RDATE:18441231T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0943
+TZOFFSETTO:+0900
+TZNAME:MPT
+DTSTART:19010101T000000
+RDATE:19010101T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0900
+TZOFFSETTO:+1000
+TZNAME:MPT
+DTSTART:19691001T000000
+RDATE:19691001T000000
+END:STANDARD
+BEGIN:STANDARD
 TZOFFSETFROM:+1000
 TZOFFSETTO:+1000
 TZNAME:ChST
-DTSTART:19700101T000000
+DTSTART:20001223T000000
+RDATE:20001223T000000
 END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Pacific/Saipan.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Pacific/Tarawa.ics
===================================================================
--- libkcal/libical/zoneinfo/Pacific/Tarawa.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Pacific/Tarawa.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +1,15 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_4/Pacific/Tarawa
+TZID:/kde.org/Olson_20070327_1/Pacific/Tarawa
 X-LIC-LOCATION:Pacific/Tarawa
 BEGIN:STANDARD
-TZOFFSETFROM:+1200
+TZOFFSETFROM:+113204
 TZOFFSETTO:+1200
 TZNAME:GILT
-DTSTART:19700101T000000
+DTSTART:19010101T000000
+RDATE:19010101T000000
 END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Pacific/Tarawa.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Pacific/Fiji.ics
===================================================================
--- libkcal/libical/zoneinfo/Pacific/Fiji.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Pacific/Fiji.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +1,31 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/Pacific/Fiji
+TZID:/kde.org/Olson_20070327_1/Pacific/Fiji
 X-LIC-LOCATION:Pacific/Fiji
 BEGIN:STANDARD
+TZOFFSETFROM:+115340
+TZOFFSETTO:+1200
+TZNAME:FJT
+DTSTART:19151026T000000
+RDATE:19151026T000000
+END:STANDARD
+BEGIN:DAYLIGHT
 TZOFFSETFROM:+1200
+TZOFFSETTO:+1300
+TZNAME:FJST
+DTSTART:19981101T020000
+RDATE:19981101T020000
+RDATE:19991107T020000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+1300
 TZOFFSETTO:+1200
 TZNAME:FJT
-DTSTART:19700101T000000
+DTSTART:19990228T030000
+RDATE:19990228T030000
+RDATE:20000227T030000
 END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Pacific/Fiji.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Pacific/Funafuti.ics
===================================================================
--- libkcal/libical/zoneinfo/Pacific/Funafuti.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Pacific/Funafuti.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +1,15 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_4/Pacific/Funafuti
+TZID:/kde.org/Olson_20070327_1/Pacific/Funafuti
 X-LIC-LOCATION:Pacific/Funafuti
 BEGIN:STANDARD
-TZOFFSETFROM:+1200
+TZOFFSETFROM:+115652
 TZOFFSETTO:+1200
 TZNAME:TVT
-DTSTART:19700101T000000
+DTSTART:19010101T000000
+RDATE:19010101T000000
 END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Pacific/Funafuti.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Pacific/Easter.ics
===================================================================
--- libkcal/libical/zoneinfo/Pacific/Easter.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Pacific/Easter.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,22 +1,145 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/Pacific/Easter
+TZID:/kde.org/Olson_20070327_1/Pacific/Easter
 X-LIC-LOCATION:Pacific/Easter
 BEGIN:DAYLIGHT
 TZOFFSETFROM:-0600
 TZOFFSETTO:-0500
 TZNAME:EASST
-DTSTART:19701010T220000
+DTSTART:19991009T220000
 RRULE:FREQ=YEARLY;BYMONTH=10;BYDAY=2SA
 END:DAYLIGHT
 BEGIN:STANDARD
 TZOFFSETFROM:-0500
 TZOFFSETTO:-0600
 TZNAME:EAST
-DTSTART:19700314T220000
+DTSTART:20000311T220000
 RRULE:FREQ=YEARLY;BYMONTH=3;BYDAY=2SA
 END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-071744
+TZOFFSETTO:-071728
+TZNAME:EMT
+DTSTART:18900101T000000
+RDATE:18900101T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-071728
+TZOFFSETTO:-0600
+TZNAME:EASST
+DTSTART:19320901T000000
+RDATE:19320901T000000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:-0600
+TZOFFSETTO:-0700
+TZNAME:EAST
+DTSTART:19420531T220000
+RDATE:19420531T220000
+RDATE:19460831T210000
+RDATE:19690329T210000
+RDATE:19700328T210000
+RDATE:19710313T210000
+RDATE:19720311T210000
+RDATE:19730310T210000
+RDATE:19740309T210000
+RDATE:19750308T210000
+RDATE:19760313T210000
+RDATE:19770312T210000
+RDATE:19780311T210000
+RDATE:19790310T210000
+RDATE:19800308T210000
+RDATE:19810314T210000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0700
+TZOFFSETTO:-0600
+TZNAME:EASST
+DTSTART:19420731T220000
+RDATE:19420731T220000
+RDATE:19681102T210000
+RDATE:19691122T210000
+RDATE:19701010T210000
+RDATE:19711009T210000
+RDATE:19721014T210000
+RDATE:19730929T210000
+RDATE:19741012T210000
+RDATE:19751011T210000
+RDATE:19761009T210000
+RDATE:19771008T210000
+RDATE:19781014T210000
+RDATE:19791013T210000
+RDATE:19801011T210000
+RDATE:19811010T210000
+END:DAYLIGHT
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0600
+TZOFFSETTO:-0600
+TZNAME:EASST
+DTSTART:19460714T220000
+RDATE:19460714T220000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:-0700
+TZOFFSETTO:-0700
+TZNAME:EAST
+DTSTART:19470331T210000
+RDATE:19470331T210000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-0600
+TZOFFSETTO:-0600
+TZNAME:EAST
+DTSTART:19820313T210000
+RDATE:19820313T210000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0600
+TZOFFSETTO:-0500
+TZNAME:EASST
+DTSTART:19821009T220000
+RDATE:19821009T220000
+RDATE:19831008T220000
+RDATE:19841013T220000
+RDATE:19851012T220000
+RDATE:19861011T220000
+RDATE:19871010T220000
+RDATE:19881001T220000
+RDATE:19891014T220000
+RDATE:19900915T220000
+RDATE:19911012T220000
+RDATE:19921010T220000
+RDATE:19931009T220000
+RDATE:19941008T220000
+RDATE:19951014T220000
+RDATE:19961012T220000
+RDATE:19971011T220000
+RDATE:19980926T220000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:-0500
+TZOFFSETTO:-0600
+TZNAME:EAST
+DTSTART:19830312T220000
+RDATE:19830312T220000
+RDATE:19840310T220000
+RDATE:19850309T220000
+RDATE:19860308T220000
+RDATE:19870411T220000
+RDATE:19880312T220000
+RDATE:19890311T220000
+RDATE:19900317T220000
+RDATE:19910309T220000
+RDATE:19920314T220000
+RDATE:19930313T220000
+RDATE:19940312T220000
+RDATE:19950311T220000
+RDATE:19960309T220000
+RDATE:19970329T220000
+RDATE:19980314T220000
+RDATE:19990403T220000
+END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Pacific/Easter.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Pacific/Port_Moresby.ics
===================================================================
--- libkcal/libical/zoneinfo/Pacific/Port_Moresby.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Pacific/Port_Moresby.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +1,22 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/Pacific/Port_Moresby
+TZID:/kde.org/Olson_20070327_1/Pacific/Port_Moresby
 X-LIC-LOCATION:Pacific/Port_Moresby
 BEGIN:STANDARD
-TZOFFSETFROM:+1000
+TZOFFSETFROM:+094840
+TZOFFSETTO:+094832
+TZNAME:PMMT
+DTSTART:18800101T000000
+RDATE:18800101T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+094832
 TZOFFSETTO:+1000
 TZNAME:PGT
-DTSTART:19700101T000000
+DTSTART:18950101T000000
+RDATE:18950101T000000
 END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Pacific/Port_Moresby.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Pacific/Kosrae.ics
===================================================================
--- libkcal/libical/zoneinfo/Pacific/Kosrae.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Pacific/Kosrae.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +1,29 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/Pacific/Kosrae
+TZID:/kde.org/Olson_20070327_1/Pacific/Kosrae
 X-LIC-LOCATION:Pacific/Kosrae
 BEGIN:STANDARD
+TZOFFSETFROM:+105156
+TZOFFSETTO:+1100
+TZNAME:KOST
+DTSTART:19010101T000000
+RDATE:19010101T000000
+END:STANDARD
+BEGIN:STANDARD
 TZOFFSETFROM:+1100
+TZOFFSETTO:+1200
+TZNAME:KOST
+DTSTART:19691001T000000
+RDATE:19691001T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+1200
 TZOFFSETTO:+1100
 TZNAME:KOST
-DTSTART:19700101T000000
+DTSTART:19990101T000000
+RDATE:19990101T000000
 END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Pacific/Kosrae.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Pacific/Truk.ics
===================================================================
--- libkcal/libical/zoneinfo/Pacific/Truk.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Pacific/Truk.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +1,15 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_4/Pacific/Truk
+TZID:/kde.org/Olson_20070327_1/Pacific/Truk
 X-LIC-LOCATION:Pacific/Truk
 BEGIN:STANDARD
-TZOFFSETFROM:+1000
+TZOFFSETFROM:+100708
 TZOFFSETTO:+1000
 TZNAME:TRUT
-DTSTART:19700101T000000
+DTSTART:19010101T000000
+RDATE:19010101T000000
 END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Pacific/Truk.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Pacific/Wake.ics
===================================================================
--- libkcal/libical/zoneinfo/Pacific/Wake.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Pacific/Wake.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +1,15 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_4/Pacific/Wake
+TZID:/kde.org/Olson_20070327_1/Pacific/Wake
 X-LIC-LOCATION:Pacific/Wake
 BEGIN:STANDARD
-TZOFFSETFROM:+1200
+TZOFFSETFROM:+110628
 TZOFFSETTO:+1200
 TZNAME:WAKT
-DTSTART:19700101T000000
+DTSTART:19010101T000000
+RDATE:19010101T000000
 END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Pacific/Wake.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Pacific/Guam.ics
===================================================================
--- libkcal/libical/zoneinfo/Pacific/Guam.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Pacific/Guam.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +1,29 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/Pacific/Guam
+TZID:/kde.org/Olson_20070327_1/Pacific/Guam
 X-LIC-LOCATION:Pacific/Guam
 BEGIN:STANDARD
+TZOFFSETFROM:-1421
+TZOFFSETTO:+0939
+TZNAME:LMT
+DTSTART:18441231T000000
+RDATE:18441231T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0939
+TZOFFSETTO:+1000
+TZNAME:GST
+DTSTART:19010101T000000
+RDATE:19010101T000000
+END:STANDARD
+BEGIN:STANDARD
 TZOFFSETFROM:+1000
 TZOFFSETTO:+1000
 TZNAME:ChST
-DTSTART:19700101T000000
+DTSTART:20001223T000000
+RDATE:20001223T000000
 END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Pacific/Guam.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Pacific/Pago_Pago.ics
===================================================================
--- libkcal/libical/zoneinfo/Pacific/Pago_Pago.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Pacific/Pago_Pago.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +1,43 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/Pacific/Pago_Pago
+TZID:/kde.org/Olson_20070327_1/Pacific/Pago_Pago
 X-LIC-LOCATION:Pacific/Pago_Pago
 BEGIN:STANDARD
+TZOFFSETFROM:+123712
+TZOFFSETTO:-112248
+TZNAME:LMT
+DTSTART:18790705T000000
+RDATE:18790705T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-112248
+TZOFFSETTO:-1130
+TZNAME:SAMT
+DTSTART:19110101T000000
+RDATE:19110101T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-1130
+TZOFFSETTO:-1100
+TZNAME:NST
+DTSTART:19500101T000000
+RDATE:19500101T000000
+END:STANDARD
+BEGIN:STANDARD
 TZOFFSETFROM:-1100
 TZOFFSETTO:-1100
+TZNAME:BST
+DTSTART:19670401T000000
+RDATE:19670401T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-1100
+TZOFFSETTO:-1100
 TZNAME:SST
-DTSTART:19700101T000000
+DTSTART:19831130T000000
+RDATE:19831130T000000
 END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Pacific/Pago_Pago.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Pacific/Majuro.ics
===================================================================
--- libkcal/libical/zoneinfo/Pacific/Majuro.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Pacific/Majuro.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +1,22 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/Pacific/Majuro
+TZID:/kde.org/Olson_20070327_1/Pacific/Majuro
 X-LIC-LOCATION:Pacific/Majuro
 BEGIN:STANDARD
-TZOFFSETFROM:+1200
+TZOFFSETFROM:+112448
+TZOFFSETTO:+1100
+TZNAME:MHT
+DTSTART:19010101T000000
+RDATE:19010101T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+1100
 TZOFFSETTO:+1200
 TZNAME:MHT
-DTSTART:19700101T000000
+DTSTART:19691001T000000
+RDATE:19691001T000000
 END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Pacific/Majuro.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Pacific/Galapagos.ics
===================================================================
--- libkcal/libical/zoneinfo/Pacific/Galapagos.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Pacific/Galapagos.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +1,22 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/Pacific/Galapagos
+TZID:/kde.org/Olson_20070327_1/Pacific/Galapagos
 X-LIC-LOCATION:Pacific/Galapagos
 BEGIN:STANDARD
-TZOFFSETFROM:-0600
+TZOFFSETFROM:-055824
+TZOFFSETTO:-0500
+TZNAME:ECT
+DTSTART:19310101T000000
+RDATE:19310101T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-0500
 TZOFFSETTO:-0600
 TZNAME:GALT
-DTSTART:19700101T000000
+DTSTART:19860101T000000
+RDATE:19860101T000000
 END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Pacific/Galapagos.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Pacific/Enderbury.ics
===================================================================
--- libkcal/libical/zoneinfo/Pacific/Enderbury.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Pacific/Enderbury.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +1,29 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/Pacific/Enderbury
+TZID:/kde.org/Olson_20070327_1/Pacific/Enderbury
 X-LIC-LOCATION:Pacific/Enderbury
 BEGIN:STANDARD
-TZOFFSETFROM:+1300
+TZOFFSETFROM:-112420
+TZOFFSETTO:-1200
+TZNAME:PHOT
+DTSTART:19010101T000000
+RDATE:19010101T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-1200
+TZOFFSETTO:-1100
+TZNAME:PHOT
+DTSTART:19791001T000000
+RDATE:19791001T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-1100
 TZOFFSETTO:+1300
 TZNAME:PHOT
-DTSTART:19700101T000000
+DTSTART:19950101T000000
+RDATE:19950101T000000
 END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Pacific/Enderbury.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Pacific/Johnston.ics
===================================================================
--- libkcal/libical/zoneinfo/Pacific/Johnston.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Pacific/Johnston.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +1,15 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_4/Pacific/Johnston
+TZID:/kde.org/Olson_20070327_1/Pacific/Johnston
 X-LIC-LOCATION:Pacific/Johnston
 BEGIN:STANDARD
 TZOFFSETFROM:-1000
 TZOFFSETTO:-1000
 TZNAME:HST
-DTSTART:19700101T000000
+DTSTART:16010101T000000
+RDATE:16010101T000000
 END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Pacific/Johnston.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Pacific/Kwajalein.ics
===================================================================
--- libkcal/libical/zoneinfo/Pacific/Kwajalein.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Pacific/Kwajalein.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +1,29 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/Pacific/Kwajalein
+TZID:/kde.org/Olson_20070327_1/Pacific/Kwajalein
 X-LIC-LOCATION:Pacific/Kwajalein
 BEGIN:STANDARD
-TZOFFSETFROM:+1200
+TZOFFSETFROM:+110920
+TZOFFSETTO:+1100
+TZNAME:MHT
+DTSTART:19010101T000000
+RDATE:19010101T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+1100
+TZOFFSETTO:-1200
+TZNAME:KWAT
+DTSTART:19691001T000000
+RDATE:19691001T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-1200
 TZOFFSETTO:+1200
 TZNAME:MHT
-DTSTART:19700101T000000
+DTSTART:19930820T000000
+RDATE:19930820T000000
 END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Pacific/Kwajalein.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Pacific/Chatham.ics
===================================================================
--- libkcal/libical/zoneinfo/Pacific/Chatham.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Pacific/Chatham.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,22 +1,72 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_4/Pacific/Chatham
+TZID:/kde.org/Olson_20070327_1/Pacific/Chatham
 X-LIC-LOCATION:Pacific/Chatham
+BEGIN:STANDARD
+TZOFFSETFROM:+1345
+TZOFFSETTO:+1245
+TZNAME:CHAST
+DTSTART:19900318T034500
+RRULE:FREQ=YEARLY;BYMONTH=3;BYDAY=3SU
+END:STANDARD
 BEGIN:DAYLIGHT
 TZOFFSETFROM:+1245
 TZOFFSETTO:+1345
 TZNAME:CHADT
-DTSTART:19701004T024500
+DTSTART:19901007T024500
 RRULE:FREQ=YEARLY;BYMONTH=10;BYDAY=1SU
 END:DAYLIGHT
 BEGIN:STANDARD
+TZOFFSETFROM:+121348
+TZOFFSETTO:+1245
+TZNAME:CHAST
+DTSTART:19570101T000000
+RDATE:19570101T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+1245
+TZOFFSETTO:+1345
+TZNAME:CHADT
+DTSTART:19741103T024500
+RDATE:19741103T024500
+RDATE:19751026T024500
+RDATE:19761031T024500
+RDATE:19771030T024500
+RDATE:19781029T024500
+RDATE:19791028T024500
+RDATE:19801026T024500
+RDATE:19811025T024500
+RDATE:19821031T024500
+RDATE:19831030T024500
+RDATE:19841028T024500
+RDATE:19851027T024500
+RDATE:19861026T024500
+RDATE:19871025T024500
+RDATE:19881030T024500
+RDATE:19891008T024500
+END:DAYLIGHT
+BEGIN:STANDARD
 TZOFFSETFROM:+1345
 TZOFFSETTO:+1245
 TZNAME:CHAST
-DTSTART:19700315T034500
-RRULE:FREQ=YEARLY;BYMONTH=3;BYDAY=3SU
+DTSTART:19750223T034500
+RDATE:19750223T034500
+RDATE:19760307T034500
+RDATE:19770306T034500
+RDATE:19780305T034500
+RDATE:19790304T034500
+RDATE:19800302T034500
+RDATE:19810301T034500
+RDATE:19820307T034500
+RDATE:19830306T034500
+RDATE:19840304T034500
+RDATE:19850303T034500
+RDATE:19860302T034500
+RDATE:19870301T034500
+RDATE:19880306T034500
+RDATE:19890305T034500
 END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Pacific/Chatham.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Pacific/Honolulu.ics
===================================================================
--- libkcal/libical/zoneinfo/Pacific/Honolulu.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Pacific/Honolulu.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +1,51 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/Pacific/Honolulu
+TZID:/kde.org/Olson_20070327_1/Pacific/Honolulu
 X-LIC-LOCATION:Pacific/Honolulu
 BEGIN:STANDARD
-TZOFFSETFROM:-1000
+TZOFFSETFROM:-103126
+TZOFFSETTO:-1030
+TZNAME:HST
+DTSTART:19000101T120000
+RDATE:19000101T120000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-1030
+TZOFFSETTO:-0930
+TZNAME:HDT
+DTSTART:19330430T020000
+RDATE:19330430T020000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:-0930
+TZOFFSETTO:-1030
+TZNAME:HST
+DTSTART:19330521T020000
+RDATE:19330521T020000
+RDATE:19450930T020000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-1030
+TZOFFSETTO:-0930
+TZNAME:HWT
+DTSTART:19420209T020000
+RDATE:19420209T020000
+END:DAYLIGHT
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0930
+TZOFFSETTO:-0930
+TZNAME:HPT
+DTSTART:19450814T133000
+RDATE:19450814T133000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:-1030
 TZOFFSETTO:-1000
 TZNAME:HST
-DTSTART:19700101T000000
+DTSTART:19470608T020000
+RDATE:19470608T020000
 END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Pacific/Honolulu.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Pacific/Kiritimati.ics
===================================================================
--- libkcal/libical/zoneinfo/Pacific/Kiritimati.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Pacific/Kiritimati.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +1,29 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/Pacific/Kiritimati
+TZID:/kde.org/Olson_20070327_1/Pacific/Kiritimati
 X-LIC-LOCATION:Pacific/Kiritimati
 BEGIN:STANDARD
-TZOFFSETFROM:+1400
+TZOFFSETFROM:-102920
+TZOFFSETTO:-1040
+TZNAME:LINT
+DTSTART:19010101T000000
+RDATE:19010101T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-1040
+TZOFFSETTO:-1000
+TZNAME:LINT
+DTSTART:19791001T000000
+RDATE:19791001T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-1000
 TZOFFSETTO:+1400
 TZNAME:LINT
-DTSTART:19700101T000000
+DTSTART:19950101T000000
+RDATE:19950101T000000
 END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Pacific/Kiritimati.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Pacific/Pitcairn.ics
===================================================================
--- libkcal/libical/zoneinfo/Pacific/Pitcairn.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Pacific/Pitcairn.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +1,22 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/Pacific/Pitcairn
+TZID:/kde.org/Olson_20070327_1/Pacific/Pitcairn
 X-LIC-LOCATION:Pacific/Pitcairn
 BEGIN:STANDARD
-TZOFFSETFROM:-0800
+TZOFFSETFROM:-084020
+TZOFFSETTO:-0830
+TZNAME:PNT
+DTSTART:19010101T000000
+RDATE:19010101T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-0830
 TZOFFSETTO:-0800
 TZNAME:PST
-DTSTART:19700101T000000
+DTSTART:19980427T000000
+RDATE:19980427T000000
 END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Pacific/Pitcairn.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Pacific/Ponape.ics
===================================================================
--- libkcal/libical/zoneinfo/Pacific/Ponape.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Pacific/Ponape.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +1,15 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_4/Pacific/Ponape
+TZID:/kde.org/Olson_20070327_1/Pacific/Ponape
 X-LIC-LOCATION:Pacific/Ponape
 BEGIN:STANDARD
-TZOFFSETFROM:+1100
+TZOFFSETFROM:+103252
 TZOFFSETTO:+1100
 TZNAME:PONT
-DTSTART:19700101T000000
+DTSTART:19010101T000000
+RDATE:19010101T000000
 END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Pacific/Ponape.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Pacific/Auckland.ics
===================================================================
--- libkcal/libical/zoneinfo/Pacific/Auckland.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Pacific/Auckland.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,22 +1,130 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/Pacific/Auckland
+TZID:/kde.org/Olson_20070327_1/Pacific/Auckland
 X-LIC-LOCATION:Pacific/Auckland
 BEGIN:STANDARD
 TZOFFSETFROM:+1300
 TZOFFSETTO:+1200
 TZNAME:NZST
-DTSTART:19700315T030000
+DTSTART:19900318T030000
 RRULE:FREQ=YEARLY;BYMONTH=3;BYDAY=3SU
 END:STANDARD
 BEGIN:DAYLIGHT
 TZOFFSETFROM:+1200
 TZOFFSETTO:+1300
 TZNAME:NZDT
-DTSTART:19701004T020000
+DTSTART:19901007T020000
 RRULE:FREQ=YEARLY;BYMONTH=10;BYDAY=1SU
 END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+113904
+TZOFFSETTO:+1130
+TZNAME:NZMT
+DTSTART:18681102T000000
+RDATE:18681102T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+1130
+TZOFFSETTO:+1230
+TZNAME:NZST
+DTSTART:19271106T020000
+RDATE:19271106T020000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+1230
+TZOFFSETTO:+1130
+TZNAME:NZMT
+DTSTART:19280304T020000
+RDATE:19280304T020000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+1130
+TZOFFSETTO:+1200
+TZNAME:NZST
+DTSTART:19281014T020000
+RDATE:19281014T020000
+RDATE:19291013T020000
+RDATE:19301012T020000
+RDATE:19311011T020000
+RDATE:19321009T020000
+RDATE:19331008T020000
+RDATE:19340930T020000
+RDATE:19350929T020000
+RDATE:19360927T020000
+RDATE:19370926T020000
+RDATE:19380925T020000
+RDATE:19390924T020000
+RDATE:19400929T020000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+1200
+TZOFFSETTO:+1130
+TZNAME:NZMT
+DTSTART:19290317T020000
+RDATE:19290317T020000
+RDATE:19300316T020000
+RDATE:19310315T020000
+RDATE:19320320T020000
+RDATE:19330319T020000
+RDATE:19340429T020000
+RDATE:19350428T020000
+RDATE:19360426T020000
+RDATE:19370425T020000
+RDATE:19380424T020000
+RDATE:19390430T020000
+RDATE:19400428T020000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+1200
+TZOFFSETTO:+1200
+TZNAME:NZST
+DTSTART:19460101T000000
+RDATE:19460101T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+1200
+TZOFFSETTO:+1300
+TZNAME:NZDT
+DTSTART:19741103T020000
+RDATE:19741103T020000
+RDATE:19751026T020000
+RDATE:19761031T020000
+RDATE:19771030T020000
+RDATE:19781029T020000
+RDATE:19791028T020000
+RDATE:19801026T020000
+RDATE:19811025T020000
+RDATE:19821031T020000
+RDATE:19831030T020000
+RDATE:19841028T020000
+RDATE:19851027T020000
+RDATE:19861026T020000
+RDATE:19871025T020000
+RDATE:19881030T020000
+RDATE:19891008T020000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+1300
+TZOFFSETTO:+1200
+TZNAME:NZST
+DTSTART:19750223T030000
+RDATE:19750223T030000
+RDATE:19760307T030000
+RDATE:19770306T030000
+RDATE:19780305T030000
+RDATE:19790304T030000
+RDATE:19800302T030000
+RDATE:19810301T030000
+RDATE:19820307T030000
+RDATE:19830306T030000
+RDATE:19840304T030000
+RDATE:19850303T030000
+RDATE:19860302T030000
+RDATE:19870301T030000
+RDATE:19880306T030000
+RDATE:19890305T030000
+END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Pacific/Auckland.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Pacific/Tahiti.ics
===================================================================
--- libkcal/libical/zoneinfo/Pacific/Tahiti.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Pacific/Tahiti.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +1,15 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_4/Pacific/Tahiti
+TZID:/kde.org/Olson_20070327_1/Pacific/Tahiti
 X-LIC-LOCATION:Pacific/Tahiti
 BEGIN:STANDARD
-TZOFFSETFROM:-1000
+TZOFFSETFROM:-095816
 TZOFFSETTO:-1000
 TZNAME:TAHT
-DTSTART:19700101T000000
+DTSTART:19121001T000000
+RDATE:19121001T000000
 END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Pacific/Tahiti.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Pacific/Noumea.ics
===================================================================
--- libkcal/libical/zoneinfo/Pacific/Noumea.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Pacific/Noumea.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +1,33 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/Pacific/Noumea
+TZID:/kde.org/Olson_20070327_1/Pacific/Noumea
 X-LIC-LOCATION:Pacific/Noumea
 BEGIN:STANDARD
+TZOFFSETFROM:+110548
+TZOFFSETTO:+1100
+TZNAME:NCT
+DTSTART:19120113T000000
+RDATE:19120113T000000
+END:STANDARD
+BEGIN:DAYLIGHT
 TZOFFSETFROM:+1100
+TZOFFSETTO:+1200
+TZNAME:NCST
+DTSTART:19771204T000000
+RDATE:19771204T000000
+RDATE:19781203T000000
+RDATE:19961201T020000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+1200
 TZOFFSETTO:+1100
 TZNAME:NCT
-DTSTART:19700101T000000
+DTSTART:19780227T000000
+RDATE:19780227T000000
+RDATE:19790227T000000
+RDATE:19970302T030000
 END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Pacific/Noumea.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Pacific/Efate.ics
===================================================================
--- libkcal/libical/zoneinfo/Pacific/Efate.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Pacific/Efate.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +1,47 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/Pacific/Efate
+TZID:/kde.org/Olson_20070327_1/Pacific/Efate
 X-LIC-LOCATION:Pacific/Efate
 BEGIN:STANDARD
+TZOFFSETFROM:+111316
+TZOFFSETTO:+1100
+TZNAME:VUT
+DTSTART:19120113T000000
+RDATE:19120113T000000
+END:STANDARD
+BEGIN:DAYLIGHT
 TZOFFSETFROM:+1100
+TZOFFSETTO:+1200
+TZNAME:VUST
+DTSTART:19830925T000000
+RDATE:19830925T000000
+RDATE:19841023T000000
+RDATE:19850929T000000
+RDATE:19860928T000000
+RDATE:19870927T000000
+RDATE:19880925T000000
+RDATE:19890924T000000
+RDATE:19900923T000000
+RDATE:19910929T000000
+RDATE:19921025T000000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:+1200
 TZOFFSETTO:+1100
 TZNAME:VUT
-DTSTART:19700101T000000
+DTSTART:19840325T000000
+RDATE:19840325T000000
+RDATE:19850324T000000
+RDATE:19860323T000000
+RDATE:19870329T000000
+RDATE:19880327T000000
+RDATE:19890326T000000
+RDATE:19900325T000000
+RDATE:19910324T000000
+RDATE:19920126T000000
+RDATE:19930124T000000
 END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Pacific/Efate.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Pacific/Nauru.ics
===================================================================
--- libkcal/libical/zoneinfo/Pacific/Nauru.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Pacific/Nauru.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +1,36 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/Pacific/Nauru
+TZID:/kde.org/Olson_20070327_1/Pacific/Nauru
 X-LIC-LOCATION:Pacific/Nauru
 BEGIN:STANDARD
-TZOFFSETFROM:+1200
+TZOFFSETFROM:+110740
+TZOFFSETTO:+1130
+TZNAME:NRT
+DTSTART:19210115T000000
+RDATE:19210115T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+1130
+TZOFFSETTO:+0900
+TZNAME:JST
+DTSTART:19420315T000000
+RDATE:19420315T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0900
+TZOFFSETTO:+1130
+TZNAME:NRT
+DTSTART:19440815T000000
+RDATE:19440815T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+1130
 TZOFFSETTO:+1200
 TZNAME:NRT
-DTSTART:19700101T000000
+DTSTART:19790501T000000
+RDATE:19790501T000000
 END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Pacific/Nauru.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Pacific/Midway.ics
===================================================================
--- libkcal/libical/zoneinfo/Pacific/Midway.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Pacific/Midway.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +1,43 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/Pacific/Midway
+TZID:/kde.org/Olson_20070327_1/Pacific/Midway
 X-LIC-LOCATION:Pacific/Midway
 BEGIN:STANDARD
+TZOFFSETFROM:-114928
+TZOFFSETTO:-1100
+TZNAME:NST
+DTSTART:19010101T000000
+RDATE:19010101T000000
+END:STANDARD
+BEGIN:DAYLIGHT
 TZOFFSETFROM:-1100
+TZOFFSETTO:-1000
+TZNAME:NDT
+DTSTART:19560603T000000
+RDATE:19560603T000000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:-1000
 TZOFFSETTO:-1100
+TZNAME:NST
+DTSTART:19560902T000000
+RDATE:19560902T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-1100
+TZOFFSETTO:-1100
+TZNAME:BST
+DTSTART:19670401T000000
+RDATE:19670401T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-1100
+TZOFFSETTO:-1100
 TZNAME:SST
-DTSTART:19700101T000000
+DTSTART:19831130T000000
+RDATE:19831130T000000
 END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Pacific/Midway.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Pacific/Wallis.ics
===================================================================
--- libkcal/libical/zoneinfo/Pacific/Wallis.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Pacific/Wallis.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +1,15 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_4/Pacific/Wallis
+TZID:/kde.org/Olson_20070327_1/Pacific/Wallis
 X-LIC-LOCATION:Pacific/Wallis
 BEGIN:STANDARD
-TZOFFSETFROM:+1200
+TZOFFSETFROM:+121520
 TZOFFSETTO:+1200
 TZNAME:WFT
-DTSTART:19700101T000000
+DTSTART:19010101T000000
+RDATE:19010101T000000
 END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Pacific/Wallis.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Pacific/Rarotonga.ics
===================================================================
--- libkcal/libical/zoneinfo/Pacific/Rarotonga.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Pacific/Rarotonga.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +1,59 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/Pacific/Rarotonga
+TZID:/kde.org/Olson_20070327_1/Pacific/Rarotonga
 X-LIC-LOCATION:Pacific/Rarotonga
 BEGIN:STANDARD
-TZOFFSETFROM:-1000
+TZOFFSETFROM:-103904
+TZOFFSETTO:-1030
+TZNAME:CKT
+DTSTART:19010101T000000
+RDATE:19010101T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-1030
+TZOFFSETTO:-0930
+TZNAME:CKHST
+DTSTART:19781112T000000
+RDATE:19781112T000000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:-0930
 TZOFFSETTO:-1000
 TZNAME:CKT
-DTSTART:19700101T000000
+DTSTART:19790304T000000
+RDATE:19790304T000000
+RDATE:19800302T000000
+RDATE:19810301T000000
+RDATE:19820307T000000
+RDATE:19830306T000000
+RDATE:19840304T000000
+RDATE:19850303T000000
+RDATE:19860302T000000
+RDATE:19870301T000000
+RDATE:19880306T000000
+RDATE:19890305T000000
+RDATE:19900304T000000
+RDATE:19910303T000000
 END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-1000
+TZOFFSETTO:-0930
+TZNAME:CKHST
+DTSTART:19791028T000000
+RDATE:19791028T000000
+RDATE:19801026T000000
+RDATE:19811025T000000
+RDATE:19821031T000000
+RDATE:19831030T000000
+RDATE:19841028T000000
+RDATE:19851027T000000
+RDATE:19861026T000000
+RDATE:19871025T000000
+RDATE:19881030T000000
+RDATE:19891029T000000
+RDATE:19901028T000000
+END:DAYLIGHT
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Pacific/Rarotonga.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Pacific/Guadalcanal.ics
===================================================================
--- libkcal/libical/zoneinfo/Pacific/Guadalcanal.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Pacific/Guadalcanal.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +1,15 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_4/Pacific/Guadalcanal
+TZID:/kde.org/Olson_20070327_1/Pacific/Guadalcanal
 X-LIC-LOCATION:Pacific/Guadalcanal
 BEGIN:STANDARD
-TZOFFSETFROM:+1100
+TZOFFSETFROM:+103948
 TZOFFSETTO:+1100
 TZNAME:SBT
-DTSTART:19700101T000000
+DTSTART:19121001T000000
+RDATE:19121001T000000
 END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Pacific/Guadalcanal.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Pacific/Niue.ics
===================================================================
--- libkcal/libical/zoneinfo/Pacific/Niue.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Pacific/Niue.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +1,29 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_5/Pacific/Niue
+TZID:/kde.org/Olson_20070327_1/Pacific/Niue
 X-LIC-LOCATION:Pacific/Niue
 BEGIN:STANDARD
-TZOFFSETFROM:-1100
+TZOFFSETFROM:-111940
+TZOFFSETTO:-1120
+TZNAME:NUT
+DTSTART:19010101T000000
+RDATE:19010101T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-1120
+TZOFFSETTO:-1130
+TZNAME:NUT
+DTSTART:19510101T000000
+RDATE:19510101T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-1130
 TZOFFSETTO:-1100
 TZNAME:NUT
-DTSTART:19700101T000000
+DTSTART:19781001T000000
+RDATE:19781001T000000
 END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Pacific/Niue.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native

Index: libkcal/libical/zoneinfo/Pacific/Marquesas.ics
===================================================================
--- libkcal/libical/zoneinfo/Pacific/Marquesas.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/libical/zoneinfo/Pacific/Marquesas.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,14 +1,15 @@
 BEGIN:VCALENDAR
-PRODID:-//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/softwarestudio.org/Olson_20011030_4/Pacific/Marquesas
+TZID:/kde.org/Olson_20070327_1/Pacific/Marquesas
 X-LIC-LOCATION:Pacific/Marquesas
 BEGIN:STANDARD
-TZOFFSETFROM:-0930
+TZOFFSETFROM:-0918
 TZOFFSETTO:-0930
 TZNAME:MART
-DTSTART:19700101T000000
+DTSTART:19121001T000000
+RDATE:19121001T000000
 END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR

Zmiany atrybutów dla: libkcal/libical/zoneinfo/Pacific/Marquesas.ics
___________________________________________________________________
Nazwa: svn:mime-type
   - text/calendar
Nazwa: svn:keywords
   - Author Date Id Revision
Nazwa: svn:eol-style
   - native


Zmiany atrybutów dla: libkcal/libical/zoneinfo
___________________________________________________________________
Nazwa: svn:ignore
   - Makefile.in
Makefile
Doxyfile

Index: libkcal/libical/vzic-1.3/vzic-merge.pl
===================================================================
--- libkcal/libical/vzic-1.3/vzic-merge.pl	(.../tags/KDE/3.5.6/kdepim)	(wersja 0)
+++ libkcal/libical/vzic-1.3/vzic-merge.pl	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -0,0 +1,127 @@
+#!/usr/bin/perl -w
+
+#
+# Vzic - a program to convert Olson timezone database files into VZTIMEZONE
+# files compatible with the iCalendar specification (RFC2445).
+#
+# Copyright (C) 2001 Ximian, Inc.
+# Copyright (C) 2003 Damon Chaplin.
+#
+# Author: Damon Chaplin <damon@gnome.org>
+#
+# This program is free software; you can redistribute it and/or modify
+# it under the terms of the GNU General Public License as published by
+# the Free Software Foundation; either version 2 of the License, or
+# (at your option) any later version.
+#
+# This program is distributed in the hope that it will be useful,
+# but WITHOUT ANY WARRANTY; without even the implied warranty of
+# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+# GNU General Public License for more details.
+#
+# You should have received a copy of the GNU General Public License
+# along with this program; if not, write to the Free Software
+# Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA 02111-1307, USA.
+#
+
+#
+# This merges in a new set of VTIMEZONE files with the 'master' set. It only
+# updates the files in the master set if the VTIMEZONE component has really
+# been changes. Note that the TZID normally includes the date the VTIMEZONE
+# file was generated on, so we have to ignore this when comparing the files.
+#
+
+# Set these to the toplevel directories of the 2 sets of VTIMEZONE files.
+#$MASTER_ZONEINFO_DIR = "/home/damon/cvs/libical/zoneinfo";
+$MASTER_ZONEINFO_DIR = "/usr/share/libical-evolution/zoneinfo";
+$NEW_ZONEINFO_DIR = "/home/damon/src/vzic-1.0/zoneinfo";
+
+# Set this to 1 if you have version numbers in the TZID like libical.
+$LIBICAL_VERSIONING = 1;
+
+# Set this to 0 for dry-runs, and 1 to actually update.
+$DO_UPDATES = 1;
+
+# Save this so we can restore it later.
+$input_record_separator = $/;
+
+chdir $NEW_ZONEINFO_DIR
+    || die "Can't cd to $NEW_ZONEINFO_DIR";
+
+foreach $new_file (`find -name "*.ics"`) {
+    # Get rid of './' at start and whitespace at end.
+    $new_file =~ s/^\.\///;
+    $new_file =~ s/\s+$//;
+
+#    print "File: $new_file\n";
+
+    open (NEWZONEFILE, "$new_file")
+	|| die "Can't open file: $NEW_ZONEINFO_DIR/$new_file";
+    undef $/;
+    $new_contents = <NEWZONEFILE>;
+    $/ = $input_record_separator;
+    close (NEWZONEFILE);
+
+    $master_file = $MASTER_ZONEINFO_DIR . "/$new_file";
+
+#    print "Master File: $master_file\n";
+
+    $copy_to_master = 0;
+
+    # If the ics file exists in the master copy we have to compare them,
+    # otherwise we can just copy the new file into the master directory.
+    if (-e $master_file) {
+	open (MASTERZONEFILE, "$master_file")
+	    || die "Can't open file: $master_file";
+	undef $/;
+	$master_contents = <MASTERZONEFILE>;
+	$/ = $input_record_separator;
+	close (MASTERZONEFILE);
+	
+	$new_contents_copy = $new_contents;
+
+	# Strip the TZID from both contents.
+	$new_contents_copy =~ s/^TZID:\S+$//m;
+	$new_tzid = $&;
+	$master_contents =~ s/^TZID:\S+$//m;
+	$master_tzid = $&;
+
+#	print "Matched: $master_tzid\n";
+
+
+	if ($new_contents_copy ne $master_contents) {
+	    print "$new_file has changed. Updating...\n";
+	    $copy_to_master = 1;
+
+	    if ($LIBICAL_VERSIONING) {
+		# We bump the version number in the new file.
+		$master_tzid =~ m%_(\d+)/%;
+		$version_num = $1;
+#		print "Version: $version_num\n";
+
+		$version_num++;
+		$new_tzid =~ s%_(\d+)/%_$version_num/%;
+
+#		print "New TZID: $new_tzid\n";
+		$new_contents =~ s/^TZID:\S+$/$new_tzid/m;
+	    }
+	}
+
+    } else {
+	print "$new_file doesn't exist in master directory. Copying...\n";
+	$copy_to_master = 1;
+    }
+
+    if ($copy_to_master) {
+#	print "Updating: $new_file\n";
+
+	if ($DO_UPDATES) {
+	    open (MASTERZONEFILE, ">$master_file")
+		|| die "Can't create file: $master_file";
+	    print MASTERZONEFILE $new_contents;
+	    close (MASTERZONEFILE);
+	}
+    }
+
+}
+

Zmiany atrybutów dla: libkcal/libical/vzic-1.3/vzic-merge.pl
___________________________________________________________________
Nazwa: svn:executable
   + *

Index: libkcal/libical/vzic-1.3/ChangeLog
===================================================================
--- libkcal/libical/vzic-1.3/ChangeLog	(.../tags/KDE/3.5.6/kdepim)	(wersja 0)
+++ libkcal/libical/vzic-1.3/ChangeLog	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -0,0 +1,57 @@
+2006-03-18  Damon Chaplin  <damon@gnome.org>
+
+	* Released Vzic 1.3
+
+2006-03-18  Damon Chaplin  <damon@gnome.org>
+
+	* vzic-output.c (expand_tzname): added special case for America/Nome.
+	(output_rrule): made hacks a bit more general, to handle Asia/Gaza
+	which now has a day=4 rule. At some point we should check what newer
+	versions of Outlook can handle so we can be more accurate.
+
+	* vzic-dump.c (dump_time_zone_names): try looking for timezone info
+	using original and linked name.
+
+	* README, *.c: fixed spelling 'compatable' -> 'compatible'.
+
+	* vzic.c: patch from Jonathan Guthrie to support a --olson-dir option.
+
+2003-10-25  Damon Chaplin  <damon@gnome.org>
+
+	* Released Vzic 1.2
+
+2003-10-25  Damon Chaplin  <damon@gnome.org>
+
+	* vzic-output.c: 
+	* Makefile: moved the PRODUCT_ID and TZID_PREFIX settings to the
+	Makefile and changed the default so people don't accidentally use
+	the same IDs as Evolution.
+
+	* vzic-parse.c (parse_time): substitute 23:59:59 when we read a time
+	of 24:00:00. This is a bit of a kludge to avoid problems, since
+	24:00:00 is not a valid iCalendar time. Since 24:00:00 is only used
+	for a few timezones in the 1930s it doesn't matter too much.
+	
+	To write a correct fix we'd need to review all the code that deals
+	with times to see if it would be affected, e.g. a time of 24:00 on
+	one day should be considered equal to 0:00 the next day.
+
+	We'd also need to adjust the output times to use 0:00 the next day
+	rather than 24:00. If we need to output recurrence rules that would
+	be a problem, since 'last saturday at 24:00' can't be easily
+	converted to another rule that uses 0:00 instead.
+
+2003-10-22  Damon Chaplin  <damon@gnome.org>
+
+	* Released Vzic 1.1
+
+2003-10-22  Damon Chaplin  <damon@gnome.org>
+
+	* vzic-parse.c (parse_time): allow a time of 24:00, as used in
+	the America/Montreal and America/Toronto rules in the 1930s!
+	I'm not 100% sure the rest of the code will handle this OK, but
+	it only affects the 'pure' output.
+
+2003-09-01  Damon Chaplin  <damon@gnome.org>
+
+	* Released Vzic 1.0
Index: libkcal/libical/vzic-1.3/vzic-dump.pl
===================================================================
--- libkcal/libical/vzic-1.3/vzic-dump.pl	(.../tags/KDE/3.5.6/kdepim)	(wersja 0)
+++ libkcal/libical/vzic-1.3/vzic-dump.pl	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -0,0 +1,222 @@
+#!/usr/bin/perl -w
+
+#
+# Vzic - a program to convert Olson timezone database files into VZTIMEZONE
+# files compatible with the iCalendar specification (RFC2445).
+#
+# Copyright (C) 2000-2001 Ximian, Inc.
+# Copyright (C) 2003 Damon Chaplin.
+#
+# Author: Damon Chaplin <damon@gnome.org>
+#
+# This program is free software; you can redistribute it and/or modify
+# it under the terms of the GNU General Public License as published by
+# the Free Software Foundation; either version 2 of the License, or
+# (at your option) any later version.
+#
+# This program is distributed in the hope that it will be useful,
+# but WITHOUT ANY WARRANTY; without even the implied warranty of
+# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+# GNU General Public License for more details.
+#
+# You should have received a copy of the GNU General Public License
+# along with this program; if not, write to the Free Software
+# Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA 02111-1307, USA.
+#
+
+#
+# This reads the Olson timezone files, strips any comments, and outputs them
+# in a very simple format with tab-separated fields. It is used to compare
+# with the output of dump_zone_data() and dump_rule_data() to double-check
+# that we have parsed the files correctly.
+#
+
+my $zones_fh = "zonesfile";
+my $rules_fh = "rulesfile";
+
+my %Rules;
+
+if ($#ARGV != 0) {
+    die "Usage: $0 <OlsonDirectory>";
+}
+
+my $OLSON_DIR = $ARGV[0];
+
+# We place output in subdirectories of the current directory.
+my $OUTPUT_DIR = "zoneinfo";
+
+if (! -d "$OUTPUT_DIR") {
+    mkdir ("$OUTPUT_DIR", 0777)
+	|| die "Can't create directory: $OUTPUT_DIR";
+}
+if (! -d "$OUTPUT_DIR/ZonesPerl") {
+    mkdir ("$OUTPUT_DIR/ZonesPerl", 0777)
+	|| die "Can't create directory: $OUTPUT_DIR/ZonesPerl";
+}
+if (! -d "$OUTPUT_DIR/RulesPerl") {
+    mkdir ("$OUTPUT_DIR/RulesPerl", 0777)
+	|| die "Can't create directory: $OUTPUT_DIR/RulesPerl";
+}
+
+
+&ReadOlsonFile ("africa");
+&ReadOlsonFile ("antarctica");
+&ReadOlsonFile ("asia");
+&ReadOlsonFile ("australasia");
+&ReadOlsonFile ("europe");
+&ReadOlsonFile ("northamerica");
+&ReadOlsonFile ("southamerica");
+
+# These are backwards-compatability and weird stuff.
+#&ReadOlsonFile ("backward");
+#&ReadOlsonFile ("etcetera");
+#&ReadOlsonFile ("leapseconds");
+#&ReadOlsonFile ("pacificnew");
+#&ReadOlsonFile ("solar87");
+#&ReadOlsonFile ("solar88");
+#&ReadOlsonFile ("solar89");
+
+# We don't do this one since it is not useful and the use of '"' in the Zone
+# line messes up our split() command.
+#&ReadOlsonFile ("factory");
+
+# We don't do this since the vzic program can't do it.
+#&ReadOlsonFile ("systemv");
+
+
+
+
+1;
+
+
+sub ReadOlsonFile {
+    my ($file) = @_;
+
+#    print ("Reading olson file: $file\n");
+
+    open (OLSONFILE, "$OLSON_DIR/$file")
+	|| die "Can't open file: $file";
+
+    open ($zones_fh, ">$OUTPUT_DIR/ZonesPerl/$file")
+	|| die "Can't open file: $OUTPUT_DIR/ZonesPerl/$file";
+
+    open ($rules_fh, ">$OUTPUT_DIR/RulesPerl/$file")
+	|| die "Can't open file: $OUTPUT_DIR/RulesPerl/$file";
+
+    %Rules = ();
+
+    my $zone_continues = 0;
+
+    while (<OLSONFILE>) {
+	next if (m/^#/);
+
+	# '#' characters can appear in strings, but the Olson files don't use
+	# that feature at present so we treat all '#' as comments for now.
+	s/#.*//;
+
+	next if (m/^\s*$/);
+
+	if ($zone_continues) {
+	    $zone_continues = &ReadZoneContinuationLine;
+
+	} elsif (m/^Rule\s/) {
+	    &ReadRuleLine;
+
+	} elsif (m/^Zone\s/) {
+	    $zone_continues = &ReadZoneLine;
+
+	} elsif (m/^Link\s/) {
+#	    print "Link: $link_from, $link_to\n";
+
+	} elsif (m/^Leap\s/) {
+#	    print "Leap\n";
+
+	} else {
+	    die "Invalid line: $_";
+	}
+    }
+
+#    print ("Read olson file: $file\n");
+
+    foreach $key (sort (keys (%Rules))) {
+	print $rules_fh "$Rules{$key}"
+    }
+
+    close ($zones_fh);
+    close ($rules_fh);
+    close (OLSONFILE);
+}
+
+
+sub ReadZoneLine {
+    my ($zone, $name, $gmtoff, $rules_save, $format,
+	$until_year, $until_month, $until_day, $until_time, $remainder)
+	= split ' ', $_, 10;
+
+    return &ReadZoneLineCommon ($zone, $name, $gmtoff, $rules_save, $format,
+				$until_year, $until_month, $until_day,
+				$until_time);
+}
+
+
+sub ReadZoneContinuationLine {
+    my ($gmtoff, $rules_save, $format,
+	$until_year, $until_month, $until_day, $until_time, $remainder)
+	= split ' ', $_, 8;
+
+    return &ReadZoneLineCommon ("", "", $gmtoff, $rules_save, $format,
+				$until_year, $until_month, $until_day,
+				$until_time);
+}
+
+
+sub ReadZoneLineCommon {
+    my ($zone, $name, $gmtoff, $rules_save, $format,
+	$until_year, $until_month, $until_day, $until_time) = @_;
+
+    if (!defined ($until_year)) { $until_year = ""; }
+    if (!defined ($until_month)) { $until_month = ""; }
+    if (!defined ($until_day)) { $until_day = ""; }
+    if (!defined ($until_time)) { $until_time = ""; }
+
+    # A few of the gmtoffsets have an unnecessary :00 seconds.
+    $gmtoff =~ s/(\d+):(\d+):00/$1:$2/;
+
+    # Make sure the gmtoff does have minutes.
+    $gmtoff =~ s/^(-?\d+)$/$1:00/;
+
+    # Fix a few other bits so they all use the same format.
+    if ($gmtoff eq "0") { $gmtoff = "0:00"; }
+    $until_time =~ s/^0(\d):/$1:/;
+    if ($until_time eq "0:00") { $until_time = ""; }
+    if ($until_day eq "1" && $until_time eq "") { $until_day = ""; }
+    if ($until_month eq "Jan" && $until_day eq "" && $until_time eq "") {
+	$until_month = "";
+    }
+
+    # For Zone continuation lines we need to insert an extra TAB.
+    if (!$zone) { $zone = "\t" };
+
+    print $zones_fh "$zone\t$name\t$gmtoff\t$rules_save\t$format\t$until_year\t$until_month\t$until_day\t$until_time\n";
+
+    if (defined ($until_year) && $until_year) {
+	return 1;
+    } else {
+	return 0;
+    }
+}
+
+
+sub ReadRuleLine {
+    my ($rule, $name, $from, $to, $type, $in, $on, $at, $save, $letter_s,
+	$remainder) = split;
+
+    $at =~ s/(\d+:\d+):00/$1/;
+    $save =~ s/(\d+:\d+):00/$1/;
+    if ($save eq "0:00") { $save = "0"; }
+
+    $Rules{$name} .= "$rule\t$name\t$from\t$to\t$type\t$in\t$on\t$at\t$save\t$letter_s\n";
+
+#    print $rules_fh "$rule\t$name\t$from\t$to\t$type\t$in\t$on\t$at\t$save\t$letter_s\n";
+}
+

Zmiany atrybutów dla: libkcal/libical/vzic-1.3/vzic-dump.pl
___________________________________________________________________
Nazwa: svn:executable
   + *

Index: libkcal/libical/vzic-1.3/vzic-output.c
===================================================================
--- libkcal/libical/vzic-1.3/vzic-output.c	(.../tags/KDE/3.5.6/kdepim)	(wersja 0)
+++ libkcal/libical/vzic-1.3/vzic-output.c	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -0,0 +1,2325 @@
+/*
+ * Vzic - a program to convert Olson timezone database files into VZTIMEZONE
+ * files compatible with the iCalendar specification (RFC2445).
+ *
+ * Copyright (C) 2000-2001 Ximian, Inc.
+ * Copyright (C) 2003 Damon Chaplin.
+ *
+ * Author: Damon Chaplin <damon@gnome.org>
+ *
+ * This program is free software; you can redistribute it and/or modify
+ * it under the terms of the GNU General Public License as published by
+ * the Free Software Foundation; either version 2 of the License, or
+ * (at your option) any later version.
+ *
+ * This program is distributed in the hope that it will be useful,
+ * but WITHOUT ANY WARRANTY; without even the implied warranty of
+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+ * GNU General Public License for more details.
+ *
+ * You should have received a copy of the GNU General Public License
+ * along with this program; if not, write to the Free Software
+ * Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA 02111-1307, USA.
+ */
+
+/* ALGORITHM:
+ *
+ * First we expand all the Rule arrays, so that each element only represents 1
+ * year. If a Rule extends to infinity we expand it up to a few years past the
+ * maximum UNTIL year used in any of the timezones. We do this to make sure
+ * that the last of the expanded Rules (which may be infinite) is only used
+ * in the last of the time periods (i.e. the last Zone line).
+ *
+ * The Rule arrays are also sorted by the start time (FROM + IN + ON + AT).
+ * Doing all this makes it much easier to find which rules apply to which
+ * periods.
+ *
+ * For each timezone (i.e. ZoneData element), we step through each of the
+ * time periods, the ZoneLineData elements (which represent each Zone line
+ * from the Olson file.)
+ *
+ * We calculate the start & end time of the period.
+ * - For the first line the start time is -infinity.
+ * - For the last line the end time is +infinity.
+ * - The end time of each line is also the start time of the next.
+ * 
+ * We create an array of time changes which occur in this period, including
+ * the one implied by the Zone line itself (though this is later taken out
+ * if it is found to be at exactly the same time as the first Rule).
+ *
+ * Now we iterate over the time changes, outputting them as STANDARD or
+ * DAYLIGHT components. We also try to merge them together into RRULEs or
+ * use RDATEs.
+ */
+
+
+#include <errno.h>
+#include <stdio.h>
+#include <stdlib.h>
+#include <string.h>
+#include <time.h>
+#include <sys/stat.h>
+#include <unistd.h>
+
+#include "vzic.h"
+#include "vzic-output.h"
+
+#include "vzic-dump.h"
+
+
+/* These come from the Makefile. See the comments there. */
+char *ProductID = PRODUCT_ID;
+char *TZIDPrefix = TZID_PREFIX;
+
+/* We expand the TZIDPrefix, replacing %D with the date, in here. */
+char TZIDPrefixExpanded[1024];
+
+
+/* We only use RRULEs if there are at least MIN_RRULE_OCCURRENCES occurrences,
+   since otherwise RDATEs are more efficient. Actually, I've set this high
+   so we only use RRULEs for infinite recurrences. Since expanding RRULEs is
+   very time-consuming, this seems sensible. */
+#define MIN_RRULE_OCCURRENCES	100
+
+
+/* The year we go up to when dumping the list of timezone changes (used
+   for testing & debugging). */
+#define MAX_CHANGES_YEAR	2030
+
+/* This is the maximum year that time_t value can typically hold on 32-bit
+   systems. */
+#define MAX_TIME_T_YEAR		2037
+
+
+/* The year we use to start RRULEs. */
+#define RRULE_START_YEAR	1970
+
+/* The year we use for RDATEs. */
+#define RDATE_YEAR		1970
+
+
+static char *WeekDays[] = { "SU", "MO", "TU", "WE", "TH", "FR", "SA" };
+static int DaysInMonth[] = { 31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31 };
+
+char *CurrentZoneName;
+
+
+typedef struct _VzicTime VzicTime;
+struct _VzicTime
+{
+  /* Normal years, e.g. 2001. */
+  int year;
+
+  /* 0 (Jan) to 11 (Dec). */
+  int month;
+
+  /* The day, either a simple month day number, 1-31, or a rule such as
+     the last Sunday, or the first Monday on or after the 8th. */
+  DayCode	day_code;
+  int		day_number;		/* 1 to 31. */
+  int		day_weekday;		/* 0 (Sun) to 6 (Sat). */
+
+  /* The time, in seconds from midnight. The code specifies whether the
+     time is a wall clock time, local standard time, or universal time. */
+  int		time_seconds;
+  TimeCode	time_code;
+
+  /* The offset from UTC for local standard time. */
+  int		stdoff;
+
+  /* The offset from UTC for local wall clock time. If this is different to
+     stdoff then this is a DAYLIGHT component. This is TZOFFSETTO. */
+  int		walloff;
+
+  /* TRUE if the time change recurs every year to infinity. */
+  gboolean	is_infinite;
+
+  /* TRUE if the change has already been output. */
+  gboolean	output;
+
+  /* These are the offsets of the previous VzicTime, and are used when
+     calculating the time of the change. We place them here in
+     output_zone_components() to simplify the output code. */
+  int		prev_stdoff;
+  int		prev_walloff;
+
+  /* The abbreviated form of the timezone name. Note that this may not be
+     unique. */
+  char	       *tzname;
+};
+
+
+static void	expand_and_sort_rule_array	(gpointer	 key,
+						 gpointer	 value,
+						 gpointer	 data);
+static int	rule_sort_func			(const void	*arg1,
+						 const void	*arg2);
+static void	output_zone			(char		*directory,
+						 ZoneData	*zone,
+						 char		*zone_name,
+						 GHashTable	*rule_data);
+static gboolean	parse_zone_name			(char		*name,
+						 char	       **directory,
+						 char	       **subdirectory,
+						 char	       **filename);
+static void	output_zone_to_files		(ZoneData	*zone,
+						 char		*zone_name,
+						 GHashTable	*rule_data,
+						 FILE		*fp,
+						 FILE		*changes_fp);
+static gboolean	add_rule_changes		(ZoneLineData	*zone_line,
+						 char		*zone_name,
+						 GArray		*changes,
+						 GHashTable	*rule_data,
+						 VzicTime	*start,
+						 VzicTime	*end,
+						 char	       **start_letter_s,
+						 int		*save_seconds);
+static char*	expand_tzname			(char		*zone_name,
+						 char		*format,
+						 gboolean	 have_letter_s,
+						 char		*letter_s,
+						 gboolean	 is_daylight);
+static int	compare_times			(VzicTime	*time1,
+						 int		 stdoff1,
+						 int		 walloff1,
+						 VzicTime	*time2,
+						 int		 stdoff2,
+						 int		 walloff2);
+static gboolean times_match			(VzicTime	*time1,
+						 int		 stdoff1,
+						 int		 walloff1,
+						 VzicTime	*time2,
+						 int		 stdoff2,
+						 int		 walloff2);
+static void	output_zone_components		(FILE		*fp,
+						 char		*name,
+						 GArray		*changes);
+static void	set_previous_offsets		(GArray		*changes);
+static gboolean	check_for_recurrence		(FILE		*fp,
+						 GArray		*changes,
+						 int		 idx);
+static void	check_for_rdates		(FILE		*fp,
+						 GArray		*changes,
+						 int		 idx);
+static gboolean	timezones_match			(char		*tzname1,
+						 char		*tzname2);
+static int	output_component_start		(char		*buffer,
+						 VzicTime	*vzictime,
+						 gboolean	 output_rdate,
+						 gboolean	 use_same_tz_offset);
+static void	output_component_end		(FILE		*fp,
+						 VzicTime	*vzictime);
+
+static void	vzictime_init			(VzicTime	*vzictime);
+static int	calculate_actual_time		(VzicTime	*vzictime,
+						 TimeCode	 time_code,
+						 int		 stdoff,
+						 int		 walloff);
+static int	calculate_wall_time		(int		 time,
+						 TimeCode	 time_code,
+						 int		 stdoff,
+						 int		 walloff,
+						 int		*day_offset);
+static int	calculate_until_time		(int		 time,
+						 TimeCode	 time_code,
+						 int		 stdoff,
+						 int		 walloff,
+						 int		*year,
+						 int		*month,
+						 int		*day);
+static void	fix_time_overflow		(int		*year,
+						 int		*month,
+						 int		*day,
+						 int		 day_offset);
+
+static char*	format_time			(int		 year,
+						 int		 month,
+						 int		 day,
+						 int		 time);
+static char*	format_tz_offset		(int		 tz_offset,
+						 gboolean	 round_seconds);
+static gboolean output_rrule			(char	        *rrule_buffer,
+						 int		 month,
+						 DayCode	 day_code,
+						 int		 day_number,
+						 int		 day_weekday,
+						 int		 day_offset,
+						 char		*until);
+static gboolean	output_rrule_2			(char		*buffer,
+						 int		 month,
+						 int		 day_number,
+						 int		 day_weekday);
+
+static char*	format_vzictime			(VzicTime	*vzictime);
+
+static void	dump_changes			(FILE		*fp,
+						 char		*zone_name,
+						 GArray		*changes);
+static void	dump_change			(FILE		*fp,
+						 char		*zone_name,
+						 VzicTime	*vzictime,
+						 int		 year);
+
+static void	expand_tzid_prefix		(void);
+
+
+void
+output_vtimezone_files		(char		*directory,
+				 GArray		*zone_data,
+				 GHashTable	*rule_data,
+				 GHashTable	*link_data,
+				 int		 max_until_year)
+{
+  ZoneData *zone;
+  GList *links;
+  char *link_to;
+  int i;
+
+  /* Insert today's date into the TZIDs we output. */
+  expand_tzid_prefix ();
+
+  /* Expand the rule data so that each entry specifies only one year, and
+     sort it so we can easily find the rules applicable to each Zone span. */
+  g_hash_table_foreach (rule_data, expand_and_sort_rule_array,
+			GINT_TO_POINTER (max_until_year));
+
+  /* Output each timezone. */
+  for (i = 0; i < zone_data->len; i++) {
+    zone = &g_array_index (zone_data, ZoneData, i);
+    output_zone (directory, zone, zone->zone_name, rule_data);
+
+    /* Look for any links from this zone. */
+    links = g_hash_table_lookup (link_data, zone->zone_name);
+
+    while (links) {
+      link_to = links->data;
+
+      /* We ignore Links that don't have a '/' in them (things like 'EST5EDT').
+       */
+      if (strchr (link_to, '/')) {
+	output_zone (directory, zone, link_to, rule_data);
+      }
+
+      links = links->next;
+    }
+  }
+}
+
+
+static void
+expand_and_sort_rule_array	(gpointer	 key,
+				 gpointer	 value,
+				 gpointer	 data)
+{
+  char *name = key;
+  GArray *rule_array = value;
+  RuleData *rule, tmp_rule;
+  int len, max_year, i, from, to, year;
+  gboolean is_infinite;
+
+  /* We expand the rule data to a year greater than any year used in a Zone
+     UNTIL value. This is so that we can easily get parts of the array to
+     use for each Zone line. */
+  max_year = GPOINTER_TO_INT (data) + 2;
+
+  /* If any of the rules apply to several years, we turn it into a single rule
+     for each year. If the Rule is infinite we go up to max_year.
+     We change the FROM field in the copies of the Rule, setting it to each
+     of the years, and set TO to FROM, except if TO was YEAR_MAXIMUM we set
+     the last TO to YEAR_MAXIMUM, so we still know the Rule is infinite. */
+  len = rule_array->len;
+  for (i = 0; i < len; i++) {
+    rule = &g_array_index (rule_array, RuleData, i);
+
+    /* None of the Rules currently use the TYPE field, but we'd better check.
+     */
+    if (rule->type) {
+      fprintf (stderr, "Rules %s has a TYPE: %s\n", name, rule->type);
+      exit (1);
+    }
+
+    if (rule->from_year != rule->to_year) {
+      from = rule->from_year;
+      to = rule->to_year;
+
+      tmp_rule = *rule;
+
+      /* Flag that this is a shallow copy so we don't free anything twice. */
+      tmp_rule.is_shallow_copy = TRUE;
+
+      /* See if it is an infinite Rule. */
+      if (to == YEAR_MAXIMUM) {
+	is_infinite = TRUE;
+	to = max_year;
+	if (from < to)
+	  rule->to_year = rule->from_year;
+      } else {
+	is_infinite = FALSE;
+      }
+
+      /* Create a copy of the Rule for each year. */
+      for (year = from + 1; year <= to; year++) {
+	tmp_rule.from_year = year;
+
+	/* If the Rule is infinite, mark the last copy as infinite. */
+	if (year == to && is_infinite)
+	  tmp_rule.to_year = YEAR_MAXIMUM;
+	else
+	  tmp_rule.to_year = year;
+
+	g_array_append_val (rule_array, tmp_rule);
+      }
+    }
+  }
+
+  /* Now sort the rules. */
+  qsort (rule_array->data, rule_array->len, sizeof (RuleData), rule_sort_func);
+
+#if 0
+  dump_rule_array (name, rule_array, stdout);
+#endif
+}
+
+
+/* This is used to sort the rules, after the rules have all been expanded so
+   that each one is only for one year. */
+static int
+rule_sort_func			(const void	*arg1,
+				 const void	*arg2)
+{
+  RuleData *rule1, *rule2;
+  int time1_year, time1_month, time1_day;
+  int time2_year, time2_month, time2_day;
+  int month_diff, result;
+  VzicTime t1, t2;
+
+  rule1 = (RuleData*) arg1;
+  rule2 = (RuleData*) arg2;
+
+  time1_year = rule1->from_year;
+  time1_month = rule1->in_month;
+  time2_year = rule2->from_year;
+  time2_month = rule2->in_month;
+
+  /* If there is more that one month difference we don't need to calculate
+     the day or time. */
+  month_diff = (time1_year - time2_year) * 12 + time1_month - time2_month;
+
+  if (month_diff > 1)
+    return 1;
+  if (month_diff < -1)
+    return -1;
+
+  /* Now we have to calculate the day and time of the Rule start and the
+     VzicTime, using the given offsets. */
+  t1.year = time1_year;
+  t1.month = time1_month;
+  t1.day_code = rule1->on_day_code;
+  t1.day_number = rule1->on_day_number;
+  t1.day_weekday = rule1->on_day_weekday;
+  t1.time_code = rule1->at_time_code;
+  t1.time_seconds = rule1->at_time_seconds;
+
+  t2.year = time2_year;
+  t2.month = time2_month;
+  t2.day_code = rule2->on_day_code;
+  t2.day_number = rule2->on_day_number;
+  t2.day_weekday = rule2->on_day_weekday;
+  t2.time_code = rule2->at_time_code;
+  t2.time_seconds = rule2->at_time_seconds;
+
+  /* FIXME: We don't know the offsets yet, but I don't think any Rules are
+     close enough together that the offsets can make a difference. Should
+     check this. */
+  calculate_actual_time (&t1, TIME_WALL, 0, 0);
+  calculate_actual_time (&t2, TIME_WALL, 0, 0);
+
+  /* Now we can compare the entire time. */
+  if (t1.year > t2.year)
+    result = 1;
+  else if (t1.year < t2.year)
+    result = -1;
+
+  else if (t1.month > t2.month)
+    result = 1;
+  else if (t1.month < t2.month)
+    result = -1;
+
+  else if (t1.day_number > t2.day_number)
+    result = 1;
+  else if (t1.day_number < t2.day_number)
+    result = -1;
+
+  else if (t1.time_seconds > t2.time_seconds)
+    result = 1;
+  else if (t1.time_seconds < t2.time_seconds)
+    result = -1;
+
+  else {
+    printf ("WARNING: Rule dates matched.\n");
+    result = 0;
+  }
+
+  return result;
+}
+
+
+static void
+output_zone			(char		*directory,
+				 ZoneData	*zone,
+				 char		*zone_name,
+				 GHashTable	*rule_data)
+{
+  FILE *fp, *changes_fp = NULL;
+  char output_directory[PATHNAME_BUFFER_SIZE];
+  char filename[PATHNAME_BUFFER_SIZE];
+  char changes_filename[PATHNAME_BUFFER_SIZE];
+  char *zone_directory, *zone_subdirectory, *zone_filename;
+
+  /* Set a global for the zone_name, to be used only for debug messages. */
+  CurrentZoneName = zone_name;
+
+  /* Use this to only output a particular zone. */
+#if 0
+  if (strcmp (zone_name, "Atlantic/Azores"))
+    return;
+#endif
+
+#if 0
+  printf ("Outputting Zone: %s\n", zone_name);
+#endif
+
+  if (!parse_zone_name (zone_name, &zone_directory, &zone_subdirectory,
+			&zone_filename))
+    return;
+
+  if (VzicDumpZoneNamesAndCoords) {
+    VzicTimeZoneNames = g_list_prepend (VzicTimeZoneNames,
+					g_strdup (zone_name));
+  }
+
+  sprintf (output_directory, "%s/%s", directory, zone_directory);
+  ensure_directory_exists (output_directory);
+  sprintf (filename, "%s/%s.ics", output_directory, zone_filename);
+
+  if (VzicDumpChanges) {
+    sprintf (output_directory, "%s/ChangesVzic/%s", directory, zone_directory);
+    ensure_directory_exists (output_directory);
+    sprintf (changes_filename, "%s/%s", output_directory, zone_filename);
+  }
+
+  if (zone_subdirectory) {
+    sprintf (output_directory, "%s/%s/%s", directory, zone_directory,
+	     zone_subdirectory);
+    ensure_directory_exists (output_directory);
+    sprintf (filename, "%s/%s.ics", output_directory, zone_filename);
+
+    if (VzicDumpChanges) {
+      sprintf (output_directory, "%s/ChangesVzic/%s/%s", directory,
+	       zone_directory, zone_subdirectory);
+      ensure_directory_exists (output_directory);
+      sprintf (changes_filename, "%s/%s", output_directory, zone_filename);
+    }
+  }
+
+  /* Create the files. */
+  fp = fopen (filename, "w");
+  if (!fp) {
+    fprintf (stderr, "Couldn't create file: %s\n", filename);
+    exit (1);
+  }
+
+  if (VzicDumpChanges) {
+    changes_fp = fopen (changes_filename, "w");
+    if (!changes_fp) {
+      fprintf (stderr, "Couldn't create file: %s\n", changes_filename);
+      exit (1);
+    }
+  }
+
+  fprintf (fp, "BEGIN:VCALENDAR\nPRODID:%s\nVERSION:2.0\n", ProductID);
+
+  output_zone_to_files (zone, zone_name, rule_data, fp, changes_fp);
+
+  if (ferror (fp)) {
+    fprintf (stderr, "Error writing file: %s\n", filename);
+    exit (1);
+  }
+
+  fprintf (fp, "END:VCALENDAR\n");
+
+  fclose (fp);
+
+  g_free (zone_directory);
+  g_free (zone_subdirectory);
+  g_free (zone_filename);
+}
+
+
+/* This checks that the Zone name only uses the characters in [-+_/a-zA-Z0-9],
+   and outputs a warning if it isn't. */
+static gboolean
+parse_zone_name			(char		*name,
+				 char	       **directory,
+				 char	       **subdirectory,
+				 char	       **filename)
+{
+  static int invalid_zone_num = 1;
+
+  char *p, ch, *first_slash_pos = NULL, *second_slash_pos = NULL;
+  gboolean invalid = FALSE;
+
+  for (p = name; (ch = *p) != 0; p++) {
+    if ((ch < 'a' || ch > 'z') && (ch < 'A' || ch > 'Z')
+	&& (ch < '0' || ch > '9') && ch != '/' && ch != '_'
+	&& ch != '-' && ch != '+') {
+      fprintf (stderr, "WARNING: Unusual Zone name: %s\n", name);
+      invalid = TRUE;
+      break;
+    }
+
+    if (ch == '/') {
+      if (!first_slash_pos) {
+	first_slash_pos = p;
+      } else if (!second_slash_pos) {
+	second_slash_pos = p;
+      } else {
+	fprintf (stderr, "WARNING: More than 2 '/' characters in Zone name: %s\n", name);
+	invalid = TRUE;
+	break;
+      }
+    }
+  }
+
+  if (!first_slash_pos) {
+#if 0
+	fprintf (stderr, "No '/' character in Zone name: %s. Skipping.\n", name);
+#endif
+	return FALSE;
+  }
+
+  if (invalid) {
+    *directory = g_strdup ("Invalid");
+    *filename = g_strdup_printf ("Zone%i", invalid_zone_num++);
+  } else {
+    *first_slash_pos = '\0';
+    *directory = g_strdup (name);
+    *first_slash_pos = '/';
+
+    if (second_slash_pos) {
+      *second_slash_pos = '\0';
+      *subdirectory = g_strdup (first_slash_pos + 1);
+      *second_slash_pos = '/';
+
+      *filename = g_strdup (second_slash_pos + 1);
+    } else {
+      *subdirectory = NULL;
+      *filename = g_strdup (first_slash_pos + 1);
+    }
+  }
+
+  return invalid ? FALSE : TRUE;
+}
+
+
+static void
+output_zone_to_files		(ZoneData	*zone,
+				 char		*zone_name,
+				 GHashTable	*rule_data,
+				 FILE		*fp,
+				 FILE		*changes_fp)
+{
+  ZoneLineData *zone_line;
+  GArray *changes;
+  int i, stdoff, walloff, start_index, save_seconds;
+  VzicTime start, end, *vzictime_start, *vzictime, *vzictime_first_rule_change;
+  gboolean is_daylight, found_letter_s;
+  char *start_letter_s;
+
+  changes = g_array_new (FALSE, FALSE, sizeof (VzicTime));
+
+  vzictime_init (&start);
+  vzictime_init (&end);
+
+  /* The first period starts at -infinity. */
+  start.year = YEAR_MINIMUM;
+
+  for (i = 0; i < zone->zone_line_data->len; i++) {
+    zone_line = &g_array_index (zone->zone_line_data, ZoneLineData, i);
+
+    /* This is the local standard time offset from GMT for this period. */
+    start.stdoff = stdoff = zone_line->stdoff_seconds;
+    start.walloff = walloff = stdoff + zone_line->save_seconds;
+
+    if (zone_line->until_set) {
+      end.year = zone_line->until_year;
+      end.month = zone_line->until_month;
+      end.day_code = zone_line->until_day_code;
+      end.day_number = zone_line->until_day_number;
+      end.day_weekday = zone_line->until_day_weekday;
+      end.time_seconds = zone_line->until_time_seconds;
+      end.time_code = zone_line->until_time_code;
+    } else {
+      /* The last period ends at +infinity. */
+      end.year = YEAR_MAXIMUM;
+    }
+
+    /* Add a time change for the start of the period. This may be removed
+       later if one of the rules expands to exactly the same time. */
+    start_index = changes->len;
+    g_array_append_val (changes, start);
+
+    /* If there are Rules associated with this period, add all the relevant
+       time changes. */
+    save_seconds = 0;
+    if (zone_line->rules)
+      found_letter_s = add_rule_changes (zone_line, zone_name, changes,
+					 rule_data, &start, &end,
+					 &start_letter_s, &save_seconds);
+    else
+      found_letter_s = FALSE;
+
+    /* FIXME: I'm not really sure what to do about finding a LETTER_S for the
+       first part of the period (i.e. before the first Rule comes into effect).
+       Currently we try to use the same LETTER_S as the first Rule of the
+       period which is in local standard time. */
+    if (zone_line->save_seconds)
+      save_seconds = zone_line->save_seconds;
+    is_daylight = save_seconds ? TRUE : FALSE;
+    vzictime_start = &g_array_index (changes, VzicTime, start_index);
+    walloff = vzictime_start->walloff = stdoff + save_seconds;
+
+    /* TEST: See if the first Rule time is exactly the same as the change from
+       the Zone line. In which case we can remove the Zone line change. */
+    if (changes->len > start_index + 1) {
+      int prev_stdoff, prev_walloff;
+
+      if (start_index > 0) {
+	VzicTime *v = &g_array_index (changes, VzicTime, start_index - 1);
+	prev_stdoff = v->stdoff;
+	prev_walloff = v->walloff;
+      } else {
+	prev_stdoff = 0;
+	prev_walloff = 0;
+      }
+      vzictime_first_rule_change = &g_array_index (changes, VzicTime,
+						   start_index + 1);
+      if (times_match (vzictime_start, prev_stdoff, prev_walloff,
+		       vzictime_first_rule_change, stdoff, walloff)) {
+#if 0
+	printf ("Removing zone-line change (using new offsets)\n");
+#endif
+	g_array_remove_index (changes, start_index);
+	vzictime_start = NULL;
+      } else if (times_match (vzictime_start, prev_stdoff, prev_walloff,
+			      vzictime_first_rule_change, prev_stdoff, prev_walloff)) {
+#if 0
+	printf ("Removing zone-line change (using previous offsets)\n");
+#endif
+	g_array_remove_index (changes, start_index);
+	vzictime_start = NULL;
+      }
+    }
+
+
+    if (vzictime_start) {
+      vzictime_start->tzname = expand_tzname (zone_name, zone_line->format,
+					      found_letter_s,
+					      start_letter_s, is_daylight);
+    }
+
+    /* The start of the next Zone line is the end time of this one. */
+    start = end;
+  }
+
+  set_previous_offsets (changes);
+
+  output_zone_components (fp, zone_name, changes);
+
+  if (VzicDumpChanges)
+    dump_changes (changes_fp, zone_name, changes);
+
+  /* Free all the TZNAME fields. */
+  for (i = 0; i < changes->len; i++) {
+    vzictime = &g_array_index (changes, VzicTime, i);
+    g_free (vzictime->tzname);
+  }
+
+  g_array_free (changes, TRUE);
+}
+
+
+/* This appends any timezone changes specified by the rules associated with
+   the timezone, that happen between the start and end times.
+   It returns the letter_s field of the first STANDARD rule found in the
+   search. We need this to fill in any %s in the FORMAT field of the first
+   component of the time period (the Zone line). */
+static gboolean
+add_rule_changes			(ZoneLineData	*zone_line,
+					 char		*zone_name,
+					 GArray		*changes,
+					 GHashTable	*rule_data,
+					 VzicTime	*start,
+					 VzicTime	*end,
+					 char	       **start_letter_s,
+					 int		*save_seconds)
+{
+  GArray *rule_array;
+  RuleData *rule, *prev_rule = NULL;
+  int stdoff, walloff, i, prev_stdoff, prev_walloff;
+  VzicTime vzictime;
+  gboolean is_daylight, found_start_letter_s = FALSE;
+  gboolean checked_for_previous = FALSE;
+
+  *save_seconds = 0;
+
+  rule_array = g_hash_table_lookup (rule_data, zone_line->rules);
+  if (!rule_array) {
+    fprintf (stderr, "Couldn't access rules: %s\n", zone_line->rules);
+    exit (1);
+  }
+
+  /* The stdoff is the same for all the rules. */
+  stdoff = start->stdoff;
+
+  /* The walloff changes as we go through the rules. */
+  walloff = start->walloff;
+
+  /* Get the stdoff & walloff from the last change before this period. */
+  if (changes->len >= 2) {
+    VzicTime *change = &g_array_index (changes, VzicTime, changes->len - 2);
+    prev_stdoff = change->stdoff;
+    prev_walloff = change->walloff;
+  } else {
+    prev_stdoff = prev_walloff = 0;
+  }
+
+
+  for (i = 0; i < rule_array->len; i++) {
+    rule = &g_array_index (rule_array, RuleData, i);
+
+    is_daylight = rule->save_seconds != 0 ? TRUE : FALSE;
+
+    vzictime_init (&vzictime);
+    vzictime.year = rule->from_year;
+    vzictime.month = rule->in_month;
+    vzictime.day_code = rule->on_day_code;
+    vzictime.day_number = rule->on_day_number;
+    vzictime.day_weekday = rule->on_day_weekday;
+    vzictime.time_seconds = rule->at_time_seconds;
+    vzictime.time_code = rule->at_time_code;
+    vzictime.stdoff = stdoff;
+    vzictime.walloff = stdoff + rule->save_seconds;
+    vzictime.is_infinite = (rule->to_year == YEAR_MAXIMUM) ? TRUE : FALSE;
+
+    /* If the rule time is before the given start time, skip it. */
+    if (compare_times (&vzictime, stdoff, walloff,
+		       start, prev_stdoff, prev_walloff) < 0)
+      continue;
+
+    /* If the previous Rule was a daylight Rule, then we may want to use the
+       walloff from that. */
+    if (!checked_for_previous) {
+      checked_for_previous = TRUE;
+      if (i > 0) {
+	prev_rule = &g_array_index (rule_array, RuleData, i - 1);
+	if (prev_rule->save_seconds) {
+	  walloff = start->walloff = stdoff + prev_rule->save_seconds;
+	  *save_seconds = prev_rule->save_seconds;
+	  found_start_letter_s = TRUE;
+	  *start_letter_s = prev_rule->letter_s;
+#if 0
+	  printf ("Could use save_seconds from previous Rule: %s\n",
+		  zone_name);
+#endif
+	}
+      }
+    }
+
+    /* If an end time has been given, then if the rule time is on or after it
+       break out of the loop. */
+    if (end->year != YEAR_MAXIMUM
+	&& compare_times (&vzictime, stdoff, walloff,
+			  end, stdoff, walloff) >= 0)
+      break;
+
+    vzictime.tzname = expand_tzname (zone_name, zone_line->format, TRUE,
+				     rule->letter_s, is_daylight);
+
+    g_array_append_val (changes, vzictime);
+
+    /* When we find the first STANDARD time we set letter_s. */
+    if (!found_start_letter_s && !is_daylight) {
+      found_start_letter_s = TRUE;
+      *start_letter_s = rule->letter_s;
+    }
+
+    /* Now that we have added the Rule, the new walloff comes into effect
+       for any following Rules. */
+    walloff = vzictime.walloff;
+  }
+
+  return found_start_letter_s;
+}
+
+
+/* This expands the Zone line FORMAT field, using the given LETTER_S from a
+   Rule line. There are 3 types of FORMAT field:
+   1. a string with an %s in, e.g. "WE%sT". The %s is replaced with LETTER_S.
+   2. a string with an '/' in, e.g. "CAT/CAWT". The first part is used for
+      standard time and the second part for when daylight-saving is in effect.
+   3. a plain string, e.g. "LMT", which we leave as-is.
+   Note that (1) is the only type in which letter_s is required.
+*/
+static char*
+expand_tzname				(char		*zone_name,
+					 char		*format,
+					 gboolean	 have_letter_s,
+					 char		*letter_s,
+					 gboolean	 is_daylight)
+{
+  char *p, buffer[256], *guess = NULL;
+  int len;
+
+#if 0
+  printf ("Expanding %s with %s\n", format, letter_s);
+#endif
+
+  if (!format || !format[0]) {
+    fprintf (stderr, "Missing FORMAT\n");
+    exit (1);
+  }
+
+  /* 1. Look for a "%s". */
+  p = strchr (format, '%');
+  if (p && *(p + 1) == 's') {
+    if (!have_letter_s) {
+
+      /* NOTE: These are a few hard-coded TZNAMEs that I've looked up myself.
+	 These are needed in a few places where a Zone line comes into effect
+	 but no Rule has been found, so we have no LETTER_S to use.
+	 I've tried to use whatever is the normal LETTER_S in the Rules for
+	 the particular zone, in local standard time. */
+      if (!strcmp (zone_name, "Asia/Macao")
+	  && !strcmp (format, "C%sT"))
+	guess = "CST";
+      else if (!strcmp (zone_name, "Asia/Macau")
+	       && !strcmp (format, "C%sT"))
+	guess = "CST";
+      else if (!strcmp (zone_name, "Asia/Ashgabat")
+	       && !strcmp (format, "ASH%sT"))
+	guess = "ASHT";
+      else if (!strcmp (zone_name, "Asia/Ashgabat")
+	       && !strcmp (format, "TM%sT"))
+	guess = "TMT";
+      else if (!strcmp (zone_name, "Asia/Samarkand")
+	       && !strcmp (format, "TAS%sT"))
+	guess = "TAST";
+      else if (!strcmp (zone_name, "Atlantic/Azores")
+	       && !strcmp (format, "WE%sT"))
+	guess = "WET";
+      else if (!strcmp (zone_name, "Europe/Paris")
+	       && !strcmp (format, "WE%sT"))
+	guess = "WET";
+      else if (!strcmp (zone_name, "Europe/Warsaw")
+	       && !strcmp (format, "CE%sT"))
+	guess = "CET";
+      else if (!strcmp (zone_name, "America/Phoenix")
+	       && !strcmp (format, "M%sT"))
+	guess = "MST";
+      else if (!strcmp (zone_name, "America/Nome")
+	       && !strcmp (format, "Y%sT"))
+	guess = "YST";
+
+      if (guess) {
+#if 0
+	fprintf (stderr,
+		 "WARNING: Couldn't find a LETTER_S to use in FORMAT: %s in Zone: %s Guessing: %s\n",
+		 format, zone_name, guess);
+#endif
+	return g_strdup (guess);
+      }
+
+#if 1
+      fprintf (stderr,
+	       "WARNING: Couldn't find a LETTER_S to use in FORMAT: %s in Zone: %s Leaving TZNAME empty\n",
+	       format, zone_name);
+#endif
+
+#if 0
+      /* This is useful to spot exactly which component had a problem. */
+      sprintf (buffer, "FIXME: %s", format);
+      return g_strdup (buffer);
+#else
+      /* We give up and don't output a TZNAME. */
+      return NULL;
+#endif
+    }
+
+    sprintf (buffer, format, letter_s ? letter_s : "");
+    return g_strdup (buffer);
+  }
+
+  /* 2. Look for a "/". */
+  p = strchr (format, '/');
+  if (p) {
+    if (is_daylight) {
+      return g_strdup (p + 1);
+    } else {
+      len = p - format;
+      strncpy (buffer, format, len);
+      buffer[len] = '\0';
+      return g_strdup (buffer);
+    }
+  }
+
+  /* 3. Just use format as it is. */
+  return g_strdup (format);
+}
+
+
+/* Compares 2 VzicTimes, returning strcmp()-like values, i.e. 0 if equal, 
+   1 if the 1st is after the 2nd and -1 if the 1st is before the 2nd. */
+static int
+compare_times				(VzicTime	*time1,
+					 int		 stdoff1,
+					 int		 walloff1,
+					 VzicTime	*time2,
+					 int		 stdoff2,
+					 int		 walloff2)
+{
+  VzicTime t1, t2;
+  int result;
+
+  t1 = *time1;
+  t2 = *time2;
+
+  calculate_actual_time (&t1, TIME_UNIVERSAL, stdoff1, walloff1);
+  calculate_actual_time (&t2, TIME_UNIVERSAL, stdoff2, walloff2);
+
+  /* Now we can compare the entire time. */
+  if (t1.year > t2.year)
+    result = 1;
+  else if (t1.year < t2.year)
+    result = -1;
+
+  else if (t1.month > t2.month)
+    result = 1;
+  else if (t1.month < t2.month)
+    result = -1;
+
+  else if (t1.day_number > t2.day_number)
+    result = 1;
+  else if (t1.day_number < t2.day_number)
+    result = -1;
+
+  else if (t1.time_seconds > t2.time_seconds)
+    result = 1;
+  else if (t1.time_seconds < t2.time_seconds)
+    result = -1;
+
+  else
+    result = 0;
+
+#if 0
+  printf ("%i/%i/%i %i <=> %i/%i/%i %i  -> %i\n",
+	  t1.day_number, t1.month + 1, t1.year, t1.time_seconds,
+	  t2.day_number, t2.month + 1, t2.year, t2.time_seconds,
+	  result);
+#endif
+
+  return result;
+}
+
+
+/* Returns TRUE if the 2 times are exactly the same. It will calculate the
+   actual day, but doesn't convert times. */
+static gboolean
+times_match				(VzicTime	*time1,
+					 int		 stdoff1,
+					 int		 walloff1,
+					 VzicTime	*time2,
+					 int		 stdoff2,
+					 int		 walloff2)
+{
+  VzicTime t1, t2;
+
+  t1 = *time1;
+  t2 = *time2;
+
+  calculate_actual_time (&t1, TIME_UNIVERSAL, stdoff1, walloff1);
+  calculate_actual_time (&t2, TIME_UNIVERSAL, stdoff2, walloff2);
+
+  if (t1.year == t2.year
+      && t1.month == t2.month
+      && t1.day_number == t2.day_number
+      && t1.time_seconds == t2.time_seconds)
+    return TRUE;
+
+  return FALSE;
+}
+
+
+static void
+output_zone_components			(FILE		*fp,
+					 char		*name,
+					 GArray		*changes)
+{
+  VzicTime *vzictime;
+  int i, start_index = 0;
+  gboolean only_one_change = FALSE;
+  char start_buffer[1024];
+
+  fprintf (fp, "BEGIN:VTIMEZONE\nTZID:%s%s\n", TZIDPrefixExpanded, name);
+
+  if (VzicUrlPrefix != NULL)
+      fprintf (fp, "TZURL:%s/%s\n", VzicUrlPrefix, name);
+
+  /* We use an 'X-' property to place the city name in. */
+  fprintf (fp, "X-LIC-LOCATION:%s\n", name);
+
+  /* We try to find any recurring components first, or they may get output
+     as lots of RDATES instead. */
+  if (!VzicNoRRules) {
+    int num_rrules_output = 0;
+
+    for (i = 1; i < changes->len; i++) {
+      if (check_for_recurrence (fp, changes, i)) {
+	num_rrules_output++;
+      }
+    }
+
+#if 0
+    printf ("Zone: %s had %i infinite RRULEs\n", CurrentZoneName,
+	    num_rrules_output);
+#endif
+
+    if (!VzicPureOutput && num_rrules_output == 2) {
+#if 0
+      printf ("Zone: %s using 2 RRULEs\n", CurrentZoneName);
+#endif
+      fprintf (fp, "END:VTIMEZONE\n");
+      return;
+    }
+  }
+
+  /* We skip the first change, which starts at -infinity, unless it is the only
+     change for the timezone. */
+  if (changes->len > 1)
+    start_index = 1;
+  else
+    only_one_change = TRUE;
+
+  /* For pure output, we start at the start of the array and step through it
+     outputting RDATEs. For Outlook-compatible output we start at the end
+     and step backwards to find the first STANDARD time to output. */
+  if (VzicPureOutput)
+    i = start_index - 1;
+  else
+    i = changes->len;
+
+  for (;;) {
+    if (VzicPureOutput)
+      i++;
+    else
+      i--;
+
+    if (VzicPureOutput) {
+      if (i >= changes->len)
+	break;
+    } else {
+      if (i < start_index)
+	break;
+    }
+
+    vzictime = &g_array_index (changes, VzicTime, i);
+
+    /* If we have already output this component as part of an RRULE or RDATE,
+       then we skip it. */
+    if (vzictime->output)
+      continue;
+
+    /* For Outlook-compatible output we only want to output the last STANDARD
+       time as a DTSTART, so skip any DAYLIGHT changes. */
+    if (!VzicPureOutput && vzictime->stdoff != vzictime->walloff) {
+      printf ("Skipping DAYLIGHT change\n");
+      continue;
+    }
+
+#if 0
+    printf ("Zone: %s using DTSTART Year: %i\n", CurrentZoneName,
+	    vzictime->year);
+#endif
+
+    if (VzicPureOutput) {
+      output_component_start (start_buffer, vzictime, TRUE, only_one_change);
+    } else {
+    /* For Outlook compatability we don't output the RDATE and use the same
+       TZOFFSET for TZOFFSETFROM and TZOFFSETTO. */
+      vzictime->year         = RDATE_YEAR;
+      vzictime->month        = 0;
+      vzictime->day_code     = DAY_SIMPLE;
+      vzictime->day_number   = 1;
+      vzictime->time_code    = TIME_WALL;
+      vzictime->time_seconds = 0;
+
+      output_component_start (start_buffer, vzictime, FALSE, TRUE);
+    }
+
+    fprintf (fp, "%s", start_buffer);
+
+    /* This will look for matching components and output them as RDATEs
+       instead of separate components. */
+    if (VzicPureOutput && !VzicNoRDates)
+      check_for_rdates (fp, changes, i);
+
+    output_component_end (fp, vzictime);
+
+    vzictime->output = TRUE;
+
+    if (!VzicPureOutput)
+      break;
+  }
+
+  fprintf (fp, "END:VTIMEZONE\n");
+}
+
+
+/* This sets the prev_stdoff and prev_walloff (i.e. the TZOFFSETFROM) of each
+   VzicTime, using the stdoff and walloff of the previous VzicTime. It makes
+   the rest of the code much simpler. */
+static void
+set_previous_offsets		(GArray		*changes)
+{
+  VzicTime *vzictime, *prev_vzictime;
+  int i;
+
+  prev_vzictime = &g_array_index (changes, VzicTime, 0);
+  prev_vzictime->prev_stdoff = 0;
+  prev_vzictime->prev_walloff = 0;
+
+  for (i = 1; i < changes->len; i++) {
+    vzictime = &g_array_index (changes, VzicTime, i);
+
+    vzictime->prev_stdoff = prev_vzictime->stdoff;
+    vzictime->prev_walloff = prev_vzictime->walloff;
+
+    prev_vzictime = vzictime;
+  }
+}
+
+
+/* Returns TRUE if we output an infinite recurrence. */
+static gboolean
+check_for_recurrence		(FILE		*fp,
+				 GArray		*changes,
+				 int		 idx)
+{
+  VzicTime *vzictime_start, *vzictime, vzictime_start_copy;
+  gboolean is_daylight_start, is_daylight;
+  int last_match, i, next_year, day_offset;
+  char until[256], rrule_buffer[2048], start_buffer[1024];
+  GList *matching_elements = NULL, *elem;
+
+  vzictime_start = &g_array_index (changes, VzicTime, idx);
+
+  /* If this change has already been output, skip it. */
+  if (vzictime_start->output)
+    return FALSE;
+
+  /* There can't possibly be an RRULE starting from YEAR_MINIMUM. */
+  if (vzictime_start->year == YEAR_MINIMUM)
+    return FALSE;
+
+  is_daylight_start = (vzictime_start->stdoff != vzictime_start->walloff)
+    ? TRUE : FALSE;
+
+#if 0
+  printf ("\nChecking: %s OFFSETFROM: %i %s\n",
+	  format_vzictime (vzictime_start), vzictime_start->prev_walloff,
+	  is_daylight_start ? "DAYLIGHT" : "");
+#endif
+
+  /* If this is an infinitely recurring change, output the RRULE and return.
+     There won't be any changes after it that we could merge. */
+  if (vzictime_start->is_infinite) {
+
+    /* Change the year to our minimum start year. */
+    vzictime_start_copy = *vzictime_start;
+    if (!VzicPureOutput)
+      vzictime_start_copy.year = RRULE_START_YEAR;
+
+    day_offset = output_component_start (start_buffer, &vzictime_start_copy,
+					 FALSE, FALSE);
+
+    if (!output_rrule (rrule_buffer, vzictime_start_copy.month,
+		       vzictime_start_copy.day_code,
+		       vzictime_start_copy.day_number,
+		       vzictime_start_copy.day_weekday, day_offset, "")) {
+      if (vzictime_start->year != MAX_TIME_T_YEAR) {
+	fprintf (stderr, "WARNING: Failed to output infinite recurrence with start year: %i\n", vzictime_start->year);
+      }
+      return TRUE;
+    }
+
+    fprintf (fp, "%s%s", start_buffer, rrule_buffer);
+    output_component_end (fp, vzictime_start);
+    vzictime_start->output = TRUE;
+    return TRUE;
+  }
+
+  last_match = idx;
+  next_year = vzictime_start->year + 1;
+  for (i = idx + 1; i < changes->len; i++) {
+    vzictime = &g_array_index (changes, VzicTime, i);
+
+    is_daylight = (vzictime->stdoff != vzictime->walloff) ? TRUE : FALSE;
+
+    if (vzictime->output)
+      continue;
+
+#if 0
+    printf ("          %s OFFSETFROM: %i %s\n",
+	    format_vzictime (vzictime), vzictime->prev_walloff,
+	    is_daylight ? "DAYLIGHT" : "");
+#endif
+
+    /* If it is more than one year ahead, we are finished, since we want
+       consecutive years. */
+    if (vzictime->year > next_year) {
+      break;
+    }
+
+    /* It must be the same type of component - STANDARD or DAYLIGHT. */
+    if (is_daylight != is_daylight_start) {
+      continue;
+    }
+
+    /* It must be the following year, with the same month, day & time.
+       It is possible that the time has a different code but does in fact
+       match when normalized, but we don't care (for now at least). */
+    if (vzictime->year != next_year
+	|| vzictime->month != vzictime_start->month
+	|| vzictime->day_code != vzictime_start->day_code
+	|| vzictime->day_number != vzictime_start->day_number
+	|| vzictime->day_weekday != vzictime_start->day_weekday
+	|| vzictime->time_seconds != vzictime_start->time_seconds
+	|| vzictime->time_code != vzictime_start->time_code) {
+      continue;
+    }
+
+    /* The TZOFFSETFROM and TZOFFSETTO must match. */
+    if (vzictime->prev_walloff != vzictime_start->prev_walloff) {
+      continue;
+    }
+
+    if (vzictime->walloff != vzictime_start->walloff) {
+      continue;
+    }
+
+    /* TZNAME must match. */
+    if (!timezones_match (vzictime->tzname, vzictime_start->tzname)) {
+      continue;
+    }
+
+    /* We have a match. */
+    last_match = i;
+    next_year = vzictime->year + 1;
+
+    matching_elements = g_list_prepend (matching_elements, vzictime);
+  }
+
+  if (last_match == idx)
+    return FALSE;
+
+#if 0
+  printf ("Found recurrence %i - %i!!!\n", vzictime_start->year,
+	  next_year - 1);
+#endif
+
+  vzictime = &g_array_index (changes, VzicTime, last_match);
+
+/* We only use RRULEs if there are at least MIN_RRULE_OCCURRENCES occurrences,
+   since otherwise RDATEs are more efficient. */
+  if (!vzictime->is_infinite) {
+    int years = vzictime->year - vzictime_start->year + 1;
+#if 0
+    printf ("RRULE Years: %i\n", years);
+#endif
+    if (years < MIN_RRULE_OCCURRENCES)
+      return FALSE;
+  }
+
+  if (vzictime->is_infinite) {
+    until[0] = '\0';
+  } else {
+    VzicTime t1 = *vzictime;
+
+    printf ("RRULE with UNTIL - aborting\n");
+    abort ();
+
+    calculate_actual_time (&t1, TIME_UNIVERSAL, vzictime->prev_stdoff,
+			   vzictime->prev_walloff);
+
+    /* Output UNTIL, in UTC. */
+    sprintf (until, ";UNTIL=%sZ", format_time (t1.year, t1.month,
+					       t1.day_number,
+					       t1.time_seconds));
+  }
+
+  /* Change the year to our minimum start year. */
+  vzictime_start_copy = *vzictime_start;
+  if (!VzicPureOutput)
+    vzictime_start_copy.year = RRULE_START_YEAR;
+
+  day_offset = output_component_start (start_buffer, &vzictime_start_copy,
+				       FALSE, FALSE);
+  if (output_rrule (rrule_buffer, vzictime_start_copy.month,
+		    vzictime_start_copy.day_code,
+		    vzictime_start_copy.day_number,
+		    vzictime_start_copy.day_weekday, day_offset, until)) {
+    fprintf (fp, "%s%s", start_buffer, rrule_buffer);
+    output_component_end (fp, vzictime_start);
+
+    /* Mark all the changes as output. */
+    vzictime_start->output = TRUE;
+    for (elem = matching_elements; elem; elem = elem->next) {
+      vzictime = elem->data;
+      vzictime->output = TRUE;
+    }
+  }
+
+  g_list_free (matching_elements);
+
+  return TRUE;
+}
+
+
+static void
+check_for_rdates		(FILE		*fp,
+				 GArray		*changes,
+				 int		 idx)
+{
+  VzicTime *vzictime_start, *vzictime, tmp_vzictime;
+  gboolean is_daylight_start, is_daylight;
+  int i, year, month, day, time;
+
+  vzictime_start = &g_array_index (changes, VzicTime, idx);
+
+  is_daylight_start = (vzictime_start->stdoff != vzictime_start->walloff)
+    ? TRUE : FALSE;
+
+#if 0
+  printf ("\nChecking: %s OFFSETFROM: %i %s\n",
+	  format_vzictime (vzictime_start), vzictime_start->prev_walloff,
+	  is_daylight_start ? "DAYLIGHT" : "");
+#endif
+
+  /* We want to go backwards through the array now, for Outlook compatability.
+     (It only looks at the first DTSTART/RDATE.) */
+  for (i = idx + 1; i < changes->len; i++) {
+    vzictime = &g_array_index (changes, VzicTime, i);
+
+    is_daylight = (vzictime->stdoff != vzictime->walloff) ? TRUE : FALSE;
+
+    if (vzictime->output)
+      continue;
+
+#if 0
+    printf ("          %s OFFSETFROM: %i %s\n", format_vzictime (vzictime),
+	    vzictime->prev_walloff, is_daylight ? "DAYLIGHT" : "");
+#endif
+
+    /* It must be the same type of component - STANDARD or DAYLIGHT. */
+    if (is_daylight != is_daylight_start) {
+      continue;
+    }
+
+    /* The TZOFFSETFROM and TZOFFSETTO must match. */
+    if (vzictime->prev_walloff != vzictime_start->prev_walloff) {
+      continue;
+    }
+
+    if (vzictime->walloff != vzictime_start->walloff) {
+      continue;
+    }
+
+    /* TZNAME must match. */
+    if (!timezones_match (vzictime->tzname, vzictime_start->tzname)) {
+      continue;
+    }
+
+    /* We have a match. */
+    
+    tmp_vzictime = *vzictime;
+    calculate_actual_time (&tmp_vzictime, TIME_WALL, vzictime->prev_stdoff,
+			   vzictime->prev_walloff);
+
+    fprintf (fp, "RDATE:%s\n", format_time (tmp_vzictime.year,
+					    tmp_vzictime.month,
+					    tmp_vzictime.day_number,
+					    tmp_vzictime.time_seconds));
+
+    vzictime->output = TRUE;
+  }
+}
+
+
+static gboolean
+timezones_match				(char		*tzname1,
+					 char		*tzname2)
+{
+  if (tzname1 && tzname2 && !strcmp (tzname1, tzname2))
+    return TRUE;
+
+  if (!tzname1 && !tzname2)
+    return TRUE;
+
+  return FALSE;
+}
+
+
+/* Outputs the start of a VTIMEZONE component, with the BEGIN line,
+   the DTSTART, TZOFFSETFROM, TZOFFSETTO & TZNAME properties. */
+static int
+output_component_start			(char		*buffer,
+					 VzicTime	*vzictime,
+					 gboolean	 output_rdate,
+					 gboolean	 use_same_tz_offset)
+{
+  gboolean is_daylight, skip_day_offset = FALSE;
+  gint year, month, day, time, day_offset = 0;
+  GDate old_date, new_date;
+  char *formatted_time;
+  char line1[1024], line2[1024], line3[1024];
+  char line4[1024], line5[1024], line6[1024];
+  VzicTime tmp_vzictime;
+  int prev_walloff;
+
+  is_daylight = (vzictime->stdoff != vzictime->walloff) ? TRUE : FALSE;
+
+  tmp_vzictime = *vzictime;
+  day_offset = calculate_actual_time (&tmp_vzictime, TIME_WALL,
+				      vzictime->prev_stdoff,
+				      vzictime->prev_walloff);
+
+  sprintf (line1, "BEGIN:%s\n", is_daylight ? "DAYLIGHT" : "STANDARD");
+
+  /* If the timezone only has one change, that means it uses the same offset
+     forever, so we use the same TZOFFSETFROM as the TZOFFSETTO. (If the zone
+     has more than one change, we don't output the first one.) */
+  if (use_same_tz_offset)
+    prev_walloff = vzictime->walloff;
+  else
+    prev_walloff = vzictime->prev_walloff;
+
+  sprintf (line2, "TZOFFSETFROM:%s\n",
+	   format_tz_offset (prev_walloff, !VzicPureOutput));
+
+  sprintf (line3, "TZOFFSETTO:%s\n",
+	   format_tz_offset (vzictime->walloff, !VzicPureOutput));
+
+  if (vzictime->tzname)
+    sprintf (line4, "TZNAME:%s\n", vzictime->tzname);
+  else
+    line4[0] = '\0';
+
+  formatted_time = format_time (tmp_vzictime.year, tmp_vzictime.month,
+				tmp_vzictime.day_number,
+				tmp_vzictime.time_seconds);
+  sprintf (line5, "DTSTART:%s\n", formatted_time);
+  if (output_rdate)
+    sprintf (line6, "RDATE:%s\n", formatted_time);
+  else
+    line6[0] = '\0';
+
+  sprintf (buffer, "%s%s%s%s%s%s", line1, line2, line3, line4, line5, line6);
+
+  return day_offset;
+}
+
+
+/* Outputs the END line of the VTIMEZONE component. */
+static void
+output_component_end			(FILE		*fp,
+					 VzicTime	*vzictime)
+{
+  gboolean is_daylight;
+
+  is_daylight = (vzictime->stdoff != vzictime->walloff) ? TRUE : FALSE;
+
+  fprintf (fp, "END:%s\n", is_daylight ? "DAYLIGHT" : "STANDARD");
+}
+
+
+/* Initializes a VzicTime to 1st Jan in YEAR_MINIMUM at midnight, with all
+   offsets set to 0. */
+static void
+vzictime_init				(VzicTime	*vzictime)
+{
+  vzictime->year = YEAR_MINIMUM;
+  vzictime->month = 0;
+  vzictime->day_code = DAY_SIMPLE;
+  vzictime->day_number = 1;
+  vzictime->day_weekday = 0;
+  vzictime->time_seconds = 0;
+  vzictime->time_code = TIME_UNIVERSAL;
+  vzictime->stdoff = 0;
+  vzictime->walloff = 0;
+  vzictime->is_infinite = FALSE;
+  vzictime->output = FALSE;
+  vzictime->prev_stdoff = 0;
+  vzictime->prev_walloff = 0;
+  vzictime->tzname = NULL;
+}
+
+
+/* This calculates the actual local time that a change will occur, given
+   the offsets from standard and wall-clock time. It returns -1 or 1 if it
+   had to move backwards or forwards one day while converting to local time.
+   If it does this then we need to change the RRULEs we output. */
+static int
+calculate_actual_time		(VzicTime	*vzictime,
+				 TimeCode	 time_code,
+				 int		 stdoff,
+				 int		 walloff)
+{
+  GDate date;
+  gint day_offset, days_in_month, weekday, offset, result;
+
+  vzictime->time_seconds = calculate_wall_time (vzictime->time_seconds,
+						vzictime->time_code,
+						stdoff, walloff, &day_offset);
+
+  if (vzictime->day_code != DAY_SIMPLE) {
+    if (vzictime->year == YEAR_MINIMUM || vzictime->year == YEAR_MAXIMUM) {
+      fprintf (stderr, "In calculate_actual_time: invalid year\n");
+      exit (0);
+    }
+
+    g_date_clear (&date, 1);
+    days_in_month = g_date_days_in_month (vzictime->month + 1, vzictime->year);
+
+  /* Note that the day_code refers to the date before we convert it to
+     a wall-clock date and time. So we find the day it was referring to,
+     then make any adjustments needed due to converting the time. */
+    if (vzictime->day_code == DAY_LAST_WEEKDAY) {
+      /* Find out what day the last day of the month is. */
+      g_date_set_dmy (&date, days_in_month, vzictime->month + 1,
+		      vzictime->year);
+      weekday = g_date_weekday (&date) % 7;
+
+      /* Calculate how many days we have to go back to get to day_weekday. */
+      offset = (weekday + 7 - vzictime->day_weekday) % 7;
+
+      vzictime->day_number = days_in_month - offset;
+    } else {
+      /* Find out what day day_number actually is. */
+      g_date_set_dmy (&date, vzictime->day_number, vzictime->month + 1,
+		      vzictime->year);
+      weekday = g_date_weekday (&date) % 7;
+
+      if (vzictime->day_code == DAY_WEEKDAY_ON_OR_AFTER)
+	offset = (vzictime->day_weekday + 7 - weekday) % 7;
+      else
+	offset = - ((weekday + 7 - vzictime->day_weekday) % 7);
+
+      vzictime->day_number = vzictime->day_number + offset;
+    }
+
+    vzictime->day_code = DAY_SIMPLE;
+
+    if (vzictime->day_number <= 0 || vzictime->day_number > days_in_month) {
+      fprintf (stderr, "Day overflow: %i\n", vzictime->day_number);
+      exit (1);
+    }
+  }
+
+#if 0
+  fprintf (stderr, "%s -> %i/%i/%i\n",
+	   dump_day_coded (vzictime->day_code, vzictime->day_number,
+			   vzictime->day_weekday),
+	   vzictime->day_number, vzictime->month + 1, vzictime->year);
+#endif
+
+  fix_time_overflow (&vzictime->year, &vzictime->month,
+		     &vzictime->day_number, day_offset);
+
+  /* If we want UTC time, we have to convert it now. */
+  if (time_code == TIME_UNIVERSAL) {
+    vzictime->time_seconds = calculate_until_time (vzictime->time_seconds,
+						   TIME_WALL, stdoff, walloff,
+						   &vzictime->year,
+						   &vzictime->month,
+						   &vzictime->day_number);
+  }
+
+  return day_offset;
+}
+
+
+/* This converts the given time into universal time (UTC), to be used in
+   the UNTIL property. */
+static int
+calculate_until_time			(int		 time,
+					 TimeCode	 time_code,
+					 int		 stdoff,
+					 int		 walloff,
+					 int		*year,
+					 int		*month,
+					 int		*day)
+{
+  int result, day_offset;
+
+  day_offset = 0;
+
+  switch (time_code) {
+  case TIME_WALL:
+    result = time - walloff;
+    break;
+  case TIME_STANDARD:
+    result = time - stdoff;
+    break;
+  case TIME_UNIVERSAL:
+    return time;
+  default:
+    fprintf (stderr, "Invalid time code\n");
+    exit (1);
+  }
+
+  if (result < 0) {
+    result += 24 * 60 * 60;
+    day_offset = -1;
+  } else if (result >= 24 * 60 * 60) {
+    result -= 24 * 60 * 60;
+    day_offset = 1;
+  }
+
+  /* Sanity check - we shouldn't have an overflow any more. */
+  if (result < 0 || result >= 24 * 60 * 60) {
+    fprintf (stderr, "Time overflow: %i\n", result);
+    abort ();
+  }
+
+  fix_time_overflow (year, month, day, day_offset);
+
+  return result;
+}
+
+
+/* This converts the given time into wall clock time (the local standard time
+   with any adjustment for daylight-saving). */
+static int
+calculate_wall_time			(int		 time,
+					 TimeCode	 time_code,
+					 int		 stdoff,
+					 int		 walloff,
+					 int		*day_offset)
+{
+  int result;
+
+  *day_offset = 0;
+
+  switch (time_code) {
+  case TIME_WALL:
+    return time;
+  case TIME_STANDARD:
+    /* We have a local standard time, so we have to subtract stdoff to get
+       back to UTC, then add walloff to get wall time. */
+    result = time - stdoff + walloff;
+    break;
+  case TIME_UNIVERSAL:
+    result = time + walloff;
+    break;
+  default:
+    fprintf (stderr, "Invalid time code\n");
+    exit (1);
+  }
+
+  if (result < 0) {
+    result += 24 * 60 * 60;
+    *day_offset = -1;
+  } else if (result >= 24 * 60 * 60) {
+    result -= 24 * 60 * 60;
+    *day_offset = 1;
+  }
+
+  /* Sanity check - we shouldn't have an overflow any more. */
+  if (result < 0 || result >= 24 * 60 * 60) {
+    fprintf (stderr, "Time overflow: %i\n", result);
+    exit (1);
+  }
+
+#if 0
+  printf ("%s -> ", dump_time (time, time_code, TRUE));
+  printf ("%s (%i)\n", dump_time (result, TIME_WALL, TRUE), *day_offset);
+#endif
+
+  return result;
+}
+
+
+static void
+fix_time_overflow			(int		*year,
+					 int		*month,
+					 int		*day,
+					 int		 day_offset)
+{
+  if (day_offset == -1) {
+    *day = *day - 1;
+
+    if (*day == 0) {
+      *month = *month - 1;
+      if (*month == -1) {
+	*month = 11;
+	*year = *year - 1;
+      }
+      *day = g_date_days_in_month (*month + 1, *year);
+    }
+  } else if (day_offset == 1) {
+    *day = *day + 1;
+
+    if (*day > g_date_days_in_month (*month + 1, *year)) {
+      *month = *month + 1;
+      if (*month == 12) {
+	*month = 0;
+	*year = *year + 1;
+      }
+      *day = 1;
+    }
+  }
+}
+
+
+static char*
+format_time				(int		 year,
+					 int		 month,
+					 int		 day,
+					 int		 time)
+{
+  static char buffer[128];
+  int hour, minute, second;
+
+  /* When we are outputting the first component year will be YEAR_MINIMUM.
+     We used to use 1 when outputting this, but Outlook doesn't like any years
+     less that 1600, so we use 1600 instead. We don't output the first change
+     for most zones now, so it doesn't matter too much. */
+  if (year == YEAR_MINIMUM)
+    year = 1601;
+
+  /* We just use 9999 here, so we keep to 4 characters. But this should only
+     be needed when debugging - it shouldn't be needed in the VTIMEZONEs. */
+  if (year == YEAR_MAXIMUM) {
+    fprintf (stderr, "format_time: YEAR_MAXIMUM used\n");
+    year = 9999;
+  }
+
+  hour = time / 3600;
+  minute = (time % 3600) / 60;
+  second = time % 60;
+
+  sprintf (buffer, "%04i%02i%02iT%02i%02i%02i",
+	   year, month + 1, day, hour, minute, second);
+
+  return buffer;
+}
+
+
+/* Outlook doesn't support 6-digit values, i.e. including the seconds, so
+   we round to the nearest minute. No current offsets use the seconds value,
+   so we aren't losing much. */
+static char*
+format_tz_offset			(int		 tz_offset,
+					 gboolean	 round_seconds)
+{
+  static char buffer[128];
+  char *sign = "+";
+  int hours, minutes, seconds;
+
+  if (tz_offset < 0) {
+    tz_offset = -tz_offset;
+    sign = "-";
+  }
+
+  if (round_seconds)
+    tz_offset += 30;
+
+  hours = tz_offset / 3600;
+  minutes = (tz_offset % 3600) / 60;
+  seconds = tz_offset % 60;
+
+  if (round_seconds)
+    seconds = 0;
+
+  /* Sanity check. Standard timezone offsets shouldn't be much more than 12
+     hours, and daylight saving shouldn't change it by more than a few hours.
+     (The maximum offset is 15 hours 56 minutes at present.) */
+  if (hours < 0 || hours >= 24 || minutes < 0 || minutes >= 60
+      || seconds < 0 || seconds >= 60) {
+    fprintf (stderr, "WARNING: Strange timezone offset: H:%i M:%i S:%i\n",
+	     hours, minutes, seconds);
+  }
+
+  if (seconds == 0)
+    sprintf (buffer, "%s%02i%02i", sign, hours, minutes);
+  else
+    sprintf (buffer, "%s%02i%02i%02i", sign, hours, minutes, seconds);
+
+  return buffer;
+}
+
+
+static gboolean
+output_rrule				(char	        *rrule_buffer,
+					 int		 month,
+					 DayCode	 day_code,
+					 int		 day_number,
+					 int		 day_weekday,
+					 int		 day_offset,
+					 char		*until)
+{
+  char buffer[1024], buffer2[1024];
+
+  buffer[0] = '\0';
+
+  if (day_offset > 1 || day_offset < -1) {
+    fprintf (stderr, "Invalid day_offset: %i\n", day_offset);
+      exit (0);
+  }
+
+  /* If the DTSTART time was moved to another day when converting to local
+     time, we need to adjust the RRULE accordingly. e.g. If the original RRULE
+     was on the 19th of the month, but DTSTART was moved 1 day forward, then
+     we output the 20th of the month instead. */
+  if (day_offset == 1) {
+    if (day_code != DAY_LAST_WEEKDAY)
+      day_number++;
+    day_weekday = (day_weekday + 1) % 7;
+
+    /* Check we don't use February 29th. */
+    if (month == 1 && day_number > 28) {
+      fprintf (stderr, "Can't format RRULE - out of bounds. Month: %i Day number: %i\n", month + 1, day_number);
+      exit (0);
+    }
+
+    /* If we go past the end of the month, move to the next month. */
+    if (day_code != DAY_LAST_WEEKDAY && day_number > DaysInMonth[month]) {
+      month++;
+      day_number = 1;
+    }
+
+  } else if (day_offset == -1) {
+    if (day_code != DAY_LAST_WEEKDAY)
+      day_number--;
+    day_weekday = (day_weekday + 6) % 7;
+
+    if (day_code != DAY_LAST_WEEKDAY && day_number < 1)
+      fprintf (stderr, "Month: %i Day number: %i\n", month + 1, day_number);
+  }
+
+  switch (day_code) {
+  case DAY_SIMPLE:
+    /* Outlook (2000) will not parse the simple YEARLY RRULEs in VTIMEZONEs,
+       or BYMONTHDAY, or BYYEARDAY, which makes this option difficult!
+       Currently we use something like BYDAY=1SU, which will be incorrect
+       at times. This only affects Asia/Baghdad, Asia/Gaza, Asia/Jerusalem &
+       Asia/Damascus at present (and Jerusalem doesn't have specific rules
+       at the moment anyway, so that isn't a big loss). */
+    if (!VzicPureOutput) {
+      if (day_number < 8) {
+	printf ("WARNING: %s: Outputting BYDAY=1SU instead of BYMONTHDAY=1-7 for Outlook compatability\n", CurrentZoneName);
+	sprintf (buffer, "RRULE:FREQ=YEARLY;BYMONTH=%i;BYDAY=1SU",
+		 month + 1);
+      } else if (day_number < 15) {
+	printf ("WARNING: %s: Outputting BYDAY=2SU instead of BYMONTHDAY=8-14 for Outlook compatability\n", CurrentZoneName);
+	sprintf (buffer, "RRULE:FREQ=YEARLY;BYMONTH=%i;BYDAY=2SU",
+		 month + 1);
+      } else if (day_number < 22) {
+	printf ("WARNING: %s: Outputting BYDAY=3SU instead of BYMONTHDAY=15-21 for Outlook compatability\n", CurrentZoneName);
+	sprintf (buffer, "RRULE:FREQ=YEARLY;BYMONTH=%i;BYDAY=3SU",
+		 month + 1);
+      } else {
+	printf ("ERROR: %s: Couldn't output RRULE (day=%i) compatible with Outlook\n", CurrentZoneName, day_number);
+	exit (1);
+      }
+    } else {
+	sprintf (buffer, "RRULE:FREQ=YEARLY");
+    }
+    break;
+
+  case DAY_WEEKDAY_ON_OR_AFTER:
+    if (day_number > DaysInMonth[month] - 6) {
+      /* This isn't actually needed at present. */
+#if 0
+      fprintf (stderr, "DAY_WEEKDAY_ON_OR_AFTER: %i %i\n", day_number,
+	       month + 1);
+#endif
+
+      if (!VzicPureOutput) {
+	printf ("ERROR: %s: Couldn't output RRULE (day>=x) compatible with Outlook\n", CurrentZoneName);
+	exit (1);
+      } else {
+	/* We do 6 days at the end of this month, and 1 at the start of the
+	   next. We can't do this if we want Outlook compatability, as it
+	   needs BYMONTHDAY, which Outlook doesn't support. */
+	sprintf (buffer,
+		 "RRULE:FREQ=YEARLY;BYMONTH=%i;BYMONTHDAY=%i,%i,%i,%i,%i,%i;BYDAY=%s",
+		 month + 1,
+		 day_number, day_number + 1, day_number + 2, day_number + 3,
+		 day_number + 4, day_number + 5,
+		 WeekDays[day_weekday]);
+
+	sprintf (buffer2,
+		 "RRULE:FREQ=YEARLY;BYMONTH=%i;BYMONTHDAY=1;BYDAY=%s",
+		 (month + 1) % 12 + 1,
+		 WeekDays[day_weekday]);
+
+	sprintf (rrule_buffer, "%s%s\n%s%s\n",
+		 buffer, until, buffer2, until);
+
+	return TRUE;
+      }
+    }
+
+    if (!output_rrule_2 (buffer, month, day_number, day_weekday))
+      return FALSE;
+
+    break;
+
+  case DAY_WEEKDAY_ON_OR_BEFORE:
+    if (day_number < 7) {
+      /* FIXME: This is unimplemented, but it isn't needed at present anway. */
+      fprintf (stderr, "DAY_WEEKDAY_ON_OR_BEFORE: %i. Unimplemented. Exiting...\n", day_number);
+      exit (0);
+    }
+
+    if (!output_rrule_2 (buffer, month, day_number - 6, day_weekday))
+      return FALSE;
+
+    break;
+
+  case DAY_LAST_WEEKDAY:
+    if (day_offset == 1) {
+      if (month == 1) {
+	fprintf (stderr, "DAY_LAST_WEEKDAY - day moved, in February - can't fix\n");
+	exit (0);
+      }
+
+      /* This is only used once at present, for Africa/Cairo. */
+#if 0
+      fprintf (stderr, "DAY_LAST_WEEKDAY - day moved\n");
+#endif
+
+      if (!VzicPureOutput) {
+	printf ("WARNING: %s: Modifying RRULE (last weekday) for Outlook compatability\n", CurrentZoneName);
+	sprintf (buffer,
+		 "RRULE:FREQ=YEARLY;BYMONTH=%i;BYDAY=-1%s",
+		 month + 1, WeekDays[day_weekday]);
+	printf ("  Outputting: %s\n", buffer);
+      } else {
+	/* We do 6 days at the end of this month, and 1 at the start of the
+	   next. We can't do this if we want Outlook compatability, as it needs
+	   BYMONTHDAY, which Outlook doesn't support. */
+	day_number = DaysInMonth[month];
+	sprintf (buffer,
+		 "RRULE:FREQ=YEARLY;BYMONTH=%i;BYMONTHDAY=%i,%i,%i,%i,%i,%i;BYDAY=%s",
+		 month + 1,
+		 day_number - 5, day_number - 4, day_number - 3,
+		 day_number - 2, day_number - 1, day_number,
+		 WeekDays[day_weekday]);
+
+	sprintf (buffer2,
+		 "RRULE:FREQ=YEARLY;BYMONTH=%i;BYMONTHDAY=1;BYDAY=%s",
+		 (month + 1) % 12 + 1,
+		 WeekDays[day_weekday]);
+
+	sprintf (rrule_buffer, "%s%s\n%s%s\n",
+		 buffer, until, buffer2, until);
+
+	return TRUE;
+      }
+
+    } else if (day_offset == -1) {
+      /* We do 7 days 1 day before the end of this month. */
+      day_number = DaysInMonth[month];
+
+      if (!output_rrule_2 (buffer, month, day_number - 7, day_weekday))
+	return FALSE;
+
+      sprintf (rrule_buffer, "%s%s\n", buffer, until);
+      return TRUE;
+    }
+
+    sprintf (buffer,
+	     "RRULE:FREQ=YEARLY;BYMONTH=%i;BYDAY=-1%s",
+	     month + 1, WeekDays[day_weekday]);
+    break;
+
+  default:
+    fprintf (stderr, "Invalid day code\n");
+    exit (1);
+  }
+
+  sprintf (rrule_buffer, "%s%s\n", buffer, until);
+  return TRUE;
+}
+
+
+/* This tries to convert a RRULE like 'BYMONTHDAY=8,9,10,11,12,13,14;BYDAY=FR'
+   into 'BYDAY=2FR'. We need this since Outlook doesn't accept BYMONTHDAY.
+   It returns FALSE if conversion is not possible. */
+static gboolean
+output_rrule_2				(char		*buffer,
+					 int		 month,
+					 int		 day_number,
+					 int		 day_weekday)
+{
+
+  if (day_number == 1) {
+    /* Convert it to a BYDAY=1SU type of RRULE. */
+    sprintf (buffer, "RRULE:FREQ=YEARLY;BYMONTH=%i;BYDAY=1%s",
+	     month + 1, WeekDays[day_weekday]);
+
+  } else if (day_number == 8) {
+    /* Convert it to a BYDAY=2SU type of RRULE. */
+    sprintf (buffer, "RRULE:FREQ=YEARLY;BYMONTH=%i;BYDAY=2%s",
+	     month + 1, WeekDays[day_weekday]);
+
+  } else if (day_number == 15) {
+    /* Convert it to a BYDAY=3SU type of RRULE. */
+    sprintf (buffer, "RRULE:FREQ=YEARLY;BYMONTH=%i;BYDAY=3%s",
+	     month + 1, WeekDays[day_weekday]);
+
+  } else if (day_number == 22) {
+    /* Convert it to a BYDAY=4SU type of RRULE. (Currently not used.) */
+    sprintf (buffer, "RRULE:FREQ=YEARLY;BYMONTH=%i;BYDAY=4%s",
+	     month + 1, WeekDays[day_weekday]);
+
+  } else if (month != 1 && day_number == DaysInMonth[month] - 6) {
+    /* Convert it to a BYDAY=-1SU type of RRULE. (But never for February.) */
+    sprintf (buffer, "RRULE:FREQ=YEARLY;BYMONTH=%i;BYDAY=-1%s",
+	     month + 1, WeekDays[day_weekday]);
+
+  } else {
+    /* Can't convert to a correct RRULE. If we want Outlook compatability we
+       have to use a slightly incorrect RRULE, so the time change will be 1
+       week out every 7 or so years. Alternatively we could possibly move the
+       change by an hour or so so we would always be 1 or 2 hours out, but
+       never 1 week out. Yes, that sounds a better idea. */
+    if (!VzicPureOutput) {
+      printf ("WARNING: %s: Modifying RRULE to be compatible with Outlook (day >= %i, month = %i)\n", CurrentZoneName, day_number, month + 1);
+
+      if (day_number == 2) {
+	/* Convert it to a BYDAY=1SU type of RRULE.
+	   This is needed for Asia/Karachi. */
+	sprintf (buffer, "RRULE:FREQ=YEARLY;BYMONTH=%i;BYDAY=1%s",
+		 month + 1, WeekDays[day_weekday]);
+      } else if (day_number == 9) {
+	/* Convert it to a BYDAY=2SU type of RRULE.
+	   This is needed for Antarctica/Palmer & America/Santiago. */
+	sprintf (buffer, "RRULE:FREQ=YEARLY;BYMONTH=%i;BYDAY=2%s",
+		 month + 1, WeekDays[day_weekday]);
+      } else if (month != 1 && day_number == DaysInMonth[month] - 7) {
+	/* Convert it to a BYDAY=-1SU type of RRULE. (But never for February.)
+	   This is needed for America/Godthab. */
+	sprintf (buffer, "RRULE:FREQ=YEARLY;BYMONTH=%i;BYDAY=-1%s",
+		 month + 1, WeekDays[day_weekday]);
+      } else {
+	printf ("ERROR: %s: Couldn't modify RRULE to be compatible with Outlook (day >= %i, month = %i)\n", CurrentZoneName, day_number, month + 1);
+	exit (1);
+      }
+
+    } else {
+      sprintf (buffer,
+	       "RRULE:FREQ=YEARLY;BYMONTH=%i;BYMONTHDAY=%i,%i,%i,%i,%i,%i,%i;BYDAY=%s",
+	       month + 1,
+	       day_number, day_number + 1, day_number + 2, day_number + 3,
+	       day_number + 4, day_number + 5, day_number + 6,
+	       WeekDays[day_weekday]);
+    }
+  }
+
+  return TRUE;
+}
+
+
+static char*
+format_vzictime				(VzicTime	*vzictime)
+{
+  static char buffer[1024];
+
+  sprintf (buffer, "%s %2i %s %s %i %i %s",
+	   dump_year (vzictime->year), vzictime->month + 1,
+	   dump_day_coded (vzictime->day_code, vzictime->day_number,
+			   vzictime->day_weekday),
+	   dump_time (vzictime->time_seconds, vzictime->time_code, TRUE),
+	   vzictime->stdoff, vzictime->walloff,
+	   vzictime->is_infinite ? "INFINITE" : "");
+
+  return buffer;
+}
+
+
+static void
+dump_changes				(FILE		*fp,
+					 char		*zone_name,
+					 GArray		*changes)
+{
+  VzicTime *vzictime, *vzictime2 = NULL;
+  int i, year_offset, year;
+
+  for (i = 0; i < changes->len; i++) {
+    vzictime = &g_array_index (changes, VzicTime, i);
+
+    if (vzictime->year > MAX_CHANGES_YEAR)
+      return;
+
+    dump_change (fp, zone_name, vzictime, vzictime->year);
+  }
+
+  if (changes->len < 2)
+    return;
+
+  /* Now see if the changes array ends with a pair of recurring changes. */
+  vzictime = &g_array_index (changes, VzicTime, changes->len - 2);
+  vzictime2 = &g_array_index (changes, VzicTime, changes->len - 1);
+  if (!vzictime->is_infinite || !vzictime2->is_infinite)
+    return;
+
+  year_offset = 1;
+  for (;;) {
+    year = vzictime->year + year_offset;
+    if (year > MAX_CHANGES_YEAR)
+      break;
+    dump_change (fp, zone_name, vzictime, year);
+
+    year = vzictime2->year + year_offset;
+    if (year > MAX_CHANGES_YEAR)
+      break;
+    dump_change (fp, zone_name, vzictime2, year);
+
+    year_offset++;
+  }
+}
+
+
+static void
+dump_change				(FILE		*fp,
+					 char		*zone_name,
+					 VzicTime	*vzictime,
+					 int		 year)
+{
+  int hour, minute, second;
+  VzicTime tmp_vzictime;
+  static char *months[] = { "Jan", "Feb", "Mar", "Apr", "May", "Jun",
+			    "Jul", "Aug", "Sep", "Oct", "Nov", "Dec" };
+
+  /* Output format is:
+
+	Zone-Name [tab] Date [tab] Time [tab] UTC-Offset
+
+     The Date and Time fields specify the time change in UTC.
+
+     The UTC Offset is for local (wall-clock) time. It is the amount of time
+     to add to UTC to get local time.
+  */
+
+  fprintf (fp, "%s\t", zone_name);
+
+  if (year == YEAR_MINIMUM) {
+    fprintf (fp, " 1 Jan 0001\t 0:00:00", zone_name);
+  } else if (year == YEAR_MAXIMUM) {
+    fprintf (stderr, "Maximum year found in change time\n");
+    exit (1);
+  } else {
+    tmp_vzictime = *vzictime;
+    tmp_vzictime.year = year;
+    calculate_actual_time (&tmp_vzictime, TIME_UNIVERSAL,
+			   vzictime->prev_stdoff, vzictime->prev_walloff);
+
+    hour = tmp_vzictime.time_seconds / 3600;
+    minute = (tmp_vzictime.time_seconds % 3600) / 60;
+    second = tmp_vzictime.time_seconds % 60;
+
+    fprintf (fp, "%2i %s %04i\t%2i:%02i:%02i",
+	     tmp_vzictime.day_number, months[tmp_vzictime.month],
+	     tmp_vzictime.year, hour, minute, second);
+  }
+
+  fprintf (fp, "\t%s", format_tz_offset (vzictime->walloff, FALSE));
+
+  fprintf (fp, "\n");
+}
+
+
+void
+ensure_directory_exists		(char		*directory)
+{
+  struct stat filestat;
+
+  if (stat (directory, &filestat) != 0) {
+    /* If the directory doesn't exist, try to create it. */
+    if (errno == ENOENT) {
+      if (mkdir (directory, 0777) != 0) {
+	fprintf (stderr, "Can't create directory: %s\n", directory);
+	exit (1);
+      }
+    } else {
+      fprintf (stderr, "Error calling stat() on directory: %s\n", directory);
+      exit (1);
+    }
+  } else if (!S_ISDIR (filestat.st_mode)) {
+    fprintf (stderr, "Can't create directory, already exists: %s\n",
+	     directory);
+    exit (1);
+  }
+}
+
+
+static void
+expand_tzid_prefix		(void)
+{
+  char *src, *dest;
+  char date_buf[16];
+  char ch1, ch2;
+  time_t t;
+  struct tm *tm;
+
+  /* Get today's date as a string in the format "YYYYMMDD". */
+  t = time (NULL);
+  tm = localtime (&t);
+  sprintf (date_buf, "%4i%02i%02i", tm->tm_year + 1900,
+	   tm->tm_mon + 1, tm->tm_mday);
+
+  src = TZIDPrefix;
+  dest = TZIDPrefixExpanded;
+
+  while (ch1 = *src++) {
+
+    /* Look for a '%'. */
+    if (ch1 == '%') {
+      ch2 = *src++;
+
+      if (ch2 == 'D') {
+	/* '%D' gets expanded into the date string. */
+	strcpy (dest, date_buf);
+	dest += strlen (dest);
+      } else if (ch2 == '%') {
+	/* '%%' gets converted into one '%'. */
+	*dest++ = '%';
+      } else {
+	/* Anything else is output as is. */
+	*dest++ = '%';
+	*dest++ = ch2;
+      }
+    } else {
+      *dest++ = ch1;
+    }
+  }
+
+#if 0
+  printf ("TZID    : %s\n", TZIDPrefix);
+  printf ("Expanded: %s\n", TZIDPrefixExpanded);
+#endif
+}
Index: libkcal/libical/vzic-1.3/vzic.c
===================================================================
--- libkcal/libical/vzic-1.3/vzic.c	(.../tags/KDE/3.5.6/kdepim)	(wersja 0)
+++ libkcal/libical/vzic-1.3/vzic.c	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -0,0 +1,320 @@
+/*
+ * Vzic - a program to convert Olson timezone database files into VZTIMEZONE
+ * files compatible with the iCalendar specification (RFC2445).
+ *
+ * Copyright (C) 2000-2001 Ximian, Inc.
+ * Copyright (C) 2003 Damon Chaplin.
+ *
+ * Author: Damon Chaplin <damon@gnome.org>
+ *
+ * This program is free software; you can redistribute it and/or modify
+ * it under the terms of the GNU General Public License as published by
+ * the Free Software Foundation; either version 2 of the License, or
+ * (at your option) any later version.
+ *
+ * This program is distributed in the hope that it will be useful,
+ * but WITHOUT ANY WARRANTY; without even the implied warranty of
+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+ * GNU General Public License for more details.
+ *
+ * You should have received a copy of the GNU General Public License
+ * along with this program; if not, write to the Free Software
+ * Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA 02111-1307, USA.
+ */
+
+#include <stdio.h>
+#include <string.h>
+
+#include "vzic.h"
+#include "vzic-parse.h"
+#include "vzic-dump.h"
+#include "vzic-output.h"
+
+
+/*
+ * Global command-line options.
+ */
+
+/* By default we output Outlook-compatible output. If --pure is used we
+   output pure output, with no changes to be compatible with Outlook. */
+gboolean VzicPureOutput			= FALSE;
+
+gboolean VzicDumpOutput			= FALSE;
+gboolean VzicDumpChanges		= FALSE;
+gboolean VzicDumpZoneNamesAndCoords	= TRUE;
+gboolean VzicDumpZoneTranslatableStrings= TRUE;
+gboolean VzicNoRRules			= FALSE;
+gboolean VzicNoRDates			= FALSE;
+char*    VzicOutputDir			= "zoneinfo";
+char*    VzicUrlPrefix                  = NULL;
+char*    VzicOlsonDir                   = OLSON_DIR;
+
+GList*	 VzicTimeZoneNames		= NULL;
+
+static void	convert_olson_file		(char		*olson_file);
+
+static void	usage				(void);
+
+static void	free_zone_data			(GArray		*zone_data);
+static void	free_rule_array			(gpointer	 key,
+						 gpointer	 value,
+						 gpointer	 data);
+static void	free_link_data			(gpointer	 key,
+						 gpointer	 value,
+						 gpointer	 data);
+
+
+int
+main				(int		 argc,
+				 char		*argv[])
+{
+  int i;
+  char directory[PATHNAME_BUFFER_SIZE];
+  char filename[PATHNAME_BUFFER_SIZE];
+  GHashTable *zones_hash;
+
+  /*
+   * Command-Line Option Parsing.
+   */
+  for (i = 1; i < argc; i++) {
+    /*
+     * User Options.
+     */
+
+    /* --pure: Output the perfect VCALENDAR data, which Outlook won't parse
+       as it has problems with certain iCalendar constructs. */
+    if (!strcmp (argv[i], "--pure"))
+      VzicPureOutput = TRUE;
+
+    /* --output-dir: specify where to output all the files beneath. The
+       default is the current directory. */
+    else if (argc > i + 1 && !strcmp (argv[i], "--output-dir"))
+      VzicOutputDir = argv[++i];
+
+    /* --url-prefix: Used as the base for the TZURL property in each
+       VTIMEZONE. The default is to not output TZURL properties. */
+    else if (argc > i + 1 && !strcmp (argv[i], "--url-prefix")) {
+      int length;
+      VzicUrlPrefix = argv[++i];
+      /* remove the trailing '/' if there is one */
+      length = strlen (VzicUrlPrefix);
+      if (VzicUrlPrefix[length - 1] == '/')
+          VzicUrlPrefix[length - 1] = '\0';
+    }
+
+    else if (argc > i + 1 && !strcmp (argv[i], "--olson-dir")) {
+      VzicOlsonDir = argv[++i];
+    }
+
+    /*
+     * Debugging Options.
+     */
+
+    /* --dump: Dump the Rule and Zone data that we parsed from the Olson
+       timezone files. This is used to test the parsing code. */
+    else if (!strcmp (argv[i], "--dump"))
+      VzicDumpOutput = TRUE;
+
+    /* --dump-changes: Dumps a list of times when each timezone changed,
+       and the new local time offset from UTC. */
+    else if (!strcmp (argv[i], "--dump-changes"))
+      VzicDumpChanges = TRUE;
+
+    /* --no-rrules: Don't output RRULE properties in the VTIMEZONEs. Instead
+       it will just output RDATEs for each year up to a certain year. */
+    else if (!strcmp (argv[i], "--no-rrules"))
+      VzicNoRRules = TRUE;
+
+    /* --no-rdates: Don't output multiple RDATEs in a single VTIMEZONE
+       component. Instead they will be output separately. */
+    else if (!strcmp (argv[i], "--no-rdates"))
+      VzicNoRDates = TRUE;
+
+    else
+      usage ();
+  }
+
+  /*
+   * Create any necessary directories.
+   */
+  ensure_directory_exists (VzicOutputDir);
+
+  if (VzicDumpOutput) {
+    /* Create the directories for the dump output, if they don't exist. */
+    sprintf (directory, "%s/ZonesVzic", VzicOutputDir);
+    ensure_directory_exists (directory);
+    sprintf (directory, "%s/RulesVzic", VzicOutputDir);
+    ensure_directory_exists (directory);
+  }
+
+  if (VzicDumpChanges) {
+    /* Create the directory for the changes output, if it doesn't exist. */
+    sprintf (directory, "%s/ChangesVzic", VzicOutputDir);
+    ensure_directory_exists (directory);
+  }
+
+  /*
+   * Convert the Olson timezone files.
+   */
+  convert_olson_file ("africa");
+  convert_olson_file ("antarctica");
+  convert_olson_file ("asia");
+  convert_olson_file ("australasia");
+  convert_olson_file ("europe");
+  convert_olson_file ("northamerica");
+  convert_olson_file ("southamerica");
+
+  /* These are backwards-compatability and weird stuff. */
+#if 0
+  convert_olson_file ("backward");
+  convert_olson_file ("etcetera");
+  convert_olson_file ("leapseconds");
+  convert_olson_file ("pacificnew");
+  convert_olson_file ("solar87");
+  convert_olson_file ("solar88");
+  convert_olson_file ("solar89");
+#endif
+
+  /* This doesn't really do anything and it messes up vzic-dump.pl so we
+     don't bother. */
+#if 0
+  convert_olson_file ("factory");
+#endif
+
+  /* This is old System V stuff, which we don't currently support since it
+     uses 'min' as a Rule FROM value which messes up our algorithm, making
+     it too slow and use too much memory. */
+#if 0
+  convert_olson_file ("systemv");
+#endif
+
+  /* Output the timezone names and coordinates in a zone.tab file, and
+     the translatable strings to feed to gettext. */
+  if (VzicDumpZoneNamesAndCoords) {
+    sprintf (filename, "%s/zone.tab", VzicOlsonDir);
+    zones_hash = parse_zone_tab (filename);
+
+    dump_time_zone_names (VzicTimeZoneNames, VzicOutputDir, zones_hash);
+  }
+
+  return 0;
+}
+
+
+static void
+convert_olson_file		(char		*olson_file)
+{
+  char input_filename[PATHNAME_BUFFER_SIZE];
+  GArray *zone_data;
+  GHashTable *rule_data, *link_data;
+  char dump_filename[PATHNAME_BUFFER_SIZE];
+  ZoneData *zone;
+  int i, max_until_year;
+
+  sprintf (input_filename, "%s/%s", VzicOlsonDir, olson_file);
+
+  parse_olson_file (input_filename, &zone_data, &rule_data, &link_data,
+		    &max_until_year);
+
+  if (VzicDumpOutput) {
+    sprintf (dump_filename, "%s/ZonesVzic/%s", VzicOutputDir, olson_file);
+    dump_zone_data (zone_data, dump_filename);
+
+    sprintf (dump_filename, "%s/RulesVzic/%s", VzicOutputDir, olson_file);
+    dump_rule_data (rule_data, dump_filename);
+  }
+
+  output_vtimezone_files (VzicOutputDir, zone_data, rule_data, link_data,
+			  max_until_year);
+
+  free_zone_data (zone_data);
+  g_hash_table_foreach (rule_data, free_rule_array, NULL);
+  g_hash_table_destroy (rule_data);
+  g_hash_table_foreach (link_data, free_link_data, NULL);
+  g_hash_table_destroy (link_data);
+}
+
+
+static void
+usage				(void)
+{
+  fprintf (stderr, "Usage: vzic [--dump] [--dump-changes] [--no-rrules] [--no-rdates] [--pure] [--output-dir <directory>] [--url-prefix <url>] [--olson-dir <directory>]\n");
+
+  exit (1);
+}
+
+
+
+
+/*
+ * Functions to free the data structures.
+ */
+
+static void
+free_zone_data			(GArray		*zone_data)
+{
+  ZoneData *zone;
+  ZoneLineData *zone_line;
+  int i, j;
+
+  for (i = 0; i < zone_data->len; i++) {
+    zone = &g_array_index (zone_data, ZoneData, i);
+
+    g_free (zone->zone_name);
+
+    for (j = 0; j < zone->zone_line_data->len; j++) {
+      zone_line = &g_array_index (zone->zone_line_data, ZoneLineData, j);
+
+      g_free (zone_line->rules);
+      g_free (zone_line->format);
+    }
+
+    g_array_free (zone->zone_line_data, TRUE);
+  }
+
+  g_array_free (zone_data, TRUE);
+}
+
+
+static void
+free_rule_array			(gpointer	 key,
+				 gpointer	 value,
+				 gpointer	 data)
+{
+  char *name = key;
+  GArray *rule_array = value;
+  RuleData *rule;
+  int i;
+
+  for (i = 0; i < rule_array->len; i++) {
+    rule = &g_array_index (rule_array, RuleData, i);
+
+    if (!rule->is_shallow_copy) {
+      g_free (rule->type);
+      g_free (rule->letter_s);
+    }
+  }
+
+  g_array_free (rule_array, TRUE);
+
+  g_free (name);
+}
+
+
+static void
+free_link_data			(gpointer	 key,
+				 gpointer	 value,
+				 gpointer	 data)
+{
+  GList *link = data;
+
+  g_free (key);
+
+  while (link) {
+    g_free (link->data);
+    link = link->next;
+  }
+
+  g_list_free (data);
+}
+
Index: libkcal/libical/vzic-1.3/README
===================================================================
--- libkcal/libical/vzic-1.3/README	(.../tags/KDE/3.5.6/kdepim)	(wersja 0)
+++ libkcal/libical/vzic-1.3/README	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -0,0 +1,202 @@
+
+
+VZIC README
+===========
+
+This is 'vzic', a program to convert the Olson timezone database files into
+VTIMEZONE files compatible with the iCalendar specification (RFC2445).
+
+(The name is based on the 'zic' program which converts the Olson files into
+time zone information files used by several Unix C libraries, including
+glibc. See zic(8) and tzfile(5).)
+
+
+
+REQUIREMENTS
+============
+
+You need the Olson timezone database files, which  can be found at:
+
+  ftp://elsie.nci.nih.gov/pub/
+
+  (Old versions can be found at ftp://munnari.oz.au/pub/oldtz/)
+
+
+Vzic also uses the GLib library (for hash tables, dynamic arrays, and date
+calculations). You need version 2.0 or higher. You can get this from:
+
+  http://www.gtk.org
+
+
+
+BUILDING
+========
+
+Edit the Makefile to set the OLSON_DIR, PRODUCT_ID and TZID_PREFIX variables.
+
+Then run 'make'.
+
+
+
+RUNNING
+=======
+
+Run 'vzic'.
+
+The output is placed in the zoneinfo subdirectory by default,
+but you can use the --output-dir options to set another toplevel output
+directory.
+
+By default it outputs VTIMEZONEs that try to be compatible with Outlook
+(2000, at least). Outlook can't handle certain iCalendar constructs in
+VTIMEZONEs, such as RRULEs using BYMONTHDAY, so it has to adjust the RRULEs
+slightly to get Outlook to parse them. Unfortunately this means they are
+slightly wrong. If given the --pure option, vzic outputs the exact data,
+without worrying about compatability.
+
+NOTE: We don't convert all the Olson files. We skip 'backward', 'etcetera',
+'leapseconds', 'pacificnew', 'solar87', 'solar88' and 'solar89', 'factory'
+and 'systemv', since these don't really provide any useful timezones.
+See vzic.c.
+
+
+
+MERGING CHANGES INTO A MASTER SET OF VTIMEZONES
+===============================================
+
+The Olson timezone files are updated fairly often, so we need to build new
+sets of VTIMEZONE files. Though we have to be careful to ensure that the TZID
+of updated timezones is also updated, since it must remain unique.
+
+We use a version number on the end of the TZID prefix (see the TZIDPrefix
+variable in vzic-output.c) to ensure this uniqueness.
+
+But we don't want to update the version numbers of VTIMEZONEs which have not
+changed. So we use the vzic-merge.pl Perl script. This merges in the new set
+of VTIMEZONEs with a 'master' set. It compares each new VTIMEZONE file with
+the one in the master set (ignoring changes to the TZID). If the new
+VTIMEZONE file is different, it copies it to the master set and sets the
+version number to the old VTIMEZONE's version number + 1.
+
+To use vzic-merge.pl you must change the $MASTER_ZONEINFO_DIR and
+$NEW_ZONEINFO_DIR variables at the top of the file to point to your 2 sets of
+VTIMEZONEs. You then just run the script. (I recommend you keep a backup of
+the old master VTIMEZONE files, and use diff to compare the new master set
+with the old one, in case anything goes wrong.)
+
+You must merge in changes to the zones.tab file by hand.
+
+Note that some timezones are renamed or removed occasionally, so applications
+should be able to cope with this.
+
+
+
+COMPATABILITY NOTES
+===================
+
+It seems that Microsoft Outlook is very picky about the iCalendar files it
+will accept. (I've been testing with Outlook 2000. I hope the other versions
+are no worse.) Here's a few problems we've had with the VTIMEZONEs:
+
+ o Outlook doesn't like any years before 1600. We were using '1st Jan 0001'
+   in all VTIMEZONEs to specify the first UTC offset known for the timezone.
+   (The Olson data does not give a start date for this.)
+
+   Now we just skip this first component for most timezones. The UTC offset
+   can still be found from the TZOFFSETFROM property of the first component.
+
+   Though some timezones only specify one UTC offset that applies forever,
+   so in these cases we output '1st Jan 1970' (Indian/Cocos,
+   Pacific/Johnston).
+
+ o Outlook doesn't like the BYMONTHDAY specifier in RRULEs.
+
+   We have changed most of the VTIMEZONEs to use things like 'BYDAY=2SU'
+   rather than 'BYMONTHDAY=8,9,10,11,12,13,14;BYDAY=SU', though some of
+   them were impossible to convert correctly so they are not always correct.
+
+ o Outlook doesn't like TZOFFSETFROM/TZOFFSETTO properties which include a
+   seconds component, e.g. 'TZOFFSETFROM:+110628'.
+   Quite a lot of the Olson timezones include seconds in their UTC offsets,
+   though no timezones currently have a UTC offset that uses the seconds
+   value.
+
+   We've rounded all UTC offsets to the nearest minute. Since all timezone
+   offsets currently used have '00' as the seconds offset, this doesn't lose
+   us much.
+
+ o Outlook doesn't like lines being split in certain places, even though
+   the iCalendar spec says they can be split anywhere.
+
+ o Outlook can only handle one RDATE or a pair of RRULEs. So we had to remove
+   all historical data.
+
+
+TESTING
+=======
+
+Do a 'make test-vic', then run ./test-vic.
+
+The test-vzic program compares our libical code and VTIMEZONE data against
+the Unix functions like mktime(). It steps over a period of time (1970-2037)
+converting from UTC to a given timezone and back again every 15 minutes.
+Any differences are output into the test-output directory.
+
+The output matches for all of the timezones, except in a few places where the
+result can't be determined. So I think we can be fairly confident that the
+VTIMEZONEs are correct.
+
+Note that you must use the same Olson data in libical that the OS is using
+for mktime() etc. For example, I am using RedHat 9 which uses tzdata2002d,
+so I converted this to VTIMEZONE files and installed it into the libical
+timezone data directory before testing. (You need to use '--pure' when
+creating the VTIMEZONE files as well.)
+
+
+Testing the Parsing Code
+------------------------
+
+Run 'make test-parse'.
+
+This runs 'vzic --dump' and 'perl-dump' and compares the output. The diff
+commands should not produce any output.
+
+'vzic --dump' dumps all the parsed data out in the original Olson format,
+but without comments. The files are written into the ZonesVzic and RulesVzic
+subdirectories of the zoneinfo directory.
+
+'make perl-dump' runs the vzic-dump.pl perl script which outputs the files
+in the same format as 'vzic --dump' in the ZonesPerl and RulesPerl
+subdirectories. The perl script doesn't actually parse the fields; it only
+strips comments and massages the fields so we have the same output format.
+
+Currently they both produce exactly the same output so we know the parsing
+code is OK.
+
+
+Testing the VTIMEZONE Files
+---------------------------
+
+Run 'make test-changes'.
+
+This runs 'vzic --dump-changes' and 'test-vzic --dump-changes' and compares
+the output. The diff command should not produce any output.
+
+Both commands output timezone changes for each zone up to a specific year
+(2030) into files for each timezone. It outputs the timezone changes in a
+list in this format:
+
+  Timezone Name        Date and Time of Change in UTC   New Offset from UTC
+
+  America/Dawson	26 Oct 1986	 2:00:00	-0800
+
+Unfortunately there are some differences here, but they all happen before
+1970 so it doesn't matter too much. It looks like the libical code has
+problems determining things like 'last Sunday of the month' before 1970.
+This is because it uses mktime() etc. which can't really handle dates
+before 1970.
+
+
+
+Damon Chaplin <damon@gnome.org>, 25 Oct 2003.
+
Index: libkcal/libical/vzic-1.3/vzic-output.h
===================================================================
--- libkcal/libical/vzic-1.3/vzic-output.h	(.../tags/KDE/3.5.6/kdepim)	(wersja 0)
+++ libkcal/libical/vzic-1.3/vzic-output.h	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -0,0 +1,38 @@
+/*
+ * Vzic - a program to convert Olson timezone database files into VZTIMEZONE
+ * files compatible with the iCalendar specification (RFC2445).
+ *
+ * Copyright (C) 2000-2001 Ximian, Inc.
+ * Copyright (C) 2003 Damon Chaplin.
+ *
+ * Author: Damon Chaplin <damon@gnome.org>
+ *
+ * This program is free software; you can redistribute it and/or modify
+ * it under the terms of the GNU General Public License as published by
+ * the Free Software Foundation; either version 2 of the License, or
+ * (at your option) any later version.
+ *
+ * This program is distributed in the hope that it will be useful,
+ * but WITHOUT ANY WARRANTY; without even the implied warranty of
+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+ * GNU General Public License for more details.
+ *
+ * You should have received a copy of the GNU General Public License
+ * along with this program; if not, write to the Free Software
+ * Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA 02111-1307, USA.
+ */
+
+#ifndef _VZIC_OUTPUT_H_
+#define _VZIC_OUTPUT_H_
+
+#include <glib.h>
+
+void		output_vtimezone_files		(char		*directory,
+						 GArray		*zone_data,
+						 GHashTable	*rule_data,
+						 GHashTable	*link_data,
+						 int		 max_until_year);
+
+void		ensure_directory_exists		(char		*directory);
+
+#endif /* _VZIC_OUTPUT_H_ */
Index: libkcal/libical/vzic-1.3/vzic-dump.c
===================================================================
--- libkcal/libical/vzic-1.3/vzic-dump.c	(.../tags/KDE/3.5.6/kdepim)	(wersja 0)
+++ libkcal/libical/vzic-1.3/vzic-dump.c	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -0,0 +1,409 @@
+/*
+ * Vzic - a program to convert Olson timezone database files into VZTIMEZONE
+ * files compatible with the iCalendar specification (RFC2445).
+ *
+ * Copyright (C) 2000-2001 Ximian, Inc.
+ * Copyright (C) 2003 Damon Chaplin.
+ *
+ * Author: Damon Chaplin <damon@gnome.org>
+ *
+ * This program is free software; you can redistribute it and/or modify
+ * it under the terms of the GNU General Public License as published by
+ * the Free Software Foundation; either version 2 of the License, or
+ * (at your option) any later version.
+ *
+ * This program is distributed in the hope that it will be useful,
+ * but WITHOUT ANY WARRANTY; without even the implied warranty of
+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+ * GNU General Public License for more details.
+ *
+ * You should have received a copy of the GNU General Public License
+ * along with this program; if not, write to the Free Software
+ * Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA 02111-1307, USA.
+ */
+
+/*
+ * These functions are for dumping all the parsed Zones and Rules to
+ * files, to be compared with the output of vzic-dump.pl to check our parsing
+ * code is OK. Some of the functions are also used for producing debugging
+ * output.
+ */
+
+#include <stdio.h>
+#include <stdlib.h>
+#include <string.h>
+
+#include "vzic.h"
+#include "vzic-dump.h"
+
+
+static void	dump_add_rule			(char		*name,
+						 GArray		*rule_array,
+						 GPtrArray	*name_array);
+static int	dump_compare_strings		(const void	*arg1,
+						 const void	*arg2);
+
+
+void
+dump_zone_data			(GArray		*zone_data,
+				 char		*filename)
+{
+  static char *months[] = { "Jan", "Feb", "Mar", "Apr", "May", "Jun",
+			    "Jul", "Aug", "Sep", "Oct", "Nov", "Dec" };
+  FILE *fp;
+  ZoneData *zone;
+  ZoneLineData *zone_line;
+  int i, j;
+  gboolean output_month, output_day, output_time;
+
+  fp = fopen (filename, "w");
+  if (!fp) {
+    fprintf (stderr, "Couldn't create file: %s\n", filename);
+    exit (1);
+  }
+
+  for (i = 0; i < zone_data->len; i++) {
+    zone = &g_array_index (zone_data, ZoneData, i);
+
+    fprintf (fp, "Zone\t%s\t", zone->zone_name);
+
+    for (j = 0; j < zone->zone_line_data->len; j++) {
+      zone_line = &g_array_index (zone->zone_line_data, ZoneLineData, j);
+
+      if (j != 0)
+	fprintf (fp, "\t\t\t");
+
+      fprintf (fp, "%s\t", dump_time (zone_line->stdoff_seconds, TIME_WALL,
+				      FALSE));
+
+      if (zone_line->rules)
+	fprintf (fp, "%s\t", zone_line->rules);
+      else if (zone_line->save_seconds != 0)
+	fprintf (fp, "%s\t", dump_time (zone_line->save_seconds, TIME_WALL,
+					FALSE));
+      else
+	fprintf (fp, "-\t");
+
+      fprintf (fp, "%s\t", zone_line->format ? zone_line->format : "-");
+
+      if (zone_line->until_set) {
+	fprintf (fp, "%s\t", dump_year (zone_line->until_year));
+
+	output_month = output_day = output_time = FALSE;
+
+	if (zone_line->until_time_code != TIME_WALL
+	    || zone_line->until_time_seconds != 0)
+	  output_month = output_day = output_time = TRUE;
+	else if (zone_line->until_day_code != DAY_SIMPLE
+		 || zone_line->until_day_number != 1)
+	  output_month = output_day = TRUE;
+	else if (zone_line->until_month != 0)
+	  output_month = TRUE;
+
+	if (output_month)
+	  fprintf (fp, "%s", months[zone_line->until_month]);
+
+	fprintf (fp, "\t");
+
+	if (output_day)
+	  fprintf (fp, "%s", dump_day_coded (zone_line->until_day_code,
+					     zone_line->until_day_number,
+					     zone_line->until_day_weekday));
+
+	fprintf (fp, "\t");
+
+	if (output_time)
+	  fprintf (fp, "%s", dump_time (zone_line->until_time_seconds,
+					zone_line->until_time_code, FALSE));
+
+      } else {
+	fprintf (fp, "\t\t\t");
+      }
+
+      fprintf (fp, "\n");
+    }
+  }
+
+  fclose (fp);
+}
+
+
+void
+dump_rule_data			(GHashTable	*rule_data,
+				 char		*filename)
+{
+  FILE *fp;
+  GPtrArray *name_array;
+  GArray *rule_array;
+  int i;
+  char *name;
+
+  fp = fopen (filename, "w");
+  if (!fp) {
+    fprintf (stderr, "Couldn't create file: %s\n", filename);
+    exit (1);
+  }
+
+  /* We need to sort the rules by their names, so they are in the same order
+     as the Perl output. So we place all the names in a temporary GPtrArray,
+     sort it, then output them. */
+  name_array = g_ptr_array_new ();
+  g_hash_table_foreach (rule_data, (GHFunc) dump_add_rule, name_array);
+  qsort (name_array->pdata, name_array->len, sizeof (char*),
+	 dump_compare_strings);
+
+  for (i = 0; i < name_array->len; i++) {
+    name = g_ptr_array_index (name_array, i);
+    rule_array = g_hash_table_lookup (rule_data, name);
+    if (!rule_array) {
+      fprintf (stderr, "Couldn't access rules: %s\n", name);
+      exit (1);
+    }
+    dump_rule_array (name, rule_array, fp);
+  }
+
+  g_ptr_array_free (name_array, TRUE);
+
+  fclose (fp);
+}
+
+
+static void
+dump_add_rule			(char		*name,
+				 GArray		*rule_array,
+				 GPtrArray	*name_array)
+{
+  g_ptr_array_add (name_array, name);
+}
+
+
+static int
+dump_compare_strings		(const void	*arg1,
+				 const void	*arg2)
+{
+  char **a, **b;
+
+  a = (char**) arg1;
+  b = (char**) arg2;
+
+  return strcmp (*a, *b);
+}
+
+
+void
+dump_rule_array			(char		*name,
+				 GArray		*rule_array,
+				 FILE		*fp)
+{
+  static char *months[] = { "Jan", "Feb", "Mar", "Apr", "May", "Jun",
+			    "Jul", "Aug", "Sep", "Oct", "Nov", "Dec" };
+
+  RuleData *rule;
+  int i;
+
+#if 0
+  fprintf (fp, "\n# Rule	NAME	FROM	TO	TYPE	IN	ON	AT	SAVE	LETTER/S");
+#endif
+
+  for (i = 0; i < rule_array->len; i++) {
+    rule = &g_array_index (rule_array, RuleData, i);
+
+    fprintf (fp, "Rule\t%s\t%s\t", name, dump_year (rule->from_year));
+
+    if (rule->to_year == rule->from_year)
+      fprintf (fp, "only\t");
+    else
+      fprintf (fp, "%s\t", dump_year (rule->to_year));
+
+    fprintf (fp, "%s\t", rule->type ? rule->type : "-");
+
+    fprintf (fp, "%s\t", months[rule->in_month]);
+
+    fprintf (fp, "%s\t",
+	     dump_day_coded (rule->on_day_code, rule->on_day_number,
+			     rule->on_day_weekday));
+
+    fprintf (fp, "%s\t", dump_time (rule->at_time_seconds, rule->at_time_code,
+				    FALSE));
+
+    fprintf (fp, "%s\t", dump_time (rule->save_seconds, TIME_WALL, TRUE));
+
+    fprintf (fp, "%s", rule->letter_s ? rule->letter_s : "-");
+
+    fprintf (fp, "\n");
+  }
+}
+
+
+char*
+dump_time			(int		 seconds,
+				 TimeCode	 time_code,
+				 gboolean	 use_zero)
+{
+  static char buffer[256], *sign;
+  int hours, minutes;
+  char *code;
+
+  if (time_code == TIME_STANDARD)
+    code = "s";
+  else if (time_code == TIME_UNIVERSAL)
+    code = "u";
+  else
+    code = "";
+
+  if (seconds < 0) {
+    seconds = -seconds;
+    sign = "-";
+  } else {
+    sign = "";
+  }
+
+  hours = seconds / 3600;
+  minutes = (seconds % 3600) / 60;
+  seconds = seconds % 60;
+
+  if (use_zero && hours == 0 && minutes == 0 && seconds == 0)
+    return "0";
+  else if (seconds == 0)
+    sprintf (buffer, "%s%i:%02i%s", sign, hours, minutes, code);
+  else
+    sprintf (buffer, "%s%i:%02i:%02i%s", sign, hours, minutes, seconds, code);
+
+  return buffer;
+}
+
+
+char*
+dump_day_coded			(DayCode	day_code,
+				 int		day_number,
+				 int		day_weekday)
+{
+  static char buffer[256];
+  static char *weekdays[] = { "Sun", "Mon", "Tue", "Wed",
+			      "Thu", "Fri", "Sat" };
+
+  switch (day_code) {
+  case DAY_SIMPLE:
+    sprintf (buffer, "%i", day_number);
+    break;
+  case DAY_WEEKDAY_ON_OR_AFTER:
+    sprintf (buffer, "%s>=%i", weekdays[day_weekday], day_number);
+    break;
+  case DAY_WEEKDAY_ON_OR_BEFORE:
+    sprintf (buffer, "%s<=%i", weekdays[day_weekday], day_number);
+    break;
+  case DAY_LAST_WEEKDAY:
+    sprintf (buffer, "last%s", weekdays[day_weekday]);
+    break;
+  default:
+    fprintf (stderr, "Invalid day code: %i\n", day_code);
+    exit (1);
+  }
+
+  return buffer;
+}
+
+
+char*
+dump_year			(int		year)
+{
+  static char buffer[256];
+
+  if (year == YEAR_MINIMUM)
+    return "min";
+  if (year == YEAR_MAXIMUM)
+    return "max";
+
+  sprintf (buffer, "%i", year);
+  return buffer;
+}
+
+
+void
+dump_time_zone_names		(GList		*names,
+				 char		*output_dir,
+				 GHashTable	*zones_hash)
+{
+  char filename[PATHNAME_BUFFER_SIZE], *zone_name, *zone_name_in_hash = NULL;
+  char strings_filename[PATHNAME_BUFFER_SIZE];
+  FILE *fp, *strings_fp = NULL;
+  GList *elem;
+  ZoneDescription *zone_desc;
+
+  sprintf (filename, "%s/zones.tab", output_dir);
+  sprintf (strings_filename, "%s/zones.h", output_dir);
+
+  fp = fopen (filename, "w");
+  if (!fp) {
+    fprintf (stderr, "Couldn't create file: %s\n", filename);
+    exit (1);
+  }
+
+  if (VzicDumpZoneTranslatableStrings) {
+    strings_fp = fopen (strings_filename, "w");
+    if (!strings_fp) {
+      fprintf (stderr, "Couldn't create file: %s\n", strings_filename);
+      exit (1);
+    }
+  }
+
+  names = g_list_sort (names, (GCompareFunc) strcmp);
+
+  elem = names;
+  while (elem) {
+    zone_name = (char*) elem->data;
+
+    zone_desc = g_hash_table_lookup (zones_hash, zone_name);
+
+    /* SPECIAL CASES: These timezones are links from other zones and are
+       almost exactly the same - they are basically there so users can find
+       them a bit easier. But they don't have entries in the zone.tab file,
+       so we use the entry from the timezone linked from. */
+    if (!zone_desc) {
+      if (!strcmp (zone_name, "America/Indiana/Indianapolis"))
+	zone_name_in_hash = "America/Indianapolis";
+      else if (!strcmp (zone_name, "America/Kentucky/Louisville"))
+	zone_name_in_hash = "America/Louisville";
+      else if (!strcmp (zone_name, "Asia/Istanbul"))
+	zone_name_in_hash = "Europe/Istanbul";
+      else if (!strcmp (zone_name, "Europe/Nicosia"))
+	zone_name_in_hash = "Asia/Nicosia";
+
+      if (zone_name_in_hash)
+	zone_desc = g_hash_table_lookup (zones_hash, zone_name_in_hash);
+    }
+
+    if (zone_desc) {
+      fprintf (fp, "%+04i%02i%02i %+04i%02i%02i %s\n",
+	       zone_desc->latitude[0], zone_desc->latitude[1],
+	       zone_desc->latitude[2],
+	       zone_desc->longitude[0], zone_desc->longitude[1],
+	       zone_desc->longitude[2],
+	       zone_name);
+    } else {
+      g_print ("Zone description not found for: %s\n", zone_name);
+      fprintf (fp, "%s\n", zone_name);
+    }
+
+
+    if (VzicDumpZoneTranslatableStrings) {
+#if 0
+      char zone_name_buffer[1024], *src, *dest;
+
+      for (src = zone_name, dest = zone_name_buffer; *src; src++, dest++)
+	*dest = (*src == '_') ? ' ' : *src;
+      *dest = '\0';
+#endif
+
+      fprintf (strings_fp, "N_(\"%s\");\n", zone_name);
+    }
+
+    elem = elem->next;
+  }
+
+  fclose (fp);
+
+  if (VzicDumpZoneTranslatableStrings)
+    fclose (strings_fp);
+}
+
Index: libkcal/libical/vzic-1.3/vzic.h
===================================================================
--- libkcal/libical/vzic-1.3/vzic.h	(.../tags/KDE/3.5.6/kdepim)	(wersja 0)
+++ libkcal/libical/vzic-1.3/vzic.h	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -0,0 +1,196 @@
+/*
+ * Vzic - a program to convert Olson timezone database files into VZTIMEZONE
+ * files compatible with the iCalendar specification (RFC2445).
+ *
+ * Copyright (C) 2000-2001 Ximian, Inc.
+ * Copyright (C) 2003 Damon Chaplin.
+ *
+ * Author: Damon Chaplin <damon@gnome.org>
+ *
+ * This program is free software; you can redistribute it and/or modify
+ * it under the terms of the GNU General Public License as published by
+ * the Free Software Foundation; either version 2 of the License, or
+ * (at your option) any later version.
+ *
+ * This program is distributed in the hope that it will be useful,
+ * but WITHOUT ANY WARRANTY; without even the implied warranty of
+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+ * GNU General Public License for more details.
+ *
+ * You should have received a copy of the GNU General Public License
+ * along with this program; if not, write to the Free Software
+ * Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA 02111-1307, USA.
+ */
+
+#ifndef _VZIC_H_
+#define _VZIC_H_
+
+#include <glib.h>
+
+
+/*
+ * Global command-line options.
+ */
+
+/* By default we output Outlook-compatible output. If --pure is used we output
+   pure output, with no changes to be compatible with Outlook. */
+extern gboolean VzicPureOutput;
+
+extern gboolean VzicDumpOutput;
+extern gboolean VzicDumpChanges;
+extern gboolean VzicDumpZoneNamesAndCoords;
+extern gboolean VzicDumpZoneTranslatableStrings;
+extern gboolean VzicNoRRules;
+extern gboolean VzicNoRDates;
+extern char*    VzicUrlPrefix;
+
+extern GList*	VzicTimeZoneNames;
+
+/* The minimum & maximum years we can use. */
+#define YEAR_MINIMUM	G_MININT
+#define YEAR_MAXIMUM	G_MAXINT
+
+/* The maximum size of any complete pathname. */
+#define PATHNAME_BUFFER_SIZE	1024
+
+/* Days can be expressed either as a simple month day number, 1-31, or a rule
+   such as the last Sunday, or the first Monday on or after the 8th. */
+typedef enum
+{
+  DAY_SIMPLE,
+  DAY_WEEKDAY_ON_OR_AFTER,
+  DAY_WEEKDAY_ON_OR_BEFORE,
+  DAY_LAST_WEEKDAY
+} DayCode;
+
+
+/* Times can be given either as universal time (UTC), local standard time
+   (without daylight-saving adjustments) or wall clock time (local standard
+   time plus daylight-saving adjustments, i.e. what you would see on a clock
+   on the wall!). */
+typedef enum
+{
+  TIME_WALL,
+  TIME_STANDARD,
+  TIME_UNIVERSAL
+} TimeCode;
+
+
+/* This represents one timezone, e.g. "Africa/Algiers".
+   It contains the timezone name, and an array of ZoneLineData structs which
+   hold data from each Zone line, including the continuation lines. */
+typedef struct _ZoneData ZoneData;
+struct _ZoneData
+{
+  char *zone_name;
+
+  /* An array of ZoneLineData, one for each Zone & Zone continuation line
+     read in. */
+  GArray *zone_line_data;
+};
+
+
+typedef struct _ZoneLineData ZoneLineData;
+struct _ZoneLineData
+{
+  /* The amount of time to add to UTC to get local standard time for the
+     current time range, in seconds. */
+  int		stdoff_seconds;
+
+  /* Either rules is set to the name of a set of rules, or rules is NULL and
+     save is set to the time to add to local standard time to get wall time, in
+     seconds. If save is 0 as well, then standard time always applies. */
+  char	       *rules;
+  int		save_seconds;
+
+  /* The format to use for the abbreviated timezone name, e.g. WE%sT.
+     The %s is replaced by variable part of the name. (See the letter_s field
+     in the RuleData struct below). */
+  char	       *format;
+
+  /* TRUE if an UNTIL time is given. */
+  gboolean	until_set;
+
+  /* The UNTIL year, e.g. 2000. */
+  int		until_year;
+
+  /* The UNTIL month 0 (Jan) to 11 (Dec). */
+  int		until_month;
+
+  /* The UNTIL day, either a simple month day number, 1-31, or a rule such as
+     the last Sunday, or the first Monday on or after the 8th. */
+  DayCode	until_day_code;
+  int		until_day_number;	/* 1 to 31. */
+  int		until_day_weekday;	/* 0 (Sun) to 6 (Sat). */
+
+  /* The UNTIL time, in seconds from midnight. The code specifies whether the
+     time is a wall clock time, local standard time, or universal time. */
+  int		until_time_seconds;
+  TimeCode	until_time_code;
+};
+
+
+typedef struct _RuleData RuleData;
+struct _RuleData
+{
+  /* The first year that the rule applies to, e.g. 1996.
+     Can also be YEAR_MINIMUM. */
+  int		from_year;
+
+  /* The last year that the rule applies to, e.g. 1996.
+     Can also be YEAR_MAXIMUM. */
+  int		to_year;
+
+  /* A string used to only match certain years between from and to.
+     The rule only applies to the years which match. If type is NULL the rule
+     applies to all years betweeen from and to.
+     zic uses an external program called yearistype to check the string.
+     Currently it is not used in the Olson database. */
+  char	       *type;
+
+  /* The month of the rule 0 (Jan) to 11 (Dec). */
+  int		in_month;
+
+  /* The day, either a simple month day number, 1-31, or a rule such as
+     the last Sunday, or the first Monday on or after the 8th. */
+  DayCode	on_day_code;
+  int		on_day_number;
+  int		on_day_weekday;		/* 0 (Sun) to 6 (Sat). */
+
+  /* The time, in seconds from midnight. The code specifies whether the
+     time is a wall clock time, local standard time, or universal time. */
+  int		at_time_seconds;
+  TimeCode	at_time_code;
+
+  /* The amount of time to add to local standard time when the rule is in
+     effect, in seconds. If this is not 0 then it must be a daylight-saving
+     time. */
+  int		save_seconds;
+
+  /* The letter(s) to use as the variable part in the abbreviated timezone
+     name. If this is NULL then no variable part is used. (See the format field
+     in the ZoneLineData struct above.) */
+  char	       *letter_s;
+
+
+  /* This is set to TRUE if this element is a shallow copy of another one,
+     in which case we don't free any of the fields. */
+  gboolean	is_shallow_copy;
+};
+
+
+typedef struct _ZoneDescription ZoneDescription;
+struct _ZoneDescription
+{
+  /* 2-letter ISO 3166 country code. */
+  char		country_code[2];
+
+  /* latitude and longitude in degrees, minutes & seconds. The degrees value
+     holds the sign of the entire latitude/longitude. */
+  int		latitude[3];
+  int		longitude[3];
+
+  char	       *comment;
+};
+
+#endif /* _VZIC_H_ */
Index: libkcal/libical/vzic-1.3/vzic-test.pl
===================================================================
--- libkcal/libical/vzic-1.3/vzic-test.pl	(.../tags/KDE/3.5.6/kdepim)	(wersja 0)
+++ libkcal/libical/vzic-1.3/vzic-test.pl	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -0,0 +1,164 @@
+#!/usr/bin/perl -w
+
+#
+# Vzic - a program to convert Olson timezone database files into VZTIMEZONE
+# files compatible with the iCalendar specification (RFC2445).
+#
+# Copyright (C) 2001 Ximian, Inc.
+# Copyright (C) 2003 Damon Chaplin.
+#
+# Author: Damon Chaplin <damon@gnome.org>
+#
+# This program is free software; you can redistribute it and/or modify
+# it under the terms of the GNU General Public License as published by
+# the Free Software Foundation; either version 2 of the License, or
+# (at your option) any later version.
+#
+# This program is distributed in the hope that it will be useful,
+# but WITHOUT ANY WARRANTY; without even the implied warranty of
+# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+# GNU General Public License for more details.
+#
+# You should have received a copy of the GNU General Public License
+# along with this program; if not, write to the Free Software
+# Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA 02111-1307, USA.
+#
+
+#
+# This outputs an iCalendar file containing one event in each timezone,
+# as well as all the VTIMEZONEs. We use it for testing compatability with
+# other iCalendar apps like Outlook, by trying to import it there.
+#
+# Currently we have 377 timezones (with tzdata2001d).
+#
+
+# Set this to the toplevel directory of the VTIMEZONE files.
+$ZONEINFO_DIR = "/home/damon/src/zoneinfo";
+
+$output_file = "calendar.ics";
+
+
+# Save this so we can restore it later.
+$input_record_separator = $/;
+
+chdir $ZONEINFO_DIR
+    || die "Can't cd to $ZONEINFO_DIR";
+
+# Create the output file, to contain all the VEVENTs & VTIMEZONEs.
+open (OUTPUTFILE, ">$output_file")
+    || die "Can't create file: $output_file";
+
+# Output the standard header.
+    print OUTPUTFILE <<EOF;
+BEGIN:VCALENDAR
+PRODID:-//Ximian//NONSGML Vzic Test//EN
+VERSION:2.0
+METHOD:PUBLISH
+EOF
+
+$zone_num = 0;
+
+# 365 days in a non-leap year.
+@days_in_month = ( 31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31 );
+
+foreach $file (`find -name "*.ics"`) {
+    # Get rid of './' at start and whitespace at end.
+    $file =~ s/^\.\///;
+    $file =~ s/\s+$//;
+
+    if ($file eq $output_file) {
+	next;
+    }
+
+#    print "File: $file\n";
+
+    # Get the VTIMEZONE data.
+    open (ZONEFILE, "$file")
+	|| die "Can't open file: $ZONEINFO_DIR/$file";
+    undef $/;
+    $vtimezone = <ZONEFILE>;
+    $/ = $input_record_separator;
+    close (ZONEFILE);
+
+    # Strip the stuff before and after the VTIMEZONE component
+    $vtimezone =~ s/^.*BEGIN:VTIMEZONE/BEGIN:VTIMEZONE/s;
+    $vtimezone =~ s/END:VTIMEZONE.*$/END:VTIMEZONE\n/s;
+
+    print OUTPUTFILE $vtimezone;
+
+    # Find the TZID.
+    $vtimezone =~ m/TZID:(.*)/;
+    $tzid = $1;
+#    print "TZID: $tzid\n";
+
+    # Find the location.
+    $file =~ m/(.*)\.ics/;
+    $location = $1;
+#    print "LOCATION: $location\n";
+
+    # Try to find the current UTC offset that Outlook will use.
+    # If there is an RRULE, we look for the first 2 TZOFFSETTO properties,
+    # else we just get the first one.
+    if ($vtimezone =~ m/RRULE/) {
+	$vtimezone =~ m/TZOFFSETTO:([+-]?\d+)/;
+	$tzoffsetto = $1;
+	$vtimezone =~ m/TZOFFSETFROM:([+-]?\d+)/;
+	$tzoffsetfrom = $1;
+	$tzoffset = "$tzoffsetfrom/$tzoffsetto";
+    } else {
+	$vtimezone =~ m/TZOFFSETTO:([+-]?\d+)/s;
+	$tzoffset = $1;
+    }
+#    print "TZOFFSET: $tzoffset\n";
+
+    # We put each event on a separate day in 2001 and Jan 2002.
+    $day_num = $zone_num;
+    if ($day_num >= 365) {
+	$year = 2002;
+	$day_num -= 365;
+    } else {
+	$year = 2001;
+    }
+    $month = -1;
+    for ($i = 0; $i < 12; $i++) {
+	if ($day_num < $days_in_month[$i]) {
+	    $month = $i;
+	    last;
+	}
+	$day_num -= $days_in_month[$i]
+    }
+    if ($month == -1) {
+	die "month = -1";
+    }
+
+    $month++;
+    $day_num++;
+    $date = sprintf ("%i%02i%02i", $year, $month, $day_num);
+#    print "Date: $date\n";
+
+    # Output a VEVENT using the timezone.
+    print OUTPUTFILE <<EOF;
+BEGIN:VEVENT
+UID:vzic-test-${zone_num}
+DTSTAMP:20010101T000000Z
+DTSTART;TZID=${tzid}:${date}T120000
+DTEND;TZID=${tzid}:${date}T130000
+RRULE:FREQ=MONTHLY;BYMONTHDAY=${day_num}
+SUMMARY:($tzoffset) ${location} 12:00-13:00 UTC 
+SEQUENCE:1
+END:VEVENT
+EOF
+
+    $zone_num++;
+
+    # Use this to stop after a certain number.
+#    last if ($zone_num == 100);
+}
+
+# Output the standard footer.
+    print OUTPUTFILE <<EOF;
+END:VCALENDAR
+EOF
+
+close (OUTPUTFILE);
+

Zmiany atrybutów dla: libkcal/libical/vzic-1.3/vzic-test.pl
___________________________________________________________________
Nazwa: svn:executable
   + *

Index: libkcal/libical/vzic-1.3/Makefile.org
===================================================================
--- libkcal/libical/vzic-1.3/Makefile.org	(.../tags/KDE/3.5.6/kdepim)	(wersja 0)
+++ libkcal/libical/vzic-1.3/Makefile.org	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -0,0 +1,89 @@
+
+#
+# You will need to set this to the directory that the Olson timezone data
+# files are in.
+#
+OLSON_DIR = /home/damon/src/olson/tzdata2006b
+
+
+# This is used as the PRODID property on the iCalendar files output.
+# It identifies the product which created the iCalendar objects.
+# So you need to substitute your own organization name and product.
+PRODUCT_ID = -//My Organization//NONSGML My Product//EN
+
+# This is what libical-evolution uses.
+#PRODUCT_ID = -//Ximian//NONSGML Evolution Olson-VTIMEZONE Converter//EN
+
+
+# This is used to create unique IDs for each VTIMEZONE component.
+# The prefix is put before each timezone city name. It should start and end
+# with a '/'. The first part, i.e. 'myorganization.org' below, should be
+# a unique vendor ID, e.g. use a hostname. The part after that can be
+# anything you want. We use a date and version number for libical. The %D
+# gets expanded to today's date. There is also a vzic-merge.pl which can be
+# used to merge changes into a master set of VTIMEZONEs. If a VTIMEZONE has
+# changed, it bumps the version number on the end of this prefix. */
+TZID_PREFIX = /myorganization.org/%D_1/
+
+# This is what libical-evolution uses.
+#TZID_PREFIX = /softwarestudio.org/Olson_%D_1/
+
+
+# Set any -I include directories to find the libical header files, and the
+# libical library to link with. You only need these if you want to run the
+# tests. You may need to change the '#include <ical.h>' line at the top of
+# test-vzic.c as well.
+LIBICAL_CFLAGS =
+LIBICAL_LDADD = -lical-evolution
+
+
+#
+# You shouldn't need to change the rest of the file.
+#
+
+GLIB_CFLAGS = `pkg-config --cflags glib-2.0`
+GLIB_LDADD = `pkg-config --libs glib-2.0`
+
+CFLAGS = -g -DOLSON_DIR=\"$(OLSON_DIR)\" -DPRODUCT_ID='"$(PRODUCT_ID)"' -DTZID_PREFIX='"$(TZID_PREFIX)"' $(GLIB_CFLAGS) $(LIBICAL_CFLAGS)
+
+OBJECTS = vzic.o vzic-parse.o vzic-dump.o vzic-output.o
+
+all: vzic
+
+vzic: $(OBJECTS)
+	$(CC) $(OBJECTS) $(GLIB_LDADD) -o vzic
+
+test-vzic: test-vzic.o
+	$(CC) test-vzic.o $(LIBICAL_LDADD) -o test-vzic
+
+# Dependencies.
+$(OBJECTS): vzic.h
+vzic.o vzic-parse.o: vzic-parse.h
+vzic.o vzic-dump.o: vzic-dump.h
+vzic.o vzic-output.o: vzic-output.h
+
+test-parse: vzic
+	./vzic-dump.pl $(OLSON_DIR)
+	./vzic --dump --pure
+	@echo
+	@echo "#"
+	@echo "# If either of these diff commands outputs anything there may be a problem."
+	@echo "#"
+	diff -ru zoneinfo/ZonesPerl zoneinfo/ZonesVzic
+	diff -ru zoneinfo/RulesPerl zoneinfo/RulesVzic
+
+test-changes: vzic test-vzic
+	./test-vzic --dump-changes
+	./vzic --dump-changes --pure
+	@echo
+	@echo "#"
+	@echo "# If this diff command outputs anything there may be a problem."
+	@echo "#"
+	diff -ru zoneinfo/ChangesVzic test-output
+
+clean:
+	-rm -rf vzic $(OBJECTS) *~ ChangesVzic RulesVzic ZonesVzic RulesPerl ZonesPerl test-vzic test-vzic.o
+
+.PHONY: clean perl-dump test-parse
+
+
Index: libkcal/libical/vzic-1.3/vzic-parse.c
===================================================================
--- libkcal/libical/vzic-1.3/vzic-parse.c	(.../tags/KDE/3.5.6/kdepim)	(wersja 0)
+++ libkcal/libical/vzic-1.3/vzic-parse.c	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -0,0 +1,901 @@
+/*
+ * Vzic - a program to convert Olson timezone database files into VZTIMEZONE
+ * files compatible with the iCalendar specification (RFC2445).
+ *
+ * Copyright (C) 2000-2001 Ximian, Inc.
+ * Copyright (C) 2003 Damon Chaplin.
+ *
+ * Author: Damon Chaplin <damon@gnome.org>
+ *
+ * This program is free software; you can redistribute it and/or modify
+ * it under the terms of the GNU General Public License as published by
+ * the Free Software Foundation; either version 2 of the License, or
+ * (at your option) any later version.
+ *
+ * This program is distributed in the hope that it will be useful,
+ * but WITHOUT ANY WARRANTY; without even the implied warranty of
+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+ * GNU General Public License for more details.
+ *
+ * You should have received a copy of the GNU General Public License
+ * along with this program; if not, write to the Free Software
+ * Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA 02111-1307, USA.
+ */
+
+#include <ctype.h>
+#include <limits.h>
+#include <stdio.h>
+#include <string.h>
+
+#include "vzic.h"
+#include "vzic-parse.h"
+
+/* This is the maximum line length we allow. */
+#define MAX_LINE_LEN	1024
+
+/* The maximum number of fields on a line. */
+#define MAX_FIELDS	12
+
+
+typedef enum
+{
+  ZONE_ID		= 0,	/* The 'Zone' at the start of the line. */
+  ZONE_NAME		= 1,
+  ZONE_GMTOFF		= 2,
+  ZONE_RULES_SAVE	= 3,
+  ZONE_FORMAT		= 4,
+  ZONE_UNTIL_YEAR	= 5,
+  ZONE_UNTIL_MONTH	= 6,
+  ZONE_UNTIL_DAY	= 7,
+  ZONE_UNTIL_TIME	= 8
+} ZoneFieldNumber;
+
+
+typedef enum
+{
+  RULE_ID		= 0,	/* The 'Rule' at the start of the line. */
+  RULE_NAME		= 1,
+  RULE_FROM		= 2,
+  RULE_TO		= 3,
+  RULE_TYPE		= 4,
+  RULE_IN		= 5,
+  RULE_ON		= 6,
+  RULE_AT		= 7,
+  RULE_SAVE		= 8,
+  RULE_LETTER_S		= 9
+} RuleFieldNumber;
+
+
+typedef enum
+{
+  LINK_ID		= 0,	/* The 'Link' at the start of the line. */
+  LINK_FROM		= 1,
+  LINK_TO		= 2
+} LinkFieldNumber;
+
+
+/* This struct contains information used while parsing the files, and is
+   passed to most parsing functions. */
+typedef struct _ParsingData ParsingData;
+struct _ParsingData
+{
+  /* This is the line being parsed. buffer is a copy that we break into fields
+     and sub-fields as it is parsed. */
+  char	line[MAX_LINE_LEN];
+  char	buffer[MAX_LINE_LEN];
+
+  /* These are pointers to the start of each field in buffer. */
+  char *fields[MAX_FIELDS];
+  int	num_fields;
+
+  /* These are just for producing error messages. */
+  char *filename;
+  int	line_number;
+
+
+  /* This is an array of ZoneData structs, 1 for each timezone read. */
+  GArray *zone_data;
+
+  /* This is a hash table of arrays of RuleData structs. As each Rule line is
+     read in, a new RuleData struct is filled in and appended to the
+     appropriate GArray in the hash table. */
+  GHashTable *rule_data;
+
+  /* A hash containing data on the Link lines. The keys are the timezones
+     where the link is from (i.e. the timezone we will be outputting anyway)
+     and the data is a GList of timezones to link to (where we will copy the
+     timezone data to). */
+  GHashTable *link_data;
+
+  int	max_until_year;
+};
+
+
+/*
+ * Parsing functions, used when reading the Olson timezone data file.
+ */
+static void	parse_fields			(ParsingData	*data);
+static gboolean	parse_zone_line			(ParsingData	*data);
+static gboolean	parse_zone_continuation_line	(ParsingData	*data);
+static gboolean parse_zone_common		(ParsingData	*data,
+						 int		 offset);
+static void	parse_rule_line			(ParsingData	*data);
+static void	parse_link_line			(ParsingData	*data);
+
+static int	parse_year			(ParsingData	*data,
+						 char		*field,
+						 gboolean	 accept_only,
+						 int		 only_value);
+static int	parse_month			(ParsingData	*data,
+						 char		*field);
+static DayCode	parse_day			(ParsingData	*data,
+						 char		*field,
+						 int		*day,
+						 int		*weekday);
+static int	parse_weekday			(ParsingData	*data,
+						 char		*field);
+static int	parse_time			(ParsingData	*data,
+						 char		*field,
+						 TimeCode	*time_code);
+static int	parse_number			(ParsingData	*data,
+						 char	       **num);
+static int	parse_rules_save		(ParsingData	*data,
+						 char		*field,
+						 char	       **rules);
+
+static void	parse_coord			(char		*coord,
+						 int		 len,
+						 int		*result);
+
+void
+parse_olson_file		(char		*filename,
+				 GArray	       **zone_data,
+				 GHashTable    **rule_data,
+				 GHashTable    **link_data,
+				 int		*max_until_year)
+{
+  ParsingData data;
+  FILE *fp;
+  int zone_continues = 0;
+
+  *zone_data = g_array_new (FALSE, FALSE, sizeof (ZoneData));
+  *rule_data = g_hash_table_new (g_str_hash, g_str_equal);
+  *link_data = g_hash_table_new (g_str_hash, g_str_equal);
+
+  fp = fopen (filename, "r");
+  if (!fp) {
+    fprintf (stderr, "Couldn't open file: %s\n", filename);
+    exit (1);
+  }
+
+  data.filename = filename;
+  data.zone_data = *zone_data;
+  data.rule_data = *rule_data;
+  data.link_data = *link_data;
+  data.max_until_year = 0;
+
+  for (data.line_number = 0; ; data.line_number++) {
+    if (fgets (data.line, sizeof (data.line), fp) != data.line)
+      break;
+
+    strcpy (data.buffer, data.line);
+
+    parse_fields (&data);
+    if (data.num_fields == 0)
+      continue;
+
+    if (zone_continues) {
+      zone_continues = parse_zone_continuation_line (&data);
+    } else if (!strcmp (data.fields[0], "Zone")) {
+      zone_continues = parse_zone_line (&data);
+    } else if (!strcmp (data.fields[0], "Rule")) {
+      parse_rule_line (&data);
+    } else if (!strcmp (data.fields[0], "Link")) {
+      parse_link_line (&data);
+    } else if (!strcmp (data.fields[0], "Leap")) {
+      /* We don't care about Leap lines. */
+    } else {
+      fprintf (stderr, "%s:%i: Invalid line.\n%s\n", filename,
+	       data.line_number, data.line);
+      exit (1);
+    }
+  }
+
+  if (ferror (fp)) {
+    fprintf (stderr, "Error reading file: %s\n", filename);
+    exit (1);
+  }
+
+  if (zone_continues) {
+    fprintf (stderr, "%s:%i: Zone continuation line expected.\n%s\n",
+	     filename, data.line_number, data.line);
+    exit (1);
+  }
+
+  fclose (fp);
+
+#if 0
+  printf ("Max UNTIL year: %i\n", data.max_until_year);
+#endif
+  *max_until_year = data.max_until_year;
+}
+
+
+/* Converts the line into fields. */
+static void
+parse_fields			(ParsingData	*data)
+{
+  int i;
+  char *p, *s, ch;
+
+  /* Reset all fields to NULL. */
+  for (i = 0; i < MAX_FIELDS; i++)
+    data->fields[i] = 0;
+
+  data->num_fields = 0;
+  p = data->buffer;
+
+  for (;;) {
+    /* Skip whitespace. */
+    while (isspace (*p))
+      p++;
+
+    /* See if we have reached the end of the line or a comment. */
+    if (*p == '\0' || *p == '#')
+      break;
+
+    /* We must have another field, so save the start position. */
+    data->fields[data->num_fields++] = p;
+
+    /* Now find the end of the field. If the field contains '"' characters
+       they are removed and we have to move the rest of the chars back. */
+    s = p;
+    for (;;) {
+      ch = *p;
+      if (ch == '\0' || ch == '#') {
+	/* Don't move p on since this is the end of the line. */
+	*s = '\0';
+	break;
+      } else if (isspace (ch)) {
+	*s = '\0';
+	p++;
+	break;
+      } else if (ch == '"') {
+	p++;
+	for (;;) {
+	  ch = *p;
+	  if (ch == '\0') {
+	    fprintf (stderr,
+		     "%s:%i: Closing quote character ('\"') missing.\n%s\n",
+		     data->filename, data->line_number, data->line);
+	    exit (1);
+	  } else if (ch == '"') {
+	    p++;
+	    break;
+	  } else {
+	    *s++ = ch;
+	  }
+	  p++;
+	}	  
+      } else {
+	*s++ = ch;
+      }
+      p++;
+    }
+  }
+
+#if 0
+  printf ("%i fields: ", data->num_fields);
+  for (i = 0; i < data->num_fields; i++)
+    printf ("'%s' ", data->fields[i]);
+  printf ("\n");
+#endif
+}
+
+
+static gboolean
+parse_zone_line			(ParsingData	*data)
+{
+  ZoneData zone;
+
+  /* All 5 fields up to FORMAT must be present. */
+  if (data->num_fields < 5 || data->num_fields > 9) {
+	fprintf (stderr, "%s:%i: Invalid Zone line - %i fields.\n%s\n",
+		 data->filename, data->line_number, data->num_fields,
+		 data->line);
+	exit (1);
+  }
+
+  zone.zone_name = g_strdup (data->fields[ZONE_NAME]);
+  zone.zone_line_data = g_array_new (FALSE, FALSE, sizeof (ZoneLineData));
+
+  g_array_append_val (data->zone_data, zone);
+
+  return parse_zone_common (data, 0);
+}
+
+
+static gboolean
+parse_zone_continuation_line	(ParsingData	*data)
+{
+  /* All 3 fields up to FORMAT must be present. */
+  if (data->num_fields < 3 || data->num_fields > 7) {
+	fprintf (stderr,
+		 "%s:%i: Invalid Zone continuation line - %i fields.\n%s\n",
+		 data->filename, data->line_number, data->num_fields,
+		 data->line);
+	exit (1);
+  }
+
+  return parse_zone_common (data, -2);
+}
+
+
+static gboolean
+parse_zone_common		(ParsingData	*data,
+				 int		 offset)
+{
+  ZoneData *zone;
+  ZoneLineData zone_line;
+  TimeCode time_code;
+
+  zone_line.stdoff_seconds = parse_time (data,
+					 data->fields[ZONE_GMTOFF + offset],
+					 &time_code);
+  zone_line.save_seconds = parse_rules_save (data,
+					     data->fields[ZONE_RULES_SAVE + offset],
+					     &zone_line.rules);
+
+  if (!VzicPureOutput) {
+    /* We round the UTC offsets to the nearest minute, to be compatible with
+       Outlook. This also works with -ve numbers, I think.
+       -56 % 60 = -59. -61 % 60 = -1. */
+    if (zone_line.stdoff_seconds >= 0)
+      zone_line.stdoff_seconds += 30;
+    else
+      zone_line.stdoff_seconds -= 29;
+    zone_line.stdoff_seconds -= zone_line.stdoff_seconds % 60;
+
+    if (zone_line.save_seconds >= 0)
+      zone_line.save_seconds += 30;
+    else
+      zone_line.save_seconds -= 29;
+    zone_line.save_seconds -= zone_line.save_seconds % 60;
+  }
+
+  zone_line.format = g_strdup (data->fields[ZONE_FORMAT + offset]);
+
+  if (data->num_fields - offset >= 6) {
+    zone_line.until_set = TRUE;
+    zone_line.until_year = parse_year (data,
+				       data->fields[ZONE_UNTIL_YEAR + offset],
+				       FALSE, 0);
+    zone_line.until_month = parse_month (data,
+					 data->fields[ZONE_UNTIL_MONTH + offset]);
+    zone_line.until_day_code = parse_day (data,
+					  data->fields[ZONE_UNTIL_DAY + offset],
+					  &zone_line.until_day_number,
+					  &zone_line.until_day_weekday);
+    zone_line.until_time_seconds = parse_time (data,
+					       data->fields[ZONE_UNTIL_TIME + offset],
+					       &zone_line.until_time_code);
+
+    /* We also want to know the maximum year used in any UNTIL value, so we
+       know where to expand all the infinite Rule data to. */
+    if (zone_line.until_year != YEAR_MAXIMUM
+	&& zone_line.until_year != YEAR_MINIMUM)
+      data->max_until_year = MAX (data->max_until_year, zone_line.until_year);
+
+  } else {
+    zone_line.until_set = FALSE;
+  }
+
+  /* Append it to the last Zone, since that is the one we are currently
+     reading. */
+  zone = &g_array_index (data->zone_data, ZoneData, data->zone_data->len - 1);
+  g_array_append_val (zone->zone_line_data, zone_line);
+
+  return zone_line.until_set;
+}
+
+
+static void
+parse_rule_line			(ParsingData	*data)
+{
+  GArray *rule_array;
+  RuleData rule;
+  char *name;
+  TimeCode time_code;
+
+  /* All 10 fields must be present. */
+  if (data->num_fields != 10) {
+	fprintf (stderr, "%s:%i: Invalid Rule line - %i fields.\n%s\n",
+		 data->filename, data->line_number, data->num_fields,
+		 data->line);
+	exit (1);
+  }
+
+  name = data->fields[RULE_NAME];
+
+  /* Create the GArray and add it to the hash table if it doesn't already
+     exist. */
+  rule_array = g_hash_table_lookup (data->rule_data, name);
+  if (!rule_array) {
+    rule_array = g_array_new (FALSE, FALSE, sizeof (RuleData));
+    g_hash_table_insert (data->rule_data, g_strdup (name), rule_array);
+  }
+
+  rule.from_year = parse_year (data, data->fields[RULE_FROM], FALSE, 0);
+  if (rule.from_year == YEAR_MAXIMUM) {
+    fprintf (stderr, "%s:%i: Invalid Rule FROM value: '%s'\n",
+	     data->filename, data->line_number, data->fields[RULE_FROM]);
+    exit (1);
+  }
+
+  rule.to_year = parse_year (data, data->fields[RULE_TO], TRUE,
+			     rule.from_year);
+  if (rule.to_year == YEAR_MINIMUM) {
+    fprintf (stderr, "%s:%i: Invalid Rule TO value: %s\n",
+	     data->filename, data->line_number, data->fields[RULE_TO]);
+    exit (1);
+  }
+
+  if (!strcmp (data->fields[RULE_TYPE], "-"))
+    rule.type = NULL;
+  else {
+    printf ("Type: %s\n", data->fields[RULE_TYPE]);
+    rule.type = g_strdup (data->fields[RULE_TYPE]);
+  }
+
+  rule.in_month = parse_month (data, data->fields[RULE_IN]);
+  rule.on_day_code = parse_day (data, data->fields[RULE_ON],
+				&rule.on_day_number, &rule.on_day_weekday);
+  rule.at_time_seconds = parse_time (data, data->fields[RULE_AT],
+				     &rule.at_time_code);
+  rule.save_seconds = parse_time (data, data->fields[RULE_SAVE], &time_code);
+
+  if (!strcmp (data->fields[RULE_LETTER_S], "-")) {
+    rule.letter_s = NULL;
+  } else {
+    rule.letter_s = g_strdup (data->fields[RULE_LETTER_S]);
+  }
+
+  rule.is_shallow_copy = FALSE;
+
+  g_array_append_val (rule_array, rule);
+}
+
+
+static void
+parse_link_line			(ParsingData	*data)
+{
+  char *from, *to, *old_from;
+  GList *zone_list;
+
+  /* We must have 3 fields for a Link. */
+  if (data->num_fields != 3) {
+	fprintf (stderr, "%s:%i: Invalid Rule line - %i fields.\n%s\n",
+		 data->filename, data->line_number, data->num_fields,
+		 data->line);
+	exit (1);
+  }
+
+  from = data->fields[LINK_FROM];
+  to = data->fields[LINK_TO];
+
+#if 0
+  printf ("LINK FROM: %s\tTO: %s\n", from, to);
+#endif
+
+  if (g_hash_table_lookup_extended (data->link_data, from,
+				    (gpointer) &old_from,
+				    (gpointer) &zone_list)) {
+    from = old_from;
+  } else {
+    from = g_strdup (from);
+    zone_list = NULL;
+  }
+
+  zone_list = g_list_prepend (zone_list, g_strdup (to));
+
+  g_hash_table_insert (data->link_data, from, zone_list);
+}
+
+
+static int
+parse_year			(ParsingData	*data,
+				 char		*field,
+				 gboolean	 accept_only,
+				 int		 only_value)
+{
+  int len, year = 0;
+  char *p;
+
+  if (!field) {
+    fprintf (stderr, "%s:%i: Missing year.\n%s\n", data->filename,
+	     data->line_number, data->line);
+    exit (1);
+  }
+
+  len = strlen (field);
+  if (accept_only && !strncmp (field, "only", len))
+    return only_value;
+  if (len >= 2) {
+    if (!strncmp (field, "maximum", len))
+      return YEAR_MAXIMUM;
+    else if (!strncmp (field, "minimum", len))
+      return YEAR_MINIMUM;
+  }
+
+  for (p = field; *p; p++) {
+    if (*p < '0' || *p > '9') {
+	fprintf (stderr, "%s:%i: Invalid year: %s\n%s\n", data->filename,
+		 data->line_number, field, data->line);
+	exit (1);
+    }
+
+    year = year * 10 + *p - '0';
+  }
+
+  if (year < 1000 || year > 2037) {
+	fprintf (stderr, "%s:%i: Strange year: %s\n%s\n", data->filename,
+		 data->line_number, field, data->line);
+	exit (1);
+  }
+
+  return year;
+}
+
+
+/* Parses a month name, returning 0 (Jan) to 11 (Dec). */
+static int
+parse_month			(ParsingData	*data,
+				 char		*field)
+{
+  static char* months[] = { "january", "february", "march", "april", "may",
+			    "june", "july", "august", "september", "october",
+			    "november", "december" };
+  char *p;
+  int len, i;
+
+  /* If the field is missing, it must be the optional UNTIL month, so we return
+     0 for January. */
+  if (!field)
+    return 0;
+
+  for (p = field, len = 0; *p; p++, len++) {
+    *p = tolower (*p);
+  }
+
+  for (i = 0; i < 12; i++) {
+    if (!strncmp (field, months[i], len))
+      return i;
+  }
+
+  fprintf (stderr, "%s:%i: Invalid month: %s\n%s\n", data->filename,
+	   data->line_number, field, data->line);
+  exit (1);
+}
+
+
+/* Parses a day specifier, returning a code representing the type of match
+   together with a day of the month and a weekday number (0=Sun). */
+static DayCode
+parse_day			(ParsingData	*data,
+				 char		*field,
+				 int		*day,
+				 int		*weekday)
+{
+  char *day_part, *p;
+  DayCode day_code;
+
+  if (!field) {
+    *day = 1;
+    return DAY_SIMPLE;
+  }
+
+  *day = *weekday = 0;
+
+  if (!strncmp (field, "last", 4)) {
+    *weekday = parse_weekday (data, field + 4);
+    /* We set the day to the end of the month to make sorting Rules easy. */
+    *day = 31;
+    return DAY_LAST_WEEKDAY;
+  }
+
+  day_part = field;
+  day_code = DAY_SIMPLE;
+
+  for (p = field; *p; p++) {
+    if (*p == '<' || *p == '>') {
+      if (*(p + 1) == '=') {
+	day_code = (*p == '<') ? DAY_WEEKDAY_ON_OR_BEFORE
+	  : DAY_WEEKDAY_ON_OR_AFTER;
+	*p = '\0';
+	*weekday = parse_weekday (data, field);
+	day_part = p + 2;
+	break;
+      }
+      
+      fprintf (stderr, "%s:%i: Invalid day: %s\n%s\n", data->filename,
+	       data->line_number, field, data->line);
+      exit (1);
+    }
+  }
+
+  for (p = day_part; *p; p++) {
+    if (*p < '0' || *p > '9') {
+	fprintf (stderr, "%s:%i: Invalid day: %s\n%s\n", data->filename,
+		 data->line_number, field, data->line);
+	exit (1);
+    }
+
+    *day = *day * 10 + *p - '0';
+  }
+
+  if (*day < 1 || *day > 31) {
+    fprintf (stderr, "%s:%i: Invalid day: %s\n%s\n", data->filename,
+	     data->line_number, field, data->line);
+    exit (1);
+  }
+
+  return day_code;
+}
+
+
+/* Parses a weekday name, returning 0 (Sun) to 6 (Sat). */
+static int
+parse_weekday			(ParsingData	*data,
+				 char		*field)
+{
+  static char* weekdays[] = { "sunday", "monday", "tuesday", "wednesday",
+			      "thursday", "friday", "saturday" };
+  char *p;
+  int len, i;
+
+  for (p = field, len = 0; *p; p++, len++) {
+    *p = tolower (*p);
+  }
+
+  for (i = 0; i < 7; i++) {
+    if (!strncmp (field, weekdays[i], len))
+      return i;
+  }
+
+  fprintf (stderr, "%s:%i: Invalid weekday: %s\n%s\n", data->filename,
+	   data->line_number, field, data->line);
+  exit (1);
+}
+
+
+/* Parses a time (hour + minute + second) and returns the result in seconds,
+   together with a time code specifying whether it is Wall clock time,
+   local standard time, or universal time.
+   The time can start with a '-' in which case it will be negative. */
+static int
+parse_time			(ParsingData	*data,
+				 char		*field,
+				 TimeCode	*time_code)
+{
+  char *p;
+  int hours = 0, minutes = 0, seconds = 0, result, negative = 0;
+
+  if (!field) {
+    *time_code = TIME_WALL;
+    return 0;
+  }
+
+  p = field;
+  if (*p == '-') {
+    p++;
+    negative = 1;
+  }
+
+  hours = parse_number (data, &p);
+
+  if (*p == ':') {
+    p++;
+    minutes = parse_number (data, &p);
+
+    if (*p == ':') {
+      p++;
+      seconds = parse_number (data, &p);
+    }
+  }
+
+  if (hours < 0 || hours > 24
+      || minutes < 0 || minutes > 59
+      || seconds < 0 || seconds > 59
+      || (hours == 24 && (minutes != 0 || seconds != 0))) {
+    fprintf (stderr, "%s:%i: Invalid time: %s\n%s\n", data->filename,
+	     data->line_number, field, data->line);
+    exit (1);
+  }
+
+  if (hours == 24) {
+    hours = 23;
+    minutes = 59;
+    seconds = 59;
+  }
+
+#if 0
+  printf ("Time: %s -> %i:%02i:%02i\n", field, hours, minutes, seconds);
+#endif
+
+  result = hours * 3600 + minutes * 60 + seconds;
+  if (negative)
+    result = -result;
+
+  if (*p == '\0') {
+    *time_code = TIME_WALL;
+    return result;
+  }
+
+  if (*(p + 1) == '\0') {
+    if (*p == 'w') {
+      *time_code = TIME_WALL;
+      return result;
+    } else if (*p == 's') {
+      *time_code = TIME_STANDARD;
+      return result;
+    } else if (*p == 'u' || *p == 'g' || *p == 'z') {
+      *time_code = TIME_UNIVERSAL;
+      return result;
+    }
+  }
+
+  fprintf (stderr, "%s:%i: Invalid time: %s\n%s\n", data->filename,
+	   data->line_number, field, data->line);
+  exit (1);
+}
+
+
+/* Parses a simple number and returns the result. The pointer argument
+   is moved to the first character after the number. */
+static int
+parse_number			(ParsingData	*data,
+				 char	       **num)
+{
+  char *p;
+  int result;
+
+  p = *num;
+
+#if 0
+  printf ("In parse_number p:%s\n", p);
+#endif
+
+  if (*p < '0' || *p > '9') {
+    fprintf (stderr, "%s:%i: Invalid number: %s\n%s\n", data->filename,
+	     data->line_number, *num, data->line);
+    exit (1);
+  }
+
+  result = *p++ - '0';
+
+  while (*p >= '0' && *p <= '9')
+    result = result * 10 + *p++ - '0';
+
+  *num = p;
+  return result;
+}
+
+
+static int
+parse_rules_save		(ParsingData	*data,
+				 char		*field,
+				 char	       **rules)
+{
+  TimeCode time_code;
+
+  *rules = NULL;
+
+  /* Check for just "-". */
+  if (field[0] == '-' && field[1] == '\0')
+    return 0;
+
+  /* Check for a time to add to local standard time. We don't care about a
+     time code here, since it is just an offset. */
+  if (*field == '-' || (*field >= '0' && *field <= '9'))
+    return parse_time (data, field, &time_code);
+
+  /* It must be a rules name. */
+  *rules = g_strdup (field);
+  return 0;
+}
+
+
+
+
+
+GHashTable*
+parse_zone_tab			(char		*filename)
+{
+  GHashTable *zones_hash;
+  ZoneDescription *zone_desc;
+  FILE *fp;
+  char buf[4096];
+  gchar **fields, *zone_name, *latitude, *longitude, *p;
+
+
+  fp = fopen (filename, "r");
+  if (!fp) {
+    fprintf (stderr, "Couldn't open file: %s\n", filename);
+    exit (1);
+  }
+
+  zones_hash = g_hash_table_new (g_str_hash, g_str_equal);
+
+  while (fgets (buf, sizeof(buf), fp)) {
+    if (*buf == '#') continue;
+
+    g_strchomp (buf);
+    fields = g_strsplit (buf,"\t", 4);
+
+    if (strlen (fields[0]) != 2) {
+      fprintf (stderr, "Invalid zone description line: %s\n", buf);
+      exit (1);
+    }
+
+    zone_name = g_strdup (fields[2]);
+
+    zone_desc = g_new (ZoneDescription, 1);
+    zone_desc->country_code[0] = fields[0][0];
+    zone_desc->country_code[1] = fields[0][1];
+    zone_desc->comment = (fields[3] && fields[3][0]) ? g_strdup (fields[3])
+      : NULL;
+
+    /* Now parse the latitude and longitude. */
+    latitude = fields[1];
+    longitude = latitude + 1;
+    while (*longitude != '+' && *longitude != '-')
+      longitude++;
+
+    parse_coord (latitude, longitude - latitude, zone_desc->latitude);
+    parse_coord (longitude, strlen (longitude), zone_desc->longitude);
+
+    g_hash_table_insert (zones_hash, zone_name, zone_desc);
+
+#if 0
+    g_print ("Found zone: %s %i %02i %02i,%i %02i %02i\n", zone_name,
+	     zone_desc->latitude[0], zone_desc->latitude[1],
+	     zone_desc->latitude[2],
+	     zone_desc->longitude[0], zone_desc->longitude[1],
+	     zone_desc->longitude[2]);
+#endif
+  }
+
+  fclose (fp);
+
+  return zones_hash;
+}
+
+
+static void
+parse_coord			(char		*coord,
+				 int		 len,
+				 int		*result)
+{
+  int degrees = 0, minutes = 0, seconds = 0;
+
+  if (len == 5)
+    sscanf (coord + 1, "%2d%2d", &degrees, &minutes);
+  else if (len == 6)
+    sscanf (coord + 1, "%3d%2d", &degrees, &minutes);
+  else if (len == 7)
+    sscanf (coord + 1, "%2d%2d%2d", &degrees, &minutes, &seconds);
+  else if (len == 8)
+    sscanf (coord + 1, "%3d%2d%2d", &degrees, &minutes, &seconds);
+  else {
+    fprintf (stderr, "Invalid coordinate: %s\n", coord);
+    exit (1);
+  }
+
+  if (coord[0] == '-')
+    degrees = -degrees;
+
+  result[0] = degrees;
+  result[1] = minutes;
+  result[2] = seconds;
+}
+
Index: libkcal/libical/vzic-1.3/vzic-dump.h
===================================================================
--- libkcal/libical/vzic-1.3/vzic-dump.h	(.../tags/KDE/3.5.6/kdepim)	(wersja 0)
+++ libkcal/libical/vzic-1.3/vzic-dump.h	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -0,0 +1,58 @@
+/*
+ * Vzic - a program to convert Olson timezone database files into VZTIMEZONE
+ * files compatible with the iCalendar specification (RFC2445).
+ *
+ * Copyright (C) 2000-2001 Ximian, Inc.
+ * Copyright (C) 2003 Damon Chaplin.
+ *
+ * Author: Damon Chaplin <damon@gnome.org>
+ *
+ * This program is free software; you can redistribute it and/or modify
+ * it under the terms of the GNU General Public License as published by
+ * the Free Software Foundation; either version 2 of the License, or
+ * (at your option) any later version.
+ *
+ * This program is distributed in the hope that it will be useful,
+ * but WITHOUT ANY WARRANTY; without even the implied warranty of
+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+ * GNU General Public License for more details.
+ *
+ * You should have received a copy of the GNU General Public License
+ * along with this program; if not, write to the Free Software
+ * Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA 02111-1307, USA.
+ */
+
+/*
+ * These functions are for dumping all the parsed Zones and Rules to
+ * files, to be compared with the output of vzic-dump.pl to check our parsing
+ * code is OK. Some of the functions are also used for producing debugging
+ * output.
+ */
+
+#ifndef _VZIC_DUMP_H_
+#define _VZIC_DUMP_H_
+
+#include <glib.h>
+
+void		dump_zone_data			(GArray		*zone_data,
+						 char		*filename);
+void		dump_rule_data			(GHashTable	*rule_data,
+						 char		*filename);
+
+void		dump_rule_array			(char		*name,
+						 GArray		*rule_array,
+						 FILE		*fp);
+
+char*		dump_year			(int		year);
+char*		dump_day_coded			(DayCode	day_code,
+						 int		day_number,
+						 int		day_weekday);
+char*		dump_time			(int		 seconds,
+						 TimeCode	 time_code,
+						 gboolean	 use_zero);
+
+void		dump_time_zone_names		(GList		*names,
+						 char		*output_dir,
+						 GHashTable	*zones_hash);
+
+#endif /* _VZIC_DUMP_H_ */
Index: libkcal/libical/vzic-1.3/vzic-parse.h
===================================================================
--- libkcal/libical/vzic-1.3/vzic-parse.h	(.../tags/KDE/3.5.6/kdepim)	(wersja 0)
+++ libkcal/libical/vzic-1.3/vzic-parse.h	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -0,0 +1,38 @@
+/*
+ * Vzic - a program to convert Olson timezone database files into VZTIMEZONE
+ * files compatible with the iCalendar specification (RFC2445).
+ *
+ * Copyright (C) 2000-2001 Ximian, Inc.
+ * Copyright (C) 2003 Damon Chaplin.
+ *
+ * Author: Damon Chaplin <damon@gnome.org>
+ *
+ * This program is free software; you can redistribute it and/or modify
+ * it under the terms of the GNU General Public License as published by
+ * the Free Software Foundation; either version 2 of the License, or
+ * (at your option) any later version.
+ *
+ * This program is distributed in the hope that it will be useful,
+ * but WITHOUT ANY WARRANTY; without even the implied warranty of
+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+ * GNU General Public License for more details.
+ *
+ * You should have received a copy of the GNU General Public License
+ * along with this program; if not, write to the Free Software
+ * Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA 02111-1307, USA.
+ */
+
+#ifndef _VZIC_PARSE_H_
+#define _VZIC_PARSE_H_
+
+#include <glib.h>
+
+void		parse_olson_file		(char		*filename,
+						 GArray	       **zone_data,
+						 GHashTable    **rule_data,
+						 GHashTable    **link_data,
+						 int		*max_until_year);
+
+GHashTable*	parse_zone_tab			(char		*filename);
+
+#endif /* _VZIC_PARSE_H_ */
Index: libkcal/libical/vzic-1.3/test-vzic.c
===================================================================
--- libkcal/libical/vzic-1.3/test-vzic.c	(.../tags/KDE/3.5.6/kdepim)	(wersja 0)
+++ libkcal/libical/vzic-1.3/test-vzic.c	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -0,0 +1,422 @@
+/*
+ * Vzic - a program to convert Olson timezone database files into VZTIMEZONE
+ * files compatible with the iCalendar specification (RFC2445).
+ *
+ * Copyright (C) 2000-2001 Ximian, Inc.
+ * Copyright (C) 2003 Damon Chaplin.
+ *
+ * Author: Damon Chaplin <damon@gnome.org>
+ *
+ * This program is free software; you can redistribute it and/or modify
+ * it under the terms of the GNU General Public License as published by
+ * the Free Software Foundation; either version 2 of the License, or
+ * (at your option) any later version.
+ *
+ * This program is distributed in the hope that it will be useful,
+ * but WITHOUT ANY WARRANTY; without even the implied warranty of
+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+ * GNU General Public License for more details.
+ *
+ * You should have received a copy of the GNU General Public License
+ * along with this program; if not, write to the Free Software
+ * Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA 02111-1307, USA.
+ */
+
+/*
+ * test-vzic.c - test vzic + libical against mktime() and friends.
+ *
+ * Note that when we output VCALENDAR data compatible with Outlook the
+ * results aren't all correct.
+ *
+ * We have to modify some RRULEs which makes these timezones incorrect:
+ *
+ *   Africa/Cairo
+ *   America/Godthab
+ *   America/Santiago
+ *   Antarctica/Palmer
+ *   Asia/Baghdad
+ *   Asia/Damascus
+ *   Asia/Jerusalem
+ *
+ * Also, we can only output one RDATE or a pair of RRULEs which may make some
+ * other timezones incorrect sometimes (e.g. if they change).
+ */
+
+#include <sys/types.h>
+#include <sys/stat.h>
+#include <unistd.h>
+#include <errno.h>
+
+#include <ical.h>
+/*#include <evolution/ical.h>*/
+
+#define CHANGES_MAX_YEAR 2030
+
+/* These are the years between which we test against the Unix timezone
+   functions, inclusive. When using 'vzic --pure' you can test the full
+   range from 1970 to 2037 and it should match against mktime() etc.
+   (assuming you are using the same Olson timezone data for both).
+
+   But when using VTIMEZONE's that are compatible with Outlook, it is only
+   worth testing times in the future. There will be lots of differences in
+   the past, since we can't include any historical changes in the files. */
+#if 1
+#define DUMP_START_YEAR 2003
+#define DUMP_END_YEAR	2037
+#else
+#define DUMP_START_YEAR 1970
+#define DUMP_END_YEAR	2037
+#endif
+
+/* The maximum size of any complete pathname. */
+#define PATHNAME_BUFFER_SIZE	1024
+
+#ifndef	FALSE
+#define	FALSE	(0)
+#endif
+
+#ifndef	TRUE
+#define	TRUE	(!FALSE)
+#endif
+
+int VzicDumpChanges		= FALSE;
+
+/* We output beneath the current directory for now. */
+char *directory = "test-output";
+
+static void	usage				(void);
+static int	parse_zone_name			(char		*name,
+						 char	       **directory,
+						 char	       **subdirectory,
+						 char	       **filename);
+static void	ensure_directory_exists		(char		*directory);
+static void	dump_local_times		(icaltimezone	*zone,
+						 FILE		*fp);
+
+
+int main(int argc, char* argv[])
+{
+  icalarray *zones;
+  icaltimezone *zone;
+  char *zone_directory, *zone_subdirectory, *zone_filename, *location;
+  char output_directory[PATHNAME_BUFFER_SIZE];
+  char filename[PATHNAME_BUFFER_SIZE];
+  FILE *fp;
+  int i;
+  int skipping = TRUE;
+
+  /*
+   * Command-Line Option Parsing.
+   */
+  for (i = 1; i < argc; i++) {
+    /* --dump-changes: Dumps a list of times when each timezone changed,
+       and the new local time offset from UTC. */
+    if (!strcmp (argv[i], "--dump-changes"))
+      VzicDumpChanges = TRUE;
+
+    else
+      usage ();
+  }
+
+
+  zones = icaltimezone_get_builtin_timezones ();
+
+  ensure_directory_exists (directory);
+
+  for (i = 0; i < zones->num_elements; i++) {
+    zone = icalarray_element_at (zones, i);
+
+    location = icaltimezone_get_location (zone);
+
+#if 0
+    /* Use this to start at a certain zone. */
+    if (skipping && strcmp (location, "America/Boise"))
+      continue;
+#endif
+
+    skipping = FALSE;
+
+    /* Use this to only output data for certain timezones. */
+#if 0
+    if (strcmp (location, "America/Cancun")
+	&& strcmp (location, "Asia/Baku")
+	&& strcmp (location, "Asia/Nicosia")
+	&& strcmp (location, "Asia/Novosibirsk")
+	&& strcmp (location, "Asia/Samarkand")
+	&& strcmp (location, "Asia/Tashkent")
+	&& strcmp (location, "Asia/Tbilisi")
+	&& strcmp (location, "Asia/Yerevan")
+	&& strcmp (location, "Australia/Broken_Hill")
+	&& strcmp (location, "Europe/Simferopol")
+	&& strcmp (location, "Europe/Tallinn")
+	&& strcmp (location, "Europe/Zaporozhye")
+	)
+      continue;
+#endif
+
+#if 0
+    printf ("%s\n", location);
+#endif
+
+    parse_zone_name (location, &zone_directory, &zone_subdirectory,
+		     &zone_filename);
+
+    sprintf (output_directory, "%s/%s", directory, zone_directory);
+    ensure_directory_exists (output_directory);
+    sprintf (filename, "%s/%s", output_directory, zone_filename);
+
+    if (zone_subdirectory) {
+      sprintf (output_directory, "%s/%s/%s", directory, zone_directory,
+	       zone_subdirectory);
+      ensure_directory_exists (output_directory);
+      sprintf (filename, "%s/%s", output_directory, zone_filename);
+    }
+
+    fp = fopen (filename, "w");
+    if (!fp) {
+      fprintf (stderr, "Couldn't create file: %s\n", filename);
+      exit (1);
+    }
+
+    /* We can run 2 different tests - output all changes for each zone, or
+       test against mktime()/localtime(). Should have a command-line option
+       or something. */
+    if (VzicDumpChanges)
+      icaltimezone_dump_changes (zone, CHANGES_MAX_YEAR, fp);
+    else
+      dump_local_times (zone, fp);
+
+    if (ferror (fp)) {
+      fprintf (stderr, "Error writing file: %s\n", filename);
+      exit (1);
+    }
+
+    fclose (fp);
+  }
+
+  return 0;
+}
+
+
+static void
+usage				(void)
+{
+  fprintf (stderr, "Usage: test-vzic [--dump-changes]\n");
+
+  exit (1);
+}
+
+
+/* This checks that the Zone name only uses the characters in [-+_/a-zA-Z0-9],
+   and outputs a warning if it isn't. */
+static int
+parse_zone_name			(char		*name,
+				 char	       **directory,
+				 char	       **subdirectory,
+				 char	       **filename)
+{
+  static int invalid_zone_num = 1;
+
+  char *p, ch, *first_slash_pos = NULL, *second_slash_pos = NULL;
+  int invalid = FALSE;
+
+  for (p = name; (ch = *p) != 0; p++) {
+    if ((ch < 'a' || ch > 'z') && (ch < 'A' || ch > 'Z')
+	&& (ch < '0' || ch > '9') && ch != '/' && ch != '_'
+	&& ch != '-' && ch != '+') {
+      fprintf (stderr, "Warning: Unusual Zone name: %s\n", name);
+      invalid = TRUE;
+      break;
+    }
+
+    if (ch == '/') {
+      if (!first_slash_pos) {
+	first_slash_pos = p;
+      } else if (!second_slash_pos) {
+	second_slash_pos = p;
+      } else {
+	fprintf (stderr, "Warning: More than 2 '/' characters in Zone name: %s\n", name);
+	invalid = TRUE;
+	break;
+      }
+    }
+  }
+
+  if (!first_slash_pos) {
+	fprintf (stderr, "No '/' character in Zone name: %s. Skipping.\n", name);
+	return FALSE;
+  }
+
+  if (invalid) {
+    fprintf (stderr, "Invalid zone name: %s\n", name);
+    exit (0);
+  } else {
+    *first_slash_pos = '\0';
+    *directory = icalmemory_strdup (name);
+    *first_slash_pos = '/';
+
+    if (second_slash_pos) {
+      *second_slash_pos = '\0';
+      *subdirectory = icalmemory_strdup (first_slash_pos + 1);
+      *second_slash_pos = '/';
+
+      *filename = icalmemory_strdup (second_slash_pos + 1);
+    } else {
+      *subdirectory = NULL;
+      *filename = icalmemory_strdup (first_slash_pos + 1);
+    }
+  }
+}
+
+
+static void
+ensure_directory_exists		(char		*directory)
+{
+  struct stat filestat;
+
+  if (stat (directory, &filestat) != 0) {
+    /* If the directory doesn't exist, try to create it. */
+    if (errno == ENOENT) {
+      if (mkdir (directory, 0777) != 0) {
+	fprintf (stderr, "Can't create directory: %s\n", directory);
+	exit (1);
+      }
+    } else {
+      fprintf (stderr, "Error calling stat() on directory: %s\n", directory);
+      exit (1);
+    }
+  } else if (!S_ISDIR (filestat.st_mode)) {
+    fprintf (stderr, "Can't create directory, already exists: %s\n",
+	     directory);
+    exit (1);
+  }
+}
+
+
+static void
+dump_local_times (icaltimezone *zone, FILE *fp)
+{
+  static char *months[] = { "Jan", "Feb", "Mar", "Apr", "May", "Jun",
+			    "Jul", "Aug", "Sep", "Oct", "Nov", "Dec" };
+  icaltimezone *utc_timezone;
+  struct icaltimetype tt, tt_copy;
+  struct tm tm, local_tm;
+  time_t t;
+  char tzstring[256], *location;
+  int last_year_output = 0;
+  int total_error = 0, total_error2 = 0;
+
+  utc_timezone = icaltimezone_get_utc_timezone ();
+
+  /* This is our UTC time that we will use to iterate over the period. */
+  tt.year = DUMP_START_YEAR;
+  tt.month = 1;
+  tt.day = 1;
+  tt.hour = 0;
+  tt.minute = 0;
+  tt.second = 0;
+  tt.is_utc = 0;
+  tt.is_date = 0;
+  tt.zone = "";
+
+  tm.tm_year = tt.year - 1900;
+  tm.tm_mon = tt.month - 1;
+  tm.tm_mday = tt.day;
+  tm.tm_hour = tt.hour;
+  tm.tm_min = tt.minute;
+  tm.tm_sec = tt.second;
+  tm.tm_isdst = -1;
+
+  /* Convert it to a time_t by saying it is in UTC. */
+  putenv ("TZ=UTC");
+  t = mktime (&tm);
+
+  location = icaltimezone_get_location (zone);
+  sprintf (tzstring, "TZ=%s", location);
+
+  /*printf ("Zone: %s\n", location);*/
+  putenv (tzstring);
+
+  /* Loop around converting the UTC time to local time, outputting it, and
+     then adding on 15 minutes to the UTC time. */
+  while (tt.year <= DUMP_END_YEAR) {
+    if (tt.year > last_year_output) {
+      last_year_output = tt.year;
+#if 0
+      printf ("  %i\n", last_year_output);
+      fprintf (fp, "  %i\n", last_year_output);
+#endif
+    }
+
+#if 1
+    /* First use the Unix functions. */
+    /* Now convert it to a local time in the given timezone. */
+    local_tm = *localtime (&t);
+#endif
+
+#if 1
+    /* Now use libical. */
+    tt_copy = tt;
+    icaltimezone_convert_time (&tt_copy, utc_timezone, zone);
+#endif
+
+#if 1
+    if (local_tm.tm_year + 1900 != tt_copy.year
+	|| local_tm.tm_mon + 1 != tt_copy.month
+	|| local_tm.tm_mday != tt_copy.day
+	|| local_tm.tm_hour != tt_copy.hour
+	|| local_tm.tm_min != tt_copy.minute
+	|| local_tm.tm_sec != tt_copy.second) {
+
+      /* The error format is:
+
+     ERROR: Original-UTC-Time  Local-Time-From-mktime  Local-Time-From-Libical
+
+      */
+
+      total_error++;
+
+      fprintf (fp, "ERROR:%2i %s %04i %2i:%02i:%02i UTC",
+	       tt.day, months[tt.month - 1], tt.year,
+	       tt.hour, tt.minute, tt.second);
+      fprintf (fp, " ->%2i %s %04i %2i:%02i:%02i",
+	       local_tm.tm_mday, months[local_tm.tm_mon],
+	       local_tm.tm_year + 1900,
+	       local_tm.tm_hour, local_tm.tm_min, local_tm.tm_sec);
+      fprintf (fp, " Us:%2i %s %04i %2i:%02i:%02i\n",
+	       tt_copy.day, months[tt_copy.month - 1], tt_copy.year,
+	       tt_copy.hour, tt_copy.minute, tt_copy.second);
+    }
+#endif
+
+    /* Now convert it back, and check we get the original time. */
+    icaltimezone_convert_time (&tt_copy, zone, utc_timezone);
+    if (tt.year != tt_copy.year
+	|| tt.month != tt_copy.month
+	|| tt.day != tt_copy.day
+	|| tt.hour != tt_copy.hour
+	|| tt.minute != tt_copy.minute
+	|| tt.second != tt_copy.second) {
+
+      total_error2++;
+
+      fprintf (fp, "ERROR 2: %2i %s %04i %2i:%02i:%02i UTC",
+	       tt.day, months[tt.month - 1], tt.year,
+	       tt.hour, tt.minute, tt.second);
+      fprintf (fp, " Us:%2i %s %04i %2i:%02i:%02i UTC\n",
+	       tt_copy.day, months[tt_copy.month - 1], tt_copy.year,
+	       tt_copy.hour, tt_copy.minute, tt_copy.second);
+    }
+
+
+    /* Increment the time. */
+    icaltime_adjust (&tt, 0, 0, 15, 0);
+
+    /* We assume leap seconds are not included in time_t values, which should
+       be true on POSIX systems. */
+    t += 15 * 60;
+  }
+
+  printf ("Zone: %40s  Errors: %i (%i)\n", icaltimezone_get_location (zone),
+	  total_error, total_error2);
+}
Index: libkcal/libical/vzic-1.3/Makefile
===================================================================
--- libkcal/libical/vzic-1.3/Makefile	(.../tags/KDE/3.5.6/kdepim)	(wersja 0)
+++ libkcal/libical/vzic-1.3/Makefile	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -0,0 +1,83 @@
+
+#
+# You will need to set this to the directory that the Olson timezone data
+# files are in.
+#
+OLSON_DIR = ../tzdata
+
+
+# This is used as the PRODID property on the iCalendar files output.
+# It identifies the product which created the iCalendar objects.
+# So you need to substitute your own organization name and product.
+PRODUCT_ID = -//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
+
+
+# This is used to create unique IDs for each VTIMEZONE component.
+# The prefix is put before each timezone city name. It should start and end
+# with a '/'. The first part, i.e. 'myorganization.org' below, should be
+# a unique vendor ID, e.g. use a hostname. The part after that can be
+# anything you want. We use a date and version number for libical. The %D
+# gets expanded to today's date. There is also a vzic-merge.pl which can be
+# used to merge changes into a master set of VTIMEZONEs. If a VTIMEZONE has
+# changed, it bumps the version number on the end of this prefix. */
+TZID_PREFIX = /kde.org/Olson_%D_1/
+
+
+# Set any -I include directories to find the libical header files, and the
+# libical library to link with. You only need these if you want to run the
+# tests. You may need to change the '#include <ical.h>' line at the top of
+# test-vzic.c as well.
+LIBICAL_CFLAGS =
+LIBICAL_LDADD = -lical-evolution
+
+
+#
+# You shouldn't need to change the rest of the file.
+#
+
+GLIB_CFLAGS = `pkg-config --cflags glib-2.0`
+GLIB_LDADD = `pkg-config --libs glib-2.0`
+
+CFLAGS = -g -DOLSON_DIR=\"$(OLSON_DIR)\" -DPRODUCT_ID='"$(PRODUCT_ID)"' -DTZID_PREFIX='"$(TZID_PREFIX)"' $(GLIB_CFLAGS) $(LIBICAL_CFLAGS)
+
+OBJECTS = vzic.o vzic-parse.o vzic-dump.o vzic-output.o
+
+all: vzic
+
+vzic: $(OBJECTS)
+	$(CC) $(OBJECTS) $(GLIB_LDADD) -o vzic
+
+test-vzic: test-vzic.o
+	$(CC) test-vzic.o $(LIBICAL_LDADD) -o test-vzic
+
+# Dependencies.
+$(OBJECTS): vzic.h
+vzic.o vzic-parse.o: vzic-parse.h
+vzic.o vzic-dump.o: vzic-dump.h
+vzic.o vzic-output.o: vzic-output.h
+
+test-parse: vzic
+	./vzic-dump.pl $(OLSON_DIR)
+	./vzic --dump --pure
+	@echo
+	@echo "#"
+	@echo "# If either of these diff commands outputs anything there may be a problem."
+	@echo "#"
+	diff -ru zoneinfo/ZonesPerl zoneinfo/ZonesVzic
+	diff -ru zoneinfo/RulesPerl zoneinfo/RulesVzic
+
+test-changes: vzic test-vzic
+	./test-vzic --dump-changes
+	./vzic --dump-changes --pure
+	@echo
+	@echo "#"
+	@echo "# If this diff command outputs anything there may be a problem."
+	@echo "#"
+	diff -ru zoneinfo/ChangesVzic test-output
+
+clean:
+	-rm -rf vzic $(OBJECTS) *~ ChangesVzic RulesVzic ZonesVzic RulesPerl ZonesPerl test-vzic test-vzic.o
+
+.PHONY: clean perl-dump test-parse
+
+
Index: libkcal/recurrence.cpp
===================================================================
--- libkcal/recurrence.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/recurrence.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -184,7 +184,7 @@
 
 bool Recurrence::doesRecur() const
 {
-  return !mRRules.isEmpty();
+  return !mRRules.isEmpty() || !mRDates.isEmpty() || !mRDateTimes.isEmpty();
 }
 
 ushort Recurrence::recurrenceType() const
Index: libkcal/icalformatimpl.cpp
===================================================================
--- libkcal/icalformatimpl.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/icalformatimpl.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -257,7 +257,7 @@
   //Loops through all the periods in the freebusy object
   QValueList<Period> list = freebusy->busyPeriods();
   QValueList<Period>::Iterator it;
-  icalperiodtype period;
+  icalperiodtype period = icalperiodtype_null_period();
   for (it = list.begin(); it!= list.end(); ++it) {
     period.start = writeICalDateTime((*it).start());
     if ( (*it).hasDuration() ) {
@@ -318,16 +318,22 @@
   // unique id
   // If the scheduling ID is different from the real UID, the real
   // one is stored on X-REALID above
-  icalcomponent_add_property(parent,icalproperty_new_uid(
-      incidence->schedulingID().utf8()));
+  if ( !incidence->schedulingID().isEmpty() ) {
+    icalcomponent_add_property(parent,icalproperty_new_uid(
+        incidence->schedulingID().utf8()));
+  }
 
   // revision
-  icalcomponent_add_property(parent,icalproperty_new_sequence(
-      incidence->revision()));
+  if ( incidence->revision() > 0 ) { // 0 is default, so don't write that out
+    icalcomponent_add_property(parent,icalproperty_new_sequence(
+        incidence->revision()));
+  }
 
   // last modification date
-  icalcomponent_add_property(parent,icalproperty_new_lastmodified(
-      writeICalDateTime(incidence->lastModified())));
+  if ( incidence->lastModified().isValid() ) {
+   icalcomponent_add_property(parent,icalproperty_new_lastmodified(
+       writeICalDateTime(incidence->lastModified())));
+  }
 
   // description
   if (!incidence->description().isEmpty()) {
@@ -385,11 +391,15 @@
       secClass = ICAL_CLASS_PRIVATE;
       break;
   }
-  icalcomponent_add_property(parent,icalproperty_new_class(secClass));
+  if ( secClass != ICAL_CLASS_PUBLIC ) {
+    icalcomponent_add_property(parent,icalproperty_new_class(secClass));
+  }
 
   // priority
-  icalcomponent_add_property(parent,icalproperty_new_priority(
-      incidence->priority()));
+  if ( incidence->priority() > 0 ) { // 0 is undefined priority
+    icalcomponent_add_property(parent,icalproperty_new_priority(
+        incidence->priority()));
+  }
 
   // categories
   QStringList categories = incidence->categories();
@@ -451,8 +461,9 @@
   // attachments
   Attachment::List attachments = incidence->attachments();
   Attachment::List::ConstIterator atIt;
-  for ( atIt = attachments.begin(); atIt != attachments.end(); ++atIt )
+  for ( atIt = attachments.begin(); atIt != attachments.end(); ++atIt ) {
     icalcomponent_add_property( parent, writeAttachment( *atIt ) );
+  }
 
   // alarms
   Alarm::List::ConstIterator alarmIt;
@@ -479,7 +490,9 @@
       writeICalDateTime( QDateTime::currentDateTime() ) ) );
 
   // organizer stuff
-  icalcomponent_add_property( parent, writeOrganizer( incidenceBase->organizer() ) );
+  if ( !incidenceBase->organizer().isEmpty() ) {
+    icalcomponent_add_property( parent, writeOrganizer( incidenceBase->organizer() ) );
+  }
 
   // attendees
   if ( incidenceBase->attendeeCount() > 0 ) {
@@ -517,7 +530,7 @@
   if (!organizer.name().isEmpty()) {
     icalproperty_add_parameter( p, icalparameter_new_cn(organizer.name().utf8()) );
   }
-  // TODO: Write dir, senty-by and language
+  // TODO: Write dir, sent-by and language
 
   return p;
 }
@@ -1079,6 +1092,9 @@
   icalparameter *p = 0;
 
   QString email = QString::fromUtf8(icalproperty_get_attendee(attendee));
+  if ( email.startsWith( "mailto:", false ) ) {
+    email = email.mid( 7 );
+  }
 
   QString name;
   QString uid = QString::null;
@@ -1162,7 +1178,7 @@
 Person ICalFormatImpl::readOrganizer( icalproperty *organizer )
 {
   QString email = QString::fromUtf8(icalproperty_get_organizer(organizer));
-  if ( email.startsWith("mailto:", false ) ) {
+  if ( email.startsWith( "mailto:", false ) ) {
     email = email.mid( 7 );
   }
   QString cn;
@@ -1191,11 +1207,11 @@
     if (isurl == 0)
       attachment = new Attachment((const char*)icalattach_get_data(a));
     else {
-      attachment = new Attachment(QString(icalattach_get_url(a)));
+      attachment = new Attachment(QString::fromUtf8(icalattach_get_url(a)));
     }
   }
   else if ( value_kind == ICAL_URI_VALUE ) {
-    attachment = new Attachment(QString(icalvalue_get_uri(icalproperty_get_value(attach))));
+    attachment = new Attachment(QString::fromUtf8(icalvalue_get_uri(icalproperty_get_value(attach))));
   }
 
   icalparameter *p = icalproperty_get_first_parameter(attach, ICAL_FMTTYPE_PARAMETER);
@@ -1313,7 +1329,7 @@
           if ( icaltime_is_date( rd.time ) ) {
             incidence->recurrence()->addRDate( readICalDate( rd.time ) );
           } else {
-            incidence->recurrence()->addRDateTime( readICalDateTime(rd.time ) );
+            incidence->recurrence()->addRDateTime( readICalDateTime( rd.time, tz ) );
           }
         } else {
           // TODO: RDates as period are not yet implemented!
@@ -1394,6 +1410,7 @@
   }
   // Fix incorrect alarm settings by other applications (like outloook 9)
   if ( mCompat ) mCompat->fixAlarms( incidence );
+
 }
 
 void ICalFormatImpl::readIncidenceBase(icalcomponent *parent,IncidenceBase *incidenceBase)
@@ -1654,6 +1671,9 @@
       // Only in EMAIL alarm
       case ICAL_ATTENDEE_PROPERTY: {
         QString email = QString::fromUtf8(icalproperty_get_attendee(p));
+        if ( email.startsWith("mailto:", false ) ) {
+          email = email.mid( 7 );
+        }
         QString name;
         icalparameter *param = icalproperty_get_first_parameter(p,ICAL_CN_PARAMETER);
         if (param) {
@@ -1777,9 +1797,14 @@
 QDateTime ICalFormatImpl::readICalDateTime( icaltimetype& t, icaltimezone* tz )
 {
 //   kdDebug(5800) << "ICalFormatImpl::readICalDateTime()" << endl;
-  if ( tz ) {
+  icaltimezone *zone = tz;
+  if ( tz && t.is_utc == 0 ) { // Only use the TZ if time is not UTC.
+    // FIXME: We'll need to make sure to apply the appropriate TZ, not just
+    //        the first one found.
     t.zone = tz;
     t.is_utc = (tz == icaltimezone_get_utc_timezone())?1:0;
+  } else {
+    zone = icaltimezone_get_utc_timezone();
   }
   //_dumpIcaltime( t );
 
@@ -1787,7 +1812,7 @@
   if ( !mParent->timeZoneId().isEmpty() && t.zone ) {
 //    kdDebug(5800) << "--- Converting time from: " << icaltimezone_get_tzid( const_cast<icaltimezone*>( t.zone ) ) << " (" << ICalDate2QDate(t) << ")." << endl;
     icaltimezone* viewTimeZone = icaltimezone_get_builtin_timezone ( mParent->timeZoneId().latin1() );
-    icaltimezone_convert_time(  &t, const_cast<icaltimezone*>( t.zone ), viewTimeZone );
+    icaltimezone_convert_time(  &t, zone, viewTimeZone );
 //    kdDebug(5800) << "--- Converted to zone " << mParent->timeZoneId() << " (" << ICalDate2QDate(t) << ")." << endl;
   }
 
Index: libkcal/tests/readandwrite.cpp
===================================================================
--- libkcal/tests/readandwrite.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/tests/readandwrite.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -67,10 +67,10 @@
   CalendarLocal cal( QString::fromLatin1("UTC") );
 
   if ( !cal.load( input ) ) return 1;
-	QString tz = cal.nonKDECustomProperty( "X-LibKCal-Testsuite-OutTZ" );
-	if ( !tz.isEmpty() ) {
-	  cal.setTimeZoneIdViewOnly( tz );
-	}
+  QString tz = cal.nonKDECustomProperty( "X-LibKCal-Testsuite-OutTZ" );
+  if ( !tz.isEmpty() ) {
+    cal.setTimeZoneIdViewOnly( tz );
+  }
   if ( !cal.save( output ) ) return 1;
 
   return 0;
Index: libkcal/tests/data/vCalendar/KOrganizer_vCalTestCase01.vcs.ical.ref
===================================================================
--- libkcal/tests/data/vCalendar/KOrganizer_vCalTestCase01.vcs.ical.ref	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/tests/data/vCalendar/KOrganizer_vCalTestCase01.vcs.ical.ref	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,21 +1,20 @@
-BEGIN:VCALENDAR
-PRODID:-//K Desktop Environment//NONSGML libkcal 3.5//EN
-VERSION:2.0
-BEGIN:VEVENT
-DTSTAMP:20050604T165650Z
-ORGANIZER:MAILTO:reinhold@kainhofer.com
-CREATED:20050520T105219Z
-UID:KOrganizer-45214176.303
-SEQUENCE:2
-LAST-MODIFIED:20050520T105815Z
-SUMMARY:20. Mai 2005\, 19-20 Uhr\, alle 3 Monate am -2. Fr\, 17 mal
-CLASS:PUBLIC
-PRIORITY:5
-RRULE:FREQ=MONTHLY;COUNT=17;INTERVAL=3;BYDAY=-2FR
-DTSTART:20050520T170000Z
-DTEND:20050520T180000Z
-TRANSP:OPAQUE
-END:VEVENT
-
-END:VCALENDAR
-
+BEGIN:VCALENDAR
+PRODID:-//K Desktop Environment//NONSGML libkcal 3.5//EN
+VERSION:2.0
+BEGIN:VEVENT
+DTSTAMP:20050604T165650Z
+ORGANIZER:MAILTO:reinhold@kainhofer.com
+CREATED:20050520T105219Z
+UID:KOrganizer-45214176.303
+SEQUENCE:2
+LAST-MODIFIED:20050520T105815Z
+SUMMARY:20. Mai 2005\, 19-20 Uhr\, alle 3 Monate am -2. Fr\, 17 mal
+PRIORITY:5
+RRULE:FREQ=MONTHLY;COUNT=17;INTERVAL=3;BYDAY=-2FR
+DTSTART:20050520T170000Z
+DTEND:20050520T180000Z
+TRANSP:OPAQUE
+END:VEVENT
+
+END:VCALENDAR
+
Index: libkcal/tests/data/vCalendar/KOrganizer_vCalTestCase11.vcs.ical.ref
===================================================================
--- libkcal/tests/data/vCalendar/KOrganizer_vCalTestCase11.vcs.ical.ref	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/tests/data/vCalendar/KOrganizer_vCalTestCase11.vcs.ical.ref	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,22 +1,21 @@
-BEGIN:VCALENDAR
-PRODID:-//K Desktop Environment//NONSGML libkcal 3.5//EN
-VERSION:2.0
-BEGIN:VEVENT
-DTSTAMP:20050604T165658Z
-ORGANIZER:MAILTO:reinhold@kainhofer.com
-CREATED:20050520T105525Z
-UID:KOrganizer-881198156.528
-SEQUENCE:3
-LAST-MODIFIED:20050520T105853Z
-SUMMARY:21. Mai 2005\, 12-13 Uhr\, jedes Jahre am 141. Tag im Jahr\, 17 
- mal
-CLASS:PUBLIC
-PRIORITY:5
-RRULE:FREQ=YEARLY;COUNT=17;BYYEARDAY=141
-DTSTART:20050521T100000Z
-DTEND:20050521T110000Z
-TRANSP:OPAQUE
-END:VEVENT
-
-END:VCALENDAR
-
+BEGIN:VCALENDAR
+PRODID:-//K Desktop Environment//NONSGML libkcal 3.5//EN
+VERSION:2.0
+BEGIN:VEVENT
+DTSTAMP:20050604T165658Z
+ORGANIZER:MAILTO:reinhold@kainhofer.com
+CREATED:20050520T105525Z
+UID:KOrganizer-881198156.528
+SEQUENCE:3
+LAST-MODIFIED:20050520T105853Z
+SUMMARY:21. Mai 2005\, 12-13 Uhr\, jedes Jahre am 141. Tag im Jahr\, 17 
+ mal
+PRIORITY:5
+RRULE:FREQ=YEARLY;COUNT=17;BYYEARDAY=141
+DTSTART:20050521T100000Z
+DTEND:20050521T110000Z
+TRANSP:OPAQUE
+END:VEVENT
+
+END:VCALENDAR
+
Index: libkcal/tests/data/vCalendar/KOrganizer_vCalTestCase03.vcs.ical.ref
===================================================================
--- libkcal/tests/data/vCalendar/KOrganizer_vCalTestCase03.vcs.ical.ref	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/tests/data/vCalendar/KOrganizer_vCalTestCase03.vcs.ical.ref	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,21 +1,20 @@
-BEGIN:VCALENDAR
-PRODID:-//K Desktop Environment//NONSGML libkcal 3.5//EN
-VERSION:2.0
-BEGIN:VEVENT
-DTSTAMP:20050604T165651Z
-ORGANIZER:MAILTO:reinhold@kainhofer.com
-CREATED:20050520T104909Z
-UID:KOrganizer-1943919749.348
-SEQUENCE:2
-LAST-MODIFIED:20050520T105735Z
-SUMMARY:20. Mai 2005\, 14-15 Uhr\, alle 2 Wochen am Di/Do\, 27 Mal
-CLASS:PUBLIC
-PRIORITY:5
-RRULE:FREQ=WEEKLY;COUNT=27;INTERVAL=2;BYDAY=TU,TH
-DTSTART:20050520T130000Z
-DTEND:20050520T140000Z
-TRANSP:OPAQUE
-END:VEVENT
-
-END:VCALENDAR
-
+BEGIN:VCALENDAR
+PRODID:-//K Desktop Environment//NONSGML libkcal 3.5//EN
+VERSION:2.0
+BEGIN:VEVENT
+DTSTAMP:20050604T165651Z
+ORGANIZER:MAILTO:reinhold@kainhofer.com
+CREATED:20050520T104909Z
+UID:KOrganizer-1943919749.348
+SEQUENCE:2
+LAST-MODIFIED:20050520T105735Z
+SUMMARY:20. Mai 2005\, 14-15 Uhr\, alle 2 Wochen am Di/Do\, 27 Mal
+PRIORITY:5
+RRULE:FREQ=WEEKLY;COUNT=27;INTERVAL=2;BYDAY=TU,TH
+DTSTART:20050520T130000Z
+DTEND:20050520T140000Z
+TRANSP:OPAQUE
+END:VEVENT
+
+END:VCALENDAR
+
Index: libkcal/tests/data/vCalendar/KOrganizer_vCalTestCase13.vcs.ical.ref
===================================================================
--- libkcal/tests/data/vCalendar/KOrganizer_vCalTestCase13.vcs.ical.ref	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/tests/data/vCalendar/KOrganizer_vCalTestCase13.vcs.ical.ref	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,22 +1,21 @@
-BEGIN:VCALENDAR
-PRODID:-//K Desktop Environment//NONSGML libkcal 3.5//EN
-VERSION:2.0
-BEGIN:VEVENT
-DTSTAMP:20050604T165659Z
-ORGANIZER:MAILTO:reinhold@kainhofer.com
-CREATED:20050520T105244Z
-UID:KOrganizer-1521406395.909
-SEQUENCE:1
-LAST-MODIFIED:20050520T105327Z
-SUMMARY:20. Mai 2005\, 20-21 Uhr\, alle 3 Monate am letzten Do\, bis 31. 
- 12. 2006
-CLASS:PUBLIC
-PRIORITY:5
-RRULE:FREQ=MONTHLY;UNTIL=20061231T000000Z;INTERVAL=3;BYDAY=-1TH
-DTSTART:20050520T180000Z
-DTEND:20050520T190000Z
-TRANSP:OPAQUE
-END:VEVENT
-
-END:VCALENDAR
-
+BEGIN:VCALENDAR
+PRODID:-//K Desktop Environment//NONSGML libkcal 3.5//EN
+VERSION:2.0
+BEGIN:VEVENT
+DTSTAMP:20050604T165659Z
+ORGANIZER:MAILTO:reinhold@kainhofer.com
+CREATED:20050520T105244Z
+UID:KOrganizer-1521406395.909
+SEQUENCE:1
+LAST-MODIFIED:20050520T105327Z
+SUMMARY:20. Mai 2005\, 20-21 Uhr\, alle 3 Monate am letzten Do\, bis 31. 
+ 12. 2006
+PRIORITY:5
+RRULE:FREQ=MONTHLY;UNTIL=20061231T000000Z;INTERVAL=3;BYDAY=-1TH
+DTSTART:20050520T180000Z
+DTEND:20050520T190000Z
+TRANSP:OPAQUE
+END:VEVENT
+
+END:VCALENDAR
+
Index: libkcal/tests/data/vCalendar/KOrganizer_vCalTestCase05.vcs.ical.ref
===================================================================
--- libkcal/tests/data/vCalendar/KOrganizer_vCalTestCase05.vcs.ical.ref	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/tests/data/vCalendar/KOrganizer_vCalTestCase05.vcs.ical.ref	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,22 +1,21 @@
-BEGIN:VCALENDAR
-PRODID:-//K Desktop Environment//NONSGML libkcal 3.5//EN
-VERSION:2.0
-BEGIN:VEVENT
-DTSTAMP:20050604T165652Z
-ORGANIZER:MAILTO:reinhold@kainhofer.com
-CREATED:20050520T104822Z
-UID:KOrganizer-428202830.752
-SEQUENCE:2
-LAST-MODIFIED:20050520T105740Z
-SUMMARY:20. Mai 2005\, 14-15 Uhr\, alle 2 Wochen am Mo/Mi/Fr\, bis 30. 
- Juni 2005
-CLASS:PUBLIC
-PRIORITY:5
-RRULE:FREQ=WEEKLY;UNTIL=20050630T000000Z;INTERVAL=2;BYDAY=MO,WE,FR
-DTSTART:20050520T120000Z
-DTEND:20050520T130000Z
-TRANSP:OPAQUE
-END:VEVENT
-
-END:VCALENDAR
-
+BEGIN:VCALENDAR
+PRODID:-//K Desktop Environment//NONSGML libkcal 3.5//EN
+VERSION:2.0
+BEGIN:VEVENT
+DTSTAMP:20050604T165652Z
+ORGANIZER:MAILTO:reinhold@kainhofer.com
+CREATED:20050520T104822Z
+UID:KOrganizer-428202830.752
+SEQUENCE:2
+LAST-MODIFIED:20050520T105740Z
+SUMMARY:20. Mai 2005\, 14-15 Uhr\, alle 2 Wochen am Mo/Mi/Fr\, bis 30. 
+ Juni 2005
+PRIORITY:5
+RRULE:FREQ=WEEKLY;UNTIL=20050630T000000Z;INTERVAL=2;BYDAY=MO,WE,FR
+DTSTART:20050520T120000Z
+DTEND:20050520T130000Z
+TRANSP:OPAQUE
+END:VEVENT
+
+END:VCALENDAR
+
Index: libkcal/tests/data/vCalendar/KOrganizer_vCalTestCase07.vcs.ical.ref
===================================================================
--- libkcal/tests/data/vCalendar/KOrganizer_vCalTestCase07.vcs.ical.ref	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/tests/data/vCalendar/KOrganizer_vCalTestCase07.vcs.ical.ref	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,21 +1,20 @@
-BEGIN:VCALENDAR
-PRODID:-//K Desktop Environment//NONSGML libkcal 3.5//EN
-VERSION:2.0
-BEGIN:VEVENT
-DTSTAMP:20050604T165653Z
-ORGANIZER:MAILTO:reinhold@kainhofer.com
-CREATED:20050520T105402Z
-UID:KOrganizer-1016383107.562
-SEQUENCE:3
-LAST-MODIFIED:20050520T105836Z
-SUMMARY:20. Mai 2005\, 22-23 Uhr\, alle 3 Jahre am 3. Freitag im Mai\, 17 
- mal (not possible in vCalendar -> no RRULE)
-CLASS:PUBLIC
-PRIORITY:5
-DTSTART:20050520T200000Z
-DTEND:20050520T210000Z
-TRANSP:OPAQUE
-END:VEVENT
-
-END:VCALENDAR
-
+BEGIN:VCALENDAR
+PRODID:-//K Desktop Environment//NONSGML libkcal 3.5//EN
+VERSION:2.0
+BEGIN:VEVENT
+DTSTAMP:20050604T165653Z
+ORGANIZER:MAILTO:reinhold@kainhofer.com
+CREATED:20050520T105402Z
+UID:KOrganizer-1016383107.562
+SEQUENCE:3
+LAST-MODIFIED:20050520T105836Z
+SUMMARY:20. Mai 2005\, 22-23 Uhr\, alle 3 Jahre am 3. Freitag im Mai\, 17 
+ mal (not possible in vCalendar -> no RRULE)
+PRIORITY:5
+DTSTART:20050520T200000Z
+DTEND:20050520T210000Z
+TRANSP:OPAQUE
+END:VEVENT
+
+END:VCALENDAR
+
Index: libkcal/tests/data/vCalendar/KOrganizer_vCalTestCase09.vcs.ical.ref
===================================================================
--- libkcal/tests/data/vCalendar/KOrganizer_vCalTestCase09.vcs.ical.ref	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/tests/data/vCalendar/KOrganizer_vCalTestCase09.vcs.ical.ref	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,21 +1,20 @@
-BEGIN:VCALENDAR
-PRODID:-//K Desktop Environment//NONSGML libkcal 3.5//EN
-VERSION:2.0
-BEGIN:VEVENT
-DTSTAMP:20050604T165655Z
-ORGANIZER:MAILTO:reinhold@kainhofer.com
-CREATED:20050520T105153Z
-UID:KOrganizer-712420734.1026
-SEQUENCE:3
-LAST-MODIFIED:20050520T105809Z
-SUMMARY:20. Mai 2005\, 18-19 Uhr\, alle 3 Monate am 3. Fr\, 17 mal
-CLASS:PUBLIC
-PRIORITY:5
-RRULE:FREQ=MONTHLY;COUNT=17;INTERVAL=3;BYDAY=3FR
-DTSTART:20050520T160000Z
-DTEND:20050520T170000Z
-TRANSP:OPAQUE
-END:VEVENT
-
-END:VCALENDAR
-
+BEGIN:VCALENDAR
+PRODID:-//K Desktop Environment//NONSGML libkcal 3.5//EN
+VERSION:2.0
+BEGIN:VEVENT
+DTSTAMP:20050604T165655Z
+ORGANIZER:MAILTO:reinhold@kainhofer.com
+CREATED:20050520T105153Z
+UID:KOrganizer-712420734.1026
+SEQUENCE:3
+LAST-MODIFIED:20050520T105809Z
+SUMMARY:20. Mai 2005\, 18-19 Uhr\, alle 3 Monate am 3. Fr\, 17 mal
+PRIORITY:5
+RRULE:FREQ=MONTHLY;COUNT=17;INTERVAL=3;BYDAY=3FR
+DTSTART:20050520T160000Z
+DTEND:20050520T170000Z
+TRANSP:OPAQUE
+END:VEVENT
+
+END:VCALENDAR
+
Index: libkcal/tests/data/vCalendar/KOrganizer_vCalTestCase10.vcs.ical.ref
===================================================================
--- libkcal/tests/data/vCalendar/KOrganizer_vCalTestCase10.vcs.ical.ref	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/tests/data/vCalendar/KOrganizer_vCalTestCase10.vcs.ical.ref	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,21 +1,20 @@
-BEGIN:VCALENDAR
-PRODID:-//K Desktop Environment//NONSGML libkcal 3.5//EN
-VERSION:2.0
-BEGIN:VEVENT
-DTSTAMP:20050604T165656Z
-ORGANIZER:MAILTO:reinhold@kainhofer.com
-CREATED:20050520T105331Z
-UID:KOrganizer-1059871846.769
-SEQUENCE:1
-LAST-MODIFIED:20050520T105400Z
-SUMMARY:20. Mai 2005\, 21-22 Uhr\, alle 2 Jahre am 24. Mai\, 13 mal
-CLASS:PUBLIC
-PRIORITY:5
-RRULE:FREQ=YEARLY;COUNT=13;INTERVAL=2;BYMONTH=5
-DTSTART:20050520T190000Z
-DTEND:20050520T200000Z
-TRANSP:OPAQUE
-END:VEVENT
-
-END:VCALENDAR
-
+BEGIN:VCALENDAR
+PRODID:-//K Desktop Environment//NONSGML libkcal 3.5//EN
+VERSION:2.0
+BEGIN:VEVENT
+DTSTAMP:20050604T165656Z
+ORGANIZER:MAILTO:reinhold@kainhofer.com
+CREATED:20050520T105331Z
+UID:KOrganizer-1059871846.769
+SEQUENCE:1
+LAST-MODIFIED:20050520T105400Z
+SUMMARY:20. Mai 2005\, 21-22 Uhr\, alle 2 Jahre am 24. Mai\, 13 mal
+PRIORITY:5
+RRULE:FREQ=YEARLY;COUNT=13;INTERVAL=2;BYMONTH=5
+DTSTART:20050520T190000Z
+DTEND:20050520T200000Z
+TRANSP:OPAQUE
+END:VEVENT
+
+END:VCALENDAR
+
Index: libkcal/tests/data/vCalendar/KOrganizer_vCalTestCase02.vcs.ical.ref
===================================================================
--- libkcal/tests/data/vCalendar/KOrganizer_vCalTestCase02.vcs.ical.ref	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/tests/data/vCalendar/KOrganizer_vCalTestCase02.vcs.ical.ref	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,21 +1,20 @@
-BEGIN:VCALENDAR
-PRODID:-//K Desktop Environment//NONSGML libkcal 3.5//EN
-VERSION:2.0
-BEGIN:VEVENT
-DTSTAMP:20050604T165700Z
-ORGANIZER:MAILTO:reinhold@kainhofer.com
-CREATED:20050520T105130Z
-UID:KOrganizer-1286451532.549
-SEQUENCE:2
-LAST-MODIFIED:20050520T105759Z
-SUMMARY:20. Mai 2005\, 17-18 Uhr\, alle 3 Monate am 20.\, 17 mal
-CLASS:PUBLIC
-PRIORITY:5
-RRULE:FREQ=MONTHLY;COUNT=17;INTERVAL=3;BYMONTHDAY=20
-DTSTART:20050520T150000Z
-DTEND:20050520T160000Z
-TRANSP:OPAQUE
-END:VEVENT
-
-END:VCALENDAR
-
+BEGIN:VCALENDAR
+PRODID:-//K Desktop Environment//NONSGML libkcal 3.5//EN
+VERSION:2.0
+BEGIN:VEVENT
+DTSTAMP:20050604T165700Z
+ORGANIZER:MAILTO:reinhold@kainhofer.com
+CREATED:20050520T105130Z
+UID:KOrganizer-1286451532.549
+SEQUENCE:2
+LAST-MODIFIED:20050520T105759Z
+SUMMARY:20. Mai 2005\, 17-18 Uhr\, alle 3 Monate am 20.\, 17 mal
+PRIORITY:5
+RRULE:FREQ=MONTHLY;COUNT=17;INTERVAL=3;BYMONTHDAY=20
+DTSTART:20050520T150000Z
+DTEND:20050520T160000Z
+TRANSP:OPAQUE
+END:VEVENT
+
+END:VCALENDAR
+
Index: libkcal/tests/data/vCalendar/KOrganizer_vCalTestCase12.vcs.ical.ref
===================================================================
--- libkcal/tests/data/vCalendar/KOrganizer_vCalTestCase12.vcs.ical.ref	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/tests/data/vCalendar/KOrganizer_vCalTestCase12.vcs.ical.ref	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,21 +1,20 @@
-BEGIN:VCALENDAR
-PRODID:-//K Desktop Environment//NONSGML libkcal 3.5//EN
-VERSION:2.0
-BEGIN:VEVENT
-DTSTAMP:20050604T165659Z
-ORGANIZER:MAILTO:reinhold@kainhofer.com
-CREATED:20050520T104758Z
-UID:KOrganizer-1078681338.495
-SEQUENCE:1
-LAST-MODIFIED:20050520T104819Z
-SUMMARY:20. Mai 2005\, 13-14 Uhr\, alle 3 Tage\, bis 30. Juni 2005
-CLASS:PUBLIC
-PRIORITY:5
-RRULE:FREQ=DAILY;UNTIL=20050630T000000Z;INTERVAL=3
-DTSTART:20050520T110000Z
-DTEND:20050520T120000Z
-TRANSP:OPAQUE
-END:VEVENT
-
-END:VCALENDAR
-
+BEGIN:VCALENDAR
+PRODID:-//K Desktop Environment//NONSGML libkcal 3.5//EN
+VERSION:2.0
+BEGIN:VEVENT
+DTSTAMP:20050604T165659Z
+ORGANIZER:MAILTO:reinhold@kainhofer.com
+CREATED:20050520T104758Z
+UID:KOrganizer-1078681338.495
+SEQUENCE:1
+LAST-MODIFIED:20050520T104819Z
+SUMMARY:20. Mai 2005\, 13-14 Uhr\, alle 3 Tage\, bis 30. Juni 2005
+PRIORITY:5
+RRULE:FREQ=DAILY;UNTIL=20050630T000000Z;INTERVAL=3
+DTSTART:20050520T110000Z
+DTEND:20050520T120000Z
+TRANSP:OPAQUE
+END:VEVENT
+
+END:VCALENDAR
+
Index: libkcal/tests/data/vCalendar/KOrganizer_vCalTestCase04.vcs.ical.ref
===================================================================
--- libkcal/tests/data/vCalendar/KOrganizer_vCalTestCase04.vcs.ical.ref	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/tests/data/vCalendar/KOrganizer_vCalTestCase04.vcs.ical.ref	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,22 +1,21 @@
-BEGIN:VCALENDAR
-PRODID:-//K Desktop Environment//NONSGML libkcal 3.5//EN
-VERSION:2.0
-BEGIN:VEVENT
-DTSTAMP:20050604T165651Z
-ORGANIZER:MAILTO:reinhold@kainhofer.com
-CREATED:20050520T105002Z
-UID:KOrganizer-776556232.395
-SEQUENCE:4
-LAST-MODIFIED:20050520T105750Z
-SUMMARY:20. Mai 2005\, 16-17 Uhr\, alle 3 Monate am 20.\, bis 30. Juni 
- 2006
-CLASS:PUBLIC
-PRIORITY:5
-RRULE:FREQ=MONTHLY;UNTIL=20060630T000000Z;INTERVAL=3;BYMONTHDAY=20
-DTSTART:20050520T140000Z
-DTEND:20050520T150000Z
-TRANSP:OPAQUE
-END:VEVENT
-
-END:VCALENDAR
-
+BEGIN:VCALENDAR
+PRODID:-//K Desktop Environment//NONSGML libkcal 3.5//EN
+VERSION:2.0
+BEGIN:VEVENT
+DTSTAMP:20050604T165651Z
+ORGANIZER:MAILTO:reinhold@kainhofer.com
+CREATED:20050520T105002Z
+UID:KOrganizer-776556232.395
+SEQUENCE:4
+LAST-MODIFIED:20050520T105750Z
+SUMMARY:20. Mai 2005\, 16-17 Uhr\, alle 3 Monate am 20.\, bis 30. Juni 
+ 2006
+PRIORITY:5
+RRULE:FREQ=MONTHLY;UNTIL=20060630T000000Z;INTERVAL=3;BYMONTHDAY=20
+DTSTART:20050520T140000Z
+DTEND:20050520T150000Z
+TRANSP:OPAQUE
+END:VEVENT
+
+END:VCALENDAR
+
Index: libkcal/tests/data/vCalendar/KOrganizer_vCalTestCase06.vcs.ical.ref
===================================================================
--- libkcal/tests/data/vCalendar/KOrganizer_vCalTestCase06.vcs.ical.ref	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/tests/data/vCalendar/KOrganizer_vCalTestCase06.vcs.ical.ref	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,21 +1,19 @@
-BEGIN:VCALENDAR
-PRODID:-//K Desktop Environment//NONSGML libkcal 3.5//EN
-VERSION:2.0
-BEGIN:VEVENT
-DTSTAMP:20050604T165652Z
-ORGANIZER:MAILTO:reinhold@kainhofer.com
-CREATED:20050520T104755Z
-UID:KOrganizer-872504546.272
-SEQUENCE:0
-LAST-MODIFIED:20050520T104755Z
-SUMMARY:20. Mai 2005\, 12-13 Uhr\, alle 3 Tage\, 50 mal
-CLASS:PUBLIC
-PRIORITY:5
-RRULE:FREQ=DAILY;COUNT=50;INTERVAL=3
-DTSTART:20050520T100000Z
-DTEND:20050520T110000Z
-TRANSP:OPAQUE
-END:VEVENT
-
-END:VCALENDAR
-
+BEGIN:VCALENDAR
+PRODID:-//K Desktop Environment//NONSGML libkcal 3.5//EN
+VERSION:2.0
+BEGIN:VEVENT
+DTSTAMP:20050604T165652Z
+ORGANIZER:MAILTO:reinhold@kainhofer.com
+CREATED:20050520T104755Z
+UID:KOrganizer-872504546.272
+LAST-MODIFIED:20050520T104755Z
+SUMMARY:20. Mai 2005\, 12-13 Uhr\, alle 3 Tage\, 50 mal
+PRIORITY:5
+RRULE:FREQ=DAILY;COUNT=50;INTERVAL=3
+DTSTART:20050520T100000Z
+DTEND:20050520T110000Z
+TRANSP:OPAQUE
+END:VEVENT
+
+END:VCALENDAR
+
Index: libkcal/tests/data/vCalendar/KOrganizer_vCalTestCase08.vcs.ical.ref
===================================================================
--- libkcal/tests/data/vCalendar/KOrganizer_vCalTestCase08.vcs.ical.ref	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/tests/data/vCalendar/KOrganizer_vCalTestCase08.vcs.ical.ref	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,21 +1,20 @@
-BEGIN:VCALENDAR
-PRODID:-//K Desktop Environment//NONSGML libkcal 3.5//EN
-VERSION:2.0
-BEGIN:VEVENT
-DTSTAMP:20050604T165654Z
-ORGANIZER:MAILTO:reinhold@kainhofer.com
-CREATED:20050520T105442Z
-UID:KOrganizer-1832470339.751
-SEQUENCE:1
-LAST-MODIFIED:20050520T105511Z
-SUMMARY:20. Mai 2005\, 23-24 Uhr\, alle 3 Jahre am vorletzten Freitag im 
- Mai\, 17 mal (not possible in vCalendar -> no RRULE)
-CLASS:PUBLIC
-PRIORITY:5
-DTSTART:20050520T210000Z
-DTEND:20050520T215900Z
-TRANSP:OPAQUE
-END:VEVENT
-
-END:VCALENDAR
-
+BEGIN:VCALENDAR
+PRODID:-//K Desktop Environment//NONSGML libkcal 3.5//EN
+VERSION:2.0
+BEGIN:VEVENT
+DTSTAMP:20050604T165654Z
+ORGANIZER:MAILTO:reinhold@kainhofer.com
+CREATED:20050520T105442Z
+UID:KOrganizer-1832470339.751
+SEQUENCE:1
+LAST-MODIFIED:20050520T105511Z
+SUMMARY:20. Mai 2005\, 23-24 Uhr\, alle 3 Jahre am vorletzten Freitag im 
+ Mai\, 17 mal (not possible in vCalendar -> no RRULE)
+PRIORITY:5
+DTSTART:20050520T210000Z
+DTEND:20050520T215900Z
+TRANSP:OPAQUE
+END:VEVENT
+
+END:VCALENDAR
+
Index: libkcal/tests/data/Compat/eGroupware.ics.ical.ref
===================================================================
--- libkcal/tests/data/Compat/eGroupware.ics.ical.ref	(.../tags/KDE/3.5.6/kdepim)	(wersja 0)
+++ libkcal/tests/data/Compat/eGroupware.ics.ical.ref	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -0,0 +1,22 @@
+BEGIN:VCALENDAR
+PRODID:-//K Desktop Environment//NONSGML libkcal 3.5//EN
+VERSION:2.0
+BEGIN:VEVENT
+DTSTAMP:20070228T155530Z
+ATTENDEE;CN=Tobias König;RSVP=FALSE;PARTSTAT=ACCEPTED;ROLE=CHAIR:mailto:
+ tobias.koenig@kde.de
+CREATED:20070228T090007Z
+UID:calendar-4862-e77d247cfc15c40e485acfa65f636e29
+LAST-MODIFIED:20070228T090006Z
+DESCRIPTION:Das ist eine längere Notiz\ndie über meherer Zeilen 
+ geht\nmit +49 1928309812/09283498
+SUMMARY:12345
+LOCATION:Dresden
+PRIORITY:5
+DTSTART:20070301T100000Z
+DTEND:20070301T110000Z
+TRANSP:OPAQUE
+END:VEVENT
+
+END:VCALENDAR
+
Index: libkcal/tests/data/Compat/Evolution_2.8.2_timezone_test.ics
===================================================================
--- libkcal/tests/data/Compat/Evolution_2.8.2_timezone_test.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 0)
+++ libkcal/tests/data/Compat/Evolution_2.8.2_timezone_test.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -0,0 +1,20 @@
+BEGIN:VCALENDAR
+CALSCALE:GREGORIAN
+PRODID:-//Ximian//NONSGML Evolution Calendar//EN
+VERSION:2.0
+X-LibKCal-Testsuite-OutTZ:Europe/London
+BEGIN:VEVENT
+UID:20070127T211005Z-13428-100-1-0@emsig
+DTSTAMP:20070127T211005Z
+DTSTART;TZID=/softwarestudio.org/Olson_20011030_5/Europe/London:
+ 20070127T120000
+DTEND;TZID=/softwarestudio.org/Olson_20011030_5/Europe/London:
+ 20070127T123000
+TRANSP:OPAQUE
+SEQUENCE:2
+SUMMARY:Nominal is 1200 to 1230 _GMT_ on 27 Jan 2007
+CLASS:PUBLIC
+CREATED:20070127T211013
+LAST-MODIFIED:20070127T211124
+END:VEVENT
+END:VCALENDAR

Zmiany atrybutów dla: libkcal/tests/data/Compat/Evolution_2.8.2_timezone_test.ics
___________________________________________________________________
Nazwa: svn:executable
   + *

Index: libkcal/tests/data/Compat/MSExchange.ics.ical.ref
===================================================================
--- libkcal/tests/data/Compat/MSExchange.ics.ical.ref	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/tests/data/Compat/MSExchange.ics.ical.ref	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,29 +1,27 @@
-BEGIN:VCALENDAR
-PRODID:-//K Desktop Environment//NONSGML libkcal 3.5//EN
-VERSION:2.0
-X-LibKCal-Testsuite-OutTZ:America/New_York
-BEGIN:VEVENT
-DTSTAMP:20040122T092702Z
-ORGANIZER;CN=Shaheedur Haque:MAILTO:srhaque@ncube.com
-X-MICROSOFT-CDO-ALLDAYEVENT:FALSE
-X-MICROSOFT-CDO-BUSYSTATUS:BUSY
-X-MICROSOFT-CDO-IMPORTANCE:1
-X-MICROSOFT-CDO-INSTTYPE:1
-X-MICROSOFT-CDO-INTENDEDSTATUS:BUSY
-X-MICROSOFT-CDO-OWNERAPPTID:-1
-CREATED:20031111T180542Z
-UID:CD0000008B9511D182D800C04FB1625D2F076BC90B1B8C4E89EAD0A2BC0FC5B7
-SEQUENCE:0
-LAST-MODIFIED:20031111T180554Z
-SUMMARY:Bob Bond's staff
-STATUS:TENTATIVE
-CLASS:PUBLIC
-PRIORITY:5
-RRULE:FREQ=WEEKLY;BYDAY=MO;WKST=SU
-DTSTART:20031110T180000Z
-DTEND:20031110T190000Z
-TRANSP:OPAQUE
-END:VEVENT
-
-END:VCALENDAR
-
+BEGIN:VCALENDAR
+PRODID:-//K Desktop Environment//NONSGML libkcal 3.5//EN
+VERSION:2.0
+X-LibKCal-Testsuite-OutTZ:America/New_York
+BEGIN:VEVENT
+DTSTAMP:20040122T092702Z
+ORGANIZER;CN=Shaheedur Haque:MAILTO:srhaque@ncube.com
+X-MICROSOFT-CDO-ALLDAYEVENT:FALSE
+X-MICROSOFT-CDO-BUSYSTATUS:BUSY
+X-MICROSOFT-CDO-IMPORTANCE:1
+X-MICROSOFT-CDO-INSTTYPE:1
+X-MICROSOFT-CDO-INTENDEDSTATUS:BUSY
+X-MICROSOFT-CDO-OWNERAPPTID:-1
+CREATED:20031111T180542Z
+UID:CD0000008B9511D182D800C04FB1625D2F076BC90B1B8C4E89EAD0A2BC0FC5B7
+LAST-MODIFIED:20031111T180554Z
+SUMMARY:Bob Bond's staff
+STATUS:TENTATIVE
+PRIORITY:5
+RRULE:FREQ=WEEKLY;BYDAY=MO;WKST=SU
+DTSTART:20031110T180000Z
+DTEND:20031110T190000Z
+TRANSP:OPAQUE
+END:VEVENT
+
+END:VCALENDAR
+
Index: libkcal/tests/data/Compat/Evolution_2.8.2_timezone_test.ics.ical.ref
===================================================================
--- libkcal/tests/data/Compat/Evolution_2.8.2_timezone_test.ics.ical.ref	(.../tags/KDE/3.5.6/kdepim)	(wersja 0)
+++ libkcal/tests/data/Compat/Evolution_2.8.2_timezone_test.ics.ical.ref	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -0,0 +1,18 @@
+BEGIN:VCALENDAR
+PRODID:-//K Desktop Environment//NONSGML libkcal 3.5//EN
+VERSION:2.0
+X-LibKCal-Testsuite-OutTZ:Europe/London
+BEGIN:VEVENT
+DTSTAMP:20070127T211005Z
+CREATED:20070127T211013
+UID:20070127T211005Z-13428-100-1-0@emsig
+SEQUENCE:2
+LAST-MODIFIED:20070127T211124
+SUMMARY:Nominal is 1200 to 1230 _GMT_ on 27 Jan 2007
+DTSTART:20070127T120000Z
+DTEND:20070127T123000Z
+TRANSP:OPAQUE
+END:VEVENT
+
+END:VCALENDAR
+
Index: libkcal/tests/data/Compat/Mozilla_1.0.ics.ical.ref
===================================================================
--- libkcal/tests/data/Compat/Mozilla_1.0.ics.ical.ref	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/tests/data/Compat/Mozilla_1.0.ics.ical.ref	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,89 +1,74 @@
-BEGIN:VCALENDAR
-PRODID:-//K Desktop Environment//NONSGML libkcal 3.5//EN
-VERSION:2.0
-BEGIN:VTODO
-DTSTAMP:20040518T105729Z
-ORGANIZER:MAILTO:
-CREATED:20040501T080000Z
-UID:26110226-9e9e-11d8-90c9-e6c8f9becdf7
-SEQUENCE:0
-LAST-MODIFIED:20040518T105729Z
-SUMMARY:Call Beacon to transfer funds
-STATUS:NEEDS-ACTION
-CLASS:PRIVATE
-PRIORITY:5
-DUE:20040505T111500Z
-DTSTART:20040505T101500Z
-PERCENT-COMPLETE:0
-END:VTODO
-
-BEGIN:VEVENT
-DTSTAMP:20040518T105729Z
-ORGANIZER:MAILTO:
-CREATED:20040518T105729Z
-UID:06ef0474-1dd2-11b2-853d-cc63771f70dd
-SEQUENCE:0
-LAST-MODIFIED:20040504T211728Z
-SUMMARY:Convivium at 2707 Anderson Dr\, Raleigh\, 27608
-STATUS:CONFIRMED
-CLASS:PRIVATE
-PRIORITY:5
-DTSTART:20040516T200000Z
-DTEND:20040516T220000Z
-TRANSP:OPAQUE
-END:VEVENT
-
-BEGIN:VEVENT
-DTSTAMP:20040518T105729Z
-ORGANIZER:MAILTO:
-X-MOZILLA-ALARM-DEFAULT-LENGTH:0
-CREATED:20040518T105729Z
-UID:896c9eb4-1dd2-11b2-b487-b1bef43989c3
-SEQUENCE:0
-LAST-MODIFIED:20040518T105729Z
-DESCRIPTION:15-501 E Durham\, lt Easttowne Dr\, 3rd left Providence\, 3rd 
- drive rt\, up on ste 200
-SUMMARY:Dental Exam
-STATUS:CONFIRMED
-CLASS:PRIVATE
-PRIORITY:5
-DTSTART:20040510T090000Z
-DTEND:20040510T110000Z
-TRANSP:OPAQUE
-END:VEVENT
-
-BEGIN:VEVENT
-DTSTAMP:20040518T105729Z
-ORGANIZER:MAILTO:
-CREATED:20040518T105729Z
-UID:918141053
-SEQUENCE:0
-LAST-MODIFIED:20040503T202715Z
-SUMMARY:Performance with Anne
-LOCATION:Raleigh
-STATUS:CONFIRMED
-CLASS:PRIVATE
-PRIORITY:5
-DTSTART:20040523T170000Z
-DTEND:20040523T200000Z
-TRANSP:OPAQUE
-END:VEVENT
-
-BEGIN:VEVENT
-DTSTAMP:20040518T105729Z
-ORGANIZER:MAILTO:
-CREATED:20040518T105729Z
-UID:9387e0e8-9ea1-11d8-86ed-b77ddbb7d081
-SEQUENCE:0
-LAST-MODIFIED:20040518T105729Z
-SUMMARY:Yemassee Graduation
-STATUS:CONFIRMED
-CLASS:PRIVATE
-PRIORITY:5
-DTSTART;VALUE=DATE:20040528
-DTEND;VALUE=DATE:20040529
-TRANSP:OPAQUE
-END:VEVENT
-
-END:VCALENDAR
-
+BEGIN:VCALENDAR
+PRODID:-//K Desktop Environment//NONSGML libkcal 3.5//EN
+VERSION:2.0
+BEGIN:VTODO
+DTSTAMP:20040518T105729Z
+CREATED:20040501T080000Z
+UID:26110226-9e9e-11d8-90c9-e6c8f9becdf7
+LAST-MODIFIED:20040518T105729Z
+SUMMARY:Call Beacon to transfer funds
+STATUS:NEEDS-ACTION
+CLASS:PRIVATE
+DUE:20040505T111500Z
+DTSTART:20040505T101500Z
+PERCENT-COMPLETE:0
+END:VTODO
+
+BEGIN:VEVENT
+DTSTAMP:20040518T105729Z
+CREATED:20040518T105729Z
+UID:06ef0474-1dd2-11b2-853d-cc63771f70dd
+LAST-MODIFIED:20040504T211728Z
+SUMMARY:Convivium at 2707 Anderson Dr\, Raleigh\, 27608
+STATUS:CONFIRMED
+CLASS:PRIVATE
+DTSTART:20040516T200000Z
+DTEND:20040516T220000Z
+TRANSP:OPAQUE
+END:VEVENT
+
+BEGIN:VEVENT
+DTSTAMP:20040518T105729Z
+X-MOZILLA-ALARM-DEFAULT-LENGTH:0
+CREATED:20040518T105729Z
+UID:896c9eb4-1dd2-11b2-b487-b1bef43989c3
+LAST-MODIFIED:20040518T105729Z
+DESCRIPTION:15-501 E Durham\, lt Easttowne Dr\, 3rd left Providence\, 3rd 
+ drive rt\, up on ste 200
+SUMMARY:Dental Exam
+STATUS:CONFIRMED
+CLASS:PRIVATE
+DTSTART:20040510T090000Z
+DTEND:20040510T110000Z
+TRANSP:OPAQUE
+END:VEVENT
+
+BEGIN:VEVENT
+DTSTAMP:20040518T105729Z
+CREATED:20040518T105729Z
+UID:918141053
+LAST-MODIFIED:20040503T202715Z
+SUMMARY:Performance with Anne
+LOCATION:Raleigh
+STATUS:CONFIRMED
+CLASS:PRIVATE
+DTSTART:20040523T170000Z
+DTEND:20040523T200000Z
+TRANSP:OPAQUE
+END:VEVENT
+
+BEGIN:VEVENT
+DTSTAMP:20040518T105729Z
+CREATED:20040518T105729Z
+UID:9387e0e8-9ea1-11d8-86ed-b77ddbb7d081
+LAST-MODIFIED:20040518T105729Z
+SUMMARY:Yemassee Graduation
+STATUS:CONFIRMED
+CLASS:PRIVATE
+DTSTART;VALUE=DATE:20040528
+DTEND;VALUE=DATE:20040529
+TRANSP:OPAQUE
+END:VEVENT
+
+END:VCALENDAR
+
Index: libkcal/tests/data/Compat/KOrganizer_3.1.ics.ical.ref
===================================================================
--- libkcal/tests/data/Compat/KOrganizer_3.1.ics.ical.ref	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/tests/data/Compat/KOrganizer_3.1.ics.ical.ref	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,272 +1,256 @@
-BEGIN:VCALENDAR
-PRODID:-//K Desktop Environment//NONSGML libkcal 3.5//EN
-VERSION:2.0
-BEGIN:VEVENT
-DTSTAMP:20040122T092700Z
-ORGANIZER:MAILTO:nobody@nowhere
-X-PILOTID:0
-X-PILOTSTAT:1
-CREATED:20031213T212933Z
-UID:KOrganizer-475330509.201
-SEQUENCE:0
-LAST-MODIFIED:20031213T212933Z
-DESCRIPTION:See Week 50 2003 for more events.\nRecur daily forever.\n
-SUMMARY:NAVIGATION EVENT
-CLASS:PUBLIC
-PRIORITY:5
-RRULE:FREQ=DAILY
-DTSTART:20031208T120000Z
-DTEND:20031208T130000Z
-TRANSP:OPAQUE
-END:VEVENT
-
-BEGIN:VEVENT
-DTSTAMP:20040122T092700Z
-ORGANIZER:MAILTO:nobody@nowhere
-X-PILOTID:0
-X-PILOTSTAT:1
-CREATED:20031213T212804Z
-UID:KOrganizer-465691683.1018
-SEQUENCE:0
-LAST-MODIFIED:20031213T212804Z
-SUMMARY:Recurring monthly until 1.1.2005
-CLASS:PUBLIC
-PRIORITY:5
-RRULE:FREQ=MONTHLY;UNTIL=20050101;BYMONTHDAY=11
-DTSTART:20031211T084500Z
-DTEND:20031211T103000Z
-TRANSP:OPAQUE
-END:VEVENT
-
-BEGIN:VEVENT
-DTSTAMP:20040122T092700Z
-ORGANIZER:MAILTO:nobody@nowhere
-X-PILOTID:0
-X-PILOTSTAT:1
-CREATED:20031213T213154Z
-UID:KOrganizer-1952016504.437
-SEQUENCE:1
-LAST-MODIFIED:20031213T213204Z
-SUMMARY:Birthday
-CLASS:PUBLIC
-PRIORITY:5
-CATEGORIES:Birthday
-RRULE:FREQ=YEARLY;BYMONTH=12
-DTSTART;VALUE=DATE:20031208
-DTEND;VALUE=DATE:20031209
-TRANSP:OPAQUE
-BEGIN:VALARM
-DESCRIPTION:
-ACTION:DISPLAY
-TRIGGER;VALUE=DURATION:-P1D
-END:VALARM
-
-END:VEVENT
-
-BEGIN:VEVENT
-DTSTAMP:20040122T092700Z
-ORGANIZER:MAILTO:nobody@nowhere
-X-PILOTID:0
-X-PILOTSTAT:1
-CREATED:20031213T212117Z
-UID:KOrganizer-856020879.491
-SEQUENCE:0
-LAST-MODIFIED:20031213T212117Z
-DESCRIPTION:9:30 - 11:15 (UTC)\nRecurring twice
-SUMMARY:Another Event
-CLASS:PUBLIC
-PRIORITY:5
-RRULE:FREQ=DAILY;COUNT=2
-DTSTART:20031209T093000Z
-DTEND:20031209T111500Z
-TRANSP:OPAQUE
-END:VEVENT
-
-BEGIN:VEVENT
-DTSTAMP:20040122T092700Z
-ORGANIZER:MAILTO:nobody@nowhere
-ATTENDEE;CN=Another Name;RSVP=TRUE;PARTSTAT=ACCEPTED;ROLE=NON-PARTICIPANT:
- mailto:two@yyy.yy
-ATTENDEE;CN=One Name;RSVP=FALSE;PARTSTAT=NEEDS-ACTION;
- ROLE=REQ-PARTICIPANT:mailto:one@xxx.xx
-X-PILOTID:0
-X-PILOTSTAT:1
-CREATED:20031213T212528Z
-UID:KOrganizer-2056335629.565
-SEQUENCE:1
-LAST-MODIFIED:20031213T212636Z
-DESCRIPTION:Reminder 13 minutes\nShow time as free\nCategory Special 
- Occasion\nAccess Private\nTwo attendees.\nAlert.wav sound alarm\n
-SUMMARY:Full Information Event
-LOCATION:This is a location
-CLASS:PRIVATE
-PRIORITY:5
-CATEGORIES:Special Occasion
-DTSTART:20031211T133000Z
-DTEND:20031211T154500Z
-TRANSP:OPAQUE
-BEGIN:VALARM
-ATTACH:/usr/share/apps/korganizer/sounds/alert.wav
-ACTION:AUDIO
-TRIGGER;VALUE=DURATION:-PT13M
-END:VALARM
-
-END:VEVENT
-
-BEGIN:VEVENT
-DTSTAMP:20040122T092700Z
-ORGANIZER:MAILTO:nobody@nowhere
-X-PILOTID:0
-X-PILOTSTAT:1
-CREATED:20031213T213318Z
-UID:KOrganizer-951116794.484
-SEQUENCE:0
-LAST-MODIFIED:20031213T213318Z
-DESCRIPTION:Recurring until 10.12.\nException 9.12.\n
-SUMMARY:Recurring with exception
-CLASS:PUBLIC
-PRIORITY:5
-RRULE:FREQ=DAILY;UNTIL=20031210
-EXDATE;VALUE=DATE:20031209
-DTSTART:20031208T163000Z
-DTEND:20031208T184500Z
-TRANSP:OPAQUE
-END:VEVENT
-
-BEGIN:VEVENT
-DTSTAMP:20040122T092700Z
-ORGANIZER:MAILTO:nobody@nowhere
-X-PILOTID:0
-X-PILOTSTAT:1
-CREATED:20031213T213357Z
-UID:KOrganizer-659286401.509
-SEQUENCE:1
-LAST-MODIFIED:20031213T213426Z
-SUMMARY:Recurring three times two days interval
-CLASS:PUBLIC
-PRIORITY:5
-RRULE:FREQ=DAILY;COUNT=3;INTERVAL=2
-DTSTART:20031208T194500Z
-DTEND:20031208T213000Z
-TRANSP:OPAQUE
-END:VEVENT
-
-BEGIN:VEVENT
-DTSTAMP:20040122T092700Z
-ORGANIZER:MAILTO:nobody@nowhere
-X-PILOTID:0
-X-PILOTSTAT:1
-CREATED:20031213T212707Z
-UID:KOrganizer-1025455571.504
-SEQUENCE:1
-LAST-MODIFIED:20031213T212727Z
-DESCRIPTION:Recurring weekly three times on wednesday
-SUMMARY:Recurring weekly
-CLASS:PUBLIC
-PRIORITY:5
-RRULE:FREQ=WEEKLY;COUNT=3;BYDAY=WE
-DTSTART:20031210T073000Z
-DTEND:20031210T083000Z
-TRANSP:OPAQUE
-END:VEVENT
-
-BEGIN:VEVENT
-DTSTAMP:20040122T092700Z
-ORGANIZER:MAILTO:nobody@nowhere
-X-PILOTID:0
-X-PILOTSTAT:1
-CREATED:20031213T162226Z
-UID:KOrganizer-406380218.717
-SEQUENCE:1
-LAST-MODIFIED:20031213T212040Z
-DESCRIPTION:10:00 - 13:30 (UTC)\n
-SUMMARY:An Event
-CLASS:PUBLIC
-PRIORITY:5
-DTSTART:20031213T100000Z
-DTEND:20031213T133000Z
-TRANSP:OPAQUE
-END:VEVENT
-
-BEGIN:VEVENT
-DTSTAMP:20040122T092700Z
-ORGANIZER:MAILTO:nobody@nowhere
-X-PILOTID:0
-X-PILOTSTAT:1
-CREATED:20031213T212311Z
-UID:KOrganizer-1927781860.81
-SEQUENCE:2
-LAST-MODIFIED:20031213T212315Z
-DESCRIPTION:Three day all-day event.\n
-SUMMARY:All day 3
-CLASS:PUBLIC
-PRIORITY:5
-DTSTART;VALUE=DATE:20031210
-DTEND;VALUE=DATE:20031213
-TRANSP:OPAQUE
-END:VEVENT
-
-BEGIN:VEVENT
-DTSTAMP:20040122T092700Z
-ORGANIZER:MAILTO:nobody@nowhere
-X-PILOTID:0
-X-PILOTSTAT:1
-CREATED:20031213T212250Z
-UID:KOrganizer-1744115041.851
-SEQUENCE:2
-LAST-MODIFIED:20031213T212259Z
-DESCRIPTION:Two day all-day event.\n
-SUMMARY:All Day 2
-CLASS:PUBLIC
-PRIORITY:5
-DTSTART;VALUE=DATE:20031209
-DTEND;VALUE=DATE:20031211
-TRANSP:OPAQUE
-END:VEVENT
-
-BEGIN:VEVENT
-DTSTAMP:20040122T092700Z
-ORGANIZER:MAILTO:nobody@nowhere
-X-PILOTID:0
-X-PILOTSTAT:1
-CREATED:20031213T213054Z
-UID:KOrganizer-1149443407.784
-SEQUENCE:1
-LAST-MODIFIED:20031213T213109Z
-DESCRIPTION:12.12. 17:15 to 13.12. 19:15\n1 hour alarm
-SUMMARY:Multi-Day Event with Start/End Time
-CLASS:PUBLIC
-PRIORITY:5
-DTSTART:20031212T171500Z
-DTEND:20031213T191500Z
-TRANSP:OPAQUE
-BEGIN:VALARM
-DESCRIPTION:
-ACTION:DISPLAY
-TRIGGER;VALUE=DURATION:-PT1H
-END:VALARM
-
-END:VEVENT
-
-BEGIN:VEVENT
-DTSTAMP:20040122T092700Z
-ORGANIZER:MAILTO:nobody@nowhere
-X-PILOTID:0
-X-PILOTSTAT:1
-CREATED:20031213T212219Z
-UID:KOrganizer-182017314.321
-SEQUENCE:2
-LAST-MODIFIED:20031213T212229Z
-DESCRIPTION:One day all-day event.\nCategories Birthday\, Personal\n
-SUMMARY:All Day
-CLASS:PUBLIC
-PRIORITY:5
-CATEGORIES:Birthday
-CATEGORIES:Personal
-DTSTART;VALUE=DATE:20031212
-DTEND;VALUE=DATE:20031213
-TRANSP:OPAQUE
-END:VEVENT
-
-END:VCALENDAR
-
+BEGIN:VCALENDAR
+PRODID:-//K Desktop Environment//NONSGML libkcal 3.5//EN
+VERSION:2.0
+BEGIN:VEVENT
+DTSTAMP:20040122T092700Z
+ORGANIZER:MAILTO:nobody@nowhere
+X-PILOTID:0
+X-PILOTSTAT:1
+CREATED:20031213T212933Z
+UID:KOrganizer-475330509.201
+LAST-MODIFIED:20031213T212933Z
+DESCRIPTION:See Week 50 2003 for more events.\nRecur daily forever.\n
+SUMMARY:NAVIGATION EVENT
+PRIORITY:5
+RRULE:FREQ=DAILY
+DTSTART:20031208T120000Z
+DTEND:20031208T130000Z
+TRANSP:OPAQUE
+END:VEVENT
+
+BEGIN:VEVENT
+DTSTAMP:20040122T092700Z
+ORGANIZER:MAILTO:nobody@nowhere
+X-PILOTID:0
+X-PILOTSTAT:1
+CREATED:20031213T212804Z
+UID:KOrganizer-465691683.1018
+LAST-MODIFIED:20031213T212804Z
+SUMMARY:Recurring monthly until 1.1.2005
+PRIORITY:5
+RRULE:FREQ=MONTHLY;UNTIL=20050101;BYMONTHDAY=11
+DTSTART:20031211T084500Z
+DTEND:20031211T103000Z
+TRANSP:OPAQUE
+END:VEVENT
+
+BEGIN:VEVENT
+DTSTAMP:20040122T092700Z
+ORGANIZER:MAILTO:nobody@nowhere
+X-PILOTID:0
+X-PILOTSTAT:1
+CREATED:20031213T213154Z
+UID:KOrganizer-1952016504.437
+SEQUENCE:1
+LAST-MODIFIED:20031213T213204Z
+SUMMARY:Birthday
+PRIORITY:5
+CATEGORIES:Birthday
+RRULE:FREQ=YEARLY;BYMONTH=12
+DTSTART;VALUE=DATE:20031208
+DTEND;VALUE=DATE:20031209
+TRANSP:OPAQUE
+BEGIN:VALARM
+DESCRIPTION:
+ACTION:DISPLAY
+TRIGGER;VALUE=DURATION:-P1D
+END:VALARM
+
+END:VEVENT
+
+BEGIN:VEVENT
+DTSTAMP:20040122T092700Z
+ORGANIZER:MAILTO:nobody@nowhere
+X-PILOTID:0
+X-PILOTSTAT:1
+CREATED:20031213T212117Z
+UID:KOrganizer-856020879.491
+LAST-MODIFIED:20031213T212117Z
+DESCRIPTION:9:30 - 11:15 (UTC)\nRecurring twice
+SUMMARY:Another Event
+PRIORITY:5
+RRULE:FREQ=DAILY;COUNT=2
+DTSTART:20031209T093000Z
+DTEND:20031209T111500Z
+TRANSP:OPAQUE
+END:VEVENT
+
+BEGIN:VEVENT
+DTSTAMP:20040122T092700Z
+ORGANIZER:MAILTO:nobody@nowhere
+ATTENDEE;CN=Another Name;RSVP=TRUE;PARTSTAT=ACCEPTED;ROLE=NON-PARTICIPANT:
+ mailto:two@yyy.yy
+ATTENDEE;CN=One Name;RSVP=FALSE;PARTSTAT=NEEDS-ACTION;
+ ROLE=REQ-PARTICIPANT:mailto:one@xxx.xx
+X-PILOTID:0
+X-PILOTSTAT:1
+CREATED:20031213T212528Z
+UID:KOrganizer-2056335629.565
+SEQUENCE:1
+LAST-MODIFIED:20031213T212636Z
+DESCRIPTION:Reminder 13 minutes\nShow time as free\nCategory Special 
+ Occasion\nAccess Private\nTwo attendees.\nAlert.wav sound alarm\n
+SUMMARY:Full Information Event
+LOCATION:This is a location
+CLASS:PRIVATE
+PRIORITY:5
+CATEGORIES:Special Occasion
+DTSTART:20031211T133000Z
+DTEND:20031211T154500Z
+TRANSP:OPAQUE
+BEGIN:VALARM
+ATTACH:/usr/share/apps/korganizer/sounds/alert.wav
+ACTION:AUDIO
+TRIGGER;VALUE=DURATION:-PT13M
+END:VALARM
+
+END:VEVENT
+
+BEGIN:VEVENT
+DTSTAMP:20040122T092700Z
+ORGANIZER:MAILTO:nobody@nowhere
+X-PILOTID:0
+X-PILOTSTAT:1
+CREATED:20031213T213318Z
+UID:KOrganizer-951116794.484
+LAST-MODIFIED:20031213T213318Z
+DESCRIPTION:Recurring until 10.12.\nException 9.12.\n
+SUMMARY:Recurring with exception
+PRIORITY:5
+RRULE:FREQ=DAILY;UNTIL=20031210
+EXDATE;VALUE=DATE:20031209
+DTSTART:20031208T163000Z
+DTEND:20031208T184500Z
+TRANSP:OPAQUE
+END:VEVENT
+
+BEGIN:VEVENT
+DTSTAMP:20040122T092700Z
+ORGANIZER:MAILTO:nobody@nowhere
+X-PILOTID:0
+X-PILOTSTAT:1
+CREATED:20031213T213357Z
+UID:KOrganizer-659286401.509
+SEQUENCE:1
+LAST-MODIFIED:20031213T213426Z
+SUMMARY:Recurring three times two days interval
+PRIORITY:5
+RRULE:FREQ=DAILY;COUNT=3;INTERVAL=2
+DTSTART:20031208T194500Z
+DTEND:20031208T213000Z
+TRANSP:OPAQUE
+END:VEVENT
+
+BEGIN:VEVENT
+DTSTAMP:20040122T092700Z
+ORGANIZER:MAILTO:nobody@nowhere
+X-PILOTID:0
+X-PILOTSTAT:1
+CREATED:20031213T212707Z
+UID:KOrganizer-1025455571.504
+SEQUENCE:1
+LAST-MODIFIED:20031213T212727Z
+DESCRIPTION:Recurring weekly three times on wednesday
+SUMMARY:Recurring weekly
+PRIORITY:5
+RRULE:FREQ=WEEKLY;COUNT=3;BYDAY=WE
+DTSTART:20031210T073000Z
+DTEND:20031210T083000Z
+TRANSP:OPAQUE
+END:VEVENT
+
+BEGIN:VEVENT
+DTSTAMP:20040122T092700Z
+ORGANIZER:MAILTO:nobody@nowhere
+X-PILOTID:0
+X-PILOTSTAT:1
+CREATED:20031213T162226Z
+UID:KOrganizer-406380218.717
+SEQUENCE:1
+LAST-MODIFIED:20031213T212040Z
+DESCRIPTION:10:00 - 13:30 (UTC)\n
+SUMMARY:An Event
+PRIORITY:5
+DTSTART:20031213T100000Z
+DTEND:20031213T133000Z
+TRANSP:OPAQUE
+END:VEVENT
+
+BEGIN:VEVENT
+DTSTAMP:20040122T092700Z
+ORGANIZER:MAILTO:nobody@nowhere
+X-PILOTID:0
+X-PILOTSTAT:1
+CREATED:20031213T212311Z
+UID:KOrganizer-1927781860.81
+SEQUENCE:2
+LAST-MODIFIED:20031213T212315Z
+DESCRIPTION:Three day all-day event.\n
+SUMMARY:All day 3
+PRIORITY:5
+DTSTART;VALUE=DATE:20031210
+DTEND;VALUE=DATE:20031213
+TRANSP:OPAQUE
+END:VEVENT
+
+BEGIN:VEVENT
+DTSTAMP:20040122T092700Z
+ORGANIZER:MAILTO:nobody@nowhere
+X-PILOTID:0
+X-PILOTSTAT:1
+CREATED:20031213T212250Z
+UID:KOrganizer-1744115041.851
+SEQUENCE:2
+LAST-MODIFIED:20031213T212259Z
+DESCRIPTION:Two day all-day event.\n
+SUMMARY:All Day 2
+PRIORITY:5
+DTSTART;VALUE=DATE:20031209
+DTEND;VALUE=DATE:20031211
+TRANSP:OPAQUE
+END:VEVENT
+
+BEGIN:VEVENT
+DTSTAMP:20040122T092700Z
+ORGANIZER:MAILTO:nobody@nowhere
+X-PILOTID:0
+X-PILOTSTAT:1
+CREATED:20031213T213054Z
+UID:KOrganizer-1149443407.784
+SEQUENCE:1
+LAST-MODIFIED:20031213T213109Z
+DESCRIPTION:12.12. 17:15 to 13.12. 19:15\n1 hour alarm
+SUMMARY:Multi-Day Event with Start/End Time
+PRIORITY:5
+DTSTART:20031212T171500Z
+DTEND:20031213T191500Z
+TRANSP:OPAQUE
+BEGIN:VALARM
+DESCRIPTION:
+ACTION:DISPLAY
+TRIGGER;VALUE=DURATION:-PT1H
+END:VALARM
+
+END:VEVENT
+
+BEGIN:VEVENT
+DTSTAMP:20040122T092700Z
+ORGANIZER:MAILTO:nobody@nowhere
+X-PILOTID:0
+X-PILOTSTAT:1
+CREATED:20031213T212219Z
+UID:KOrganizer-182017314.321
+SEQUENCE:2
+LAST-MODIFIED:20031213T212229Z
+DESCRIPTION:One day all-day event.\nCategories Birthday\, Personal\n
+SUMMARY:All Day
+PRIORITY:5
+CATEGORIES:Birthday
+CATEGORIES:Personal
+DTSTART;VALUE=DATE:20031212
+DTEND;VALUE=DATE:20031213
+TRANSP:OPAQUE
+END:VEVENT
+
+END:VCALENDAR
+
Index: libkcal/tests/data/Compat/KOrganizer_3.1a.ics.ical.ref
===================================================================
--- libkcal/tests/data/Compat/KOrganizer_3.1a.ics.ical.ref	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/tests/data/Compat/KOrganizer_3.1a.ics.ical.ref	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,44 +1,42 @@
-BEGIN:VCALENDAR
-PRODID:-//K Desktop Environment//NONSGML libkcal 3.5//EN
-VERSION:2.0
-BEGIN:VEVENT
-DTSTAMP:20040122T092701Z
-ORGANIZER:MAILTO:nobody@nowhere
-X-PILOTID:0
-X-PILOTSTAT:1
-CREATED:20031213T215123Z
-UID:KOrganizer-676656311.951
-SEQUENCE:1
-LAST-MODIFIED:20031213T215131Z
-DESCRIPTION:Can you spell utf8?\nÄÖÜäöüß\nCan you escape?\nSlash:
- /\,Backslash:\\\,Quotes:\"\nComma:\,\nSemicolon:\;
-SUMMARY:Umlaut test aäöüßÄÖÜ - does it work?
-CLASS:PUBLIC
-PRIORITY:5
-DTSTART:20031211T101500Z
-DTEND:20031211T143000Z
-TRANSP:OPAQUE
-END:VEVENT
-
-BEGIN:VEVENT
-DTSTAMP:20040122T092701Z
-ORGANIZER:MAILTO:nobody@nowhere
-X-PILOTID:0
-X-PILOTSTAT:1
-CREATED:20031213T215230Z
-UID:KOrganizer-1343647538.858
-SEQUENCE:6
-LAST-MODIFIED:20031213T215439Z
-DESCRIPTION:Recur Mon\, Tue\, Wed six times\nThis doesn't seem to be 
- correctly handled by the view.\n
-SUMMARY:Recurring weekly
-CLASS:PUBLIC
-PRIORITY:5
-RRULE:FREQ=WEEKLY;COUNT=6;BYDAY=MO,TU,WE
-DTSTART:20031209T090000Z
-DTEND:20031209T113000Z
-TRANSP:OPAQUE
-END:VEVENT
-
-END:VCALENDAR
-
+BEGIN:VCALENDAR
+PRODID:-//K Desktop Environment//NONSGML libkcal 3.5//EN
+VERSION:2.0
+BEGIN:VEVENT
+DTSTAMP:20040122T092701Z
+ORGANIZER:MAILTO:nobody@nowhere
+X-PILOTID:0
+X-PILOTSTAT:1
+CREATED:20031213T215123Z
+UID:KOrganizer-676656311.951
+SEQUENCE:1
+LAST-MODIFIED:20031213T215131Z
+DESCRIPTION:Can you spell utf8?\nÄÖÜäöüß\nCan you escape?\nSlash:
+ /\,Backslash:\\\,Quotes:\"\nComma:\,\nSemicolon:\;
+SUMMARY:Umlaut test aäöüßÄÖÜ - does it work?
+PRIORITY:5
+DTSTART:20031211T101500Z
+DTEND:20031211T143000Z
+TRANSP:OPAQUE
+END:VEVENT
+
+BEGIN:VEVENT
+DTSTAMP:20040122T092701Z
+ORGANIZER:MAILTO:nobody@nowhere
+X-PILOTID:0
+X-PILOTSTAT:1
+CREATED:20031213T215230Z
+UID:KOrganizer-1343647538.858
+SEQUENCE:6
+LAST-MODIFIED:20031213T215439Z
+DESCRIPTION:Recur Mon\, Tue\, Wed six times\nThis doesn't seem to be 
+ correctly handled by the view.\n
+SUMMARY:Recurring weekly
+PRIORITY:5
+RRULE:FREQ=WEEKLY;COUNT=6;BYDAY=MO,TU,WE
+DTSTART:20031209T090000Z
+DTEND:20031209T113000Z
+TRANSP:OPAQUE
+END:VEVENT
+
+END:VCALENDAR
+
Index: libkcal/tests/data/Compat/KOrganizer_3.2.ics.ical.ref
===================================================================
--- libkcal/tests/data/Compat/KOrganizer_3.2.ics.ical.ref	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/tests/data/Compat/KOrganizer_3.2.ics.ical.ref	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,89 +1,83 @@
-BEGIN:VCALENDAR
-PRODID:-//K Desktop Environment//NONSGML libkcal 3.5//EN
-VERSION:2.0
-BEGIN:VEVENT
-DTSTAMP:20040122T092701Z
-ORGANIZER:MAILTO:nobody@nowhere
-ATTENDEE;CN=Hans Wurst;RSVP=TRUE;PARTSTAT=TENTATIVE;ROLE=CHAIR:mailto:
- hw@abc.de
-CREATED:20031213T204544Z
-UID:KOrganizer-581715779.572
-SEQUENCE:0
-LAST-MODIFIED:20031213T204544Z
-DESCRIPTION:8.12. - 11.12 13:30 - 10:30\nreminder 40 hours\nOne Attendee
-SUMMARY:Multi-Day Event
-CLASS:PUBLIC
-PRIORITY:5
-DTSTART:20031208T123000Z
-DTEND:20031211T093000Z
-TRANSP:OPAQUE
-BEGIN:VALARM
-DESCRIPTION:
-ACTION:DISPLAY
-TRIGGER;VALUE=DURATION:-P1DT16H
-END:VALARM
-
-END:VEVENT
-
-BEGIN:VEVENT
-DTSTAMP:20040122T092701Z
-ORGANIZER:MAILTO:nobody@nowhere
-CREATED:20031213T204152Z
-UID:KOrganizer-101218390.515
-SEQUENCE:0
-LAST-MODIFIED:20031213T204152Z
-SUMMARY:Holladiho
-CLASS:PUBLIC
-PRIORITY:5
-DTSTART:20031213T071500Z
-DTEND:20031213T104500Z
-TRANSP:OPAQUE
-END:VEVENT
-
-BEGIN:VEVENT
-DTSTAMP:20040122T092701Z
-ORGANIZER:MAILTO:nobody@nowhere
-CREATED:20031213T204326Z
-UID:KOrganizer-178854360.121
-SEQUENCE:0
-LAST-MODIFIED:20031213T204326Z
-DESCRIPTION:Reminder 2 hours\nShow time as free\nCategories meeting\, 
- phone call\nUmlauts: äöüÄÖÜß\nAccess: confidential\nRecurrence: 
- twice weekly on monday.\n
-SUMMARY:Full Info
-LOCATION:location
-CLASS:CONFIDENTIAL
-PRIORITY:5
-CATEGORIES:Meeting
-CATEGORIES:Phone Call
-RRULE:FREQ=WEEKLY;COUNT=2;BYDAY=MO
-EXDATE:20031209T091500Z
-DTSTART:20031209T091500Z
-DTEND:20031209T113000Z
-TRANSP:TRANSPARENT
-BEGIN:VALARM
-DESCRIPTION:
-ACTION:DISPLAY
-TRIGGER;VALUE=DURATION:-PT2H
-END:VALARM
-
-END:VEVENT
-
-BEGIN:VEVENT
-DTSTAMP:20040122T092701Z
-ORGANIZER:MAILTO:nobody@nowhere
-CREATED:20031213T204645Z
-UID:KOrganizer-367556625.513
-SEQUENCE:2
-LAST-MODIFIED:20031213T204657Z
-SUMMARY:Two-day all day event recurring twice every second month
-CLASS:PUBLIC
-PRIORITY:5
-RRULE:FREQ=MONTHLY;COUNT=2;INTERVAL=2;BYMONTHDAY=10
-DTSTART;VALUE=DATE:20031210
-DTEND;VALUE=DATE:20031212
-TRANSP:OPAQUE
-END:VEVENT
-
-END:VCALENDAR
-
+BEGIN:VCALENDAR
+PRODID:-//K Desktop Environment//NONSGML libkcal 3.5//EN
+VERSION:2.0
+BEGIN:VEVENT
+DTSTAMP:20040122T092701Z
+ORGANIZER:MAILTO:nobody@nowhere
+ATTENDEE;CN=Hans Wurst;RSVP=TRUE;PARTSTAT=TENTATIVE;ROLE=CHAIR:mailto:
+ hw@abc.de
+CREATED:20031213T204544Z
+UID:KOrganizer-581715779.572
+LAST-MODIFIED:20031213T204544Z
+DESCRIPTION:8.12. - 11.12 13:30 - 10:30\nreminder 40 hours\nOne Attendee
+SUMMARY:Multi-Day Event
+PRIORITY:5
+DTSTART:20031208T123000Z
+DTEND:20031211T093000Z
+TRANSP:OPAQUE
+BEGIN:VALARM
+DESCRIPTION:
+ACTION:DISPLAY
+TRIGGER;VALUE=DURATION:-P1DT16H
+END:VALARM
+
+END:VEVENT
+
+BEGIN:VEVENT
+DTSTAMP:20040122T092701Z
+ORGANIZER:MAILTO:nobody@nowhere
+CREATED:20031213T204152Z
+UID:KOrganizer-101218390.515
+LAST-MODIFIED:20031213T204152Z
+SUMMARY:Holladiho
+PRIORITY:5
+DTSTART:20031213T071500Z
+DTEND:20031213T104500Z
+TRANSP:OPAQUE
+END:VEVENT
+
+BEGIN:VEVENT
+DTSTAMP:20040122T092701Z
+ORGANIZER:MAILTO:nobody@nowhere
+CREATED:20031213T204326Z
+UID:KOrganizer-178854360.121
+LAST-MODIFIED:20031213T204326Z
+DESCRIPTION:Reminder 2 hours\nShow time as free\nCategories meeting\, 
+ phone call\nUmlauts: äöüÄÖÜß\nAccess: confidential\nRecurrence: 
+ twice weekly on monday.\n
+SUMMARY:Full Info
+LOCATION:location
+CLASS:CONFIDENTIAL
+PRIORITY:5
+CATEGORIES:Meeting
+CATEGORIES:Phone Call
+RRULE:FREQ=WEEKLY;COUNT=2;BYDAY=MO
+EXDATE:20031209T091500Z
+DTSTART:20031209T091500Z
+DTEND:20031209T113000Z
+TRANSP:TRANSPARENT
+BEGIN:VALARM
+DESCRIPTION:
+ACTION:DISPLAY
+TRIGGER;VALUE=DURATION:-PT2H
+END:VALARM
+
+END:VEVENT
+
+BEGIN:VEVENT
+DTSTAMP:20040122T092701Z
+ORGANIZER:MAILTO:nobody@nowhere
+CREATED:20031213T204645Z
+UID:KOrganizer-367556625.513
+SEQUENCE:2
+LAST-MODIFIED:20031213T204657Z
+SUMMARY:Two-day all day event recurring twice every second month
+PRIORITY:5
+RRULE:FREQ=MONTHLY;COUNT=2;INTERVAL=2;BYMONTHDAY=10
+DTSTART;VALUE=DATE:20031210
+DTEND;VALUE=DATE:20031212
+TRANSP:OPAQUE
+END:VEVENT
+
+END:VCALENDAR
+
Index: libkcal/tests/data/Compat/eGroupware.ics
===================================================================
--- libkcal/tests/data/Compat/eGroupware.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 0)
+++ libkcal/tests/data/Compat/eGroupware.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -0,0 +1,23 @@
+BEGIN:VCALENDAR
+VERSION:2.0
+PRODID:-//eGroupWare//NONSGML eGroupWare Calendar 1.2.001//DE
+METHOD:PUBLISH
+BEGIN:VEVENT
+ATTENDEE;CN=Tobias König;ROLE=CHAIR;RSVP=FALSE;CUTYPE=INDIVIDUAL;PARTSTAT=
+ ACCEPTED:MAILTO:tobias.koenig@kde.de
+UID:calendar-4862-e77d247cfc15c40e485acfa65f636e29
+CLASS:PUBLIC
+SUMMARY:12345
+DESCRIPTION;CHARSET=UTF-8:
+ Das ist eine längere Notiz\ndie über meherer Zeilen geht\nmit +49 192830981
+ 2/09283498
+LOCATION:Dresden
+DTSTART:20070301T100000Z
+DTEND:20070301T110000Z
+PRIORITY:5
+TRANSP:OPAQUE
+CREATED:20070228T090007Z
+LAST-MODIFIED:20070228T090006Z
+DTSTAMP:20070228T090253Z
+END:VEVENT
+END:VCALENDAR
Index: libkcal/tests/data/RecurrenceRule/KAlarm_3.4/KAlarm_TestCase10.ics
===================================================================
--- libkcal/tests/data/RecurrenceRule/KAlarm_3.4/KAlarm_TestCase10.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/tests/data/RecurrenceRule/KAlarm_3.4/KAlarm_TestCase10.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -3,7 +3,6 @@
 VERSION:2.0
 BEGIN:VEVENT
 DTSTAMP:20050522T130601
-ORGANIZER:MAILTO:
 CREATED:20050522T130525
 UID:KAlarm-1044160066.1024
 SEQUENCE:0
Index: libkcal/tests/data/RecurrenceRule/KAlarm_3.4/KAlarm_TestCase01.ics
===================================================================
--- libkcal/tests/data/RecurrenceRule/KAlarm_3.4/KAlarm_TestCase01.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/tests/data/RecurrenceRule/KAlarm_3.4/KAlarm_TestCase01.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -3,7 +3,6 @@
 VERSION:2.0
 BEGIN:VEVENT
 DTSTAMP:20050522T130601
-ORGANIZER:MAILTO:
 CREATED:20050522T130311
 UID:KAlarm-2080187732.550
 SEQUENCE:0
Index: libkcal/tests/data/RecurrenceRule/KAlarm_3.4/KAlarm_TestCase02.ics
===================================================================
--- libkcal/tests/data/RecurrenceRule/KAlarm_3.4/KAlarm_TestCase02.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/tests/data/RecurrenceRule/KAlarm_3.4/KAlarm_TestCase02.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -3,7 +3,6 @@
 VERSION:2.0
 BEGIN:VEVENT
 DTSTAMP:20050522T130601
-ORGANIZER:MAILTO:
 CREATED:20050522T130341
 UID:KAlarm-758521161.1036
 SEQUENCE:0
Index: libkcal/tests/data/RecurrenceRule/KAlarm_3.4/KAlarm_TestCase03.ics
===================================================================
--- libkcal/tests/data/RecurrenceRule/KAlarm_3.4/KAlarm_TestCase03.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/tests/data/RecurrenceRule/KAlarm_3.4/KAlarm_TestCase03.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -3,7 +3,6 @@
 VERSION:2.0
 BEGIN:VEVENT
 DTSTAMP:20050522T130601
-ORGANIZER:MAILTO:
 CREATED:20050522T130245
 UID:KAlarm-898217824.835
 SEQUENCE:0
Index: libkcal/tests/data/RecurrenceRule/KAlarm_3.4/KAlarm_TestCase04.ics
===================================================================
--- libkcal/tests/data/RecurrenceRule/KAlarm_3.4/KAlarm_TestCase04.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/tests/data/RecurrenceRule/KAlarm_3.4/KAlarm_TestCase04.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -3,7 +3,6 @@
 VERSION:2.0
 BEGIN:VEVENT
 DTSTAMP:20050522T130601
-ORGANIZER:MAILTO:
 CREATED:20050522T124630
 UID:KAlarm-333577782.218
 SEQUENCE:1
Index: libkcal/tests/data/RecurrenceRule/KAlarm_3.4/KAlarm_TestCase05.ics
===================================================================
--- libkcal/tests/data/RecurrenceRule/KAlarm_3.4/KAlarm_TestCase05.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/tests/data/RecurrenceRule/KAlarm_3.4/KAlarm_TestCase05.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -3,7 +3,6 @@
 VERSION:2.0
 BEGIN:VEVENT
 DTSTAMP:20050522T130601
-ORGANIZER:MAILTO:
 CREATED:20050522T130409
 UID:KAlarm-1322911691.873
 SEQUENCE:0
Index: libkcal/tests/data/RecurrenceRule/KAlarm_3.4/KAlarm_TestCase06.ics
===================================================================
--- libkcal/tests/data/RecurrenceRule/KAlarm_3.4/KAlarm_TestCase06.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/tests/data/RecurrenceRule/KAlarm_3.4/KAlarm_TestCase06.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -3,7 +3,6 @@
 VERSION:2.0
 BEGIN:VEVENT
 DTSTAMP:20050522T130601
-ORGANIZER:MAILTO:
 CREATED:20050522T124525
 UID:KAlarm-1195473896.721
 SEQUENCE:0
Index: libkcal/tests/data/RecurrenceRule/KAlarm_3.4/KAlarm_TestCase07.ics
===================================================================
--- libkcal/tests/data/RecurrenceRule/KAlarm_3.4/KAlarm_TestCase07.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/tests/data/RecurrenceRule/KAlarm_3.4/KAlarm_TestCase07.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -3,7 +3,6 @@
 VERSION:2.0
 BEGIN:VEVENT
 DTSTAMP:20050522T130601
-ORGANIZER:MAILTO:
 CREATED:20050522T130601
 UID:KAlarm-287267280.549
 SEQUENCE:0
Index: libkcal/tests/data/RecurrenceRule/KAlarm_3.4/KAlarm_TestCase08.ics
===================================================================
--- libkcal/tests/data/RecurrenceRule/KAlarm_3.4/KAlarm_TestCase08.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/tests/data/RecurrenceRule/KAlarm_3.4/KAlarm_TestCase08.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -3,7 +3,6 @@
 VERSION:2.0
 BEGIN:VEVENT
 DTSTAMP:20050522T130601
-ORGANIZER:MAILTO:
 CREATED:20050522T130440
 UID:KAlarm-651624348.728
 SEQUENCE:0
Index: libkcal/tests/data/RecurrenceRule/KAlarm_3.4/KAlarm_TestCase09.ics
===================================================================
--- libkcal/tests/data/RecurrenceRule/KAlarm_3.4/KAlarm_TestCase09.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/tests/data/RecurrenceRule/KAlarm_3.4/KAlarm_TestCase09.ics	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -3,7 +3,6 @@
 VERSION:2.0
 BEGIN:VEVENT
 DTSTAMP:20050522T130601
-ORGANIZER:MAILTO:
 CREATED:20050522T124600
 UID:KAlarm-1071184954.82
 SEQUENCE:4
Index: libkcal/tests/data/RecurrenceRule/KAlarm_3.4/KAlarm_TestCases.ics.all
===================================================================
--- libkcal/tests/data/RecurrenceRule/KAlarm_3.4/KAlarm_TestCases.ics.all	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/tests/data/RecurrenceRule/KAlarm_3.4/KAlarm_TestCases.ics.all	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -3,7 +3,6 @@
 VERSION:2.0
 BEGIN:VEVENT
 DTSTAMP:20050522T130601
-ORGANIZER:MAILTO:
 CREATED:20050522T130311
 UID:KAlarm-2080187732.550
 SEQUENCE:0
@@ -24,7 +23,6 @@
 
 BEGIN:VEVENT
 DTSTAMP:20050522T130601
-ORGANIZER:MAILTO:
 CREATED:20050522T130341
 UID:KAlarm-758521161.1036
 SEQUENCE:0
@@ -45,7 +43,6 @@
 
 BEGIN:VEVENT
 DTSTAMP:20050522T130601
-ORGANIZER:MAILTO:
 CREATED:20050522T130245
 UID:KAlarm-898217824.835
 SEQUENCE:0
@@ -66,7 +63,6 @@
 
 BEGIN:VEVENT
 DTSTAMP:20050522T130601
-ORGANIZER:MAILTO:
 CREATED:20050522T124630
 UID:KAlarm-333577782.218
 SEQUENCE:1
@@ -88,7 +84,6 @@
 
 BEGIN:VEVENT
 DTSTAMP:20050522T130601
-ORGANIZER:MAILTO:
 CREATED:20050522T130409
 UID:KAlarm-1322911691.873
 SEQUENCE:0
@@ -109,7 +104,6 @@
 
 BEGIN:VEVENT
 DTSTAMP:20050522T130601
-ORGANIZER:MAILTO:
 CREATED:20050522T124525
 UID:KAlarm-1195473896.721
 SEQUENCE:0
@@ -137,7 +131,6 @@
 
 BEGIN:VEVENT
 DTSTAMP:20050522T130601
-ORGANIZER:MAILTO:
 CREATED:20050522T130601
 UID:KAlarm-287267280.549
 SEQUENCE:0
@@ -158,7 +151,6 @@
 
 BEGIN:VEVENT
 DTSTAMP:20050522T130601
-ORGANIZER:MAILTO:
 CREATED:20050522T130440
 UID:KAlarm-651624348.728
 SEQUENCE:0
@@ -179,7 +171,6 @@
 
 BEGIN:VEVENT
 DTSTAMP:20050522T130601
-ORGANIZER:MAILTO:
 CREATED:20050522T124600
 UID:KAlarm-1071184954.82
 SEQUENCE:4
@@ -201,7 +192,6 @@
 
 BEGIN:VEVENT
 DTSTAMP:20050522T130601
-ORGANIZER:MAILTO:
 CREATED:20050522T130525
 UID:KAlarm-1044160066.1024
 SEQUENCE:0
Index: libkcal/tests/runtestcase.pl
===================================================================
--- libkcal/tests/runtestcase.pl	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/tests/runtestcase.pl	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -23,14 +23,18 @@
 # This little script runs a test program on a given (calendar) file and 
 # compares the output to a reference file. All discrepancies are shown 
 # to the user. Usage:
-#      runtestcase.pl appname testfile.ics
+#      runtestcase.pl appname identifier testfile.ics
+# 'identifier' is used as a suffix to allow multiple tests on the same input 
+# file during a test run.
+#
 # The application/script appname is required to take two arguments:
 #      appname inputfile outputfile
-# where inputfile is the file to be used as input data, and the ouput of the
-# programm will go to outputfile (=testfile.ics.out if called through 
+# where inputfile is the file to be used as input data, and the output of the
+# program will go to outputfile (=testfile.ics.identifier.out if called through 
 # runtestcase.pl). That outputfile is then compared to the reference file
 # testfile.ics.ref.
 
+
 if ( @ARGV != 3 ) {
   print STDERR "Missing arg! Arguments: testapp identifier filename \n";
   exit 1;
@@ -85,22 +89,23 @@
 
   $error = 0;
   $i = 0;
-  $line = 1;
-	my $errorlines = 0;
+  $line = 0;
+  my $errorlines = 0;
   while( <READ> ) {
     $out = $_;
     $ref = @ref[$i++];
+    $line++;
 
     # DTSTAMP, LAST-MODIFIED and CREATED might be different to the reference...
-    if ( $out =~ /^DTSTAMP:[0-9ZT]+$/ && $ref =~ /^DTSTAMP:[0-9ZT]+$/ ) {
+    if ( $out =~ /^DTSTAMP:[0-9ZT]+\r?$/ && $ref =~ /^DTSTAMP:[0-9ZT]+\r?$/ ) {
       next;
     }
 
-    if ( $out =~ /^LAST-MODIFIED:[0-9ZT]+$/ && $ref =~ /^LAST-MODIFIED:[0-9ZT]+$/ ) {
+    if ( $out =~ /^LAST-MODIFIED:[0-9ZT]+\r?$/ && $ref =~ /^LAST-MODIFIED:[0-9ZT]+\r?$/ ) {
       next;
     }
 
-    if ( $out =~ /^CREATED:[0-9ZT]+$/ && $ref =~ /^CREATED:[0-9ZT]+$/ ) {
+    if ( $out =~ /^CREATED:[0-9ZT]+\r?$/ && $ref =~ /^CREATED:[0-9ZT]+\r?$/ ) {
       next;
     }
 
@@ -118,7 +123,6 @@
       }
     }
     
-    $line++;
   }
 
   close READ;
Index: libkcal/incidenceformatter.cpp
===================================================================
--- libkcal/incidenceformatter.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/incidenceformatter.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -585,7 +585,7 @@
 
 static QString string2HTML( const QString& str )
 {
-  return QStyleSheet::convertFromPlainText(str);
+  return QStyleSheet::convertFromPlainText(str, QStyleSheetItem::WhiteSpaceNormal);
 }
 
 static QString invitationRow( const QString &cell1, const QString &cell2 )
Index: libkcal/incidence.cpp
===================================================================
--- libkcal/incidence.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/incidence.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -33,7 +33,7 @@
 Incidence::Incidence() :
   IncidenceBase(),
   mRelatedTo(0), mStatus(StatusNone), mSecrecy(SecrecyPublic),
-  mPriority(5), mRecurrence(0)
+  mPriority(0), mRecurrence(0)
 {
   recreate();
 
Index: libkcal/recurrencerule.cpp
===================================================================
--- libkcal/recurrencerule.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/recurrencerule.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1113,22 +1113,27 @@
     return QDateTime();
 
   // Start date is only included if it really matches
-//   if ( preDate < startDt() ) return startDt();
+  QDateTime adjustedPreDate;
+  if ( preDate < startDt() )
+    adjustedPreDate = startDt().addSecs( -1 );
+  else
+    adjustedPreDate = preDate;
+
   if ( mDuration > 0 ) {
     if ( !mCached ) buildCache();
     DateTimeList::ConstIterator it = mCachedDates.begin();
-    while ( it != mCachedDates.end() && (*it) <= preDate ) ++it;
+    while ( it != mCachedDates.end() && (*it) <= adjustedPreDate ) ++it;
     if ( it != mCachedDates.end() ) {
-//  kdDebug(5800) << "    getNext date after " << preDate << ", cached date: " << *it << endl;
+//  kdDebug(5800) << "    getNext date after " << adjustedPreDate << ", cached date: " << *it << endl;
       return (*it);
     }
   }
 
-// kdDebug(5800) << "    getNext date after " << preDate << endl;
-  Constraint interval( getNextValidDateInterval( preDate, recurrenceType() ) );
+// kdDebug(5800) << "    getNext date after " << adjustedPreDate << endl;
+  Constraint interval( getNextValidDateInterval( adjustedPreDate, recurrenceType() ) );
   DateTimeList dts = datesForInterval( interval, recurrenceType() );
   DateTimeList::Iterator dtit = dts.begin();
-  while ( dtit != dts.end() && (*dtit) <= preDate ) ++dtit;
+  while ( dtit != dts.end() && (*dtit) <= adjustedPreDate ) ++dtit;
   if ( dtit != dts.end() ) {
     if ( mDuration >= 0 && (*dtit) > endDt() ) return QDateTime();
     else return (*dtit);
@@ -1216,7 +1221,7 @@
 RecurrenceRule::Constraint RecurrenceRule::getNextValidDateInterval( const QDateTime &preDate, PeriodType type ) const
 {
   // TODO: Simplify this!
-// kdDebug(5800) << "       (o) getNextValidDateInterval after " << preDate << ", type=" << type << endl;
+  kdDebug(5800) << "       (o) getNextValidDateInterval after " << preDate << ", type=" << type << endl;
   long periods = 0;
   QDateTime start = startDt();
   QDateTime nextValid( start );
@@ -1236,6 +1241,7 @@
     case rMinutely: modifier *= 60;
     case rSecondly:
         periods = ownSecsTo( start, toDate ) / modifier;
+        periods = QMAX( 0, periods);
         if ( periods > 0 )
           periods += ( frequency() - 1 - ( (periods - 1) % frequency() ) );
         nextValid = start.addSecs( modifier * periods );
@@ -1248,6 +1254,7 @@
         modifier *= 7;
     case rDaily:
         periods = start.daysTo( toDate ) / modifier;
+        periods = QMAX( 0, periods);
         if ( periods > 0 )
           periods += (frequency() - 1 - ( (periods - 1) % frequency() ) );
         nextValid = start.addDays( modifier * periods );
@@ -1256,6 +1263,7 @@
     case rMonthly: {
         periods = 12*( toDate.date().year() - start.date().year() ) +
              ( toDate.date().month() - start.date().month() );
+        periods = QMAX( 0, periods);
         if ( periods > 0 )
           periods += (frequency() - 1 - ( (periods - 1) % frequency() ) );
         // set the day to the first day of the month, so we don't have problems
@@ -1265,6 +1273,7 @@
         break; }
     case rYearly:
         periods = ( toDate.date().year() - start.date().year() );
+        periods = QMAX( 0, periods);
         if ( periods > 0 )
           periods += ( frequency() - 1 - ( (periods - 1) % frequency() ) );
         nextValid.setDate( start.date().addYears( periods ) );
Index: libkcal/resourcelocalconfig.cpp
===================================================================
--- libkcal/resourcelocalconfig.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ libkcal/resourcelocalconfig.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -52,9 +52,7 @@
   mainLayout->addWidget( mURL, 1, 1 );
 
   formatGroup = new QButtonGroup( 1, Horizontal, i18n( "Calendar Format" ), this );
-//  formatGroup->setExclusive( true );
 
-//  formatGroup->setFrameStyle(QFrame::NoFrame);
   icalButton = new QRadioButton( i18n("iCalendar"), formatGroup );
   vcalButton = new QRadioButton( i18n("vCalendar"), formatGroup );
 
@@ -74,7 +72,7 @@
     else 
       kdDebug(5800) << "ERROR: ResourceLocalConfig::loadSettings(): Unknown format type" << endl;
   } else
-    kdDebug(5700) << "ERROR: ResourceLocalConfig::loadSettings(): no ResourceLocal, cast failed" << endl;
+    kdDebug(5800) << "ERROR: ResourceLocalConfig::loadSettings(): no ResourceLocal, cast failed" << endl;
 }
 
 void ResourceLocalConfig::saveSettings( KRES::Resource *resource )
@@ -106,7 +104,7 @@
       res->mFormat = new VCalFormat();
     }
   } else
-    kdDebug(5700) << "ERROR: ResourceLocalConfig::saveSettings(): no ResourceLocal, cast failed" << endl;
+    kdDebug(5800) << "ERROR: ResourceLocalConfig::saveSettings(): no ResourceLocal, cast failed" << endl;
 }
 
 #include "resourcelocalconfig.moc"
Index: kpilot/conduits/sysinfoconduit/sysinfo_conduit.desktop
===================================================================
--- kpilot/conduits/sysinfoconduit/sysinfo_conduit.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kpilot/conduits/sysinfoconduit/sysinfo_conduit.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -23,10 +23,12 @@
 Comment[is]=Þessi rás skrifar upplýsingar um lófatölvuna þína og samstillinguna í skrá.
 Comment[it]=Questo conduit scrive in un file informazioni sul tuo palmare.
 Comment[ja]=このコンジットはあなたのハンドヘルドの情報を書き出し、ファイルに同期します。
+Comment[kk]=Қалта құрылғыңыз туралы мәліметті файла жазу арнасы.
 Comment[km]=បំពង់​នេះ​សរសេរ​ព័ត៌មាន​អំពី​ឧបករណ៍​យួរដៃ​របស់​អ្នក និង ការ​ធ្វើ​សមកាលកម្ម ទៅ​ឯកសារ​មួយ ។
 Comment[ms]=Saluran ini menulis maklumat tentang komputer telapak dan segerakan ke fail.
 Comment[nb]=Denne kanalen skriver informasjon om PDA-en og synkroniseringen til en fil.
 Comment[nds]=De Kanaal schrifft Informatschonen över den Handreekner un de Synkroniseren na en Datei.
+Comment[ne]=यो कन्ड्युटले ह्यान्डहेल्ड बारेमा सूचना लेख्दछ र फाइलमा सिन्क गर्दछ ।
 Comment[nl]=Dit conduit slaat informatie over uw handheld en de synchronisatie op in een bestand.
 Comment[nn]=Denne koplinga skriv informasjon om den handheldte eininga di og synkroniseringa til ei fil.
 Comment[pl]=Ten łącznik zapisuje informacje o twoim palmtopie i przebiegu synchronizacji do pliku.
@@ -69,11 +71,14 @@
 Name[is]=Kerfisupplýsingar
 Name[it]=Informazioni di sistema
 Name[ja]=システム情報
+Name[kk]=Жүйелік мәлімет
 Name[km]=ព័ត៌មាន​អំពី​ប្រព័ន្ធ
 Name[lt]=Sistemos informacija
+Name[mk]=Информации за системот
 Name[ms]=Maklumat Sistem
 Name[nb]=Systeminformasjon
 Name[nds]=Systeem-Informatschoon
+Name[ne]=प्रणाली सूचना
 Name[nl]=Systeeminformatie
 Name[nn]=Systeminformasjon
 Name[pl]=Informacja systemowa
Index: kpilot/conduits/notepadconduit/notepad-conduit.desktop
===================================================================
--- kpilot/conduits/notepadconduit/notepad-conduit.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kpilot/conduits/notepadconduit/notepad-conduit.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -11,6 +11,7 @@
 Name[gl]=Caderno de Notas
 Name[hu]=Notepad
 Name[nb]=NotisBlokk
+Name[ne]=नोटप्याड
 Name[nn]=NotisBlokk
 Name[pl]=Notatnik
 Name[sv]=Anteckningar
@@ -36,11 +37,13 @@
 Comment[is]=Þessi rás afritar NotePad teikningar í staðbundna möppu.
 Comment[it]=Questo conduit archivia i disegni NotePad in una cartella locale.
 Comment[ja]=このコンジットは NotePad の絵をローカルのフォルダにバックアップします。
+Comment[kk]=NotePad файлдарының сақтық көшірмелерін жергілікті қапшықта жасау арнасы.
 Comment[km]=បំពង់​នេះ​អាច​បម្រុង​ទុក​គំនូរ NotePad ទៅ​ថត​មូលដ្ឋាន ។
 Comment[lt]=Šis kanalas padaro NotePad piešinių atsargines kopijas į vietinį aplanką.
 Comment[ms]=Saluran ini menyandarkan lukisan NotePad ke folder setempat.
 Comment[nb]=Denne kanalen tar sikkerhetskopi av NotePad tegninger til en lokal mappe.
 Comment[nds]=Sekert NotePad-Teken binnen en lokaal Orner.
+Comment[ne]=यो कन्ड्युटले स्थानीय फाइलमा नोटप्याड रेखाचित्र ब्याकअप गर्छ ।
 Comment[nl]=Dit conduit maakt een backup van de notitie-aantekeningen naar een lokale map.
 Comment[pl]=Ten łącznik robi kopię zapasową rysunków z Notatnika do lokalnego katalogu.
 Comment[pt]=Esta conduta salvaguarda desenhos NotePad para uma pasta local.
Index: kpilot/conduits/memofileconduit/memofile-conduit.desktop
===================================================================
--- kpilot/conduits/memofileconduit/memofile-conduit.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kpilot/conduits/memofileconduit/memofile-conduit.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -20,11 +20,13 @@
 Name[is]=Minnismiðaskrá
 Name[it]=File appunti
 Name[ja]=メモファイル
+Name[kk]=Жазба файлы
 Name[km]=ឯកសារ​អនុស្សរណៈ
 Name[lt]=Memo byla
 Name[ms]=Fail Memo 
 Name[nb]=Notatfil
 Name[nds]=Notiz-Datei
+Name[ne]=स्मृति फाइल
 Name[nl]=Memobestand
 Name[nn]=Memofil
 Name[pl]=Plik notatki
@@ -41,7 +43,7 @@
 Name[zh_TW]=Memo 檔
 Comment=This conduit syncs your handheld memos with a local directory.
 Comment[af]=Hierdie pad sinkroniseer jou draagbare toestel se memos met 'n plaaslike gids.
-Comment[bg]=Синхронизация на бележките на КДЕ с мобилни устройства.
+Comment[bg]=Синхронизация на бележките на KDE с мобилни устройства.
 Comment[ca]=Aquest conducte sincronitza les notes de l'agenda electrònica amb un directori local.
 Comment[cs]=Toto propojení synchronizuje vaše poznámky v PDA s lokálním adresářem.
 Comment[da]=Denne kanal synkroniserer dine håndholdte memoer med en lokal mappe.
@@ -58,11 +60,13 @@
 Comment[is]=Þessi rás samstillir minnismiða lófatölvunnar þinnar við staðbundna möppu.
 Comment[it]=Questo condotto sincronizza gli appunti del tuo palmare con una cartella locale.
 Comment[ja]=このコンジットはハンドヘルドのメモをローカルのディレクトリと同期させます。
+Comment[kk]=Қалта құрылғыдағы жазбаларды қапшықтағы файлымен қадамдастыру арнасы.
 Comment[km]=បំពង់​នេះ​អាច​ឲ្យ​អនុស្សរណៈ​ឧបករណ៍​យួរ​ដៃ​របស់​អ្នក ធ្វើ​សមកាលកម្ម​ជាមួយ​នឹង​ថត​មូលដ្ឋាន ។​
 Comment[lt]=Šis kanalas sinchronizuoja Jūsų užrašus su vietiniu aplanku.
 Comment[ms]=Saluran ini mensegerakkan memo komputer telapak anda dengan direktori setempat.
 Comment[nb]=Denne kanalen synkroniserer PDA-ens notater med en lokal mappe.
 Comment[nds]=Synkroniseert de Notizen op den Handreekner mit en lokaal Orner.
+Comment[ne]=यो कन्ड्युटले स्थानीय डाइरेक्टरीमा तपाईँका ह्यान्डहेल्ड मेमो सिन्क गर्दछ ।
 Comment[nl]=Dit conduit synchroniseert de memo's van uw handheld met een lokale map.
 Comment[pl]=Ten łącznik synchronizuje notatki z palmtopa z lokalnym katalogiem.
 Comment[pt]=Esta conduta sincroniza os memorandos do seu PDA com uma pasta local.
Index: kpilot/conduits/timeconduit/time_conduit.desktop
===================================================================
--- kpilot/conduits/timeconduit/time_conduit.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kpilot/conduits/timeconduit/time_conduit.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -24,9 +24,11 @@
 Comment[it]=Questo conduit imposta l'ora sul tuo palmare prendendola dall'orologio del PC
 Comment[ja]=このコンジットはハンドヘルドの時間をPCの時計に合わせます。
 Comment[km]=បំពង់​នេះ​កំណត់​ពេលវេលា​នៅ​លើ​ឧបករណ៍​យួរដៃ​របស់​អ្នក ពី​នាឡិកា​កុំព្យូទ័រ ។
+Comment[mk]=Овој канал го поставува времето на рачниот уред според времето на компјутерот.
 Comment[ms]=Saluran ini mengeset waktu pada komputer telapak anda dari jam PC.
 Comment[nb]=Denne kanalen stiller klokka på PDA-en fra PC-klokka.
 Comment[nds]=Synkroniseert stellt Handreekner-Klock na de PC-Klock.
+Comment[ne]=यो कन्ड्युटले पीसी घडिबाट ह्यान्डहेल्डमा समय सेट गर्दछ ।
 Comment[nl]=Dit conduit stelt de tijd van uw handheld in aan de hand van de pc-klok.
 Comment[nn]=Denne koplinga set tida på den handheldte eininga di frå PC-klokka.
 Comment[pl]=Ten łącznik ustawia zegar na palmtopie zgodnie z zegarem komputera.
@@ -46,6 +48,7 @@
 Comment[zh_TW]=此軟體經由 PC 時間設定您的 handheld 時間。
 Name=Time Synchronization
 Name[af]=Tyd sinkronisasie
+Name[ar]=مزامنة الوقت
 Name[be]=Сынхранізацыя часу
 Name[bs]=Sinhronizacija vremena
 Name[ca]=Sincronització horària
@@ -67,11 +70,14 @@
 Name[is]=Tíma samstilling
 Name[it]=Sincronizzazione temporale
 Name[ja]=時間同期
+Name[kk]=Уақытты қадамдастыру
 Name[km]=សមកាលកម្ម​ពេលវេលា
 Name[lt]=Laiko sinchronizavimas
+Name[mk]=Синхронизација на време
 Name[ms]=Segerakan waktu
 Name[nb]=Tidsynkronisering
 Name[nds]=Tietsynkroniseren
+Name[ne]=समय समक्रमण
 Name[nl]=Tijdsynchronisatie
 Name[nn]=Tidsynkronisering
 Name[pl]=Synchronizacja czasu
Index: kpilot/conduits/docconduit/kpalmdoc.desktop
===================================================================
--- kpilot/conduits/docconduit/kpalmdoc.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kpilot/conduits/docconduit/kpalmdoc.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -28,11 +28,13 @@
 GenericName[is]=PalmDOC umbreytir
 GenericName[it]=Convertitore PalmDOC
 GenericName[ja]= PalmDOC コンバータ
+GenericName[kk]=PalmDOC аударғышы
 GenericName[km]=កម្មវិធី​បម្លែង PalmDOC
 GenericName[lt]=PalmDOC konverteris
 GenericName[ms]=Penukar PalmDOC 
 GenericName[nb]=PalmDOC-konvertering
 GenericName[nds]=PalmDOC-Ümwanneln
+GenericName[ne]=PalmDOC रुपान्तरणकर्ता
 GenericName[nl]=PalmDOC-conversie
 GenericName[nn]=PalmDOC-omformar
 GenericName[pl]=Konwerter formatu PalmDOC
Index: kpilot/conduits/docconduit/doc_conduit.desktop
===================================================================
--- kpilot/conduits/docconduit/doc_conduit.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kpilot/conduits/docconduit/doc_conduit.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -20,11 +20,13 @@
 Comment[is]=Bætir textaskrám, sem hægt er að lesa í DOC lesara, við lófatölvuna þína.
 Comment[it]=Aggiunge file di testo al tuo Pilot, adatti per lettori DOC.
 Comment[ja]=テキストファイルを DOC リーダーに適した形式でハンドヘルドに追加します。
+Comment[kk]=DOC файлды оқи алатын қалта құрылғыға мәтінді көшіру.
 Comment[km]=បន្ថែម​ឯកសារ​អត្ថបទ​ទៅ​ឧបករណ៍​យួរ​ដៃ​របស់​អ្នក (សមស្រប​សម្រាប់​កម្មវិធី​អាន DOC) ។
 Comment[lt]=Prideda teksto bylas prie Jūsų nešiojamos knygelės, tinka DOC skaityklėms.
 Comment[ms]=Menambah fail teks ke komputer telapak, sesuai dengan pembaca DOC.
 Comment[nb]=Legger til tekstfiler på PDA-en, som passer for DOC-lesere.
 Comment[nds]=Föögt Textdateien op den Handreekner to, de för DOC-Kiekers passt.
+Comment[ne]=DOC रिडरका लागि उपयुक्त हुने पाठ फाइल तपाईँको ह्यान्डहेल्डमा थप्दछ ।
 Comment[nl]=Voegt tekstvelden toe aan uw handheld, geschikt voor DOC-lezers.
 Comment[nn]=Legg til tekstfiler på den handhaldne, passar til DOC-lesarar.
 Comment[pl]=Dodaje pliki tekstowe do Twojego palmtopa, w postaci odpowiedniej dla przeglądarek DOC.
@@ -48,6 +50,7 @@
 Name[fa]=رایانۀ جیبی DOC
 Name[hi]=पॉम डॉक
 Name[nds]=Palm-DOC
+Name[ne]=पाल्म DOC
 Name[pt]=DOC do Palm
 Name[ta]=பாம் ஆவணம்
 Implemented=file
Index: kpilot/conduits/configure.in.in
===================================================================
--- kpilot/conduits/configure.in.in	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kpilot/conduits/configure.in.in	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -99,7 +99,7 @@
   LIBS="$LIBS $PISOCK_LIB $MAL_LIB"
   CFLAGS="$CFLAGS $MAL_INCLUDE"
   CPPFLAGS="$CPPFLAGS $all_includes $PISOCK_INCLUDE $MAL_INCLUDE"
-  LDFLAGS="$LDFLAGS $all_libraries"
+  LDFLAGS="$LDFLAGS $PISOCK_LDFLAGS $all_libraries"
   AC_LANG_SAVE
   AC_LANG_CPLUSPLUS
   AC_TRY_LINK(dnl
Index: kpilot/conduits/malconduit/mal_conduit.desktop
===================================================================
--- kpilot/conduits/malconduit/mal_conduit.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kpilot/conduits/malconduit/mal_conduit.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -23,12 +23,13 @@
 Name[is]=MAL (AvantGo)-rás
 Name[it]=Conduit MAL (AvantGo)
 Name[ja]=MAL (AvantGo) コンジット
+Name[kk]=MAL (AvantGo) арнасы
 Name[km]=បំពង់ MAL (AvantGo)
 Name[lt]=MAL (AvantGo) kanalas
-Name[mk]=МAL (AvantGo) спој
 Name[ms]=Saluran MAL (AvantGo) 
 Name[nb]=MAL (AvantGo) kanal
 Name[nds]=MAL(AvantGo)-Synkroniseren
+Name[ne]=MAL (AvantGo) कन्ड्युट
 Name[nn]=MAL-kopling (AvantGo)
 Name[nso]=Conduit ya MAL (AvantGo)
 Name[pl]=Łącznik do MAL (AvantGo)
@@ -48,7 +49,7 @@
 Name[zh_CN]=MAL (AvantGo) 管道
 Comment=Syncronize AvantGo (or generally a MAL server's content) to the handheld. This allows you to view web-pages offline on the handheld, like your cinema or TV schedule, or any other web page.
 Comment[af]=Sinkroniseer AvantGo (MAL bediener inhoud) informasie na die draagbare toestel. Dit maak dit moontlik om aflyn na web blaaie, soos TV en fliek skedules, te kyk.
-Comment[bg]=Синхронизиране на AvantGo към мобилно устройство. Тази приставка Ви позволява да разглеждате уеб страници без връзка с Мрежата.
+Comment[bg]=Синхронизиране на AvantGo към мобилно устройство. Тази приставка ви позволява да разглеждате уеб страници без връзка с Мрежата.
 Comment[ca]=Sincronitza AvantGo (o el contingut d'un servidor MAL en general) a l'agenda electrònica. Això us permet veure pàgines web a l'agenda electrònica en mode desconnectat, com ara la programació de TV o cinema o qualsevol altra pàgina web.
 Comment[cs]=Synchronizace AvantGo (nebo obecně obsahu MAL serverů) s PDA. To umožňuje offline prohlížení stránek v PDA např. TV programů, programů kin a mnoha dalších stránek.
 Comment[da]=Synkronisér AvantGo (eller mere alment indholdet på en MAL-server) med den håndholdte. Det lader dig kigge på nedsider offline på den håndholdte, såsom biografer eller tv-programmer, eller en hvilken som helst anden netside.
@@ -65,12 +66,14 @@
 Comment[hu]=AvantGo (vagy MAL-kiszolgáló) adatainak szinkronizálása a kézi számítógéppel. Lehetővé teszi weboldalak offline módban való megtekintését, például a mozi- vagy tévéműsort, vagy bármi mást.
 Comment[is]=Samstillir AvantGo (eða venjulega innihald MAL þjóns) við lófatölvuna. Þetta gerir þér kleyft að skoða vefsíður þegar þú ert ótengd(ur) vefnum, t.d. kvikmynda eða sjónvarpsdagskrá.
 Comment[it]=Sincronizza AvantGo (o il contenuto di un generico server MAL) con il palmare. In questo modo potrai visualizzare le pagine web offline sul palmare come per esempio la programmazione di un cinema o una TV o qualsiasi altra pagina web.
-Comment[ja]=AvantGo (又は一般に MAL サーバのコンテンツ) とハンドヘルドを同期させます。これにより、ハンドヘルドで映画や TV 番組表、その他のウェブページをオフラインで閲覧できるようになります。
+Comment[ja]=AvantGo (または一般に MAL サーバのコンテンツ) とハンドヘルドを同期させます。これにより、ハンドヘルドで映画や TV 番組表、その他のウェブページをオフラインで閲覧できるようになります。
+Comment[kk]=AvantGo (немесе жалпы MAL сервердің мазмұнын) қалта құрылғымен қадамдастыру арнасы. Бұл сол құрылғыда кино, ТВ кестеңізді немесе басқа веб парақтарды желіге қосылмай көруге мүмкіндік береді.
 Comment[km]=ធ្វើ​សមកាលកម្ម AvantGo (ជាទូទៅ​គឺ មាតិកា​របស់​ម៉ាស៊ីន​បម្រើ MAL) ទៅ​នឹង​ឧបករណ៍​យួរ​ដៃ ។ វា​អនុញ្ញាត​ឲ្យ​អ្នក​មើល​ទំព័រ​បណ្ដាញ (កាលវិភាគ​រោង​ភាពយន្ត ឬ ទូរទស្សន៍...) នៅ​ក្រៅ​បណ្ដាញ នៅ​លើ​ឧបករណ៍​យួរ​ដៃ​របស់​អ្នក ។
 Comment[lt]=Sinchronizuoti AvantGo (ar MAL serverio turinį apskritai) su nešiojamu įrenginiu. Tai leis jums peržiūrėti žiniatinklio puslapius nešiojamame įrenginyje, tokius kaip kino teatro ar TV programas, bei bet kokį kitą puslapį, neprisijungus prie Interneto.
 Comment[ms]=Mensegerakkan AvantGo (atau kandungan pelayan MAL secara umum) ke komputer telapak. Ini membolehkan anda memaparkan laman web di luar talian pada komputer telapak, seperti pawagam atau jadual TV, atau laman web lain.
 Comment[nb]=Synkroniser AvantGo (eller generelt innholdet i en MAL-tjener) til PDA-en. På denne måten kan du se nettsider frakoblet på PDA-en. slik som TV-programlister, kinoprogrammer eller andre nettsider.
 Comment[nds]=Synkroniseert den Inholt vun AvantGo oder jichtenseen anner MAL-Server ("Mobile Application Link") mit den Handreekner. So kannst Du Nettsieden ahn Verbinnen op den Handreekner ankieken, t.B. dat Kino- oder Feernsehprogramm.
+Comment[ne]=AvantGo (वा साधारणतया एउटा MAL सर्भरको सामाग्री) ह्यान्डहेल्डमा समक्रमण गर्नुहोस् । यसले तपाईँलाई वेब पृष्ठ, जस्तै: सिनेमा वा टी भी कार्यतालिका, वा अन्य कुनै वेब पृष्ठ ह्यान्डहेल्डको अफलाईनमा हेर्न अनुमति दिन्छ ।
 Comment[nl]=Avantgo met de handheld synchroniseren (of eigenlijk met de inhoud van een MAL-server). Dit maakt het mogelijk om een webpagina offline op uw handheld te bekijken. Dit is handig voor allerlei zaken als bijvoorbeeld de TV-gids.
 Comment[pl]=Synchronizuje AvantGo (lub ogólnie zawartość serwera MAL) z palmtopem. Pozwala to przeglądać bez połączenia z siecią strony WWW na palmtopie, np. repertuar kin lub program telewizyjny.
 Comment[pt]=Sincroniza o AvantGo (ou, genericamente, o conteúdo de um servidor de MAL) para o dispositivo móvel. Isto permite-lhe ver as páginas Web no dispositivo móvel sem estar ligado, como o seu horário de cinema ou TV ou ainda qualquer outra página Web.
Index: kpilot/conduits/popmail/popmail-conduit.desktop
===================================================================
--- kpilot/conduits/popmail/popmail-conduit.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kpilot/conduits/popmail/popmail-conduit.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -20,11 +20,13 @@
 Comment[is]=Sendu tölvupóst frá lófatölvunni þinni gegnum KMail.
 Comment[it]=Invia la posta dal tuo palmare tramite KMail.
 Comment[ja]=KMail 経由でハンドヘルドからメールを送信します。
+Comment[kk]=Қалта құрылғының поштасын KMail арқылы жіберу.
 Comment[km]=ផ្ញើ​សំបុត្រ​ទៅ​ឧបករណ៍​យួរដៃ​របស់​អ្នក​តាម​រយៈ KMail ។
 Comment[lt]=Siųsti paštą iš nešiojamo įrenginio per KMail.
 Comment[ms]=Menghantar mel dari komputer telapak melalui KMail.
 Comment[nb]=Send e-post fra PDA-en gjennom KMail.
 Comment[nds]=Nettbreven vun Dien Handreekner över KMail afsennen
+Comment[ne]=तपाईँको ह्यान्डहेल्डबाट केडीई मेलहुदै पत्र पठाउनुहोस् ।
 Comment[nl]=Dit conduit verzendt mail van uw handheld met behulp van KMail.
 Comment[pl]=Wysyła pocztę z palmtopa za pomocą KMail.
 Comment[pt]=Enviar e-mail do seu dispositivo móvel através do KMail.
@@ -42,6 +44,7 @@
 Comment[zh_TW]=透過 KMail 送出您 handheld 的信件。
 Name=Mail
 Name[af]=Pos
+Name[ar]=البريد
 Name[be]=Пошта
 Name[br]=Lizher
 Name[ca]=Correu
@@ -64,11 +67,14 @@
 Name[is]=Póstur
 Name[it]=Posta
 Name[ja]=メール
+Name[kk]=Пошта
 Name[km]=សំបុត្រ
 Name[lt]=Paštas
+Name[mk]=Е-пошта
 Name[ms]=Mel
 Name[nb]=E-post
 Name[nds]=Nettpost
+Name[ne]=पत्र
 Name[nl]=E-mail
 Name[nn]=E-post
 Name[pa]=ਪੱਤਰ
Index: kpilot/conduits/knotes/knotes-conduit.desktop
===================================================================
--- kpilot/conduits/knotes/knotes-conduit.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kpilot/conduits/knotes/knotes-conduit.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -3,7 +3,7 @@
 Type=Service
 Comment=This conduit syncs the Memo Pad application with KNotes.
 Comment[af]=Hierdie pad synkroniseer die Memo Pad program met KNotes.
-Comment[bg]=Синхронизация на бележки на КДЕ с мобилни устройства
+Comment[bg]=Синхронизация на бележки на KDE с мобилни устройства
 Comment[bs]=Ovaj conduit sinhronizuje Memo Pad aplikaciju sa KNotes.
 Comment[ca]=Aquest conducte sincronitza l'aplicació Memo Pad amb Knotes.
 Comment[cs]=Toto propojení synchronizuje vašeho Pilota s poznámkami v KNotes.
@@ -23,11 +23,14 @@
 Comment[is]=Þessi rás samstillir lófatölvuna þína við KNotes.
 Comment[it]=Questo condotto sincronizza l'applicazione Memo Pad con KNotes.
 Comment[ja]=このコンジットはメモ帳アプリケーションを KNotes と同期させます。
+Comment[kk]=Memo Pad қолданбаны KNotes жазбаларымен қадамдастыру арнасы.
 Comment[km]=បំពង់​នេះ​អាច​ឲ្យ​កម្មវិធី Memo Pad ធ្វើ​សមកាលកម្ម​ជាមួយ​នឹង KNotes ។
 Comment[lt]=Šis kanalas sinchronizuoja Memo Pad programą su KNotes.
+Comment[mk]=Овој канал ја синхронизира апликацијата Memo Pad со КБелешки.
 Comment[ms]=Saluran ini mensegerakkan aplikasi Memo Pad dengan KNotes.
 Comment[nb]=Denne kanalen synkroniserer notatblokk-programmet med KNotes.
 Comment[nds]=Synkroniseert dat Palm-Programm "Memo Pad" mit KNotes.
+Comment[ne]=यो कन्ड्युटले मेमो प्याड अनुप्रयोग केडीई टिप्पणीमा सिन्क गर्दछ ।
 Comment[nl]=Dit conduit synchroniseert de Memo Pad met KNotes.
 Comment[nn]=Denne koplinga synkroniserer «Memo Pad»-applikasjonen med KNotes.
 Comment[pl]=Ten łącznik synchronizuje program Memo Pad palmtopa z KNotes (notatkami).
@@ -61,10 +64,13 @@
 Name[hu]=KNotes / memók
 Name[is]=KNotes / minnisblöð
 Name[it]=KNotes / Memo
+Name[kk]=KNotes / Жазбалар
 Name[km]=KNotes / អនុស្សរណៈ
 Name[lt]=KNotes / Memo
+Name[mk]=КБелешки / Меморандуми
 Name[ms]=KNotes / Memo
 Name[nds]=KNotes / Notizen
+Name[ne]=केडीई टिप्पणी / मेमो
 Name[nl]=KNotes / memo's
 Name[nn]=KNotes / Memoar
 Name[pl]=KNotes / Notatki
Index: kpilot/conduits/recordconduit/record-conduit.desktop
===================================================================
--- kpilot/conduits/recordconduit/record-conduit.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kpilot/conduits/recordconduit/record-conduit.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -3,6 +3,7 @@
 Type=Service
 Name=Records (Experimental)
 Name[af]=Rekords (Eksperimenteel)
+Name[bg]=Records (Експериментално)
 Name[ca]=Registres (Experimental)
 Name[cs]=Záznamy (experimentální)
 Name[da]=Indspilninger (eksperimentel)
@@ -15,8 +16,10 @@
 Name[hu]=Rekordok (kísérleti)
 Name[it]=Record (sperimentale)
 Name[ja]=レコード (実験中)
+Name[kk]=Жазулар (Эксперименталдық)
 Name[km]=កំណត់​ត្រា (ពិសោធន៍)
 Name[nds]=Logbook (warrt utprobeert)
+Name[ne]=रेकर्ड (प्रयोगात्मक)
 Name[nl]=Opnames (experimenteel)
 Name[pl]=Wpisy (eksperymentalne)
 Name[pt]=Registos (Experimental)
@@ -28,6 +31,7 @@
 Name[sr@Latn]=Slogovi (eksperimentalno)
 Name[sv]=Inspelningar (experimentell)
 Name[uk]=Записи (експериментальний)
+Name[zh_CN]=记录(试验性)
 Name[zh_TW]=紀錄（實驗性）
 Comment=This conduit does nothing.
 Comment[af]=Hierdie pad doen niks
@@ -51,11 +55,14 @@
 Comment[is]=Þessi rás gerir ekki neitt.
 Comment[it]=Questo conduit non fa nulla.
 Comment[ja]=このコンジットは未知です。
+Comment[kk]=Ештеңе істемейтін арна.
 Comment[km]=បំពង់​នេះ​មិន​ធ្វើ​អ្វី​ទាំងអស់ ។
 Comment[lt]=Šis kanalas nieko neatlieka.
+Comment[mk]=Овој канал не прави ништо.
 Comment[ms]=Saluran ini tidak berbuat apa-apa.
 Comment[nb]=Denne kanalen gjør ingenting.
 Comment[nds]=Disse Kanaal deit gor nix.
+Comment[ne]=यो कन्ड्युटले केहि पनि गर्दैन ।
 Comment[nl]=Dit conduit doet niets.
 Comment[nn]=Denne koplinga gjer ingenting.
 Comment[pl]=Ten łącznik nic nie robi.
Index: kpilot/conduits/Makefile.am
===================================================================
--- kpilot/conduits/Makefile.am	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kpilot/conduits/Makefile.am	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -5,12 +5,15 @@
 
 if include_malconduit
 MAL_SUBDIR = malconduit
+else
+MAL_SUBDIR = 
 endif
 
 SUBDIRS = \
 	  abbrowserconduit \
 	  docconduit \
 	  knotes \
+	  $(MAL_SUBDIR) \
 	  memofileconduit \
 	  notepadconduit \
 	  popmail \
Index: kpilot/conduits/null/null-conduit.desktop
===================================================================
--- kpilot/conduits/null/null-conduit.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kpilot/conduits/null/null-conduit.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -4,6 +4,7 @@
 Name=NULL
 Name[ca]=NUL
 Name[fa]=پوچ
+Name[mk]=Нулов
 Name[ro]=NUL
 Name[sk]=NIČ
 Name[ta]=வெற்று மதிப்பு
@@ -30,11 +31,14 @@
 Comment[is]=Þessi rás gerir ekki neitt.
 Comment[it]=Questo conduit non fa nulla.
 Comment[ja]=このコンジットは未知です。
+Comment[kk]=Ештеңе істемейтін арна.
 Comment[km]=បំពង់​នេះ​មិន​ធ្វើ​អ្វី​ទាំងអស់ ។
 Comment[lt]=Šis kanalas nieko neatlieka.
+Comment[mk]=Овој канал не прави ништо.
 Comment[ms]=Saluran ini tidak berbuat apa-apa.
 Comment[nb]=Denne kanalen gjør ingenting.
 Comment[nds]=Disse Kanaal deit gor nix.
+Comment[ne]=यो कन्ड्युटले केहि पनि गर्दैन ।
 Comment[nl]=Dit conduit doet niets.
 Comment[nn]=Denne koplinga gjer ingenting.
 Comment[pl]=Ten łącznik nic nie robi.
Index: kpilot/conduits/vcalconduit/todo-conduit.desktop
===================================================================
--- kpilot/conduits/vcalconduit/todo-conduit.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kpilot/conduits/vcalconduit/todo-conduit.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -3,7 +3,7 @@
 Type=Service
 Comment=This conduit syncs the ToDo list from your handheld to KOrganizer.
 Comment[af]=Hierdie pad sinkroniseer die Te-doen lys vanaf jou draagbare toestel na KOrganizer.
-Comment[bg]=Синхронизация на списъка със задачи на мобилно устройство с организатора в КДЕ
+Comment[bg]=Синхронизация на списъка със задачи на мобилно устройство с организатора в KDE
 Comment[bs]=Ovaj conduit sinhronizuje listu Zadataka na ručnom računaru sa KOrganizerom.
 Comment[ca]=Aquest conducte sincronitza la llista de pendents des de la vostra agenda electrònica a KOrganizer.
 Comment[cs]=Toto propojení synchronizuje seznam úkolů s KOrganizérem
@@ -23,10 +23,12 @@
 Comment[is]=Þessi rás samstillir verkþáttalista lófatölvunnar þinnar og KOrganizer.
 Comment[it]=Questo condotto sincronizza il tuo Pilot con la lista delle cose da fare di KOrganizer.
 Comment[ja]=このコンジットはハンドヘルドの To-do と KOrganizer を同期させます。
+Comment[kk]=Қалта құрылғыдағы жоспар тізімін KOrganizer-мен қадамдастыру арнасы.
 Comment[km]=បំពង់​នេះ​ធ្វើ​សមកាលកម្ម​បញ្ជី​ការងារ​ត្រូវ​ធ្វើ​ពី​ឧបករណ៍​យួរ​ដៃ​របស់​អ្នកទៅ KOrganizer ។
 Comment[ms]=Saluran ini mensegerakkan senarai tugasan  dari komputer telapak anda ke KOrganizer.
 Comment[nb]=Denne kanalen synkroniserer gjørelista fra PDA-en til KOrganizer.
 Comment[nds]=Synkroniseert de Opgavenlist vun den Handreekner mit KOrganizer.
+Comment[ne]=यो कन्डयुटले केडीई आयोजकमा ह्यान्डहेल्डबाट कार्य गर्ने सूचि सिन्क गर्दछ ।
 Comment[nl]=Dit conduit synchroniseert de takenlijst van uw handheld met KOrganizer.
 Comment[nn]=Denne koplinga synkroniserer oppgåvelista frå den handheldte eininga di til KOrganizer.
 Comment[pl]=Ten łącznik synchronizuje listę zadań z palmtopa z KOrganizerem.
@@ -46,7 +48,8 @@
 Comment[zh_TW]=此軟體將您的 handheld 與 KOrganizer 的待辦事項清單同步。
 Name=ToDos (KOrganizer)
 Name[af]=Te-doen (KOrganizer)
-Name[be]=Заданьні (K Арганізатар)
+Name[ar]=الواجبات (KOrganizer)
+Name[be]=Заданні (K Арганізатар)
 Name[br]=Traoù d'ober (KOrganizer)
 Name[bs]=Zadaci (KOrganizer)
 Name[ca]=Pendents (KOrganizer)
@@ -67,11 +70,13 @@
 Name[is]=Verkþáttalistar (KOrganizer)
 Name[it]=Cose da fare (KOrganizer)
 Name[ja]=To-Do (KOrganizer)
+Name[kk]=Жоспарлар (KOrganizer)
 Name[km]=ការងារ​ត្រូវ​ធ្វើ (KOrganizer)
 Name[lt]=Darbai (KOrganizer)
 Name[ms]=Tugsan (KOrganizer)
 Name[nb]=Gjøreliste (KOrganizer)
 Name[nds]=Opgaven (KOrganizer)
+Name[ne]=गर्नुपर्ने कार्यहरू (केडीई आयोजक)
 Name[nl]=Taken (KOrganizer)
 Name[nn]=Oppgåveliste (KOrganizer)
 Name[pl]=Do zrobienia (Korganizer)
Index: kpilot/conduits/vcalconduit/vcal-conduit.desktop
===================================================================
--- kpilot/conduits/vcalconduit/vcal-conduit.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kpilot/conduits/vcalconduit/vcal-conduit.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -3,6 +3,7 @@
 Type=Service
 Name=Calendar (KOrganizer)
 Name[af]=Kalender (KOrganizer)
+Name[ar]=التقويم (KOrganizer)
 Name[be]=Каляндар (K Арганізатар)
 Name[br]=Deiziadur (KOrganizer)
 Name[bs]=Kalendar (KOrganizer)
@@ -24,11 +25,14 @@
 Name[is]=Dagbók (KOrganizer)
 Name[it]=Calendario (KOrganizer)
 Name[ja]=カレンダー (KOrganizer)
+Name[kk]=Күнтізбе (KOrganizer)
 Name[km]=ប្រតិទិន (KOrganizer)
 Name[lt]=Kalendorius (KOrganizer)
+Name[mk]=Календар (КОрганизатор)
 Name[ms]=Kalendar (KOrganizer)
 Name[nb]=Kalender (KOrganizer)
 Name[nds]=Kalenner (KOrganizer)
+Name[ne]=क्यालेन्डर (केडीई आयोजक)
 Name[nl]=Agenda (KOrganizer)
 Name[nn]=Kalender (KOrganizer)
 Name[pl]=Kalendarz (Korganizer)
@@ -49,7 +53,7 @@
 Name[zh_TW]=行事曆(KOrganizer)
 Comment=This conduit synchronizes your handheld with the KOrganizer datebook.
 Comment[af]=Hierdie pad sinkroniseer jou draagbare toestel met die KOrganizer datum boek.
-Comment[bg]=Синхронизация на календара на мобилно устройство с организатора в КДЕ.
+Comment[bg]=Синхронизация на календара на мобилно устройство с организатора в KDE.
 Comment[ca]=Aquest conducte sincronitza la vostra agenda electrònica amb la llibreta de dates de KOrganizer.
 Comment[cs]=Toto propojení synchronizuje seznam úkolů s KOrganizérem.
 Comment[da]=Denne kanal synkroniserer din håndholdte med KOrganizer-datobogen.
@@ -67,10 +71,13 @@
 Comment[is]=Þessi rás samstillir lófatölvuna þína við dagbók KOrganizer.
 Comment[it]=Questo conduit sincronizza il tuo palmare con il calendario di KOrganizer.
 Comment[ja]=このコンジットはハンドヘルドを KOrganizer の手帳と同期させます。
+Comment[kk]=Қалта құрылғыдағы күнтізбені KOrganizer-мен қадамдастыру арнасы.
 Comment[km]=បំពង់​នេះ​ធ្វើ​សមកាលកម្ម​ឧបករណ៍​យួរ​ដៃ​របស់​អ្នក​ជាមួយ​នឹង​សៀវភៅ​កាលបរិច្ឆេទ KOrganizer ។
+Comment[mk]=Овој канал ги синхронизира рачниот уред и датумите од KОрганизатор.
 Comment[ms]=Saluran ini mensegerakkan komputer telapak dengan buku tarikh KOrganizer.
 Comment[nb]=Denne kanalen synkroniserer PDA-en med KOrganizers almanakk.
 Comment[nds]=Synkroniseert den Mötenkalenner vun den Handreekner mit KOrganizer.
+Comment[ne]=यो कन्ड्युटले केडीई आयोजक मिति पुस्तिकामा ह्यान्डहेल्ड समक्रमण गर्छ ।
 Comment[nl]=Dit conduit synchroniseert uw handheld met KOrganizer's datumboek.
 Comment[pl]=Ten łącznik synchronizuje palmtopa z terminarzem KOrganizera.
 Comment[pt]=Esta conduta sincroniza o seu dispositivo móvel com a agenda do KOrganizer.
Index: kpilot/conduits/vcalconduit/vcalRecord.cc
===================================================================
--- kpilot/conduits/vcalconduit/vcalRecord.cc	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kpilot/conduits/vcalconduit/vcalRecord.cc	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -584,7 +584,7 @@
 	if (eventCategories.size() < 1)
 	{
 		// This event has no categories.
-		de->setCategory(Pilot::Unfiled);
+		((PilotRecordBase *)de)->setCategory(Pilot::Unfiled);
 		return;
 	}
 
@@ -623,6 +623,6 @@
 		}
 	}
 
-	de->setCategory(Pilot::Unfiled);
+	((PilotRecordBase *)de)->setCategory(Pilot::Unfiled);
 }
 
Index: kpilot/conduits/abbrowserconduit/abbrowser_conduit.desktop
===================================================================
--- kpilot/conduits/abbrowserconduit/abbrowser_conduit.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kpilot/conduits/abbrowserconduit/abbrowser_conduit.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -3,7 +3,7 @@
 Type=Service
 Comment=This conduit syncs the handheld addressbook with KDE's addressbook.
 Comment[af]=Hierdie pad sinkroniseer die draagbare toestel adresboek met KDE se adresboek.
-Comment[bg]=Синхронизация на адресника на КДЕ с мобилни устройства
+Comment[bg]=Синхронизация на адресника на KDE с мобилни устройства
 Comment[bs]=Ovaj conduit sinhronizuje adresar ručnog računara sa KDEovim adresarom.
 Comment[ca]=Aquest conducte sincronitza la llibreta d'adreces de la vostra agenda electrònica amb la llibreta d'adreces de KDE.
 Comment[cs]=Toto propojení synchronizuje vašeho Pilota Knihou adres
@@ -23,11 +23,14 @@
 Comment[is]=Þessi rás samstillir póstfangaskrár KDE og lófatölvunnar
 Comment[it]=Questo condotto sincronizza il tuo palmare con la rubrica indirizzi di KDE
 Comment[ja]=このコンジットはハンドヘルドのアドレス帳をKDEのアドレス帳と同期させます。
+Comment[kk]=Қалта құрылғыдағы адрестік кітапшамен KDE-нің адрестік кітапшаларды қадамдастыру арнасы.
 Comment[km]=បំពង់​នេះ​អាច​ឲ្យ​សៀវភៅ​អាសយដ្ឋាន​របស់​ឧបករណ៍​យួរដៃ ធ្វើ​សមកាលកម្ម​ជាមួយ​នឹង​សៀវភៅ​អាសយដ្ឋាន​របស់ KDE
 Comment[lt]=Šis kanalas sinchronizuoja nešiojamą adresų knygelę su KDE adresų knygele.
+Comment[mk]=Овој канал ги синхронизира адресарите од рачниот уред и од KDE.
 Comment[ms]=Saluran ini mensegerakkan buku alamat komputer telapak dengan buku alamat KDE.
 Comment[nb]=Denne kanalen synkroniserer Pilotens adressebok med KDEs adressebok.
 Comment[nds]=Synkroniseert de Adressböker vun Handreekners un KDE.
+Comment[ne]=यो कन्ड्युटले केडीई को ठेगाना पुस्तकमा ह्यान्डल गरिएका ठेगाना पुस्तिका सिन्क गर्दछ ।
 Comment[nl]=Dit conduit synchroniseert uw handheld met KDE's adresboek.
 Comment[nn]=Denne koplinga synkroniserer den handheldte adresseboka med med KDE-adresseboka.
 Comment[pl]=Ten łącznik synchronizuje książkę adresową palmtopa z książką adresową KDE.
@@ -73,11 +76,14 @@
 Name[is]=Póstfangaskrá
 Name[it]=Rubrica degli indirizzi
 Name[ja]=アドレス帳
+Name[kk]=Адрестік кітапшасы
 Name[km]=សៀវភៅ​អាសយដ្ឋាន
 Name[lt]=Adresų knygelė
+Name[mk]=Адресар
 Name[ms]=Buku Alamat
 Name[nb]=Addressebok
 Name[nds]=Adressbook
+Name[ne]=ठेगाना पुस्तिका
 Name[nl]=Adresboek
 Name[nn]=Adressebok
 Name[pl]=Książka adresowa
Index: kpilot/kpilot/kpilot_config.desktop
===================================================================
--- kpilot/kpilot/kpilot_config.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kpilot/kpilot/kpilot_config.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -13,6 +13,7 @@
 
 Name=KPilot Configuration
 Name[af]=KPilot opstelling
+Name[ar]=إعداد KPilot
 Name[be]=Канфігурацыя KPilot
 Name[br]=Kefluniadur KPilot
 Name[bs]=KPilot podešavanje
@@ -33,11 +34,14 @@
 Name[is]=KPilot stillingar
 Name[it]=Configurazione KPilot
 Name[ja]=KPilot の設定
+Name[kk]=KPilot параметрлері
 Name[km]=ការ​កំណត់​រចនាសម្ព័ន្ធ KPilot
 Name[lt]=Kpilot konfigūracija
+Name[mk]=Конфигурација на КПилот
 Name[ms]=Konfigurasi KPilot
 Name[nb]=KPilot oppsett
 Name[nds]=KPilot instellen
+Name[ne]=केडीई पाइलट कन्फिगरेसन
 Name[nl]=KPilot instellingen
 Name[nn]=KPilot-oppsett
 Name[pl]=konfiguracja KPilota
@@ -78,11 +82,14 @@
 Comment[is]=Aðalstillingar KPilot
 Comment[it]=Configurazione principale di KPilot
 Comment[ja]=KPilot 主要設定
+Comment[kk]=KPilot негізгі параметрлері
 Comment[km]=ការ​កំណត់​រចនាសម្ព័ន្ធ​សំខាន់ៗ​របស់ KPilot
 Comment[lt]=KPilot bendrasis konfigūravimas
+Comment[mk]=Главна конфигурација
 Comment[ms]=Konfigurasi Utama KPilot 
 Comment[nb]=KPilot hovedoppsett
 Comment[nds]=Hööftinstellen för KPilot
+Comment[ne]=केडीई पाइलट मुख्य कन्फिगरेसन
 Comment[nl]=KPilot algemene instellingen
 Comment[nn]=KPilot hovudoppsett
 Comment[pl]=Główna konfiguracja KPilota
@@ -121,9 +128,11 @@
 Keywords[ja]=kpilot,主要
 Keywords[km]=kpilot,សំខាន់
 Keywords[lt]=kpilot,main,pagrindinis
+Keywords[mk]=kpilot,main.кпилот,главно
 Keywords[ms]=kpilot,utama
 Keywords[nb]=kpilot,hoved
 Keywords[nds]=KPilot,Hööft,Hööftinstellen,instellen
+Keywords[ne]=केडीई पाइलट, मुख्य
 Keywords[nl]=kpilot,algemeen
 Keywords[nn]=kpilot,hovud
 Keywords[pl]=kpilot,główna,konfiguracja
Index: kpilot/kpilot/kpilot.desktop
===================================================================
--- kpilot/kpilot/kpilot.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kpilot/kpilot/kpilot.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -7,6 +7,8 @@
 Name[fr]=Palm Pilot
 Name[hi]=के-पायलट
 Name[lv]=KPilots
+Name[mk]=КПилот
+Name[ne]=केडीई पाइलट
 Name[pt_BR]=Ferramenta para PalmPilot
 Name[sv]=Kpilot
 Name[ta]=கேபைலட்
@@ -40,14 +42,16 @@
 GenericName[is]=PalmPilot tól
 GenericName[it]=Strumento per PalmPilot
 GenericName[ja]=PalmPilot ツール
+GenericName[kk]=PalmPilot құрылғысы
 GenericName[km]=ឧបករណ៍ PalmPilot
 GenericName[lt]=PalmPilot įrankis
 GenericName[lv]=PalmPilota Rīks
-GenericName[mk]=Алатка за Palm Pilot
+GenericName[mk]=Алатка за PalmPilot
 GenericName[ms]=Alat PalmPilot 
 GenericName[mt]=Għodda għall-Palm Pilot
 GenericName[nb]=PalmPilot-verktøy
 GenericName[nds]=PalmPilot-Warktüüch
+GenericName[ne]=पाल्म पाइलट उपकरण
 GenericName[nl]=Palm Pilot-synchronisatie
 GenericName[nn]=Palm Pilot-verktøy
 GenericName[nso]=Sebereka sa PalmPilot
Index: kpilot/kpilot/kpilotconduit.desktop
===================================================================
--- kpilot/kpilot/kpilotconduit.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kpilot/kpilot/kpilotconduit.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -4,7 +4,6 @@
 X-KDE-ServiceType=KPilotConduit
 Comment=KPilot Conduit
 Comment[af]=Kpilot Pad
-Comment[ar]=أنبوب KPilot
 Comment[az]=KPilot
 Comment[be]=Канал KPilot
 Comment[bg]=Приставка на KPilot
@@ -30,13 +29,15 @@
 Comment[is]=KPilot rásir
 Comment[it]=Conduit KPilot
 Comment[ja]=KPilot コンジット
+Comment[kk]=KPilot арнасы
 Comment[km]=បំពង់ KPilot
 Comment[lt]=KPilot kanalas
 Comment[lv]=KPilot Ķēde
-Comment[mk]=KPilot спој
+Comment[mk]=Канал за КПилот
 Comment[ms]=Saluran KPilot 
 Comment[nb]=KPilot-kanal
 Comment[nds]=KPilot-Kanaal (Synkroniseren)
+Comment[ne]=केडीई पाइलट कन्ड्युट
 Comment[nn]=KPilot-kopling
 Comment[nso]=Conduit ya KPilot
 Comment[pl]=Łącznik KPilota
Index: kpilot/kpilot/kpilotdaemon.desktop
===================================================================
--- kpilot/kpilot/kpilotdaemon.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kpilot/kpilot/kpilotdaemon.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -18,9 +18,9 @@
 Name[ja]=KPilot デーモン
 Name[lt]=KPilot tarnyba
 Name[lv]=KPilotDēmons
-Name[mk]=KPilot демон
 Name[ms]=Daemon KPilot
 Name[nds]=KPilot-Dämoon
+Name[ne]=केडीई पाइलट डेइमोन
 Name[nso]=Daemon ya KPilot
 Name[pl]=demon KPilota
 Name[pt_BR]=Servidor do KPilot
Index: kpilot/lib/pilotAppInfo.h
===================================================================
--- kpilot/lib/pilotAppInfo.h	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kpilot/lib/pilotAppInfo.h	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -136,8 +136,14 @@
 * (again, from pilot-link).
 */
 template <typename appinfo,
+#if PILOT_LINK_IS(0,12,2)
+	int(*unpack)(appinfo *, const unsigned char *, PI_SIZE_T),
+	int(*pack)(const appinfo *, unsigned char *, PI_SIZE_T)
+#else
 	int(*unpack)(appinfo *, unsigned char *, PI_SIZE_T),
-	int(*pack)(appinfo *, unsigned char *, PI_SIZE_T)>
+	int(*pack)(appinfo *, unsigned char *, PI_SIZE_T)
+#endif
+	>
 class PilotAppInfo : public PilotAppInfoBase
 {
 public:
Index: kpilot/configure.in.bot
===================================================================
--- kpilot/configure.in.bot	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kpilot/configure.in.bot	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,6 +1,7 @@
 if test "$HAVE_PISOCK" = "0" ; then
 	echo ""
-	echo "You're missing a compatible version of pilot-link for kpilot."
+	echo "You're missing a compatible version of pilot-link for KPilot."
+	echo "KPilot will not be built."
 	echo ""
 	all_tests=bad
 else
@@ -10,6 +11,7 @@
 		echo "This version is old and is known to cause problems"
 		echo "with KPilot.  Please compile KPilot with "
 		echo "pilot-link version 0.12.0 or greater."
+		echo "KPilot will not be built."
 		echo ""
 		all_tests=bad
 	fi
Index: knotes/local.desktop
===================================================================
--- knotes/local.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ knotes/local.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -2,11 +2,12 @@
 Encoding=UTF-8
 Name=Notes in Local File
 Name[af]=Notas in plaaslike lêer
+Name[ar]=الملاحظات في الملف المحلّي
 Name[be]=Нататкі ў лякальным файле
 Name[bg]=Бележки в локален файл
 Name[br]=Notennoù e rstr lec'hel
 Name[bs]=Bilješke u lokalnoj datoteci
-Name[ca]=Notas a fitxer local
+Name[ca]=Notes en fitxer local
 Name[cs]=Poznámky v lokálním souboru
 Name[da]=Noter i lokal fil
 Name[de]=Notizen in lokaler Datei
@@ -24,11 +25,14 @@
 Name[is]=Minnismiðar í staðbundinni skrá
 Name[it]=Note in file locale
 Name[ja]=ローカルファイルのメモ
+Name[kk]=Жергілікті файлдағы жазбалар
 Name[km]=ចំណាំ​ក្នុង​ឯកសារ​មូលដ្ឋាន
 Name[lt]=Užrašai vietinėje byloje
+Name[mk]=Белешки во локална датотека
 Name[ms]=Nota dalam fail setempat
 Name[nb]=Notater i lokal fil
 Name[nds]=Notizen in lokaal Datei
+Name[ne]=स्थानीय फाइलका द्रष्टव्य
 Name[nl]=Notities in lokaal bestand
 Name[nn]=Notat i lokal fil
 Name[pl]=Notatki w pliku lokalnym
@@ -44,7 +48,7 @@
 Name[tg]=Хабарҳо дар файли локалӣ
 Name[tr]=Yerel Dosyadaki Notlar
 Name[uk]=Нотатки у локальному файлі
-Name[zh_CN]=本地文件中的笔记
+Name[zh_CN]=本地文件中的便笺
 Name[zh_TW]=本地檔備忘錄
 X-KDE-Library=knotes_local
 Type=Service
Index: knotes/knotes_manager.desktop
===================================================================
--- knotes/knotes_manager.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ knotes/knotes_manager.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -3,6 +3,7 @@
 Encoding=UTF-8
 Name=Notes
 Name[af]=Notas
+Name[ar]=الملاحظات
 Name[be]=Нататкі
 Name[br]=Notennoù
 Name[bs]=Bilješke
@@ -24,10 +25,13 @@
 Name[is]=Minnismiðar
 Name[it]=Note
 Name[ja]=メモ
+Name[kk]=Жазбалар
 Name[km]=ចំណាំ
 Name[lt]=Užrašai
+Name[mk]=Белешки
 Name[ms]=Nota
 Name[nds]=Notizen
+Name[ne]=द्रष्टव्य
 Name[nl]=Notities
 Name[nn]=Notat
 Name[pl]=Notatki
Index: knotes/knotes.desktop
===================================================================
--- knotes/knotes.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ knotes/knotes.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -8,6 +8,7 @@
 
 GenericName=Popup Notes
 GenericName[af]=Opspring Notas
+GenericName[ar]=الملاحظات المنبثقة
 GenericName[bg]=Лепящи се бележки
 GenericName[bs]=Popup bilješke
 GenericName[ca]=Notes emergents
@@ -31,14 +32,16 @@
 GenericName[is]=Litlir gulir miðar
 GenericName[it]=Note a comparsa
 GenericName[ja]=ポップアップメモ
+GenericName[kk]=Қалқымалы жазбалар
 GenericName[km]=ចំណាំ​លេចឡើង
 GenericName[lt]=Pastabos lapeliuose
 GenericName[lv]=Izlecošās Piezīmes
-GenericName[mk]=Скокачки пораки
+GenericName[mk]=Скок-белешки
 GenericName[ms]=Nota Popup 
 GenericName[mt]=Noti żgħar
 GenericName[nb]=Oppsprett-notater
 GenericName[nds]=Opduk-Notizen
+GenericName[ne]=पपअप द्रष्टव्य
 GenericName[nl]=Notities
 GenericName[nn]=Oppsprettnotat
 GenericName[nso]=Ditshwao tsa Thlarogo
@@ -71,7 +74,8 @@
 Name[hi]=के-नोट्स
 Name[hr]=Bilješka
 Name[lv]=KPiezīmes
-Name[mk]=Блешки
+Name[mk]=КБелешки
+Name[ne]=केडीई टिपोट
 Name[nso]=KDitshwao
 Name[pl]=Notatki
 Name[ro]=Notiţe
Index: kontact/plugins/akregator/akregatorplugin.desktop
===================================================================
--- kontact/plugins/akregator/akregatorplugin.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kontact/plugins/akregator/akregatorplugin.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -35,11 +35,14 @@
 Comment[is]=Akregator íforrit
 Comment[it]=Plugin aKregator
 Comment[ja]=Akregator プラグイン
+Comment[kk]=Akregator модулі
 Comment[km]=កម្មវិធី​ជំនួយ Akregator
 Comment[lt]=Akregator priedas
+Comment[mk]=Приклучок за Akregator
 Comment[ms]=Plugin Akregator 
 Comment[nb]=Akgregator-programtillegg
 Comment[nds]=Akregator-Moduul
+Comment[ne]=एक्रिगेटर प्लगइन
 Comment[nl]=Akregatorplugin
 Comment[nn]=Akregator-programtillegg
 Comment[pl]=Wtyczka Akregatora
@@ -78,11 +81,13 @@
 Name[is]=Fréttastraumar
 Name[it]=Fonti
 Name[ja]=フィード
+Name[kk]=Ақпарлар
 Name[km]=មតិព័ត៌មាន
 Name[lt]=Kanalai
 Name[ms]=Suapan
 Name[nb]=Kanaler
 Name[nds]=Narichtenströöm
+Name[ne]=फिड
 Name[nn]=Kanalar
 Name[pl]=Kanały
 Name[pt]=Fontes
Index: kontact/plugins/akregator/akregatorplugin3.2.desktop
===================================================================
--- kontact/plugins/akregator/akregatorplugin3.2.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kontact/plugins/akregator/akregatorplugin3.2.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -34,11 +34,14 @@
 Comment[is]=Akregator íforrit
 Comment[it]=Plugin aKregator
 Comment[ja]=Akregator プラグイン
+Comment[kk]=Akregator модулі
 Comment[km]=កម្មវិធី​ជំនួយ Akregator
 Comment[lt]=Akregator priedas
+Comment[mk]=Приклучок за Akregator
 Comment[ms]=Plugin Akregator 
 Comment[nb]=Akgregator-programtillegg
 Comment[nds]=Akregator-Moduul
+Comment[ne]=एक्रिगेटर प्लगइन
 Comment[nl]=Akregatorplugin
 Comment[nn]=Akregator-programtillegg
 Comment[pl]=Wtyczka Akregatora
@@ -77,11 +80,13 @@
 Name[is]=Fréttastraumar
 Name[it]=Fonti
 Name[ja]=フィード
+Name[kk]=Ақпарлар
 Name[km]=មតិព័ត៌មាន
 Name[lt]=Kanalai
 Name[ms]=Suapan
 Name[nb]=Kanaler
 Name[nds]=Narichtenströöm
+Name[ne]=फिड
 Name[nn]=Kanalar
 Name[pl]=Kanały
 Name[pt]=Fontes
Index: kontact/plugins/test/kptestplugin.desktop
===================================================================
--- kontact/plugins/test/kptestplugin.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kontact/plugins/test/kptestplugin.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -13,7 +13,7 @@
 
 Comment=Kontact Test Plugin
 Comment[af]=Kontact toets inprop module
-Comment[be]=Тэставае дапаўненьне Кантакту
+Comment[be]=Тэставае дапаўненне Кантакту
 Comment[bg]=Приставка за проба
 Comment[bs]=Kontact testni dodatak
 Comment[ca]=Endollable de prova per a Kontact
@@ -34,11 +34,14 @@
 Comment[is]=Kontact prufu íforrit
 Comment[it]=Plugin test Kontact
 Comment[ja]=Kontact テストプラグイン
+Comment[kk]=Сынақ модулі
 Comment[km]=កម្មវិធី​ជំនួយ​ការ​សាកល្បង​ក្នុង Kontact
 Comment[lt]=Kontact bandymo priedas
+Comment[mk]=Приклучок за тест на Контакт
 Comment[ms]=Plugin Ujian Kontact 
 Comment[nb]=Kontact test-programtillegg
 Comment[nds]=Test-Moduul för Kontact
+Comment[ne]=परीक्षण प्लगइनमा सम्पर्क गर्नुहोस्
 Comment[nl]=Kontact Test-plugin
 Comment[nn]=Kontact, test-programtillegg
 Comment[pl]=Wtyczka Kontact do testowania
@@ -60,7 +63,7 @@
 Comment[zh_TW]=Kontact 測試外掛程式
 Name=TestPlugin
 Name[af]=Toets inprop module
-Name[be]=Тэставае дапаўненьне
+Name[be]=Тэставае дапаўненне
 Name[ca]=Endollable de prova
 Name[cy]=AtegynPrawf
 Name[de]=TestModul
@@ -75,11 +78,13 @@
 Name[is]=Prufu íforrit
 Name[it]=Plugin Test
 Name[ja]=テストプラグイン
+Name[kk]=Сынақ модулі
 Name[km]=កម្មវិធី​ជំនួយ​ការ​សាកល្បង
-Name[mk]=ПробенДодаток
+Name[mk]=Приклучок за тест
 Name[ms]=Plugin Ujian
 Name[nb]=Test-programtillegg
 Name[nds]=Testmoduul
+Name[ne]=परीक्षण प्लगइन
 Name[nl]=Test-plugin
 Name[nn]=Test-programtillegg
 Name[nso]=Plugin ya Teko
Index: kontact/plugins/weather/weatherplugin.desktop
===================================================================
--- kontact/plugins/weather/weatherplugin.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kontact/plugins/weather/weatherplugin.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -18,7 +18,7 @@
 
 Comment=Kontact Weather Plugin
 Comment[af]=Kontact weer inprop module
-Comment[be]=Дапаўненьне Кантакту "Надвор'е"
+Comment[be]=Дапаўненне Кантакту "Надвор'е"
 Comment[bg]=Приставка за информация за метеорологичното време
 Comment[bs]=Kontact dodatak za vremensku prognozu
 Comment[ca]=Endollable del temps per a Kontact
@@ -39,11 +39,14 @@
 Comment[is]=Kontact veður íforrit
 Comment[it]=Plugin Kontact meteorologico
 Comment[ja]=Kontact 気象サービスプラグイン
+Comment[kk]=Ауа райы модулі
 Comment[km]=កម្មវិធី​ជំនួយ​អាកាសធាតុ​ក្នុង Kontact
 Comment[lt]=Kontact orų pranešėjo priedas
+Comment[mk]=Приклучок на Контакт за време
 Comment[ms]=Plugin Cuaca Kontact 
 Comment[nb]=Kontact vær-programtillegg
 Comment[nds]=Weder-Moduul för Kontact
+Comment[ne]=मौसम प्लगइनमा सम्पर्क गर्नुहोस्
 Comment[nl]=Kontact Weerplugin
 Comment[nn]=Kontact, programtillegg for vêrmelding
 Comment[pl]=Wtyczka Kontact do wyświetlania pogody
@@ -66,6 +69,7 @@
 Comment[zh_TW]=Kontact 天氣外掛程式
 Name=Weather Service
 Name[af]=Weer diens
+Name[ar]=خدمة الطقس
 Name[br]=Servij an amzer
 Name[ca]=Servei meteorològic
 Name[cs]=Služba počasí
@@ -86,10 +90,13 @@
 Name[is]=Veðurþjónusta
 Name[it]=Servizio meteorologico
 Name[ja]=気象サービス
+Name[kk]=Ауа райы қызметі
 Name[km]=សេវា​អាកាសធាតុ
 Name[lt]=Orų tarnyba
+Name[mk]=Временска прогноза
 Name[nb]=Værtjeneste
 Name[nds]=Wederdeenst
+Name[ne]=मौसम कार्य
 Name[nl]=Weerbericht
 Name[nn]=Vêrmelding
 Name[pl]=Pogoda
Index: kontact/plugins/knode/knodeplugin.desktop
===================================================================
--- kontact/plugins/knode/knodeplugin.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kontact/plugins/knode/knodeplugin.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -16,7 +16,7 @@
 
 Comment=Kontact KNode Plugin
 Comment[af]=Kontact KNode inprop module
-Comment[be]=Дапаўненьне Кантакту "KNode"
+Comment[be]=Дапаўненне Кантакту "KNode"
 Comment[bg]=Приставка за четене на новини
 Comment[br]=Lugent Kontact KNode
 Comment[bs]=Kontact KNode dodatak
@@ -39,11 +39,13 @@
 Comment[is]=Kontact KNode íforrit
 Comment[it]=Plugin Knode Kontact
 Comment[ja]=Kontact KNode プラグイン
+Comment[kk]=KNode модулі
 Comment[km]=កម្មវិធី​ជំនួយ KNode ក្នុង Kontact
 Comment[lt]=Kontact KNode priedas
 Comment[ms]=Plugin KNode Kontact 
 Comment[nb]=Kontact programtillegg for KNode
 Comment[nds]=KNode-Moduul för Kontact
+Comment[ne]=केडीई नोड प्लगइन सम्पर्क गर्नुहोस्
 Comment[nl]=Kontact KNode-plugin
 Comment[nn]=Kontact-programtillegg for KNode
 Comment[pl]=Wtyczka Kontact do współpracy z KNode
@@ -66,6 +68,7 @@
 Comment[zh_TW]=Kontact KNode 外掛程式
 Name=News
 Name[af]=Nuus
+Name[ar]=الأخبار
 Name[be]=Навіны
 Name[br]=Keleier
 Name[bs]=Usenet
@@ -88,11 +91,14 @@
 Name[hu]=Hírek
 Name[is]=Fréttir
 Name[ja]=ニュース
+Name[kk]=Жаңалықтар
 Name[km]=ព័ត៌មាន
 Name[lt]=Naujienos
+Name[mk]=Вести
 Name[ms]=Berita
 Name[nb]=Njus
 Name[nds]=Narichten
+Name[ne]=समाचार
 Name[nl]=Nieuws
 Name[nn]=Nyheiter
 Name[pa]=ਖ਼ਬਰਾਂ
Index: kontact/plugins/specialdates/kcmsdsummary.desktop
===================================================================
--- kontact/plugins/specialdates/kcmsdsummary.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kontact/plugins/specialdates/kcmsdsummary.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -13,9 +13,10 @@
 
 Name=Special Dates
 Name[af]=Spesiale datums
+Name[ar]=التواريخ المرقومة
 Name[br]=Deiziadoù dibar
 Name[ca]=Dates especials
-Name[cs]=Speciální datumy
+Name[cs]=Speciální data
 Name[da]=Særlige datoer
 Name[de]=Besondere Termine
 Name[el]=Σημαντικές ημερομηνίες
@@ -32,11 +33,14 @@
 Name[is]=Sérstakir dagar
 Name[it]=Date speciali
 Name[ja]=特別な日
+Name[kk]=Ерекше күндер
 Name[km]=ថ្ងៃ​ពិសេស
 Name[lt]=Ypatingos datos
+Name[mk]=Специјални датуми
 Name[ms]=Tarikh Khusus
 Name[nb]=Spesielle datoer
 Name[nds]=Besünner Daag
+Name[ne]=विशेष मिति
 Name[nl]=Speciale data
 Name[nn]=Spesielle datoar
 Name[pl]=Daty specjalne
@@ -74,11 +78,14 @@
 Comment[is]=Yfirlitsuppsetning sérstakra daga
 Comment[it]=Impostazioni per le date speciali
 Comment[ja]=特別な日の要約設定
+Comment[kk]=Ерекше күндер тұжырымының баптауы
 Comment[km]=រៀបចំ​សេចក្ដី​សង្ខេប​ថ្ងៃ​ពិសេស
 Comment[lt]=Ypatingų datų santraukos sąranka
+Comment[mk]=Поставувања за прегледот на специјални датуми
 Comment[ms]=Setup Ringkasan Tarikh Khusus
 Comment[nb]=Sammendragsoppsett for spesielle datoer
 Comment[nds]=Översicht över besünner Daag instellen
+Comment[ne]=विशेष मिति सारांश सेटअप
 Comment[nl]=Instellingen voor speciale data in overzicht
 Comment[nn]=Oppsett av samandrag for spesielle datoar
 Comment[pl]=Ustawienia podsumowania dat specjalnych
@@ -117,9 +124,11 @@
 Keywords[ja]=誕生日,記念日,休日,設定,設定
 Keywords[km]=ថ្ងៃ​ខួប​កំណើត,បុណ្យ​ខួប,វិស្សមកាល,កំណត់​រចនាសម្ព័ន្ធ,ការ​កំណត់
 Keywords[lt]=birthday, anniversary, holiday, configure, settings, konfigūruoti, nustatymai, gimtadieniai, išeiginės,sukaktys
+Keywords[mk]=birthday, anniversary, holiday, configure, settings, роденден, годишнина, конфигурирање, конфигурација, поставувања
 Keywords[ms]=tarikh lahir, ulang tahun, cuti, konfigur, seting
 Keywords[nb]=fødselsdag, jubileum, ferie, sette opp, innstillinger
 Keywords[nds]=Geboortsdag,Johrdag,Fierdag,instellen
+Keywords[ne]=जन्मदिन, वार्षिकोत्सव, बिदा, कन्फिगर, सेटिङ
 Keywords[nl]=verjaardag,jubileum,vakantie,instellingen,configuratie,feestdag
 Keywords[nn]=fødselsdag,bursdag,gebursdag,jubileum,ferie,helgedag,merkedag,oppsett,innstillingar
 Keywords[pl]=urodziny,rocznica,rocznice,wakacje,urlop,konfiguracja,ustawienia
Index: kontact/plugins/specialdates/specialdatesplugin.desktop
===================================================================
--- kontact/plugins/specialdates/specialdatesplugin.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kontact/plugins/specialdates/specialdatesplugin.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -16,9 +16,10 @@
 
 Name=Special Dates
 Name[af]=Spesiale datums
+Name[ar]=التواريخ المرقومة
 Name[br]=Deiziadoù dibar
 Name[ca]=Dates especials
-Name[cs]=Speciální datumy
+Name[cs]=Speciální data
 Name[da]=Særlige datoer
 Name[de]=Besondere Termine
 Name[el]=Σημαντικές ημερομηνίες
@@ -35,11 +36,14 @@
 Name[is]=Sérstakir dagar
 Name[it]=Date speciali
 Name[ja]=特別な日
+Name[kk]=Ерекше күндер
 Name[km]=ថ្ងៃ​ពិសេស
 Name[lt]=Ypatingos datos
+Name[mk]=Специјални датуми
 Name[ms]=Tarikh Khusus
 Name[nb]=Spesielle datoer
 Name[nds]=Besünner Daag
+Name[ne]=विशेष मिति
 Name[nl]=Speciale data
 Name[nn]=Spesielle datoar
 Name[pl]=Daty specjalne
@@ -77,11 +81,14 @@
 Comment[is]=Sérstakir dagar íforrit
 Comment[it]=Plugin per le date speciali
 Comment[ja]=特別な日プラグイン
+Comment[kk]=Ерекше күндер модулі
 Comment[km]=កម្មវិធី​ជំនួយ​ថ្ងៃ​ពិសេស
 Comment[lt]=Ypatingų dienų priedas
+Comment[mk]=Приклучок за специјални датуми
 Comment[ms]=Plugin Tarikh Khusus
 Comment[nb]=Programtillegg for spesielle datoer
 Comment[nds]=Moduul för besünner Daag
+Comment[ne]=विशेष मिति प्लगइन
 Comment[nl]=Plugin voor speciale data
 Comment[nn]=Programtillegg for spesielle datoar
 Comment[pl]=Wtyczka specjalnych dat
Index: kontact/plugins/kitchensync/kitchensync.desktop
===================================================================
--- kontact/plugins/kitchensync/kitchensync.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kontact/plugins/kitchensync/kitchensync.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -37,11 +37,14 @@
 Comment[is]=KitchenSync íforrit
 Comment[it]=Plugin KitchenSync
 Comment[ja]=KitchenSync プラグイン
+Comment[kk]=KitchenSync модулі
 Comment[km]=កម្មវិធី​ជំនួយ KitchenSync
 Comment[lt]=KitchenSync priedas
+Comment[mk]=Приклучок за KitchenSync
 Comment[ms]=Plugin KitchenSync
 Comment[nb]=Programtillegg for KitchenSync
 Comment[nds]=KitchenSync-Moduul
+Comment[ne]=KitchenSync प्लगइन
 Comment[nl]=KitchenSync-plugin
 Comment[nn]=KitchenSync-programtillegg
 Comment[pl]=Wtyczka KitchenSync
@@ -62,7 +65,7 @@
 Comment[zh_TW]=KitchenSync 外掛程式
 Name=Synchronization
 Name[af]=Sinkronisasie
-Name[ar]=التزامن
+Name[ar]=المزامنة
 Name[be]=Сынхранізацыя
 Name[bs]=Sinhronizacija
 Name[ca]=Sincronització
@@ -85,11 +88,14 @@
 Name[is]=Samstilling
 Name[it]=Sincronizzazione
 Name[ja]=同期
+Name[kk]=Қадамдастыру
 Name[km]=សមកាលកម្ម
 Name[lt]=Sinchronizacija
+Name[mk]=Синхронизација
 Name[ms]=Segerakan
 Name[nb]=Synkronisering
 Name[nds]=Synkroniseren
+Name[ne]=समक्रमण
 Name[nl]=Sync
 Name[nn]=Synkronisering
 Name[pa]=ਸਮਕਾਲੀ
Index: kontact/plugins/kpilot/kpilotplugin.desktop
===================================================================
--- kontact/plugins/kpilot/kpilotplugin.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kontact/plugins/kpilot/kpilotplugin.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -18,7 +18,7 @@
 
 Comment=Kontact KPilot Plugin
 Comment[af]=Kontact KPilot inprop module
-Comment[be]=Дапаўненьне Кантакту "KPilot"
+Comment[be]=Дапаўненне Кантакту "KPilot"
 Comment[bg]=Приставка за връзка на адресника с мобилни устройства
 Comment[br]=Lugent Kontact KPilot
 Comment[bs]=Kontact KPilot dodatak
@@ -39,11 +39,14 @@
 Comment[is]=Kontact KPilot íforrit
 Comment[it]=Plugin KPilot Kontact
 Comment[ja]=Kontact KPilot プラグイン
+Comment[kk]=KPilot модулі
 Comment[km]=កម្មវិធី​ជំនួយ KPilot ក្នុង Kontact
 Comment[lt]=Kontact KPilot priedas
+Comment[mk]=Приклучок за КПилот во Контакт
 Comment[ms]=Plugin KPilot Kontact 
 Comment[nb]=Kontact programtillegg for KPilot
 Comment[nds]=KPilot-Moduul för Kontact
+Comment[ne]=केडीई पाइलट प्लगइन सम्पर्क गर्नुहोस्
 Comment[nl]=Kontact KPilot-plugin
 Comment[nn]=Kontact-programtillegg for KPilot
 Comment[pl]=Wtyczka KPilota do Kontact
@@ -65,6 +68,7 @@
 Comment[zh_TW]=Kontact KPilot 外掛程式
 Name=KPilot Configuration
 Name[af]=KPilot opstelling
+Name[ar]=إعداد KPilot
 Name[be]=Канфігурацыя KPilot
 Name[br]=Kefluniadur KPilot
 Name[bs]=KPilot podešavanje
@@ -85,11 +89,14 @@
 Name[is]=KPilot stillingar
 Name[it]=Configurazione KPilot
 Name[ja]=KPilot の設定
+Name[kk]=KPilot параметрлері
 Name[km]=ការ​កំណត់​រចនាសម្ព័ន្ធ KPilot
 Name[lt]=Kpilot konfigūracija
+Name[mk]=Конфигурација на КПилот
 Name[ms]=Konfigurasi KPilot
 Name[nb]=KPilot oppsett
 Name[nds]=KPilot instellen
+Name[ne]=केडीई पाइलट कन्फिगरेसन
 Name[nl]=KPilot instellingen
 Name[nn]=KPilot-oppsett
 Name[pl]=konfiguracja KPilota
Index: kontact/plugins/knotes/knotesplugin.desktop
===================================================================
--- kontact/plugins/knotes/knotesplugin.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kontact/plugins/knotes/knotesplugin.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -16,7 +16,7 @@
 
 Comment=Kontact KNotes Plugin
 Comment[af]=Kontact KNotes inprop module
-Comment[be]=Дапаўненьне Кантакту "K Нататкі"
+Comment[be]=Дапаўненне Кантакту "K Нататкі"
 Comment[bg]=Приставка за бележки
 Comment[br]=Lugent Kontact KNotes
 Comment[bs]=Kontact KNotes dodatak
@@ -39,11 +39,14 @@
 Comment[is]=Kontact KNotes íforrit
 Comment[it]=Plugin Kontact KNotes
 Comment[ja]=Kontact KNotes プラグイン
+Comment[kk]=KNotes модулі
 Comment[km]=កម្មវិធី​ជំនួយ KNotes ក្នុង Kontact
 Comment[lt]=Kontact KNotes priedas
+Comment[mk]=Приклучок за КБелешки во Контакт
 Comment[ms]=Plugin KNotes Kontact KNotes 
 Comment[nb]=Kontact programtillegg for KNotes
 Comment[nds]=KNotes-Moduul för Kontact
+Comment[ne]=केडीई द्रष्टव्य प्लगइन सम्पर्क गर्नुहोस्
 Comment[nl]=Kontact KNotes-plugin
 Comment[nn]=Kontact-programtillegg for KNotes
 Comment[pl]=Wtyczka Kontact do współpracy z KNotes
@@ -65,6 +68,7 @@
 Comment[zh_TW]=Kontact KNotes 外掛程式
 Name=Notes
 Name[af]=Notas
+Name[ar]=الملاحظات
 Name[be]=Нататкі
 Name[br]=Notennoù
 Name[bs]=Bilješke
@@ -86,10 +90,13 @@
 Name[is]=Minnismiðar
 Name[it]=Note
 Name[ja]=メモ
+Name[kk]=Жазбалар
 Name[km]=ចំណាំ
 Name[lt]=Užrašai
+Name[mk]=Белешки
 Name[ms]=Nota
 Name[nds]=Notizen
+Name[ne]=द्रष्टव्य
 Name[nl]=Notities
 Name[nn]=Notat
 Name[pl]=Notatki
Index: kontact/plugins/Makefile.am
===================================================================
--- kontact/plugins/Makefile.am	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kontact/plugins/Makefile.am	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -3,4 +3,4 @@
 endif
 
 SUBDIRS = $(KPILOT_KONTACTPLUGIN) kaddressbook kmail knotes korganizer \
-	summary weather knode newsticker multisynk specialdates akregator karm
+	summary weather knode newsticker specialdates akregator karm
Index: kontact/plugins/karm/karmplugin.desktop
===================================================================
--- kontact/plugins/karm/karmplugin.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kontact/plugins/karm/karmplugin.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -34,11 +34,14 @@
 Comment[is]=KArm íforrit
 Comment[it]=Plugin KArm
 Comment[ja]=KArm プラグイン
+Comment[kk]=KArm модулі
 Comment[km]=កម្មវិធី​ជំនួយ KArm
 Comment[lt]=KArm priedas
+Comment[mk]=Приклучок за KArm
 Comment[ms]=Plugin KArm 
 Comment[nb]=KArm-programtillegg
 Comment[nds]=KArm-Moduul
+Comment[ne]=केडीई आर्म प्लगइन
 Comment[nl]=KArm-plugin
 Comment[nn]=KArm-programtillegg
 Comment[pl]=Wtyczka KArm
@@ -60,7 +63,6 @@
 Name[af]=Karm
 Name[eo]=Tempomezurilo
 Name[hi]=के-आर्म
-Name[mk]=КРака
 Name[sv]=Karm
 Name[ta]=Kஅம்
 Name[xh]=KAlrm
Index: kontact/plugins/kaddressbook/kaddressbookplugin.desktop
===================================================================
--- kontact/plugins/kaddressbook/kaddressbookplugin.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kontact/plugins/kaddressbook/kaddressbookplugin.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -18,7 +18,7 @@
 
 Comment=Kontact KAddressBook Plugin
 Comment[af]=Kontact adresboek inprop module
-Comment[be]=Дапаўненьне Кантакту "K Адрасная кніга"
+Comment[be]=Дапаўненне Кантакту "K Адрасная кніга"
 Comment[bg]=Приставка за адресника
 Comment[br]=Lugent Kontact KAddressBook
 Comment[bs]=Kontact KAddressBook dodatak
@@ -41,11 +41,14 @@
 Comment[is]=Kontact KAddressBook íforrit
 Comment[it]=Plugin Kontact di KAddressbook
 Comment[ja]=Kontact KAddressbook プラグイン
+Comment[kk]=KAddressBook модулі
 Comment[km]=កម្មវិធី​ជំនួយ KAddressBook ក្នុង Kontact
 Comment[lt]=Kontact KAddressBook priedas
+Comment[mk]=Приклучок за КАдресар во Контакт
 Comment[ms]=Plugin KAddressBook Kontact 
 Comment[nb]=Kontact programtillegg for KAddressbook
 Comment[nds]=KAdressbook-Moduul för Kontact
+Comment[ne]=केडीई ठेगाना पुस्तिका प्लगइन सम्पर्क गर्नुहोस्
 Comment[nl]=Kontact KAddressBook-plugin
 Comment[nn]=Kontact, programtillegg for KDE-adresseboka
 Comment[pl]=Wtyczka Kontact do współpracy z KAddressBook
@@ -67,6 +70,7 @@
 Comment[zh_TW]=Kontact KAddressBook 外掛程式
 Name=Contacts
 Name[af]=Kontakte
+Name[ar]=المراسلون
 Name[be]=Кантакты
 Name[br]=Darempredoù
 Name[bs]=Kontakti
@@ -89,10 +93,13 @@
 Name[is]=Tengiliðir
 Name[it]=Contatti
 Name[ja]=コンタクト
+Name[kk]=Контакттар
 Name[km]=ទំនាក់ទំនង
 Name[lt]=Kontaktai
+Name[mk]=Контакти
 Name[ms]=Orang hubungan
 Name[nds]=Kontakten
+Name[ne]=सम्पर्क
 Name[nl]=Adressen
 Name[nn]=Kontaktar
 Name[pa]=ਸੰਪਰਕ
Index: kontact/plugins/korganizer/summarywidget.cpp
===================================================================
--- kontact/plugins/korganizer/summarywidget.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kontact/plugins/korganizer/summarywidget.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -277,6 +277,7 @@
 void SummaryWidget::popupMenu( const QString &uid )
 {
   KPopupMenu popup( this );
+  QToolTip::remove( this );
   popup.insertItem( i18n( "&Edit Appointment..." ), 0 );
   popup.insertItem( KGlobal::iconLoader()->loadIcon( "editdelete", KIcon::Small),
                     i18n( "&Delete Appointment" ), 1 );
Index: kontact/plugins/korganizer/kcmkorgsummary.desktop
===================================================================
--- kontact/plugins/korganizer/kcmkorgsummary.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kontact/plugins/korganizer/kcmkorgsummary.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -13,6 +13,7 @@
 
 Name=Appointments and To-dos
 Name[af]=Afsprake en te-doen lys
+Name[ar]=المواعيد و الواجبات
 Name[ca]=Cites i tasques pendents
 Name[cs]=Schůzky a úkoly
 Name[da]=Møder og gøremål
@@ -30,10 +31,12 @@
 Name[is]=Fundir og verkþættir
 Name[it]=Appuntamenti e cose da fare
 Name[ja]=約束と To-do
+Name[kk]=Кездесулер мен Жоспарлар
 Name[km]=ការ​ណាត់ និង ការងារ​ត្រូវ​ធ្វើ
 Name[lt]=Susitikimai ir užduotys
 Name[nb]=Avtaler og gjøremål
 Name[nds]=Terminen un Opgaven
+Name[ne]=भेटघाट गर्नुपर्ने कार्यहरू
 Name[nl]=Evenementen en taken
 Name[nn]=Avtalar og oppgåver
 Name[pl]=Spotkania i zadania
@@ -67,10 +70,13 @@
 Comment[is]=Uppsetning á yfirliti yfir fundi og verkþætti
 Comment[it]=Impostazioni sommario appuntamenti e cose da fare
 Comment[ja]=約束と To-do の要約設定
+Comment[kk]=Кездесулер мен Жоспарлар тұжырымының баптау
 Comment[km]=រៀបចំ​សេចក្ដី​សង្ខេប​ការ​ណាត់ និង ការងារ​ត្រូវ​ធ្វើ
 Comment[lt]=Susitikimų ir užduočių santraukos nustatymai
+Comment[mk]=Поставување на преглед за состаноци и задачи
 Comment[nb]=Oppsett av sammendraget av gjøremål og avtaler
 Comment[nds]=Termin- un Opgaven-Översicht instellen
+Comment[ne]=भेटघाट र गर्नुपर्ने कार्यहरूको सारांश सेटअप
 Comment[nl]=Overzichtsinstellingen voor evenementen en taken
 Comment[nn]=Oppsett av samandrag av avtalar og oppgåver
 Comment[pl]=Ustawienia podsumowania spotkań i zadań
@@ -87,7 +93,7 @@
 Comment[zh_TW]=約會與待辦事項摘要設定
 Keywords=calendar, todos, configure, settings
 Keywords[af]=calendar,todos,configure,settings
-Keywords[be]=каляндар, заданьні, настроіць, настройкі, calendar, todos, configure, settings
+Keywords[be]=каляндар, заданні, настроіць, настаўленні, calendar, todos, configure, settings
 Keywords[bg]=календар, задачи, организатор, calendar, todos, configure, settings
 Keywords[bs]=calendar, todos, configure, settings, kalendar, zadaci, postavke
 Keywords[ca]=calendari, pendents, configuració, arranjament
@@ -113,6 +119,7 @@
 Keywords[ms]=kalendar, tugasan, konfigur, seting
 Keywords[nb]=kalender, gjørelister, oppsett, innstillinger
 Keywords[nds]=Kalenner,Opgaven,Opgaav,instellen,Mööt,Möten
+Keywords[ne]=क्यालेन्डर, गर्नुपर्ने कार्यहरू, कन्फिगर, सेटिङ
 Keywords[nl]=kalender,agenda,taken,todo,instellingen,configuratie
 Keywords[nn]=kalender,hugselister,oppsett,innstillingar
 Keywords[pl]=kalendarz,do zrobienia,konfiguracja,ustawienia
@@ -127,5 +134,5 @@
 Keywords[ta]=நாள்காட்டி,செய்யவேண்டியவைகள்,கட்டமைப்பு,அமைவுகள்
 Keywords[tg]=calendar, todos, configure, settings,танзимот, тақвим,вазифа
 Keywords[tr]=takvim, yapılacaklar, yapılandır, yapılandırma
-Keywords[uk]=календар, завдання, налаштування, установки
+Keywords[uk]=календар, завдання, налаштування, параметри
 Keywords[zh_CN]=calendar, todos, configure, settings, 日历, 待办事项, 配置, 设置
Index: kontact/plugins/korganizer/todoplugin.desktop
===================================================================
--- kontact/plugins/korganizer/todoplugin.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kontact/plugins/korganizer/todoplugin.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -35,12 +35,14 @@
 Comment[hu]=Kontact-bővítőmodul a KOrganizer feladatlistához
 Comment[is]=Kontact KOrganizer verkþátta íforrit
 Comment[it]=Plugin Kontact per le cose da fare di KOrganizer
-Comment[ja]=Kontact KOrganizer To-do リストプラグイン
+Comment[ja]=Kontact KOrganizer To-do リスト プラグイン
+Comment[kk]=KOrganizer жоспарлар тізімінің модулі
 Comment[km]=កម្មវិធី​ជំនួយ​បញ្ជី​ការងារ​ត្រូវ​ធ្វើ​របស់ KOrganizer ក្នុង Kontact
 Comment[lt]=Kontact KOrganizer darbų sąrašo priedas
 Comment[ms]=Plugin Senarai Tugasan KOrganizer Kontact 
 Comment[nb]=Kontact programtillegg for KOrganizer gjøreliste
 Comment[nds]=KOrganizer-Opgavenlistmoduul för Kontact
+Comment[ne]=गर्नुपर्ने कार्यसूची प्लगइन गर्न केडीई आयोजकलाई सम्पर्क गर्नुहोस्
 Comment[nl]=Kontact KOrganizer takenlijstplugin
 Comment[nn]=Kontact-programtillegg for KOrganizer-hugselister
 Comment[pl]=Wtyczka Kontact do współpracy z listą zadań KOrganizera
@@ -59,6 +61,7 @@
 Comment[zh_TW]=Kontact KOrganizer 待辦事項外掛程式
 Name=To-do List
 Name[af]=Te-doen lys
+Name[ar]=لائحة الواجبات
 Name[br]=Roll an traoù d'ober
 Name[ca]=Pendents
 Name[cs]=Seznam úkolů
@@ -79,11 +82,13 @@
 Name[is]=Verkþættir
 Name[it]=Cose da fare
 Name[ja]=To-do リスト
+Name[kk]=Жоспар тізімі
 Name[km]=បញ្ជី​ការងារ​ត្រូវ​ធ្វើ
 Name[lt]=Darbai
 Name[ms]=Senarai Tugasan
 Name[nb]=Gjøreliste
 Name[nds]=Opgavenlist
+Name[ne]=गर्नुपर्न कार्य सूची
 Name[nl]=Takenlijst
 Name[nn]=Hugseliste
 Name[pa]=ਕੰਮ ਕਰਨ ਲਈ
Index: kontact/plugins/korganizer/journalplugin.desktop
===================================================================
--- kontact/plugins/korganizer/journalplugin.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kontact/plugins/korganizer/journalplugin.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -35,11 +35,13 @@
 Comment[is]=Kontact KOrganizer dagbókar íforrit
 Comment[it]=Plugin Kontact per il diario di KOrganizer
 Comment[ja]=Kontact KOrganizer ジャーナル プラグイン
+Comment[kk]=KOrganizer күнделігінің модулі
 Comment[km]=កម្មវិធី​ជំនួយ​ទិនានុប្បវត្តិ KOrganizer ក្នុង Kontact
 Comment[lt]=Kontact KOrganizer dienyno priedas
 Comment[ms]=Plugin Jurnal KOrganizer Kontact 
 Comment[nb]=Kontact programtillegg for KOrganizer dagbok
 Comment[nds]=KOrganizer-Daagbookmoduul för Kontact
+Comment[ne]=केडीई आयोजक जर्नल प्लगइन सम्पर्क गर्नुहोस्
 Comment[nl]=Kontact KOrganizer Journaalplugin
 Comment[nn]=Kontact-programtillegg for KOrganizer-dagbøker
 Comment[pl]=Wtyczka Kontact do współpracy z dziennikiem KOrganizera
@@ -58,6 +60,7 @@
 Comment[zh_TW]=Kontact KOrganizer Journal 外掛程式
 Name=Journal
 Name[af]=Joernaal
+Name[ar]=اليومية
 Name[br]=Deizlevr
 Name[ca]=Diari
 Name[cs]=Deník
@@ -75,11 +78,13 @@
 Name[is]=Dagbók
 Name[it]=Diario
 Name[ja]=ジャーナル
+Name[kk]=Күнделік
 Name[km]=ទិនានុប្បវត្តិ
 Name[lt]=Dienynas
 Name[ms]=Jurnal
 Name[nb]=Dagbok
 Name[nds]=Daagbook
+Name[ne]=जर्नल
 Name[nl]=Journaal
 Name[nn]=Dagbok
 Name[pl]=Dziennik
Index: kontact/plugins/korganizer/korganizerplugin.desktop
===================================================================
--- kontact/plugins/korganizer/korganizerplugin.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kontact/plugins/korganizer/korganizerplugin.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -18,7 +18,7 @@
 
 Comment=Kontact KOrganizer Plugin
 Comment[af]=Kontact KOrganizer inprop module
-Comment[be]=Дапаўненьне Кантакту "K Арганізатар"
+Comment[be]=Дапаўненне Кантакту "K Арганізатар"
 Comment[bg]=Приставка за календар и връзка с KOrganizer
 Comment[br]=Lugent Kontact KOrganizer
 Comment[bs]=Kontact KOrganizer dodatak
@@ -42,11 +42,14 @@
 Comment[is]=Kontact KOrganizer íforrit
 Comment[it]=Plugin KOrganizer Kontact
 Comment[ja]=Kontact KOrganizer プラグイン
+Comment[kk]=KOrganizer модулі
 Comment[km]=កម្មវិធី​ជំនួយ KOrganizer ក្នុង Kontact
 Comment[lt]=Kontact KOrganizer priedas
+Comment[mk]=Приклучок за КОрганизатор во Контакт
 Comment[ms]=Plugin KOragnizer Kontact 
 Comment[nb]=Kontact programtillegg for KOrganizer
 Comment[nds]=KOrganizer-Moduul för Kontact
+Comment[ne]=केडीई आयोजक प्लगइन सम्पर्क गर्नुहोस्
 Comment[nl]=Kontact KOrganizer-plugin
 Comment[nn]=Kontact-programtillegg for KOrganizer
 Comment[pl]=Wtyczka Kontact do współpracy z KOrganizerem
@@ -68,6 +71,7 @@
 Comment[zh_TW]=Kontact KOrganizer 外掛程式
 Name=Calendar
 Name[af]=Kalender
+Name[ar]=التقويم
 Name[be]=Каляндар
 Name[br]=Deiziadur
 Name[bs]=Kalendar
@@ -91,11 +95,14 @@
 Name[is]=Dagatal
 Name[it]=Calendario
 Name[ja]=カレンダー
+Name[kk]=Күнтізбе
 Name[km]=ប្រតិទិន
 Name[lt]=Kalendorius
+Name[mk]=Календар
 Name[ms]=Kalendar
 Name[nb]=Kalender
 Name[nds]=Kalenner
+Name[ne]=क्यालेन्डर
 Name[nl]=Agenda
 Name[nn]=Kalender
 Name[pa]=ਕੈਲੰਡਰ
Index: kontact/plugins/korganizer/todosummarywidget.cpp
===================================================================
--- kontact/plugins/korganizer/todosummarywidget.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kontact/plugins/korganizer/todosummarywidget.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -226,6 +226,7 @@
 void TodoSummaryWidget::popupMenu( const QString &uid )
 {
   KPopupMenu popup( this );
+  QToolTip::remove( this );
   popup.insertItem( i18n( "&Edit To-do..." ), 0 );
   popup.insertItem( KGlobal::iconLoader()->loadIcon( "editdelete", KIcon::Small),
                     i18n( "&Delete To-do" ), 1 );
Index: kontact/plugins/kmail/kmailplugin.desktop
===================================================================
--- kontact/plugins/kmail/kmailplugin.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kontact/plugins/kmail/kmailplugin.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -19,7 +19,7 @@
 
 Comment=Kontact KMail Plugin
 Comment[af]=Kontact kMail inprop module
-Comment[be]=Дапаўненьне Кантакту "K Пошта"
+Comment[be]=Дапаўненне Кантакту "K Пошта"
 Comment[bg]=Приставка връзка между пощата и адресника
 Comment[br]=Lugent Kontact KMail
 Comment[bs]=Kontact KMail dodatak
@@ -43,11 +43,14 @@
 Comment[is]=Kontact KMail íforrit
 Comment[it]=Plugin KMail Kontact
 Comment[ja]=Kontact KMail プラグイン
+Comment[kk]=KMail модулі
 Comment[km]=កម្មវិធី​ជំនួយ KMail ក្នុង Kontact
 Comment[lt]=Kontact KMail priedas
+Comment[mk]=Приклучок за КПошта во Контакт
 Comment[ms]=Plugin KMail Kontact 
 Comment[nb]=Kontact programtillegg for KMail
 Comment[nds]=KMail-Moduul för Kontact
+Comment[ne]=केडीई पत्र प्लगइन सम्पर्क गर्नुहोस्
 Comment[nl]=Kontact KMail-plugin
 Comment[nn]=Kontact-programtillegg for KMail
 Comment[pl]=Wtyczka Kontact do współpracy z KMail
@@ -69,6 +72,7 @@
 Comment[zh_TW]=Kontact KMail 外掛程式
 Name=Mail
 Name[af]=Pos
+Name[ar]=البريد
 Name[be]=Пошта
 Name[br]=Lizher
 Name[ca]=Correu
@@ -91,11 +95,14 @@
 Name[is]=Póstur
 Name[it]=Posta
 Name[ja]=メール
+Name[kk]=Пошта
 Name[km]=សំបុត្រ
 Name[lt]=Paštas
+Name[mk]=Е-пошта
 Name[ms]=Mel
 Name[nb]=E-post
 Name[nds]=Nettpost
+Name[ne]=पत्र
 Name[nl]=E-mail
 Name[nn]=E-post
 Name[pa]=ਪੱਤਰ
Index: kontact/plugins/kmail/kcmkmailsummary.desktop
===================================================================
--- kontact/plugins/kmail/kcmkmailsummary.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kontact/plugins/kmail/kcmkmailsummary.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -13,6 +13,7 @@
 
 Name=Mail
 Name[af]=Pos
+Name[ar]=البريد
 Name[be]=Пошта
 Name[br]=Lizher
 Name[ca]=Correu
@@ -35,11 +36,14 @@
 Name[is]=Póstur
 Name[it]=Posta
 Name[ja]=メール
+Name[kk]=Пошта
 Name[km]=សំបុត្រ
 Name[lt]=Paštas
+Name[mk]=Е-пошта
 Name[ms]=Mel
 Name[nb]=E-post
 Name[nds]=Nettpost
+Name[ne]=पत्र
 Name[nl]=E-mail
 Name[nn]=E-post
 Name[pa]=ਪੱਤਰ
@@ -63,6 +67,7 @@
 Name[zh_TW]=郵件
 Comment=Mail Summary Setup
 Comment[af]=Pos opsomming opstelling
+Comment[ar]=تعيين ملخص البريد
 Comment[bg]=Настройки на обобщението на писмата
 Comment[bs]=Postavke mail sažetka
 Comment[ca]=Configuració del resum de correu
@@ -82,11 +87,14 @@
 Comment[is]=Uppsetning póstyfirlits
 Comment[it]=Impostazioni sommario posta
 Comment[ja]=メール要約の設定
+Comment[kk]=Пошта тұжырымының баптау
 Comment[km]=រៀបចំ​សេចក្ដី​សង្ខេប​សំបុត្រ
 Comment[lt]=Pašto santraukos nustatymai
+Comment[mk]=Поставување на преглед за е-пошта
 Comment[ms]=Setup Ringkasan Mel 
 Comment[nb]=E-post sammendrag oppsett
 Comment[nds]=Nettpost-Översicht instellen
+Comment[ne]=पत्र सारांश सेटअप
 Comment[nl]=E-mail Overzichts-instellingen
 Comment[nn]=Oppsett av e-postsamandrag
 Comment[pl]=Ustawienia podsumowania poczty
@@ -129,9 +137,11 @@
 Keywords[ja]=メール,要約,設定,設定
 Keywords[km]=អ៊ីមែល,សង្ខេប,កំណត់​រចនាសម្ព័ន្ធ,ការ​កំណត់
 Keywords[lt]=email, summary, configure, settings, e. paštas, santrauka, konfigūruoti, nustatymai
+Keywords[mk]=email, summary, configure, settings, е-пошта, преглед, конфигурација, поставувања
 Keywords[ms]=e-mel, ringkasan, konfigur, seting
 Keywords[nb]=e-post, sammendrag, oppsett, innstillinger
 Keywords[nds]=Nettpost,Nettbreef,Översicht,instellen
+Keywords[ne]=इमेल, सारांश, कन्फिगर, सेटिङ
 Keywords[nl]=email,e-mail,overzicht,samenvatting,instellingen,configuratie
 Keywords[nn]=e-post,samandrag,oppsett,innstillingar
 Keywords[pl]=email,list,podsumowanie,konfiguracja,ustawienia
Index: kontact/plugins/summary/kcmkontactsummary.desktop
===================================================================
--- kontact/plugins/summary/kcmkontactsummary.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kontact/plugins/summary/kcmkontactsummary.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -13,6 +13,7 @@
 
 Name=Components
 Name[af]=Komponente
+Name[ar]=المكونات
 Name[be]=Кампанэнты
 Name[br]=Parzhioù
 Name[cs]=Komponenty
@@ -32,11 +33,14 @@
 Name[is]=Einingar
 Name[it]=Componenti
 Name[ja]=コンポーネント
+Name[kk]=Компоненттері
 Name[km]=សមាសភាគ
 Name[lt]=Komponentai
+Name[mk]=Компоненти
 Name[ms]=Komponen
 Name[nb]=Komponenter
 Name[nds]=Komponenten
+Name[ne]=अवयव
 Name[nl]=Componenten
 Name[nn]=Komponentar
 Name[pl]=Składniki
@@ -74,11 +78,14 @@
 Comment[is]=Almennar stillingar fyrir Kontact yfirlitssýn
 Comment[it]=Configurazione generale della vista sommario di Kontact
 Comment[ja]=Kontact の要約表示の一般的な設定
+Comment[kk]=Тұжырымдаманың жалпы параметрлері
 Comment[km]=ការ​កំណត់​រចនាសម្ព័ន្ធ​ទូទៅ​នៃ​ទិដ្ឋភាព​សង្ខេប​របស់ Kontact
 Comment[lt]=Kontact Santraukos vaizdo bendrasis konfigūravimas
+Comment[mk]=Општа конфигурација на прегледот на Контакт
 Comment[ms]=Konfigurasi Am Paparan Ringkasan Kontact
 Comment[nb]=Generelt oppsett av Kontact's sammendragsoversikt
 Comment[nds]=Allgemeen Instellen för de Översichtansicht von Kontact
+Comment[ne]=सम्पर्कको सारांश दृश्यको साधारण कन्फिगरेसन
 Comment[nl]=Algemene instellingen van Kontact's overzichtsweergave
 Comment[nn]=Generelt oppsett av samandragsvisinga i Kontact
 Comment[pl]=Ogólna konfiguracja widoku podsumowania w Kontact
Index: kontact/plugins/summary/summaryplugin.desktop
===================================================================
--- kontact/plugins/summary/summaryplugin.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kontact/plugins/summary/summaryplugin.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -34,11 +34,14 @@
 Comment[is]=Kontact yfirlitssýnar íforrit
 Comment[it]=Plugin SummaryView Kontact
 Comment[ja]=Kontact サマリビュープラグイン
+Comment[kk]=Тұжырымдама модулі
 Comment[km]=កម្មវិធី​ជំនួយ​ទិដ្ឋភាព​សង្ខេប​ក្នុង Kontact
 Comment[lt]=Kontact Santraukos vaizdo priedas
+Comment[mk]=Приклучок за преглед во Контакт
 Comment[ms]=Plugin Paparan Ringkasan Kontact 
 Comment[nb]=Kontact programtillegg for sammendragsvisning
 Comment[nds]=Översichtansicht-Moduul för Kontact
+Comment[ne]=सारांश दृश्य प्लगइनमा सम्पर्क गर्नुहोस्
 Comment[nl]=Kontact SummaryView-plugin
 Comment[nn]=Kontact, programtillegg for samandragsvising
 Comment[pl]=Wtyczka Kontact do wyświetlania podsumowania
@@ -59,6 +62,7 @@
 Comment[zh_TW]=Kontact 摘要檢視外掛程式
 Name=Summary
 Name[af]=Opsomming
+Name[ar]=الموجز
 Name[br]=Diverrañ
 Name[bs]=Sažetak
 Name[ca]=Resum
@@ -81,11 +85,14 @@
 Name[is]=Yfirlit
 Name[it]=Sommario
 Name[ja]=要約
+Name[kk]=Тұжырым
 Name[km]=សង្ខេប
 Name[lt]=Santrauka
+Name[mk]=Преглед
 Name[ms]=Ringkasan
 Name[nb]=Sammendrag
 Name[nds]=Översicht
+Name[ne]=सारांश
 Name[nl]=Overzicht
 Name[nn]=Samandrag
 Name[pl]=Podsumowanie
Index: kontact/plugins/newsticker/kcmkontactknt.desktop
===================================================================
--- kontact/plugins/newsticker/kcmkontactknt.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kontact/plugins/newsticker/kcmkontactknt.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -36,12 +36,14 @@
 Name[is]=Fréttastrimill
 Name[it]=Ticker notizie
 Name[ja]=ニュースティッカー
+Name[kk]=Жаңалық таспасы
 Name[km]=កម្មវិធី​ទទួល​ព័ត៌មាន
 Name[lt]=News pranešėjas
 Name[lv]=Ziņu Tikkers
 Name[ms]=Pengetik Berita
 Name[nb]=Nyhetstelegraf
 Name[nds]=Narichten-Ticker
+Name[ne]=न्यूज टिकर
 Name[nn]=Nyheitstelegraf
 Name[pl]=Wiadomości
 Name[pt]=Extractor de Notícias
@@ -84,10 +86,12 @@
 Comment[is]=Uppsetning á yfirliti yfir fréttastrimla
 Comment[it]=Impostazioni sommario ticker notizie
 Comment[ja]=ニュースティッカーの設定
+Comment[kk]=Жаңалық таспасының тұжырымынын баптау
 Comment[km]=រៀបចំ​សេចក្ដី​សង្ខេប​កម្មវិធី​ទទួល​ព័ត៌មាន
 Comment[lt]=News Ticker santraukos nustatymai
 Comment[nb]=Oppsett av sammendraget til nyhetstelegrafen
 Comment[nds]=Narichten-Översicht instellen
+Comment[ne]=न्यूज टिकर सारांश सेटअप
 Comment[nl]=Overzichtsinstellingen nieuwsticker
 Comment[nn]=Oppsett av nyhendetelegrafsamandrag
 Comment[pl]=Ustawienia podsumowania wiadomości
@@ -127,6 +131,7 @@
 Keywords[ms]=Pengetik  berita, konfigur, seting
 Keywords[nb]=nyhetstelegraf, oppsett, innstillinger
 Keywords[nds]=Narichten-Ticker, instellen
+Keywords[ne]=न्यूज टिकर, कन्फिगर, सेटिङ
 Keywords[nl]=newsticker,instellingen,configuratie,nieuws
 Keywords[nn]=nyhendetelegraf,oppsett,innstillingar
 Keywords[pl]=news ticker,wiadomości,nagłówki,konfiguracja,ustawienia
@@ -141,5 +146,5 @@
 Keywords[ta]=கேமுகவரிப்புத்தகம்,கட்டமைப்பு,அமைவுகள்
 Keywords[tg]=news ticker, configure, settings, танзимот
 Keywords[tr]=haber izleyici, yapılandırma, yapılandır
-Keywords[uk]=новини, налаштування, установки
+Keywords[uk]=новини, налаштування, параметри
 Keywords[zh_CN]=news ticker, configure, settings, 新闻点点通, 配置, 设置
Index: kontact/plugins/newsticker/newstickerplugin.desktop
===================================================================
--- kontact/plugins/newsticker/newstickerplugin.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kontact/plugins/newsticker/newstickerplugin.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -37,11 +37,13 @@
 Comment[is]=Kontact fréttastrimils-íforrit
 Comment[it]=Plugin Kontact Ticker Notizie
 Comment[ja]=Kontact ニュースティッカー プラグイン
+Comment[kk]=NewsTicker модулі
 Comment[km]=កម្មវិធី​ជំនួយ​កម្មវិធី​ទទួល​ព័ត៌មាន​ក្នុង Kontact
 Comment[lt]=Kontact Naujienų pranešėjo priedas
 Comment[ms]=Plugin Pengetik Berita Kontact 
 Comment[nb]=Kontact programtillegg for nyhetstelegrafen
 Comment[nds]=Narichtentelegraaf-Moduul für Kontact
+Comment[ne]=न्यूज टिकर प्लगइनमा सम्पर्क गर्नुहोस्
 Comment[nl]=Kontact NewsTicker-plugin
 Comment[nn]=Programtillegg for nyhendetelegraf i Kontact
 Comment[pl]=Wtyczka wiadomości do Kontact
@@ -80,6 +82,7 @@
 Name[ms]=Pengetik Berita
 Name[nb]=Nyhetstelegraf
 Name[nds]=Narichtentelegraaf
+Name[ne]=न्यूज टिकर
 Name[nn]=Nyhendetelegraf
 Name[pl]=Wiadomości
 Name[pt]=Notícias
Index: kontact/interfaces/kontactplugin.desktop
===================================================================
--- kontact/interfaces/kontactplugin.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kontact/interfaces/kontactplugin.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -3,7 +3,8 @@
 X-KDE-ServiceType=Kontact/Plugin
 Name=Kontact Plugin
 Name[af]=Kontact inprop module
-Name[be]=Дапаўненьне Кантакту
+Name[ar]=قابس Kontact
+Name[be]=Дапаўненне Кантакту
 Name[bg]=Приставка на Kontact
 Name[br]=Lugent Kontact
 Name[bs]=Dodatak za Kontact
@@ -27,11 +28,14 @@
 Name[is]=Kontact íforrit
 Name[it]=Plugin Kontact
 Name[ja]=Kontact プラグイン
+Name[kk]=Kontact модулі
 Name[km]=កម្មវិធី​ជំនួយ Kontact
 Name[lt]=Kontact priedas
+Name[mk]=Приклучок за Контакт
 Name[ms]=Plugin Kontact 
 Name[nb]=Kontact-programtillegg
 Name[nds]=Kontact-Moduul
+Name[ne]=सम्पर्क प्लगइन
 Name[nn]=Kontact-programtillegg
 Name[pl]=Wtyczka Kontact
 Name[pt]='Plugin' do Kontact
Index: kontact/src/kontact.setdlg
===================================================================
--- kontact/src/kontact.setdlg	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kontact/src/kontact.setdlg	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,6 +1,7 @@
 [KontactSummary]
 Name=Summary
 Name[af]=Opsomming
+Name[ar]=الموجز
 Name[br]=Diverrañ
 Name[bs]=Sažetak
 Name[ca]=Resum
@@ -23,11 +24,14 @@
 Name[is]=Yfirlit
 Name[it]=Sommario
 Name[ja]=要約
+Name[kk]=Тұжырым
 Name[km]=សង្ខេប
 Name[lt]=Santrauka
+Name[mk]=Преглед
 Name[ms]=Ringkasan
 Name[nb]=Sammendrag
 Name[nds]=Översicht
+Name[ne]=सारांश
 Name[nl]=Overzicht
 Name[nn]=Samandrag
 Name[pl]=Podsumowanie
@@ -50,6 +54,7 @@
 Name[zh_TW]=摘要
 Comment=Summary View
 Comment[af]=Opsomming aansig
+Comment[ar]=عرض الملخص
 Comment[bg]=Обобщение
 Comment[ca]=Vista resum
 Comment[cs]=Souhrný pohled
@@ -68,11 +73,14 @@
 Comment[is]=Yfirlitssýn
 Comment[it]=Vista sommario
 Comment[ja]=要約ビュー
+Comment[kk]=Тұжырымдама
 Comment[km]=ទិដ្ឋភាព​សង្ខេប
 Comment[lt]=Santraukos vaizdas
+Comment[mk]=Приказ на прегледот
 Comment[ms]=Paparan Ringkasan
 Comment[nb]=Sammendragsvisning
 Comment[nds]=Översichtansicht
+Comment[ne]=सारांश दृश्य
 Comment[nl]=Overzichtsweergave
 Comment[nn]=Samandragsvising
 Comment[pl]=Widok podsumowania
@@ -95,6 +103,7 @@
 [KMail]
 Name=Mail
 Name[af]=Pos
+Name[ar]=البريد
 Name[be]=Пошта
 Name[br]=Lizher
 Name[ca]=Correu
@@ -117,11 +126,14 @@
 Name[is]=Póstur
 Name[it]=Posta
 Name[ja]=メール
+Name[kk]=Пошта
 Name[km]=សំបុត្រ
 Name[lt]=Paštas
+Name[mk]=Е-пошта
 Name[ms]=Mel
 Name[nb]=E-post
 Name[nds]=Nettpost
+Name[ne]=पत्र
 Name[nl]=E-mail
 Name[nn]=E-post
 Name[pa]=ਪੱਤਰ
@@ -145,6 +157,7 @@
 Name[zh_TW]=郵件
 Comment=Mail Component
 Comment[af]=Pos komponent
+Comment[ar]=مكوّن البريد
 Comment[be]=Кампанэнт "Пошта"
 Comment[bg]=Модул за е-поща
 Comment[br]=Perzh postel
@@ -165,11 +178,14 @@
 Comment[is]=Pósthluti
 Comment[it]=Componente posta
 Comment[ja]=メールコンポーネント
+Comment[kk]=Пошта компоненті
 Comment[km]=សមាសភាគ​សំបុត្រ
 Comment[lt]=Pašto komponentas
+Comment[mk]=Компонента за е-пошта
 Comment[ms]=Komponen Mel
 Comment[nb]=E-postkomponent
 Comment[nds]=Nettpost-Komponent
+Comment[ne]=पत्र अवयव
 Comment[nl]=E-mailcomponent
 Comment[nn]=E-postkomponent
 Comment[pl]=Składnik poczty
@@ -192,6 +208,7 @@
 [KAB]
 Name=Contacts
 Name[af]=Kontakte
+Name[ar]=المراسلون
 Name[be]=Кантакты
 Name[br]=Darempredoù
 Name[bs]=Kontakti
@@ -214,10 +231,13 @@
 Name[is]=Tengiliðir
 Name[it]=Contatti
 Name[ja]=コンタクト
+Name[kk]=Контакттар
 Name[km]=ទំនាក់ទំនង
 Name[lt]=Kontaktai
+Name[mk]=Контакти
 Name[ms]=Orang hubungan
 Name[nds]=Kontakten
+Name[ne]=सम्पर्क
 Name[nl]=Adressen
 Name[nn]=Kontaktar
 Name[pa]=ਸੰਪਰਕ
@@ -242,6 +262,7 @@
 Name[zh_TW]=聯絡人
 Comment=Address Book Component
 Comment[af]=Adres boek komponent
+Comment[ar]=مكون دفتر العناوين
 Comment[be]=Кампанэнт "Адрасная кніга"
 Comment[bg]=Модул за адресника
 Comment[ca]=Component de llibreta d'adreces
@@ -261,11 +282,14 @@
 Comment[is]=Vistfangahluti
 Comment[it]=Componente rubrica indirizzi
 Comment[ja]=アドレス帳コンポーネント
+Comment[kk]=Адрестік кітапша компоненті
 Comment[km]=សមាសភាគ​សៀវភៅ​អាសយដ្ឋាន
 Comment[lt]=Adresų knygelės komponentas
+Comment[mk]=Компонента за адресар
 Comment[ms]=Komponen Buku Alamat 
 Comment[nb]=Adressebok-komponent
 Comment[nds]=Adressbook-Komponent
+Comment[ne]=ठेगाना पुस्तिका अवयव
 Comment[nl]=Adresboekcomponent
 Comment[nn]=Adressebok-komponent
 Comment[pl]=Składnik książki adresowej
@@ -288,6 +312,7 @@
 [Special Dates]
 Name=Special Dates Summary
 Name[af]=Spesiale datums opsomming
+Name[ar]=موجز عن التواريخ المرموقة
 Name[ca]=Resum de dates especials
 Name[cs]=Souhrn speciálních datumů
 Name[da]=Opsummering af særlige datoer
@@ -305,11 +330,14 @@
 Name[is]=Yfirlit sérstakra daga
 Name[it]=Sommario date speciali
 Name[ja]=特別な日の要約
+Name[kk]=Ерекше күндер тұжырымы
 Name[km]=សង្ខេប​ថ្ងៃ​ពិសេស
 Name[lt]=Ypatingų dienų santrauka
+Name[mk]=Преглед на специјални датуми
 Name[ms]=Ringkasan Tarikh Khusus
 Name[nb]=Sammendrag av spesielle datoer
 Name[nds]=Översicht över besünner Daag
+Name[ne]=विशेष मिति सारांश
 Name[nl]=Overzicht voor speciale data
 Name[nn]=Samandrag for spesielle datoar
 Name[pl]=Podsumowanie dat specjalnych
@@ -346,11 +374,14 @@
 Comment[is]=Yfirlitshluti sérstakra daga
 Comment[it]=Componente sommario per le date speciali
 Comment[ja]=特別な日の要約コンポーネント
+Comment[kk]=Ерекше күндер тұжырымының компоненті
 Comment[km]=សមាសភាគ​សង្ខេប​នៃ​ថ្ងៃ​ពិសេស
 Comment[lt]=Ypatingų dienų santraukos komponentas
+Comment[mk]=Компонента за преглед на специјални датуми
 Comment[ms]=Komponen Ringkasan Tarikh Khusus
 Comment[nb]=Komponent for sammendrag av spesielle datoer
 Comment[nds]=Översichtkomponent för besünner Daag
+Comment[ne]=विशेष मिति सारांश अवयव
 Comment[nl]=Component voor overzicht van speciale data
 Comment[nn]=Komponent for samandrag for spesielle datoar
 Comment[pl]=Składnik podsumowania dat specjalnych
@@ -373,6 +404,7 @@
 [KOrganizer]
 Name=Calendar
 Name[af]=Kalender
+Name[ar]=التقويم
 Name[be]=Каляндар
 Name[br]=Deiziadur
 Name[bs]=Kalendar
@@ -396,11 +428,14 @@
 Name[is]=Dagatal
 Name[it]=Calendario
 Name[ja]=カレンダー
+Name[kk]=Күнтізбе
 Name[km]=ប្រតិទិន
 Name[lt]=Kalendorius
+Name[mk]=Календар
 Name[ms]=Kalendar
 Name[nb]=Kalender
 Name[nds]=Kalenner
+Name[ne]=क्यालेन्डर
 Name[nl]=Agenda
 Name[nn]=Kalender
 Name[pa]=ਕੈਲੰਡਰ
@@ -442,11 +477,14 @@
 Comment[is]=Dagatalshluti
 Comment[it]=Componente calendario
 Comment[ja]=カレンダーコンポーネント
+Comment[kk]=Күнтізбе компоненті
 Comment[km]=សមាភាគ​ប្រតិទិន
 Comment[lt]=Kalendoriaus komponentas
+Comment[mk]=Компонента за календар
 Comment[ms]=Komponen Kalendar
 Comment[nb]=Calendar-komponent
 Comment[nds]=Kalenner-Komponent
+Comment[ne]=क्यालेन्डर अवयव
 Comment[nl]=Agendacomponent
 Comment[nn]=Kalenderkomponent
 Comment[pl]=Składnik kalendarza
@@ -469,6 +507,7 @@
 [KNode]
 Name=News
 Name[af]=Nuus
+Name[ar]=الأخبار
 Name[be]=Навіны
 Name[br]=Keleier
 Name[bs]=Usenet
@@ -491,11 +530,14 @@
 Name[hu]=Hírek
 Name[is]=Fréttir
 Name[ja]=ニュース
+Name[kk]=Жаңалықтар
 Name[km]=ព័ត៌មាន
 Name[lt]=Naujienos
+Name[mk]=Вести
 Name[ms]=Berita
 Name[nb]=Njus
 Name[nds]=Narichten
+Name[ne]=समाचार
 Name[nl]=Nieuws
 Name[nn]=Nyheiter
 Name[pa]=ਖ਼ਬਰਾਂ
@@ -538,11 +580,14 @@
 Comment[is]=Fréttahluti
 Comment[it]=Componente news
 Comment[ja]=ニュースコンポーネント
+Comment[kk]=Жаңалықтар компоненті
 Comment[km]=សមាសភាគ​ព័ត៌មាន
 Comment[lt]=Naujienų komponentas
+Comment[mk]=Компонента за вести
 Comment[ms]=Komponen Berita
 Comment[nb]=Njus-komponent
 Comment[nds]=Narichten-Komponente
+Comment[ne]=समाचार अवयव
 Comment[nl]=Nieuwscomponent
 Comment[nn]=Nyhendekomponent
 Comment[pl]=Składnik wiadomości
@@ -589,11 +634,14 @@
 Name[is]=Veður
 Name[it]=Tempo meteorologico
 Name[ja]=気象情報
+Name[kk]=Ауа райы
 Name[km]=អាកាសធាតុ
 Name[lt]=Orų pranešėjas
+Name[mk]=Време
 Name[ms]=Cuaca
 Name[nb]=Været
 Name[nds]=Weder
+Name[ne]=मौसम
 Name[nl]=Het weer
 Name[nn]=Vêrmelding
 Name[pl]=Pogoda
@@ -616,6 +664,7 @@
 Name[zh_TW]=天氣
 Comment=Weather Information
 Comment[af]=Weer informasie
+Comment[ar]=معلومات عن الطقس
 Comment[be]=Інфармацыя пра надвор’е
 Comment[bg]=Информация за времето
 Comment[br]=Titouroù diwar-benn an amzer
@@ -638,11 +687,14 @@
 Comment[is]=Veðurupplýsingar
 Comment[it]=Informazioni meteorologiche
 Comment[ja]=気象情報
+Comment[kk]=Ауа райы мәліметі
 Comment[km]=ព័ត៌មាន​អំពី​អាកាសធាតុ
 Comment[lt]=Orų informacija
+Comment[mk]=Информации за времето
 Comment[ms]=Maklumat Cuaca
 Comment[nb]=Værinformasjon
 Comment[nds]=Wederinformatschonen
+Comment[ne]=मौसम जानकारी
 Comment[nl]=Het weer
 Comment[nn]=Vêrinformasjon
 Comment[pl]=Informacje o pogodzie
@@ -689,12 +741,14 @@
 Name[is]=Fréttastrimill
 Name[it]=Ticker notizie
 Name[ja]=ニュースティッカー
+Name[kk]=Жаңалық таспасы
 Name[km]=កម្មវិធី​ទទួល​ព័ត៌មាន
 Name[lt]=News pranešėjas
 Name[lv]=Ziņu Tikkers
 Name[ms]=Pengetik Berita
 Name[nb]=Nyhetstelegraf
 Name[nds]=Narichten-Ticker
+Name[ne]=न्यूज टिकर
 Name[nn]=Nyheitstelegraf
 Name[pl]=Wiadomości
 Name[pt]=Extractor de Notícias
@@ -720,7 +774,7 @@
 Comment=News Ticker Component
 Comment[af]=Nuus tikker komponent
 Comment[bg]=Компонент за новини
-Comment[ca]=Componennt de teletip de notícies
+Comment[ca]=Component de teletip de notícies
 Comment[cs]=Komponenta zdrojů novinek
 Comment[da]=Nyhedstelegraf-komponent
 Comment[de]=Newsticker-Komponente
@@ -736,11 +790,13 @@
 Comment[is]=Fréttastrimilshluti
 Comment[it]=Ticker notizie
 Comment[ja]=ニュース ティッカー コンポーネント
+Comment[kk]=Жаңалық таспасының компоненті
 Comment[km]=សមាសភាគ​កម្មវិធី​ទទួល​ព័ត៌មាន
 Comment[lt]=Naujienų pranešėjo komponentas
 Comment[ms]=Komponen Pengetik Berita
 Comment[nb]=Komponent for Nyhetstelegraf
 Comment[nds]=Narichtentelegraaf-Komponent
+Comment[ne]=समाचार टिकर अवयव
 Comment[nl]=Newstickercomponent
 Comment[nn]=Nyhendetelegrafkomponent
 Comment[pl]=Składnik paska wiadomości
Index: kontact/src/kontactconfig.desktop
===================================================================
--- kontact/src/kontactconfig.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kontact/src/kontactconfig.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -16,19 +16,22 @@
 Name=Kontact
 Name[be]=Кантакт
 Name[hi]=कॉन्टेक्ट
+Name[mk]=Контакт
+Name[ne]=सम्पर्क गर्नुहोस्
 Name[sv]=Kontakt
 Name[ta]=தொடர்பு கொள்
 Name[zh_TW]=Kontact 個人資訊管理
 Comment=KDE Kontact
-Comment[be]=Кантакт KDE
 Comment[bg]=Управление на личната информация
 Comment[ca]=Kontact de KDE
 Comment[cy]=Kontact KDE
 Comment[de]=Kontact
 Comment[fi]=Kontact
 Comment[hi]=केडीई कॉन्टेक्ट
+Comment[mk]=KDE Контакт
 Comment[ms]=Kontact KDE 
 Comment[nds]=KDE-Kontact
+Comment[ne]=केडीई सम्पर्क
 Comment[pl]=Kontact dla KDE
 Comment[pt]=Kontact do KDE
 Comment[pt_BR]=Kontact do KDE
@@ -40,8 +43,10 @@
 Keywords[de]=Kontact
 Keywords[hi]=कॉन्टेक्ट
 Keywords[hu]=kapcsolat
+Keywords[mk]=kontact,контакт
 Keywords[nb]=kontact, kontakt
 Keywords[nds]=Kontact
+Keywords[ne]=सम्पर्क
 Keywords[sr]=kontact, контакт
 Keywords[sr@Latn]=kontact, kontakt
 Keywords[sv]=kontakt
Index: kontact/src/Kontact.desktop
===================================================================
--- kontact/src/Kontact.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kontact/src/Kontact.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -3,6 +3,8 @@
 Name=Kontact
 Name[be]=Кантакт
 Name[hi]=कॉन्टेक्ट
+Name[mk]=Контакт
+Name[ne]=सम्पर्क गर्नुहोस्
 Name[sv]=Kontakt
 Name[ta]=தொடர்பு கொள்
 Name[zh_TW]=Kontact 個人資訊管理
@@ -11,7 +13,8 @@
 Icon=kontact
 GenericName=Personal Information Manager
 GenericName[af]=Personlike informasie bestuurder
-GenericName[be]=Кіраваньне пэрсанальнай інфармацыяй
+GenericName[ar]=منظم المعلومات الشخصي
+GenericName[be]=Кіраванне пэрсанальнай інфармацыяй
 GenericName[bg]=Лична информация
 GenericName[bs]=Upravitelj ličnim informacijama
 GenericName[ca]=Gestor d'informació personal
@@ -33,12 +36,14 @@
 GenericName[is]=Persónulegur upplýsingastjórnandi
 GenericName[it]=Gestione informazioni personali 
 GenericName[ja]=個人情報マネージャ
+GenericName[kk]=Дербес Ақпарат Менеджері
 GenericName[km]=កម្មវិធី​គ្រប់គ្រង​ព័ត៌មាន​ផ្ទាល់​ខ្លួន
 GenericName[lt]=Asmeninės informacijos tvarkyklė
-GenericName[mk]=Менаџер за лични информации
+GenericName[mk]=Менаџер на лични информации
 GenericName[ms]=Pengurus Makumat Peribadi
 GenericName[nb]=Personlig informasjonsbehandler
 GenericName[nds]=Pleger för persöönliche Informatschonen
+GenericName[ne]=व्यक्तिगत सूचना प्रबन्धक
 GenericName[nn]=Personleg informasjonshandtering
 GenericName[pl]=Program do zarządzania informacjami osobistymi
 GenericName[pt]=Gestor Pessoal de Informações
Index: kandy/src/kandy.desktop
===================================================================
--- kandy/src/kandy.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kandy/src/kandy.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -3,6 +3,7 @@
 Name=Kandy
 Name[eo]=Poŝtelefonilo
 Name[hi]=केंडी
+Name[ne]=केन्डी
 Name[ta]=Kஅன்டி
 Comment=Tool for syncing address book data with mobile phones
 Comment[af]=Program om die adres boek data met die van 'n selfoon te sinkroniseer
@@ -24,11 +25,14 @@
 Comment[is]=Tól sem samstillir vistfangagögn við farsíma
 Comment[it]=Strumento per sincronizzare i dati della rubrica indirizzi con i telefoni cellulari
 Comment[ja]=アドレス帳のデータを携帯電話と同期するためのツール
+Comment[kk]=Адрестік кітапшаны қалта телефонмен қадамдастыру құралы
 Comment[km]=ឧបករណ៍​សម្រាប់​ធ្វើ​សមកាលកម្ម​ទិន្នន័យ​សៀវភៅ​អាសយដ្ឋាន​ជាមួយ​នឹង​ទូរស័ព្ទ​ចល័ត
 Comment[lt]=Įrankis adresų knygelės sinchronizavimui su mobiliaisiais telefonais
+Comment[mk]=Алатка за синхронизирање адресари со мобилни телефони
 Comment[ms]=Alat untuk segerakkan data buku alamat dengan telefon bimbit
 Comment[nb]=Verktøy for synkronisering av adressebok med mobiltelefoner
 Comment[nds]=Synkroniseren vun Adressbookdaten mit Mobiltelefonen
+Comment[ne]=मोबाइल फोनमा ठेगाना पुस्तिका समक्रमण गर्नका लागि उपकरण
 Comment[nl]=Hulpmiddel om adresboekgegevens te synchroniseren met mobiele telefoons
 Comment[nn]=Verktøy for å synkronisera adresseboka med mobiltelefonar
 Comment[pl]=Narzędzie do synchronizacji książki adresowej z telefonami komórkowymi
@@ -74,6 +78,7 @@
 GenericName[is]=Farsímatól
 GenericName[it]=Strumento per i telefoni cellulari
 GenericName[ja]=携帯電話ツール
+GenericName[kk]=Қалта телефон құралы
 GenericName[km]=ឧបករណ៍​ទូរស័ព្ទ​ចល័ត
 GenericName[lt]=Mobilaus telefono įrankis
 GenericName[lv]=Mobīlā Telefona Rīks
@@ -81,6 +86,7 @@
 GenericName[ms]=Alatan Fon Mudah Alih
 GenericName[nb]=Mobiltelefonverktøy
 GenericName[nds]=Mobiltelefoon-Warktüüch
+GenericName[ne]=मोबाइल फोन उपकरण
 GenericName[nl]=Mobiele telefoon-beheer
 GenericName[nn]=Mobiltelefonverktøy
 GenericName[nso]=Sebereka sago Thatha sa Mogala
Index: ktnef/gui/ktnef.desktop
===================================================================
--- ktnef/gui/ktnef.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ ktnef/gui/ktnef.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -23,11 +23,14 @@
 GenericName[is]=TNEF skráarskoðari
 GenericName[it]=Visualizzatore file TNEF
 GenericName[ja]=TNEF ファイルビュー
+GenericName[kk]=TNEF файл қарап-шығушы
 GenericName[km]=កម្មវិធី​មើល​ឯកសារ TNEF
 GenericName[lt]=TNEF bylų žiūryklė
+GenericName[mk]=Прегледувач на TNEF-датотеки
 GenericName[ms]=Pemapar Fail TNEF 
 GenericName[nb]=TNEF-filvisning
 GenericName[nds]=TNEF-Dateikieker
+GenericName[ne]=TNEF फाइल दर्शक
 GenericName[nl]=TNEF-bestandsweergave
 GenericName[nn]=TNEF filvisar
 GenericName[pl]=Przeglądarka plików TNEF
@@ -71,11 +74,13 @@
 Comment[is]=Sýnir/lesari fyrir TNEF skrár
 Comment[it]=Un visualizzatore/estrattore di file TNEF
 Comment[ja]=TNEF ファイルのためのビューア/展開ツール
+Comment[kk]=TNEF файдарды қарау/тарқату
 Comment[km]=កម្មវិធី​មើល និង ស្រង់​ឯកសារ TNEF
 Comment[lt]=TNEF bylų žiūryklė - išpakuotojas
 Comment[ms]=Pemapar/pengekstrak untuk fail TNEF 
 Comment[nb]=En utpakker/fremviser for TNEF-filer
 Comment[nds]=TNEF-Dateien ankieken un Delen ruttrecken
+Comment[ne]=TNEF फाइलका लागि दर्शक/निष्कासक
 Comment[nl]=Een weergaveprogramma/uitpakker voor TNEF-bestanden
 Comment[nn]=Ein framvisar/utpakkar for TNEF-filer
 Comment[pl]=Przeglądarka/program wyciągający zawartość plików TNEF
Index: ktnef/gui/ms-tnef.desktop
===================================================================
--- ktnef/gui/ms-tnef.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ ktnef/gui/ms-tnef.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -29,11 +29,14 @@
 Comment[is]=TNEF skrá
 Comment[it]=File TNEF
 Comment[ja]=TNEF ファイル
+Comment[kk]=TNEF файлы
 Comment[km]=ឯកសារ TNEF
 Comment[lt]=TNEF byla
+Comment[mk]=TNEF-датотека
 Comment[ms]=Fail TNEF 
 Comment[nb]=TNEF-fil
 Comment[nds]=TNEF-Datei
+Comment[ne]=TNEF फाइल
 Comment[nl]=TNEF-bestand
 Comment[nn]=TNEF-fil
 Comment[pl]=Plik TNEF
Index: ktnef/gui/ktnefview.cpp
===================================================================
--- ktnef/gui/ktnefview.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ ktnef/gui/ktnefview.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -21,6 +21,7 @@
 
 #include <qheader.h>
 #include <qpixmap.h>
+#include <qtimer.h>
 
 #include <kapplication.h>
 #include <kiconloader.h>
@@ -74,6 +75,7 @@
 	setSelectionMode(QListView::Extended);
 	setHScrollBarMode(QScrollView::AlwaysOff);
 	setVScrollBarMode(QScrollView::AlwaysOn);
+	QTimer::singleShot( 0, this, SLOT(adjustColumnWidth()) );
 }
 
 KTNEFView::~KTNEFView()
@@ -93,10 +95,7 @@
 
 void KTNEFView::resizeEvent(QResizeEvent *e)
 {
-	int	w = visibleWidth()/2;
-	setColumnWidth(0,w);
-	setColumnWidth(1,w/2);
-	setColumnWidth(2,w/2);
+	adjustColumnWidth();
 	resizeContents(visibleWidth(),visibleHeight());
 	if (e) QListView::resizeEvent(e);
 }
@@ -126,4 +125,12 @@
 		emit dragRequested( list );
 }
 
+void KTNEFView::adjustColumnWidth()
+{
+	int w = visibleWidth()/2;
+	setColumnWidth(0,w);
+	setColumnWidth(1,w/2);
+	setColumnWidth(2,w/2);
+}
+
 #include "ktnefview.moc"
Index: ktnef/gui/ktnefview.h
===================================================================
--- ktnef/gui/ktnefview.h	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ ktnef/gui/ktnefview.h	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -42,6 +42,9 @@
 	void resizeEvent(QResizeEvent *e);
 	void startDrag();
 
+private slots:
+	void adjustColumnWidth();
+
 private:
 	QPtrList<KTNEFAttach>	attachments_;
 };
Index: ktnef/gui/ktnefui.rc
===================================================================
--- ktnef/gui/ktnefui.rc	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ ktnef/gui/ktnefui.rc	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -1,17 +1,17 @@
 <!DOCTYPE kpartgui>
-<kpartgui name="kups" version="1">
+<kpartgui name="kups" version="2">
 <MenuBar>
   <Menu name="action"><text>&amp;Action</text>
     <Action name="view_file" />
     <Action name="view_file_as" />
-    <Separator name="separator_0" />
+    <Separator/>
     <Action name="extract_file" />
     <Action name="extract_file_to" />
-    <Separator name="separator_1" />
+    <Separator/>
     <Action name="extract_all_files" />
-    <Separator name="separator_2" />
+    <Separator/>
     <Action name="properties_file" />
-	<Separator />
+	<Separator/>
 	<Action name="msg_properties" />
 	<Action name="msg_text" />
 	<Action name="msg_save" />
@@ -20,16 +20,16 @@
     <Action name="options_default_dir" append="save_merge"/>
   </Menu>
 </MenuBar>
-<ToolBar name="mainToolBar">
+<ToolBar name="mainToolBar" noMerge="1">
   <text>Main Toolbar</text>
-  <Action name="open_file" />
-  <Separator name="separator_3" />
+  <Action name="file_open" />
+  <Separator/>
   <Action name="view_file" />
   <Action name="properties_file" />
-  <Separator name="separator_4" />
+  <Separator/>
   <Action name="extract_file_to" />
   <Action name="extract_all_files" />
-  <Separator name="separator_5" />
+  <Separator/>
   <Action name="msg_properties" />
   <Action name="msg_text" />
 </ToolBar>
Index: ktnef/lib/ktnefparser.cpp
===================================================================
--- ktnef/lib/ktnefparser.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ ktnef/lib/ktnefparser.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -445,6 +445,8 @@
 bool KTNEFParser::openFile(const QString& filename)
 {
 	deleteDevice();
+	delete d->message_;
+	d->message_ = new KTNEFMessage();
 	d->device_ = new QFile( filename );
 	d->deleteDevice_ = true;
 	return parseDevice();
@@ -756,6 +758,7 @@
 	MAPI_value	mapi;
 	KTNEFProperty *p;
 	QMap<int,KTNEFProperty*>::ConstIterator it;
+	bool foundAttachment = false;
 
 	// some initializations
 	mapi.type = MAPI_TYPE_NONE;
@@ -804,6 +807,15 @@
 					d->device_->at( d->device_->at() + ( len-4 ) );
 					break;
 				}
+				else if ( mapi.type == MAPI_TYPE_BINARY && attach && attach->offset() < 0 )
+				{
+					foundAttachment = true;
+					int len = mapi.value.toByteArray().size();
+					ALIGN( len, 4 )
+					attach->setSize( len );
+					attach->setOffset( d->device_->at() - len );
+					attach->addAttribute( attATTACHDATA, atpBYTE, QString( "< size=%1 >" ).arg( len ), false );
+				}
 			}
 			kdDebug().form( "MAPI data: size=%d\n", mapi.value.toByteArray().size() );
 			break;
@@ -850,5 +862,22 @@
 		}
 		//kdDebug() << "stream: " << d->device_->at() << endl;
 	}
+
+	if ( foundAttachment && attach )
+	{
+		attach->setIndex( attach->property( MAPI_TAG_INDEX ).toUInt() );
+		attach->setDisplaySize( attach->property( MAPI_TAG_SIZE ).toUInt() );
+		QString str = attach->property( MAPI_TAG_DISPLAYNAME ).toString();
+		if ( !str.isEmpty() )
+			attach->setDisplayName( str );
+		attach->setFileName( attach->property( MAPI_TAG_FILENAME ).toString() );
+		str = attach->property( MAPI_TAG_MIMETAG ).toString();
+		if ( !str.isEmpty() )
+			attach->setMimeTag( str );
+		attach->setExtension( attach->property( MAPI_TAG_EXTENSION ).toString() );
+		if ( attach->name().isEmpty() )
+			attach->setName( attach->fileName() );
+	}
+
 	return true;
 }
Index: kfile-plugins/rfc822/kfile_rfc822.desktop
===================================================================
--- kfile-plugins/rfc822/kfile_rfc822.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kfile-plugins/rfc822/kfile_rfc822.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -3,7 +3,7 @@
 Type=Service
 Name=Email Info
 Name[af]=E-pos informasie
-Name[be]=Інфармацыя аб паведамленьні электроннай пошты
+Name[be]=Інфармацыя аб паведамленні электроннай пошты
 Name[bg]=Информация за е-поща
 Name[br]=Titouroù postel
 Name[ca]=Informació de correu-e
@@ -26,11 +26,14 @@
 Name[is]=Tölvupóst upplýsingar
 Name[it]=Informazioni di posta elettronica
 Name[ja]=Eメール 情報
+Name[kk]=Эл.пошта мәліметі
 Name[km]=ព័ត៌មាន​អ៊ីមែល
 Name[lt]=E. pašto info
+Name[mk]=Информации за е-пошта
 Name[ms]=Info Emel
 Name[nb]=E-post-info
 Name[nds]=Nettbreef-Informatschonen
+Name[ne]=इमेल सूचना
 Name[nl]=E-mail-informatie
 Name[nn]=Epost-info
 Name[pa]=ਈ-ਪੱਤਰ ਜਾਣਕਾਰੀ
Index: kfile-plugins/ics/kfile_ics.desktop
===================================================================
--- kfile-plugins/ics/kfile_ics.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kfile-plugins/ics/kfile_ics.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -23,11 +23,14 @@
 Name[is]=ICS upplýsingar
 Name[it]=Informazioni ICS
 Name[ja]=ICS 情報
+Name[kk]=ICS ақпараты
 Name[km]=ព័ត៌មាន ICS
 Name[lt]=ICS informacija
+Name[mk]=Информација за ICS
 Name[ms]=Maklumat ICS 
 Name[nb]=ICS-informasjon
 Name[nds]=ICS-Informatschoon
+Name[ne]=ICS सूचना
 Name[nl]=ICS-informatie
 Name[nn]=ICS-informasjon
 Name[pa]=ICS ਜਾਣਕਾਰੀ
Index: kfile-plugins/palm-databases/kfile_palm.desktop
===================================================================
--- kfile-plugins/palm-databases/kfile_palm.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kfile-plugins/palm-databases/kfile_palm.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -25,11 +25,14 @@
 Name[is]=PalmOS gagnagrunnsupplýsingar
 Name[it]=Informazioni database PalmOs
 Name[ja]=PalmOS データベース 情報
+Name[kk]=PalmOS деректер қорының мәліметі
 Name[km]=ព័ត៌មាន​មូលដ្ឋាន​ទិន្នន័យ PalmOS
 Name[lt]=PalmOS duomenų bazės info
+Name[mk]=Информации за PalmOS-база на податоци
 Name[ms]=Maklumat Pangkalan Data PalmOS 
 Name[nb]=PalmOS Database info
 Name[nds]=PalmOS-Datenbank-Informatschonen
+Name[ne]=PalmOS डाटाबेस सूचना
 Name[nl]=PalmOS-database informatie
 Name[nn]=PalmOS-databaseinfo
 Name[pl]=Baza danych PalmOS
Index: kfile-plugins/vcf/kfile_vcf.desktop
===================================================================
--- kfile-plugins/vcf/kfile_vcf.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ kfile-plugins/vcf/kfile_vcf.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -26,12 +26,15 @@
 Name[is]=vCard upplýsingar
 Name[it]=Informazioni vCard
 Name[ja]=vCard 情報
+Name[kk]=vCard мәліметі
 Name[km]=ព័ត៌មាន vCard
 Name[lt]=vCard informacija
+Name[mk]=Информации за vCard
 Name[ms]=Info vCard
 Name[mt]=Informazzjoni vCard
 Name[nb]=vCard info
 Name[nds]=vCard-Informatschonen
+Name[ne]=भी कार्ड सुचना
 Name[nl]=vCard-informatie
 Name[nn]=vCard-info
 Name[nso]=Tshedimoso ya vKarata
Index: MAINTAINERS
===================================================================
--- MAINTAINERS	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ MAINTAINERS	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -26,7 +26,6 @@
 korn             Mart Kelder <mart.mailing@hccnet.nl>
 kpilot           Adriaan de Groot <groot@kde.org>
                  Reinhold Kainhofer <reinhold@kainhofer.com>
-ksync            Cornelius Schumacher <schumacher@kde.org>
 ktnef            Michael Goffioul <goffioul@imec.be>
 libical          Cornelius Schumacher <schumacher@kde.org>
                  Reinhold Kainhofer <reinhold@kainhofer.com>
Index: korganizer/korganizer_configfonts.desktop
===================================================================
--- korganizer/korganizer_configfonts.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ korganizer/korganizer_configfonts.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -41,12 +41,15 @@
 Name[is]=Letur
 Name[it]=Tipi di carattere
 Name[ja]=フォント
+Name[kk]=Қаріптері
 Name[km]=ពុម្ពអក្សរ
 Name[lt]=Šriftai
 Name[lv]=Fonti
+Name[mk]=Фонтови
 Name[ms]=Fon
 Name[nb]=Skrifter
 Name[nds]=Schriftoorden
+Name[ne]=फन्ट
 Name[nl]=Lettertypen
 Name[nn]=Skrifttypar
 Name[pl]=Czcionki
@@ -97,11 +100,14 @@
 Comment[is]=KOrganizer leturstillingar
 Comment[it]=Configurazione font di KOrganizer
 Comment[ja]=KOrganizer フォント設定
+Comment[kk]=KOrganizer-дің қаріптер параметрлері
 Comment[km]=ការ​កំណត់​រចនាសម្ព័ន្ធ​ពុម្ពអក្សរ KOrganizer
 Comment[lt]=KOrganizer šriftų konfigūravimas
+Comment[mk]=Конфигурација на фонтовите
 Comment[ms]=Konfigurasi Fon KOrganizer 
 Comment[nb]=KOrganizer skriftoppsett
 Comment[nds]=Schriftoorden för KOrganizer instellen
+Comment[ne]=केडीई आयोजक फन्ट कन्फिगरेसन
 Comment[nl]=KOrganizer lettertypen instellen
 Comment[nn]=KOrganizer, skriftinnstillingar
 Comment[pl]=Konfiguracja czcionek KOrganizera
@@ -148,9 +154,11 @@
 Keywords[ja]=korganizer,フォント
 Keywords[km]=korganizer,ពុម្ពអក្សរ
 Keywords[lt]=korganizer,fonts, šriftai
+Keywords[mk]=korganizer,fonts,корганизатор,фонтови
 Keywords[ms]=korganizer,fon
 Keywords[nb]=korganizer,skrifter, skrifttyper
 Keywords[nds]=KOrganizer,Schriftoorden
+Keywords[ne]=केडीई आयोजक, फन्ट
 Keywords[nl]=korganizer,fonts,lettertypen
 Keywords[nn]=korganizer,skrift
 Keywords[pl]=korganizer,czcionki
Index: korganizer/printing/calprintdefaultplugins.cpp
===================================================================
--- korganizer/printing/calprintdefaultplugins.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ korganizer/printing/calprintdefaultplugins.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -441,10 +441,15 @@
     }
 
     if ( mShowOptions ) {
-      QString optionsString = i18n("Status: %1").arg( (*it)->statusStr() );
-      optionsString += "\n";
-      optionsString += i18n("Secrecy: %1").arg( (*it)->secrecyStr() );
-      optionsString += "\n";
+      QString optionsString;
+      if ( !(*it)->statusStr().isEmpty() ) {
+        optionsString += i18n("Status: %1").arg( (*it)->statusStr() );
+        optionsString += "\n";
+      }
+      if ( !(*it)->secrecyStr().isEmpty() ) {
+        optionsString += i18n("Secrecy: %1").arg( (*it)->secrecyStr() );
+        optionsString += "\n";
+      }
       if ( (*it)->type() == "Event" ) {
         Event *e = static_cast<Event*>(*it);
         if ( e->transparency() == Event::Opaque ) {
Index: korganizer/kodialogmanager.cpp
===================================================================
--- korganizer/kodialogmanager.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ korganizer/kodialogmanager.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -66,7 +66,7 @@
     KODialogManager *mDialogManager;
 };
 
-class KODialogManager::EditorDialogVisitor : 
+class KODialogManager::EditorDialogVisitor :
       public KODialogManager::DialogManagerVisitor
 {
   public:
@@ -268,6 +268,7 @@
 
 KOTodoEditor *KODialogManager::getTodoEditor()
 {
+  kdDebug(5850) << k_funcinfo << endl;
   KOTodoEditor *todoEditor = new KOTodoEditor( mMainView->calendar(), mMainView );
   connectEditor( todoEditor );
   return todoEditor;
Index: korganizer/korganizer_configplugins.desktop
===================================================================
--- korganizer/korganizer_configplugins.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ korganizer/korganizer_configplugins.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -14,7 +14,8 @@
 
 Name=Plugins
 Name[af]=Inprop modules
-Name[be]=Дапаўненьні
+Name[ar]=القوابس
+Name[be]=Дапаўненні
 Name[bg]=Приставки
 Name[br]=Lugantoù
 Name[ca]=Endollables
@@ -36,11 +37,14 @@
 Name[is]=Íforrit
 Name[it]=Plugin
 Name[ja]=プラグイン
+Name[kk]=Плагин модульдері
 Name[km]=កម្មវិធី​ជំនួយ
 Name[lt]=Priedai
+Name[mk]=Приклучоци
 Name[ms]=Plugin
 Name[nb]=Programtillegg
 Name[nds]=Modulen
+Name[ne]=प्लगइन
 Name[nn]=Programtillegg
 Name[pl]=Wtyczki
 Name[pt]='Plugins'
@@ -59,7 +63,7 @@
 Name[zh_TW]=外掛程式
 Comment=KOrganizer Plugin Configuration
 Comment[af]=Korganizer inprop module opstelling
-Comment[be]=Канфігурацыя дапаўненьняў "K Арганізатара"
+Comment[be]=Канфігурацыя дапаўненняў "K Арганізатара"
 Comment[bg]=Настройки на приставките за KOrganizer
 Comment[br]=Kefluniadur al lugent KOrganizer
 Comment[ca]=Configuració de l'endollable de KOrganizer
@@ -79,11 +83,14 @@
 Comment[is]=Stillingar KOrganizer íforrita
 Comment[it]=Configurazione plugin KOrganizer
 Comment[ja]=KOrganizer プラグイン設定
+Comment[kk]=KOrganizer-дің плагин модульдерінің параметрлері
 Comment[km]=ការ​កំណត់​រចនាសម្ព័ន្ធ​កម្មវិធី​ជំនួយ KOrganizer
 Comment[lt]=KOrganizer priedų konfigūravimas
+Comment[mk]=Конфигурација на приклучоци
 Comment[ms]=Konfigurasi Plugin KOrganizer 
 Comment[nb]=KOrganizer oppsett for programtillegg
 Comment[nds]=Modulen för KOrganizer instellen
+Comment[ne]=केडीई आयोजक प्लगइन कन्फिगरेसन
 Comment[nl]=KOrganizer plugininstellingen
 Comment[nn]=Oppsett av KOrganizer-programtillegg
 Comment[pl]=Konfiguracja wtyczek KOrganizera
@@ -101,7 +108,7 @@
 Comment[zh_CN]=KOrganizer 插件配置
 Comment[zh_TW]=KOrganizer外掛程式設定
 Keywords=korganizer,plugin,module
-Keywords[be]=K Арганізатар,дапаўненьне,модуль,korganizer,plugin,module
+Keywords[be]=K Арганізатар,дапаўненне,модуль,korganizer,plugin,module
 Keywords[bg]=организатор, модул, приставка, korganizer, plugin, module
 Keywords[ca]=korganizer,endollable,mòdul
 Keywords[cs]=korganizer,modul
@@ -123,9 +130,11 @@
 Keywords[ja]=korganizer,プラグイン,モジュール
 Keywords[km]=korganizer,កម្មវិធី​ជំនួយ,ម៉ូឌុល
 Keywords[lt]=korganizer,plugin,module,modulis,priedas
+Keywords[mk]=korganizer,plugin,module,корганизатор,приклучок,приклучоци,модул.модули
 Keywords[ms]=korganizer,plugin,modul
 Keywords[nb]=korganizer,programtillegg,modul
 Keywords[nds]=KOrganizer,Moduul,Modulen,Plugins
+Keywords[ne]=केडीई आयोजक, प्लगइन, मोड्युल
 Keywords[nn]=korganizer,programtillegg,modul
 Keywords[pl]=korganizer,wtyczka,moduł
 Keywords[pt]=korganizer,'plugin',módulo
Index: korganizer/koeditorgeneraltodo.cpp
===================================================================
--- korganizer/koeditorgeneraltodo.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ korganizer/koeditorgeneraltodo.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -95,6 +95,7 @@
 
 void KOEditorGeneralTodo::initTime(QWidget *parent,QBoxLayout *topLayout)
 {
+  kdDebug(5850) << k_funcinfo << endl;
   QBoxLayout *timeLayout = new QVBoxLayout(topLayout);
 
   QGroupBox *timeGroupBox = new QGroupBox(1,QGroupBox::Horizontal,
@@ -224,16 +225,11 @@
 
 void KOEditorGeneralTodo::setDefaults( const QDateTime &due, bool allDay )
 {
-kdDebug()<<"KOEditorGeneralTodo::setDefaults: " << due <<endl;
+  kdDebug(5850) << k_funcinfo << due <<endl;
   KOEditorGeneral::setDefaults(allDay);
 
   mTimeButton->setChecked( !allDay );
-  if(mTimeButton->isChecked()) {
-    mTimeButton->setEnabled(true);
-  }
-  else {
-    mTimeButton->setEnabled(false);
-  }
+  mTimeButton->setEnabled( mTimeButton->isChecked() /* i.e. !allDay */ );
 
   enableTimeEdits( !allDay );
 
@@ -246,9 +242,13 @@
   if ( due.isValid() ) {
     mDueDateEdit->setDate( due.date() );
     mDueTimeEdit->setTime( due.time() );
+  } else {
+    // Make it due tomorrow.
+    mDueDateEdit->setDate( QDate::currentDate().addDays(1) );
+    mDueTimeEdit->setTime( QTime::currentTime() );
   }
 
-  if ( QDateTime::currentDateTime() < due ) {
+  if ( !due.isValid() || (QDateTime::currentDateTime() < due) ) {
     mStartDateEdit->setDate( QDate::currentDate() );
     mStartTimeEdit->setTime( QTime::currentTime() );
   } else {
Index: korganizer/korganizer_configtime.desktop
===================================================================
--- korganizer/korganizer_configtime.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ korganizer/korganizer_configtime.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -14,7 +14,7 @@
 
 Name=Time & Date
 Name[af]=Datum & Tyd
-Name[ar]=الوقت والتاريخ
+Name[ar]=الوقت و التاريخ
 Name[be]=Час і дата
 Name[bg]=Дата и час
 Name[br]=Deiziad hag eur
@@ -39,11 +39,14 @@
 Name[is]=Tími og dagsetning
 Name[it]=Data e ora
 Name[ja]=日付と時間
+Name[kk]=Уақыт пен Күн
 Name[km]=កាលបរិច្ឆេទ & ពេលវេលា
 Name[lt]=Laikas ir data
+Name[mk]=Датуми и времиња
 Name[ms]=Waktu & Tarikh
 Name[nb]=Dato og tid
 Name[nds]=Tiet & Datum
+Name[ne]=मिति र समय
 Name[nl]=Datum & tijd
 Name[nn]=Tidsinnstillingar
 Name[pl]=Czas i data
@@ -66,7 +69,7 @@
 Name[zh_TW]=時間與日期
 Comment=KOrganizer Time Configuration
 Comment[af]=KOrganizer tyd opstelling
-Comment[ar]=إعداد وقت KOrganizer
+Comment[ar]=إعداد الوقت لِــ KOrganizer
 Comment[be]=Канфігурацыя часу "K Арганізатара"
 Comment[bg]=Настройки на дата и час за KOrganizer
 Comment[bs]=KOrganizer podešavanje vremena
@@ -89,11 +92,14 @@
 Comment[is]=KOrganizer tímastillingar
 Comment[it]=Configurazione data di KOrganizer
 Comment[ja]=KOrganizer 時間設定
+Comment[kk]=KOrganizer-дің уақыт параметрлері
 Comment[km]=ការ​កំណត់​រចនាសម្ព័ន្ធ​ពេលវេលា​របស់ KOrganizer
 Comment[lt]=KOrganizer laiko konfigūravimas
+Comment[mk]=Конфигурација на датуми и времиња
 Comment[ms]=Konfigurasi Waktu KOrganizer 
 Comment[nb]=KOrganizer tidsoppsett
 Comment[nds]=Tietinstellen för KOrganizer
+Comment[ne]=केडीई आयोजक समय कन्फिगरेसन
 Comment[nl]=KOrganizer datum en tijd instellen
 Comment[nn]=KOrganizer, tidsinnstillingar
 Comment[pl]=Konfiguracja czasu dla KOrganizera
@@ -139,9 +145,11 @@
 Keywords[ja]=korganizer,時間
 Keywords[km]=korganizer,ពេលវេលា
 Keywords[lt]=korganizer,time,laikas
+Keywords[mk]=korganizer,time,корганизатор,датум,време
 Keywords[ms]=korganizer,waktu
 Keywords[nb]=korganizer,tid
 Keywords[nds]=KOrganizer,Tiet
+Keywords[ne]=केडीई आयोजक, समय
 Keywords[nl]=datum,tijd,korganizer
 Keywords[nn]=korganizer,tid
 Keywords[pl]=korganizer,czas,data,daty
Index: korganizer/koeditorgeneral.cpp
===================================================================
--- korganizer/koeditorgeneral.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ korganizer/koeditorgeneral.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -236,6 +236,9 @@
   KPIM::CategorySelectDialog *categoryDialog = new KPIM::CategorySelectDialog( KOPrefs::instance(), mCategoriesButton	 );
   KOGlobals::fitDialogToScreen( categoryDialog );
   categoryDialog->setSelected( mCategories );
+
+  connect(categoryDialog, SIGNAL(editCategories()), this, SIGNAL(openCategoryDialog()));
+
   if ( categoryDialog->exec() ) {
     setCategories( categoryDialog->selectedCategories() );
   }
Index: korganizer/koeventeditor.cpp
===================================================================
--- korganizer/koeventeditor.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ korganizer/koeventeditor.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -91,6 +91,9 @@
 
   connect( mGeneral, SIGNAL( focusReceivedSignal() ),
            SIGNAL( focusReceivedSignal() ) );
+
+  connect( mGeneral, SIGNAL( openCategoryDialog() ),
+           SIGNAL( editCategories() ) );
 }
 
 void KOEventEditor::reload()
Index: korganizer/korganizer_configgroupscheduling.desktop
===================================================================
--- korganizer/korganizer_configgroupscheduling.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ korganizer/korganizer_configgroupscheduling.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -35,11 +35,14 @@
 Name[is]=Hópáætlun
 Name[it]=Programmazione gruppi
 Name[ja]=グループスケジューリング
+Name[kk]=Топтың жұмысын жоспарлау
 Name[km]=រៀបចំ​កាលវិភាគ​ក្រុម
 Name[lt]=Grupių tvarkaraščių tvarkymas
+Name[mk]=Закажување групи
 Name[ms]=Penjadualan Kumpulan
 Name[nb]=Gruppeplanlegging
 Name[nds]=Koppelplanen
+Name[ne]=समूह कार्यतालिका
 Name[nl]=Groepsplanning
 Name[nn]=Gruppeplanlegging
 Name[pl]=Planowanie grupowe
@@ -82,11 +85,14 @@
 Comment[is]=Stillingar fyrir KOrganizer hópáætlun
 Comment[it]=Configurazione del programmatore gruppi di KOrganizer
 Comment[ja]=KOrganizer グループスケジューリング設定
+Comment[kk]=KOrganizer топтық жұмысты жоспрлаудың параметрлері
 Comment[km]=ការ​កំណត់​រចនាសម្ព័ន្ធ​ការ​រៀបចំ​កាលវិភាគ​ក្រុម​របស់ KOrganizer
 Comment[lt]=KOrganizer grupių tvarkaraščių tvarkymo konfigūravimas
+Comment[mk]=Конфигурација на закажување групи
 Comment[ms]=Konfigurasi Penjadualan Kumpulan KOrganizer 
 Comment[nb]=Gruppeplanleggingsoppsett for KOrganizer
 Comment[nds]=Koppelplanen för KOrganizer instellen
+Comment[ne]=केडीई आयोजक समूह कार्यतालिका कन्फिगरेसन
 Comment[nl]=KOrganizer groepsplanning instellen
 Comment[nn]=KOrganizer, innstillingar for gruppeplanlegging
 Comment[pl]=Konfiguracja planowania grupowego dla KOrganizera
@@ -127,9 +133,11 @@
 Keywords[ja]=korganizer,グループ,スケジューリング
 Keywords[km]=korganizer,ក្រុម,កាលវិភាគ
 Keywords[lt]=korganizer,group,scheduling,tvarkaraštis, grupė
+Keywords[mk]=korganizer,group,scheduling,корганизатор,група,групи,закажување
 Keywords[ms]=korganizer,kumpulan,penjadualan
 Keywords[nb]=korganizer,gruppe,planlegging
 Keywords[nds]=KOrganizer,Koppel,Plaan,planen
+Keywords[ne]=केडीई आयोजक, समूह, कार्यतालिका
 Keywords[nl]=korganizer,group,scheduling,plannen,groep
 Keywords[nn]=korganizer,gruppe,planlegging
 Keywords[pl]=korganizer,grupa,planowanie
Index: korganizer/actionmanager.cpp
===================================================================
--- korganizer/actionmanager.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ korganizer/actionmanager.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -341,7 +341,7 @@
                             mCalendarView->viewManager(),
                             SLOT( showNextXView() ),
                             mACollection, "view_nextx" );
-  mNextXDays->setText( i18n( "&Next Day", "Ne&xt %n Days",
+  mNextXDays->setText( i18n( "&Next Day", "&Next %n Days",
                              KOPrefs::instance()->mNextXDays ) );
   new KAction( i18n("W&ork Week"),
                KOGlobals::self()->smallIcon( "5days" ), 0,
Index: korganizer/korgac/korgac.desktop
===================================================================
--- korganizer/korgac/korgac.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ korganizer/korgac/korgac.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -3,6 +3,7 @@
 Encoding=UTF-8
 Name=KOrganizer Reminder Client
 Name[af]=KOrganizer herhinner kliënt
+Name[ar]=زبون المنبه لِــ KOrganizer
 Name[bg]=Клиент за аларма на KOrganizer
 Name[ca]=Client de l'alarma de KOrganizer
 Name[cs]=Klient upomínek KOrganizeru
@@ -20,10 +21,13 @@
 Name[is]=Áminningarforrit fyrir KOrganizer
 Name[it]=Client degli avvisi di KOrganizer
 Name[ja]=KOrganizer リマインダクライアント
+Name[kk]=KOrganizer-дің еске салу клиенті
 Name[km]=កម្មវិធី​រំលឹក​របស់ KOrganizer
 Name[lt]=KOrganizer priminimų klientas
+Name[mk]=Клиент за потсетување во КОрганизатор
 Name[nb]=KOrganizer klient for påminning
 Name[nds]=KOrganizer-Anstöötgever
+Name[ne]=केडीई आयोजक रिमाइन्डर क्लाइन्ट
 Name[nl]=KOrganizer herinneringsdaemon
 Name[nn]=Alarmklient for KOrganizer
 Name[pl]=Klient przypominania KOrganizera
@@ -60,10 +64,12 @@
 GenericName[is]=Áminningarpúki fyrir KOrganizer
 GenericName[it]=Client del demone degli avvisi di KOrganizer
 GenericName[ja]=KOrganizer リマインダデーモンクライアント
+GenericName[kk]=Organizer-дің еске салу қызметінің клиенті
 GenericName[km]=កម្មវិធី​ដេមិន​អ្នក​រំលឹក​របស់ KOrganizer
 GenericName[lt]=KOrganizer priminimų tarnybos klientas
 GenericName[nb]=KOrganizer klient for påminningstjenesten
 GenericName[nds]=Client för den Anstötendämoon vun KOrganizer
+GenericName[ne]=केडीई आयोजक रिमाइन्डर डेइमोन क्लाइन्ट
 GenericName[nl]=KOrganizer herinneringsdaemon
 GenericName[nn]=Alarmnisseklient for KOrganizer
 GenericName[pl]=Klient demona przypominania KOrganizera
Index: korganizer/kotodoview.cpp
===================================================================
--- korganizer/kotodoview.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ korganizer/kotodoview.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -829,6 +829,7 @@
 
 void KOTodoView::newTodo()
 {
+  kdDebug() << k_funcinfo << endl;
   emit newTodoSignal( QDate::currentDate().addDays(7) );
 }
 
Index: korganizer/kojournalview.cpp
===================================================================
--- korganizer/kojournalview.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ korganizer/kojournalview.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -49,11 +49,11 @@
   QVBoxLayout*topLayout = new QVBoxLayout( this );
   topLayout->setAutoAdd(true);
   mSV = new QScrollView( this, "JournalScrollView" );
-  topLayout = new QVBoxLayout( mSV->viewport() );
-  topLayout->setAutoAdd(true);
   mVBox = new QVBox( mSV->viewport() );
   mSV->setVScrollBarMode( QScrollView::Auto );
   mSV->setHScrollBarMode( QScrollView::AlwaysOff );
+  mSV->setResizePolicy( QScrollView::AutoOneFit );
+  mSV->addChild( mVBox );
 //  mVBox->setSpacing( 10 );
 }
 
Index: korganizer/interfaces/calendar/calendarplugin.desktop
===================================================================
--- korganizer/interfaces/calendar/calendarplugin.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ korganizer/interfaces/calendar/calendarplugin.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -5,7 +5,7 @@
 Comment=Calendar Plugin
 Comment[af]=Kalender Inplak
 Comment[az]=Təqvim Əlavəsi
-Comment[be]=Дапаўненьне "Календар"
+Comment[be]=Дапаўненне "Календар"
 Comment[bg]=Приставка за календар
 Comment[br]=Lugent an deiziadur
 Comment[bs]=Dodatak za kalendar
@@ -30,15 +30,17 @@
 Comment[is]=Dagatals íforrit
 Comment[it]=Plugin calendario
 Comment[ja]=カレンダープラグイン
+Comment[kk]=Күнтізбе модулі
 Comment[km]=កម្មវិធី​ជំនួយ​ប្រតិទិន
 Comment[ko]=달력 플러그인
 Comment[lt]=iCalendar priedas
 Comment[lv]=Kalendāra Iespraudnis
-Comment[mk]=Календар - додаток
+Comment[mk]=Приклучок за календар
 Comment[ms]=Plugin Kalendar
 Comment[mt]=Plagin tal-kalendarju
 Comment[nb]=Calendar-programtillegg
 Comment[nds]=Kalenner-Moduul
+Comment[ne]=क्यालेन्डर प्लगइन
 Comment[nl]=Agendaplugin
 Comment[nn]=Kalendermodul
 Comment[nso]=Plugin ya Tshupamabaka
Index: korganizer/interfaces/calendar/calendardecoration.desktop
===================================================================
--- korganizer/interfaces/calendar/calendardecoration.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ korganizer/interfaces/calendar/calendardecoration.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -28,14 +28,16 @@
 Comment[is]=Íforrit til að skreyta texta dagatals
 Comment[it]=Plugin di decorazione del calendario
 Comment[ja]=カレンダー装飾プラグイン
+Comment[kk]=Күнтізбені безендіру модулі
 Comment[km]=កម្មវិធី​ជំនួយ​សម្រាប់​តុបតែង​ប្រតិទិន
 Comment[lt]=vCalendar dekoracijų priedas
 Comment[lv]=Kalendāra Dekorāciju Iespraudnis
-Comment[mk]=Календар - додаток за изглед
+Comment[mk]=Приклучок за декорација на календар
 Comment[ms]=Plugin Hiasan Kalendar
 Comment[mt]=Plagin ta' dekorazzjoni tal-kalendarju
 Comment[nb]=Calendar dekorasjonsprogramtillegg
 Comment[nds]=Dekoratschoon för den Kalenner
+Comment[ne]=क्यालेन्डर सजावट प्लगइन
 Comment[nl]=Agendadecoratieplugin
 Comment[nn]=Tilleggsmodul for kalenderpynt
 Comment[nso]=Plugin ya Kgabiso ya Tshupamabaka
Index: korganizer/interfaces/korganizer/korgprintplugin.desktop
===================================================================
--- korganizer/interfaces/korganizer/korgprintplugin.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ korganizer/interfaces/korganizer/korgprintplugin.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -26,14 +26,16 @@
 Comment[is]=KOrganizer hluti
 Comment[it]=Parte di KOrganizer
 Comment[ja]=KOrganizer パート
+Comment[kk]=KOrganizer бөлшегі
 Comment[km]=ផ្នែក​របស់ KOrganizer
 Comment[lt]=KOrganizer dalis
 Comment[lv]=KOrganizer Daļa
-Comment[mk]=Организатор - дел
+Comment[mk]=Дел од КОрганизатор
 Comment[ms]=Bahagian KOrganizer
 Comment[mt]=Parti ta' KOrganizer
 Comment[nb]=KOrganizerdel
 Comment[nds]=KOrganizer-Komponent
+Comment[ne]=केडीई आयोजक भाग
 Comment[nn]=KOrganizer-del
 Comment[nso]=Seripa sa KMokopanyi
 Comment[pl]=Moduł KOrganizera
Index: korganizer/interfaces/korganizer/korganizerpart.desktop
===================================================================
--- korganizer/interfaces/korganizer/korganizerpart.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ korganizer/interfaces/korganizer/korganizerpart.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -26,14 +26,16 @@
 Comment[is]=KOrganizer hluti
 Comment[it]=Parte di KOrganizer
 Comment[ja]=KOrganizer パート
+Comment[kk]=KOrganizer бөлшегі
 Comment[km]=ផ្នែក​របស់ KOrganizer
 Comment[lt]=KOrganizer dalis
 Comment[lv]=KOrganizer Daļa
-Comment[mk]=Организатор - дел
+Comment[mk]=Дел од КОрганизатор
 Comment[ms]=Bahagian KOrganizer
 Comment[mt]=Parti ta' KOrganizer
 Comment[nb]=KOrganizerdel
 Comment[nds]=KOrganizer-Komponent
+Comment[ne]=केडीई आयोजक भाग
 Comment[nn]=KOrganizer-del
 Comment[nso]=Seripa sa KMokopanyi
 Comment[pl]=Moduł KOrganizera
Index: korganizer/kotodoeditor.cpp
===================================================================
--- korganizer/kotodoeditor.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ korganizer/kotodoeditor.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -66,8 +66,8 @@
 
 void KOTodoEditor::init()
 {
+  kdDebug(5850) << k_funcinfo << endl;
   setupGeneral();
-//  setupAlarmsTab();
   setupRecurrence();
   setupAttendeesTab();
   setupAttachmentsTab();
@@ -76,6 +76,9 @@
            mRecurrence, SLOT( setDateTimeStr( const QString & ) ) );
   connect( mGeneral, SIGNAL( signalDateTimeChanged( const QDateTime &, const QDateTime & ) ),
            mRecurrence, SLOT( setDateTimes( const QDateTime &, const QDateTime & ) ) );
+
+  connect( mGeneral, SIGNAL( openCategoryDialog() ),
+           SIGNAL( editCategories() ) );
 }
 
 void KOTodoEditor::reload()
@@ -132,6 +135,9 @@
     mGeneral->initCategories( topFrame, detailsLayout );
     mGeneral->initSecrecy( topFrame, detailsLayout );
   }
+  // By default, the To-do has no time associated and
+  // neither a start nor end time.
+  mGeneral->setDefaults( QDateTime(), false );
 
   mGeneral->finishSetup();
 }
@@ -152,6 +158,7 @@
 
 void KOTodoEditor::editIncidence(Incidence *incidence)
 {
+  kdDebug(5850) << k_funcinfo << endl;
   Todo *todo=dynamic_cast<Todo*>(incidence);
   if (todo)
   {
@@ -166,6 +173,7 @@
 
 void KOTodoEditor::newTodo()
 {
+  kdDebug(5850) << k_funcinfo << endl;
   init();
   mTodo = 0;
   setCaption( i18n("New To-do") );
@@ -187,6 +195,7 @@
 
 void KOTodoEditor::loadDefaults()
 {
+  kdDebug(5850) << k_funcinfo << endl;
   setDates( QDateTime::currentDateTime().addDays(7), true, 0 );
 }
 
Index: korganizer/plugins/datenums/datenums.desktop
===================================================================
--- korganizer/plugins/datenums/datenums.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ korganizer/plugins/datenums/datenums.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -3,6 +3,7 @@
 X-KDE-Library=libkorg_datenums
 Name=Date Numbers Plugin for Calendars
 Name[af]=Dag nommer inprop module vir kalenders
+Name[ar]=قابس أرقام التاريخ للتقويم
 Name[bg]=Приставка на календара за дати и смятане с дати
 Name[bs]=Dodatak za kalendar - brojevi datuma
 Name[ca]=Endollable de números de data per als calendaris
@@ -22,11 +23,13 @@
 Name[is]=Íforrit fyrir númer dags á dagatali
 Name[it]=Plugin delle date per i calendari
 Name[ja]=日数表示カレンダープラグイン
+Name[kk]=Күнтізбедегі күн нөмірінің модулі
 Name[km]=កម្មវិធី​ជំនួយ​លេខ​កាលបរិច្ឆេទ​សម្រាប់​ប្រតិទិន
 Name[lt]=Datų numerių priedas kalendoriams
 Name[ms]=Plugin Bilangan Tarikh untuk Kalendar
 Name[nb]=Datonummer programtillegg for Kalender
 Name[nds]=Kalennerdag-Moduul för Kalenners
+Name[ne]=क्यालेन्डरका लागि मिति सङ्ख्या प्लगइन
 Name[nl]=Datumgetallenplugin voor agenda's
 Name[nn]=Datonummer programtillegg for Kalender
 Name[pl]=Wtyczka numerów dni dla Kalendarzy
@@ -47,7 +50,7 @@
 Comment=For each day this plugin shows its daynumber of the year at the top of the agenda view. For example, February 1 is day 32 of the year.
 Comment[af]=Die inprop module vertoon die dag nommer van die jaar bo aan die agenda aansig. Bv: 1 Februarie is dag 32 van die jaar.
 Comment[bg]=Приставката служи за показване на деня от началото на годината. Примерно, 1-ви февруари е 32-ия ден от годината.
-Comment[ca]=Per cada día, aquest endollable mostra el número de día de l'any al capdamunt de la vista d'agenda. Per exemple, 1 de Febrer és el dia 32 de l'any.
+Comment[ca]=Per cada dia, aquest endollable mostra el número de dia de l'any al capdamunt de la vista d'agenda. Per exemple, 1 de Febrer és el dia 32 de l'any.
 Comment[cs]=tento modul pro každý den zobrazuje pořadí dne v roce na vrcholu pohledu. Např. 1. únor je 32 druhý den v roce.
 Comment[da]=For hver dag viser dette plugin nummeret for dagen i året for oven i agendavisningen. For eksempel er 1. februar 1 is den 32. dag i året.
 Comment[de]=Für jeden Tag des Jahres wird mit diesem Modul der Kalendertag oben in der Tagesansicht angezeigt. Der 1. Februar ist beispielsweise der 32. Kalendertag des Jahres.
@@ -62,12 +65,14 @@
 Comment[hu]=Megjeleníti az év elejétől eltelt napok számát az áttekintő nézet tetején. Például február elseje az év 32. napja.
 Comment[is]=Þetta íforrit sýnir efst í fundarskránni númer hvers dags í árinu. T.d. er 1. febrúar 32. dagurinn í árinu.
 Comment[it]=Per ciascun giorno, questo plugin mostra la data giuliana (numero progressivo a partire dal primo gennaio dell'anno corrente). Per esempio al primo di febbraio corrisponde il numero 32.
-Comment[ja]=本プラグインは予定表ビューの上に、それぞれの日がその年の何日目であるかを表示します。例えば、2 月 1 日はその年の 32 日目です。
+Comment[ja]=このプラグインは予定表ビューの上に、それぞれの日がその年の何日目であるかを表示します。例えば、2 月 1 日はその年の 32 日目です。
+Comment[kk]=Бұл модуль күн тәртібі бетінің жоғарында жыл басынан өткен күндер санын көрсетеді. Мысалы, 1-ақпан жылдың 32-күні.
 Comment[km]=សម្រាប់​ថ្ងៃ​នីមួយៗ កម្មវិធី​ជំនួយ​នេះ​នឹង​បង្ហាញ​លេខ​ថ្ងៃ​នៃ​ឆ្នាំ នៅ​ផ្នែក​ខាង​លើ​នៃ​ទិដ្ឋភាព​របៀបវារៈ ។ ឧទាហរណ៍ ថ្ងៃ​ទី ១ ខែ កុម្ភៈ នឹង​ត្រូវ​ជា​ថ្ងៃ​ទី ៣២ នៃ​ឆ្នាំ ។
 Comment[lt]=Kiekvienai dienai šis priedas rodo metų dienos numerį tvarkyklės viršuje. Pvz., Vasario 1 yra32 metų diena.
 Comment[ms]=Setiap hari plugin ini memaparkan  bilangan hari tahun tersebut di atas paparan agenda. Contohnya , 1 Februari adalah hari ke 32 bagi tahun tersebut.
 Comment[nb]=For hver dag viser dette programtillegget dagens nummer i året øverst på dagsvisningen. 1. februar er f.eks. dag nr. 32 i året.
 Comment[nds]=Dit Moduul wiest för elkeen Dag sien Nummer in't Johr baven de Dagansicht. De 1. Februor is t.B. de 32. Dag vun't Johr.
+Comment[ne]=प्रत्येक दिनका लागि यो प्लगइनले एजेन्डा दृश्यको माथि यस वर्षको दिन नम्बर देखाउछ । उदारणका लागि, फेब्रुवरी १ वर्षको बत्तिसौ दिन हो ।
 Comment[nl]=Deze plugin zorgt ervoor dat het dagnummer boven de agendaweergave wordt geplaatst. Bijvoorbeeld, bij 1 februari hoort dagnummer 32.
 Comment[nn]=For kvar dag vil dette programtillegget visa nummeret til denne dagen i året øvst i tidsplanen. 1. februar vil til dømes visast som dag 32.
 Comment[pl]=Ta wtyczka dla każdego dnia pokazuje jego numer kolejny w roku, na szczycie widoku planu. Na przykład, 1 luty to 32 dzień roku.
Index: korganizer/plugins/projectview/projectview.desktop
===================================================================
--- korganizer/plugins/projectview/projectview.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ korganizer/plugins/projectview/projectview.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -27,14 +27,15 @@
 Name[hu]=Projektnézegető bővítőmodul a KOrganizerhez
 Name[is]=Verkefnasýnar íforrit fyrir KOrganizer
 Name[it]=Plugin di vista dei progetti per KOrganizer
-Name[ja]=KOrganizer 用プロジェクトビュープラグイン
+Name[ja]=KOrganizer プロジェクトビュー プラグイン
+Name[kk]=KOrganizer-дің жоба көрінісінің модулі
 Name[km]=កម្មវិធី​ជំនួយ​ទិដ្ឋភាព​គម្រោង​សម្រាប់ KOrganizer
 Name[lt]=Projekto peržiūros priedas, skirtas KOrganizer
 Name[lv]=Projekta Skatījuma Iespraudnis KOrganaizeram
-Name[mk]=Project View додаток за Организатор
 Name[ms]=Plugin Paparan Projek untuk KOrganizer
 Name[nb]=Programtilllegg for prosjektvisning i KOrganizer
 Name[nds]=Projektkieker-Moduul för KOrganizer
+Name[ne]=केडीई आयोजकका लागि परियोजना दृश्य प्लगइन
 Name[nl]=Projectenweergaveplugin voor KOrganizer
 Name[nn]=Programtillegg for prosjektvising i KOrganizer
 Name[nso]=Plugin ya Pono ya Porojeke ya KMmeakanyi
@@ -76,12 +77,14 @@
 Comment[hu]=Ezzel a modullal projekttervező nézet alakítható ki a KOrganizerben (például a feladatokhoz vagy a havi nézetekhez). Ha aktiválja ezt a modult, átválthat projektnézetbe, hogy a feladatok projekttervként legyenek megtekinthetők.
 Comment[is]=Þetta íforrit veitir verkskipulagssýn fyrir KOrganizer (svipað og verkþátta eða mánaðarsýn). Ef þú virkjar þetta íforrit, getur þú á einfaldan hátt skipt yfir í verkefnasýn og skoðað verkþáttalistann þinn í skipuleggjara.
 Comment[it]=Questo plugin fornisce una vista di pianificazione progetto per KOrganizer (come la vista delle cose da fare o quella mensile). Se abiliti questo plugin, puoi passare dalla vista progetto alla vista delle cose da fare come in un pianificatore di progetti.
-Comment[ja]=本プラグインは (to-do 又は月ごとのビューのような) KOrganizer 用のプロジェクト計画ビューを供給します。本プラグインを有効にすると、プロジェクトビューに切替え、プロジェクトプランナにあるような to-do リストを閲覧できます。
+Comment[ja]=このプラグインは KOrganizer にプロジェクト計画ビューを提供します (to-do ビューや月ビューなど)。このプラグインを有効にすると、プロジェクトビューに切り替えて、スケジュール管理ソフトのように to-do リストを見ることができます。
+Comment[kk]=Бұл KOrganizer-нің жобаны жоспарлау көрінісінің модулі. Модулін орнатсаңыз, осы көрініске ауысып жоспар тізімініңізді жоба жоспарлағышындағы түріне келтіре аласыз.
 Comment[km]=កម្មវិធី​ជំនួយ​នេះ​ផ្ដល់​នូវ​ទិដ្ឋភាព​រៀបចំ​គម្រោង​សម្រាប់ korganizer (ដូចជា ទិដ្ឋភាព​ការងារ​ត្រូវ​ធ្វើ ឬ ទិដ្ឋភាព​ខែ​ជាដើម) ។ បើ​អ្នក​ធ្វើ​ឲ្យ​កម្មវិធី​ជំនួយ​នេះ​ប្រើ​បាន អ្នក​នឹង​អាច​ប្ដូរ​ទិដ្ឋភាព​គម្រោង ហើយ​មើល​ព្រឹត្តិការណ៍​របស់​អ្នក​ដូចជា​នៅ​ក្នុងកម្មវិធី​រៀបចំ​គម្រោង​អញ្ចឹង​ដែរ ។
 Comment[lt]=Šis priedas pateikia KOrganizaer projekto planavimo vaizdą (panašiai kaip darbų ar mėnesio vaizdai). Jei įjungsite šį įskiepį, galėsite peršokti į projekto vaizdą ir peržiūrėti savo darbų sąrašą kaip projektą.
 Comment[ms]=Plugin ini menyediakan paparan perancangan projek untuk KOrganizer (seperti tugasan atau paparan bulan). Jika plugin ini diaktifkan, anda boleh beralih ke paparan projek dan paparkan senarai tugasan seperti dalam perancang projek. 
 Comment[nb]=Dette programtilleggmet lager en prosjektplan-visning for KOrganizer (som i gjørelister og månedsvisninger). Slår du på dette programtilleggmet kan du bytte til prosjektvisning og se på gjørelista som i en prosjektplan.
 Comment[nds]=Mit dit Moduul kannst Du in KOrganizer en Projektplaan-Ansicht opropen (jüst as de Opgaven- oder Maandansichten). Wenn Du dit Moduul aktiveerst, kannst Du na de Projektansicht wesseln un Dien Opgavenlist as mit en Projektplaner ankieken.
+Comment[ne]=यो प्लगइनले केडीई आयोजकका लागि परियोजना योजना दृश्य उपलब्ध गराउछ (जस्तै: कार्य गर्न वा महिना हेर्न) । तपाईँले यो प्लगइन सक्षम पारेमा, परियोजना दृश्यमा स्विच गर्न र परियोजना योजनाकारमा जस्तै तपाईँको कार्य गर्ने सूची हेर्न सक्नुहुन्छ ।
 Comment[nl]=Deze plugin biedt een projectweergave voor KOrganizer (net zoals een takenlijst of maandweergave). Wanneer u deze plugin aanzet, kunt u deze weergave aanzetten om uw takenlijst te bekijken als een projectplanner.
 Comment[nn]=Dette programtillegget lagar ei prosjektplanvising for KOrganizer (slik som oppgåve- eller månadsvisingane). Dersom du brukar dette programtillegget, kan du visa oppgåvelista som i ein prosjektplanleggjar.
 Comment[pl]=Ta wtyczka tworzy widok planowania projektu w KOrganizerze (tak jak widok zadań do zrobienia lub widok miesiąca). Po włączeniu tej wtyczki możliwe jest przełączenie się na widok projektu zadań do zrobienia.
Index: korganizer/plugins/exchange/exchange.desktop
===================================================================
--- korganizer/plugins/exchange/exchange.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ korganizer/plugins/exchange/exchange.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -3,7 +3,7 @@
 X-KDE-Library=libkorg_exchange
 Name=Microsoft Exchange 2000 Plugin for KOrganizer
 Name[af]=Microsoft Exchange 2000 inprop module vir KOrganizer
-Name[be]=Дапаўненьне K Арганізатара "Microsoft Exchange 2000"
+Name[be]=Дапаўненне K Арганізатара "Microsoft Exchange 2000"
 Name[bg]=Приставка на организатора за връзка с Microsoft Exchange 2000
 Name[bs]=Microsoft Exchange 2000 dodatak za KOrganizer
 Name[ca]=Endollable Microsoft Exchange 2000 per a KOrganizer
@@ -23,11 +23,14 @@
 Name[is]=Microsoft Exchange 2000 íforrit fyrir KOrganizer
 Name[it]=Plugin Microsoft Exchange 2000 per KOrganizer
 Name[ja]=KOrganizer の Microsoft Exchange 2000 プラグイン
+Name[kk]=KOrganizer-дің Microsoft Exchange 2000 модулі
 Name[km]=កម្មវិធី​ជំនួយ​ម៉ៃក្រូសូហ្វ Exchange ២០០០ សម្រាប់ KOrganizer
 Name[lt]=Microsoft Exchange 2000 priedas, skirtas KOrganizer
+Name[mk]=Приклучок за КОрганизатор за Microsoft Exchange 2000
 Name[ms]=PLugin Microsoft Exchange 2000  untuk KOrganizer
 Name[nb]=Microsoft Exchange 2000 programtillegg for KOrganizer
 Name[nds]=MSExchange2000-Moduul för KOrganizer
+Name[ne]=केडीई आयोजकका लागि माइक्रोसफ्ट एक्सचेन्ज 2000
 Name[nl]=Microsoft Exchange 2000 plugin voor KOrganizer
 Name[nn]=Microsoft Exchange 2000 programtillegg for KOrganizer
 Name[pl]=Wtyczka Microsoft Exchange 2000 dla Organizatora
@@ -48,7 +51,7 @@
 Comment=This plugin allows korganizer users to work with Microsoft Exchange 2000 groupware servers.
 Comment[af]=Hierdie inprop module maak dit vir korganizer gebruikers moontlik om met Microsoft Exchange 2000 bedieners te praat.
 Comment[bg]=Приставката служи за връзка на Korganizer със сървъра Microsoft Exchange 2000 groupware.
-Comment[ca]=Aquest endollable permet els usuaris de korganizer treballar amb servidors groupware Microsoft Exchange 2000.
+Comment[ca]=Aquest endollable permet als usuaris de korganizer treballar amb servidors groupware Microsoft Exchange 2000.
 Comment[cs]=tento modul umožňuje pracovat uživatelům korganizeru s Microsoft Exchange 2000 groupware servery.
 Comment[da]=Dette plugin tillader brugere af korganizer at arbejde med Microsoft Exchange 2000 groupware servere.
 Comment[de]=Mit diesem Modul kann KOrganizer mit Microsoft Exchange 2000 Groupware-Servern zusammenarbeiten.
@@ -63,12 +66,15 @@
 Comment[hu]=Ez a modul lehetővé teszi KOrganizer-felhasználóknak Microsoft Exchange 2000-kiszolgálón tárolt csoportmunka-adatok elérését.
 Comment[is]=Þetta íforrit gerir KOrganizer kleyft að vinna með Microsoft Exchange 2000 hópvinnuþjónum.
 Comment[it]=Questo plugin permette agli utenti di korganizer di lavorare con i server groupware Microsoft Exchange 2000.
-Comment[ja]=本プラグインにより、korganizer のユーザは Microsoft Exchange 2000 グループウェアサーバとの同期が可能となります。
+Comment[ja]=このプラグインにより、korganizer のユーザが Microsoft Exchange 2000 グループウェアサーバと同期できるようになります。
+Comment[kk]=Бұл модуль korganizer-мен MS Exchange 2000 біріккен жұмыс сервермен істеуге мүмкіндік береді.
 Comment[km]=កម្មវិធី​ជំនួយ​នេះ​អនុញ្ញាត​ឲ្យ​អ្នក​ប្រើ​របស់ korganizer ធ្វើការ​ជាមួយ​ម៉ាស៊ីន​បម្រើ​កម្មវិធី​ពហុ​អ្នកប្រើ​របស់​ម៉ៃក្រូសូហ្វ Exchange ២០០០ ។
 Comment[lt]=Šis priedas leidžia korganizer dirbti su Microsoft Exchange 2000 groupware serveriais.
+Comment[mk]=Овој приклучок им овозможува на корисниците на КОрганизатор да работат со groupware-серверите на Microsoft Exchange 2000.
 Comment[ms]=Plugin ini membenarkan pengguna korganizer bekerja bersama pelayan groupware Microsoft Exchange 2000.
 Comment[nb]=Med dette programtillegget kan korganizer-brukere arbeide med gruppevare-tjenere fra Microsoft Exchange 2000.i
 Comment[nds]=Över dit Moduul köönt KOrganizer-Brukers mit Groupware-Servers för MSExchange-2000 arbeiden.
+Comment[ne]=यो प्लगइनले माइक्रोसफ्ट एक्सचेन्ज 2000 ग्रुपवेयर सर्भरमा केडीई आयोजकलाई कार्य गर्न अनुमति दिन्छ ।
 Comment[nl]=Deze plugin maakt het mogelijk om Microsoft Exchange 2000 te gebruiken in KOrganizer.
 Comment[nn]=Dette programtillegget lèt KOrganizer-brukarar arbeida saman med Microsoft Exchange 2000-gruppevaretenarar.
 Comment[pl]=Ta wtyczka pozwala KOrganizerowi współpracować z serwerami pracy grupowej Microsoft Exchange.
Index: korganizer/plugins/printing/year/yearprint.desktop
===================================================================
--- korganizer/plugins/printing/year/yearprint.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ korganizer/plugins/printing/year/yearprint.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -16,8 +16,10 @@
 Name[hu]=Éves naptár nyomtatási stílus
 Name[it]=Stile di stampa annuale
 Name[ja]=年毎印刷スタイル
+Name[kk]=Жылдық басу стилі
 Name[km]=រចនាប័ទ្ម​បោះពុម្ព​ប្រចាំ​ឆ្នាំ
 Name[nds]=Johrkalenner-Druckstil
+Name[ne]=वार्षिक मुद्रण शैली
 Name[nl]=Printstijl voor jaarkalender
 Name[pl]=Styl drukowania roku
 Name[pt]=Estilo de Impressão em Anuário
@@ -29,9 +31,11 @@
 Name[sr@Latn]=Godišnji stil štampe
 Name[sv]=Årlig utskriftsstil
 Name[uk]=Стиль друку щорічником
+Name[zh_CN]=按年打印样式
 Name[zh_TW]=年度列印風格
 Comment=This plugin allows you to print out a yearly calendar.
 Comment[af]=Hierdie inprop module maak dit moontlik om 'n kalender vir 'n hele jaar te druk.
+Comment[bg]=Приставката служи за печат на годишния календар.
 Comment[ca]=Aquest endollable us permet imprimir un calenadri anual.
 Comment[cs]=Tento modul umožňuje tisk ročního kalendáře.
 Comment[da]=Dette plugin gør at du kan udskrive en årlig kalender
@@ -44,9 +48,12 @@
 Comment[gl]=Este engadido permítelle imprimir un calendario anual.
 Comment[hu]=Ez a modul egy egész éves naptár kinyomtatását teszi lehetővé.
 Comment[it]=Questo plugin ti permette di stampare un calendario annuale.
-Comment[ja]=本プラグインにより年毎のカレンダーを印刷できるようになります。
+Comment[ja]=このプラグインにより、年毎のカレンダーを印刷できるようになります。
+Comment[kk]=Бұл жылдық күнтізбені басып шығаратын модулі.
 Comment[km]=កម្មវិធី​ជំនួយ​នេះ​អនុញ្ញាត​ឲ្យ​អ្នក​បោះពុម្ព​​ប្រតិទិន​ប្រចាំ​ឆ្នាំ ។
+Comment[mk]=Овој приклучок Ви овозможува да испечатите годишен календар.
 Comment[nds]=Mit dit Moduul kannst Du en Kalenner för't hele Johr utdrucken.
+Comment[ne]=यो प्लगइनले तपाईँलाई वार्षिक पात्रो मुद्रण गर्न अनुमति दिन्छ ।
 Comment[nl]=Deze plugin maakt het mogelijk om een jaarkalender af te drukken.
 Comment[pl]=Ta wtyczka pozwala drukować roczny kalendarz.
 Comment[pt]=Este 'plugin' permite-lhe imprimir um calendário anual.
@@ -58,6 +65,7 @@
 Comment[sr@Latn]=Ovaj priključak vam omogućava da odštampate godišnji kalendar.
 Comment[sv]=Det här insticksprogrammet gör att du kan skriva ut en årlig kalender.
 Comment[uk]=Цей журнал надає можливість друкувати щорічний календар.
+Comment[zh_CN]=此插件允许您打印年历。
 Comment[zh_TW]=此外掛程式讓您印出年曆。
 Type=Service
 ServiceTypes=Calendar/Plugin,KOrganizer/PrintPlugin
Index: korganizer/plugins/printing/whatsnext/whatsnextprint.desktop
===================================================================
--- korganizer/plugins/printing/whatsnext/whatsnextprint.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ korganizer/plugins/printing/whatsnext/whatsnextprint.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -19,11 +19,13 @@
 Name[is]=Hvað er næst prentstíll
 Name[it]=Stile di stampa "cosa viene dopo"
 Name[ja]=次は何？ 印刷スタイル
+Name[kk]="Не істеу?" бетін басу стилі
 Name[km]=រចនាប័ទ្ម​បោះពុម្ព​ការងារ​បន្តបន្ទាប់
 Name[lt]=Ateinančių įvykių spausdinimo stilius
 Name[ms]=Gaya Cetak Apa Seterusnya
 Name[nb]=Utskriftsstil for Hva Nå
 Name[nds]=Druckstil för "Wat kummt nu"-Indrääg
+Name[ne]=पछिल्लो मुद्रण शैली कुन हो
 Name[nl]=Printstijl voor Wat komt er nu
 Name[nn]=Utskriftsstil for «Kva no»
 Name[pl]=Styl drukowania "Do dalej"
@@ -58,12 +60,14 @@
 Comment[hu]=Ezzel a modullal kinyomtathatók a rövidesen aktuálissá váló feladatok és események.
 Comment[is]=Þetta íforrit gerir þér kleyft að prenta út lista yfir alla væntanlega atburði og verkþætti.
 Comment[it]=Questo plugin vi permette di stampare una lista dei prossimi eventi e cose da fare.
-Comment[ja]=本プラグインにより、将来のすべてのイベントや to-do のリストを印刷できるようになります。
+Comment[ja]=このプラグインにより、将来のすべてのイベントや to-do のリストを印刷できるようになります。
+Comment[kk]=Бұл келер оқиғалар мен жоспарлар тізімін басып шығаратын модулі.
 Comment[km]=កម្មវិធី​ជំនួយ​នេះ​អនុញ្ញាត​ឲ្យ​អ្នក​បោះពុម្ព​បញ្ជី​នៃ​ព្រឹត្តិការណ៍ និង ការងារ​ត្រូវ​ធ្វើ​បន្តបន្ទាប់
 Comment[lt]=Šis priedas leidžia spausdinti sąrašą visų artėjančių įvykių ir darbų.
 Comment[ms]=Plugin ini membenarkan anda mencetak senarai semua peristiwa dan tugasan mendatang. 
 Comment[nb]=Med dette programtilleggmet kan du skrive ut en liste over kommende hendelser og ting som skal gjøres.
 Comment[nds]=Mit dit Moduul kann en List vun de direktemang nakamen Begeefnissen un Opgaven utdruckt warrn.
+Comment[ne]=यो प्लगइनले तपाईँलाई सबै पछि हुने घटना र गर्नुपर्ने कार्यहरुको सूचीको मुद्रण गर्न अनुमति दिन्छ ।
 Comment[nl]=Deze plugin maakt het mogelijk om een lijst van alle komende evenementen en taken uit te printen.
 Comment[nn]=Dette programtillegget lèt deg skriva ut ei liste over alle dei komande hendingane og oppføringane i hugselista.
 Comment[pl]=Ta wtyczka pozwala wydrukować wszystkie przyszłe zdarzenia i zadania.
Index: korganizer/plugins/printing/journal/journalprint.desktop
===================================================================
--- korganizer/plugins/printing/journal/journalprint.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ korganizer/plugins/printing/journal/journalprint.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -19,11 +19,13 @@
 Name[is]=Dagbókarprentstíll
 Name[it]=Stile di stampa a diario
 Name[ja]=ジャーナル印刷スタイル
+Name[kk]=Күнделікті басу стилі
 Name[km]=រចនាប័ទ្ម​បោះពុម្ព​ទិនានុប្បវត្តិ
 Name[lt]=Dienyno spausdinimo stilius
 Name[ms]=Gaya Cetak Jurnal 
 Name[nb]=Utskriftsstil for dagbok
 Name[nds]=Daagbook-Druckstil
+Name[ne]=जर्नल मुद्रण शैली
 Name[nl]=Printstijl voor journaals
 Name[nn]=Utskriftsstil for dagbok
 Name[pl]=Styl drukowania dziennika
@@ -58,12 +60,14 @@
 Comment[hu]=Ez a modul naplóbejegyzések kinyomtatását teszi lehetővé.
 Comment[is]=Þetta íforrit gerir þér kleyft að prenta út dagbókarfærslur.
 Comment[it]=Questo plugin ti permette di stampare le registrazioni del diario.
-Comment[ja]=本プラグインによりジャーナルのエントリ(日記のエントリ)を印刷できるようになります。
+Comment[ja]=このプラグインにより、ジャーナル (日誌) のエントリを印刷できるようになります。
+Comment[kk]=Бұл күнделіктің жазуларын басып шығаратын модулі.
 Comment[km]=កម្មវិធី​ជំនួយ​នេះ​អនុញ្ញាត​ឲ្យ​អ្នក​បោះពុម្ព​ធាតុ​ទិនានុប្បវត្តិ (ធាតុ​កំណត់ហេតុ​ប្រចាំ​ថ្ងៃ) ។
 Comment[lt]=Šis priedas leidžia spausdinti dienyno įrašus.
 Comment[ms]=Plugin ini membenarkan anda mencetak entri jurnal  (entri diari).
 Comment[nb]=Med dette programtilleggmet kan du skrive ut oppføringer i dagboka.
 Comment[nds]=Mit dit Moduul köönt Daagbook-Indrääg utdruckt warrn.
+Comment[ne]=यो प्लगइनले तपाईँलाई जर्नल प्रविष्टि मुद्रण गर्न अनुमति दिन्छ (दैनिक विवरण प्रविष्टि) ।
 Comment[nl]=Deze plugin maakt het mogelijk om journalen uit te printen (dagboekitems).
 Comment[nn]=Dette programtillegget lèt deg skriva ut dagboksoppføringar.
 Comment[pl]=Ta wtyczka pozwala drukować wpisy dziennika.
Index: korganizer/plugins/printing/list/listprint.desktop
===================================================================
--- korganizer/plugins/printing/list/listprint.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ korganizer/plugins/printing/list/listprint.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -19,11 +19,13 @@
 Name[is]=Listaprentstíll
 Name[it]=Stile di stampa ad elenco
 Name[ja]=リスト印刷スタイル
+Name[kk]=Тізімді басу стилі
 Name[km]=រចនាប័ទ្ម​បោះពុម្ព​បញ្ជី
 Name[lt]=Sąrašo spausdinimo stilius
 Name[ms]=Gaya Cetakan Senarai 
 Name[nb]=Utskriftsstil for liste
 Name[nds]=Listen-Druckstil
+Name[ne]=सूची मुद्रण शैली
 Name[nl]=Printstijl voor lijsten
 Name[nn]=Utskriftsstil for dagbøker
 Name[pl]=Styl drukowania listy
@@ -58,12 +60,14 @@
 Comment[hu]=Ezzel a modullal listaként kinyomtathatók a feladatok és események.
 Comment[is]=Þetta íforrit gerir þér kleyft að prenta út lista með atburðum og verkþáttum.
 Comment[it]=Questo plugin ti permette di stampare eventi e cose da fare in modalità elenco.
-Comment[ja]=本プラグインにより、リストフォーム内のイベントや to-do を印刷できるようになります。
+Comment[ja]=このプラグインにより、リストフォーム内のイベントや to-do を印刷できるようになります。
+Comment[kk]=Бұл оқиғалар мен жоспарларды тізім түрінде басатын модулі.
 Comment[km]=កម្មវិធី​ជំនួយ​នេះ​អនុញ្ញាត​ឲ្យ​អ្នក​បោះពុម្ព​ព្រឹត្តិការណ៍ និង ការងារ​ត្រូវ​ធ្វើក្នុង​ទម្រង់​ជា​បញ្ជី ។
 Comment[lt]=Šis priedas leidžia spausdinti įvykius ir darbus sąrašo forma.
 Comment[ms]=Plugin ini membenarkan anda mencetak peristiwa dan tugasan dalam borang senarai.
 Comment[nb]=Med dette programtilleggmet kan du skrive ut hendelser og gjørelister på liste-form.
 Comment[nds]=Mit dit Moduul köönt Begeefnissen un Opgaven as Listen utdruckt warrn.
+Comment[ne]=यो प्लगइनले तपाईँलाई घटना मुद्रण गर्न र सूची फारममा गर्नुपर्ने कार्यहरू गर्न अनुमति दिन्छ ।
 Comment[nl]=Deze plugin maakt het mogelijk om evenementen en taken in lijstvorm uit te printen.
 Comment[nn]=Dette programtillegget lèt deg skriva ut hendingar og hugselister på listeform.
 Comment[pl]=Ta wtyczka pozwala drukować zdarzenia i zadania w postaci listy.
Index: korganizer/plugins/timespanview/timespanview.desktop
===================================================================
--- korganizer/plugins/timespanview/timespanview.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ korganizer/plugins/timespanview/timespanview.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -18,12 +18,14 @@
 Name[hu]=Időszakáttekintő bővítőmodul a KOrganizerhez
 Name[is]=Tímabilsskoðunar íforrit fyrir KOrganizer
 Name[it]=Plugin vista intervalli temporali per KOrganizer
-Name[ja]=KOrganizer 用 Timespan View プラグイン
+Name[ja]=KOrganizer タイムスパンビュー プラグイン
+Name[kk]=KOrganizer-дің уақыт аралығы көрініс модулі
 Name[km]=កម្មវិធី​ជំនួយ​ទិដ្ឋភាព​រយៈពេល​សម្រាប់ KOrganizer
 Name[lt]=Laiko tarpsnio vaizdo KOrganizer priedas
 Name[ms]=Plugin Paparan Kitar Waktu untuk KOrganizer
 Name[nb]=Programtilllegg for periodevisning i KOrganizer
 Name[nds]=Tietbruuk-Moduul för KOrganizer
+Name[ne]=केडीई आयोजकका लागि समयावधि दृश्य प्लगइन
 Name[nl]=Tijdspanneplugin voor KOrganizer
 Name[nn]=Programtillegg for tidsromsvising i KOrganizer
 Name[pl]=Wtyczka widoku zakresu czasu dla KOrganizera
@@ -58,12 +60,14 @@
 Comment[hu]=Ezzel modullal egy időszakot lehet áttekinteni a KOrganizerben (például a feladatokat vagy a havi nézeteket). Ha aktiválja ezt a modult, átválthat időszakos nézetbe, hogy az események Gantt-diagramon legyenek megtekinthetők.
 Comment[is]=Þetta íforrit veitir tímabilssýn fyrir KOrganizer (svipað og verkþátta eða mánaðarsýn). Ef þú virkjar þetta íforrit getur þú skipt yfir í tímabilssýn og skoðað atburðina þína eins og á Gantt skýringarmynd.
 Comment[it]=Questo plugin fornisce una vista a intervalli temporali. Se abiliti questo plugin, potrai passare alla vista a intervalli temporali e vedere i tuoi eventi come in un diagramma di Gantt.
-Comment[ja]=本プラグインは (to-do や month view のような) korganizer 用の timespan view を供給します。本プラグインを有効にすると、ガントチャートのように timespan view を切替え、イベントを表示できます。
+Comment[ja]=このプラグインは KOrganizer にタイムスパンビューを提供します (to-do ビューや月ビューなど)。このプラグインを有効にすると、タイムスパンビューに切り替えて、ガントチャートのようにイベントを見ることができます。
+Comment[kk]=Бұл KOrganizer-нің уақыт аралығы көрінісінің модулі. Модулін орнатсаңыз, осы көрініске ауысып оқиғаларыңызды Гант диаграмма түріне келтре аласыз.
 Comment[km]=កម្មវិធី​ជំនួយ​នេះ​ផ្ដល់​នូវ​ទិដ្ឋភាព​រយៈពេល​សម្រាប់ korganizer (ដូចជា ទិដ្ឋភាព​ការងារ​ត្រូវ​ធ្វើ ឬ ទិដ្ឋភាព​ខែ​ជាដើម) ។ បើ​អ្នក​ធ្វើ​ឲ្យ​កម្មវិធី​ជំនួយ​នេះ​ប្រើ​បាន អ្នក​នឹង​អាច​ប្ដូរ​ទិដ្ឋភាព​រយៈពេល ហើយ​មើល​ព្រឹត្តិការណ៍​របស់​អ្នក​ដូចជា​នៅ​ក្នុងដ្យាក្រាម Gantt អញ្ចឹង​ដែរ ។
 Comment[lt]=Šis priedas korganizer programoje sudaro galimybę apžvelgti laiko tarpą (pvz., darbų arba mėnesio peržiūra). Įgalinus šį priedą galėsite persijungti į laiko tarpo peržiūrą ir žiūrėti įvykius tarsi Gantt diagramoje.
 Comment[ms]=Plugin ini menyediakan paparan kitar waktu  untuk korganizer (seperti tugasan atau paparan bulan). Jika plugin ini diaktifkan,anda boleh beralih ke paparan kitar masa dan paparkan peristiwa seperti dalam diagram Gantt. 
 Comment[nb]=Dette programtilleggmet lager en periodevisning for korganizer (slik som gjøreliste og månedsvisning). Hvis du slår på dette programtilleggmet kan du bytte til periodevisning og se hendelser som i et Gantt-diagram.
 Comment[nds]=Mit dit Moduul kannst Du in KOrganizer en Tietbruuk-Ansicht opropen (jüst as de Opgaven- oder Maandansichten). Wenn Du dit Moduul aktiveerst, kannst Du na de Tietbruukansicht wesseln un Dien Begeefnissen as Ganntt-Diagramm ankieken.
+Comment[ne]=यो प्लगइनले केडीई आयोजकका लागि समयावधि उपलब्ध गराउछ (गर्नुपर्ने कार्य वा महिना दृश्य जस्तो) । तपाईँले यो प्लगइन सक्षम पारेमा, तपाईँले समयावधि दृश्यमा स्वीच गर्न र गान्ट रेखाचित्र जस्तोमा घटना हेर्न सक्नुहुन्छ ।
 Comment[nl]=Deze plugin biedt een weergave voor KOrganizer (zoals de takenlijst en de maandweergave). Wanneer u deze plugin inschakelt kunt u kiezen voor een weergave waarin u uw evenementen in een Gantt-diagram kunt bekijken.
 Comment[pl]=Ta wtyczka tworzy widok zakresu czasu w KOrganizerze (tak jak widok zadań do zrobienia lub widok miesiąca). Po włączeniu tej wtyczki możliwe jest przełączenie się na widok zakresu czasu i przeglądanie zdarzeń jak na diagramie Gantta.
 Comment[pt]=Este 'plugin' oferece uma vista de distribuição temporal para o KOrganizer (como as vistas de itens por-fazer ou mensais). Se activar este 'plugin', poderá mudar para a vista de distribuição temporal e ver os seus eventos como num diagrama de Gantt.
Index: korganizer/plugins/hebrew/hebrew.desktop
===================================================================
--- korganizer/plugins/hebrew/hebrew.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ korganizer/plugins/hebrew/hebrew.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -22,11 +22,14 @@
 Name[is]=Gyðinga dagatalsíforrit
 Name[it]=Plugin calendario ebraico
 Name[ja]=ユダヤ歴カレンダープラグイン
+Name[kk]=Яһуди күнтізбесінің модулі
 Name[km]=កម្មវិធី​ជំនួយ​ប្រតិទិន Jewish
 Name[lt]=Žydų kalendoriaus priedas
+Name[mk]=Приклучок за еврејски календар
 Name[ms]=PLugin Kalender Yahudi
 Name[nb]=Programtillegg for jødisk kalender
 Name[nds]=Moduul för juudschen Kalenner
+Name[ne]=यहूदि क्यालेन्डर प्लगइन
 Name[nl]=Joodse kalenderplugin
 Name[nn]=Programtillegg for jødisk kalender
 Name[pl]=Wtyczka kalendarza żydowskiego
@@ -47,7 +50,7 @@
 Comment=Shows all dates in korganizer also in the Jewish calendar system.
 Comment[af]=Vertoon alle datums in KOrganizer ook volgens die Joodse kalender.
 Comment[bg]=Приставката служи за показване на датите според еврейския календар.
-Comment[ca]=Mostra totes les dates a korganizer també en el sistema del calendari jueu.
+Comment[ca]=Mostra totes les dates del korganizer també en el sistema del calendari jueu.
 Comment[cs]=Zobrazení všech dat v korganizeru také v židovském kalendáři.
 Comment[da]=Viser alle datoer i korganizer også i det jødiske kalendersystem.
 Comment[de]=Zeigt alle Daten in KOrganizer auch im jüdischen Kalendarium an.
@@ -64,11 +67,14 @@
 Comment[is]=Sýna alla dagsetningar í KOrganizer sem eru einnig í dagatali gyðinga.
 Comment[it]=Mostra tutte le date in korganizer secondo il calendario ebraico.
 Comment[ja]=korganizer のすべての日付をユダヤ暦でも表示します。
+Comment[kk]=Яһуди күнтізбе күндерін korganizer-де көрсететін модулі.
 Comment[km]=បង្ហាញ​កាលបរិច្ឆេទ​ទាំងអស់​ក្នុង korganizer នៅ​ក្នុង​ប្រព័ន្ធ​ប្រតិទិន Jewish ។
 Comment[lt]=Rodo visas dienas kalendoriuje taip pat ir žydų kalendoriaus sistema.
+Comment[mk]=Ги прикажува сите датуми во КОрганизатор и според еврејскиот календар.
 Comment[ms]=Memaparkan semua tarikh dalam korganizer dan juga dalam sistem kalendar Yahudi.
 Comment[nb]=Viser alle datoer i korganizer også i det jødiske kalendersystemet. 
 Comment[nds]=Wiest all Daten binnen KOrganizer ok in den juudschen Kalenner.
+Comment[ne]=केडीई आयोजकमा पनि सबै मिति यहूदि क्यालेन्डर प्रणालीमा देखाउछ ।
 Comment[nl]=Toont alle data in KOrganizer ook in het Joodse kalendersysteem.
 Comment[nn]=Viser alle datoane i KOrganizer i den jødiske kalenderen.
 Comment[pl]=Pokazuje wszystkie daty w KOrganizerze również w kalendarzu żydowskim.
Index: korganizer/koagendaitem.cpp
===================================================================
--- korganizer/koagendaitem.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ korganizer/koagendaitem.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -31,10 +31,12 @@
 #include <kdebug.h>
 #include <klocale.h>
 #include <kwordwrap.h>
+#include <kmessagebox.h>
 
 #include <libkcal/icaldrag.h>
 #include <libkcal/vcaldrag.h>
 #include <libkdepim/kvcarddrag.h>
+#include <libemailfunctions/email.h>
 #ifndef KORG_NOKABC
 #include <kabc/addressee.h>
 #include <kabc/vcardconverter.h>
@@ -550,21 +552,18 @@
 void KOAgendaItem::addAttendee( const QString &newAttendee )
 {
   kdDebug(5850) << " Email: " << newAttendee << endl;
-  // TODO: Use proper email parsing instead of simply grepping for "<" and "@"
-  int pos = newAttendee.find("<");
-  QString name = newAttendee.left(pos);
-  QString email = newAttendee.mid(pos);
-  if (!email.isEmpty()) {
+  QString name, email;
+  KPIM::getNameAndMail( newAttendee, name, email );
+  if ( !( name.isEmpty() && email.isEmpty() ) ) {
     mIncidence->addAttendee(new Attendee(name,email));
-  } else if (name.contains("@")) {
-    mIncidence->addAttendee(new Attendee(name,name));
-  } else {
-    mIncidence->addAttendee(new Attendee(name,QString::null));
-  }
+    KMessageBox::information( this, i18n("Attendee \"%1\" added to the calendar item \"%2\"").arg(KPIM::normalizedAddress(name, email, QString())).arg(text()), i18n("Attendee added"), "AttendeeDroppedAdded" );
+  } 
+ 
 }
 
 void KOAgendaItem::dropEvent( QDropEvent *e )
 {
+  // TODO: Organize this better: First check for attachment (not only file, also any other url!), then if it's a vcard, otherwise check for attendees, then if the data is binary, add a binary attachment. 
 #ifndef KORG_NODND
   QString text;
 
Index: korganizer/journalentry.cpp
===================================================================
--- korganizer/journalentry.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ korganizer/journalentry.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -231,9 +231,8 @@
   mPrintButton = new QToolButton( this, "printButton" );
   mPrintButton->setPixmap( KOGlobals::self()->smallIcon( "printer1" ) );
   mPrintButton->setSizePolicy( QSizePolicy::Fixed, QSizePolicy::Fixed );
-  //FIXME: uncomment the next two lines after the string freeze is lifted
-//  QToolTip::add( mPrintButton, i18n("Print this journal entry") );
-//  QWhatsThis::add( mPrintButton, i18n("Opens the print dialog for this journal entry") );
+  QToolTip::add( mPrintButton, i18n("Print this journal entry") );
+  QWhatsThis::add( mPrintButton, i18n("Opens the print dialog for this journal entry") );
   mLayout->addWidget( mPrintButton, 0, 6 );
   connect( mPrintButton, SIGNAL(clicked()), this, SLOT( printItem() ) );
 #endif
Index: korganizer/korganizer_configfreebusy.desktop
===================================================================
--- korganizer/korganizer_configfreebusy.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ korganizer/korganizer_configfreebusy.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -34,11 +34,14 @@
 Name[is]=Tímaráðstöfun
 Name[it]=Libero/Occupato
 Name[ja]=動静情報
+Name[kk]=Бос/Істе
 Name[km]=ទំនេរ/រវល់
 Name[lt]=Užimtumas
+Name[mk]=Слободен/зафатен
 Name[ms]=Lapang/Sibuk
 Name[nb]=Ledig/Opptatt
 Name[nds]=Free/Bunnen
+Name[ne]=स्वतन्त्र/व्यस्त
 Name[nl]=Vrij/bezet
 Name[nn]=Ledig/opptatt
 Name[pl]=Wolny/zajęty
@@ -79,11 +82,14 @@
 Comment[is]=KOrganizer stillingar fyrir tímaráðstöfun
 Comment[it]=Configurazione Libero/Occupato di KOrganizer
 Comment[ja]=KOrganizer 動静情報の設定
+Comment[kk]=KOrganizer--дің Бос/Істе мәлімет параметрлері
 Comment[km]=ការ​កំណត់​រចនាសម្ព័ន្ធ​ទំនេរ/រវល់ របស់ KOrganizer
 Comment[lt]=KOrganizer užimtumo konfigūravimas
+Comment[mk]=Конфигурација на слободни/зафатени термини
 Comment[ms]=Konfigurasi Lapang/Sibuk KOrganizer 
 Comment[nb]=KOrganizer oppsett for ledig/opptatt tid
 Comment[nds]=Free/Bunnen-Instellen för KOrganizer
+Comment[ne]=केडीई आयोजक स्वतन्त्र/व्यस्त कन्फिगरेसन
 Comment[nl]=KOrganizer vrij/bezet instellen
 Comment[nn]=KOrganizer, ledig/opptatt-innstillingar
 Comment[pl]=Konfiguracja czasu wolnego/zajętego dla KOrganizera
@@ -124,9 +130,11 @@
 Keywords[it]=korganizer,libero/occupato,pianificazione
 Keywords[ja]=korganizer,動静,スケジューラ
 Keywords[km]=korganizer,ទំនេរ,រវល់,កាលវិភាគ
+Keywords[mk]=korganizer,freebusy,scheduling,корганизатор,слободно,зафатено,закажување
 Keywords[ms]=korganizer,lapang sibuk,penjadualan
 Keywords[nb]=korganizer,ledigopptatt,planlegger
 Keywords[nds]=KOrganizer,Free/Bunnen,Free,Bunnen,Planen,Plaan
+Keywords[ne]=केडीई आयोजक, स्वतन्त्र व्यस्त, कार्यतालिका
 Keywords[nl]=korganizer,freebusy,scheduling,plannen,vrij,bezet,rooster
 Keywords[nn]=korganizer,ledigopptatt,planlegging
 Keywords[pl]=korganizer,wolny/zajęty,planowanie
Index: korganizer/korganizer.desktop
===================================================================
--- korganizer/korganizer.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ korganizer/korganizer.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -27,14 +27,16 @@
 Comment[is]=Dagbók og skipulag
 Comment[it]=Programma di calendario e di agenda
 Comment[ja]=カレンダーとスケジュール管理プログラム
+Comment[kk]=Күнтізбе және Жоспарлау бағдарламасы
 Comment[km]=កម្មវិធី​ប្រតិទិន និង កាលវិភាគ
 Comment[lt]=Kalendoriaus ir planavimo programa
 Comment[lv]=Kalendāra un Plānošanas Programma
-Comment[mk]=Календар и роковник
+Comment[mk]=Програма за календари и закажувања
 Comment[ms]=Kalendar dan Program Penjadualan 
 Comment[mt]=Programm b' kalendarju w skeda
 Comment[nb]=Et kalender- og tidsplanleggingsprogram
 Comment[nds]=Kalenner un Tietplaner
+Comment[ne]=क्यालेन्डर र कार्यतालिका कार्यक्रम
 Comment[nl]=Agenda- en afsprakenprogramma
 Comment[nn]=Kalender- og planleggingsprogram
 Comment[nso]=Lenaneo la Peakanyo ya Tshupamabaka
@@ -69,12 +71,12 @@
 Terminal=false
 Name=KOrganizer
 Name[af]=Korganizer
-Name[be]=K Арганізатар
 Name[cy]=KTrefnydd
 Name[eo]=Organizilo
 Name[hi]=के-आर्गेनाइज़र
 Name[lv]=KOrganaizers
-Name[mk]=Организатор
+Name[mk]=КОрганизатор
+Name[ne]=केडीई आयोजक
 Name[nso]=KMokopanyi
 Name[pl]=Organizator
 Name[sv]=Korganizer
@@ -107,11 +109,14 @@
 GenericName[is]=Persónuleg skipulagsbók
 GenericName[it]=Organizzatore personale
 GenericName[ja]=個人向けスケジュール管理
+GenericName[kk]=Дербес ұйымдастырғышы
 GenericName[km]=កម្មវិធី​រៀបចំ​ផ្ទាល់​ខ្លួន
 GenericName[lt]=Asmeninės informacijos tvarkyklė
+GenericName[mk]=Личен организатор
 GenericName[ms]=Penyusun Peribadi
 GenericName[nb]=Personlig planlegger
 GenericName[nds]=Persöönlich Mötenkalenner
+GenericName[ne]=व्यक्तिगत आयोजक
 GenericName[nl]=Persoonlijke organizer
 GenericName[nn]=Personleg organiserar
 GenericName[pl]=Osobisty organizator
Index: korganizer/calendarview.cpp
===================================================================
--- korganizer/calendarview.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ korganizer/calendarview.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -987,6 +987,7 @@
 void CalendarView::newTodo( const QString &summary, const QString &description,
                             const QStringList &attachments, const QStringList &attendees )
 {
+  kdDebug(5850) << k_funcinfo << endl;
   KOTodoEditor *todoEditor = mDialogManager->getTodoEditor();
   connectIncidenceEditor( todoEditor );
   todoEditor->newTodo();
@@ -999,7 +1000,7 @@
 
 void CalendarView::newTodo()
 {
-  kdDebug(5850) << "CalendarView::newTodo()" << endl;
+  kdDebug(5850) << k_funcinfo << endl;
   QDateTime dtDue;
   bool allday = true;
   KOTodoEditor *todoEditor = mDialogManager->getTodoEditor();
Index: korganizer/koeditoralarms_base.ui
===================================================================
--- korganizer/koeditoralarms_base.ui	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ korganizer/koeditoralarms_base.ui	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -53,6 +53,9 @@
                                     <verstretch>0</verstretch>
                                 </sizepolicy>
                             </property>
+                            <property name="maxValue">
+                                <number>999999999</number>
+                            </property>
                         </widget>
                         <widget class="QComboBox">
                             <item>
Index: korganizer/dcopcalendar.desktop
===================================================================
--- korganizer/dcopcalendar.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ korganizer/dcopcalendar.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -28,11 +28,14 @@
 Comment[is]=Skipuleggjari með DCOP viðmóti
 Comment[it]=Organizer con un'interfaccia DCOP
 Comment[ja]=DCOP インターフェースを持つオーガナイザ
+Comment[kk]=DCOP интерфейсті Ұйымдастырғыш
 Comment[km]=កម្មវិធី​រៀបចំ​ដែល​មាន​ចំណុច​ប្រទាក់ DCOP
 Comment[lt]=Tvarkyklė su DCOP sąsaja
+Comment[mk]=Организатор со DCOP-интерфејс
 Comment[ms]=Penyusun dengan antara muka DCOP 
 Comment[nb]=Organizer med DCOP-grensesnitt
 Comment[nds]=Mötenkalenner mit DCOP-Koppelsteed
+Comment[ne]=DCOP इन्टरफेसको आयोजक
 Comment[nl]=Organizer met een DCOP-interface
 Comment[nn]=Organisator med eit DCOP-grensesnitt
 Comment[pl]=Organizator z interfejsem DCOP
Index: korganizer/korganizer_configcolors.desktop
===================================================================
--- korganizer/korganizer_configcolors.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ korganizer/korganizer_configcolors.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -14,7 +14,7 @@
 
 Name=Colors
 Name[af]=Kleure
-Name[ar]=ألوان
+Name[ar]=الألوان
 Name[az]=Rənglər
 Name[be]=Колеры
 Name[bg]=Цветове
@@ -43,13 +43,16 @@
 Name[is]=Litir
 Name[it]=Colori
 Name[ja]=色
+Name[kk]=Түстері
 Name[km]=ពណ៌
 Name[lt]=Spalvos
 Name[lv]=Krāsas
+Name[mk]=Бои
 Name[ms]=Warna
 Name[mt]=Kuluri
 Name[nb]=Farger
 Name[nds]=Klören
+Name[ne]=रङ
 Name[nl]=Kleuren
 Name[nn]=Fargar
 Name[pl]=Kolory
@@ -79,7 +82,7 @@
 Comment=KOrganizer Colors Configuration
 Comment[af]=KOrganizer kleure opstelling
 Comment[ar]=إعداد ألوان KOrganizer
-Comment[be]=Канфігурацыя колераў "K Арганізатара"
+Comment[be]=Канфігурацыя колераў KOrganizer
 Comment[bg]=Настройки на цветовете за KOrganizer
 Comment[bs]=KOrganizer podešavanje boja
 Comment[ca]=Configuració de colors a KOrganizer
@@ -102,11 +105,14 @@
 Comment[is]=KOrganizer litastillingar
 Comment[it]=Configurazione dei colori di Korganizer
 Comment[ja]=KOrganizer 色設定
+Comment[kk]=KOrganizer-дің түстер параметрлері
 Comment[km]=ការ​កំណត់​រចនាសម្ព័ន្ធ​ពណ៌ KOrganizer
 Comment[lt]=KOrganizer spalvų konfigūravimas
+Comment[mk]=Конфигурација на боите
 Comment[ms]=KOnfigurasi Warna KOrganizer 
 Comment[nb]=KOrganizer fargeoppsett
 Comment[nds]=Klören för KOrganizer instellen
+Comment[ne]=केडीई आयोजक रङ कन्फिगरेसन
 Comment[nl]=KOrganizer kleuren instellen
 Comment[nn]=KOrganizer, fargeinnstillingar
 Comment[pl]=Konfiguracja kolorów KOrganizera
@@ -153,9 +159,11 @@
 Keywords[ja]=korganizer,色
 Keywords[km]=korganizer,ពណ៌
 Keywords[lt]=korganizer,colors, spalvos
+Keywords[mk]=korganizer,colors,корганизатор,бои
 Keywords[ms]=korganizer,warna
 Keywords[nb]=korganizer,farger
 Keywords[nds]=KOrganizer,Klören
+Keywords[ne]=केडीई आयोजक, रङ
 Keywords[nl]=korganizer,colors,kleuren
 Keywords[nn]=korganizer,fargar
 Keywords[pl]=korganizer,kolory,kolor
Index: korganizer/koincidenceeditor.cpp
===================================================================
--- korganizer/koincidenceeditor.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ korganizer/koincidenceeditor.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -219,7 +219,7 @@
 
 QWidget *KOIncidenceEditor::addDesignerTab( const QString &uifile )
 {
-  kdDebug() << "Designer tab: " << uifile << endl;
+  kdDebug(5850) << "Designer tab: " << uifile << endl;
 
   KPIM::DesignerFields *wid = new KPIM::DesignerFields( uifile, 0 );
   mDesignerFields.append( wid );
@@ -286,13 +286,13 @@
 
 void KOIncidenceEditor::writeDesignerFields( Incidence *i )
 {
-  kdDebug() << "KOIncidenceEditor::writeDesignerFields()" << endl;
+  kdDebug(5850) << "KOIncidenceEditor::writeDesignerFields()" << endl;
 
   KCalStorage storage( i );
   KPIM::DesignerFields *fields;
   for( fields = mDesignerFields.first(); fields;
        fields = mDesignerFields.next() ) {
-    kdDebug() << "Write Field " << fields->title() << endl;
+    kdDebug(5850) << "Write Field " << fields->title() << endl;
     fields->save( &storage );
   }
 }
@@ -301,8 +301,8 @@
 void KOIncidenceEditor::setupEmbeddedURLPage( const QString &label,
                                  const QString &url, const QString &mimetype )
 {
-  kdDebug() << "KOIncidenceEditor::setupEmbeddedURLPage()" << endl;
-  kdDebug() << "label=" << label << ", url=" << url << ", mimetype=" << mimetype << endl;
+  kdDebug(5850) << "KOIncidenceEditor::setupEmbeddedURLPage()" << endl;
+  kdDebug(5850) << "label=" << label << ", url=" << url << ", mimetype=" << mimetype << endl;
   QFrame *topFrame = addPage( label );
   QBoxLayout *topLayout = new QVBoxLayout( topFrame );
 
@@ -318,11 +318,11 @@
 
 void KOIncidenceEditor::createEmbeddedURLPages( Incidence *i )
 {
-  kdDebug() << "KOIncidenceEditor::createEmbeddedURLPages()" << endl;
+  kdDebug(5850) << "KOIncidenceEditor::createEmbeddedURLPages()" << endl;
 
   if ( !i ) return;
   if ( !mEmbeddedURLPages.isEmpty() ) {
-kdDebug() << "mEmbeddedURLPages are not empty, clearing it!" << endl;
+    kdDebug(5850) << "mEmbeddedURLPages are not empty, clearing it!" << endl;
     mEmbeddedURLPages.setAutoDelete( true );
     mEmbeddedURLPages.clear();
     mEmbeddedURLPages.setAutoDelete( false );
@@ -342,8 +342,8 @@
   Attachment::List att = i->attachments();
   for ( Attachment::List::Iterator it = att.begin(); it != att.end(); ++it ) {
     Attachment *a = (*it);
-    kdDebug() << "Iterating over the attachments " << endl;
-    kdDebug() << "label=" << a->label() << ", url=" << a->uri() << ", mimetype=" << a->mimeType() << endl;
+    kdDebug(5850) << "Iterating over the attachments " << endl;
+    kdDebug(5850) << "label=" << a->label() << ", url=" << a->uri() << ", mimetype=" << a->mimeType() << endl;
     if ( a && a->showInline() && a->isUri() ) {
       // TODO: Allow more mime-types, but add security checks!
 /*      if ( a->mimeType() == "application/x-designer" ) {
Index: korganizer/korganizer_configdesignerfields.desktop
===================================================================
--- korganizer/korganizer_configdesignerfields.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ korganizer/korganizer_configdesignerfields.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -14,6 +14,7 @@
 
 Name=Custom Pages
 Name[af]=Pasmaak Blaaie
+Name[ar]=الصفحات المعتادة
 Name[bg]=Потребителски полета
 Name[br]=Pajennoù dre ziouer
 Name[bs]=Vlastite stranice
@@ -35,11 +36,14 @@
 Name[is]=Sérsniðnar síður
 Name[it]=Pagine personalizzate
 Name[ja]=カスタム ページ
+Name[kk]=Қосымша парақтар
 Name[km]=ទំព័រ​ផ្ទាល់​ខ្លួន
 Name[lt]=Pasirinkti puslapiai
+Name[mk]=Сопствени страници
 Name[ms]=Halaman Kebiasaan 
 Name[nb]=Tilpassede sider
 Name[nds]=Egen Sieden
+Name[ne]=अनुकूल पृष्ठ
 Name[nl]=Aangepaste pagina's
 Name[nn]=Tilpassa sider
 Name[pl]=Własne strony
@@ -59,6 +63,7 @@
 Name[zh_CN]=定制页
 Comment=Configure the Custom Pages
 Comment[af]=Stel die pasmaak blaaie op
+Comment[ar]=إعداد الصفحات المعتادة
 Comment[bg]=Настройки на потребителските полета
 Comment[br]=Kefluniañ ar pajennoù diouzhoc'h
 Comment[bs]=Podesite vlastite stranice
@@ -80,11 +85,14 @@
 Comment[is]=Stilla sérsniðnu síðurnar
 Comment[it]=Configura le pagine personalizzate
 Comment[ja]=カスタム ページの設定
+Comment[kk]=Қосымша парақтарды баптау
 Comment[km]=កំណត់​រចនាសម្ព័ន្ធ​ទំព័រ​ផ្ទាល់​ខ្លួន
 Comment[lt]=Konfigūruoti darbastalių skaičių ir pavadinimus
+Comment[mk]=Конфигурирајте ги сопствените страници
 Comment[ms]=Konfigurkan Halaman Langganan 
 Comment[nb]=Stille inn de tilpassede sidene
 Comment[nds]=Egen Sieden instellen
+Comment[ne]=अनुकूल पृष्ठ कन्फिगर गर्नुहोस्
 Comment[nl]=Hier kunt u de aangepaste pagina's instellen
 Comment[nn]=Set opp dei tilpassa sidene
 Comment[pl]=Konfiguracja własnych stron
@@ -125,9 +133,11 @@
 Keywords[ja]=korganizer、設定、設定,カスタムフィールド
 Keywords[km]=korganizer,កំណត់​រចនាសម្ព័ន្ធ,ការ​កំណត់,វាល​ផ្ទាល់​ខ្លួន
 Keywords[lt]=korganizer, configure, settings, custom fields, konfigūruoti, nustatymai, pasirinkti laukai
+Keywords[mk]=korganizer, configure, settings, custom fields, корганизатор, конфигурација, конфигурирање, поставувања, сопствени полиња
 Keywords[ms]=korganizer, konfigur, seting, medan kebiasaan
 Keywords[nb]=kaddressbook, sette opp, innstillinger, tilpassede felter
 Keywords[nds]=KOrganizer,Instellen,egen Feller
+Keywords[ne]=केडीई आयोजक, कन्फिगर, सेटिङ, अनुकूल फिल्ड
 Keywords[nl]=korganizer, configuratie, instellingen, aangepaste velden
 Keywords[nn]=korganizer, oppsett, innstillingar, tilpassa felt
 Keywords[pl]=korganizer,konfiguracja,ustawienia,własne pola
Index: korganizer/kolistview.cpp
===================================================================
--- korganizer/kolistview.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ korganizer/kolistview.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -112,17 +112,19 @@
   mItem->setPixmap(0, eventPxmp);
 
   mItem->setText( 3,e->dtStartDateStr());
-  if (e->doesFloat()) mItem->setText(4, "---"); else mItem->setText( 4, e->dtStartTimeStr() );
+  mItem->setSortKey( 3, e->dtStart().toString(Qt::ISODate));
+  if (e->doesFloat()) mItem->setText(4, "---"); else {
+    mItem->setText( 4, e->dtStartTimeStr() );
+    mItem->setSortKey( 4,e->dtStart().time().toString(Qt::ISODate));
+  }
   mItem->setText( 5,e->dtEndDateStr());
-  if (e->doesFloat()) mItem->setText(6, "---"); else mItem->setText( 6, e->dtEndTimeStr() );
+  mItem->setSortKey( 5, e->dtEnd().toString(Qt::ISODate));
+  if (e->doesFloat()) mItem->setText(6, "---"); else {
+    mItem->setText( 6, e->dtEndTimeStr() );
+    mItem->setSortKey( 6, e->dtEnd().time().toString(Qt::ISODate));
+  }
   mItem->setText( 7,e->categoriesStr());
 
-  QString key = e->dtStart().toString(Qt::ISODate);
-  mItem->setSortKey(3,key);
-
-  key = e->dtEnd().toString(Qt::ISODate);
-  mItem->setSortKey(5,key);
-
   return true;
 }
 
@@ -155,6 +157,7 @@
       mItem->setText(4,"---");
     } else {
       mItem->setText(4,t->dtStartTimeStr());
+      mItem->setSortKey( 4, t->dtStart().time().toString(Qt::ISODate) );
     }
   } else {
     mItem->setText(3,"---");
@@ -163,10 +166,12 @@
 
   if (t->hasDueDate()) {
     mItem->setText(5,t->dtDueDateStr());
+    mItem->setSortKey( 5, t->dtDue().toString(Qt::ISODate) );
     if (t->doesFloat()) {
       mItem->setText(6,"---");
     } else {
       mItem->setText(6,t->dtDueTimeStr());
+      mItem->setSortKey( 6, t->dtDue().time().toString(Qt::ISODate) );
     }
   } else {
     mItem->setText(5,"---");
@@ -174,21 +179,22 @@
   }
   mItem->setText(7,t->categoriesStr());
 
-  mItem->setSortKey(5,t->dtDue().toString(Qt::ISODate));
 
   return true;
 }
 
-bool KOListView::ListItemVisitor::visit(Journal *t)
+bool KOListView::ListItemVisitor::visit( Journal *t )
 {
   static const QPixmap jrnalPxmp = KOGlobals::self()->smallIcon( "journal" );
-  mItem->setPixmap(0,jrnalPxmp);
-  // Just use the first line
-  mItem->setText( 0, t->description().section( "\n", 0, 0 ) );
+  mItem->setPixmap( 0, jrnalPxmp );
+  if ( t->summary().isEmpty() ) {
+    mItem->setText( 0, t->description().section( "\n", 0, 0 ) );
+  } else {
+    mItem->setText( 0, t->summary() );
+  }
   mItem->setText( 3, t->dtStartDateStr() );
+  mItem->setSortKey( 3, t->dtStart().toString( Qt::ISODate ) );
 
-  mItem->setSortKey( 3, t->dtStart().toString(Qt::ISODate) );
-
   return true;
 }
 
Index: korganizer/korganizer_configgroupautomation.desktop
===================================================================
--- korganizer/korganizer_configgroupautomation.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ korganizer/korganizer_configgroupautomation.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -34,11 +34,14 @@
 Name[is]=Hópsjálfvirkni
 Name[it]=Automazione gruppi
 Name[ja]=グループ自動化
+Name[kk]=Топтың біріккен жұмысы
 Name[km]=ស្វ័យប្រតិកម្ម​ក្រុម
 Name[lt]=Grupių automatizavimas
+Name[mk]=Автоматизација на групи
 Name[ms]=Automasi Kumpulan
 Name[nb]=Gruppeautomat
 Name[nds]=Koppel-Akschonen
+Name[ne]=समूह स्वचालिकरण
 Name[nl]=Groepautomatisering
 Name[nn]=Gruppeautomatisering
 Name[pl]=Automatyzacja pracy grupowej
@@ -79,11 +82,14 @@
 Comment[is]=Stillingar KOrganizer hópsjálfvirkni
 Comment[it]=Configurazione automazione gruppi di KOrganizer
 Comment[ja]=KOrganizer グループ自動化設定
+Comment[kk]=KOrganizer топтық жұмысының параметрлері
 Comment[km]=ការ​កំណត់​រចនាសម្ព័ន្ធ​ស្វ័យប្រតិកម្ម​ក្រុម​របស់ KOrganizer
 Comment[lt]=KOrganizer grupių automatizavimo konfigūravimas
+Comment[mk]=Конфигурација на автоматизација на групи
 Comment[ms]=Konfigurasi Automasi Kumpulan KOrganizer 
 Comment[nb]=KOrganizer oppsett for gruppeautomat
 Comment[nds]=Automaatsche Koppel-Akschonen för KOrganizer instellen
+Comment[ne]=केडीई आयोजक समूह स्वचालिकरण कन्फिगरेसन
 Comment[nl]=KOrganizer groepautomatisering instellen
 Comment[nn]=KOrganizer, innstillingar for gruppeautomatisering
 Comment[pl]=Konfiguracja automatyzacji pracy grupowej dla KOrganizera
@@ -126,9 +132,11 @@
 Keywords[ja]=korganizer,グループ,自動化
 Keywords[km]=korganizer,ក្រុម,ស្វ័យប្រតិកម្ម
 Keywords[lt]=korganizer,group,automation, grupės,automatizavimas
+Keywords[mk]=korganizer,group,automation,корганизатор,група,групи,автоматизација
 Keywords[ms]=korganizer,kumpulan,automasi
 Keywords[nb]=korganizer,gruppe,automat,automatisering
 Keywords[nds]=KOrganizer,Koppel,automaatsch,Akschoon
+Keywords[ne]=केडीई आयोजक, समूह, स्वचालिकरण
 Keywords[nl]=korganizer,groep,automatisering
 Keywords[nn]=korganizer,gruppe,automatisering
 Keywords[pl]=korganizer,grupy,praca grupowa,automatyzacja
Index: korganizer/korganizer_configviews.desktop
===================================================================
--- korganizer/korganizer_configviews.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ korganizer/korganizer_configviews.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -14,6 +14,7 @@
 
 Name=Views
 Name[af]=Aansigte
+Name[ar]=العروض
 Name[be]=Выгляды
 Name[bg]=Изгледи
 Name[br]=Gweloù
@@ -38,11 +39,14 @@
 Name[is]=Sýn
 Name[it]=Viste
 Name[ja]=ビューア
+Name[kk]=Көріністері
 Name[km]=ទិដ្ឋភាព
 Name[lt]=Žiūrikliai
+Name[mk]=Приказ
 Name[ms]=Paparan
 Name[nb]=Visninger
 Name[nds]=Ansichten
+Name[ne]=दृश्य
 Name[nl]=Weergaven
 Name[nn]=Visingar
 Name[pl]=Widoki
@@ -86,11 +90,14 @@
 Comment[is]=Stillingar KOrganizer sýna
 Comment[it]=Configurazione viste di KOrganizer
 Comment[ja]=KOrganizer ビューア設定
+Comment[kk]=KOrganizer-дің көрінісінің параметрлері
 Comment[km]=ការ​កំណត់​រចនាសម្ព័ន្ធ​ទិដ្ឋភាព​របស់ KOrganizer
 Comment[lt]=KOrganizer žiūriklių konfigūravimas
+Comment[mk]=Конфигурација на приказот
 Comment[ms]=Konfigurasi Paparan KOrganizer 
 Comment[nb]=KOrganizer visningsoppsett
 Comment[nds]=Ansichteninstellen för KOrganizer
+Comment[ne]=केडीई आयोजक दृश्य कन्फिगरेसन
 Comment[nl]=KOrganizer weergave instellen
 Comment[nn]=KOrganizer, visingsinnstillingar
 Comment[pl]=Konfiguracja widoków KOrganizera
@@ -133,9 +140,11 @@
 Keywords[it]=korganizer,viste
 Keywords[km]=korganizer,ទិដ្ឋភាព
 Keywords[lt]=korganizer,view,žiūrikliai
+Keywords[mk]=korganizer,view,корганизатор,приказ
 Keywords[ms]=korganizer,paparan
 Keywords[nb]=korganizer,visning
 Keywords[nds]=KOrganizer,Ansichten
+Keywords[ne]=केडीई आयोजक, दृश्य
 Keywords[nl]=korganizer,weergave
 Keywords[nn]=korganizer,vising
 Keywords[pl]=korganizer,widok
Index: korganizer/korganizer_configmain.desktop
===================================================================
--- korganizer/korganizer_configmain.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ korganizer/korganizer_configmain.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -37,11 +37,14 @@
 Name[is]=Persónulegt
 Name[it]=Personale
 Name[ja]=個人設定
+Name[kk]=Дербес
 Name[km]=ផ្ទាល់​ខ្លួន
 Name[lt]=Suasmeninimas
+Name[mk]=Лично
 Name[ms]=Peribadi
 Name[nb]=Personlig
 Name[nds]=Persöönlich
+Name[ne]=व्यक्तिगत
 Name[nl]=Persoonlijk
 Name[nn]=Personleg
 Name[pl]=Osobiste
@@ -86,11 +89,14 @@
 Comment[is]=Aðalstillingar KOrganizer
 Comment[it]=Configurazione principale di KOrganizer
 Comment[ja]=KOrganizer 主要設定
+Comment[kk]=KOrganizer-дің негізгі параметрлері
 Comment[km]=ការ​កំណត់​រចនាសម្ព័ន្ធ​សំខាន់ៗ​របស់ KOrganizer
 Comment[lt]=KOrganizer bendroji konfigūravimas
+Comment[mk]=Главна конфигурација на КОрганизатор
 Comment[ms]=Konfigurasi Utama KOrganizer 
 Comment[nb]=KOrganizer hovedoppsett
 Comment[nds]=Hööftinstellen för KOrganizer
+Comment[ne]=केडीई आयोजक मुख्य कन्फिगरेसन
 Comment[nl]=KOrganizer algemene instellingen
 Comment[nn]=KOrganizer, hovudinnstillingar
 Comment[pl]=Główna konfiguracja KOrganizera
@@ -133,9 +139,11 @@
 Keywords[ja]=korganizer,メイン,個人
 Keywords[km]=korganizer,សំខាន់,ផ្ទាល់​ខ្លួន
 Keywords[lt]=korganizer,main,personal,pagrindinis,asmeninis,bendroji
+Keywords[mk]=korganizer,main,personal,корганизатор,главно,лично
 Keywords[ms]=korganizer,utama,peribadi
 Keywords[nb]=korganizer,hoved,personlig
 Keywords[nds]=KOrganizer,hööft,persöönlich,instellen,hööftinstellen
+Keywords[ne]=केडीई आयोजक, मुख्य, व्यक्तिगत
 Keywords[nl]=korganizer,algemeen,persoonlijk
 Keywords[nn]=korganizer,hovud,personleg
 Keywords[pl]=korganizer,główny,główna,osobisty,osobista,osobiste
Index: konsolekalendar/konsolekalendar.desktop
===================================================================
--- konsolekalendar/konsolekalendar.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 653179)
+++ konsolekalendar/konsolekalendar.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 653179)
@@ -7,9 +7,11 @@
 Name[hi]=कंसोल-कैलेंडर
 Name[hu]=Konsole-naptár
 Name[ja]=コンソールカレンダー
+Name[mk]=КонзоленКалендар
 Name[ms]=Kalendar Konsole
 Name[nb]=KonsoleKalender
 Name[nds]=Konsole-Kalenner
+Name[ne]=कन्सोल क्यालेन्डर
 Name[nl]=Konsole-agenda
 Name[nn]=KonsoleKalender
 Name[ro]=Calendar de consolă
Index: mimelib/dwstring.cpp
===================================================================
--- mimelib/dwstring.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 648291)
+++ mimelib/dwstring.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 648291)
@@ -1276,12 +1274,12 @@
         assert(newBuf != 0);
         if (newBuf != 0) {
             to = newBuf;
-            from = mRep->mBuffer + mStart;
-            for (i=0; i < pos1; ++i) *to++ = *from++;
-            from = aBuf;
-            for (i=0; i < len2; ++i) *to++ = *from++;
-            from = mRep->mBuffer + mStart + pos1 + len1;
-            for (i=0; i < mLength - pos1 - len1; ++i) *to++ = *from++;
+            memcpy(to, mRep->mBuffer + mStart, pos1);
+            to += pos1;
+            memcpy(to, aBuf, len2);
+            to += len2;
+            memcpy(to, mRep->mBuffer + mStart + pos1 + len1, mLength - pos1 - len1);
+            to += mLength - pos1 - len1;
             *to = 0;
             DwStringRep* rep = new DwStringRep(newBuf, size);
             assert(rep != 0);

