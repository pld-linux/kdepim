Index: akregator/ChangeLog
===================================================================
--- akregator/ChangeLog	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ akregator/ChangeLog	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -2,6 +2,14 @@
 ===================
 (c) 2004-2006 the Akregator authors.
 
+Changes after 1.2.6:
+-----------------------------
+
+Bug fixes:
+
+ 2007/02/24 fix crash when using "Load the full website when reading articles" and an error (e.g. 404) 
+            is returned (2nd try) (#126812) -fo 
+
 Changes after 1.2.5:
 -----------------------------
 
Index: akregator/src/articleviewer.cpp
===================================================================
--- akregator/src/articleviewer.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ akregator/src/articleviewer.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -160,6 +160,10 @@
 ArticleViewer::ArticleViewer(QWidget *parent, const char *name)
     : Viewer(parent, name), m_htmlFooter(), m_currentText(), m_node(0), m_viewMode(NormalView)
 {
+    setJScriptEnabled(false);
+    setJavaEnabled(false);
+    setPluginsEnabled(false);
+    
     m_showSummaryVisitor = new ShowSummaryVisitor(this);
     setXMLFile(locate("data", "akregator/articleviewer.rc"), true);
 
Index: akregator/src/mk4storage/akregator_mk4storage_plugin.desktop
===================================================================
--- akregator/src/mk4storage/akregator_mk4storage_plugin.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ akregator/src/mk4storage/akregator_mk4storage_plugin.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -23,6 +23,7 @@
 Name[ms]=Hujung belakang storan Metakit 
 Name[nb]=Metakit lagringsbakstykke
 Name[nds]=Metakit-Archivmoduul
+Name[ne]=मेटाकिट भण्डारण ब्याकइन्ड
 Name[nl]=Metakit-opslagbackend
 Name[nn]=Metakit-lagringsbakstykke
 Name[pl]=System przechowywania Metakit
@@ -39,6 +40,7 @@
 X-KDE-Library=libakregator_mk4storage_plugin
 Comment=Plugin for Akregator
 Comment[af]=Inprop module vir Akregator
+Comment[be]=Утулка для Akregator
 Comment[bg]=Приставка за Akregator
 Comment[br]=Lugent evit Akregator
 Comment[ca]=Endollable per a Akregator
@@ -60,9 +62,11 @@
 Comment[ja]=Akregator 用プラグイン
 Comment[km]=កម្មវិធី​ជំនួយ Akregator
 Comment[lt]=Akregator skirtas priedas
+Comment[mk]=Приклучок за Akregator
 Comment[ms]=Plugin untuk Akregator
 Comment[nb]=Programtillegg for Akregator
 Comment[nds]=Moduul för Akregator
+Comment[ne]=एक्रिगेटरका लागि प्लगइन
 Comment[nl]=Plugin voor Akregator
 Comment[nn]=Programtillegg til Akregator
 Comment[pl]=Wtyczka dla Akregatora
Index: akregator/src/akregator_part.cpp
===================================================================
--- akregator/src/akregator_part.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ akregator/src/akregator_part.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -513,13 +513,21 @@
     {
         if (!factory())
         {
-            kdDebug() << "Akregator::Part::mergePart(): factory() returns NULL" << endl;
-            return false;
+          if (m_mergedPart)
+            removeChildClient(m_mergedPart);
+          else
+            insertChildClient(part);
         }
-        if (m_mergedPart)
+        else
+        {
+          if (m_mergedPart) {
             factory()->removeClient(m_mergedPart);
-        if (part)
+            if (childClients()->containsRef(m_mergedPart))
+              removeChildClient(m_mergedPart);
+          }
+          if (part)
             factory()->addClient(part);
+        }
 
         m_mergedPart = part;
     }
Index: akregator/src/akregator_view.h
===================================================================
--- akregator/src/akregator_view.h	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ akregator/src/akregator_view.h	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -277,13 +277,9 @@
             void disconnectFromFeedList(FeedList* feedList);
 
             void updateTagActions();
-            
+
         protected slots:
 
-            /** this is called by the ctor, does init steps which need a properly created view and part */
-
-            void delayedInit();
-
             void connectFrame(Frame *);
 
             void setTabIcon(const QPixmap&);
Index: akregator/src/pageviewer.cpp
===================================================================
--- akregator/src/pageviewer.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ akregator/src/pageviewer.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -356,15 +356,22 @@
 
 void PageViewer::urlSelected(const QString &url, int button, int state, const QString &_target, KParts::URLArgs args)
 {
-    if (button == LeftButton)
+    if (url.startsWith(QString::fromLatin1( "javascript:" ), /*case-sensitive=*/false) )
     {
-        m_url = completeURL(url);
-        browserExtension()->setURLArgs(args); 
-        slotOpenLinkInThisTab();
+        KHTMLPart::urlSelected(url,button,state,_target,args);
     }
     else
     {
-        Viewer::urlSelected(url,button,state,_target,args);
+        if (button == LeftButton)
+        {
+            m_url = completeURL(url);
+            browserExtension()->setURLArgs(args); 
+            slotOpenLinkInThisTab();
+        }
+        else
+        {
+            Viewer::urlSelected(url,button,state,_target,args);
+        }
     }
 }
 
Index: akregator/src/viewer.cpp
===================================================================
--- akregator/src/viewer.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ akregator/src/viewer.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -51,10 +51,7 @@
     : KHTMLPart(parent, name), m_url(0)
 {
     setZoomFactor(100);
-    setJScriptEnabled(false);
-    setJavaEnabled(true);
     setMetaRefreshEnabled(true);
-    setPluginsEnabled(true);
     setDNDEnabled(true);
     setAutoloadImages(true);
     setStatusMessagesEnabled(true);
Index: akregator/src/akregator_plugin.desktop
===================================================================
--- akregator/src/akregator_plugin.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ akregator/src/akregator_plugin.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -3,6 +3,7 @@
 X-KDE-ServiceType=Akregator/Plugin
 Comment=Plugin for Akregator
 Comment[af]=Inprop module vir Akregator
+Comment[be]=Утулка для Akregator
 Comment[bg]=Приставка за Akregator
 Comment[br]=Lugent evit Akregator
 Comment[ca]=Endollable per a Akregator
@@ -24,9 +25,11 @@
 Comment[ja]=Akregator 用プラグイン
 Comment[km]=កម្មវិធី​ជំនួយ Akregator
 Comment[lt]=Akregator skirtas priedas
+Comment[mk]=Приклучок за Akregator
 Comment[ms]=Plugin untuk Akregator
 Comment[nb]=Programtillegg for Akregator
 Comment[nds]=Moduul för Akregator
+Comment[ne]=एक्रिगेटरका लागि प्लगइन
 Comment[nl]=Plugin voor Akregator
 Comment[nn]=Programtillegg til Akregator
 Comment[pl]=Wtyczka dla Akregatora
Index: akregator/src/akregator.desktop
===================================================================
--- akregator/src/akregator.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ akregator/src/akregator.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -1,6 +1,7 @@
 [Desktop Entry]
 Encoding=UTF-8
 Name=Akregator
+Name[ne]=एक्रिगेटर
 Exec=akregator %i %m -caption "%c"
 Icon=akregator
 Type=Application
@@ -31,6 +32,7 @@
 GenericName[ms]= Pembaca Suapan RSS 
 GenericName[nb]=Leser for RSS-kanal
 GenericName[nds]=Kieker för RSS-Mellenströöm
+GenericName[ne]=आरएसएस फिड रिडर
 GenericName[nl]=RSS-feedlezer
 GenericName[nn]=RSS-lesar
 GenericName[pl]=Program do przeglądania kanałów RSS
@@ -72,6 +74,7 @@
 Comment[ms]=Pengagregat RSS untuk KDE
 Comment[nb]=En RSS-oppsamler for KDE
 Comment[nds]=Tosamensteller för RSS-Mellenströöm vun KDE
+Comment[ne]=केडीई का लागि एउटा आरएसएस एक्रिगेटर
 Comment[nl]=Een RSS-agregator voor KDE
 Comment[nn]=Ein RSS-lesar for KDE
 Comment[pl]=Program podsumowujący kanały RSS dla KDE
Index: akregator/src/eventsrc
===================================================================
--- akregator/src/eventsrc	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ akregator/src/eventsrc	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -2,6 +2,7 @@
 IconName=akregator
 Comment=Akregator
 Comment[da]=Akregator Plugin
+Comment[ne]=एक्रिगेटर
 Comment[sv]=aKregator
 
 [feed_added]
@@ -31,6 +32,7 @@
 Name[ms]=Suapan ditambah
 Name[nb]=Kanal lagt til
 Name[nds]=Narichtenstroom toföögt
+Name[ne]=फिड थपियो
 Name[nl]=Feed toegevoegd
 Name[nn]=Kanal lagd til
 Name[pl]=Kanał dodany
@@ -73,6 +75,7 @@
 Comment[ms]=Suapan baru ditambah dari jauh kepada Akregator
 Comment[nb]=En ny kanal ble lagt til Akgregator utenfra 
 Comment[nds]=En nieg Stroom wöör Akregator vun buten toföögt
+Comment[ne]=एक्रिगेटरमा एउटा नयाँ फिड टाढाबाट थपिएको थियो
 Comment[nl]=Er was extern een nieuwe feed toegevoegd aan Akregator
 Comment[nn]=Ein ny kanal vart lagd til Akregator
 Comment[pl]=Nowy kanał został zdalnie dodany do Akregatora
@@ -95,6 +98,8 @@
 [new_articles]
 Name=New Articles
 Name[af]=Nuwe Artikels
+Name[ar]=المقالات الجديدة
+Name[be]=Новыя артыкулы
 Name[bg]=Нови статии
 Name[br]=Pennadoù nevez
 Name[ca]=Nous articles
@@ -117,9 +122,11 @@
 Name[ja]=新規記事
 Name[km]=អត្ថបទ​ថ្មី
 Name[lt]=Nauji straipsniai
+Name[mk]=Нови написи
 Name[ms]=Artikel Baru
 Name[nb]=Nye artikler
 Name[nds]=Niege Artikeln
+Name[ne]=नयाँ लेख
 Name[nl]=Nieuwe artikelen
 Name[nn]=Nye artiklar
 Name[pl]=Nowe artykuły
@@ -140,6 +147,7 @@
 Name[zh_TW]=新文章
 Comment=New articles were fetched
 Comment[af]=Nuwe artikels was afgelaai
+Comment[ar]=تمّ جلب المقالات الجديدة
 Comment[bg]=Пристигнали са нови статии
 Comment[ca]=S'han obtingut nous articles
 Comment[cs]=Byly staženy nové články
@@ -161,9 +169,11 @@
 Comment[ja]=新規記事を取得しました
 Comment[km]=បាន​ប្រមូល​អត្ថបទ​ថ្មី
 Comment[lt]=Nauji straipsniai parsiųsti
+Comment[mk]=Беа земени нови написи
 Comment[ms]=Artikel baru telah dikutip
 Comment[nb]=Nye artikler ble hentet
 Comment[nds]=Niege Artikeln wöörn haalt
+Comment[ne]=नयाँ लेख तानिएका थिय
 Comment[nl]=Nieuw artikelen zijn opgehaald
 Comment[nn]=Nye artiklar vart henta
 Comment[pl]=Pobrano nowe artykuły
Index: akregator/src/akregator_view.cpp
===================================================================
--- akregator/src/akregator_view.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ akregator/src/akregator_view.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -367,20 +367,9 @@
     }
 
     QTimer::singleShot(1000, this, SLOT(slotDeleteExpiredArticles()) );
-    QTimer::singleShot(0, this, SLOT(delayedInit()));
+    m_part->mergePart(m_articleViewer);
 }
 
-void View::delayedInit()
-{
-    // HACK, FIXME:
-    // for some reason, m_part->factory() is NULL at startup of kontact,
-    // and thus the article viewer GUI can't be merged when creating the view.
-    // Even the delayed init didn't help. Well, we retry every half a second until
-    // it works. This is kind of creative, but a dirty hack nevertheless.
-    if ( !m_part->mergePart(m_articleViewer) )
-        QTimer::singleShot(500, this, SLOT(delayedInit()));
-}
-
 void View::slotSettingsChanged()
 {
     // if tagging is hidden, show only feed list
@@ -695,8 +684,6 @@
     emit setProgress(f->progress());
     emit setStatusBarText(f->statusText());
 
-    m_part->mergePart(m_articleViewer);
-
     if (f->part() == m_part)
         m_part->mergePart(m_articleViewer);
     else
Index: kmobile/libkmobile.desktop
===================================================================
--- kmobile/libkmobile.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kmobile/libkmobile.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -29,6 +29,7 @@
 Name[ms]=Pemacu Perkakasan Tahap Rendah Peranti Mudah Alih KDE 
 Name[nb]=KDE lavnivå maskinvaredriver for mobile enheter
 Name[nds]=Sietstoop-Driever för Mobilreedschappen
+Name[ne]=केडीई मोबाइल यन्त्रको न्यूनस्तर हार्डवेयर ड्राइभर
 Name[nl]=Hardware-stuurprogramma voor mobiele apparaten
 Name[nn]=Lågnivå maskinvaredrivar for mobileiningar i KDE
 Name[pl]=Niskopoziomowy sterownik sprzętu urządzenia przenośnego dla KDE
Index: kmobile/devices/gnokii/libkmobile_gnokii.desktop
===================================================================
--- kmobile/devices/gnokii/libkmobile_gnokii.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kmobile/devices/gnokii/libkmobile_gnokii.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -2,6 +2,7 @@
 Encoding=UTF-8
 Name=Mobile Phone or Organizer (gnokii)
 Name[af]=Selfoon of Digitale Dagboek (gnokii)
+Name[ar]=الهاتف النقّال أو المنظم (gnokii)
 Name[be]=Мабільны тэлефон ці арганізатар (gnokii)
 Name[bg]=Мобилни телефони или организатори (gnokii)
 Name[bs]=Mobilni telefon ili organizer (gnokii)
@@ -31,6 +32,7 @@
 Name[ms]=Telefon Bimbit atau Penyusun  (gnokii)
 Name[nb]=Mobiltelefon eller PDA (gnokii)
 Name[nds]=Mobiltelefoon oder Handreekner (gnokii)
+Name[ne]=मोबाइल फोन वा आयोजक (जिनोकी)
 Name[nl]=Mobiele telefoon of Organizer (gnokii)
 Name[nn]=Mobiltelefon eller organisator (gnokii)
 Name[pl]=Telefon komórkowy lub organizer (gnokii)
@@ -77,6 +79,7 @@
 Comment[ms]=Pemacu ini menyokong banyak NOKIA dan telefon bimbit lain melalui pustaka gnokii 
 Comment[nb]=Denne driveren støtter mange NOKIA og andre mobiltelefoner via gnokii-biblioteket
 Comment[nds]=Disse Driever ünnerstütt vele Nokia- un anner Mobiltelefonen över de gnokii-Bibliotheek
+Comment[ne]=यो ड्राइभरले जिनोकी लाइब्रेरीबाट धेरै नोकिया र अन्य मोबाइल फोन समर्थन गर्छ
 Comment[nl]=Dit stuurprogramma biedt ondersteuning voor veel Nokia- en andere mobiele telefoons via de gnokii-bibliotheek
 Comment[nn]=Denne drivaren støttar mange NOKIA og andre mobiltelefonar via gnokii-biblioteket
 Comment[pl]=Ten sterownik obsługuje wiele telefonów komórkowychNokia i innych za pomocą biblioteki gnokii
Index: kmobile/devices/skeleton/libkmobile_skeleton.desktop
===================================================================
--- kmobile/devices/skeleton/libkmobile_skeleton.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kmobile/devices/skeleton/libkmobile_skeleton.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -30,6 +30,7 @@
 Name[ms]=Peranti Rangka
 Name[nb]=Ramme-enhet
 Name[nds]=Skeleton-Reedschap
+Name[ne]=ढाँचा यन्त्र
 Name[nl]=Voorbeeldapparaat
 Name[nn]=Skjeletteining
 Name[pl]=Urządzenie szkieletowe
@@ -77,6 +78,7 @@
 Comment[ms]=Peranti Rangka Mudah Alih
 Comment[nb]=Mobil ramme-enhet
 Comment[nds]=Mobil Skeleton-Reedschap
+Comment[ne]=मोबाइल ढाँचा यन्त्र
 Comment[nl]=Mobiel voorbeeldapparaat
 Comment[nn]=Mobil skjeletteining
 Comment[pl]=Szkieletowe urządzenie przenośne
Index: kmobile/devices/gammu/libkmobile_gammu.desktop
===================================================================
--- kmobile/devices/gammu/libkmobile_gammu.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kmobile/devices/gammu/libkmobile_gammu.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -2,6 +2,7 @@
 Encoding=UTF-8
 Name=Mobile Phone or Organizer (gammu)
 Name[af]=Selfoon of Digitale Dagboek (gammu)
+Name[ar]=الهاتف النقّال أو المنظم (gammu)
 Name[be]=Мабільны тэлефон ці арганізатар (gammu)
 Name[bg]=Мобилни телефони или организатори (gammu)
 Name[bs]=Mobilni telefon ili organizer (gammu)
@@ -31,6 +32,7 @@
 Name[ms]=Telefon Bimbit atau  Penyusun (gammu)
 Name[nb]=Mobiltelefon eller PDA (gammu)
 Name[nds]=Mobiltelefoon oder Handreekner (gammu)
+Name[ne]=मोबाइल फोन वा आयोजक (गामु)
 Name[nl]=Mobiele telefoon of Organizer (gammu)
 Name[nn]=Mobiltelefon eller organisator (gammu)
 Name[pl]=Telefon komórkowy lub organizer (gammu)
@@ -77,6 +79,7 @@
 Comment[ms]=Pemacu ini menyokong banyak NOKIA dan telefon bimbit lain melalui pustaka gammu
 Comment[nb]=Denne driveren støtter mange NOKIA og andre mobiltelefoner via gammu-biblioteket
 Comment[nds]=Disse Driever ünnerstütt vele Nokia- un anner Mobiltelefonen över de gammu-Bibliotheek
+Comment[ne]=यो ड्राइभरले गामु लाइब्रेरीबाट धेरै नोकिया र अन्य मोबाइल फोन समर्थन गर्छ
 Comment[nl]=Dit stuurprogramma biedt ondersteuning voor veel Nokia- en andere mobiele telefoons via de gammu-bibliotheek
 Comment[nn]=Denne drivaren støttar mange NOKIA og andre mobiltelefonar via gammu-biblioteket
 Comment[pl]=Ten sterownik obsługuje wiele telefonów komórkowychNokia i innych za pomocą biblioteki gammu
Index: kmobile/devices/digicam/libkmobile_digicam.desktop
===================================================================
--- kmobile/devices/digicam/libkmobile_digicam.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kmobile/devices/digicam/libkmobile_digicam.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -28,9 +28,11 @@
 Name[ja]=デジタルカメラ
 Name[km]=ម៉ាស៊ីន​ថត​រូប​ឌីជីថល
 Name[lt]=Skaitmeninė kamera
+Name[mk]=Дигитална камера
 Name[ms]=Kamera Digital 
 Name[nb]=Digitalkamera
 Name[nds]=Digitaalkamera
+Name[ne]=डिजिटल क्यामेरा
 Name[nl]=Digitale camera
 Name[nn]=Digitalt kamera
 Name[pa]=ਡਿਜ਼ੀਟਲ ਕੈਮਰਾ
@@ -77,9 +79,11 @@
 Comment[ja]=本ドライバは多種のデジタルカメラをサポートします
 Comment[km]=កម្មវិធី​បញ្ជា​នេះ​គាំទ្រ​ម៉ាស៊ីន​ថត​រូប​ឌីជីថល​ជាច្រើន
 Comment[lt]=Ši tvarkyklė palaiko daugelį skaitmeninių kamerų
+Comment[mk]=Овој управувач поддржува многу дигитални камери
 Comment[ms]=Pemacu ini menyokong banyak kamera digital 
 Comment[nb]=Denne driveren støtter mange digitalkameraer
 Comment[nds]=Ein Driever, de vele Digitaalkameras ünnerstütt
+Comment[ne]=यो ड्राइभरले धेरै डिजिटल क्यामेरा समर्थन गर्छ
 Comment[nl]=Dit stuurprogramma biedt ondersteuning voor veel camera's
 Comment[nn]=Denne drivaren støttar mange digitale kamera
 Comment[pl]=Ten sterownik obsługuje wiele aparatów cyfrowych
Index: kmobile/kmobile.desktop
===================================================================
--- kmobile/kmobile.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kmobile/kmobile.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -9,6 +9,7 @@
 Name=KMobile
 Name[cy]=KSymudol
 Name[hi]=के-मोबाइल
+Name[ne]=केडीई मोबाइल
 Name[nn]=KMobil
 Name[sv]=Kmobile
 Name[ta]=கேநடமாடும் தொலைபேசி
@@ -16,7 +17,8 @@
 
 GenericName=Manage Mobile Devices
 GenericName[af]=Bestuur draagbare toestelle
-GenericName[be]=Кіраваньне мабільнымі прыладамі
+GenericName[ar]=تسيير الأجهزة النقّالة
+GenericName[be]=Кіраванне мабільнымі прыладамі
 GenericName[bg]=Мобилни устройства
 GenericName[br]=Merañ an trobarhelloù lem-laka
 GenericName[bs]=Upravljajte mobilnim uređajima
@@ -42,9 +44,11 @@
 GenericName[ja]=モバイル機器の管理
 GenericName[km]=គ្រប់គ្រង​ឧបករណ៍​ចល័ត
 GenericName[lt]=Mobiliųjų įrenginių tvarkymas
+GenericName[mk]=Менаџирање мобилни уреди
 GenericName[ms]=Menguruskan Peranti Mudah Alih
 GenericName[nb]=Håndtere mobile enheter
 GenericName[nds]=Mobilreedschappen plegen
+GenericName[ne]=मोबाइल यन्त्र व्यवस्थापन गर्नुहोस्
 GenericName[nl]=Mobiele apparaten beheren
 GenericName[nn]=Handtera mobileiningar
 GenericName[pl]=Zarządzanie urządzeniami przenośnymi
@@ -67,7 +71,7 @@
 
 Comment=A KDE Mobile Devices Manager
 Comment[af]='n KDE draagbare toestel bestuurder
-Comment[be]=Кіраваньне мабільнымі прыладамі KDE
+Comment[be]=Кіраванне мабільнымі прыладамі KDE
 Comment[bg]=Управление на мобилни устройства
 Comment[bs]=KDE upravitelj mobilnim uređajima
 Comment[ca]=Un gestor de KDE per a dispositius mòbils
@@ -92,9 +96,11 @@
 Comment[ja]=KDE モバイル機器マネージャ
 Comment[km]=កម្មវិធី​គ្រប់គ្រង​ឧបករណ៍​ចល័ត KDE
 Comment[lt]=KDE mobiliųjų įrenginių tvarkyklė
+Comment[mk]=Менаџер на мобилни уреди во KDE
 Comment[ms]=Pengurus Peranti Mudah Alih   KDE 
 Comment[nb]=En KDE-håndterer for mobile enheter
 Comment[nds]=En Pleger för Mobilreedschappen
+Comment[ne]=केडीई मोबाइल यन्त्र प्रबन्धक
 Comment[nl]=Beheer van mobiele apparaten in KDE
 Comment[nn]=Ein einingshandterar for mobiltelefon i KDE
 Comment[pl]=Program obsługujący urządzenia przenośne dla KDE
Index: kmobile/kioslave/mimetypes/mobile_addressbook.desktop
===================================================================
--- kmobile/kioslave/mimetypes/mobile_addressbook.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kmobile/kioslave/mimetypes/mobile_addressbook.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -2,6 +2,7 @@
 Encoding=UTF-8
 Comment=Contacts in Mobile Device
 Comment[af]=Kontakte op die draagbare toestel
+Comment[ar]=المراسلون في الجهاز النقّال
 Comment[be]=Кантакты ў мабільнай прыладзе
 Comment[bg]=Контакти в мобилни устройства
 Comment[bs]=Kontakti u mobilnom uređaju
@@ -27,9 +28,11 @@
 Comment[ja]=モバイル機器内の連絡先
 Comment[km]=ទំនាក់​ទំនង​ក្នុង​ឧបករណ៍​ចល័ត
 Comment[lt]=Kontaktai mobiliajame įrenginyje
+Comment[mk]=Контакти од мобилен уред
 Comment[ms]=Orang hubungan di dalam Peranti Mudah Alih
 Comment[nb]=Kontaktliste i mobil enhet
 Comment[nds]=Kontakten op de Mobilreedschap
+Comment[ne]=मोबाइल यन्त्रमा सम्पर्क गर्छ
 Comment[nl]=Contactpersonen in mobiel apparaat
 Comment[nn]=Kontaktar i mobileiningar
 Comment[pl]=Wizytówki w urządzeniu przenośnym
Index: kmobile/kioslave/mimetypes/mobile_notes.desktop
===================================================================
--- kmobile/kioslave/mimetypes/mobile_notes.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kmobile/kioslave/mimetypes/mobile_notes.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -27,9 +27,11 @@
 Comment[ja]=モバイル機器内のメモ
 Comment[km]=ចំណាំ​ក្នុង​ឧបករណ៍​ចល័ត
 Comment[lt]=Užrašai mobiliajame įrenginyje
+Comment[mk]=Белешки од мобилен уред
 Comment[ms]=Nota dalam Peranti Mudah Alih
 Comment[nb]=Notater i mobil enhet
 Comment[nds]=Notizen op Mobilreedschap
+Comment[ne]=मोबाइल यन्त्र भित्रका द्रष्टव्य
 Comment[nl]=Notities in mobiel apparaat
 Comment[nn]=Notat i mobileiningar
 Comment[pl]=Notatki w urządzeniu przenośnym
Index: kmobile/kioslave/mimetypes/mobile_calendar.desktop
===================================================================
--- kmobile/kioslave/mimetypes/mobile_calendar.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kmobile/kioslave/mimetypes/mobile_calendar.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -27,9 +27,11 @@
 Comment[ja]=モバイル機器内のカレンダー
 Comment[km]=ប្រតិទិន​ក្នុង​ឧបករណ៍​ចល័ត
 Comment[lt]=Kalendorius mobiliajame įrenginyje
+Comment[mk]=Календар од мобилен уред
 Comment[ms]=Kalendar dalam Peranti Mudah Alih
 Comment[nb]=Kalender i mobil enhet
 Comment[nds]=Kalenner op Mobilreedschap
+Comment[ne]=मोबाइल यन्त्रको क्यालेन्डर
 Comment[nl]=Agenda in mobiel apparaat
 Comment[nn]=Kalender i mobileiningar
 Comment[pl]=Kalendarz w urządzeniu przenośnym
@@ -46,7 +48,7 @@
 Comment[tg]=Тақвим дар дастгоҳи мобилӣ
 Comment[tr]=Cep Telefonu Takvimi
 Comment[uk]=Календар у мобільному пристрої
-Comment[zh_CN]=移动电话中的日历
+Comment[zh_CN]=移动设备中的日历
 Comment[zh_TW]=行動裝置中的行事曆
 Icon=korganizer
 Type=MimeType
Index: kmobile/kioslave/mimetypes/mobile_device.desktop
===================================================================
--- kmobile/kioslave/mimetypes/mobile_device.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kmobile/kioslave/mimetypes/mobile_device.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -2,6 +2,7 @@
 Encoding=UTF-8
 Comment=Mobile Device
 Comment[af]=Draagbare Toestel
+Comment[ar]=الجهاز النقّال
 Comment[be]=Мабільная прылада
 Comment[bg]=Мобилни устройства
 Comment[br]=Trobarzhell lem-laka
@@ -28,9 +29,11 @@
 Comment[ja]=モバイル機器
 Comment[km]=ឧបករណ៍​ចល័ត
 Comment[lt]=Mobilusis įrenginys
+Comment[mk]=Мобилен уред
 Comment[ms]=Peranti Mudah Alih
 Comment[nb]=Mobil enhet
 Comment[nds]=Mobilreedschap
+Comment[ne]=मोबाइल यन्त्र
 Comment[nl]=Mobiel apparaat
 Comment[nn]=Mobileining
 Comment[pa]=ਮੋਬਾਇਲ ਜੰਤਰ
Index: wizards/groupwarewizard.desktop
===================================================================
--- wizards/groupwarewizard.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ wizards/groupwarewizard.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -16,7 +16,7 @@
 Name[fa]=جادوگر KDE Groupware
 Name[fi]=KDE Groupwaren ohjattu toiminto
 Name[fr]=Assistant KDE de travail collaboratif
-Name[ga]=Draoi Groupware KDE
+Name[ga]=Treoraí Groupware KDE
 Name[gl]=Asistente de Traballo en Grupo de KDE
 Name[hu]=KDE csoportmunka-varázsló
 Name[is]=KDE hópvinnukerfisálfur
@@ -26,6 +26,7 @@
 Name[lt]=KDE Groupware vedlys
 Name[nb]=KDE gruppevareveiviser
 Name[nds]=Groupware-Hölper vun KDE
+Name[ne]=केडीई ग्रुपवेयर विजार्ड
 Name[nl]=KDE Groupware-wizard
 Name[nn]=KDE-vegvisar for gruppevare
 Name[pl]=Asystent KDE Groupware
Index: kresources/egroupware/kabc_xmlrpc.desktop
===================================================================
--- kresources/egroupware/kabc_xmlrpc.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kresources/egroupware/kabc_xmlrpc.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -25,6 +25,7 @@
 Name[ms]=Pelayan eGroupware (melalui  XML-RPC)
 Name[nb]=eGroupware-tjener (via XML-RPPC)
 Name[nds]=eGroupware-Server (över XML-RPC)
+Name[ne]=(XML-RPC मार्फत) eGroupware सर्भर 
 Name[nl]=eGroupware-server (via XML-RPC)
 Name[nn]=eGroupware-tenar (via XML-RPC)
 Name[pl]=Serwer eGroupware (poprzez XML-RPC)
Index: kresources/egroupware/knotes_xmlrpc.desktop
===================================================================
--- kresources/egroupware/knotes_xmlrpc.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kresources/egroupware/knotes_xmlrpc.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -25,6 +25,7 @@
 Name[ms]=Pelayan eGroupware (melalui  XML-RPC)
 Name[nb]=eGroupware-tjener (via XML-RPPC)
 Name[nds]=eGroupware-Server (över XML-RPC)
+Name[ne]=(XML-RPC मार्फत) eGroupware सर्भर 
 Name[nl]=eGroupware-server (via XML-RPC)
 Name[nn]=eGroupware-tenar (via XML-RPC)
 Name[pl]=Serwer eGroupware (poprzez XML-RPC)
Index: kresources/egroupware/kcal_xmlrpc.desktop
===================================================================
--- kresources/egroupware/kcal_xmlrpc.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kresources/egroupware/kcal_xmlrpc.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -25,6 +25,7 @@
 Name[ms]=Pelayan eGroupware (melalui  XML-RPC)
 Name[nb]=eGroupware-tjener (via XML-RPPC)
 Name[nds]=eGroupware-Server (över XML-RPC)
+Name[ne]=(XML-RPC मार्फत) eGroupware सर्भर 
 Name[nl]=eGroupware-server (via XML-RPC)
 Name[nn]=eGroupware-tenar (via XML-RPC)
 Name[pl]=Serwer eGroupware (poprzez XML-RPC)
Index: kresources/tvanytime/kcal_tvanytime.desktop
===================================================================
--- kresources/tvanytime/kcal_tvanytime.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kresources/tvanytime/kcal_tvanytime.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -2,6 +2,7 @@
 Encoding=UTF-8
 Name=TV Schedules
 Name[af]=TV skedules
+Name[ar]=جداول التلفزة
 Name[bg]=Разписание TV
 Name[ca]=Programació de la TV
 Name[cs]=TV programy
@@ -22,8 +23,10 @@
 Name[ja]=TV スケジュール
 Name[km]=កាលវិភាគ​ទូរទស្សន៍
 Name[lt]=TV tvarkaraščiai
+Name[mk]=ТВ програми
 Name[nb]=TV-program
 Name[nds]=Feernsehprogramm
+Name[ne]=टीभी कार्यतालिका
 Name[nl]=Televisieprogrammering
 Name[nn]=TV-program
 Name[pl]=Program telewizyjny
Index: kresources/exchange/exchange.desktop
===================================================================
--- kresources/exchange/exchange.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kresources/exchange/exchange.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -28,9 +28,11 @@
 Name[ja]=Exchange 2000 サーバ
 Name[km]=ម៉ាស៊ីន​បម្រើ Exchange ២០០០
 Name[lt]=Exchange 2000 serveris
+Name[mk]=Exchange 2000-сервер
 Name[ms]=Pelayan Exchange 2000 
 Name[nb]=Exchange 2000-tjener
 Name[nds]=Exchange2000-Server
+Name[ne]=एक्सचेन्ज 2000 सर्भर
 Name[nl]=Exchange2000-server
 Name[nn]=Exchange 2000-tenar
 Name[pl]=Serwer Exchange 2000
Index: kresources/exchange/exchange_deprecated.desktop
===================================================================
--- kresources/exchange/exchange_deprecated.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kresources/exchange/exchange_deprecated.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -23,9 +23,11 @@
 Name[ja]=Exchange 2000 サーバ (廃止予定)
 Name[km]=ម៉ាស៊ីន​បម្រើ Exchange ២០០០ (មិន​សូវ​ល្អ)
 Name[lt]=Exchange 2000 serveris (deprecated)
+Name[mk]=Exchange 2000-сервер (застарено)
 Name[ms]=Pelayan Exchange 2000  (tidak disetujui)
 Name[nb]=Exchange 2000-tjener (frarådet)
 Name[nds]=Exchange2000-Server (utlopen Ünnerstütten)
+Name[ne]=एक्सचेन्ज २००० सर्भर (अनुचित ठानिएको)
 Name[nl]=Exchange 2000-server (afgeraden)
 Name[nn]=Exchange 2000-tenar (frårådd)
 Name[pl]=Serwer Exchange 2000 (przestarzałe)
Index: kresources/groupwise/kcal_groupwise.desktop
===================================================================
--- kresources/groupwise/kcal_groupwise.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kresources/groupwise/kcal_groupwise.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -25,6 +25,7 @@
 Name[ms]=Pelayan Novell GroupWise 
 Name[nb]=Novell GroupWise-tjener
 Name[nds]=Novell-GroupWise-Server
+Name[ne]=नोभेल समूहगत सर्भर
 Name[nl]=Novell GroupWise-server
 Name[nn]=Novell GroupWise-tenar
 Name[pl]=Serwer Novell GroupWise
Index: kresources/groupwise/soap/stdsoap2.h
===================================================================
--- kresources/groupwise/soap/stdsoap2.h	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kresources/groupwise/soap/stdsoap2.h	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -507,7 +507,9 @@
 # endif
 #endif
 
+#ifdef I_KNOW_WHAT_IM_DOING
 #define DEBUG  /* Uncomment to debug sending (in file SENT.log) receiving (in file RECV.log) and messages (in file TEST.log) */
+#endif
 
 #ifdef __cplusplus
 extern "C" {
Index: kresources/groupwise/soap/gwconverter.cpp
===================================================================
--- kresources/groupwise/soap/gwconverter.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kresources/groupwise/soap/gwconverter.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -131,3 +131,41 @@
   QDateTime utc = charToQDateTime( str );
   return KPimPrefs::utcToLocalTime( utc, timezone );
 }
+
+bool GWConverter::emailsMatch( const QString & email1, const QString & email2 )
+{
+    // eg demo3.po1.dom1@dmz1.provo.novell.com == demo3@dmz1.provo.novell.com
+    if ( email1 == email2 )
+        return true;
+
+    QString shorter, longer;
+    if ( email1.length() < email2.length() )
+    {
+        shorter = email1;
+        longer = email2;
+    }
+    else
+    {
+        shorter = email2;
+        longer = email1;
+    }
+
+    QString shortStem = shorter.section( '@', 0, 0 );
+    QString longStem = longer.section( '@', 0, 0 );
+    QString shortHost = shorter.section( '@', 1, 1 );
+    QString longHost = longer.section( '@', 1, 1 );
+
+    QString extension = longStem.right( longStem.length() - shortStem.length() );
+
+    kdDebug() << "gwconverter::emailsMatch(): " << shorter << " = " << longer << endl;
+    kdDebug() << "shortStem: " << shortStem << ", longStem: " << longStem << ", extension: " << extension << endl;
+
+    if ( longStem.startsWith( shortStem ) && extension.startsWith( "." ) && (
+    shortHost == longHost ) )
+    {
+        kdDebug() << "Looks like a match!" << endl;
+        return true;
+    }
+    return false;
+}
+
Index: kresources/groupwise/soap/incidenceconverter.cpp
===================================================================
--- kresources/groupwise/soap/incidenceconverter.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kresources/groupwise/soap/incidenceconverter.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -626,20 +626,20 @@
     std::vector<ngwt__Recipient*>::const_iterator it;
 
     for ( it = recipients.begin(); it != recipients.end(); ++it ) {
-      kdDebug() << "---- recipient " << endl;
-    ngwt__Recipient *recipient = *it;
+      ngwt__Recipient *recipient = *it;
+      kdDebug() << "---- recipient " << recipient->email->c_str() << endl;
       KCal::Attendee *attendee = new KCal::Attendee(
         stringToQString( recipient->displayName ),
         stringToQString( recipient->email ) );
 
       // set our status
-      if ( *(recipient->email) == *(qStringToString( mFromEmail )) )
+      if ( emailsMatch( stringToQString(recipient->email), mFromEmail ) )
         if ( item->status->accepted )
           attendee->setStatus( ( *item->status->accepted ) ? KCal::Attendee::Accepted : KCal::Attendee::NeedsAction );
         else 
-          kdDebug() << "---- not accepted" << endl;
+          kdDebug() << "---- found ourselves, but not accepted" << endl;
       else
-        kdDebug() << "---- '" << recipient->email->c_str() << "' != '" << (qStringToString( mFromEmail ))->c_str() << "'" << endl;
+        kdDebug() << "---- '" <<  "' != '" << (qStringToString( mFromEmail ))->c_str() << "'" << endl;
 
       incidence->addAttendee( attendee );
     }
Index: kresources/groupwise/soap/groupwiseserver.cpp
===================================================================
--- kresources/groupwise/soap/groupwiseserver.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kresources/groupwise/soap/groupwiseserver.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -1023,11 +1023,12 @@
   }
   else  // If I am not the organizer restrict my changes to accept or decline requests or task completion
   {
-    // find myself as attendee.   
+    // find myself as attendee.
+    GWConverter conv( mSoap );
     KCal::Attendee::List attendees = incidence->attendees();
     KCal::Attendee::List::ConstIterator it;
     for( it = attendees.begin(); it != attendees.end(); ++it ) {
-      if ( (*it)->email() == mUserEmail ) {
+      if ( conv.emailsMatch( (*it)->email(), mUserEmail ) ) {
         if ( (*it)->status() == KCal::Attendee::Accepted )
           success &= acceptIncidence( incidence );
         else if ( (*it)->status() == KCal::Attendee::Declined )
Index: kresources/groupwise/soap/gwconverter.h
===================================================================
--- kresources/groupwise/soap/gwconverter.h	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kresources/groupwise/soap/gwconverter.h	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -56,7 +56,7 @@
     
     QDateTime stringToQDateTime( const std::string* );
 
-
+    bool emailsMatch( const QString & email1, const QString & email2 );
   private:
     struct soap* mSoap;
 };
Index: kresources/groupwise/kabc_groupwise.desktop
===================================================================
--- kresources/groupwise/kabc_groupwise.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kresources/groupwise/kabc_groupwise.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -25,6 +25,7 @@
 Name[ms]=Pelayan Novell GroupWise 
 Name[nb]=Novell GroupWise-tjener
 Name[nds]=Novell-GroupWise-Server
+Name[ne]=नोभेल समूहगत सर्भर
 Name[nl]=Novell GroupWise-server
 Name[nn]=Novell GroupWise-tenar
 Name[pl]=Serwer Novell GroupWise
Index: kresources/slox/kcal_slox.desktop
===================================================================
--- kresources/slox/kcal_slox.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kresources/slox/kcal_slox.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -22,9 +22,11 @@
 Name[ja]=SUSE LINUX Openexchange サーバ
 Name[km]=ម៉ាស៊ីន​បម្រើ Openexchange របស់​ស៊ូស៊ីលីនីក
 Name[lt]=SUSE LINUX Openexchange serveris
+Name[mk]=SUSE LINUX Openexchange-сервер
 Name[ms]=Pelayan SUSE LINUX Openexchange
 Name[nb]=SUSE LINUX Openexchange-tjener
 Name[nds]=SUSE-Openexchangeserver
+Name[ne]=SUSE LINUX ओपन एक्सचेन्ज सर्भर
 Name[nl]=SUSE LINUX Openexchange-server
 Name[nn]=SUSE LINUX Openexchange-tenar
 Name[pl]=Server SUSE LINUX Openexchange
Index: kresources/slox/kcal_ox.desktop
===================================================================
--- kresources/slox/kcal_ox.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kresources/slox/kcal_ox.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -20,8 +20,10 @@
 Name[ja]=OpenXchange サーバ
 Name[km]=ម៉ាស៊ីន​បម្រើ OpenXchange
 Name[lt]=OpenXchange serveris
+Name[mk]=OpenXchange-сервер
 Name[nb]=OpenExchange-tjener
 Name[nds]=OpenXchange-Server
+Name[ne]=ओपन एक्सचेन्ज सर्भर
 Name[nl]=OpenXchange-server
 Name[nn]=OpenXchange-tenar
 Name[pl]=Server OpenXchange
Index: kresources/slox/kabc_slox.desktop
===================================================================
--- kresources/slox/kabc_slox.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kresources/slox/kabc_slox.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -22,9 +22,11 @@
 Name[ja]=SUSE LINUX Openexchange サーバ
 Name[km]=ម៉ាស៊ីន​បម្រើ Openexchange របស់​ស៊ូស៊ីលីនីក
 Name[lt]=SUSE LINUX Openexchange serveris
+Name[mk]=SUSE LINUX Openexchange-сервер
 Name[ms]=Pelayan SUSE LINUX Openexchange
 Name[nb]=SUSE LINUX Openexchange-tjener
 Name[nds]=SUSE-Openexchangeserver
+Name[ne]=SUSE LINUX ओपन एक्सचेन्ज सर्भर
 Name[nl]=SUSE LINUX Openexchange-server
 Name[nn]=SUSE LINUX Openexchange-tenar
 Name[pl]=Server SUSE LINUX Openexchange
Index: kresources/slox/kabc_ox.desktop
===================================================================
--- kresources/slox/kabc_ox.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kresources/slox/kabc_ox.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -20,8 +20,10 @@
 Name[ja]=OpenXchange サーバ
 Name[km]=ម៉ាស៊ីន​បម្រើ OpenXchange
 Name[lt]=OpenXchange serveris
+Name[mk]=OpenXchange-сервер
 Name[nb]=OpenExchange-tjener
 Name[nds]=OpenXchange-Server
+Name[ne]=ओपन एक्सचेन्ज सर्भर
 Name[nl]=OpenXchange-server
 Name[nn]=OpenXchange-tenar
 Name[pl]=Server OpenXchange
Index: kresources/featureplan/kcal_resourcefeatureplan.desktop
===================================================================
--- kresources/featureplan/kcal_resourcefeatureplan.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kresources/featureplan/kcal_resourcefeatureplan.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -20,6 +20,7 @@
 Name[lt]=XML bruožų planas
 Name[ms]=Pelan Cirian XML 
 Name[nds]=XML-Funkschonenplaan
+Name[ne]=एक्सएमएल विशेषता योजना
 Name[nl]=Functionaliteitsplanning in XML
 Name[pl]=Plan funkcjonalności XML
 Name[pt]=Plano de Funcionalidades em XML
Index: kresources/groupdav/kabc_groupdav.desktop
===================================================================
--- kresources/groupdav/kabc_groupdav.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kresources/groupdav/kabc_groupdav.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -26,6 +26,7 @@
 Name[ms]=Pelayan GroupDAV  (misalnya OpenGroupware)
 Name[nb]=GroupDAV-tjener (f.eks. OpenGroupware)
 Name[nds]=GroupDAV-Server (t.B. OpenGroupware)
+Name[ne]=समूह DAV सर्भर (जस्तै: खुला ग्रुपवेयर)
 Name[nl]=GroupDAV-server (OpenGroupware)
 Name[nn]=GroupDAV-tenar (t.d. OpenGroupware)
 Name[pl]=Serwer GroupDAV (np. OpenGroupware)
Index: kresources/groupdav/kcal_groupdav.desktop
===================================================================
--- kresources/groupdav/kcal_groupdav.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kresources/groupdav/kcal_groupdav.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -26,6 +26,7 @@
 Name[ms]=Pelayan GroupDAV  (misalnya OpenGroupware)
 Name[nb]=GroupDAV-tjener (f.eks. OpenGroupware)
 Name[nds]=GroupDAV-Server (t.B. OpenGroupware)
+Name[ne]=समूह DAV सर्भर (जस्तै: खुला ग्रुपवेयर)
 Name[nl]=GroupDAV-server (OpenGroupware)
 Name[nn]=GroupDAV-tenar (t.d. OpenGroupware)
 Name[pl]=Serwer GroupDAV (np. OpenGroupware)
Index: kresources/blogging/blogging.desktop
===================================================================
--- kresources/blogging/blogging.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kresources/blogging/blogging.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -23,6 +23,7 @@
 Name[ms]=Jurnal sebagai Blog pada pelayan
 Name[nb]=Dagbok som blogg på en tjener
 Name[nds]=Daagbookindräag as Blog op en Server
+Name[ne]=सर्भरमा बल्गका रुपका पत्रिका
 Name[nl]=Journalen als blogs op een server
 Name[nn]=Dagbøker som bloggar på ein tenar
 Name[pl]=Dzienniki jako blogi na serwerze
Index: kresources/kolab/kabc/kolab.desktop
===================================================================
--- kresources/kolab/kabc/kolab.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kresources/kolab/kabc/kolab.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -23,9 +23,11 @@
 Name[ja]=KMail 経由 IMAP サーバのアドレス帳
 Name[km]=សៀវភៅ​អាសយដ្ឋាន​លើ​ម៉ាស៊ីន​បម្រើ IMAP តាម​រយៈ KMail
 Name[lt]=Adresų knygelė IMAP serveryje per KMail
+Name[mk]=Адресар на IMAP-сервер преку КПошта
 Name[ms]=Buku alamat pada pelayan IMAP melalui KMail
 Name[nb]=Adressebok på IMAP-tjener via KMail
 Name[nds]=Adressbook op IMAP-Server över KMail
+Name[ne]=केडीई मेल मार्फत IMAP सर्भरमा ठेगाना पुस्तिका
 Name[nl]=Adresboek op IMAP-server via KMail
 Name[nn]=Adressebok på IMAP-tenar via KMail
 Name[pl]=Książka adresowa na serwerze IMAP za pośrednictwem KMail
Index: kresources/kolab/kabc/contact.h
===================================================================
--- kresources/kolab/kabc/contact.h	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kresources/kolab/kabc/contact.h	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -57,6 +57,7 @@
   public:
     QString type;
     QString street;
+    QString pobox;
     QString locality;
     QString region;
     QString postalCode;
Index: kresources/kolab/kabc/contact.cpp
===================================================================
--- kresources/kolab/kabc/contact.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kresources/kolab/kabc/contact.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -510,6 +510,8 @@
         address.type = e.text();
       else if ( tagName == "street" )
         address.street = e.text();
+      else if ( tagName == "pobox" )
+        address.pobox = e.text();
       else if ( tagName == "locality" )
         address.locality = e.text();
       else if ( tagName == "region" )
@@ -537,11 +539,18 @@
     element.appendChild( e );
     const Address& a = *it;
     writeString( e, "type", a.type );
-    writeString( e, "street", a.street );
+    if ( !a.street.isEmpty() )
+      writeString( e, "street", a.street );
+    if ( !a.pobox.isEmpty() )
+      writeString( e, "pobox", a.pobox );
+    if ( !a.locality.isEmpty() )
     writeString( e, "locality", a.locality );
-    writeString( e, "region", a.region );
-    writeString( e, "postal-code", a.postalCode );
-    writeString( e, "country", a.country );
+    if ( !a.region.isEmpty() )
+      writeString( e, "region", a.region );
+    if ( !a.postalCode.isEmpty() )
+      writeString( e, "postal-code", a.postalCode );
+    if ( !a.country.isEmpty() )
+      writeString( e, "country", a.country );
   }
 }
 
@@ -1038,6 +1047,7 @@
     Address address;
     address.type = addressTypeToString( (*it).type() );
     address.street = (*it).street();
+    address.pobox = (*it).postOfficeBox();
     address.locality = (*it).locality();
     address.region = (*it).region();
     address.postalCode = (*it).postalCode();
@@ -1202,6 +1212,7 @@
       type |= KABC::Address::Pref;
     address.setType( type );
     address.setStreet( (*it).street );
+    address.setPostOfficeBox( (*it).pobox );
     address.setLocality( (*it).locality );
     address.setRegion( (*it).region );
     address.setPostalCode( (*it).postalCode );
Index: kresources/kolab/knotes/kolabresource.desktop
===================================================================
--- kresources/kolab/knotes/kolabresource.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kresources/kolab/knotes/kolabresource.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -23,9 +23,11 @@
 Name[ja]=KMail 経由 IMAP サーバ
 Name[km]=ម៉ាស៊ីន​បម្រើ IMAP តាម​រយៈ KMail
 Name[lt]=IMAP serveris per KMail
+Name[mk]=IMAP-сервер преку КПошта
 Name[ms]=Pelayan IMAP melalui  KMail
 Name[nb]=IMAP-tjener via KMail
 Name[nds]=IMAP-Server över KMail
+Name[ne]=केडीई मेल मार्फत IMAP सर्भर
 Name[nl]=IMAP-server via KMail
 Name[nn]=IMAP-tenar via KMail
 Name[pl]=Serwer IMAP za pośrednictwem KMail
Index: kresources/kolab/shared/kmailconnection.cpp
===================================================================
--- kresources/kolab/shared/kmailconnection.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kresources/kolab/shared/kmailconnection.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -118,7 +118,7 @@
                                              int format,
                                              const QString& data )
 {
-  if ( format != KMailICalIface::StorageXML 
+  if ( format != KMailICalIface::StorageXML
       && format != KMailICalIface::StorageIcalVcard )
     return false;
 //   kdDebug(5650) << "KMailConnection::fromKMailAddIncidence( " << type << ", "
@@ -244,7 +244,7 @@
                                    const QStringList& attachmentNames,
                                    const QStringList& deletedAttachments )
 {
-  kdDebug(5006) << kdBacktrace() << endl;
+  //kdDebug(5006) << kdBacktrace() << endl;
   if ( connectToKMail() ) {
     sernum = mKMailIcalIfaceStub->update( resource, sernum, subject, plainTextBody, customHeaders,
                                           attachmentURLs, attachmentMimetypes, attachmentNames,
@@ -254,7 +254,7 @@
     return false;
 }
 
-bool KMailConnection::kmailStorageFormat( KMailICalIface::StorageFormat& type, 
+bool KMailConnection::kmailStorageFormat( KMailICalIface::StorageFormat& type,
                                           const QString& folder )
 {
   bool ok = connectToKMail();
Index: kresources/kolab/kcal/kolab.desktop
===================================================================
--- kresources/kolab/kcal/kolab.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kresources/kolab/kcal/kolab.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -23,9 +23,11 @@
 Name[ja]=KMail 経由 IMAP サーバのカレンダー
 Name[km]=ប្រតិទិន​លើ​ម៉ាស៊ីន​បម្រើ IMAP តាម​រយៈ KMail
 Name[lt]=Kalendorius IMAP serveryje per KMail
+Name[mk]=Календар на IMAP-сервер преку КПошта
 Name[ms]=Kalendar pada pelayan IMAP melalui KMail
 Name[nb]=Kalender på IMAP-tjener via KMail
 Name[nds]=Kalenner op IMAP-Server över KMail
+Name[ne]=केडीई मेल मार्फत IMAP सर्भरमा क्यालेन्डर
 Name[nl]=Agenda op IMAP-server via KMail
 Name[nn]=Kalender på IMAP-tenar via KMail
 Name[pl]=Kalendarz na serwerze IMAP za pośrednictwem KMail
Index: kresources/birthdays/kabc.desktop
===================================================================
--- kresources/birthdays/kabc.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kresources/birthdays/kabc.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -2,7 +2,8 @@
 Encoding=UTF-8
 Name=Birthdays From KAddressBook
 Name[af]=Verjaarsdae uit KAddressBook
-Name[be]=Дні нараджэньня з K Адраснай кнігі
+Name[ar]=تواريخ الميلد من KAddressBook
+Name[be]=Дні нараджэння з K Адраснай кнігі
 Name[bg]=Рождени дни от адресника
 Name[br]=Deizioù-ha-bloazioù eus KAddressBook
 Name[bs]=Rođendani iz KAddressBook adresara
@@ -28,9 +29,11 @@
 Name[ja]=アドレス帳の誕生日
 Name[km]=ថ្ងៃ​ខួប​កំណើត​ពី KAddressBook
 Name[lt]=Gimtadieniai iš KAddressBook
+Name[mk]=Родендени од КАдресар
 Name[ms]=Tarikh Lahir dari  KAddressBook
 Name[nb]=Bursdagsimport fra KAddressbook
 Name[nds]=Geboortsdaag ut KAdressbook
+Name[ne]=केडीई ठेगाना पुस्तिकामा भएका जन्मदिन
 Name[nl]=Verjaardagen uit KAddressBook
 Name[nn]=Fødselsdagar frå KDE-adresseboka
 Name[pl]=Urodziny z Książki adresowej
Index: kresources/groupware/kabc_groupware.desktop
===================================================================
--- kresources/groupware/kabc_groupware.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kresources/groupware/kabc_groupware.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -25,6 +25,7 @@
 Name[ms]=Pelayan Groupware 
 Name[nb]=Groupware-tjener
 Name[nds]=Groupware-Server
+Name[ne]=ग्रुपवेयर सर्भर
 Name[nl]=Groupware-server
 Name[nn]=Groupware-tenar
 Name[pl]=Serwer Groupware
Index: kresources/groupware/kcal_groupware.desktop
===================================================================
--- kresources/groupware/kcal_groupware.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kresources/groupware/kcal_groupware.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -25,6 +25,7 @@
 Name[ms]=Pelayan Groupware 
 Name[nb]=Groupware-tjener
 Name[nds]=Groupware-Server
+Name[ne]=ग्रुपवेयर सर्भर
 Name[nl]=Groupware-server
 Name[nn]=Groupware-tenar
 Name[pl]=Serwer Groupware
Index: kresources/remote/remote.desktop
===================================================================
--- kresources/remote/remote.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kresources/remote/remote.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -26,9 +26,11 @@
 Name[ja]=リモートファイルのカレンダー
 Name[km]=ប្រតិទិន​នៅ​ក្នុង​ឯកសារ​នៅ​ឆ្ងាយ
 Name[lt]=Kalendorius nutolusioje byloje
+Name[mk]=Календар во оддалечена датотека
 Name[ms]=Kalendar dalam Fail Jauh
 Name[nb]=Kalender i fil på nettverk
 Name[nds]=Kalenner as Datei op en anner Reekner
+Name[ne]=टाढाको फाइलको क्यालेन्डर
 Name[nl]=Agenda in extern bestand
 Name[nn]=Kalender i ekstern fil
 Name[pl]=Kalendarz w pliku zdalnym
Index: kresources/remote/resourceremote.cpp
===================================================================
--- kresources/remote/resourceremote.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kresources/remote/resourceremote.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -40,7 +40,7 @@
 #include <libkcal/journal.h>
 #include <libkcal/filestorage.h>
 
-#include <kabc/locknull.h>
+#include <kabc/lock.h>
 
 #include <kresources/configwidget.h>
 
@@ -93,7 +93,7 @@
 
   setType( "remote" );
 
-  mLock = new KABC::LockNull( true );
+  mLock = new KABC::Lock( cacheFile() );
 
   enableChangeNotification();
 }
@@ -188,21 +188,25 @@
 
   emit resourceChanged( this );
 
-  kdDebug() << "Download from: " << mDownloadUrl << endl;
+  if ( mLock->lock() )
+  {
+    kdDebug() << "Download from: " << mDownloadUrl << endl;
 
-  mDownloadJob = KIO::file_copy( mDownloadUrl, KURL( cacheFile() ), -1, true,
-                                 false, !mUseProgressManager );
-  connect( mDownloadJob, SIGNAL( result( KIO::Job * ) ),
-           SLOT( slotLoadJobResult( KIO::Job * ) ) );
-  if ( mUseProgressManager ) {
-    connect( mDownloadJob, SIGNAL( percent( KIO::Job *, unsigned long ) ),
-             SLOT( slotPercent( KIO::Job *, unsigned long ) ) );
-    mProgress = KPIM::ProgressManager::createProgressItem(
-        KPIM::ProgressManager::getUniqueID(), i18n("Downloading Calendar") );
+    mDownloadJob = KIO::file_copy( mDownloadUrl, KURL( cacheFile() ), -1, true,
+                                    false, !mUseProgressManager );
+    connect( mDownloadJob, SIGNAL( result( KIO::Job * ) ),
+            SLOT( slotLoadJobResult( KIO::Job * ) ) );
+    if ( mUseProgressManager ) {
+        connect( mDownloadJob, SIGNAL( percent( KIO::Job *, unsigned long ) ),
+                SLOT( slotPercent( KIO::Job *, unsigned long ) ) );
+        mProgress = KPIM::ProgressManager::createProgressItem(
+            KPIM::ProgressManager::getUniqueID(), i18n("Downloading Calendar") );
 
-    mProgress->setProgress( 0 );
+        mProgress->setProgress( 0 );
+    }
   }
-
+  else
+    kdDebug() << "ResourceRemote::load(): cache file is locked - something else must be loading the file" << endl;
   return true;
 }
 
@@ -234,6 +238,7 @@
     mProgress = 0;
   }
 
+  mLock->unlock();
   emit resourceLoaded( this );
 }
 
Index: kresources/newexchange/kabc_newexchange.desktop
===================================================================
--- kresources/newexchange/kabc_newexchange.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kresources/newexchange/kabc_newexchange.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -22,9 +22,11 @@
 Name[ja]=Exchange サーバのアドレス帳 (実験版)
 Name[km]=សៀវភៅ​អាសយដ្ឋាន​លើ​ម៉ាស៊ីន​បម្រើ Exchange (សម្រាប់​អ្នក​មាន​បទពិសោធន៍)
 Name[lt]=Adresų knygelė Exchange serveryje (eksperimentine tvarka)
+Name[mk]=Адресар на Exchange-сервер (експериментално)
 Name[ms]=Buku  Alamat pada pelayan Exchange (ujikaji)
 Name[nb]=Adressebok på en Exchange-tjener (forsøksvis)
 Name[nds]=Adressbook op en Exchange-Server (warrt utprobeert)
+Name[ne]=एक्सचेन्ज सर्भरमा ठेगाना पुस्तिका (प्रयोगात्मक)
 Name[nl]=Adresboek op een Exchange-server (experimenteel)
 Name[nn]=Adressebok på ein Exchange-tenar (eksperimentelt)
 Name[pl]=Książka adresowa na serwerze Exchange (eksperymentalne)
Index: kresources/newexchange/kabc_newexchange_final.desktop
===================================================================
--- kresources/newexchange/kabc_newexchange_final.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kresources/newexchange/kabc_newexchange_final.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -24,9 +24,11 @@
 Name[ja]=Exchange サーバのアドレス帳
 Name[km]=សៀវភៅ​អាសយដ្ឋាន​លើ​ម៉ាស៊ីន​បម្រើ Exchange
 Name[lt]=Adresų knygelė Exchange serveryje
+Name[mk]=Адресар на Exchange-сервер
 Name[ms]=Buku alamat pada pelayan Exchange 
 Name[nb]=Adressebok på en Exchange-tjener
 Name[nds]=Adressbook op en Exchange-Server
+Name[ne]=एक्सचेन्ज सर्भरमा ठेगाना पुस्तिका
 Name[nl]=Adresboek op een Exchange-server
 Name[nn]=Adressebok på ein Exchange-tenar
 Name[pl]=Książka adresowa na serwerze Exchange
Index: kresources/newexchange/kcal_newexchange.desktop
===================================================================
--- kresources/newexchange/kcal_newexchange.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kresources/newexchange/kcal_newexchange.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -22,9 +22,11 @@
 Name[ja]=Exchange サーバのカレンダー (実験版)
 Name[km]=ប្រតិទិន​លើ​ម៉ាស៊ីន​បម្រើ Exchange (សម្រាប់​អ្នក​មាន​បទពិសោធន៍)
 Name[lt]=Kalendorius Exchange serveryje (eksperimentine tvarka)
+Name[mk]=Календар на Exchange-сервер (експериментално)
 Name[ms]=Kalendar pada pelayan Exchange  (ujikaji)
 Name[nb]=Kalender på en Exchange-tjener (forsøksvis)
 Name[nds]=Kalenner op en Exchange-Server (warrt utprobeert)
+Name[ne]=एक्सचेन्ज सर्भरमा क्यालेन्डर (प्रयोगात्मक)
 Name[nl]=Agenda op een Exchange-server (experimenteel)
 Name[nn]=Kalender på ein Exchange-tenar (eksperimentelt)
 Name[pl]=Kalendarz na serwerze Exchange (eksperymentalne)
Index: kresources/newexchange/kcal_newexchange_final.desktop
===================================================================
--- kresources/newexchange/kcal_newexchange_final.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kresources/newexchange/kcal_newexchange_final.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -24,9 +24,11 @@
 Name[ja]=Exchange サーバのカレンダー
 Name[km]=ប្រតិទិន​លើ​ម៉ាស៊ីន​បម្រើ Exchange
 Name[lt]=Kalendorius Exchange serveryje
+Name[mk]=Календар на Exchange-сервер
 Name[ms]=Kalendar pada pelayan Exchange
 Name[nb]=Kalender på en Exchange-tjener
 Name[nds]=Kalenner op en Exchange-Server
+Name[ne]=एक्सचेन्ज सर्भरमा क्यालेन्डर
 Name[nl]=Agenda op een Exchange-server
 Name[nn]=Kalender på ein Exchange-tenar
 Name[pl]=Kalendarz na serwerze Exchange
Index: ksync/src/ksync.desktop
===================================================================
--- ksync/src/ksync.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ ksync/src/ksync.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -12,7 +12,6 @@
 Name[fr]=KSync
 Name[hi]=के-सिंक
 Name[it]=KSync
-Name[mk]=КСинхронизатор
 Name[mt]=KSync
 Name[nso]=Ktshomisommogo
 Name[pt_BR]=Ksync (sincronizador)
Index: certmanager/kleopatra_import.desktop
===================================================================
--- certmanager/kleopatra_import.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ certmanager/kleopatra_import.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -1,8 +1,9 @@
 [Desktop Entry]
 Encoding=UTF-8
 Name=Kleopatra
-Name[be]=Клеапатра
 Name[is]=Kleópatra
+Name[mk]=Клеопатра
+Name[ne]=क्लेओपत्र
 Name[ta]=க்ளியோபட்ரா
 Type=Application
 Exec=kleopatra --import-certificate %u
Index: certmanager/conf/kleopatra_config_appear.desktop
===================================================================
--- certmanager/conf/kleopatra_config_appear.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ certmanager/conf/kleopatra_config_appear.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -14,7 +14,8 @@
 X-KDE-CfgDlgHierarchy=Kleopatra
 
 Name=Appearance
-Name[be]=Зьнешні выгляд
+Name[ar]=المظهر
+Name[be]=Знешні выгляд
 Name[bg]=Външен вид
 Name[br]=Neuziadur
 Name[bs]=Izgled
@@ -44,6 +45,7 @@
 Name[ms]=Rupa
 Name[nb]=Utseende
 Name[nds]=Utsehn
+Name[ne]=मोहडा
 Name[nl]=Uiterlijk
 Name[nn]=Utsjånad
 Name[pl]=Wygląd
@@ -65,7 +67,8 @@
 Name[zh_CN]=外观
 Comment=Colors & Fonts Configuration
 Comment[af]=Kleur en skrif tipe opstelling
-Comment[be]=Канфігурацыя колераў і шрыфтоў
+Comment[ar]=إعدادات الألوان و المحارف
+Comment[be]=Настаўленні колераў і шрыфтоў
 Comment[bg]=Настройки на цветовете и шрифтовете
 Comment[bs]=Podešavanje boja i fontova
 Comment[ca]=Configuració de colors i fonts
@@ -93,6 +96,7 @@
 Comment[ms]=Warna & Konfigurasi fon
 Comment[nb]=Oppsett av farger og skrifttyper
 Comment[nds]=Klören un Schriftoorden instellen
+Comment[ne]=रङ र फन्ट कन्फिगरेसन
 Comment[nl]=Kleur- en lettertype-instellingen
 Comment[nn]=Oppsett av fargar og skrifter
 Comment[pl]=Konfiguracja czcionek i kolorów
@@ -113,6 +117,7 @@
 Comment[zh_TW]=設定顏色與字型
 Keywords=color,font, configuration
 Keywords[af]=kleur,skrif tipe,opstelling,color,font
+Keywords[ar]=لون,حرف, إعدادات,محرف,ألوان
 Keywords[be]=колер, шрыфт, канфігурацыя, color, font, configuration
 Keywords[bg]=цвят, шрифт, конфигуриране, настройки color, font, configuration
 Keywords[br]=liv,nodrezh, kefluniadur
@@ -138,10 +143,11 @@
 Keywords[ja]=色 フォント 設定
 Keywords[km]=ពណ៌,ពុម្ពអក្សរ,ការ​កំណត់​រចនាសម្ព័ន្ធ
 Keywords[lt]=color,font, configuration, spalvų, šriftų konfigūravimas
-Keywords[mk]=color,font,configuration
+Keywords[mk]=color,font,configuration,боја,фонт,конфигурација
 Keywords[ms]=warna,fon, konfigurasi
 Keywords[nb]=farge,skrifttype,oppsett
 Keywords[nds]=Klöör,Schriftoort,instellen
+Keywords[ne]=रङ, फन्ट, कन्फिगरेसन
 Keywords[nl]=kleur,kleuren,font,lettertype,configuratie,instellingen,setup
 Keywords[nn]=farge,skrift,oppsett
 Keywords[pl]=kolor,czcionki,kolory,konfiguracja
Index: certmanager/conf/kleopatra_config_dnorder.desktop
===================================================================
--- certmanager/conf/kleopatra_config_dnorder.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ certmanager/conf/kleopatra_config_dnorder.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -20,7 +20,7 @@
 Name[cs]=Pořadí DN atributů
 Name[da]=DN-Attributrækkefølge
 Name[de]=DN-Attribut-Ordnung
-Name[el]=Σειρά Ιδιότητας DN
+Name[el]=Σειρά ιδιότητας DN
 Name[es]=Orden de atributos DN
 Name[et]=DN-atribuutide järjekord
 Name[eu]=DN-atributu ordena
@@ -35,9 +35,11 @@
 Name[ja]=DN 属性順位
 Name[km]=លំដាប់​គុណលក្ខណៈ DN
 Name[lt]=DN-Savybių tvarka
+Name[mk]=Редослед на DN-атрибути
 Name[ms]=Tertib atribut DN
 Name[nb]=DN-Attributtrekkefølge
 Name[nds]=DN-Egenschappenreeg
+Name[ne]=डीएन विशेषता आदेश
 Name[nl]=DN-Attribuutvolgorde
 Name[nn]=DN-attributtrekkjefølgje
 Name[pl]=Porządek atrybutów DN
@@ -79,9 +81,11 @@
 Comment[ja]=DN 属性を表示する順位を設定
 Comment[km]=កំណត់​រចនាសម្ព័ន្ធ​លំដាប់ ដែល​ត្រូវ​បង្ហាញ​គុណលក្ខណៈ DN
 Comment[lt]=Konfigūruoti DN savybių rodymo tvarką
+Comment[mk]=Конфигурирајте го редоследот по кој се покажуваат DN-атрибутите
 Comment[ms]=Konfigur tertib yang atribut DN dipaparkan
 Comment[nb]=Still inn rekkefølgen DN-attributtene er sortert i
 Comment[nds]=De Reeg bi't Wiesen vun DN-Egenschappen fastleggen
+Comment[ne]=डीएन विशेषता देखिने आदेश कन्फिगर गर्नुहोस्
 Comment[nl]=Stel de volgorde in van de DN-attributen
 Comment[nn]=Vel kva rekkjefølgje DN-attributtane er sorterte i
 Comment[pl]=Konfiguracja kolejności wyświetlania atrybutów DN
@@ -125,9 +129,11 @@
 Keywords[ja]=DN,順位,RDN,属性
 Keywords[km]=DN,លំដាប់,RDN,គុណលក្ខណៈ
 Keywords[lt]=DN,order,RDN,attribute,savybė,tvarka
+Keywords[mk]=DN,order,RDN,attribute,редослед,атрибут
 Keywords[ms]=DN,susunan,RDN,atribut
 Keywords[nb]=DN,orden,RDN,attributt
 Keywords[nds]=DN,Reeg,RDN,Egenschap
+Keywords[ne]=डीएन,क्रम,आरडीएन, विशेषता
 Keywords[nl]=DN,volgorde,RDN,attribuut
 Keywords[nn]=DN,rekkjefølgje,RDN,attributt
 Keywords[pl]=DN,kolejność,RDN,atrybuty
Index: certmanager/conf/kleopatra_config_dirserv.desktop
===================================================================
--- certmanager/conf/kleopatra_config_dirserv.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ certmanager/conf/kleopatra_config_dirserv.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -14,6 +14,7 @@
 X-KDE-CfgDlgHierarchy=Kleopatra
 
 Name=Directory Services
+Name[ar]=خدمات الدليل
 Name[bg]=Директорийни услуги
 Name[bs]=Imenički servisi
 Name[ca]=Serveis de directori
@@ -36,9 +37,11 @@
 Name[ja]=ディレクトリ サービス
 Name[km]=សេវា​ថត
 Name[lt]=Aplankų tarnybos
+Name[mk]=Именички сервиси
 Name[ms]=Servis Direktori 
 Name[nb]=Katalogtjenere
 Name[nds]=Vertekendeensten
+Name[ne]=डाइरेक्टरी कार्य
 Name[nl]=Mapdiensten
 Name[nn]=Katalogtenester
 Name[pa]=ਡਾਇਰੈਕਟਰੀ ਸੇਵਾਵਾਂ
@@ -81,9 +84,11 @@
 Comment[ja]=LDAP ディレクトリ サービスの設定
 Comment[km]=ការ​កំណត់​រចនាសម្ព័ន្ធ​របស់​សេវា​ថត LDAP
 Comment[lt]=LDAP aplankų tarnybų konfigūravimas
+Comment[mk]=Конфигурација на LDAP-именички сервиси
 Comment[ms]=Konfigurasi LDAP servis direktori
 Comment[nb]=Oppsett av LDAP katalogtjenester
 Comment[nds]=LDAP-Vertekendeensten instellen
+Comment[ne]=LDAP डाइरेक्टरी कार्यको कन्फिगरेसन
 Comment[nl]=Configuratie voor LDAP-diensten
 Comment[nn]=Oppsett av LDAP-katalogtenester
 Comment[pl]=Konfiguracja usług katalogowych LDAP
@@ -125,12 +130,14 @@
 Keywords[hu]=ldap,címtár,szolgáltatások
 Keywords[is]=ldap,directory,services,nafnaþjónusta
 Keywords[it]=ldap, servizi, directory
-Keywords[ja]=ldap,ディレクトリー,サービス
+Keywords[ja]=ldap,ディレクトリ,サービス
 Keywords[km]=ldap,ថត,សេវា
 Keywords[lt]=ldap,directory,services,aplankai,tarnybos
+Keywords[mk]=ldap,directory,services,именик,сервиси
 Keywords[ms]=ldap,direktori,servis
 Keywords[nb]=ldap,mappe,tjenester
 Keywords[nds]=LDAP,Verteken,Deensten
+Keywords[ne]=ldap,डाइरेक्टरी,कार्य
 Keywords[nn]=ldap,katalog,tenester
 Keywords[pl]=ldap,katalog,usługi katalogowe,usługi,LDAP
 Keywords[pt]=ldap,directório,serviços
Index: certmanager/lib/libkleopatrarc.desktop
===================================================================
--- certmanager/lib/libkleopatrarc.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ certmanager/lib/libkleopatrarc.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -25,6 +25,7 @@
 Name[ms]=Kekunci Tidak Disahkan
 Name[nb]=Nøkkel ikke sjekket for gyldighet
 Name[nds]=Nich pröövt Slötel
+Name[ne]=प्रमाणीत नगरिएको कुञ्जी
 Name[nl]=Geen gevalideerde sleutel
 Name[nn]=Ikkje-validert nøkkel
 Name[pl]=Niesprawdzony klucz
@@ -70,9 +71,11 @@
 Name[ja]=期限切れの鍵
 Name[km]=កូនសោ​បាន​ផុតកំណត់
 Name[lt]=Baigęs galioti raktas
+Name[mk]=Истечен клуч
 Name[ms]=Kekunci Luput
 Name[nb]=Utgått nøkkel
 Name[nds]=Aflopen Slötel
+Name[ne]=म्याद समाप्त भएको कुञ्जी
 Name[nl]=Verlopen sleutel
 Name[nn]=Forelda nøkkel
 Name[pl]=Klucz, który stracił ważność
@@ -115,9 +118,11 @@
 Name[ja]=破棄された鍵
 Name[km]=កូនសោ​ត្រូវ​បាន​ដកហូត
 Name[lt]=Atšauktas raktas
+Name[mk]=Отповикан клуч
 Name[ms]=Kekunci Dibatalkan
 Name[nb]=Tilbakekalt nøkkel
 Name[nds]=Torüchropen Slötel
+Name[ne]=रद्द गरिएको कुञ्जी
 Name[nl]=Ingetrokken sleutel
 Name[nn]=Tilbakekalla nøkkel
 Name[pl]=Odwołany klucz
@@ -141,12 +146,13 @@
 is-validity=ultimate
 Name=Trusted Root Certificate
 Name[af]=Vertroude 'Root' sertifikaat
+Name[ar]=شهادة جذر موثوق بها
 Name[bg]=Надеждно удостоверение
 Name[ca]=Certificat arrel de confiança
 Name[cs]=Důvěryhodný kořenový certifikát
 Name[da]=Root-certifikat der stoles på
 Name[de]=Vertrauenswürdiges Stammzertifikat
-Name[el]=Έμπιστο Βασικό Πιστοποιητικό
+Name[el]=Έμπιστο βασικό πιστοποιητικό
 Name[es]=Certificado raíz de confianza
 Name[et]=Usaldusväärne juursertifikaat
 Name[eu]=Konfidantzazko erro ziurtagiria
@@ -160,9 +166,11 @@
 Name[ja]=信頼されたルート証明書
 Name[km]=វិញ្ញាបនបត្រ Root ដែល​អាច​ជឿទុកចិត្ត
 Name[lt]=Patikimas root sertifikatas
+Name[mk]=Доверлив коренов сертификат
 Name[ms]=Sijil Root Dipercaya
 Name[nb]=Tiltrodd rot-sertifikat
 Name[nds]=Vertroonswöördig Wörtelzertifikaat
+Name[ne]=विश्वास गरिएका मूल प्रमाणपत्र
 Name[nl]=Vertrouwd hoofdcertificaat
 Name[nn]=Tiltrudd rotsertifikat
 Name[pl]=Zaufany certyfikat bazowy
@@ -186,12 +194,13 @@
 is-not-validity=ultimate
 Name=Not Trusted Root Certificate
 Name[af]=Nie vertroude 'root' sertifikaat
+Name[ar]=شهادة جذر غير موثوق بها
 Name[bg]=Ненадеждно удостоверение
 Name[ca]=Certificat arrel sense confiança
 Name[cs]=Nedůvěryhodný kořenový certifikát
 Name[da]=Root-certifikat der ikke stoles på
 Name[de]=Nicht vertrauenswürdiges Stammzertifikat
-Name[el]=Μη έμπιστο Βασικό Πιστοποιητικό
+Name[el]=Μη έμπιστο βασικό πιστοποιητικό
 Name[es]=Certificado raíz no de confianza
 Name[et]=Ebausaldusväärne juursertifikaat
 Name[eu]=Konfidantza gabeko erro ziurtagiria
@@ -205,9 +214,11 @@
 Name[ja]=信頼されてないルート証明書
 Name[km]=វិញ្ញាបនបត្រ Root ដែល​មិន​អាច​ជឿទុកចិត្ត
 Name[lt]=Nepatikimas root sertifikatas
+Name[mk]=Недоверлив коренов сертификат
 Name[ms]=Sijil Root Tak Dipercaya
 Name[nb]=Ikke tiltrodd rot-sertifikat
 Name[nds]=Nich vertroonswöördig Wörtelzertifikaat
+Name[ne]=विश्वास नगरिएका मूल प्रमाणपत्र
 Name[nl]=Niet vertrouwd hoofdcertificaat
 Name[nn]=Ikkje tiltrudd rotsertifikat
 Name[pl]=Nie zaufany certyfikat bazowy
@@ -229,6 +240,7 @@
 was-validated=true
 Name=Other Keys
 Name[af]=Ander Sleutels
+Name[ar]=مفاتيح آخرى
 Name[bg]=Други ключове
 Name[br]=Alc'hwezioù all
 Name[ca]=Altres claus
@@ -251,9 +263,11 @@
 Name[ja]=他の鍵
 Name[km]=កូនសោ​ផ្សេង​ទៀត
 Name[lt]=Kiti raktai
+Name[mk]=Други клучеви
 Name[ms]=Kekunci Lain
 Name[nb]=Andre nøkler
 Name[nds]=Anner Slötels
+Name[ne]=अन्य कुञ्जी
 Name[nl]=Andere sleutels
 Name[nn]=Andre nøklar
 Name[pa]=ਹੋਰ ਕੁੰਜੀਆਂ
Index: libkmime/kmime_util.cpp
===================================================================
--- libkmime/kmime_util.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ libkmime/kmime_util.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -360,7 +360,7 @@
 
 QCString extractHeader(const QCString &src, const char *name)
 {
-  QCString n=QCString(name)+": ";
+  QCString n=QCString(name)+":";
   int pos1=-1, pos2=0, len=src.length()-1;
   bool folded(false);
 
@@ -373,6 +373,9 @@
 
   if (pos1>-1) {    //there is a header with the given name
     pos1+=n.length(); //skip the name
+    // skip the usual space after the colon
+    if ( src.at( pos1 ) == ' ' )
+      ++pos1;
     pos2=pos1;
 
     if (src[pos2]!='\n') {  // check if the header is not empty
Index: karm/taskview.cpp
===================================================================
--- karm/taskview.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ karm/taskview.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -360,7 +360,7 @@
 Preferences* TaskView::preferences() { return _preferences; }
 
 QString TaskView::save()
-// This saves the not-running tasks.
+// This saves the tasks. If they do not yet have an endDate, their startDate is also not saved.
 {
   kdDebug(5970) << "Entering TaskView::save" << endl;
   QString err = _storage->save(this);
@@ -382,16 +382,21 @@
 
 void TaskView::startTimerFor(Task* task, QDateTime startTime )
 {
-  if (task != 0 && activeTasks.findRef(task) == -1) {
-    _idleTimeDetector->startIdleDetection();
-    task->setRunning(true, _storage, startTime);
-    activeTasks.append(task);
-    emit updateButtons();
-    if ( activeTasks.count() == 1 )
+  kdDebug(5970) << "Entering TaskView::startTimerFor" << endl;
+  if (save()==QString())
+  {
+    if (task != 0 && activeTasks.findRef(task) == -1) 
+    {
+      _idleTimeDetector->startIdleDetection();
+      task->setRunning(true, _storage, startTime);
+      activeTasks.append(task);
+      emit updateButtons();
+      if ( activeTasks.count() == 1 )
         emit timersActive();
-
-    emit tasksChanged( activeTasks);
+      emit tasksChanged( activeTasks);
+    }
   }
+  else KMessageBox::error(0,i18n("Saving is impossible, so timing is useless. \nSaving problems may result from a full harddisk, a directory name instead of a file name, or stale locks. Check that your harddisk has enough space, that your calendar file exists and is a file and remove stale locks, typically from ~/.kde/share/apps/kabc/lock."));
 }
 
 void TaskView::clearActiveTasks()
Index: karm/karmstorage.cpp
===================================================================
--- karm/karmstorage.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ karm/karmstorage.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -308,7 +308,7 @@
 QString KarmStorage::save(TaskView* taskview)
 {
   kdDebug(5970) << "entering KarmStorage::save" << endl;
-  QString err;
+  QString err=QString();
 
   QPtrStack< KCal::Todo > parents;
 
Index: karm/support/karm.desktop
===================================================================
--- karm/support/karm.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ karm/support/karm.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -4,7 +4,6 @@
 Name[af]=Karm
 Name[eo]=Tempomezurilo
 Name[hi]=के-आर्म
-Name[mk]=КРака
 Name[sv]=Karm
 Name[ta]=Kஅம்
 Name[xh]=KAlrm
@@ -39,11 +38,12 @@
 GenericName[ko]=일하는 시간을 잴 수 있습니다
 GenericName[lt]=Asmeninis laiko sekėjas
 GenericName[lv]=Personālais Laika Atsekotājs
-GenericName[mk]=Водење сметка за вашето слободно време
+GenericName[mk]=Следење на личното време
 GenericName[ms]=Penjejak Waktu Peribadi
 GenericName[mt]=Żomm il-ħin personali
 GenericName[nb]=Personlig tidsoversikt
 GenericName[nds]=Persöönlich Tietlogbook
+GenericName[ne]=व्यक्तिगत समय ट्र्याकर
 GenericName[nl]=Tijdsregistratie
 GenericName[nn]=Personleg tidsmålar
 GenericName[nso]=Seswaranako sa Nako ya Botho
Index: kmail/kmail.antispamrc
===================================================================
--- kmail/kmail.antispamrc	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kmail/kmail.antispamrc	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -216,7 +216,7 @@
 Version=1
 Priority=65
 VisibleName=CRM114
-Executeable=crm -v | grep "CRM114"
+Executable=crm -v | grep "CRM114"
 URL=http://crm114.sourceforge.net
 PipeFilterName=CRM114 Check
 PipeCmdDetect=crm -u $HOME/.crm114 mailreaver.crm
Index: kmail/imapaccountbase.cpp
===================================================================
--- kmail/imapaccountbase.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kmail/imapaccountbase.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -94,6 +94,7 @@
       mPasswordDialogIsActive( false ),
       mACLSupport( true ),
       mAnnotationSupport( true ),
+      mQuotaSupport( true ),
       mSlaveConnected( false ),
       mSlaveConnectionError( false ),
       mCheckingSingleFolder( false ),
@@ -473,7 +474,36 @@
     if (mSlave) removeJob(job);
   }
 
+  //-----------------------------------------------------------------------------
+  // Do not remove imapPath, FolderDiaQuotaTab needs to call this with parent==0.
+  void ImapAccountBase::getStorageQuotaInfo( KMFolder* parent, const QString& imapPath )
+  {
+    if ( !mSlave ) return;
+    KURL url = getUrl();
+    url.setPath(imapPath);
 
+    QuotaJobs::GetStorageQuotaJob* job = QuotaJobs::getStorageQuota( mSlave, url );
+    jobData jd( url.url(), parent );
+    jd.cancellable = true;
+    insertJob(job, jd);
+
+    connect(job, SIGNAL(result(KIO::Job *)),
+            SLOT(slotGetStorageQuotaInfoResult(KIO::Job *)));
+  }
+
+  void ImapAccountBase::slotGetStorageQuotaInfoResult( KIO::Job* _job )
+  {
+    QuotaJobs::GetStorageQuotaJob* job = static_cast<QuotaJobs::GetStorageQuotaJob *>( _job );
+    JobIterator it = findJob( job );
+    if ( it == jobsEnd() ) return;
+    if ( job->error() && job->error() == KIO::ERR_UNSUPPORTED_ACTION )
+      setHasNoQuotaSupport();
+
+    KMFolder* folder = (*it).parent; // can be 0
+    emit receivedStorageQuotaInfo( folder, job, job->storageQuotaInfo() );
+    if (mSlave) removeJob(job);
+  }
+
   void ImapAccountBase::slotNoopTimeout()
   {
     if ( mSlave ) {
Index: kmail/util.cpp
===================================================================
--- kmail/util.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kmail/util.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -39,6 +39,7 @@
 
 #include <stdlib.h>
 #include <qcstring.h>
+#include <mimelib/string.h>
 
 size_t KMail::Util::crlf2lf( char* str, const size_t strLen )
 {
@@ -72,7 +73,7 @@
 
 QCString KMail::Util::lf2crlf( const QCString & src )
 {
-    QCString result( 1 + 2*src.length() );  // maximal possible length
+    QCString result( 1 + 2*src.size() );  // maximal possible length
 
     QCString::ConstIterator s = src.begin();
     QCString::Iterator d = result.begin();
@@ -87,3 +88,107 @@
     result.truncate( d - result.begin() ); // adds trailing NUL
     return result;
 }
+
+QByteArray KMail::Util::lf2crlf( const QByteArray & src )
+{
+    const char* s = src.data();
+    if ( !s )
+      return QByteArray();
+
+    QByteArray result( 2 * src.size() );  // maximal possible length
+    QByteArray::Iterator d = result.begin();
+    // we use cPrev to make sure we insert '\r' only there where it is missing
+    char cPrev = '?';
+    const char* end = src.end();
+    while ( s != end ) {
+        if ( ('\n' == *s) && ('\r' != cPrev) )
+            *d++ = '\r';
+        cPrev = *s;
+        *d++ = *s++;
+    }
+    result.truncate( d - result.begin() ); // does not add trailing NUL, as expected
+    return result;
+}
+
+QCString KMail::Util::CString( const DwString& str )
+{
+  const int strLen = str.size();
+  QCString cstr( strLen + 1 );
+  memcpy( cstr.data(), str.data(), strLen );
+  cstr[ strLen ] = 0;
+  return cstr;
+}
+
+QByteArray KMail::Util::ByteArray( const DwString& str )
+{
+  const int strLen = str.size();
+  QByteArray arr( strLen );
+  memcpy( arr.data(), str.data(), strLen );
+  return arr;
+}
+
+DwString KMail::Util::dwString( const QCString& str )
+{
+  if ( !str.data() ) // DwString doesn't like char*=0
+    return DwString();
+  return DwString( str.data(), str.size() - 1 );
+}
+
+DwString KMail::Util::dwString( const QByteArray& str )
+{
+  if ( !str.data() ) // DwString doesn't like char*=0
+    return DwString();
+  return DwString( str.data(), str.size() );
+}
+
+void KMail::Util::append( QByteArray& that, const QByteArray& str )
+{
+  that.detach();
+  uint len1 = that.size();
+  uint len2 = str.size();
+  if ( that.resize( len1 + len2, QByteArray::SpeedOptim ) )
+    memcpy( that.data() + len1, str.data(), len2 );
+}
+
+void KMail::Util::append( QByteArray& that, const char* str )
+{
+  if ( !str )
+    return; // nothing to append
+  that.detach();
+  uint len1 = that.size();
+  uint len2 = qstrlen(str);
+  if ( that.resize( len1 + len2, QByteArray::SpeedOptim ) )
+    memcpy( that.data() + len1, str, len2 );
+}
+
+void KMail::Util::append( QByteArray& that, const QCString& str )
+{
+  that.detach();
+  uint len1 = that.size();
+  uint len2 = str.size() - 1;
+  if ( that.resize( len1 + len2, QByteArray::SpeedOptim ) )
+    memcpy( that.data() + len1, str.data(), len2 );
+}
+
+// Code taken from QCString::insert, but trailing nul removed
+void KMail::Util::insert( QByteArray& that, uint index, const char* s )
+{
+  int len = qstrlen(s);
+  if ( len == 0 )
+    return;
+  uint olen = that.size();
+  int nlen = olen + len;
+  if ( index >= olen ) {                      // insert after end of string
+    that.detach();
+    if ( that.resize(nlen+index-olen, QByteArray::SpeedOptim ) ) {
+      memset( that.data()+olen, ' ', index-olen );
+      memcpy( that.data()+index, s, len );
+    }
+  } else {
+    that.detach();
+    if ( that.resize(nlen, QByteArray::SpeedOptim ) ) {    // normal insert
+      memmove( that.data()+index+len, that.data()+index, olen-index );
+      memcpy( that.data()+index, s, len );
+    }
+  }
+}
Index: kmail/dcopimap.desktop
===================================================================
--- kmail/dcopimap.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kmail/dcopimap.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -5,7 +5,7 @@
 Comment=Mail program with a DCOP interface
 Comment[af]=E-pos program met 'n DCOP koppelvlak
 Comment[be]=Паштовая праграма з DCOP інтэрфэйсам
-Comment[bg]=Клиент на електронна поща за КДЕ
+Comment[bg]=Клиент на електронна поща за KDE
 Comment[bs]=Mail program sa DCOP interfejsom
 Comment[ca]=Un programa de correu amb una interfície DCOP
 Comment[cs]=Poštvní program s DCOP rozhraním
@@ -27,9 +27,11 @@
 Comment[ja]=DCOP インターフェース付のメールプログラム
 Comment[km]=កម្មវិធី​អ៊ីមែល​ដែល​មាន​ចំណុច​ប្រទាក់ DCOP
 Comment[lt]=Pašto programa su DCOP sąsaja
+Comment[mk]=Програма за е-пошта, со DCOP-интерфејс
 Comment[ms]=Program Mel dengan antara muka  DCOP 
 Comment[nb]=E-postprogram med DCOP grensesnitt
 Comment[nds]=Nettpostprogramm mit DCOP-Koppelsteed
+Comment[ne]=DCOP इन्टरफेसमा मेल कार्यक्रम
 Comment[nl]=E-mailprogramma met een DCOP-interface
 Comment[nn]=E-postprogram med eit DCOP-grensesnitt
 Comment[pl]=Program pocztowy z interfejsem DCOP
Index: kmail/profiles/profile-high-contrast-rc.desktop
===================================================================
--- kmail/profiles/profile-high-contrast-rc.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kmail/profiles/profile-high-contrast-rc.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -27,9 +27,11 @@
 Name[ja]=ハイコントラスト
 Name[km]=កម្រិត​ពណ៌​ខ្ពស់
 Name[lt]=Didelis kontrastas
+Name[mk]=Висок контраст
 Name[ms]=Kontras Tinggi
 Name[nb]=Høy kontrast
 Name[nds]=Hoge Kontrast
+Name[ne]=उच्च ब्यतिरेक
 Name[nl]=Hoog contrast
 Name[nn]=Høg kontrast
 Name[pl]=Wysoki kontrast
@@ -81,6 +83,7 @@
 Comment[ms]=Saiz fon ditambah untuk pengguna cacat penglihatan 
 Comment[nb]=Økte skriftstørrelser for svaksynte brukere
 Comment[nds]=Grötter Tekens för kiekbehinnert Brukers
+Comment[ne]=दृश्यात्मक विकृत प्रयोगकर्ताका लागि बढाइएको फन्ट साइज
 Comment[nl]=Groter lettertype voor slechtziende gebruikers
 Comment[nn]=Auka skriftstorleik for synshemma brukarar
 Comment[pl]=Zwiększone rozmiary czcionek dla osób mających problemy ze wzrokiem
Index: kmail/profiles/profile-default-rc.desktop
===================================================================
--- kmail/profiles/profile-default-rc.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kmail/profiles/profile-default-rc.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -3,7 +3,7 @@
 Name[af]=Standaard
 Name[ar]=الإفتراضي
 Name[az]=Əsas
-Name[be]=Па ўмаўчаньні
+Name[be]=Па ўмаўчанні
 Name[bg]=Стандартен
 Name[br]=Dre ziouer
 Name[bs]=Podrazumijevano
@@ -33,10 +33,12 @@
 Name[km]=លំនាំដើម
 Name[lt]=Numatytasis
 Name[lv]=Noklusētais
+Name[mk]=Стандарден
 Name[ms]=Piawai
 Name[mt]=Normali
 Name[nb]=Standard
 Name[nds]=Standard
+Name[ne]=पूर्वनिर्धारित
 Name[nl]=Standaard
 Name[nn]=Standard
 Name[pa]=ਮੂਲ
@@ -95,9 +97,11 @@
 Comment[km]=ទម្រង់​ខ្នាត​គំរូ
 Comment[lt]=Standartinis profilis
 Comment[lv]=Standarta profils
+Comment[mk]=Стандарден профил
 Comment[ms]=Profail Standard
 Comment[nb]=Standardprofil
 Comment[nds]=Standardprofil
+Comment[ne]=मानक प्रोफाइल
 Comment[nl]=Standaard profiel
 Comment[nn]=Standardprofil
 Comment[pl]=Profil standardowy
Index: kmail/profiles/profile-html-rc.desktop
===================================================================
--- kmail/profiles/profile-html-rc.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kmail/profiles/profile-html-rc.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -1,10 +1,12 @@
 [KMail Profile]
 Name=HTML
+Name[ar]=لغة علامات النص الفائق
 Name[bg]=Поддръжка на HTML
 Name[fa]=زنگام
+Name[ne]=एचटीएमएल
 Comment=Standard profile with HTML preview enabled - less secure!
 Comment[af]=Standaard profiel, met HTML voorskou geaktiveer. Dis minder veilig!
-Comment[ar]=تشكيل قياسي مع تمكين استعراض HTML - أقل أمانا!
+Comment[ar]=الشاكلة المعيارية مع تمكين معاينة لغة  علامة النص الفائق HTML - أقل أمناً !
 Comment[az]=HTML nümayişli standard - ən az etibarlı!
 Comment[bg]=Стандартен профил с поддръжка на HTML в писмата (по-малко сигурен)
 Comment[bs]=Standardni profil sa omogućenim HTML pregledom - manje siguran!
@@ -31,9 +33,11 @@
 Comment[km]=ទម្រង់​ខ្នាត​គំរូ​ដែល​អាច​មើល HTML ជាមុន - មិន​សូវ​មាន​សុវត្ថិភាព​ឡើយ !
 Comment[lt]=Standartinis profilis su HTML peržiūra – mažiau saugus!
 Comment[lv]=Standarta profils ar atļautu HTML apskati - nedrošāks!
+Comment[mk]=Стандарден профил со овозможен преглед на HTML - помалку безбедно!
 Comment[ms]=Profil piawai dengan paparan HTML diaktifkan - kurang selamat!
 Comment[nb]=Standardprofil med forhåndsvisning av HTML - mindre sikkert!
 Comment[nds]=Standardprofil mit aktiveert HTML-Vöransicht - weniger seker
+Comment[ne]=एचटीएमएल पूर्वावलोकनको मानक प्रोफाइल सक्षम पारियो - कम सुरक्षित!
 Comment[nl]=Standaardprofiel met HTML-voorbeeld geactiveerd - minder veilig!
 Comment[nn]=Standard profil med HTML-vising slått på - mindre trygt!
 Comment[pl]=Standardowy profil z włączonym podglądem HTML - mniej bezpieczny!
Index: kmail/profiles/profile-purist-rc.desktop
===================================================================
--- kmail/profiles/profile-purist-rc.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kmail/profiles/profile-purist-rc.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -23,6 +23,7 @@
 Name[lv]=Puritānis
 Name[ms]=Mementingkan Istilah Yang Betul
 Name[nds]=Reen
+Name[ne]=संस्कारक
 Name[nn]=Enkel
 Name[pl]=Czysty
 Name[pt]=Purista
@@ -71,9 +72,11 @@
 Comment[km]=លក្ខណៈ​ពិសេស​ភាគ​ច្រើន​ត្រូវ​បាន​បិទ ដោយ​ប្រើ​តែ​ការ​កំណត់​សកល​របស់ KDE ប៉ុណ្ណោះ
 Comment[lt]=Dauguma savybių išjungta, naudojami globalūs KDE nustatymai
 Comment[lv]=Vairums īpašību izslēgtas, tiek izmantoti KDE globālie uzstādījumi
+Comment[mk]=Повеќето карактеристики се исклучени, се користат глобалните поставувања на KDE
 Comment[ms]=Kebanyakan cirian ditutup, seting global KDE digunakan
 Comment[nb]=De fleste funksjoner slått av, KDEs globale innstillinger er i bruk
 Comment[nds]=Mehrste Funkschonen utmaakt, globaal KDE-Vörinstellen warrt bruukt
+Comment[ne]=धेरै विशेषता बन्द गरिएका छन, केडीई विश्वव्यापी सेटिङ प्रयोग गरिएका छन्
 Comment[nl]=Meeste mogelijkheden uitgezet, de globale KDE-instellingen worden gebruikt
 Comment[nn]=Dei fleste funksjonar er slått av, globale KDE-innstillingar vert brukt
 Comment[pl]=Większość opcji wyłączona, używane są domyślne ustawienia KDE
Index: kmail/profiles/profile-secure-rc.desktop
===================================================================
--- kmail/profiles/profile-secure-rc.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kmail/profiles/profile-secure-rc.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -1,6 +1,7 @@
 [KMail Profile]
 Name=Most Secure
 Name[af]=Veiligste
+Name[ar]=الأكثر آمن
 Name[bg]=Сигурност
 Name[bs]=Najsigurniji
 Name[ca]=Més segur
@@ -25,9 +26,11 @@
 Name[ja]=最も安全
 Name[km]=សុវត្ថិភាព​បំផុត
 Name[lt]=Saugiausias
+Name[mk]=Најбезбедно
 Name[ms]=Paling Selamat
 Name[nb]=Sikrest
 Name[nds]=Sekerst
+Name[ne]=सबैभन्दा सुरक्षित
 Name[nl]=Meest veilig
 Name[nn]=Tryggast
 Name[pa]=ਜਿਆਦਾ ਸੁਰੱਖਿਅਤ
@@ -73,9 +76,11 @@
 Comment[ja]=最大のセキュリティ確保のために必要なすべてのオプションを設定します
 Comment[km]=កំណត់​ជម្រើស​ចាំបាច់​ទាំងអស់ ដើម្បី​ទទួល​បាន​សុវត្ថិភាព​ខ្ពស់​បំផុត
 Comment[lt]=Nustato visas būtinas maksimaliam saugumui parinktis
+Comment[mk]=Ги поставува сите потребни опции за да се постигне максимална безбедност
 Comment[ms]=Mengeset semua opsyen yang perlu untuk mencapai keselamatan maksimum 
 Comment[nb]=Setter opp alle nødvendige innstillinger for å oppnå høyeste sikkerhet
 Comment[nds]=All Optschonen op maximale Sekerheit
+Comment[ne]=अधिकतम सुरक्षा प्राप्त गर्न सबै आवश्यक विकल्प सेट गर्छ
 Comment[nl]=Stelt alle benodigde opties in voor maximale veiligheid
 Comment[nn]=Set alle nødvendige innstillingar for maksimal tryggleik
 Comment[pl]=Włącza wszystkie opcje zapewniające najwięcej bezpieczeństwa
Index: kmail/application_octetstream.desktop
===================================================================
--- kmail/application_octetstream.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kmail/application_octetstream.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -16,6 +16,7 @@
 Name[km]=Octetstream កម្មវិធី
 Name[ms]=Aliran Oktet  Aplikasi
 Name[nb]=Program Octetstrøm
+Name[ne]=अक्टेस्ट्रिम अनुप्रयोग
 Name[nl]=Applicatie octetstroom
 Name[nn]=Oktettstraum frå program
 Name[pl]=Dane binarne
@@ -54,6 +55,7 @@
 Comment[ms]=Plugin pemformat bahagian isi untuk alpikasi/aliran oktet
 Comment[nb]=Et programtillegg for meldingstekst-formatering for application/octet-stream
 Comment[nds]=En Hööftdeel-Formateermoduul för application/octet-stream
+Comment[ne]=अनुप्रयोग/अक्टेट-स्ट्रिमका लागि एउटा मूख्यभाग ढाँचाकार
 Comment[nl]=Een opmaakplugin voor application/octet-stream
 Comment[nn]=Eit programtillegg for formatering av meldingstekst i application/octet-stream
 Comment[pl]=Wtyczka formatowania danych typu application/octet-stream
Index: kmail/kmmsgpart.cpp
===================================================================
--- kmail/kmmsgpart.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kmail/kmmsgpart.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -10,6 +10,7 @@
 #include "kmkernel.h"
 #include "kmmessage.h"
 #include "globalsettings.h"
+#include "util.h"
 
 #include <kasciistringtools.h>
 #include <kmime_charfreq.h>
@@ -102,7 +103,7 @@
 //-----------------------------------------------------------------------------
 void KMMessagePart::setBody(const QCString &aStr)
 {
-  mBody.duplicate( aStr.data(), aStr.length() );
+  KMail::Util::setFromQCString( mBody, aStr );
 
   int enc = cte();
   if (enc == DwMime::kCte7bit || enc == DwMime::kCte8bit || enc == DwMime::kCteBinary)
@@ -111,6 +112,28 @@
     mBodyDecodedSize = -1; // Can't know the decoded size
 }
 
+void KMMessagePart::setBody(const DwString &aStr)
+{
+  mBody.duplicate( aStr.c_str(), aStr.length() );
+
+  int enc = cte();
+  if (enc == DwMime::kCte7bit || enc == DwMime::kCte8bit || enc == DwMime::kCteBinary)
+    mBodyDecodedSize = mBody.size();
+  else
+    mBodyDecodedSize = -1; // Can't know the decoded size
+}
+
+void KMMessagePart::setBody(const QByteArray &aStr)
+{
+  mBody = aStr;
+
+  int enc = cte();
+  if (enc == DwMime::kCte7bit || enc == DwMime::kCte8bit || enc == DwMime::kCteBinary)
+    mBodyDecodedSize = mBody.size();
+  else
+    mBodyDecodedSize = -1; // Can't know the decoded size
+}
+
 void KMMessagePart::setBodyFromUnicode( const QString & str ) {
   QCString encoding = KMMsgBase::autoDetectCharset( charset(), KMMessage::preferredCharsets(), str );
   if ( encoding.isEmpty() )
@@ -161,8 +184,7 @@
 //-----------------------------------------------------------------------------
 void KMMessagePart::setBodyEncoded(const QCString& aStr)
 {
-  mBodyDecodedSize = aStr.length();
-
+  mBodyDecodedSize = aStr.size() - 1; // same as aStr.length() but faster - assuming no embedded nuls
   switch (cte())
   {
   case DwMime::kCteQuotedPrintable:
@@ -191,6 +213,7 @@
   case DwMime::kCte7bit:
   case DwMime::kCte8bit:
   case DwMime::kCteBinary:
+    // This is slow and memory hungry - consider using setBodyEncodedBinary instead!
     mBody.duplicate( aStr.data(), mBodyDecodedSize );
     break;
   }
@@ -224,7 +247,7 @@
 				       bool allow8Bit,
                                        bool willBeSigned )
 {
-  mBodyDecodedSize = aBuf.length();
+  mBodyDecodedSize = aBuf.size() - 1; // same as aStr.length() but faster - assuming no embedded nuls
 
   CharFreq cf( aBuf.data(), mBodyDecodedSize ); // save to pass null strings
 
@@ -270,7 +293,9 @@
   case DwMime::kCte7bit:
   case DwMime::kCte8bit:
   case DwMime::kCteBinary:
-    mBody.duplicate( aStr );
+    //mBody.duplicate( aStr );
+    mBody = aStr;
+    // Caller has to detach before it modifies aStr!
     break;
   }
 }
@@ -348,13 +373,12 @@
 
   if ( decodeBinary ) {
     len = mBody.size();
-    result.resize( len+1 /* trailing NUL */ );
-    memcpy(result.data(), mBody.data(), len);
-    result[len] = 0;
+    KMail::Util::setFromByteArray( result, mBody );
   }
 
-  kdWarning( result.length() != (unsigned int)len, 5006 )
-    << "KMMessagePart::bodyDecoded(): body is binary but used as text!" << endl;
+  // Calls length -> slow
+  //kdWarning( result.length() != (unsigned int)len, 5006 )
+  //  << "KMMessagePart::bodyDecoded(): body is binary but used as text!" << endl;
 
   result = result.replace( "\r\n", "\n" ); // CRLF -> LF conversion
 
@@ -544,10 +568,12 @@
   return QString::null;
 }
 
-
-
 QCString KMMessagePart::body() const
 {
   return QCString( mBody.data(), mBody.size() + 1 ); // space for trailing NUL
 }
 
+DwString KMMessagePart::dwBody() const
+{
+  return KMail::Util::dwString( mBody );
+}
Index: kmail/kmmessage.h
===================================================================
--- kmail/kmmessage.h	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kmail/kmmessage.h	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -208,7 +208,7 @@
   /** Parse the string and create this message from it. */
   void fromDwString(const DwString& str, bool setStatus=FALSE);
   void fromString(const QCString& str, bool setStatus=FALSE);
-  void fromByteArray( const QByteArray & ba, bool setStatus=false );
+  void fromByteArray(const QByteArray & ba, bool setStatus=false);
 
   /** Return the entire message contents in the DwString. This function
       is *fast* even for large message since it does *not* involve a
@@ -230,7 +230,7 @@
    * Return the message contents with the headers that should not be
    * sent stripped off.
    */
-  QCString asSendableString() const;
+  QByteArray asSendableString() const;
 
   /**
    * Return the message header with the headers that should not be
@@ -526,6 +526,8 @@
 
   /** Set the message body. Does not encode the body. */
   void setBody(const QCString& aStr);
+  void setBody(const DwString& aStr);
+  void setBody(const char* aStr); // avoid ambiguous calls
 
   /** Hack to enable structured body parts to be set as flat text... */
   void setMultiPartBody( const QCString & aStr );
@@ -856,7 +858,7 @@
 private:
 
   /** Initialization shared by the ctors. */
-  void init();
+  void init( DwMessage* aMsg = 0 );
   /** Assign the values of @param other to this message. Used in the copy c'tor. */
   void assign( const KMMessage& other );
 
Index: kmail/kmmsgdict.cpp
===================================================================
--- kmail/kmmsgdict.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kmail/kmmsgdict.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -16,6 +16,7 @@
 #include <stdio.h>
 #include <unistd.h>
 
+#include <string.h>
 #include <errno.h>
 
 #include <config.h>
@@ -73,8 +74,7 @@
   KMMsgDictREntry(int size = 0)
   {
     array.resize(size);
-    for (int i = 0; i < size; i++)
-      array.at(i) = 0;
+    memset(array.data(), 0, array.size() * sizeof(KMMsgDictEntry *));  // faster than a loop
     fp = 0;
     swapByteOrder = false;
     baseOffset = 0;
@@ -412,6 +412,19 @@
   if (swapByteOrder)
      count = kmail_swap_32(count);
 
+  // quick consistency check to avoid allocating huge amount of memory
+  // due to reading corrupt file (#71549)
+  long pos = ftell(fp);       // store current position
+  fseek(fp, 0, SEEK_END);
+  long fileSize = ftell(fp);  // how large is the file ?
+  fseek(fp, pos, SEEK_SET);   // back to previous position
+
+  // the file must at least contain what we try to read below
+  if ( (fileSize - pos) < (count * sizeof(Q_UINT32)) ) {
+    fclose(fp);
+    return -1;
+  }
+
   KMMsgDictREntry *rentry = new KMMsgDictREntry(count);
 
   for (unsigned int index = 0; index < count; index++) {
Index: kmail/kmail_config_misc.desktop
===================================================================
--- kmail/kmail_config_misc.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kmail/kmail_config_misc.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -38,9 +38,11 @@
 Name[ja]=その他
 Name[km]=ផ្សេងៗ
 Name[lt]=Įvairūs
+Name[mk]=Разно
 Name[ms]=Pelbagai
 Name[nb]=Div
 Name[nds]=Anner Saken
+Name[ne]=विविध
 Name[nl]=Diversen
 Name[nn]=Ymse
 Name[pa]=ਫੁਟਕਲ
@@ -84,9 +86,11 @@
 Comment[ja]=その他の設定
 Comment[km]=ការ​កំណត់​ដែល​មិន​ត្រូវ​នឹង​កន្លែង​ផ្សេង
 Comment[lt]=Kiti nustatymai
+Comment[mk]=Поставувања што не се вклопуваат на друго место
 Comment[ms]=Seting yang tidak muat di tempat lain
 Comment[nb]=Instillinger som ikke passer andre steder
 Comment[nds]=Verscheden Instellen
+Comment[ne]=कतै पनि नमिल्ने सेटिङ
 Comment[nl]=Instellingen die nergens echt passen
 Comment[nn]=Innstillingar som ikkje passar andre stader
 Comment[pl]=Ustawienia, które nie pasują gdzie indziej
@@ -128,9 +132,11 @@
 Keywords[ja]=kmail,その他
 Keywords[km]=kmail,ផ្សេងៗ
 Keywords[lt]=kmail,misc,įvairūs
+Keywords[mk]=kmail,misc,кпошта,разно
 Keywords[ms]=kmail,pelbagai
 Keywords[nb]=kmail,div
 Keywords[nds]=KMail,anner,saken
+Keywords[ne]=केडीई मेल, विविध
 Keywords[nl]=kmail,diversen
 Keywords[nn]=KMail,ymse
 Keywords[pl]=kmail,różne,inne
Index: kmail/kmfoldermaildir.cpp
===================================================================
--- kmail/kmfoldermaildir.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kmail/kmfoldermaildir.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -28,7 +28,6 @@
 #include <kstaticdeleter.h>
 #include <kmessagebox.h>
 
-#include <ctype.h>
 #include <dirent.h>
 #include <errno.h>
 #include <stdlib.h>
@@ -406,7 +405,7 @@
   if ( !uidHeader.isEmpty() && stripUid )
     aMsg->removeHeaderField( "X-UID" );
 
-  msgText = aMsg->asString();
+  msgText = aMsg->asString(); // TODO use asDwString instead
   len = msgText.length();
 
   // Re-add the uid so that the take can make use of it, in case the
@@ -734,7 +733,7 @@
         int cidx = contentTypeStr.find( "charset=" );
         if ( cidx != -1 ) {
           charset = contentTypeStr.mid( cidx + 8 );
-          if ( charset[0] == '"' ) {
+          if ( !charset.isEmpty() && ( charset[0] == '"' ) ) {
             charset = charset.mid( 1 );
           }
           cidx = 0;
Index: kmail/folderdiaquotatab_p.cpp
===================================================================
--- kmail/folderdiaquotatab_p.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 0)
+++ kmail/folderdiaquotatab_p.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -0,0 +1,111 @@
+/**
+ * folderdiaquotatab.cpp
+ *
+ * Copyright (c) 2006 Till Adam <adam@kde.org>
+ *
+ *
+ *  This program is free software; you can redistribute it and/or modify
+ *  it under the terms of the GNU General Public License as published by
+ *  the Free Software Foundation; version 2 of the License
+ *
+ *  This program is distributed in the hope that it will be useful,
+ *  but WITHOUT ANY WARRANTY; without even the implied warranty of
+ *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+ *  GNU General Public License for more details.
+ *
+ *  You should have received a copy of the GNU General Public License
+ *  along with this program; if not, write to the Free Software
+ *  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA.
+ *
+ *  In addition, as a special exception, the copyright holders give
+ *  permission to link the code of this program with any edition of
+ *  the Qt library by Trolltech AS, Norway (or with modified versions
+ *  of Qt that use the same license as Qt), and distribute linked
+ *  combinations including the two.  You must obey the GNU General
+ *  Public License in all respects for all of the code used other than
+ *  Qt.  If you modify this file, you may extend this exception to
+ *  your version of the file, but you are not obligated to do so.  If
+ *  you do not wish to do so, delete this exception statement from
+ *  your version.
+ */
+
+#include "folderdiaquotatab_p.h"
+
+#include <qlayout.h>
+#include <qlabel.h>
+#include <qprogressbar.h>
+#include <qwhatsthis.h>
+#include <qcombobox.h>
+
+#include <math.h>
+
+#include "kmkernel.h"
+#include "klocale.h"
+#include "kconfig.h"
+#include "kdebug.h"
+#include "kdialog.h"
+#include "globalsettings.h"
+#include "quotajobs.h"
+
+using namespace KMail;
+
+struct QuotaInfo;
+
+QuotaWidget::QuotaWidget( QWidget* parent, const char* name )
+        :QWidget( parent, name )
+{
+      QVBoxLayout *box = new QVBoxLayout(this);
+      QWidget *stuff = new QWidget( this );
+      QGridLayout* layout =
+          new QGridLayout( stuff, 3, 3,
+                           KDialog::marginHint(),
+                           KDialog::spacingHint() );
+      mInfoLabel = new QLabel("", stuff );
+      mRootLabel = new QLabel("", stuff );
+      mProgressBar = new QProgressBar( stuff );
+      layout->addWidget( new QLabel( i18n("Root:" ), stuff ), 0, 0 );
+      layout->addWidget( mRootLabel, 0, 1 );
+      layout->addWidget( new QLabel( i18n("Usage:"), stuff ), 1, 0 );
+      //layout->addWidget( new QLabel( i18n("Status:"), stuff ), 2, 0 );
+      layout->addWidget( mInfoLabel, 1, 1 );
+      layout->addWidget( mProgressBar, 2, 1 );
+      box->addWidget( stuff );
+      box->addStretch( 2 );
+
+      readConfig();
+}
+
+void QuotaWidget::setQuotaInfo( const QuotaInfo& info )
+{
+      // we are assuming only to get STORAGE type info here, thus
+      // casting to int is safe
+      int current = info.current().toInt();
+      int max = info.max().toInt();
+      int factor = static_cast<int> ( pow( 1000, mFactor ) );
+      mProgressBar->setProgress( current, max );
+      mInfoLabel->setText( i18n("%1 of %2 %3 used").arg( current/factor )
+                                .arg( max/factor ).arg( mUnits ) );
+      mRootLabel->setText( info.root() );
+}
+
+void QuotaWidget::readConfig()
+{
+      if( GlobalSettings::self()->quotaUnit() == GlobalSettings::EnumQuotaUnit::KB )
+      {
+            mUnits = QString( i18n("KB") );
+            mFactor = 0;
+      }
+      else if( GlobalSettings::self()->quotaUnit() == GlobalSettings::EnumQuotaUnit::MB )
+           {
+                mUnits = QString( i18n("MB") );
+                mFactor = 1;
+           }
+      else if( GlobalSettings::self()->quotaUnit() == GlobalSettings::EnumQuotaUnit::GB )
+           {
+               mUnits = QString( i18n("GB") );
+               mFactor = 2;
+           }
+}
+
+
+#include "folderdiaquotatab_p.moc"
Index: kmail/Makefile.am
===================================================================
--- kmail/Makefile.am	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kmail/Makefile.am	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -109,6 +109,7 @@
                 keyresolver.cpp globalsettings.cpp globalsettings_base.kcfgc \
                 regexplineedit.cpp rulewidgethandlermanager.cpp \
                 headerlistquicksearch.cpp acljobs.cpp folderdiaacltab.cpp \
+                quotajobs.cpp folderdiaquotatab.cpp folderdiaquotatab_p.cpp \
                 partnodebodypart.cpp \
                 expirejob.cpp compactionjob.cpp jobscheduler.cpp callback.cpp \
                 searchjob.cpp renamejob.cpp \
Index: kmail/messagecomposer.h
===================================================================
--- kmail/messagecomposer.h	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kmail/messagecomposer.h	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -135,9 +135,7 @@
    * Get message ready for sending or saving.
    * This must be done _before_ signing and/or encrypting it.
    */
-  QCString breakLinesAndApplyCodec();
-  /// Same as above but ensure \n termination
-  QCString bodyText();
+  QByteArray breakLinesAndApplyCodec();
 
   /**
    * Create a plain text version of a marked up mail for use as the plain
@@ -149,13 +147,13 @@
    * Get signature for a message (into mMessage).
    * To build nice S/MIME objects signing and encoding must be separated.
    */
-  void pgpSignedMsg( const QCString & cText, Kleo::CryptoMessageFormat f );
+  void pgpSignedMsg( const QByteArray& cText, Kleo::CryptoMessageFormat f );
   /**
    * Get encrypted message.
    * To build nice S/MIME objects signing and encrypting must be separate.
    */
   Kpgp::Result pgpEncryptedMsg( QByteArray& rEncryptedBody,
-                                const QCString & cText,
+                                const QByteArray& cText,
                                 const std::vector<GpgME::Key> & encryptionKeys,
 				Kleo::CryptoMessageFormat f );
 
@@ -164,7 +162,7 @@
    * To build nice S/MIME objects signing and encrypting must be separate.
    */
   Kpgp::Result pgpSignedAndEncryptedMsg( QByteArray& rEncryptedBody,
-					 const QCString & cText,
+					 const QByteArray& cText,
 					 const std::vector<GpgME::Key> & signingKeys,
 					 const std::vector<GpgME::Key> & encryptionKeys,
 					 Kleo::CryptoMessageFormat f );
@@ -192,7 +190,7 @@
                                const QCString contentSubtypeClear,
                                const QCString contentDispClear,
                                const QCString contentTEncClear,
-                               const QCString& bodytext,
+                               const QByteArray& bodytext,
                                const QString contentDescriptionCiph,
                                const QByteArray& ciphertext,
                                KMMessagePart& resultingPart,
@@ -213,6 +211,7 @@
 
 private:
   void doNextJob();
+  void emitDone( bool ok );
 
   int encryptionPossible( const QStringList & recipients, bool openPGP );
   bool determineWhetherToSign( bool doSignCompletely );
@@ -256,14 +255,14 @@
   bool mRc; // Set this to false, if something fails during the processes
   bool mHoldJobs; // Don't run the next job yet
 
-  QCString mText; // textual representation of the message text, encoded
+  QByteArray mText; // textual representation of the message text, encoded
   unsigned int mLineBreakColumn; // used for line breaking
 
   // These are the variables of the big composeMessage(X,Y,Z) message
   KMMessagePart* mNewBodyPart;
   QByteArray mSignature;
 
-  QCString mEncodedBody; // Only needed if signing and/or encrypting
+  QByteArray mEncodedBody; // Only needed if signing and/or encrypting
   bool mEarlyAddAttachments, mAllAttachmentsAreInBody;
   KMMessagePart mOldBodyPart;
   int mPreviousBoundaryLevel;
Index: kmail/kmail_config_composer.desktop
===================================================================
--- kmail/kmail_config_composer.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kmail/kmail_config_composer.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -37,9 +37,11 @@
 Name[ja]=メール作成
 Name[km]=កម្មវិធី​តែង
 Name[lt]=Redaktorius
+Name[mk]=Составувач
 Name[ms]=Penggubah
 Name[nb]=Komposer
 Name[nds]=Nettbreef-Editor
+Name[ne]=कम्पोजर
 Name[nl]=Opsteller
 Name[nn]=Skrivefelt
 Name[pa]=ਲੇਖਕ
@@ -74,8 +76,10 @@
 Comment[hu]=Sablonok, általános működési jellemzők
 Comment[it]=Modelli e comportamento generale
 Comment[ja]=テンプレートと全般的な動作
-Comment[km]= ពុម្ព & ឥរិយាបថ​ទូទៅ
+Comment[km]= ពុម្ព និង​ឥរិយាបថ​ទូទៅ
+Comment[mk]=Обрасци и општо однесување
 Comment[nds]=Vörlagen un allgemeen Bedregen
+Comment[ne]=टेम्प्लेट र साधारण व्यवहार
 Comment[nl]=Sjablonen en algemeen gedrag
 Comment[pl]=Szablony i ogólne zachowanie
 Comment[pt]=Modelos e Comportamento Geral
@@ -87,6 +91,7 @@
 Comment[sr@Latn]=Šabloni i opšte ponašanje
 Comment[sv]=Mallar och allmänt uppträdande
 Comment[uk]=Шаблони та загальна поведінка
+Comment[zh_CN]=模板和常规行为
 Comment[zh_TW]=樣本與一般行為
 Keywords=kmail,composer
 Keywords[bg]=пощенски, клиент, е-поща, редактор, съставител, форматиране, текст, kmail, komposer
@@ -109,9 +114,11 @@
 Keywords[it]=kmail,compositore
 Keywords[km]=kmail កម្មវិធី​តែង
 Keywords[lt]=kmail,composer,redaktorius
+Keywords[mk]=kmail,composer,кпошта,составувач
 Keywords[ms]=kmail,penggubah
 Keywords[nb]=kmail,komposer
 Keywords[nds]=KMail,Editor,Nettbreefeditor
+Keywords[ne]=केडीई मेल, कम्पोजर
 Keywords[nl]=kmail,opsteller
 Keywords[nn]=KMail,skrivefelt
 Keywords[pl]=kmail,kompozytor,edytor
Index: kmail/quotajobs.cpp
===================================================================
--- kmail/quotajobs.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 0)
+++ kmail/quotajobs.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -0,0 +1,147 @@
+/**
+ * quotajobs.cpp
+ *
+ * Copyright (c) 2006 Till Adam <adam@kde.org>
+ *
+ *
+ *  This program is free software; you can redistribute it and/or modify
+ *  it under the terms of the GNU General Public License as published by
+ *  the Free Software Foundation; version 2 of the License
+ *
+ *  This program is distributed in the hope that it will be useful,
+ *  but WITHOUT ANY WARRANTY; without even the implied warranty of
+ *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+ *  GNU General Public License for more details.
+ *
+ *  You should have received a copy of the GNU General Public License
+ *  along with this program; if not, write to the Free Software
+ *  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA.
+ *
+ *  In addition, as a special exception, the copyright holders give
+ *  permission to link the code of this program with any edition of
+ *  the Qt library by Trolltech AS, Norway (or with modified versions
+ *  of Qt that use the same license as Qt), and distribute linked
+ *  combinations including the two.  You must obey the GNU General
+ *  Public License in all respects for all of the code used other than
+ *  Qt.  If you modify this file, you may extend this exception to
+ *  your version of the file, but you are not obligated to do so.  If
+ *  you do not wish to do so, delete this exception statement from
+ *  your version.
+ */
+#include "quotajobs.h"
+#include <kio/scheduler.h>
+#include <kdebug.h>
+
+using namespace KMail;
+
+QuotaJobs::GetQuotarootJob* QuotaJobs::getQuotaroot(
+    KIO::Slave* slave, const KURL& url )
+{
+  QByteArray packedArgs;
+  QDataStream stream( packedArgs, IO_WriteOnly );
+  stream << (int)'Q' << (int)'R' << url;
+
+  GetQuotarootJob* job = new GetQuotarootJob( url, packedArgs, false );
+  KIO::Scheduler::assignJobToSlave( slave, job );
+  return job;
+}
+
+QuotaJobs::GetQuotarootJob::GetQuotarootJob( const KURL& url,
+                                             const QByteArray &packedArgs,
+                                             bool showProgressInfo )
+  : KIO::SimpleJob( url, KIO::CMD_SPECIAL, packedArgs, showProgressInfo )
+{
+  connect( this, SIGNAL(infoMessage(KIO::Job*,const QString&)),
+           SLOT(slotInfoMessage(KIO::Job*,const QString&)) );
+}
+
+void QuotaJobs::GetQuotarootJob::slotInfoMessage( KIO::Job*, const QString& str )
+{
+  // Parse the result
+  QStringList results = QStringList::split("\r", str);
+  QStringList roots;
+  QuotaInfoList quotas;
+  if ( results.size() > 0 ) {
+    // the first line is the available roots
+    roots = QStringList::split(" ", results.front() );
+    results.pop_front();
+    // the rest are pairs of root -> list of triplets
+    while ( results.size() > 0 ) {
+      QString root = results.front(); results.pop_front();
+      // and the quotas
+      if ( results.size() > 0 ) {
+        QStringList triplets = QStringList::split(" ", results.front() );
+        results.pop_front();
+        while ( triplets.size() > 0 ) {
+          // there's always three, the label, current and max values
+          QString name = triplets.front(); triplets.pop_front();
+          QString current = triplets.front(); triplets.pop_front();
+          QString max = triplets.front(); triplets.pop_front();
+          QuotaInfo info( name, root, current, max );
+          quotas.append( info );
+        }
+      }
+    }
+  }
+  if ( !quotas.isEmpty() ) {
+    emit quotaInfoReceived( quotas );
+  }
+  emit quotaRootResult( roots );
+}
+
+QuotaJobs::GetStorageQuotaJob* QuotaJobs::getStorageQuota(
+    KIO::Slave* slave, const KURL& url )
+{
+  GetStorageQuotaJob* job = new GetStorageQuotaJob( slave, url );
+  return job;
+}
+
+
+QuotaJobs::GetStorageQuotaJob::GetStorageQuotaJob( KIO::Slave* slave, const KURL& url )
+  : KIO::Job( false )
+{
+    QByteArray packedArgs;
+    QDataStream stream( packedArgs, IO_WriteOnly );
+    stream << (int)'Q' << (int)'R' << url;
+
+    QuotaJobs::GetQuotarootJob *job =
+        new QuotaJobs::GetQuotarootJob( url, packedArgs, false );
+    connect(job, SIGNAL(quotaInfoReceived(const QuotaInfoList&)),
+            SLOT(slotQuotaInfoReceived(const QuotaInfoList&)));
+    connect(job, SIGNAL(quotaRootResult(const QStringList&)),
+            SLOT(slotQuotarootResult(const QStringList&)));
+    KIO::Scheduler::assignJobToSlave( slave, job );
+    addSubjob( job );
+}
+
+void QuotaJobs::GetStorageQuotaJob::slotQuotarootResult( const QStringList& roots )
+{
+    Q_UNUSED(roots); // we only support one for now
+    if ( !mStorageQuotaInfo.isValid() && !error() ) {
+      // No error, so the account supports quota, but no usable info
+      // was transmitted => no quota set on the folder. Make the info
+      // valid, bit leave it empty.
+      mStorageQuotaInfo.setName( "STORAGE" );
+    }
+    if ( mStorageQuotaInfo.isValid() )
+      emit storageQuotaResult( mStorageQuotaInfo );
+}
+
+void QuotaJobs::GetStorageQuotaJob::slotQuotaInfoReceived( const QuotaInfoList& infos )
+{
+    QuotaInfoList::ConstIterator it( infos.begin() );
+    while ( it != infos.end() ) {
+      // FIXME we only use the first storage quota, for now
+      if ( it->name() == "STORAGE" && !mStorageQuotaInfo.isValid() ) {
+          mStorageQuotaInfo = *it;
+      }
+      ++it;
+    }
+}
+
+QuotaInfo QuotaJobs::GetStorageQuotaJob::storageQuotaInfo() const
+{
+  return mStorageQuotaInfo;
+}
+
+#include "quotajobs.moc"
Index: kmail/kmreaderwin.cpp
===================================================================
--- kmail/kmreaderwin.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kmail/kmreaderwin.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -636,13 +636,13 @@
   mSelectEncodingAction->setItems( encodings );
   mSelectEncodingAction->setCurrentItem( 0 );
 
-  mMailToComposeAction = new KAction( i18n("New Message To..."), 0, this,
-                                      SLOT(slotMailtoCompose()), ac,
+  mMailToComposeAction = new KAction( i18n("New Message To..."), "mail_new",
+                                      0, this, SLOT(slotMailtoCompose()), ac,
                                       "mailto_compose" );
-  mMailToReplyAction = new KAction( i18n("Reply To..."), 0, this,
-				    SLOT(slotMailtoReply()), ac,
+  mMailToReplyAction = new KAction( i18n("Reply To..."), "mail_reply",
+                                    0, this, SLOT(slotMailtoReply()), ac,
 				    "mailto_reply" );
-  mMailToForwardAction = new KAction( i18n("Forward To..."),
+  mMailToForwardAction = new KAction( i18n("Forward To..."), "mail_forward",
                                       0, this, SLOT(slotMailtoForward()), ac,
                                       "mailto_forward" );
   mAddAddrBookAction = new KAction( i18n("Add to Address Book"),
@@ -1354,7 +1354,7 @@
 	     "<p style='margin-bottom: 0px'>&nbsp; &nbsp; The KMail Team</p>")
     .arg(KMAIL_VERSION) // KMail version
     .arg("help:/kmail/index.html") // KMail help:// URL
-    .arg("http://kmail.kde.org/") // KMail homepage URL
+    .arg("http://kontact.kde.org/kmail/") // KMail homepage URL
     .arg("1.8").arg("3.4"); // prior KMail and KDE version
 
   QString featureItems;
@@ -1614,13 +1614,13 @@
       unencryptedMessage->setParent( 0 );
       // because this did not work:
       /*
-      DwMessage dwMsg( DwString( aMsg->asString() ) );
+      DwMessage dwMsg( aMsg->asDwString() );
       dwMsg.Body() = DwBody( DwString( resultString.data() ) );
       dwMsg.Body().Parse();
       KMMessage* unencryptedMessage = new KMMessage( &dwMsg );
       */
-kdDebug(5006) << "KMReaderWin  -  resulting message:" << unencryptedMessage->asString() << endl;
-kdDebug(5006) << "KMReaderWin  -  attach unencrypted message to aMsg" << endl;
+      //kdDebug(5006) << "KMReaderWin  -  resulting message:" << unencryptedMessage->asString() << endl;
+      kdDebug(5006) << "KMReaderWin  -  attach unencrypted message to aMsg" << endl;
       aMsg->setUnencryptedMsg( unencryptedMessage );
       emitReplaceMsgByUnencryptedVersion = true;
     }
Index: kmail/kmmessage.cpp
===================================================================
--- kmail/kmmessage.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kmail/kmmessage.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -64,6 +64,7 @@
 #include <klocale.h>
 #include <stdlib.h>
 #include <unistd.h>
+#include "util.h"
 
 #if ALLOW_GUI
 #include <kmessagebox.h>
@@ -87,21 +88,11 @@
 
 //-----------------------------------------------------------------------------
 KMMessage::KMMessage(DwMessage* aMsg)
-  : KMMsgBase(),
-    mMsg(aMsg),
-    mNeedsAssembly(true),
-    mDecodeHTML(false),
-    mOverrideCodec(0),
-    mFolderOffset( 0 ),
-    mMsgSize(0),
-    mMsgLength( 0 ),
-    mDate( 0 ),
-    mEncryptionState( KMMsgEncryptionStateUnknown ),
-    mSignatureState( KMMsgSignatureStateUnknown ),
-    mMDNSentState( KMMsgMDNStateUnknown ),
-    mUnencryptedMsg(0),
-    mLastUpdated( 0 )
+  : KMMsgBase()
 {
+  init( aMsg );
+  // aMsg might need assembly
+  mNeedsAssembly = true;
 }
 
 //-----------------------------------------------------------------------------
@@ -138,10 +129,14 @@
   assign( other );
 }
 
-void KMMessage::init()
+void KMMessage::init( DwMessage* aMsg )
 {
   mNeedsAssembly = false;
+  if ( aMsg ) {
+    mMsg = aMsg;
+  } else {
   mMsg = new DwMessage;
+  }
   mOverrideCodec = 0;
   mDecodeHTML = false;
   mComplete = true;
@@ -212,7 +207,7 @@
 {
   DwHeaders& header = mMsg->Headers();
   if (header.HasMessageId())
-    return header.MessageId().AsString().c_str();
+    return KMail::Util::CString( header.MessageId().AsString() );
   else
     return "";
 }
@@ -294,7 +289,7 @@
 }
 
 //-----------------------------------------------------------------------------
-const DwMessage *KMMessage::asDwMessage()
+const DwMessage* KMMessage::asDwMessage()
 {
   if (mNeedsAssembly)
   {
@@ -306,23 +301,21 @@
 
 //-----------------------------------------------------------------------------
 QCString KMMessage::asString() const {
-  return asDwString().c_str();
+  return KMail::Util::CString( asDwString() );
 }
 
 
-QCString KMMessage::asSendableString() const
+QByteArray KMMessage::asSendableString() const
 {
-  KMMessage msg;
-  msg.fromString(asString());
+  KMMessage msg( new DwMessage( *this->mMsg ) );
   msg.removePrivateHeaderFields();
   msg.removeHeaderField("Bcc");
-  return msg.asString();
+  return KMail::Util::ByteArray( msg.asDwString() ); // and another copy again!
 }
 
 QCString KMMessage::headerAsSendableString() const
 {
-  KMMessage msg;
-  msg.fromString(asString());
+  KMMessage msg( new DwMessage( *this->mMsg ) );
   msg.removePrivateHeaderFields();
   msg.removeHeaderField("Bcc");
   return msg.headerAsString().latin1();
@@ -392,7 +385,7 @@
 }
 
 void KMMessage::fromString( const QCString & str, bool aSetStatus ) {
-  return fromDwString( DwString( str.data() ), aSetStatus );
+  return fromDwString( KMail::Util::dwString( str ), aSetStatus );
 }
 
 void KMMessage::fromDwString(const DwString& str, bool aSetStatus)
@@ -1105,12 +1098,10 @@
 
 KMMessage* KMMessage::createRedirect( const QString &toStr )
 {
-  KMMessage* msg = new KMMessage;
+  // copy the message 1:1
+  KMMessage* msg = new KMMessage( new DwMessage( *this->mMsg ) );
   KMMessagePart msgPart;
 
-  // copy the message 1:1
-  msg->fromDwString(this->asDwString());
-
   uint id = 0;
   QString strId = msg->headerField( "X-KMail-Identity" ).stripWhiteSpace();
   if ( !strId.isEmpty())
@@ -1195,6 +1186,7 @@
   // preserved
   if ( type() == DwMime::kTypeMultipart ||
      ( type() == DwMime::kTypeText && subtype() == DwMime::kSubtypePlain ) ) {
+    // ## slow, we could probably use: delete msg->mMsg; msg->mMsg = new DwMessage( this->mMsg );
     msg->fromDwString( this->asDwString() );
     // remember the type and subtype, initFromMessage sets the contents type to
     // text/plain, via initHeader, for unclear reasons
@@ -1250,7 +1242,7 @@
     KMMessagePart secondPart;
     secondPart.setType( type() );
     secondPart.setSubtype( subtype() );
-    secondPart.setBody( mMsg->Body().AsString().c_str() );
+    secondPart.setBody( mMsg->Body().AsString() );
     // use the headers of the original mail
     applyHeadersToMessagePart( mMsg->Headers(), &secondPart );
     msg->addBodyPart(&secondPart);
@@ -1761,10 +1753,10 @@
   unixTime = header.Date().AsUnixTime();
 
   QCString result = ctime(&unixTime);
+  int len = result.length();
+  if (result[len-1]=='\n')
+    result.truncate(len-1);
 
-  if (result[result.length()-1]=='\n')
-    result.truncate(result.length()-1);
-
   return result;
 }
 
@@ -2469,10 +2461,11 @@
 //-----------------------------------------------------------------------------
 QCString KMMessage::body() const
 {
-  DwString body = mMsg->Body().AsString();
-  QCString str = body.c_str();
-  kdWarning( str.length() != body.length(), 5006 )
-    << "KMMessage::body(): body is binary but used as text!" << endl;
+  const DwString& body = mMsg->Body().AsString();
+  QCString str = KMail::Util::CString( body );
+  // Calls length() -> slow
+  //kdWarning( str.length() != body.length(), 5006 )
+  //  << "KMMessage::body(): body is binary but used as text!" << endl;
   return str;
 }
 
@@ -2481,7 +2474,7 @@
 QByteArray KMMessage::bodyDecodedBinary() const
 {
   DwString dwstr;
-  DwString dwsrc = mMsg->Body().AsString();
+  const DwString& dwsrc = mMsg->Body().AsString();
 
   switch (cte())
   {
@@ -2522,13 +2515,13 @@
     break;
   }
 
-  unsigned int len = dwstr.size();
-  QCString result(len+1);
-  memcpy(result.data(),dwstr.data(),len);
-  result[len] = 0;
-  kdWarning(result.length() != len, 5006)
-    << "KMMessage::bodyDecoded(): body is binary but used as text!" << endl;
-  return result;
+  return KMail::Util::CString( dwstr );
+
+  // Calling QCString::length() is slow
+  //QCString result = KMail::Util::CString( dwstr );
+  //kdWarning(result.length() != len, 5006)
+  //  << "KMMessage::bodyDecoded(): body is binary but used as text!" << endl;
+  //return result;
 }
 
 
@@ -2609,7 +2602,7 @@
                                     bool allow8Bit,
                                     bool willBeSigned )
 {
-  CharFreq cf( aBuf.data(), aBuf.length() ); // it's safe to pass null strings
+  CharFreq cf( aBuf.data(), aBuf.size()-1 ); // it's safe to pass null strings
 
   allowedCte = determineAllowedCtes( cf, allow8Bit, willBeSigned );
 
@@ -2676,9 +2669,19 @@
 //-----------------------------------------------------------------------------
 void KMMessage::setBody(const QCString& aStr)
 {
-  mMsg->Body().FromString(aStr.data());
+  mMsg->Body().FromString(KMail::Util::dwString(aStr));
   mNeedsAssembly = TRUE;
 }
+void KMMessage::setBody(const DwString& aStr)
+{
+  mMsg->Body().FromString(aStr);
+  mNeedsAssembly = TRUE;
+}
+void KMMessage::setBody(const char* aStr)
+{
+  mMsg->Body().FromString(aStr);
+  mNeedsAssembly = TRUE;
+}
 
 void KMMessage::setMultiPartBody( const QCString & aStr ) {
   setBody( aStr );
@@ -2874,14 +2877,14 @@
 
 void applyHeadersToMessagePart( DwHeaders& headers, KMMessagePart* aPart )
 {
-  // TODO: Instead of manually implementing RFC2231 header encoding (i.e. 
-  //       possibly multiple values given as paramname*0=..; parmaname*1=..;... 
+  // TODO: Instead of manually implementing RFC2231 header encoding (i.e.
+  //       possibly multiple values given as paramname*0=..; parmaname*1=..;...
   //       or par as paramname*0*=..; parmaname*1*=..;..., which should be
   //       concatenated), use a generic method to decode the header, using RFC
   //       2047 or 2231, or whatever future RFC might be appropriate!
   //       Right now, some fields are decoded, while others are not. E.g.
   //       Content-Disposition is not decoded here, rather only on demand in
-  //       KMMsgPart::fileName; Name however is decoded here and stored as a 
+  //       KMMsgPart::fileName; Name however is decoded here and stored as a
   //       decoded String in KMMsgPart...
   // Content-type
   QCString additionalCTypeParams;
@@ -2964,9 +2967,9 @@
 
     // Body
     if (withBody)
-      aPart->setBody( aDwBodyPart->Body().AsString().c_str() );
+      aPart->setBody( aDwBodyPart->Body().AsString() );
     else
-      aPart->setBody( "" );
+      aPart->setBody( QCString("") );
 
     // Content-id
     if ( headers.HasContentId() ) {
@@ -2987,7 +2990,7 @@
     //aPart->setName(" ");
     aPart->setContentDescription("");
     aPart->setContentDisposition("");
-    aPart->setBody("");
+    aPart->setBody(QCString(""));
     aPart->setContentId("");
   }
 }
@@ -3135,8 +3138,9 @@
   if (!contDisp.isEmpty())
     headers.ContentDisposition().FromString(contDisp);
 
-  if (!aPart->body().isNull())
-    part->Body().FromString(aPart->body());
+  const DwString bodyStr = aPart->dwBody();
+  if (!bodyStr.empty())
+    part->Body().FromString(bodyStr);
   else
     part->Body().FromString("");
 
@@ -3194,7 +3198,7 @@
 //-----------------------------------------------------------------------------
 QCString KMMessage::html2source( const QCString & src )
 {
-  QCString result( 1 + 6*src.length() );  // maximal possible length
+  QCString result( 1 + 6*(src.size()-1) );  // maximal possible length
 
   QCString::ConstIterator s = src.begin();
   QCString::Iterator d = result.begin();
Index: kmail/partNode.cpp
===================================================================
--- kmail/partNode.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kmail/partNode.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -37,6 +37,7 @@
 #include <mimelib/utility.h>
 #include <qregexp.h>
 #include <kasciistricmp.h>
+#include "util.h"
 
 /*
   ===========================================================================
@@ -179,7 +180,7 @@
     return mEncodedBody;
 
   if ( mDwPart )
-    mEncodedBody = mDwPart->Body().AsString().c_str();
+    mEncodedBody = KMail::Util::CString( mDwPart->Body().AsString() );
   else
     mEncodedBody = 0;
   mEncodedOk = true;
Index: kmail/configuredialog_p.h
===================================================================
--- kmail/configuredialog_p.h	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kmail/configuredialog_p.h	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -349,6 +349,7 @@
   Q_OBJECT
 public:
   AccountsPageReceivingTab( QWidget * parent=0, const char * name=0 );
+  ~AccountsPageReceivingTab();
   QString helpAnchor() const;
   void save();
 
@@ -384,7 +385,7 @@
     QGuardedPtr< KMAccount > oldAccount;
     QGuardedPtr< KMAccount > newAccount;
   };
-  // ### make this a qptrlist:
+  // ### make this value-based:
   QValueList< ModifiedAccountsType* >  mModifiedAccounts;
 };
 
@@ -972,6 +973,7 @@
   KIntSpinBox  *mDelayedMarkTime;
   QCheckBox    *mShowPopupAfterDnD;
   KMail::FolderRequester *mOnStartupOpenFolder;
+  QComboBox    *mQuotaCmbBox;
 };
 
 class MiscPageGroupwareTab : public ConfigModuleTab  {
Index: kmail/folderdiaquotatab_p.h
===================================================================
--- kmail/folderdiaquotatab_p.h	(.../tags/KDE/3.5.6/kdepim)	(wersja 0)
+++ kmail/folderdiaquotatab_p.h	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -0,0 +1,66 @@
+/**
+ * folderdiaquotatab.h
+ *
+ * Copyright (c) 2006 Till Adam <adam@kde.org>
+ *
+ *
+ *  This program is free software; you can redistribute it and/or modify
+ *  it under the terms of the GNU General Public License as published by
+ *  the Free Software Foundation; version 2 of the License
+ *
+ *  This program is distributed in the hope that it will be useful,
+ *  but WITHOUT ANY WARRANTY; without even the implied warranty of
+ *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+ *  GNU General Public License for more details.
+ *
+ *  You should have received a copy of the GNU General Public License
+ *  along with this program; if not, write to the Free Software
+ *  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA.
+ *
+ *  In addition, as a special exception, the copyright holders give
+ *  permission to link the code of this program with any edition of
+ *  the Qt library by Trolltech AS, Norway (or with modified versions
+ *  of Qt that use the same license as Qt), and distribute linked
+ *  combinations including the two.  You must obey the GNU General
+ *  Public License in all respects for all of the code used other than
+ *  Qt.  If you modify this file, you may extend this exception to
+ *  your version of the file, but you are not obligated to do so.  If
+ *  you do not wish to do so, delete this exception statement from
+ *  your version.
+ */
+
+
+#ifndef FOLDERDIAQUOTA_P_H
+#define FOLDERDIAQUOTA_P_H
+
+
+#include <qlabel.h>
+#include <qprogressbar.h>
+#include <qwhatsthis.h>
+
+#include "quotajobs.h"
+
+namespace KMail {
+
+class QuotaWidget : public QWidget {
+
+ Q_OBJECT
+public:
+    QuotaWidget( QWidget* parent, const char* name = 0 );
+    virtual ~QuotaWidget() { }
+    void setQuotaInfo( const KMail::QuotaInfo& info );
+
+private:
+    void readConfig();
+
+private:
+    QLabel* mInfoLabel;
+    QLabel* mRootLabel;
+    QProgressBar* mProgressBar;
+    QString mUnits;
+    int mFactor;
+};
+
+}//end of namespace KMail
+
+#endif /* FOLDERDIAQUOTA_H */
Index: kmail/kmail_config_identity.desktop
===================================================================
--- kmail/kmail_config_identity.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kmail/kmail_config_identity.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -14,7 +14,7 @@
 
 Name=Identities
 Name[ar]=الهويات
-Name[be]=Увасабленьні
+Name[be]=Увасабленні
 Name[bg]=Самоличност
 Name[br]=Anvelezhioù
 Name[bs]=Identiteti
@@ -38,9 +38,11 @@
 Name[ja]=個人情報
 Name[km]=អត្តសញ្ញាណ
 Name[lt]=Tapatybės
+Name[mk]=Идентитети
 Name[ms]=Identiti
 Name[nb]=Identiteter
 Name[nds]=Identiteten
+Name[ne]=परिचय
 Name[nl]=Identiteiten
 Name[nn]=Identitetar
 Name[pl]=Tożsamości
@@ -63,7 +65,7 @@
 Comment=Manage Identities
 Comment[af]=Bestuur identiteite
 Comment[ar]=تدبير الهويات
-Comment[be]=Кіраваньне увасабленьнямі
+Comment[be]=Кіраванне увасабленнямі
 Comment[bg]=Настройки на самоличността
 Comment[br]=Merañ an anvelezhioù
 Comment[bs]=Upravljaj identitetima
@@ -86,9 +88,11 @@
 Comment[ja]=個人情報の管理
 Comment[km]=គ្រប់គ្រង​អត្តសញ្ញាណ
 Comment[lt]=Tvarkyti tapatybes
+Comment[mk]=Менаџирајте ги идентитетите
 Comment[ms]=Uruskan identiti
 Comment[nb]=Identitetsbehandling
 Comment[nds]=Identiteten plegen
+Comment[ne]=परिचय व्यवस्थापन गर्नुहोस्
 Comment[nl]=Identiteiten beheren
 Comment[nn]=Handter identitetar
 Comment[pl]=Zarządzanie tożsamościami
@@ -108,7 +112,7 @@
 Comment[zh_CN]=管理身份
 Comment[zh_TW]=管理身份
 Keywords=kmail,identity
-Keywords[be]=K Пошта,увасабленьне,kmail,identity
+Keywords[be]=K Пошта,увасабленне,kmail,identity
 Keywords[bg]=пощенски, клиент, е-поща, самоличност, информация, kmail, identity
 Keywords[br]=kmail,anvelezh
 Keywords[bs]=kmail,identity,identitet
@@ -132,9 +136,11 @@
 Keywords[ja]=kmail,個人情報
 Keywords[km]=kmail,អត្តសញ្ញាណ
 Keywords[lt]=kmail,identity,tapatybė
+Keywords[mk]=kmail,identity,кпошта,идентитет,идентитети
 Keywords[ms]=kmail,identiti
 Keywords[nb]=kmail,identitet
 Keywords[nds]=KMail,Identiteet,Identiteten
+Keywords[ne]=केडीई मेल, परिचय
 Keywords[nl]=kmail,identiteit
 Keywords[nn]=KMail,identitet
 Keywords[pl]=kmail,tożsamość,tożsamości
Index: kmail/kmaccount.cpp
===================================================================
--- kmail/kmaccount.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kmail/kmaccount.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -151,6 +151,11 @@
   {
     setFolder(kmkernel->folderMgr()->findIdString(folderName), true);
   }
+
+  if (mInterval == 0)
+    deinstallTimer();
+  else
+    installTimer();
 }
 
 
@@ -278,15 +283,10 @@
 void KMAccount::setCheckInterval(int aInterval)
 {
   if (aInterval <= 0)
-  {
     mInterval = 0;
-    deinstallTimer();
-  }
   else
-  {
     mInterval = aInterval;
-    installTimer();
-  }
+  // Don't call installTimer from here! See #117935.
 }
 
 //----------------------------------------------------------------------------
Index: kmail/kmcommands.cpp
===================================================================
--- kmail/kmcommands.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kmail/kmcommands.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -690,9 +690,8 @@
     return Failed;
 
   // Take a copy of the original message, which remains unchanged.
-  KMMessage *newMsg = new KMMessage;
+  KMMessage *newMsg = new KMMessage( new DwMessage( *msg->asDwMessage() ) );
   newMsg->setComplete( msg->isComplete() );
-  newMsg->fromString( msg->asString() );
 
   KMail::Composer *win = KMail::makeComposer();
   newMsg->setTransferInProgress( false ); // From here on on, the composer owns the message.
@@ -876,13 +875,11 @@
 void KMSaveMsgCommand::slotMessageRetrievedForSaving(KMMessage *msg)
 {
   if ( msg ) {
-    QCString str( msg->mboxMessageSeparator() );
-    str += KMFolderMbox::escapeFrom( msg->asString() );
-    str += '\n';
+    mData = KMFolderMbox::escapeFrom( msg->asDwString() );
+    KMail::Util::insert( mData, 0, msg->mboxMessageSeparator() );
+    KMail::Util::append( mData, "\n" );
     msg->setTransferInProgress(false);
 
-    mData = str;
-    mData.resize(mData.size() - 1);
     mOffset = 0;
     QByteArray data;
     int size;
@@ -1176,7 +1173,6 @@
   if (msgList.count() >= 2) { // Multiple forward
 
     uint id = 0;
-    // QCString msgText = "";
     QPtrList<KMMessage> linklist;
     for ( KMMessage *msg = msgList.first(); msg; msg = msgList.next() ) {
       // set the identity
@@ -1476,7 +1472,6 @@
   if (msgList.count() >= 2) { // Multiple forward
 
     uint id = 0;
-    // QCString msgText = "";
     QPtrList<KMMessage> linklist;
     for ( KMMessage *msg = msgList.first(); msg; msg = msgList.next() ) {
       // set the identity
@@ -1918,12 +1913,11 @@
       // imap => imap with same account
       list.append(msg);
     } else {
-      newMsg = new KMMessage;
+      newMsg = new KMMessage( new DwMessage( *msg->asDwMessage() ) );
       newMsg->setComplete(msg->isComplete());
       // make sure the attachment state is only calculated when it's complete
       if (!newMsg->isComplete())
         newMsg->setReadyToShow(false);
-      newMsg->fromString(msg->asString());
       newMsg->setStatus(msg->status());
 
       if (srcFolder && !newMsg->isComplete())
@@ -2563,9 +2557,7 @@
   {
     // This does not decode the Message Content-Transfer-Encoding
     // but saves the _original_ content of the message part
-    QCString cstr( node->msgPart().body() );
-    data = cstr;
-    data.resize(data.size() - 1);
+    data = KMail::Util::ByteArray( node->msgPart().dwBody() );
   }
   else
   {
Index: kmail/messagecomposer.cpp
===================================================================
--- kmail/messagecomposer.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kmail/messagecomposer.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -294,6 +294,7 @@
 MessageComposer::~MessageComposer()
 {
   delete mKeyResolver; mKeyResolver = 0;
+  delete mNewBodyPart; mNewBodyPart = 0;
 }
 
 void MessageComposer::applyChanges( bool disableCrypto )
@@ -338,7 +339,7 @@
 
   if( mJobs.isEmpty() ) {
     // No more jobs. Signal that we're done
-    emit done( mRc );
+    emitDone( mRc );
     return;
   }
 
@@ -348,7 +349,7 @@
       delete mJobs.front();
       mJobs.pop_front();
     }
-    emit done( false );
+    emitDone( false );
     return;
   }
 
@@ -356,6 +357,15 @@
   QTimer::singleShot( 0, this, SLOT( slotDoNextJob() ) );
 }
 
+void MessageComposer::emitDone( bool b )
+{
+  // Save memory - before sending the mail
+  mEncodedBody = QByteArray();
+  delete mNewBodyPart; mNewBodyPart = 0;
+  mOldBodyPart.clear();
+  emit done( b );
+}
+
 void MessageComposer::slotDoNextJob()
 {
   assert( !mCurrentJob );
@@ -495,6 +505,7 @@
   mIsRichText = mComposeWin->mEditor->textFormat() == Qt::RichText;
   mIdentityUid = mComposeWin->identityUid();
   mText = breakLinesAndApplyCodec();
+  assert( mText.isEmpty() || mText[mText.size()-1] == '\n' );
   // Hopefully we can get rid of this eventually, it's needed to be able
   // to break the plain/text version of a multipart/alternative (html) mail
   // according to the line breaks of the richtext version.
@@ -1115,18 +1126,18 @@
 class EncryptMessageJob : public MessageComposerJob {
 public:
   EncryptMessageJob( KMMessage* msg, const Kleo::KeyResolver::SplitInfo & si,
-                     bool doSign, bool doEncrypt, const QCString& encodedBody,
-                     int boundaryLevel, const KMMessagePart& oldBodyPart,
+                     bool doSign, bool doEncrypt, const QByteArray& encodedBody,
+                     int boundaryLevel, /*const KMMessagePart& oldBodyPart,*/
                      KMMessagePart* newBodyPart, Kleo::CryptoMessageFormat format,
 		     MessageComposer* composer )
     : MessageComposerJob( composer ), mMsg( msg ), mSplitInfo( si ),
       mDoSign( doSign ), mDoEncrypt( doEncrypt ), mEncodedBody( encodedBody ),
-      mBoundaryLevel( boundaryLevel ), mOldBodyPart( oldBodyPart ),
+      mBoundaryLevel( boundaryLevel ), /*mOldBodyPart( oldBodyPart ),*/
       mNewBodyPart( newBodyPart ), mFormat( format ) {}
 
   void execute() {
     KMMessagePart tmpNewBodyPart;
-    tmpNewBodyPart.duplicate( *mNewBodyPart );
+    tmpNewBodyPart.duplicate( *mNewBodyPart ); // slow - we duplicate everything again
 
     // TODO: Async call
 
@@ -1143,9 +1154,9 @@
   KMMessage* mMsg;
   Kleo::KeyResolver::SplitInfo mSplitInfo;
   bool mDoSign, mDoEncrypt;
-  QCString mEncodedBody;
+  QByteArray mEncodedBody;
   int mBoundaryLevel;
-  KMMessagePart mOldBodyPart;
+  //KMMessagePart mOldBodyPart;
   KMMessagePart* mNewBodyPart;
   Kleo::CryptoMessageFormat mFormat;
 };
@@ -1162,38 +1173,12 @@
   }
 };
 
-QCString MessageComposer::bodyText()
-{
-  QCString body = mText;
-
-  if (body.isNull()) return body;
-
-  if (body.isEmpty()) body = "\n"; // don't crash
-
-  // From RFC 3156:
-  //  Note: The accepted OpenPGP convention is for signed data to end
-  //  with a <CR><LF> sequence.  Note that the <CR><LF> sequence
-  //  immediately preceding a MIME boundary delimiter line is considered
-  //  to be part of the delimiter in [3], 5.1.  Thus, it is not part of
-  //  the signed data preceding the delimiter line.  An implementation
-  //  which elects to adhere to the OpenPGP convention has to make sure
-  //  it inserts a <CR><LF> pair on the last line of the data to be
-  //  signed and transmitted (signed message and transmitted message
-  //  MUST be identical).
-  // So make sure that the body ends with a <LF>.
-  if( body[body.length()-1] != '\n' ) {
-    kdDebug(5006) << "Added an <LF> on the last line" << endl;
-    body += "\n";
-  }
-  return body;
-}
-
 void MessageComposer::composeInlineOpenPGPMessage( KMMessage& theMessage,
                                                    bool doSign, bool doEncrypt )
 {
   // preprocess the body text
-  QCString body = bodyText();
-  if (body.isNull()) {
+  const QByteArray bodyData = mText;
+  if (bodyData.isNull()) {
     mRc = false;
     return;
   }
@@ -1222,10 +1207,10 @@
       QByteArray encryptedBody;
       if ( doSign ) {  // Sign and encrypt
         const std::vector<GpgME::Key> signingKeys = mKeyResolver->signingKeys( Kleo::InlineOpenPGPFormat );
-        result = pgpSignedAndEncryptedMsg( encryptedBody, body, signingKeys,
+        result = pgpSignedAndEncryptedMsg( encryptedBody, bodyData, signingKeys,
                                            splitInfo.keys, Kleo::InlineOpenPGPFormat );
       } else { // Encrypt but don't sign
-        result = pgpEncryptedMsg( encryptedBody, body,
+        result = pgpEncryptedMsg( encryptedBody, bodyData,
                                   splitInfo.keys, Kleo::InlineOpenPGPFormat );
       }
       if ( result != Kpgp::Ok ) {
@@ -1236,15 +1221,15 @@
       mOldBodyPart.setBodyEncodedBinary( encryptedBody );
     } else {
       if ( doSign ) { // Sign but don't encrypt
-        pgpSignedMsg( body, Kleo::InlineOpenPGPFormat );
+        pgpSignedMsg( bodyData, Kleo::InlineOpenPGPFormat );
         if ( mSignature.isNull() ) {
           mRc = false;
           return;
         }
         mOldBodyPart.setBodyEncodedBinary( mSignature );
       } else { // don't sign nor encrypt -> nothing to do
-        assert( !body.isNull() );
-        mOldBodyPart.setBodyEncoded( body );
+        assert( !bodyData.isNull() );
+        mOldBodyPart.setBodyEncodedBinary( bodyData );
       }
     }
     mOldBodyPart.setContentDisposition( "inline" );
@@ -1254,7 +1239,7 @@
     mMessageList.push_back( msg );
     if ( it == splitInfos.begin() ) {
       if ( doEncrypt && !saveMessagesEncrypted() ) {
-        mOldBodyPart.setBodyEncoded( body );
+        mOldBodyPart.setBodyEncodedBinary( bodyData );
         KMMessage* msgUnenc = new KMMessage( theMessage );
         addBodyAndAttachments( msgUnenc, splitInfo, false, false, mOldBodyPart, Kleo::InlineOpenPGPFormat );
         msg->setUnencryptedMsg( msgUnenc );
@@ -1274,8 +1259,8 @@
   assert( chiasmus ); // kmcomposewin code should have made sure
 
   // preprocess the body text
-  QCString body = bodyText();
-  if (body.isNull()) {
+  const QByteArray bodyData = mText;
+  if (bodyData.isNull()) {
     mRc = false;
     return;
   }
@@ -1290,9 +1275,6 @@
   theMessage.removeHeaderField("Content-Type");
   theMessage.removeHeaderField("Content-Transfer-Encoding");
 
-  QByteArray plainText;
-  plainText.duplicate( body.data(), body.length() ); // hrmpf...
-
   // This reads strange, but we know that AdjustCryptFlagsJob created a single splitinfo,
   // under the given "format" (usually openpgp/mime; doesn't matter)
   const std::vector<Kleo::KeyResolver::SplitInfo> splitInfos
@@ -1304,7 +1286,7 @@
     KMMessage* msg = new KMMessage( theMessage );
     QByteArray encryptedBody;
 
-    if ( !encryptWithChiasmus( chiasmus, plainText, encryptedBody ) ) {
+    if ( !encryptWithChiasmus( chiasmus, bodyData, encryptedBody ) ) {
       mRc = false;
       return;
     }
@@ -1330,7 +1312,7 @@
     mMessageList.push_back( msg );
 
     if ( it == splitInfos.begin() && !saveMessagesEncrypted() ) {
-      mOldBodyPart.setBodyEncoded( body );
+      mOldBodyPart.setBodyEncodedBinary( bodyData );
       KMMessage* msgUnenc = new KMMessage( theMessage );
       addBodyAndAttachments( msgUnenc, splitInfo, false, false, mOldBodyPart, Kleo::InlineOpenPGPFormat );
       msg->setUnencryptedMsg( msgUnenc );
@@ -1361,8 +1343,8 @@
   theMessage.setBody( "This message is in MIME format." );
 
   // preprocess the body text
-  QCString body = bodyText();
-  if (body.isNull()) {
+  QByteArray bodyData = mText;
+  if (bodyData.isNull()) {
     mRc = false;
     return;
   }
@@ -1430,14 +1412,14 @@
     QCString newbody;
     DwMediaType tmpCT;
     tmpCT.CreateBoundary( ++mPreviousBoundaryLevel );
-    boundaryCStr = tmpCT.Boundary().c_str();
+    boundaryCStr = KMail::Util::CString( tmpCT.Boundary() );
     QValueList<int> allowedCTEs;
 
     KMMessagePart textBodyPart;
     textBodyPart.setTypeStr("text");
     textBodyPart.setSubtypeStr("plain");
 
-    QCString textbody = plainTextFromMarkup( mText );
+    QCString textbody = plainTextFromMarkup( mText /* converted to QString */ );
 
     // the signed body must not be 8bit encoded
     textBodyPart.setBodyAndGuessCte( textbody, allowedCTEs,
@@ -1457,13 +1439,13 @@
     KMMessagePart htmlBodyPart;
     htmlBodyPart.setTypeStr("text");
     htmlBodyPart.setSubtypeStr("html");
-    QCString htmlbody = mText;
+    QByteArray htmlbody = mText;
     // the signed body must not be 8bit encoded
     htmlBodyPart.setBodyAndGuessCte( htmlbody, allowedCTEs,
                                      !kmkernel->msgSender()->sendQuotedPrintable() && !doSign,
 				     doSign );
     htmlBodyPart.setCharset( mCharset );
-    htmlBodyPart.setBodyEncoded( htmlbody );
+    htmlBodyPart.setBodyEncodedBinary( htmlbody );
     DwBodyPart* htmlDwPart = theMessage.createDWBodyPart( &htmlBodyPart );
     htmlDwPart->Assemble();
     newbody += "\n--";
@@ -1476,8 +1458,8 @@
     newbody += "--";
     newbody +=     boundaryCStr;
     newbody +=                 "--\n";
-    body = newbody;
-    mOldBodyPart.setBodyEncoded( newbody );
+    bodyData = KMail::Util::byteArrayFromQCStringNoDetach( newbody );
+    mOldBodyPart.setBodyEncodedBinary( bodyData );
 
     mSaveBoundary = tmpCT.Boundary();
   }
@@ -1518,28 +1500,30 @@
     innerBodyPart.setContentDisposition( "inline" );
     QValueList<int> allowedCTEs;
     // the signed body must not be 8bit encoded
-    innerBodyPart.setBodyAndGuessCte( body, allowedCTEs,
+    innerBodyPart.setBodyAndGuessCte( bodyData, allowedCTEs,
                                       !kmkernel->msgSender()->sendQuotedPrintable() && !doSign,
                                       doSign );
     if ( !mIsRichText )
       innerBodyPart.setCharset( mCharset );
-    innerBodyPart.setBodyEncoded( body ); // do we need this, since setBodyAndGuessCte does this already?
+    innerBodyPart.setBodyEncodedBinary( bodyData ); // do we need this, since setBodyAndGuessCte does this already?
     DwBodyPart* innerDwPart = theMessage.createDWBodyPart( &innerBodyPart );
     innerDwPart->Assemble();
+    QByteArray tmpbody = KMail::Util::ByteArray( innerDwPart->AsString() );
     if ( mIsRichText ) { // and add our mp/a boundary
-        QCString tmpbody = innerDwPart->AsString().c_str();
         int boundPos = tmpbody.find( '\n' );
         if( -1 < boundPos ) {
           QCString bStr( ";\n  boundary=\"" );
           bStr += mSaveBoundary.c_str();
           bStr += "\"";
-          body = innerDwPart->AsString().c_str();
-          body.insert( boundPos, bStr );
-          body = "--" + mMultipartMixedBoundary + "\n" + body;
+          bodyData = tmpbody;
+          KMail::Util::insert( bodyData, boundPos, bStr );
+          KMail::Util::insert( bodyData, 0, "--" + mMultipartMixedBoundary + "\n" ); // prepend
         }
     }
-    else
-      body = "--" + mMultipartMixedBoundary + "\n" + innerDwPart->AsString().c_str();
+    else {
+      bodyData = tmpbody;
+      KMail::Util::insert( bodyData, 0, "--" + mMultipartMixedBoundary + "\n" ); // prepend
+    }
     delete innerDwPart;
     innerDwPart = 0;
     // add all matching Attachments
@@ -1548,22 +1532,23 @@
       if ( it->encrypt == doEncryptBody && it->sign == doSignBody ) {
         innerDwPart = theMessage.createDWBodyPart( it->part );
         innerDwPart->Assemble();
-        body += "\n--" + mMultipartMixedBoundary + "\n" + innerDwPart->AsString().c_str();
+        KMail::Util::append( bodyData, QCString( "\n--" + mMultipartMixedBoundary + "\n" ) );
+        KMail::Util::append( bodyData, innerDwPart->AsString().c_str() );
         delete innerDwPart;
         innerDwPart = 0;
       }
     }
-    body += "\n--" + mMultipartMixedBoundary + "--\n";
+    KMail::Util::append( bodyData, QCString( "\n--" + mMultipartMixedBoundary + "--\n" ) );
   } else { // !earlyAddAttachments
     QValueList<int> allowedCTEs;
     // the signed body must not be 8bit encoded
-    mOldBodyPart.setBodyAndGuessCte(body, allowedCTEs, !kmkernel->msgSender()->sendQuotedPrintable() && !doSign,
+    mOldBodyPart.setBodyAndGuessCte(bodyData, allowedCTEs, !kmkernel->msgSender()->sendQuotedPrintable() && !doSign,
                                    doSign);
     if ( !mIsRichText )
       mOldBodyPart.setCharset(mCharset);
   }
   // create S/MIME body part for signing and/or encrypting
-  mOldBodyPart.setBodyEncoded( body );
+  mOldBodyPart.setBodyEncodedBinary( bodyData );
 
   if( doSignBody || doEncryptBody ) {
     // get string representation of body part (including the attachments)
@@ -1577,13 +1562,12 @@
       DwMediaType& ct = headers.ContentType();
       ct.SetBoundary(mSaveBoundary);
       dwPart->Assemble();
-      mEncodedBody = dwPart->AsString().c_str();
     }
     else {
       dwPart = theMessage.createDWBodyPart( &mOldBodyPart );
       dwPart->Assemble();
-      mEncodedBody = dwPart->AsString().c_str();
     }
+    mEncodedBody = KMail::Util::ByteArray( dwPart->AsString() );
     delete dwPart;
     dwPart = 0;
 
@@ -1595,7 +1579,7 @@
         QCString bStr( ";\n  boundary=\"" );
         bStr += mMultipartMixedBoundary;
         bStr += "\"";
-        mEncodedBody.insert( boundPos, bStr );
+        KMail::Util::insert( mEncodedBody, boundPos, bStr.data() );
       }
     }
 
@@ -1606,6 +1590,7 @@
   }
 
   if ( doSignBody ) {
+
     pgpSignedMsg( mEncodedBody, format );
 
     if ( mSignature.isEmpty() ) {
@@ -1655,7 +1640,7 @@
 					     Kleo::KeyResolver::SplitInfo( splitInfos.front().recipients ), doSign,
 					     false, mEncodedBody,
 					     mPreviousBoundaryLevel,
-					     mOldBodyPart, mNewBodyPart,
+					     /*mOldBodyPart,*/ mNewBodyPart,
 					     format, this ) );
   }
 
@@ -1663,7 +1648,7 @@
     mJobs.push_front( new EncryptMessageJob( new KMMessage( theMessage ), *it, doSign,
 					     doEncrypt, mEncodedBody,
 					     mPreviousBoundaryLevel,
-					     mOldBodyPart, mNewBodyPart,
+					     /*mOldBodyPart,*/ mNewBodyPart,
 					     format, this ) );
 }
 
@@ -1684,16 +1669,17 @@
   const bool doSignBody = doSign && mSignBody;
 
   if ( doEncryptBody ) {
-    QCString innerContent;
+    QByteArray innerContent;
     if ( doSignBody ) {
       // extract signed body from newBodyPart
       DwBodyPart* dwPart = msg->createDWBodyPart( &newBodyPart );
       dwPart->Assemble();
-      innerContent = dwPart->AsString().c_str();
+      innerContent = KMail::Util::ByteArray( dwPart->AsString() );
       delete dwPart;
       dwPart = 0;
-    } else
+    } else {
       innerContent = mEncodedBody;
+    }
 
     // now do the encrypting:
     // replace simple LFs by CRLFs for all MIME supporting CryptPlugs
@@ -1784,7 +1770,7 @@
 
       DwBodyPart* innerDwPart = msg->createDWBodyPart( it->part );
       innerDwPart->Assemble();
-      QCString encodedAttachment = innerDwPart->AsString().c_str();
+      QByteArray encodedAttachment = KMail::Util::ByteArray( innerDwPart->AsString() );
       delete innerDwPart;
       innerDwPart = 0;
 
@@ -1795,10 +1781,8 @@
 
       // sign this attachment
       if( signThisNow ) {
-
         pgpSignedMsg( encodedAttachment, format );
-        QByteArray signature = mSignature;
-        mRc = !signature.isEmpty();
+        mRc = !mSignature.isEmpty();
         if( mRc ) {
           mRc = processStructuringInfo( "http://www.gnupg.org/aegypten/",
                                         it->part->contentDescription(),
@@ -1808,14 +1792,14 @@
                                         it->part->contentTransferEncodingStr(),
                                         encodedAttachment,
                                         "signature",
-                                        signature,
+                                        mSignature,
                                         newAttachPart, true, format );
           if( mRc ) {
             if( encryptThisNow ) {
               rEncryptMessagePart = newAttachPart;
               DwBodyPart* dwPart = msg->createDWBodyPart( &newAttachPart );
               dwPart->Assemble();
-              encodedAttachment = dwPart->AsString().c_str();
+              encodedAttachment = KMail::Util::ByteArray( dwPart->AsString() );
               delete dwPart;
               dwPart = 0;
             }
@@ -1880,7 +1864,7 @@
       kdDebug(5006) << "MessageComposer::addBodyAndAttachments() : top level headers and body adjusted" << endl;
 
     // set body content
-    msg->setBody(ourFineBodyPart.body() );
+    msg->setBody( ourFineBodyPart.dwBody() );
 
   }
 
@@ -1902,12 +1886,13 @@
                                               const QCString contentSubtypeClear,
                                               const QCString contentDispClear,
                                               const QCString contentTEncClear,
-                                              const QCString& clearCStr,
+                                              const QByteArray& clearCStr,
                                               const QString /*contentDescCiph*/,
                                               const QByteArray& ciphertext,
                                               KMMessagePart& resultingPart,
 					      bool signing, Kleo::CryptoMessageFormat format )
 {
+  assert( clearCStr.isEmpty() || clearCStr[clearCStr.size()-1] != '\0' ); // I was called with a QCString !?
   bool bOk = true;
 
   if ( makeMimeObject( format, signing ) ) {
@@ -1955,12 +1940,13 @@
     KMMessage::bodyPart( &mainDwPa, &resultingPart );
     if( !makeMultiMime( format, signing ) ) {
       if ( signing && includeCleartextWhenSigning( format ) ) {
-        QCString bodyText( clearCStr );
-        bodyText += '\n';
-        bodyText += QCString( ciphertext.data(), ciphertext.size() + 1 );
-        resultingPart.setBodyEncoded( bodyText );
-      } else
+        QByteArray bodyText( clearCStr );
+        KMail::Util::append( bodyText, "\n" );
+        KMail::Util::append( bodyText, ciphertext );
+        resultingPart.setBodyEncodedBinary( bodyText );
+      } else {
         resultingPart.setBodyEncodedBinary( ciphertext );
+      }
     } else {
       // Build the encapsulated MIME parts.
       // Build a MIME part holding the version information
@@ -1993,18 +1979,24 @@
 	codeCStr += '\n' + QCString( ciphertext.data(), ciphertext.size() + 1 );
 
 
-      QCString mainStr = "--" + boundaryCStr;
+      QByteArray mainStr;
+      KMail::Util::append( mainStr, "--" );
+      KMail::Util::append( mainStr, boundaryCStr );
       if ( signing && includeCleartextWhenSigning( format ) &&
-	   !clearCStr.isEmpty() )
-        mainStr += "\n" + clearCStr + "\n--" + boundaryCStr;
+	   !clearCStr.isEmpty() ) {
+        KMail::Util::append( mainStr, "\n" );
+        // clearCStr is the one that can be very big for large attachments, don't merge with the other lines
+        KMail::Util::append( mainStr, clearCStr );
+        KMail::Util::append( mainStr, "\n--" + boundaryCStr );
+      }
       if ( !versCStr.isEmpty() )
-        mainStr += "\n" + versCStr + "\n--" + boundaryCStr;
+        KMail::Util::append( mainStr, "\n" + versCStr + "\n--" + boundaryCStr );
       if( !codeCStr.isEmpty() )
-        mainStr += "\n" + codeCStr + "\n--" + boundaryCStr;
-      mainStr += "--\n";
+        KMail::Util::append( mainStr, "\n" + codeCStr + "\n--" + boundaryCStr );
+      KMail::Util::append( mainStr, "--\n" );
 
       //kdDebug(5006) << "processStructuringInfo: mainStr=" << mainStr << endl;
-      resultingPart.setBodyEncoded( mainStr );
+      resultingPart.setBodyEncodedBinary( mainStr );
     }
 
   } else { //  not making a mime object, build a plain message body.
@@ -2014,14 +2006,14 @@
     resultingPart.setSubtypeStr( contentSubtypeClear );
     resultingPart.setContentDisposition( contentDispClear );
     resultingPart.setContentTransferEncodingStr( contentTEncClear );
-    QCString resultingBody;
+    QByteArray resultingBody;
 
     if ( signing && includeCleartextWhenSigning( format ) ) {
       if( !clearCStr.isEmpty() )
-        resultingBody += clearCStr;
+        KMail::Util::append( resultingBody, clearCStr );
     }
     if ( !ciphertext.isEmpty() )
-      resultingBody += QCString( ciphertext.data(), ciphertext.size() + 1 ); // null-terminate
+      KMail::Util::append( resultingBody, ciphertext );
     else {
       // Plugin error!
       KMessageBox::sorry( mComposeWin,
@@ -2031,7 +2023,7 @@
                           .arg( bugURL ) );
       bOk = false;
     }
-    resultingPart.setBodyEncoded( resultingBody );
+    resultingPart.setBodyEncodedBinary( resultingBody );
   }
 
   return bOk;
@@ -2065,7 +2057,7 @@
 }
 
 //-----------------------------------------------------------------------------
-QCString MessageComposer::breakLinesAndApplyCodec()
+QByteArray MessageComposer::breakLinesAndApplyCodec()
 {
   QString text;
   QCString cText;
@@ -2103,17 +2095,33 @@
                                                i18n("Lose Characters"), i18n("Change Encoding") ) == KMessageBox::Yes );
     if( !anyway ) {
       mComposeWin->mEditor->setText(oldText);
-      return QCString();
+      return QByteArray();
     }
   }
 
-  return cText;
+  // From RFC 3156:
+  //  Note: The accepted OpenPGP convention is for signed data to end
+  //  with a <CR><LF> sequence.  Note that the <CR><LF> sequence
+  //  immediately preceding a MIME boundary delimiter line is considered
+  //  to be part of the delimiter in [3], 5.1.  Thus, it is not part of
+  //  the signed data preceding the delimiter line.  An implementation
+  //  which elects to adhere to the OpenPGP convention has to make sure
+  //  it inserts a <CR><LF> pair on the last line of the data to be
+  //  signed and transmitted (signed message and transmitted message
+  //  MUST be identical).
+  // So make sure that the body ends with a <LF>.
+  if( cText.isEmpty() || cText[cText.length()-1] != '\n' ) {
+    kdDebug(5006) << "Added an <LF> on the last line" << endl;
+    cText += "\n";
+  }
+  return KMail::Util::byteArrayFromQCStringNoDetach( cText );
 }
 
 
 //-----------------------------------------------------------------------------
-void MessageComposer::pgpSignedMsg( const QCString & cText, Kleo::CryptoMessageFormat format ) {
+void MessageComposer::pgpSignedMsg( const QByteArray& cText, Kleo::CryptoMessageFormat format ) {
 
+  assert( cText.isEmpty() || cText[cText.size()-1] != '\0' ); // I was called with a QCString !?
   mSignature = QByteArray();
 
   const std::vector<GpgME::Key> signingKeys = mKeyResolver->signingKeys( format );
@@ -2139,11 +2147,9 @@
     return;
   }
 
-  QByteArray plainText;
-  plainText.duplicate( cText.data(), cText.length() ); // hrmpf...
   QByteArray signature;
   const GpgME::SigningResult res =
-    job->exec( signingKeys, plainText, signingMode( format ), signature );
+    job->exec( signingKeys, cText, signingMode( format ), signature );
   if ( res.error().isCanceled() ) {
     kdDebug() << "signing was canceled by user" << endl;
     return;
@@ -2165,7 +2171,7 @@
 
 //-----------------------------------------------------------------------------
 Kpgp::Result MessageComposer::pgpEncryptedMsg( QByteArray & encryptedBody,
-                                               const QCString & cText,
+                                               const QByteArray& cText,
                                                const std::vector<GpgME::Key> & encryptionKeys,
 					       Kleo::CryptoMessageFormat format )
 {
@@ -2187,11 +2193,8 @@
     return Kpgp::Failure;
   }
 
-  QByteArray plainText;
-  plainText.duplicate( cText.data(), cText.length() ); // hrmpf...
-
   const GpgME::EncryptionResult res =
-    job->exec( encryptionKeys, plainText, false, encryptedBody );
+    job->exec( encryptionKeys, cText, false, encryptedBody );
   if ( res.error().isCanceled() ) {
     kdDebug() << "encryption was canceled by user" << endl;
     return Kpgp::Canceled;
@@ -2205,7 +2208,7 @@
 }
 
 Kpgp::Result MessageComposer::pgpSignedAndEncryptedMsg( QByteArray & encryptedBody,
-							const QCString & cText,
+							const QByteArray& cText,
 							const std::vector<GpgME::Key> & signingKeys,
 							const std::vector<GpgME::Key> & encryptionKeys,
 							Kleo::CryptoMessageFormat format )
@@ -2228,11 +2231,8 @@
     return Kpgp::Failure;
   }
 
-  QByteArray plainText;
-  plainText.duplicate( cText.data(), cText.length() ); // hrmpf...
-
   const std::pair<GpgME::SigningResult,GpgME::EncryptionResult> res =
-    job->exec( signingKeys, encryptionKeys, plainText, false, encryptedBody );
+    job->exec( signingKeys, encryptionKeys, cText, false, encryptedBody );
   if ( res.first.error().isCanceled() || res.second.error().isCanceled() ) {
     kdDebug() << "encrypt/sign was canceled by user" << endl;
     return Kpgp::Canceled;
Index: kmail/kmfoldercachedimap.cpp
===================================================================
--- kmail/kmfoldercachedimap.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kmail/kmfoldercachedimap.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -71,6 +71,7 @@
 #include <qlayout.h>
 #include <qvaluelist.h>
 #include "annotationjobs.h"
+#include "quotajobs.h"
 using namespace KMail;
 #include <globalsettings.h>
 
@@ -152,7 +153,8 @@
     mFolderRemoved( false ),
     /*mHoldSyncs( false ),*/ mRecurse( true ),
     mStatusChangedLocally( false ), mAnnotationFolderTypeChanged( false ),
-    mIncidencesForChanged( false ), mPersonalNamespacesCheckDone( true )
+    mIncidencesForChanged( false ), mPersonalNamespacesCheckDone( true ),
+    mQuotaInfo()
 {
   setUidValidity("");
   // if we fail to read a uid file but there is one, nuke it
@@ -216,6 +218,21 @@
 //  kdDebug(5006) << ( mImapPath.isEmpty() ? label() : mImapPath )
 //                << " readConfig: mIncidencesFor=" << mIncidencesFor << endl;
 
+  mUserRights = config->readNumEntry( "UserRights", 0 ); // default is we don't know
+
+  int storageQuotaUsage = config->readNumEntry( "StorageQuotaUsage", -1 );
+  int storageQuotaLimit = config->readNumEntry( "StorageQuotaLimit", -1 );
+  QString storageQuotaRoot = config->readEntry( "StorageQuotaRoot", QString::null );
+  if ( !storageQuotaRoot.isNull() ) { // isEmpty() means we know there is no quota set
+      mQuotaInfo.setName( "STORAGE" );
+      mQuotaInfo.setRoot( storageQuotaRoot );
+
+      if ( storageQuotaUsage > -1 )
+        mQuotaInfo.setCurrent( storageQuotaUsage );
+      if ( storageQuotaLimit > -1 )
+        mQuotaInfo.setMax( storageQuotaLimit );
+  }
+
   KMFolderMaildir::readConfig();
 
   mStatusChangedLocally =
@@ -242,11 +259,11 @@
       configGroup.deleteEntry( "ImapPathCreation" );
     }
   }
-  writeAnnotationConfig();
+  writeConfigKeysWhichShouldNotGetOverwrittenByReadConfig();
   KMFolderMaildir::writeConfig();
 }
 
-void KMFolderCachedImap::writeAnnotationConfig()
+void KMFolderCachedImap::writeConfigKeysWhichShouldNotGetOverwrittenByReadConfig()
 {
   KConfigGroup configGroup( KMKernel::config(), "Folder-" + folder()->idString() );
   if ( !folder()->noContent() )
@@ -255,6 +272,21 @@
     configGroup.writeEntry( "Annotation-FolderType", mAnnotationFolderType );
     configGroup.writeEntry( "IncidencesForChanged", mIncidencesForChanged );
     configGroup.writeEntry( "IncidencesFor", incidencesForToString( mIncidencesFor ) );
+    configGroup.writeEntry( "UserRights", mUserRights );
+
+    if ( mQuotaInfo.isValid() ) {
+      if ( mQuotaInfo.current().isValid() ) {
+        configGroup.writeEntry( "StorageQuotaUsage", mQuotaInfo.current().toInt() );
+      }
+      if ( mQuotaInfo.max().isValid() ) {
+        configGroup.writeEntry( "StorageQuotaLimit", mQuotaInfo.max().toInt() );
+      }
+      configGroup.writeEntry( "StorageQuotaRoot", mQuotaInfo.root() );
+    } else {
+      configGroup.deleteEntry( "StorageQuotaUsage");
+      configGroup.deleteEntry( "StorageQuotaRoot");
+      configGroup.deleteEntry( "StorageQuotaLimit");
+    }
   }
 }
 
@@ -618,6 +650,7 @@
   case SYNC_STATE_SET_ANNOTATIONS:   return "SYNC_STATE_SET_ANNOTATIONS";
   case SYNC_STATE_GET_ACLS:          return "SYNC_STATE_GET_ACLS";
   case SYNC_STATE_SET_ACLS:          return "SYNC_STATE_SET_ACLS";
+  case SYNC_STATE_GET_QUOTA:         return "SYNC_STATE_GET_QUOTA";
   case SYNC_STATE_FIND_SUBFOLDERS:   return "SYNC_STATE_FIND_SUBFOLDERS";
   case SYNC_STATE_SYNC_SUBFOLDERS:   return "SYNC_STATE_SYNC_SUBFOLDERS";
   case SYNC_STATE_RENAME_FOLDER:     return "SYNC_STATE_RENAME_FOLDER";
@@ -1027,8 +1060,7 @@
     }
 
   case SYNC_STATE_GET_ACLS:
-    // Continue with the subfolders
-    mSyncState = SYNC_STATE_FIND_SUBFOLDERS;
+    mSyncState = SYNC_STATE_GET_QUOTA;
 
     if( !noContent() && mAccount->hasACLSupport() ) {
       newState( mProgress, i18n( "Retrieving permissions" ) );
@@ -1037,7 +1069,22 @@
                this, SLOT(slotReceivedACL( KMFolder*, KIO::Job*, const KMail::ACLList& )) );
       break;
     }
-
+  case SYNC_STATE_GET_QUOTA:
+    // Continue with the subfolders
+    mSyncState = SYNC_STATE_FIND_SUBFOLDERS;
+    if( !noContent() && mAccount->hasQuotaSupport() ) {
+      newState( mProgress, i18n("Getting quota information"));
+      KURL url = mAccount->getUrl();
+      url.setPath( imapPath() );
+      KIO::Job* job = KMail::QuotaJobs::getStorageQuota( mAccount->slave(), url );
+      ImapAccountBase::jobData jd( url.url(), folder() );
+      mAccount->insertJob(job, jd);
+      connect( job, SIGNAL( storageQuotaResult( const QuotaInfo& ) ),
+          SLOT( slotStorageQuotaResult( const QuotaInfo& ) ) );
+      connect( job, SIGNAL(result(KIO::Job *)),
+          SLOT(slotQuotaResult(KIO::Job *)) );
+      break;
+    }
   case SYNC_STATE_FIND_SUBFOLDERS:
     {
       mProgress = 98;
@@ -1996,6 +2043,7 @@
 KMFolderCachedImap::setUserRights( unsigned int userRights )
 {
   mUserRights = userRights;
+  writeConfigKeysWhichShouldNotGetOverwrittenByReadConfig();
 }
 
 void
@@ -2034,6 +2082,13 @@
 }
 
 void
+KMFolderCachedImap::slotStorageQuotaResult( const QuotaInfo& info )
+{
+    mQuotaInfo = info;
+    writeConfigKeysWhichShouldNotGetOverwrittenByReadConfig();
+}
+
+void
 KMFolderCachedImap::setACLList( const ACLList& arr )
 {
   mACLList = arr;
@@ -2169,7 +2224,7 @@
     kdDebug(5006) << mImapPath << ": updateAnnotationFolderType: '" << mAnnotationFolderType << "', was (" << oldType << " " << oldSubType << ") => mAnnotationFolderTypeChanged set to TRUE" << endl;
   }
   // Ensure that further readConfig()s don't lose mAnnotationFolderType
-  writeAnnotationConfig();
+  writeConfigKeysWhichShouldNotGetOverwrittenByReadConfig();
 }
 
 void KMFolderCachedImap::setIncidencesFor( IncidencesFor incfor )
@@ -2225,7 +2280,7 @@
             markUnreadAsRead();
 
           // Ensure that further readConfig()s don't lose mAnnotationFolderType
-          writeAnnotationConfig();
+          writeConfigKeysWhichShouldNotGetOverwrittenByReadConfig();
           break;
         }
       }
@@ -2275,6 +2330,33 @@
   serverSyncInternal();
 }
 
+void KMFolderCachedImap::slotQuotaResult( KIO::Job* job )
+{
+  KMAcctCachedImap::JobIterator it = mAccount->findJob(job);
+  Q_ASSERT( it != mAccount->jobsEnd() );
+  if ( it == mAccount->jobsEnd() ) return; // Shouldn't happen
+  Q_ASSERT( (*it).parent == folder() );
+  if ( (*it).parent != folder() ) return; // Shouldn't happen
+
+  QuotaJobs::GetStorageQuotaJob* quotajob = static_cast<QuotaJobs::GetStorageQuotaJob *>( job );
+  QuotaInfo empty;
+  if ( quotajob->error() ) {
+    if ( job->error() == KIO::ERR_UNSUPPORTED_ACTION ) {
+      // that's when the imap server doesn't support quota
+      mAccount->setHasNoQuotaSupport();
+      mQuotaInfo = empty;
+    }
+    else
+      kdWarning(5006) << "slotGetQuotaResult: " << job->errorString() << endl;
+  }
+
+  if (mAccount->slave()) mAccount->removeJob(job);
+  mProgress += 2;
+  serverSyncInternal();
+}
+
+
+
 void
 KMFolderCachedImap::slotAnnotationChanged( const QString& entry, const QString& attribute, const QString& value )
 {
Index: kmail/index.cpp
===================================================================
--- kmail/index.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kmail/index.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -4,12 +4,12 @@
  * KMail is free software; you can redistribute it and/or modify it
  * under the terms of the GNU General Public License, version 2, as
  * published by the Free Software Foundation.
- * 
+ *
  * KMail is distributed in the hope that it will be useful, but
  * WITHOUT ANY WARRANTY; without even the implied warranty of
  * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
  * General Public License for more details.
- * 
+ *
  * You should have received a copy of the GNU General Public License
  * along with this program; if not, write to the Free Software
  * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301  USA
@@ -58,6 +58,7 @@
 const char* const folderIndexDisabledKey = "fulltextIndexDisabled";
 }
 
+#ifdef HAVE_INDEXLIB
 static
 QValueList<int> vectorToQValueList( const std::vector<Q_UINT32>& input ) {
 	QValueList<int> res;
@@ -75,6 +76,7 @@
 	}
 	return res;
 }
+#endif
 
 KMMsgIndex::KMMsgIndex( QObject* parent ):
 	QObject( parent, "index" ),
@@ -89,7 +91,7 @@
 	//mSyncTimer( new QTimer( this ) ),
 	mSlowDown( false ) {
 	kdDebug( 5006 ) << "KMMsgIndex::KMMsgIndex()" << endl;
-	
+
 	connect( kmkernel->folderMgr(), SIGNAL( msgRemoved( KMFolder*, Q_UINT32 ) ), SLOT( slotRemoveMessage( KMFolder*, Q_UINT32 ) ) );
 	connect( kmkernel->folderMgr(), SIGNAL( msgAdded( KMFolder*, Q_UINT32 ) ), SLOT( slotAddMessage( KMFolder*, Q_UINT32 ) ) );
 	connect( kmkernel->dimapFolderMgr(), SIGNAL( msgRemoved( KMFolder*, Q_UINT32 ) ), SLOT( slotRemoveMessage( KMFolder*, Q_UINT32 ) ) );
@@ -226,7 +228,7 @@
 				//else  fall-through
 			case s_idle:
 			case s_processing:
-				
+
 			case s_error:
 			case s_disabled:
 				// nothing can be done
@@ -367,7 +369,7 @@
 
 void KMMsgIndex::create() {
 	kdDebug( 5006 ) << "KMMsgIndex::create()" << endl;
-	
+
 #ifdef HAVE_INDEXLIB
 	if ( !QFileInfo( mIndexPath ).exists() ) {
 		::mkdir( mIndexPath, S_IRWXU );
@@ -428,7 +430,7 @@
 //}
 //
 //void KMMsgIndex::finishSync() {
-//	
+//
 //}
 
 void KMMsgIndex::removeSearch( QObject* destroyed ) {
@@ -482,9 +484,10 @@
 }
 
 void KMMsgIndex::slotAddMessage( KMFolder* folder, Q_UINT32 serNum ) {
+	Q_UNUSED( folder );
 	kdDebug( 5006 ) << "KMMsgIndex::slotAddMessage( . , " << serNum << " )" << endl;
 	if ( mState == s_error || mState == s_disabled ) return;
-	
+
 	if ( mState == s_creating ) mAddedMsgs.push_back( serNum );
 	else mPendingMsgs.push_back( serNum );
 
@@ -493,6 +496,7 @@
 }
 
 void KMMsgIndex::slotRemoveMessage( KMFolder* folder, Q_UINT32 serNum ) {
+	Q_UNUSED( folder );
 	kdDebug( 5006 ) << "KMMsgIndex::slotRemoveMessage( . , " << serNum << " )" << endl;
 	if ( mState == s_error || mState == s_disabled ) return;
 
@@ -511,7 +515,7 @@
 void KMMsgIndex::removeMessage( Q_UINT32 serNum ) {
 	kdDebug( 5006 ) << "KMMsgIndex::removeMessage( " << serNum << " )" << endl;
 	if ( mState == s_error || mState == s_disabled ) return;
-	
+
 #ifdef HAVE_INDEXLIB
 	mIndex->remove_doc( QString::number( serNum ).latin1() );
 	++mMaintenanceCount;
Index: kmail/eventsrc
===================================================================
--- kmail/eventsrc	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kmail/eventsrc	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -1,8 +1,9 @@
 [!Global!]
 IconName=kmail
 Comment=KMail
-Comment[be]=K Пошта
 Comment[hi]=के-मेल
+Comment[mk]=КПошта
+Comment[ne]=केडीई मेल
 Comment[pa]=ਕੇ-ਪੱਤਰ
 Comment[sv]=Kmail
 Comment[ta]=kஅஞ்சல்
@@ -33,9 +34,11 @@
 Name[ja]=新規メール着信
 Name[km]=មាន​អ៊ីមែល​ថ្មី​មក​ដល់
 Name[lt]=Atėjo naujas paštas
+Name[mk]=Пристигната е нова е-пошта
 Name[ms]=Mel Baru Sampai
 Name[nb]=Ny e-post ankommet
 Name[nds]=Niege Narichten sünd ankamen
+Name[ne]=नयाँ पत्र आइपुग्यो
 Name[nl]=Nieuwe berichten gearriveerd
 Name[nn]=Ny e-post er komen
 Name[pa]=ਨਵਾਂ ਪੱਤਰ ਆਇਆ
@@ -82,9 +85,11 @@
 Comment[ja]=新規メール着信
 Comment[km]=មាន​អ៊ីមែល​ថ្មី​មក​ដល់
 Comment[lt]=Atėjo naujas paštas
+Comment[mk]=Пристигната е нова е-пошта
 Comment[ms]=Mel baru sampai
 Comment[nb]=Ny e-post ankommet
 Comment[nds]=Niege Narichten sünd ankamen
+Comment[ne]=नयाँ पत्र आइपुग्यो
 Comment[nl]=Nieuw bericht ontvangen
 Comment[nn]=Ny e-post er komen
 Comment[pa]=ਨਵਾਂ ਪੱਤਰ ਆਇਆ
Index: kmail/kmail.kcfg
===================================================================
--- kmail/kmail.kcfg	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kmail/kmail.kcfg	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -66,7 +66,6 @@
         </choices>
         <default>DontSendOnCheck</default>
       </entry>
-
     </group>
 
     <group name="FolderSelectionDialog">
@@ -74,6 +73,17 @@
         <whatsthis>The most recently selected folder in the folder selection dialog.</whatsthis>
         <default>inbox</default>
       </entry>
+
+      <entry name="QuotaUnit"  type="Enum">
+        <label></label>
+        <whatsthis></whatsthis>
+        <choices>
+          <choice name="KB"/>
+          <choice name="MB"/>
+          <choice name="GB"/>
+        </choices>
+        <default>KB</default>
+      </entry>
     </group>
 
     <group name="General">
Index: kmail/aboutdata.cpp
===================================================================
--- kmail/aboutdata.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kmail/aboutdata.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -212,7 +212,7 @@
     : KAboutData( "kmail", I18N_NOOP("KMail"),KMAIL_VERSION,
                   I18N_NOOP("KDE Email Client"), License_GPL,
                   I18N_NOOP("(c) 1997-2005, The KMail developers"), 0,
-                  "http://kmail.kde.org" )
+                  "http://kontact.kde.org/kmail/" )
   {
     using KMail::authors;
     using KMail::credits;
Index: kmail/kmfoldercachedimap.h
===================================================================
--- kmail/kmfoldercachedimap.h	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kmail/kmfoldercachedimap.h	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -45,8 +45,10 @@
 #include "kmfoldertype.h"
 #include "folderjob.h"
 #include "cachedimapjob.h"
+#include "quotajobs.h"
 
 using KMail::FolderJob;
+using KMail::QuotaInfo;
 class KMAcctCachedImap;
 
 namespace KMail {
@@ -93,7 +95,7 @@
   virtual void readConfig();
   virtual void writeConfig();
 
-  void writeAnnotationConfig();
+  void writeConfigKeysWhichShouldNotGetOverwrittenByReadConfig();
 
   /** Returns the type of this folder */
   virtual KMFolderType folderType() const { return KMFolderTypeCachedImap; }
@@ -214,6 +216,17 @@
   /// Set the user's rights on this folder - called by getUserRights
   void setUserRights( unsigned int userRights );
 
+  /**
+   * The quota information for this folder.
+   * @return an invalid info if we haven't synced yet, or the server
+   * doesn't support quota. The difference can be figured out by
+   * asking the account whether it supports quota. If we have
+   * synced, the account supports quota, but there is no quota
+   * on the folder, the return info will be valid, but empty.
+   * @see QuotaInfo::isEmpty(), QuotaInfo::isValid()
+   */
+  const QuotaInfo quotaInfo() const { return mQuotaInfo; }
+
   /// Return the list of ACL for this folder
   typedef QValueVector<KMail::ACLListEntry> ACLList;
   const ACLList& aclList() const { return mACLList; }
@@ -287,6 +300,8 @@
   void slotAnnotationChanged( const QString& entry, const QString& attribute, const QString& value );
   void slotDeleteMessagesResult(KMail::FolderJob *);
   void slotImapStatusChanged(KMFolder* folder, const QString&, bool);
+  void slotStorageQuotaResult( const QuotaInfo& );
+  void slotQuotaResult( KIO::Job* job );
 
 protected:
   /* returns true if there were messages to delete
@@ -389,6 +404,7 @@
     SYNC_STATE_SET_ANNOTATIONS,
     SYNC_STATE_GET_ACLS,
     SYNC_STATE_SET_ACLS,
+    SYNC_STATE_GET_QUOTA,
     SYNC_STATE_FIND_SUBFOLDERS,
     SYNC_STATE_SYNC_SUBFOLDERS,
     SYNC_STATE_CHECK_UIDVALIDITY,
@@ -471,6 +487,8 @@
   int mNamespacesToCheck;
   bool mPersonalNamespacesCheckDone;
   QString mImapPathCreation;
+
+  QuotaInfo mQuotaInfo;
 };
 
 #endif /*kmfoldercachedimap_h*/
Index: kmail/kmmsgbase.cpp
===================================================================
--- kmail/kmmsgbase.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kmail/kmmsgbase.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -118,7 +118,7 @@
 //-----------------------------------------------------------------------------
 bool KMMsgBase::isMessage(void) const
 {
-  return FALSE;
+  return false;
 }
 //-----------------------------------------------------------------------------
 void KMMsgBase::toggleStatus(const KMMsgStatus aStatus, int idx)
@@ -152,7 +152,7 @@
 //-----------------------------------------------------------------------------
 void KMMsgBase::setStatus(const KMMsgStatus aStatus, int idx)
 {
-  mDirty = TRUE;
+  mDirty = true;
   KMMsgStatus oldStatus = status();
   switch (aStatus) {
     case KMMsgStatusRead:
@@ -300,7 +300,7 @@
 void KMMsgBase::setEncryptionState( const KMMsgEncryptionState /*status*/, int idx )
 {
     //kdDebug(5006) << "***setEncryptionState1( " << status << " )" << endl;
-    mDirty = TRUE;
+    mDirty = true;
     if (storage())
         storage()->headerOfMsgChanged(this, idx);
 }
@@ -325,7 +325,7 @@
 void KMMsgBase::setSignatureState( const KMMsgSignatureState /*status*/, int idx )
 {
     //kdDebug(5006) << "***setSignatureState1( " << status << " )" << endl;
-    mDirty = TRUE;
+    mDirty = true;
     if (storage())
          storage()->headerOfMsgChanged(this, idx);
 }
@@ -542,7 +542,7 @@
   QString str = aStr;
 
   while (str[0] == ' ') str.remove(0,1);
-  if (hasKeyword) *hasKeyword=FALSE;
+  if (hasKeyword) *hasKeyword=false;
 
   unsigned int strLength(str.length());
   for (i=0; i < strLength && i < maxChars; i++)
@@ -555,7 +555,7 @@
     do {
       i++;
     } while (str[i] == ' ');
-    if (hasKeyword) *hasKeyword=TRUE;
+    if (hasKeyword) *hasKeyword=true;
     return str.mid(i);
   }
   return str;
@@ -604,7 +604,7 @@
     {
       encodings.append(KGlobal::charsets()->languageForEncoding(*it)
         + " ( " + mimeName + " )");
-      mimeNames.insert(mimeName, TRUE);
+      mimeNames.insert(mimeName, true);
     }
   }
   encodings.sort();
@@ -686,7 +686,7 @@
     if (pos[0]!='=' || pos[1]!='?') {
       result += LWSP_buffer + pos[0];
       LWSP_buffer = 0;
-      lastWasEncodedWord = FALSE;
+      lastWasEncodedWord = false;
       continue;
     }
     // found possible encoded-word
@@ -789,7 +789,7 @@
 
   unsigned int start, stop, p, pos = 0, encLength;
   QCString result;
-  bool breakLine = FALSE;
+  bool breakLine = false;
   const unsigned int maxLen = 75 - 7 - cset.length();
 
   while (pos < strLength)
@@ -960,8 +960,8 @@
       pattern += QString::number(n) + "[*]?";
     }
     pattern += "=";
-    
-    QRegExp fnamePart( pattern, FALSE );
+
+    QRegExp fnamePart( pattern, false );
     int startPart = fnamePart.search( aStr );
     int endPart;
     found = ( startPart >= 0 );
@@ -1112,19 +1112,19 @@
   QString ret;
 
   g_chunk_offset = 0;
-  bool using_mmap = FALSE;
+  bool using_mmap = false;
   bool swapByteOrder = storage()->indexSwapByteOrder();
   if (storage()->indexStreamBasePtr()) {
     if (g_chunk)
-	free(g_chunk);
-    using_mmap = TRUE;
+      free(g_chunk);
+    using_mmap = true;
     g_chunk = storage()->indexStreamBasePtr() + mIndexOffset;
     g_chunk_length = mIndexLength;
   } else {
     if(!storage()->mIndexStream)
       return ret;
     if (g_chunk_length < mIndexLength)
-	g_chunk = (uchar *)realloc(g_chunk, g_chunk_length = mIndexLength);
+      g_chunk = (uchar *)realloc(g_chunk, g_chunk_length = mIndexLength);
     off_t first_off=ftell(storage()->mIndexStream);
     fseek(storage()->mIndexStream, mIndexOffset, SEEK_SET);
     fread( g_chunk, mIndexLength, 1, storage()->mIndexStream);
@@ -1181,13 +1181,13 @@
   off_t ret = 0;
 
   g_chunk_offset = 0;
-  bool using_mmap = FALSE;
+  bool using_mmap = false;
   int sizeOfLong = storage()->indexSizeOfLong();
   bool swapByteOrder = storage()->indexSwapByteOrder();
   if (storage()->indexStreamBasePtr()) {
     if (g_chunk)
       free(g_chunk);
-    using_mmap = TRUE;
+    using_mmap = true;
     g_chunk = storage()->indexStreamBasePtr() + mIndexOffset;
     g_chunk_length = mIndexLength;
   } else {
@@ -1371,7 +1371,7 @@
 bool KMMsgBase::syncIndexString() const
 {
   if(!dirty())
-    return TRUE;
+    return true;
   int len;
   const uchar *buffer = asIndexString(len);
   if (len == mIndexLength) {
@@ -1379,9 +1379,9 @@
     fseek(storage()->mIndexStream, mIndexOffset, SEEK_SET);
     assert( mIndexOffset > 0 );
     fwrite( buffer, len, 1, storage()->mIndexStream);
-    return TRUE;
+    return true;
   }
-  return FALSE;
+  return false;
 }
 
 static QStringList sReplySubjPrefixes, sForwardSubjPrefixes;
Index: kmail/kmmainwidget.cpp
===================================================================
--- kmail/kmmainwidget.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kmail/kmmainwidget.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -2724,10 +2724,10 @@
                                       actionCollection(), "refresh_folder" );
   mTroubleshootFolderAction = 0; // set in initializeIMAPActions
 
-  mEmptyFolderAction = new KAction( "foo", "edittrash", 0, this,
+  mEmptyFolderAction = new KAction( "foo" /*set in updateFolderMenu*/, "edittrash", 0, this,
 		      SLOT(slotEmptyFolder()), actionCollection(), "empty" );
 
-  mRemoveFolderAction = new KAction( "foo", "editdelete", 0, this,
+  mRemoveFolderAction = new KAction( "foo" /*set in updateFolderMenu*/, "editdelete", 0, this,
 		      SLOT(slotRemoveFolder()), actionCollection(), "delete_folder" );
 
   mPreferHtmlAction = new KToggleAction( i18n("Prefer &HTML to Plain Text"), 0, this,
@@ -3127,6 +3127,7 @@
   initializeIMAPActions( false ); // don't set state, config not read yet
   updateMessageActions();
   updateCustomTemplateMenus();
+  updateFolderMenu();
 }
 
 //-----------------------------------------------------------------------------
@@ -3397,10 +3398,8 @@
   mEmptyFolderAction->setText( (mFolder && kmkernel->folderIsTrash(mFolder))
     ? i18n("E&mpty Trash") : i18n("&Move All Messages to Trash") );
   mRemoveFolderAction->setEnabled( mFolder && !mFolder->isSystemFolder() && !mFolder->isReadOnly() );
-  if(mFolder) {
-    mRemoveFolderAction->setText( mFolder->folderType() == KMFolderTypeSearch
+  mRemoveFolderAction->setText( mFolder && mFolder->folderType() == KMFolderTypeSearch
         ? i18n("&Delete Search") : i18n("&Delete Folder") );
-  }
   mExpireFolderAction->setEnabled( mFolder && mFolder->isAutoExpire() );
   updateMarkAsReadAction();
   // the visual ones only make sense if we are showing a message list
Index: kmail/kmsender_p.h
===================================================================
--- kmail/kmsender_p.h	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kmail/kmsender_p.h	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -6,7 +6,6 @@
 #define __KMAIL_SENDER_P_H__
 #include "kmsender.h"
 
-#include <qcstring.h>
 #include <qstring.h>
 #include <qstringlist.h>
 #include <qobject.h>
@@ -33,7 +32,7 @@
   void start() { emit started( doStart() ); }
 
   /** Send given message. May return before message is sent. */
-  bool send( const QString & sender, const QStringList & to, const QStringList & cc, const QStringList & bcc, const QCString & message ) {
+  bool send( const QString & sender, const QStringList & to, const QStringList & cc, const QStringList & bcc, const QByteArray & message ) {
     reset(); return doSend( sender, to, cc, bcc, message );
   }
 
@@ -72,7 +71,7 @@
 
 private:
   virtual void doFinish() = 0;
-  virtual bool doSend( const QString & sender, const QStringList & to, const QStringList & cc, const QStringList & bcc, const QCString & message ) = 0;
+  virtual bool doSend( const QString & sender, const QStringList & to, const QStringList & cc, const QStringList & bcc, const QByteArray & message ) = 0;
   virtual bool doStart() = 0;
 
 protected:
@@ -102,12 +101,12 @@
   /** implemented from KMSendProc */
   void doFinish();
   /** implemented from KMSendProc */
-  bool doSend( const QString & sender, const QStringList & to, const QStringList & cc, const QStringList & bcc, const QCString & message );
+  bool doSend( const QString & sender, const QStringList & to, const QStringList & cc, const QStringList & bcc, const QByteArray & message );
   /** implemented from KMSendProc */
   bool doStart();
 
 private:
-  QCString mMsgStr;
+  QByteArray mMsgStr;
   char* mMsgPos;
   int mMsgRest;
   KProcess* mMailerProc;
@@ -132,14 +131,14 @@
   /** implemented from KMSendProc */
   void doFinish();
   /** implemented from KMSendProc */
-  bool doSend( const QString & sender, const QStringList & to, const QStringList & cc, const QStringList & bcc, const QCString & message );
+  bool doSend( const QString & sender, const QStringList & to, const QStringList & cc, const QStringList & bcc, const QByteArray & message );
   /** implemented from KMSendProc */
   bool doStart() { return true; }
 
   void cleanup();
 
 private:
-  QCString mMessage;
+  QByteArray mMessage;
   uint mMessageLength;
   uint mMessageOffset;
 
Index: kmail/imapaccountbase.h
===================================================================
--- kmail/imapaccountbase.h	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kmail/imapaccountbase.h	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -49,6 +49,7 @@
 
 namespace KMail {
   struct ACLListEntry;
+  struct QuotaInfo;
   typedef QValueVector<KMail::ACLListEntry> ACLList;
 
   class AttachmentStrategy;
@@ -200,6 +201,13 @@
     void getACL( KMFolder* folder, const QString& imapPath );
 
     /**
+     * Retrieve the the quota inforamiton on the folder
+     * identified by @p imapPath.
+     * Emits receivedQuotaInfo signal on success/error.
+     */
+    void getStorageQuotaInfo( KMFolder* folder, const QString& imapPath );
+
+    /**
      * Set the status on the server
      * Emits imapStatusChanged signal on success/error.
      */
@@ -273,6 +281,17 @@
     void setHasNoAnnotationSupport() { mAnnotationSupport = false; }
 
     /**
+     * Returns false if the IMAP server for this account doesn't support quotas.
+     * (and true if it does, or if we didn't try yet).
+     */
+    bool hasQuotaSupport() const { return mQuotaSupport; }
+
+    /**
+     * Called if the quota command failed due to 'unsupported'
+     */
+    void setHasNoQuotaSupport() { mQuotaSupport = false; }
+
+    /**
      * React to an error from the job. Uses job->error and job->errorString and calls
      * the protected virtual handleJobError with them. See handleError below for details.
      */
@@ -400,6 +419,9 @@
     /// Result of getACL() job
     void slotGetACLResult( KIO::Job* _job );
 
+    /// Result of getStorageQuotaInfo() job
+    void slotGetStorageQuotaInfoResult( KIO::Job* _job );
+
     /**
      * Send a NOOP command regularly to keep the slave from disconnecting
      */
@@ -490,6 +512,7 @@
     bool mPasswordDialogIsActive : 1;
     bool mACLSupport : 1;
     bool mAnnotationSupport : 1;
+    bool mQuotaSupport : 1;
     bool mSlaveConnected : 1;
     bool mSlaveConnectionError : 1;
     bool mCheckingSingleFolder : 1;
@@ -556,6 +579,16 @@
     void receivedACL( KMFolder* folder, KIO::Job* job, const KMail::ACLList& entries );
 
     /**
+     * Emitted when the getQuotaInfo job is done,
+     * as a result of a getQuotaInfo call.
+     * @param folder The folder for which we were getting quota info (can be 0)
+     * @param job The job that was used for doing so (can be used to display errors)
+     * @param info The quota information for this folder. Make your copy of it,
+     * it comes from the job.
+     */
+    void receivedStorageQuotaInfo( KMFolder* folder, KIO::Job* job, const KMail::QuotaInfo& entries );
+
+    /**
      * Emitted when we got the namespaces
      */
     void namespacesFetched( const ImapAccountBase::nsDelimMap& );
Index: kmail/kmfilteraction.cpp
===================================================================
--- kmail/kmfilteraction.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kmail/kmfilteraction.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -22,6 +22,7 @@
 #include <libkdepim/kfileio.h>
 #include <libkdepim/collectingprocess.h>
 using KPIM::CollectingProcess;
+#include <mimelib/message.h>
 #include "kmfawidgets.h"
 #include "folderrequester.h"
 using KMail::FolderRequester;
@@ -1381,8 +1382,7 @@
     return ErrorButGoOn;
 
   // copy the message 1:1
-  KMMessage* msgCopy = new KMMessage;
-  msgCopy->fromDwString(msg->asDwString());
+  KMMessage* msgCopy = new KMMessage( new DwMessage( *msg->asDwMessage() ) );
 
   int index;
   int rc = mFolder->addMsg(msgCopy, &index);
Index: kmail/kmcomposewin.cpp
===================================================================
--- kmail/kmcomposewin.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kmail/kmcomposewin.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -706,8 +706,8 @@
   if ( status == 0 ) { // no error
     kdDebug(5006) << "autosaving message in " << filename << endl;
     int fd = autoSaveFile.handle();
-    QCString msgStr = msg->asString();
-    if ( ::write( fd, msgStr, msgStr.length() ) == -1 )
+    const DwString& msgStr = msg->asDwString();
+    if ( ::write( fd, msgStr.data(), msgStr.length() ) == -1 )
       status = errno;
   }
   if ( status == 0 ) {
Index: kmail/kmail_view.desktop
===================================================================
--- kmail/kmail_view.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kmail/kmail_view.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -1,10 +1,11 @@
 [Desktop Entry]
 Encoding=UTF-8
 Name=KMail
-Name[be]=K Пошта
 Name[eo]=Retpoŝto
 Name[hi]=के-मेल
 Name[lv]=KPasts
+Name[mk]=КПошта
+Name[ne]=केडीई मेल
 Name[pa]=ਕੇ-ਪੱਤਰ
 Name[sv]=Kmail
 Name[ta]=Kஅஞ்சல்
Index: kmail/kmfolderdia.cpp
===================================================================
--- kmail/kmfolderdia.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kmail/kmfolderdia.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -43,6 +43,7 @@
 #include "kmcommands.h"
 #include "kmfoldertree.h"
 #include "folderdiaacltab.h"
+#include "folderdiaquotatab.h"
 #include "kmailicalifaceimpl.h"
 #include "globalsettings.h"
 #include "folderrequester.h"
@@ -134,6 +135,13 @@
       addTab( tab );
     }
   }
+  if ( !noContent && refFolder && ( folderType == KMFolderTypeImap || folderType == KMFolderTypeCachedImap ) ) {
+    if ( FolderDiaQuotaTab::supports( refFolder ) ) {
+      box = addVBoxPage( i18n("Quota") );
+      tab = new FolderDiaQuotaTab( this, box );
+      addTab( tab );
+    }
+  }
 
   for ( unsigned int i = 0 ; i < mTabs.count() ; ++i )
     mTabs[i]->load();
Index: kmail/tests/utiltests.cpp
===================================================================
--- kmail/tests/utiltests.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 0)
+++ kmail/tests/utiltests.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -0,0 +1,196 @@
+/**
+ * Copyright (C)  2007 David Faure <faure@kde.org>
+ * This file is subject to the GPL version 2.
+ */
+
+#include <kdebug.h>
+#include <kunittest/runner.h>
+#include <kunittest/module.h>
+#include "utiltests.h"
+
+using namespace KUnitTest;
+
+KUNITTEST_MODULE( kunittest_utilmodule, "KMail::Util Tests" );
+KUNITTEST_MODULE_REGISTER_TESTER( UtilTester );
+
+#include "util.h"
+#include <mimelib/string.h>
+
+
+void UtilTester::setUp()
+{
+  kdDebug() << "setUp" << endl;
+}
+
+void UtilTester::tearDown()
+{
+  kdDebug() << "tearDown" << endl;
+}
+
+static QString makePrintable( const QCString& str )
+{
+  QString a = str;
+  a = a.replace( '\r', "\\r" );
+  a = a.replace( '\n', "\\n" );
+  return a;
+}
+static QString makePrintable( const QByteArray& arr )
+{
+  QCString str;
+  KMail::Util::setFromByteArray( str, arr );
+  return makePrintable( str );
+}
+
+void UtilTester::test_lf2crlf()
+{
+  QCString src = "\nfoo\r\n\nbar\rblah\n\r\r\n\n\r";
+  QCString conv = KMail::Util::lf2crlf( src );
+  COMPARE( makePrintable( conv ), makePrintable("\r\nfoo\r\n\r\nbar\rblah\r\n\r\r\n\r\n\r") );
+  COMPARE( KMail::Util::lf2crlf( QCString("") ), QCString("") );
+
+  // QByteArray version
+  QByteArray arr;  KMail::Util::setFromQCString( arr, src );
+  COMPARE( arr[arr.size()-1], '\r' );
+  QByteArray arrConv = KMail::Util::lf2crlf( arr );
+  COMPARE( arrConv[arrConv.size()-1], '\r' );
+  COMPARE( makePrintable( arrConv ), makePrintable("\r\nfoo\r\n\r\nbar\rblah\r\n\r\r\n\r\n\r") );
+  QByteArray empty;
+  arrConv = KMail::Util::lf2crlf( empty );
+  COMPARE( makePrintable( arrConv ), QString("") );
+}
+
+void UtilTester::test_escapeFrom()
+{
+  // TODO should take a DwString, then fix kmfoldermbox.cpp:1021      msgText = escapeFrom( aMsg->asString() );
+
+}
+
+void UtilTester::test_append()
+{
+  QCString test;
+  QCString str = "foo";
+  COMPARE( (int)str.size(), 4 ); // trailing nul included
+  QByteArray s1 = KMail::Util::byteArrayFromQCStringNoDetach( str );
+  COMPARE( (int)s1.size(), 3 );
+  COMPARE( (int)str.size(), 3 ); // trailing nul got removed
+  COMPARE( s1.data(), str.data() ); // yes, no detach
+  COMPARE( s1[2], 'o' );
+
+  QCString bar( "bar" );
+  QByteArray s2 = KMail::Util::byteArrayFromQCStringNoDetach( bar );
+  COMPARE( (int)s2.size(), 3 );
+
+  KMail::Util::append( s1, s2 );
+  COMPARE( (int)s1.size(), 6 );
+  KMail::Util::setFromByteArray( test, s1 );
+  COMPARE( test, QCString( "foobar" ) );
+
+  KMail::Util::append( s1, 0 ); // no-op
+  COMPARE( (int)s1.size(), 6 );
+  KMail::Util::setFromByteArray( test, s1 );
+  COMPARE( test, QCString( "foobar" ) );
+
+  KMail::Util::append( s1, "blah" );
+  COMPARE( (int)s1.size(), 10 );
+  KMail::Util::setFromByteArray( test, s1 );
+  COMPARE( test, QCString( "foobarblah" ) );
+
+  KMail::Util::append( s1, QCString( " str" ) );
+  COMPARE( (int)s1.size(), 14 );
+  KMail::Util::setFromByteArray( test, s1 );
+  COMPARE( test, QCString( "foobarblah str" ) );
+
+  QByteArray empty;
+  KMail::Util::append( empty, "a" );
+  COMPARE( (int)empty.size(), 1 );
+  COMPARE( empty[0], 'a' );
+}
+
+void UtilTester::test_insert()
+{
+  QCString test;
+  QCString str = "foo";
+  COMPARE( (int)str.size(), 4 ); // trailing nul included
+  QByteArray s1;
+  KMail::Util::setFromQCString( s1, str );
+
+  KMail::Util::insert( s1, 1, "bar" );
+  COMPARE( (int)s1.size(), 6 );
+  COMPARE( makePrintable(s1), QString( "fbaroo" ) );
+
+  KMail::Util::insert( s1, 6, "END" );
+  COMPARE( (int)s1.size(), 9 );
+  COMPARE( makePrintable(s1), QString( "fbarooEND" ) );
+
+  KMail::Util::insert( s1, 0, "BEGIN" );
+  COMPARE( (int)s1.size(), 14 );
+  COMPARE( makePrintable(s1), QString( "BEGINfbarooEND" ) );
+}
+
+void UtilTester::test_DwStringConversions( const QCString& cstr )
+{
+  // QCString->DwString->QCString
+  COMPARE( (int)cstr.size(), 8 );
+  DwString dwstr = KMail::Util::dwString( cstr );
+  COMPARE( (int)dwstr.size(), 7 );
+  COMPARE( dwstr[6], 'r' );
+  QCString cstr2 = KMail::Util::CString( dwstr );
+  COMPARE( (int)cstr2.size(), 8 );
+  COMPARE( cstr2, cstr );
+  COMPARE( cstr2[6], 'r' );
+
+  // And also QCString->QByteArray
+  QByteArray arr;
+  KMail::Util::setFromQCString( arr, cstr );
+  COMPARE( (int)arr.size(), 7 );
+  COMPARE( arr[6], 'r' );
+
+  KMail::Util::setFromQCString( arr, QCString() );
+  COMPARE( (int)arr.size(), 0 );
+
+  // DwString->QByteArray
+  QByteArray ba = KMail::Util::ByteArray( dwstr );
+  COMPARE( (int)ba.size(), 7 );
+  COMPARE( ba[6], 'r' );
+
+  ba = KMail::Util::ByteArray( DwString() );
+  COMPARE( (int)ba.size(), 0 );
+}
+
+void UtilTester::test_DwStringConversions()
+{
+  QCString cstr = "foo&bar";
+  test_DwStringConversions( cstr );
+  // now embed a nul. Note that cstr="foo\0bar" wouldn't work.
+  cstr[3] = '\0';
+  test_DwStringConversions( cstr );
+
+  cstr = QCString();
+  DwString dwstr = KMail::Util::dwString( cstr );
+  COMPARE( (int)dwstr.size(), 0 );
+  VERIFY( dwstr.empty() );
+
+  dwstr = KMail::Util::dwString( QByteArray() );
+  COMPARE( (int)dwstr.size(), 0 );
+  VERIFY( dwstr.empty() );
+}
+
+void UtilTester::test_QByteArrayQCString()
+{
+  QCString str = "foobar";
+  COMPARE( (int)str.size(), 7 ); // trailing nul included
+  QByteArray s1 = KMail::Util::byteArrayFromQCStringNoDetach( str );
+  COMPARE( (int)str.size(), 6 ); // trailing nul got removed
+  COMPARE( s1.data(), str.data() ); // yes, no detach
+  COMPARE( s1[5], 'r' );
+  COMPARE( str[5], 'r' );
+
+  KMail::Util::restoreQCString( str );
+  COMPARE( (int)str.size(), 7 ); // trailing nul included
+  COMPARE( str[5], 'r' );
+  COMPARE( str[6], '\0' );
+
+}
+
+#include "utiltests.moc"
+
Index: kmail/tests/utiltests.h
===================================================================
--- kmail/tests/utiltests.h	(.../tags/KDE/3.5.6/kdepim)	(wersja 0)
+++ kmail/tests/utiltests.h	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -0,0 +1,31 @@
+/*
+ * Copyright (C)  2007  David Faure <faure@kde.org>
+ *
+ * This file is subject to the GPL version 2.
+ */
+
+#ifndef UTILTESTS_H
+#define UTILTESTS_H
+
+#include <kunittest/tester.h>
+
+class KMDict;
+
+class UtilTester : public KUnitTest::SlotTester
+{
+  Q_OBJECT
+
+public slots:
+  void setUp();
+  void tearDown();
+  void test_lf2crlf();
+  void test_escapeFrom();
+  void test_append();
+  void test_insert();
+  void test_DwStringConversions();
+  void test_QByteArrayQCString();
+private:
+  void test_DwStringConversions( const QCString& cstr );
+};
+
+#endif
Index: kmail/tests/Makefile.am
===================================================================
--- kmail/tests/Makefile.am	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kmail/tests/Makefile.am	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -1,14 +1,16 @@
-INCLUDES = -I$(top_srcdir)/include -I$(top_srcdir)/kmail $(all_includes)
+INCLUDES = -I$(top_srcdir)/kmail $(all_includes)
 METASOURCES = AUTO
 
-noinst_HEADERS = messagedicttests.h ../kmdict.h
+check_LTLIBRARIES = kunittest_storagelayermodule.la \
+        kunittest_utilmodule.la
 
-check_LTLIBRARIES = kunittest_storagelayermodule.la 
-
 kunittest_storagelayermodule_la_SOURCES = storagelayermodule.cpp messagedicttests.cpp ../kmdict.cpp
-kunittest_storagelayermodule_la_LIBADD = -lkunittest
-kunittest_storagelayermodule_la_LDFLAGS = -module $(KDE_CHECK_PLUGIN) $(all_libraries)
+kunittest_utilmodule_la_SOURCES = utiltests.cpp ../util.cpp
+kunittest_utilmodule_la_LIBADD = -lkunittest ../../mimelib/libmimelib.la
 
+LIBADD = -lkunittest
+LDFLAGS = -module $(KDE_CHECK_PLUGIN) $(all_libraries)
+
 check-local:
 	kunittestmodrunner
 
Index: kmail/configuredialog.cpp
===================================================================
--- kmail/configuredialog.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kmail/configuredialog.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -1147,7 +1147,29 @@
            this, SLOT(slotEditNotifications()) );
 }
 
+AccountsPageReceivingTab::~AccountsPageReceivingTab()
+{
+  // When hitting Cancel or closing the dialog with the window-manager-button,
+  // we have a number of things to clean up:
 
+  // The newly created accounts
+  QValueList< QGuardedPtr<KMAccount> >::Iterator it;
+  for (it = mNewAccounts.begin(); it != mNewAccounts.end(); ++it ) {
+    delete (*it);
+  }
+  mNewAccounts.clear();
+
+  // The modified accounts
+  QValueList<ModifiedAccountsType*>::Iterator j;
+  for ( j = mModifiedAccounts.begin() ; j != mModifiedAccounts.end() ; ++j ) {
+    delete (*j)->newAccount;
+    delete (*j);
+  }
+  mModifiedAccounts.clear();
+
+
+}
+
 void AccountsPage::ReceivingTab::slotAccountSelected()
 {
   QListViewItem * item = mAccountList->selectedItem();
@@ -1398,8 +1420,7 @@
   // Add accounts marked as new
   QValueList< QGuardedPtr<KMAccount> >::Iterator it;
   for (it = mNewAccounts.begin(); it != mNewAccounts.end(); ++it ) {
-    kmkernel->acctMgr()->add( *it );
-    (*it)->installTimer();
+    kmkernel->acctMgr()->add( *it ); // calls installTimer too
   }
 
   // Update accounts that have been modified
@@ -4469,9 +4490,10 @@
            this, SLOT( slotEmitChanged( void ) ) );
 
   // "Empty &trash on program exit" option:
+  hlay = new QHBoxLayout( vlay ); // inherits spacing
   mEmptyTrashCheck = new QCheckBox( i18n("Empty local &trash folder on program exit"),
                                     this );
-  vlay->addWidget( mEmptyTrashCheck );
+  hlay->addWidget( mEmptyTrashCheck );
   connect( mEmptyTrashCheck, SIGNAL( stateChanged( int ) ),
            this, SLOT( slotEmitChanged( void ) ) );
 
@@ -4483,8 +4505,19 @@
            this, SLOT( slotEmitChanged( void ) ) );
 #endif
 
+  // "Quota Units"
+  hlay = new QHBoxLayout( vlay ); // inherits spacing
+  mQuotaCmbBox = new QComboBox( false, this );
+  label = new QLabel( mQuotaCmbBox,
+                      i18n("Quota Units: "), this );
+  mQuotaCmbBox->insertStringList( QStringList()
+                   << i18n("KB")
+                   << i18n("MB")
+                   << i18n("GB") );
+  hlay->addWidget( label );
+  hlay->addWidget( mQuotaCmbBox, 1 );
+  connect( mQuotaCmbBox, SIGNAL( activated( int )  ), this, SLOT( slotEmitChanged( void ) ) );
 
-
   vlay->addStretch( 1 );
 
   // and now: add QWhatsThis:
@@ -4545,6 +4578,7 @@
   mDelayedMarkAsRead->setChecked( GlobalSettings::self()->delayedMarkAsRead() );
   mDelayedMarkTime->setValue( GlobalSettings::self()->delayedMarkTime() );
   mShowPopupAfterDnD->setChecked( GlobalSettings::self()->showPopupAfterDnD() );
+  mQuotaCmbBox->setCurrentItem( GlobalSettings::self()->quotaUnit() );
 }
 
 void MiscPage::FolderTab::doLoadOther() {
@@ -4580,6 +4614,7 @@
   GlobalSettings::self()->setShowPopupAfterDnD( mShowPopupAfterDnD->isChecked() );
   GlobalSettings::self()->setExcludeImportantMailFromExpiry(
         mExcludeImportantFromExpiry->isChecked() );
+  GlobalSettings::self()->setQuotaUnit( mQuotaCmbBox->currentItem() );
 #ifdef HAVE_INDEXLIB
   if ( kmkernel->msgIndex() ) kmkernel->msgIndex()->setEnabled( mIndexingEnabled->isChecked() );
 #endif
Index: kmail/kmail_config_appearance.desktop
===================================================================
--- kmail/kmail_config_appearance.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kmail/kmail_config_appearance.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -13,7 +13,8 @@
 X-KDE-CfgDlgHierarchy=KMail
 
 Name=Appearance
-Name[be]=Зьнешні выгляд
+Name[ar]=المظهر
+Name[be]=Знешні выгляд
 Name[bg]=Външен вид
 Name[br]=Neuziadur
 Name[bs]=Izgled
@@ -43,6 +44,7 @@
 Name[ms]=Rupa
 Name[nb]=Utseende
 Name[nds]=Utsehn
+Name[ne]=मोहडा
 Name[nl]=Uiterlijk
 Name[nn]=Utsjånad
 Name[pl]=Wygląd
@@ -71,7 +73,7 @@
 Comment[cy]=Addasu Golwg
 Comment[da]=Brugerindstil visuelt udseende
 Comment[de]=Erscheinungsbild anpassen
-Comment[el]=Προσαρμογή Εμφάνισης
+Comment[el]=Προσαρμογή εμφάνισης
 Comment[en_GB]=Customise Visual Appearance
 Comment[es]=Apariencia visual personalizada
 Comment[et]=Välimuse seadistused
@@ -87,9 +89,11 @@
 Comment[ja]=外観をカスタマイズ
 Comment[km]=ប្ដូរ​រូបរាង​មើល​ឃើញ​តាម​បំណង
 Comment[lt]=Derinti vizualinę išvaizdą
+Comment[mk]=Приспособете ја визуелната појава
 Comment[ms]=Suaikan Rupa Visual
 Comment[nb]=Tilpass visuelt utseende
 Comment[nds]=Utsehn topassen
+Comment[ne]=दृश्यात्मक मोहडा अनुकूल गर्नुहोस्
 Comment[nl]=Pas het uiterlijk aan
 Comment[nn]=Tilpass utsjånad
 Comment[pl]=Zmiana wyglądu
@@ -109,7 +113,6 @@
 Comment[zh_CN]=自定义视觉外观
 Comment[zh_TW]=調整視覺顯示
 Keywords=kmail,appearance
-Keywords[be]=K Пошта,зьнешні выгляд,kmail,appearance
 Keywords[bg]=пощенски, клиент, е-поща, външен, вид, външност, появяване kmail, appearance
 Keywords[br]=kmail,neuziadur
 Keywords[bs]=kmail,appearance,izgled
@@ -133,9 +136,11 @@
 Keywords[ja]=kmail,外観
 Keywords[km]=kmail,រូបរាង
 Keywords[lt]=kmail,appearance,išvaizda
+Keywords[mk]=kmail,appearance,кпошта,појава,изглед,визуелно
 Keywords[ms]=kmail,rupa
 Keywords[nb]=kmail,utseende
 Keywords[nds]=KMail,Utsehn
+Keywords[ne]=केडीई मेल, मोहडा
 Keywords[nl]=kmail,uiterlijk
 Keywords[nn]=KMail,utsjånad
 Keywords[pl]=kmail,wygląd
Index: kmail/kmfoldermbox.cpp
===================================================================
--- kmail/kmfoldermbox.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kmail/kmfoldermbox.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -870,12 +870,12 @@
 }
 
 //static
-QCString KMFolderMbox::escapeFrom( const QCString & str ) {
+QByteArray KMFolderMbox::escapeFrom( const DwString & str ) {
   const unsigned int strLen = str.length();
   if ( strLen <= STRDIM("From ") )
-    return str;
+    return KMail::Util::ByteArray( str );
   // worst case: \nFrom_\nFrom_\nFrom_... => grows to 7/6
-  QCString result( int( strLen + 5 ) / 6 * 7 + 1 );
+  QByteArray result( int( strLen + 5 ) / 6 * 7 + 1 );
 
   const char * s = str.data();
   const char * const e = s + strLen - STRDIM("From ");
@@ -961,7 +961,7 @@
 {
   if (!canAddMsgNow(aMsg, aIndex_ret)) return 0;
   bool opened = false;
-  QCString msgText;
+  QByteArray msgText;
   char endStr[3];
   int idx = -1, rc;
   KMFolder* msgParent;
@@ -1018,8 +1018,8 @@
     if (aMsg->headerField("Content-Type").isEmpty())  // This might be added by
       aMsg->removeHeaderField("Content-Type");        // the line above
   }
-  msgText = escapeFrom( aMsg->asString() );
-  size_t len = msgText.length();
+  msgText = escapeFrom( aMsg->asDwString() );
+  size_t len = msgText.size();
 
   assert(mStream != 0);
   clearerr(mStream);
@@ -1059,7 +1059,7 @@
   QCString messageSeparator( aMsg->mboxMessageSeparator() );
   fwrite( messageSeparator.data(), messageSeparator.length(), 1, mStream );
   off_t offs = ftell(mStream);
-  fwrite(msgText, len, 1, mStream);
+  fwrite(msgText.data(), len, 1, mStream);
   if (msgText[(int)len-1]!='\n') fwrite("\n\n", 1, 2, mStream);
   fflush(mStream);
   size_t size = ftell(mStream) - offs;
Index: kmail/folderdiaquotatab.cpp
===================================================================
--- kmail/folderdiaquotatab.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 0)
+++ kmail/folderdiaquotatab.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -0,0 +1,214 @@
+// -*- mode: C++; c-file-style: "gnu" -*-
+/**
+ * folderdiaquotatab.cpp
+ *
+ * Copyright (c) 2006 Till Adam <adam@kde.org>
+ *
+ *
+ *  This program is free software; you can redistribute it and/or modify
+ *  it under the terms of the GNU General Public License as published by
+ *  the Free Software Foundation; version 2 of the License
+ *
+ *  This program is distributed in the hope that it will be useful,
+ *  but WITHOUT ANY WARRANTY; without even the implied warranty of
+ *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+ *  GNU General Public License for more details.
+ *
+ *  You should have received a copy of the GNU General Public License
+ *  along with this program; if not, write to the Free Software
+ *  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA.
+ *
+ *  In addition, as a special exception, the copyright holders give
+ *  permission to link the code of this program with any edition of
+ *  the Qt library by Trolltech AS, Norway (or with modified versions
+ *  of Qt that use the same license as Qt), and distribute linked
+ *  combinations including the two.  You must obey the GNU General
+ *  Public License in all respects for all of the code used other than
+ *  Qt.  If you modify this file, you may extend this exception to
+ *  your version of the file, but you are not obligated to do so.  If
+ *  you do not wish to do so, delete this exception statement from
+ *  your version.
+ */
+
+#include "folderdiaquotatab.h"
+#include "kmfolder.h"
+#include "kmfoldertype.h"
+#include "kmfolderimap.h"
+#include "kmfoldercachedimap.h"
+#include "kmacctcachedimap.h"
+#include "imapaccountbase.h"
+
+#include <qwidgetstack.h>
+#include <qlayout.h>
+#include <qlabel.h>
+#include <qprogressbar.h>
+#include <qwhatsthis.h>
+
+#include "folderdiaquotatab_p.h"
+
+#include <assert.h>
+
+using namespace KMail;
+
+KMail::FolderDiaQuotaTab::FolderDiaQuotaTab( KMFolderDialog* dlg, QWidget* parent, const char* name )
+  : FolderDiaTab( parent, name ),
+    mImapAccount( 0 ),
+    mDlg( dlg )
+{
+  QVBoxLayout* topLayout = new QVBoxLayout( this );
+  // We need a widget stack to show either a label ("no qutoa support", "please wait"...)
+  // or quota info
+  mStack = new QWidgetStack( this );
+  topLayout->addWidget( mStack );
+
+  mLabel = new QLabel( mStack );
+  mLabel->setAlignment( AlignHCenter | AlignVCenter | WordBreak );
+  mStack->addWidget( mLabel );
+
+  mQuotaWidget = new KMail::QuotaWidget( mStack );
+}
+
+
+void KMail::FolderDiaQuotaTab::initializeWithValuesFromFolder( KMFolder* folder )
+{
+  // This can be simplified once KMFolderImap and KMFolderCachedImap have a common base class
+  mFolderType = folder->folderType();
+  if ( mFolderType == KMFolderTypeImap ) {
+    KMFolderImap* folderImap = static_cast<KMFolderImap*>( folder->storage() );
+    mImapAccount = folderImap->account();
+    mImapPath = folderImap->imapPath();
+  }
+  else if ( mFolderType == KMFolderTypeCachedImap ) {
+    KMFolderCachedImap* folderImap = static_cast<KMFolderCachedImap*>( folder->storage() );
+    mImapAccount = folderImap->account();
+    mQuotaInfo = folderImap->quotaInfo();
+  }
+  else
+    assert( 0 ); // see KMFolderDialog constructor
+}
+
+void KMail::FolderDiaQuotaTab::load()
+{
+  if ( mDlg->folder() ) {
+    // existing folder
+    initializeWithValuesFromFolder( mDlg->folder() );
+  } else if ( mDlg->parentFolder() ) {
+    // new folder
+    initializeWithValuesFromFolder( mDlg->parentFolder() );
+  }
+
+  if ( mFolderType == KMFolderTypeCachedImap ) {
+    showQuotaWidget();
+    return;
+  }
+
+  assert( mFolderType == KMFolderTypeImap );
+
+  // Loading, for online IMAP, consists of two steps:
+  // 1) connect
+  // 2) get quota info
+
+  // First ensure we are connected
+  mStack->raiseWidget( mLabel );
+  if ( !mImapAccount ) { // hmmm?
+    mLabel->setText( i18n( "Error: no IMAP account defined for this folder" ) );
+    return;
+  }
+  KMFolder* folder = mDlg->folder() ? mDlg->folder() : mDlg->parentFolder();
+  if ( folder && folder->storage() == mImapAccount->rootFolder() )
+    return; // nothing to be done for the (virtual) account folder
+  mLabel->setText( i18n( "Connecting to server %1, please wait..." ).arg( mImapAccount->host() ) );
+  ImapAccountBase::ConnectionState state = mImapAccount->makeConnection();
+  if ( state == ImapAccountBase::Error ) { // Cancelled by user, or slave can't start
+    slotConnectionResult( -1, QString::null );
+  } else if ( state == ImapAccountBase::Connecting ) {
+    connect( mImapAccount, SIGNAL( connectionResult(int, const QString&) ),
+             this, SLOT( slotConnectionResult(int, const QString&) ) );
+  } else { // Connected
+    slotConnectionResult( 0, QString::null );
+  }
+
+}
+
+void KMail::FolderDiaQuotaTab::slotConnectionResult( int errorCode, const QString& errorMsg )
+{
+  disconnect( mImapAccount, SIGNAL( connectionResult(int, const QString&) ),
+              this, SLOT( slotConnectionResult(int, const QString&) ) );
+  if ( errorCode ) {
+    if ( errorCode == -1 )  // unspecified error
+      mLabel->setText( i18n( "Error connecting to server %1" ).arg( mImapAccount->host() ) );
+    else
+      // Connection error (error message box already shown by the account)
+      mLabel->setText( KIO::buildErrorString( errorCode, errorMsg ) );
+    return;
+  }
+  connect( mImapAccount, SIGNAL( receivedStorageQuotaInfo( KMFolder*, KIO::Job*, const KMail::QuotaInfo& ) ),
+          this, SLOT( slotReceivedQuotaInfo( KMFolder*, KIO::Job*, const KMail::QuotaInfo& ) ) );
+  KMFolder* folder = mDlg->folder() ? mDlg->folder() : mDlg->parentFolder();
+  mImapAccount->getStorageQuotaInfo( folder, mImapPath );
+}
+
+void KMail::FolderDiaQuotaTab::slotReceivedQuotaInfo( KMFolder* folder,
+                                                      KIO::Job* job,
+                                                      const KMail::QuotaInfo& info )
+{
+  if ( folder == mDlg->folder() ? mDlg->folder() : mDlg->parentFolder() ) {
+    //KMFolderImap* folderImap = static_cast<KMFolderImap*>( folder->storage() );
+
+    disconnect( mImapAccount, SIGNAL(receivedStorageQuotaInfo( KMFolder*, KIO::Job*, const KMail::QuotaInfo& )),
+                this, SLOT(slotReceivedQuotaInfo( KMFolder*, KIO::Job*, const KMail::QuotaInfo& )) );
+
+    if ( job && job->error() ) {
+      if ( job->error() == KIO::ERR_UNSUPPORTED_ACTION )
+        mLabel->setText( i18n( "This account does not have support for quota information." ) );
+      else
+        mLabel->setText( i18n( "Error retrieving quota information from server\n%1" ).arg( job->errorString() ) );
+    } else {
+      mQuotaInfo = info;
+    }
+    showQuotaWidget();
+  }
+}
+
+void KMail::FolderDiaQuotaTab::showQuotaWidget()
+{
+  if ( !mQuotaInfo.isValid() ) {
+    if ( !mImapAccount->hasQuotaSupport() ) {
+      mLabel->setText( i18n( "This account does not have support for quota information." ) );
+    }
+  } else {
+    if ( !mQuotaInfo.isEmpty() ) {
+      mStack->raiseWidget( mQuotaWidget );
+      mQuotaWidget->setQuotaInfo( mQuotaInfo );
+    } else {
+      mLabel->setText( i18n( "No quota is set for this folder." ) );
+    }
+  }
+}
+
+
+KMail::FolderDiaTab::AcceptStatus KMail::FolderDiaQuotaTab::accept()
+{
+  if ( mFolderType == KMFolderTypeCachedImap || mFolderType == KMFolderTypeImap )
+    return Accepted;
+  else
+    assert(0);
+}
+
+bool KMail::FolderDiaQuotaTab::save()
+{
+  // nothing to do, we are read-only
+  return true;
+}
+
+bool KMail::FolderDiaQuotaTab::supports( KMFolder* refFolder )
+{
+  ImapAccountBase* imapAccount = 0;
+  if ( refFolder->folderType() == KMFolderTypeImap )
+    imapAccount = static_cast<KMFolderImap*>( refFolder->storage() )->account();
+  else if ( refFolder->folderType() == KMFolderTypeCachedImap )
+    imapAccount = static_cast<KMFolderCachedImap*>( refFolder->storage() )->account();
+  return imapAccount && imapAccount->hasQuotaSupport(); // support for Quotas (or not tried connecting yet)
+}
+
+#include "folderdiaquotatab.moc"
Index: kmail/kmfolder.cpp
===================================================================
--- kmail/kmfolder.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kmail/kmfolder.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -426,12 +426,12 @@
 
 int KMFolder::find( const KMMsgBase* msg ) const
 {
-  return mStorage->find( msg );
+  return mStorage ? mStorage->find( msg ) : 0;
 }
 
 int KMFolder::find( const KMMessage* msg ) const
 {
-  return mStorage->find( msg );
+  return mStorage ? mStorage->find( msg ) : 0;
 }
 
 int KMFolder::count( bool cache ) const
@@ -631,11 +631,13 @@
         mWhoField = "From";
       if ( this == kmkernel->outboxFolder() ||
            this == kmkernel->sentFolder() ||
-           this == kmkernel->draftsFolder() )
+           this == kmkernel->draftsFolder() ||
+           this == kmkernel->templatesFolder() )
         mWhoField = "To";
-    } else if ( identity.drafts() == idString()
-                || identity.fcc() == idString() )
-      // drafts or sent of the identity
+    } else if ( identity.drafts() == idString() ||
+                identity.templates() == idString() ||
+                identity.fcc() == idString() )
+      // drafts, templates or sent of the identity
       mWhoField = "To";
     else
       mWhoField = "From";
Index: kmail/quotajobs.h
===================================================================
--- kmail/quotajobs.h	(.../tags/KDE/3.5.6/kdepim)	(wersja 0)
+++ kmail/quotajobs.h	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -0,0 +1,188 @@
+/**
+ * quotajobs.h
+ *
+ * Copyright (c) 2006 Till Adam <adam@kde.org>
+ *
+ *
+ *  This program is free software; you can redistribute it and/or modify
+ *  it under the terms of the GNU General Public License as published by
+ *  the Free Software Foundation; version 2 of the License
+ *
+ *  This program is distributed in the hope that it will be useful,
+ *  but WITHOUT ANY WARRANTY; without even the implied warranty of
+ *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+ *  GNU General Public License for more details.
+ *
+ *  You should have received a copy of the GNU General Public License
+ *  along with this program; if not, write to the Free Software
+ *  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA.
+ *
+ *  In addition, as a special exception, the copyright holders give
+ *  permission to link the code of this program with any edition of
+ *  the Qt library by Trolltech AS, Norway (or with modified versions
+ *  of Qt that use the same license as Qt), and distribute linked
+ *  combinations including the two.  You must obey the GNU General
+ *  Public License in all respects for all of the code used other than
+ *  Qt.  If you modify this file, you may extend this exception to
+ *  your version of the file, but you are not obligated to do so.  If
+ *  you do not wish to do so, delete this exception statement from
+ *  your version.
+ */
+
+#ifndef QUOTAJOBS_H
+#define QUOTAJOBS_H
+
+#include <qvariant.h>
+
+#include <kio/job.h>
+#include <klocale.h>
+#include <qvaluevector.h>
+
+#include <math.h>
+
+#include "globalsettings.h"
+
+namespace KMail {
+
+// One quota entry consisting of a name, the quota root,
+// the current value and the maximal value
+class QuotaInfo {
+  public :
+  QuotaInfo() {} // for QValueVector
+  QuotaInfo( const QString& _name, const QString& _root, const QVariant& _current, const QVariant& _max )
+    : mName( _name ), mRoot( _root ), mCurrent( _current ),mMax( _max )  {}
+  bool isValid() const { return !mName.isEmpty(); }
+  bool isEmpty() const { return mName.isEmpty() || ( mRoot.isEmpty() && !mCurrent.isValid() && !mMax.isValid() ); }
+
+  QString name() const { return mName; }
+  void setName( const QString& n ) { mName = n; }
+  QString root() const { return mRoot; }
+  void setRoot( const QString& r ) { mRoot = r; }
+  QVariant max() const { return mMax; }
+  void setMax( const QVariant& m ) { mMax = m; }
+  QVariant current() const { return mCurrent; }
+  void setCurrent( const QVariant& c ) { mCurrent = c; }
+
+  QString toString() const {
+    if ( isValid() && !isEmpty() ) {
+      readConfig();
+      int factor = static_cast<int> ( pow( 1000, mFactor ) );
+      return i18n("%1 of %2 %3 used").arg( mCurrent.toInt() / factor )
+                                .arg( mMax.toInt() / factor ).arg( mUnits );
+    }
+    return QString();
+  }
+
+ private:
+  void readConfig() const {
+      if( GlobalSettings::self()->quotaUnit() == GlobalSettings::EnumQuotaUnit::KB )
+      {
+            mUnits = i18n("KB");
+            mFactor = 0;
+      }
+      else if( GlobalSettings::self()->quotaUnit() == GlobalSettings::EnumQuotaUnit::MB )
+           {
+                mUnits = i18n("MB");
+                mFactor = 1;
+           }
+      else if( GlobalSettings::self()->quotaUnit() == GlobalSettings::EnumQuotaUnit::GB )
+           {
+               mUnits = i18n("GB");
+               mFactor = 2;
+           }
+   }
+
+  QString mName;  // e.g. STORAGE
+  QString mRoot; /// e.g. INBOX
+  QVariant mCurrent;
+  QVariant mMax;
+  mutable QString mUnits; //used by readConfig (const) privately and is modified
+  mutable int mFactor;
+};
+
+typedef QValueVector<QuotaInfo> QuotaInfoList;
+
+/**
+ * This namespace contains functions that return jobs for quota operations.
+ *
+ * The current implementation is tied to IMAP.
+ * If someone wants to extend this to other protocols, turn the namespace into a class
+ * and use virtual methods.
+ */
+namespace QuotaJobs {
+
+class GetQuotarootJob;
+/**
+ * Get the quotaroots for a mailbox
+ * @param slave Slave object the job should be assigned to
+ * @param url URL for which to get the quotaroot
+ */
+GetQuotarootJob* getQuotaroot( KIO::Slave* slave, const KURL& url );
+
+class GetStorageQuotaJob;
+/**
+ * Get the storage quota for a mailbox, if there is one.
+ * @param slave Slave object the job should be assigned to
+ * @param url URL for which to get the storage quota
+ */
+GetStorageQuotaJob* getStorageQuota( KIO::Slave* slave, const KURL& url );
+
+/// for getQuotaroot()
+class GetQuotarootJob : public KIO::SimpleJob
+{
+  Q_OBJECT
+public:
+  GetQuotarootJob( const KURL& url, const QByteArray &packedArgs, bool showProgressInfo );
+
+signals:
+  /** Emitted when the server returns a (potentially empty) list of
+   * quota roots for the specified mailbox.
+   * @param roots List of quota roots for the mailbox
+   */
+  void quotaRootResult( const QStringList& roots );
+
+  /**
+   * Emitted when the server returns a list of quota infos for the specified
+   * mailbox. This is an aggregate of all quotas for all applicable roots for
+   * the mailbox. It happens as a side effect of root listing.
+   * @param info List of quota infos for the mailbox
+   */
+  void quotaInfoReceived( const QuotaInfoList& info );
+
+protected slots:
+  void slotInfoMessage( KIO::Job*, const QString& );
+};
+
+/// for getStorageQuota()
+class GetStorageQuotaJob : public KIO::Job
+{
+  Q_OBJECT
+public:
+  GetStorageQuotaJob( KIO::Slave* slave, const KURL& url );
+
+  /**  Returns the storage quota info, if any, can be queried on result(). */
+  QuotaInfo storageQuotaInfo() const;
+
+signals:
+  /** Emitted to indicate that storage quota information has
+   * been received. Is not emitted if there is no such info
+   * on the server, so users need to rely on the normal
+   * result() signal to be informed when the job is done.
+   */
+  void storageQuotaResult( const QuotaInfo& info );
+
+
+protected slots:
+  void slotQuotarootResult( const QStringList& roots );
+  void slotQuotaInfoReceived( const QuotaInfoList& roots );
+private:
+  QuotaInfo mStorageQuotaInfo;
+};
+
+} // QuotaJobs namespace
+
+} // KMail namespace
+
+
+#endif /* QUOTAJOBS_H */
+
Index: kmail/util.h
===================================================================
--- kmail/util.h	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kmail/util.h	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -41,6 +41,7 @@
 #include <stdlib.h>
 #include <qobject.h>
 #include <qcstring.h>
+class DwString;
 
 namespace KMail
 {
@@ -66,10 +67,103 @@
      * @return The result string.
      */
     QCString lf2crlf( const QCString & src );
+    /**
+     * Convert "\n" line endings to "\r\n".
+     * @param src The source string to convert. NOT null-terminated.
+     * @return The result string. NOT null-terminated.
+     */
+    QByteArray lf2crlf( const QByteArray & src );
 
     /**
+     * Construct a QCString from a DwString
+     */
+    QCString CString( const DwString& str );
+
+    /**
+     * Construct a QByteArray from a DwString
+     */
+    QByteArray ByteArray( const DwString& str );
+
+    /**
+     * Construct a DwString from a QCString
+     */
+    DwString dwString( const QCString& str );
+
+    /**
+     * Construct a DwString from a QByteArray
+     */
+    DwString dwString( const QByteArray& str );
+
+    /**
+     * Fills a QByteArray from a QCString - removing the trailing null.
+     */
+    void setFromQCString( QByteArray& arr, const QCString& cstr );
+
+    inline void setFromQCString( QByteArray& arr, const QCString& cstr )
+    {
+      if ( cstr.size() )
+        arr.duplicate( cstr.data(), cstr.size()-1 );
+      else
+        arr.resize(0);
+    }
+
+    /**
+     * Creates a QByteArray from a QCString without detaching (duplicating the data).
+     * Fast, but be careful, the QCString gets modified by this; this is only good for
+     * the case where the QCString is going to be thrown away afterwards anyway.
+     */
+    QByteArray byteArrayFromQCStringNoDetach( QCString& cstr );
+    inline QByteArray byteArrayFromQCStringNoDetach( QCString& cstr )
+    {
+      QByteArray arr = cstr;
+      if ( arr.size() )
+        arr.resize( arr.size() - 1 );
+      return arr;
+    }
+
+    /**
+     * Restore the QCString after byteArrayFromQCStringNoDetach modified it
+     */
+    void restoreQCString( QCString& str );
+    inline void restoreQCString( QCString& str )
+    {
+      if ( str.data() )
+        str.resize( str.size() + 1 );
+    }
+
+    /**
+     * Fills a QCString from a QByteArray - adding the trailing null.
+     */
+    void setFromByteArray( QCString& cstr, const QByteArray& arr );
+
+    inline void setFromByteArray( QCString& result, const QByteArray& arr )
+    {
+      const int len = arr.size();
+      result.resize( len + 1 /* trailing NUL */ );
+      memcpy(result.data(), arr.data(), len);
+      result[len] = 0;
+    }
+
+    /**
+     * Append a bytearray to a bytearray. No trailing nuls anywhere.
+     */
+    void append( QByteArray& that, const QByteArray& str );
+
+    /**
+     * Append a char* to a bytearray. Trailing nul not copied.
+     */
+    void append( QByteArray& that, const char* str );
+
+    /**
+     * Append a QCString to a bytearray. Trailing nul not copied.
+     */
+    void append( QByteArray& that, const QCString& str );
+
+    void insert( QByteArray& that, uint index, const char* s );
+
+    /**
      * A LaterDeleter is intended to be used with the RAII ( Resource
-     * Acquisiation is Initialization ) paradigm. When an instance of it
+     * Acquisition is Initialization ) paradigm. When an instance of it
      * goes out of scope it deletes the associated object  It can be 
      * disabled, in case the deletion needs to be avoided for some 
      * reason, since going out-of-scope cannot be avoided.
Index: kmail/KMail.desktop
===================================================================
--- kmail/KMail.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kmail/KMail.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -1,10 +1,11 @@
 [Desktop Entry]
 Encoding=UTF-8
 Name=KMail
-Name[be]=K Пошта
 Name[eo]=Retpoŝto
 Name[hi]=के-मेल
 Name[lv]=KPasts
+Name[mk]=КПошта
+Name[ne]=केडीई मेल
 Name[pa]=ਕੇ-ਪੱਤਰ
 Name[sv]=Kmail
 Name[ta]=Kஅஞ்சல்
@@ -48,10 +49,12 @@
 GenericName[km]=កម្មវិធី​អ៊ីមែល
 GenericName[lt]=Pašto klientas
 GenericName[lv]=Pasta Klients
+GenericName[mk]=Клиент за електронска пошта
 GenericName[ms]=Pelanggan Mel
 GenericName[mt]=Klijent tal-imejl
 GenericName[nb]=E-postklient
 GenericName[nds]=Nettpostprogramm
+GenericName[ne]=मेल क्लाइन्ट
 GenericName[nl]=E-mailclient
 GenericName[nn]=E-postklient
 GenericName[pa]=ਪੱਤਰ ਕਲਾਂਇਟ
Index: kmail/folderdiaquotatab.h
===================================================================
--- kmail/folderdiaquotatab.h	(.../tags/KDE/3.5.6/kdepim)	(wersja 0)
+++ kmail/folderdiaquotatab.h	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -0,0 +1,91 @@
+// -*- mode: C++; c-file-style: "gnu" -*-
+/**
+ * folderdiaquotatab.h
+ *
+ * Copyright (c) 2006 Till Adam <adam@kde.org>
+ *
+ *
+ *  This program is free software; you can redistribute it and/or modify
+ *  it under the terms of the GNU General Public License as published by
+ *  the Free Software Foundation; version 2 of the License
+ *
+ *  This program is distributed in the hope that it will be useful,
+ *  but WITHOUT ANY WARRANTY; without even the implied warranty of
+ *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+ *  GNU General Public License for more details.
+ *
+ *  You should have received a copy of the GNU General Public License
+ *  along with this program; if not, write to the Free Software
+ *  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA.
+ *
+ *  In addition, as a special exception, the copyright holders give
+ *  permission to link the code of this program with any edition of
+ *  the Qt library by Trolltech AS, Norway (or with modified versions
+ *  of Qt that use the same license as Qt), and distribute linked
+ *  combinations including the two.  You must obey the GNU General
+ *  Public License in all respects for all of the code used other than
+ *  Qt.  If you modify this file, you may extend this exception to
+ *  your version of the file, but you are not obligated to do so.  If
+ *  you do not wish to do so, delete this exception statement from
+ *  your version.
+ */
+#ifndef FOLDERDIAQUOTA_H
+#define FOLDERDIAQUOTA_H
+
+#include "kmfolderdia.h"
+#include "kmfoldertype.h"
+#include "quotajobs.h"
+
+namespace KMail {
+  class QuotaWidget;
+}
+class QVBox;
+class QWidgetStack;
+
+namespace KMail {
+
+class ImapAccountBase;
+
+/**
+ * "Quota" tab in the folder dialog
+ * Internal class, only used by KMFolderDialog
+ */
+class FolderDiaQuotaTab : public FolderDiaTab
+{
+  Q_OBJECT
+
+public:
+  FolderDiaQuotaTab( KMFolderDialog* dlg, QWidget* parent, const char* name = 0 );
+
+  virtual void load();
+  virtual bool save();
+  virtual AcceptStatus accept();
+
+  static bool supports( KMFolder* refFolder );
+
+private:
+  void initializeWithValuesFromFolder( KMFolder* folder );
+  void showQuotaWidget();
+private slots:
+  // Network (KIO) slots
+  void slotConnectionResult( int, const QString& );
+  void slotReceivedQuotaInfo( KMFolder*, KIO::Job*, const KMail::QuotaInfo& );
+
+
+private:
+
+  QLabel* mLabel;
+  KMail::QuotaWidget* mQuotaWidget;
+  QWidgetStack* mStack;
+  ImapAccountBase* mImapAccount;
+  QString mImapPath;
+  KMFolderDialog* mDlg;
+
+  QuotaInfo mQuotaInfo;
+  KMFolderType mFolderType;
+};
+
+} // end of namespace KMail
+
+#endif /* FOLDERDIAQUOTA_H */
+
Index: kmail/kmmsgpart.h
===================================================================
--- kmail/kmmsgpart.h	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kmail/kmmsgpart.h	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -27,6 +27,7 @@
 template <typename T>
 class QValueList;
 class QTextCodec;
+class DwString;
 
 class KMMessagePart
 {
@@ -45,6 +46,10 @@
   /** Get or set the message body */
   QCString body(void) const;
   void setBody(const QCString &aStr);
+  DwString dwBody() const;
+  void setBody(const DwString &aStr);
+  // warning, doesn't detach from 'arr'
+  void setBody(const QByteArray &arr);
 
   /** Sets this body part's content to @p str. @p str is subject to
       automatic charset and CTE detection.
@@ -58,11 +63,11 @@
   /** Returns body as decoded string. Assumes that content-transfer-encoding
     contains the correct encoding. This routine is meant for binary data.
     No trailing 0 is appended. */
-  virtual QByteArray bodyDecodedBinary(void) const;
+  QByteArray bodyDecodedBinary(void) const;
 
   /** Returns body as decoded string. Assumes that content-transfer-encoding
       contains the correct encoding. This routine is meant for text strings! */
-  virtual QCString bodyDecoded(void) const;
+  QCString bodyDecoded(void) const;
 
   /** Sets body, encoded in the best fitting
       content-transfer-encoding, which is determined by character
@@ -73,26 +78,33 @@
       @param allow8Bit  whether "8bit" is allowed as cte.
       @param willBeSigned whether "7bit"/"8bit" is allowed as cte according to RFC 3156
   */
-  virtual void setBodyAndGuessCte(const QByteArray& aBuf,
+  void setBodyAndGuessCte(const QByteArray& aBuf,
 				  QValueList<int>& allowedCte,
 				  bool allow8Bit = false,
                                   bool willBeSigned = false);
   /** Same for text */
-  virtual void setBodyAndGuessCte(const QCString& aBuf,
+  void setBodyAndGuessCte(const QCString& aBuf,
 				  QValueList<int>& allowedCte,
 				  bool allow8Bit = false,
                                   bool willBeSigned = false);
 
   /** Sets body, encoded according to the content-transfer-encoding.
-      BEWARE: The entire aStr is used including trailing 0 of text strings! */
-  virtual void setBodyEncodedBinary(const QByteArray& aStr);
+      BEWARE: The entire aStr is used including trailing 0 of text strings!
+      This version is faster than setBodyEncoded, no duplication necessary.
+    */
+  void setBodyEncodedBinary(const QByteArray& aStr);
 
   /** Sets body, encoded according to the content-transfer-encoding.
-      This one is for text strings, the trailing 0 is not used. */
-  virtual void setBodyEncoded(const QCString& aStr);
+      This one is for text strings, the trailing 0 is not used.
 
+      For speed reasons, prefer setBodyEncodedBinary.
+      When possible (the QCString isn't used afterwards), change setBodyEncoded(myQCString) into:
+       setBodyEncodedBinary(byteArrayFromQCStringNoDetach(myQCString));
+  */
+ void setBodyEncoded(const QCString& aStr);
+
   /** Returns decoded length of body. */
-  virtual int decodedSize(void) const;
+  int decodedSize(void) const;
 
   /** Get or set the 'Content-Type' header field
    The member functions that involve enumerated types (ints)
Index: kmail/dcopmail.desktop
===================================================================
--- kmail/dcopmail.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kmail/dcopmail.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -5,7 +5,7 @@
 Comment=Mail program with a DCOP interface
 Comment[af]=E-pos program met 'n DCOP koppelvlak
 Comment[be]=Паштовая праграма з DCOP інтэрфэйсам
-Comment[bg]=Клиент на електронна поща за КДЕ
+Comment[bg]=Клиент на електронна поща за KDE
 Comment[bs]=Mail program sa DCOP interfejsom
 Comment[ca]=Un programa de correu amb una interfície DCOP
 Comment[cs]=Poštvní program s DCOP rozhraním
@@ -27,9 +27,11 @@
 Comment[ja]=DCOP インターフェース付のメールプログラム
 Comment[km]=កម្មវិធី​អ៊ីមែល​ដែល​មាន​ចំណុច​ប្រទាក់ DCOP
 Comment[lt]=Pašto programa su DCOP sąsaja
+Comment[mk]=Програма за е-пошта, со DCOP-интерфејс
 Comment[ms]=Program Mel dengan antara muka  DCOP 
 Comment[nb]=E-postprogram med DCOP grensesnitt
 Comment[nds]=Nettpostprogramm mit DCOP-Koppelsteed
+Comment[ne]=DCOP इन्टरफेसमा मेल कार्यक्रम
 Comment[nl]=E-mailprogramma met een DCOP-interface
 Comment[nn]=E-postprogram med eit DCOP-grensesnitt
 Comment[pl]=Program pocztowy z interfejsem DCOP
Index: kmail/kmtransport.cpp
===================================================================
--- kmail/kmtransport.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kmail/kmtransport.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -126,15 +126,15 @@
   if ( storePasswd() ) {
     // write password into the wallet if possible and necessary
     bool passwdStored = false;
+    Wallet *wallet = kmkernel->wallet();
     if ( mPasswdDirty ) {
-      Wallet *wallet = kmkernel->wallet();
       if ( wallet && wallet->writePassword( "transport-" + QString::number(mId), passwd() ) == 0 ) {
         passwdStored = true;
         mPasswdDirty = false;
         mStorePasswdInConfig = false;
       }
     } else {
-      passwdStored = !mStorePasswdInConfig; // already in the wallet
+      passwdStored = wallet ? !mStorePasswdInConfig /*already in the wallet*/ : config->hasKey("pass");
     }
     // wallet not available, ask the user if we should use the config file instead
     if ( !passwdStored && ( mStorePasswdInConfig ||  KMessageBox::warningYesNo( 0,
Index: kmail/kmfoldermbox.h
===================================================================
--- kmail/kmfoldermbox.h	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kmail/kmfoldermbox.h	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -109,7 +109,7 @@
 
   void setProcmailLockFileName( const QString& );
 
-  static QCString escapeFrom( const QCString & str );
+  static QByteArray escapeFrom( const DwString & str );
 
   virtual IndexStatus indexStatus();
 
Index: kmail/kmail_config_security.desktop
===================================================================
--- kmail/kmail_config_security.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kmail/kmail_config_security.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -39,9 +39,11 @@
 Name[ja]=セキュリティ
 Name[km]=សុវត្ថិភាព
 Name[lt]=Saugumas
+Name[mk]=Безбедност
 Name[ms]=Keselamatan
 Name[nb]=Sikkerhet
 Name[nds]=Sekerheit
+Name[ne]=सूरक्षा
 Name[nl]=Beveiliging
 Name[nn]=Tryggleik
 Name[pa]=ਸੁਰੱਖਿਆ
@@ -64,7 +66,7 @@
 Name[zh_TW]=安全性
 Comment=Security & Privacy Settings
 Comment[af]=Sekuriteit en provaatheid opstelling
-Comment[be]=Настройкі бясьпекі і прыватнасьці
+Comment[be]=Настаўленні бясьпекі і прыватнасьці
 Comment[bg]=Настройки на сигурността
 Comment[br]=Kefluniadur surentez ar buhez prevez
 Comment[bs]=Postavke sigurnosti i privatnosti
@@ -87,9 +89,11 @@
 Comment[ja]=セキュリティ & プライバシーの設定
 Comment[km]=ការ​កំណត់​សុវត្ថិភាព & ភាព​ឯកជន
 Comment[lt]=Saugumo ir privatumo nustatymai
+Comment[mk]=Поставувања за безбедност и приватност
 Comment[ms]=Seting Keselamatan & Peribadi
 Comment[nb]=Sikkerhet og personvern-instillinger
 Comment[nds]=Sekerheit- un Privaatrebeet-Instellen
+Comment[ne]=सुरक्षा र गोप्यता सेटिङ
 Comment[nl]=Beveiligings- en privacy-instellingen
 Comment[nn]=Innstillingar for tryggleik og personvern
 Comment[pl]=Ustawienia bezpieczeństwa i prywatności
@@ -133,9 +137,11 @@
 Keywords[ja]=kmail,セキュリティ
 Keywords[km]=kmail,សុវត្ថិភាព
 Keywords[lt]=kmail,security,saugumas
+Keywords[mk]=kmail,security,кпошта,безбедност
 Keywords[ms]=kmail,keselamatan
 Keywords[nb]=kmail,sikkerhet
 Keywords[nds]=KMail,Sekerheit,Privaatrebeet
+Keywords[ne]=केडीई मेल, सुरक्षा
 Keywords[nl]=kmail,beveiliging
 Keywords[nn]=KMail,tryggleik
 Keywords[pl]=kmail,bezpieczeństwo,prywatność
Index: kmail/objecttreeparser.cpp
===================================================================
--- kmail/objecttreeparser.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kmail/objecttreeparser.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -401,7 +401,7 @@
 
     if ( doCheck && cryptPlug ) {
       if ( data ) {
-        cleartext = data->dwPart()->AsString().c_str();
+        cleartext = KMail::Util::CString( data->dwPart()->AsString() );
 
         dumpToFile( "dat_01_reader_signedtext_before_canonicalization",
                     cleartext.data(), cleartext.length() );
@@ -970,9 +970,8 @@
   }
 
   bool ObjectTreeParser::processTextPlainSubtype( partNode * curNode, ProcessResult & result ) {
-    const QCString cstr = curNode->msgPart().bodyDecoded();
     if ( !mReader ) {
-      mRawReplyString = cstr;
+      mRawReplyString = curNode->msgPart().bodyDecoded();
       if ( curNode->isFirstTextPart() ) {
         mTextualContent += curNode->msgPart().bodyToUnicode();
         mTextualContentCharset = curNode->msgPart().charset();
@@ -980,13 +979,12 @@
       return true;
     }
 
-    //resultingRawData += cstr;
     if ( !curNode->isFirstTextPart() &&
          attachmentStrategy()->defaultDisplay( curNode ) != AttachmentStrategy::Inline &&
          !showOnlyOneMimePart() )
       return false;
 
-    mRawReplyString = cstr;
+    mRawReplyString = curNode->msgPart().bodyDecoded();
     if ( curNode->isFirstTextPart() ) {
       mTextualContent += curNode->msgPart().bodyToUnicode();
       mTextualContentCharset = curNode->msgPart().charset();
@@ -1029,7 +1027,7 @@
     // enable verification of the embedded messages' signatures
     if ( !isMailmanMessage( curNode ) ||
          !processMailmanMessage( curNode ) )
-      writeBodyString( cstr, curNode->trueFromAddress(),
+      writeBodyString( mRawReplyString, curNode->trueFromAddress(),
                        codecFor( curNode ), result, !bDrawFrame );
     if ( bDrawFrame )
       htmlWriter()->queue( "</td></tr></table>" );
Index: kmail/kmail_config_accounts.desktop
===================================================================
--- kmail/kmail_config_accounts.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kmail/kmail_config_accounts.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -40,9 +40,11 @@
 Name[ja]=アカウント
 Name[km]=គណនី
 Name[lt]=Paskyros
+Name[mk]=Сметки
 Name[ms]=Akaun
 Name[nb]=Kontoer
 Name[nds]=Kontos
+Name[ne]=खाता
 Name[nn]=Kontoar
 Name[pa]=ਖਾਤੇ
 Name[pl]=Konta
@@ -85,9 +87,11 @@
 Comment[ja]=メッセージを送受信するための設定
 Comment[km]=រៀបចំ​ដើម្បី​ផ្ញើ និង ទទួល​សារ
 Comment[lt]=Laiškų siuntimo ir gavimo sąranka
+Comment[mk]=Конфигурација за примање и испраќање пораки
 Comment[ms]=Setup untuk Menghantar dan Menerima Mesej
 Comment[nb]=Oppset for mottak og sending av meldinger
 Comment[nds]=Instellen för dat Sennen un Kriegen vun Narichten
+Comment[ne]=सन्देश पठाउन वा प्राप्त गर्न सेटअप गर्नुहोस्
 Comment[nl]=Instellingen voor het verzenden en ontvangen van berichten
 Comment[nn]=Oppsett av sending og mottak av meldingar
 Comment[pl]=Ustawienia wysyłania i odbierania wiadomości
@@ -128,9 +132,11 @@
 Keywords[it]=kmail,account
 Keywords[km]=kmail,គណនី
 Keywords[lt]=kmail,accounts,paskyros
+Keywords[mk]=kmail,accounts,кпошта,сметка,сметки
 Keywords[ms]=kmail,akaun
 Keywords[nb]=kmail,kontoer
 Keywords[nds]=KMail,Kontos
+Keywords[ne]=केडीई मेल,खाता
 Keywords[nn]=KMail,kontoar
 Keywords[pl]=kmail,konta
 Keywords[pt]=kmail,contas
Index: kmail/kmsender.cpp
===================================================================
--- kmail/kmsender.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kmail/kmsender.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -605,7 +605,7 @@
   if ( messageIsDispositionNotificationReport( mCurrentMsg ) && GlobalSettings::self()->sendMDNsWithEmptySender() )
     sender = "<>";
 
-  const QCString message = mCurrentMsg->asSendableString();
+  const QByteArray message = mCurrentMsg->asSendableString();
   if ( sender.isEmpty() || !mSendProc->send( sender, to, cc, bcc, message ) ) {
     if ( mCurrentMsg )
       mCurrentMsg->setTransferInProgress( false );
@@ -963,7 +963,7 @@
   idle();
 }
 
-bool KMSendSendmail::doSend( const QString & sender, const QStringList & to, const QStringList & cc, const QStringList & bcc, const QCString & message ) {
+bool KMSendSendmail::doSend( const QString & sender, const QStringList & to, const QStringList & cc, const QStringList & bcc, const QByteArray & message ) {
   mMailerProc->clearArguments();
   *mMailerProc << mSender->transportInfo()->host
                << "-i" << "-f" << sender
@@ -977,7 +977,7 @@
     return false;
   }
   mMsgPos  = mMsgStr.data();
-  mMsgRest = mMsgStr.length();
+  mMsgRest = mMsgStr.size();
   wroteStdin( mMailerProc );
 
   return true;
@@ -1048,7 +1048,7 @@
   if (mJob) mJob->kill();
 }
 
-bool KMSendSMTP::doSend( const QString & sender, const QStringList & to, const QStringList & cc, const QStringList & bcc, const QCString & message ) {
+bool KMSendSMTP::doSend( const QString & sender, const QStringList & to, const QStringList & cc, const QStringList & bcc, const QByteArray & message ) {
   QString query = "headers=0&from=";
   query += KURL::encode_string( sender );
 
@@ -1119,7 +1119,7 @@
 
   // dotstuffing is now done by the slave (see setting of metadata)
   mMessage = message;
-  mMessageLength = mMessage.length();
+  mMessageLength = mMessage.size();
   mMessageOffset = 0;
 
   if ( mMessageLength )
Index: networkstatus/networkstatus.desktop
===================================================================
--- networkstatus/networkstatus.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ networkstatus/networkstatus.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -2,6 +2,7 @@
 Encoding=UTF-8
 Name=Network Status Daemon
 Name[af]=Netwerk status bediener
+Name[ar]=مراقب القرص و التنفيذ لحالة الشبكة
 Name[bg]=Демон за състояние на мрежата
 Name[ca]=Dimoni de l'estat de la xarxa
 Name[cs]=Démon stavu sítě
@@ -21,9 +22,11 @@
 Name[ja]=ネットワークステータスデーモン
 Name[km]=ដេមិន​ស្ថានភាព​បណ្ដាញ
 Name[lt]=Tinklo statuso tarnyba
+Name[mk]=Даемон за мрежен статус
 Name[ms]=Daemon Berstatus Rangkaian
 Name[nb]=Statusnisse for nettverket
 Name[nds]=Nettwarkstatus-Dämoon
+Name[ne]=सञ्जाल स्थिति डेइमोन
 Name[nl]=Netwerkstatusdaemon
 Name[nn]=Statusnisse for nettverket
 Name[pl]=Usługa stanu sieci
@@ -58,12 +61,14 @@
 Comment[hu]=Figyeli a hálózati csatolók állapotát és értesítési lehetőséget biztosít hálózati alkalmazások számára.
 Comment[is]=Fylgist með stöðu netkorta og sendir tilkynningar til forrita sem nota netið.
 Comment[it]=Controlla lo stato delle interfacce di rete e fornisce notifiche alle applicazioni che usano al rete.
-Comment[ja]=ネットワークインターフェイスの状態を追跡し、ネットワークを用いるアプリケーションに通知します
+Comment[ja]=ネットワークインターフェースの状態を追跡し、ネットワークを用いるアプリケーションに通知します
 Comment[km]=តាមដាន​ស្ថានភាព​របស់​ចំណុច​ប្រទាក់​បណ្ដាញ ព្រម​ទាំង​ផ្ដល់​នូវ​ការ​ជូនដំណឹង​ទៅ​កម្មវិធី ដែល​ប្រើ​បណ្ដាញ ។
 Comment[lt]=Seka tinklo sąsajų būseną ir informuoja apie jas programas, naudojančias tinklą
+Comment[mk]=Го следи статусот на мрежните интерфејси и дава известувања на апликациите што ја користат мрежата.
 Comment[ms]=Menjejak status antara muka rangkaian dan memberitahu aplikasi yang menggunakan rangkaian tersebut.
 Comment[nb]=Overvåker status for nettverksgrensesnitt og varsler programmer som bruker nettverket.
 Comment[nds]=Överwacht den Tostand vun Nettwark-Koppelsteden un sendt Narichten na Programmen, de dat Nettwark bruukt.
+Comment[ne]=सञ्जाल इन्टरफेसको स्थिति ट्र्याक गर्दछ र सञ्जाल प्रयोग गरेर अनुप्रयोगमा जानकारी उपलब्ध गराउछ ।
 Comment[nl]=Houdt de status bij van de netwerkinterfaces en houdt daar de toepassingen van op de hoogte.
 Comment[nn]=Overvakar status for nettverksgrensesnitt og varslar program som brukar nettverket.
 Comment[pl]=Śledzi stan interfejsów sieciowych i powiadamia programy używające sieci.
Index: knode/knode_config_identity.desktop
===================================================================
--- knode/knode_config_identity.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ knode/knode_config_identity.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -14,7 +14,8 @@
 
 Name=Identity
 Name[af]=Identiteit
-Name[be]=Увасабленьне
+Name[ar]=الهوية
+Name[be]=Увасабленне
 Name[bg]=Самоличност
 Name[br]=Anvelezh
 Name[bs]=Identitet
@@ -38,9 +39,11 @@
 Name[ja]=個人情報
 Name[km]=អត្តសញ្ញាណ
 Name[lt]=Tapatybė
+Name[mk]=Идентитет
 Name[ms]=Identiti
 Name[nb]=Identitet
 Name[nds]=Persoon
+Name[ne]=पहिचान
 Name[nl]=Identiteit
 Name[nn]=Identitet
 Name[pl]=Tożsamość
@@ -87,9 +90,11 @@
 Comment[ja]=個人の情報
 Comment[km]=ព័ត៌មាន​ផ្ទាល់​ខ្លួន
 Comment[lt]=Asmeninė informacija
+Comment[mk]=Лични информации
 Comment[ms]=Maklumat Peribadi
 Comment[nb]=Personlig informasjon
 Comment[nds]=Persöönlich Informatschonen
+Comment[ne]=व्यक्तिगत सूचना
 Comment[nl]=Persoonlijke informatie
 Comment[nn]=Personleg informasjon
 Comment[pa]=ਨਿੱਜੀ ਜਾਣਕਾਰੀ
Index: knode/knode_config_accounts.desktop
===================================================================
--- knode/knode_config_accounts.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ knode/knode_config_accounts.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -40,9 +40,11 @@
 Name[ja]=アカウント
 Name[km]=គណនី
 Name[lt]=Paskyros
+Name[mk]=Сметки
 Name[ms]=Akaun
 Name[nb]=Kontoer
 Name[nds]=Kontos
+Name[ne]=खाता
 Name[nn]=Kontoar
 Name[pa]=ਖਾਤੇ
 Name[pl]=Konta
@@ -84,9 +86,11 @@
 Comment[ja]=ニュースグループとメールサーバの設定
 Comment[km]=រៀបចំម៉ាស៊ីន​បម្រើ​វេទិកា​ព័ត៌មាន និង សំបុត្រ
 Comment[lt]=Naujienų grupių ir pašto serverių nustatymai
+Comment[mk]=Поставување за сервери за групи вести и за е-пошта
 Comment[ms]=Setup untuk Kumpulan Berita dan Pelayan Mel 
 Comment[nb]=Oppsett av njusgruppe- og e-post tjenere
 Comment[nds]=Narichtenkrink- und Nettpostservers instellen
+Comment[ne]=समाचार समूह र पत्र सर्भरका लागि सेटअप गर्नुहोस्
 Comment[nl]=Instellingen voor nieuws- en mailservers
 Comment[nn]=Oppsett av Usenet- og e-post-tenarar
 Comment[pl]=Ustawienia serwerów poczty i grup dyskusyjnych
Index: knode/knode_config_read_news.desktop
===================================================================
--- knode/knode_config_read_news.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ knode/knode_config_read_news.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -14,7 +14,8 @@
 
 Name=Reading News
 Name[af]=Lees Nuus
-Name[be]=Чытаньне навін
+Name[ar]=قراءة الأخبار
+Name[be]=Чытанне навін
 Name[bg]=Четене
 Name[bs]=Čitanje Useneta
 Name[ca]=Lectura de notícies
@@ -36,9 +37,11 @@
 Name[ja]=ニュースを読む
 Name[km]=អាន​ព័ត៌មាន
 Name[lt]=Naujienų skaitymas
+Name[mk]=Читање вести
 Name[ms]=Membaca Berita
 Name[nb]=Lese Njus
 Name[nds]=Narichten lesen
+Name[ne]=समाचार वाचन गर्दैछ
 Name[nl]=Nieuws lezen
 Name[nn]=Les innlegg
 Name[pl]=Odczytywanie wiadomości
Index: knode/knode_config_privacy.desktop
===================================================================
--- knode/knode_config_privacy.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ knode/knode_config_privacy.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -14,6 +14,7 @@
 
 Name=Signing/Verifying
 Name[af]=Teken/Bevestig
+Name[ar]=التوقيع/التحقق
 Name[bg]=Подпис/проверка
 Name[bs]=Potpisivanje/Provjera
 Name[ca]=Signat/Verificació
@@ -35,9 +36,11 @@
 Name[ja]=署名/検証
 Name[km]=ចុះហត្ថលេខា/ផ្ទៀងផ្ទាត់
 Name[lt]=Pasirašoma/tikrinama
+Name[mk]=Потпишување/верификација
 Name[ms]=Menandatangan/Menentu sah
 Name[nb]=Signering/Verifisering
 Name[nds]=Ünnerschrieven / Pröven
+Name[ne]=साइनिङ/रुजु गर्दैछ
 Name[nl]=Ondertekening/Verifiëring
 Name[nn]=Signering/stadfesting
 Name[pl]=Podpisywanie/Weryfikacja podpisów
@@ -80,6 +83,7 @@
 Comment[ms]=Melindungi ruang privasi anda dengan menandatangan dan menentusah pengeposan
 Comment[nb]=Beskytt privatlivet ditt ved å signere og verifisere oppslag
 Comment[nds]=Dör dat Ünnerschrieven un Överpröven vun Narichten warrt Dien Privaatrebeet schuult.
+Comment[ne]=तपाईँको नीजिपना साइन गरेर र पोष्टिङ रुजु गरेर सुरक्षा गर्नुहोस्
 Comment[nl]=Bescherm uw privacy door uw berichten te ondertekenen en te verifiëren
 Comment[nn]=Vern om privatlivet med signerte og stadfesta innlegg
 Comment[pl]=Ochrona prywatności poprzez podpisywanie i weryfikację podpisów wiadomości
Index: knode/knode_config_cleanup.desktop
===================================================================
--- knode/knode_config_cleanup.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ knode/knode_config_cleanup.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -13,6 +13,7 @@
 X-KDE-CfgDlgHierarchy=KNode
 
 Name=Cleanup
+Name[ar]=التنظيف
 Name[bg]=Изчистване
 Name[bs]=Čišćenje
 Name[ca]=Neteja
@@ -35,9 +36,11 @@
 Name[ja]=整理
 Name[km]=សម្អាត
 Name[lt]=Išvalymas
+Name[mk]=Расчистување
 Name[ms]=Pembersihan
 Name[nb]=Rydd opp
 Name[nds]=Oprümen
+Name[ne]=हटाउनुहोस्
 Name[nl]=Opschoning
 Name[nn]=Rydd opp
 Name[pl]=Porządkowanie
@@ -79,9 +82,11 @@
 Comment[ja]=ディスクスペースを維持
 Comment[km]=បង្ការ​ទំហំ​ថាស
 Comment[lt]=Disko erdvės išsaugojimas
+Comment[mk]=Зачувување простор на дискот
 Comment[ms]=Memelihara Ruang Cakera
 Comment[nb]=Bevarer disk plass
 Comment[nds]=Platz op de Fastplaat wohren
+Comment[ne]=चक्का खाली स्थान संचित गर्दैछ
 Comment[nl]=Besparing van schrijfruimte
 Comment[nn]=Frigjer diskplass
 Comment[pl]=Kontrolowanie użytej przestrzeni dyskowej
Index: knode/knode_config_appearance.desktop
===================================================================
--- knode/knode_config_appearance.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ knode/knode_config_appearance.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -13,7 +13,8 @@
 X-KDE-CfgDlgHierarchy=KNode
 
 Name=Appearance
-Name[be]=Зьнешні выгляд
+Name[ar]=المظهر
+Name[be]=Знешні выгляд
 Name[bg]=Външен вид
 Name[br]=Neuziadur
 Name[bs]=Izgled
@@ -43,6 +44,7 @@
 Name[ms]=Rupa
 Name[nb]=Utseende
 Name[nds]=Utsehn
+Name[ne]=मोहडा
 Name[nl]=Uiterlijk
 Name[nn]=Utsjånad
 Name[pl]=Wygląd
@@ -71,7 +73,7 @@
 Comment[cy]=Addasu Golwg
 Comment[da]=Brugerindstil visuelt udseende
 Comment[de]=Erscheinungsbild anpassen
-Comment[el]=Προσαρμογή Εμφάνισης
+Comment[el]=Προσαρμογή εμφάνισης
 Comment[en_GB]=Customise Visual Appearance
 Comment[es]=Apariencia visual personalizada
 Comment[et]=Välimuse seadistused
@@ -87,9 +89,11 @@
 Comment[ja]=外観をカスタマイズ
 Comment[km]=ប្ដូរ​រូបរាង​មើល​ឃើញ​តាម​បំណង
 Comment[lt]=Derinti vizualinę išvaizdą
+Comment[mk]=Приспособете ја визуелната појава
 Comment[ms]=Suaikan Rupa Visual
 Comment[nb]=Tilpass visuelt utseende
 Comment[nds]=Utsehn topassen
+Comment[ne]=दृश्यात्मक मोहडा अनुकूल गर्नुहोस्
 Comment[nl]=Pas het uiterlijk aan
 Comment[nn]=Tilpass utsjånad
 Comment[pl]=Zmiana wyglądu
Index: knode/knode_config_post_news.desktop
===================================================================
--- knode/knode_config_post_news.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ knode/knode_config_post_news.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -35,9 +35,11 @@
 Name[ja]=ニュースを投稿
 Name[km]=ប្រកាស​ព័ត៌មាន​
 Name[lt]=Naujienų skelbimas
+Name[mk]=Испраќање вести
 Name[ms]=Menampal Berita
 Name[nb]=Legge inn Njus
 Name[nds]=Narichten sennen
+Name[ne]=समाचार पोष्ट गर्दैछ
 Name[nl]=Nieuws posten
 Name[nn]=Send innlegg
 Name[pl]=Publikowanie wiadomości
Index: knode/KNode.desktop
===================================================================
--- knode/KNode.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ knode/KNode.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -8,6 +8,7 @@
 Name=KNode
 Name[eo]=Diskutrondoj
 Name[hi]=के-नोड
+Name[ne]=केडीई नोड
 Name[ro]=Ştiri Internet
 Name[sv]=Knode
 Name[ta]=Kநோடு
@@ -46,10 +47,12 @@
 GenericName[km]=កម្មវិធី​អាន​ព័ត៌មាន
 GenericName[lt]=Naujienų skaityklė
 GenericName[lv]=Ziņu Lasītājs
+GenericName[mk]=Читач на вести
 GenericName[ms]=Pembaca Berita
 GenericName[mt]=Qarrej tal-aħbarijiet (news)
 GenericName[nb]=Njusleser
 GenericName[nds]=Usenet-Narichtenkieker
+GenericName[ne]=समाचार वाचक
 GenericName[nl]=Nieuwslezer
 GenericName[nn]=Nyheitslesar
 GenericName[pl]=Program do czytania list dyskusyjnych
Index: kioslaves/imap4/imapparser.cc
===================================================================
--- kioslaves/imap4/imapparser.cc	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kioslaves/imap4/imapparser.cc	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -114,7 +114,9 @@
            || command == "LISTRIGHTS"
            || command == "MYRIGHTS"
            || command == "GETANNOTATION"
-           || command == "NAMESPACE")
+           || command == "NAMESPACE"
+           || command == "GETQUOTAROOT"
+           || command == "GETQUOTA")
   {
     lastResults.clear ();
   }
@@ -430,6 +432,16 @@
       parseAnnotation (result);
     }
     break;
+  case 'Q': // QUOTA or QUOTAROOT
+    if ( what.size() > 5 && qstrncmp(what, "QUOTAROOT", what.size()) == 0)
+    {
+      parseQuotaRoot( result );
+    }
+    else if (qstrncmp(what, "QUOTA", what.size()) == 0)
+    {
+      parseQuota( result );
+    }
+
   default:
     //better be a number
     {
@@ -707,6 +719,48 @@
   }
 }
 
+
+void imapParser::parseQuota (parseString & result)
+{
+  // quota_response  ::= "QUOTA" SP astring SP quota_list
+  // quota_list      ::= "(" #quota_resource ")"
+  // quota_resource  ::= atom SP number SP number
+  QCString root = parseOneWordC( result );
+  if ( root.isEmpty() ) {
+    lastResults.append( "" );
+  } else {
+    lastResults.append( root );
+  }
+  if (result.isEmpty() || result[0] != '(')
+    return;
+  result.pos++;
+  skipWS (result);
+  QStringList triplet;
+  int outlen = 1;
+  while ( outlen && !result.isEmpty() && result[0] != ')' ) {
+    QCString word = parseLiteralC (result, false, false, &outlen);
+    triplet.append(word);
+  }
+  lastResults.append( triplet.join(" ") );
+}
+
+void imapParser::parseQuotaRoot (parseString & result)
+{
+  //    quotaroot_response
+  //         ::= "QUOTAROOT" SP astring *(SP astring)
+  parseOneWordC (result); // skip mailbox name
+  skipWS (result);
+  if ( result.isEmpty() )
+    return;
+  QStringList roots;
+  int outlen = 1;
+  while ( outlen && !result.isEmpty() ) {
+    QCString word = parseLiteralC (result, false, false, &outlen);
+    roots.append (word);
+  }
+  lastResults.append( roots.join(" ") );
+}
+
 void imapParser::parseMyRights (parseString & result)
 {
   parseOneWordC (result); // skip mailbox name
Index: kioslaves/imap4/imapparser.h
===================================================================
--- kioslaves/imap4/imapparser.h	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kioslaves/imap4/imapparser.h	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -290,6 +290,10 @@
   void parseAnnotation (parseString & result);
   /** @brief parse a NAMESPACE line */
   void parseNamespace (parseString & result);
+  /** @brief parse a QUOTAROOT line */
+  void parseQuotaRoot (parseString & result);
+  /** @brief parse a QUOTA line */
+  void parseQuota (parseString & result);
 
   /**
    * parses the results of a fetch command
Index: kioslaves/imap4/imap4.cc
===================================================================
--- kioslaves/imap4/imap4.cc	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kioslaves/imap4/imap4.cc	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -1219,6 +1219,7 @@
  * ACL commands: data = 'A' + command + URL (KURL) + command-dependent args
  * AnnotateMore commands: data = 'M' + 'G'et/'S'et + URL + entry + command-dependent args
  * Search: data = 'E' + URL (KURL)
+ * Quota commands: data = 'Q' + 'R'oot/'G'et/'S'et + URL + entry + command-dependent args
  */
 void
 IMAP4Protocol::special (const QByteArray & aData)
@@ -1337,6 +1338,18 @@
     }
     break;
   }
+  case 'Q':
+  {
+    // quota
+    int cmd;
+    stream >> cmd;
+    if ( hasCapability( "QUOTA" ) ) {
+      specialQuotaCommand( cmd, stream );
+    } else {
+      error( ERR_UNSUPPORTED_ACTION, "QUOTA" );
+    }
+    break;
+  }
   case 'S':
   {
     // status
@@ -1586,6 +1599,50 @@
 }
 
 void
+IMAP4Protocol::specialQuotaCommand( int command, QDataStream& stream )
+{
+  // All commands start with the URL to the box
+  KURL _url;
+  stream >> _url;
+  QString aBox, aSequence, aLType, aSection, aValidity, aDelimiter, aInfo;
+  parseURL (_url, aBox, aSection, aLType, aSequence, aValidity, aDelimiter, aInfo);
+
+  switch( command ) {
+    case 'R': // GETQUOTAROOT
+      {
+        kdDebug(7116) << "QUOTAROOT " << aBox << endl;
+        imapCommand *cmd = doCommand(imapCommand::clientGetQuotaroot( aBox ) );
+        if (cmd->result () != "OK")
+        {
+          error(ERR_SLAVE_DEFINED, i18n("Retrieving the quota root information on folder %1 "
+                "failed. The server returned: %2")
+              .arg(_url.prettyURL())
+              .arg(cmd->resultInfo()));
+          return;
+        }
+        infoMessage(getResults().join( "\r" ));
+        finished();
+        break;
+      }
+    case 'G': // GETQUOTA
+      {
+        kdDebug(7116) << "GETQUOTA command" << endl;
+        kdWarning(7116) << "UNIMPLEMENTED" << endl;
+        break;
+      }
+    case 'S': // SETQUOTA
+      {
+        kdDebug(7116) << "SETQUOTA command" << endl;
+        kdWarning(7116) << "UNIMPLEMENTED" << endl;
+        break;
+      }
+    default:
+      kdWarning(7116) << "Unknown special quota command:" << command << endl;
+      error( ERR_UNSUPPORTED_ACTION, QString(QChar(command)) );
+  }
+}
+
+void
 IMAP4Protocol::rename (const KURL & src, const KURL & dest, bool overwrite)
 {
   kdDebug(7116) << "IMAP4::rename - [" << (overwrite ? "Overwrite" : "NoOverwrite") << "] " << src.prettyURL() << " -> " << dest.prettyURL() << endl;
Index: kioslaves/imap4/imap4.h
===================================================================
--- kioslaves/imap4/imap4.h	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kioslaves/imap4/imap4.h	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -171,6 +171,7 @@
 
   /** Send an annotation command which is identified by @p command */
   void specialAnnotateMoreCommand( int command, QDataStream& stream );
+  void specialQuotaCommand( int command, QDataStream& stream );
 
   /** Search current folder, the search string is passed as SECTION */
   void specialSearchCommand( QDataStream& );
Index: kioslaves/imap4/imaps.protocol
===================================================================
--- kioslaves/imap4/imaps.protocol	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kioslaves/imap4/imaps.protocol	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -24,7 +24,7 @@
 source=true
 
 # List of capabilities (e.g. special() commands)
-Capabilities=Subscription,ACL
+Capabilities=Subscription,ACL,Quota
 
 Icon=folder_inbox
 DocPath=kioslave/imaps.html
Index: kioslaves/imap4/imapcommand.cc
===================================================================
--- kioslaves/imap4/imapcommand.cc	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kioslaves/imap4/imapcommand.cc	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -393,3 +393,10 @@
   return new imapCommand("NAMESPACE", "");
 }
 
+imapCommand *
+imapCommand::clientGetQuotaroot( const QString& box )
+{
+  QString parameter = rfcDecoder::toIMAP (box);
+  return new imapCommand ("GETQUOTAROOT", parameter);
+}
+
Index: kioslaves/imap4/imap4.protocol
===================================================================
--- kioslaves/imap4/imap4.protocol	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kioslaves/imap4/imap4.protocol	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -23,7 +23,7 @@
 source=true
 
 # List of capabilities (e.g. special() commands)
-Capabilities=Subscription,ACL
+Capabilities=Subscription,ACL,Quota
 
 Icon=folder_inbox
 DocPath=kioslave/imap.html
Index: kioslaves/imap4/imapcommand.h
===================================================================
--- kioslaves/imap4/imapcommand.h	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kioslaves/imap4/imapcommand.h	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -364,6 +364,13 @@
    */
   static imapCommand *clientNamespace ();
 
+  /**
+   * @brief Create a GETQUOTAROOT command
+   * @param box mailbox name
+   * @return a GETQUOTAROOT imapCommand
+   */
+  static imapCommand *clientGetQuotaroot ( const QString& box );
+
 protected:
   QString aCommand;
   QString mId;
Index: kioslaves/sieve/sieve.protocol
===================================================================
--- kioslaves/sieve/sieve.protocol	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kioslaves/sieve/sieve.protocol	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -33,6 +33,7 @@
 Description[ms]=Hamba io untuk protokol tapisan mel saringan 
 Description[nb]=En i/u-slave for e-postfilterprotokollen Sieve
 Description[nds]=In-/Utgaavmoduul för't Nettpostfilter-Protokoll Sieve
+Description[ne]=मेल फिल्टरिङ प्रोटोकल सिभ गर्नका लागि एउटा आइओस्लेभ
 Description[nl]=Een ioslave voor het Sieve-mailfilterprotocol
 Description[nn]=Ein i/u-slave for e-postfilterprotokollen Sieve
 Description[pl]=Wtyczka protokołu filtrowania poczty Sieve
Index: libkdenetwork/qgpgme/dataprovider.cpp
===================================================================
--- libkdenetwork/qgpgme/dataprovider.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ libkdenetwork/qgpgme/dataprovider.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -46,7 +46,7 @@
 
 ssize_t QGpgME::QByteArrayDataProvider::read( void * buffer, size_t bufSize ) {
 #ifndef NDEBUG
-  qDebug( "QGpgME::QByteArrayDataProvider::read( %p, %d )", buffer, bufSize );
+  //qDebug( "QGpgME::QByteArrayDataProvider::read( %p, %d )", buffer, bufSize );
 #endif
   if ( bufSize == 0 )
     return 0;
Index: kalarm/messagewin.cpp
===================================================================
--- kalarm/messagewin.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kalarm/messagewin.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -1,7 +1,7 @@
 /*
  *  messagewin.cpp  -  displays an alarm message
  *  Program:  kalarm
- *  Copyright © 2001-2006 by David Jarvie <software@astrojar.org.uk>
+ *  Copyright © 2001-2007 by David Jarvie <software@astrojar.org.uk>
  *
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the GNU General Public License as published by
@@ -175,7 +175,8 @@
 	  mRescheduleEvent(reschedule_event),
 	  mShown(false),
 	  mPositioning(false),
-	  mNoCloseConfirm(false)
+	  mNoCloseConfirm(false),
+	  mDisableDeferral(false)
 {
 	kdDebug(5950) << "MessageWin::MessageWin(event)" << endl;
 	// Set to save settings automatically, but don't save window size.
@@ -218,7 +219,8 @@
 	  mRescheduleEvent(false),
 	  mShown(false),
 	  mPositioning(false),
-	  mNoCloseConfirm(false)
+	  mNoCloseConfirm(false),
+	  mDisableDeferral(false)
 {
 	kdDebug(5950) << "MessageWin::MessageWin(errmsg)" << endl;
 	initView();
@@ -244,7 +246,8 @@
 	  mRescheduleEvent(false),
 	  mShown(false),
 	  mPositioning(false),
-	  mNoCloseConfirm(false)
+	  mNoCloseConfirm(false),
+	  mDisableDeferral(false)
 {
 	kdDebug(5950) << "MessageWin::MessageWin()\n";
 	mWindowList.append(this);
@@ -1325,7 +1328,7 @@
 {
 	mOkButton->setEnabled(true);
 	mKAlarmButton->setEnabled(true);
-	if (mDeferButton)
+	if (mDeferButton  &&  !mDisableDeferral)
 		mDeferButton->setEnabled(true);
 	if (mEditButton)
 		mEditButton->setEnabled(true);
@@ -1466,6 +1469,7 @@
 	{
 		mDeferLimit = event.deferralLimit().dateTime();
 		MidnightTimer::connect(this, SLOT(checkDeferralLimit()));   // check every day
+		mDisableDeferral = false;
 		checkDeferralLimit();
 	}
 }
@@ -1498,6 +1502,7 @@
 		}
 	}
 	mDeferButton->setEnabled(false);
+	mDisableDeferral = true;
 }
 
 /******************************************************************************
Index: kalarm/preferences.cpp
===================================================================
--- kalarm/preferences.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kalarm/preferences.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -1,7 +1,7 @@
 /*
  *  preferences.cpp  -  program preference settings
  *  Program:  kalarm
- *  Copyright © 2001-2006 by David Jarvie <software@astrojar.org.uk>
+ *  Copyright © 2001-2007 by David Jarvie <software@astrojar.org.uk>
  *
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the GNU General Public License as published by
@@ -74,7 +74,7 @@
 const bool                       Preferences::default_defaultAutoClose        = false;
 const bool                       Preferences::default_defaultCopyToKOrganizer = false;
 const bool                       Preferences::default_defaultSoundRepeat      = false;
-const SoundPicker::Type          Preferences::default_defaultSoundType        = SoundPicker::BEEP;
+const SoundPicker::Type          Preferences::default_defaultSoundType        = SoundPicker::NONE;
 const bool                       Preferences::default_defaultConfirmAck       = false;
 const bool                       Preferences::default_defaultCmdScript        = false;
 const EditAlarmDlg::CmdLogType   Preferences::default_defaultCmdLogType       = EditAlarmDlg::DISCARD_OUTPUT;
@@ -283,6 +283,10 @@
 	mAutostartTrayIcon        = config->readBoolEntry(AUTOSTART_TRAY, default_autostartTrayIcon);
 	mModalMessages            = config->readBoolEntry(MODAL_MESSAGES, default_modalMessages);
 	mMessageButtonDelay       = config->readNumEntry(MESSAGE_BUTTON_DELAY, default_messageButtonDelay);
+	if (mMessageButtonDelay > 10)
+		mMessageButtonDelay = 10;    // prevent windows being unusable for a long time
+	if (mMessageButtonDelay < -1)
+		mMessageButtonDelay = -1;
 	mShowExpiredAlarms        = config->readBoolEntry(SHOW_EXPIRED_ALARMS, default_showExpiredAlarms);
 	mShowTimeToAlarm          = config->readBoolEntry(SHOW_TIME_TO_ALARM, default_showTimeToAlarm);
 	mShowAlarmTime            = !mShowTimeToAlarm ? true : config->readBoolEntry(SHOW_ALARM_TIME, default_showAlarmTime);
Index: kalarm/messagewin.h
===================================================================
--- kalarm/messagewin.h	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kalarm/messagewin.h	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -1,7 +1,7 @@
 /*
  *  messagewin.h  -  displays an alarm message
  *  Program:  kalarm
- *  Copyright © 2001-2006 by David Jarvie <software@astrojar.org.uk>
+ *  Copyright © 2001-2007 by David Jarvie <software@astrojar.org.uk>
  *
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the GNU General Public License as published by
@@ -154,6 +154,7 @@
 		bool                mPositioning;     // true when the window is being positioned initially
 		bool                mNoCloseConfirm;  // the Defer or Edit button is closing the dialog
 		bool                mUsingKMix;       // master volume is being set using kmix
+		bool                mDisableDeferral; // true if past deferral limit, so don't enable Defer button
 };
 
 #endif // MESSAGEWIN_H
Index: kalarm/kalarm.h
===================================================================
--- kalarm/kalarm.h	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kalarm/kalarm.h	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -1,7 +1,7 @@
 /*
  *  kalarm.h  -  global header file
  *  Program:  kalarm
- *  Copyright © 2001-2006 by David Jarvie <software@astrojar.org.uk>
+ *  Copyright © 2001-2007 by David Jarvie <software@astrojar.org.uk>
  *
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the GNU General Public License as published by
@@ -26,7 +26,7 @@
 #include <config.h>
 #endif
 
-#define KALARM_VERSION "1.4.9"
+#define KALARM_VERSION "1.4.10"
 #define KALARM_NAME "KAlarm"
 
 #include <kdeversion.h>
Index: kalarm/kalarmd/kalarmd.desktop
===================================================================
--- kalarm/kalarmd/kalarmd.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kalarm/kalarmd/kalarmd.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -25,9 +25,11 @@
 Name[ja]=KAlarm デーモン
 Name[km]=ដេមិន KAlarm
 Name[lt]=KAlarm tarnyba
+Name[mk]=Даемон за КАларм
 Name[ms]=Daemon KAlarm 
 Name[nb]=KAlarm-nisse
 Name[nds]=KAlarm-Dämoon
+Name[ne]=केडीई संसूचक डेइमोन
 Name[nn]=KAlarm-nisse
 Name[pl]=Demon alarmowy
 Name[pt]=Servidor do KAlarm
Index: kalarm/kalarmd/kalarmd.autostart.desktop
===================================================================
--- kalarm/kalarmd/kalarmd.autostart.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kalarm/kalarmd/kalarmd.autostart.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -25,9 +25,11 @@
 Name[ja]=KAlarm デーモン
 Name[km]=ដេមិន KAlarm
 Name[lt]=KAlarm tarnyba
+Name[mk]=Даемон за КАларм
 Name[ms]=Daemon KAlarm 
 Name[nb]=KAlarm-nisse
 Name[nds]=KAlarm-Dämoon
+Name[ne]=केडीई संसूचक डेइमोन
 Name[nn]=KAlarm-nisse
 Name[pl]=Demon alarmowy
 Name[pt]=Servidor do KAlarm
@@ -68,9 +70,11 @@
 Comment[ja]=KAlarm アラームデーモンのログイン時の自動起動
 Comment[km]=ចាប់ផ្ដើម​ដេមិន​រោទ៍​របស់ KAlarm ពេល​ចូល
 Comment[lt]=KOrganizer/KAlarm priminimų tarnybos automatinis paleidimas prisiregistruojant
+Comment[mk]=Даемон за аларми од КАларм - автом. старт при најава
 Comment[ms]= Automula daemon penggera KAlarm semasa log masuk
 Comment[nb]=start alarmnisse ved innlogging
 Comment[nds]=KAlarm-Dämoon bi't Anmellen automaatsch starten
+Comment[ne]=लगइनमा केडीई संसूचक संसूचक डेइमोन स्वत: सुरुआत हुन्छ
 Comment[nl]=KAlarm alarmdaemon automatisch starten bij login
 Comment[nn]=Start alarmnisse ved innlogging
 Comment[pl]=Demon alarmu KOrganizera uruchamiany przy zalogowaniu
Index: kalarm/Changelog
===================================================================
--- kalarm/Changelog	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kalarm/Changelog	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -1,7 +1,13 @@
 KAlarm
 
-=== Version 1.4.9 --- 3 January 2007 ===
+=== Version 1.4.10 --- 24 February 2007 ===
+Disable Defer button in new message window when deferral limit has been reached.
+Fix start-of-day time being ignored for date-only alarms.
+Fix failure to save "Execute in terminal window" option in Preferences dialogue.
 
+=== Version 1.4.9 (KDE 3.5.6) --- 3 January 2007 ===
+Minor changes.
+
 === Version 1.4.8 --- 28 December 2006 ===
 Fix Find always using first search text entered even after entering a new one.
 
Index: kalarm/kalarmapp.cpp
===================================================================
--- kalarm/kalarmapp.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kalarm/kalarmapp.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -1,7 +1,7 @@
 /*
  *  kalarmapp.cpp  -  the KAlarm application object
  *  Program:  kalarm
- *  Copyright © 2001-2006 by David Jarvie <software@astrojar.org.uk>
+ *  Copyright © 2001-2007 by David Jarvie <software@astrojar.org.uk>
  *
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the GNU General Public License as published by
@@ -128,6 +128,7 @@
 		mStartOfDay             = Preferences::startOfDay();
 		if (Preferences::hasStartOfDayChanged())
 			mStartOfDay.setHMS(100,0,0);    // start of day time has changed: flag it as invalid
+		DateTime::setStartOfDay(mStartOfDay);
 		mPrefsExpiredColour   = Preferences::expiredColour();
 		mPrefsExpiredKeepDays = Preferences::expiredKeepDays();
 		mPrefsShowTime        = Preferences::showAlarmTime();
@@ -1918,7 +1919,7 @@
 					delete dialogs;
 					if (!pd->tempFile())
 					{
-						errmsg += "\n";
+						errmsg += '\n';
 						errmsg += proc->command();
 					}
 					KMessageBox::error(pd->messageBoxParent, errmsg);
Index: kalarm/prefdlg.cpp
===================================================================
--- kalarm/prefdlg.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kalarm/prefdlg.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -1074,7 +1074,7 @@
 	Preferences::mDefaultSoundRepeat      = mSoundRepeat->isChecked();
 #endif
 	Preferences::mDefaultCmdScript        = mCmdScript->isChecked();
-	Preferences::mDefaultCmdLogFile       = (mCmdXterm->isChecked() ? EditAlarmDlg::EXEC_IN_TERMINAL : EditAlarmDlg::DISCARD_OUTPUT);
+	Preferences::mDefaultCmdLogType       = (mCmdXterm->isChecked() ? EditAlarmDlg::EXEC_IN_TERMINAL : EditAlarmDlg::DISCARD_OUTPUT);
 	Preferences::mDefaultEmailBcc         = mEmailBcc->isChecked();
 	Preferences::mDefaultCopyToKOrganizer = mCopyToKOrganizer->isChecked();
 	Preferences::mDefaultLateCancel       = mLateCancel->isChecked() ? 1 : 0;
Index: kalarm/main.cpp
===================================================================
--- kalarm/main.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kalarm/main.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -1,7 +1,7 @@
 /*
  *  main.cpp
  *  Program:  kalarm
- *  Copyright © 2001-2006 by David Jarvie <software@astrojar.org.uk>
+ *  Copyright © 2001-2007 by David Jarvie <software@astrojar.org.uk>
  *
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the GNU General Public License as published by
@@ -110,7 +110,7 @@
 	KAboutData aboutData(PROGRAM_NAME, I18N_NOOP("KAlarm"), KALARM_VERSION,
 		I18N_NOOP("Personal alarm message, command and email scheduler for KDE"),
 		KAboutData::License_GPL,
-		"(c) 2001-2006, David Jarvie", 0, "http://www.astrojar.org.uk/linux/kalarm.html");
+		"(c) 2001-2007, David Jarvie", 0, "http://www.astrojar.org.uk/linux/kalarm.html");
 	aboutData.addAuthor("David Jarvie", 0, "software@astrojar.org.uk");
 
 	KCmdLineArgs::init(argc, argv, &aboutData);
Index: kalarm/kalarm.desktop
===================================================================
--- kalarm/kalarm.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kalarm/kalarm.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -8,7 +8,8 @@
 Name[eo]=Alarmilo
 Name[hi]=के-अलार्म
 Name[ko]=KDE 알람
-Name[mk]=Роковник
+Name[mk]=КАларм
+Name[ne]=केडीई संसूचक
 Name[nso]=KAlamo
 Name[pl]=Alarm
 Name[sv]=Kalarm
@@ -45,9 +46,11 @@
 GenericName[ja]=個人アラームスケジューラ
 GenericName[km]=កម្មវិធី​កំណត់​ម៉ោង​រោទ៍​ផ្ទាល់​ខ្លួន
 GenericName[lt]=Asmeninių žinučių-priminimų planuoklis
+GenericName[mk]=Закажување лични аларми
 GenericName[ms]=Penjadual Penggera Peribadi 
 GenericName[nb]=Personlig varslingsplanlegger
 GenericName[nds]=Persöönlich Anstöötgever
+GenericName[ne]=व्यक्तिगत संसूचक अनुसूचक
 GenericName[nl]=Persoonlijke alarmplanner
 GenericName[nn]=Planleggar for alarmar/påminningsmeldingar
 GenericName[pl]=Program przypominający o zdarzeniach
Index: kalarm/kalarm.tray.desktop
===================================================================
--- kalarm/kalarm.tray.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kalarm/kalarm.tray.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -8,7 +8,8 @@
 Name[eo]=Alarmilo
 Name[hi]=के-अलार्म
 Name[ko]=KDE 알람
-Name[mk]=Роковник
+Name[mk]=КАларм
+Name[ne]=केडीई संसूचक
 Name[nso]=KAlamo
 Name[pl]=Alarm
 Name[sv]=Kalarm
@@ -45,9 +46,11 @@
 Comment[ja]=個人アラームスケジューラ: システムトレイアイコンで起動
 Comment[km]=កម្មវិធី​កំណត់​ម៉ោង​រោទ៍​ផ្ទាល់​ខ្លួន ៖ ចាប់ផ្ដើម​ជា​រូបតំណាង​ក្នុង​ថាស​ប្រព័ន្ធ
 Comment[lt]=Žinučių-priminimų planuoklis: paleisti kaip sisteminio dėklo ženkliuką
+Comment[mk]=Закажување лични аларми: стартувај во сис. лента
 Comment[ms]=Penjadual Penggera Peribadi: mulakan sebagai ikon dulang sistem
 Comment[nb]=Tidsplanlegger for alarm- og påminnelsesbeskjeder: start som ikon i systemkurven
 Comment[nds]=Anstöötgever binnen den Systeemafsnitt starten
+Comment[ne]=व्यक्तिगत संसूचक अनुसूचक: प्रणाली ट्रे प्रतिमा अनुरुप सुरु गर्नुहोस्
 Comment[nl]=Persoonlijke alarmplanner: opstarten in systeemvak
 Comment[nn]=Personleg alarmplanleggjar. Start som ikon i systemtrauet
 Comment[pl]=Program przypominający o zdarzeniach: startuje w tacce systemowej
Index: korn/KOrn.desktop
===================================================================
--- korn/KOrn.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ korn/KOrn.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -29,10 +29,12 @@
 GenericName[km]=សញ្ញា​ជូនដំណឹងសំបុត្រ
 GenericName[lt]=Pašto pranešėjas
 GenericName[lv]=Pasta Brīdinājums
+GenericName[mk]=Известување за е-пошта
 GenericName[ms]=Celik Mel
 GenericName[mt]=Twissija tal-imejl
 GenericName[nb]=E-post-varsling
 GenericName[nds]=Nettpost-Benarichten
+GenericName[ne]=सावधानी पत्र
 GenericName[nl]=E-mailnotificatie
 GenericName[nn]=E-postvarsling
 GenericName[pl]=Program powiadamiający o poczcie
@@ -66,6 +68,7 @@
 Name=Korn
 Name[eo]=Korno
 Name[hi]=कॉर्न
+Name[ne]=कर्न
 Name[ta]=கார்ன்
 Name[zh_TW]=Korn 信件通知
 X-DCOP-ServiceType=Unique
Index: korn/pop3_proto.cpp
===================================================================
--- korn/pop3_proto.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ korn/pop3_proto.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -21,6 +21,8 @@
 
 #include "account_input.h"
 
+#include <kdebug.h>
+
 #include <qwidget.h>
 #include <qobject.h>
 #include <qstringlist.h>
Index: korn/kio_proto.cpp
===================================================================
--- korn/kio_proto.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ korn/kio_proto.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -20,6 +20,7 @@
 #include "kio_proto.h"
 
 #include <kconfig.h>
+#include <kdebug.h>
 
 #include <qmap.h>
 
@@ -64,13 +65,13 @@
 
 	if( map->contains( "metadata" ) )
 	{
-		QStringList list = QStringList::split( *map->find( "metadata" ), "," );
+		QStringList list = QStringList::split( ",", *map->find( "metadata" ) );
 		QStringList::Iterator it;
 		for( it = list.begin(); it != list.end(); ++it )
 		{
 			int split = (*it).find( '=' );
 
-			map->insert( (*it).left( split ), (*it).right( (*it).length() - split - 1 ) );
+			metadata->insert( (*it).left( split ), (*it).right( (*it).length() - split - 1 ) );
 		}
 	}
 
Index: korn/Makefile.am
===================================================================
--- korn/Makefile.am	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ korn/Makefile.am	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -114,7 +114,7 @@
 		-lqt -lkdeui -lkdecore
 
 messages: rc.cpp
-	$(XGETTEXT) *.{h,cpp} -o $(podir)/korn.pot
+	$(XGETTEXT) *.h *.cpp -o $(podir)/korn.pot
 
 KDE_ICON = korn
 
Index: kaddressbook/interfaces/kaddressbook_extension.desktop
===================================================================
--- kaddressbook/interfaces/kaddressbook_extension.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kaddressbook/interfaces/kaddressbook_extension.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -4,7 +4,7 @@
 X-KDE-ServiceType=KAddressBook/Extension
 Comment=KAddressBook Extension Plugin
 Comment[af]=KAddressBook uitbrei inprop module
-Comment[be]=Дапаўненьне K Адраснай кнігі "Пашырэньне"
+Comment[be]=Дапаўненне K Адраснай кнігі "Пашырэнне"
 Comment[bg]=Приставка-разширение за адресника
 Comment[bs]=KAddressBook dodatak proširenja
 Comment[ca]=Endollable Extension per a KAddressBook
@@ -28,9 +28,11 @@
 Comment[ja]=KAddressbook 拡張プラグイン
 Comment[km]=កម្មវិធី​ជំនួយ​ផ្នែក​បន្ថែម​របស់ KAddressBook 
 Comment[lt]=KAddressBook praplėtimo priedas
+Comment[mk]=Приклучок за екстензии во КАдресар
 Comment[ms]=Plug masuk Sambungan KAddressBook
 Comment[nb]=KAddressbook-programtillegg for utvidelser
 Comment[nds]=Verwiedernmodüul för KAdressbook
+Comment[ne]=केडीई ठेगाना पुस्तिका विस्तार प्लगइन
 Comment[nl]=KAddressBook Extensie Plugin
 Comment[nn]=Programtillegg for utviding av KDE-adresseboka
 Comment[pl]=Wtyczka rozszerzenia dla KAddressBook
Index: kaddressbook/interfaces/kaddressbook_xxport.desktop
===================================================================
--- kaddressbook/interfaces/kaddressbook_xxport.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kaddressbook/interfaces/kaddressbook_xxport.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -4,8 +4,8 @@
 X-KDE-ServiceType=KAddressBook/XXPort
 Comment=KAddressBook Import/Export Plugin
 Comment[af]=KAddressBook Invoer/Uitvoer inprop module
-Comment[be]=Дапаўненьне K Адраснай кнігі "Імпарт/Экспарт"
-Comment[bg]=Приставка за импорт/експорт на данни от адресника
+Comment[be]=Дапаўненне K Адраснай кнігі "Імпарт/Экспарт"
+Comment[bg]=Приставка за импортиране/експортиране на данни от адресника
 Comment[br]=Lugent enporzh/ezporzh evit KAddressBook
 Comment[bs]=KAddressBook dodatak za uvoz/izvoz
 Comment[ca]=Endollable d'importació/exportació per a la llibreta d'adreces
@@ -29,9 +29,11 @@
 Comment[ja]=KAddressbook インポート/エクスポートプラグイン
 Comment[km]=កម្មវិធី​ជំនួយ​នាំចូល/នាំចេញ​របស់ KAddressBook
 Comment[lt]=KAddressBook importo/eksporto priedas
+Comment[mk]=Приклучок за внесување/изнесување во КАдресар
 Comment[ms]=Plug masuk Import Eksport KAddressBook
 Comment[nb]=KAddressbook-programtillegg for import/eksport
 Comment[nds]=Import-/Exportmoduul för KAdressbook
+Comment[ne]=केडीई ठेगाना पुस्तिका आयात/निर्यात प्लगइन
 Comment[nn]=Programtillegg for importering/ekportering i KDE-adresseboka
 Comment[pl]=Wtyczka importu/eksportu dla KAddressBook
 Comment[pt]='Plugin' de Importação/Exportação do KAddressbook
Index: kaddressbook/interfaces/kaddressbook_contacteditorwidget.desktop
===================================================================
--- kaddressbook/interfaces/kaddressbook_contacteditorwidget.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kaddressbook/interfaces/kaddressbook_contacteditorwidget.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -22,12 +22,14 @@
 Comment[hu]=KAddressBook névjegyszerkesztő bővítőmodul
 Comment[is]=KAddressbook tengiliðaritils íforrit
 Comment[it]=Plugin editor dei contatti di KAddressbook
-Comment[ja]=KAddressbook コンタクト エディタ ウィジェット プラグイン
+Comment[ja]=KAddressbook 連絡先エディタ ウィジェット プラグイン
 Comment[km]=កម្មវិធី​ជំនួយ​ធាតុ​ក្រាហ្វិក​កម្មវិធី​និពន្ធ​ទំនាក់ទំនង​របស់ KAddressBook
 Comment[lt]=KAddressBook kontaktų redaktoriaus valdiklių priedas
+Comment[mk]=Приклучок за уредување контакти во КАдресар
 Comment[ms]=Plugin Widget Editor Orang Hubungan KAddressBook
 Comment[nb]=KAddressbook programtillegg for kontakt redigeringselement
 Comment[nds]=Editormoduul för KAdressbook-Kontakten
+Comment[ne]=केडीई ठेगाना पुस्तिका सम्पर्क सम्पादक विजेट प्लगइन
 Comment[nl]=KAddressBook Contacteditor-plugin
 Comment[nn]=Programtillegg for kontaktredigering i KDE-adresseboka
 Comment[pl]=Wtyczka okna edycji wizytówki dla KAddressBook
Index: kaddressbook/imagewidget.h
===================================================================
--- kaddressbook/imagewidget.h	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kaddressbook/imagewidget.h	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -32,15 +32,6 @@
 
 #include "contacteditorwidget.h"
 
-#include <librss/global.h>
-
-namespace RSS {
-class Loader;
-class Document;
-}
-
-using namespace RSS;
-
 /**
   Small helper class
  */
@@ -49,17 +40,13 @@
   Q_OBJECT
 
   public:
-    ImageLoader();
+    ImageLoader( QWidget *parent );
 
     KABC::Picture loadPicture( const KURL &url, bool *ok );
-    KABC::Picture loadBlog( const KURL &url, bool *ok );
 
-  private slots:
-    void loadingComplete( Loader*, Document, Status );
-
   private:
-    bool mIsLoadingBlog;
     KABC::Picture mPicture;
+    QWidget *mParent;
 };
 
 /**
@@ -79,8 +66,6 @@
 
     void setImageLoader( ImageLoader *loader );
 
-    void setBlogFeed( const KURL &url );
-
   signals:
     void changed();
     void urlDropped( const KURL& );
@@ -94,7 +79,6 @@
 
   private slots:
     void load();
-    void loadBlog();
     void clear();
 
   private:
@@ -102,7 +86,6 @@
     void updateGUI();
 
     bool mReadOnly;
-    KURL mBlogFeed;
     QPoint mDragStartPos;
     KABC::Picture mPicture;
 
@@ -119,11 +102,6 @@
     ~ImageBaseWidget();
 
     /**
-      Set URL of blog feed for getting the image.
-     */
-    void setBlogFeed( const QString & );
-
-    /**
       Sets the photo object.
      */
     void setImage( const KABC::Picture &photo );
Index: kaddressbook/dcopaddressbook.desktop
===================================================================
--- kaddressbook/dcopaddressbook.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kaddressbook/dcopaddressbook.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -29,8 +29,10 @@
 Comment[ja]=DCOP インターフェースを持つアドレス帳
 Comment[km]=សៀវភៅ​អាសយដ្ឋាន​ដែល​មាន​ចំណុច​ប្រទាក់ DCOP
 Comment[lt]=Adresų knygelė su DCOP sąsaja
+Comment[mk]=Адресар со DCOP-интерфејс
 Comment[nb]=Adressebok med DCOP-grensesnitt
 Comment[nds]=Adressbook mit DCOP-Koppelsteed
+Comment[ne]=डीसीओपी ईन्टरफेससँगको ठेगाना पुस्तिका
 Comment[nl]=Adresboek met DCOP-interface
 Comment[nn]=Adressebok med DCOP-grensesnitt
 Comment[pl]=Książka adresowa z interfejsem DCOP
Index: kaddressbook/kaddressbook.desktop
===================================================================
--- kaddressbook/kaddressbook.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kaddressbook/kaddressbook.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -8,7 +8,9 @@
 Name[fi]=Osoitekirja
 Name[fr]=Carnet d'adresses
 Name[he]=פנקס כתובות
+Name[mk]=КАдресар
 Name[nds]=KAdressbook
+Name[ne]=केडीई ठेगाना पुस्तिका
 Name[nn]=KDE-adressebok
 Name[pl]=Książka adresowa
 Name[sk]=Adresár
@@ -41,9 +43,11 @@
 GenericName[ja]=アドレスマネージャ
 GenericName[km]=កម្មវិធី​គ្រប់គ្រង​អាសយដ្ឋាន
 GenericName[lt]=Adresų tvarkyklė
+GenericName[mk]=Менаџер на адреси
 GenericName[ms]=Pengurus Alamat
 GenericName[nb]=Addressehåndterer
 GenericName[nds]=Adresspleger
+GenericName[ne]=ठेगाना प्रबन्धक
 GenericName[nl]=Adresboekbeheerder
 GenericName[nn]=Adressehandterar
 GenericName[pa]=ਸਿਰਨਾਵਾਂ ਪ੍ਰਬੰਧਕ
Index: kaddressbook/csv-templates/kaddressbook.desktop
===================================================================
--- kaddressbook/csv-templates/kaddressbook.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kaddressbook/csv-templates/kaddressbook.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -9,7 +9,6 @@
 Name=KAddressBook (KDE 3.1)
 Name[af]=K-adresboek (Kde 3.1)
 Name[ar]=دفتر العناوين KAddressBook (KDE 3.1(
-Name[be]=K Адрасная кніга (KDE 3.1)
 Name[ca]=Llibreta d'adreces (KDE 3.1)
 Name[cs]=Kniha adres (KDE 3.1)
 Name[cy]=KLlyfrCyfeiriadau (KDE 3.1)
@@ -21,9 +20,10 @@
 Name[hr]=KAdressBook (KDE 3.1)
 Name[hu]=Címjegyzék (KDE 3.1)
 Name[it]=Rubrica indirizzi (KDE 3.1)
-Name[mk]=Адресар (KDE 3.1)
+Name[mk]=КАдресар (KDE 3.1)
 Name[nb]=Adressebok (KDE 3.1)
 Name[nds]=KAdressbook (KDE 3.1)
+Name[ne]=केडीई ठेगाना पुस्तिका (केडीई ३.१)
 Name[nn]=KDE-adressebok (KDE 3.1)
 Name[nso]=KBuka ya Diaterese (KDE 3.1)
 Name[pl]=Książka adresowa (KDE 3.1)
Index: kaddressbook/csv-templates/outlook2000.desktop
===================================================================
--- kaddressbook/csv-templates/outlook2000.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kaddressbook/csv-templates/outlook2000.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -10,6 +10,7 @@
 Name[eo]=Redmondo 2000
 Name[fa]=اوت لوک ۲۰۰۰
 Name[hi]=आउटलुक 2000
+Name[ne]=आउटलुक २०००
 Name[nso]=Bokantle 2000
 Name[ta]=அவுட்லுக் 2000
 
Index: kaddressbook/csv-templates/yahoo.desktop
===================================================================
--- kaddressbook/csv-templates/yahoo.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kaddressbook/csv-templates/yahoo.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -32,8 +32,10 @@
 Name[ja]=Yahoo! アドレス帳
 Name[km]=សៀវភៅ​អាសយដ្ឋាន​របស់​យ៉ាហ៊ូ
 Name[lt]=Yahoo! Adresų knygutė
+Name[mk]=Адресар од Yahoo!
 Name[nb]=Yahoo! adressebok
 Name[nds]=Yahoo!-Adressbook
+Name[ne]=याहू! ठेगाना पुस्तिका
 Name[nl]=Yahoo!-adresboek
 Name[nn]=Yahoo! Adressebok
 Name[pa]=Yahoo! ਸਿਰਨਾਵਾਂ ਕਿਤਾਬ
Index: kaddressbook/views/cardview.cpp
===================================================================
--- kaddressbook/views/cardview.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kaddressbook/views/cardview.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -1023,12 +1023,6 @@
 
   // The RMB click
   if ( e->button() & Qt::RightButton ) {
-    // clear previous selection
-    bool blocked = signalsBlocked();
-    blockSignals( true );
-    selectAll( false );
-    blockSignals( blocked );
-
     // select current item
     item->setSelected( true );
 
Index: kaddressbook/views/tableview.desktop
===================================================================
--- kaddressbook/views/tableview.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kaddressbook/views/tableview.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -3,6 +3,7 @@
 X-KDE-Library=libkaddrbk_tableview
 Name=Table View
 Name[af]=Tabel Aansig
+Name[ar]=عرض الجدول
 Name[be]=У выглядзе табліцы
 Name[bg]=Преглед в таблица
 Name[br]=Gwel taolenn
@@ -28,9 +29,11 @@
 Name[ja]=テーブルビュー
 Name[km]=ទិដ្ឋភាព​តារាង
 Name[lt]=Lentelės vaizdas
+Name[mk]=Преглед со табела
 Name[ms]=Pelihat Jadual
 Name[nb]=Tabellvisning
 Name[nds]=Tabellansicht
+Name[ne]=तालिका दृश्य
 Name[nl]=Tabelweergave
 Name[nn]=Tabellvising
 Name[pa]=ਸਾਰਣੀ ਦਰਿਸ਼
Index: kaddressbook/views/iconview.desktop
===================================================================
--- kaddressbook/views/iconview.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kaddressbook/views/iconview.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -35,10 +35,12 @@
 Name[km]=ទិដ្ឋភាព​រូបតំណាង
 Name[lt]=Rodyti piktogramas
 Name[lv]=Ikonu Skatījums
+Name[mk]=Преглед со икони
 Name[ms]=Pelihat Ikon
 Name[mt]=Ikoni
 Name[nb]=Ikonvisning
 Name[nds]=Lüttbildansicht
+Name[ne]=प्रतिमा दृश्य
 Name[nl]=Pictogramweergave
 Name[nn]=Ikonvising
 Name[pa]=ਆਈਕਾਨ ਦਰਿਸ਼
Index: kaddressbook/views/cardview.desktop
===================================================================
--- kaddressbook/views/cardview.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kaddressbook/views/cardview.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -3,6 +3,7 @@
 X-KDE-Library=libkaddrbk_cardview
 Name=Card View
 Name[af]=Kaard Aansig
+Name[ar]=عرض البظاقة
 Name[be]=У выглядзе картак
 Name[bg]=Преглед като карти
 Name[br]=Gwell ar c'hartennoù
@@ -28,9 +29,11 @@
 Name[ja]=カードビュー
 Name[km]=ទិដ្ឋភាព​កាត
 Name[lt]=Kortelės vaizdas
+Name[mk]=Преглед со картички
 Name[ms]=Pelihat Kad
 Name[nb]=Kortvisning
 Name[nds]=Visitenkoort-Kieker
+Name[ne]=कार्ड दृश्य
 Name[nl]=Kaartweergave
 Name[nn]=Kortvising
 Name[pa]=ਕਾਰਡ ਦਰਿਸ਼
Index: kaddressbook/xxport/kde2_xxport.desktop
===================================================================
--- kaddressbook/xxport/kde2_xxport.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kaddressbook/xxport/kde2_xxport.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -3,7 +3,7 @@
 X-KDE-Library=libkaddrbk_kde2_xxport
 Name=KAB KDE2 XXPort Plugin
 Name[af]=KAB KDE2 XXPort inprop module
-Name[be]=Дапаўненьне KAB "Імпарт/Экспарт KDE2"
+Name[be]=Дапаўненне KAB "Імпарт/Экспарт KDE2"
 Name[br]=Lugent XXPorzh KAB KDE2
 Name[bs]=KAB dodatak za KDE2 XXPort
 Name[ca]=Endollable d'importació/exportació KDE2 per a KAB
@@ -29,6 +29,7 @@
 Name[ms]=Plug masuk KAB KDE2 XXPort
 Name[nb]=KAB-programtillegg for KDE2
 Name[nds]=KDE2-Importmoduul för KAdressbook
+Name[ne]=KAB KDE2 XXPort प्लगइन
 Name[nl]=KAB KDE2 XXPort-plugin
 Name[nn]=KAB KDE2 XXPort programtillegg
 Name[pl]=Wtyczka KAB do importu książki adresowej KDE2
@@ -47,8 +48,8 @@
 Name[zh_TW]=KAB KDE2 XXPort 外掛程式
 Comment=Plugin to import the old KDE 2 address book
 Comment[af]=Inprop module om 'n ou KDE 2 adres boek in te voer
-Comment[be]=Дапаўненьне для імпарту старой адраснай кнігі KDE 2
-Comment[bg]=Приставка за импорт на контактите от старата версия на адресника в КДЕ 2
+Comment[be]=Дапаўненне для імпарту старой адраснай кнігі KDE 2
+Comment[bg]=Приставка за импортиране на контактите от старата версия на адресника в KDE 2
 Comment[bs]=Dodatak za uvoz iz starog KDE 2 adresara
 Comment[ca]=Endollable per a importar l'antiga llibreta d'adreces del KDE 2
 Comment[cs]=Modul pro import staré KDE 2 knihy adres
@@ -67,12 +68,14 @@
 Comment[hu]=Bővítőmodul KDE2-es címjegyzék importálásához
 Comment[is]=Íforrit til að færa inn gömlu KDE2 vistfangaskrána
 Comment[it]=Plugin per importare le vecchie voci della rubrica di KDE2
-Comment[ja]=古い KDE 2 アドレス帳のインポートプラグイン
+Comment[ja]=古い KDE 2 アドレス帳をインポートするプラグイン
 Comment[km]=កម្មវិធី​ជំនួយ​ដើម្បី​នាំចូល​សៀវភៅ​អាសយដ្ឋាន KDE 2 ចាស់ៗ
 Comment[lt]=Priedas senosios KDE 2 adresų knygelės importui
+Comment[mk]=Приклучок за внесување на старите адресари од KDE 2
 Comment[ms]=Plug masuk untuk import buku alamat lama KDE 2
 Comment[nb]=Programtillegg for å importere adressebok fra KDE2
 Comment[nds]=Moduul för't Importeren vun KDE2-Adressböker
+Comment[ne]=पूरानो केडीई २ ठेगाना पुस्तिका आयात गर्न प्लगइन गर्नुहोस्
 Comment[nl]=Plugin voor het importeren van het oude KDE 2-adresboek
 Comment[nn]=Programtillegg for å importera den gamle KDE 2 adresseboka
 Comment[pl]=Wtyczka do importu starej książki adresowej z KDE 2
Index: kaddressbook/xxport/csv_xxport.desktop
===================================================================
--- kaddressbook/xxport/csv_xxport.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kaddressbook/xxport/csv_xxport.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -3,7 +3,7 @@
 X-KDE-Library=libkaddrbk_csv_xxport
 Name=KAB CSV XXPort Plugin
 Name[af]=KAB CSV XXPort inprop module
-Name[be]=Дапаўненьне KAB "Імпарт/Экспарт CSV"
+Name[be]=Дапаўненне KAB "Імпарт/Экспарт CSV"
 Name[br]=Lugent XXPorzh CSV KAB
 Name[bs]=KAB dodatak za CSV XXPort
 Name[ca]=Endollable d'importació/exportació CSV per a KAB
@@ -29,6 +29,7 @@
 Name[ms]=Plug masuk KAB CSV XXPort
 Name[nb]=KAB-programtillegg for CSV-eksport
 Name[nds]=CSV-Im-/Exportmoduul för KAdressbook
+Name[ne]=KAB CSV XXPort प्लगइन
 Name[nn]=KAB CSV XXPort programtillegg
 Name[pl]=Wtyczka KAB do importu/eksportu z/do formatu CSV
 Name[pt]='Plugin' XXPort para CSV do KAB
@@ -46,8 +47,8 @@
 Name[zh_TW]=KAB CSV XXPort 外掛程式
 Comment=Plugin to import and export contacts in CSV format
 Comment[af]=Inprop module wat kontakte in CSV formaat invoer en uitvoer
-Comment[be]=Дапаўненьне для імпарту і экспарту кантактаў у фармаце CSV
-Comment[bg]=Приставка за импорт/експорт на контактите във формат CSV
+Comment[be]=Дапаўненне для імпарту і экспарту кантактаў у фармаце CSV
+Comment[bg]=Приставка за импортиране/експортиране на контактите във формат CSV
 Comment[bs]=Dodatak za uvoz i izvoz kontakata u CSV formatu
 Comment[ca]=Endollable per a importar i exportar contactes en format CSV
 Comment[cs]=Modul pro import a export kontaktů ve formátu CSV
@@ -66,12 +67,14 @@
 Comment[hu]=Bővítőmodul névjegyek importálásához/exportálásához, CSV formátumban
 Comment[is]=Íforrit til að flytja tengiliði inn og út í CSV sniði
 Comment[it]=Plugin per importare ed esportare contatti in formato CSV
-Comment[ja]=CSV フォーマットによりコンタクトをインポート又はエクスポートするプラグイン
+Comment[ja]=CSV フォーマットで連絡先をインポート/エクスポートするプラグイン
 Comment[km]=កម្មវិធី ជំនួយ​ដើម្បី​នាំចូល និង នាំចេញ​ទំនាក់ទំនង​ក្នុង​ទ្រង់ទ្រាយ​ជា CSV ។
 Comment[lt]=Priedas, skirtas kontaktų eksportui ir importui CSV formatu
+Comment[mk]=Приклучок за внесување и изнесување контакти во CSV-формат
 Comment[ms]=Plug masuk untuk import dan eksport alamat perhubungan di dalam format CSV
 Comment[nb]=Programtillegg for import/eksport av kontakter i CSV-format
 Comment[nds]=Moduul för't Im- un Exporteren vun Kontakten in't CSV-Formaat
+Comment[ne]=CSV ढाँचाका सम्पर्क आयात र निर्यात गर्न प्लगइन गर्नुहोस्
 Comment[nl]=Plugin voor het importeren en exporteren van contactpersonen in CSV-formaat
 Comment[nn]=Programtillegg for å importera og eksportera kontaktar i CSV-format
 Comment[pl]=Wtyczka do importowania i eksportowania wizytówek w formacie CSV
Index: kaddressbook/xxport/vcard_xxport.desktop
===================================================================
--- kaddressbook/xxport/vcard_xxport.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kaddressbook/xxport/vcard_xxport.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -3,7 +3,7 @@
 X-KDE-Library=libkaddrbk_vcard_xxport
 Name=KAB vCard XXPort Plugin
 Name[af]=KAB vCard XXPort inprop module
-Name[be]=Дапаўненьне KAB "Імпарт/Экспарт vCard"
+Name[be]=Дапаўненне KAB "Імпарт/Экспарт vCard"
 Name[br]=Lugent KAB vCard XXPort
 Name[bs]=KAB dodatak za vCard XXPort
 Name[ca]=Endollable d'importació/exportació vCard per a KAB
@@ -29,6 +29,7 @@
 Name[ms]=Plugin KAB vCard XXPort 
 Name[nb]=KAB-programtillegg for vCard
 Name[nds]=vCard-Im-/Exportmoduul för KAdressbook
+Name[ne]=KAB भी कार्ड XXPort प्लगइन
 Name[nl]=KAB vCard XXPort-plugin
 Name[nn]=KAB vCard XXPort programtillegg
 Name[pl]=Wtyczka KAB do importu/eksportu z/do formatu vCard
@@ -48,8 +49,8 @@
 Name[zh_TW]=KAB vCard XXPort 外掛程式
 Comment=Plugin to import and export contacts in vCard format
 Comment[af]=Inprop module wat kontakte in vCard formaat invoer en uitvoer
-Comment[be]=Дапаўненьне для імпарту і экспарту кантактаў у фармаце vCard
-Comment[bg]=Приставка за експорт/импорт на контактите във формат на vCard
+Comment[be]=Дапаўненне для імпарту і экспарту кантактаў у фармаце vCard
+Comment[bg]=Приставка за експортиране/импортиране на контактите във формат на vCard
 Comment[bs]=Dodatak za uvoz i izvoz kontakata u vCard formatu
 Comment[ca]=Endollabl per a importar i exportar contactes en el format vCard
 Comment[cs]=Modul pro import a export kontaktů ve formátu vCard
@@ -68,12 +69,14 @@
 Comment[hu]=Bővítőmodul vCard névjegyek importálásához/exportálásához
 Comment[is]=Íforrit til að flytja inn eða út tengiliði í vCard sniði
 Comment[it]=Plugin per importare ed esportare contatti in formato vCard
-Comment[ja]=vCard フォーマットによるコンタクトのインポート及びエクスポートプラグイン
+Comment[ja]=vCard フォーマットで連絡先をインポート/エクスポートするプラグイン
 Comment[km]=កម្មវិធី​ជំនួយ​ដើម្បី​នាំចូល និង នាំចេញ​ទំនាក់ទំនង​ក្នុង​ទ្រង់ទ្រាយ​ជា vCard
 Comment[lt]=Įskiepis kontaktų importavimui ir eksportavimui vCard formatu
+Comment[mk]=Приклучок за внесување и изнесување контакти во vCard-формат
 Comment[ms]=Plugin untuk mengimpot dan mengekspot orang hubungan dalam format vCard 
 Comment[nb]=Programtillegg for import og eksport av kontakter i vCard-format
 Comment[nds]=Moduul för't Im-/Exporteren vun Kontakten in't vCard-Formaat
+Comment[ne]=भी कार्ड ढाँचामा आयात र निर्यात गर्न प्लगइन गर्नुहोस्
 Comment[nl]=Plugin voor het importeren en exporteren van contactpersonen in vCard-formaat
 Comment[nn]=Programtillegg for å importera og eksportera kontaktar i vCard-format
 Comment[pl]=Wtyczka do importu i eksportu wizytówek w formacie vCard
Index: kaddressbook/xxport/pab_xxport.desktop
===================================================================
--- kaddressbook/xxport/pab_xxport.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kaddressbook/xxport/pab_xxport.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -3,7 +3,7 @@
 X-KDE-Library=libkaddrbk_pab_xxport
 Name=KAB MS Exchange Personal Addressbook XXPort Plugin
 Name[af]=KAB MS Exchange adresboek XXPort inprop module
-Name[be]=Дапаўненьне KAB "Імпарт пэрсанальнай адраснай кнігі MS Exchange"
+Name[be]=Дапаўненне KAB "Імпарт пэрсанальнай адраснай кнігі MS Exchange"
 Name[bs]=KAB dodatak za MS Exchange Personal Addressbook XXPort
 Name[ca]=Endollable d'importació/exportació de la llibreta d'adreces personal d'MS Exchange per a KAB
 Name[cs]=Exportní modul do adresáře MS Exchange
@@ -27,6 +27,7 @@
 Name[ms]=Plugin Buku Alamat Peribadi KAB MS Exchange  XXPort Plugin
 Name[nb]=KAB-programtillegg for import fra MS Exchange
 Name[nds]=MSExchange-Importmoduul för KAdressbook
+Name[ne]=KAB MS बिनिमय व्यक्तिगत ठेगाना पुस्तिका XXPort प्लगइन
 Name[nl]=KAB MS Exchange Personal Addressbook XXPort-plugin
 Name[nn]=KAB MS Exchange personleg adressebok XXPort programtillegg
 Name[pl]=Wtyczka KAB do importu Osobistej książki adresowej MS Exchange
@@ -46,8 +47,8 @@
 Name[zh_TW]=KAB MS Exchange Personal Addressbook XXPort 外掛程式
 Comment=Plugin to import MS Exchange Personal Address Books
 Comment[af]=Inprop module wat kontakte in MS Exchange adresboek formaat invoer
-Comment[be]=Дапаўненьне для імпарту пэрсанальнай адраснай кнігі MS Exchange
-Comment[bg]=Приставка за импорт на контактите от MS Exchange Personal Address Books
+Comment[be]=Дапаўненне для імпарту пэрсанальнай адраснай кнігі MS Exchange
+Comment[bg]=Приставка за импортиране на контактите от MS Exchange Personal Address Books
 Comment[bs]=Dodatak za uvoz iz MS Exchange personalnog adresara
 Comment[ca]=Endollable per a importar des de la llibreta d'adreces personal d'MS Exchange
 Comment[cs]=Modul pro import osobní knihy adres MS Exchange
@@ -66,12 +67,14 @@
 Comment[hu]=Bővítőmodul MS Exchange személyes címjegyzékek importálásához
 Comment[is]=Íforrit til að flytja tengiliði í eða úr MS Exchange Personal Address Book
 Comment[it]=Plugin per importare rubriche personali da MS Exchange
-Comment[ja]=MS Exchange パーソナルアドレス帳のインポートプラグイン
+Comment[ja]=MS Exchange パーソナルアドレス帳をインポートするプラグイン
 Comment[km]=កម្មវិធី​ជំនួយ​ដើម្បី​នាំចូល​សៀវភៅ​អាសយដ្ឋាន​ផ្ទាល់​ខ្លួន​របស់ MS Exchange
 Comment[lt]=Priedas leidžiantis importuoti MS Exchange asmenines adresų knygeles
+Comment[mk]=Приклучок за внесување лични адресари од MS Exchange
 Comment[ms]=Plugin untuk mengimpot Buku Alamat Peribadi MS Exchange 
 Comment[nb]=Programtillegg for import av personlige adressebøker fra MS Exchange
 Comment[nds]=Moduul för't Importeren vun persöönliche Adressböker ut MS Exchange
+Comment[ne]=MS बिनिमय व्यक्तिगत ठेगाना पुस्तिका आयात गर्न प्लगइन गर्नुहोस्
 Comment[nl]=Plugin voor het importeren van MS Exchange-adresboeken
 Comment[nn]=Programtillegg for å imortera MS Exchange personleg adressebok
 Comment[pl]=Wtyczka do importu Osobistej książki adresowej z MS Exchange
Index: kaddressbook/xxport/opera_xxport.desktop
===================================================================
--- kaddressbook/xxport/opera_xxport.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kaddressbook/xxport/opera_xxport.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -3,7 +3,7 @@
 X-KDE-Library=libkaddrbk_opera_xxport
 Name=KAB Opera XXPort Plugin
 Name[af]=KAB Opera XXPort inprop module
-Name[be]=Дапаўненьне KAB "Імпарт Opera"
+Name[be]=Дапаўненне KAB "Імпарт Opera"
 Name[br]=Lugent KAB Opera XXPort
 Name[bs]=KAB dodatak za Opera XXPort
 Name[ca]=Endollable d'importació/exportació d'Opera per a KAB
@@ -29,6 +29,7 @@
 Name[ms]=Plugin KAB Opera XXPort 
 Name[nb]=KAB-programtillegg for Opera
 Name[nds]=Opera-Importmoduul för KAdressbook
+Name[ne]=KAB ओपेरा XXPort प्लगइन
 Name[nn]=KAB Opera XXPort programtillegg
 Name[pl]=Wtyczka KAB do importu z Opery
 Name[pt]='Plugin' XXPort para Opera do KAB
@@ -47,8 +48,8 @@
 Name[zh_TW]=KAB Opera XXPort 外掛程式
 Comment=Plugin to import Opera contacts
 Comment[af]=Inprop module wat kontakte in Opera formaat invoer
-Comment[be]=Дапаўненьне для імпарту кантактаў Opera
-Comment[bg]=Приставка за импорт на контактите от Опера
+Comment[be]=Дапаўненне для імпарту кантактаў Opera
+Comment[bg]=Приставка за импортиране на контактите от Опера
 Comment[bs]=Dodatak za uvoz kontakata iz Opere
 Comment[ca]=Endollable per a importar contactes des d'Opera
 Comment[cs]=Modul pro import a export kontaktů programu Opera
@@ -67,12 +68,14 @@
 Comment[hu]=Bővítőmodul Opera névjegyek importálásához
 Comment[is]=Íforrit til flytja inn eða út Opera tengiliði
 Comment[it]=Plugin per importare contatti da Opera
-Comment[ja]=Opera コンタクトのインポートプラグイン
+Comment[ja]=Opera の連絡先をインポートするプラグイン
 Comment[km]=កម្មវិធី​ជំនួយ​ដើម្បី​នាំចូល​ទំនាក់ទំនង​របស់ Opera
 Comment[lt]=Priedas Opera kontaktų importui
+Comment[mk]=Приклучок за внесување контакти од Opera
 Comment[ms]=Plug masuk untuk import alamat perhubungan Opera
 Comment[nb]=Programtillegg for å importere Opera-kontakter
 Comment[nds]=Modul för't Importeren vun Opera-Kontakten
+Comment[ne]=ओपेरा सम्पर्क आयात गर्न प्लगइन गर्नुहोस्
 Comment[nl]=Plugin voor het importeren an Opera's contactpersonen
 Comment[nn]=Programtillegg for å imortera Opera-kontaktar
 Comment[pl]=Wtyczka do importu wizytówek z Opery
Index: kaddressbook/xxport/gnokii_xxport.desktop
===================================================================
--- kaddressbook/xxport/gnokii_xxport.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kaddressbook/xxport/gnokii_xxport.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -28,6 +28,7 @@
 Name[ms]=Plug masuk KAB Fon Mudah Alih XXPort
 Name[nb]=KAB-programtillegg for mobiltelefon
 Name[nds]=Mobiltelefoon-Im-/Exportmoduul för KAdressbook
+Name[ne]=KAB मोबाइल फोन XXPort प्लगइन
 Name[nl]=KAB Mobiele Telefoon XXPort-plugin
 Name[nn]=KAB Mobiltelefon XXPort programtillegg
 Name[pl]=Wtyczka KAB do importu/eksportu z/do telefonu komórkowego
@@ -47,7 +48,7 @@
 Name[zh_TW]=KAB Mobile Phone XXPort 外掛程式
 Comment=Mobile Phone Plugin to Import and Export Addressbook Entries
 Comment[af]=Inprop module wat kontakte in selfoon formaat invoer en uitvoer
-Comment[bg]=Приставка за експорт/импорт на контактите от/към мобилен телефон
+Comment[bg]=Приставка за експортиране/импортиране на контактите от/към мобилен телефон
 Comment[bs]=Dodatak za uvoz i izvoz stavki adresara iz mobilnog telefona
 Comment[ca]=Endollable de telèfon mòbil per a importar i exportar entrades de la llibreta d'adreces
 Comment[cs]=Modul mobilního telefonu pro import a export záznamů Knihy adres
@@ -69,9 +70,11 @@
 Comment[ja]=アドレス帳のエントリをインポート/エクスポートする携帯電話用プラグイン
 Comment[km]=កម្មវិធី​ជំនួយ​ទូរស័ព្ទ​ចល័ត​ដើម្បី​នាំចូល និង នាំចេញ​ធាតុ​សៀវភៅ​អាសយដ្ឋាន
 Comment[lt]=Priedas skirtas importuoti ir eksportuoti adresų knygelės įrašus į mobiliuosius telefonus
+Comment[mk]=Приклучок за мобилни телефони за внесување и изнесување контакти од адресарот
 Comment[ms]=Plug masuk Fon Mudah Alih untuk Import dan Eksport Input Buku Alamat
 Comment[nb]=Programtillegg for import/eksport av adressebok fra/til mobiltelefon
 Comment[nds]=Mobiltelefoon-Moduul för't Im- un Exporteren vun KAdressbook-Indrääg
+Comment[ne]=ठेगाना पुस्तिका प्रविष्टि आयात र निर्यात गर्न मोबाइल फोन प्लगइन गर्नुहोस्
 Comment[nl]=Mobiele-telefoon-plugin voor het importeren en exporteren van adresboekitems
 Comment[nn]=Programtillegg for å importera og eksportera adressebokoppføringar i mobiltelefon
 Comment[pl]=Wtyczka do importowania i eksportowania wizytówek z/do telefonu komórkowego
Index: kaddressbook/xxport/bookmark_xxport.desktop
===================================================================
--- kaddressbook/xxport/bookmark_xxport.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kaddressbook/xxport/bookmark_xxport.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -3,7 +3,7 @@
 X-KDE-Library=libkaddrbk_bookmark_xxport
 Name=KAB Bookmark XXPort Plugin
 Name[af]=KAB boekmerk XXPort inprop module
-Name[be]=Дапаўненьне KAB "Экспарт у закладкі"
+Name[be]=Дапаўненне KAB "Экспарт у закладкі"
 Name[br]=Lugent XXPorzh sined KAB
 Name[bs]=KAB dodatak za XXPort zabilješki
 Name[ca]=Endollable d'importació/exportació de punts per a KAB
@@ -28,6 +28,7 @@
 Name[ms]=Plug masuk KAB Tanda Laman XXPort
 Name[nb]=KAB-programtillegg for bokmerkeeksport
 Name[nds]=Leesteken-Exportmoduul för KAdressbook
+Name[ne]=KAB पुस्तकचिनो XXPort प्लगइन
 Name[nl]=KAB Bladwijzer XXPort-plugin
 Name[nn]=KAB-bokmerke XXPort-programtillegg
 Name[pl]=Wtyczka KAB do eksportu zakładek
@@ -47,7 +48,7 @@
 Name[zh_TW]=KAB Bookmark XXPort 外掛程式
 Comment=Plugin to export the web addresses of the contacts as bookmarks
 Comment[af]=Inprop module wat die web adresse van kontakte as boekmerke uitvoer
-Comment[bg]=Приставка за експорт на уеб адресите на контактите, като отметки
+Comment[bg]=Приставка за експортиране на уеб адресите на контактите, като отметки
 Comment[bs]=Dodatak za izvoz web adresa kontakata u formi zabilješki
 Comment[ca]=Endollable per a exportar les adreces web dels contactes com a punts
 Comment[cs]=Modul pro exportování webových adres kontaktů jako záložky
@@ -66,12 +67,14 @@
 Comment[hu]=Bővítőmodul webcímek exportáláshoz, könyvjelzőként
 Comment[is]=Íforrit til að skrá vefföng tengiliða sem bókarmerki
 Comment[it]=Plugin per esportare come segnalibro gli indirizzi web dei contatti
-Comment[ja]=コンタクトの web アドレスをブックマークとしてエクスポートするプラグイン 
+Comment[ja]=連絡先の Web アドレスをブックマークとしてエクスポートするプラグイン 
 Comment[km]=កម្មវិធី​ជំនួយ​ដើម្បី​នាំចេញ​អាសយដ្ឋាន​បណ្ដាញ​របស់​ទំនាក់ទំនង ជា​ចំណាំ
 Comment[lt]=Priedas skirtas žiniatinklio adresų kontaktuose eksportavimui į žymeles
+Comment[mk]=Приклучок за изнесување на веб-адресите на контактите како обележувачи
 Comment[ms]= Plug masuk untuk eksport alamat web untuk perhubungan sebagai tanda laman
 Comment[nb]=Programtillegg som eksporterer kontaktenes nett-addresser som bokmerker
 Comment[nds]=Moduul för't Exporteren vun Kontakt-Nettadressen as Leestekens
+Comment[ne]=पुस्तकचिनो अनुरुपका सम्पर्कका वेब ठेगानाको निर्यात गर्न प्लगइन गर्नुहोस्
 Comment[nl]=Plugin voor het exporteren van de webadressen van de contactpersonen als bladwijzers
 Comment[nn]=Programtillegg for å eksportera nettadresser av kontaktar som bokmerker
 Comment[pl]=Wtyczka eksportująca adresy WWW z wizytówek jako zakładki
Index: kaddressbook/xxport/ldif_xxport.desktop
===================================================================
--- kaddressbook/xxport/ldif_xxport.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kaddressbook/xxport/ldif_xxport.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -3,7 +3,7 @@
 X-KDE-Library=libkaddrbk_ldif_xxport
 Name=KAB LDIF XXPort Plugin
 Name[af]=KAB LDIF XXPort inprop module
-Name[be]=Дапаўненьне KAB "Імпарт LDIF"
+Name[be]=Дапаўненне KAB "Імпарт LDIF"
 Name[br]=Lugent XXPorzh KAB LDIF
 Name[bs]=KAB dodatak za LDIF XXPort
 Name[ca]=Endollable per importació/exportació de LDIF per a KAB
@@ -29,6 +29,7 @@
 Name[ms]=Plug masuk KAB LDIF XXPort
 Name[nb]=KAB-programtillegg for LDIF-format
 Name[nds]=LDIF-Im-/Exportmoduul för KAdressbook
+Name[ne]=KAB LDIF XXPort प्लगइन
 Name[nl]=KAB LDIF XXPort-plugin
 Name[nn]=KAB LDIF XXPort programtillegg
 Name[pl]=Wtyczka KAB do importu/eksportu z/do formatu LDIF
@@ -48,8 +49,8 @@
 Name[zh_TW]=KAB LDIF XXPort 外掛程式
 Comment=Plugin to import and export contacts in Netscape and Mozilla LDIF format
 Comment[af]=Inprop module wat kontakte in Netscape/Mozilla LDIF formaat invoer en uitvoer
-Comment[be]=Дапаўненьне для імпарту кантактаў у фармаце Netscape/Mozilla LDIF
-Comment[bg]=Приставка за импорт/експорт на контактите във формат на Netscape и Mozilla (LDIF)
+Comment[be]=Дапаўненне для імпарту кантактаў у фармаце Netscape/Mozilla LDIF
+Comment[bg]=Приставка за импортиране/експортиране на контактите във формат на Netscape и Mozilla (LDIF)
 Comment[bs]=Dodatak za uvoz i izvoz kontakata iz LDIF formata koji koriste Netscape i Mozilla
 Comment[ca]=Endollable per a importar i exportar contactes en el format LDIF de Mozilla i Netscape
 Comment[cs]=Modul pro import a export kontaktů ve formátu Netscape a Mozilla LDIF
@@ -68,12 +69,14 @@
 Comment[hu]=Bővítőmodul Netscape és Mozilla LDIF formátumú névjegyek importálásához/exportálásához
 Comment[is]=Íforrit sem flytur flytja inn eða út tengiliði í Netscape og Mozilla LDIF sniði
 Comment[it]=Plugin per importare ed esportare contatti in formato Netscape e Mozilla LDIF 
-Comment[ja]=Netscape 並びに Mozilla の LDIF フォーマットによるコンタクトのインポート 及びエクスポート用プラグイン
+Comment[ja]=Netscape と Mozilla の LDIF フォーマットで連絡先をインポート/エクスポートするプラグイン
 Comment[km]=កម្មវិធី​ជំនួយ​ដើម្បី​នាំចូល និង នាំចេញ​ទំនាក់ទំនង​ក្នុង​ទ្រង់ទ្រាយ​ជា Netscape និង Mozilla LDIF
 Comment[lt]=Priedas, skirtas kontaktų importavimui ir eksportavimui Netscape ir Mozilla LDIFF formatu
+Comment[mk]=Приклучок за внесување и изнесување контакти во форматите на Netscape и Mozilla LDIF
 Comment[ms]=Plug masuk untuk import dan eksport alamat perhubungan di dalam format LDIF Netscape dan Mozilla
 Comment[nb]=Programtillegg for import/eksport av kontakter i Netscape og Mozillas LDIF-format
 Comment[nds]=Moduul för't Im- un Exporteren vun Kontakten in't LDIF-Formaat vun Netscape und Mozilla
+Comment[ne]=नेटस्क्येप र मोजिला LDIF ढाँचामा आयात निर्यात गर्न प्लगइन गर्नुहोस्
 Comment[nl]=Plugin voor het importeren en exporteren van contactpersonen in Netscape's en Mozilla's LDIF-formaat
 Comment[nn]=Programtillegg for å importera og eksportera kontaktar i Netscape og Mozilla LDIF-format
 Comment[pl]=Wtyczka do importowania i eksportowania wizytówek z/do formatu LDIF używanego przez Mozillę i Netscape'a
Index: kaddressbook/xxport/eudora_xxport.desktop
===================================================================
--- kaddressbook/xxport/eudora_xxport.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kaddressbook/xxport/eudora_xxport.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -3,7 +3,7 @@
 X-KDE-Library=libkaddrbk_eudora_xxport
 Name=KAB Eudora XXPort Plugin
 Name[af]=KAB Eudora XXPort inprop module
-Name[be]=Дапаўненьне KAB "Імпарт/Экспарт Eudora"
+Name[be]=Дапаўненне KAB "Імпарт/Экспарт Eudora"
 Name[br]=Lugent XXPorzh Eudora KAB
 Name[bs]=KAB dodatak za Eudora XXPort
 Name[ca]=Endollable d'importació/exportació Eudora per a KAB
@@ -29,6 +29,7 @@
 Name[ms]=Plug masuk KAB Eudora XXPort
 Name[nb]=KAB-programtillegg for Eudora-eksport
 Name[nds]=Eudora-Im-/Exportmoduul för KAdressbook
+Name[ne]=KAB यूडोरा XXPort प्लगइन
 Name[nn]=KAB Eudora XXPort programtillegg
 Name[pl]=Wtyczka KAB do importu/eksportu wizytówek Eudory
 Name[pt]='Plugin' XXPort para Eudora do KAB
@@ -47,8 +48,8 @@
 Name[zh_TW]=KAB Eudora XXPort 外掛程式
 Comment=Plugin to import and export Eudora contacts
 Comment[af]=Inprop module wat kontakte in Eudora formaat invoer en uitvoer
-Comment[be]=Дапаўненьне для імпарту і экспарту кантактаў Eudora
-Comment[bg]=Приставка за импорт/експорт на контактите във формат на Eudora
+Comment[be]=Дапаўненне для імпарту і экспарту кантактаў Eudora
+Comment[bg]=Приставка за импортиране/експортиране на контактите във формат на Eudora
 Comment[bs]=Dodatak za uvoz i izvoz kontakata iz Eudore
 Comment[ca]=Endollable per a importar i exportar contactes d'Eudora
 Comment[cs]=Modul pro import a export kontaktů programu Eudora
@@ -67,12 +68,14 @@
 Comment[hu]=Bővítőmodul Eudora névjegyek importálásához/exportálásához
 Comment[is]=Íforrit til að flytja inn og út Eudora tengiliði
 Comment[it]=Plugin importare ed esportare contatti Eudora
-Comment[ja]=Eudora のコンタクトをインポート又はエクスポートするプラグイン
+Comment[ja]=Eudora の連絡先をインポート/エクスポートするプラグイン
 Comment[km]=កម្មវិធី​ជំនួយ​ដើម្បី​នាំចូល និង នាំចេញ​ទំនាក់ទំនង​របស់ Eudora
 Comment[lt]=Priedas Eudora kontaktų importui ir eksportui
+Comment[mk]=Приклучок за внесување и изнесување контакти од Eudora
 Comment[ms]=Plug masuk untuk import dan eksport alamat perhubungan Eudora
 Comment[nb]=Programtillegg for import/eksport av Eudora-kontakter
 Comment[nds]=Moduul för't Im- un Exporteren vun Eudora-Kontakten
+Comment[ne]=यूडोरा सम्पर्क आयात निर्यात गर्न प्लगइन गर्नुहोस्
 Comment[nl]=Plugin voor het importeren en exporteren van Eudora-contactpersonen
 Comment[nn]=Programtillegg for å importera og eksportera Eudora-kontaktar
 Comment[pl]=Wtyczka do importowania i eksportowania wizytówek z/do Eudory
Index: kaddressbook/editors/imeditorwidget.cpp
===================================================================
--- kaddressbook/editors/imeditorwidget.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kaddressbook/editors/imeditorwidget.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -331,7 +331,7 @@
 
 void IMEditorWidget::slotAdd()
 {
-  KDialogBase addDialog( this, "addaddress", true, i18n( "Add Address" ),
+  KDialogBase addDialog( this, "addaddress", true, i18n( "Instant messaging", "Add Address" ),
                          KDialogBase::Ok | KDialogBase::Cancel );
 
   IMAddressWidget *addressWid = new IMAddressWidget( &addDialog, mProtocols );
@@ -366,7 +366,7 @@
 
   // Just edit the first one selected.
   if ( IMAddressLVI *current = static_cast<IMAddressLVI*>( it.current() ) ) {
-    KDialogBase editDialog( this, "editaddress", true, i18n( "Edit Address" ),
+    KDialogBase editDialog( this, "editaddress", true, i18n( "Instant messaging", "Edit Address" ),
                             KDialogBase::Ok | KDialogBase::Cancel );
     IMAddressWidget *addressWid = new IMAddressWidget( &editDialog, mProtocols, current->protocol(),
                                                        current->address(), current->context() ) ;
Index: kaddressbook/editors/protocols/jabberprotocol.desktop
===================================================================
--- kaddressbook/editors/protocols/jabberprotocol.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kaddressbook/editors/protocols/jabberprotocol.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -6,6 +6,7 @@
 X-KDE-InstantMessagingKABCField=messaging/xmpp
 Comment=Jabber Protocol
 Comment[af]=Jabber protokol
+Comment[ar]=ميفاق Jabber
 Comment[be]=Пратакол Jabber
 Comment[bg]=Протокол Jabber
 Comment[br]=Komenad Jabber
@@ -30,9 +31,11 @@
 Comment[ja]=Jabber プロトコル
 Comment[km]=ពិធីការ Jabber
 Comment[lt]=Jabber protokolas
+Comment[mk]=Jabber-протокол
 Comment[ms]=Protokol Jabber 
 Comment[nb]=Jabber-protokoll
 Comment[nds]=Jabber-Protokoll
+Comment[ne]=ज्याबर प्रोटोकल
 Comment[nl]=Jabber-protocol
 Comment[nn]=Jabber-protokoll
 Comment[pl]=Protokół Jabber
@@ -52,5 +55,6 @@
 Comment[zh_CN]=Jabber 协议
 Comment[zh_TW]=Jabber 協定
 Name=Jabber
+Name[ne]=ज्याबर
 Name[ta]=ஜாபர்
 
Index: kaddressbook/editors/protocols/aimprotocol.desktop
===================================================================
--- kaddressbook/editors/protocols/aimprotocol.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kaddressbook/editors/protocols/aimprotocol.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -5,6 +5,7 @@
 ServiceTypes=KABC/IMProtocol,KPluginInfo
 X-KDE-InstantMessagingKABCField=messaging/aim
 Comment=AIM Protocol
+Comment[ar]=ميفاق AIM
 Comment[be]=Пратакол AIM
 Comment[bg]=Протокол AIM
 Comment[br]=Komenad AIM
@@ -29,9 +30,11 @@
 Comment[ja]=AIM プロトコル
 Comment[km]=ពិធីការ AIM
 Comment[lt]=AIM protokolas
+Comment[mk]=AIM-протокол
 Comment[ms]=Protokol AIM 
 Comment[nb]=AIM-protokoll
 Comment[nds]=AIM-Protokoll
+Comment[ne]=एआईएम प्रोटोकल
 Comment[nl]=AIM-protocol
 Comment[nn]=AIM-protokoll
 Comment[pa]=AIM ਪ੍ਰੋਟੋਕਾਲ
@@ -52,4 +55,5 @@
 Comment[zh_CN]=AIM 协议
 Comment[zh_TW]=AIM 協定
 Name=AIM
+Name[ne]=एआईएम
 
Index: kaddressbook/editors/protocols/meanwhileprotocol.desktop
===================================================================
--- kaddressbook/editors/protocols/meanwhileprotocol.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kaddressbook/editors/protocols/meanwhileprotocol.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -6,6 +6,8 @@
 X-KDE-InstantMessagingKABCField=messaging/meanwhile
 Comment=Meanwhile Protocol
 Comment[af]=Meanwhile protokol
+Comment[ar]=ميفاق Meanwhile
+Comment[be]=Пратакол Meanwhile
 Comment[bg]=Протокол Meanwhile
 Comment[br]=Komenad Meanwhile
 Comment[ca]=Protocol Meanwhile
@@ -28,9 +30,11 @@
 Comment[ja]=Meanwhile プロトコル
 Comment[km]=ពិធីការ Meanwhile
 Comment[lt]=Meanwhile protokolas
+Comment[mk]=Meanwhile-протокол
 Comment[ms]=Protokol Meanwhile
 Comment[nb]=Meanwhile-protokoll
 Comment[nds]=Meanwhile-Protokoll
+Comment[ne]=त्यसै समयको प्रोटोकल
 Comment[nl]=Meanwhile-protocol
 Comment[nn]=Meanwhile-protokollen
 Comment[pl]=Protokół Meanwhile
@@ -49,4 +53,5 @@
 Comment[zh_TW]=Meanwhile 協定
 Name=Meanwhile
 Name[fa]=در ضمن
+Name[ne]=त्यस समयको
 
Index: kaddressbook/editors/protocols/skypeprotocol.desktop
===================================================================
--- kaddressbook/editors/protocols/skypeprotocol.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kaddressbook/editors/protocols/skypeprotocol.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -25,8 +25,10 @@
 Comment[ja]=Skype インターネット電話
 Comment[km]=ទូរស័ព្ទ​តាម​អ៊ីនធឺណិត​ដោយ​ប្រើ Skype
 Comment[lt]=Skype Interneto telefonija
+Comment[mk]=Интернет-телефонија со Skype
 Comment[nb]=Skype IP-telefoni
 Comment[nds]=Internet-Telefoneren mit Skype
+Comment[ne]=स्काइप इन्टरनेट दूरभाषी
 Comment[nl]=Skype internettelefonie
 Comment[nn]=Skype Internett-telefoni
 Comment[pl]=Skype - telefonia internetowa
@@ -42,3 +44,4 @@
 Comment[zh_CN]=Skype Internet 电话
 Comment[zh_TW]=Skype 網路電話
 Name=Skype
+Name[ne]=स्काइप
Index: kaddressbook/editors/protocols/icqprotocol.desktop
===================================================================
--- kaddressbook/editors/protocols/icqprotocol.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kaddressbook/editors/protocols/icqprotocol.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -30,9 +30,11 @@
 Comment[ja]=ICQ プロトコル
 Comment[km]=ពិធីការ ICQ
 Comment[lt]=ICQ protokolas
+Comment[mk]=ICQ-протокол
 Comment[ms]=Protokol ICQ 
 Comment[nb]=ICQ-protokoll
 Comment[nds]=ICQ-Protokoll
+Comment[ne]=आईसीक्यू प्रोटोकल
 Comment[nl]=ICQ-protocol
 Comment[nn]=ICQ-protokoll
 Comment[pl]=Protokół ICQ
@@ -52,4 +54,5 @@
 Comment[zh_CN]=ICQ 协议
 Comment[zh_TW]=ICQ 協定
 Name=ICQ
+Name[ne]=आईसीक्यू
 
Index: kaddressbook/editors/protocols/ircprotocol.desktop
===================================================================
--- kaddressbook/editors/protocols/ircprotocol.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kaddressbook/editors/protocols/ircprotocol.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -12,6 +12,7 @@
 Comment[ja]=インターネット・リレー・チャット
 Comment[km]=ជជែក​កំសាន្ត​តាមអ៊ីនធឺណិត
 Comment[lt]=Estafetinis Interneto pokalbis
+Comment[ne]=इन्टरनेटबाट प्रसारण च्याट
 Comment[pl]=IRC (Internet Relay Chat)
 Comment[pt_BR]=Protocolo de Bate-papo na Internet - IRC
 Comment[ru]=IRC
@@ -25,4 +26,5 @@
 Comment[zh_CN]=Internet 聊天
 Comment[zh_TW]=IRC
 Name=IRC
+Name[ne]=आईआरसी
 
Index: kaddressbook/editors/protocols/msnprotocol.desktop
===================================================================
--- kaddressbook/editors/protocols/msnprotocol.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kaddressbook/editors/protocols/msnprotocol.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -14,6 +14,7 @@
 Comment[ja]=MSN メッセンジャー
 Comment[km]=កម្មវិធី​ផ្ញើ​សារ MSN
 Comment[nds]=MSN-Kortnarichtenmaker
+Comment[ne]=एमएसएन म्यासेन्जर
 Comment[pa]=MSN ਸੁਨੇਹਾਦਾਰ
 Comment[ta]=MSN மெசஞ்சர்
 Comment[tr]=MSN Mesajcısı
@@ -24,6 +25,7 @@
 Name[ja]=MSN メッセンジャー
 Name[km]=កម្មវិធី​ផ្ញើសារ MSN
 Name[nds]=MSN-Kortnarichtenmaker
+Name[ne]=एमएसएन म्यासेन्जर
 Name[ta]=MSN மெசஞ்சர்
 Name[tr]=MSN Mesajcısı
 
Index: kaddressbook/editors/protocols/yahooprotocol.desktop
===================================================================
--- kaddressbook/editors/protocols/yahooprotocol.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kaddressbook/editors/protocols/yahooprotocol.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -6,6 +6,7 @@
 X-KDE-InstantMessagingKABCField=messaging/yahoo
 Comment=Yahoo Protocol
 Comment[af]=Yahoo protokol
+Comment[ar]=ميفاق Yahoo
 Comment[be]=Пратакол Yahoo
 Comment[bg]=Протокол Yahoo
 Comment[br]=Komenad Yahoo
@@ -30,9 +31,11 @@
 Comment[ja]=Yahoo プロトコル
 Comment[km]=ពិធីការ​យ៉ាហ៊ូ
 Comment[lt]=Yahoo protokolas
+Comment[mk]=Yahoo-протокол
 Comment[ms]=Protokol Yahoo 
 Comment[nb]=Yahoo-protokoll
 Comment[nds]=Yahoo-Protokoll
+Comment[ne]=याहू प्रोटोकल
 Comment[nl]=Yahoo-protocol
 Comment[nn]=Yahoo-protokoll
 Comment[pl]=Protokół Yahoo
@@ -55,4 +58,5 @@
 Name[de]=Yahoo!
 Name[fa]=یاهو
 Name[km]=យ៉ាហ៊ូ
+Name[ne]=याहू
 
Index: kaddressbook/editors/protocols/gaduprotocol.desktop
===================================================================
--- kaddressbook/editors/protocols/gaduprotocol.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kaddressbook/editors/protocols/gaduprotocol.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -6,6 +6,7 @@
 X-KDE-InstantMessagingKABCField=messaging/gadu
 Comment=Gadu-Gadu Protocol
 Comment[af]=Gadu-Gadu protokol
+Comment[ar]=ميفاق Gadu-Gadu
 Comment[be]=Пратакол Gadu-Gadu
 Comment[bg]=Протокол Gadu-Gadu
 Comment[br]=Komenad Gadu-Gadu
@@ -30,9 +31,11 @@
 Comment[ja]=Gadu-Gadu プロトコル
 Comment[km]=ពិធីការ Gadu-Gadu
 Comment[lt]=Gadu-Gadu protokolas
+Comment[mk]=Gadu-Gadu-протокол
 Comment[ms]=Protokol Gadu-Gadu 
 Comment[nb]=Gadu-Gadu-protokoll
 Comment[nds]=Gadu-Gadu-Protokoll
+Comment[ne]=गाडु-गाडु प्रोटोकल
 Comment[nl]=Gadu-Gadu-protocol
 Comment[nn]=Gadu-Gadu-protokoll
 Comment[pl]=Protokół Gadu-Gadu
@@ -52,5 +55,6 @@
 Comment[zh_CN]=Gadu-Gadu 协议
 Comment[zh_TW]=Gadu-Gadu 協定
 Name=Gadu-Gadu
+Name[ne]=गाडु-गाडु
 Name[ta]=கடு-கடு
 
Index: kaddressbook/editors/protocols/smsprotocol.desktop
===================================================================
--- kaddressbook/editors/protocols/smsprotocol.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kaddressbook/editors/protocols/smsprotocol.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -30,9 +30,11 @@
 Comment[ja]=SMS プロトコル
 Comment[km]=ពិធីការ​សេវា​សារ​ខ្លីៗ
 Comment[lt]=SMS protokolas
+Comment[mk]=SMS-протокол
 Comment[ms]=Protokol SMS 
 Comment[nb]=SMS Protokoll
 Comment[nds]=SMS-Protokoll
+Comment[ne]=एसएमएस प्रोटोकल
 Comment[nl]=SMS-protocol
 Comment[nn]=SMS-protokoll
 Comment[pl]=Protokół SMS
@@ -54,5 +56,6 @@
 Name=SMS
 Name[fa]=پیام کوتاه
 Name[km]=សេវា​សារ​ខ្លីៗ
+Name[ne]=एसएमएस
 Name[zh_CN]=短信息
 
Index: kaddressbook/editors/protocols/groupwiseprotocol.desktop
===================================================================
--- kaddressbook/editors/protocols/groupwiseprotocol.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kaddressbook/editors/protocols/groupwiseprotocol.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -21,6 +21,7 @@
 Comment[lt]=Novell GroupWise momentinių žinučių klientas
 Comment[ms]=Pembawa mesej Novell GroupWise 
 Comment[nds]=Novell-GroupWise-Kortnarichtenmaker
+Comment[ne]=नोभेल समूहगत म्यासेन्जर
 Comment[nl]=Novell GroupWise-messenger
 Comment[pl]=Komunikator Novell GroupWise
 Comment[pt_BR]=Mensageiro GroupWise da Novell
@@ -31,6 +32,7 @@
 Comment[ta]=நோவல் குழுவாரியான செய்தியாளன்
 Comment[zh_CN]=Novell GroupWise 信使
 Name=GroupWise
+Name[ne]=समूहगत
 Name[sr]=Groupware
 Name[sr@Latn]=Groupware
 Name[sv]=Groupwise
Index: kaddressbook/editors/cryptosettings.desktop
===================================================================
--- kaddressbook/editors/cryptosettings.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kaddressbook/editors/cryptosettings.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -4,13 +4,13 @@
 Name=Crypto Preferences
 Name[af]=Kripto Voorkeure
 Name[be]=Перавагі крыптаграфіі
-Name[bg]=Криптография
+Name[bg]=Шифроване
 Name[bs]=Postavke kriptografije
 Name[ca]=Preferències de criptografia
 Name[cs]=Nastavení šifrování
 Name[da]=Krypto-indstillinger
 Name[de]=Kryptographie-Einstellungen
-Name[el]=Προτιμήσεις Κρυπτογραφίας
+Name[el]=Προτιμήσεις κρυπτογραφίας
 Name[es]=Preferencias de cifrado
 Name[et]=Krüptoseadistused
 Name[eu]=Kriptografia hobespenak
@@ -28,6 +28,7 @@
 Name[ms]=Keutamaan Kripto 
 Name[nb]=Krypterings instillinger
 Name[nds]=Verslöteln-Instellen
+Name[ne]=गुप्तिकरण प्राथमिकता
 Name[nl]=Versleutelingsinstellingen
 Name[nn]=Krypteringsinnstillinger
 Name[pl]=Ustawienia kryptograficzne
Index: kaddressbook/editors/imaddresseditor.desktop
===================================================================
--- kaddressbook/editors/imaddresseditor.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kaddressbook/editors/imaddresseditor.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -8,7 +8,7 @@
 Name[bs]=Instant poruke
 Name[ca]=Missatgeria instantània
 Name[cs]=Komunikátor
-Name[el]=Στιγμιαίο Μήνυμα
+Name[el]=Στιγμιαίο μήνυμα
 Name[es]=Mensajería instantánea
 Name[et]=Kiirsuhtlus
 Name[eu]=Berehalako mezularitza
@@ -26,6 +26,7 @@
 Name[ms]=Penghantaran Mesej Segera
 Name[nb]=Lynmelding
 Name[nds]=Kortnarichten-Maker
+Name[ne]=संदेशन दृश्टान्त
 Name[nn]=Lynmelding
 Name[pl]=Komunikacja internetowa
 Name[pt]=Mensagens Instantâneas
@@ -42,7 +43,7 @@
 Name[tr]=Hızlı Mesajlaşma
 Name[uk]=Миттєвий зв'язок
 Name[uz]=Хабар алмашиш
-Name[zh_CN]=即时消息
+Name[zh_CN]=即时通讯
 Name[zh_TW]=即時通訊
 Comment=Instant Messaging Address Editor
 Comment[af]=Kits boodskap adres redigeerder
@@ -52,7 +53,7 @@
 Comment[cs]=Editor adres komunikátorů
 Comment[da]=Instant Messaging adresseeditor
 Comment[de]=Editor für Instant Messaging-Adressen
-Comment[el]=Επεξεργαστής Διευθύνσεων Στιγμιαίων Μηνυμάτων
+Comment[el]=Επεξεργαστής διευθύνσεων στιγμιαίων μηνυμάτων
 Comment[es]=Editor de direcciones de mensajería instantánea
 Comment[et]=Kiirsuhtluse aadresside redaktor
 Comment[eu]=Berehalako mezularitza helbide editorea
@@ -70,6 +71,7 @@
 Comment[ms]=Pengedit Alamat Penghantaran Mesej Segera
 Comment[nb]=Adresse-redigerer for lynmelding
 Comment[nds]=Editor för Kortnarichten-Adressen
+Comment[ne]=दृष्टान्त संदेशन ठेगाना सम्पादक
 Comment[nl]=Instant Messaging Adresbewerker
 Comment[nn]=Adresseredigering for lynmelding
 Comment[pl]=Edytor adresów komunikatorów internetowych
@@ -86,7 +88,7 @@
 Comment[tg]=Муҳаррири алоқоти хизматгоҳҳои мубодилаи иттилоот
 Comment[tr]=Hızlı Mesajlaşma Adres Düzenleyicisi
 Comment[uk]=Редактор адрес миттєвого зв'язку
-Comment[zh_CN]=即时消息地址编辑器
+Comment[zh_CN]=即时通讯地址编辑器
 Comment[zh_TW]=即時通訊位址編輯器
 ServiceTypes=KAddressBook/ContactEditorWidget
 X-KDE-Library=libkaddrbk_instantmessaging
Index: kaddressbook/editors/kaddressbookimprotocol.desktop
===================================================================
--- kaddressbook/editors/kaddressbookimprotocol.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kaddressbook/editors/kaddressbookimprotocol.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -10,7 +10,7 @@
 Name[cs]=KAddressbook instant messaging protokol
 Name[da]=KAddressbook kvikbesked-protokol
 Name[de]=Adressbuch Instant Messaging Protokoll
-Name[el]=Πρωτόκολλο Στιγμιαίου Μηνύματος του KAddressbook
+Name[el]=Πρωτόκολλο στιγμιαίου μηνύματος του KAddressbook
 Name[es]=Protocolo de mensajería instantánea de KAddressbook
 Name[et]=KDE aadressiraamatu kiirsuhtlusprotokoll
 Name[eu]=KAddressbook berehalako mezularitza protokoloa
@@ -28,6 +28,7 @@
 Name[ms]=Protokol Penghantaran Mesej Segera KAddressbook 
 Name[nb]=KAdressbook lynmeldingsprotokoll
 Name[nds]=KAddressbook-Kortnarichten-Protokoll
+Name[ne]=के ठेगाना पुस्तिका दृष्टान्त संदेशन प्रोटोकल
 Name[nl]=KAddressbook Instant Messaging-protocol
 Name[nn]=Lynmeldingsprotokoll for KDE-adresseboka
 Name[pl]=Protokół komunikacji internetowej KAddressbook
@@ -44,7 +45,7 @@
 Name[tg]=Протоколи мубодилаи иттилооти китоби адресии KDE
 Name[tr]=KAddressbook Hızlı Mesajlaşma Protokolü
 Name[uk]=Протокол миттєвого зв'язку KAddressbook
-Name[zh_CN]=KAddressbook 即时消息协议
+Name[zh_CN]=KAddressbook 即时通讯协议
 Name[zh_TW]=KAddressbook 即時通訊協定
 [PropertyDef::X-KDE-InstantMessagingKABCField]
 Type=QString
Index: kaddressbook/kablock.cpp
===================================================================
--- kaddressbook/kablock.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kaddressbook/kablock.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -57,6 +57,8 @@
 {
   if ( !mSelf )
     kabLockDeleter.setObject( mSelf, new KABLock( ab ) );
+  else
+    mSelf->mAddressBook = ab;
 
   return mSelf;
 }
Index: kaddressbook/kabcore.cpp
===================================================================
--- kaddressbook/kabcore.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kaddressbook/kabcore.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -965,15 +965,25 @@
 
 void KABCore::addressBookChanged()
 {
+  const QStringList selectedUids = mViewManager->selectedUids();
+
   mAddressBookChangedTimer->stop();
 
   if ( mJumpButtonBar )
     mJumpButtonBar->updateButtons();
 
   mSearchManager->reload();
+
   mViewManager->setSelected( QString::null, false );
-  setContactSelected( QString::null );
 
+  QString uid = QString::null;
+  if ( !selectedUids.isEmpty() ) {
+    uid = selectedUids.first();
+    mViewManager->setSelected( uid, true );
+  }
+
+  setContactSelected( uid );
+
   updateCategories();
 }
 
@@ -1030,6 +1040,7 @@
 
   QHBoxLayout *detailsPageLayout = new QHBoxLayout( mDetailsPage, 0, 0 );
   mDetails = new KPIM::AddresseeView( mDetailsPage );
+  mDetails->setVScrollBarMode( QScrollView::Auto );
   detailsPageLayout->addWidget( mDetails );
 
   connect( mDetails, SIGNAL( addressClicked( const QString&) ),
Index: kaddressbook/addresseeeditorwidget.cpp
===================================================================
--- kaddressbook/addresseeeditorwidget.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kaddressbook/addresseeeditorwidget.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -782,8 +782,7 @@
   }
 
   mCategorySelectDialog->setSelected( QStringList::split( ",", mCategoryEdit->text() ) );
-  mCategorySelectDialog->show();
-  mCategorySelectDialog->raise();
+  mCategorySelectDialog->exec();
 }
 
 void AddresseeEditorWidget::categoriesSelected( const QStringList &list )
@@ -799,8 +798,7 @@
              mCategorySelectDialog, SLOT( updateCategoryConfig() ) );
   }
 
-  mCategoryEditDialog->show();
-  mCategoryEditDialog->raise();
+  mCategoryEditDialog->exec();
 }
 
 void AddresseeEditorWidget::emitModified()
Index: kaddressbook/kaddressbook_view.desktop
===================================================================
--- kaddressbook/kaddressbook_view.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kaddressbook/kaddressbook_view.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -4,7 +4,7 @@
 X-KDE-ServiceType=KAddressBook/View
 Comment=KAddressBook View Plugin
 Comment[af]=KAddressBook besigtig inprop module
-Comment[be]=Дапаўненьне K Адраснай кнігі "Выгляд"
+Comment[be]=Дапаўненне K Адраснай кнігі "Выгляд"
 Comment[bg]=Приставка за преглед на адресника
 Comment[br]=Lugent gwell KAddressBook
 Comment[bs]=KAddressBook dodatak za pregledanje
@@ -29,9 +29,11 @@
 Comment[ja]=Addressbook ビュープラグイン
 Comment[km]=កម្មវិធី​ជំនួយ​ទិដ្ឋភាព​របស់ KAddressBook
 Comment[lt]=KAddressBook peržiūros priedas
+Comment[mk]=Приклучок за преглед на КАдресар
 Comment[ms]=Plug masuk Pelihat KAddressBook
 Comment[nb]=KAddressbook-programtillegg for visning
 Comment[nds]=Kiekermoduul för KAdressbook
+Comment[ne]=केडीई ठेगाना पुस्तिका दृश्य प्लगइन
 Comment[nl]=KAddressBook Weergave Plugin
 Comment[nn]=Programtillegg for vising av KDE-adresseboka
 Comment[pl]=Wtyczka widoku KAddressBook
Index: kaddressbook/addresseditwidget.cpp
===================================================================
--- kaddressbook/addresseditwidget.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kaddressbook/addresseditwidget.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -97,7 +97,7 @@
   mAddressField->setTextFormat( Qt::PlainText );
   layout->addWidget( mAddressField );
 
-  mEditButton = new QPushButton( i18n( "&Edit Addresses..." ), this );
+  mEditButton = new QPushButton( i18n( "street/postal", "&Edit Addresses..." ), this );
   connect( mEditButton, SIGNAL( clicked() ), this, SLOT( edit() ) );
 
   layout->addWidget( mEditButton );
@@ -259,7 +259,7 @@
 AddressEditDialog::AddressEditDialog( const KABC::Address::List &list,
                                       int selected, QWidget *parent,
                                       const char *name )
-  : KDialogBase( Plain, i18n( "Edit Address" ), Ok | Cancel, Ok,
+  : KDialogBase( Plain, i18n( "street/postal", "Edit Address" ), Ok | Cancel, Ok,
                  parent, name, true, true ),
     mPreviousAddress( 0 )
 {
@@ -324,7 +324,7 @@
   label->setBuddy( mCountryCombo );
   topLayout->addWidget( mCountryCombo, 6, 1 );
 
-  mPreferredCheckBox = new QCheckBox( i18n( "This is the preferred address" ), page );
+  mPreferredCheckBox = new QCheckBox( i18n( "street/postal", "This is the preferred address" ), page );
   topLayout->addMultiCellWidget( mPreferredCheckBox, 8, 8, 0, 1 );
 
   KSeparator *sep = new KSeparator( KSeparator::HLine, page );
@@ -600,13 +600,13 @@
 
 
 AddressTypeDialog::AddressTypeDialog( int type, QWidget *parent )
-  : KDialogBase( Plain, i18n( "Edit Address Type" ), Ok | Cancel, Ok,
+  : KDialogBase( Plain, i18n( "street/postal", "Edit Address Type" ), Ok | Cancel, Ok,
                  parent, "AddressTypeDialog" )
 {
   QWidget *page = plainPage();
   QVBoxLayout *layout = new QVBoxLayout( page );
 
-  mGroup = new QButtonGroup( 2, Horizontal, i18n( "Address Types" ), page );
+  mGroup = new QButtonGroup( 2, Horizontal, i18n( "street/postal", "Address Types" ), page );
   layout->addWidget( mGroup );
 
   mTypeList = KABC::Address::typeList();
Index: kaddressbook/kcmconfigs/kabcustomfields.desktop
===================================================================
--- kaddressbook/kcmconfigs/kabcustomfields.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kaddressbook/kcmconfigs/kabcustomfields.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -14,6 +14,7 @@
 
 Name=Custom Pages
 Name[af]=Pasmaak Blaaie
+Name[ar]=الصفحات المعتادة
 Name[bg]=Потребителски полета
 Name[br]=Pajennoù dre ziouer
 Name[bs]=Vlastite stranice
@@ -37,9 +38,11 @@
 Name[ja]=カスタム ページ
 Name[km]=ទំព័រ​ផ្ទាល់​ខ្លួន
 Name[lt]=Pasirinkti puslapiai
+Name[mk]=Сопствени страници
 Name[ms]=Halaman Kebiasaan 
 Name[nb]=Tilpassede sider
 Name[nds]=Egen Sieden
+Name[ne]=अनुकूल पृष्ठ
 Name[nl]=Aangepaste pagina's
 Name[nn]=Tilpassa sider
 Name[pl]=Własne strony
@@ -59,6 +62,7 @@
 Name[zh_CN]=定制页
 Comment=Configure the Custom Pages
 Comment[af]=Stel die pasmaak blaaie op
+Comment[ar]=إعداد الصفحات المعتادة
 Comment[bg]=Настройки на потребителските полета
 Comment[br]=Kefluniañ ar pajennoù diouzhoc'h
 Comment[bs]=Podesite vlastite stranice
@@ -82,9 +86,11 @@
 Comment[ja]=カスタム ページの設定
 Comment[km]=កំណត់​រចនាសម្ព័ន្ធ​ទំព័រ​ផ្ទាល់​ខ្លួន
 Comment[lt]=Konfigūruoti darbastalių skaičių ir pavadinimus
+Comment[mk]=Конфигурирајте ги сопствените страници
 Comment[ms]=Konfigurkan Halaman Langganan 
 Comment[nb]=Stille inn de tilpassede sidene
 Comment[nds]=Egen Sieden instellen
+Comment[ne]=अनुकूल पृष्ठ कन्फिगर गर्नुहोस्
 Comment[nl]=Hier kunt u de aangepaste pagina's instellen
 Comment[nn]=Set opp dei tilpassa sidene
 Comment[pl]=Konfiguracja własnych stron
@@ -125,9 +131,11 @@
 Keywords[ja]=kaddressbook、設定、設定,カスタムフィールド
 Keywords[km]=kaddressbook,កំណត់​រចនាសម្ព័ន្ធ,ការ​កំណត់,វាល​ផ្ទាល់​ខ្លួន
 Keywords[lt]=kaddressbook, configure, settings, custom fields, pasirinkti laukai,konfigūruoti, nustatymai
+Keywords[mk]=kaddressbook, configure, settings, custom fields, КАдресар, конфигурација, конфигурирање, сопствени полиња
 Keywords[ms]=kaddressbook, konfigur, seting, medan kebiasaan
 Keywords[nb]=kaddressbook, sette opp, innstillinger
 Keywords[nds]=KAddressbook,KAdressbook,Adressbook,instellen,egen Feller
+Keywords[ne]=केडीई ठेगाना पुस्तिका, कन्फिगर, सेटिङ, अनुकूल फिल्ड
 Keywords[nl]=adresboek,KAB,kab,kaddressbook,instellingen,configuratie,aangepaste velden
 Keywords[nn]=adressebok, oppsett, innstillingar, tilpassa felt
 Keywords[pl]=kaddressbook,książka adresowa,konfiguracja,ustawienia, własne pola
Index: kaddressbook/kcmconfigs/kabconfig.desktop
===================================================================
--- kaddressbook/kcmconfigs/kabconfig.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kaddressbook/kcmconfigs/kabconfig.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -15,6 +15,7 @@
 
 Name=General
 Name[af]=Algemeen
+Name[ar]=عام
 Name[bg]=Общи
 Name[br]=Pennañ
 Name[cs]=Obecné
@@ -36,9 +37,11 @@
 Name[ja]=全般
 Name[km]=ទូទៅ
 Name[lt]=Bendras
+Name[mk]=Општо
 Name[ms]=Umum
 Name[nb]=Generelt
 Name[nds]=Allgemeen
+Name[ne]=साधारण
 Name[nl]=Algemeen
 Name[nn]=Generelt
 Name[pa]=ਸਧਾਰਨ
@@ -60,6 +63,7 @@
 Name[zh_CN]=常规
 Comment=Configure the Address Book
 Comment[af]=Stel die adres boek op
+Comment[ar]=إعداد دفتر العناوين
 Comment[be]=Настроіць адрасную кнігу
 Comment[bg]=Настройки на адресника
 Comment[br]=Kefluniañ ar c'harned chomlec'hioù
@@ -86,9 +90,11 @@
 Comment[ja]=アドレス帳設定
 Comment[km]=កំណត់​រចនាសម្ព័ន្ធ​សៀវភៅ​អាសយដ្ឋាន
 Comment[lt]=Konfigūruoti adresų knygelę
+Comment[mk]=Конфигурирајте го адресарот
 Comment[ms]=Konfigurkan Buku Alamat
 Comment[nb]=Oppsett for adresseboka
 Comment[nds]=Adressbook instellen
+Comment[ne]=ठेगाना पुस्तिका कन्फिगर गर्नुहोस्
 Comment[nl]=Hier kunt u uw adresboek aanpassen
 Comment[nn]=Setja opp adressebok
 Comment[pl]=Konfiguracja Książki adresowej
@@ -111,7 +117,7 @@
 Comment[zh_TW]=設定通訊錄
 Keywords=kaddressbook, configure, settings
 Keywords[af]=kaddressbook, configure,settings,adres
-Keywords[be]=K Адрасная кніга, настроіць, настройкі, kaddressbook, configure, settings
+Keywords[be]=K Адрасная кніга, настроіць, настаўленні, kaddressbook, configure, settings
 Keywords[bg]=адресни,адресна,книга,визитник,визитка,картичка,kaddressbook, configure, settings
 Keywords[br]=kaddressbook, kefluniañ, dibarzhoù
 Keywords[bs]=kaddressbook, configure, settings, podesi, podesite, postavke, konfiguracija
@@ -136,9 +142,11 @@
 Keywords[ja]=kaddressbook 設定
 Keywords[km]=kaddressbook,កំណត់​រចនាសម្ព័ន្ធ,ការ​កំណត់
 Keywords[lt]=kaddressbook, configure, settings, konfigūravimas, nustatymai
+Keywords[mk]=kaddressbook, configure, settings, КАдресар, конфигурирање, конфигурација, поставување
 Keywords[ms]=,selaraskan, tetapan, kaddressbook, configure, settings
 Keywords[nb]=kaddressbook, sette opp, innstillinger
 Keywords[nds]=KAddressbook,KAdressbook,Adressbook,instellen
+Keywords[ne]=केडीई ठेगाना पुस्तिका, कन्फिगर, सेटिङ
 Keywords[nl]=adresboek,KAB,kab,kaddressbook,instellingen,configuratie
 Keywords[nn]=adressebok, oppsett, innstillingar
 Keywords[pl]=kaddressbook, książka adresowa,adresy,konfiguracja,ustawienia,opcje
Index: kaddressbook/kcmconfigs/kabldapconfig.desktop
===================================================================
--- kaddressbook/kcmconfigs/kabldapconfig.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kaddressbook/kcmconfigs/kabldapconfig.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -39,8 +39,10 @@
 Name[ja]=LDAP 検索
 Name[km]=ស្វែងរក LDAP
 Name[lt]=LDAP paieška
+Name[mk]=Пребарување во LDAP
 Name[nb]=LDAP oppslag
 Name[nds]=LDAP-Naslaan
+Name[ne]=एलडीएपी खोजी गर्नुहोस्
 Name[nl]=LDAP-zoekactie
 Name[nn]=LDAP oppslag
 Name[pa]=LDAP ਖੋਜ
@@ -84,9 +86,11 @@
 Comment[ja]=アドレス帳 LDAP 設定
 Comment[km]=កំណត់​រចនាសម្ព័ន្ធ​ការ​កំណត់ LDAP របស់​សៀវភៅ​អាសយដ្ឋាន
 Comment[lt]=Konfigūruoti adresų knygelės LDAP nustatymus
+Comment[mk]=Конфигурирајте ги поставувањата за LDAP за адресарот
 Comment[ms]=Konfigurkan Seting Buku Alamat  LDAP 
 Comment[nb]=Sett opp LDAP-innstillinger for adresseboka
 Comment[nds]=LDAP-Instellen för KAdressbook
+Comment[ne]=ठेगाना पुस्तिका एलडीएपी सेटिङ कन्फिगर गर्नुहोस्
 Comment[nl]=Hier kunt u de LDAP-instellingen voor uw adresboek instellen
 Comment[nn]=Setja opp LDAP-innstillingar for adresseboka
 Comment[pl]=Konfiguracja ustawień LDAP dla Książki adresowej
@@ -106,7 +110,7 @@
 Comment[zh_CN]=配置地址簿 LDAP 设置
 Comment[zh_TW]=設定通訊錄 LDAP 設定
 Keywords=kaddressbook, configure, settings, LDAP
-Keywords[be]=K Адрасная кніга, настроіць, настройкі, kaddressbook, configure, settings, LDAP
+Keywords[be]=K Адрасная кніга, настроіць, настраўленні, kaddressbook, configure, settings, LDAP
 Keywords[bg]=адресник,адрес,адресна,книга,сървър,всички,kaddressbook, configure, settings, LDAP
 Keywords[br]=kaddressbook, kefluniañ, dibarzhoù, LDAP
 Keywords[bs]=kaddressbook, configure, settings, LDAP, podesi, postavke, podesite, konfiguracija
@@ -131,9 +135,11 @@
 Keywords[ja]=kaddressbook LDAP 設定
 Keywords[km]=kaddressbook,កំណត់​រចនាសម្ព័ន្ធ,ការ​កំណត់,LDAP
 Keywords[lt]=kaddressbook, configure, settings, LDAP, nustatymai, konfigūruoti
+Keywords[mk]=kaddressbook, configure, settings, LDAP, кадресар, конфигурација, конфигурирање, поставувања
 Keywords[ms]=selaraskan, tetapan, kaddressbook, configure, settings, LDAP
 Keywords[nb]=kaddressbook, sette opp, innstillinger, LDAP
 Keywords[nds]=KAdressbook,Adressbook,LDAP,instellen
+Keywords[ne]=केडीई ठेगाना पुस्तिका, कन्फिगर, सेटिङ, एलडीएपी
 Keywords[nl]=adresboek,kaddressbook,LDAP
 Keywords[nn]=adressebok, oppsett, innstillingar, LDAP
 Keywords[pl]=kaddressbook, książka adresowa,konfiguracja,ustawienia,opcje, LDAP
Index: kaddressbook/kaddressbookview.cpp
===================================================================
--- kaddressbook/kaddressbookview.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kaddressbook/kaddressbookview.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -187,7 +187,7 @@
   } else {
     const KABC::Addressee::List contacts = mCore->searchManager()->contacts();
     if ( !contacts.isEmpty() )
-      setSelected( contacts.first().uid(), true );
+      setFirstSelected( true );
     else
       emit selected( QString::null );
   }
Index: kaddressbook/thumbnailcreator/ldifvcardthumbnail.desktop
===================================================================
--- kaddressbook/thumbnailcreator/ldifvcardthumbnail.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kaddressbook/thumbnailcreator/ldifvcardthumbnail.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -11,7 +11,7 @@
 Name[cy]=Ffeiliau Cerdyn Busnes Electronig
 Name[da]=Elektroniske forretningskort-filer
 Name[de]=Dateien für elektronische Visitenkarten
-Name[el]=Αρχεία Επαγγελματικών Ηλεκτρονικών Καρτών
+Name[el]=Αρχεία επαγγελματικών ηλεκτρονικών καρτών
 Name[es]=Archivos de tarjetas de visita electrónicas
 Name[et]=Elektrooniline visiitkaart
 Name[eu]=Electronic Business Card fitxategiak
@@ -26,9 +26,11 @@
 Name[ja]=電子ビジネスカードファイル
 Name[km]=ឯកសារ​នាមប័ណ្ណ​អេឡិចត្រូនិច
 Name[lt]=Elektroninės verslo kortelės bylos
+Name[mk]=Датотеки со електронски деловни картички
 Name[ms]=Fail Kad Perniagaan Elektronik
 Name[nb]=Filer for elektroniske visittkort
 Name[nds]=Dateien mit elektroonsche Visitenkoorten
+Name[ne]=बिद्युतीय व्यवसायीक कार्ड फाइल
 Name[nl]=Elektronische visitekaartbestanden
 Name[nn]=Filer for elektroniske visittkort
 Name[pl]=Pliki elektronicznych wizytówek
Index: kaddressbook/imagewidget.cpp
===================================================================
--- kaddressbook/imagewidget.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kaddressbook/imagewidget.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -34,10 +34,6 @@
 #include <kurldrag.h>
 #include <libkdepim/kpixmapregionselectordialog.h>
 
-#include <librss/loader.h>
-#include <librss/document.h>
-#include <librss/image.h>
-
 #include <qapplication.h>
 #include <qdragobject.h>
 #include <qeventloop.h>
@@ -51,13 +47,11 @@
 
 #include "imagewidget.h"
 
-ImageLoader::ImageLoader()
-  : QObject( 0, "ImageLoader" ),
-    mIsLoadingBlog( false )
+ImageLoader::ImageLoader( QWidget *parent )
+  : QObject( 0, "ImageLoader" ), mParent( parent )
 {
 }
 
-
 KABC::Picture ImageLoader::loadPicture( const KURL &url, bool *ok )
 {
   KABC::Picture picture;
@@ -73,7 +67,7 @@
     image.load( url.path() );
     picture.setData( image );
     (*ok) = true;
-  } else if ( KIO::NetAccess::download( url, tempFile, 0 ) ) {
+  } else if ( KIO::NetAccess::download( url, tempFile, mParent ) ) {
     image.load( tempFile );
     picture.setData( image );
     (*ok) = true;
@@ -82,13 +76,13 @@
 
   if ( !(*ok) ) {
     // image does not exist (any more)
-    KMessageBox::sorry( 0, i18n( "This contact's image cannot be found." ) );
+    KMessageBox::sorry( mParent, i18n( "This contact's image cannot be found." ) );
     return picture;
   }
 
   QPixmap pixmap = picture.data();
 
-  QPixmap selectedPixmap = KPIM::KPixmapRegionSelectorDialog::getSelectedImage( pixmap, 100, 140, 0 );
+  QPixmap selectedPixmap = KPIM::KPixmapRegionSelectorDialog::getSelectedImage( pixmap, 100, 140, mParent );
   if ( selectedPixmap.isNull() ) {
     (*ok) = false;
     return picture;
@@ -108,51 +102,7 @@
   return picture;
 }
 
-KABC::Picture ImageLoader::loadBlog( const KURL &url, bool *ok )
-{
-  RSS::Loader *loader = RSS::Loader::create();
-  connect( loader, SIGNAL( loadingComplete( Loader*, Document, Status ) ),
-           this, SLOT( loadingComplete( Loader*, Document, Status ) ) );
-  loader->loadFrom( url, new RSS::FileRetriever );
 
-  mIsLoadingBlog = true;
-  while ( mIsLoadingBlog ) {
-    qApp->eventLoop()->processEvents( QEventLoop::ExcludeUserInput );
-    usleep( 500 );
-  }
-
-  if ( mPicture.data().isNull() ) {
-    KMessageBox::sorry( 0,
-        i18n( "Blog feed at '%1' does not contain an image." ).arg( url.url() ) );
-    (*ok) = false;
-  }
-  (*ok) = true;
-
-  return mPicture;
-}
-
-void ImageLoader::loadingComplete( RSS::Loader*,
-                                   RSS::Document doc,
-                                   RSS::Status status )
-{
-  mIsLoadingBlog = false;
-
-  if ( status != RSS::Success ) {
-    mPicture = KABC::Picture();
-    return;
-  }
-
-  if ( !doc.image() ) {
-    mPicture = KABC::Picture();
-    return;
-  }
-
-  bool ok = false;
-  KABC::Picture pic = loadPicture( doc.image()->url().url(), &ok );
-  if ( ok )
-    mPicture = pic;
-}
-
 ImageButton::ImageButton( const QString &title, QWidget *parent )
   : QPushButton( title, parent ),
     mReadOnly( false ), mImageLoader( 0 )
@@ -183,11 +133,6 @@
   mImageLoader = loader;
 }
 
-void ImageButton::setBlogFeed( const KURL &url )
-{
-  mBlogFeed = url;
-}
-
 void ImageButton::startDrag()
 {
   if ( !mPicture.data().isNull() ) {
@@ -272,9 +217,6 @@
 {
   QPopupMenu menu( this );
   menu.insertItem( i18n( "Reset" ), this, SLOT( clear() ) );
-  if ( mBlogFeed.isValid() )
-    menu.insertItem( i18n("Get From Blog"), this, SLOT( loadBlog() ) );
-
   menu.exec( event->globalPos() );
 }
 
@@ -294,17 +236,6 @@
   }
 }
 
-void ImageButton::loadBlog()
-{
-  bool ok = false;
-  KABC::Picture pic = mImageLoader->loadBlog( mBlogFeed, &ok );
-  if ( ok ) {
-    mPicture = pic;
-    updateGUI();
-    emit changed();
-  }
-}
-
 void ImageButton::clear()
 {
   mPicture = KABC::Picture();
@@ -317,7 +248,7 @@
                                   QWidget *parent, const char *name )
   : QWidget( parent, name ), mReadOnly( false )
 {
-  mImageLoader = new ImageLoader();
+  mImageLoader = new ImageLoader( this );
 
   QVBoxLayout *topLayout = new QVBoxLayout( this, KDialog::marginHint(),
                                             KDialog::spacingHint() );
@@ -346,11 +277,6 @@
   mImageButton->setReadOnly( mReadOnly );
 }
 
-void ImageBaseWidget::setBlogFeed( const QString &feed )
-{
-  mImageButton->setBlogFeed( feed );
-}
-
 void ImageBaseWidget::setImage( const KABC::Picture &photo )
 {
   mImageButton->setPicture( photo );
@@ -381,7 +307,6 @@
 void ImageWidget::loadContact( KABC::Addressee *addr )
 {
   mPhotoWidget->setImage( addr->photo() );
-  mPhotoWidget->setBlogFeed( addr->custom( "KADDRESSBOOK", "BlogFeed" ) );
   mLogoWidget->setImage( addr->logo() );
 }
 
Index: kaddressbook/Makefile.am
===================================================================
--- kaddressbook/Makefile.am	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kaddressbook/Makefile.am	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -12,7 +12,6 @@
           -I$(top_builddir)/kaddressbook/common \
           -I$(top_srcdir) \
           -I$(top_buildir)/kaddressbook/editors \
-          -I$(top_srcdir)/akregator/src \
           $(all_includes)
 
 bin_PROGRAMS = kaddressbook
@@ -49,7 +48,6 @@
                             -lkabc_file $(LIB_KABC) $(LIB_KHTML) \
                             $(top_builddir)/kaddressbook/common/libkabcommon.la \
                             $(top_builddir)/kaddressbook/editors/libkabim.la \
-                            ../akregator/src/librss/librsslocal.la \
                             -lkdeprint
 libkaddressbook_la_COMPILE_FIRST = $(top_srcdir)/libkdepim/categoryselectdialog.h \
                                    $(top_srcdir)/libkdepim/categoryeditdialog.h \
@@ -84,7 +82,9 @@
 KDE_ICON = kaddressbook
 
 messages: rc.cpp
-	$(EXTRACTRC) */*.ui */*.kcfg >> rc.cpp
+	$(EXTRACTRC) --context="Instant messaging" editors/im*.ui >> rc.cpp
+	$(EXTRACTRC) printing/*.ui >> rc.cpp
+	$(EXTRACTRC) */*.kcfg >> rc.cpp
 	$(XGETTEXT) *.h *.cpp common/*.cpp editors/*.cpp features/*.cpp printing/*.cpp views/*.cpp xxport/*.cpp interfaces/*.h -o $(podir)/kaddressbook.pot
 
 srcdoc:
Index: kaddressbook/features/distributionlist.desktop
===================================================================
--- kaddressbook/features/distributionlist.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kaddressbook/features/distributionlist.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -4,7 +4,7 @@
 Name=KAB Distribution List Plugin
 Name[af]=KAB verspreiding lys inprop module
 Name[ar]=ملحق قائمة توزيع KAB
-Name[be]=Дапаўненьне KAB "Сьпіс распаўсюджваньня"
+Name[be]=Дапаўненне KAB "Сьпіс распаўсюджвання"
 Name[br]=Lugent roll ingaladur evit KAB
 Name[bs]=KAB dodatak za distribucione liste
 Name[ca]=Endollable de la llista de distribució KAB
@@ -30,6 +30,7 @@
 Name[ms]=Plugin Senarai Agihan KAB 
 Name[nb]=KAB programtillegg for distribusjonslister
 Name[nds]=Verdeellist-Moduul för KAdressbook
+Name[ne]=KAB वितरण सूची प्लगइन
 Name[nl]=KAB Distributielijst-plugin
 Name[nn]=Programtillegg for KAB distribusjonsliste
 Name[pl]=Wtyczka KAB do obsługi list wysyłkowych
@@ -50,7 +51,7 @@
 Comment=Plugin for managing distribution lists
 Comment[af]=Inprop module vir die bestuur van verspreiding lyste
 Comment[ar]=ملحق لإدارة قوائم التوزيع
-Comment[be]=Дапаўненьне для кіраваньня сьпісамі распаўсюджваньня
+Comment[be]=Дапаўненне для кіравання сьпісамі распаўсюджвання
 Comment[bg]=Приставка за управление на списъци
 Comment[br]=Lugent melestradur ar rolloù ingaladur
 Comment[bs]=Dodatak za upravljanje distribucionim listama
@@ -78,6 +79,7 @@
 Comment[ms]=Plug masuk untuk pengurusan senarai edaran
 Comment[nb]=Programtillegg for å håndtere distribusjonslister
 Comment[nds]=Moduul för't Plegen vun Verdeellisten
+Comment[ne]=व्यवस्थापन वितरण सूचीका लागि प्लगइन
 Comment[nl]=Plugin voor het beheren van distributielijsten
 Comment[nn]=Programtillegg for handtering av distibusjonsliste
 Comment[pl]=Wtyczka do zarządzania listami wysyłkowymi
Index: kaddressbook/features/resourceselection.desktop
===================================================================
--- kaddressbook/features/resourceselection.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kaddressbook/features/resourceselection.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -3,7 +3,7 @@
 X-KDE-Library=libkaddrbk_resourceselection
 Name=Address Book Management Plugin
 Name[af]=Adres boek bestuur inprop module
-Name[be]=Дапаўненьне "Кіраваньне адраснамі кнігамі"
+Name[be]=Дапаўненне "Кіраванне адраснамі кнігамі"
 Name[br]=Lugent melestradur ar c'harnedoù chomlec'hioù
 Name[bs]=Dodatak za rukovanje adresarom
 Name[ca]=Endollable de gestió de llibretes d'adreces
@@ -26,9 +26,11 @@
 Name[ja]=アドレス帳管理プラグイン
 Name[km]=កម្មវិធី​ជំនួយ​ការ​គ្រប់គ្រង​សៀវភៅ​អាសយដ្ឋាន
 Name[lt]=Adresų knygelės tvarkymo priedas
+Name[mk]=Приклучок за менаџирање адресари
 Name[ms]=Plugin Pengurusan Buku Alamat 
 Name[nb]=Programtillegg for adressebok behandling
 Name[nds]=Adressbookpleeg-Moduul
+Name[ne]=ठेगाना पुस्तिका व्यवस्थापन प्लगइन
 Name[nl]=Plugin voor adresboekbeheer
 Name[nn]=Programtillegg for adressebokhandtering
 Name[pl]=Wtyczka zarządzania Książką adresową
@@ -48,7 +50,7 @@
 Name[zh_TW]=管理通訊錄外掛程式
 Comment=Plugin for managing address books
 Comment[af]=Inprop module om adres boeke te bestuur
-Comment[be]=Дапаўненьне для кіраваньня адраснамі кнігамі
+Comment[be]=Дапаўненне для кіравання адраснамі кнігамі
 Comment[bg]=Приставка за управление на адресника
 Comment[br]=Lugent melestradur ar c'harnedoù chomlec'hioù
 Comment[bs]=Dodatak za upravljanje adresarima
@@ -71,9 +73,11 @@
 Comment[ja]=アドレス帳管理用プラグイン
 Comment[km]=កម្មវិធី​ជំនួយ​ដើម្បី​គ្រប់គ្រង​សៀវភៅ​អាសយដ្ឋាន
 Comment[lt]=Priedas adresų knygelių tvarkymui
+Comment[mk]=Приклучок за менаџирање адресари
 Comment[ms]=Plugin untuk pengurusan buku alamat
 Comment[nb]=Programtillegg for å håndtere adressebøker
 Comment[nds]=Moduul för't Plegen vun Adressböker
+Comment[ne]=ठगाना पुस्तिका व्यवस्थापनका लागि प्लगइन
 Comment[nl]=Plugin voor het beheren van adresboeken
 Comment[nn]=Programtillegg for handtering av adressebøker
 Comment[pl]=Wtyczka do zarządzania książkami adresowymi
Index: Makefile.am.in
===================================================================
--- Makefile.am.in	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ Makefile.am.in	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -10,7 +10,8 @@
 # Libraries and their upwards dependencies
 COMPILE_AFTER_libemailfunctions = libkcal libkpimidentities kmail korganizer
 COMPILE_AFTER_libkholidays = korganizer kontact
-COMPILE_AFTER_libkcal = kalarm kitchensync konsolekalendar korganizer ksync libkpimexchange kpilot libkdepim karm knotes kresources kfile-plugins
+#COMPILE_AFTER_libkcal = kalarm kitchensync konsolekalendar korganizer ksync libkpimexchange kpilot libkdepim karm knotes kresources kfile-plugins
+COMPILE_AFTER_libkcal = kalarm konsolekalendar korganizer ksync libkpimexchange kpilot libkdepim karm knotes kresources kfile-plugins
 COMPILE_AFTER_mimelib = korn kmail
 COMPILE_AFTER_libkdenetwork = kmail knode
 COMPILE_AFTER_libksieve = kmail
@@ -33,7 +34,7 @@
 COMPILE_BEFORE_kresources = libkpimexchange knotes kaddressbook kode
 COMPILE_BEFORE_wizards = libkdepim kresources korganizer kaddressbook kmail
 COMPILE_BEFORE_korn = libkdenetwork
-COMPILE_BEFORE_kitchensync = libkdepim
+#COMPILE_BEFORE_kitchensync = libkdepim
 COMPILE_BEFORE_akregator = libkdepim
 COMPILE_BEFORE_knotes = libkdepim
 COMPILE_BEFORE_konsolekalendar = libkdepim
Index: libkholidays/holidays/holiday_za
===================================================================
--- libkholidays/holidays/holiday_za	(.../tags/KDE/3.5.6/kdepim)	(wersja 0)
+++ libkholidays/holidays/holiday_za	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -0,0 +1,17 @@
+:
+: South African holiday file. Copy to ~/.holiday
+:
+: Author: Anton Keyter
+:
+red "New Year's Day" on january 1 shift to monday if sunday
+red "Human Rights Day" on march 21 shift to monday if sunday
+red "Good Friday" on easter minus 2 day
+red "Family Day" on easter plus 1 day
+red "Freedom Day" on april 27 shift to monday if sunday
+red "Workers Day" on may 1 shift to monday if sunday
+red "Youth Day" on june 16 shift to monday if sunday
+red "National Women's Day" on august 9 shift to monday if sunday
+red "Heritage Day" on september 24 shift to monday if sunday
+red "Day of Reconsiliation" on december 16 shift to monday if sunday
+red "Christmas Day" on december 25 shift to monday if sunday
+red "Day of Goodwill" on december 26 shift to monday if sunday
Index: libkholidays/holidays/holiday_ja
===================================================================
--- libkholidays/holidays/holiday_ja	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ libkholidays/holidays/holiday_ja	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -26,26 +26,26 @@
 :small "The Emperor's Birthday" weekend on 12/23
 
 : National Holidays. (Japanese and English messages)
-small "ö(New Year's Day)" weekend on 1/1
-small "ͤ(Coming of Age)" weekend on second monday in january
-small "ǰ(National Foundation Day)" weekend on 2/11
-small "ʬ(Vernal Equinox Day)" weekend on 3/20/2005
-small "ʬ(Vernal Equinox Day)" weekend on 3/21/2006
-small "ʬ(Vernal Equinox Day)" weekend on 3/21/2007
-small "ʬ(Vernal Equinox Day)" weekend on 3/20/2008
-small "ʬ(Vernal Equinox Day)" weekend on 3/20/2009
-small "ʬ(Vernal Equinox Day)" weekend on 3/21/2010
-small "ߤɤ(Greenery Day)" weekend on 4/29
-small "ˡǰ(Constitution Day)" weekend on 5/3
-small "(Holiday)" weekend on 5/4
-small "ɤ(Children's Day)" weekend on 5/5
-small "(Oceans' Day)" weekend on third monday in july
-small "Ϸ(Respect for Senior Citizens Day)" weekend on third monday in september
-small "ʬ(Autumnal Equinox Day)" weekend on 9/23
-small "ΰ(Sports Day)" weekend on second monday in october
-small "ʸ(Culture Day)" weekend on 11/3
-small "ϫդ(Labor Thanksgiving Day)" weekend on 11/23
-small "ŷ(The Emperor's Birthday)" weekend on 12/23
+small "元旦(New Year's Day)" weekend on 1/1
+small "成人の日(Coming of Age)" weekend on second monday in january
+small "建国記念日(National Foundation Day)" weekend on 2/11
+small "春分の日(Vernal Equinox Day)" weekend on 3/20/2005
+small "春分の日(Vernal Equinox Day)" weekend on 3/21/2006
+small "春分の日(Vernal Equinox Day)" weekend on 3/21/2007
+small "春分の日(Vernal Equinox Day)" weekend on 3/20/2008
+small "春分の日(Vernal Equinox Day)" weekend on 3/20/2009
+small "春分の日(Vernal Equinox Day)" weekend on 3/21/2010
+small "みどりの日(Greenery Day)" weekend on 4/29
+small "憲法記念日(Constitution Day)" weekend on 5/3
+small "休日(Holiday)" weekend on 5/4
+small "こどもの日(Children's Day)" weekend on 5/5
+small "海の日(Oceans' Day)" weekend on third monday in july
+small "敬老の日(Respect for Senior Citizens Day)" weekend on third monday in september
+small "秋分の日(Autumnal Equinox Day)" weekend on 9/23
+small "体育の日(Sports Day)" weekend on second monday in october
+small "文化の日(Culture Day)" weekend on 11/3
+small "勤労感謝の日(Labor Thanksgiving Day)" weekend on 11/23
+small "天皇誕生日(The Emperor's Birthday)" weekend on 12/23
 
 : If a "National Holiday" is on Sunday,the following day
 : shall be a substitute holiday.
@@ -58,14 +58,14 @@
 :small "Substitute holiday" weekend on 11/24/2008
 :small "Substitute holiday" weekend on 3/22/2010
 
-small "ص(Substitute holiday)" weekend on 3/21/2005
-small "ص(Substitute holiday)" weekend on 1/2/2006
-small "ص(Substitute holiday)" weekend on 2/12/2007
-small "ص(Substitute holiday)" weekend on 4/30/2007
-small "ص(Substitute holiday)" weekend on 9/24/2007
-small "ص(Substitute holiday)" weekend on 12/24/2007
-small "ص(Substitute holiday)" weekend on 11/24/2008
-small "ص(Substitute holiday)" weekend on 3/22/2010
+small "振替休日(Substitute holiday)" weekend on 3/21/2005
+small "振替休日(Substitute holiday)" weekend on 1/2/2006
+small "振替休日(Substitute holiday)" weekend on 2/12/2007
+small "振替休日(Substitute holiday)" weekend on 4/30/2007
+small "振替休日(Substitute holiday)" weekend on 9/24/2007
+small "振替休日(Substitute holiday)" weekend on 12/24/2007
+small "振替休日(Substitute holiday)" weekend on 11/24/2008
+small "振替休日(Substitute holiday)" weekend on 3/22/2010
 
 
 : Japanese Events , not National Holidays.
Index: libkholidays/holidays/Makefile.am
===================================================================
--- libkholidays/holidays/Makefile.am	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ libkholidays/holidays/Makefile.am	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -12,7 +12,7 @@
                 holiday_no holiday_nz holiday_pl holiday_pt holiday_py \
                 holiday_quebec \
                 holiday_ro holiday_ru \
-		holiday_se holiday_si holiday_th holiday_us \
+                holiday_se holiday_si holiday_th holiday_us \
                 holiday_uy holiday_ie \
-                holiday_Suedtirol
+                holiday_Suedtirol holiday_za
 
Index: plugins/kmail/bodypartformatter/text_calendar.desktop
===================================================================
--- plugins/kmail/bodypartformatter/text_calendar.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ plugins/kmail/bodypartformatter/text_calendar.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -16,6 +16,7 @@
 Name[km]=Octetstream កម្មវិធី
 Name[ms]=Aliran Oktet  Aplikasi
 Name[nb]=Program Octetstrøm
+Name[ne]=अक्टेस्ट्रिम अनुप्रयोग
 Name[nl]=Applicatie octetstroom
 Name[nn]=Oktettstraum frå program
 Name[pl]=Dane binarne
@@ -54,6 +55,7 @@
 Comment[ms]=Plugin pemformat bahagian isi untuk teks/kalendar
 Comment[nb]=En formaterer for meldingstekster i tekst/kalender
 Comment[nds]=En Hööftdeel-Formateermoduul för text/calendar
+Comment[ne]=पाठ/क्यालेन्डरका लागि मुख्यभाग ढाँचाबद्ध गर्ने प्लगइन
 Comment[nl]=Een opmaakplugin voor text/calendar
 Comment[nn]=Eit programtillegg for meldingstekstformatering i tekst/kalender
 Comment[pl]=Wtyczka formatująca dla typu text/calendar
Index: plugins/kmail/bodypartformatter/text_vcard.desktop
===================================================================
--- plugins/kmail/bodypartformatter/text_vcard.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ plugins/kmail/bodypartformatter/text_vcard.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -16,6 +16,7 @@
 Name[km]=Octetstream កម្មវិធី
 Name[ms]=Aliran Oktet  Aplikasi
 Name[nb]=Program Octetstrøm
+Name[ne]=अक्टेस्ट्रिम अनुप्रयोग
 Name[nl]=Applicatie octetstroom
 Name[nn]=Oktettstraum frå program
 Name[pl]=Dane binarne
@@ -55,6 +56,7 @@
 Comment[ms]=Plugin pemformat bahagian isi untuk teks/vcard
 Comment[nb]=Et programtilllegg for text/vcard for brødtekst-formatering
 Comment[nds]=En Hööftdeel-Formateermoduul för text/vcard
+Comment[ne]=पाठ/भिकार्ड का लागि मुख्यभाग ढाँचाबद्ध गर्ने प्लगइन
 Comment[nl]=Een opmaakplugin voor text/vcard
 Comment[nn]=Eit programtillegg for brødtekstformatering i tekst/vCard
 Comment[pl]=Wtyczka formatująca dla typu text/vcard
Index: plugins/kmail/bodypartformatter/text_xdiff.desktop
===================================================================
--- plugins/kmail/bodypartformatter/text_xdiff.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ plugins/kmail/bodypartformatter/text_xdiff.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -16,6 +16,7 @@
 Name[km]=Octetstream កម្មវិធី
 Name[ms]=Aliran Oktet  Aplikasi
 Name[nb]=Program Octetstrøm
+Name[ne]=अक्टेस्ट्रिम अनुप्रयोग
 Name[nl]=Applicatie octetstroom
 Name[nn]=Oktettstraum frå program
 Name[pl]=Dane binarne
@@ -53,6 +54,7 @@
 Comment[ms]=Plugin pemformat bahagian untuk teks/x-diff
 Comment[nb]=Et programtilllegg for text/x-diff for brødtekst-formatering
 Comment[nds]=En Hööftdeel-Formateermoduul för text/x-diff
+Comment[ne]=पाठ/x-diff का लागि मुख्यभाग ढाँचाबद्ध गर्ने प्लगइन
 Comment[nl]=Een opmaakplugin voor text/x-diff
 Comment[nn]=Eit programtilllegg for text/x-diff for brødtekstformatering
 Comment[pl]=Wtyczka formatująca dla text/x-diff
Index: libkdepim/categoryeditdialog.h
===================================================================
--- libkdepim/categoryeditdialog.h	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ libkdepim/categoryeditdialog.h	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -26,7 +26,6 @@
 #include <kdepimmacros.h>
 
 class KPimPrefs;
-class CategoryEditDialog_base;
 
 namespace KPIM {
 
@@ -46,20 +45,20 @@
     void slotOk();
     void slotApply();
     void slotCancel();
-    void slotTextChanged(const QString &text);
     void add();
+    void edit();
     void remove();
-    void editItem( QListViewItem *item );
 
   signals:
     void categoryConfigChanged();
-    
+
   protected:
     void fillList();
 
   private:
     KPimPrefs *mPrefs;
-    CategoryEditDialog_base *mWidget;
+    class Private;
+    Private* const d;
 };
 
 }
Index: libkdepim/categoryeditdialog.cpp
===================================================================
--- libkdepim/categoryeditdialog.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ libkdepim/categoryeditdialog.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -23,37 +23,58 @@
 #include <qstringlist.h>
 #include <qlineedit.h>
 #include <qlistview.h>
+#include <qlayout.h>
 #include <qheader.h>
 #include <qpushbutton.h>
 #include <klocale.h>
 
 #include "kpimprefs.h"
 
-#include "categoryeditdialog_base.h"
 #include "categoryeditdialog.h"
 
 using namespace KPIM;
 
+class CategoryEditDialog::Private
+{
+  public:
+    QListView *mView;
+    QPushButton *mAddButton;
+    QPushButton *mEditButton;
+    QPushButton *mDeleteButton;
+};
+
 CategoryEditDialog::CategoryEditDialog( KPimPrefs *prefs, QWidget* parent,
                                         const char* name, bool modal )
   : KDialogBase::KDialogBase( parent, name, modal,
     i18n("Edit Categories"), Ok|Apply|Cancel|Help, Ok, true ),
-    mPrefs( prefs )  
+    mPrefs( prefs ), d( new Private )
 {
-  mWidget = new CategoryEditDialog_base( this, "CategoryEdit" );
-  mWidget->mCategories->header()->hide();
-  setMainWidget( mWidget );
+  QWidget *widget = new QWidget( this );
+  setMainWidget( widget );
 
+  QGridLayout *layout = new QGridLayout( widget, 4, 2, marginHint(), spacingHint() );
+
+  d->mView = new QListView( widget );
+  d->mView->addColumn( "" );
+  d->mView->header()->hide();
+
+  layout->addMultiCellWidget( d->mView, 0, 3, 0, 0 );
+
+  d->mAddButton = new QPushButton( i18n( "Add" ), widget );
+  layout->addWidget( d->mAddButton, 0, 1 );
+
+  d->mEditButton = new QPushButton( i18n( "Edit" ), widget );
+  layout->addWidget( d->mEditButton, 1, 1 );
+
+  d->mDeleteButton = new QPushButton( i18n( "Remove" ), widget );
+  layout->addWidget( d->mDeleteButton, 2, 1 );
+
+
   fillList();
-  
-  connect( mWidget->mCategories, SIGNAL( selectionChanged( QListViewItem * )),
-           SLOT( editItem( QListViewItem * )) );
-  connect( mWidget->mEdit, SIGNAL( textChanged( const QString & )),
-           this, SLOT( slotTextChanged( const QString & )));
-  connect( mWidget->mButtonAdd, SIGNAL( clicked() ),
-           this, SLOT( add() ) );
-  connect( mWidget->mButtonRemove, SIGNAL( clicked() ),
-           this, SLOT( remove() ) );
+
+  connect( d->mAddButton, SIGNAL( clicked() ), this, SLOT( add() ) );
+  connect( d->mEditButton, SIGNAL( clicked() ), this, SLOT( edit() ) );
+  connect( d->mDeleteButton, SIGNAL( clicked() ), this, SLOT( remove() ) );
 }
 
 /*
@@ -61,50 +82,61 @@
  */
 CategoryEditDialog::~CategoryEditDialog()
 {
-    // no need to delete child widgets, Qt does it all for us
+  delete d;
 }
 
 void CategoryEditDialog::fillList()
 {
-  mWidget->mCategories->clear();
+  d->mView->clear();
   QStringList::Iterator it;
   bool categoriesExist=false;
   for ( it = mPrefs->mCustomCategories.begin();
         it != mPrefs->mCustomCategories.end(); ++it ) {
-    new QListViewItem( mWidget->mCategories, *it );
+
+    QListViewItem *item = new QListViewItem( d->mView, *it );
+    item->setRenameEnabled( 0, true );
+
     categoriesExist = true;
   }
-  mWidget->mButtonRemove->setEnabled( categoriesExist );
-  mWidget->mCategories->setSelected( mWidget->mCategories->firstChild(), true );
-  mWidget->mEdit->setText( mWidget->mCategories->currentItem()->text( 0 ) );
+
+  d->mEditButton->setEnabled( categoriesExist );
+  d->mDeleteButton->setEnabled( categoriesExist );
+  d->mView->setSelected( d->mView->firstChild(), true );
 }
 
-void CategoryEditDialog::slotTextChanged(const QString &text)
+void CategoryEditDialog::add()
 {
-  QListViewItem *item = mWidget->mCategories->currentItem();
-  if ( item ) {
-    item->setText( 0, text );
-  }
+  if ( d->mView->firstChild() )
+    d->mView->setCurrentItem( d->mView->firstChild() );
+
+  QListViewItem *item = new QListViewItem( d->mView, i18n( "New category" ) );
+  item->setRenameEnabled( 0, true );
+
+  d->mView->setSelected( item, true );
+  d->mView->ensureItemVisible( item );
+  item->startRename( 0 );
+
+  bool itemCount = d->mView->childCount() > 0;
+  d->mEditButton->setEnabled( itemCount );
+  d->mDeleteButton->setEnabled( itemCount );
 }
 
-void CategoryEditDialog::add()
+void CategoryEditDialog::edit()
 {
-  if ( !mWidget->mEdit->text().isEmpty() ) {
-    QListViewItem *newItem = new QListViewItem( mWidget->mCategories, "" );
-    // FIXME: Use a better string once string changes are allowed again
-//                                                i18n("New category") );
-    mWidget->mCategories->setSelected( newItem, true );
-    mWidget->mCategories->ensureItemVisible( newItem );
-    mWidget->mButtonRemove->setEnabled( mWidget->mCategories->childCount()>0 );
-  }
+  if ( d->mView->currentItem() )
+    d->mView->currentItem()->startRename( 0 );
 }
 
 void CategoryEditDialog::remove()
 {
-  if (mWidget->mCategories->currentItem()) {
-    delete mWidget->mCategories->currentItem();
-    mWidget->mCategories->setSelected( mWidget->mCategories->currentItem(), true );
-    mWidget->mButtonRemove->setEnabled( mWidget->mCategories->childCount()>0 );
+  if ( d->mView->currentItem() ) {
+    delete d->mView->currentItem();
+
+    d->mView->setSelected( d->mView->currentItem(), true );
+
+    bool itemCount = d->mView->childCount() > 0;
+    d->mEditButton->setEnabled( itemCount );
+    d->mDeleteButton->setEnabled( itemCount );
   }
 }
 
@@ -118,9 +150,10 @@
 {
   mPrefs->mCustomCategories.clear();
 
-  QListViewItem *item = mWidget->mCategories->firstChild();
+  QListViewItem *item = d->mView->firstChild();
   while ( item ) {
-    mPrefs->mCustomCategories.append( item->text(0) );
+    if ( !item->text( 0 ).isEmpty() )
+      mPrefs->mCustomCategories.append( item->text( 0 ) );
     item = item->nextSibling();
   }
   mPrefs->writeConfig();
@@ -134,14 +167,8 @@
   KDialogBase::slotCancel();
 }
 
-void CategoryEditDialog::editItem( QListViewItem *item )
+void CategoryEditDialog::reload()
 {
-  mWidget->mEdit->setText( item->text(0) );
-  mWidget->mButtonRemove->setEnabled( true );
-}
-
-void CategoryEditDialog::reload() 
-{
   fillList();
 }
 
Index: libkdepim/addresseeview.cpp
===================================================================
--- libkdepim/addresseeview.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ libkdepim/addresseeview.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -268,11 +268,11 @@
     if ( !addr.url().url().isEmpty() ) {
       QString url;
       if ( linkMask & URLLinks ) {
-        url = (addr.url().url().startsWith( "http://" ) || addr.url().url().startsWith( "https://" ) ? addr.url().url() :
-          "http://" + addr.url().url());
+        url = (addr.url().url().startsWith( "http://" ) || addr.url().url().startsWith( "https://" ) ? addr.url().prettyURL() :
+          "http://" + addr.url().prettyURL());
         url = KStringHandler::tagURLs( url );
       } else {
-        url = addr.url().url();
+        url = addr.url().prettyURL();
       }
       dynamicPart += rowFmtStr.arg( i18n("Homepage") ).arg( url );
     }
@@ -364,7 +364,6 @@
       titleMap.insert( "ManagersName", i18n( "Manager's Name" ) );
       titleMap.insert( "SpousesName", i18n( "Partner's Name" ) );
       titleMap.insert( "Office", i18n( "Office" ) );
-      titleMap.insert( "IMAddress", i18n( "IM Address" ) );
       titleMap.insert( "Anniversary", i18n( "Anniversary" ) );
     }
 
@@ -382,8 +381,8 @@
           QString key = customEntry.left( pos );
           const QString value = customEntry.mid( pos + 1 );
 
-          // blog is handled separated
-          if ( key == "BlogFeed" )
+          // blog and im address is handled separated
+          if ( key == "BlogFeed" || key == "IMAddress" )
             continue;
 
           const QMap<QString, QString>::ConstIterator keyIt = titleMap.find( key );
@@ -400,30 +399,38 @@
   QString role( addr.role() );
   QString organization( addr.organization() );
 
-  if ( proxy && (fieldMask & IMFields) ) {
-    if ( proxy->isPresent( addr.uid() ) && proxy->presenceNumeric( addr.uid() ) > 0 ) {
-      // set image source to either a QMimeSourceFactory key or a data:/ URL
-      QString imgSrc;
-      if ( internalLoading ) {
-        imgSrc = QString::fromLatin1( "im_status_%1_image").arg( addr.uid() );
-        QMimeSourceFactory::defaultFactory()->setPixmap( imgSrc, proxy->presenceIcon( addr.uid() ) );
-      } else
-        imgSrc = pixmapAsDataUrl( proxy->presenceIcon( addr.uid() ) );
+  if ( fieldMask & IMFields ) {
 
-      // make the status a link, if required
-      QString imStatus;
-      if ( linkMask & IMLinks )
-        imStatus = QString::fromLatin1( "<a href=\"im:\"><img src=\"%1\"> (%2)</a>" );
-      else
-        imStatus = QString::fromLatin1( "<img src=\"%1\"> (%2)" );
+    const QString imAddress = addr.custom( "KADDRESSBOOK", "X-IMAddress" );
+    if ( !imAddress.isEmpty() ) {
+      customData += rowFmtStr.arg( i18n( "IM Address" ) ).arg( imAddress ) ;
+    }
 
-      // append our status to the rest of the dynamic part of the addressee
-      dynamicPart += rowFmtStr
-              .arg( i18n( "Presence" ) )
-              .arg( imStatus
-                        .arg( imgSrc )
-                        .arg( proxy->presenceString( addr.uid() ) )
-                  );
+    if ( proxy ) {
+      if ( proxy->isPresent( addr.uid() ) && proxy->presenceNumeric( addr.uid() ) > 0 ) {
+        // set image source to either a QMimeSourceFactory key or a data:/ URL
+        QString imgSrc;
+        if ( internalLoading ) {
+          imgSrc = QString::fromLatin1( "im_status_%1_image").arg( addr.uid() );
+          QMimeSourceFactory::defaultFactory()->setPixmap( imgSrc, proxy->presenceIcon( addr.uid() ) );
+        } else
+          imgSrc = pixmapAsDataUrl( proxy->presenceIcon( addr.uid() ) );
+
+        // make the status a link, if required
+        QString imStatus;
+        if ( linkMask & IMLinks )
+          imStatus = QString::fromLatin1( "<a href=\"im:\"><img src=\"%1\"> (%2)</a>" );
+        else
+          imStatus = QString::fromLatin1( "<img src=\"%1\"> (%2)" );
+
+        // append our status to the rest of the dynamic part of the addressee
+        dynamicPart += rowFmtStr
+                .arg( i18n( "Presence" ) )
+                .arg( imStatus
+                          .arg( imgSrc )
+                          .arg( proxy->presenceString( addr.uid() ) )
+                    );
+      }
     }
   }
 
Index: libkdepim/kaddrbook.cpp
===================================================================
--- libkdepim/kaddrbook.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ libkdepim/kaddrbook.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -113,6 +113,37 @@
     a.setNameFromString( name );
     a.insertEmail( email, true );
 
+    {
+      KConfig config( "kaddressbookrc" );
+      config.setGroup( "General" );
+      int type = config.readNumEntry( "FormattedNameType", 1 );
+
+      QString name;
+      switch ( type ) {
+        case 1:
+          name = a.givenName() + " " + a.familyName();
+          break;
+        case 2:
+          name = a.assembledName();
+          break;
+        case 3:
+          name = a.familyName() + ", " + a.givenName();
+          break;
+        case 4:
+          name = a.familyName() + " " + a.givenName();
+          break;
+        case 5:
+          name = a.organization();
+          break;
+        default:
+          name = "";
+          break;
+      }
+      name.simplifyWhiteSpace();
+
+      a.setFormattedName( name );
+    }
+
     if ( !KAddrBookExternal::addAddressee( a ) ) {
       KMessageBox::error( parent, i18n("Cannot save to addressbook.") );
     } else {
Index: libkdepim/komposer/plugins/default/defaulteditor.desktop
===================================================================
--- libkdepim/komposer/plugins/default/defaulteditor.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ libkdepim/komposer/plugins/default/defaulteditor.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -41,6 +41,7 @@
 Name[lt]=Komposer redaktorius
 Name[ms]=Editor Komposer
 Name[nb]=Komposer-redigering
+Name[ne]=कम्पोजर सम्पादक
 Name[nl]=Komposer-editor
 Name[nn]=Komposer-redigering
 Name[pl]=Edytor Komposer
@@ -83,6 +84,7 @@
 Comment[ms]=Pengedit piawai Komposer
 Comment[nb]=Komposer standard-redigerer
 Comment[nds]=Komposer-Standardeditor
+Comment[ne]=कम्पोजरको पूर्वनिर्धारित सम्पादक
 Comment[nl]=Komposer standaardeditor
 Comment[nn]=Komposer standard-redigeringsprogram
 Comment[pl]=Domyślny edytor Komposera
Index: libkdepim/komposer/core/komposerplugin.desktop
===================================================================
--- libkdepim/komposer/core/komposerplugin.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ libkdepim/komposer/core/komposerplugin.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -32,6 +32,7 @@
 Name[ms]=Plugin Komposer
 Name[nb]=Komposer-programtillegg
 Name[nds]=Komposer-Moduul
+Name[ne]=कम्पोजर प्लगइन
 Name[nn]=Komposer-programtillegg
 Name[pl]=Wtyczka Komposer
 Name[pt]='Plugin' do Kompositor
Index: libkdepim/komposer/core/komposerconfig.desktop
===================================================================
--- libkdepim/komposer/core/komposerconfig.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ libkdepim/komposer/core/komposerconfig.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -15,6 +15,7 @@
 Name[da]=Brevskriver
 Name[hi]=कम्पोज़र
 Name[ms]=Penggubah
+Name[ne]=कम्पोजर
 Name[pt]=Kompositor
 Name[ta]=கம்போசர்
 Comment=KDE Komposer
@@ -29,6 +30,7 @@
 Comment[hi]=केडीई कम्पोज़र
 Comment[ms]=Penggubah KDE
 Comment[nds]=Nettbreef-Editor vun KDE
+Comment[ne]=केडीई कम्पोजर
 Comment[nn]=KDE, tekstredigerar for e-post
 Comment[pl]=Komposer dla KDE
 Comment[pt]=Kompositor do KDE
@@ -44,6 +46,7 @@
 Keywords[de]=Komposer
 Keywords[hi]=कम्पोज़र
 Keywords[nds]=Komposer
+Keywords[ne]=कम्पोजर
 Keywords[nl]=komposer,opstellen
 Keywords[nn]=komposer,tekstredigerar,epost
 Keywords[ru]=komposer,ноты
Index: libkdepim/komposer/core/komposereditor.desktop
===================================================================
--- libkdepim/komposer/core/komposereditor.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ libkdepim/komposer/core/komposereditor.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -30,6 +30,7 @@
 Comment[ms]=Editor Komposer
 Comment[nb]=Komposer redigerer
 Comment[nds]=Komposer-Editor
+Comment[ne]=कम्पोजर सम्पादक
 Comment[nl]=Komposer-editor
 Comment[nn]=Komposer redigerar
 Comment[pl]=Edytor Komposer
Index: libkdepim/addresseelineedit.cpp
===================================================================
--- libkdepim/addresseelineedit.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ libkdepim/addresseelineedit.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -127,7 +127,7 @@
       ldapSearchDeleter.setObject( s_LDAPSearch, new KPIM::LdapSearch );
       ldapTextDeleter.setObject( s_LDAPText, new QString );
 
-      /* Add completion sources for all ldap server, 0 to n. Added first so 
+      /* Add completion sources for all ldap server, 0 to n. Added first so
        * that they map to the ldapclient::clientNumber() */
       QValueList< LdapClient* > clients =  s_LDAPSearch->clients();
       for ( QValueList<LdapClient*>::iterator it = clients.begin(); it != clients.end(); ++it ) {
@@ -251,15 +251,14 @@
 
   QString contents = text();
   int start_sel = 0;
-  int end_sel = 0;
   int pos = cursorPosition( );
-  if ( getSelection( &start_sel, &end_sel ) ) {
+
+  if ( hasSelectedText() ) {
     // Cut away the selection.
-    if ( pos > end_sel )
-      pos -= (end_sel - start_sel);
-    else if ( pos > start_sel )
-      pos = start_sel;
-    contents = contents.left( start_sel ) + contents.right( end_sel + 1 );
+    start_sel = selectionStart();
+    pos = start_sel;
+    contents = contents.left( start_sel ) +
+               contents.mid( start_sel + selectedText().length() );
   }
 
   int eot = contents.length();
@@ -422,7 +421,7 @@
       setCompletionMode( completionMode() );
 
       if ( !m_searchString.isEmpty() ) {
-        
+
         //if only our \" is left, remove it since user has not typed it either
         if ( m_searchExtended && m_searchString == "\"" ){
           m_searchExtended = false;
@@ -437,7 +436,7 @@
           if ( match != m_searchString ) {
             QString adds = m_previousAddresses + match;
             setCompletedText( adds );
-          } 
+          }
         } else {
           if ( !m_searchString.startsWith( "\"" ) ) {
             //try with quoted text, if user has not type one already
@@ -562,7 +561,7 @@
 #ifdef KDEPIM_NEW_DISTRLISTS
   if ( KPIM::DistributionList::isDistributionList( addr ) ) {
     //kdDebug(5300) << "AddresseeLineEdit::addContact() distribution list \"" << addr.formattedName() << "\" weight=" << weight << endl;
- 
+
     //for CompletionAuto
     addCompletionItem( addr.formattedName(), weight, source );
 
@@ -577,7 +576,7 @@
   const QStringList emails = addr.emails();
   QStringList::ConstIterator it;
   for ( it = emails.begin(); it != emails.end(); ++it ) {
-    //TODO: highlight preferredEmail 
+    //TODO: highlight preferredEmail
     const QString email( (*it) );
     const QString givenName = addr.givenName();
     const QString familyName= addr.familyName();
@@ -607,7 +606,7 @@
       const QString byDomain   =  "\"" + domain + " " + familyName + " " + givenName + "\" <" + email + ">";
       addCompletionItem( byDomain, weight, source );
     }
-    
+
     //for CompletionShell, CompletionPopup
     QStringList keyWords;
     const QString realName  = addr.realName();
@@ -746,12 +745,12 @@
     KABC::Addressee addr;
     addr.setNameFromString( (*it).name );
     addr.setEmails( (*it).email );
-    
+
     addContact( addr, (*it).completionWeight, (*it ).clientNumber  );
   }
 
   if ( (hasFocus() || completionBox()->hasFocus() )
-       && completionMode() != KGlobalSettings::CompletionNone 
+       && completionMode() != KGlobalSettings::CompletionNone
        && completionMode() != KGlobalSettings::CompletionShell) {
     setText( m_previousAddresses + m_searchString );
     doCompletion( m_lastSearchMode );
@@ -771,7 +770,7 @@
           if ( !m_searchString.isEmpty() )
             completionBox->setCancelledText( m_searchString );
           completionBox->popup();
-          // we have to install the event filter after popup(), since that 
+          // we have to install the event filter after popup(), since that
           // calls show(), and that's where KCompletionBox installs its filter.
           // We want to be first, though, so do it now.
           if ( s_completion->order() == KCompletion::Weighted )
@@ -906,8 +905,8 @@
       }
       // avoid selection of headers on button press, or move or release while
       // a button is pressed
-      if ( e->type() == QEvent::MouseButtonPress 
-          || me->state() & LeftButton || me->state() & MidButton 
+      if ( e->type() == QEvent::MouseButtonPress
+          || me->state() & LeftButton || me->state() & MidButton
           || me->state() & RightButton ) {
         if ( !item->text().startsWith( s_completionItemIndentString ) ) {
           return true; // eat the event, we don't want anything to happen
@@ -992,7 +991,7 @@
   QStringList items = fullSearch ?
     s_completion->allMatches( m_searchString )
     : s_completion->substringCompletion( m_searchString );
- 
+
   int lastSourceIndex = -1;
   unsigned int i = 0;
   QMap<int, QStringList> sections;
Index: libkcal/localdir.desktop
===================================================================
--- libkcal/localdir.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ libkcal/localdir.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -27,9 +27,11 @@
 Name[ja]=ローカルディレクトリのカレンダー
 Name[km]=ប្រតិទិន​នៅ​ក្នុង​ថត​មូលដ្ឋាន
 Name[lt]=Kalendorius vietiniame aplanke
+Name[mk]=Календар во локална папка
 Name[ms]=Kalendar dalam Direktori Setempat
 Name[nb]=Kalender i lokal katalog
 Name[nds]=Kalenner in lokaal Orner
+Name[ne]=स्थानीय डाइरेक्टरीको क्यालेन्डर
 Name[nl]=Agenda in lokale map
 Name[nn]=Kalender i lokal mappe
 Name[pl]=Kalendarz w katalogu lokalnym
Index: libkcal/local.desktop
===================================================================
--- libkcal/local.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ libkcal/local.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -27,9 +27,11 @@
 Name[ja]=ローカルファイルのカレンダー
 Name[km]=ប្រតិទិន​នៅ​ក្នុង​ឯកសារ​មូលដ្ឋាន
 Name[lt]=Kalendorius vietinėje byloje
+Name[mk]=Календар во локална датотека
 Name[ms]=Kalendar dalam Fail Setempat
 Name[nb]=Kalender i lokal fil
 Name[nds]=Kalenner as lokaal Datei
+Name[ne]=स्थानीय फाइलको क्यालेन्डर
 Name[nl]=Agenda in lokaal bestand
 Name[nn]=Kalender i lokal fil
 Name[pl]=Kalendarz w pliku lokalnym
Index: libkcal/kcal_manager.desktop
===================================================================
--- libkcal/kcal_manager.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ libkcal/kcal_manager.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -3,6 +3,7 @@
 Encoding=UTF-8
 Name=Calendar
 Name[af]=Kalender
+Name[ar]=التقويم
 Name[be]=Каляндар
 Name[br]=Deiziadur
 Name[bs]=Kalendar
@@ -28,9 +29,11 @@
 Name[ja]=カレンダー
 Name[km]=ប្រតិទិន
 Name[lt]=Kalendorius
+Name[mk]=Календар
 Name[ms]=Kalendar
 Name[nb]=Kalender
 Name[nds]=Kalenner
+Name[ne]=क्यालेन्डर
 Name[nl]=Agenda
 Name[nn]=Kalender
 Name[pa]=ਕੈਲੰਡਰ
Index: libkcal/libical/TEST
===================================================================
--- libkcal/libical/TEST	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ libkcal/libical/TEST	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -1,4 +1,4 @@
 
 Parser Tests
 ------------
-Use iCAL keywords as first words of unquoted strings
\ brakuje znaku końca linii na końcu pliku 
+Use iCAL keywords as first words of unquoted strings
Index: libkcal/libical/src/libical/icalcomponent.h
===================================================================
--- libkcal/libical/src/libical/icalcomponent.h	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ libkcal/libical/src/libical/icalcomponent.h	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -4,7 +4,8 @@
  CREATOR: eric 20 March 1999
 
 
- (C) COPYRIGHT 2000, Eric Busboom, http://www.softwarestudio.org
+ (C) COPYRIGHT 2000, Eric Busboom <eric@softwarestudio.org>
+     http://www.softwarestudio.org
 
  This program is free software; you can redistribute it and/or modify
  it under the terms of either: 
Index: libkcal/libical/src/libical/icalrestriction.c.in
===================================================================
--- libkcal/libical/src/libical/icalrestriction.c.in	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ libkcal/libical/src/libical/icalrestriction.c.in	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -30,7 +30,7 @@
 
 struct icalrestriction_property_record;
 
-typedef char* (*restriction_func)(struct icalrestriction_property_record* rec,icalcomponent* comp,icalproperty* prop);
+typedef const char* (*restriction_func)(struct icalrestriction_property_record* rec,icalcomponent* comp,icalproperty* prop);
 
 
 typedef struct icalrestriction_property_record {
@@ -100,7 +100,8 @@
 int
 icalrestriction_compare(icalrestriction_kind restr, int count){
 
-    if ( restr < ICAL_RESTRICTION_NONE || restr > ICAL_RESTRICTION_UNKNOWN
+    /* restr is an unsigned int, ICAL_RESTRICTION_NONE == 0, so the check will always return false */
+    if ( /*restr < ICAL_RESTRICTION_NONE ||*/ restr > ICAL_RESTRICTION_UNKNOWN
 	 || count < 0){
 	return -1;
     }
@@ -115,14 +116,16 @@
 
 /* Special case routines */
 
-char* icalrestriction_may_be_draft_final_canceled(
+const char* icalrestriction_may_be_draft_final_canceled(
     icalrestriction_property_record *rec,
-    icalcomponent* comp, 
+    icalcomponent* comp,
     icalproperty* prop)
 {
-
     icalproperty_status stat = icalproperty_get_status(prop);
 
+    (void)rec;
+    (void)comp;
+
     if( !( stat == ICAL_STATUS_DRAFT ||
 	   stat == ICAL_STATUS_FINAL ||
 	   stat == ICAL_STATUS_CANCELLED )){
@@ -134,13 +137,16 @@
     return 0;    
 }
 
-char* icalrestriction_may_be_comp_need_process(
+const char* icalrestriction_may_be_comp_need_process(
     icalrestriction_property_record *rec,
-    icalcomponent* comp, 
+    icalcomponent* comp,
     icalproperty* prop)
 {
     icalproperty_status stat = icalproperty_get_status(prop);
 
+    (void)rec;
+    (void)comp;
+
     if( !( stat == ICAL_STATUS_COMPLETED ||
 	   stat == ICAL_STATUS_NEEDSACTION ||
 	   stat == ICAL_STATUS_INPROCESS )){
@@ -151,11 +157,15 @@
 
     return 0;    
 }
-char* icalrestriction_may_be_tent_conf(icalrestriction_property_record *rec,
-				       icalcomponent* comp, 
-				       icalproperty* prop){
+const char* icalrestriction_may_be_tent_conf(icalrestriction_property_record *rec,
+				       icalcomponent* comp,
+				       icalproperty* prop)
+{
     icalproperty_status stat = icalproperty_get_status(prop);
 
+    (void)rec;
+    (void)comp;
+
     if( !( stat == ICAL_STATUS_TENTATIVE ||
 	   stat == ICAL_STATUS_CONFIRMED )){
 
@@ -165,13 +175,16 @@
 
     return 0;    
 }
-char* icalrestriction_may_be_tent_conf_cancel(
+const char* icalrestriction_may_be_tent_conf_cancel(
     icalrestriction_property_record *rec,
-    icalcomponent* comp, 
+    icalcomponent* comp,
     icalproperty* prop)
 {
     icalproperty_status stat = icalproperty_get_status(prop);
 
+    (void)rec;
+    (void)comp;
+
     if( !( stat == ICAL_STATUS_TENTATIVE ||
 	   stat == ICAL_STATUS_CONFIRMED ||
 	   stat == ICAL_STATUS_CANCELLED )){
@@ -183,14 +196,17 @@
     return 0;    
 }
 
-char* icalrestriction_must_be_cancel_if_present(
+const char* icalrestriction_must_be_cancel_if_present(
     icalrestriction_property_record *rec,
-    icalcomponent* comp, 
+    icalcomponent* comp,
     icalproperty* prop)
 {
     /* This routine will not be called if prop == 0 */
     icalproperty_status stat = icalproperty_get_status(prop);
 
+    (void)rec;
+    (void)comp;
+
     if( stat != ICAL_STATUS_CANCELLED)
     {
 	return "Failed iTIP restrictions for STATUS property. Value must be CANCELLED";
@@ -201,27 +217,36 @@
     return 0;    
 }
 
-char* icalrestriction_must_be_canceled_no_attendee(
+const char* icalrestriction_must_be_canceled_no_attendee(
     icalrestriction_property_record *rec,
-    icalcomponent* comp, 
+    icalcomponent* comp,
     icalproperty* prop)
 {
+    (void)rec;
+    (void)comp;
+    (void)prop;
 
     /* Hack. see rfc2446, 3.2.5 CANCEL for porperty STATUS. I don't
        understand the note */
 
     return 0;    
 }
-char* icalrestriction_must_be_recurring(icalrestriction_property_record *rec,
-					icalcomponent* comp, 
+const char* icalrestriction_must_be_recurring(icalrestriction_property_record *rec,
+					icalcomponent* comp,
 					icalproperty* prop){
     /* Hack */
+    (void)rec;
+    (void)comp;
+    (void)prop;
     return 0;    
 }
-char* icalrestriction_must_have_duration(icalrestriction_property_record *rec,
-					 icalcomponent* comp, 
+const char* icalrestriction_must_have_duration(icalrestriction_property_record *rec,
+					 icalcomponent* comp,
 					 icalproperty* prop){
-    
+
+    (void)rec;
+    (void)prop;
+
     if( !icalcomponent_get_first_property(comp,ICAL_DURATION_PROPERTY)){
 
 	return "Failed iTIP restrictions for DURATION property. This component must have a DURATION property";
@@ -230,9 +255,11 @@
 
     return 0;    
 }
-char* icalrestriction_must_have_repeat(icalrestriction_property_record *rec,
-				       icalcomponent* comp, 
+const char* icalrestriction_must_have_repeat(icalrestriction_property_record *rec,
+				       icalcomponent* comp,
 				       icalproperty* prop){
+    (void)rec;
+    (void)prop;
     if( !icalcomponent_get_first_property(comp,ICAL_REPEAT_PROPERTY)){
 
 	return "Failed iTIP restrictions for REPEAT property. This component must have a REPEAT property";
@@ -241,17 +268,22 @@
 
     return 0;    
 }
-char* icalrestriction_must_if_tz_ref(icalrestriction_property_record *rec,
-				     icalcomponent* comp, 
+const char* icalrestriction_must_if_tz_ref(icalrestriction_property_record *rec,
+				     icalcomponent* comp,
 				     icalproperty* prop){
 
     /* Hack */
+    (void)rec;
+    (void)comp;
+    (void)prop;
     return 0;    
 }
-char* icalrestriction_no_dtend(icalrestriction_property_record *rec,
-			       icalcomponent* comp, 
+const char* icalrestriction_no_dtend(icalrestriction_property_record *rec,
+			       icalcomponent* comp,
 			       icalproperty* prop){
 
+    (void)rec;
+    (void)prop;
     if( !icalcomponent_get_first_property(comp,ICAL_DTEND_PROPERTY)){
 
 	return "Failed iTIP restrictions for DTEND property. The component must not have both DURATION and DTEND";
@@ -260,20 +292,26 @@
 
     return 0;    
 }
-char* icalrestriction_no_duration(icalrestriction_property_record *rec,
-				icalcomponent* comp, 
+const char* icalrestriction_no_duration(icalrestriction_property_record *rec,
+				icalcomponent* comp,
 				  icalproperty* prop){
+    (void)rec;
+    (void)comp;
+    (void)prop;
 
     /* _no_dtend takes care of this one */
     return 0;    
-}                                     
-char* icalrestriction_must_be_email(
+}
+const char* icalrestriction_must_be_email(
     icalrestriction_property_record *rec,
-    icalcomponent* comp, 
+    icalcomponent* comp,
     icalproperty* prop)
 {
     icalproperty_status stat = icalproperty_get_action(prop);
 
+    (void)rec;
+    (void)comp;
+
     if( !( stat == ICAL_ACTION_EMAIL)){
 
 	return "Failed iTIP restrictions for ACTION property. Value must be EMAIL.";
@@ -290,7 +328,7 @@
     icalcomponent_kind comp_kind;
     icalrestriction_kind restr;
     icalrestriction_property_record *prop_record;
-    char* funcr = 0;
+    const char* funcr = 0;
     icalproperty *prop;
 
     int count;
Index: libkcal/libical/src/libical/icalarray.c
===================================================================
--- libkcal/libical/src/libical/icalarray.c	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ libkcal/libical/src/libical/icalarray.c	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -80,7 +78,7 @@
 
 void
 icalarray_append		(icalarray	*array,
-				 void		*element)
+				 const void		*element)
 {
     if (array->num_elements >= array->space_allocated)
 	icalarray_expand (array, 1);
@@ -96,7 +94,7 @@
 				 int		 position)
 {
     assert (position >= 0);
-    assert (position < array->num_elements);
+    assert ((unsigned int)position < array->num_elements);
 
     return (char *)(array->data) + (position * array->element_size);
 }
@@ -110,7 +108,7 @@
     int elements_to_move;
 
     assert (position >= 0);
-    assert (position < array->num_elements);
+    assert ((unsigned int)position < array->num_elements);
 
     dest = (char *)array->data + (position * array->element_size);
     elements_to_move = array->num_elements - position - 1;
@@ -141,7 +139,7 @@
 
     new_space_allocated = array->space_allocated + array->increment_size;
 
-    if (space_needed > array->increment_size) 
+    if ((unsigned int)space_needed > array->increment_size)
 	new_space_allocated += space_needed;
 
 	/*
@@ -151,7 +149,7 @@
 	new_data = malloc(new_space_allocated * array->element_size);
 
     if (new_data) {
-    	memcpy(new_data,array->data,array->element_size*array->space_allocated);
+	memcpy(new_data,array->data,array->element_size*array->space_allocated);
 	free(array->data);
 	array->data = new_data;
 	array->space_allocated = new_space_allocated;
Index: libkcal/libical/src/libical/icalparameter.c
===================================================================
--- libkcal/libical/src/libical/icalparameter.c	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ libkcal/libical/src/libical/icalparameter.c	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -23,7 +22,7 @@
   The original code is icalderivedparameters.{c,h}
 
   Contributions from:
-     Graham Davison (g.m.davison@computer.org)
+     Graham Davison <g.m.davison@computer.org>
 
  ======================================================================*/
 /*#line 29 "icalparameter.c.in"*/
Index: libkcal/libical/src/libical/icalarray.h
===================================================================
--- libkcal/libical/src/libical/icalarray.h	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ libkcal/libical/src/libical/icalarray.h	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -49,7 +47,7 @@
 void	   icalarray_free		(icalarray	*array);
 
 void	   icalarray_append		(icalarray	*array,
-					 void		*element);
+					 const void		*element);
 void	   icalarray_remove_element_at	(icalarray	*array,
 					 int		 position);
 
Index: libkcal/libical/src/libical/icalparameter.h
===================================================================
--- libkcal/libical/src/libical/icalparameter.h	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ libkcal/libical/src/libical/icalparameter.h	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -53,7 +52,7 @@
 
 int icalparameter_isa_parameter(void* param);
 
-/* Acess the name of an X parameer */
+/* Access the name of an X parameer */
 void icalparameter_set_xname (icalparameter* param, const char* v);
 const char* icalparameter_get_xname(icalparameter* param);
 void icalparameter_set_xvalue (icalparameter* param, const char* v);
Index: libkcal/libical/src/libical/icalmime.c
===================================================================
--- libkcal/libical/src/libical/icalmime.c	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ libkcal/libical/src/libical/icalmime.c	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -73,9 +72,11 @@
 }
 void icalmime_text_add_line(void *part, 
 			    struct sspm_header *header, 
-			    char* line, size_t size)
+			    const char* line, size_t size)
 {
     struct text_part* impl = (struct text_part*) part;
+    (void)header;
+    (void)size;
 
     icalmemory_append_string(&(impl->buf),&(impl->buf_pos),
 			     &(impl->buf_size),line);
@@ -118,21 +119,23 @@
     return 0;
 }
 void icalmime_attachment_add_line(void *part, struct sspm_header *header, 
-				  char* line, size_t size)
+				  const char* line, size_t size)
 {
-    part = part;
-    header = header;
-    line = line;
-    size = size;
+    (void)part;
+    (void)header;
+    (void)line;
+    (void)size;
 }
 
 void* icalmime_attachment_end_part(void* part)
 {
+    (void)part;
     return 0;
 }
 
 void icalmime_attachment_free_part(void *part)
 {
+    (void)part;
 }
 
 
@@ -191,8 +194,8 @@
 
 #define TMPSZ 1024
 	char mimetype[TMPSZ];			       
-	char* major = sspm_major_type_string(parts[i].header.major);
-	char* minor = sspm_minor_type_string(parts[i].header.minor);
+	const char* major = sspm_major_type_string(parts[i].header.major);
+	const char* minor = sspm_minor_type_string(parts[i].header.minor);
 
 	if(parts[i].header.minor == SSPM_UNKNOWN_MINOR_TYPE ){
 	    assert(parts[i].header.minor_text !=0);
Index: libkcal/libical/src/libical/icalerror.c
===================================================================
--- libkcal/libical/src/libical/icalerror.c	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ libkcal/libical/src/libical/icalerror.c	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -159,7 +158,7 @@
 
 icalerrorenum icalerror_error_from_string(const char* str){
  
-    icalerrorenum e;
+    icalerrorenum e = ICAL_NO_ERROR;
     int i = 0;
 
     for( i = 0; string_map[i].error != ICAL_NO_ERROR; i++){
Index: libkcal/libical/src/libical/icalparser.c
===================================================================
--- libkcal/libical/src/libical/icalparser.c	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ libkcal/libical/src/libical/icalparser.c	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -49,6 +48,7 @@
 #include <string.h> /* For strncpy & size_t */
 #include <stdio.h> /* For FILE and fgets and snprintf */
 #include <stdlib.h> /* for free */
+#include <ctype.h>
 
 #include "icalmemory.h"
 #include "icalparser.h"
@@ -277,7 +277,7 @@
 
 
 /**
-   A property may have multiple values, if the values are seperated by
+   A property may have multiple values, if the values are separated by
    commas in the content line. This routine will look for the next
    comma after line and will set the next place to start searching in
    end. */
@@ -296,7 +296,7 @@
 	next = icalparser_get_next_char(',',p,1);
 
 	/* Unforunately, RFC2445 says that for the RECUR value, COMMA
-	   can both seperate digits in a list, and it can seperate
+	   can both separate digits in a list, and it can separate
 	   multiple recurrence specifications. This is not a friendly
 	   part of the spec. This weirdness tries to
 	   distinguish the two uses. it is probably a HACK*/
@@ -306,7 +306,7 @@
 		 (*end+length) > next+5 &&
 		 strncmp(next,"FREQ",4) == 0
 		) {
-		/* The COMMA was followed by 'FREQ', is it a real seperator*/
+		/* The COMMA was followed by 'FREQ', is it a real separator*/
 		/* Fall through */
 	    } else if (next != 0){
 		/* Not real, get the next COMMA */
@@ -326,7 +326,7 @@
 	}
 
 	/* If the comma is preceded by a '\', then it is a literal and
-	   not a value seperator*/  
+	   not a value separator*/  
       
 	if ( (next!=0 && *(next-1) == '\\') ||
 	     (next!=0 && *(next-3) == '\\')
@@ -513,8 +513,8 @@
 
 }
 
-static void insert_error(icalcomponent* comp, char* text, 
-		  char* message, icalparameter_xlicerrortype type)
+static void insert_error(icalcomponent* comp, const char* text,
+		  const char* message, icalparameter_xlicerrortype type)
 {
     char temp[1024];
     
@@ -795,7 +795,7 @@
     while(1) {
 
 	if (*(end-1) == ':'){
-	    /* if the last seperator was a ":" and the value is a
+	    /* if the last separator was a ":" and the value is a
 	       URL, icalparser_get_next_parameter will find the
 	       ':' in the URL, so better break now. */
 	    break;
Index: libkcal/libical/src/libical/icalenums.h
===================================================================
--- libkcal/libical/src/libical/icalenums.h	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ libkcal/libical/src/libical/icalenums.h	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -5,7 +5,8 @@
 
  
 
- (C) COPYRIGHT 2000, Eric Busboom, http://www.softwarestudio.org
+ (C) COPYRIGHT 2000, Eric Busboom <eric@softwarestudio.org>
+     http://www.softwarestudio.org
 
  This program is free software; you can redistribute it and/or modify
  it under the terms of either: 
@@ -21,7 +22,7 @@
   The original code is icalenums.h
 
   Contributions from:
-     Graham Davison (g.m.davison@computer.org)
+     Graham Davison <g.m.davison@computer.org>
 
 ======================================================================*/
 
Index: libkcal/libical/src/libical/icalvalue.c
===================================================================
--- libkcal/libical/src/libical/icalvalue.c	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ libkcal/libical/src/libical/icalvalue.c	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -23,7 +23,7 @@
   The original code is icalvalue.c
 
   Contributions from:
-     Graham Davison (g.m.davison@computer.org)
+     Graham Davison <g.m.davison@computer.org>
 
 
 ======================================================================*/
@@ -52,7 +52,7 @@
 #define strcasecmp    stricmp
 #endif
 
-#if _MAC_OS_
+#ifdef _MAC_OS_
 #include "icalmemory_strdup.h"
 #endif
 
Index: libkcal/libical/src/libical/pvl.h
===================================================================
--- libkcal/libical/src/libical/pvl.h	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ libkcal/libical/src/libical/pvl.h	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -3,7 +3,8 @@
  CREATOR: eric November, 1995
 
 
- (C) COPYRIGHT 2000, Eric Busboom, http://www.softwarestudio.org
+ (C) COPYRIGHT 2000, Eric Busboom <eric@softwarestudio.org>
+     http://www.softwarestudio.org
 ======================================================================*/
 
 
@@ -31,7 +32,7 @@
 
 /**
  * This global is incremented for each call to pvl_new_element(); it gives each
- * list a unique identifer 
+ * list a unique identifer
  */
 
 extern int  pvl_elem_count;
@@ -85,7 +86,7 @@
  * Pass each element in the list to a function
  * a is list elem, b is other data
  */
-typedef void (*pvl_applyf)(void* a, void* b); 
+typedef void (*pvl_applyf)(void* a, void* b);
 void pvl_apply(pvl_list l,pvl_applyf f, void *v);
 
 
Index: libkcal/libical/src/libical/icalrecur.c
===================================================================
--- libkcal/libical/src/libical/icalrecur.c	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ libkcal/libical/src/libical/icalrecur.c	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -260,6 +259,7 @@
     int i=0;
     int sign = 1;
     int v;
+    (void)parser;
 
     n = vals;
 
@@ -447,7 +447,7 @@
 
 }
 
-static struct { char* str;size_t offset; int limit;  } recurmap[] = 
+static struct { const char* str;size_t offset; int limit;  } recurmap[] = 
 {
     {";BYSECOND=",offsetof(struct icalrecurrencetype,by_second),60},
     {";BYMINUTE=",offsetof(struct icalrecurrencetype,by_minute),60},
@@ -697,7 +697,7 @@
     return passes;
 } 
 
-static int count_byrules(icalrecur_iterator* impl)
+/*static int count_byrules(icalrecur_iterator* impl)
 {
     int count = 0;
     enum byrule itr;
@@ -709,7 +709,7 @@
     }
 
     return count;
-}
+}*/
 
 
 static void setup_defaults(icalrecur_iterator* impl, 
@@ -1329,7 +1329,7 @@
 }
 
 
-static int next_yearday(icalrecur_iterator* impl)
+/*static int next_yearday(icalrecur_iterator* impl)
 {
 
   int has_by_yearday = (impl->by_ptrs[BY_YEAR_DAY][0]!=ICAL_RECURRENCE_ARRAY_MAX);
@@ -1360,7 +1360,7 @@
 
   return end_of_data;
 
-}
+}*/
 
 
 /* Returns the day of the month for the current month of t that is the
Index: libkcal/libical/src/libical/icalproperty.c
===================================================================
--- libkcal/libical/src/libical/icalproperty.c	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ libkcal/libical/src/libical/icalproperty.c	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -341,7 +341,7 @@
 	/* If this isn't the first line, we need to output a newline and space
 	   first. */
 	if (!first_line) {
-	    icalmemory_append_string (&buf, &buf_ptr, &buf_size, "\n ");
+	    icalmemory_append_string (&buf, &buf_ptr, &buf_size, "\r\n ");
 	}
 	first_line = 0;
 
@@ -433,7 +433,7 @@
     char *out_buf;
     const char* kind_string = 0;
 
-    char newline[] = "\n";
+    char newline[] = "\r\n";
 
     
     icalerror_check_arg_rz( (prop!=0),"prop");
@@ -694,7 +694,7 @@
  *  @param prop   A valid icalproperty.
  *  @param name   The name of the parameter to remove
  *
- *  This function removes paramters with the given name.  The name
+ *  This function removes parameters with the given name.  The name
  *  corresponds to either a built-in name (TZID, etc.) or the name of
  *  an extended parameter (X-FOO)
  *
Index: libkcal/libical/src/libical/icalduration.c
===================================================================
--- libkcal/libical/src/libical/icalduration.c	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ libkcal/libical/src/libical/icalduration.c	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -186,7 +185,7 @@
 #define TMP_BUF_SIZE 1024
 static
 void append_duration_segment(char** buf, char** buf_ptr, size_t* buf_size, 
-			     char* sep, unsigned int value) {
+			     const char* sep, unsigned int value) {
 
     char temp[TMP_BUF_SIZE];
 
Index: libkcal/libical/src/libical/icalrecur.h
===================================================================
--- libkcal/libical/src/libical/icalrecur.h	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ libkcal/libical/src/libical/icalrecur.h	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -4,7 +4,8 @@
  CREATOR: eric 20 March 2000
 
 
- (C) COPYRIGHT 2000, Eric Busboom, http://www.softwarestudio.org
+ (C) COPYRIGHT 2000, Eric Busboom <eric@softwarestudio.org>
+     http://www.softwarestudio.org
 
  This program is free software; you can redistribute it and/or modify
  it under the terms of either: 
Index: libkcal/libical/src/libical/icalderivedparameter.c.in
===================================================================
--- libkcal/libical/src/libical/icalderivedparameter.c.in	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ libkcal/libical/src/libical/icalderivedparameter.c.in	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -51,7 +49,7 @@
    representation of the parameter's name */
 struct icalparameter_kind_map {
     icalparameter_kind kind;
-    char *name;
+    const char *name;
     
 };
 
@@ -171,7 +169,7 @@
 
     param = icalparameter_new_impl(kind);
     if (!param)
-        return 0;
+	return 0;
 
     for (i=0; icalparameter_map[i].kind != ICAL_NO_PARAMETER; i++){
         if(kind == icalparameter_map[i].kind) {
Index: libkcal/libical/src/libical/sspm.c
===================================================================
--- libkcal/libical/src/libical/sspm.c	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ libkcal/libical/src/libical/sspm.c	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -30,7 +28,8 @@
 
   The Initial Developer of the Original Code is Eric Busboom
 
- (C) COPYRIGHT 2000, Eric Busboom, http://www.softwarestudio.org
+ (C) COPYRIGHT 2000, Eric Busboom <eric@softwarestudio.org>
+     http://www.softwarestudio.org
  ======================================================================*/
 
 #include <stdio.h>
@@ -80,7 +79,7 @@
 void* sspm_make_multipart_part(struct mime_impl *impl,struct sspm_header *header);
 void sspm_read_header(struct mime_impl *impl,struct sspm_header *header);
 
-char* sspm_strdup(char* str){
+char* sspm_strdup(const char* str){
 
     char* s;
 
@@ -92,10 +91,10 @@
 
 static struct  major_content_type_map 
 {
-	enum sspm_major_type type;
-	char* str;
-	
-} major_content_type_map[]  = 
+    enum sspm_major_type type;
+    const char* str;
+
+} major_content_type_map[]  =
 {
     {SSPM_MULTIPART_MAJOR_TYPE,"multipart" },
     {SSPM_TEXT_MAJOR_TYPE,"text" },
@@ -111,8 +110,8 @@
 
 static struct  minor_content_type_map 
 {
-	enum sspm_minor_type type;
-	char* str;
+    enum sspm_minor_type type;
+    const char* str;
 
 } minor_content_type_map[]  = 
 {
@@ -131,8 +130,8 @@
 
 
 struct encoding_map {
-	enum sspm_encoding encoding;
-	char* str;
+    enum sspm_encoding encoding;
+    const char* str;
 } sspm_encoding_map[] = 
 {
     {SSPM_NO_ENCODING,""},
@@ -146,7 +145,7 @@
 };
 
 
-char* sspm_get_parameter(char* line, char* parameter)
+char* sspm_get_parameter(const char* line, const char* parameter)
 {
     char *p,*s,*q;
     static char name[1024];
@@ -194,7 +193,7 @@
     return name;
 }
 
-char* sspm_property_name(char* line)
+char* sspm_property_name(const char* line)
 {
     static char name[1024];
     char *c = strchr(line,':');
@@ -215,10 +214,11 @@
     char *c,*s, *p;
 
     /* Find the first colon and the next semicolon */
+
     value[0] = 0;
     c = strchr(line,':');
     if (!c)
-        return value;
+      return value;
     s = strchr(c,';');
 
     /* Skip the colon */
@@ -240,7 +240,7 @@
 
 }
 
-static char *mime_headers[] = {
+static const char *mime_headers[] = {
     "Content-Type",
     "Content-Transfer-Encoding",
     "Content-Disposition",
@@ -255,17 +255,23 @@
     return 0;
 }
 void sspm_default_add_line(void *part, struct sspm_header *header, 
-			   char* line, size_t size)
+			   const char* line, size_t size)
 {
+    (void)part;
+    (void)header;
+    (void)line;
+    (void)size;
 }
 
 void* sspm_default_end_part(void* part)
 {
+    (void)part;
     return 0;
 }
 
 void sspm_default_free_part(void *part)
 {
+    (void)part;
 }
 
 
@@ -481,7 +487,7 @@
     return minor_content_type_map[i].type; /* Should return SSPM_UNKNOWN_MINOR_TYPE */
 }
 
-char* sspm_major_type_string(enum sspm_major_type type)
+const char* sspm_major_type_string(enum sspm_major_type type)
 {
     int i;
 
@@ -496,7 +502,7 @@
     return major_content_type_map[i].str; /* Should return SSPM_UNKNOWN_MINOR_TYPE */
 }
 
-char* sspm_minor_type_string(enum sspm_minor_type type)
+const char* sspm_minor_type_string(enum sspm_minor_type type)
 {
     int i;
     for (i=0; minor_content_type_map[i].type !=  SSPM_UNKNOWN_MINOR_TYPE; 
@@ -510,7 +516,7 @@
 }
 
 
-char* sspm_encoding_string(enum sspm_encoding type)
+const char* sspm_encoding_string(enum sspm_encoding type)
 {
     int i;
     for (i=0; sspm_encoding_map[i].encoding !=  SSPM_UNKNOWN_ENCODING; 
@@ -1027,6 +1033,7 @@
     struct sspm_header header;
     void *part;
     int i;
+    (void)first_header;
 
     /* Initialize all of the data */
     memset(&impl,0,sizeof(struct mime_impl));
@@ -1245,7 +1252,7 @@
 	int line_pos;
 };
 
-void sspm_append_string(struct sspm_buffer* buf, char* string);
+void sspm_append_string(struct sspm_buffer* buf, const char* string);
 void sspm_write_part(struct sspm_buffer *buf,struct sspm_part *part, int *part_num);
 
 void sspm_append_hex(struct sspm_buffer* buf, char ch)
@@ -1286,7 +1293,7 @@
     *(buf->pos) = 0;
 }
 /* A copy of icalmemory_append_string */
-void sspm_append_string(struct sspm_buffer* buf, char* string)
+void sspm_append_string(struct sspm_buffer* buf, const char* string)
 {
     char *new_buf;
     char *new_pos;
@@ -1416,12 +1423,12 @@
              
 void sspm_encode_base64(struct sspm_buffer *buf, char* data, size_t size)
 {
-
     char *p;
     char inbuf[3];
     int i = 0;
     int first = 1;
     int lpos = 0;
+    (void)size;
 
     inbuf[0] = inbuf[1] = inbuf[2]  = 0;
 
@@ -1468,8 +1475,8 @@
     
     int i;
     char temp[TMP_BUF_SIZE];			       
-    char* major; 
-    char* minor; 
+    const char* major; 
+    const char* minor; 
     
     /* Content-type */
 
@@ -1555,6 +1562,7 @@
 
 void sspm_write_part(struct sspm_buffer *buf,struct sspm_part *part,int *part_num)
 {
+    (void)part_num;
 
     /* Write header */
     sspm_write_header(buf,&(part->header));
@@ -1578,10 +1586,11 @@
 }
 
 int sspm_write_mime(struct sspm_part *parts,size_t num_parts,
-		    char **output_string, char* header)
+		    char **output_string, const char* header)
 {
     struct sspm_buffer buf;
     int part_num =0;
+    (void)num_parts;
 
     buf.buffer = malloc(4096);
     buf.pos = buf.buffer;
Index: libkcal/libical/src/libical/icaltimezone.c
===================================================================
--- libkcal/libical/src/libical/icaltimezone.c	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ libkcal/libical/src/libical/icaltimezone.c	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -143,7 +141,7 @@
 
 static char* zone_files_directory = NULL;
 
-static void  icaltimezone_reset			(icaltimezone   *zone);
+static void  icaltimezone_reset			(icaltimezone *zone);
 static char* icaltimezone_get_location_from_vtimezone (icalcomponent *component);
 static char* icaltimezone_get_tznames_from_vtimezone (icalcomponent *component);
 static void  icaltimezone_expand_changes	(icaltimezone	*zone,
@@ -154,7 +152,7 @@
 static int   icaltimezone_compare_change_fn	(const void	*elem1,
 						 const void	*elem2);
 
-static int   icaltimezone_find_nearby_change	(icaltimezone	*zone,
+static int   icaltimezone_find_nearby_change	(icaltimezone *zone,
 						 icaltimezonechange *change);
 
 static void  icaltimezone_adjust_change		(icaltimezonechange *tt,
@@ -163,18 +161,18 @@
 						 int		 minutes,
 						 int		 seconds);
 
-static void  icaltimezone_init			(icaltimezone	*zone);
+static void  icaltimezone_init			(icaltimezone *zone);
 
 /** Gets the TZID, LOCATION/X-LIC-LOCATION, and TZNAME properties from the
    VTIMEZONE component and places them in the icaltimezone. It returns 1 on
    success, or 0 if the TZID can't be found. */
-static int   icaltimezone_get_vtimezone_properties (icaltimezone  *zone,
+static int   icaltimezone_get_vtimezone_properties (icaltimezone *zone,
 						    icalcomponent *component);
 
 
-static void  icaltimezone_load_builtin_timezone	(icaltimezone	*zone);
+static void  icaltimezone_load_builtin_timezone	(icaltimezone *zone);
 
-static void  icaltimezone_ensure_coverage	(icaltimezone	*zone,
+static void  icaltimezone_ensure_coverage	(icaltimezone *zone,
 						 int		 end_year);
 
 
@@ -189,7 +187,7 @@
 static void  format_utc_offset			(int		 utc_offset,
 						 char		*buffer);
 
-static char* get_zone_directory(void);
+static const char* get_zone_directory(void);
 
 
 /** Creates a new icaltimezone. */
@@ -217,7 +215,7 @@
 {
     icaltimezone_reset (zone);
     if (free_struct)
-	free (zone);
+	free ((void *)zone);
 }
 
 
@@ -242,7 +240,7 @@
 
 /** Initializes an icaltimezone. */
 static void
-icaltimezone_init			(icaltimezone	*zone)
+icaltimezone_init			(icaltimezone *zone)
 {
     zone->tzid = NULL;
     zone->location = NULL;
@@ -262,7 +260,7 @@
    it expects the zone to be initialized or reset - it doesn't free
    any old values. */
 static int
-icaltimezone_get_vtimezone_properties	(icaltimezone	*zone,
+icaltimezone_get_vtimezone_properties	(icaltimezone *zone,
 					 icalcomponent	*component)
 {
     icalproperty *prop;
@@ -434,7 +432,7 @@
 
 
 static void
-icaltimezone_ensure_coverage		(icaltimezone	*zone,
+icaltimezone_ensure_coverage		(icaltimezone *zone,
 					 int		 end_year)
 {
     /* When we expand timezone changes we always expand at least up to this
@@ -466,7 +464,7 @@
 
 
 static void
-icaltimezone_expand_changes		(icaltimezone	*zone,
+icaltimezone_expand_changes		(icaltimezone *zone,
 					 int		 end_year)
 {
     icalarray *changes;
@@ -690,11 +688,11 @@
 icaltimezone_compare_change_fn		(const void	*elem1,
 					 const void	*elem2)
 {
-    const icaltimezonechange *change1, *change2;
+    icaltimezonechange *change1, *change2;
     int retval;
 
-    change1 = elem1;
-    change2 = elem2;
+    change1 = (icaltimezonechange *)elem1;
+    change2 = (icaltimezonechange *)elem2;
 
     if (change1->year < change2->year)
 	retval = -1;
@@ -736,8 +734,8 @@
 
 void
 icaltimezone_convert_time		(struct icaltimetype *tt,
-					 icaltimezone	*from_zone,
-					 icaltimezone	*to_zone)
+					 icaltimezone *from_zone,
+					 icaltimezone *to_zone)
 {
     int utc_offset, is_daylight;
 
@@ -864,7 +862,7 @@
 	if (change_num < 0)
 	    return 0;
 
-	if (change_num >= zone->changes->num_elements)
+	if ((unsigned int)change_num >= zone->changes->num_elements)
 	    break;
 
 	zone_change = icalarray_element_at (zone->changes, change_num);
@@ -999,7 +997,7 @@
 	if (change_num < 0)
 	    return 0;
 
-	if (change_num >= zone->changes->num_elements)
+	if ((unsigned int)change_num >= zone->changes->num_elements)
 	    break;
 
 	zone_change = icalarray_element_at (zone->changes, change_num);
@@ -1022,7 +1020,7 @@
 /** Returns the index of a timezone change which is close to the time
    given in change. */
 static int
-icaltimezone_find_nearby_change		(icaltimezone		*zone,
+icaltimezone_find_nearby_change		(icaltimezone	*zone,
 					 icaltimezonechange	*change)
 {
     icaltimezonechange *zone_change;
@@ -1123,8 +1121,8 @@
 }
 
 
-char*
-icaltimezone_get_tzid			(icaltimezone	*zone)
+const char*
+icaltimezone_get_tzid			(icaltimezone *zone)
 {
     /* If this is a floating time, without a timezone, return NULL. */
     if (!zone)
@@ -1137,8 +1135,8 @@
 }
 
 
-char*
-icaltimezone_get_location		(icaltimezone	*zone)
+const char*
+icaltimezone_get_location		(icaltimezone *zone)
 {
     /* If this is a floating time, without a timezone, return NULL. */
     if (!zone)
@@ -1150,8 +1148,8 @@
 }
 
 
-char*
-icaltimezone_get_tznames		(icaltimezone	*zone)
+const char*
+icaltimezone_get_tznames		(icaltimezone *zone)
 {
     /* If this is a floating time, without a timezone, return NULL. */
     if (!zone)
@@ -1166,7 +1164,7 @@
 
 /** Returns the latitude of a builtin timezone. */
 double
-icaltimezone_get_latitude		(icaltimezone	*zone)
+icaltimezone_get_latitude		(icaltimezone *zone)
 {
     /* If this is a floating time, without a timezone, return 0. */
     if (!zone)
@@ -1180,7 +1178,7 @@
 
 /** Returns the longitude of a builtin timezone. */
 double
-icaltimezone_get_longitude		(icaltimezone	*zone)
+icaltimezone_get_longitude		(icaltimezone *zone)
 {
     /* If this is a floating time, without a timezone, return 0. */
     if (!zone)
@@ -1194,7 +1192,7 @@
 
 /** Returns the VTIMEZONE component of a timezone. */
 icalcomponent*
-icaltimezone_get_component		(icaltimezone	*zone)
+icaltimezone_get_component		(icaltimezone *zone)
 {
     /* If this is a floating time, without a timezone, return NULL. */
     if (!zone)
@@ -1211,7 +1209,7 @@
    tzid, location & tzname fields. It returns 1 on success or 0 on
    failure, i.e.  no TZID was found. */
 int
-icaltimezone_set_component		(icaltimezone	*zone,
+icaltimezone_set_component		(icaltimezone *zone,
 					 icalcomponent	*comp)
 {
     icaltimezone_reset (zone);
@@ -1246,7 +1244,7 @@
 
 	if ( timezones )
 	{
-		for (i = 0; i < timezones->num_elements; i++) {
+	    for (i = 0; (unsigned int)i < timezones->num_elements; i++) {
 		zone = icalarray_element_at (timezones, i);
 		icaltimezone_free (zone, 0);
 		}
@@ -1288,7 +1286,7 @@
 {
     icaltimezone *zone;
     int lower, upper, middle, cmp;
-    char *zone_location;
+    const char *zone_location;
 
     if (!location || !location[0])
 	return NULL;
@@ -1385,7 +1383,7 @@
 icaltimezone_init_builtin_timezones	(void)
 {
     /* Initialize the special UTC timezone. */
-    utc_timezone.tzid = "UTC";
+    utc_timezone.tzid = (char *)"UTC";
 
     icaltimezone_parse_zone_tab ();
 }
@@ -1483,7 +1481,7 @@
 
 /** Loads the builtin VTIMEZONE data for the given timezone. */
 static void
-icaltimezone_load_builtin_timezone	(icaltimezone	*zone)
+icaltimezone_load_builtin_timezone	(icaltimezone *zone)
 {
     char *filename;
     unsigned int filename_len;
@@ -1550,7 +1548,7 @@
 					 size_t		 size,
 					 void		*data)
 {
-    return fgets (s, size, (FILE*) data);
+    return fgets (s, (int)size, (FILE*) data);
 }
 
 
@@ -1576,11 +1574,11 @@
  * to add to UTC to get local time.
  */
 int
-icaltimezone_dump_changes		(icaltimezone	*zone,
+icaltimezone_dump_changes		(icaltimezone *zone,
 					 int		 max_year,
 					 FILE		*fp)
 {
-    static char *months[] = { "Jan", "Feb", "Mar", "Apr", "May", "Jun",
+    static const char *months[] = { "Jan", "Feb", "Mar", "Apr", "May", "Jun",
 			      "Jul", "Aug", "Sep", "Oct", "Nov", "Dec" };
     icaltimezonechange *zone_change;
     int change_num;
@@ -1594,7 +1592,7 @@
 #endif
 
     change_num = 0;
-    for (change_num = 0; change_num < zone->changes->num_elements; change_num++) {
+    for (change_num = 0; (unsigned int)change_num < zone->changes->num_elements; change_num++) {
 	zone_change = icalarray_element_at (zone->changes, change_num);
 
 	if (zone_change->year > max_year)
@@ -1622,7 +1620,7 @@
 format_utc_offset			(int		 utc_offset,
 					 char		*buffer)
 {
-  char *sign = "+";
+  const char *sign = "+";
   int hours, minutes, seconds;
 
   if (utc_offset < 0) {
@@ -1649,7 +1647,7 @@
     snprintf (buffer, sizeof(buffer), "%s%02i%02i%02i", sign, hours, minutes, seconds);
 }
 
-static char* get_zone_directory(void)
+static const char* get_zone_directory(void)
 {
 	return zone_files_directory == NULL ? ZONEINFO_DIRECTORY : zone_files_directory;
 }
Index: libkcal/libical/src/libical/icaltime.c
===================================================================
--- libkcal/libical/src/libical/icaltime.c	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ libkcal/libical/src/libical/icaltime.c	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -55,7 +54,7 @@
  *  Function to convert a struct tm time specification
  *  to an ANSI time_t using the specified time zone.
  *  This is different from the standard mktime() function
- *  in that we dont want the automatic adjustments for
+ *  in that we don't want the automatic adjustments for
  *  local daylight savings time applied to the result.
  *  This function expects well-formed input.
  */
@@ -177,7 +176,7 @@
  */
 struct icaltimetype 
 icaltime_from_timet_with_zone(const time_t tm, const int is_date,
-	const icaltimezone *zone)
+	icaltimezone *zone)
 {
     struct icaltimetype tt = icaltime_null_time();
     struct tm t;
@@ -222,7 +221,7 @@
  * 
  * Returns the current time in the given timezone, as an icaltimetype.
  */
-struct icaltimetype icaltime_current_time_with_zone(const icaltimezone *zone)
+struct icaltimetype icaltime_current_time_with_zone(icaltimezone *zone)
 {
     return icaltime_from_timet_with_zone (time (NULL), 0, zone);
 }
@@ -274,7 +273,7 @@
  *	time is simply returned as time_t in its native timezone.
  */
 time_t icaltime_as_timet_with_zone(const struct icaltimetype _tt,
-	const icaltimezone *zone)
+	icaltimezone *zone)
 {
     struct icaltimetype tt = _tt;
     struct tm stm;
@@ -317,7 +316,7 @@
     if(tt.is_date){
 	snprintf(buf, size,"%04d%02d%02d",tt.year,tt.month,tt.day);
     } else {
-	char* fmt;
+	const char* fmt;
 	if(tt.is_utc){
 	    fmt = "%04d%02d%02dT%02d%02d%02dZ";
 	} else {
@@ -866,13 +865,13 @@
 	return ret;
 }
 
-const icaltimezone *
+icaltimezone *
 icaltime_get_timezone(const struct icaltimetype t) {
 
 	return t.zone;
 }
 
-char *
+const char *
 icaltime_get_tzid(const struct icaltimetype t) {
 
 	if (t.zone != NULL) {
@@ -889,7 +888,7 @@
  *	then you should use icaltime_convert_to_timezone instead.
  */
 struct icaltimetype
-icaltime_set_timezone(struct icaltimetype *t, const icaltimezone *zone) {
+icaltime_set_timezone(struct icaltimetype *t, icaltimezone *zone) {
 
 	/* If it's a date do nothing */
 	if (t->is_date) {
Index: libkcal/libical/src/libical/sspm.h
===================================================================
--- libkcal/libical/src/libical/sspm.h	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ libkcal/libical/src/libical/sspm.h	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -110,14 +111,14 @@
 	enum sspm_minor_type minor;
 	void* (*new_part)();
 	void (*add_line)(void *part, struct sspm_header *header, 
-			 char* line, size_t size);
+			 const char* line, size_t size);
 	void* (*end_part)(void* part);
 	void (*free_part)(void *part);
 };
 
-char* sspm_major_type_string(enum sspm_major_type type);
-char* sspm_minor_type_string(enum sspm_minor_type type);
-char* sspm_encoding_string(enum sspm_encoding type);
+const char* sspm_major_type_string(enum sspm_major_type type);
+const char* sspm_minor_type_string(enum sspm_minor_type type);
+const char* sspm_encoding_string(enum sspm_encoding type);
 
 int sspm_parse_mime(struct sspm_part *parts, 
 		    size_t max_parts,
@@ -138,6 +139,6 @@
 
 
 int sspm_write_mime(struct sspm_part *parts,size_t num_parts,
-		    char **output_string, char* header);
+		    char **output_string, const char* header);
 
 #endif /*SSPM_H*/
Index: libkcal/libical/src/libical/Makefile.am
===================================================================
--- libkcal/libical/src/libical/Makefile.am	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ libkcal/libical/src/libical/Makefile.am	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -130,9 +129,6 @@
 	echo '#ifdef __cplusplus'	  >  ical.h
 	echo 'extern "C" {'		  >> ical.h
 	echo '#endif'			  >> ical.h
-	echo '/*'			  >> ical.h
-	echo ' $$''Id''$$'		  >> ical.h
-	echo '*/'			  >> ical.h
 	cat $(COMBINEDHEADERS)				\
 	| egrep -v "#include.*\"ical"			\
 	| egrep -v "#include.*\"config"			\
Index: libkcal/libical/src/libical/icaltimezone.h
===================================================================
--- libkcal/libical/src/libical/icaltimezone.h	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ libkcal/libical/src/libical/icaltimezone.h	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -68,7 +66,7 @@
 icalarray* icaltimezone_get_builtin_timezones	(void);
 
 /** Returns a single builtin timezone, given its Olson city name. */
-icaltimezone* icaltimezone_get_builtin_timezone	(const char *location);
+icaltimezone* icaltimezone_get_builtin_timezone (const char *location);
 
 /** Returns a single builtin timezone, given its TZID. */
 icaltimezone* icaltimezone_get_builtin_timezone_from_tzid (const char *tzid);
@@ -77,30 +75,30 @@
 icaltimezone* icaltimezone_get_utc_timezone	(void);
 
 /** Returns the TZID of a timezone. */
-char*	icaltimezone_get_tzid			(icaltimezone	*zone);
+const char*	icaltimezone_get_tzid			(icaltimezone *zone);
 
 /** Returns the city name of a timezone. */
-char*	icaltimezone_get_location		(icaltimezone	*zone);
+const char*	icaltimezone_get_location		(icaltimezone *zone);
 
 /** Returns the TZNAME properties used in the latest STANDARD and DAYLIGHT
    components. If they are the same it will return just one, e.g. "LMT".
    If they are different it will format them like "EST/EDT". Note that this
    may also return NULL. */
-char*	icaltimezone_get_tznames		(icaltimezone	*zone);
+const char*	icaltimezone_get_tznames		(icaltimezone *zone);
 
 /** Returns the latitude of a builtin timezone. */
-double	icaltimezone_get_latitude		(icaltimezone	*zone);
+double	icaltimezone_get_latitude		(icaltimezone *zone);
 
 /** Returns the longitude of a builtin timezone. */
-double	icaltimezone_get_longitude		(icaltimezone	*zone);
+double	icaltimezone_get_longitude		(icaltimezone *zone);
 
 /** Returns the VTIMEZONE component of a timezone. */
-icalcomponent*	icaltimezone_get_component	(icaltimezone	*zone);
+icalcomponent*	icaltimezone_get_component	(icaltimezone *zone);
 
 /** Sets the VTIMEZONE component of an icaltimezone, initializing the tzid,
    location & tzname fields. It returns 1 on success or 0 on failure, i.e.
    no TZID was found. */
-int	icaltimezone_set_component		(icaltimezone	*zone,
+int	icaltimezone_set_component		(icaltimezone *zone,
 						 icalcomponent	*comp);
 
 /**
@@ -108,8 +106,8 @@
  */
 
 void	icaltimezone_convert_time		(struct icaltimetype *tt,
-						 icaltimezone	*from_zone,
-						 icaltimezone	*to_zone);
+						 icaltimezone *from_zone,
+						 icaltimezone *to_zone);
 
 
 /**
@@ -120,15 +118,15 @@
    timezone.  It is the number of seconds to add to UTC to get local
    time.  The is_daylight flag is set to 1 if the time is in
    daylight-savings time. */
-int	icaltimezone_get_utc_offset		(icaltimezone	*zone,
-						 struct icaltimetype *tt,
-						 int		*is_daylight);
+int icaltimezone_get_utc_offset	(icaltimezone *zone,
+				 struct icaltimetype *tt,
+				 int		*is_daylight);
 
 /** Calculates the UTC offset of a given UTC time in the given
    timezone.  It is the number of seconds to add to UTC to get local
    time.  The is_daylight flag is set to 1 if the time is in
    daylight-savings time. */
-int	icaltimezone_get_utc_offset_of_utc_time	(icaltimezone	*zone,
+int	icaltimezone_get_utc_offset_of_utc_time	(icaltimezone *zone,
 						 struct icaltimetype *tt,
 						 int		*is_daylight);
 
@@ -160,7 +158,7 @@
 
 /** Dumps information about changes in the timezone up to and including
    max_year. */
-int	icaltimezone_dump_changes		(icaltimezone	*zone,
+int	icaltimezone_dump_changes		(icaltimezone *zone,
 						 int		 max_year,
 						 FILE		*fp);
 
Index: libkcal/libical/src/libical/icalcomponent.c
===================================================================
--- libkcal/libical/src/libical/icalcomponent.c	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ libkcal/libical/src/libical/icalcomponent.c	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -280,11 +280,11 @@
    char* buf_ptr = 0;
     pvl_elem itr;
 
+/* RFC 2445 explicitly says that the newline is *ALWAYS* a \r\n (CRLF)!!!! */
+char newline[] = "\r\n";
 /* WIN32 automatically adds the \r, Anybody else need it?
 #ifdef ICAL_UNIX_NEWLINE    
-*/
     char newline[] = "\n";
-/*
 #else
     char newline[] = "\r\n";
 #endif
@@ -1483,7 +1483,7 @@
  */
 void icalcomponent_set_dtstart(icalcomponent* comp, struct icaltimetype v)
 {
-    char *tzid;
+    const char *tzid;
     ICALSETUPSET(ICAL_DTSTART_PROPERTY);
 
     if (prop == 0){
@@ -1601,7 +1601,7 @@
  */
 void icalcomponent_set_dtend(icalcomponent* comp, struct icaltimetype v)
 {
-    char *tzid;
+    const char *tzid;
     ICALSETUPSET(ICAL_DTEND_PROPERTY);
 
     if (icalcomponent_get_first_property(inner,ICAL_DURATION_PROPERTY)
@@ -2050,7 +2050,7 @@
 {
   icalcomponent *subcomp, *next_subcomp;
   icalarray *tzids_to_rename;
-  int i;
+  unsigned int i;
 
   /* Check that both components are VCALENDAR components. */
   assert (icalcomponent_isa(comp) == ICAL_VCALENDAR_COMPONENT);
@@ -2170,6 +2170,7 @@
   int i, suffix, max_suffix = 0, num_elements;
   unsigned int tzid_len;
   char *tzid_copy, *new_tzid, suffix_buf[32];
+  (void)tzid_prop; /* hack to stop unused variable warning */
 
   /* Find the length of the TZID without any trailing digits. */
   tzid_len = icalcomponent_get_tzid_prefix_len (tzid);
@@ -2184,7 +2185,8 @@
   num_elements = comp->timezones ? comp->timezones->num_elements : 0;
   for (i = 0; i < num_elements; i++) {
     icaltimezone *zone;
-    char *existing_tzid, *existing_tzid_copy;
+    const char *existing_tzid;
+    const char *existing_tzid_copy;
     unsigned int existing_tzid_len;
 
     zone = icalarray_element_at (comp->timezones, i);
@@ -2281,7 +2283,7 @@
 
     /* Step through the rename table to see if the current TZID matches
        any of the ones we want to rename. */
-    for (i = 0; i < rename_table->num_elements - 1; i += 2) {
+    for (i = 0; (unsigned int)i < rename_table->num_elements - 1; i += 2) {
         if (!strcmp (tzid, icalarray_element_at (rename_table, i))) {
 	    icalparameter_set_tzid (param, icalarray_element_at (rename_table, i + 1));
 	    break;
@@ -2338,7 +2340,7 @@
 {
     icaltimezone *zone;
     int lower, upper, middle, cmp;
-    char *zone_tzid;
+    const char *zone_tzid;
 
     if (!comp->timezones)
 	return NULL;
Index: libkcal/libical/src/libical/icaltime.h
===================================================================
--- libkcal/libical/src/libical/icaltime.h	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ libkcal/libical/src/libical/icaltime.h	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -61,7 +60,7 @@
  *
  *	- icaltime_get_timezone(struct icaltimetype t)
  *	- icaltime_get_tzid(struct icaltimetype t)
- *	- icaltime_set_timezone(struct icaltimetype t, const icaltimezone *zone)
+ *	- icaltime_set_timezone(struct icaltimetype t, icaltimezone *zone)
  *	- icaltime_day_of_year(struct icaltimetype t)
  *	- icaltime_day_of_week(struct icaltimetype t)
  *	- icaltime_start_doy_of_week(struct icaltimetype t)
@@ -94,7 +93,6 @@
 #define ICALTIME_H
 
 #include <time.h>
-
 /* An opaque struct representing a timezone. We declare this here to avoid
    a circular dependancy. */
 #ifndef ICALTIMEZONE_DEFINED
@@ -132,7 +130,7 @@
    
 	int is_daylight; /**< 1 -> time is in daylight savings time. */
    
-	const icaltimezone *zone;	/**< timezone */
+	icaltimezone *zone;	/**< timezone */
 };	
 
 typedef struct icaltimetype icaltimetype;
@@ -145,7 +143,7 @@
 struct icaltimetype icaltime_null_date(void);
 
 /** Returns the current time in the given timezone, as an icaltimetype. */
-struct icaltimetype icaltime_current_time_with_zone(const icaltimezone *zone);
+struct icaltimetype icaltime_current_time_with_zone(icaltimezone *zone);
 
 /** Returns the current day as an icaltimetype, with is_date set. */
 struct icaltimetype icaltime_today(void);
@@ -155,14 +153,14 @@
 
 /** Convert seconds past UNIX epoch to a timetype, using timezones. */
 struct icaltimetype icaltime_from_timet_with_zone(const time_t tm,
-	const int is_date, const icaltimezone *zone);
+	const int is_date, icaltimezone *zone);
 
 /** create a time from an ISO format string */
 struct icaltimetype icaltime_from_string(const char* str);
 
 /** create a time from an ISO format string */
 struct icaltimetype icaltime_from_string_with_zone(const char* str,
-	const icaltimezone *zone);
+	icaltimezone *zone);
 
 /** Create a new time, given a day of year and a year. */
 struct icaltimetype icaltime_from_day_of_year(const int doy,
@@ -178,21 +176,21 @@
 
 /** Return the time as seconds past the UNIX epoch, using timezones. */
 time_t icaltime_as_timet_with_zone(const struct icaltimetype tt,
-	const icaltimezone *zone);
+	icaltimezone *zone);
 
 /** Return a string represention of the time, in RFC2445 format. The
    string is owned by libical */
 const char* icaltime_as_ical_string(const struct icaltimetype tt);
 
 /** @brief Return the timezone */
-const icaltimezone *icaltime_get_timezone(const struct icaltimetype t);
+icaltimezone *icaltime_get_timezone(const struct icaltimetype t);
 
 /** @brief Return the tzid, or NULL for a floating time */
-char *icaltime_get_tzid(const struct icaltimetype t);
+const char *icaltime_get_tzid(const struct icaltimetype t);
 
 /** @brief Set the timezone */
 struct icaltimetype icaltime_set_timezone(struct icaltimetype *t,
-	const icaltimezone *zone);
+	icaltimezone *zone);
 
 /** Return the day of the year of the given time */
 int icaltime_day_of_year(const struct icaltimetype t);
Index: libkcal/libical/src/libical/icaltypes.c
===================================================================
--- libkcal/libical/src/libical/icaltypes.c	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ libkcal/libical/src/libical/icaltypes.c	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -85,10 +84,10 @@
 
     null_tr = tr;
 
-    if(str == 0) goto error;
 
     /* Suppress errors so a failure in icaltime_from_string() does not cause an abort */
     es = icalerror_get_error_state(ICAL_MALFORMEDDATA_ERROR);
+    if(str == 0) goto error;
     icalerror_set_error_state(ICAL_MALFORMEDDATA_ERROR,ICAL_ERROR_NONFATAL);
     e = icalerrno;
     icalerror_set_errno(ICAL_NO_ERROR);
Index: libkcal/libical/src/libicalss/icalclassify.c
===================================================================
--- libkcal/libical/src/libicalss/icalclassify.c	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ libkcal/libical/src/libicalss/icalclassify.c	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -173,7 +172,7 @@
       const char *p_organizer = icalproperty_get_organizer(p);
       if (p_organizer!=0) {
         parts->organizer = strdup(p_organizer);
-      } 
+      }
     }
 
     p = icalcomponent_get_first_property(inner,ICAL_SEQUENCE_PROPERTY);    
@@ -186,7 +185,7 @@
       const char *p_uid = icalproperty_get_uid(p);
       if (p_uid!=0) {
         parts->uid = strdup(p_uid);
-      } 
+      }
     }
 
     p = icalcomponent_get_first_property(inner,ICAL_RECURRENCEID_PROPERTY);
@@ -204,7 +203,7 @@
 	p  = icalcomponent_get_first_property(inner,ICAL_ATTENDEE_PROPERTY);
 
 	if(p!=0){
-	    char *attendee = 0;
+	    const char *attendee = 0;
 	    param = icalproperty_get_first_parameter(p,ICAL_PARTSTAT_PARAMETER);
 	    
 	    if(param != 0){
@@ -275,6 +274,7 @@
 				const char* user)
 {
     icalclassify_pre;
+    (void)user;
 
     if(comp->method == ICAL_METHOD_PUBLISH &&
 	match == 0 && comp->inner_kind != ICAL_VFREEBUSY_COMPONENT){
@@ -290,6 +290,7 @@
 				const char* user)
 {
     icalclassify_pre;
+    (void)user;
 
     if(comp->method == ICAL_METHOD_PUBLISH &&
 	match !=0 && comp->inner_kind != ICAL_VFREEBUSY_COMPONENT){
@@ -306,6 +307,8 @@
 {
     icalclassify_pre;
 
+    (void)match;
+    (void)user;
     if(comp->method == ICAL_METHOD_PUBLISH &&
        comp->inner_kind == ICAL_VFREEBUSY_COMPONENT){
 	rtrn = 1;
@@ -323,6 +326,7 @@
     /* Method is  REQUEST, and there is no match */
 
     icalclassify_pre
+    (void)user;
 
     if(match->c==0 && comp->method == ICAL_METHOD_REQUEST){
 	rtrn = 1;
@@ -341,6 +345,7 @@
        time-related properties are unchanged */
     
     icalclassify_pre
+    (void)user;
 
     if (match != 0 &&
 	comp->sequence >= match->sequence &&
@@ -360,6 +365,7 @@
     /* REQUEST method, Higher SEQUENCE than match, and one or more
        time-related properties are changed */
     icalclassify_pre
+    (void)user;
 
     if (match->c != 0 &&
 	comp->sequence > match->sequence &&
@@ -379,6 +385,7 @@
     icalproperty* attendee;
     icalparameter* param;
     icalclassify_pre;
+    (void)match;
 
     attendee = icalclassify_find_attendee(comp->c,user);
 
@@ -405,6 +412,9 @@
     icalclassify_pre
     icalerror_set_errno(ICAL_UNIMPLEMENTED_ERROR);
     icalclassify_post
+    (void)comp;
+    (void)match;
+    (void)user;
 
 }
 
@@ -416,6 +426,9 @@
     icalclassify_pre
     icalerror_set_errno(ICAL_UNIMPLEMENTED_ERROR);
     icalclassify_post
+    (void)comp;
+    (void)match;
+    (void)user;
 }
 
 int icalclassify_request_forward(
@@ -426,6 +439,9 @@
     icalclassify_pre
     icalerror_set_errno(ICAL_UNIMPLEMENTED_ERROR);
     icalclassify_post
+    (void)comp;
+    (void)match;
+    (void)user;
 }
 
 int icalclassify_request_freebusy(
@@ -436,6 +452,9 @@
     icalclassify_pre
     icalerror_set_errno(ICAL_UNIMPLEMENTED_ERROR);
     icalclassify_post
+    (void)comp;
+    (void)match;
+    (void)user;
 }
 
 int icalclassify_reply_accept(
@@ -445,6 +464,7 @@
 {
     icalproperty* attendee;
     icalclassify_pre;
+    (void)user;
 
     attendee = icalclassify_find_attendee(match->c,comp->reply_attendee);
 
@@ -462,6 +482,7 @@
 {
     icalproperty* attendee;
     icalclassify_pre;
+    (void)user;
 
     attendee = icalclassify_find_attendee(match->c,comp->reply_attendee);
 
@@ -479,6 +500,7 @@
 {
     icalproperty* attendee;
     icalclassify_pre;
+    (void)user;
 
     attendee = icalclassify_find_attendee(match->c,comp->reply_attendee);
 
@@ -495,6 +517,7 @@
 {
     icalproperty* attendee;
     icalclassify_pre;
+    (void)user;
 
     attendee= icalclassify_find_attendee(match->c,comp->reply_attendee);
 
@@ -511,6 +534,7 @@
 {
     icalproperty* attendee;
     icalclassify_pre;
+    (void)user;
 
 
     attendee = icalclassify_find_attendee(match->c,comp->reply_attendee);
@@ -527,6 +551,9 @@
     const char* user)
 {
     icalclassify_pre
+    (void)match;
+    (void)user;
+
     if(comp->method == ICAL_METHOD_ADD){
 	rtrn = 1;
     }
@@ -538,6 +565,8 @@
     const char* user)
 {
     icalclassify_pre
+    (void)match;
+    (void)user;
     if(comp->method == ICAL_METHOD_CANCEL){
 	rtrn = 1;
     }
@@ -549,6 +578,8 @@
     const char* user)
 {
     icalclassify_pre
+    (void)match;
+    (void)user;
     if(comp->method == ICAL_METHOD_CANCEL){
 	rtrn = 1;
     }
@@ -560,6 +591,8 @@
     const char* user)
 {
     icalclassify_pre
+    (void)match;
+    (void)user;
     if(comp->method == ICAL_METHOD_CANCEL){
 	rtrn = 1;
     }
@@ -571,6 +604,8 @@
     const char* user)
 {
     icalclassify_pre
+    (void)match;
+    (void)user;
     if(comp->method == ICAL_METHOD_REFRESH){
 	rtrn = 1;
     }
@@ -582,6 +617,8 @@
     const char* user)
 {
     icalclassify_pre
+    (void)match;
+    (void)user;
     if(comp->method == ICAL_METHOD_COUNTER){
 	rtrn = 1;
     }
@@ -593,6 +630,8 @@
     const char* user)
 {
     icalclassify_pre
+    (void)match;
+    (void)user;
 
     if(comp->method == ICAL_METHOD_DECLINECOUNTER){
 	rtrn = 1;
Index: libkcal/libical/src/libicalss/Makefile.am
===================================================================
--- libkcal/libical/src/libicalss/Makefile.am	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ libkcal/libical/src/libicalss/Makefile.am	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -21,9 +21,6 @@
 	echo '#ifdef __cplusplus'	  >  icalss.h
 	echo 'extern "C" {'		  >> icalss.h
 	echo '#endif'			  >> icalss.h
-	echo '/*'			  >> icalss.h
-	echo ' $$''Id''$$'		  >> icalss.h
-	echo '*/'			  >> icalss.h
 	cat $(COMBINEDHEADERS)				\
 	| egrep -v "#include.*\"ical"			\
 	| egrep -v "#include.*\"pvl\.h\""		\
Index: libkcal/libical/scripts/mkrestrictiontable.pl
===================================================================
--- libkcal/libical/scripts/mkrestrictiontable.pl	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ libkcal/libical/scripts/mkrestrictiontable.pl	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -58,7 +58,7 @@
 
 
 # Print the terminating line 
-print "    {ICAL_METHOD_NONE,ICAL_NO_COMPONENT,ICAL_NO_PROPERTY,ICAL_RESTRICTION_NONE}\n";
+print "    {ICAL_METHOD_NONE,ICAL_NO_COMPONENT,ICAL_NO_PROPERTY,ICAL_RESTRICTION_NONE, 0}\n";
 
 print "};\n";
 
@@ -94,5 +94,5 @@
 }
 
 # print the terminating line 
-print "    {ICAL_METHOD_NONE,ICAL_NO_COMPONENT,ICAL_NO_COMPONENT,ICAL_RESTRICTION_NONE}\n";
+print "    {ICAL_METHOD_NONE,ICAL_NO_COMPONENT,ICAL_NO_COMPONENT,ICAL_RESTRICTION_NONE, 0}\n";
 print "};\n";
Index: libkcal/recurrence.cpp
===================================================================
--- libkcal/recurrence.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ libkcal/recurrence.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -184,7 +184,7 @@
 
 bool Recurrence::doesRecur() const
 {
-  return !mRRules.isEmpty();
+  return !mRRules.isEmpty() || !mRDates.isEmpty() || !mRDateTimes.isEmpty();
 }
 
 ushort Recurrence::recurrenceType() const
Index: libkcal/icalformatimpl.cpp
===================================================================
--- libkcal/icalformatimpl.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ libkcal/icalformatimpl.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -257,7 +257,7 @@
   //Loops through all the periods in the freebusy object
   QValueList<Period> list = freebusy->busyPeriods();
   QValueList<Period>::Iterator it;
-  icalperiodtype period;
+  icalperiodtype period = icalperiodtype_null_period();
   for (it = list.begin(); it!= list.end(); ++it) {
     period.start = writeICalDateTime((*it).start());
     if ( (*it).hasDuration() ) {
@@ -318,16 +318,22 @@
   // unique id
   // If the scheduling ID is different from the real UID, the real
   // one is stored on X-REALID above
-  icalcomponent_add_property(parent,icalproperty_new_uid(
-      incidence->schedulingID().utf8()));
+  if ( !incidence->schedulingID().isEmpty() ) {
+    icalcomponent_add_property(parent,icalproperty_new_uid(
+        incidence->schedulingID().utf8()));
+  }
 
   // revision
-  icalcomponent_add_property(parent,icalproperty_new_sequence(
-      incidence->revision()));
+  if ( incidence->revision() > 0 ) { // 0 is default, so don't write that out
+    icalcomponent_add_property(parent,icalproperty_new_sequence(
+        incidence->revision()));
+  }
 
   // last modification date
-  icalcomponent_add_property(parent,icalproperty_new_lastmodified(
-      writeICalDateTime(incidence->lastModified())));
+  if ( incidence->lastModified().isValid() ) {
+   icalcomponent_add_property(parent,icalproperty_new_lastmodified(
+       writeICalDateTime(incidence->lastModified())));
+  }
 
   // description
   if (!incidence->description().isEmpty()) {
@@ -385,11 +391,15 @@
       secClass = ICAL_CLASS_PRIVATE;
       break;
   }
-  icalcomponent_add_property(parent,icalproperty_new_class(secClass));
+  if ( secClass != ICAL_CLASS_PUBLIC ) {
+    icalcomponent_add_property(parent,icalproperty_new_class(secClass));
+  }
 
   // priority
-  icalcomponent_add_property(parent,icalproperty_new_priority(
-      incidence->priority()));
+  if ( incidence->priority() > 0 ) { // 0 is undefined priority
+    icalcomponent_add_property(parent,icalproperty_new_priority(
+        incidence->priority()));
+  }
 
   // categories
   QStringList categories = incidence->categories();
@@ -451,8 +461,9 @@
   // attachments
   Attachment::List attachments = incidence->attachments();
   Attachment::List::ConstIterator atIt;
-  for ( atIt = attachments.begin(); atIt != attachments.end(); ++atIt )
+  for ( atIt = attachments.begin(); atIt != attachments.end(); ++atIt ) {
     icalcomponent_add_property( parent, writeAttachment( *atIt ) );
+  }
 
   // alarms
   Alarm::List::ConstIterator alarmIt;
@@ -479,7 +490,9 @@
       writeICalDateTime( QDateTime::currentDateTime() ) ) );
 
   // organizer stuff
-  icalcomponent_add_property( parent, writeOrganizer( incidenceBase->organizer() ) );
+  if ( !incidenceBase->organizer().isEmpty() ) {
+    icalcomponent_add_property( parent, writeOrganizer( incidenceBase->organizer() ) );
+  }
 
   // attendees
   if ( incidenceBase->attendeeCount() > 0 ) {
@@ -517,7 +530,7 @@
   if (!organizer.name().isEmpty()) {
     icalproperty_add_parameter( p, icalparameter_new_cn(organizer.name().utf8()) );
   }
-  // TODO: Write dir, senty-by and language
+  // TODO: Write dir, sent-by and language
 
   return p;
 }
@@ -1079,6 +1092,9 @@
   icalparameter *p = 0;
 
   QString email = QString::fromUtf8(icalproperty_get_attendee(attendee));
+  if ( email.startsWith( "mailto:", false ) ) {
+    email = email.mid( 7 );
+  }
 
   QString name;
   QString uid = QString::null;
@@ -1162,7 +1178,7 @@
 Person ICalFormatImpl::readOrganizer( icalproperty *organizer )
 {
   QString email = QString::fromUtf8(icalproperty_get_organizer(organizer));
-  if ( email.startsWith("mailto:", false ) ) {
+  if ( email.startsWith( "mailto:", false ) ) {
     email = email.mid( 7 );
   }
   QString cn;
@@ -1191,11 +1207,11 @@
     if (isurl == 0)
       attachment = new Attachment((const char*)icalattach_get_data(a));
     else {
-      attachment = new Attachment(QString(icalattach_get_url(a)));
+      attachment = new Attachment(QString::fromUtf8(icalattach_get_url(a)));
     }
   }
   else if ( value_kind == ICAL_URI_VALUE ) {
-    attachment = new Attachment(QString(icalvalue_get_uri(icalproperty_get_value(attach))));
+    attachment = new Attachment(QString::fromUtf8(icalvalue_get_uri(icalproperty_get_value(attach))));
   }
 
   icalparameter *p = icalproperty_get_first_parameter(attach, ICAL_FMTTYPE_PARAMETER);
@@ -1313,7 +1329,7 @@
           if ( icaltime_is_date( rd.time ) ) {
             incidence->recurrence()->addRDate( readICalDate( rd.time ) );
           } else {
-            incidence->recurrence()->addRDateTime( readICalDateTime(rd.time ) );
+            incidence->recurrence()->addRDateTime( readICalDateTime( rd.time, tz ) );
           }
         } else {
           // TODO: RDates as period are not yet implemented!
@@ -1394,6 +1410,7 @@
   }
   // Fix incorrect alarm settings by other applications (like outloook 9)
   if ( mCompat ) mCompat->fixAlarms( incidence );
+
 }
 
 void ICalFormatImpl::readIncidenceBase(icalcomponent *parent,IncidenceBase *incidenceBase)
@@ -1654,6 +1671,9 @@
       // Only in EMAIL alarm
       case ICAL_ATTENDEE_PROPERTY: {
         QString email = QString::fromUtf8(icalproperty_get_attendee(p));
+        if ( email.startsWith("mailto:", false ) ) {
+          email = email.mid( 7 );
+        }
         QString name;
         icalparameter *param = icalproperty_get_first_parameter(p,ICAL_CN_PARAMETER);
         if (param) {
@@ -1777,9 +1797,14 @@
 QDateTime ICalFormatImpl::readICalDateTime( icaltimetype& t, icaltimezone* tz )
 {
 //   kdDebug(5800) << "ICalFormatImpl::readICalDateTime()" << endl;
-  if ( tz ) {
+  icaltimezone *zone = tz;
+  if ( tz && t.is_utc == 0 ) { // Only use the TZ if time is not UTC.
+    // FIXME: We'll need to make sure to apply the appropriate TZ, not just
+    //        the first one found.
     t.zone = tz;
     t.is_utc = (tz == icaltimezone_get_utc_timezone())?1:0;
+  } else {
+    zone = icaltimezone_get_utc_timezone();
   }
   //_dumpIcaltime( t );
 
@@ -1787,7 +1812,7 @@
   if ( !mParent->timeZoneId().isEmpty() && t.zone ) {
 //    kdDebug(5800) << "--- Converting time from: " << icaltimezone_get_tzid( const_cast<icaltimezone*>( t.zone ) ) << " (" << ICalDate2QDate(t) << ")." << endl;
     icaltimezone* viewTimeZone = icaltimezone_get_builtin_timezone ( mParent->timeZoneId().latin1() );
-    icaltimezone_convert_time(  &t, const_cast<icaltimezone*>( t.zone ), viewTimeZone );
+    icaltimezone_convert_time(  &t, zone, viewTimeZone );
 //    kdDebug(5800) << "--- Converted to zone " << mParent->timeZoneId() << " (" << ICalDate2QDate(t) << ")." << endl;
   }
 
Index: libkcal/tests/readandwrite.cpp
===================================================================
--- libkcal/tests/readandwrite.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ libkcal/tests/readandwrite.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -67,10 +67,10 @@
   CalendarLocal cal( QString::fromLatin1("UTC") );
 
   if ( !cal.load( input ) ) return 1;
-	QString tz = cal.nonKDECustomProperty( "X-LibKCal-Testsuite-OutTZ" );
-	if ( !tz.isEmpty() ) {
-	  cal.setTimeZoneIdViewOnly( tz );
-	}
+  QString tz = cal.nonKDECustomProperty( "X-LibKCal-Testsuite-OutTZ" );
+  if ( !tz.isEmpty() ) {
+    cal.setTimeZoneIdViewOnly( tz );
+  }
   if ( !cal.save( output ) ) return 1;
 
   return 0;
Index: libkcal/tests/data/vCalendar/KOrganizer_vCalTestCase01.vcs.ical.ref
===================================================================
--- libkcal/tests/data/vCalendar/KOrganizer_vCalTestCase01.vcs.ical.ref	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ libkcal/tests/data/vCalendar/KOrganizer_vCalTestCase01.vcs.ical.ref	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -1,21 +1,20 @@
-BEGIN:VCALENDAR
-PRODID:-//K Desktop Environment//NONSGML libkcal 3.5//EN
-VERSION:2.0
-BEGIN:VEVENT
-DTSTAMP:20050604T165650Z
-ORGANIZER:MAILTO:reinhold@kainhofer.com
-CREATED:20050520T105219Z
-UID:KOrganizer-45214176.303
-SEQUENCE:2
-LAST-MODIFIED:20050520T105815Z
-SUMMARY:20. Mai 2005\, 19-20 Uhr\, alle 3 Monate am -2. Fr\, 17 mal
-CLASS:PUBLIC
-PRIORITY:5
-RRULE:FREQ=MONTHLY;COUNT=17;INTERVAL=3;BYDAY=-2FR
-DTSTART:20050520T170000Z
-DTEND:20050520T180000Z
-TRANSP:OPAQUE
-END:VEVENT
-
-END:VCALENDAR
-
+BEGIN:VCALENDAR
+PRODID:-//K Desktop Environment//NONSGML libkcal 3.5//EN
+VERSION:2.0
+BEGIN:VEVENT
+DTSTAMP:20050604T165650Z
+ORGANIZER:MAILTO:reinhold@kainhofer.com
+CREATED:20050520T105219Z
+UID:KOrganizer-45214176.303
+SEQUENCE:2
+LAST-MODIFIED:20050520T105815Z
+SUMMARY:20. Mai 2005\, 19-20 Uhr\, alle 3 Monate am -2. Fr\, 17 mal
+PRIORITY:5
+RRULE:FREQ=MONTHLY;COUNT=17;INTERVAL=3;BYDAY=-2FR
+DTSTART:20050520T170000Z
+DTEND:20050520T180000Z
+TRANSP:OPAQUE
+END:VEVENT
+
+END:VCALENDAR
+
Index: libkcal/tests/data/vCalendar/KOrganizer_vCalTestCase11.vcs.ical.ref
===================================================================
--- libkcal/tests/data/vCalendar/KOrganizer_vCalTestCase11.vcs.ical.ref	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ libkcal/tests/data/vCalendar/KOrganizer_vCalTestCase11.vcs.ical.ref	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -1,22 +1,21 @@
-BEGIN:VCALENDAR
-PRODID:-//K Desktop Environment//NONSGML libkcal 3.5//EN
-VERSION:2.0
-BEGIN:VEVENT
-DTSTAMP:20050604T165658Z
-ORGANIZER:MAILTO:reinhold@kainhofer.com
-CREATED:20050520T105525Z
-UID:KOrganizer-881198156.528
-SEQUENCE:3
-LAST-MODIFIED:20050520T105853Z
-SUMMARY:21. Mai 2005\, 12-13 Uhr\, jedes Jahre am 141. Tag im Jahr\, 17 
- mal
-CLASS:PUBLIC
-PRIORITY:5
-RRULE:FREQ=YEARLY;COUNT=17;BYYEARDAY=141
-DTSTART:20050521T100000Z
-DTEND:20050521T110000Z
-TRANSP:OPAQUE
-END:VEVENT
-
-END:VCALENDAR
-
+BEGIN:VCALENDAR
+PRODID:-//K Desktop Environment//NONSGML libkcal 3.5//EN
+VERSION:2.0
+BEGIN:VEVENT
+DTSTAMP:20050604T165658Z
+ORGANIZER:MAILTO:reinhold@kainhofer.com
+CREATED:20050520T105525Z
+UID:KOrganizer-881198156.528
+SEQUENCE:3
+LAST-MODIFIED:20050520T105853Z
+SUMMARY:21. Mai 2005\, 12-13 Uhr\, jedes Jahre am 141. Tag im Jahr\, 17 
+ mal
+PRIORITY:5
+RRULE:FREQ=YEARLY;COUNT=17;BYYEARDAY=141
+DTSTART:20050521T100000Z
+DTEND:20050521T110000Z
+TRANSP:OPAQUE
+END:VEVENT
+
+END:VCALENDAR
+
Index: libkcal/tests/data/vCalendar/KOrganizer_vCalTestCase03.vcs.ical.ref
===================================================================
--- libkcal/tests/data/vCalendar/KOrganizer_vCalTestCase03.vcs.ical.ref	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ libkcal/tests/data/vCalendar/KOrganizer_vCalTestCase03.vcs.ical.ref	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -1,21 +1,20 @@
-BEGIN:VCALENDAR
-PRODID:-//K Desktop Environment//NONSGML libkcal 3.5//EN
-VERSION:2.0
-BEGIN:VEVENT
-DTSTAMP:20050604T165651Z
-ORGANIZER:MAILTO:reinhold@kainhofer.com
-CREATED:20050520T104909Z
-UID:KOrganizer-1943919749.348
-SEQUENCE:2
-LAST-MODIFIED:20050520T105735Z
-SUMMARY:20. Mai 2005\, 14-15 Uhr\, alle 2 Wochen am Di/Do\, 27 Mal
-CLASS:PUBLIC
-PRIORITY:5
-RRULE:FREQ=WEEKLY;COUNT=27;INTERVAL=2;BYDAY=TU,TH
-DTSTART:20050520T130000Z
-DTEND:20050520T140000Z
-TRANSP:OPAQUE
-END:VEVENT
-
-END:VCALENDAR
-
+BEGIN:VCALENDAR
+PRODID:-//K Desktop Environment//NONSGML libkcal 3.5//EN
+VERSION:2.0
+BEGIN:VEVENT
+DTSTAMP:20050604T165651Z
+ORGANIZER:MAILTO:reinhold@kainhofer.com
+CREATED:20050520T104909Z
+UID:KOrganizer-1943919749.348
+SEQUENCE:2
+LAST-MODIFIED:20050520T105735Z
+SUMMARY:20. Mai 2005\, 14-15 Uhr\, alle 2 Wochen am Di/Do\, 27 Mal
+PRIORITY:5
+RRULE:FREQ=WEEKLY;COUNT=27;INTERVAL=2;BYDAY=TU,TH
+DTSTART:20050520T130000Z
+DTEND:20050520T140000Z
+TRANSP:OPAQUE
+END:VEVENT
+
+END:VCALENDAR
+
Index: libkcal/tests/data/vCalendar/KOrganizer_vCalTestCase13.vcs.ical.ref
===================================================================
--- libkcal/tests/data/vCalendar/KOrganizer_vCalTestCase13.vcs.ical.ref	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ libkcal/tests/data/vCalendar/KOrganizer_vCalTestCase13.vcs.ical.ref	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -1,22 +1,21 @@
-BEGIN:VCALENDAR
-PRODID:-//K Desktop Environment//NONSGML libkcal 3.5//EN
-VERSION:2.0
-BEGIN:VEVENT
-DTSTAMP:20050604T165659Z
-ORGANIZER:MAILTO:reinhold@kainhofer.com
-CREATED:20050520T105244Z
-UID:KOrganizer-1521406395.909
-SEQUENCE:1
-LAST-MODIFIED:20050520T105327Z
-SUMMARY:20. Mai 2005\, 20-21 Uhr\, alle 3 Monate am letzten Do\, bis 31. 
- 12. 2006
-CLASS:PUBLIC
-PRIORITY:5
-RRULE:FREQ=MONTHLY;UNTIL=20061231T000000Z;INTERVAL=3;BYDAY=-1TH
-DTSTART:20050520T180000Z
-DTEND:20050520T190000Z
-TRANSP:OPAQUE
-END:VEVENT
-
-END:VCALENDAR
-
+BEGIN:VCALENDAR
+PRODID:-//K Desktop Environment//NONSGML libkcal 3.5//EN
+VERSION:2.0
+BEGIN:VEVENT
+DTSTAMP:20050604T165659Z
+ORGANIZER:MAILTO:reinhold@kainhofer.com
+CREATED:20050520T105244Z
+UID:KOrganizer-1521406395.909
+SEQUENCE:1
+LAST-MODIFIED:20050520T105327Z
+SUMMARY:20. Mai 2005\, 20-21 Uhr\, alle 3 Monate am letzten Do\, bis 31. 
+ 12. 2006
+PRIORITY:5
+RRULE:FREQ=MONTHLY;UNTIL=20061231T000000Z;INTERVAL=3;BYDAY=-1TH
+DTSTART:20050520T180000Z
+DTEND:20050520T190000Z
+TRANSP:OPAQUE
+END:VEVENT
+
+END:VCALENDAR
+
Index: libkcal/tests/data/vCalendar/KOrganizer_vCalTestCase05.vcs.ical.ref
===================================================================
--- libkcal/tests/data/vCalendar/KOrganizer_vCalTestCase05.vcs.ical.ref	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ libkcal/tests/data/vCalendar/KOrganizer_vCalTestCase05.vcs.ical.ref	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -1,22 +1,21 @@
-BEGIN:VCALENDAR
-PRODID:-//K Desktop Environment//NONSGML libkcal 3.5//EN
-VERSION:2.0
-BEGIN:VEVENT
-DTSTAMP:20050604T165652Z
-ORGANIZER:MAILTO:reinhold@kainhofer.com
-CREATED:20050520T104822Z
-UID:KOrganizer-428202830.752
-SEQUENCE:2
-LAST-MODIFIED:20050520T105740Z
-SUMMARY:20. Mai 2005\, 14-15 Uhr\, alle 2 Wochen am Mo/Mi/Fr\, bis 30. 
- Juni 2005
-CLASS:PUBLIC
-PRIORITY:5
-RRULE:FREQ=WEEKLY;UNTIL=20050630T000000Z;INTERVAL=2;BYDAY=MO,WE,FR
-DTSTART:20050520T120000Z
-DTEND:20050520T130000Z
-TRANSP:OPAQUE
-END:VEVENT
-
-END:VCALENDAR
-
+BEGIN:VCALENDAR
+PRODID:-//K Desktop Environment//NONSGML libkcal 3.5//EN
+VERSION:2.0
+BEGIN:VEVENT
+DTSTAMP:20050604T165652Z
+ORGANIZER:MAILTO:reinhold@kainhofer.com
+CREATED:20050520T104822Z
+UID:KOrganizer-428202830.752
+SEQUENCE:2
+LAST-MODIFIED:20050520T105740Z
+SUMMARY:20. Mai 2005\, 14-15 Uhr\, alle 2 Wochen am Mo/Mi/Fr\, bis 30. 
+ Juni 2005
+PRIORITY:5
+RRULE:FREQ=WEEKLY;UNTIL=20050630T000000Z;INTERVAL=2;BYDAY=MO,WE,FR
+DTSTART:20050520T120000Z
+DTEND:20050520T130000Z
+TRANSP:OPAQUE
+END:VEVENT
+
+END:VCALENDAR
+
Index: libkcal/tests/data/vCalendar/KOrganizer_vCalTestCase07.vcs.ical.ref
===================================================================
--- libkcal/tests/data/vCalendar/KOrganizer_vCalTestCase07.vcs.ical.ref	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ libkcal/tests/data/vCalendar/KOrganizer_vCalTestCase07.vcs.ical.ref	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -1,21 +1,20 @@
-BEGIN:VCALENDAR
-PRODID:-//K Desktop Environment//NONSGML libkcal 3.5//EN
-VERSION:2.0
-BEGIN:VEVENT
-DTSTAMP:20050604T165653Z
-ORGANIZER:MAILTO:reinhold@kainhofer.com
-CREATED:20050520T105402Z
-UID:KOrganizer-1016383107.562
-SEQUENCE:3
-LAST-MODIFIED:20050520T105836Z
-SUMMARY:20. Mai 2005\, 22-23 Uhr\, alle 3 Jahre am 3. Freitag im Mai\, 17 
- mal (not possible in vCalendar -> no RRULE)
-CLASS:PUBLIC
-PRIORITY:5
-DTSTART:20050520T200000Z
-DTEND:20050520T210000Z
-TRANSP:OPAQUE
-END:VEVENT
-
-END:VCALENDAR
-
+BEGIN:VCALENDAR
+PRODID:-//K Desktop Environment//NONSGML libkcal 3.5//EN
+VERSION:2.0
+BEGIN:VEVENT
+DTSTAMP:20050604T165653Z
+ORGANIZER:MAILTO:reinhold@kainhofer.com
+CREATED:20050520T105402Z
+UID:KOrganizer-1016383107.562
+SEQUENCE:3
+LAST-MODIFIED:20050520T105836Z
+SUMMARY:20. Mai 2005\, 22-23 Uhr\, alle 3 Jahre am 3. Freitag im Mai\, 17 
+ mal (not possible in vCalendar -> no RRULE)
+PRIORITY:5
+DTSTART:20050520T200000Z
+DTEND:20050520T210000Z
+TRANSP:OPAQUE
+END:VEVENT
+
+END:VCALENDAR
+
Index: libkcal/tests/data/vCalendar/KOrganizer_vCalTestCase09.vcs.ical.ref
===================================================================
--- libkcal/tests/data/vCalendar/KOrganizer_vCalTestCase09.vcs.ical.ref	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ libkcal/tests/data/vCalendar/KOrganizer_vCalTestCase09.vcs.ical.ref	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -1,21 +1,20 @@
-BEGIN:VCALENDAR
-PRODID:-//K Desktop Environment//NONSGML libkcal 3.5//EN
-VERSION:2.0
-BEGIN:VEVENT
-DTSTAMP:20050604T165655Z
-ORGANIZER:MAILTO:reinhold@kainhofer.com
-CREATED:20050520T105153Z
-UID:KOrganizer-712420734.1026
-SEQUENCE:3
-LAST-MODIFIED:20050520T105809Z
-SUMMARY:20. Mai 2005\, 18-19 Uhr\, alle 3 Monate am 3. Fr\, 17 mal
-CLASS:PUBLIC
-PRIORITY:5
-RRULE:FREQ=MONTHLY;COUNT=17;INTERVAL=3;BYDAY=3FR
-DTSTART:20050520T160000Z
-DTEND:20050520T170000Z
-TRANSP:OPAQUE
-END:VEVENT
-
-END:VCALENDAR
-
+BEGIN:VCALENDAR
+PRODID:-//K Desktop Environment//NONSGML libkcal 3.5//EN
+VERSION:2.0
+BEGIN:VEVENT
+DTSTAMP:20050604T165655Z
+ORGANIZER:MAILTO:reinhold@kainhofer.com
+CREATED:20050520T105153Z
+UID:KOrganizer-712420734.1026
+SEQUENCE:3
+LAST-MODIFIED:20050520T105809Z
+SUMMARY:20. Mai 2005\, 18-19 Uhr\, alle 3 Monate am 3. Fr\, 17 mal
+PRIORITY:5
+RRULE:FREQ=MONTHLY;COUNT=17;INTERVAL=3;BYDAY=3FR
+DTSTART:20050520T160000Z
+DTEND:20050520T170000Z
+TRANSP:OPAQUE
+END:VEVENT
+
+END:VCALENDAR
+
Index: libkcal/tests/data/vCalendar/KOrganizer_vCalTestCase10.vcs.ical.ref
===================================================================
--- libkcal/tests/data/vCalendar/KOrganizer_vCalTestCase10.vcs.ical.ref	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ libkcal/tests/data/vCalendar/KOrganizer_vCalTestCase10.vcs.ical.ref	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -1,21 +1,20 @@
-BEGIN:VCALENDAR
-PRODID:-//K Desktop Environment//NONSGML libkcal 3.5//EN
-VERSION:2.0
-BEGIN:VEVENT
-DTSTAMP:20050604T165656Z
-ORGANIZER:MAILTO:reinhold@kainhofer.com
-CREATED:20050520T105331Z
-UID:KOrganizer-1059871846.769
-SEQUENCE:1
-LAST-MODIFIED:20050520T105400Z
-SUMMARY:20. Mai 2005\, 21-22 Uhr\, alle 2 Jahre am 24. Mai\, 13 mal
-CLASS:PUBLIC
-PRIORITY:5
-RRULE:FREQ=YEARLY;COUNT=13;INTERVAL=2;BYMONTH=5
-DTSTART:20050520T190000Z
-DTEND:20050520T200000Z
-TRANSP:OPAQUE
-END:VEVENT
-
-END:VCALENDAR
-
+BEGIN:VCALENDAR
+PRODID:-//K Desktop Environment//NONSGML libkcal 3.5//EN
+VERSION:2.0
+BEGIN:VEVENT
+DTSTAMP:20050604T165656Z
+ORGANIZER:MAILTO:reinhold@kainhofer.com
+CREATED:20050520T105331Z
+UID:KOrganizer-1059871846.769
+SEQUENCE:1
+LAST-MODIFIED:20050520T105400Z
+SUMMARY:20. Mai 2005\, 21-22 Uhr\, alle 2 Jahre am 24. Mai\, 13 mal
+PRIORITY:5
+RRULE:FREQ=YEARLY;COUNT=13;INTERVAL=2;BYMONTH=5
+DTSTART:20050520T190000Z
+DTEND:20050520T200000Z
+TRANSP:OPAQUE
+END:VEVENT
+
+END:VCALENDAR
+
Index: libkcal/tests/data/vCalendar/KOrganizer_vCalTestCase02.vcs.ical.ref
===================================================================
--- libkcal/tests/data/vCalendar/KOrganizer_vCalTestCase02.vcs.ical.ref	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ libkcal/tests/data/vCalendar/KOrganizer_vCalTestCase02.vcs.ical.ref	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -1,21 +1,20 @@
-BEGIN:VCALENDAR
-PRODID:-//K Desktop Environment//NONSGML libkcal 3.5//EN
-VERSION:2.0
-BEGIN:VEVENT
-DTSTAMP:20050604T165700Z
-ORGANIZER:MAILTO:reinhold@kainhofer.com
-CREATED:20050520T105130Z
-UID:KOrganizer-1286451532.549
-SEQUENCE:2
-LAST-MODIFIED:20050520T105759Z
-SUMMARY:20. Mai 2005\, 17-18 Uhr\, alle 3 Monate am 20.\, 17 mal
-CLASS:PUBLIC
-PRIORITY:5
-RRULE:FREQ=MONTHLY;COUNT=17;INTERVAL=3;BYMONTHDAY=20
-DTSTART:20050520T150000Z
-DTEND:20050520T160000Z
-TRANSP:OPAQUE
-END:VEVENT
-
-END:VCALENDAR
-
+BEGIN:VCALENDAR
+PRODID:-//K Desktop Environment//NONSGML libkcal 3.5//EN
+VERSION:2.0
+BEGIN:VEVENT
+DTSTAMP:20050604T165700Z
+ORGANIZER:MAILTO:reinhold@kainhofer.com
+CREATED:20050520T105130Z
+UID:KOrganizer-1286451532.549
+SEQUENCE:2
+LAST-MODIFIED:20050520T105759Z
+SUMMARY:20. Mai 2005\, 17-18 Uhr\, alle 3 Monate am 20.\, 17 mal
+PRIORITY:5
+RRULE:FREQ=MONTHLY;COUNT=17;INTERVAL=3;BYMONTHDAY=20
+DTSTART:20050520T150000Z
+DTEND:20050520T160000Z
+TRANSP:OPAQUE
+END:VEVENT
+
+END:VCALENDAR
+
Index: libkcal/tests/data/vCalendar/KOrganizer_vCalTestCase12.vcs.ical.ref
===================================================================
--- libkcal/tests/data/vCalendar/KOrganizer_vCalTestCase12.vcs.ical.ref	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ libkcal/tests/data/vCalendar/KOrganizer_vCalTestCase12.vcs.ical.ref	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -1,21 +1,20 @@
-BEGIN:VCALENDAR
-PRODID:-//K Desktop Environment//NONSGML libkcal 3.5//EN
-VERSION:2.0
-BEGIN:VEVENT
-DTSTAMP:20050604T165659Z
-ORGANIZER:MAILTO:reinhold@kainhofer.com
-CREATED:20050520T104758Z
-UID:KOrganizer-1078681338.495
-SEQUENCE:1
-LAST-MODIFIED:20050520T104819Z
-SUMMARY:20. Mai 2005\, 13-14 Uhr\, alle 3 Tage\, bis 30. Juni 2005
-CLASS:PUBLIC
-PRIORITY:5
-RRULE:FREQ=DAILY;UNTIL=20050630T000000Z;INTERVAL=3
-DTSTART:20050520T110000Z
-DTEND:20050520T120000Z
-TRANSP:OPAQUE
-END:VEVENT
-
-END:VCALENDAR
-
+BEGIN:VCALENDAR
+PRODID:-//K Desktop Environment//NONSGML libkcal 3.5//EN
+VERSION:2.0
+BEGIN:VEVENT
+DTSTAMP:20050604T165659Z
+ORGANIZER:MAILTO:reinhold@kainhofer.com
+CREATED:20050520T104758Z
+UID:KOrganizer-1078681338.495
+SEQUENCE:1
+LAST-MODIFIED:20050520T104819Z
+SUMMARY:20. Mai 2005\, 13-14 Uhr\, alle 3 Tage\, bis 30. Juni 2005
+PRIORITY:5
+RRULE:FREQ=DAILY;UNTIL=20050630T000000Z;INTERVAL=3
+DTSTART:20050520T110000Z
+DTEND:20050520T120000Z
+TRANSP:OPAQUE
+END:VEVENT
+
+END:VCALENDAR
+
Index: libkcal/tests/data/vCalendar/KOrganizer_vCalTestCase04.vcs.ical.ref
===================================================================
--- libkcal/tests/data/vCalendar/KOrganizer_vCalTestCase04.vcs.ical.ref	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ libkcal/tests/data/vCalendar/KOrganizer_vCalTestCase04.vcs.ical.ref	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -1,22 +1,21 @@
-BEGIN:VCALENDAR
-PRODID:-//K Desktop Environment//NONSGML libkcal 3.5//EN
-VERSION:2.0
-BEGIN:VEVENT
-DTSTAMP:20050604T165651Z
-ORGANIZER:MAILTO:reinhold@kainhofer.com
-CREATED:20050520T105002Z
-UID:KOrganizer-776556232.395
-SEQUENCE:4
-LAST-MODIFIED:20050520T105750Z
-SUMMARY:20. Mai 2005\, 16-17 Uhr\, alle 3 Monate am 20.\, bis 30. Juni 
- 2006
-CLASS:PUBLIC
-PRIORITY:5
-RRULE:FREQ=MONTHLY;UNTIL=20060630T000000Z;INTERVAL=3;BYMONTHDAY=20
-DTSTART:20050520T140000Z
-DTEND:20050520T150000Z
-TRANSP:OPAQUE
-END:VEVENT
-
-END:VCALENDAR
-
+BEGIN:VCALENDAR
+PRODID:-//K Desktop Environment//NONSGML libkcal 3.5//EN
+VERSION:2.0
+BEGIN:VEVENT
+DTSTAMP:20050604T165651Z
+ORGANIZER:MAILTO:reinhold@kainhofer.com
+CREATED:20050520T105002Z
+UID:KOrganizer-776556232.395
+SEQUENCE:4
+LAST-MODIFIED:20050520T105750Z
+SUMMARY:20. Mai 2005\, 16-17 Uhr\, alle 3 Monate am 20.\, bis 30. Juni 
+ 2006
+PRIORITY:5
+RRULE:FREQ=MONTHLY;UNTIL=20060630T000000Z;INTERVAL=3;BYMONTHDAY=20
+DTSTART:20050520T140000Z
+DTEND:20050520T150000Z
+TRANSP:OPAQUE
+END:VEVENT
+
+END:VCALENDAR
+
Index: libkcal/tests/data/vCalendar/KOrganizer_vCalTestCase06.vcs.ical.ref
===================================================================
--- libkcal/tests/data/vCalendar/KOrganizer_vCalTestCase06.vcs.ical.ref	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ libkcal/tests/data/vCalendar/KOrganizer_vCalTestCase06.vcs.ical.ref	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -1,21 +1,19 @@
-BEGIN:VCALENDAR
-PRODID:-//K Desktop Environment//NONSGML libkcal 3.5//EN
-VERSION:2.0
-BEGIN:VEVENT
-DTSTAMP:20050604T165652Z
-ORGANIZER:MAILTO:reinhold@kainhofer.com
-CREATED:20050520T104755Z
-UID:KOrganizer-872504546.272
-SEQUENCE:0
-LAST-MODIFIED:20050520T104755Z
-SUMMARY:20. Mai 2005\, 12-13 Uhr\, alle 3 Tage\, 50 mal
-CLASS:PUBLIC
-PRIORITY:5
-RRULE:FREQ=DAILY;COUNT=50;INTERVAL=3
-DTSTART:20050520T100000Z
-DTEND:20050520T110000Z
-TRANSP:OPAQUE
-END:VEVENT
-
-END:VCALENDAR
-
+BEGIN:VCALENDAR
+PRODID:-//K Desktop Environment//NONSGML libkcal 3.5//EN
+VERSION:2.0
+BEGIN:VEVENT
+DTSTAMP:20050604T165652Z
+ORGANIZER:MAILTO:reinhold@kainhofer.com
+CREATED:20050520T104755Z
+UID:KOrganizer-872504546.272
+LAST-MODIFIED:20050520T104755Z
+SUMMARY:20. Mai 2005\, 12-13 Uhr\, alle 3 Tage\, 50 mal
+PRIORITY:5
+RRULE:FREQ=DAILY;COUNT=50;INTERVAL=3
+DTSTART:20050520T100000Z
+DTEND:20050520T110000Z
+TRANSP:OPAQUE
+END:VEVENT
+
+END:VCALENDAR
+
Index: libkcal/tests/data/vCalendar/KOrganizer_vCalTestCase08.vcs.ical.ref
===================================================================
--- libkcal/tests/data/vCalendar/KOrganizer_vCalTestCase08.vcs.ical.ref	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ libkcal/tests/data/vCalendar/KOrganizer_vCalTestCase08.vcs.ical.ref	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -1,21 +1,20 @@
-BEGIN:VCALENDAR
-PRODID:-//K Desktop Environment//NONSGML libkcal 3.5//EN
-VERSION:2.0
-BEGIN:VEVENT
-DTSTAMP:20050604T165654Z
-ORGANIZER:MAILTO:reinhold@kainhofer.com
-CREATED:20050520T105442Z
-UID:KOrganizer-1832470339.751
-SEQUENCE:1
-LAST-MODIFIED:20050520T105511Z
-SUMMARY:20. Mai 2005\, 23-24 Uhr\, alle 3 Jahre am vorletzten Freitag im 
- Mai\, 17 mal (not possible in vCalendar -> no RRULE)
-CLASS:PUBLIC
-PRIORITY:5
-DTSTART:20050520T210000Z
-DTEND:20050520T215900Z
-TRANSP:OPAQUE
-END:VEVENT
-
-END:VCALENDAR
-
+BEGIN:VCALENDAR
+PRODID:-//K Desktop Environment//NONSGML libkcal 3.5//EN
+VERSION:2.0
+BEGIN:VEVENT
+DTSTAMP:20050604T165654Z
+ORGANIZER:MAILTO:reinhold@kainhofer.com
+CREATED:20050520T105442Z
+UID:KOrganizer-1832470339.751
+SEQUENCE:1
+LAST-MODIFIED:20050520T105511Z
+SUMMARY:20. Mai 2005\, 23-24 Uhr\, alle 3 Jahre am vorletzten Freitag im 
+ Mai\, 17 mal (not possible in vCalendar -> no RRULE)
+PRIORITY:5
+DTSTART:20050520T210000Z
+DTEND:20050520T215900Z
+TRANSP:OPAQUE
+END:VEVENT
+
+END:VCALENDAR
+
Index: libkcal/tests/data/Compat/Evolution_2.8.2_timezone_test.ics
===================================================================
--- libkcal/tests/data/Compat/Evolution_2.8.2_timezone_test.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 0)
+++ libkcal/tests/data/Compat/Evolution_2.8.2_timezone_test.ics	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -0,0 +1,20 @@
+BEGIN:VCALENDAR
+CALSCALE:GREGORIAN
+PRODID:-//Ximian//NONSGML Evolution Calendar//EN
+VERSION:2.0
+X-LibKCal-Testsuite-OutTZ:Europe/London
+BEGIN:VEVENT
+UID:20070127T211005Z-13428-100-1-0@emsig
+DTSTAMP:20070127T211005Z
+DTSTART;TZID=/softwarestudio.org/Olson_20011030_5/Europe/London:
+ 20070127T120000
+DTEND;TZID=/softwarestudio.org/Olson_20011030_5/Europe/London:
+ 20070127T123000
+TRANSP:OPAQUE
+SEQUENCE:2
+SUMMARY:Nominal is 1200 to 1230 _GMT_ on 27 Jan 2007
+CLASS:PUBLIC
+CREATED:20070127T211013
+LAST-MODIFIED:20070127T211124
+END:VEVENT
+END:VCALENDAR

Zmiany atrybutów dla: libkcal/tests/data/Compat/Evolution_2.8.2_timezone_test.ics
___________________________________________________________________
Nazwa: svn:executable
   + *

Index: libkcal/tests/data/Compat/MSExchange.ics.ical.ref
===================================================================
--- libkcal/tests/data/Compat/MSExchange.ics.ical.ref	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ libkcal/tests/data/Compat/MSExchange.ics.ical.ref	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -1,29 +1,27 @@
-BEGIN:VCALENDAR
-PRODID:-//K Desktop Environment//NONSGML libkcal 3.5//EN
-VERSION:2.0
-X-LibKCal-Testsuite-OutTZ:America/New_York
-BEGIN:VEVENT
-DTSTAMP:20040122T092702Z
-ORGANIZER;CN=Shaheedur Haque:MAILTO:srhaque@ncube.com
-X-MICROSOFT-CDO-ALLDAYEVENT:FALSE
-X-MICROSOFT-CDO-BUSYSTATUS:BUSY
-X-MICROSOFT-CDO-IMPORTANCE:1
-X-MICROSOFT-CDO-INSTTYPE:1
-X-MICROSOFT-CDO-INTENDEDSTATUS:BUSY
-X-MICROSOFT-CDO-OWNERAPPTID:-1
-CREATED:20031111T180542Z
-UID:CD0000008B9511D182D800C04FB1625D2F076BC90B1B8C4E89EAD0A2BC0FC5B7
-SEQUENCE:0
-LAST-MODIFIED:20031111T180554Z
-SUMMARY:Bob Bond's staff
-STATUS:TENTATIVE
-CLASS:PUBLIC
-PRIORITY:5
-RRULE:FREQ=WEEKLY;BYDAY=MO;WKST=SU
-DTSTART:20031110T180000Z
-DTEND:20031110T190000Z
-TRANSP:OPAQUE
-END:VEVENT
-
-END:VCALENDAR
-
+BEGIN:VCALENDAR
+PRODID:-//K Desktop Environment//NONSGML libkcal 3.5//EN
+VERSION:2.0
+X-LibKCal-Testsuite-OutTZ:America/New_York
+BEGIN:VEVENT
+DTSTAMP:20040122T092702Z
+ORGANIZER;CN=Shaheedur Haque:MAILTO:srhaque@ncube.com
+X-MICROSOFT-CDO-ALLDAYEVENT:FALSE
+X-MICROSOFT-CDO-BUSYSTATUS:BUSY
+X-MICROSOFT-CDO-IMPORTANCE:1
+X-MICROSOFT-CDO-INSTTYPE:1
+X-MICROSOFT-CDO-INTENDEDSTATUS:BUSY
+X-MICROSOFT-CDO-OWNERAPPTID:-1
+CREATED:20031111T180542Z
+UID:CD0000008B9511D182D800C04FB1625D2F076BC90B1B8C4E89EAD0A2BC0FC5B7
+LAST-MODIFIED:20031111T180554Z
+SUMMARY:Bob Bond's staff
+STATUS:TENTATIVE
+PRIORITY:5
+RRULE:FREQ=WEEKLY;BYDAY=MO;WKST=SU
+DTSTART:20031110T180000Z
+DTEND:20031110T190000Z
+TRANSP:OPAQUE
+END:VEVENT
+
+END:VCALENDAR
+
Index: libkcal/tests/data/Compat/Evolution_2.8.2_timezone_test.ics.ical.ref
===================================================================
--- libkcal/tests/data/Compat/Evolution_2.8.2_timezone_test.ics.ical.ref	(.../tags/KDE/3.5.6/kdepim)	(wersja 0)
+++ libkcal/tests/data/Compat/Evolution_2.8.2_timezone_test.ics.ical.ref	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -0,0 +1,18 @@
+BEGIN:VCALENDAR
+PRODID:-//K Desktop Environment//NONSGML libkcal 3.5//EN
+VERSION:2.0
+X-LibKCal-Testsuite-OutTZ:Europe/London
+BEGIN:VEVENT
+DTSTAMP:20070127T211005Z
+CREATED:20070127T211013
+UID:20070127T211005Z-13428-100-1-0@emsig
+SEQUENCE:2
+LAST-MODIFIED:20070127T211124
+SUMMARY:Nominal is 1200 to 1230 _GMT_ on 27 Jan 2007
+DTSTART:20070127T120000Z
+DTEND:20070127T123000Z
+TRANSP:OPAQUE
+END:VEVENT
+
+END:VCALENDAR
+
Index: libkcal/tests/data/Compat/Mozilla_1.0.ics.ical.ref
===================================================================
--- libkcal/tests/data/Compat/Mozilla_1.0.ics.ical.ref	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ libkcal/tests/data/Compat/Mozilla_1.0.ics.ical.ref	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -1,89 +1,74 @@
-BEGIN:VCALENDAR
-PRODID:-//K Desktop Environment//NONSGML libkcal 3.5//EN
-VERSION:2.0
-BEGIN:VTODO
-DTSTAMP:20040518T105729Z
-ORGANIZER:MAILTO:
-CREATED:20040501T080000Z
-UID:26110226-9e9e-11d8-90c9-e6c8f9becdf7
-SEQUENCE:0
-LAST-MODIFIED:20040518T105729Z
-SUMMARY:Call Beacon to transfer funds
-STATUS:NEEDS-ACTION
-CLASS:PRIVATE
-PRIORITY:5
-DUE:20040505T111500Z
-DTSTART:20040505T101500Z
-PERCENT-COMPLETE:0
-END:VTODO
-
-BEGIN:VEVENT
-DTSTAMP:20040518T105729Z
-ORGANIZER:MAILTO:
-CREATED:20040518T105729Z
-UID:06ef0474-1dd2-11b2-853d-cc63771f70dd
-SEQUENCE:0
-LAST-MODIFIED:20040504T211728Z
-SUMMARY:Convivium at 2707 Anderson Dr\, Raleigh\, 27608
-STATUS:CONFIRMED
-CLASS:PRIVATE
-PRIORITY:5
-DTSTART:20040516T200000Z
-DTEND:20040516T220000Z
-TRANSP:OPAQUE
-END:VEVENT
-
-BEGIN:VEVENT
-DTSTAMP:20040518T105729Z
-ORGANIZER:MAILTO:
-X-MOZILLA-ALARM-DEFAULT-LENGTH:0
-CREATED:20040518T105729Z
-UID:896c9eb4-1dd2-11b2-b487-b1bef43989c3
-SEQUENCE:0
-LAST-MODIFIED:20040518T105729Z
-DESCRIPTION:15-501 E Durham\, lt Easttowne Dr\, 3rd left Providence\, 3rd 
- drive rt\, up on ste 200
-SUMMARY:Dental Exam
-STATUS:CONFIRMED
-CLASS:PRIVATE
-PRIORITY:5
-DTSTART:20040510T090000Z
-DTEND:20040510T110000Z
-TRANSP:OPAQUE
-END:VEVENT
-
-BEGIN:VEVENT
-DTSTAMP:20040518T105729Z
-ORGANIZER:MAILTO:
-CREATED:20040518T105729Z
-UID:918141053
-SEQUENCE:0
-LAST-MODIFIED:20040503T202715Z
-SUMMARY:Performance with Anne
-LOCATION:Raleigh
-STATUS:CONFIRMED
-CLASS:PRIVATE
-PRIORITY:5
-DTSTART:20040523T170000Z
-DTEND:20040523T200000Z
-TRANSP:OPAQUE
-END:VEVENT
-
-BEGIN:VEVENT
-DTSTAMP:20040518T105729Z
-ORGANIZER:MAILTO:
-CREATED:20040518T105729Z
-UID:9387e0e8-9ea1-11d8-86ed-b77ddbb7d081
-SEQUENCE:0
-LAST-MODIFIED:20040518T105729Z
-SUMMARY:Yemassee Graduation
-STATUS:CONFIRMED
-CLASS:PRIVATE
-PRIORITY:5
-DTSTART;VALUE=DATE:20040528
-DTEND;VALUE=DATE:20040529
-TRANSP:OPAQUE
-END:VEVENT
-
-END:VCALENDAR
-
+BEGIN:VCALENDAR
+PRODID:-//K Desktop Environment//NONSGML libkcal 3.5//EN
+VERSION:2.0
+BEGIN:VTODO
+DTSTAMP:20040518T105729Z
+CREATED:20040501T080000Z
+UID:26110226-9e9e-11d8-90c9-e6c8f9becdf7
+LAST-MODIFIED:20040518T105729Z
+SUMMARY:Call Beacon to transfer funds
+STATUS:NEEDS-ACTION
+CLASS:PRIVATE
+DUE:20040505T111500Z
+DTSTART:20040505T101500Z
+PERCENT-COMPLETE:0
+END:VTODO
+
+BEGIN:VEVENT
+DTSTAMP:20040518T105729Z
+CREATED:20040518T105729Z
+UID:06ef0474-1dd2-11b2-853d-cc63771f70dd
+LAST-MODIFIED:20040504T211728Z
+SUMMARY:Convivium at 2707 Anderson Dr\, Raleigh\, 27608
+STATUS:CONFIRMED
+CLASS:PRIVATE
+DTSTART:20040516T200000Z
+DTEND:20040516T220000Z
+TRANSP:OPAQUE
+END:VEVENT
+
+BEGIN:VEVENT
+DTSTAMP:20040518T105729Z
+X-MOZILLA-ALARM-DEFAULT-LENGTH:0
+CREATED:20040518T105729Z
+UID:896c9eb4-1dd2-11b2-b487-b1bef43989c3
+LAST-MODIFIED:20040518T105729Z
+DESCRIPTION:15-501 E Durham\, lt Easttowne Dr\, 3rd left Providence\, 3rd 
+ drive rt\, up on ste 200
+SUMMARY:Dental Exam
+STATUS:CONFIRMED
+CLASS:PRIVATE
+DTSTART:20040510T090000Z
+DTEND:20040510T110000Z
+TRANSP:OPAQUE
+END:VEVENT
+
+BEGIN:VEVENT
+DTSTAMP:20040518T105729Z
+CREATED:20040518T105729Z
+UID:918141053
+LAST-MODIFIED:20040503T202715Z
+SUMMARY:Performance with Anne
+LOCATION:Raleigh
+STATUS:CONFIRMED
+CLASS:PRIVATE
+DTSTART:20040523T170000Z
+DTEND:20040523T200000Z
+TRANSP:OPAQUE
+END:VEVENT
+
+BEGIN:VEVENT
+DTSTAMP:20040518T105729Z
+CREATED:20040518T105729Z
+UID:9387e0e8-9ea1-11d8-86ed-b77ddbb7d081
+LAST-MODIFIED:20040518T105729Z
+SUMMARY:Yemassee Graduation
+STATUS:CONFIRMED
+CLASS:PRIVATE
+DTSTART;VALUE=DATE:20040528
+DTEND;VALUE=DATE:20040529
+TRANSP:OPAQUE
+END:VEVENT
+
+END:VCALENDAR
+
Index: libkcal/tests/data/Compat/KOrganizer_3.1.ics.ical.ref
===================================================================
--- libkcal/tests/data/Compat/KOrganizer_3.1.ics.ical.ref	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ libkcal/tests/data/Compat/KOrganizer_3.1.ics.ical.ref	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -1,272 +1,256 @@
-BEGIN:VCALENDAR
-PRODID:-//K Desktop Environment//NONSGML libkcal 3.5//EN
-VERSION:2.0
-BEGIN:VEVENT
-DTSTAMP:20040122T092700Z
-ORGANIZER:MAILTO:nobody@nowhere
-X-PILOTID:0
-X-PILOTSTAT:1
-CREATED:20031213T212933Z
-UID:KOrganizer-475330509.201
-SEQUENCE:0
-LAST-MODIFIED:20031213T212933Z
-DESCRIPTION:See Week 50 2003 for more events.\nRecur daily forever.\n
-SUMMARY:NAVIGATION EVENT
-CLASS:PUBLIC
-PRIORITY:5
-RRULE:FREQ=DAILY
-DTSTART:20031208T120000Z
-DTEND:20031208T130000Z
-TRANSP:OPAQUE
-END:VEVENT
-
-BEGIN:VEVENT
-DTSTAMP:20040122T092700Z
-ORGANIZER:MAILTO:nobody@nowhere
-X-PILOTID:0
-X-PILOTSTAT:1
-CREATED:20031213T212804Z
-UID:KOrganizer-465691683.1018
-SEQUENCE:0
-LAST-MODIFIED:20031213T212804Z
-SUMMARY:Recurring monthly until 1.1.2005
-CLASS:PUBLIC
-PRIORITY:5
-RRULE:FREQ=MONTHLY;UNTIL=20050101;BYMONTHDAY=11
-DTSTART:20031211T084500Z
-DTEND:20031211T103000Z
-TRANSP:OPAQUE
-END:VEVENT
-
-BEGIN:VEVENT
-DTSTAMP:20040122T092700Z
-ORGANIZER:MAILTO:nobody@nowhere
-X-PILOTID:0
-X-PILOTSTAT:1
-CREATED:20031213T213154Z
-UID:KOrganizer-1952016504.437
-SEQUENCE:1
-LAST-MODIFIED:20031213T213204Z
-SUMMARY:Birthday
-CLASS:PUBLIC
-PRIORITY:5
-CATEGORIES:Birthday
-RRULE:FREQ=YEARLY;BYMONTH=12
-DTSTART;VALUE=DATE:20031208
-DTEND;VALUE=DATE:20031209
-TRANSP:OPAQUE
-BEGIN:VALARM
-DESCRIPTION:
-ACTION:DISPLAY
-TRIGGER;VALUE=DURATION:-P1D
-END:VALARM
-
-END:VEVENT
-
-BEGIN:VEVENT
-DTSTAMP:20040122T092700Z
-ORGANIZER:MAILTO:nobody@nowhere
-X-PILOTID:0
-X-PILOTSTAT:1
-CREATED:20031213T212117Z
-UID:KOrganizer-856020879.491
-SEQUENCE:0
-LAST-MODIFIED:20031213T212117Z
-DESCRIPTION:9:30 - 11:15 (UTC)\nRecurring twice
-SUMMARY:Another Event
-CLASS:PUBLIC
-PRIORITY:5
-RRULE:FREQ=DAILY;COUNT=2
-DTSTART:20031209T093000Z
-DTEND:20031209T111500Z
-TRANSP:OPAQUE
-END:VEVENT
-
-BEGIN:VEVENT
-DTSTAMP:20040122T092700Z
-ORGANIZER:MAILTO:nobody@nowhere
-ATTENDEE;CN=Another Name;RSVP=TRUE;PARTSTAT=ACCEPTED;ROLE=NON-PARTICIPANT:
- mailto:two@yyy.yy
-ATTENDEE;CN=One Name;RSVP=FALSE;PARTSTAT=NEEDS-ACTION;
- ROLE=REQ-PARTICIPANT:mailto:one@xxx.xx
-X-PILOTID:0
-X-PILOTSTAT:1
-CREATED:20031213T212528Z
-UID:KOrganizer-2056335629.565
-SEQUENCE:1
-LAST-MODIFIED:20031213T212636Z
-DESCRIPTION:Reminder 13 minutes\nShow time as free\nCategory Special 
- Occasion\nAccess Private\nTwo attendees.\nAlert.wav sound alarm\n
-SUMMARY:Full Information Event
-LOCATION:This is a location
-CLASS:PRIVATE
-PRIORITY:5
-CATEGORIES:Special Occasion
-DTSTART:20031211T133000Z
-DTEND:20031211T154500Z
-TRANSP:OPAQUE
-BEGIN:VALARM
-ATTACH:/usr/share/apps/korganizer/sounds/alert.wav
-ACTION:AUDIO
-TRIGGER;VALUE=DURATION:-PT13M
-END:VALARM
-
-END:VEVENT
-
-BEGIN:VEVENT
-DTSTAMP:20040122T092700Z
-ORGANIZER:MAILTO:nobody@nowhere
-X-PILOTID:0
-X-PILOTSTAT:1
-CREATED:20031213T213318Z
-UID:KOrganizer-951116794.484
-SEQUENCE:0
-LAST-MODIFIED:20031213T213318Z
-DESCRIPTION:Recurring until 10.12.\nException 9.12.\n
-SUMMARY:Recurring with exception
-CLASS:PUBLIC
-PRIORITY:5
-RRULE:FREQ=DAILY;UNTIL=20031210
-EXDATE;VALUE=DATE:20031209
-DTSTART:20031208T163000Z
-DTEND:20031208T184500Z
-TRANSP:OPAQUE
-END:VEVENT
-
-BEGIN:VEVENT
-DTSTAMP:20040122T092700Z
-ORGANIZER:MAILTO:nobody@nowhere
-X-PILOTID:0
-X-PILOTSTAT:1
-CREATED:20031213T213357Z
-UID:KOrganizer-659286401.509
-SEQUENCE:1
-LAST-MODIFIED:20031213T213426Z
-SUMMARY:Recurring three times two days interval
-CLASS:PUBLIC
-PRIORITY:5
-RRULE:FREQ=DAILY;COUNT=3;INTERVAL=2
-DTSTART:20031208T194500Z
-DTEND:20031208T213000Z
-TRANSP:OPAQUE
-END:VEVENT
-
-BEGIN:VEVENT
-DTSTAMP:20040122T092700Z
-ORGANIZER:MAILTO:nobody@nowhere
-X-PILOTID:0
-X-PILOTSTAT:1
-CREATED:20031213T212707Z
-UID:KOrganizer-1025455571.504
-SEQUENCE:1
-LAST-MODIFIED:20031213T212727Z
-DESCRIPTION:Recurring weekly three times on wednesday
-SUMMARY:Recurring weekly
-CLASS:PUBLIC
-PRIORITY:5
-RRULE:FREQ=WEEKLY;COUNT=3;BYDAY=WE
-DTSTART:20031210T073000Z
-DTEND:20031210T083000Z
-TRANSP:OPAQUE
-END:VEVENT
-
-BEGIN:VEVENT
-DTSTAMP:20040122T092700Z
-ORGANIZER:MAILTO:nobody@nowhere
-X-PILOTID:0
-X-PILOTSTAT:1
-CREATED:20031213T162226Z
-UID:KOrganizer-406380218.717
-SEQUENCE:1
-LAST-MODIFIED:20031213T212040Z
-DESCRIPTION:10:00 - 13:30 (UTC)\n
-SUMMARY:An Event
-CLASS:PUBLIC
-PRIORITY:5
-DTSTART:20031213T100000Z
-DTEND:20031213T133000Z
-TRANSP:OPAQUE
-END:VEVENT
-
-BEGIN:VEVENT
-DTSTAMP:20040122T092700Z
-ORGANIZER:MAILTO:nobody@nowhere
-X-PILOTID:0
-X-PILOTSTAT:1
-CREATED:20031213T212311Z
-UID:KOrganizer-1927781860.81
-SEQUENCE:2
-LAST-MODIFIED:20031213T212315Z
-DESCRIPTION:Three day all-day event.\n
-SUMMARY:All day 3
-CLASS:PUBLIC
-PRIORITY:5
-DTSTART;VALUE=DATE:20031210
-DTEND;VALUE=DATE:20031213
-TRANSP:OPAQUE
-END:VEVENT
-
-BEGIN:VEVENT
-DTSTAMP:20040122T092700Z
-ORGANIZER:MAILTO:nobody@nowhere
-X-PILOTID:0
-X-PILOTSTAT:1
-CREATED:20031213T212250Z
-UID:KOrganizer-1744115041.851
-SEQUENCE:2
-LAST-MODIFIED:20031213T212259Z
-DESCRIPTION:Two day all-day event.\n
-SUMMARY:All Day 2
-CLASS:PUBLIC
-PRIORITY:5
-DTSTART;VALUE=DATE:20031209
-DTEND;VALUE=DATE:20031211
-TRANSP:OPAQUE
-END:VEVENT
-
-BEGIN:VEVENT
-DTSTAMP:20040122T092700Z
-ORGANIZER:MAILTO:nobody@nowhere
-X-PILOTID:0
-X-PILOTSTAT:1
-CREATED:20031213T213054Z
-UID:KOrganizer-1149443407.784
-SEQUENCE:1
-LAST-MODIFIED:20031213T213109Z
-DESCRIPTION:12.12. 17:15 to 13.12. 19:15\n1 hour alarm
-SUMMARY:Multi-Day Event with Start/End Time
-CLASS:PUBLIC
-PRIORITY:5
-DTSTART:20031212T171500Z
-DTEND:20031213T191500Z
-TRANSP:OPAQUE
-BEGIN:VALARM
-DESCRIPTION:
-ACTION:DISPLAY
-TRIGGER;VALUE=DURATION:-PT1H
-END:VALARM
-
-END:VEVENT
-
-BEGIN:VEVENT
-DTSTAMP:20040122T092700Z
-ORGANIZER:MAILTO:nobody@nowhere
-X-PILOTID:0
-X-PILOTSTAT:1
-CREATED:20031213T212219Z
-UID:KOrganizer-182017314.321
-SEQUENCE:2
-LAST-MODIFIED:20031213T212229Z
-DESCRIPTION:One day all-day event.\nCategories Birthday\, Personal\n
-SUMMARY:All Day
-CLASS:PUBLIC
-PRIORITY:5
-CATEGORIES:Birthday
-CATEGORIES:Personal
-DTSTART;VALUE=DATE:20031212
-DTEND;VALUE=DATE:20031213
-TRANSP:OPAQUE
-END:VEVENT
-
-END:VCALENDAR
-
+BEGIN:VCALENDAR
+PRODID:-//K Desktop Environment//NONSGML libkcal 3.5//EN
+VERSION:2.0
+BEGIN:VEVENT
+DTSTAMP:20040122T092700Z
+ORGANIZER:MAILTO:nobody@nowhere
+X-PILOTID:0
+X-PILOTSTAT:1
+CREATED:20031213T212933Z
+UID:KOrganizer-475330509.201
+LAST-MODIFIED:20031213T212933Z
+DESCRIPTION:See Week 50 2003 for more events.\nRecur daily forever.\n
+SUMMARY:NAVIGATION EVENT
+PRIORITY:5
+RRULE:FREQ=DAILY
+DTSTART:20031208T120000Z
+DTEND:20031208T130000Z
+TRANSP:OPAQUE
+END:VEVENT
+
+BEGIN:VEVENT
+DTSTAMP:20040122T092700Z
+ORGANIZER:MAILTO:nobody@nowhere
+X-PILOTID:0
+X-PILOTSTAT:1
+CREATED:20031213T212804Z
+UID:KOrganizer-465691683.1018
+LAST-MODIFIED:20031213T212804Z
+SUMMARY:Recurring monthly until 1.1.2005
+PRIORITY:5
+RRULE:FREQ=MONTHLY;UNTIL=20050101;BYMONTHDAY=11
+DTSTART:20031211T084500Z
+DTEND:20031211T103000Z
+TRANSP:OPAQUE
+END:VEVENT
+
+BEGIN:VEVENT
+DTSTAMP:20040122T092700Z
+ORGANIZER:MAILTO:nobody@nowhere
+X-PILOTID:0
+X-PILOTSTAT:1
+CREATED:20031213T213154Z
+UID:KOrganizer-1952016504.437
+SEQUENCE:1
+LAST-MODIFIED:20031213T213204Z
+SUMMARY:Birthday
+PRIORITY:5
+CATEGORIES:Birthday
+RRULE:FREQ=YEARLY;BYMONTH=12
+DTSTART;VALUE=DATE:20031208
+DTEND;VALUE=DATE:20031209
+TRANSP:OPAQUE
+BEGIN:VALARM
+DESCRIPTION:
+ACTION:DISPLAY
+TRIGGER;VALUE=DURATION:-P1D
+END:VALARM
+
+END:VEVENT
+
+BEGIN:VEVENT
+DTSTAMP:20040122T092700Z
+ORGANIZER:MAILTO:nobody@nowhere
+X-PILOTID:0
+X-PILOTSTAT:1
+CREATED:20031213T212117Z
+UID:KOrganizer-856020879.491
+LAST-MODIFIED:20031213T212117Z
+DESCRIPTION:9:30 - 11:15 (UTC)\nRecurring twice
+SUMMARY:Another Event
+PRIORITY:5
+RRULE:FREQ=DAILY;COUNT=2
+DTSTART:20031209T093000Z
+DTEND:20031209T111500Z
+TRANSP:OPAQUE
+END:VEVENT
+
+BEGIN:VEVENT
+DTSTAMP:20040122T092700Z
+ORGANIZER:MAILTO:nobody@nowhere
+ATTENDEE;CN=Another Name;RSVP=TRUE;PARTSTAT=ACCEPTED;ROLE=NON-PARTICIPANT:
+ mailto:two@yyy.yy
+ATTENDEE;CN=One Name;RSVP=FALSE;PARTSTAT=NEEDS-ACTION;
+ ROLE=REQ-PARTICIPANT:mailto:one@xxx.xx
+X-PILOTID:0
+X-PILOTSTAT:1
+CREATED:20031213T212528Z
+UID:KOrganizer-2056335629.565
+SEQUENCE:1
+LAST-MODIFIED:20031213T212636Z
+DESCRIPTION:Reminder 13 minutes\nShow time as free\nCategory Special 
+ Occasion\nAccess Private\nTwo attendees.\nAlert.wav sound alarm\n
+SUMMARY:Full Information Event
+LOCATION:This is a location
+CLASS:PRIVATE
+PRIORITY:5
+CATEGORIES:Special Occasion
+DTSTART:20031211T133000Z
+DTEND:20031211T154500Z
+TRANSP:OPAQUE
+BEGIN:VALARM
+ATTACH:/usr/share/apps/korganizer/sounds/alert.wav
+ACTION:AUDIO
+TRIGGER;VALUE=DURATION:-PT13M
+END:VALARM
+
+END:VEVENT
+
+BEGIN:VEVENT
+DTSTAMP:20040122T092700Z
+ORGANIZER:MAILTO:nobody@nowhere
+X-PILOTID:0
+X-PILOTSTAT:1
+CREATED:20031213T213318Z
+UID:KOrganizer-951116794.484
+LAST-MODIFIED:20031213T213318Z
+DESCRIPTION:Recurring until 10.12.\nException 9.12.\n
+SUMMARY:Recurring with exception
+PRIORITY:5
+RRULE:FREQ=DAILY;UNTIL=20031210
+EXDATE;VALUE=DATE:20031209
+DTSTART:20031208T163000Z
+DTEND:20031208T184500Z
+TRANSP:OPAQUE
+END:VEVENT
+
+BEGIN:VEVENT
+DTSTAMP:20040122T092700Z
+ORGANIZER:MAILTO:nobody@nowhere
+X-PILOTID:0
+X-PILOTSTAT:1
+CREATED:20031213T213357Z
+UID:KOrganizer-659286401.509
+SEQUENCE:1
+LAST-MODIFIED:20031213T213426Z
+SUMMARY:Recurring three times two days interval
+PRIORITY:5
+RRULE:FREQ=DAILY;COUNT=3;INTERVAL=2
+DTSTART:20031208T194500Z
+DTEND:20031208T213000Z
+TRANSP:OPAQUE
+END:VEVENT
+
+BEGIN:VEVENT
+DTSTAMP:20040122T092700Z
+ORGANIZER:MAILTO:nobody@nowhere
+X-PILOTID:0
+X-PILOTSTAT:1
+CREATED:20031213T212707Z
+UID:KOrganizer-1025455571.504
+SEQUENCE:1
+LAST-MODIFIED:20031213T212727Z
+DESCRIPTION:Recurring weekly three times on wednesday
+SUMMARY:Recurring weekly
+PRIORITY:5
+RRULE:FREQ=WEEKLY;COUNT=3;BYDAY=WE
+DTSTART:20031210T073000Z
+DTEND:20031210T083000Z
+TRANSP:OPAQUE
+END:VEVENT
+
+BEGIN:VEVENT
+DTSTAMP:20040122T092700Z
+ORGANIZER:MAILTO:nobody@nowhere
+X-PILOTID:0
+X-PILOTSTAT:1
+CREATED:20031213T162226Z
+UID:KOrganizer-406380218.717
+SEQUENCE:1
+LAST-MODIFIED:20031213T212040Z
+DESCRIPTION:10:00 - 13:30 (UTC)\n
+SUMMARY:An Event
+PRIORITY:5
+DTSTART:20031213T100000Z
+DTEND:20031213T133000Z
+TRANSP:OPAQUE
+END:VEVENT
+
+BEGIN:VEVENT
+DTSTAMP:20040122T092700Z
+ORGANIZER:MAILTO:nobody@nowhere
+X-PILOTID:0
+X-PILOTSTAT:1
+CREATED:20031213T212311Z
+UID:KOrganizer-1927781860.81
+SEQUENCE:2
+LAST-MODIFIED:20031213T212315Z
+DESCRIPTION:Three day all-day event.\n
+SUMMARY:All day 3
+PRIORITY:5
+DTSTART;VALUE=DATE:20031210
+DTEND;VALUE=DATE:20031213
+TRANSP:OPAQUE
+END:VEVENT
+
+BEGIN:VEVENT
+DTSTAMP:20040122T092700Z
+ORGANIZER:MAILTO:nobody@nowhere
+X-PILOTID:0
+X-PILOTSTAT:1
+CREATED:20031213T212250Z
+UID:KOrganizer-1744115041.851
+SEQUENCE:2
+LAST-MODIFIED:20031213T212259Z
+DESCRIPTION:Two day all-day event.\n
+SUMMARY:All Day 2
+PRIORITY:5
+DTSTART;VALUE=DATE:20031209
+DTEND;VALUE=DATE:20031211
+TRANSP:OPAQUE
+END:VEVENT
+
+BEGIN:VEVENT
+DTSTAMP:20040122T092700Z
+ORGANIZER:MAILTO:nobody@nowhere
+X-PILOTID:0
+X-PILOTSTAT:1
+CREATED:20031213T213054Z
+UID:KOrganizer-1149443407.784
+SEQUENCE:1
+LAST-MODIFIED:20031213T213109Z
+DESCRIPTION:12.12. 17:15 to 13.12. 19:15\n1 hour alarm
+SUMMARY:Multi-Day Event with Start/End Time
+PRIORITY:5
+DTSTART:20031212T171500Z
+DTEND:20031213T191500Z
+TRANSP:OPAQUE
+BEGIN:VALARM
+DESCRIPTION:
+ACTION:DISPLAY
+TRIGGER;VALUE=DURATION:-PT1H
+END:VALARM
+
+END:VEVENT
+
+BEGIN:VEVENT
+DTSTAMP:20040122T092700Z
+ORGANIZER:MAILTO:nobody@nowhere
+X-PILOTID:0
+X-PILOTSTAT:1
+CREATED:20031213T212219Z
+UID:KOrganizer-182017314.321
+SEQUENCE:2
+LAST-MODIFIED:20031213T212229Z
+DESCRIPTION:One day all-day event.\nCategories Birthday\, Personal\n
+SUMMARY:All Day
+PRIORITY:5
+CATEGORIES:Birthday
+CATEGORIES:Personal
+DTSTART;VALUE=DATE:20031212
+DTEND;VALUE=DATE:20031213
+TRANSP:OPAQUE
+END:VEVENT
+
+END:VCALENDAR
+
Index: libkcal/tests/data/Compat/KOrganizer_3.1a.ics.ical.ref
===================================================================
--- libkcal/tests/data/Compat/KOrganizer_3.1a.ics.ical.ref	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ libkcal/tests/data/Compat/KOrganizer_3.1a.ics.ical.ref	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -1,44 +1,42 @@
-BEGIN:VCALENDAR
-PRODID:-//K Desktop Environment//NONSGML libkcal 3.5//EN
-VERSION:2.0
-BEGIN:VEVENT
-DTSTAMP:20040122T092701Z
-ORGANIZER:MAILTO:nobody@nowhere
-X-PILOTID:0
-X-PILOTSTAT:1
-CREATED:20031213T215123Z
-UID:KOrganizer-676656311.951
-SEQUENCE:1
-LAST-MODIFIED:20031213T215131Z
-DESCRIPTION:Can you spell utf8?\nÄÖÜäöüß\nCan you escape?\nSlash:
- /\,Backslash:\\\,Quotes:\"\nComma:\,\nSemicolon:\;
-SUMMARY:Umlaut test aäöüßÄÖÜ - does it work?
-CLASS:PUBLIC
-PRIORITY:5
-DTSTART:20031211T101500Z
-DTEND:20031211T143000Z
-TRANSP:OPAQUE
-END:VEVENT
-
-BEGIN:VEVENT
-DTSTAMP:20040122T092701Z
-ORGANIZER:MAILTO:nobody@nowhere
-X-PILOTID:0
-X-PILOTSTAT:1
-CREATED:20031213T215230Z
-UID:KOrganizer-1343647538.858
-SEQUENCE:6
-LAST-MODIFIED:20031213T215439Z
-DESCRIPTION:Recur Mon\, Tue\, Wed six times\nThis doesn't seem to be 
- correctly handled by the view.\n
-SUMMARY:Recurring weekly
-CLASS:PUBLIC
-PRIORITY:5
-RRULE:FREQ=WEEKLY;COUNT=6;BYDAY=MO,TU,WE
-DTSTART:20031209T090000Z
-DTEND:20031209T113000Z
-TRANSP:OPAQUE
-END:VEVENT
-
-END:VCALENDAR
-
+BEGIN:VCALENDAR
+PRODID:-//K Desktop Environment//NONSGML libkcal 3.5//EN
+VERSION:2.0
+BEGIN:VEVENT
+DTSTAMP:20040122T092701Z
+ORGANIZER:MAILTO:nobody@nowhere
+X-PILOTID:0
+X-PILOTSTAT:1
+CREATED:20031213T215123Z
+UID:KOrganizer-676656311.951
+SEQUENCE:1
+LAST-MODIFIED:20031213T215131Z
+DESCRIPTION:Can you spell utf8?\nÄÖÜäöüß\nCan you escape?\nSlash:
+ /\,Backslash:\\\,Quotes:\"\nComma:\,\nSemicolon:\;
+SUMMARY:Umlaut test aäöüßÄÖÜ - does it work?
+PRIORITY:5
+DTSTART:20031211T101500Z
+DTEND:20031211T143000Z
+TRANSP:OPAQUE
+END:VEVENT
+
+BEGIN:VEVENT
+DTSTAMP:20040122T092701Z
+ORGANIZER:MAILTO:nobody@nowhere
+X-PILOTID:0
+X-PILOTSTAT:1
+CREATED:20031213T215230Z
+UID:KOrganizer-1343647538.858
+SEQUENCE:6
+LAST-MODIFIED:20031213T215439Z
+DESCRIPTION:Recur Mon\, Tue\, Wed six times\nThis doesn't seem to be 
+ correctly handled by the view.\n
+SUMMARY:Recurring weekly
+PRIORITY:5
+RRULE:FREQ=WEEKLY;COUNT=6;BYDAY=MO,TU,WE
+DTSTART:20031209T090000Z
+DTEND:20031209T113000Z
+TRANSP:OPAQUE
+END:VEVENT
+
+END:VCALENDAR
+
Index: libkcal/tests/data/Compat/KOrganizer_3.2.ics.ical.ref
===================================================================
--- libkcal/tests/data/Compat/KOrganizer_3.2.ics.ical.ref	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ libkcal/tests/data/Compat/KOrganizer_3.2.ics.ical.ref	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -1,89 +1,83 @@
-BEGIN:VCALENDAR
-PRODID:-//K Desktop Environment//NONSGML libkcal 3.5//EN
-VERSION:2.0
-BEGIN:VEVENT
-DTSTAMP:20040122T092701Z
-ORGANIZER:MAILTO:nobody@nowhere
-ATTENDEE;CN=Hans Wurst;RSVP=TRUE;PARTSTAT=TENTATIVE;ROLE=CHAIR:mailto:
- hw@abc.de
-CREATED:20031213T204544Z
-UID:KOrganizer-581715779.572
-SEQUENCE:0
-LAST-MODIFIED:20031213T204544Z
-DESCRIPTION:8.12. - 11.12 13:30 - 10:30\nreminder 40 hours\nOne Attendee
-SUMMARY:Multi-Day Event
-CLASS:PUBLIC
-PRIORITY:5
-DTSTART:20031208T123000Z
-DTEND:20031211T093000Z
-TRANSP:OPAQUE
-BEGIN:VALARM
-DESCRIPTION:
-ACTION:DISPLAY
-TRIGGER;VALUE=DURATION:-P1DT16H
-END:VALARM
-
-END:VEVENT
-
-BEGIN:VEVENT
-DTSTAMP:20040122T092701Z
-ORGANIZER:MAILTO:nobody@nowhere
-CREATED:20031213T204152Z
-UID:KOrganizer-101218390.515
-SEQUENCE:0
-LAST-MODIFIED:20031213T204152Z
-SUMMARY:Holladiho
-CLASS:PUBLIC
-PRIORITY:5
-DTSTART:20031213T071500Z
-DTEND:20031213T104500Z
-TRANSP:OPAQUE
-END:VEVENT
-
-BEGIN:VEVENT
-DTSTAMP:20040122T092701Z
-ORGANIZER:MAILTO:nobody@nowhere
-CREATED:20031213T204326Z
-UID:KOrganizer-178854360.121
-SEQUENCE:0
-LAST-MODIFIED:20031213T204326Z
-DESCRIPTION:Reminder 2 hours\nShow time as free\nCategories meeting\, 
- phone call\nUmlauts: äöüÄÖÜß\nAccess: confidential\nRecurrence: 
- twice weekly on monday.\n
-SUMMARY:Full Info
-LOCATION:location
-CLASS:CONFIDENTIAL
-PRIORITY:5
-CATEGORIES:Meeting
-CATEGORIES:Phone Call
-RRULE:FREQ=WEEKLY;COUNT=2;BYDAY=MO
-EXDATE:20031209T091500Z
-DTSTART:20031209T091500Z
-DTEND:20031209T113000Z
-TRANSP:TRANSPARENT
-BEGIN:VALARM
-DESCRIPTION:
-ACTION:DISPLAY
-TRIGGER;VALUE=DURATION:-PT2H
-END:VALARM
-
-END:VEVENT
-
-BEGIN:VEVENT
-DTSTAMP:20040122T092701Z
-ORGANIZER:MAILTO:nobody@nowhere
-CREATED:20031213T204645Z
-UID:KOrganizer-367556625.513
-SEQUENCE:2
-LAST-MODIFIED:20031213T204657Z
-SUMMARY:Two-day all day event recurring twice every second month
-CLASS:PUBLIC
-PRIORITY:5
-RRULE:FREQ=MONTHLY;COUNT=2;INTERVAL=2;BYMONTHDAY=10
-DTSTART;VALUE=DATE:20031210
-DTEND;VALUE=DATE:20031212
-TRANSP:OPAQUE
-END:VEVENT
-
-END:VCALENDAR
-
+BEGIN:VCALENDAR
+PRODID:-//K Desktop Environment//NONSGML libkcal 3.5//EN
+VERSION:2.0
+BEGIN:VEVENT
+DTSTAMP:20040122T092701Z
+ORGANIZER:MAILTO:nobody@nowhere
+ATTENDEE;CN=Hans Wurst;RSVP=TRUE;PARTSTAT=TENTATIVE;ROLE=CHAIR:mailto:
+ hw@abc.de
+CREATED:20031213T204544Z
+UID:KOrganizer-581715779.572
+LAST-MODIFIED:20031213T204544Z
+DESCRIPTION:8.12. - 11.12 13:30 - 10:30\nreminder 40 hours\nOne Attendee
+SUMMARY:Multi-Day Event
+PRIORITY:5
+DTSTART:20031208T123000Z
+DTEND:20031211T093000Z
+TRANSP:OPAQUE
+BEGIN:VALARM
+DESCRIPTION:
+ACTION:DISPLAY
+TRIGGER;VALUE=DURATION:-P1DT16H
+END:VALARM
+
+END:VEVENT
+
+BEGIN:VEVENT
+DTSTAMP:20040122T092701Z
+ORGANIZER:MAILTO:nobody@nowhere
+CREATED:20031213T204152Z
+UID:KOrganizer-101218390.515
+LAST-MODIFIED:20031213T204152Z
+SUMMARY:Holladiho
+PRIORITY:5
+DTSTART:20031213T071500Z
+DTEND:20031213T104500Z
+TRANSP:OPAQUE
+END:VEVENT
+
+BEGIN:VEVENT
+DTSTAMP:20040122T092701Z
+ORGANIZER:MAILTO:nobody@nowhere
+CREATED:20031213T204326Z
+UID:KOrganizer-178854360.121
+LAST-MODIFIED:20031213T204326Z
+DESCRIPTION:Reminder 2 hours\nShow time as free\nCategories meeting\, 
+ phone call\nUmlauts: äöüÄÖÜß\nAccess: confidential\nRecurrence: 
+ twice weekly on monday.\n
+SUMMARY:Full Info
+LOCATION:location
+CLASS:CONFIDENTIAL
+PRIORITY:5
+CATEGORIES:Meeting
+CATEGORIES:Phone Call
+RRULE:FREQ=WEEKLY;COUNT=2;BYDAY=MO
+EXDATE:20031209T091500Z
+DTSTART:20031209T091500Z
+DTEND:20031209T113000Z
+TRANSP:TRANSPARENT
+BEGIN:VALARM
+DESCRIPTION:
+ACTION:DISPLAY
+TRIGGER;VALUE=DURATION:-PT2H
+END:VALARM
+
+END:VEVENT
+
+BEGIN:VEVENT
+DTSTAMP:20040122T092701Z
+ORGANIZER:MAILTO:nobody@nowhere
+CREATED:20031213T204645Z
+UID:KOrganizer-367556625.513
+SEQUENCE:2
+LAST-MODIFIED:20031213T204657Z
+SUMMARY:Two-day all day event recurring twice every second month
+PRIORITY:5
+RRULE:FREQ=MONTHLY;COUNT=2;INTERVAL=2;BYMONTHDAY=10
+DTSTART;VALUE=DATE:20031210
+DTEND;VALUE=DATE:20031212
+TRANSP:OPAQUE
+END:VEVENT
+
+END:VCALENDAR
+
Index: libkcal/tests/data/RecurrenceRule/KAlarm_3.4/KAlarm_TestCase10.ics
===================================================================
--- libkcal/tests/data/RecurrenceRule/KAlarm_3.4/KAlarm_TestCase10.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ libkcal/tests/data/RecurrenceRule/KAlarm_3.4/KAlarm_TestCase10.ics	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -3,7 +3,6 @@
 VERSION:2.0
 BEGIN:VEVENT
 DTSTAMP:20050522T130601
-ORGANIZER:MAILTO:
 CREATED:20050522T130525
 UID:KAlarm-1044160066.1024
 SEQUENCE:0
Index: libkcal/tests/data/RecurrenceRule/KAlarm_3.4/KAlarm_TestCase01.ics
===================================================================
--- libkcal/tests/data/RecurrenceRule/KAlarm_3.4/KAlarm_TestCase01.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ libkcal/tests/data/RecurrenceRule/KAlarm_3.4/KAlarm_TestCase01.ics	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -3,7 +3,6 @@
 VERSION:2.0
 BEGIN:VEVENT
 DTSTAMP:20050522T130601
-ORGANIZER:MAILTO:
 CREATED:20050522T130311
 UID:KAlarm-2080187732.550
 SEQUENCE:0
Index: libkcal/tests/data/RecurrenceRule/KAlarm_3.4/KAlarm_TestCase02.ics
===================================================================
--- libkcal/tests/data/RecurrenceRule/KAlarm_3.4/KAlarm_TestCase02.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ libkcal/tests/data/RecurrenceRule/KAlarm_3.4/KAlarm_TestCase02.ics	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -3,7 +3,6 @@
 VERSION:2.0
 BEGIN:VEVENT
 DTSTAMP:20050522T130601
-ORGANIZER:MAILTO:
 CREATED:20050522T130341
 UID:KAlarm-758521161.1036
 SEQUENCE:0
Index: libkcal/tests/data/RecurrenceRule/KAlarm_3.4/KAlarm_TestCase03.ics
===================================================================
--- libkcal/tests/data/RecurrenceRule/KAlarm_3.4/KAlarm_TestCase03.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ libkcal/tests/data/RecurrenceRule/KAlarm_3.4/KAlarm_TestCase03.ics	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -3,7 +3,6 @@
 VERSION:2.0
 BEGIN:VEVENT
 DTSTAMP:20050522T130601
-ORGANIZER:MAILTO:
 CREATED:20050522T130245
 UID:KAlarm-898217824.835
 SEQUENCE:0
Index: libkcal/tests/data/RecurrenceRule/KAlarm_3.4/KAlarm_TestCase04.ics
===================================================================
--- libkcal/tests/data/RecurrenceRule/KAlarm_3.4/KAlarm_TestCase04.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ libkcal/tests/data/RecurrenceRule/KAlarm_3.4/KAlarm_TestCase04.ics	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -3,7 +3,6 @@
 VERSION:2.0
 BEGIN:VEVENT
 DTSTAMP:20050522T130601
-ORGANIZER:MAILTO:
 CREATED:20050522T124630
 UID:KAlarm-333577782.218
 SEQUENCE:1
Index: libkcal/tests/data/RecurrenceRule/KAlarm_3.4/KAlarm_TestCase05.ics
===================================================================
--- libkcal/tests/data/RecurrenceRule/KAlarm_3.4/KAlarm_TestCase05.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ libkcal/tests/data/RecurrenceRule/KAlarm_3.4/KAlarm_TestCase05.ics	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -3,7 +3,6 @@
 VERSION:2.0
 BEGIN:VEVENT
 DTSTAMP:20050522T130601
-ORGANIZER:MAILTO:
 CREATED:20050522T130409
 UID:KAlarm-1322911691.873
 SEQUENCE:0
Index: libkcal/tests/data/RecurrenceRule/KAlarm_3.4/KAlarm_TestCase06.ics
===================================================================
--- libkcal/tests/data/RecurrenceRule/KAlarm_3.4/KAlarm_TestCase06.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ libkcal/tests/data/RecurrenceRule/KAlarm_3.4/KAlarm_TestCase06.ics	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -3,7 +3,6 @@
 VERSION:2.0
 BEGIN:VEVENT
 DTSTAMP:20050522T130601
-ORGANIZER:MAILTO:
 CREATED:20050522T124525
 UID:KAlarm-1195473896.721
 SEQUENCE:0
Index: libkcal/tests/data/RecurrenceRule/KAlarm_3.4/KAlarm_TestCase07.ics
===================================================================
--- libkcal/tests/data/RecurrenceRule/KAlarm_3.4/KAlarm_TestCase07.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ libkcal/tests/data/RecurrenceRule/KAlarm_3.4/KAlarm_TestCase07.ics	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -3,7 +3,6 @@
 VERSION:2.0
 BEGIN:VEVENT
 DTSTAMP:20050522T130601
-ORGANIZER:MAILTO:
 CREATED:20050522T130601
 UID:KAlarm-287267280.549
 SEQUENCE:0
Index: libkcal/tests/data/RecurrenceRule/KAlarm_3.4/KAlarm_TestCase08.ics
===================================================================
--- libkcal/tests/data/RecurrenceRule/KAlarm_3.4/KAlarm_TestCase08.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ libkcal/tests/data/RecurrenceRule/KAlarm_3.4/KAlarm_TestCase08.ics	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -3,7 +3,6 @@
 VERSION:2.0
 BEGIN:VEVENT
 DTSTAMP:20050522T130601
-ORGANIZER:MAILTO:
 CREATED:20050522T130440
 UID:KAlarm-651624348.728
 SEQUENCE:0
Index: libkcal/tests/data/RecurrenceRule/KAlarm_3.4/KAlarm_TestCase09.ics
===================================================================
--- libkcal/tests/data/RecurrenceRule/KAlarm_3.4/KAlarm_TestCase09.ics	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ libkcal/tests/data/RecurrenceRule/KAlarm_3.4/KAlarm_TestCase09.ics	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -3,7 +3,6 @@
 VERSION:2.0
 BEGIN:VEVENT
 DTSTAMP:20050522T130601
-ORGANIZER:MAILTO:
 CREATED:20050522T124600
 UID:KAlarm-1071184954.82
 SEQUENCE:4
Index: libkcal/tests/data/RecurrenceRule/KAlarm_3.4/KAlarm_TestCases.ics.all
===================================================================
--- libkcal/tests/data/RecurrenceRule/KAlarm_3.4/KAlarm_TestCases.ics.all	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ libkcal/tests/data/RecurrenceRule/KAlarm_3.4/KAlarm_TestCases.ics.all	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -3,7 +3,6 @@
 VERSION:2.0
 BEGIN:VEVENT
 DTSTAMP:20050522T130601
-ORGANIZER:MAILTO:
 CREATED:20050522T130311
 UID:KAlarm-2080187732.550
 SEQUENCE:0
@@ -24,7 +23,6 @@
 
 BEGIN:VEVENT
 DTSTAMP:20050522T130601
-ORGANIZER:MAILTO:
 CREATED:20050522T130341
 UID:KAlarm-758521161.1036
 SEQUENCE:0
@@ -45,7 +43,6 @@
 
 BEGIN:VEVENT
 DTSTAMP:20050522T130601
-ORGANIZER:MAILTO:
 CREATED:20050522T130245
 UID:KAlarm-898217824.835
 SEQUENCE:0
@@ -66,7 +63,6 @@
 
 BEGIN:VEVENT
 DTSTAMP:20050522T130601
-ORGANIZER:MAILTO:
 CREATED:20050522T124630
 UID:KAlarm-333577782.218
 SEQUENCE:1
@@ -88,7 +84,6 @@
 
 BEGIN:VEVENT
 DTSTAMP:20050522T130601
-ORGANIZER:MAILTO:
 CREATED:20050522T130409
 UID:KAlarm-1322911691.873
 SEQUENCE:0
@@ -109,7 +104,6 @@
 
 BEGIN:VEVENT
 DTSTAMP:20050522T130601
-ORGANIZER:MAILTO:
 CREATED:20050522T124525
 UID:KAlarm-1195473896.721
 SEQUENCE:0
@@ -137,7 +131,6 @@
 
 BEGIN:VEVENT
 DTSTAMP:20050522T130601
-ORGANIZER:MAILTO:
 CREATED:20050522T130601
 UID:KAlarm-287267280.549
 SEQUENCE:0
@@ -158,7 +151,6 @@
 
 BEGIN:VEVENT
 DTSTAMP:20050522T130601
-ORGANIZER:MAILTO:
 CREATED:20050522T130440
 UID:KAlarm-651624348.728
 SEQUENCE:0
@@ -179,7 +171,6 @@
 
 BEGIN:VEVENT
 DTSTAMP:20050522T130601
-ORGANIZER:MAILTO:
 CREATED:20050522T124600
 UID:KAlarm-1071184954.82
 SEQUENCE:4
@@ -201,7 +192,6 @@
 
 BEGIN:VEVENT
 DTSTAMP:20050522T130601
-ORGANIZER:MAILTO:
 CREATED:20050522T130525
 UID:KAlarm-1044160066.1024
 SEQUENCE:0
Index: libkcal/tests/runtestcase.pl
===================================================================
--- libkcal/tests/runtestcase.pl	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ libkcal/tests/runtestcase.pl	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -23,14 +23,18 @@
 # This little script runs a test program on a given (calendar) file and 
 # compares the output to a reference file. All discrepancies are shown 
 # to the user. Usage:
-#      runtestcase.pl appname testfile.ics
+#      runtestcase.pl appname identifier testfile.ics
+# 'identifier' is used as a suffix to allow multiple tests on the same input 
+# file during a test run.
+#
 # The application/script appname is required to take two arguments:
 #      appname inputfile outputfile
-# where inputfile is the file to be used as input data, and the ouput of the
-# programm will go to outputfile (=testfile.ics.out if called through 
+# where inputfile is the file to be used as input data, and the output of the
+# program will go to outputfile (=testfile.ics.identifier.out if called through 
 # runtestcase.pl). That outputfile is then compared to the reference file
 # testfile.ics.ref.
 
+
 if ( @ARGV != 3 ) {
   print STDERR "Missing arg! Arguments: testapp identifier filename \n";
   exit 1;
@@ -85,22 +89,23 @@
 
   $error = 0;
   $i = 0;
-  $line = 1;
-	my $errorlines = 0;
+  $line = 0;
+  my $errorlines = 0;
   while( <READ> ) {
     $out = $_;
     $ref = @ref[$i++];
+    $line++;
 
     # DTSTAMP, LAST-MODIFIED and CREATED might be different to the reference...
-    if ( $out =~ /^DTSTAMP:[0-9ZT]+$/ && $ref =~ /^DTSTAMP:[0-9ZT]+$/ ) {
+    if ( $out =~ /^DTSTAMP:[0-9ZT]+\r?$/ && $ref =~ /^DTSTAMP:[0-9ZT]+\r?$/ ) {
       next;
     }
 
-    if ( $out =~ /^LAST-MODIFIED:[0-9ZT]+$/ && $ref =~ /^LAST-MODIFIED:[0-9ZT]+$/ ) {
+    if ( $out =~ /^LAST-MODIFIED:[0-9ZT]+\r?$/ && $ref =~ /^LAST-MODIFIED:[0-9ZT]+\r?$/ ) {
       next;
     }
 
-    if ( $out =~ /^CREATED:[0-9ZT]+$/ && $ref =~ /^CREATED:[0-9ZT]+$/ ) {
+    if ( $out =~ /^CREATED:[0-9ZT]+\r?$/ && $ref =~ /^CREATED:[0-9ZT]+\r?$/ ) {
       next;
     }
 
@@ -118,7 +123,6 @@
       }
     }
     
-    $line++;
   }
 
   close READ;
Index: libkcal/incidenceformatter.cpp
===================================================================
--- libkcal/incidenceformatter.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ libkcal/incidenceformatter.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -585,7 +585,7 @@
 
 static QString string2HTML( const QString& str )
 {
-  return QStyleSheet::convertFromPlainText(str);
+  return QStyleSheet::convertFromPlainText(str, QStyleSheetItem::WhiteSpaceNormal);
 }
 
 static QString invitationRow( const QString &cell1, const QString &cell2 )
Index: libkcal/incidence.cpp
===================================================================
--- libkcal/incidence.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ libkcal/incidence.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -33,7 +33,7 @@
 Incidence::Incidence() :
   IncidenceBase(),
   mRelatedTo(0), mStatus(StatusNone), mSecrecy(SecrecyPublic),
-  mPriority(5), mRecurrence(0)
+  mPriority(0), mRecurrence(0)
 {
   recreate();
 
Index: libkcal/recurrencerule.cpp
===================================================================
--- libkcal/recurrencerule.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ libkcal/recurrencerule.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -1113,22 +1113,27 @@
     return QDateTime();
 
   // Start date is only included if it really matches
-//   if ( preDate < startDt() ) return startDt();
+  QDateTime adjustedPreDate;
+  if ( preDate < startDt() )
+    adjustedPreDate = startDt().addSecs( -1 );
+  else
+    adjustedPreDate = preDate;
+
   if ( mDuration > 0 ) {
     if ( !mCached ) buildCache();
     DateTimeList::ConstIterator it = mCachedDates.begin();
-    while ( it != mCachedDates.end() && (*it) <= preDate ) ++it;
+    while ( it != mCachedDates.end() && (*it) <= adjustedPreDate ) ++it;
     if ( it != mCachedDates.end() ) {
-//  kdDebug(5800) << "    getNext date after " << preDate << ", cached date: " << *it << endl;
+//  kdDebug(5800) << "    getNext date after " << adjustedPreDate << ", cached date: " << *it << endl;
       return (*it);
     }
   }
 
-// kdDebug(5800) << "    getNext date after " << preDate << endl;
-  Constraint interval( getNextValidDateInterval( preDate, recurrenceType() ) );
+// kdDebug(5800) << "    getNext date after " << adjustedPreDate << endl;
+  Constraint interval( getNextValidDateInterval( adjustedPreDate, recurrenceType() ) );
   DateTimeList dts = datesForInterval( interval, recurrenceType() );
   DateTimeList::Iterator dtit = dts.begin();
-  while ( dtit != dts.end() && (*dtit) <= preDate ) ++dtit;
+  while ( dtit != dts.end() && (*dtit) <= adjustedPreDate ) ++dtit;
   if ( dtit != dts.end() ) {
     if ( mDuration >= 0 && (*dtit) > endDt() ) return QDateTime();
     else return (*dtit);
@@ -1216,7 +1221,7 @@
 RecurrenceRule::Constraint RecurrenceRule::getNextValidDateInterval( const QDateTime &preDate, PeriodType type ) const
 {
   // TODO: Simplify this!
-// kdDebug(5800) << "       (o) getNextValidDateInterval after " << preDate << ", type=" << type << endl;
+  kdDebug(5800) << "       (o) getNextValidDateInterval after " << preDate << ", type=" << type << endl;
   long periods = 0;
   QDateTime start = startDt();
   QDateTime nextValid( start );
@@ -1236,6 +1241,7 @@
     case rMinutely: modifier *= 60;
     case rSecondly:
         periods = ownSecsTo( start, toDate ) / modifier;
+        periods = QMAX( 0, periods);
         if ( periods > 0 )
           periods += ( frequency() - 1 - ( (periods - 1) % frequency() ) );
         nextValid = start.addSecs( modifier * periods );
@@ -1248,6 +1254,7 @@
         modifier *= 7;
     case rDaily:
         periods = start.daysTo( toDate ) / modifier;
+        periods = QMAX( 0, periods);
         if ( periods > 0 )
           periods += (frequency() - 1 - ( (periods - 1) % frequency() ) );
         nextValid = start.addDays( modifier * periods );
@@ -1256,6 +1263,7 @@
     case rMonthly: {
         periods = 12*( toDate.date().year() - start.date().year() ) +
              ( toDate.date().month() - start.date().month() );
+        periods = QMAX( 0, periods);
         if ( periods > 0 )
           periods += (frequency() - 1 - ( (periods - 1) % frequency() ) );
         // set the day to the first day of the month, so we don't have problems
@@ -1265,6 +1273,7 @@
         break; }
     case rYearly:
         periods = ( toDate.date().year() - start.date().year() );
+        periods = QMAX( 0, periods);
         if ( periods > 0 )
           periods += ( frequency() - 1 - ( (periods - 1) % frequency() ) );
         nextValid.setDate( start.date().addYears( periods ) );
Index: libkcal/resourcelocalconfig.cpp
===================================================================
--- libkcal/resourcelocalconfig.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ libkcal/resourcelocalconfig.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -52,9 +52,7 @@
   mainLayout->addWidget( mURL, 1, 1 );
 
   formatGroup = new QButtonGroup( 1, Horizontal, i18n( "Calendar Format" ), this );
-//  formatGroup->setExclusive( true );
 
-//  formatGroup->setFrameStyle(QFrame::NoFrame);
   icalButton = new QRadioButton( i18n("iCalendar"), formatGroup );
   vcalButton = new QRadioButton( i18n("vCalendar"), formatGroup );
 
@@ -74,7 +72,7 @@
     else 
       kdDebug(5800) << "ERROR: ResourceLocalConfig::loadSettings(): Unknown format type" << endl;
   } else
-    kdDebug(5700) << "ERROR: ResourceLocalConfig::loadSettings(): no ResourceLocal, cast failed" << endl;
+    kdDebug(5800) << "ERROR: ResourceLocalConfig::loadSettings(): no ResourceLocal, cast failed" << endl;
 }
 
 void ResourceLocalConfig::saveSettings( KRES::Resource *resource )
@@ -106,7 +104,7 @@
       res->mFormat = new VCalFormat();
     }
   } else
-    kdDebug(5700) << "ERROR: ResourceLocalConfig::saveSettings(): no ResourceLocal, cast failed" << endl;
+    kdDebug(5800) << "ERROR: ResourceLocalConfig::saveSettings(): no ResourceLocal, cast failed" << endl;
 }
 
 #include "resourcelocalconfig.moc"
Index: kpilot/conduits/sysinfoconduit/sysinfo_conduit.desktop
===================================================================
--- kpilot/conduits/sysinfoconduit/sysinfo_conduit.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kpilot/conduits/sysinfoconduit/sysinfo_conduit.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -27,6 +27,7 @@
 Comment[ms]=Saluran ini menulis maklumat tentang komputer telapak dan segerakan ke fail.
 Comment[nb]=Denne kanalen skriver informasjon om PDA-en og synkroniseringen til en fil.
 Comment[nds]=De Kanaal schrifft Informatschonen över den Handreekner un de Synkroniseren na en Datei.
+Comment[ne]=यो कन्ड्युटले ह्यान्डहेल्ड बारेमा सूचना लेख्दछ र फाइलमा सिन्क गर्दछ ।
 Comment[nl]=Dit conduit slaat informatie over uw handheld en de synchronisatie op in een bestand.
 Comment[nn]=Denne koplinga skriv informasjon om den handheldte eininga di og synkroniseringa til ei fil.
 Comment[pl]=Ten łącznik zapisuje informacje o twoim palmtopie i przebiegu synchronizacji do pliku.
@@ -71,9 +72,11 @@
 Name[ja]=システム情報
 Name[km]=ព័ត៌មាន​អំពី​ប្រព័ន្ធ
 Name[lt]=Sistemos informacija
+Name[mk]=Информации за системот
 Name[ms]=Maklumat Sistem
 Name[nb]=Systeminformasjon
 Name[nds]=Systeem-Informatschoon
+Name[ne]=प्रणाली सूचना
 Name[nl]=Systeeminformatie
 Name[nn]=Systeminformasjon
 Name[pl]=Informacja systemowa
Index: kpilot/conduits/notepadconduit/notepad-conduit.desktop
===================================================================
--- kpilot/conduits/notepadconduit/notepad-conduit.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kpilot/conduits/notepadconduit/notepad-conduit.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -11,6 +11,7 @@
 Name[gl]=Caderno de Notas
 Name[hu]=Notepad
 Name[nb]=NotisBlokk
+Name[ne]=नोटप्याड
 Name[nn]=NotisBlokk
 Name[pl]=Notatnik
 Name[sv]=Anteckningar
@@ -41,6 +42,7 @@
 Comment[ms]=Saluran ini menyandarkan lukisan NotePad ke folder setempat.
 Comment[nb]=Denne kanalen tar sikkerhetskopi av NotePad tegninger til en lokal mappe.
 Comment[nds]=Sekert NotePad-Teken binnen en lokaal Orner.
+Comment[ne]=यो कन्ड्युटले स्थानीय फाइलमा नोटप्याड रेखाचित्र ब्याकअप गर्छ ।
 Comment[nl]=Dit conduit maakt een backup van de notitie-aantekeningen naar een lokale map.
 Comment[pl]=Ten łącznik robi kopię zapasową rysunków z Notatnika do lokalnego katalogu.
 Comment[pt]=Esta conduta salvaguarda desenhos NotePad para uma pasta local.
Index: kpilot/conduits/memofileconduit/memofile-conduit.desktop
===================================================================
--- kpilot/conduits/memofileconduit/memofile-conduit.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kpilot/conduits/memofileconduit/memofile-conduit.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -25,6 +25,7 @@
 Name[ms]=Fail Memo 
 Name[nb]=Notatfil
 Name[nds]=Notiz-Datei
+Name[ne]=स्मृति फाइल
 Name[nl]=Memobestand
 Name[nn]=Memofil
 Name[pl]=Plik notatki
@@ -41,7 +42,7 @@
 Name[zh_TW]=Memo 檔
 Comment=This conduit syncs your handheld memos with a local directory.
 Comment[af]=Hierdie pad sinkroniseer jou draagbare toestel se memos met 'n plaaslike gids.
-Comment[bg]=Синхронизация на бележките на КДЕ с мобилни устройства.
+Comment[bg]=Синхронизация на бележките на KDE с мобилни устройства.
 Comment[ca]=Aquest conducte sincronitza les notes de l'agenda electrònica amb un directori local.
 Comment[cs]=Toto propojení synchronizuje vaše poznámky v PDA s lokálním adresářem.
 Comment[da]=Denne kanal synkroniserer dine håndholdte memoer med en lokal mappe.
@@ -63,6 +64,7 @@
 Comment[ms]=Saluran ini mensegerakkan memo komputer telapak anda dengan direktori setempat.
 Comment[nb]=Denne kanalen synkroniserer PDA-ens notater med en lokal mappe.
 Comment[nds]=Synkroniseert de Notizen op den Handreekner mit en lokaal Orner.
+Comment[ne]=यो कन्ड्युटले स्थानीय डाइरेक्टरीमा तपाईँका ह्यान्डहेल्ड मेमो सिन्क गर्दछ ।
 Comment[nl]=Dit conduit synchroniseert de memo's van uw handheld met een lokale map.
 Comment[pl]=Ten łącznik synchronizuje notatki z palmtopa z lokalnym katalogiem.
 Comment[pt]=Esta conduta sincroniza os memorandos do seu PDA com uma pasta local.
Index: kpilot/conduits/timeconduit/time_conduit.desktop
===================================================================
--- kpilot/conduits/timeconduit/time_conduit.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kpilot/conduits/timeconduit/time_conduit.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -24,9 +24,11 @@
 Comment[it]=Questo conduit imposta l'ora sul tuo palmare prendendola dall'orologio del PC
 Comment[ja]=このコンジットはハンドヘルドの時間をPCの時計に合わせます。
 Comment[km]=បំពង់​នេះ​កំណត់​ពេលវេលា​នៅ​លើ​ឧបករណ៍​យួរដៃ​របស់​អ្នក ពី​នាឡិកា​កុំព្យូទ័រ ។
+Comment[mk]=Овој канал го поставува времето на рачниот уред според времето на компјутерот.
 Comment[ms]=Saluran ini mengeset waktu pada komputer telapak anda dari jam PC.
 Comment[nb]=Denne kanalen stiller klokka på PDA-en fra PC-klokka.
 Comment[nds]=Synkroniseert stellt Handreekner-Klock na de PC-Klock.
+Comment[ne]=यो कन्ड्युटले पीसी घडिबाट ह्यान्डहेल्डमा समय सेट गर्दछ ।
 Comment[nl]=Dit conduit stelt de tijd van uw handheld in aan de hand van de pc-klok.
 Comment[nn]=Denne koplinga set tida på den handheldte eininga di frå PC-klokka.
 Comment[pl]=Ten łącznik ustawia zegar na palmtopie zgodnie z zegarem komputera.
@@ -46,6 +48,7 @@
 Comment[zh_TW]=此軟體經由 PC 時間設定您的 handheld 時間。
 Name=Time Synchronization
 Name[af]=Tyd sinkronisasie
+Name[ar]=مزامنة الوقت
 Name[be]=Сынхранізацыя часу
 Name[bs]=Sinhronizacija vremena
 Name[ca]=Sincronització horària
@@ -69,9 +72,11 @@
 Name[ja]=時間同期
 Name[km]=សមកាលកម្ម​ពេលវេលា
 Name[lt]=Laiko sinchronizavimas
+Name[mk]=Синхронизација на време
 Name[ms]=Segerakan waktu
 Name[nb]=Tidsynkronisering
 Name[nds]=Tietsynkroniseren
+Name[ne]=समय समक्रमण
 Name[nl]=Tijdsynchronisatie
 Name[nn]=Tidsynkronisering
 Name[pl]=Synchronizacja czasu
Index: kpilot/conduits/docconduit/kpalmdoc.desktop
===================================================================
--- kpilot/conduits/docconduit/kpalmdoc.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kpilot/conduits/docconduit/kpalmdoc.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -33,6 +33,7 @@
 GenericName[ms]=Penukar PalmDOC 
 GenericName[nb]=PalmDOC-konvertering
 GenericName[nds]=PalmDOC-Ümwanneln
+GenericName[ne]=PalmDOC रुपान्तरणकर्ता
 GenericName[nl]=PalmDOC-conversie
 GenericName[nn]=PalmDOC-omformar
 GenericName[pl]=Konwerter formatu PalmDOC
Index: kpilot/conduits/docconduit/doc_conduit.desktop
===================================================================
--- kpilot/conduits/docconduit/doc_conduit.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kpilot/conduits/docconduit/doc_conduit.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -25,6 +25,7 @@
 Comment[ms]=Menambah fail teks ke komputer telapak, sesuai dengan pembaca DOC.
 Comment[nb]=Legger til tekstfiler på PDA-en, som passer for DOC-lesere.
 Comment[nds]=Föögt Textdateien op den Handreekner to, de för DOC-Kiekers passt.
+Comment[ne]=DOC रिडरका लागि उपयुक्त हुने पाठ फाइल तपाईँको ह्यान्डहेल्डमा थप्दछ ।
 Comment[nl]=Voegt tekstvelden toe aan uw handheld, geschikt voor DOC-lezers.
 Comment[nn]=Legg til tekstfiler på den handhaldne, passar til DOC-lesarar.
 Comment[pl]=Dodaje pliki tekstowe do Twojego palmtopa, w postaci odpowiedniej dla przeglądarek DOC.
@@ -48,6 +49,7 @@
 Name[fa]=رایانۀ جیبی DOC
 Name[hi]=पॉम डॉक
 Name[nds]=Palm-DOC
+Name[ne]=पाल्म DOC
 Name[pt]=DOC do Palm
 Name[ta]=பாம் ஆவணம்
 Implemented=file
Index: kpilot/conduits/configure.in.in
===================================================================
--- kpilot/conduits/configure.in.in	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kpilot/conduits/configure.in.in	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -99,7 +99,7 @@
   LIBS="$LIBS $PISOCK_LIB $MAL_LIB"
   CFLAGS="$CFLAGS $MAL_INCLUDE"
   CPPFLAGS="$CPPFLAGS $all_includes $PISOCK_INCLUDE $MAL_INCLUDE"
-  LDFLAGS="$LDFLAGS $all_libraries"
+  LDFLAGS="$LDFLAGS $PISOCK_LDFLAGS $all_libraries"
   AC_LANG_SAVE
   AC_LANG_CPLUSPLUS
   AC_TRY_LINK(dnl
Index: kpilot/conduits/malconduit/mal_conduit.desktop
===================================================================
--- kpilot/conduits/malconduit/mal_conduit.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kpilot/conduits/malconduit/mal_conduit.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -25,10 +25,10 @@
 Name[ja]=MAL (AvantGo) コンジット
 Name[km]=បំពង់ MAL (AvantGo)
 Name[lt]=MAL (AvantGo) kanalas
-Name[mk]=МAL (AvantGo) спој
 Name[ms]=Saluran MAL (AvantGo) 
 Name[nb]=MAL (AvantGo) kanal
 Name[nds]=MAL(AvantGo)-Synkroniseren
+Name[ne]=MAL (AvantGo) कन्ड्युट
 Name[nn]=MAL-kopling (AvantGo)
 Name[nso]=Conduit ya MAL (AvantGo)
 Name[pl]=Łącznik do MAL (AvantGo)
@@ -48,7 +48,7 @@
 Name[zh_CN]=MAL (AvantGo) 管道
 Comment=Syncronize AvantGo (or generally a MAL server's content) to the handheld. This allows you to view web-pages offline on the handheld, like your cinema or TV schedule, or any other web page.
 Comment[af]=Sinkroniseer AvantGo (MAL bediener inhoud) informasie na die draagbare toestel. Dit maak dit moontlik om aflyn na web blaaie, soos TV en fliek skedules, te kyk.
-Comment[bg]=Синхронизиране на AvantGo към мобилно устройство. Тази приставка Ви позволява да разглеждате уеб страници без връзка с Мрежата.
+Comment[bg]=Синхронизиране на AvantGo към мобилно устройство. Тази приставка ви позволява да разглеждате уеб страници без връзка с Мрежата.
 Comment[ca]=Sincronitza AvantGo (o el contingut d'un servidor MAL en general) a l'agenda electrònica. Això us permet veure pàgines web a l'agenda electrònica en mode desconnectat, com ara la programació de TV o cinema o qualsevol altra pàgina web.
 Comment[cs]=Synchronizace AvantGo (nebo obecně obsahu MAL serverů) s PDA. To umožňuje offline prohlížení stránek v PDA např. TV programů, programů kin a mnoha dalších stránek.
 Comment[da]=Synkronisér AvantGo (eller mere alment indholdet på en MAL-server) med den håndholdte. Det lader dig kigge på nedsider offline på den håndholdte, såsom biografer eller tv-programmer, eller en hvilken som helst anden netside.
@@ -65,12 +65,13 @@
 Comment[hu]=AvantGo (vagy MAL-kiszolgáló) adatainak szinkronizálása a kézi számítógéppel. Lehetővé teszi weboldalak offline módban való megtekintését, például a mozi- vagy tévéműsort, vagy bármi mást.
 Comment[is]=Samstillir AvantGo (eða venjulega innihald MAL þjóns) við lófatölvuna. Þetta gerir þér kleyft að skoða vefsíður þegar þú ert ótengd(ur) vefnum, t.d. kvikmynda eða sjónvarpsdagskrá.
 Comment[it]=Sincronizza AvantGo (o il contenuto di un generico server MAL) con il palmare. In questo modo potrai visualizzare le pagine web offline sul palmare come per esempio la programmazione di un cinema o una TV o qualsiasi altra pagina web.
-Comment[ja]=AvantGo (又は一般に MAL サーバのコンテンツ) とハンドヘルドを同期させます。これにより、ハンドヘルドで映画や TV 番組表、その他のウェブページをオフラインで閲覧できるようになります。
+Comment[ja]=AvantGo (または一般に MAL サーバのコンテンツ) とハンドヘルドを同期させます。これにより、ハンドヘルドで映画や TV 番組表、その他のウェブページをオフラインで閲覧できるようになります。
 Comment[km]=ធ្វើ​សមកាលកម្ម AvantGo (ជាទូទៅ​គឺ មាតិកា​របស់​ម៉ាស៊ីន​បម្រើ MAL) ទៅ​នឹង​ឧបករណ៍​យួរ​ដៃ ។ វា​អនុញ្ញាត​ឲ្យ​អ្នក​មើល​ទំព័រ​បណ្ដាញ (កាលវិភាគ​រោង​ភាពយន្ត ឬ ទូរទស្សន៍...) នៅ​ក្រៅ​បណ្ដាញ នៅ​លើ​ឧបករណ៍​យួរ​ដៃ​របស់​អ្នក ។
 Comment[lt]=Sinchronizuoti AvantGo (ar MAL serverio turinį apskritai) su nešiojamu įrenginiu. Tai leis jums peržiūrėti žiniatinklio puslapius nešiojamame įrenginyje, tokius kaip kino teatro ar TV programas, bei bet kokį kitą puslapį, neprisijungus prie Interneto.
 Comment[ms]=Mensegerakkan AvantGo (atau kandungan pelayan MAL secara umum) ke komputer telapak. Ini membolehkan anda memaparkan laman web di luar talian pada komputer telapak, seperti pawagam atau jadual TV, atau laman web lain.
 Comment[nb]=Synkroniser AvantGo (eller generelt innholdet i en MAL-tjener) til PDA-en. På denne måten kan du se nettsider frakoblet på PDA-en. slik som TV-programlister, kinoprogrammer eller andre nettsider.
 Comment[nds]=Synkroniseert den Inholt vun AvantGo oder jichtenseen anner MAL-Server ("Mobile Application Link") mit den Handreekner. So kannst Du Nettsieden ahn Verbinnen op den Handreekner ankieken, t.B. dat Kino- oder Feernsehprogramm.
+Comment[ne]=AvantGo (वा साधारणतया एउटा MAL सर्भरको सामाग्री) ह्यान्डहेल्डमा समक्रमण गर्नुहोस् । यसले तपाईँलाई वेब पृष्ठ, जस्तै: सिनेमा वा टी भी कार्यतालिका, वा अन्य कुनै वेब पृष्ठ ह्यान्डहेल्डको अफलाईनमा हेर्न अनुमति दिन्छ ।
 Comment[nl]=Avantgo met de handheld synchroniseren (of eigenlijk met de inhoud van een MAL-server). Dit maakt het mogelijk om een webpagina offline op uw handheld te bekijken. Dit is handig voor allerlei zaken als bijvoorbeeld de TV-gids.
 Comment[pl]=Synchronizuje AvantGo (lub ogólnie zawartość serwera MAL) z palmtopem. Pozwala to przeglądać bez połączenia z siecią strony WWW na palmtopie, np. repertuar kin lub program telewizyjny.
 Comment[pt]=Sincroniza o AvantGo (ou, genericamente, o conteúdo de um servidor de MAL) para o dispositivo móvel. Isto permite-lhe ver as páginas Web no dispositivo móvel sem estar ligado, como o seu horário de cinema ou TV ou ainda qualquer outra página Web.
Index: kpilot/conduits/popmail/popmail-conduit.desktop
===================================================================
--- kpilot/conduits/popmail/popmail-conduit.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kpilot/conduits/popmail/popmail-conduit.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -25,6 +25,7 @@
 Comment[ms]=Menghantar mel dari komputer telapak melalui KMail.
 Comment[nb]=Send e-post fra PDA-en gjennom KMail.
 Comment[nds]=Nettbreven vun Dien Handreekner över KMail afsennen
+Comment[ne]=तपाईँको ह्यान्डहेल्डबाट केडीई मेलहुदै पत्र पठाउनुहोस् ।
 Comment[nl]=Dit conduit verzendt mail van uw handheld met behulp van KMail.
 Comment[pl]=Wysyła pocztę z palmtopa za pomocą KMail.
 Comment[pt]=Enviar e-mail do seu dispositivo móvel através do KMail.
@@ -42,6 +43,7 @@
 Comment[zh_TW]=透過 KMail 送出您 handheld 的信件。
 Name=Mail
 Name[af]=Pos
+Name[ar]=البريد
 Name[be]=Пошта
 Name[br]=Lizher
 Name[ca]=Correu
@@ -66,9 +68,11 @@
 Name[ja]=メール
 Name[km]=សំបុត្រ
 Name[lt]=Paštas
+Name[mk]=Е-пошта
 Name[ms]=Mel
 Name[nb]=E-post
 Name[nds]=Nettpost
+Name[ne]=पत्र
 Name[nl]=E-mail
 Name[nn]=E-post
 Name[pa]=ਪੱਤਰ
Index: kpilot/conduits/knotes/knotes-conduit.desktop
===================================================================
--- kpilot/conduits/knotes/knotes-conduit.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kpilot/conduits/knotes/knotes-conduit.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -3,7 +3,7 @@
 Type=Service
 Comment=This conduit syncs the Memo Pad application with KNotes.
 Comment[af]=Hierdie pad synkroniseer die Memo Pad program met KNotes.
-Comment[bg]=Синхронизация на бележки на КДЕ с мобилни устройства
+Comment[bg]=Синхронизация на бележки на KDE с мобилни устройства
 Comment[bs]=Ovaj conduit sinhronizuje Memo Pad aplikaciju sa KNotes.
 Comment[ca]=Aquest conducte sincronitza l'aplicació Memo Pad amb Knotes.
 Comment[cs]=Toto propojení synchronizuje vašeho Pilota s poznámkami v KNotes.
@@ -25,9 +25,11 @@
 Comment[ja]=このコンジットはメモ帳アプリケーションを KNotes と同期させます。
 Comment[km]=បំពង់​នេះ​អាច​ឲ្យ​កម្មវិធី Memo Pad ធ្វើ​សមកាលកម្ម​ជាមួយ​នឹង KNotes ។
 Comment[lt]=Šis kanalas sinchronizuoja Memo Pad programą su KNotes.
+Comment[mk]=Овој канал ја синхронизира апликацијата Memo Pad со КБелешки.
 Comment[ms]=Saluran ini mensegerakkan aplikasi Memo Pad dengan KNotes.
 Comment[nb]=Denne kanalen synkroniserer notatblokk-programmet med KNotes.
 Comment[nds]=Synkroniseert dat Palm-Programm "Memo Pad" mit KNotes.
+Comment[ne]=यो कन्ड्युटले मेमो प्याड अनुप्रयोग केडीई टिप्पणीमा सिन्क गर्दछ ।
 Comment[nl]=Dit conduit synchroniseert de Memo Pad met KNotes.
 Comment[nn]=Denne koplinga synkroniserer «Memo Pad»-applikasjonen med KNotes.
 Comment[pl]=Ten łącznik synchronizuje program Memo Pad palmtopa z KNotes (notatkami).
@@ -63,8 +65,10 @@
 Name[it]=KNotes / Memo
 Name[km]=KNotes / អនុស្សរណៈ
 Name[lt]=KNotes / Memo
+Name[mk]=КБелешки / Меморандуми
 Name[ms]=KNotes / Memo
 Name[nds]=KNotes / Notizen
+Name[ne]=केडीई टिप्पणी / मेमो
 Name[nl]=KNotes / memo's
 Name[nn]=KNotes / Memoar
 Name[pl]=KNotes / Notatki
Index: kpilot/conduits/recordconduit/record-conduit.desktop
===================================================================
--- kpilot/conduits/recordconduit/record-conduit.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kpilot/conduits/recordconduit/record-conduit.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -17,6 +17,7 @@
 Name[ja]=レコード (実験中)
 Name[km]=កំណត់​ត្រា (ពិសោធន៍)
 Name[nds]=Logbook (warrt utprobeert)
+Name[ne]=रेकर्ड (प्रयोगात्मक)
 Name[nl]=Opnames (experimenteel)
 Name[pl]=Wpisy (eksperymentalne)
 Name[pt]=Registos (Experimental)
@@ -28,6 +29,7 @@
 Name[sr@Latn]=Slogovi (eksperimentalno)
 Name[sv]=Inspelningar (experimentell)
 Name[uk]=Записи (експериментальний)
+Name[zh_CN]=记录(试验性)
 Name[zh_TW]=紀錄（實驗性）
 Comment=This conduit does nothing.
 Comment[af]=Hierdie pad doen niks
@@ -53,9 +55,11 @@
 Comment[ja]=このコンジットは未知です。
 Comment[km]=បំពង់​នេះ​មិន​ធ្វើ​អ្វី​ទាំងអស់ ។
 Comment[lt]=Šis kanalas nieko neatlieka.
+Comment[mk]=Овој канал не прави ништо.
 Comment[ms]=Saluran ini tidak berbuat apa-apa.
 Comment[nb]=Denne kanalen gjør ingenting.
 Comment[nds]=Disse Kanaal deit gor nix.
+Comment[ne]=यो कन्ड्युटले केहि पनि गर्दैन ।
 Comment[nl]=Dit conduit doet niets.
 Comment[nn]=Denne koplinga gjer ingenting.
 Comment[pl]=Ten łącznik nic nie robi.
Index: kpilot/conduits/Makefile.am
===================================================================
--- kpilot/conduits/Makefile.am	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kpilot/conduits/Makefile.am	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -5,12 +5,15 @@
 
 if include_malconduit
 MAL_SUBDIR = malconduit
+else
+MAL_SUBDIR = 
 endif
 
 SUBDIRS = \
 	  abbrowserconduit \
 	  docconduit \
 	  knotes \
+	  $(MAL_SUBDIR) \
 	  memofileconduit \
 	  notepadconduit \
 	  popmail \
Index: kpilot/conduits/null/null-conduit.desktop
===================================================================
--- kpilot/conduits/null/null-conduit.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kpilot/conduits/null/null-conduit.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -4,6 +4,7 @@
 Name=NULL
 Name[ca]=NUL
 Name[fa]=پوچ
+Name[mk]=Нулов
 Name[ro]=NUL
 Name[sk]=NIČ
 Name[ta]=வெற்று மதிப்பு
@@ -32,9 +33,11 @@
 Comment[ja]=このコンジットは未知です。
 Comment[km]=បំពង់​នេះ​មិន​ធ្វើ​អ្វី​ទាំងអស់ ។
 Comment[lt]=Šis kanalas nieko neatlieka.
+Comment[mk]=Овој канал не прави ништо.
 Comment[ms]=Saluran ini tidak berbuat apa-apa.
 Comment[nb]=Denne kanalen gjør ingenting.
 Comment[nds]=Disse Kanaal deit gor nix.
+Comment[ne]=यो कन्ड्युटले केहि पनि गर्दैन ।
 Comment[nl]=Dit conduit doet niets.
 Comment[nn]=Denne koplinga gjer ingenting.
 Comment[pl]=Ten łącznik nic nie robi.
Index: kpilot/conduits/vcalconduit/todo-conduit.desktop
===================================================================
--- kpilot/conduits/vcalconduit/todo-conduit.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kpilot/conduits/vcalconduit/todo-conduit.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -3,7 +3,7 @@
 Type=Service
 Comment=This conduit syncs the ToDo list from your handheld to KOrganizer.
 Comment[af]=Hierdie pad sinkroniseer die Te-doen lys vanaf jou draagbare toestel na KOrganizer.
-Comment[bg]=Синхронизация на списъка със задачи на мобилно устройство с организатора в КДЕ
+Comment[bg]=Синхронизация на списъка със задачи на мобилно устройство с организатора в KDE
 Comment[bs]=Ovaj conduit sinhronizuje listu Zadataka na ručnom računaru sa KOrganizerom.
 Comment[ca]=Aquest conducte sincronitza la llista de pendents des de la vostra agenda electrònica a KOrganizer.
 Comment[cs]=Toto propojení synchronizuje seznam úkolů s KOrganizérem
@@ -27,6 +27,7 @@
 Comment[ms]=Saluran ini mensegerakkan senarai tugasan  dari komputer telapak anda ke KOrganizer.
 Comment[nb]=Denne kanalen synkroniserer gjørelista fra PDA-en til KOrganizer.
 Comment[nds]=Synkroniseert de Opgavenlist vun den Handreekner mit KOrganizer.
+Comment[ne]=यो कन्डयुटले केडीई आयोजकमा ह्यान्डहेल्डबाट कार्य गर्ने सूचि सिन्क गर्दछ ।
 Comment[nl]=Dit conduit synchroniseert de takenlijst van uw handheld met KOrganizer.
 Comment[nn]=Denne koplinga synkroniserer oppgåvelista frå den handheldte eininga di til KOrganizer.
 Comment[pl]=Ten łącznik synchronizuje listę zadań z palmtopa z KOrganizerem.
@@ -46,7 +47,8 @@
 Comment[zh_TW]=此軟體將您的 handheld 與 KOrganizer 的待辦事項清單同步。
 Name=ToDos (KOrganizer)
 Name[af]=Te-doen (KOrganizer)
-Name[be]=Заданьні (K Арганізатар)
+Name[ar]=الواجبات (KOrganizer)
+Name[be]=Заданні (K Арганізатар)
 Name[br]=Traoù d'ober (KOrganizer)
 Name[bs]=Zadaci (KOrganizer)
 Name[ca]=Pendents (KOrganizer)
@@ -72,6 +74,7 @@
 Name[ms]=Tugsan (KOrganizer)
 Name[nb]=Gjøreliste (KOrganizer)
 Name[nds]=Opgaven (KOrganizer)
+Name[ne]=गर्नुपर्ने कार्यहरू (केडीई आयोजक)
 Name[nl]=Taken (KOrganizer)
 Name[nn]=Oppgåveliste (KOrganizer)
 Name[pl]=Do zrobienia (Korganizer)
Index: kpilot/conduits/vcalconduit/vcal-conduit.desktop
===================================================================
--- kpilot/conduits/vcalconduit/vcal-conduit.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kpilot/conduits/vcalconduit/vcal-conduit.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -3,6 +3,7 @@
 Type=Service
 Name=Calendar (KOrganizer)
 Name[af]=Kalender (KOrganizer)
+Name[ar]=التقويم (KOrganizer)
 Name[be]=Каляндар (K Арганізатар)
 Name[br]=Deiziadur (KOrganizer)
 Name[bs]=Kalendar (KOrganizer)
@@ -26,9 +27,11 @@
 Name[ja]=カレンダー (KOrganizer)
 Name[km]=ប្រតិទិន (KOrganizer)
 Name[lt]=Kalendorius (KOrganizer)
+Name[mk]=Календар (КОрганизатор)
 Name[ms]=Kalendar (KOrganizer)
 Name[nb]=Kalender (KOrganizer)
 Name[nds]=Kalenner (KOrganizer)
+Name[ne]=क्यालेन्डर (केडीई आयोजक)
 Name[nl]=Agenda (KOrganizer)
 Name[nn]=Kalender (KOrganizer)
 Name[pl]=Kalendarz (Korganizer)
@@ -49,7 +52,7 @@
 Name[zh_TW]=行事曆(KOrganizer)
 Comment=This conduit synchronizes your handheld with the KOrganizer datebook.
 Comment[af]=Hierdie pad sinkroniseer jou draagbare toestel met die KOrganizer datum boek.
-Comment[bg]=Синхронизация на календара на мобилно устройство с организатора в КДЕ.
+Comment[bg]=Синхронизация на календара на мобилно устройство с организатора в KDE.
 Comment[ca]=Aquest conducte sincronitza la vostra agenda electrònica amb la llibreta de dates de KOrganizer.
 Comment[cs]=Toto propojení synchronizuje seznam úkolů s KOrganizérem.
 Comment[da]=Denne kanal synkroniserer din håndholdte med KOrganizer-datobogen.
@@ -68,9 +71,11 @@
 Comment[it]=Questo conduit sincronizza il tuo palmare con il calendario di KOrganizer.
 Comment[ja]=このコンジットはハンドヘルドを KOrganizer の手帳と同期させます。
 Comment[km]=បំពង់​នេះ​ធ្វើ​សមកាលកម្ម​ឧបករណ៍​យួរ​ដៃ​របស់​អ្នក​ជាមួយ​នឹង​សៀវភៅ​កាលបរិច្ឆេទ KOrganizer ។
+Comment[mk]=Овој канал ги синхронизира рачниот уред и датумите од KОрганизатор.
 Comment[ms]=Saluran ini mensegerakkan komputer telapak dengan buku tarikh KOrganizer.
 Comment[nb]=Denne kanalen synkroniserer PDA-en med KOrganizers almanakk.
 Comment[nds]=Synkroniseert den Mötenkalenner vun den Handreekner mit KOrganizer.
+Comment[ne]=यो कन्ड्युटले केडीई आयोजक मिति पुस्तिकामा ह्यान्डहेल्ड समक्रमण गर्छ ।
 Comment[nl]=Dit conduit synchroniseert uw handheld met KOrganizer's datumboek.
 Comment[pl]=Ten łącznik synchronizuje palmtopa z terminarzem KOrganizera.
 Comment[pt]=Esta conduta sincroniza o seu dispositivo móvel com a agenda do KOrganizer.
Index: kpilot/conduits/vcalconduit/vcalRecord.cc
===================================================================
--- kpilot/conduits/vcalconduit/vcalRecord.cc	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kpilot/conduits/vcalconduit/vcalRecord.cc	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -584,7 +584,7 @@
 	if (eventCategories.size() < 1)
 	{
 		// This event has no categories.
-		de->setCategory(Pilot::Unfiled);
+		((PilotRecordBase *)de)->setCategory(Pilot::Unfiled);
 		return;
 	}
 
@@ -623,6 +623,6 @@
 		}
 	}
 
-	de->setCategory(Pilot::Unfiled);
+	((PilotRecordBase *)de)->setCategory(Pilot::Unfiled);
 }
 
Index: kpilot/conduits/abbrowserconduit/abbrowser_conduit.desktop
===================================================================
--- kpilot/conduits/abbrowserconduit/abbrowser_conduit.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kpilot/conduits/abbrowserconduit/abbrowser_conduit.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -3,7 +3,7 @@
 Type=Service
 Comment=This conduit syncs the handheld addressbook with KDE's addressbook.
 Comment[af]=Hierdie pad sinkroniseer die draagbare toestel adresboek met KDE se adresboek.
-Comment[bg]=Синхронизация на адресника на КДЕ с мобилни устройства
+Comment[bg]=Синхронизация на адресника на KDE с мобилни устройства
 Comment[bs]=Ovaj conduit sinhronizuje adresar ručnog računara sa KDEovim adresarom.
 Comment[ca]=Aquest conducte sincronitza la llibreta d'adreces de la vostra agenda electrònica amb la llibreta d'adreces de KDE.
 Comment[cs]=Toto propojení synchronizuje vašeho Pilota Knihou adres
@@ -25,9 +25,11 @@
 Comment[ja]=このコンジットはハンドヘルドのアドレス帳をKDEのアドレス帳と同期させます。
 Comment[km]=បំពង់​នេះ​អាច​ឲ្យ​សៀវភៅ​អាសយដ្ឋាន​របស់​ឧបករណ៍​យួរដៃ ធ្វើ​សមកាលកម្ម​ជាមួយ​នឹង​សៀវភៅ​អាសយដ្ឋាន​របស់ KDE
 Comment[lt]=Šis kanalas sinchronizuoja nešiojamą adresų knygelę su KDE adresų knygele.
+Comment[mk]=Овој канал ги синхронизира адресарите од рачниот уред и од KDE.
 Comment[ms]=Saluran ini mensegerakkan buku alamat komputer telapak dengan buku alamat KDE.
 Comment[nb]=Denne kanalen synkroniserer Pilotens adressebok med KDEs adressebok.
 Comment[nds]=Synkroniseert de Adressböker vun Handreekners un KDE.
+Comment[ne]=यो कन्ड्युटले केडीई को ठेगाना पुस्तकमा ह्यान्डल गरिएका ठेगाना पुस्तिका सिन्क गर्दछ ।
 Comment[nl]=Dit conduit synchroniseert uw handheld met KDE's adresboek.
 Comment[nn]=Denne koplinga synkroniserer den handheldte adresseboka med med KDE-adresseboka.
 Comment[pl]=Ten łącznik synchronizuje książkę adresową palmtopa z książką adresową KDE.
@@ -75,9 +77,11 @@
 Name[ja]=アドレス帳
 Name[km]=សៀវភៅ​អាសយដ្ឋាន
 Name[lt]=Adresų knygelė
+Name[mk]=Адресар
 Name[ms]=Buku Alamat
 Name[nb]=Addressebok
 Name[nds]=Adressbook
+Name[ne]=ठेगाना पुस्तिका
 Name[nl]=Adresboek
 Name[nn]=Adressebok
 Name[pl]=Książka adresowa
Index: kpilot/kpilot/kpilot_config.desktop
===================================================================
--- kpilot/kpilot/kpilot_config.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kpilot/kpilot/kpilot_config.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -13,6 +13,7 @@
 
 Name=KPilot Configuration
 Name[af]=KPilot opstelling
+Name[ar]=إعداد KPilot
 Name[be]=Канфігурацыя KPilot
 Name[br]=Kefluniadur KPilot
 Name[bs]=KPilot podešavanje
@@ -35,9 +36,11 @@
 Name[ja]=KPilot の設定
 Name[km]=ការ​កំណត់​រចនាសម្ព័ន្ធ KPilot
 Name[lt]=Kpilot konfigūracija
+Name[mk]=Конфигурација на КПилот
 Name[ms]=Konfigurasi KPilot
 Name[nb]=KPilot oppsett
 Name[nds]=KPilot instellen
+Name[ne]=केडीई पाइलट कन्फिगरेसन
 Name[nl]=KPilot instellingen
 Name[nn]=KPilot-oppsett
 Name[pl]=konfiguracja KPilota
@@ -80,9 +83,11 @@
 Comment[ja]=KPilot 主要設定
 Comment[km]=ការ​កំណត់​រចនាសម្ព័ន្ធ​សំខាន់ៗ​របស់ KPilot
 Comment[lt]=KPilot bendrasis konfigūravimas
+Comment[mk]=Главна конфигурација
 Comment[ms]=Konfigurasi Utama KPilot 
 Comment[nb]=KPilot hovedoppsett
 Comment[nds]=Hööftinstellen för KPilot
+Comment[ne]=केडीई पाइलट मुख्य कन्फिगरेसन
 Comment[nl]=KPilot algemene instellingen
 Comment[nn]=KPilot hovudoppsett
 Comment[pl]=Główna konfiguracja KPilota
@@ -121,9 +126,11 @@
 Keywords[ja]=kpilot,主要
 Keywords[km]=kpilot,សំខាន់
 Keywords[lt]=kpilot,main,pagrindinis
+Keywords[mk]=kpilot,main.кпилот,главно
 Keywords[ms]=kpilot,utama
 Keywords[nb]=kpilot,hoved
 Keywords[nds]=KPilot,Hööft,Hööftinstellen,instellen
+Keywords[ne]=केडीई पाइलट, मुख्य
 Keywords[nl]=kpilot,algemeen
 Keywords[nn]=kpilot,hovud
 Keywords[pl]=kpilot,główna,konfiguracja
Index: kpilot/kpilot/kpilot.desktop
===================================================================
--- kpilot/kpilot/kpilot.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kpilot/kpilot/kpilot.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -7,6 +7,8 @@
 Name[fr]=Palm Pilot
 Name[hi]=के-पायलट
 Name[lv]=KPilots
+Name[mk]=КПилот
+Name[ne]=केडीई पाइलट
 Name[pt_BR]=Ferramenta para PalmPilot
 Name[sv]=Kpilot
 Name[ta]=கேபைலட்
@@ -43,11 +45,12 @@
 GenericName[km]=ឧបករណ៍ PalmPilot
 GenericName[lt]=PalmPilot įrankis
 GenericName[lv]=PalmPilota Rīks
-GenericName[mk]=Алатка за Palm Pilot
+GenericName[mk]=Алатка за PalmPilot
 GenericName[ms]=Alat PalmPilot 
 GenericName[mt]=Għodda għall-Palm Pilot
 GenericName[nb]=PalmPilot-verktøy
 GenericName[nds]=PalmPilot-Warktüüch
+GenericName[ne]=पाल्म पाइलट उपकरण
 GenericName[nl]=Palm Pilot-synchronisatie
 GenericName[nn]=Palm Pilot-verktøy
 GenericName[nso]=Sebereka sa PalmPilot
Index: kpilot/kpilot/kpilotconduit.desktop
===================================================================
--- kpilot/kpilot/kpilotconduit.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kpilot/kpilot/kpilotconduit.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -4,7 +4,6 @@
 X-KDE-ServiceType=KPilotConduit
 Comment=KPilot Conduit
 Comment[af]=Kpilot Pad
-Comment[ar]=أنبوب KPilot
 Comment[az]=KPilot
 Comment[be]=Канал KPilot
 Comment[bg]=Приставка на KPilot
@@ -33,10 +32,11 @@
 Comment[km]=បំពង់ KPilot
 Comment[lt]=KPilot kanalas
 Comment[lv]=KPilot Ķēde
-Comment[mk]=KPilot спој
+Comment[mk]=Канал за КПилот
 Comment[ms]=Saluran KPilot 
 Comment[nb]=KPilot-kanal
 Comment[nds]=KPilot-Kanaal (Synkroniseren)
+Comment[ne]=केडीई पाइलट कन्ड्युट
 Comment[nn]=KPilot-kopling
 Comment[nso]=Conduit ya KPilot
 Comment[pl]=Łącznik KPilota
Index: kpilot/kpilot/kpilotdaemon.desktop
===================================================================
--- kpilot/kpilot/kpilotdaemon.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kpilot/kpilot/kpilotdaemon.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -18,9 +18,9 @@
 Name[ja]=KPilot デーモン
 Name[lt]=KPilot tarnyba
 Name[lv]=KPilotDēmons
-Name[mk]=KPilot демон
 Name[ms]=Daemon KPilot
 Name[nds]=KPilot-Dämoon
+Name[ne]=केडीई पाइलट डेइमोन
 Name[nso]=Daemon ya KPilot
 Name[pl]=demon KPilota
 Name[pt_BR]=Servidor do KPilot
Index: kpilot/lib/pilotAppInfo.h
===================================================================
--- kpilot/lib/pilotAppInfo.h	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kpilot/lib/pilotAppInfo.h	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -136,8 +136,14 @@
 * (again, from pilot-link).
 */
 template <typename appinfo,
+#if PILOT_LINK_IS(0,12,2)
+	int(*unpack)(appinfo *, const unsigned char *, PI_SIZE_T),
+	int(*pack)(const appinfo *, unsigned char *, PI_SIZE_T)
+#else
 	int(*unpack)(appinfo *, unsigned char *, PI_SIZE_T),
-	int(*pack)(appinfo *, unsigned char *, PI_SIZE_T)>
+	int(*pack)(appinfo *, unsigned char *, PI_SIZE_T)
+#endif
+	>
 class PilotAppInfo : public PilotAppInfoBase
 {
 public:
Index: knotes/local.desktop
===================================================================
--- knotes/local.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ knotes/local.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -2,6 +2,7 @@
 Encoding=UTF-8
 Name=Notes in Local File
 Name[af]=Notas in plaaslike lêer
+Name[ar]=الملاحظات في الملف المحلّي
 Name[be]=Нататкі ў лякальным файле
 Name[bg]=Бележки в локален файл
 Name[br]=Notennoù e rstr lec'hel
@@ -26,9 +27,11 @@
 Name[ja]=ローカルファイルのメモ
 Name[km]=ចំណាំ​ក្នុង​ឯកសារ​មូលដ្ឋាន
 Name[lt]=Užrašai vietinėje byloje
+Name[mk]=Белешки во локална датотека
 Name[ms]=Nota dalam fail setempat
 Name[nb]=Notater i lokal fil
 Name[nds]=Notizen in lokaal Datei
+Name[ne]=स्थानीय फाइलका द्रष्टव्य
 Name[nl]=Notities in lokaal bestand
 Name[nn]=Notat i lokal fil
 Name[pl]=Notatki w pliku lokalnym
@@ -44,7 +47,7 @@
 Name[tg]=Хабарҳо дар файли локалӣ
 Name[tr]=Yerel Dosyadaki Notlar
 Name[uk]=Нотатки у локальному файлі
-Name[zh_CN]=本地文件中的笔记
+Name[zh_CN]=本地文件中的便笺
 Name[zh_TW]=本地檔備忘錄
 X-KDE-Library=knotes_local
 Type=Service
Index: knotes/knotes_manager.desktop
===================================================================
--- knotes/knotes_manager.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ knotes/knotes_manager.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -3,6 +3,7 @@
 Encoding=UTF-8
 Name=Notes
 Name[af]=Notas
+Name[ar]=الملاحظات
 Name[be]=Нататкі
 Name[br]=Notennoù
 Name[bs]=Bilješke
@@ -26,8 +27,10 @@
 Name[ja]=メモ
 Name[km]=ចំណាំ
 Name[lt]=Užrašai
+Name[mk]=Белешки
 Name[ms]=Nota
 Name[nds]=Notizen
+Name[ne]=द्रष्टव्य
 Name[nl]=Notities
 Name[nn]=Notat
 Name[pl]=Notatki
Index: knotes/knotes.desktop
===================================================================
--- knotes/knotes.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ knotes/knotes.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -8,6 +8,7 @@
 
 GenericName=Popup Notes
 GenericName[af]=Opspring Notas
+GenericName[ar]=الملاحظات المنبثقة
 GenericName[bg]=Лепящи се бележки
 GenericName[bs]=Popup bilješke
 GenericName[ca]=Notes emergents
@@ -34,11 +35,12 @@
 GenericName[km]=ចំណាំ​លេចឡើង
 GenericName[lt]=Pastabos lapeliuose
 GenericName[lv]=Izlecošās Piezīmes
-GenericName[mk]=Скокачки пораки
+GenericName[mk]=Скок-белешки
 GenericName[ms]=Nota Popup 
 GenericName[mt]=Noti żgħar
 GenericName[nb]=Oppsprett-notater
 GenericName[nds]=Opduk-Notizen
+GenericName[ne]=पपअप द्रष्टव्य
 GenericName[nl]=Notities
 GenericName[nn]=Oppsprettnotat
 GenericName[nso]=Ditshwao tsa Thlarogo
@@ -71,7 +73,8 @@
 Name[hi]=के-नोट्स
 Name[hr]=Bilješka
 Name[lv]=KPiezīmes
-Name[mk]=Блешки
+Name[mk]=КБелешки
+Name[ne]=केडीई टिपोट
 Name[nso]=KDitshwao
 Name[pl]=Notatki
 Name[ro]=Notiţe
Index: kontact/plugins/test/kptestplugin.desktop
===================================================================
--- kontact/plugins/test/kptestplugin.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kontact/plugins/test/kptestplugin.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -13,7 +13,7 @@
 
 Comment=Kontact Test Plugin
 Comment[af]=Kontact toets inprop module
-Comment[be]=Тэставае дапаўненьне Кантакту
+Comment[be]=Тэставае дапаўненне Кантакту
 Comment[bg]=Приставка за проба
 Comment[bs]=Kontact testni dodatak
 Comment[ca]=Endollable de prova per a Kontact
@@ -36,9 +36,11 @@
 Comment[ja]=Kontact テストプラグイン
 Comment[km]=កម្មវិធី​ជំនួយ​ការ​សាកល្បង​ក្នុង Kontact
 Comment[lt]=Kontact bandymo priedas
+Comment[mk]=Приклучок за тест на Контакт
 Comment[ms]=Plugin Ujian Kontact 
 Comment[nb]=Kontact test-programtillegg
 Comment[nds]=Test-Moduul för Kontact
+Comment[ne]=परीक्षण प्लगइनमा सम्पर्क गर्नुहोस्
 Comment[nl]=Kontact Test-plugin
 Comment[nn]=Kontact, test-programtillegg
 Comment[pl]=Wtyczka Kontact do testowania
@@ -60,7 +62,7 @@
 Comment[zh_TW]=Kontact 測試外掛程式
 Name=TestPlugin
 Name[af]=Toets inprop module
-Name[be]=Тэставае дапаўненьне
+Name[be]=Тэставае дапаўненне
 Name[ca]=Endollable de prova
 Name[cy]=AtegynPrawf
 Name[de]=TestModul
@@ -76,10 +78,11 @@
 Name[it]=Plugin Test
 Name[ja]=テストプラグイン
 Name[km]=កម្មវិធី​ជំនួយ​ការ​សាកល្បង
-Name[mk]=ПробенДодаток
+Name[mk]=Приклучок за тест
 Name[ms]=Plugin Ujian
 Name[nb]=Test-programtillegg
 Name[nds]=Testmoduul
+Name[ne]=परीक्षण प्लगइन
 Name[nl]=Test-plugin
 Name[nn]=Test-programtillegg
 Name[nso]=Plugin ya Teko
Index: kontact/plugins/akregator/akregatorplugin.desktop
===================================================================
--- kontact/plugins/akregator/akregatorplugin.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kontact/plugins/akregator/akregatorplugin.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -37,9 +37,11 @@
 Comment[ja]=Akregator プラグイン
 Comment[km]=កម្មវិធី​ជំនួយ Akregator
 Comment[lt]=Akregator priedas
+Comment[mk]=Приклучок за Akregator
 Comment[ms]=Plugin Akregator 
 Comment[nb]=Akgregator-programtillegg
 Comment[nds]=Akregator-Moduul
+Comment[ne]=एक्रिगेटर प्लगइन
 Comment[nl]=Akregatorplugin
 Comment[nn]=Akregator-programtillegg
 Comment[pl]=Wtyczka Akregatora
@@ -83,6 +85,7 @@
 Name[ms]=Suapan
 Name[nb]=Kanaler
 Name[nds]=Narichtenströöm
+Name[ne]=फिड
 Name[nn]=Kanalar
 Name[pl]=Kanały
 Name[pt]=Fontes
Index: kontact/plugins/akregator/akregatorplugin3.2.desktop
===================================================================
--- kontact/plugins/akregator/akregatorplugin3.2.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kontact/plugins/akregator/akregatorplugin3.2.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -36,9 +36,11 @@
 Comment[ja]=Akregator プラグイン
 Comment[km]=កម្មវិធី​ជំនួយ Akregator
 Comment[lt]=Akregator priedas
+Comment[mk]=Приклучок за Akregator
 Comment[ms]=Plugin Akregator 
 Comment[nb]=Akgregator-programtillegg
 Comment[nds]=Akregator-Moduul
+Comment[ne]=एक्रिगेटर प्लगइन
 Comment[nl]=Akregatorplugin
 Comment[nn]=Akregator-programtillegg
 Comment[pl]=Wtyczka Akregatora
@@ -82,6 +84,7 @@
 Name[ms]=Suapan
 Name[nb]=Kanaler
 Name[nds]=Narichtenströöm
+Name[ne]=फिड
 Name[nn]=Kanalar
 Name[pl]=Kanały
 Name[pt]=Fontes
Index: kontact/plugins/kitchensync/kitchensync.desktop
===================================================================
--- kontact/plugins/kitchensync/kitchensync.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kontact/plugins/kitchensync/kitchensync.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -39,9 +39,11 @@
 Comment[ja]=KitchenSync プラグイン
 Comment[km]=កម្មវិធី​ជំនួយ KitchenSync
 Comment[lt]=KitchenSync priedas
+Comment[mk]=Приклучок за KitchenSync
 Comment[ms]=Plugin KitchenSync
 Comment[nb]=Programtillegg for KitchenSync
 Comment[nds]=KitchenSync-Moduul
+Comment[ne]=KitchenSync प्लगइन
 Comment[nl]=KitchenSync-plugin
 Comment[nn]=KitchenSync-programtillegg
 Comment[pl]=Wtyczka KitchenSync
@@ -62,7 +64,7 @@
 Comment[zh_TW]=KitchenSync 外掛程式
 Name=Synchronization
 Name[af]=Sinkronisasie
-Name[ar]=التزامن
+Name[ar]=المزامنة
 Name[be]=Сынхранізацыя
 Name[bs]=Sinhronizacija
 Name[ca]=Sincronització
@@ -87,9 +89,11 @@
 Name[ja]=同期
 Name[km]=សមកាលកម្ម
 Name[lt]=Sinchronizacija
+Name[mk]=Синхронизација
 Name[ms]=Segerakan
 Name[nb]=Synkronisering
 Name[nds]=Synkroniseren
+Name[ne]=समक्रमण
 Name[nl]=Sync
 Name[nn]=Synkronisering
 Name[pa]=ਸਮਕਾਲੀ
Index: kontact/plugins/karm/karmplugin.desktop
===================================================================
--- kontact/plugins/karm/karmplugin.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kontact/plugins/karm/karmplugin.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -36,9 +36,11 @@
 Comment[ja]=KArm プラグイン
 Comment[km]=កម្មវិធី​ជំនួយ KArm
 Comment[lt]=KArm priedas
+Comment[mk]=Приклучок за KArm
 Comment[ms]=Plugin KArm 
 Comment[nb]=KArm-programtillegg
 Comment[nds]=KArm-Moduul
+Comment[ne]=केडीई आर्म प्लगइन
 Comment[nl]=KArm-plugin
 Comment[nn]=KArm-programtillegg
 Comment[pl]=Wtyczka KArm
@@ -60,7 +62,6 @@
 Name[af]=Karm
 Name[eo]=Tempomezurilo
 Name[hi]=के-आर्म
-Name[mk]=КРака
 Name[sv]=Karm
 Name[ta]=Kஅம்
 Name[xh]=KAlrm
Index: kontact/plugins/summary/kcmkontactsummary.desktop
===================================================================
--- kontact/plugins/summary/kcmkontactsummary.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kontact/plugins/summary/kcmkontactsummary.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -13,6 +13,7 @@
 
 Name=Components
 Name[af]=Komponente
+Name[ar]=المكونات
 Name[be]=Кампанэнты
 Name[br]=Parzhioù
 Name[cs]=Komponenty
@@ -34,9 +35,11 @@
 Name[ja]=コンポーネント
 Name[km]=សមាសភាគ
 Name[lt]=Komponentai
+Name[mk]=Компоненти
 Name[ms]=Komponen
 Name[nb]=Komponenter
 Name[nds]=Komponenten
+Name[ne]=अवयव
 Name[nl]=Componenten
 Name[nn]=Komponentar
 Name[pl]=Składniki
@@ -79,6 +82,7 @@
 Comment[ms]=Konfigurasi Am Paparan Ringkasan Kontact
 Comment[nb]=Generelt oppsett av Kontact's sammendragsoversikt
 Comment[nds]=Allgemeen Instellen för de Översichtansicht von Kontact
+Comment[ne]=सम्पर्कको सारांश दृश्यको साधारण कन्फिगरेसन
 Comment[nl]=Algemene instellingen van Kontact's overzichtsweergave
 Comment[nn]=Generelt oppsett av samandragsvisinga i Kontact
 Comment[pl]=Ogólna konfiguracja widoku podsumowania w Kontact
Index: kontact/plugins/summary/summaryplugin.desktop
===================================================================
--- kontact/plugins/summary/summaryplugin.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kontact/plugins/summary/summaryplugin.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -39,6 +39,7 @@
 Comment[ms]=Plugin Paparan Ringkasan Kontact 
 Comment[nb]=Kontact programtillegg for sammendragsvisning
 Comment[nds]=Översichtansicht-Moduul för Kontact
+Comment[ne]=सारांश दृश्य प्लगइनमा सम्पर्क गर्नुहोस्
 Comment[nl]=Kontact SummaryView-plugin
 Comment[nn]=Kontact, programtillegg for samandragsvising
 Comment[pl]=Wtyczka Kontact do wyświetlania podsumowania
@@ -59,6 +60,7 @@
 Comment[zh_TW]=Kontact 摘要檢視外掛程式
 Name=Summary
 Name[af]=Opsomming
+Name[ar]=الموجز
 Name[br]=Diverrañ
 Name[bs]=Sažetak
 Name[ca]=Resum
@@ -86,6 +88,7 @@
 Name[ms]=Ringkasan
 Name[nb]=Sammendrag
 Name[nds]=Översicht
+Name[ne]=सारांश
 Name[nl]=Overzicht
 Name[nn]=Samandrag
 Name[pl]=Podsumowanie
Index: kontact/plugins/kmail/kmailplugin.desktop
===================================================================
--- kontact/plugins/kmail/kmailplugin.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kontact/plugins/kmail/kmailplugin.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -19,7 +19,7 @@
 
 Comment=Kontact KMail Plugin
 Comment[af]=Kontact kMail inprop module
-Comment[be]=Дапаўненьне Кантакту "K Пошта"
+Comment[be]=Дапаўненне Кантакту "K Пошта"
 Comment[bg]=Приставка връзка между пощата и адресника
 Comment[br]=Lugent Kontact KMail
 Comment[bs]=Kontact KMail dodatak
@@ -45,9 +45,11 @@
 Comment[ja]=Kontact KMail プラグイン
 Comment[km]=កម្មវិធី​ជំនួយ KMail ក្នុង Kontact
 Comment[lt]=Kontact KMail priedas
+Comment[mk]=Приклучок за КПошта во Контакт
 Comment[ms]=Plugin KMail Kontact 
 Comment[nb]=Kontact programtillegg for KMail
 Comment[nds]=KMail-Moduul för Kontact
+Comment[ne]=केडीई पत्र प्लगइन सम्पर्क गर्नुहोस्
 Comment[nl]=Kontact KMail-plugin
 Comment[nn]=Kontact-programtillegg for KMail
 Comment[pl]=Wtyczka Kontact do współpracy z KMail
@@ -69,6 +71,7 @@
 Comment[zh_TW]=Kontact KMail 外掛程式
 Name=Mail
 Name[af]=Pos
+Name[ar]=البريد
 Name[be]=Пошта
 Name[br]=Lizher
 Name[ca]=Correu
@@ -93,9 +96,11 @@
 Name[ja]=メール
 Name[km]=សំបុត្រ
 Name[lt]=Paštas
+Name[mk]=Е-пошта
 Name[ms]=Mel
 Name[nb]=E-post
 Name[nds]=Nettpost
+Name[ne]=पत्र
 Name[nl]=E-mail
 Name[nn]=E-post
 Name[pa]=ਪੱਤਰ
Index: kontact/plugins/kmail/kcmkmailsummary.desktop
===================================================================
--- kontact/plugins/kmail/kcmkmailsummary.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kontact/plugins/kmail/kcmkmailsummary.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -13,6 +13,7 @@
 
 Name=Mail
 Name[af]=Pos
+Name[ar]=البريد
 Name[be]=Пошта
 Name[br]=Lizher
 Name[ca]=Correu
@@ -37,9 +38,11 @@
 Name[ja]=メール
 Name[km]=សំបុត្រ
 Name[lt]=Paštas
+Name[mk]=Е-пошта
 Name[ms]=Mel
 Name[nb]=E-post
 Name[nds]=Nettpost
+Name[ne]=पत्र
 Name[nl]=E-mail
 Name[nn]=E-post
 Name[pa]=ਪੱਤਰ
@@ -63,6 +66,7 @@
 Name[zh_TW]=郵件
 Comment=Mail Summary Setup
 Comment[af]=Pos opsomming opstelling
+Comment[ar]=تعيين ملخص البريد
 Comment[bg]=Настройки на обобщението на писмата
 Comment[bs]=Postavke mail sažetka
 Comment[ca]=Configuració del resum de correu
@@ -87,6 +91,7 @@
 Comment[ms]=Setup Ringkasan Mel 
 Comment[nb]=E-post sammendrag oppsett
 Comment[nds]=Nettpost-Översicht instellen
+Comment[ne]=पत्र सारांश सेटअप
 Comment[nl]=E-mail Overzichts-instellingen
 Comment[nn]=Oppsett av e-postsamandrag
 Comment[pl]=Ustawienia podsumowania poczty
@@ -132,6 +137,7 @@
 Keywords[ms]=e-mel, ringkasan, konfigur, seting
 Keywords[nb]=e-post, sammendrag, oppsett, innstillinger
 Keywords[nds]=Nettpost,Nettbreef,Översicht,instellen
+Keywords[ne]=इमेल, सारांश, कन्फिगर, सेटिङ
 Keywords[nl]=email,e-mail,overzicht,samenvatting,instellingen,configuratie
 Keywords[nn]=e-post,samandrag,oppsett,innstillingar
 Keywords[pl]=email,list,podsumowanie,konfiguracja,ustawienia
Index: kontact/plugins/weather/weatherplugin.desktop
===================================================================
--- kontact/plugins/weather/weatherplugin.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kontact/plugins/weather/weatherplugin.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -18,7 +18,7 @@
 
 Comment=Kontact Weather Plugin
 Comment[af]=Kontact weer inprop module
-Comment[be]=Дапаўненьне Кантакту "Надвор'е"
+Comment[be]=Дапаўненне Кантакту "Надвор'е"
 Comment[bg]=Приставка за информация за метеорологичното време
 Comment[bs]=Kontact dodatak za vremensku prognozu
 Comment[ca]=Endollable del temps per a Kontact
@@ -41,9 +41,11 @@
 Comment[ja]=Kontact 気象サービスプラグイン
 Comment[km]=កម្មវិធី​ជំនួយ​អាកាសធាតុ​ក្នុង Kontact
 Comment[lt]=Kontact orų pranešėjo priedas
+Comment[mk]=Приклучок на Контакт за време
 Comment[ms]=Plugin Cuaca Kontact 
 Comment[nb]=Kontact vær-programtillegg
 Comment[nds]=Weder-Moduul för Kontact
+Comment[ne]=मौसम प्लगइनमा सम्पर्क गर्नुहोस्
 Comment[nl]=Kontact Weerplugin
 Comment[nn]=Kontact, programtillegg for vêrmelding
 Comment[pl]=Wtyczka Kontact do wyświetlania pogody
@@ -66,6 +68,7 @@
 Comment[zh_TW]=Kontact 天氣外掛程式
 Name=Weather Service
 Name[af]=Weer diens
+Name[ar]=خدمة الطقس
 Name[br]=Servij an amzer
 Name[ca]=Servei meteorològic
 Name[cs]=Služba počasí
@@ -88,8 +91,10 @@
 Name[ja]=気象サービス
 Name[km]=សេវា​អាកាសធាតុ
 Name[lt]=Orų tarnyba
+Name[mk]=Временска прогноза
 Name[nb]=Værtjeneste
 Name[nds]=Wederdeenst
+Name[ne]=मौसम कार्य
 Name[nl]=Weerbericht
 Name[nn]=Vêrmelding
 Name[pl]=Pogoda
Index: kontact/plugins/multisynk/multisynk.desktop
===================================================================
--- kontact/plugins/multisynk/multisynk.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kontact/plugins/multisynk/multisynk.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -38,6 +38,7 @@
 Comment[ms]=Plugin MultiSynk 
 Comment[nb]=Programtillegg for MultiSynk
 Comment[nds]=MultiSynk-Moduul
+Comment[ne]=MultiSynk प्लगइन
 Comment[nl]=MultiSynk-plugin
 Comment[nn]=MultiSynk-programtillegg
 Comment[pl]=Wtyczka MultiSynk
@@ -57,7 +58,7 @@
 Comment[zh_TW]=MultiSynk 外掛程式
 Name=Synchronization
 Name[af]=Sinkronisasie
-Name[ar]=التزامن
+Name[ar]=المزامنة
 Name[be]=Сынхранізацыя
 Name[bs]=Sinhronizacija
 Name[ca]=Sincronització
@@ -82,9 +83,11 @@
 Name[ja]=同期
 Name[km]=សមកាលកម្ម
 Name[lt]=Sinchronizacija
+Name[mk]=Синхронизација
 Name[ms]=Segerakan
 Name[nb]=Synkronisering
 Name[nds]=Synkroniseren
+Name[ne]=समक्रमण
 Name[nl]=Sync
 Name[nn]=Synkronisering
 Name[pa]=ਸਮਕਾਲੀ
Index: kontact/plugins/knode/knodeplugin.desktop
===================================================================
--- kontact/plugins/knode/knodeplugin.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kontact/plugins/knode/knodeplugin.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -16,7 +16,7 @@
 
 Comment=Kontact KNode Plugin
 Comment[af]=Kontact KNode inprop module
-Comment[be]=Дапаўненьне Кантакту "KNode"
+Comment[be]=Дапаўненне Кантакту "KNode"
 Comment[bg]=Приставка за четене на новини
 Comment[br]=Lugent Kontact KNode
 Comment[bs]=Kontact KNode dodatak
@@ -44,6 +44,7 @@
 Comment[ms]=Plugin KNode Kontact 
 Comment[nb]=Kontact programtillegg for KNode
 Comment[nds]=KNode-Moduul för Kontact
+Comment[ne]=केडीई नोड प्लगइन सम्पर्क गर्नुहोस्
 Comment[nl]=Kontact KNode-plugin
 Comment[nn]=Kontact-programtillegg for KNode
 Comment[pl]=Wtyczka Kontact do współpracy z KNode
@@ -66,6 +67,7 @@
 Comment[zh_TW]=Kontact KNode 外掛程式
 Name=News
 Name[af]=Nuus
+Name[ar]=الأخبار
 Name[be]=Навіны
 Name[br]=Keleier
 Name[bs]=Usenet
@@ -90,9 +92,11 @@
 Name[ja]=ニュース
 Name[km]=ព័ត៌មាន
 Name[lt]=Naujienos
+Name[mk]=Вести
 Name[ms]=Berita
 Name[nb]=Njus
 Name[nds]=Narichten
+Name[ne]=समाचार
 Name[nl]=Nieuws
 Name[nn]=Nyheiter
 Name[pa]=ਖ਼ਬਰਾਂ
Index: kontact/plugins/specialdates/kcmsdsummary.desktop
===================================================================
--- kontact/plugins/specialdates/kcmsdsummary.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kontact/plugins/specialdates/kcmsdsummary.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -13,9 +13,10 @@
 
 Name=Special Dates
 Name[af]=Spesiale datums
+Name[ar]=التواريخ المرقومة
 Name[br]=Deiziadoù dibar
 Name[ca]=Dates especials
-Name[cs]=Speciální datumy
+Name[cs]=Speciální data
 Name[da]=Særlige datoer
 Name[de]=Besondere Termine
 Name[el]=Σημαντικές ημερομηνίες
@@ -34,9 +35,11 @@
 Name[ja]=特別な日
 Name[km]=ថ្ងៃ​ពិសេស
 Name[lt]=Ypatingos datos
+Name[mk]=Специјални датуми
 Name[ms]=Tarikh Khusus
 Name[nb]=Spesielle datoer
 Name[nds]=Besünner Daag
+Name[ne]=विशेष मिति
 Name[nl]=Speciale data
 Name[nn]=Spesielle datoar
 Name[pl]=Daty specjalne
@@ -79,6 +82,7 @@
 Comment[ms]=Setup Ringkasan Tarikh Khusus
 Comment[nb]=Sammendragsoppsett for spesielle datoer
 Comment[nds]=Översicht över besünner Daag instellen
+Comment[ne]=विशेष मिति सारांश सेटअप
 Comment[nl]=Instellingen voor speciale data in overzicht
 Comment[nn]=Oppsett av samandrag for spesielle datoar
 Comment[pl]=Ustawienia podsumowania dat specjalnych
@@ -117,9 +121,11 @@
 Keywords[ja]=誕生日,記念日,休日,設定,設定
 Keywords[km]=ថ្ងៃ​ខួប​កំណើត,បុណ្យ​ខួប,វិស្សមកាល,កំណត់​រចនាសម្ព័ន្ធ,ការ​កំណត់
 Keywords[lt]=birthday, anniversary, holiday, configure, settings, konfigūruoti, nustatymai, gimtadieniai, išeiginės,sukaktys
+Keywords[mk]=birthday, anniversary, holiday, configure, settings, роденден, годишнина, конфигурирање, конфигурација, поставувања
 Keywords[ms]=tarikh lahir, ulang tahun, cuti, konfigur, seting
 Keywords[nb]=fødselsdag, jubileum, ferie, sette opp, innstillinger
 Keywords[nds]=Geboortsdag,Johrdag,Fierdag,instellen
+Keywords[ne]=जन्मदिन, वार्षिकोत्सव, बिदा, कन्फिगर, सेटिङ
 Keywords[nl]=verjaardag,jubileum,vakantie,instellingen,configuratie,feestdag
 Keywords[nn]=fødselsdag,bursdag,gebursdag,jubileum,ferie,helgedag,merkedag,oppsett,innstillingar
 Keywords[pl]=urodziny,rocznica,rocznice,wakacje,urlop,konfiguracja,ustawienia
Index: kontact/plugins/specialdates/specialdatesplugin.desktop
===================================================================
--- kontact/plugins/specialdates/specialdatesplugin.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kontact/plugins/specialdates/specialdatesplugin.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -16,9 +16,10 @@
 
 Name=Special Dates
 Name[af]=Spesiale datums
+Name[ar]=التواريخ المرقومة
 Name[br]=Deiziadoù dibar
 Name[ca]=Dates especials
-Name[cs]=Speciální datumy
+Name[cs]=Speciální data
 Name[da]=Særlige datoer
 Name[de]=Besondere Termine
 Name[el]=Σημαντικές ημερομηνίες
@@ -37,9 +38,11 @@
 Name[ja]=特別な日
 Name[km]=ថ្ងៃ​ពិសេស
 Name[lt]=Ypatingos datos
+Name[mk]=Специјални датуми
 Name[ms]=Tarikh Khusus
 Name[nb]=Spesielle datoer
 Name[nds]=Besünner Daag
+Name[ne]=विशेष मिति
 Name[nl]=Speciale data
 Name[nn]=Spesielle datoar
 Name[pl]=Daty specjalne
@@ -79,9 +82,11 @@
 Comment[ja]=特別な日プラグイン
 Comment[km]=កម្មវិធី​ជំនួយ​ថ្ងៃ​ពិសេស
 Comment[lt]=Ypatingų dienų priedas
+Comment[mk]=Приклучок за специјални датуми
 Comment[ms]=Plugin Tarikh Khusus
 Comment[nb]=Programtillegg for spesielle datoer
 Comment[nds]=Moduul för besünner Daag
+Comment[ne]=विशेष मिति प्लगइन
 Comment[nl]=Plugin voor speciale data
 Comment[nn]=Programtillegg for spesielle datoar
 Comment[pl]=Wtyczka specjalnych dat
Index: kontact/plugins/kpilot/kpilotplugin.desktop
===================================================================
--- kontact/plugins/kpilot/kpilotplugin.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kontact/plugins/kpilot/kpilotplugin.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -18,7 +18,7 @@
 
 Comment=Kontact KPilot Plugin
 Comment[af]=Kontact KPilot inprop module
-Comment[be]=Дапаўненьне Кантакту "KPilot"
+Comment[be]=Дапаўненне Кантакту "KPilot"
 Comment[bg]=Приставка за връзка на адресника с мобилни устройства
 Comment[br]=Lugent Kontact KPilot
 Comment[bs]=Kontact KPilot dodatak
@@ -41,9 +41,11 @@
 Comment[ja]=Kontact KPilot プラグイン
 Comment[km]=កម្មវិធី​ជំនួយ KPilot ក្នុង Kontact
 Comment[lt]=Kontact KPilot priedas
+Comment[mk]=Приклучок за КПилот во Контакт
 Comment[ms]=Plugin KPilot Kontact 
 Comment[nb]=Kontact programtillegg for KPilot
 Comment[nds]=KPilot-Moduul för Kontact
+Comment[ne]=केडीई पाइलट प्लगइन सम्पर्क गर्नुहोस्
 Comment[nl]=Kontact KPilot-plugin
 Comment[nn]=Kontact-programtillegg for KPilot
 Comment[pl]=Wtyczka KPilota do Kontact
@@ -65,6 +67,7 @@
 Comment[zh_TW]=Kontact KPilot 外掛程式
 Name=KPilot Configuration
 Name[af]=KPilot opstelling
+Name[ar]=إعداد KPilot
 Name[be]=Канфігурацыя KPilot
 Name[br]=Kefluniadur KPilot
 Name[bs]=KPilot podešavanje
@@ -87,9 +90,11 @@
 Name[ja]=KPilot の設定
 Name[km]=ការ​កំណត់​រចនាសម្ព័ន្ធ KPilot
 Name[lt]=Kpilot konfigūracija
+Name[mk]=Конфигурација на КПилот
 Name[ms]=Konfigurasi KPilot
 Name[nb]=KPilot oppsett
 Name[nds]=KPilot instellen
+Name[ne]=केडीई पाइलट कन्फिगरेसन
 Name[nl]=KPilot instellingen
 Name[nn]=KPilot-oppsett
 Name[pl]=konfiguracja KPilota
Index: kontact/plugins/knotes/knotesplugin.desktop
===================================================================
--- kontact/plugins/knotes/knotesplugin.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kontact/plugins/knotes/knotesplugin.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -16,7 +16,7 @@
 
 Comment=Kontact KNotes Plugin
 Comment[af]=Kontact KNotes inprop module
-Comment[be]=Дапаўненьне Кантакту "K Нататкі"
+Comment[be]=Дапаўненне Кантакту "K Нататкі"
 Comment[bg]=Приставка за бележки
 Comment[br]=Lugent Kontact KNotes
 Comment[bs]=Kontact KNotes dodatak
@@ -41,9 +41,11 @@
 Comment[ja]=Kontact KNotes プラグイン
 Comment[km]=កម្មវិធី​ជំនួយ KNotes ក្នុង Kontact
 Comment[lt]=Kontact KNotes priedas
+Comment[mk]=Приклучок за КБелешки во Контакт
 Comment[ms]=Plugin KNotes Kontact KNotes 
 Comment[nb]=Kontact programtillegg for KNotes
 Comment[nds]=KNotes-Moduul för Kontact
+Comment[ne]=केडीई द्रष्टव्य प्लगइन सम्पर्क गर्नुहोस्
 Comment[nl]=Kontact KNotes-plugin
 Comment[nn]=Kontact-programtillegg for KNotes
 Comment[pl]=Wtyczka Kontact do współpracy z KNotes
@@ -65,6 +67,7 @@
 Comment[zh_TW]=Kontact KNotes 外掛程式
 Name=Notes
 Name[af]=Notas
+Name[ar]=الملاحظات
 Name[be]=Нататкі
 Name[br]=Notennoù
 Name[bs]=Bilješke
@@ -88,8 +91,10 @@
 Name[ja]=メモ
 Name[km]=ចំណាំ
 Name[lt]=Užrašai
+Name[mk]=Белешки
 Name[ms]=Nota
 Name[nds]=Notizen
+Name[ne]=द्रष्टव्य
 Name[nl]=Notities
 Name[nn]=Notat
 Name[pl]=Notatki
Index: kontact/plugins/korganizer/kcmkorgsummary.desktop
===================================================================
--- kontact/plugins/korganizer/kcmkorgsummary.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kontact/plugins/korganizer/kcmkorgsummary.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -13,6 +13,7 @@
 
 Name=Appointments and To-dos
 Name[af]=Afsprake en te-doen lys
+Name[ar]=المواعيد و الواجبات
 Name[ca]=Cites i tasques pendents
 Name[cs]=Schůzky a úkoly
 Name[da]=Møder og gøremål
@@ -34,6 +35,7 @@
 Name[lt]=Susitikimai ir užduotys
 Name[nb]=Avtaler og gjøremål
 Name[nds]=Terminen un Opgaven
+Name[ne]=भेटघाट गर्नुपर्ने कार्यहरू
 Name[nl]=Evenementen en taken
 Name[nn]=Avtalar og oppgåver
 Name[pl]=Spotkania i zadania
@@ -71,6 +73,7 @@
 Comment[lt]=Susitikimų ir užduočių santraukos nustatymai
 Comment[nb]=Oppsett av sammendraget av gjøremål og avtaler
 Comment[nds]=Termin- un Opgaven-Översicht instellen
+Comment[ne]=भेटघाट र गर्नुपर्ने कार्यहरूको सारांश सेटअप
 Comment[nl]=Overzichtsinstellingen voor evenementen en taken
 Comment[nn]=Oppsett av samandrag av avtalar og oppgåver
 Comment[pl]=Ustawienia podsumowania spotkań i zadań
@@ -87,7 +90,7 @@
 Comment[zh_TW]=約會與待辦事項摘要設定
 Keywords=calendar, todos, configure, settings
 Keywords[af]=calendar,todos,configure,settings
-Keywords[be]=каляндар, заданьні, настроіць, настройкі, calendar, todos, configure, settings
+Keywords[be]=каляндар, заданні, настроіць, настаўленні, calendar, todos, configure, settings
 Keywords[bg]=календар, задачи, организатор, calendar, todos, configure, settings
 Keywords[bs]=calendar, todos, configure, settings, kalendar, zadaci, postavke
 Keywords[ca]=calendari, pendents, configuració, arranjament
@@ -113,6 +116,7 @@
 Keywords[ms]=kalendar, tugasan, konfigur, seting
 Keywords[nb]=kalender, gjørelister, oppsett, innstillinger
 Keywords[nds]=Kalenner,Opgaven,Opgaav,instellen,Mööt,Möten
+Keywords[ne]=क्यालेन्डर, गर्नुपर्ने कार्यहरू, कन्फिगर, सेटिङ
 Keywords[nl]=kalender,agenda,taken,todo,instellingen,configuratie
 Keywords[nn]=kalender,hugselister,oppsett,innstillingar
 Keywords[pl]=kalendarz,do zrobienia,konfiguracja,ustawienia
Index: kontact/plugins/korganizer/todoplugin.desktop
===================================================================
--- kontact/plugins/korganizer/todoplugin.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kontact/plugins/korganizer/todoplugin.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -41,6 +41,7 @@
 Comment[ms]=Plugin Senarai Tugasan KOrganizer Kontact 
 Comment[nb]=Kontact programtillegg for KOrganizer gjøreliste
 Comment[nds]=KOrganizer-Opgavenlistmoduul för Kontact
+Comment[ne]=गर्नुपर्ने कार्यसूची प्लगइन गर्न केडीई आयोजकलाई सम्पर्क गर्नुहोस्
 Comment[nl]=Kontact KOrganizer takenlijstplugin
 Comment[nn]=Kontact-programtillegg for KOrganizer-hugselister
 Comment[pl]=Wtyczka Kontact do współpracy z listą zadań KOrganizera
@@ -59,6 +60,7 @@
 Comment[zh_TW]=Kontact KOrganizer 待辦事項外掛程式
 Name=To-do List
 Name[af]=Te-doen lys
+Name[ar]=لائحة الواجبات
 Name[br]=Roll an traoù d'ober
 Name[ca]=Pendents
 Name[cs]=Seznam úkolů
@@ -84,6 +86,7 @@
 Name[ms]=Senarai Tugasan
 Name[nb]=Gjøreliste
 Name[nds]=Opgavenlist
+Name[ne]=गर्नुपर्न कार्य सूची
 Name[nl]=Takenlijst
 Name[nn]=Hugseliste
 Name[pa]=ਕੰਮ ਕਰਨ ਲਈ
Index: kontact/plugins/korganizer/journalplugin.desktop
===================================================================
--- kontact/plugins/korganizer/journalplugin.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kontact/plugins/korganizer/journalplugin.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -40,6 +40,7 @@
 Comment[ms]=Plugin Jurnal KOrganizer Kontact 
 Comment[nb]=Kontact programtillegg for KOrganizer dagbok
 Comment[nds]=KOrganizer-Daagbookmoduul för Kontact
+Comment[ne]=केडीई आयोजक जर्नल प्लगइन सम्पर्क गर्नुहोस्
 Comment[nl]=Kontact KOrganizer Journaalplugin
 Comment[nn]=Kontact-programtillegg for KOrganizer-dagbøker
 Comment[pl]=Wtyczka Kontact do współpracy z dziennikiem KOrganizera
@@ -58,6 +59,7 @@
 Comment[zh_TW]=Kontact KOrganizer Journal 外掛程式
 Name=Journal
 Name[af]=Joernaal
+Name[ar]=اليومية
 Name[br]=Deizlevr
 Name[ca]=Diari
 Name[cs]=Deník
@@ -80,6 +82,7 @@
 Name[ms]=Jurnal
 Name[nb]=Dagbok
 Name[nds]=Daagbook
+Name[ne]=जर्नल
 Name[nl]=Journaal
 Name[nn]=Dagbok
 Name[pl]=Dziennik
Index: kontact/plugins/korganizer/korganizerplugin.desktop
===================================================================
--- kontact/plugins/korganizer/korganizerplugin.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kontact/plugins/korganizer/korganizerplugin.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -18,7 +18,7 @@
 
 Comment=Kontact KOrganizer Plugin
 Comment[af]=Kontact KOrganizer inprop module
-Comment[be]=Дапаўненьне Кантакту "K Арганізатар"
+Comment[be]=Дапаўненне Кантакту "K Арганізатар"
 Comment[bg]=Приставка за календар и връзка с KOrganizer
 Comment[br]=Lugent Kontact KOrganizer
 Comment[bs]=Kontact KOrganizer dodatak
@@ -44,9 +44,11 @@
 Comment[ja]=Kontact KOrganizer プラグイン
 Comment[km]=កម្មវិធី​ជំនួយ KOrganizer ក្នុង Kontact
 Comment[lt]=Kontact KOrganizer priedas
+Comment[mk]=Приклучок за КОрганизатор во Контакт
 Comment[ms]=Plugin KOragnizer Kontact 
 Comment[nb]=Kontact programtillegg for KOrganizer
 Comment[nds]=KOrganizer-Moduul för Kontact
+Comment[ne]=केडीई आयोजक प्लगइन सम्पर्क गर्नुहोस्
 Comment[nl]=Kontact KOrganizer-plugin
 Comment[nn]=Kontact-programtillegg for KOrganizer
 Comment[pl]=Wtyczka Kontact do współpracy z KOrganizerem
@@ -68,6 +70,7 @@
 Comment[zh_TW]=Kontact KOrganizer 外掛程式
 Name=Calendar
 Name[af]=Kalender
+Name[ar]=التقويم
 Name[be]=Каляндар
 Name[br]=Deiziadur
 Name[bs]=Kalendar
@@ -93,9 +96,11 @@
 Name[ja]=カレンダー
 Name[km]=ប្រតិទិន
 Name[lt]=Kalendorius
+Name[mk]=Календар
 Name[ms]=Kalendar
 Name[nb]=Kalender
 Name[nds]=Kalenner
+Name[ne]=क्यालेन्डर
 Name[nl]=Agenda
 Name[nn]=Kalender
 Name[pa]=ਕੈਲੰਡਰ
Index: kontact/plugins/kaddressbook/kaddressbookplugin.desktop
===================================================================
--- kontact/plugins/kaddressbook/kaddressbookplugin.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kontact/plugins/kaddressbook/kaddressbookplugin.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -18,7 +18,7 @@
 
 Comment=Kontact KAddressBook Plugin
 Comment[af]=Kontact adresboek inprop module
-Comment[be]=Дапаўненьне Кантакту "K Адрасная кніга"
+Comment[be]=Дапаўненне Кантакту "K Адрасная кніга"
 Comment[bg]=Приставка за адресника
 Comment[br]=Lugent Kontact KAddressBook
 Comment[bs]=Kontact KAddressBook dodatak
@@ -43,9 +43,11 @@
 Comment[ja]=Kontact KAddressbook プラグイン
 Comment[km]=កម្មវិធី​ជំនួយ KAddressBook ក្នុង Kontact
 Comment[lt]=Kontact KAddressBook priedas
+Comment[mk]=Приклучок за КАдресар во Контакт
 Comment[ms]=Plugin KAddressBook Kontact 
 Comment[nb]=Kontact programtillegg for KAddressbook
 Comment[nds]=KAdressbook-Moduul för Kontact
+Comment[ne]=केडीई ठेगाना पुस्तिका प्लगइन सम्पर्क गर्नुहोस्
 Comment[nl]=Kontact KAddressBook-plugin
 Comment[nn]=Kontact, programtillegg for KDE-adresseboka
 Comment[pl]=Wtyczka Kontact do współpracy z KAddressBook
@@ -67,6 +69,7 @@
 Comment[zh_TW]=Kontact KAddressBook 外掛程式
 Name=Contacts
 Name[af]=Kontakte
+Name[ar]=المراسلون
 Name[be]=Кантакты
 Name[br]=Darempredoù
 Name[bs]=Kontakti
@@ -91,8 +94,10 @@
 Name[ja]=コンタクト
 Name[km]=ទំនាក់ទំនង
 Name[lt]=Kontaktai
+Name[mk]=Контакти
 Name[ms]=Orang hubungan
 Name[nds]=Kontakten
+Name[ne]=सम्पर्क
 Name[nl]=Adressen
 Name[nn]=Kontaktar
 Name[pa]=ਸੰਪਰਕ
Index: kontact/plugins/newsticker/kcmkontactknt.desktop
===================================================================
--- kontact/plugins/newsticker/kcmkontactknt.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kontact/plugins/newsticker/kcmkontactknt.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -42,6 +42,7 @@
 Name[ms]=Pengetik Berita
 Name[nb]=Nyhetstelegraf
 Name[nds]=Narichten-Ticker
+Name[ne]=न्यूज टिकर
 Name[nn]=Nyheitstelegraf
 Name[pl]=Wiadomości
 Name[pt]=Extractor de Notícias
@@ -88,6 +89,7 @@
 Comment[lt]=News Ticker santraukos nustatymai
 Comment[nb]=Oppsett av sammendraget til nyhetstelegrafen
 Comment[nds]=Narichten-Översicht instellen
+Comment[ne]=न्यूज टिकर सारांश सेटअप
 Comment[nl]=Overzichtsinstellingen nieuwsticker
 Comment[nn]=Oppsett av nyhendetelegrafsamandrag
 Comment[pl]=Ustawienia podsumowania wiadomości
@@ -127,6 +129,7 @@
 Keywords[ms]=Pengetik  berita, konfigur, seting
 Keywords[nb]=nyhetstelegraf, oppsett, innstillinger
 Keywords[nds]=Narichten-Ticker, instellen
+Keywords[ne]=न्यूज टिकर, कन्फिगर, सेटिङ
 Keywords[nl]=newsticker,instellingen,configuratie,nieuws
 Keywords[nn]=nyhendetelegraf,oppsett,innstillingar
 Keywords[pl]=news ticker,wiadomości,nagłówki,konfiguracja,ustawienia
Index: kontact/plugins/newsticker/newstickerplugin.desktop
===================================================================
--- kontact/plugins/newsticker/newstickerplugin.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kontact/plugins/newsticker/newstickerplugin.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -42,6 +42,7 @@
 Comment[ms]=Plugin Pengetik Berita Kontact 
 Comment[nb]=Kontact programtillegg for nyhetstelegrafen
 Comment[nds]=Narichtentelegraaf-Moduul für Kontact
+Comment[ne]=न्यूज टिकर प्लगइनमा सम्पर्क गर्नुहोस्
 Comment[nl]=Kontact NewsTicker-plugin
 Comment[nn]=Programtillegg for nyhendetelegraf i Kontact
 Comment[pl]=Wtyczka wiadomości do Kontact
@@ -80,6 +81,7 @@
 Name[ms]=Pengetik Berita
 Name[nb]=Nyhetstelegraf
 Name[nds]=Narichtentelegraaf
+Name[ne]=न्यूज टिकर
 Name[nn]=Nyhendetelegraf
 Name[pl]=Wiadomości
 Name[pt]=Notícias
Index: kontact/interfaces/kontactplugin.desktop
===================================================================
--- kontact/interfaces/kontactplugin.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kontact/interfaces/kontactplugin.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -3,7 +3,8 @@
 X-KDE-ServiceType=Kontact/Plugin
 Name=Kontact Plugin
 Name[af]=Kontact inprop module
-Name[be]=Дапаўненьне Кантакту
+Name[ar]=قابس Kontact
+Name[be]=Дапаўненне Кантакту
 Name[bg]=Приставка на Kontact
 Name[br]=Lugent Kontact
 Name[bs]=Dodatak za Kontact
@@ -29,9 +30,11 @@
 Name[ja]=Kontact プラグイン
 Name[km]=កម្មវិធី​ជំនួយ Kontact
 Name[lt]=Kontact priedas
+Name[mk]=Приклучок за Контакт
 Name[ms]=Plugin Kontact 
 Name[nb]=Kontact-programtillegg
 Name[nds]=Kontact-Moduul
+Name[ne]=सम्पर्क प्लगइन
 Name[nn]=Kontact-programtillegg
 Name[pl]=Wtyczka Kontact
 Name[pt]='Plugin' do Kontact
Index: kontact/src/kontact.setdlg
===================================================================
--- kontact/src/kontact.setdlg	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kontact/src/kontact.setdlg	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -1,6 +1,7 @@
 [KontactSummary]
 Name=Summary
 Name[af]=Opsomming
+Name[ar]=الموجز
 Name[br]=Diverrañ
 Name[bs]=Sažetak
 Name[ca]=Resum
@@ -28,6 +29,7 @@
 Name[ms]=Ringkasan
 Name[nb]=Sammendrag
 Name[nds]=Översicht
+Name[ne]=सारांश
 Name[nl]=Overzicht
 Name[nn]=Samandrag
 Name[pl]=Podsumowanie
@@ -50,6 +52,7 @@
 Name[zh_TW]=摘要
 Comment=Summary View
 Comment[af]=Opsomming aansig
+Comment[ar]=عرض الملخص
 Comment[bg]=Обобщение
 Comment[ca]=Vista resum
 Comment[cs]=Souhrný pohled
@@ -73,6 +76,7 @@
 Comment[ms]=Paparan Ringkasan
 Comment[nb]=Sammendragsvisning
 Comment[nds]=Översichtansicht
+Comment[ne]=सारांश दृश्य
 Comment[nl]=Overzichtsweergave
 Comment[nn]=Samandragsvising
 Comment[pl]=Widok podsumowania
@@ -95,6 +99,7 @@
 [KMail]
 Name=Mail
 Name[af]=Pos
+Name[ar]=البريد
 Name[be]=Пошта
 Name[br]=Lizher
 Name[ca]=Correu
@@ -119,9 +124,11 @@
 Name[ja]=メール
 Name[km]=សំបុត្រ
 Name[lt]=Paštas
+Name[mk]=Е-пошта
 Name[ms]=Mel
 Name[nb]=E-post
 Name[nds]=Nettpost
+Name[ne]=पत्र
 Name[nl]=E-mail
 Name[nn]=E-post
 Name[pa]=ਪੱਤਰ
@@ -145,6 +152,7 @@
 Name[zh_TW]=郵件
 Comment=Mail Component
 Comment[af]=Pos komponent
+Comment[ar]=مكوّن البريد
 Comment[be]=Кампанэнт "Пошта"
 Comment[bg]=Модул за е-поща
 Comment[br]=Perzh postel
@@ -167,9 +175,11 @@
 Comment[ja]=メールコンポーネント
 Comment[km]=សមាសភាគ​សំបុត្រ
 Comment[lt]=Pašto komponentas
+Comment[mk]=Компонента за е-пошта
 Comment[ms]=Komponen Mel
 Comment[nb]=E-postkomponent
 Comment[nds]=Nettpost-Komponent
+Comment[ne]=पत्र अवयव
 Comment[nl]=E-mailcomponent
 Comment[nn]=E-postkomponent
 Comment[pl]=Składnik poczty
@@ -192,6 +202,7 @@
 [KAB]
 Name=Contacts
 Name[af]=Kontakte
+Name[ar]=المراسلون
 Name[be]=Кантакты
 Name[br]=Darempredoù
 Name[bs]=Kontakti
@@ -216,8 +227,10 @@
 Name[ja]=コンタクト
 Name[km]=ទំនាក់ទំនង
 Name[lt]=Kontaktai
+Name[mk]=Контакти
 Name[ms]=Orang hubungan
 Name[nds]=Kontakten
+Name[ne]=सम्पर्क
 Name[nl]=Adressen
 Name[nn]=Kontaktar
 Name[pa]=ਸੰਪਰਕ
@@ -242,6 +255,7 @@
 Name[zh_TW]=聯絡人
 Comment=Address Book Component
 Comment[af]=Adres boek komponent
+Comment[ar]=مكون دفتر العناوين
 Comment[be]=Кампанэнт "Адрасная кніга"
 Comment[bg]=Модул за адресника
 Comment[ca]=Component de llibreta d'adreces
@@ -263,9 +277,11 @@
 Comment[ja]=アドレス帳コンポーネント
 Comment[km]=សមាសភាគ​សៀវភៅ​អាសយដ្ឋាន
 Comment[lt]=Adresų knygelės komponentas
+Comment[mk]=Компонента за адресар
 Comment[ms]=Komponen Buku Alamat 
 Comment[nb]=Adressebok-komponent
 Comment[nds]=Adressbook-Komponent
+Comment[ne]=ठेगाना पुस्तिका अवयव
 Comment[nl]=Adresboekcomponent
 Comment[nn]=Adressebok-komponent
 Comment[pl]=Składnik książki adresowej
@@ -288,6 +304,7 @@
 [Special Dates]
 Name=Special Dates Summary
 Name[af]=Spesiale datums opsomming
+Name[ar]=موجز عن التواريخ المرموقة
 Name[ca]=Resum de dates especials
 Name[cs]=Souhrn speciálních datumů
 Name[da]=Opsummering af særlige datoer
@@ -310,6 +327,7 @@
 Name[ms]=Ringkasan Tarikh Khusus
 Name[nb]=Sammendrag av spesielle datoer
 Name[nds]=Översicht över besünner Daag
+Name[ne]=विशेष मिति सारांश
 Name[nl]=Overzicht voor speciale data
 Name[nn]=Samandrag for spesielle datoar
 Name[pl]=Podsumowanie dat specjalnych
@@ -351,6 +369,7 @@
 Comment[ms]=Komponen Ringkasan Tarikh Khusus
 Comment[nb]=Komponent for sammendrag av spesielle datoer
 Comment[nds]=Översichtkomponent för besünner Daag
+Comment[ne]=विशेष मिति सारांश अवयव
 Comment[nl]=Component voor overzicht van speciale data
 Comment[nn]=Komponent for samandrag for spesielle datoar
 Comment[pl]=Składnik podsumowania dat specjalnych
@@ -373,6 +392,7 @@
 [KOrganizer]
 Name=Calendar
 Name[af]=Kalender
+Name[ar]=التقويم
 Name[be]=Каляндар
 Name[br]=Deiziadur
 Name[bs]=Kalendar
@@ -398,9 +418,11 @@
 Name[ja]=カレンダー
 Name[km]=ប្រតិទិន
 Name[lt]=Kalendorius
+Name[mk]=Календар
 Name[ms]=Kalendar
 Name[nb]=Kalender
 Name[nds]=Kalenner
+Name[ne]=क्यालेन्डर
 Name[nl]=Agenda
 Name[nn]=Kalender
 Name[pa]=ਕੈਲੰਡਰ
@@ -444,9 +466,11 @@
 Comment[ja]=カレンダーコンポーネント
 Comment[km]=សមាភាគ​ប្រតិទិន
 Comment[lt]=Kalendoriaus komponentas
+Comment[mk]=Компонента за календар
 Comment[ms]=Komponen Kalendar
 Comment[nb]=Calendar-komponent
 Comment[nds]=Kalenner-Komponent
+Comment[ne]=क्यालेन्डर अवयव
 Comment[nl]=Agendacomponent
 Comment[nn]=Kalenderkomponent
 Comment[pl]=Składnik kalendarza
@@ -469,6 +493,7 @@
 [KNode]
 Name=News
 Name[af]=Nuus
+Name[ar]=الأخبار
 Name[be]=Навіны
 Name[br]=Keleier
 Name[bs]=Usenet
@@ -493,9 +518,11 @@
 Name[ja]=ニュース
 Name[km]=ព័ត៌មាន
 Name[lt]=Naujienos
+Name[mk]=Вести
 Name[ms]=Berita
 Name[nb]=Njus
 Name[nds]=Narichten
+Name[ne]=समाचार
 Name[nl]=Nieuws
 Name[nn]=Nyheiter
 Name[pa]=ਖ਼ਬਰਾਂ
@@ -540,9 +567,11 @@
 Comment[ja]=ニュースコンポーネント
 Comment[km]=សមាសភាគ​ព័ត៌មាន
 Comment[lt]=Naujienų komponentas
+Comment[mk]=Компонента за вести
 Comment[ms]=Komponen Berita
 Comment[nb]=Njus-komponent
 Comment[nds]=Narichten-Komponente
+Comment[ne]=समाचार अवयव
 Comment[nl]=Nieuwscomponent
 Comment[nn]=Nyhendekomponent
 Comment[pl]=Składnik wiadomości
@@ -591,9 +620,11 @@
 Name[ja]=気象情報
 Name[km]=អាកាសធាតុ
 Name[lt]=Orų pranešėjas
+Name[mk]=Време
 Name[ms]=Cuaca
 Name[nb]=Været
 Name[nds]=Weder
+Name[ne]=मौसम
 Name[nl]=Het weer
 Name[nn]=Vêrmelding
 Name[pl]=Pogoda
@@ -616,6 +647,7 @@
 Name[zh_TW]=天氣
 Comment=Weather Information
 Comment[af]=Weer informasie
+Comment[ar]=معلومات عن الطقس
 Comment[be]=Інфармацыя пра надвор’е
 Comment[bg]=Информация за времето
 Comment[br]=Titouroù diwar-benn an amzer
@@ -640,9 +672,11 @@
 Comment[ja]=気象情報
 Comment[km]=ព័ត៌មាន​អំពី​អាកាសធាតុ
 Comment[lt]=Orų informacija
+Comment[mk]=Информации за времето
 Comment[ms]=Maklumat Cuaca
 Comment[nb]=Værinformasjon
 Comment[nds]=Wederinformatschonen
+Comment[ne]=मौसम जानकारी
 Comment[nl]=Het weer
 Comment[nn]=Vêrinformasjon
 Comment[pl]=Informacje o pogodzie
@@ -695,6 +729,7 @@
 Name[ms]=Pengetik Berita
 Name[nb]=Nyhetstelegraf
 Name[nds]=Narichten-Ticker
+Name[ne]=न्यूज टिकर
 Name[nn]=Nyheitstelegraf
 Name[pl]=Wiadomości
 Name[pt]=Extractor de Notícias
@@ -741,6 +776,7 @@
 Comment[ms]=Komponen Pengetik Berita
 Comment[nb]=Komponent for Nyhetstelegraf
 Comment[nds]=Narichtentelegraaf-Komponent
+Comment[ne]=समाचार टिकर अवयव
 Comment[nl]=Newstickercomponent
 Comment[nn]=Nyhendetelegrafkomponent
 Comment[pl]=Składnik paska wiadomości
Index: kontact/src/kontactconfig.desktop
===================================================================
--- kontact/src/kontactconfig.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kontact/src/kontactconfig.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -16,19 +16,22 @@
 Name=Kontact
 Name[be]=Кантакт
 Name[hi]=कॉन्टेक्ट
+Name[mk]=Контакт
+Name[ne]=सम्पर्क गर्नुहोस्
 Name[sv]=Kontakt
 Name[ta]=தொடர்பு கொள்
 Name[zh_TW]=Kontact 個人資訊管理
 Comment=KDE Kontact
-Comment[be]=Кантакт KDE
 Comment[bg]=Управление на личната информация
 Comment[ca]=Kontact de KDE
 Comment[cy]=Kontact KDE
 Comment[de]=Kontact
 Comment[fi]=Kontact
 Comment[hi]=केडीई कॉन्टेक्ट
+Comment[mk]=KDE Контакт
 Comment[ms]=Kontact KDE 
 Comment[nds]=KDE-Kontact
+Comment[ne]=केडीई सम्पर्क
 Comment[pl]=Kontact dla KDE
 Comment[pt]=Kontact do KDE
 Comment[pt_BR]=Kontact do KDE
@@ -40,8 +43,10 @@
 Keywords[de]=Kontact
 Keywords[hi]=कॉन्टेक्ट
 Keywords[hu]=kapcsolat
+Keywords[mk]=kontact,контакт
 Keywords[nb]=kontact, kontakt
 Keywords[nds]=Kontact
+Keywords[ne]=सम्पर्क
 Keywords[sr]=kontact, контакт
 Keywords[sr@Latn]=kontact, kontakt
 Keywords[sv]=kontakt
Index: kontact/src/Kontact.desktop
===================================================================
--- kontact/src/Kontact.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kontact/src/Kontact.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -3,6 +3,8 @@
 Name=Kontact
 Name[be]=Кантакт
 Name[hi]=कॉन्टेक्ट
+Name[mk]=Контакт
+Name[ne]=सम्पर्क गर्नुहोस्
 Name[sv]=Kontakt
 Name[ta]=தொடர்பு கொள்
 Name[zh_TW]=Kontact 個人資訊管理
@@ -11,7 +13,8 @@
 Icon=kontact
 GenericName=Personal Information Manager
 GenericName[af]=Personlike informasie bestuurder
-GenericName[be]=Кіраваньне пэрсанальнай інфармацыяй
+GenericName[ar]=منظم المعلومات الشخصي
+GenericName[be]=Кіраванне пэрсанальнай інфармацыяй
 GenericName[bg]=Лична информация
 GenericName[bs]=Upravitelj ličnim informacijama
 GenericName[ca]=Gestor d'informació personal
@@ -35,10 +38,11 @@
 GenericName[ja]=個人情報マネージャ
 GenericName[km]=កម្មវិធី​គ្រប់គ្រង​ព័ត៌មាន​ផ្ទាល់​ខ្លួន
 GenericName[lt]=Asmeninės informacijos tvarkyklė
-GenericName[mk]=Менаџер за лични информации
+GenericName[mk]=Менаџер на лични информации
 GenericName[ms]=Pengurus Makumat Peribadi
 GenericName[nb]=Personlig informasjonsbehandler
 GenericName[nds]=Pleger för persöönliche Informatschonen
+GenericName[ne]=व्यक्तिगत सूचना प्रबन्धक
 GenericName[nn]=Personleg informasjonshandtering
 GenericName[pl]=Program do zarządzania informacjami osobistymi
 GenericName[pt]=Gestor Pessoal de Informações
Index: kandy/src/kandy.desktop
===================================================================
--- kandy/src/kandy.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kandy/src/kandy.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -3,6 +3,7 @@
 Name=Kandy
 Name[eo]=Poŝtelefonilo
 Name[hi]=केंडी
+Name[ne]=केन्डी
 Name[ta]=Kஅன்டி
 Comment=Tool for syncing address book data with mobile phones
 Comment[af]=Program om die adres boek data met die van 'n selfoon te sinkroniseer
@@ -26,9 +27,11 @@
 Comment[ja]=アドレス帳のデータを携帯電話と同期するためのツール
 Comment[km]=ឧបករណ៍​សម្រាប់​ធ្វើ​សមកាលកម្ម​ទិន្នន័យ​សៀវភៅ​អាសយដ្ឋាន​ជាមួយ​នឹង​ទូរស័ព្ទ​ចល័ត
 Comment[lt]=Įrankis adresų knygelės sinchronizavimui su mobiliaisiais telefonais
+Comment[mk]=Алатка за синхронизирање адресари со мобилни телефони
 Comment[ms]=Alat untuk segerakkan data buku alamat dengan telefon bimbit
 Comment[nb]=Verktøy for synkronisering av adressebok med mobiltelefoner
 Comment[nds]=Synkroniseren vun Adressbookdaten mit Mobiltelefonen
+Comment[ne]=मोबाइल फोनमा ठेगाना पुस्तिका समक्रमण गर्नका लागि उपकरण
 Comment[nl]=Hulpmiddel om adresboekgegevens te synchroniseren met mobiele telefoons
 Comment[nn]=Verktøy for å synkronisera adresseboka med mobiltelefonar
 Comment[pl]=Narzędzie do synchronizacji książki adresowej z telefonami komórkowymi
@@ -81,6 +84,7 @@
 GenericName[ms]=Alatan Fon Mudah Alih
 GenericName[nb]=Mobiltelefonverktøy
 GenericName[nds]=Mobiltelefoon-Warktüüch
+GenericName[ne]=मोबाइल फोन उपकरण
 GenericName[nl]=Mobiele telefoon-beheer
 GenericName[nn]=Mobiltelefonverktøy
 GenericName[nso]=Sebereka sago Thatha sa Mogala
Index: ktnef/gui/ktnef.desktop
===================================================================
--- ktnef/gui/ktnef.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ ktnef/gui/ktnef.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -25,9 +25,11 @@
 GenericName[ja]=TNEF ファイルビュー
 GenericName[km]=កម្មវិធី​មើល​ឯកសារ TNEF
 GenericName[lt]=TNEF bylų žiūryklė
+GenericName[mk]=Прегледувач на TNEF-датотеки
 GenericName[ms]=Pemapar Fail TNEF 
 GenericName[nb]=TNEF-filvisning
 GenericName[nds]=TNEF-Dateikieker
+GenericName[ne]=TNEF फाइल दर्शक
 GenericName[nl]=TNEF-bestandsweergave
 GenericName[nn]=TNEF filvisar
 GenericName[pl]=Przeglądarka plików TNEF
@@ -76,6 +78,7 @@
 Comment[ms]=Pemapar/pengekstrak untuk fail TNEF 
 Comment[nb]=En utpakker/fremviser for TNEF-filer
 Comment[nds]=TNEF-Dateien ankieken un Delen ruttrecken
+Comment[ne]=TNEF फाइलका लागि दर्शक/निष्कासक
 Comment[nl]=Een weergaveprogramma/uitpakker voor TNEF-bestanden
 Comment[nn]=Ein framvisar/utpakkar for TNEF-filer
 Comment[pl]=Przeglądarka/program wyciągający zawartość plików TNEF
Index: ktnef/gui/ms-tnef.desktop
===================================================================
--- ktnef/gui/ms-tnef.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ ktnef/gui/ms-tnef.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -31,9 +31,11 @@
 Comment[ja]=TNEF ファイル
 Comment[km]=ឯកសារ TNEF
 Comment[lt]=TNEF byla
+Comment[mk]=TNEF-датотека
 Comment[ms]=Fail TNEF 
 Comment[nb]=TNEF-fil
 Comment[nds]=TNEF-Datei
+Comment[ne]=TNEF फाइल
 Comment[nl]=TNEF-bestand
 Comment[nn]=TNEF-fil
 Comment[pl]=Plik TNEF
Index: ktnef/gui/ktnefview.cpp
===================================================================
--- ktnef/gui/ktnefview.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ ktnef/gui/ktnefview.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -21,6 +21,7 @@
 
 #include <qheader.h>
 #include <qpixmap.h>
+#include <qtimer.h>
 
 #include <kapplication.h>
 #include <kiconloader.h>
@@ -74,6 +75,7 @@
 	setSelectionMode(QListView::Extended);
 	setHScrollBarMode(QScrollView::AlwaysOff);
 	setVScrollBarMode(QScrollView::AlwaysOn);
+	QTimer::singleShot( 0, this, SLOT(adjustColumnWidth()) );
 }
 
 KTNEFView::~KTNEFView()
@@ -93,10 +95,7 @@
 
 void KTNEFView::resizeEvent(QResizeEvent *e)
 {
-	int	w = visibleWidth()/2;
-	setColumnWidth(0,w);
-	setColumnWidth(1,w/2);
-	setColumnWidth(2,w/2);
+	adjustColumnWidth();
 	resizeContents(visibleWidth(),visibleHeight());
 	if (e) QListView::resizeEvent(e);
 }
@@ -126,4 +125,12 @@
 		emit dragRequested( list );
 }
 
+void KTNEFView::adjustColumnWidth()
+{
+	int w = visibleWidth()/2;
+	setColumnWidth(0,w);
+	setColumnWidth(1,w/2);
+	setColumnWidth(2,w/2);
+}
+
 #include "ktnefview.moc"
Index: ktnef/gui/ktnefview.h
===================================================================
--- ktnef/gui/ktnefview.h	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ ktnef/gui/ktnefview.h	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -42,6 +42,9 @@
 	void resizeEvent(QResizeEvent *e);
 	void startDrag();
 
+private slots:
+	void adjustColumnWidth();
+
 private:
 	QPtrList<KTNEFAttach>	attachments_;
 };
Index: ktnef/gui/ktnefui.rc
===================================================================
--- ktnef/gui/ktnefui.rc	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ ktnef/gui/ktnefui.rc	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -1,17 +1,17 @@
 <!DOCTYPE kpartgui>
-<kpartgui name="kups" version="1">
+<kpartgui name="kups" version="2">
 <MenuBar>
   <Menu name="action"><text>&amp;Action</text>
     <Action name="view_file" />
     <Action name="view_file_as" />
-    <Separator name="separator_0" />
+    <Separator/>
     <Action name="extract_file" />
     <Action name="extract_file_to" />
-    <Separator name="separator_1" />
+    <Separator/>
     <Action name="extract_all_files" />
-    <Separator name="separator_2" />
+    <Separator/>
     <Action name="properties_file" />
-	<Separator />
+	<Separator/>
 	<Action name="msg_properties" />
 	<Action name="msg_text" />
 	<Action name="msg_save" />
@@ -20,16 +20,16 @@
     <Action name="options_default_dir" append="save_merge"/>
   </Menu>
 </MenuBar>
-<ToolBar name="mainToolBar">
+<ToolBar name="mainToolBar" noMerge="1">
   <text>Main Toolbar</text>
-  <Action name="open_file" />
-  <Separator name="separator_3" />
+  <Action name="file_open" />
+  <Separator/>
   <Action name="view_file" />
   <Action name="properties_file" />
-  <Separator name="separator_4" />
+  <Separator/>
   <Action name="extract_file_to" />
   <Action name="extract_all_files" />
-  <Separator name="separator_5" />
+  <Separator/>
   <Action name="msg_properties" />
   <Action name="msg_text" />
 </ToolBar>
Index: ktnef/lib/ktnefparser.cpp
===================================================================
--- ktnef/lib/ktnefparser.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ ktnef/lib/ktnefparser.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -445,6 +445,8 @@
 bool KTNEFParser::openFile(const QString& filename)
 {
 	deleteDevice();
+	delete d->message_;
+	d->message_ = new KTNEFMessage();
 	d->device_ = new QFile( filename );
 	d->deleteDevice_ = true;
 	return parseDevice();
@@ -756,6 +758,7 @@
 	MAPI_value	mapi;
 	KTNEFProperty *p;
 	QMap<int,KTNEFProperty*>::ConstIterator it;
+	bool foundAttachment = false;
 
 	// some initializations
 	mapi.type = MAPI_TYPE_NONE;
@@ -804,6 +807,15 @@
 					d->device_->at( d->device_->at() + ( len-4 ) );
 					break;
 				}
+				else if ( mapi.type == MAPI_TYPE_BINARY && attach && attach->offset() < 0 )
+				{
+					foundAttachment = true;
+					int len = mapi.value.toByteArray().size();
+					ALIGN( len, 4 )
+					attach->setSize( len );
+					attach->setOffset( d->device_->at() - len );
+					attach->addAttribute( attATTACHDATA, atpBYTE, QString( "< size=%1 >" ).arg( len ), false );
+				}
 			}
 			kdDebug().form( "MAPI data: size=%d\n", mapi.value.toByteArray().size() );
 			break;
@@ -850,5 +862,22 @@
 		}
 		//kdDebug() << "stream: " << d->device_->at() << endl;
 	}
+
+	if ( foundAttachment && attach )
+	{
+		attach->setIndex( attach->property( MAPI_TAG_INDEX ).toUInt() );
+		attach->setDisplaySize( attach->property( MAPI_TAG_SIZE ).toUInt() );
+		QString str = attach->property( MAPI_TAG_DISPLAYNAME ).toString();
+		if ( !str.isEmpty() )
+			attach->setDisplayName( str );
+		attach->setFileName( attach->property( MAPI_TAG_FILENAME ).toString() );
+		str = attach->property( MAPI_TAG_MIMETAG ).toString();
+		if ( !str.isEmpty() )
+			attach->setMimeTag( str );
+		attach->setExtension( attach->property( MAPI_TAG_EXTENSION ).toString() );
+		if ( attach->name().isEmpty() )
+			attach->setName( attach->fileName() );
+	}
+
 	return true;
 }
Index: kfile-plugins/rfc822/kfile_rfc822.desktop
===================================================================
--- kfile-plugins/rfc822/kfile_rfc822.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kfile-plugins/rfc822/kfile_rfc822.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -3,7 +3,7 @@
 Type=Service
 Name=Email Info
 Name[af]=E-pos informasie
-Name[be]=Інфармацыя аб паведамленьні электроннай пошты
+Name[be]=Інфармацыя аб паведамленні электроннай пошты
 Name[bg]=Информация за е-поща
 Name[br]=Titouroù postel
 Name[ca]=Informació de correu-e
@@ -28,9 +28,11 @@
 Name[ja]=Eメール 情報
 Name[km]=ព័ត៌មាន​អ៊ីមែល
 Name[lt]=E. pašto info
+Name[mk]=Информации за е-пошта
 Name[ms]=Info Emel
 Name[nb]=E-post-info
 Name[nds]=Nettbreef-Informatschonen
+Name[ne]=इमेल सूचना
 Name[nl]=E-mail-informatie
 Name[nn]=Epost-info
 Name[pa]=ਈ-ਪੱਤਰ ਜਾਣਕਾਰੀ
Index: kfile-plugins/ics/kfile_ics.desktop
===================================================================
--- kfile-plugins/ics/kfile_ics.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kfile-plugins/ics/kfile_ics.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -25,9 +25,11 @@
 Name[ja]=ICS 情報
 Name[km]=ព័ត៌មាន ICS
 Name[lt]=ICS informacija
+Name[mk]=Информација за ICS
 Name[ms]=Maklumat ICS 
 Name[nb]=ICS-informasjon
 Name[nds]=ICS-Informatschoon
+Name[ne]=ICS सूचना
 Name[nl]=ICS-informatie
 Name[nn]=ICS-informasjon
 Name[pa]=ICS ਜਾਣਕਾਰੀ
Index: kfile-plugins/palm-databases/kfile_palm.desktop
===================================================================
--- kfile-plugins/palm-databases/kfile_palm.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kfile-plugins/palm-databases/kfile_palm.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -27,9 +27,11 @@
 Name[ja]=PalmOS データベース 情報
 Name[km]=ព័ត៌មាន​មូលដ្ឋាន​ទិន្នន័យ PalmOS
 Name[lt]=PalmOS duomenų bazės info
+Name[mk]=Информации за PalmOS-база на податоци
 Name[ms]=Maklumat Pangkalan Data PalmOS 
 Name[nb]=PalmOS Database info
 Name[nds]=PalmOS-Datenbank-Informatschonen
+Name[ne]=PalmOS डाटाबेस सूचना
 Name[nl]=PalmOS-database informatie
 Name[nn]=PalmOS-databaseinfo
 Name[pl]=Baza danych PalmOS
Index: kfile-plugins/vcf/kfile_vcf.desktop
===================================================================
--- kfile-plugins/vcf/kfile_vcf.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ kfile-plugins/vcf/kfile_vcf.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -28,10 +28,12 @@
 Name[ja]=vCard 情報
 Name[km]=ព័ត៌មាន vCard
 Name[lt]=vCard informacija
+Name[mk]=Информации за vCard
 Name[ms]=Info vCard
 Name[mt]=Informazzjoni vCard
 Name[nb]=vCard info
 Name[nds]=vCard-Informatschonen
+Name[ne]=भी कार्ड सुचना
 Name[nl]=vCard-informatie
 Name[nn]=vCard-info
 Name[nso]=Tshedimoso ya vKarata
Index: korganizer/korganizer_configfonts.desktop
===================================================================
--- korganizer/korganizer_configfonts.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ korganizer/korganizer_configfonts.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -44,9 +44,11 @@
 Name[km]=ពុម្ពអក្សរ
 Name[lt]=Šriftai
 Name[lv]=Fonti
+Name[mk]=Фонтови
 Name[ms]=Fon
 Name[nb]=Skrifter
 Name[nds]=Schriftoorden
+Name[ne]=फन्ट
 Name[nl]=Lettertypen
 Name[nn]=Skrifttypar
 Name[pl]=Czcionki
@@ -99,9 +101,11 @@
 Comment[ja]=KOrganizer フォント設定
 Comment[km]=ការ​កំណត់​រចនាសម្ព័ន្ធ​ពុម្ពអក្សរ KOrganizer
 Comment[lt]=KOrganizer šriftų konfigūravimas
+Comment[mk]=Конфигурација на фонтовите
 Comment[ms]=Konfigurasi Fon KOrganizer 
 Comment[nb]=KOrganizer skriftoppsett
 Comment[nds]=Schriftoorden för KOrganizer instellen
+Comment[ne]=केडीई आयोजक फन्ट कन्फिगरेसन
 Comment[nl]=KOrganizer lettertypen instellen
 Comment[nn]=KOrganizer, skriftinnstillingar
 Comment[pl]=Konfiguracja czcionek KOrganizera
@@ -148,9 +152,11 @@
 Keywords[ja]=korganizer,フォント
 Keywords[km]=korganizer,ពុម្ពអក្សរ
 Keywords[lt]=korganizer,fonts, šriftai
+Keywords[mk]=korganizer,fonts,корганизатор,фонтови
 Keywords[ms]=korganizer,fon
 Keywords[nb]=korganizer,skrifter, skrifttyper
 Keywords[nds]=KOrganizer,Schriftoorden
+Keywords[ne]=केडीई आयोजक, फन्ट
 Keywords[nl]=korganizer,fonts,lettertypen
 Keywords[nn]=korganizer,skrift
 Keywords[pl]=korganizer,czcionki
Index: korganizer/printing/calprintdefaultplugins.cpp
===================================================================
--- korganizer/printing/calprintdefaultplugins.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ korganizer/printing/calprintdefaultplugins.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -441,10 +441,15 @@
     }
 
     if ( mShowOptions ) {
-      QString optionsString = i18n("Status: %1").arg( (*it)->statusStr() );
-      optionsString += "\n";
-      optionsString += i18n("Secrecy: %1").arg( (*it)->secrecyStr() );
-      optionsString += "\n";
+      QString optionsString;
+      if ( !(*it)->statusStr().isEmpty() ) {
+        optionsString += i18n("Status: %1").arg( (*it)->statusStr() );
+        optionsString += "\n";
+      }
+      if ( !(*it)->secrecyStr().isEmpty() ) {
+        optionsString += i18n("Secrecy: %1").arg( (*it)->secrecyStr() );
+        optionsString += "\n";
+      }
       if ( (*it)->type() == "Event" ) {
         Event *e = static_cast<Event*>(*it);
         if ( e->transparency() == Event::Opaque ) {
Index: korganizer/kodialogmanager.cpp
===================================================================
--- korganizer/kodialogmanager.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ korganizer/kodialogmanager.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -66,7 +66,7 @@
     KODialogManager *mDialogManager;
 };
 
-class KODialogManager::EditorDialogVisitor : 
+class KODialogManager::EditorDialogVisitor :
       public KODialogManager::DialogManagerVisitor
 {
   public:
@@ -268,6 +268,7 @@
 
 KOTodoEditor *KODialogManager::getTodoEditor()
 {
+  kdDebug(5850) << k_funcinfo << endl;
   KOTodoEditor *todoEditor = new KOTodoEditor( mMainView->calendar(), mMainView );
   connectEditor( todoEditor );
   return todoEditor;
Index: korganizer/korganizer_configplugins.desktop
===================================================================
--- korganizer/korganizer_configplugins.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ korganizer/korganizer_configplugins.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -14,7 +14,8 @@
 
 Name=Plugins
 Name[af]=Inprop modules
-Name[be]=Дапаўненьні
+Name[ar]=القوابس
+Name[be]=Дапаўненні
 Name[bg]=Приставки
 Name[br]=Lugantoù
 Name[ca]=Endollables
@@ -38,9 +39,11 @@
 Name[ja]=プラグイン
 Name[km]=កម្មវិធី​ជំនួយ
 Name[lt]=Priedai
+Name[mk]=Приклучоци
 Name[ms]=Plugin
 Name[nb]=Programtillegg
 Name[nds]=Modulen
+Name[ne]=प्लगइन
 Name[nn]=Programtillegg
 Name[pl]=Wtyczki
 Name[pt]='Plugins'
@@ -59,7 +62,7 @@
 Name[zh_TW]=外掛程式
 Comment=KOrganizer Plugin Configuration
 Comment[af]=Korganizer inprop module opstelling
-Comment[be]=Канфігурацыя дапаўненьняў "K Арганізатара"
+Comment[be]=Канфігурацыя дапаўненняў "K Арганізатара"
 Comment[bg]=Настройки на приставките за KOrganizer
 Comment[br]=Kefluniadur al lugent KOrganizer
 Comment[ca]=Configuració de l'endollable de KOrganizer
@@ -81,9 +84,11 @@
 Comment[ja]=KOrganizer プラグイン設定
 Comment[km]=ការ​កំណត់​រចនាសម្ព័ន្ធ​កម្មវិធី​ជំនួយ KOrganizer
 Comment[lt]=KOrganizer priedų konfigūravimas
+Comment[mk]=Конфигурација на приклучоци
 Comment[ms]=Konfigurasi Plugin KOrganizer 
 Comment[nb]=KOrganizer oppsett for programtillegg
 Comment[nds]=Modulen för KOrganizer instellen
+Comment[ne]=केडीई आयोजक प्लगइन कन्फिगरेसन
 Comment[nl]=KOrganizer plugininstellingen
 Comment[nn]=Oppsett av KOrganizer-programtillegg
 Comment[pl]=Konfiguracja wtyczek KOrganizera
@@ -101,7 +106,7 @@
 Comment[zh_CN]=KOrganizer 插件配置
 Comment[zh_TW]=KOrganizer外掛程式設定
 Keywords=korganizer,plugin,module
-Keywords[be]=K Арганізатар,дапаўненьне,модуль,korganizer,plugin,module
+Keywords[be]=K Арганізатар,дапаўненне,модуль,korganizer,plugin,module
 Keywords[bg]=организатор, модул, приставка, korganizer, plugin, module
 Keywords[ca]=korganizer,endollable,mòdul
 Keywords[cs]=korganizer,modul
@@ -123,9 +128,11 @@
 Keywords[ja]=korganizer,プラグイン,モジュール
 Keywords[km]=korganizer,កម្មវិធី​ជំនួយ,ម៉ូឌុល
 Keywords[lt]=korganizer,plugin,module,modulis,priedas
+Keywords[mk]=korganizer,plugin,module,корганизатор,приклучок,приклучоци,модул.модули
 Keywords[ms]=korganizer,plugin,modul
 Keywords[nb]=korganizer,programtillegg,modul
 Keywords[nds]=KOrganizer,Moduul,Modulen,Plugins
+Keywords[ne]=केडीई आयोजक, प्लगइन, मोड्युल
 Keywords[nn]=korganizer,programtillegg,modul
 Keywords[pl]=korganizer,wtyczka,moduł
 Keywords[pt]=korganizer,'plugin',módulo
Index: korganizer/koeditorgeneraltodo.cpp
===================================================================
--- korganizer/koeditorgeneraltodo.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ korganizer/koeditorgeneraltodo.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -95,6 +95,7 @@
 
 void KOEditorGeneralTodo::initTime(QWidget *parent,QBoxLayout *topLayout)
 {
+  kdDebug(5850) << k_funcinfo << endl;
   QBoxLayout *timeLayout = new QVBoxLayout(topLayout);
 
   QGroupBox *timeGroupBox = new QGroupBox(1,QGroupBox::Horizontal,
@@ -224,16 +225,11 @@
 
 void KOEditorGeneralTodo::setDefaults( const QDateTime &due, bool allDay )
 {
-kdDebug()<<"KOEditorGeneralTodo::setDefaults: " << due <<endl;
+  kdDebug(5850) << k_funcinfo << due <<endl;
   KOEditorGeneral::setDefaults(allDay);
 
   mTimeButton->setChecked( !allDay );
-  if(mTimeButton->isChecked()) {
-    mTimeButton->setEnabled(true);
-  }
-  else {
-    mTimeButton->setEnabled(false);
-  }
+  mTimeButton->setEnabled( mTimeButton->isChecked() /* i.e. !allDay */ );
 
   enableTimeEdits( !allDay );
 
@@ -246,9 +242,13 @@
   if ( due.isValid() ) {
     mDueDateEdit->setDate( due.date() );
     mDueTimeEdit->setTime( due.time() );
+  } else {
+    // Make it due tomorrow.
+    mDueDateEdit->setDate( QDate::currentDate().addDays(1) );
+    mDueTimeEdit->setTime( QTime::currentTime() );
   }
 
-  if ( QDateTime::currentDateTime() < due ) {
+  if ( !due.isValid() || (QDateTime::currentDateTime() < due) ) {
     mStartDateEdit->setDate( QDate::currentDate() );
     mStartTimeEdit->setTime( QTime::currentTime() );
   } else {
Index: korganizer/korganizer_configtime.desktop
===================================================================
--- korganizer/korganizer_configtime.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ korganizer/korganizer_configtime.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -14,7 +14,7 @@
 
 Name=Time & Date
 Name[af]=Datum & Tyd
-Name[ar]=الوقت والتاريخ
+Name[ar]=الوقت و التاريخ
 Name[be]=Час і дата
 Name[bg]=Дата и час
 Name[br]=Deiziad hag eur
@@ -41,9 +41,11 @@
 Name[ja]=日付と時間
 Name[km]=កាលបរិច្ឆេទ & ពេលវេលា
 Name[lt]=Laikas ir data
+Name[mk]=Датуми и времиња
 Name[ms]=Waktu & Tarikh
 Name[nb]=Dato og tid
 Name[nds]=Tiet & Datum
+Name[ne]=मिति र समय
 Name[nl]=Datum & tijd
 Name[nn]=Tidsinnstillingar
 Name[pl]=Czas i data
@@ -66,7 +68,7 @@
 Name[zh_TW]=時間與日期
 Comment=KOrganizer Time Configuration
 Comment[af]=KOrganizer tyd opstelling
-Comment[ar]=إعداد وقت KOrganizer
+Comment[ar]=إعداد الوقت لِــ KOrganizer
 Comment[be]=Канфігурацыя часу "K Арганізатара"
 Comment[bg]=Настройки на дата и час за KOrganizer
 Comment[bs]=KOrganizer podešavanje vremena
@@ -91,9 +93,11 @@
 Comment[ja]=KOrganizer 時間設定
 Comment[km]=ការ​កំណត់​រចនាសម្ព័ន្ធ​ពេលវេលា​របស់ KOrganizer
 Comment[lt]=KOrganizer laiko konfigūravimas
+Comment[mk]=Конфигурација на датуми и времиња
 Comment[ms]=Konfigurasi Waktu KOrganizer 
 Comment[nb]=KOrganizer tidsoppsett
 Comment[nds]=Tietinstellen för KOrganizer
+Comment[ne]=केडीई आयोजक समय कन्फिगरेसन
 Comment[nl]=KOrganizer datum en tijd instellen
 Comment[nn]=KOrganizer, tidsinnstillingar
 Comment[pl]=Konfiguracja czasu dla KOrganizera
@@ -139,9 +143,11 @@
 Keywords[ja]=korganizer,時間
 Keywords[km]=korganizer,ពេលវេលា
 Keywords[lt]=korganizer,time,laikas
+Keywords[mk]=korganizer,time,корганизатор,датум,време
 Keywords[ms]=korganizer,waktu
 Keywords[nb]=korganizer,tid
 Keywords[nds]=KOrganizer,Tiet
+Keywords[ne]=केडीई आयोजक, समय
 Keywords[nl]=datum,tijd,korganizer
 Keywords[nn]=korganizer,tid
 Keywords[pl]=korganizer,czas,data,daty
Index: korganizer/korganizer_configgroupscheduling.desktop
===================================================================
--- korganizer/korganizer_configgroupscheduling.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ korganizer/korganizer_configgroupscheduling.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -37,9 +37,11 @@
 Name[ja]=グループスケジューリング
 Name[km]=រៀបចំ​កាលវិភាគ​ក្រុម
 Name[lt]=Grupių tvarkaraščių tvarkymas
+Name[mk]=Закажување групи
 Name[ms]=Penjadualan Kumpulan
 Name[nb]=Gruppeplanlegging
 Name[nds]=Koppelplanen
+Name[ne]=समूह कार्यतालिका
 Name[nl]=Groepsplanning
 Name[nn]=Gruppeplanlegging
 Name[pl]=Planowanie grupowe
@@ -84,9 +86,11 @@
 Comment[ja]=KOrganizer グループスケジューリング設定
 Comment[km]=ការ​កំណត់​រចនាសម្ព័ន្ធ​ការ​រៀបចំ​កាលវិភាគ​ក្រុម​របស់ KOrganizer
 Comment[lt]=KOrganizer grupių tvarkaraščių tvarkymo konfigūravimas
+Comment[mk]=Конфигурација на закажување групи
 Comment[ms]=Konfigurasi Penjadualan Kumpulan KOrganizer 
 Comment[nb]=Gruppeplanleggingsoppsett for KOrganizer
 Comment[nds]=Koppelplanen för KOrganizer instellen
+Comment[ne]=केडीई आयोजक समूह कार्यतालिका कन्फिगरेसन
 Comment[nl]=KOrganizer groepsplanning instellen
 Comment[nn]=KOrganizer, innstillingar for gruppeplanlegging
 Comment[pl]=Konfiguracja planowania grupowego dla KOrganizera
@@ -127,9 +131,11 @@
 Keywords[ja]=korganizer,グループ,スケジューリング
 Keywords[km]=korganizer,ក្រុម,កាលវិភាគ
 Keywords[lt]=korganizer,group,scheduling,tvarkaraštis, grupė
+Keywords[mk]=korganizer,group,scheduling,корганизатор,група,групи,закажување
 Keywords[ms]=korganizer,kumpulan,penjadualan
 Keywords[nb]=korganizer,gruppe,planlegging
 Keywords[nds]=KOrganizer,Koppel,Plaan,planen
+Keywords[ne]=केडीई आयोजक, समूह, कार्यतालिका
 Keywords[nl]=korganizer,group,scheduling,plannen,groep
 Keywords[nn]=korganizer,gruppe,planlegging
 Keywords[pl]=korganizer,grupa,planowanie
Index: korganizer/actionmanager.cpp
===================================================================
--- korganizer/actionmanager.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ korganizer/actionmanager.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -341,7 +341,7 @@
                             mCalendarView->viewManager(),
                             SLOT( showNextXView() ),
                             mACollection, "view_nextx" );
-  mNextXDays->setText( i18n( "&Next Day", "Ne&xt %n Days",
+  mNextXDays->setText( i18n( "&Next Day", "&Next %n Days",
                              KOPrefs::instance()->mNextXDays ) );
   new KAction( i18n("W&ork Week"),
                KOGlobals::self()->smallIcon( "5days" ), 0,
Index: korganizer/korgac/korgac.desktop
===================================================================
--- korganizer/korgac/korgac.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ korganizer/korgac/korgac.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -3,6 +3,7 @@
 Encoding=UTF-8
 Name=KOrganizer Reminder Client
 Name[af]=KOrganizer herhinner kliënt
+Name[ar]=زبون المنبه لِــ KOrganizer
 Name[bg]=Клиент за аларма на KOrganizer
 Name[ca]=Client de l'alarma de KOrganizer
 Name[cs]=Klient upomínek KOrganizeru
@@ -22,8 +23,10 @@
 Name[ja]=KOrganizer リマインダクライアント
 Name[km]=កម្មវិធី​រំលឹក​របស់ KOrganizer
 Name[lt]=KOrganizer priminimų klientas
+Name[mk]=Клиент за потсетување во КОрганизатор
 Name[nb]=KOrganizer klient for påminning
 Name[nds]=KOrganizer-Anstöötgever
+Name[ne]=केडीई आयोजक रिमाइन्डर क्लाइन्ट
 Name[nl]=KOrganizer herinneringsdaemon
 Name[nn]=Alarmklient for KOrganizer
 Name[pl]=Klient przypominania KOrganizera
@@ -64,6 +67,7 @@
 GenericName[lt]=KOrganizer priminimų tarnybos klientas
 GenericName[nb]=KOrganizer klient for påminningstjenesten
 GenericName[nds]=Client för den Anstötendämoon vun KOrganizer
+GenericName[ne]=केडीई आयोजक रिमाइन्डर डेइमोन क्लाइन्ट
 GenericName[nl]=KOrganizer herinneringsdaemon
 GenericName[nn]=Alarmnisseklient for KOrganizer
 GenericName[pl]=Klient demona przypominania KOrganizera
Index: korganizer/kotodoview.cpp
===================================================================
--- korganizer/kotodoview.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ korganizer/kotodoview.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -829,6 +829,7 @@
 
 void KOTodoView::newTodo()
 {
+  kdDebug() << k_funcinfo << endl;
   emit newTodoSignal( QDate::currentDate().addDays(7) );
 }
 
Index: korganizer/kojournalview.cpp
===================================================================
--- korganizer/kojournalview.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ korganizer/kojournalview.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -49,11 +49,11 @@
   QVBoxLayout*topLayout = new QVBoxLayout( this );
   topLayout->setAutoAdd(true);
   mSV = new QScrollView( this, "JournalScrollView" );
-  topLayout = new QVBoxLayout( mSV->viewport() );
-  topLayout->setAutoAdd(true);
   mVBox = new QVBox( mSV->viewport() );
   mSV->setVScrollBarMode( QScrollView::Auto );
   mSV->setHScrollBarMode( QScrollView::AlwaysOff );
+  mSV->setResizePolicy( QScrollView::AutoOneFit );
+  mSV->addChild( mVBox );
 //  mVBox->setSpacing( 10 );
 }
 
Index: korganizer/interfaces/calendar/calendarplugin.desktop
===================================================================
--- korganizer/interfaces/calendar/calendarplugin.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ korganizer/interfaces/calendar/calendarplugin.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -5,7 +5,7 @@
 Comment=Calendar Plugin
 Comment[af]=Kalender Inplak
 Comment[az]=Təqvim Əlavəsi
-Comment[be]=Дапаўненьне "Календар"
+Comment[be]=Дапаўненне "Календар"
 Comment[bg]=Приставка за календар
 Comment[br]=Lugent an deiziadur
 Comment[bs]=Dodatak za kalendar
@@ -34,11 +34,12 @@
 Comment[ko]=달력 플러그인
 Comment[lt]=iCalendar priedas
 Comment[lv]=Kalendāra Iespraudnis
-Comment[mk]=Календар - додаток
+Comment[mk]=Приклучок за календар
 Comment[ms]=Plugin Kalendar
 Comment[mt]=Plagin tal-kalendarju
 Comment[nb]=Calendar-programtillegg
 Comment[nds]=Kalenner-Moduul
+Comment[ne]=क्यालेन्डर प्लगइन
 Comment[nl]=Agendaplugin
 Comment[nn]=Kalendermodul
 Comment[nso]=Plugin ya Tshupamabaka
Index: korganizer/interfaces/calendar/calendardecoration.desktop
===================================================================
--- korganizer/interfaces/calendar/calendardecoration.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ korganizer/interfaces/calendar/calendardecoration.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -31,11 +31,12 @@
 Comment[km]=កម្មវិធី​ជំនួយ​សម្រាប់​តុបតែង​ប្រតិទិន
 Comment[lt]=vCalendar dekoracijų priedas
 Comment[lv]=Kalendāra Dekorāciju Iespraudnis
-Comment[mk]=Календар - додаток за изглед
+Comment[mk]=Приклучок за декорација на календар
 Comment[ms]=Plugin Hiasan Kalendar
 Comment[mt]=Plagin ta' dekorazzjoni tal-kalendarju
 Comment[nb]=Calendar dekorasjonsprogramtillegg
 Comment[nds]=Dekoratschoon för den Kalenner
+Comment[ne]=क्यालेन्डर सजावट प्लगइन
 Comment[nl]=Agendadecoratieplugin
 Comment[nn]=Tilleggsmodul for kalenderpynt
 Comment[nso]=Plugin ya Kgabiso ya Tshupamabaka
Index: korganizer/interfaces/korganizer/korgprintplugin.desktop
===================================================================
--- korganizer/interfaces/korganizer/korgprintplugin.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ korganizer/interfaces/korganizer/korgprintplugin.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -29,11 +29,12 @@
 Comment[km]=ផ្នែក​របស់ KOrganizer
 Comment[lt]=KOrganizer dalis
 Comment[lv]=KOrganizer Daļa
-Comment[mk]=Организатор - дел
+Comment[mk]=Дел од КОрганизатор
 Comment[ms]=Bahagian KOrganizer
 Comment[mt]=Parti ta' KOrganizer
 Comment[nb]=KOrganizerdel
 Comment[nds]=KOrganizer-Komponent
+Comment[ne]=केडीई आयोजक भाग
 Comment[nn]=KOrganizer-del
 Comment[nso]=Seripa sa KMokopanyi
 Comment[pl]=Moduł KOrganizera
Index: korganizer/interfaces/korganizer/korganizerpart.desktop
===================================================================
--- korganizer/interfaces/korganizer/korganizerpart.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ korganizer/interfaces/korganizer/korganizerpart.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -29,11 +29,12 @@
 Comment[km]=ផ្នែក​របស់ KOrganizer
 Comment[lt]=KOrganizer dalis
 Comment[lv]=KOrganizer Daļa
-Comment[mk]=Организатор - дел
+Comment[mk]=Дел од КОрганизатор
 Comment[ms]=Bahagian KOrganizer
 Comment[mt]=Parti ta' KOrganizer
 Comment[nb]=KOrganizerdel
 Comment[nds]=KOrganizer-Komponent
+Comment[ne]=केडीई आयोजक भाग
 Comment[nn]=KOrganizer-del
 Comment[nso]=Seripa sa KMokopanyi
 Comment[pl]=Moduł KOrganizera
Index: korganizer/kotodoeditor.cpp
===================================================================
--- korganizer/kotodoeditor.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ korganizer/kotodoeditor.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -66,8 +66,8 @@
 
 void KOTodoEditor::init()
 {
+  kdDebug(5850) << k_funcinfo << endl;
   setupGeneral();
-//  setupAlarmsTab();
   setupRecurrence();
   setupAttendeesTab();
   setupAttachmentsTab();
@@ -132,6 +132,9 @@
     mGeneral->initCategories( topFrame, detailsLayout );
     mGeneral->initSecrecy( topFrame, detailsLayout );
   }
+  // By default, the To-do has no time associated and
+  // neither a start nor end time.
+  mGeneral->setDefaults( QDateTime(), false );
 
   mGeneral->finishSetup();
 }
@@ -152,6 +155,7 @@
 
 void KOTodoEditor::editIncidence(Incidence *incidence)
 {
+  kdDebug(5850) << k_funcinfo << endl;
   Todo *todo=dynamic_cast<Todo*>(incidence);
   if (todo)
   {
@@ -166,6 +170,7 @@
 
 void KOTodoEditor::newTodo()
 {
+  kdDebug(5850) << k_funcinfo << endl;
   init();
   mTodo = 0;
   setCaption( i18n("New To-do") );
@@ -187,6 +192,7 @@
 
 void KOTodoEditor::loadDefaults()
 {
+  kdDebug(5850) << k_funcinfo << endl;
   setDates( QDateTime::currentDateTime().addDays(7), true, 0 );
 }
 
Index: korganizer/plugins/datenums/datenums.desktop
===================================================================
--- korganizer/plugins/datenums/datenums.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ korganizer/plugins/datenums/datenums.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -3,6 +3,7 @@
 X-KDE-Library=libkorg_datenums
 Name=Date Numbers Plugin for Calendars
 Name[af]=Dag nommer inprop module vir kalenders
+Name[ar]=قابس أرقام التاريخ للتقويم
 Name[bg]=Приставка на календара за дати и смятане с дати
 Name[bs]=Dodatak za kalendar - brojevi datuma
 Name[ca]=Endollable de números de data per als calendaris
@@ -27,6 +28,7 @@
 Name[ms]=Plugin Bilangan Tarikh untuk Kalendar
 Name[nb]=Datonummer programtillegg for Kalender
 Name[nds]=Kalennerdag-Moduul för Kalenners
+Name[ne]=क्यालेन्डरका लागि मिति सङ्ख्या प्लगइन
 Name[nl]=Datumgetallenplugin voor agenda's
 Name[nn]=Datonummer programtillegg for Kalender
 Name[pl]=Wtyczka numerów dni dla Kalendarzy
@@ -68,6 +70,7 @@
 Comment[ms]=Setiap hari plugin ini memaparkan  bilangan hari tahun tersebut di atas paparan agenda. Contohnya , 1 Februari adalah hari ke 32 bagi tahun tersebut.
 Comment[nb]=For hver dag viser dette programtillegget dagens nummer i året øverst på dagsvisningen. 1. februar er f.eks. dag nr. 32 i året.
 Comment[nds]=Dit Moduul wiest för elkeen Dag sien Nummer in't Johr baven de Dagansicht. De 1. Februor is t.B. de 32. Dag vun't Johr.
+Comment[ne]=प्रत्येक दिनका लागि यो प्लगइनले एजेन्डा दृश्यको माथि यस वर्षको दिन नम्बर देखाउछ । उदारणका लागि, फेब्रुवरी १ वर्षको बत्तिसौ दिन हो ।
 Comment[nl]=Deze plugin zorgt ervoor dat het dagnummer boven de agendaweergave wordt geplaatst. Bijvoorbeeld, bij 1 februari hoort dagnummer 32.
 Comment[nn]=For kvar dag vil dette programtillegget visa nummeret til denne dagen i året øvst i tidsplanen. 1. februar vil til dømes visast som dag 32.
 Comment[pl]=Ta wtyczka dla każdego dnia pokazuje jego numer kolejny w roku, na szczycie widoku planu. Na przykład, 1 luty to 32 dzień roku.
Index: korganizer/plugins/projectview/projectview.desktop
===================================================================
--- korganizer/plugins/projectview/projectview.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ korganizer/plugins/projectview/projectview.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -31,10 +31,10 @@
 Name[km]=កម្មវិធី​ជំនួយ​ទិដ្ឋភាព​គម្រោង​សម្រាប់ KOrganizer
 Name[lt]=Projekto peržiūros priedas, skirtas KOrganizer
 Name[lv]=Projekta Skatījuma Iespraudnis KOrganaizeram
-Name[mk]=Project View додаток за Организатор
 Name[ms]=Plugin Paparan Projek untuk KOrganizer
 Name[nb]=Programtilllegg for prosjektvisning i KOrganizer
 Name[nds]=Projektkieker-Moduul för KOrganizer
+Name[ne]=केडीई आयोजकका लागि परियोजना दृश्य प्लगइन
 Name[nl]=Projectenweergaveplugin voor KOrganizer
 Name[nn]=Programtillegg for prosjektvising i KOrganizer
 Name[nso]=Plugin ya Pono ya Porojeke ya KMmeakanyi
@@ -76,12 +76,13 @@
 Comment[hu]=Ezzel a modullal projekttervező nézet alakítható ki a KOrganizerben (például a feladatokhoz vagy a havi nézetekhez). Ha aktiválja ezt a modult, átválthat projektnézetbe, hogy a feladatok projekttervként legyenek megtekinthetők.
 Comment[is]=Þetta íforrit veitir verkskipulagssýn fyrir KOrganizer (svipað og verkþátta eða mánaðarsýn). Ef þú virkjar þetta íforrit, getur þú á einfaldan hátt skipt yfir í verkefnasýn og skoðað verkþáttalistann þinn í skipuleggjara.
 Comment[it]=Questo plugin fornisce una vista di pianificazione progetto per KOrganizer (come la vista delle cose da fare o quella mensile). Se abiliti questo plugin, puoi passare dalla vista progetto alla vista delle cose da fare come in un pianificatore di progetti.
-Comment[ja]=本プラグインは (to-do 又は月ごとのビューのような) KOrganizer 用のプロジェクト計画ビューを供給します。本プラグインを有効にすると、プロジェクトビューに切替え、プロジェクトプランナにあるような to-do リストを閲覧できます。
+Comment[ja]=本プラグインは (to-do または月ごとのビューのような) KOrganizer 用のプロジェクト計画ビューを供給します。本プラグインを有効にすると、プロジェクトビューに切り替え、プロジェクトプランナにあるような to-do リストを閲覧できます。
 Comment[km]=កម្មវិធី​ជំនួយ​នេះ​ផ្ដល់​នូវ​ទិដ្ឋភាព​រៀបចំ​គម្រោង​សម្រាប់ korganizer (ដូចជា ទិដ្ឋភាព​ការងារ​ត្រូវ​ធ្វើ ឬ ទិដ្ឋភាព​ខែ​ជាដើម) ។ បើ​អ្នក​ធ្វើ​ឲ្យ​កម្មវិធី​ជំនួយ​នេះ​ប្រើ​បាន អ្នក​នឹង​អាច​ប្ដូរ​ទិដ្ឋភាព​គម្រោង ហើយ​មើល​ព្រឹត្តិការណ៍​របស់​អ្នក​ដូចជា​នៅ​ក្នុងកម្មវិធី​រៀបចំ​គម្រោង​អញ្ចឹង​ដែរ ។
 Comment[lt]=Šis priedas pateikia KOrganizaer projekto planavimo vaizdą (panašiai kaip darbų ar mėnesio vaizdai). Jei įjungsite šį įskiepį, galėsite peršokti į projekto vaizdą ir peržiūrėti savo darbų sąrašą kaip projektą.
 Comment[ms]=Plugin ini menyediakan paparan perancangan projek untuk KOrganizer (seperti tugasan atau paparan bulan). Jika plugin ini diaktifkan, anda boleh beralih ke paparan projek dan paparkan senarai tugasan seperti dalam perancang projek. 
 Comment[nb]=Dette programtilleggmet lager en prosjektplan-visning for KOrganizer (som i gjørelister og månedsvisninger). Slår du på dette programtilleggmet kan du bytte til prosjektvisning og se på gjørelista som i en prosjektplan.
 Comment[nds]=Mit dit Moduul kannst Du in KOrganizer en Projektplaan-Ansicht opropen (jüst as de Opgaven- oder Maandansichten). Wenn Du dit Moduul aktiveerst, kannst Du na de Projektansicht wesseln un Dien Opgavenlist as mit en Projektplaner ankieken.
+Comment[ne]=यो प्लगइनले केडीई आयोजकका लागि परियोजना योजना दृश्य उपलब्ध गराउछ (जस्तै: कार्य गर्न वा महिना हेर्न) । तपाईँले यो प्लगइन सक्षम पारेमा, परियोजना दृश्यमा स्विच गर्न र परियोजना योजनाकारमा जस्तै तपाईँको कार्य गर्ने सूची हेर्न सक्नुहुन्छ ।
 Comment[nl]=Deze plugin biedt een projectweergave voor KOrganizer (net zoals een takenlijst of maandweergave). Wanneer u deze plugin aanzet, kunt u deze weergave aanzetten om uw takenlijst te bekijken als een projectplanner.
 Comment[nn]=Dette programtillegget lagar ei prosjektplanvising for KOrganizer (slik som oppgåve- eller månadsvisingane). Dersom du brukar dette programtillegget, kan du visa oppgåvelista som i ein prosjektplanleggjar.
 Comment[pl]=Ta wtyczka tworzy widok planowania projektu w KOrganizerze (tak jak widok zadań do zrobienia lub widok miesiąca). Po włączeniu tej wtyczki możliwe jest przełączenie się na widok projektu zadań do zrobienia.
Index: korganizer/plugins/exchange/exchange.desktop
===================================================================
--- korganizer/plugins/exchange/exchange.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ korganizer/plugins/exchange/exchange.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -3,7 +3,7 @@
 X-KDE-Library=libkorg_exchange
 Name=Microsoft Exchange 2000 Plugin for KOrganizer
 Name[af]=Microsoft Exchange 2000 inprop module vir KOrganizer
-Name[be]=Дапаўненьне K Арганізатара "Microsoft Exchange 2000"
+Name[be]=Дапаўненне K Арганізатара "Microsoft Exchange 2000"
 Name[bg]=Приставка на организатора за връзка с Microsoft Exchange 2000
 Name[bs]=Microsoft Exchange 2000 dodatak za KOrganizer
 Name[ca]=Endollable Microsoft Exchange 2000 per a KOrganizer
@@ -25,9 +25,11 @@
 Name[ja]=KOrganizer の Microsoft Exchange 2000 プラグイン
 Name[km]=កម្មវិធី​ជំនួយ​ម៉ៃក្រូសូហ្វ Exchange ២០០០ សម្រាប់ KOrganizer
 Name[lt]=Microsoft Exchange 2000 priedas, skirtas KOrganizer
+Name[mk]=Приклучок за КОрганизатор за Microsoft Exchange 2000
 Name[ms]=PLugin Microsoft Exchange 2000  untuk KOrganizer
 Name[nb]=Microsoft Exchange 2000 programtillegg for KOrganizer
 Name[nds]=MSExchange2000-Moduul för KOrganizer
+Name[ne]=केडीई आयोजकका लागि माइक्रोसफ्ट एक्सचेन्ज 2000
 Name[nl]=Microsoft Exchange 2000 plugin voor KOrganizer
 Name[nn]=Microsoft Exchange 2000 programtillegg for KOrganizer
 Name[pl]=Wtyczka Microsoft Exchange 2000 dla Organizatora
@@ -66,9 +68,11 @@
 Comment[ja]=本プラグインにより、korganizer のユーザは Microsoft Exchange 2000 グループウェアサーバとの同期が可能となります。
 Comment[km]=កម្មវិធី​ជំនួយ​នេះ​អនុញ្ញាត​ឲ្យ​អ្នក​ប្រើ​របស់ korganizer ធ្វើការ​ជាមួយ​ម៉ាស៊ីន​បម្រើ​កម្មវិធី​ពហុ​អ្នកប្រើ​របស់​ម៉ៃក្រូសូហ្វ Exchange ២០០០ ។
 Comment[lt]=Šis priedas leidžia korganizer dirbti su Microsoft Exchange 2000 groupware serveriais.
+Comment[mk]=Овој приклучок им овозможува на корисниците на КОрганизатор да работат со groupware-серверите на Microsoft Exchange 2000.
 Comment[ms]=Plugin ini membenarkan pengguna korganizer bekerja bersama pelayan groupware Microsoft Exchange 2000.
 Comment[nb]=Med dette programtillegget kan korganizer-brukere arbeide med gruppevare-tjenere fra Microsoft Exchange 2000.i
 Comment[nds]=Över dit Moduul köönt KOrganizer-Brukers mit Groupware-Servers för MSExchange-2000 arbeiden.
+Comment[ne]=यो प्लगइनले माइक्रोसफ्ट एक्सचेन्ज 2000 ग्रुपवेयर सर्भरमा केडीई आयोजकलाई कार्य गर्न अनुमति दिन्छ ।
 Comment[nl]=Deze plugin maakt het mogelijk om Microsoft Exchange 2000 te gebruiken in KOrganizer.
 Comment[nn]=Dette programtillegget lèt KOrganizer-brukarar arbeida saman med Microsoft Exchange 2000-gruppevaretenarar.
 Comment[pl]=Ta wtyczka pozwala KOrganizerowi współpracować z serwerami pracy grupowej Microsoft Exchange.
Index: korganizer/plugins/printing/year/yearprint.desktop
===================================================================
--- korganizer/plugins/printing/year/yearprint.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ korganizer/plugins/printing/year/yearprint.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -18,6 +18,7 @@
 Name[ja]=年毎印刷スタイル
 Name[km]=រចនាប័ទ្ម​បោះពុម្ព​ប្រចាំ​ឆ្នាំ
 Name[nds]=Johrkalenner-Druckstil
+Name[ne]=वार्षिक मुद्रण शैली
 Name[nl]=Printstijl voor jaarkalender
 Name[pl]=Styl drukowania roku
 Name[pt]=Estilo de Impressão em Anuário
@@ -29,6 +30,7 @@
 Name[sr@Latn]=Godišnji stil štampe
 Name[sv]=Årlig utskriftsstil
 Name[uk]=Стиль друку щорічником
+Name[zh_CN]=按年打印样式
 Name[zh_TW]=年度列印風格
 Comment=This plugin allows you to print out a yearly calendar.
 Comment[af]=Hierdie inprop module maak dit moontlik om 'n kalender vir 'n hele jaar te druk.
@@ -47,6 +49,7 @@
 Comment[ja]=本プラグインにより年毎のカレンダーを印刷できるようになります。
 Comment[km]=កម្មវិធី​ជំនួយ​នេះ​អនុញ្ញាត​ឲ្យ​អ្នក​បោះពុម្ព​​ប្រតិទិន​ប្រចាំ​ឆ្នាំ ។
 Comment[nds]=Mit dit Moduul kannst Du en Kalenner för't hele Johr utdrucken.
+Comment[ne]=यो प्लगइनले तपाईँलाई वार्षिक पात्रो मुद्रण गर्न अनुमति दिन्छ ।
 Comment[nl]=Deze plugin maakt het mogelijk om een jaarkalender af te drukken.
 Comment[pl]=Ta wtyczka pozwala drukować roczny kalendarz.
 Comment[pt]=Este 'plugin' permite-lhe imprimir um calendário anual.
@@ -58,6 +61,7 @@
 Comment[sr@Latn]=Ovaj priključak vam omogućava da odštampate godišnji kalendar.
 Comment[sv]=Det här insticksprogrammet gör att du kan skriva ut en årlig kalender.
 Comment[uk]=Цей журнал надає можливість друкувати щорічний календар.
+Comment[zh_CN]=此插件允许您打印年历。
 Comment[zh_TW]=此外掛程式讓您印出年曆。
 Type=Service
 ServiceTypes=Calendar/Plugin,KOrganizer/PrintPlugin
Index: korganizer/plugins/printing/whatsnext/whatsnextprint.desktop
===================================================================
--- korganizer/plugins/printing/whatsnext/whatsnextprint.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ korganizer/plugins/printing/whatsnext/whatsnextprint.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -24,6 +24,7 @@
 Name[ms]=Gaya Cetak Apa Seterusnya
 Name[nb]=Utskriftsstil for Hva Nå
 Name[nds]=Druckstil för "Wat kummt nu"-Indrääg
+Name[ne]=पछिल्लो मुद्रण शैली कुन हो
 Name[nl]=Printstijl voor Wat komt er nu
 Name[nn]=Utskriftsstil for «Kva no»
 Name[pl]=Styl drukowania "Do dalej"
@@ -64,6 +65,7 @@
 Comment[ms]=Plugin ini membenarkan anda mencetak senarai semua peristiwa dan tugasan mendatang. 
 Comment[nb]=Med dette programtilleggmet kan du skrive ut en liste over kommende hendelser og ting som skal gjøres.
 Comment[nds]=Mit dit Moduul kann en List vun de direktemang nakamen Begeefnissen un Opgaven utdruckt warrn.
+Comment[ne]=यो प्लगइनले तपाईँलाई सबै पछि हुने घटना र गर्नुपर्ने कार्यहरुको सूचीको मुद्रण गर्न अनुमति दिन्छ ।
 Comment[nl]=Deze plugin maakt het mogelijk om een lijst van alle komende evenementen en taken uit te printen.
 Comment[nn]=Dette programtillegget lèt deg skriva ut ei liste over alle dei komande hendingane og oppføringane i hugselista.
 Comment[pl]=Ta wtyczka pozwala wydrukować wszystkie przyszłe zdarzenia i zadania.
Index: korganizer/plugins/printing/journal/journalprint.desktop
===================================================================
--- korganizer/plugins/printing/journal/journalprint.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ korganizer/plugins/printing/journal/journalprint.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -24,6 +24,7 @@
 Name[ms]=Gaya Cetak Jurnal 
 Name[nb]=Utskriftsstil for dagbok
 Name[nds]=Daagbook-Druckstil
+Name[ne]=जर्नल मुद्रण शैली
 Name[nl]=Printstijl voor journaals
 Name[nn]=Utskriftsstil for dagbok
 Name[pl]=Styl drukowania dziennika
@@ -64,6 +65,7 @@
 Comment[ms]=Plugin ini membenarkan anda mencetak entri jurnal  (entri diari).
 Comment[nb]=Med dette programtilleggmet kan du skrive ut oppføringer i dagboka.
 Comment[nds]=Mit dit Moduul köönt Daagbook-Indrääg utdruckt warrn.
+Comment[ne]=यो प्लगइनले तपाईँलाई जर्नल प्रविष्टि मुद्रण गर्न अनुमति दिन्छ (दैनिक विवरण प्रविष्टि) ।
 Comment[nl]=Deze plugin maakt het mogelijk om journalen uit te printen (dagboekitems).
 Comment[nn]=Dette programtillegget lèt deg skriva ut dagboksoppføringar.
 Comment[pl]=Ta wtyczka pozwala drukować wpisy dziennika.
Index: korganizer/plugins/printing/list/listprint.desktop
===================================================================
--- korganizer/plugins/printing/list/listprint.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ korganizer/plugins/printing/list/listprint.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -24,6 +24,7 @@
 Name[ms]=Gaya Cetakan Senarai 
 Name[nb]=Utskriftsstil for liste
 Name[nds]=Listen-Druckstil
+Name[ne]=सूची मुद्रण शैली
 Name[nl]=Printstijl voor lijsten
 Name[nn]=Utskriftsstil for dagbøker
 Name[pl]=Styl drukowania listy
@@ -64,6 +65,7 @@
 Comment[ms]=Plugin ini membenarkan anda mencetak peristiwa dan tugasan dalam borang senarai.
 Comment[nb]=Med dette programtilleggmet kan du skrive ut hendelser og gjørelister på liste-form.
 Comment[nds]=Mit dit Moduul köönt Begeefnissen un Opgaven as Listen utdruckt warrn.
+Comment[ne]=यो प्लगइनले तपाईँलाई घटना मुद्रण गर्न र सूची फारममा गर्नुपर्ने कार्यहरू गर्न अनुमति दिन्छ ।
 Comment[nl]=Deze plugin maakt het mogelijk om evenementen en taken in lijstvorm uit te printen.
 Comment[nn]=Dette programtillegget lèt deg skriva ut hendingar og hugselister på listeform.
 Comment[pl]=Ta wtyczka pozwala drukować zdarzenia i zadania w postaci listy.
Index: korganizer/plugins/timespanview/timespanview.desktop
===================================================================
--- korganizer/plugins/timespanview/timespanview.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ korganizer/plugins/timespanview/timespanview.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -24,6 +24,7 @@
 Name[ms]=Plugin Paparan Kitar Waktu untuk KOrganizer
 Name[nb]=Programtilllegg for periodevisning i KOrganizer
 Name[nds]=Tietbruuk-Moduul för KOrganizer
+Name[ne]=केडीई आयोजकका लागि समयावधि दृश्य प्लगइन
 Name[nl]=Tijdspanneplugin voor KOrganizer
 Name[nn]=Programtillegg for tidsromsvising i KOrganizer
 Name[pl]=Wtyczka widoku zakresu czasu dla KOrganizera
@@ -58,12 +59,13 @@
 Comment[hu]=Ezzel modullal egy időszakot lehet áttekinteni a KOrganizerben (például a feladatokat vagy a havi nézeteket). Ha aktiválja ezt a modult, átválthat időszakos nézetbe, hogy az események Gantt-diagramon legyenek megtekinthetők.
 Comment[is]=Þetta íforrit veitir tímabilssýn fyrir KOrganizer (svipað og verkþátta eða mánaðarsýn). Ef þú virkjar þetta íforrit getur þú skipt yfir í tímabilssýn og skoðað atburðina þína eins og á Gantt skýringarmynd.
 Comment[it]=Questo plugin fornisce una vista a intervalli temporali. Se abiliti questo plugin, potrai passare alla vista a intervalli temporali e vedere i tuoi eventi come in un diagramma di Gantt.
-Comment[ja]=本プラグインは (to-do や month view のような) korganizer 用の timespan view を供給します。本プラグインを有効にすると、ガントチャートのように timespan view を切替え、イベントを表示できます。
+Comment[ja]=本プラグインは (to-do や month view のような) korganizer 用の timespan view を供給します。本プラグインを有効にすると、ガントチャートのように timespan view を切り替え、イベントを表示できます。
 Comment[km]=កម្មវិធី​ជំនួយ​នេះ​ផ្ដល់​នូវ​ទិដ្ឋភាព​រយៈពេល​សម្រាប់ korganizer (ដូចជា ទិដ្ឋភាព​ការងារ​ត្រូវ​ធ្វើ ឬ ទិដ្ឋភាព​ខែ​ជាដើម) ។ បើ​អ្នក​ធ្វើ​ឲ្យ​កម្មវិធី​ជំនួយ​នេះ​ប្រើ​បាន អ្នក​នឹង​អាច​ប្ដូរ​ទិដ្ឋភាព​រយៈពេល ហើយ​មើល​ព្រឹត្តិការណ៍​របស់​អ្នក​ដូចជា​នៅ​ក្នុងដ្យាក្រាម Gantt អញ្ចឹង​ដែរ ។
 Comment[lt]=Šis priedas korganizer programoje sudaro galimybę apžvelgti laiko tarpą (pvz., darbų arba mėnesio peržiūra). Įgalinus šį priedą galėsite persijungti į laiko tarpo peržiūrą ir žiūrėti įvykius tarsi Gantt diagramoje.
 Comment[ms]=Plugin ini menyediakan paparan kitar waktu  untuk korganizer (seperti tugasan atau paparan bulan). Jika plugin ini diaktifkan,anda boleh beralih ke paparan kitar masa dan paparkan peristiwa seperti dalam diagram Gantt. 
 Comment[nb]=Dette programtilleggmet lager en periodevisning for korganizer (slik som gjøreliste og månedsvisning). Hvis du slår på dette programtilleggmet kan du bytte til periodevisning og se hendelser som i et Gantt-diagram.
 Comment[nds]=Mit dit Moduul kannst Du in KOrganizer en Tietbruuk-Ansicht opropen (jüst as de Opgaven- oder Maandansichten). Wenn Du dit Moduul aktiveerst, kannst Du na de Tietbruukansicht wesseln un Dien Begeefnissen as Ganntt-Diagramm ankieken.
+Comment[ne]=यो प्लगइनले केडीई आयोजकका लागि समयावधि उपलब्ध गराउछ (गर्नुपर्ने कार्य वा महिना दृश्य जस्तो) । तपाईँले यो प्लगइन सक्षम पारेमा, तपाईँले समयावधि दृश्यमा स्वीच गर्न र गान्ट रेखाचित्र जस्तोमा घटना हेर्न सक्नुहुन्छ ।
 Comment[nl]=Deze plugin biedt een weergave voor KOrganizer (zoals de takenlijst en de maandweergave). Wanneer u deze plugin inschakelt kunt u kiezen voor een weergave waarin u uw evenementen in een Gantt-diagram kunt bekijken.
 Comment[pl]=Ta wtyczka tworzy widok zakresu czasu w KOrganizerze (tak jak widok zadań do zrobienia lub widok miesiąca). Po włączeniu tej wtyczki możliwe jest przełączenie się na widok zakresu czasu i przeglądanie zdarzeń jak na diagramie Gantta.
 Comment[pt]=Este 'plugin' oferece uma vista de distribuição temporal para o KOrganizer (como as vistas de itens por-fazer ou mensais). Se activar este 'plugin', poderá mudar para a vista de distribuição temporal e ver os seus eventos como num diagrama de Gantt.
Index: korganizer/plugins/hebrew/hebrew.desktop
===================================================================
--- korganizer/plugins/hebrew/hebrew.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ korganizer/plugins/hebrew/hebrew.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -24,9 +24,11 @@
 Name[ja]=ユダヤ歴カレンダープラグイン
 Name[km]=កម្មវិធី​ជំនួយ​ប្រតិទិន Jewish
 Name[lt]=Žydų kalendoriaus priedas
+Name[mk]=Приклучок за еврејски календар
 Name[ms]=PLugin Kalender Yahudi
 Name[nb]=Programtillegg for jødisk kalender
 Name[nds]=Moduul för juudschen Kalenner
+Name[ne]=यहूदि क्यालेन्डर प्लगइन
 Name[nl]=Joodse kalenderplugin
 Name[nn]=Programtillegg for jødisk kalender
 Name[pl]=Wtyczka kalendarza żydowskiego
@@ -66,9 +68,11 @@
 Comment[ja]=korganizer のすべての日付をユダヤ暦でも表示します。
 Comment[km]=បង្ហាញ​កាលបរិច្ឆេទ​ទាំងអស់​ក្នុង korganizer នៅ​ក្នុង​ប្រព័ន្ធ​ប្រតិទិន Jewish ។
 Comment[lt]=Rodo visas dienas kalendoriuje taip pat ir žydų kalendoriaus sistema.
+Comment[mk]=Ги прикажува сите датуми во КОрганизатор и според еврејскиот календар.
 Comment[ms]=Memaparkan semua tarikh dalam korganizer dan juga dalam sistem kalendar Yahudi.
 Comment[nb]=Viser alle datoer i korganizer også i det jødiske kalendersystemet. 
 Comment[nds]=Wiest all Daten binnen KOrganizer ok in den juudschen Kalenner.
+Comment[ne]=केडीई आयोजकमा पनि सबै मिति यहूदि क्यालेन्डर प्रणालीमा देखाउछ ।
 Comment[nl]=Toont alle data in KOrganizer ook in het Joodse kalendersysteem.
 Comment[nn]=Viser alle datoane i KOrganizer i den jødiske kalenderen.
 Comment[pl]=Pokazuje wszystkie daty w KOrganizerze również w kalendarzu żydowskim.
Index: korganizer/koagendaitem.cpp
===================================================================
--- korganizer/koagendaitem.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ korganizer/koagendaitem.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -31,10 +31,12 @@
 #include <kdebug.h>
 #include <klocale.h>
 #include <kwordwrap.h>
+#include <kmessagebox.h>
 
 #include <libkcal/icaldrag.h>
 #include <libkcal/vcaldrag.h>
 #include <libkdepim/kvcarddrag.h>
+#include <libemailfunctions/email.h>
 #ifndef KORG_NOKABC
 #include <kabc/addressee.h>
 #include <kabc/vcardconverter.h>
@@ -550,21 +552,18 @@
 void KOAgendaItem::addAttendee( const QString &newAttendee )
 {
   kdDebug(5850) << " Email: " << newAttendee << endl;
-  // TODO: Use proper email parsing instead of simply grepping for "<" and "@"
-  int pos = newAttendee.find("<");
-  QString name = newAttendee.left(pos);
-  QString email = newAttendee.mid(pos);
-  if (!email.isEmpty()) {
+  QString name, email;
+  KPIM::getNameAndMail( newAttendee, name, email );
+  if ( !( name.isEmpty() && email.isEmpty() ) ) {
     mIncidence->addAttendee(new Attendee(name,email));
-  } else if (name.contains("@")) {
-    mIncidence->addAttendee(new Attendee(name,name));
-  } else {
-    mIncidence->addAttendee(new Attendee(name,QString::null));
-  }
+    KMessageBox::information( this, i18n("Attendee \"%1\" added to the calendar item \"%2\"").arg(KPIM::normalizedAddress(name, email, QString())).arg(text()), i18n("Attendee added"), "AttendeeDroppedAdded" );
+  } 
+ 
 }
 
 void KOAgendaItem::dropEvent( QDropEvent *e )
 {
+  // TODO: Organize this better: First check for attachment (not only file, also any other url!), then if it's a vcard, otherwise check for attendees, then if the data is binary, add a binary attachment. 
 #ifndef KORG_NODND
   QString text;
 
Index: korganizer/journalentry.cpp
===================================================================
--- korganizer/journalentry.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ korganizer/journalentry.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -231,9 +231,8 @@
   mPrintButton = new QToolButton( this, "printButton" );
   mPrintButton->setPixmap( KOGlobals::self()->smallIcon( "printer1" ) );
   mPrintButton->setSizePolicy( QSizePolicy::Fixed, QSizePolicy::Fixed );
-  //FIXME: uncomment the next two lines after the string freeze is lifted
-//  QToolTip::add( mPrintButton, i18n("Print this journal entry") );
-//  QWhatsThis::add( mPrintButton, i18n("Opens the print dialog for this journal entry") );
+  QToolTip::add( mPrintButton, i18n("Print this journal entry") );
+  QWhatsThis::add( mPrintButton, i18n("Opens the print dialog for this journal entry") );
   mLayout->addWidget( mPrintButton, 0, 6 );
   connect( mPrintButton, SIGNAL(clicked()), this, SLOT( printItem() ) );
 #endif
Index: korganizer/korganizer_configfreebusy.desktop
===================================================================
--- korganizer/korganizer_configfreebusy.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ korganizer/korganizer_configfreebusy.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -36,9 +36,11 @@
 Name[ja]=動静情報
 Name[km]=ទំនេរ/រវល់
 Name[lt]=Užimtumas
+Name[mk]=Слободен/зафатен
 Name[ms]=Lapang/Sibuk
 Name[nb]=Ledig/Opptatt
 Name[nds]=Free/Bunnen
+Name[ne]=स्वतन्त्र/व्यस्त
 Name[nl]=Vrij/bezet
 Name[nn]=Ledig/opptatt
 Name[pl]=Wolny/zajęty
@@ -81,9 +83,11 @@
 Comment[ja]=KOrganizer 動静情報の設定
 Comment[km]=ការ​កំណត់​រចនាសម្ព័ន្ធ​ទំនេរ/រវល់ របស់ KOrganizer
 Comment[lt]=KOrganizer užimtumo konfigūravimas
+Comment[mk]=Конфигурација на слободни/зафатени термини
 Comment[ms]=Konfigurasi Lapang/Sibuk KOrganizer 
 Comment[nb]=KOrganizer oppsett for ledig/opptatt tid
 Comment[nds]=Free/Bunnen-Instellen för KOrganizer
+Comment[ne]=केडीई आयोजक स्वतन्त्र/व्यस्त कन्फिगरेसन
 Comment[nl]=KOrganizer vrij/bezet instellen
 Comment[nn]=KOrganizer, ledig/opptatt-innstillingar
 Comment[pl]=Konfiguracja czasu wolnego/zajętego dla KOrganizera
@@ -124,9 +128,11 @@
 Keywords[it]=korganizer,libero/occupato,pianificazione
 Keywords[ja]=korganizer,動静,スケジューラ
 Keywords[km]=korganizer,ទំនេរ,រវល់,កាលវិភាគ
+Keywords[mk]=korganizer,freebusy,scheduling,корганизатор,слободно,зафатено,закажување
 Keywords[ms]=korganizer,lapang sibuk,penjadualan
 Keywords[nb]=korganizer,ledigopptatt,planlegger
 Keywords[nds]=KOrganizer,Free/Bunnen,Free,Bunnen,Planen,Plaan
+Keywords[ne]=केडीई आयोजक, स्वतन्त्र व्यस्त, कार्यतालिका
 Keywords[nl]=korganizer,freebusy,scheduling,plannen,vrij,bezet,rooster
 Keywords[nn]=korganizer,ledigopptatt,planlegging
 Keywords[pl]=korganizer,wolny/zajęty,planowanie
Index: korganizer/korganizer.desktop
===================================================================
--- korganizer/korganizer.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ korganizer/korganizer.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -30,11 +30,12 @@
 Comment[km]=កម្មវិធី​ប្រតិទិន និង កាលវិភាគ
 Comment[lt]=Kalendoriaus ir planavimo programa
 Comment[lv]=Kalendāra un Plānošanas Programma
-Comment[mk]=Календар и роковник
+Comment[mk]=Програма за календари и закажувања
 Comment[ms]=Kalendar dan Program Penjadualan 
 Comment[mt]=Programm b' kalendarju w skeda
 Comment[nb]=Et kalender- og tidsplanleggingsprogram
 Comment[nds]=Kalenner un Tietplaner
+Comment[ne]=क्यालेन्डर र कार्यतालिका कार्यक्रम
 Comment[nl]=Agenda- en afsprakenprogramma
 Comment[nn]=Kalender- og planleggingsprogram
 Comment[nso]=Lenaneo la Peakanyo ya Tshupamabaka
@@ -69,12 +70,12 @@
 Terminal=false
 Name=KOrganizer
 Name[af]=Korganizer
-Name[be]=K Арганізатар
 Name[cy]=KTrefnydd
 Name[eo]=Organizilo
 Name[hi]=के-आर्गेनाइज़र
 Name[lv]=KOrganaizers
-Name[mk]=Организатор
+Name[mk]=КОрганизатор
+Name[ne]=केडीई आयोजक
 Name[nso]=KMokopanyi
 Name[pl]=Organizator
 Name[sv]=Korganizer
@@ -109,9 +110,11 @@
 GenericName[ja]=個人向けスケジュール管理
 GenericName[km]=កម្មវិធី​រៀបចំ​ផ្ទាល់​ខ្លួន
 GenericName[lt]=Asmeninės informacijos tvarkyklė
+GenericName[mk]=Личен организатор
 GenericName[ms]=Penyusun Peribadi
 GenericName[nb]=Personlig planlegger
 GenericName[nds]=Persöönlich Mötenkalenner
+GenericName[ne]=व्यक्तिगत आयोजक
 GenericName[nl]=Persoonlijke organizer
 GenericName[nn]=Personleg organiserar
 GenericName[pl]=Osobisty organizator
Index: korganizer/calendarview.cpp
===================================================================
--- korganizer/calendarview.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ korganizer/calendarview.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -987,6 +987,7 @@
 void CalendarView::newTodo( const QString &summary, const QString &description,
                             const QStringList &attachments, const QStringList &attendees )
 {
+  kdDebug(5850) << k_funcinfo << endl;
   KOTodoEditor *todoEditor = mDialogManager->getTodoEditor();
   connectIncidenceEditor( todoEditor );
   todoEditor->newTodo();
@@ -999,7 +1000,7 @@
 
 void CalendarView::newTodo()
 {
-  kdDebug(5850) << "CalendarView::newTodo()" << endl;
+  kdDebug(5850) << k_funcinfo << endl;
   QDateTime dtDue;
   bool allday = true;
   KOTodoEditor *todoEditor = mDialogManager->getTodoEditor();
Index: korganizer/dcopcalendar.desktop
===================================================================
--- korganizer/dcopcalendar.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ korganizer/dcopcalendar.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -30,9 +30,11 @@
 Comment[ja]=DCOP インターフェースを持つオーガナイザ
 Comment[km]=កម្មវិធី​រៀបចំ​ដែល​មាន​ចំណុច​ប្រទាក់ DCOP
 Comment[lt]=Tvarkyklė su DCOP sąsaja
+Comment[mk]=Организатор со DCOP-интерфејс
 Comment[ms]=Penyusun dengan antara muka DCOP 
 Comment[nb]=Organizer med DCOP-grensesnitt
 Comment[nds]=Mötenkalenner mit DCOP-Koppelsteed
+Comment[ne]=DCOP इन्टरफेसको आयोजक
 Comment[nl]=Organizer met een DCOP-interface
 Comment[nn]=Organisator med eit DCOP-grensesnitt
 Comment[pl]=Organizator z interfejsem DCOP
Index: korganizer/korganizer_configcolors.desktop
===================================================================
--- korganizer/korganizer_configcolors.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ korganizer/korganizer_configcolors.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -14,7 +14,7 @@
 
 Name=Colors
 Name[af]=Kleure
-Name[ar]=ألوان
+Name[ar]=الألوان
 Name[az]=Rənglər
 Name[be]=Колеры
 Name[bg]=Цветове
@@ -46,10 +46,12 @@
 Name[km]=ពណ៌
 Name[lt]=Spalvos
 Name[lv]=Krāsas
+Name[mk]=Бои
 Name[ms]=Warna
 Name[mt]=Kuluri
 Name[nb]=Farger
 Name[nds]=Klören
+Name[ne]=रङ
 Name[nl]=Kleuren
 Name[nn]=Fargar
 Name[pl]=Kolory
@@ -79,7 +81,7 @@
 Comment=KOrganizer Colors Configuration
 Comment[af]=KOrganizer kleure opstelling
 Comment[ar]=إعداد ألوان KOrganizer
-Comment[be]=Канфігурацыя колераў "K Арганізатара"
+Comment[be]=Канфігурацыя колераў KOrganizer
 Comment[bg]=Настройки на цветовете за KOrganizer
 Comment[bs]=KOrganizer podešavanje boja
 Comment[ca]=Configuració de colors a KOrganizer
@@ -104,9 +106,11 @@
 Comment[ja]=KOrganizer 色設定
 Comment[km]=ការ​កំណត់​រចនាសម្ព័ន្ធ​ពណ៌ KOrganizer
 Comment[lt]=KOrganizer spalvų konfigūravimas
+Comment[mk]=Конфигурација на боите
 Comment[ms]=KOnfigurasi Warna KOrganizer 
 Comment[nb]=KOrganizer fargeoppsett
 Comment[nds]=Klören för KOrganizer instellen
+Comment[ne]=केडीई आयोजक रङ कन्फिगरेसन
 Comment[nl]=KOrganizer kleuren instellen
 Comment[nn]=KOrganizer, fargeinnstillingar
 Comment[pl]=Konfiguracja kolorów KOrganizera
@@ -153,9 +157,11 @@
 Keywords[ja]=korganizer,色
 Keywords[km]=korganizer,ពណ៌
 Keywords[lt]=korganizer,colors, spalvos
+Keywords[mk]=korganizer,colors,корганизатор,бои
 Keywords[ms]=korganizer,warna
 Keywords[nb]=korganizer,farger
 Keywords[nds]=KOrganizer,Klören
+Keywords[ne]=केडीई आयोजक, रङ
 Keywords[nl]=korganizer,colors,kleuren
 Keywords[nn]=korganizer,fargar
 Keywords[pl]=korganizer,kolory,kolor
Index: korganizer/koincidenceeditor.cpp
===================================================================
--- korganizer/koincidenceeditor.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ korganizer/koincidenceeditor.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -219,7 +219,7 @@
 
 QWidget *KOIncidenceEditor::addDesignerTab( const QString &uifile )
 {
-  kdDebug() << "Designer tab: " << uifile << endl;
+  kdDebug(5850) << "Designer tab: " << uifile << endl;
 
   KPIM::DesignerFields *wid = new KPIM::DesignerFields( uifile, 0 );
   mDesignerFields.append( wid );
@@ -286,13 +286,13 @@
 
 void KOIncidenceEditor::writeDesignerFields( Incidence *i )
 {
-  kdDebug() << "KOIncidenceEditor::writeDesignerFields()" << endl;
+  kdDebug(5850) << "KOIncidenceEditor::writeDesignerFields()" << endl;
 
   KCalStorage storage( i );
   KPIM::DesignerFields *fields;
   for( fields = mDesignerFields.first(); fields;
        fields = mDesignerFields.next() ) {
-    kdDebug() << "Write Field " << fields->title() << endl;
+    kdDebug(5850) << "Write Field " << fields->title() << endl;
     fields->save( &storage );
   }
 }
@@ -301,8 +301,8 @@
 void KOIncidenceEditor::setupEmbeddedURLPage( const QString &label,
                                  const QString &url, const QString &mimetype )
 {
-  kdDebug() << "KOIncidenceEditor::setupEmbeddedURLPage()" << endl;
-  kdDebug() << "label=" << label << ", url=" << url << ", mimetype=" << mimetype << endl;
+  kdDebug(5850) << "KOIncidenceEditor::setupEmbeddedURLPage()" << endl;
+  kdDebug(5850) << "label=" << label << ", url=" << url << ", mimetype=" << mimetype << endl;
   QFrame *topFrame = addPage( label );
   QBoxLayout *topLayout = new QVBoxLayout( topFrame );
 
@@ -318,11 +318,11 @@
 
 void KOIncidenceEditor::createEmbeddedURLPages( Incidence *i )
 {
-  kdDebug() << "KOIncidenceEditor::createEmbeddedURLPages()" << endl;
+  kdDebug(5850) << "KOIncidenceEditor::createEmbeddedURLPages()" << endl;
 
   if ( !i ) return;
   if ( !mEmbeddedURLPages.isEmpty() ) {
-kdDebug() << "mEmbeddedURLPages are not empty, clearing it!" << endl;
+    kdDebug(5850) << "mEmbeddedURLPages are not empty, clearing it!" << endl;
     mEmbeddedURLPages.setAutoDelete( true );
     mEmbeddedURLPages.clear();
     mEmbeddedURLPages.setAutoDelete( false );
@@ -342,8 +342,8 @@
   Attachment::List att = i->attachments();
   for ( Attachment::List::Iterator it = att.begin(); it != att.end(); ++it ) {
     Attachment *a = (*it);
-    kdDebug() << "Iterating over the attachments " << endl;
-    kdDebug() << "label=" << a->label() << ", url=" << a->uri() << ", mimetype=" << a->mimeType() << endl;
+    kdDebug(5850) << "Iterating over the attachments " << endl;
+    kdDebug(5850) << "label=" << a->label() << ", url=" << a->uri() << ", mimetype=" << a->mimeType() << endl;
     if ( a && a->showInline() && a->isUri() ) {
       // TODO: Allow more mime-types, but add security checks!
 /*      if ( a->mimeType() == "application/x-designer" ) {
Index: korganizer/korganizer_configdesignerfields.desktop
===================================================================
--- korganizer/korganizer_configdesignerfields.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ korganizer/korganizer_configdesignerfields.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -14,6 +14,7 @@
 
 Name=Custom Pages
 Name[af]=Pasmaak Blaaie
+Name[ar]=الصفحات المعتادة
 Name[bg]=Потребителски полета
 Name[br]=Pajennoù dre ziouer
 Name[bs]=Vlastite stranice
@@ -37,9 +38,11 @@
 Name[ja]=カスタム ページ
 Name[km]=ទំព័រ​ផ្ទាល់​ខ្លួន
 Name[lt]=Pasirinkti puslapiai
+Name[mk]=Сопствени страници
 Name[ms]=Halaman Kebiasaan 
 Name[nb]=Tilpassede sider
 Name[nds]=Egen Sieden
+Name[ne]=अनुकूल पृष्ठ
 Name[nl]=Aangepaste pagina's
 Name[nn]=Tilpassa sider
 Name[pl]=Własne strony
@@ -59,6 +62,7 @@
 Name[zh_CN]=定制页
 Comment=Configure the Custom Pages
 Comment[af]=Stel die pasmaak blaaie op
+Comment[ar]=إعداد الصفحات المعتادة
 Comment[bg]=Настройки на потребителските полета
 Comment[br]=Kefluniañ ar pajennoù diouzhoc'h
 Comment[bs]=Podesite vlastite stranice
@@ -82,9 +86,11 @@
 Comment[ja]=カスタム ページの設定
 Comment[km]=កំណត់​រចនាសម្ព័ន្ធ​ទំព័រ​ផ្ទាល់​ខ្លួន
 Comment[lt]=Konfigūruoti darbastalių skaičių ir pavadinimus
+Comment[mk]=Конфигурирајте ги сопствените страници
 Comment[ms]=Konfigurkan Halaman Langganan 
 Comment[nb]=Stille inn de tilpassede sidene
 Comment[nds]=Egen Sieden instellen
+Comment[ne]=अनुकूल पृष्ठ कन्फिगर गर्नुहोस्
 Comment[nl]=Hier kunt u de aangepaste pagina's instellen
 Comment[nn]=Set opp dei tilpassa sidene
 Comment[pl]=Konfiguracja własnych stron
@@ -125,9 +131,11 @@
 Keywords[ja]=korganizer、設定、設定,カスタムフィールド
 Keywords[km]=korganizer,កំណត់​រចនាសម្ព័ន្ធ,ការ​កំណត់,វាល​ផ្ទាល់​ខ្លួន
 Keywords[lt]=korganizer, configure, settings, custom fields, konfigūruoti, nustatymai, pasirinkti laukai
+Keywords[mk]=korganizer, configure, settings, custom fields, корганизатор, конфигурација, конфигурирање, поставувања, сопствени полиња
 Keywords[ms]=korganizer, konfigur, seting, medan kebiasaan
 Keywords[nb]=kaddressbook, sette opp, innstillinger, tilpassede felter
 Keywords[nds]=KOrganizer,Instellen,egen Feller
+Keywords[ne]=केडीई आयोजक, कन्फिगर, सेटिङ, अनुकूल फिल्ड
 Keywords[nl]=korganizer, configuratie, instellingen, aangepaste velden
 Keywords[nn]=korganizer, oppsett, innstillingar, tilpassa felt
 Keywords[pl]=korganizer,konfiguracja,ustawienia,własne pola
Index: korganizer/kolistview.cpp
===================================================================
--- korganizer/kolistview.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ korganizer/kolistview.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -112,17 +112,19 @@
   mItem->setPixmap(0, eventPxmp);
 
   mItem->setText( 3,e->dtStartDateStr());
-  if (e->doesFloat()) mItem->setText(4, "---"); else mItem->setText( 4, e->dtStartTimeStr() );
+  mItem->setSortKey( 3, e->dtStart().toString(Qt::ISODate));
+  if (e->doesFloat()) mItem->setText(4, "---"); else {
+    mItem->setText( 4, e->dtStartTimeStr() );
+    mItem->setSortKey( 4,e->dtStart().time().toString(Qt::ISODate));
+  }
   mItem->setText( 5,e->dtEndDateStr());
-  if (e->doesFloat()) mItem->setText(6, "---"); else mItem->setText( 6, e->dtEndTimeStr() );
+  mItem->setSortKey( 5, e->dtEnd().toString(Qt::ISODate));
+  if (e->doesFloat()) mItem->setText(6, "---"); else {
+    mItem->setText( 6, e->dtEndTimeStr() );
+    mItem->setSortKey( 6, e->dtEnd().time().toString(Qt::ISODate));
+  }
   mItem->setText( 7,e->categoriesStr());
 
-  QString key = e->dtStart().toString(Qt::ISODate);
-  mItem->setSortKey(3,key);
-
-  key = e->dtEnd().toString(Qt::ISODate);
-  mItem->setSortKey(5,key);
-
   return true;
 }
 
@@ -155,6 +157,7 @@
       mItem->setText(4,"---");
     } else {
       mItem->setText(4,t->dtStartTimeStr());
+      mItem->setSortKey( 4, t->dtStart().time().toString(Qt::ISODate) );
     }
   } else {
     mItem->setText(3,"---");
@@ -163,10 +166,12 @@
 
   if (t->hasDueDate()) {
     mItem->setText(5,t->dtDueDateStr());
+    mItem->setSortKey( 5, t->dtDue().toString(Qt::ISODate) );
     if (t->doesFloat()) {
       mItem->setText(6,"---");
     } else {
       mItem->setText(6,t->dtDueTimeStr());
+      mItem->setSortKey( 6, t->dtDue().time().toString(Qt::ISODate) );
     }
   } else {
     mItem->setText(5,"---");
@@ -174,21 +179,22 @@
   }
   mItem->setText(7,t->categoriesStr());
 
-  mItem->setSortKey(5,t->dtDue().toString(Qt::ISODate));
 
   return true;
 }
 
-bool KOListView::ListItemVisitor::visit(Journal *t)
+bool KOListView::ListItemVisitor::visit( Journal *t )
 {
   static const QPixmap jrnalPxmp = KOGlobals::self()->smallIcon( "journal" );
-  mItem->setPixmap(0,jrnalPxmp);
-  // Just use the first line
-  mItem->setText( 0, t->description().section( "\n", 0, 0 ) );
+  mItem->setPixmap( 0, jrnalPxmp );
+  if ( t->summary().isEmpty() ) {
+    mItem->setText( 0, t->description().section( "\n", 0, 0 ) );
+  } else {
+    mItem->setText( 0, t->summary() );
+  }
   mItem->setText( 3, t->dtStartDateStr() );
+  mItem->setSortKey( 3, t->dtStart().toString( Qt::ISODate ) );
 
-  mItem->setSortKey( 3, t->dtStart().toString(Qt::ISODate) );
-
   return true;
 }
 
Index: korganizer/korganizer_configgroupautomation.desktop
===================================================================
--- korganizer/korganizer_configgroupautomation.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ korganizer/korganizer_configgroupautomation.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -36,9 +36,11 @@
 Name[ja]=グループ自動化
 Name[km]=ស្វ័យប្រតិកម្ម​ក្រុម
 Name[lt]=Grupių automatizavimas
+Name[mk]=Автоматизација на групи
 Name[ms]=Automasi Kumpulan
 Name[nb]=Gruppeautomat
 Name[nds]=Koppel-Akschonen
+Name[ne]=समूह स्वचालिकरण
 Name[nl]=Groepautomatisering
 Name[nn]=Gruppeautomatisering
 Name[pl]=Automatyzacja pracy grupowej
@@ -81,9 +83,11 @@
 Comment[ja]=KOrganizer グループ自動化設定
 Comment[km]=ការ​កំណត់​រចនាសម្ព័ន្ធ​ស្វ័យប្រតិកម្ម​ក្រុម​របស់ KOrganizer
 Comment[lt]=KOrganizer grupių automatizavimo konfigūravimas
+Comment[mk]=Конфигурација на автоматизација на групи
 Comment[ms]=Konfigurasi Automasi Kumpulan KOrganizer 
 Comment[nb]=KOrganizer oppsett for gruppeautomat
 Comment[nds]=Automaatsche Koppel-Akschonen för KOrganizer instellen
+Comment[ne]=केडीई आयोजक समूह स्वचालिकरण कन्फिगरेसन
 Comment[nl]=KOrganizer groepautomatisering instellen
 Comment[nn]=KOrganizer, innstillingar for gruppeautomatisering
 Comment[pl]=Konfiguracja automatyzacji pracy grupowej dla KOrganizera
@@ -126,9 +130,11 @@
 Keywords[ja]=korganizer,グループ,自動化
 Keywords[km]=korganizer,ក្រុម,ស្វ័យប្រតិកម្ម
 Keywords[lt]=korganizer,group,automation, grupės,automatizavimas
+Keywords[mk]=korganizer,group,automation,корганизатор,група,групи,автоматизација
 Keywords[ms]=korganizer,kumpulan,automasi
 Keywords[nb]=korganizer,gruppe,automat,automatisering
 Keywords[nds]=KOrganizer,Koppel,automaatsch,Akschoon
+Keywords[ne]=केडीई आयोजक, समूह, स्वचालिकरण
 Keywords[nl]=korganizer,groep,automatisering
 Keywords[nn]=korganizer,gruppe,automatisering
 Keywords[pl]=korganizer,grupy,praca grupowa,automatyzacja
Index: korganizer/korganizer_configviews.desktop
===================================================================
--- korganizer/korganizer_configviews.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ korganizer/korganizer_configviews.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -14,6 +14,7 @@
 
 Name=Views
 Name[af]=Aansigte
+Name[ar]=العروض
 Name[be]=Выгляды
 Name[bg]=Изгледи
 Name[br]=Gweloù
@@ -40,9 +41,11 @@
 Name[ja]=ビューア
 Name[km]=ទិដ្ឋភាព
 Name[lt]=Žiūrikliai
+Name[mk]=Приказ
 Name[ms]=Paparan
 Name[nb]=Visninger
 Name[nds]=Ansichten
+Name[ne]=दृश्य
 Name[nl]=Weergaven
 Name[nn]=Visingar
 Name[pl]=Widoki
@@ -88,9 +91,11 @@
 Comment[ja]=KOrganizer ビューア設定
 Comment[km]=ការ​កំណត់​រចនាសម្ព័ន្ធ​ទិដ្ឋភាព​របស់ KOrganizer
 Comment[lt]=KOrganizer žiūriklių konfigūravimas
+Comment[mk]=Конфигурација на приказот
 Comment[ms]=Konfigurasi Paparan KOrganizer 
 Comment[nb]=KOrganizer visningsoppsett
 Comment[nds]=Ansichteninstellen för KOrganizer
+Comment[ne]=केडीई आयोजक दृश्य कन्फिगरेसन
 Comment[nl]=KOrganizer weergave instellen
 Comment[nn]=KOrganizer, visingsinnstillingar
 Comment[pl]=Konfiguracja widoków KOrganizera
@@ -133,9 +138,11 @@
 Keywords[it]=korganizer,viste
 Keywords[km]=korganizer,ទិដ្ឋភាព
 Keywords[lt]=korganizer,view,žiūrikliai
+Keywords[mk]=korganizer,view,корганизатор,приказ
 Keywords[ms]=korganizer,paparan
 Keywords[nb]=korganizer,visning
 Keywords[nds]=KOrganizer,Ansichten
+Keywords[ne]=केडीई आयोजक, दृश्य
 Keywords[nl]=korganizer,weergave
 Keywords[nn]=korganizer,vising
 Keywords[pl]=korganizer,widok
Index: korganizer/korganizer_configmain.desktop
===================================================================
--- korganizer/korganizer_configmain.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ korganizer/korganizer_configmain.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -39,9 +39,11 @@
 Name[ja]=個人設定
 Name[km]=ផ្ទាល់​ខ្លួន
 Name[lt]=Suasmeninimas
+Name[mk]=Лично
 Name[ms]=Peribadi
 Name[nb]=Personlig
 Name[nds]=Persöönlich
+Name[ne]=व्यक्तिगत
 Name[nl]=Persoonlijk
 Name[nn]=Personleg
 Name[pl]=Osobiste
@@ -88,9 +90,11 @@
 Comment[ja]=KOrganizer 主要設定
 Comment[km]=ការ​កំណត់​រចនាសម្ព័ន្ធ​សំខាន់ៗ​របស់ KOrganizer
 Comment[lt]=KOrganizer bendroji konfigūravimas
+Comment[mk]=Главна конфигурација на КОрганизатор
 Comment[ms]=Konfigurasi Utama KOrganizer 
 Comment[nb]=KOrganizer hovedoppsett
 Comment[nds]=Hööftinstellen för KOrganizer
+Comment[ne]=केडीई आयोजक मुख्य कन्फिगरेसन
 Comment[nl]=KOrganizer algemene instellingen
 Comment[nn]=KOrganizer, hovudinnstillingar
 Comment[pl]=Główna konfiguracja KOrganizera
@@ -133,9 +137,11 @@
 Keywords[ja]=korganizer,メイン,個人
 Keywords[km]=korganizer,សំខាន់,ផ្ទាល់​ខ្លួន
 Keywords[lt]=korganizer,main,personal,pagrindinis,asmeninis,bendroji
+Keywords[mk]=korganizer,main,personal,корганизатор,главно,лично
 Keywords[ms]=korganizer,utama,peribadi
 Keywords[nb]=korganizer,hoved,personlig
 Keywords[nds]=KOrganizer,hööft,persöönlich,instellen,hööftinstellen
+Keywords[ne]=केडीई आयोजक, मुख्य, व्यक्तिगत
 Keywords[nl]=korganizer,algemeen,persoonlijk
 Keywords[nn]=korganizer,hovud,personleg
 Keywords[pl]=korganizer,główny,główna,osobisty,osobista,osobiste
Index: konsolekalendar/konsolekalendar.desktop
===================================================================
--- konsolekalendar/konsolekalendar.desktop	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ konsolekalendar/konsolekalendar.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -7,9 +7,11 @@
 Name[hi]=कंसोल-कैलेंडर
 Name[hu]=Konsole-naptár
 Name[ja]=コンソールカレンダー
+Name[mk]=КонзоленКалендар
 Name[ms]=Kalendar Konsole
 Name[nb]=KonsoleKalender
 Name[nds]=Konsole-Kalenner
+Name[ne]=कन्सोल क्यालेन्डर
 Name[nl]=Konsole-agenda
 Name[nn]=KonsoleKalender
 Name[ro]=Calendar de consolă
Index: mimelib/dwstring.cpp
===================================================================
--- mimelib/dwstring.cpp	(.../tags/KDE/3.5.6/kdepim)	(wersja 637414)
+++ mimelib/dwstring.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 637414)
@@ -1276,12 +1274,12 @@
         assert(newBuf != 0);
         if (newBuf != 0) {
             to = newBuf;
-            from = mRep->mBuffer + mStart;
-            for (i=0; i < pos1; ++i) *to++ = *from++;
-            from = aBuf;
-            for (i=0; i < len2; ++i) *to++ = *from++;
-            from = mRep->mBuffer + mStart + pos1 + len1;
-            for (i=0; i < mLength - pos1 - len1; ++i) *to++ = *from++;
+            memcpy(to, mRep->mBuffer + mStart, pos1);
+            to += pos1;
+            memcpy(to, aBuf, len2);
+            to += len2;
+            memcpy(to, mRep->mBuffer + mStart + pos1 + len1, mLength - pos1 - len1);
+            to += mLength - pos1 - len1;
             *to = 0;
             DwStringRep* rep = new DwStringRep(newBuf, size);
             assert(rep != 0);

