Index: akregator/src/mk4storage/metakit/include/mk4.h
===================================================================
--- akregator/src/mk4storage/metakit/include/mk4.h	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ akregator/src/mk4storage/metakit/include/mk4.h	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -101,7 +101,7 @@
     // and here's the other end of the scale...
 #if !defined (_WIN32) && !defined (q4_LONG64)
 #if (defined (_PA_RISC2_0) && defined(__hpux)) || defined (__powerpc64__) || defined(__sparcv9) || \
-    defined (__x86_64__) || defined (__s390x__) || defined (__alpha) || \
+    defined (__x86_64__) || defined (__s390x__) || defined (__alpha) || defined (__mips64) || \
     (defined (__ia64) && (!defined (__HP_aCC) || defined(__LP64__)))
 #define q4_LONG64 1
 #endif
Index: akregator/src/mk4storage/metakit/src/header.h
===================================================================
--- akregator/src/mk4storage/metakit/src/header.h	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ akregator/src/mk4storage/metakit/src/header.h	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -139,12 +139,6 @@
 
 typedef unsigned char t4_byte;  // create typedefs for t4_byte, etc.
 
-#if SIZEOF_LONG == 8
-typedef int t4_i32;             // longs are 64b, so int must be 32b
-#else
-typedef long t4_i32;            // longs aren't 64b, so they are 32b
-#endif
-
 /////////////////////////////////////////////////////////////////////////////
 // Include header files which contain additional os/cpu/ide/fw specifics
 
Index: akregator/src/mk4storage/akregator_mk4storage_plugin.desktop
===================================================================
--- akregator/src/mk4storage/akregator_mk4storage_plugin.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ akregator/src/mk4storage/akregator_mk4storage_plugin.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -21,6 +21,7 @@
 Name[is]=Metakit geymslu bakendi
 Name[it]=Backend archiviazione metakit
 Name[ja]=メタキットストレージバックエンド
+Name[ka]=Metakit  მეხსიერების ბუფერი
 Name[kk]=Metakit архивтеу бағдарламасы
 Name[km]=កម្មវិធី​ខាង​ក្រោយ​សម្រាប់​រក្សាទុក (Metakit)
 Name[ko]=Metakit 저장소 백엔드
@@ -68,6 +69,7 @@
 Comment[is]=Íforrit fyrir Akregator
 Comment[it]=Plugin per Akregator
 Comment[ja]=Akregator 用プラグイン
+Comment[ka]=Akregator-ის მოდული
 Comment[kk]=Akregator-дың плагин модулі
 Comment[km]=កម្មវិធី​ជំនួយ Akregator
 Comment[ko]=Akregator 플러그인
@@ -91,7 +93,8 @@
 Comment[sv]=Insticksprogram för Akregator
 Comment[tr]=Akregator Eklentisi
 Comment[uk]=Втулок для Akregator
-Comment[uz]=Akregator учун плагин
+Comment[uz]=Akregator uchun plagin
+Comment[uz@cyrillic]=Akregator учун плагин
 Comment[zh_CN]=Akregator 插件
 Comment[zh_TW]=Akregator 外掛程式
 ServiceTypes=Akregator/Plugin
Index: akregator/src/akregator_plugin.desktop
===================================================================
--- akregator/src/akregator_plugin.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ akregator/src/akregator_plugin.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -25,6 +25,7 @@
 Comment[is]=Íforrit fyrir Akregator
 Comment[it]=Plugin per Akregator
 Comment[ja]=Akregator 用プラグイン
+Comment[ka]=Akregator-ის მოდული
 Comment[kk]=Akregator-дың плагин модулі
 Comment[km]=កម្មវិធី​ជំនួយ Akregator
 Comment[ko]=Akregator 플러그인
@@ -48,7 +49,8 @@
 Comment[sv]=Insticksprogram för Akregator
 Comment[tr]=Akregator Eklentisi
 Comment[uk]=Втулок для Akregator
-Comment[uz]=Akregator учун плагин
+Comment[uz]=Akregator uchun plagin
+Comment[uz@cyrillic]=Akregator учун плагин
 Comment[zh_CN]=Akregator 插件
 Comment[zh_TW]=Akregator 外掛程式
 
Index: akregator/src/akregator.desktop
===================================================================
--- akregator/src/akregator.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ akregator/src/akregator.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,5 +1,4 @@
 [Desktop Entry]
-Encoding=UTF-8
 Name=Akregator
 Name[ne]=एक्रिगेटर
 Exec=akregator %i %m -caption "%c"
@@ -29,6 +28,7 @@
 GenericName[is]=RSS fréttaforrit
 GenericName[it]=Lettore Fonti RSS
 GenericName[ja]=RSS ニュースリーダー
+GenericName[ka]=RSS კვების წამკითხველი
 GenericName[kk]=RSS жаңалықтарын оқу
 GenericName[km]=កម្មវិធី​អាន​មតិព័ត៌មាន RSS
 GenericName[ko]=RSS 피드 리더
@@ -53,7 +53,8 @@
 GenericName[ta]=RSS பீஃட் வாசிப்பான்
 GenericName[tr]=RSS Haber Kaynağı Okuyucu
 GenericName[uk]=Програма для читання подач RSS
-GenericName[uz]=RSS янгиликларни ўқувчи
+GenericName[uz]=RSS yangiliklarni oʻquvchi
+GenericName[uz@cyrillic]=RSS янгиликларни ўқувчи
 GenericName[zh_CN]=RSS 种子阅读器
 GenericName[zh_TW]=RSS Feed 閱讀器
 Comment=An RSS Aggregator for KDE
@@ -78,6 +79,7 @@
 Comment[is]=RSS fréttaforrit fyrir KDE
 Comment[it]=Un concentratore KDE per RSS
 Comment[ja]=KDE 用 RSS アグリゲータ
+Comment[ka]= RSS აგრეგატი KDE-სთვის
 Comment[kk]=KDE-нің RSS жаңалық агрегаторы
 Comment[km]=កម្មវិធី​អាន RSS សម្រាប់ KDE
 Comment[ko]=KDE용 RSS 리더
@@ -100,7 +102,8 @@
 Comment[ta]=கேடியிக்கான ஒரு RSS சேர்ப்பான்
 Comment[tr]=Bir KDE RSS Okuyucusu
 Comment[uk]=Агрегатор RSS для KDE
-Comment[uz]=KDE учун RSS янгиликларни ўқувчи
+Comment[uz]=KDE uchun RSS yangiliklarni oʻquvchi
+Comment[uz@cyrillic]=KDE учун RSS янгиликларни ўқувчи
 Comment[zh_CN]=KDE RSS 新闻收集器
 Comment[zh_TW]=KDE 的 RSS 收集器
 Terminal=false
Index: akregator/src/akregator_part.desktop
===================================================================
--- akregator/src/akregator_part.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ akregator/src/akregator_part.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,5 +1,4 @@
 [Desktop Entry]
-Encoding=UTF-8
 Name=aKregatorPart
 Name[cs]=Komponenta aKregator
 Name[da]=AkregatorPart
Index: akregator/src/eventsrc
===================================================================
--- akregator/src/eventsrc	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ akregator/src/eventsrc	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -29,6 +29,7 @@
 Name[is]=Straum bætt við
 Name[it]=Aggiunta fonte
 Name[ja]=フィード追加
+Name[ka]=დამატებულია კვება
 Name[kk]=Қор қосылды
 Name[km]=បាន​បន្ថែម​មតិព័ត៌មាន
 Name[ko]=피드 추가됨
@@ -52,7 +53,8 @@
 Name[ta]=பீஃட் சேர்க்கப்பட்டது
 Name[tr]=Haber kaynağı eklendi
 Name[uk]=Подачу додано
-Name[uz]=Янгиликлар тасмаси қўшилди
+Name[uz]=Yangiliklar tasmasi qoʻshildi
+Name[uz@cyrillic]=Янгиликлар тасмаси қўшилди
 Name[zh_CN]=添加了新闻源
 Name[zh_TW]=已加入 Feed
 Comment=A new feed was remotely added to Akregator
@@ -76,6 +78,7 @@
 Comment[is]=Nýjum straum var bætt við Akregator
 Comment[it]=Una nuova fonte è stata aggiunta ad Akregator da remoto
 Comment[ja]=新規フィードがリモートで Akregator に追加されました
+Comment[ka]=Akregator-ის სიას დისტანციურად ახალი კვება დაემატა
 Comment[kk]=Akregator-ға қашықтан жаңа қор қосылды
 Comment[km]=បាន​បន្ថែម​មតិព័ត៌មាន​ថ្មី​មួយ​ពី​ចម្ងាយ​ទៅ Akregator
 Comment[ko]=Akregator에 피드가 원격으로 추가됨
@@ -99,7 +102,8 @@
 Comment[ta]=Akregatorக்கு ஒரு புதிய உள்ளீடு சேர்க்கப்பட்டது
 Comment[tr]=Akregator'a yeni bir haber kaynağı eklendi
 Comment[uk]=Нову подачу було віддалено додано до Akregator
-Comment[uz]=Akregator дастурига янги янгиликлар тасмаси қўшилди
+Comment[uz]=Akregator dasturiga yangi yangiliklar tasmasi qoʻshildi
+Comment[uz@cyrillic]=Akregator дастурига янги янгиликлар тасмаси қўшилди
 Comment[zh_CN]=新闻源远程添加进了 Akregator
 Comment[zh_TW]=已從遠端加入新的 feed 到 Akregator
 default_presentation=4
@@ -131,6 +135,7 @@
 Name[is]=Nýjar greinar
 Name[it]=Nuovi articoli
 Name[ja]=新規記事
+Name[ka]=ახალი სტატიები
 Name[kk]=Жаңа мақалалар
 Name[km]=អត្ថបទ​ថ្មី
 Name[ko]=새 글
@@ -155,7 +160,8 @@
 Name[ta]= புதிய செய்திகள்
 Name[tr]=Yeni Haberler
 Name[uk]=Нові статті
-Name[uz]=Янги мақолалар
+Name[uz]=Yangi maqolalar
+Name[uz@cyrillic]=Янги мақолалар
 Name[zh_CN]=新闻文章
 Name[zh_TW]=新文章
 Comment=New articles were fetched
@@ -182,6 +188,7 @@
 Comment[is]=Nýjar greinar voru sóttar
 Comment[it]=I nuovi articoli sono stati recuperati
 Comment[ja]=新規記事を取得しました
+Comment[ka]=მიღებულია ახალი სტატიები
 Comment[kk]=Жаңа мақалалар қабылданды
 Comment[km]=បាន​ប្រមូល​អត្ថបទ​ថ្មី
 Comment[ko]=새 글을 가져옴
Index: kmobile/libkmobile.desktop
===================================================================
--- kmobile/libkmobile.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kmobile/libkmobile.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,5 +1,4 @@
 [Desktop Entry]
-Encoding=UTF-8
 Type=ServiceType
 X-KDE-ServiceType=kdedevice/mobiledevice
 Name=KDE Mobile Device Lowlevel Hardware Driver
@@ -25,6 +24,7 @@
 Name[is]=Hrár KDE vélbúnaðarrekill fyrir farsíma og lófatölvur
 Name[it]=KDE driver hardware di basso livello per dispositivi portatili
 Name[ja]=KDE モバイル機器低レベルハードウェアドライバ
+Name[ka]=KDE მობილური მოწყობილობის დაბალდონიანი ხისტი დრაივერი
 Name[kk]=KDE-нің қалта құрылғы жабдықтың төмен деңгейлі драйвері
 Name[km]=កម្មវិធី​បញ្ជា​ផ្នែករឹង​កម្រិត​ទាប​របស់​ឧបករណ៍​ចល័ត KDE
 Name[lt]=KDE mobiliųjų įrenginių žemo lygmens aparatinės įrangos tvarkyklė
Index: kmobile/devices/gnokii/libkmobile_gnokii.desktop
===================================================================
--- kmobile/devices/gnokii/libkmobile_gnokii.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kmobile/devices/gnokii/libkmobile_gnokii.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,5 +1,4 @@
 [Desktop Entry]
-Encoding=UTF-8
 Name=Mobile Phone or Organizer (gnokii)
 Name[af]=Selfoon of Digitale Dagboek (gnokii)
 Name[ar]=الهاتف النقّال أو المنظم (gnokii)
@@ -28,6 +27,7 @@
 Name[is]=Farsími eða lófatölva (gnokii)
 Name[it]=Telefono cellulare o organizer (gnokii)
 Name[ja]=携帯電話またはスケジュール管理 (gnokii)
+Name[ka]=მობილური ტელეფონი ან ორგანიზატორი(gnokii)
 Name[kk]=Қалта телефон не Ұйымдастырғыш (gnokii)
 Name[km]=កម្មវិធី​រៀបចំ​ទូរស័ព្ទ​ចល័ត (gnokii)
 Name[lt]=Mobilus telefonas ar asmeninės info tvarkyklė (gnokii)
@@ -50,7 +50,8 @@
 Name[tg]=Телефони мобилӣ ё органайзери (gnokii)
 Name[tr]=Cep Telefonu ya da Organizer (gnokii)
 Name[uk]=Мобільний телефон та тижневик (gnokii)
-Name[uz]=Уяли телефон ёки органайзер (gnokii)
+Name[uz]=Uyali telefon yoki organayzer (gnokii)
+Name[uz@cyrillic]=Уяли телефон ёки органайзер (gnokii)
 Name[zh_CN]=移动电话或 PDA(gnokii)
 Name[zh_TW]=行動電話或數位助理(gnokii)
 Comment=This driver supports many NOKIA and other mobile phones via the gnokii library
@@ -77,6 +78,7 @@
 Comment[is]=Þessi rekill styður marga farsíma frá NOKIA og fleiri gegnum gnokii aðgerðasafnið
 Comment[it]=Questo driver supporta molti NOKIA e altri telefoni cellulari tramite la libreria gnokii
 Comment[ja]=このドライバは gnokii ライブラリを介して NOKIA および他社製の携帯電話を幅広くサポートします
+Comment[ka]=ეს დრაივერი მხარს უჭერს Nokia-ს მრავალ და სხვა ტელეფონებს gnokii ბიბლიოთეკის საშუალებით
 Comment[kk]=Бұл көп NOKIA мен басқа қалта құрылғыларды, gnokii жиыны арқылы, қамтитын драйвер
 Comment[km]=កម្មវិធី​បញ្ជា​នេះ​គាំទ្រ​ប្រភេទ​ទូរស័ព្ទ​ណូគៀ និង​ទូរស័ព្ទ​ផ្សេងៗ​ទៀត​ជាច្រើន​តាម​រយៈ​បណ្ណាល័យ gnokii
 Comment[lt]=Ši tvarkyklė palaiko daugelį NOKIA ir kitų telefonų pasinaudodama gnokii biblioteka
@@ -86,7 +88,7 @@
 Comment[ne]=यो ड्राइभरले जिनोकी लाइब्रेरीबाट धेरै नोकिया र अन्य मोबाइल फोन समर्थन गर्छ
 Comment[nl]=Dit stuurprogramma biedt ondersteuning voor veel Nokia- en andere mobiele telefoons via de gnokii-bibliotheek
 Comment[nn]=Denne drivaren støttar mange NOKIA og andre mobiltelefonar via gnokii-biblioteket
-Comment[pl]=Ten sterownik obsługuje wiele telefonów komórkowychNokia i innych za pomocą biblioteki gnokii
+Comment[pl]=Ten sterownik obsługuje wiele telefonów komórkowych Nokia i innych za pomocą biblioteki gnokii
 Comment[pt]=Este controlador suportar muitos NOKIAs, bem como outros telemóveis, com a biblioteca 'gnokii'
 Comment[pt_BR]=Este driver suporta muitos telefones móveis, NOKIA e outros, via biblioteca gnokii
 Comment[ru]=Этот драйвер поддерживает множество моделей мобильных телефонов Nokia и других производителей через библиотеку gnokii
Index: kmobile/devices/skeleton/libkmobile_skeleton.desktop
===================================================================
--- kmobile/devices/skeleton/libkmobile_skeleton.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kmobile/devices/skeleton/libkmobile_skeleton.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,5 +1,4 @@
 [Desktop Entry]
-Encoding=UTF-8
 Name=Skeleton Device
 Name[af]=Raamwerk Toestel
 Name[bg]=Организатори
@@ -27,6 +26,7 @@
 Name[is]=Grunntæki
 Name[it]=Dispositivo skeleton
 Name[ja]=スケルトンデバイス
+Name[ka]=მოწყობილობის ჩონჩხი
 Name[kk]=Қаңқалы құрылғы
 Name[km]=ឧបករណ៍​គ្រោង
 Name[lt]=Įrenginio skeletas
@@ -78,6 +78,7 @@
 Comment[is]=Grunn farsími eða lófatölva
 Comment[it]=Dispositivo portatile skeleton
 Comment[ja]=モバイルスケルトンデバイス
+Comment[ka]=მობილურის ჩონჩხის მოწყობილობა
 Comment[kk]=Қалта қаңқалы құрылғы
 Comment[km]=ឧបករណ៍​គ្រោង​ចល័ត
 Comment[lt]=Mobilaus įrenginio skeletas
Index: kmobile/devices/gammu/libkmobile_gammu.desktop
===================================================================
--- kmobile/devices/gammu/libkmobile_gammu.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kmobile/devices/gammu/libkmobile_gammu.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,5 +1,4 @@
 [Desktop Entry]
-Encoding=UTF-8
 Name=Mobile Phone or Organizer (gammu)
 Name[af]=Selfoon of Digitale Dagboek (gammu)
 Name[ar]=الهاتف النقّال أو المنظم (gammu)
@@ -28,6 +27,7 @@
 Name[is]=Farsími eða lófatölva (gammu)
 Name[it]=Organizer o telefono cellulare (gammu)
 Name[ja]=携帯電話またはスケジュール管理 (gammu)
+Name[ka]=მობილური ტელეფონი ან ორგანიზატორი(gammu)
 Name[kk]=Қалта телефон не Ұйымдастырғыш (gammu)
 Name[km]=កម្មវិធី​រៀបចំ​ទូរស័ព្ទ​ចល័ត (gammu)
 Name[lt]=Mobilus telefonas ar asmeninės info tvarkyklė (gammu)
@@ -50,7 +50,8 @@
 Name[tg]=Телефони мобилӣ ё органайзер (gammu)
 Name[tr]=Cep Telefonu ya da Organizer (gammu)
 Name[uk]=Мобільний телефон та тижневик (gammu)
-Name[uz]=Уяли телефон ёки органайзер (gammu)
+Name[uz]=Uyali telefon yoki organayzer (gammu)
+Name[uz@cyrillic]=Уяли телефон ёки органайзер (gammu)
 Name[zh_CN]=移动电话或 PDA(gammu)
 Name[zh_TW]=行動電話或數位助理(gammu)
 Comment=This driver supports many NOKIA and other mobile phones via the gammu library
@@ -77,6 +78,7 @@
 Comment[is]=Þessi rekill styður marga NOKIA og aðra farsíma gegnum gammu aðgerðasafnið
 Comment[it]=Questo driver supporta molti NOKIA e altri telefoni cellulari tramite la libreria gammu.
 Comment[ja]=このドライバは gammu ライブラリを介して NOKIA および他社製の携帯電話を幅広くサポートします
+Comment[ka]=ეს დრაივერი მხარს უჭერს Nokia-ს მრავალ და სხვა ტელეფონებს gammu ბიბლიოთეკის საშუალებით
 Comment[kk]=Бұл көп NOKIA мен басқа қалта құрылғыларды, gammu жиыны арқылы, қамтитын драйвер
 Comment[km]=កម្មវិធី​បញ្ជា​នេះ​គាំទ្រ​ប្រភេទ​ទូរស័ព្ទ​ណូគៀ និងទូរស័ព្ទ​ផ្សេងៗ​ទៀត​ជាច្រើន​តាម​រយៈ​បណ្ណាល័យ gammu
 Comment[lt]=Ši tvarkyklė palaiko daugelį NOKIA ir kitų telefonų pasinaudodama gammu biblioteka
@@ -86,7 +88,7 @@
 Comment[ne]=यो ड्राइभरले गामु लाइब्रेरीबाट धेरै नोकिया र अन्य मोबाइल फोन समर्थन गर्छ
 Comment[nl]=Dit stuurprogramma biedt ondersteuning voor veel Nokia- en andere mobiele telefoons via de gammu-bibliotheek
 Comment[nn]=Denne drivaren støttar mange NOKIA og andre mobiltelefonar via gammu-biblioteket
-Comment[pl]=Ten sterownik obsługuje wiele telefonów komórkowychNokia i innych za pomocą biblioteki gammu
+Comment[pl]=Ten sterownik obsługuje wiele telefonów komórkowych Nokia i innych za pomocą biblioteki gammu
 Comment[pt]=Este controlador suportar muitos NOKIAs, bem como outros telemóveis, com a biblioteca 'gammu'
 Comment[pt_BR]=Este driver suporta muitos telefones móveis, NOKIA e outros, via biblioteca gammu
 Comment[ru]=Этот драйвер поддерживает множество моделей мобильных телефонов Nokia и других производителей через библиотеку gammu
Index: kmobile/devices/digicam/libkmobile_digicam.desktop
===================================================================
--- kmobile/devices/digicam/libkmobile_digicam.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kmobile/devices/digicam/libkmobile_digicam.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,5 +1,4 @@
 [Desktop Entry]
-Encoding=UTF-8
 Name=Digital Camera
 Name[af]=Digitale Kamera
 Name[ar]=كاميرا رقمية
@@ -28,6 +27,7 @@
 Name[is]=Stafræn myndavél
 Name[it]=Macchina fotografica digitale
 Name[ja]=デジタルカメラ
+Name[ka]=ციფრული კამერა
 Name[kk]=Цифрлық камера
 Name[km]=ម៉ាស៊ីន​ថត​រូប​ឌីជីថល
 Name[lt]=Skaitmeninė kamera
@@ -54,7 +54,8 @@
 Name[tg]=Камераи digital
 Name[tr]=Dijital Kamera
 Name[uk]=Цифровий фотоапарат
-Name[uz]=Фотоапарат
+Name[uz]=Fotoaparat
+Name[uz@cyrillic]=Фотоапарат
 Name[zh_CN]=数码相机
 Name[zh_TW]=數位相機
 Comment=This driver supports many digital cameras
@@ -81,6 +82,7 @@
 Comment[is]=Þessi rekill styður margar stafrænar myndavélar
 Comment[it]=Questo driver supporta molte fotocamere digitali
 Comment[ja]=このドライバは多種のデジタルカメラをサポートします
+Comment[ka]=ეს დრაივერი უჭერს მხარს მრავალ ციფრულ კამერას
 Comment[kk]=Бұл бірспыра цифрлық камераларды қамтитын драйвер
 Comment[km]=កម្មវិធី​បញ្ជា​នេះ​គាំទ្រ​ម៉ាស៊ីន​ថត​រូប​ឌីជីថល​ជាច្រើន
 Comment[lt]=Ši tvarkyklė palaiko daugelį skaitmeninių kamerų
Index: kmobile/kmobile.desktop
===================================================================
--- kmobile/kmobile.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kmobile/kmobile.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,5 +1,4 @@
 [Desktop Entry]
-Encoding=UTF-8
 Exec=kmobile
 Icon=kmobile
 Type=Application
@@ -44,6 +43,7 @@
 GenericName[is]=Sýsla með lófatölvur og farsíma
 GenericName[it]=Gestisce dispositivi portatili
 GenericName[ja]=モバイル機器の管理
+GenericName[ka]=მობილური მოწყობილობების მართვა
 GenericName[kk]=Қалта құрылғыларды басқару
 GenericName[km]=គ្រប់គ្រង​ឧបករណ៍​ចល័ត
 GenericName[lt]=Mobiliųjų įrenginių tvarkymas
@@ -99,6 +99,7 @@
 Comment[is]=KDE stjórnforrit fyrir lófatölvur og farsíma
 Comment[it]=Un gestore di dispositivi portatili di KDE
 Comment[ja]=KDE モバイル機器マネージャ
+Comment[ka]=KDE-ს მობილურ მოწყობილობათა მმართველი
 Comment[kk]=KDE-нің қалта құрылғылар менеджері
 Comment[km]=កម្មវិធី​គ្រប់គ្រង​ឧបករណ៍​ចល័ត KDE
 Comment[lt]=KDE mobiliųjų įrenginių tvarkyklė
Index: kmobile/kioslave/mimetypes/mobile_addressbook.desktop
===================================================================
--- kmobile/kioslave/mimetypes/mobile_addressbook.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kmobile/kioslave/mimetypes/mobile_addressbook.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,5 +1,4 @@
 [Desktop Entry]
-Encoding=UTF-8
 Comment=Contacts in Mobile Device
 Comment[af]=Kontakte op die draagbare toestel
 Comment[ar]=المراسلون في الجهاز النقّال
@@ -27,6 +26,7 @@
 Comment[is]=Tengiliðir í farsíma eða lófatölvu
 Comment[it]=Contatti nel dispositivo portatile
 Comment[ja]=モバイル機器内の連絡先
+Comment[ka]=კონტაქტები მობილურ მოწყობილობაზ
 Comment[kk]=Қалта құрылғыдағы контакттар
 Comment[km]=ទំនាក់​ទំនង​ក្នុង​ឧបករណ៍​ចល័ត
 Comment[lt]=Kontaktai mobiliajame įrenginyje
Index: kmobile/kioslave/mimetypes/mobile_notes.desktop
===================================================================
--- kmobile/kioslave/mimetypes/mobile_notes.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kmobile/kioslave/mimetypes/mobile_notes.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,5 +1,4 @@
 [Desktop Entry]
-Encoding=UTF-8
 Comment=Notes in Mobile Device
 Comment[af]=Notas op die draagbare toestel
 Comment[be]=Нататкі ў мабільнай прыладзе
@@ -26,6 +25,7 @@
 Comment[is]=Áminningar í farsíma eða lófatölvu
 Comment[it]=Note nel dispositivo portatile
 Comment[ja]=モバイル機器内のメモ
+Comment[ka]=ჩანიშვნები მობილურ ტელეფონზე
 Comment[kk]=Қалта құрылғыдағы жазбалар
 Comment[km]=ចំណាំ​ក្នុង​ឧបករណ៍​ចល័ត
 Comment[lt]=Užrašai mobiliajame įrenginyje
Index: kmobile/kioslave/mimetypes/mobile_calendar.desktop
===================================================================
--- kmobile/kioslave/mimetypes/mobile_calendar.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kmobile/kioslave/mimetypes/mobile_calendar.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,5 +1,4 @@
 [Desktop Entry]
-Encoding=UTF-8
 Comment=Calendar in Mobile Device
 Comment[af]=Kalender op die draagbare toestel
 Comment[be]=Каляндар у мабільнай прыладзе
@@ -27,6 +26,7 @@
 Comment[is]=Dagatal í farsíma eða lófatölvu
 Comment[it]=Calendari nel dispositivo portatile
 Comment[ja]=モバイル機器内のカレンダー
+Comment[ka]=კალენდარი მობილურ მოწყობილობაზე
 Comment[kk]=Қалта құрылғыдағы күнтізбе
 Comment[km]=ប្រតិទិន​ក្នុង​ឧបករណ៍​ចល័ត
 Comment[lt]=Kalendorius mobiliajame įrenginyje
Index: kmobile/kioslave/mimetypes/mobile_device.desktop
===================================================================
--- kmobile/kioslave/mimetypes/mobile_device.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kmobile/kioslave/mimetypes/mobile_device.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,5 +1,4 @@
 [Desktop Entry]
-Encoding=UTF-8
 Comment=Mobile Device
 Comment[af]=Draagbare Toestel
 Comment[ar]=الجهاز النقّال
@@ -29,6 +28,7 @@
 Comment[is]=Farsími eða lófatölva
 Comment[it]=Dispositivo portatile
 Comment[ja]=モバイル機器
+Comment[ka]=მობილური მოწყობილობა
 Comment[kk]=Қалта құрылғысы
 Comment[km]=ឧបករណ៍​ចល័ត
 Comment[lt]=Mobilusis įrenginys
Index: wizards/groupwarewizard.desktop
===================================================================
--- wizards/groupwarewizard.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ wizards/groupwarewizard.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,5 +1,4 @@
 [Desktop Entry]
-Encoding=UTF-8
 Name=KDE Groupware Wizard
 Name[af]=KDE groupware assistent
 Name[ar]=مرشد KDE للبرمجيات الجماعية
@@ -23,6 +22,7 @@
 Name[is]=KDE hópvinnukerfisálfur
 Name[it]=Assistente configurazione di KDE Groupware
 Name[ja]=KDE グループウェアウィザード
+Name[ka]=სერვერი Groupware
 Name[kk]=KDE бірікен жұмыс шебері
 Name[km]=អ្នក​ជំនួយការ​កម្មវិធី​ពហុ​អ្នក​ប្រើ​របស់ KDE
 Name[ko]=KDE 그룹웨어 마법사
Index: kresources/tvanytime/kcal_tvanytime.desktop
===================================================================
--- kresources/tvanytime/kcal_tvanytime.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kresources/tvanytime/kcal_tvanytime.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,5 +1,4 @@
 [Desktop Entry]
-Encoding=UTF-8
 Name=TV Schedules
 Name[af]=TV skedules
 Name[ar]=جداول التلفزة
@@ -22,6 +21,7 @@
 Name[is]=Sjónvarpsdagskrár
 Name[it]=Programmi TV
 Name[ja]=TV 番組予定
+Name[ka]=ტელეპროგრამა
 Name[kk]=TV кестелері
 Name[km]=កាលវិភាគ​ទូរទស្សន៍
 Name[lt]=TV tvarkaraščiai
Index: kresources/egroupware/kabc_xmlrpc.desktop
===================================================================
--- kresources/egroupware/kabc_xmlrpc.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kresources/egroupware/kabc_xmlrpc.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,5 +1,4 @@
 [Desktop Entry]
-Encoding=UTF-8
 Name=eGroupware Server (via XML-RPC)
 Name[af]=eGroupware Bediener (via XML-RPC)
 Name[bg]=Сървър eGroupware (чрез XML-RPC)
@@ -21,6 +20,7 @@
 Name[is]=eGroupware þjónn (gegnum XML-RPC)
 Name[it]=Server eGroupware (via XML-RPC)
 Name[ja]=eGroupware サーバ (XML-RPC 経由)
+Name[ka]=სერბერი eGroupware (XML-RPC-ის საშუალებით)
 Name[kk]=eGroupware сервері (XML-RPC арқылы)
 Name[km]=ម៉ាស៊ីន​បម្រើ eGroupware (តាម​រយៈ XML-RPC)
 Name[lt]=eGroupware serveris (per XML-RPC)
Index: kresources/egroupware/knotes_xmlrpc.desktop
===================================================================
--- kresources/egroupware/knotes_xmlrpc.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kresources/egroupware/knotes_xmlrpc.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,5 +1,4 @@
 [Desktop Entry]
-Encoding=UTF-8
 Name=eGroupware Server (via XML-RPC)
 Name[af]=eGroupware Bediener (via XML-RPC)
 Name[bg]=Сървър eGroupware (чрез XML-RPC)
@@ -21,6 +20,7 @@
 Name[is]=eGroupware þjónn (gegnum XML-RPC)
 Name[it]=Server eGroupware (via XML-RPC)
 Name[ja]=eGroupware サーバ (XML-RPC 経由)
+Name[ka]=სერბერი eGroupware (XML-RPC-ის საშუალებით)
 Name[kk]=eGroupware сервері (XML-RPC арқылы)
 Name[km]=ម៉ាស៊ីន​បម្រើ eGroupware (តាម​រយៈ XML-RPC)
 Name[lt]=eGroupware serveris (per XML-RPC)
Index: kresources/egroupware/kcal_xmlrpc.desktop
===================================================================
--- kresources/egroupware/kcal_xmlrpc.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kresources/egroupware/kcal_xmlrpc.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,5 +1,4 @@
 [Desktop Entry]
-Encoding=UTF-8
 Name=eGroupware Server (via XML-RPC)
 Name[af]=eGroupware Bediener (via XML-RPC)
 Name[bg]=Сървър eGroupware (чрез XML-RPC)
@@ -21,6 +20,7 @@
 Name[is]=eGroupware þjónn (gegnum XML-RPC)
 Name[it]=Server eGroupware (via XML-RPC)
 Name[ja]=eGroupware サーバ (XML-RPC 経由)
+Name[ka]=სერბერი eGroupware (XML-RPC-ის საშუალებით)
 Name[kk]=eGroupware сервері (XML-RPC арқылы)
 Name[km]=ម៉ាស៊ីន​បម្រើ eGroupware (តាម​រយៈ XML-RPC)
 Name[lt]=eGroupware serveris (per XML-RPC)
Index: kresources/exchange/exchange.desktop
===================================================================
--- kresources/exchange/exchange.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kresources/exchange/exchange.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,7 +1,6 @@
 [Desktop Entry]
 Type=Service
 X-KDE-Library=resourcecalendarexchange
-Encoding=UTF-8
 X-KDE-ResourceFamily=calendar
 X-KDE-ResourceType=exchange
 ServiceTypes=KResources/Plugin
@@ -27,6 +26,7 @@
 Name[is]=Exchange 2000 þjónn
 Name[it]=Server Exchange 2000
 Name[ja]=Exchange 2000 サーバ
+Name[ka]=სერვერი Exchange 2000
 Name[kk]=MS Exchange 2000 сервері
 Name[km]=ម៉ាស៊ីន​បម្រើ Exchange ២០០០
 Name[lt]=Exchange 2000 serveris
Index: kresources/exchange/exchange_deprecated.desktop
===================================================================
--- kresources/exchange/exchange_deprecated.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kresources/exchange/exchange_deprecated.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,5 +1,4 @@
 [Desktop Entry]
-Encoding=UTF-8
 Hidden=true
 Name=Exchange 2000 Server (deprecated)
 Name[af]=Exchange 2000 Bediener (nie verder ondersteun)
@@ -22,6 +21,7 @@
 Name[is]=Exchange 2000 þjónn (úrelt)
 Name[it]=Server Exchange 2000 (deprecato)
 Name[ja]=Exchange 2000 サーバ (廃止予定)
+Name[ka]=სერვერი Exchange 2000 (მოძველებული)
 Name[kk]=MS Exchange 2000 сервері (ескірген)
 Name[km]=ម៉ាស៊ីន​បម្រើ Exchange ២០០០ (មិន​សូវ​ល្អ)
 Name[lt]=Exchange 2000 serveris (deprecated)
Index: kresources/scalix/kabc/scalix.desktop
===================================================================
--- kresources/scalix/kabc/scalix.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kresources/scalix/kabc/scalix.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,20 +1,26 @@
 [Desktop Entry]
-Encoding=UTF-8
 Name=Addressbook on Scalix Server via KMail
 Name[bg]=Адресник на сървъра Scalix през KMail
 Name[ca]=Llibreta d'adreces en un servidor Scalix mitjançant el KMail
 Name[da]=Adressebog på Scalix-server via KMail
 Name[de]=Adressbuch auf einem Scalix-Server via KMail
 Name[el]=Βιβλίο διευθύνσεων σε εξυπηρετητή Scalix μέσω του KMail
+Name[es]=Libreta de direcciones en servidor Scalix por medio de KMail
 Name[et]=Aadressiraamat Scalix-serveris (KMaili vahendusel)
+Name[fr]=Carnet d'adresses sur serveur Scalix via KMail
+Name[is]=Vistfangaskrá á Scalix-þjóni gegnum KMail
 Name[it]=Rubrica indirizzi su server Scalix via KMail
 Name[ja]=KMail 経由 Scalix サーバのアドレス帳
+Name[km]=សៀវភៅ​អាសយដ្ឋាន​នៅ​លើ​ម៉ាស៊ីន​បម្រើ Scalix តាម​រយៈ KMail
 Name[nds]=Adressbook op Scalix-Server över KMail
 Name[nl]=Adresboek op Scalix-server via KMail
+Name[pl]=Książka adresowa na serwerze Scalix za pośrednictwem KMaila
+Name[ru]=Адресная книга на сервере Scalix через KMail
 Name[sk]=Adresár na Scalix serveri pomocou KMail
 Name[sr]=Адресар на Scalix серверу преко KMail-а
 Name[sr@Latn]=Adresar na Scalix serveru preko KMail-a
 Name[sv]=Adressbok på Scalix-server via Kmail
+Name[tr]=KMail Aracılığı ile Scalix Sunucusunda Adres Defteri
 Name[zh_CN]=通过 KMail 访问 Scalix 服务器上的地址簿
 Name[zh_TW]=透過 KMail 取得 Scalix 伺服器上的通訊錄
 X-KDE-Library=kabc_scalix
Index: kresources/scalix/uninstall.desktop
===================================================================
--- kresources/scalix/uninstall.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kresources/scalix/uninstall.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,3 +1,2 @@
 [Desktop Entry]
-Encoding=UTF-8
 Hidden=true
Index: kresources/scalix/knotes/scalix.desktop
===================================================================
--- kresources/scalix/knotes/scalix.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kresources/scalix/knotes/scalix.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,20 +1,26 @@
 [Desktop Entry]
-Encoding=UTF-8
 Name=Notes on Scalix Server via KMail
 Name[bg]=Бележки на сървъра Scalix през KMail
 Name[ca]=Notes en un servidor Scalix mitjançant el KMail
 Name[da]=Noter på Scalix-server via KMail
 Name[de]=Notizen auf einem Scalix-Server via KMail
 Name[el]=Σημειώσεις σε εξυπηρετητή Scalix μέσω του KMail
+Name[es]=Notas en servidor Scalix por medio de KMail
 Name[et]=Kalender Scalix-serveris (KMaili vahendusel)
+Name[fr]=Notes sur serveur Scalix via KMail
+Name[is]=Minnismiðar á Scalix-þjóni gegnum KMail
 Name[it]=Note su server Scalix via KMail
 Name[ja]=KMail 経由 Scalix サーバのメモ
+Name[km]=ចំណាំ​នៅលើ​ម៉ាស៊ីន​បម្រើ Scalix តាមរយៈ KMail
 Name[nds]=Notizen op Scalix-Server över KMail
 Name[nl]=Notities op Scalix-server via KMail
+Name[pl]=Notatki na serwerze Scalix za pośrednictwem KMaila
+Name[ru]=Заметки на сервере Scalix через KMail
 Name[sk]=Poznámky na Scalix serveri pomocou KMail
 Name[sr]=Белешке на Scalix серверу преко KMail-а
 Name[sr@Latn]=Beleške na Scalix serveru preko KMail-a
 Name[sv]=Anteckningar på Scalix-server via Kmail
+Name[tr]=KMail Aracılığı ile Scalix Sunucusunda Takvim
 Name[zh_CN]=通过 KMail 访问 Scalix 服务器上的日历
 Name[zh_TW]=透過 KMail 取得 Scalix 伺服器上的便條
 X-KDE-Library=knotes_scalix
Index: kresources/scalix/shared/resourcescalixbase.cpp
===================================================================
--- kresources/scalix/shared/resourcescalixbase.cpp	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kresources/scalix/shared/resourcescalixbase.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -33,6 +33,8 @@
 #include "resourcescalixbase.h"
 #include "kmailconnection.h"
 
+#include <folderselectdialog.h>
+
 #include <klocale.h>
 #include <kstandarddirs.h>
 #include <kinputdialog.h>
@@ -160,10 +162,10 @@
     return possible.begin().data(); // yes this is the subresource key, i.e. location
 
   // Several found, ask the user
-  QString chosenLabel = KInputDialog::getItem( i18n( "Select Resource Folder" ),
-                                               i18n( "You have more than one writable resource folder. "
-                                                     "Please select the one you want to write to." ),
-                                               possible.keys() );
+  QString chosenLabel = KPIM::FolderSelectDialog::getItem( i18n( "Select Resource Folder" ),
+                                                           i18n( "You have more than one writable resource folder. "
+                                                                 "Please select the one you want to write to." ),
+                                                           possible.keys() );
   if ( chosenLabel.isEmpty() ) // cancelled
     return QString::null;
   return possible[chosenLabel];
Index: kresources/scalix/shared/Makefile.am
===================================================================
--- kresources/scalix/shared/Makefile.am	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kresources/scalix/shared/Makefile.am	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,4 +1,4 @@
-INCLUDES = -I$(top_srcdir) $(all_includes)
+INCLUDES = -I$(top_srcdir) -I$(top_srcdir)/kresources/lib $(all_includes)
 
 noinst_HEADERS = resourcescalixbase.h scalixbase.h subresource.h
 
@@ -9,7 +9,7 @@
   subresource.cpp \
 	kmailconnection.skel kmailicalIface.stub
 libresourcescalixshared_la_METASOURCES = AUTO
-libresourcescalixshared_la_LIBADD = $(top_builddir)/libkcal/libkcal.la $(top_builddir)/libkdepim/libkdepim.la
+libresourcescalixshared_la_LIBADD = $(top_builddir)/libkcal/libkcal.la $(top_builddir)/libkdepim/libkdepim.la ../../lib/libkgroupwaredav.la
 libresourcescalixshared_la_LDFLAGS = -no-undefined
 
 kmailicalIface_DCOPIDLNG = true
Index: kresources/scalix/kcal/scalix.desktop
===================================================================
--- kresources/scalix/kcal/scalix.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kresources/scalix/kcal/scalix.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,20 +1,26 @@
 [Desktop Entry]
-Encoding=UTF-8
 Name=Calendar on Scalix Server via KMail
 Name[bg]=Календар на сървъра Scalix през KMail
 Name[ca]=Calendari en un servidor Scalix mitjançant el KMail
 Name[da]=Kalender på Scalix-server via KMail
 Name[de]=Kalender auf einem Scalix-Server via KMail
 Name[el]=Ημερολόγιο σε εξυπηρετητή Scalix μέσω του KMail
+Name[es]=Calendario en servidor Scalix por medio de KMail
 Name[et]=Kalender Scalix-serveris (KMaili vahendusel)
+Name[fr]=Agenda sur serveur Scalix via KMail
+Name[is]=Dagatal á Scalix-þjóni gegnum KMail
 Name[it]=Calendario su server Scalix via KMail
 Name[ja]=KMail 経由 Scalix サーバのカレンダー
+Name[km]=ប្រតិទិន​នៅ​លើ​ម៉ាស៊ីន​បម្រើ Scalix តាម​រយៈ KMail
 Name[nds]=Kalenner op Scalix-Server över KMail
 Name[nl]=Agenda op Scalix-server via KMail
+Name[pl]=Kalendarz na serwerze Scalix za pośrednictwem KMaila
+Name[ru]=Календарь на сервере Scalix через KMail
 Name[sk]=Kalendár na Scalix serveri pomocou KMail
 Name[sr]=Календар на Scalix серверу преко KMail-а
 Name[sr@Latn]=Kalendar na Scalix serveru preko KMail-a
 Name[sv]=Kalender på Scalix-server via Kmail
+Name[tr]=KMail Aracılığı ile Scalix Sunucusunda Takvim
 Name[zh_CN]=通过 KMail 访问 Scalix 服务器上的日历
 Name[zh_TW]=透過 KMail 取得 Scalix 伺服器上的行事曆
 X-KDE-Library=kcal_scalix
Index: kresources/groupwise/kcal_groupwise.desktop
===================================================================
--- kresources/groupwise/kcal_groupwise.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kresources/groupwise/kcal_groupwise.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,5 +1,4 @@
 [Desktop Entry]
-Encoding=UTF-8
 Name=Novell GroupWise Server
 Name[af]=Novell GroupWise bediener
 Name[bg]=Сървър Novell GroupWise
@@ -21,6 +20,7 @@
 Name[is]=Novell GroupWise þjónn
 Name[it]=Server Novell GroupWise
 Name[ja]=Novell GroupWise サーバ
+Name[ka]=სერვერი Novell GroupWise
 Name[kk]=Novell GroupWise сервері
 Name[km]=ម៉ាស៊ីន​បម្រើ GroupWise របស់​ណូវែល
 Name[lt]=Novell GroupWise serveris
Index: kresources/groupwise/kabc_groupwise.desktop
===================================================================
--- kresources/groupwise/kabc_groupwise.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kresources/groupwise/kabc_groupwise.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,5 +1,4 @@
 [Desktop Entry]
-Encoding=UTF-8
 Name=Novell GroupWise Server
 Name[af]=Novell GroupWise bediener
 Name[bg]=Сървър Novell GroupWise
@@ -21,6 +20,7 @@
 Name[is]=Novell GroupWise þjónn
 Name[it]=Server Novell GroupWise
 Name[ja]=Novell GroupWise サーバ
+Name[ka]=სერვერი Novell GroupWise
 Name[kk]=Novell GroupWise сервері
 Name[km]=ម៉ាស៊ីន​បម្រើ GroupWise របស់​ណូវែល
 Name[lt]=Novell GroupWise serveris
Index: kresources/slox/kcal_slox.desktop
===================================================================
--- kresources/slox/kcal_slox.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kresources/slox/kcal_slox.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,5 +1,4 @@
 [Desktop Entry]
-Encoding=UTF-8
 Name=SUSE LINUX Openexchange Server
 Name[af]=SuSE Linux OpenExchange bediener
 Name[bg]=Сървър SUSE LINUX Openexchange
@@ -22,6 +21,7 @@
 Name[is]=SUSE LINUX Openexchange þjónn
 Name[it]=Server SUSE LINUX Openexchange
 Name[ja]=SUSE LINUX Openexchange サーバ
+Name[ka]= SUSE LINUX Openexchange სერვერი
 Name[kk]=SUSE LINUX Openexchange сервері
 Name[km]=ម៉ាស៊ីន​បម្រើ Openexchange របស់​ស៊ូស៊ីលីនីក
 Name[lt]=SUSE LINUX Openexchange serveris
Index: kresources/slox/kcal_ox.desktop
===================================================================
--- kresources/slox/kcal_ox.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kresources/slox/kcal_ox.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,5 +1,4 @@
 [Desktop Entry]
-Encoding=UTF-8
 Name=OpenXchange Server
 Name[af]=OpenXchange bediener
 Name[bg]=Сървър OpenXchange
@@ -19,6 +18,7 @@
 Name[hu]=OpenXchange-kiszolgáló
 Name[is]=OpenXchange þjónn
 Name[ja]=OpenXchange サーバ
+Name[ka]=Openexchange სერვერი
 Name[kk]=OpenXchange сервері
 Name[km]=ម៉ាស៊ីន​បម្រើ OpenXchange
 Name[lt]=OpenXchange serveris
Index: kresources/slox/kabc_slox.desktop
===================================================================
--- kresources/slox/kabc_slox.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kresources/slox/kabc_slox.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,5 +1,4 @@
 [Desktop Entry]
-Encoding=UTF-8
 Name=SUSE LINUX Openexchange Server
 Name[af]=SuSE Linux OpenExchange bediener
 Name[bg]=Сървър SUSE LINUX Openexchange
@@ -22,6 +21,7 @@
 Name[is]=SUSE LINUX Openexchange þjónn
 Name[it]=Server SUSE LINUX Openexchange
 Name[ja]=SUSE LINUX Openexchange サーバ
+Name[ka]= SUSE LINUX Openexchange სერვერი
 Name[kk]=SUSE LINUX Openexchange сервері
 Name[km]=ម៉ាស៊ីន​បម្រើ Openexchange របស់​ស៊ូស៊ីលីនីក
 Name[lt]=SUSE LINUX Openexchange serveris
Index: kresources/slox/kabc_ox.desktop
===================================================================
--- kresources/slox/kabc_ox.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kresources/slox/kabc_ox.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,5 +1,4 @@
 [Desktop Entry]
-Encoding=UTF-8
 Name=OpenXchange Server
 Name[af]=OpenXchange bediener
 Name[bg]=Сървър OpenXchange
@@ -19,6 +18,7 @@
 Name[hu]=OpenXchange-kiszolgáló
 Name[is]=OpenXchange þjónn
 Name[ja]=OpenXchange サーバ
+Name[ka]=Openexchange სერვერი
 Name[kk]=OpenXchange сервері
 Name[km]=ម៉ាស៊ីន​បម្រើ OpenXchange
 Name[lt]=OpenXchange serveris
Index: kresources/groupdav/kabc_groupdav.desktop
===================================================================
--- kresources/groupdav/kabc_groupdav.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kresources/groupdav/kabc_groupdav.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,5 +1,4 @@
 [Desktop Entry]
-Encoding=UTF-8
 Name=GroupDAV Server (e.g. OpenGroupware)
 Name[af]=GroupDAV bediener (bv. OpenGroupware)
 Name[bg]=Сървър GroupDAV (e.g. OpenGroupware)
@@ -22,6 +21,7 @@
 Name[is]=GroupDAV þjónn (t.d. OpenGroupware)
 Name[it]=Server GroupDAV (per es. OpenGroupware)
 Name[ja]=GroupDAV サーバ (例 OpenGroupware)
+Name[ka]=სერვერი GroupDAV (მაგ., OpenGroupware)
 Name[kk]=GroupDAV сервері (мысалы OpenGroupware)
 Name[km]=ម៉ាស៊ីន​បម្រើ GroupDAV (ឧ. OpenGroupware)
 Name[lt]=GroupDAV serveris (pvz.: OpenGroupware)
Index: kresources/groupdav/uninstall.desktop
===================================================================
--- kresources/groupdav/uninstall.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kresources/groupdav/uninstall.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,3 +1,2 @@
 [Desktop Entry]
-Encoding=UTF-8
 Hidden=true
Index: kresources/groupdav/kcal_groupdav.desktop
===================================================================
--- kresources/groupdav/kcal_groupdav.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kresources/groupdav/kcal_groupdav.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,5 +1,4 @@
 [Desktop Entry]
-Encoding=UTF-8
 Name=GroupDAV Server (e.g. OpenGroupware)
 Name[af]=GroupDAV bediener (bv. OpenGroupware)
 Name[bg]=Сървър GroupDAV (e.g. OpenGroupware)
@@ -22,6 +21,7 @@
 Name[is]=GroupDAV þjónn (t.d. OpenGroupware)
 Name[it]=Server GroupDAV (per es. OpenGroupware)
 Name[ja]=GroupDAV サーバ (例 OpenGroupware)
+Name[ka]=სერვერი GroupDAV (მაგ., OpenGroupware)
 Name[kk]=GroupDAV сервері (мысалы OpenGroupware)
 Name[km]=ម៉ាស៊ីន​បម្រើ GroupDAV (ឧ. OpenGroupware)
 Name[lt]=GroupDAV serveris (pvz.: OpenGroupware)
Index: kresources/kolab/kabc/kolab.desktop
===================================================================
--- kresources/kolab/kabc/kolab.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kresources/kolab/kabc/kolab.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,5 +1,4 @@
 [Desktop Entry]
-Encoding=UTF-8
 Name=Addressbook on IMAP Server via KMail
 Name[af]=Adresboek op IMAP bediener via KMail
 Name[bg]=Адресник на сървър IMAP през KMail
@@ -22,6 +21,7 @@
 Name[is]=Vistfangaskrá á IMAP þjóni gegnum KMail
 Name[it]=Rubrica indirizzi su server IMAP via KMail
 Name[ja]=KMail 経由 IMAP サーバのアドレス帳
+Name[ka]=წიგნაკი IMAP-ის სერვერზე KMail-ის საშუალებით
 Name[kk]=KMail арқылы IMAP серверіндегі адрестік кітапша
 Name[km]=សៀវភៅ​អាសយដ្ឋាន​លើ​ម៉ាស៊ីន​បម្រើ IMAP តាម​រយៈ KMail
 Name[lt]=Adresų knygelė IMAP serveryje per KMail
Index: kresources/kolab/uninstall.desktop
===================================================================
--- kresources/kolab/uninstall.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kresources/kolab/uninstall.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,3 +1,2 @@
 [Desktop Entry]
-Encoding=UTF-8
 Hidden=true
Index: kresources/kolab/knotes/kolabresource.desktop
===================================================================
--- kresources/kolab/knotes/kolabresource.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kresources/kolab/knotes/kolabresource.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,5 +1,4 @@
 [Desktop Entry]
-Encoding=UTF-8
 Name=IMAP Server via KMail
 Name[af]=IMAP bediener via KMail
 Name[bg]=Сървър IMAP през KMail
@@ -22,6 +21,7 @@
 Name[is]=IMAP þjónn gegnum KMail
 Name[it]=Server IMAP via KMail
 Name[ja]=KMail 経由 IMAP サーバ
+Name[ka]= IMAP-ს სერვერთან დაშვება  KMail-ის საშუალებით
 Name[kk]=KMail арқылы IMAP сервері
 Name[km]=ម៉ាស៊ីន​បម្រើ IMAP តាម​រយៈ KMail
 Name[lt]=IMAP serveris per KMail
Index: kresources/kolab/shared/Makefile.am
===================================================================
--- kresources/kolab/shared/Makefile.am	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kresources/kolab/shared/Makefile.am	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,4 +1,4 @@
-INCLUDES = -I$(top_srcdir) $(all_includes)
+INCLUDES = -I$(top_srcdir) -I$(top_srcdir)/kresources/lib $(all_includes)
 
 noinst_HEADERS = resourcekolabbase.h kolabbase.h subresource.h
 
@@ -9,7 +9,7 @@
         subresource.cpp \
 	kmailconnection.skel kmailicalIface.stub
 libresourcekolabshared_la_METASOURCES = AUTO
-libresourcekolabshared_la_LIBADD = $(top_builddir)/libkcal/libkcal.la $(top_builddir)/libkdepim/libkdepim.la
+libresourcekolabshared_la_LIBADD = $(top_builddir)/libkcal/libkcal.la $(top_builddir)/libkdepim/libkdepim.la ../../lib/libkgroupwarebase.la
 libresourcekolabshared_la_LDFLAGS = -no-undefined
 
 kmailicalIface_DCOPIDLNG = true
Index: kresources/kolab/shared/resourcekolabbase.cpp
===================================================================
--- kresources/kolab/shared/resourcekolabbase.cpp	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kresources/kolab/shared/resourcekolabbase.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -34,6 +34,8 @@
 #include "resourcekolabbase.h"
 #include "kmailconnection.h"
 
+#include <folderselectdialog.h>
+
 #include <klocale.h>
 #include <kstandarddirs.h>
 #include <kinputdialog.h>
@@ -238,8 +240,8 @@
           "Please select the one you want to write to." );
 
   // Several found, ask the user
-  QString chosenLabel = KInputDialog::getItem( i18n( "Select Resource Folder" ),
-                                               t, possible.keys() );
+  QString chosenLabel = KPIM::FolderSelectDialog::getItem( i18n( "Select Resource Folder" ),
+                                                           t, possible.keys() );
   if ( chosenLabel.isEmpty() ) // cancelled
     return QString::null;
   return possible[chosenLabel];
Index: kresources/kolab/kcal/kolab.desktop
===================================================================
--- kresources/kolab/kcal/kolab.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kresources/kolab/kcal/kolab.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,5 +1,4 @@
 [Desktop Entry]
-Encoding=UTF-8
 Name=Calendar on IMAP Server via KMail
 Name[af]=Kalender op IMAP bediener via KMail
 Name[bg]=Календар на сървър IMAP през KMail
@@ -22,6 +21,7 @@
 Name[is]=Dagatal á IMAP þjóni gegnum KMail
 Name[it]=Calendario su server IMAP via KMail
 Name[ja]=KMail 経由 IMAP サーバのカレンダー
+Name[ka]=კალენდარი IMAP სერვერზე KMail-ის საშუალებით
 Name[kk]=KMail арқылы IMAP серверіндегі күнтізбе
 Name[km]=ប្រតិទិន​លើ​ម៉ាស៊ីន​បម្រើ IMAP តាម​រយៈ KMail
 Name[lt]=Kalendorius IMAP serveryje per KMail
Index: kresources/blogging/blogging.desktop
===================================================================
--- kresources/blogging/blogging.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kresources/blogging/blogging.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,5 +1,4 @@
 [Desktop Entry]
-Encoding=UTF-8
 Name=Journals as Blogs on a Server
 Name[af]=Joernale as Blogs op 'n bediener
 Name[bg]=Дневници и блогове
@@ -20,6 +19,7 @@
 Name[is]=Dagbækur sem blogg á þjóni
 Name[it]=Diari come blog su un server
 Name[ja]=サーバ上のブログとしてのジャーナル
+Name[ka]=ბლოგისმაგვარი ჟურნალები სერვერზე
 Name[kk]=Сервердегі күнделік блог ретінде
 Name[km]=ទិនានុប្បវត្តិ​ជា​កំណត់ហេតុ​បណ្ដាញ​នៅ​លើ​ម៉ាស៊ីន​បម្រើ
 Name[lt]=Dienynai kaip Blog'ai serveryje
Index: kresources/birthdays/kabc.desktop
===================================================================
--- kresources/birthdays/kabc.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kresources/birthdays/kabc.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,5 +1,4 @@
 [Desktop Entry]
-Encoding=UTF-8
 Name=Birthdays From KAddressBook
 Name[af]=Verjaarsdae uit KAddressBook
 Name[ar]=تواريخ الميلد من KAddressBook
@@ -29,6 +28,7 @@
 Name[is]=Afmælisdagar úr KAddressBook
 Name[it]=Compleanni da KAddessBook
 Name[ja]=アドレス帳の誕生日
+Name[ka]=დაბადების დღეები KDE წიგნაკიდან 
 Name[kk]=KAddressBook-тағы туған күндер
 Name[km]=ថ្ងៃ​ខួប​កំណើត​ពី KAddressBook
 Name[lt]=Gimtadieniai iš KAddressBook
Index: kresources/remote/remote.desktop
===================================================================
--- kresources/remote/remote.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kresources/remote/remote.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,5 +1,4 @@
 [Desktop Entry]
-Encoding=UTF-8
 Name=Calendar in Remote File
 Name[af]=Kalender in 'n afgeleë lêer
 Name[bg]=Календар в отдалечен файл
@@ -25,6 +24,7 @@
 Name[is]=Dagatal í fjarlægri skrá
 Name[it]=Calendario in file remoto
 Name[ja]=リモートファイルのカレンダー
+Name[ka]=კალენდარი გარე ფაილზე
 Name[kk]=Қашықтағы файлдағы күнтізбе
 Name[km]=ប្រតិទិន​នៅ​ក្នុង​ឯកសារ​នៅ​ឆ្ងាយ
 Name[lt]=Kalendorius nutolusioje byloje
Index: kresources/newexchange/kabc_newexchange.desktop
===================================================================
--- kresources/newexchange/kabc_newexchange.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kresources/newexchange/kabc_newexchange.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,5 +1,4 @@
 [Desktop Entry]
-Encoding=UTF-8
 Name=Addressbook on an Exchange Server (experimental)
 Name[af]=Adresboek op 'n Exchange bediener (eksperimenteel)
 Name[bg]=Адресник на сървър Exchange (експериментално)
@@ -21,6 +20,7 @@
 Name[is]=Vistfangaskrá Exchange þjóni (á tilraunarstigi)
 Name[it]=Rubrica indirizzi su un server Exchange (sperimentale)
 Name[ja]=Exchange サーバのアドレス帳 (実験版)
+Name[ka]=წიგნაკი Exchange სერვერზე(ექსპერიმენტული)
 Name[kk]=Exchange серверіндегі адрестік кітапша (сынақтағы)
 Name[km]=សៀវភៅ​អាសយដ្ឋាន​លើ​ម៉ាស៊ីន​បម្រើ Exchange (សម្រាប់​អ្នក​មាន​បទពិសោធន៍)
 Name[lt]=Adresų knygelė Exchange serveryje (eksperimentine tvarka)
Index: kresources/newexchange/kabc_newexchange_final.desktop
===================================================================
--- kresources/newexchange/kabc_newexchange_final.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kresources/newexchange/kabc_newexchange_final.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,5 +1,4 @@
 [Desktop Entry]
-Encoding=UTF-8
 Name=Addressbook on an Exchange Server
 Name[af]=Adresboek op 'n Exchange bediener
 Name[bg]=Адресник на сървър Exchange
@@ -23,6 +22,7 @@
 Name[is]=Vistfangaskrá á Exchange þjóni
 Name[it]=Rubrica indirizzi su un server Exchange
 Name[ja]=Exchange サーバのアドレス帳
+Name[ka]=წიგნაკი Exchange სერვერზე
 Name[kk]=Exchange серверіндегі адрестік кітапша
 Name[km]=សៀវភៅ​អាសយដ្ឋាន​លើ​ម៉ាស៊ីន​បម្រើ Exchange
 Name[lt]=Adresų knygelė Exchange serveryje
Index: kresources/newexchange/kcal_newexchange.desktop
===================================================================
--- kresources/newexchange/kcal_newexchange.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kresources/newexchange/kcal_newexchange.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,5 +1,4 @@
 [Desktop Entry]
-Encoding=UTF-8
 Name=Calendar on an Exchange Server (experimental)
 Name[af]=Kalender op 'n Exchange bediener (eksperimenteel)
 Name[bg]=Календар на сървър Exchange (експериментално)
@@ -21,6 +20,7 @@
 Name[is]=Dagatal á Exchange þjóni (á tilraunarstigi)
 Name[it]=Calendario su un server Exchange (sperimentale)
 Name[ja]=Exchange サーバのカレンダー (実験版)
+Name[ka]=კალენდარი Exchange სერვერზე (ექსპერიმენტული)
 Name[kk]=Exchange серверіндегі күнтізбе (сынақтағы)
 Name[km]=ប្រតិទិន​លើ​ម៉ាស៊ីន​បម្រើ Exchange (សម្រាប់​អ្នក​មាន​បទពិសោធន៍)
 Name[lt]=Kalendorius Exchange serveryje (eksperimentine tvarka)
Index: kresources/newexchange/kcal_newexchange_final.desktop
===================================================================
--- kresources/newexchange/kcal_newexchange_final.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kresources/newexchange/kcal_newexchange_final.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,5 +1,4 @@
 [Desktop Entry]
-Encoding=UTF-8
 Hidden=true
 Name=Calendar on an Exchange Server
 Name[af]=Kalender op 'n Exchange bediener
@@ -23,6 +22,7 @@
 Name[is]=Dagatal á Exchange þjóni
 Name[it]=Calendario su un server Exchange
 Name[ja]=Exchange サーバのカレンダー
+Name[ka]=კალენდარი Exchange სერვერზე 
 Name[kk]=Exchange серверіндегі күнтізбе
 Name[km]=ប្រតិទិន​លើ​ម៉ាស៊ីន​បម្រើ Exchange
 Name[lt]=Kalendorius Exchange serveryje
Index: kresources/lib/folderselectdialog.h
===================================================================
--- kresources/lib/folderselectdialog.h	(.../tags/KDE/3.5.9/kdepim)	(wersja 0)
+++ kresources/lib/folderselectdialog.h	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -0,0 +1,58 @@
+/*
+    This file is part of kdepim.
+
+    Copyright (c) 2008 Kevin Ottens <ervin@kde.org>
+
+    This library is free software; you can redistribute it and/or
+    modify it under the terms of the GNU Library General Public
+    License as published by the Free Software Foundation; either
+    version 2 of the License, or (at your option) any later version.
+
+    This library is distributed in the hope that it will be useful,
+    but WITHOUT ANY WARRANTY; without even the implied warranty of
+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
+    Library General Public License for more details.
+
+    You should have received a copy of the GNU Library General Public License
+    along with this library; see the file COPYING.LIB.  If not, write to
+    the Free Software Foundation, Inc., 51 Franklin Street, Fifth Floor,
+    Boston, MA 02110-1301, USA.
+
+    In addition, as a special exception, the copyright holders give
+    permission to link the code of this program with any edition of
+    the Qt library by Trolltech AS, Norway (or with modified versions
+    of Qt that use the same license as Qt), and distribute linked
+    combinations including the two.  You must obey the GNU General
+    Public License in all respects for all of the code used other than
+    Qt.  If you modify this file, you may extend this exception to
+    your version of the file, but you are not obligated to do so.  If
+    you do not wish to do so, delete this exception statement from
+    your version.
+*/
+
+#ifndef FOLDERSELECTDIALOG_H
+#define FOLDERSELECTDIALOG_H
+
+#include <kdialogbase.h>
+
+namespace KPIM {
+
+class FolderSelectDialog : public KDialogBase
+{
+private:
+  FolderSelectDialog( const QString& caption, const QString& label,
+                      const QStringList& list );
+
+public:
+  static QString getItem( const QString& caption, const QString& label,
+                          const QStringList& list );
+
+protected:
+  virtual void closeEvent(QCloseEvent *event);
+private:
+  KListBox* mListBox;
+};
+
+}
+
+#endif // FOLDERSELECTDIALOG_H
Index: kresources/lib/Makefile.am
===================================================================
--- kresources/lib/Makefile.am	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kresources/lib/Makefile.am	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -5,7 +5,7 @@
 
 lib_LTLIBRARIES = libkgroupwarebase.la libkgroupwaredav.la
 
-libkgroupwarebase_la_SOURCES = folderlister.cpp folderconfig.cpp folderlistview.cpp \
+libkgroupwarebase_la_SOURCES = folderlister.cpp folderconfig.cpp folderlistview.cpp folderselectdialog.cpp \
   groupwaredataadaptor.cpp groupwaredownloadjob.cpp \
   calendaradaptor.cpp addressbookadaptor.cpp groupwareresourcejob.cpp \
   groupwareuploadjob.cpp kcal_resourcegroupwarebase.cpp kabc_resourcegroupwarebase.cpp \
Index: kresources/lib/folderselectdialog.cpp
===================================================================
--- kresources/lib/folderselectdialog.cpp	(.../tags/KDE/3.5.9/kdepim)	(wersja 0)
+++ kresources/lib/folderselectdialog.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -0,0 +1,83 @@
+/*
+    This file is part of kdepim.
+
+    Copyright (c) 2008 Kevin Ottens <ervin@kde.org>
+
+    This library is free software; you can redistribute it and/or
+    modify it under the terms of the GNU Library General Public
+    License as published by the Free Software Foundation; either
+    version 2 of the License, or (at your option) any later version.
+
+    This library is distributed in the hope that it will be useful,
+    but WITHOUT ANY WARRANTY; without even the implied warranty of
+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
+    Library General Public License for more details.
+
+    You should have received a copy of the GNU Library General Public License
+    along with this library; see the file COPYING.LIB.  If not, write to
+    the Free Software Foundation, Inc., 51 Franklin Street, Fifth Floor,
+    Boston, MA 02110-1301, USA.
+
+    In addition, as a special exception, the copyright holders give
+    permission to link the code of this program with any edition of
+    the Qt library by Trolltech AS, Norway (or with modified versions
+    of Qt that use the same license as Qt), and distribute linked
+    combinations including the two.  You must obey the GNU General
+    Public License in all respects for all of the code used other than
+    Qt.  If you modify this file, you may extend this exception to
+    your version of the file, but you are not obligated to do so.  If
+    you do not wish to do so, delete this exception statement from
+    your version.
+*/
+
+#include "folderselectdialog.h"
+
+#include <qlayout.h>
+#include <qlabel.h>
+
+using namespace KPIM;
+
+FolderSelectDialog::FolderSelectDialog( const QString& caption, const QString& label,
+                                        const QStringList& list )
+  : KDialogBase(0, 0, true, caption, Ok, Ok, true)
+{
+  QFrame* frame = makeMainWidget();
+  QVBoxLayout* layout = new QVBoxLayout( frame, 0, spacingHint() );
+
+  QLabel* labelWidget = new QLabel( label, frame );
+  layout->addWidget( labelWidget );
+
+  mListBox = new KListBox( frame );
+  mListBox->insertStringList( list );
+  mListBox->setSelected( 0, true );
+  mListBox->ensureCurrentVisible();
+  layout->addWidget( mListBox, 10 );
+
+  connect( mListBox, SIGNAL( doubleClicked( QListBoxItem * ) ),
+           SLOT( slotOk() ) );
+  connect( mListBox, SIGNAL( returnPressed( QListBoxItem * ) ),
+           SLOT( slotOk() ) );
+
+  mListBox->setFocus();
+
+  layout->addStretch();
+
+  setMinimumWidth( 320 );
+}
+
+QString FolderSelectDialog::getItem( const QString &caption, const QString &label,
+                                     const QStringList& list )
+{
+  FolderSelectDialog dlg( caption, label, list );
+
+  QString result;
+  if ( dlg.exec() == Accepted )
+    result = dlg.mListBox->currentText();
+
+  return result;
+}
+
+void FolderSelectDialog::closeEvent(QCloseEvent *event)
+{
+  event->ignore();
+}
Index: kresources/featureplan/kcal_resourcefeatureplan.desktop
===================================================================
--- kresources/featureplan/kcal_resourcefeatureplan.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kresources/featureplan/kcal_resourcefeatureplan.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,5 +1,4 @@
 [Desktop Entry]
-Encoding=UTF-8
 Name=XML Feature Plan
 Name[af]=XML eienskappe plan
 Name[ca]=Pla de característiques XML
Index: kresources/groupware/kabc_groupware.desktop
===================================================================
--- kresources/groupware/kabc_groupware.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kresources/groupware/kabc_groupware.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,5 +1,4 @@
 [Desktop Entry]
-Encoding=UTF-8
 Name=Groupware Server
 Name[af]=Groupware bediener
 Name[ar]=خادم البرمجيات الجماعية
@@ -21,6 +20,7 @@
 Name[is]=Groupware þjónn
 Name[it]=Server Groupware
 Name[ja]=グループウェアサーバ
+Name[ka]=სერვერი Groupware
 Name[kk]=Groupware сервері
 Name[km]=ម៉ាស៊ីន​បម្រើ​កម្មវិធី​ពហុ​អ្នកប្រើ
 Name[lt]=Grupinio darbo serveris
Index: kresources/groupware/kcal_groupware.desktop
===================================================================
--- kresources/groupware/kcal_groupware.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kresources/groupware/kcal_groupware.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,5 +1,4 @@
 [Desktop Entry]
-Encoding=UTF-8
 Name=Groupware Server
 Name[af]=Groupware bediener
 Name[ar]=خادم البرمجيات الجماعية
@@ -21,6 +20,7 @@
 Name[is]=Groupware þjónn
 Name[it]=Server Groupware
 Name[ja]=グループウェアサーバ
+Name[ka]=სერვერი Groupware
 Name[kk]=Groupware сервері
 Name[km]=ម៉ាស៊ីន​បម្រើ​កម្មវិធី​ពហុ​អ្នកប្រើ
 Name[lt]=Grupinio darbo serveris
Index: certmanager/kleopatra_import.desktop
===================================================================
--- certmanager/kleopatra_import.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ certmanager/kleopatra_import.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,5 +1,4 @@
 [Desktop Entry]
-Encoding=UTF-8
 Name=Kleopatra
 Name[is]=Kleópatra
 Name[mk]=Клеопатра
Index: certmanager/conf/kleopatra_config_appear.desktop
===================================================================
--- certmanager/conf/kleopatra_config_appear.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ certmanager/conf/kleopatra_config_appear.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,5 +1,4 @@
 [Desktop Entry]
-Encoding=UTF-8
 Icon=looknfeel
 Type=Service
 ServiceTypes=KCModule
@@ -41,6 +40,7 @@
 Name[is]=Útlit
 Name[it]=Aspetto
 Name[ja]=外観
+Name[ka]=იერსახე
 Name[kk]=Сыртқы көрінісі
 Name[km]=រូបរាង
 Name[ko]=모양
@@ -67,7 +67,8 @@
 Name[tg]=Намуди зоҳирӣ
 Name[tr]=Görünüm
 Name[uk]=Вигляд
-Name[uz]=Кўриниши
+Name[uz]=Koʻrinishi
+Name[uz@cyrillic]=Кўриниши
 Name[zh_CN]=外观
 Comment=Colors & Fonts Configuration
 Comment[af]=Kleur en skrif tipe opstelling
@@ -96,6 +97,7 @@
 Comment[is]=Stilling lita & leturgerða
 Comment[it]=Configurazione tipi di carattere e colori
 Comment[ja]=色とフォントの設定
+Comment[ka]=ფერთა და შრიფტთა კონფიგურაცია
 Comment[kk]=Түс & Қаріп параметрлері
 Comment[km]=ការ​កំណត់​រចនាសម្ព័ន្ធ​ពណ៌ & ពុម្ពអក្សរ
 Comment[ko]=색과 글꼴 설정
@@ -151,6 +153,7 @@
 Keywords[is]=litir,letur, stillingar
 Keywords[it]=colori, font, caratteri, configurazione
 Keywords[ja]=色,フォント,設定
+Keywords[ka]=ფერები,შრიფტები, კონფიგურაცია
 Keywords[km]=ពណ៌,ពុម្ពអក្សរ,ការ​កំណត់​រចនាសម្ព័ន្ធ
 Keywords[ko]=색,글꼴,설정
 Keywords[lt]=color,font, configuration, spalvų, šriftų konfigūravimas
Index: certmanager/conf/kleopatra_config_dnorder.desktop
===================================================================
--- certmanager/conf/kleopatra_config_dnorder.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ certmanager/conf/kleopatra_config_dnorder.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,5 +1,4 @@
 [Desktop Entry]
-Encoding=UTF-8
 Icon=looknfeel
 Type=Service
 ServiceTypes=KCModule
@@ -35,6 +34,7 @@
 Name[is]=DN eiginleikaröðun
 Name[it]=Attributi DN, ordine
 Name[ja]=DN 属性順位
+Name[ka]=DN ატრიბუტთა რიგი
 Name[kk]=DN-атрибуттер реті
 Name[km]=លំដាប់​គុណលក្ខណៈ DN
 Name[ko]=DN 분배 순서
@@ -85,6 +85,7 @@
 Comment[is]=Stilla röð DN eiginleikanna
 Comment[it]=Configura l'ordine in cui sono mostrati gli attributi DN
 Comment[ja]=DN 属性を表示する順位を設定
+Comment[ka]=DN ატრიბუტთა ჩვენების რიგის კონფიგურაცია
 Comment[kk]=DN атрибуттерді көрсету ретін баптау
 Comment[km]=កំណត់​រចនាសម្ព័ន្ធ​លំដាប់ ដែល​ត្រូវ​បង្ហាញ​គុណលក្ខណៈ DN
 Comment[lt]=Konfigūruoti DN savybių rodymo tvarką
@@ -136,6 +137,7 @@
 Keywords[is]=DN,röð,order,RDN,attribute
 Keywords[it]=DN,ordine,RDN,attributi
 Keywords[ja]=DN,順位,RDN,属性
+Keywords[ka]=DN,რიგი,RDN,ატრიბუტი
 Keywords[km]=DN,លំដាប់,RDN,គុណលក្ខណៈ
 Keywords[lt]=DN,order,RDN,attribute,savybė,tvarka
 Keywords[mk]=DN,order,RDN,attribute,редослед,атрибут
Index: certmanager/conf/kleopatra_config_dirserv.desktop
===================================================================
--- certmanager/conf/kleopatra_config_dirserv.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ certmanager/conf/kleopatra_config_dirserv.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,5 +1,4 @@
 [Desktop Entry]
-Encoding=UTF-8
 Icon=network
 Type=Service
 ServiceTypes=KCModule
@@ -28,7 +27,7 @@
 Name[eu]=Direktorio zerbitzuak
 Name[fa]=خدمات فهرست راهنما
 Name[fi]=Hakemistopalvelut
-Name[fr]=Services de répertoires
+Name[fr]=Services d'annuaire
 Name[fy]=Maptsjinsten
 Name[ga]=Seirbhísí Eolaire
 Name[gl]=Servicios de Directorio
@@ -37,6 +36,7 @@
 Name[is]=Nafnaþjónustur
 Name[it]=Servizi Directory
 Name[ja]=ディレクトリサービス
+Name[ka]=საცნობარო მომსახურება
 Name[kk]=Каталог қызметтері
 Name[km]=សេវា​ថត
 Name[ko]=디렉터리 서비스
@@ -80,7 +80,7 @@
 Comment[eu]=LDAP direktorio zerbitzuen konfigurazioa
 Comment[fa]=پیکربندی خدمات فهرست راهنمای LDAP
 Comment[fi]=Hakemistopalveluiden asetukset
-Comment[fr]=Configuration des répertoires LDAP
+Comment[fr]=Configuration des services d'annuaire LDAP
 Comment[fy]=Konfiguraasje foar LDAP-tsjinsten
 Comment[gl]=Configuración dos servicios de directorio LDAP
 Comment[he]=תצורה של שירותי ספרייה עבור LDAP
@@ -88,6 +88,7 @@
 Comment[is]=Stillingar LDAP uppflettingaþjónustunnar
 Comment[it]=Configurazione servizi LDAP
 Comment[ja]=LDAP ディレクトリサービスの設定
+Comment[ka]=LDAP საცნობარო მომსახურების კონფიგურაცია
 Comment[kk]=LDAP каталог қызметтер параметрлері
 Comment[km]=ការ​កំណត់​រចនាសម្ព័ន្ធ​របស់​សេវា​ថត LDAP
 Comment[ko]=LDAP 디렉터리 서비스 설정
@@ -132,7 +133,7 @@
 Keywords[eu]=Idap, direktorio, zerbitzuak
 Keywords[fa]=ldap، فهرست راهنما، خدمات
 Keywords[fi]=ldap,hakemisto,palvelut
-Keywords[fr]=ldap,dossier,dossiers,service,services
+Keywords[fr]=ldap,annuaire,annuaires,service,services
 Keywords[fy]=ldap,directory,services,triemtafel,tsjinsten
 Keywords[ga]=ldap,eolaire,seirbhísí
 Keywords[gl]=ldap,directorio,servicios
@@ -141,6 +142,7 @@
 Keywords[is]=ldap,directory,services,nafnaþjónusta
 Keywords[it]=ldap, servizi, directory
 Keywords[ja]=ldap,ディレクトリ,サービス
+Keywords[ka]=ldap,ცნობარი,მომსახურება
 Keywords[km]=ldap,ថត,សេវា
 Keywords[ko]=ldap,디렉터리,서비스
 Keywords[lt]=ldap,directory,services,aplankai,tarnybos
@@ -150,7 +152,7 @@
 Keywords[nds]=LDAP,Verteken,Deensten
 Keywords[ne]=ldap,डाइरेक्टरी,कार्य
 Keywords[nn]=ldap,katalog,tenester
-Keywords[pl]=ldap,katalog,usługi katalogowe,usługi,LDAP
+Keywords[pl]=katalog,usługi katalogowe,usługi,LDAP
 Keywords[pt]=ldap,directório,serviços
 Keywords[pt_BR]=ldap,diretório,serviços
 Keywords[ru]=LDAP,службы каталогов
Index: certmanager/certificateinfowidgetimpl.cpp
===================================================================
--- certmanager/certificateinfowidgetimpl.cpp	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ certmanager/certificateinfowidgetimpl.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -62,10 +62,11 @@
 #include <qcursor.h>
 #include <qapplication.h>
 #include <qdatetime.h>
+#include <qstylesheet.h>
+#include <qtextcodec.h>
 
 // other
 #include <assert.h>
-#include <qtextcodec.h>
 
 CertificateInfoWidgetImpl::CertificateInfoWidgetImpl( const GpgME::Key & key, bool external,
 						      QWidget * parent, const char * name )
@@ -266,7 +267,7 @@
 
   if ( !proc->start( KProcess::NotifyOnExit, (KProcess::Communication)(KProcess::Stdout | KProcess::Stderr) ) ) {
     QString wmsg = i18n("Failed to execute gpgsm:\n%1").arg( i18n( "program not found" ) );
-    dumpView->setText( wmsg );
+    dumpView->setText( QStyleSheet::escape( wmsg ) );
     delete proc;
   }
 }
@@ -285,10 +286,10 @@
   int rc = ( proc->normalExit() ) ? proc->exitStatus() : -1 ;
 
   if ( rc == 0 ) {
-    dumpView->setText( QString::fromUtf8( mDumpOutput ) );
+    dumpView->setText( QStyleSheet::escape( QString::fromUtf8( mDumpOutput ) ) );
   } else {
     if ( !mDumpError.isEmpty() ) {
-      dumpView->setText( QString::fromUtf8( mDumpError ) );
+      dumpView->setText( QStyleSheet::escape( QString::fromUtf8( mDumpError ) ) );
     } else
     {
       QString wmsg = i18n("Failed to execute gpgsm:\n%1");
@@ -296,7 +297,7 @@
         wmsg = wmsg.arg( i18n( "program cannot be executed" ) );
       else
         wmsg = wmsg.arg( strerror(rc) );
-      dumpView->setText( wmsg );
+      dumpView->setText( QStyleSheet::escape( wmsg ) );
     }
   }
 
Index: certmanager/certificatewizardimpl.cpp
===================================================================
--- certmanager/certificatewizardimpl.cpp	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ certmanager/certificatewizardimpl.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -230,9 +230,9 @@
 
 	  if ( const char * oid = oidForAttributeName( attr ) ) {
 		// we need to translate the attribute name for the backend:
-		rdns.push_back( QString::fromUtf8( oid ) + '=' + value );
+              rdns.push_back( QString::fromUtf8( oid ) + '=' + Kleo::DN::escape( value ) );
 	  } else {
-		rdns.push_back( attr + '=' + value );
+              rdns.push_back( attr + '=' + Kleo::DN::escape( value ) );
 	  }
     }
     certParms += rdns.join(",");
Index: certmanager/lib/cryptplug.h
===================================================================
--- certmanager/lib/cryptplug.h	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ certmanager/lib/cryptplug.h	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -408,7 +408,7 @@
    \note This function <b>must</b> be implemented by each plug-in using
    this API specification.
 */
-bool hasFeature( Feature );
+bool hasFeature( ::Feature );
 
 /*! \ingroup groupSignCryptAct
    \brief Information record returned by signing and by encrypting
Index: certmanager/lib/cryptplugwrapper.h
===================================================================
--- certmanager/lib/cryptplugwrapper.h	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ certmanager/lib/cryptplugwrapper.h	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -718,7 +718,7 @@
 
         \return  whether the relative feature is implemented or not
     */
-    bool hasFeature( Feature );
+    bool hasFeature( ::Feature );
 
 
     /* \ingroup groupSignAct
Index: certmanager/lib/libkleopatrarc.desktop
===================================================================
--- certmanager/lib/libkleopatrarc.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ certmanager/lib/libkleopatrarc.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -22,6 +22,7 @@
 Name[is]=Ekki staðfestur lykill
 Name[it]=Chiave non convalidata
 Name[ja]=認証されていない鍵
+Name[ka]=დაუმოწმებელი გასაღები
 Name[kk]=Тексерілмеген кілт
 Name[km]=កូនសោ​គ្មាន​សុពលភាព
 Name[ko]=검증되지 않은 키
@@ -76,6 +77,7 @@
 Name[is]=Útrunninn lykill
 Name[it]=Chiave scaduta
 Name[ja]=期限切れの鍵
+Name[ka]=ვადაგასული გასაღები
 Name[kk]=Ескірген кілт
 Name[km]=កូនសោ​បាន​ផុតកំណត់
 Name[ko]=만료된 키
@@ -128,6 +130,7 @@
 Name[is]=Afturkallaður lykill
 Name[it]=Chiave revocata
 Name[ja]=破棄された鍵
+Name[ka]=ანულირებული გასაღები
 Name[kk]=Күші жойылған кілт
 Name[km]=កូនសោ​ត្រូវ​បាន​ដកហូត
 Name[ko]=거부된 키
@@ -180,6 +183,7 @@
 Name[is]=Treyst rótarskilríki
 Name[it]=Certificato radice affidabile
 Name[ja]=信頼されたルート証明書
+Name[ka]= რუტის  სანდო სერთიფიკატი
 Name[kk]=Сенім артылған түбір куәлігі
 Name[km]=វិញ្ញាបនបត្រ Root ដែល​អាច​ជឿទុកចិត្ត
 Name[lt]=Patikimas root sertifikatas
@@ -232,6 +236,7 @@
 Name[is]=Ekki traust rótarskilríki
 Name[it]=Certificato radice non affidabile
 Name[ja]=信頼されてないルート証明書
+Name[ka]=რუტის არასანდო  სერტიფიკატი
 Name[kk]=Сенім артылмаған түбір куәлігі
 Name[km]=វិញ្ញាបនបត្រ Root ដែល​មិន​អាច​ជឿទុកចិត្ត
 Name[lt]=Nepatikimas root sertifikatas
@@ -285,6 +290,7 @@
 Name[is]=Aðrir lyklar
 Name[it]=Altre chiavi
 Name[ja]=他の鍵
+Name[ka]=სხვა გასაღებები
 Name[kk]=Басқа кілттер
 Name[km]=កូនសោ​ផ្សេង​ទៀត
 Name[ko]=기타 키
@@ -310,7 +316,8 @@
 Name[ta]=மற்ற விசைகள்
 Name[tr]=Diğer Anahtarlar
 Name[uk]=Інші ключі
-Name[uz]=Бошқа калитлар
+Name[uz]=Boshqa kalitlar
+Name[uz@cyrillic]=Бошқа калитлар
 Name[zh_CN]=其它密钥
 Name[zh_TW]=其他金鑰
 
Index: certmanager/lib/kleo/dn.cpp
===================================================================
--- certmanager/lib/kleo/dn.cpp	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ certmanager/lib/kleo/dn.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -268,12 +268,33 @@
   return parse_dn( (const unsigned char*)dn.utf8().data() );
 }
 
+static QString dn_escape( const QString & s ) {
+    QString result;
+    for ( unsigned int i = 0, end = s.length() ; i != end ; ++i ) {
+        const QChar ch = s[i];
+        switch ( ch.unicode() ) {
+        case ',':
+        case '+':
+        case '"':
+        case '\\':
+        case '<':
+        case '>':
+        case ';':
+            result += '\\';
+            // fall through
+        default:
+            result += ch;
+        }
+    }
+    return result;
+}
+
 static QString
 serialise( const QValueVector<Kleo::DN::Attribute> & dn ) {
   QStringList result;
   for ( QValueVector<Kleo::DN::Attribute>::const_iterator it = dn.begin() ; it != dn.end() ; ++it )
     if ( !(*it).name().isEmpty() && !(*it).value().isEmpty() )
-      result.push_back( (*it).name().stripWhiteSpace() + '=' + (*it).value().stripWhiteSpace() );
+      result.push_back( (*it).name().stripWhiteSpace() + '=' + dn_escape( (*it).value().stripWhiteSpace() ) );
   return result.join( "," );
 }
 
@@ -367,6 +388,11 @@
   return d ? serialise( d->attributes ) : QString::null ;
 }
 
+// static
+QString Kleo::DN::escape( const QString & value ) {
+    return dn_escape( value );
+}
+
 void Kleo::DN::detach() {
   if ( !d ) {
     d = new Kleo::DN::Private();
Index: certmanager/lib/kleo/dn.h
===================================================================
--- certmanager/lib/kleo/dn.h	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ certmanager/lib/kleo/dn.h	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -87,6 +87,9 @@
 
     const DN & operator=( const DN & other );
 
+    /** @return the value in rfc-2253-escaped form */
+    static QString escape( const QString & value );
+
     /** @return the DN in a reordered form, according to the settings in
 	the [DN] group of the application's config file */
     QString prettyDN() const;
Index: certmanager/lib/ui/keyselectiondialog.cpp
===================================================================
--- certmanager/lib/ui/keyselectiondialog.cpp	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ certmanager/lib/ui/keyselectiondialog.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
     keyselectiondialog.cpp
 
     This file is part of libkleopatra, the KDE keymanagement library
-    Copyright (c) 2004 Klarlvdalens Datakonsult AB
+    Copyright (c) 2004 Klarävdalens Datakonsult AB
 
     Based on kpgpui.cpp
     Copyright (C) 2001,2002 the KPGP authors
@@ -60,6 +60,7 @@
 #include <kwin.h>
 #include <kconfig.h>
 #include <kmessagebox.h>
+#include <kprocess.h>
 
 // Qt
 #include <qcheckbox.h>
@@ -295,7 +296,7 @@
 					      bool rememberChoice,
 					      QWidget * parent, const char * name,
 					      bool modal )
-  : KDialogBase( parent, name, modal, title, Default|Ok|Cancel, Ok ),
+  : KDialogBase( parent, name, modal, title, Default|Ok|Cancel|Help, Ok ),
     mOpenPGPBackend( 0 ),
     mSMIMEBackend( 0 ),
     mRememberCB( 0 ),
@@ -314,7 +315,7 @@
 					      bool rememberChoice,
 					      QWidget * parent, const char * name,
 					      bool modal )
-  : KDialogBase( parent, name, modal, title, Default|Ok|Cancel, Ok ),
+  : KDialogBase( parent, name, modal, title, Default|Ok|Cancel|Help, Ok ),
     mOpenPGPBackend( 0 ),
     mSMIMEBackend( 0 ),
     mRememberCB( 0 ),
@@ -391,15 +392,16 @@
            SLOT(slotRMB(Kleo::KeyListViewItem*,const QPoint&)) );
 
   setButtonText( KDialogBase::Default, i18n("&Reread Keys") );
-  connect( this, SIGNAL(defaultClicked()),
-           this, SLOT(slotRereadKeys()) );
+  setButtonGuiItem( KDialogBase::Help, i18n("&Start Certificate Manager") );
+  connect( this, SIGNAL(defaultClicked()), this, SLOT(slotRereadKeys()) );
+  connect( this, SIGNAL(helpClicked()), this, SLOT(slotStartCertificateManager()) );
 
   slotRereadKeys();
   mTopLayout->activate();
 
   if ( kapp ) {
     KWin::setIcons( winId(), kapp->icon(), kapp->miniIcon() );
-    QSize dialogSize( sizeHint() );
+    QSize dialogSize( 500, 400 );
 
     KConfigGroup dialogConfig( KGlobal::config(), "Key Selection Dialog" );
     dialogSize = dialogConfig.readSizeEntry( "Dialog size", &dialogSize );
@@ -493,6 +495,24 @@
   }
 }
 
+void Kleo::KeySelectionDialog::slotHelp()
+{
+    emit helpClicked();
+}
+
+void Kleo::KeySelectionDialog::slotStartCertificateManager()
+{
+  KProcess certManagerProc;
+  certManagerProc << "kleopatra";
+
+  if( !certManagerProc.start( KProcess::DontCare ) )
+    KMessageBox::error( this, i18n( "Could not start certificate manager; "
+                                    "please check your installation." ),
+                                    i18n( "Certificate Manager Error" ) );
+  else
+    kdDebug(5006) << "\nslotStartCertManager(): certificate manager started.\n" << endl;
+}
+
 #ifndef __KLEO_UI_SHOW_KEY_LIST_ERROR_H__
 #define __KLEO_UI_SHOW_KEY_LIST_ERROR_H__
 static void showKeyListError( QWidget * parent, const GpgME::Error & err ) {
Index: certmanager/lib/ui/keyselectiondialog.h
===================================================================
--- certmanager/lib/ui/keyselectiondialog.h	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ certmanager/lib/ui/keyselectiondialog.h	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
     keyselectiondialog.h
 
     This file is part of libkleopatra, the KDE keymanagement library
-    Copyright (c) 2004 Klarlvdalens Datakonsult AB
+    Copyright (c) 2004 Klarävdalens Datakonsult AB
 
     Based on kpgpui.h
     Copyright (C) 2001,2002 the KPGP authors
@@ -119,12 +119,17 @@
     QStringList smimeFingerprints() const;
 
     bool rememberSelection() const;
+  protected slots:
+    // reimplemented to avoid popping up the help, since we
+    // override the button
+    void slotHelp();
 
     // Could be used by derived classes to insert their own widget
     QVBoxLayout* topLayout() const { return mTopLayout; }
 
   private slots:
     void slotRereadKeys();
+    void slotStartCertificateManager();
     void slotKeyListResult( const GpgME::KeyListResult & );
     void slotSelectionChanged();
     void slotCheckSelection() { slotCheckSelection( 0 ); }
Index: certmanager/certmanager.cpp
===================================================================
--- certmanager/certmanager.cpp	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ certmanager/certmanager.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -200,7 +200,7 @@
            SLOT( slotDropped(const KURL::List&) ) );
 
   mLineEditAction->setText(query);
-  if ( !mRemote || !query.isEmpty() )
+  if ( !mRemote && !mNextFindRemote || !query.isEmpty() )
     slotSearch();
 
   if ( !import.isEmpty() )
Index: libkmime/kmime_util.cpp
===================================================================
--- libkmime/kmime_util.cpp	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkmime/kmime_util.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -195,8 +195,10 @@
           {
             str = KCodecs::base64Decode(str);
           }
-          for (i=0; str[i]; i++) {
-            *dest++ = str[i];
+          if (!str.isNull()) {
+            for (i=0; str[i]; i++) {
+              *dest++ = str[i];
+            }
           }
         }
 
@@ -235,6 +237,11 @@
   return codec->toUnicode(result.data(), result.length());
 }
 
+QString decodeRFC2047String(const QCString &src)
+{
+  const char *usedCS;
+  return decodeRFC2047String(src, &usedCS, "utf-8", false);
+}
 
 QCString encodeRFC2047String(const QString &src, const char *charset,
 			     bool addressHeader, bool allow8BitHeaders)
Index: libkmime/kmime_header_parsing.cpp
===================================================================
--- libkmime/kmime_header_parsing.cpp	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkmime/kmime_header_parsing.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -57,6 +57,7 @@
   QString AddrSpec::asString() const {
     bool needsQuotes = false;
     QString result;
+    result.reserve( localPart.length() + domain.length() + 1 );
     for ( unsigned int i = 0 ; i < localPart.length() ; ++i ) {
       const char ch = localPart[i].latin1();
       if ( ch == '.' || isAText( ch ) )
Index: libkmime/kmime_util.h
===================================================================
--- libkmime/kmime_util.h	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkmime/kmime_util.h	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -77,6 +77,13 @@
   extern QString decodeRFC2047String(const QCString &src, const char **usedCS,
 				     const QCString &defaultCS, bool forceCS) KDE_EXPORT;
 
+  /** Decode string @p src according to RFC2047 (ie. the
+      =?charset?[qb]?encoded?= construct).
+      @param src       source string.
+      @return the decoded string.
+  */
+  extern QString decodeRFC2047String(const QCString &src) KDE_EXPORT;
+
   /** Encode string @p src according to RFC2047 using charset
       @p charset.
       @param src           source string.
Index: karm/ktimewidget.h
===================================================================
--- karm/ktimewidget.h	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ karm/ktimewidget.h	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -14,7 +14,7 @@
 {
   public:
     KArmTimeWidget( QWidget* parent = 0, const char* name = 0 );
-    void setTime( int hour, int minute );
+    void setTime( long minutes );
     long time() const;
 
   private:
Index: karm/idletimedetector.cpp
===================================================================
--- karm/idletimedetector.cpp	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ karm/idletimedetector.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -10,15 +10,18 @@
 IdleTimeDetector::IdleTimeDetector(int maxIdle)
 // Trigger a warning after maxIdle minutes
 {
-  kdDebug(5970) << "IdleTimeDetector::IdleTimeDetector" << endl;
+  kdDebug(5970) << "Entering IdleTimeDetector::IdleTimeDetector" << endl;
   _maxIdle = maxIdle;
 
 #ifdef HAVE_LIBXSS
+  kdDebug(5970) << "IdleTimeDetector: LIBXSS detected @ compile time" << endl;
   int event_base, error_base;
-  if(XScreenSaverQueryExtension(qt_xdisplay(), &event_base, &error_base)) {
+  if(XScreenSaverQueryExtension(qt_xdisplay(), &event_base, &error_base)) 
+  {
     _idleDetectionPossible = true;
   }
-  else {
+  else 
+  {
     _idleDetectionPossible = false;
   }
 
@@ -43,9 +46,9 @@
   {
     _mit_info = XScreenSaverAllocInfo ();
     XScreenSaverQueryInfo(qt_xdisplay(), qt_xrootwin(), _mit_info);
-    int idleMinutes = (_mit_info->idle/1000)/secsPerMinute;
-    if (idleMinutes >= _maxIdle)
-      informOverrun(idleMinutes);
+    int idleSeconds = (_mit_info->idle/1000);
+    if (idleSeconds >= _maxIdle)
+      informOverrun(idleSeconds);
   }
 #endif // HAVE_LIBXSS
 }
@@ -56,38 +59,38 @@
 }
 
 #ifdef HAVE_LIBXSS
-void IdleTimeDetector::informOverrun(int idleMinutes)
+void IdleTimeDetector::informOverrun(int idleSeconds)
 {
+  kdDebug(5970) << "Entering IdleTimeDetector::informOverrun" << endl;
   if (!_overAllIdleDetect)
     return; // preferences say the user does not want idle detection.
 
   _timer->stop();
 
-  QDateTime start = QDateTime::currentDateTime();
-  QDateTime idleStart = start.addSecs(-60 * _maxIdle);
-  QString backThen = KGlobal::locale()->formatTime(idleStart.time());
+  QDateTime idleStart = QDateTime::currentDateTime().addSecs(-idleSeconds);
+  QString idleStartQString = KGlobal::locale()->formatTime(idleStart.time());
 
   int id =  QMessageBox::warning( 0, i18n("Idle Detection"),
                                      i18n("Desktop has been idle since %1."
-                                          " What should we do?").arg(backThen),
+                                          " What should we do?").arg(idleStartQString),
                                      i18n("Revert && Stop"),
                                      i18n("Revert && Continue"),
                                      i18n("Continue Timing"),0,2);
   QDateTime end = QDateTime::currentDateTime();
-  int diff = start.secsTo(end)/secsPerMinute;
+  int diff = idleStart.secsTo(end)/secsPerMinute;
 
   if (id == 0) 
   {
     // Revert And Stop
     kdDebug(5970) << "Now it is " << QDateTime::currentDateTime() << endl;
     kdDebug(5970) << "Reverting timer to " << KGlobal::locale()->formatTime(idleStart.time()).ascii() << endl;
-    emit(extractTime(idleMinutes+diff)); // we need to subtract the time that has been added during idleness.
+    emit(extractTime(idleSeconds/60+diff)); // we need to subtract the time that has been added during idleness.
     emit(stopAllTimersAt(idleStart));
   }
   else if (id == 1) 
   {
     // Revert and Continue
-    emit(extractTime(idleMinutes+diff));
+    emit(extractTime(idleSeconds/60+diff));
     _timer->start(testInterval);
   }
   else 
Index: karm/taskview.cpp
===================================================================
--- karm/taskview.cpp	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ karm/taskview.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -207,7 +207,8 @@
 
   setSelected(first_child(), true);
   setCurrentItem(first_child());
-  _desktopTracker->startTracking();
+  if ( _desktopTracker->startTracking() != QString() ) 
+    KMessageBox::error( 0, i18n("You are on a too high logical desktop, desktop tracking will not work") );
   _isloading = false;
   refresh();
 }
@@ -299,7 +300,8 @@
     setSelected(first_child(), true);
     setCurrentItem(first_child());
 
-    _desktopTracker->startTracking();
+    if ( _desktopTracker->startTracking() != QString() )
+      KMessageBox::error(0, i18n("You are on a too high logical desktop, desktop tracking will not work") );
   }
 }
 
Index: karm/ktimewidget.cpp
===================================================================
--- karm/ktimewidget.cpp	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ karm/ktimewidget.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -8,6 +8,7 @@
 #include <qwidget.h>
 
 #include <klocale.h>            // i18n
+#include <kglobal.h>
 #include "ktimewidget.h"
 
 enum ValidatorType { HOUR, MINUTE };
@@ -97,15 +98,19 @@
   setFocusProxy( _hourLE );
 }
 
-void KArmTimeWidget::setTime( int hour, int minute )
+void KArmTimeWidget::setTime( long minutes )
 {
   QString dummy;
+  long hourpart = labs(minutes) / 60;
+  long minutepart = labs(minutes) % 60;
 
-  dummy.setNum( hour );
+  dummy.setNum( hourpart );
+  if (minutes < 0)
+    dummy = KGlobal::locale()->negativeSign() + dummy;
   _hourLE->setText( dummy );
 
-  dummy.setNum( abs(minute) );
-  if (abs(minute) < 10 ) {
+  dummy.setNum( minutepart );
+  if (minutepart < 10 ) {
     dummy = QString::fromLatin1( "0" ) + dummy;
   }
   _minuteLE->setText( dummy );
@@ -113,12 +118,12 @@
 
 long KArmTimeWidget::time() const
 {
-  bool ok;
+  bool ok, isNegative;
   int h, m;
 
-  h = _hourLE->text().toInt( &ok );
+  h = abs(_hourLE->text().toInt( &ok ));
   m = _minuteLE->text().toInt( &ok );
+  isNegative = _hourLE->text().startsWith(KGlobal::locale()->negativeSign());
 
-  // if h is negative, we have to *subtract* m
-  return h * 60 + ( ( h < 0) ? -1 : 1 ) * m;
+  return (h * 60 + m) * ((isNegative) ? -1 : 1);
 }
Index: karm/task.cpp
===================================================================
--- karm/task.cpp	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ karm/task.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -62,13 +62,13 @@
 
   if (icons == 0) {
     icons = new QPtrVector<QPixmap>(8);
-    KIconLoader* kil = new KIconLoader("karm"); // always load icons from the KArm application
+    KIconLoader kil("karm"); // always load icons from the KArm application
     for (int i=0; i<8; i++)
     {
       QPixmap *icon = new QPixmap();
       QString name;
       name.sprintf("watch-%d.xpm",i);
-      *icon = kil->loadIcon( name, KIcon::User );
+      *icon = kil.loadIcon( name, KIcon::User );
       icons->insert(i,icon);
     }
   }
Index: karm/karm_part.desktop
===================================================================
--- karm/karm_part.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ karm/karm_part.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,5 +1,4 @@
 [Desktop Entry]
-Encoding=UTF-8
 Name=karmPart
 Name[cs]=karm komponenta
 Name[de]=KArm-Komponente
Index: karm/edittaskdialog.cpp
===================================================================
--- karm/edittaskdialog.cpp	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ karm/edittaskdialog.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -298,8 +298,8 @@
 {
   _name->setText( name );
   
-  _timeTW->setTime( time / 60, time % 60 );
-  _sessionTW->setTime( session / 60, session % 60 );
+  _timeTW->setTime( time );
+  _sessionTW->setTime( session );
   origTime = time;
   origSession = session;
 }
Index: karm/desktoptracker.h
===================================================================
--- karm/desktoptracker.h	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ karm/desktoptracker.h	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -11,7 +11,7 @@
 class QTimer;
 
 typedef std::vector<Task *> TaskVector;
-const int maxDesktops = 16;
+const int maxDesktops = 20;
 
 /** A utility to associate tasks with desktops
  *  As soon as a desktop is activated/left - an signal is emited for
@@ -25,7 +25,7 @@
   public:
     DesktopTracker();
     void printTrackers();
-    void startTracking();
+    QString startTracking();
     void registerForDesktops( Task* task, DesktopList dl );
     int desktopCount() const { return _desktopCount; };
 
Index: karm/uninstall.desktop
===================================================================
--- karm/uninstall.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ karm/uninstall.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,3 +1,2 @@
 [Desktop Entry]
-Encoding=UTF-8
 Hidden=true
Index: karm/karmutility.cpp
===================================================================
--- karm/karmutility.cpp	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ karm/karmutility.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -14,7 +14,9 @@
     time.sprintf("%.2f", minutes / 60.0);
     time.replace( '.', KGlobal::locale()->decimalSymbol() );
   }
-  else time.sprintf("%ld:%02ld", minutes / 60, labs(minutes % 60));
+  else time.sprintf("%s%ld:%02ld",
+    (minutes < 0) ? KGlobal::locale()->negativeSign().utf8().data() : "",
+    labs(minutes / 60), labs(minutes % 60));
   return time;
 }
 
Index: karm/desktoptracker.cpp
===================================================================
--- karm/desktoptracker.cpp	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ karm/desktoptracker.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -57,19 +57,25 @@
   // emit updateButtons();
 }
 
-void DesktopTracker::startTracking()
+QString DesktopTracker::startTracking()
 {
+  QString err;
   int currentDesktop = kWinModule.currentDesktop() -1;
   // TODO: removed? fixed by Lubos?
   // currentDesktop will return 0 if no window manager is started
   if ( currentDesktop < 0 ) currentDesktop = 0;
-
-  TaskVector &tv = desktopTracker[ currentDesktop ];
-  TaskVector::iterator tit = tv.begin();
-  while(tit!=tv.end()) {
-    emit reachedtActiveDesktop(*tit);
-    tit++;
+  if ( currentDesktop < maxDesktops )
+  {
+    TaskVector &tv = desktopTracker[ currentDesktop ];
+    TaskVector::iterator tit = tv.begin();
+    while(tit!=tv.end()) 
+    {
+      emit reachedtActiveDesktop(*tit);
+      tit++;
+    }
   }
+  else err="ETooHighDeskTopNumber";
+  return err;
 }
 
 void DesktopTracker::registerForDesktops( Task* task, DesktopList desktopList)
Index: karm/support/karm.desktop
===================================================================
--- karm/support/karm.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ karm/support/karm.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,5 +1,4 @@
 [Desktop Entry]
-Encoding=UTF-8
 Name=KArm
 Name[af]=Karm
 Name[hi]=के-आर्म
@@ -34,6 +33,7 @@
 GenericName[id]=Tracker Waktu Pribadi
 GenericName[is]=Fylgjast með í hvað tíminn fer
 GenericName[it]=Segnatempo personale
+GenericName[ka]=პერსონალური დროის აღმრიცხველი
 GenericName[kk]=Дербес уақыт қадағалағышы
 GenericName[km]=កម្មវិធី​តាមដាន​ពេលវេលា​ផ្ទាល់​ខ្លួន
 GenericName[ko]=일하는 시간을 잴 수 있습니다
Index: kdgantt/KDGanttViewTaskItem.h
===================================================================
--- kdgantt/KDGanttViewTaskItem.h	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kdgantt/KDGanttViewTaskItem.h	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -60,8 +60,10 @@
     void setStartTime( const QDateTime& start );
     void setEndTime( const QDateTime& end );
 
+protected:
+    void showItem( bool show = true, int coordY = 0 );
+
 private:
-    void showItem( bool show = true, int coordY = 0 );
     void initItem();
     void hideMe();
     QBrush myBrush, undefinedBrush;
Index: kdgantt/KDGanttViewSubwidgets.cpp
===================================================================
--- kdgantt/KDGanttViewSubwidgets.cpp	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kdgantt/KDGanttViewSubwidgets.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1252,7 +1252,7 @@
     computeTicks();
     // Since we have disconnected autoupdate of scrollbars, we must do it ourselves
     if (myGanttView && myGanttView->myCanvasView)
-        myGanttView->myCanvasView->updateScrollBars();
+        myGanttView->myCanvasView->updateHorScrollBar();
 }
 
 
Index: kdgantt/KDGanttView.h
===================================================================
--- kdgantt/KDGanttView.h	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kdgantt/KDGanttView.h	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -411,7 +411,7 @@
     void slotSelectionChanged( QListViewItem* item );
     void slotCurrentChanged ( QListViewItem * item );
     void slotItemRenamed ( QListViewItem * item, int col, const QString & text  );
-  void slotMouseButtonPressed (  int button, QListViewItem * item, const QPoint & pos, int c );
+    void slotMouseButtonPressed ( int button, QListViewItem * item, const QPoint & pos, int c );
     void slotmouseButtonClicked ( int button, QListViewItem * item, const QPoint & pos, int c );
     void slotcontextMenuRequested ( QListViewItem * item, const QPoint & pos, int col );
     void slotHeaderSizeChanged();
Index: kmail/snippet_widget.h
===================================================================
--- kmail/snippet_widget.h	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kmail/snippet_widget.h	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,95 +0,0 @@
-/***************************************************************************
- *   snippet feature from kdevelop/plugins/snippet/                        *
- *                                                                         * 
- *   Copyright (C) 2007 by Robert Gruber                                   *
- *   rgruber@users.sourceforge.net                                         *
- *                                                                         *
- *   This program is free software; you can redistribute it and/or modify  *
- *   it under the terms of the GNU General Public License as published by  *
- *   the Free Software Foundation; either version 2 of the License, or     *
- *   (at your option) any later version.                                   *
- *                                                                         *
- ***************************************************************************/
-#ifndef __SNIPPET_WIDGET_H__
-#define __SNIPPET_WIDGET_H__
-
-#include <qwidget.h>
-#include <qstring.h>
-#include <klistview.h>
-#include <qtooltip.h>
-#include <qrect.h>
-
-#include <ktexteditor/editinterface.h>
-#include <ktexteditor/view.h>
-#include "snippetconfig.h"
-
-class KDevProject;
-class SnippetPart;
-class QPushButton;
-class KListView;
-class QListViewItem;
-class QPoint;
-class SnippetDlg;
-class SnippetItem;
-class KTextEdit;
-class KConfig;
-class KMEdit;
-class KActionCollection;
-
-/**
-This is the widget which gets added to the right TreeToolView.
-It inherits KListView and QToolTip which is needed for showing the
-tooltips which contains the text of the snippet
-@author Robert Gruber
-*/
-class SnippetWidget : public KListView, public QToolTip
-{
-  Q_OBJECT
-
-public:
-    SnippetWidget(KMEdit* editor, KActionCollection* actionCollection, QWidget* parent = 0);
-    ~SnippetWidget();
-    QPtrList<SnippetItem> * getList() { return (&_list); }
-    void writeConfig();
-    SnippetConfig *  getSnippetConfig() { return (&_SnippetConfig); }
-
-
-private slots:
-    void initConfig();
-
-protected:
-    void maybeTip( const QPoint & );
-    bool acceptDrag (QDropEvent *event) const;
-
-private:
-    void insertIntoActiveView( const QString &text );
-    QString parseText(QString text, QString del="$");
-    bool showMultiVarDialog(QMap<QString, QString> * map, QMap<QString, QString> * mapSave,
-                            int & iWidth, int & iBasicHeight, int & iOneHeight);
-    QString showSingleVarDialog(QString var, QMap<QString, QString> * mapSave, QRect & dlgSize);
-    SnippetItem* makeItem( SnippetItem* parent, const QString& name, const QString& text, const KShortcut& shortcut );
-
-    QPtrList<SnippetItem> _list;
-    QMap<QString, QString> _mapSaved;
-    KConfig * _cfg;
-    SnippetConfig _SnippetConfig;
-    KMEdit* mEditor;
-    KActionCollection* mActionCollection;
-
-public slots:
-    void slotRemove();
-    void slotEdit( QListViewItem* item_ = 0 );
-    void slotEditGroup();
-    void slotAdd();
-    void slotAddGroup();
-    void slotExecute();
-
-protected slots:
-    void showPopupMenu( QListViewItem * item, const QPoint & p, int );
-    void slotExecuted(QListViewItem * item =  0);
-    void slotDropped(QDropEvent *e, QListViewItem *after);
-    void startDrag();
-};
-
-
-#endif
Index: kmail/snippet_widget.cpp
===================================================================
--- kmail/snippet_widget.cpp	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kmail/snippet_widget.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,957 +0,0 @@
-/***************************************************************************
- *   snippet feature from kdevelop/plugins/snippet/                        *
- *                                                                         * 
- *   Copyright (C) 2007 by Robert Gruber                                   *
- *   rgruber@users.sourceforge.net                                         *
- *                                                                         *
- *   This program is free software; you can redistribute it and/or modify  *
- *   it under the terms of the GNU General Public License as published by  *
- *   the Free Software Foundation; either version 2 of the License, or     *
- *   (at your option) any later version.                                   *
- *                                                                         *
- ***************************************************************************/
-
-#include <kurl.h>
-#include <kdebug.h>
-#include <klocale.h>
-#include <qlayout.h>
-#include <kpushbutton.h>
-#include <klistview.h>
-#include <qheader.h>
-#include <klineedit.h>
-#include <ktextedit.h>
-#include <kmessagebox.h>
-#include <kconfig.h>
-#include <qtooltip.h>
-#include <kpopupmenu.h>
-#include <qregexp.h>
-#include <qinputdialog.h>
-#include <qlabel.h>
-#include <qcheckbox.h>
-#include <qwhatsthis.h>
-#include <qdragobject.h>
-#include <qtimer.h>
-#include <kcombobox.h>
-#include <kmedit.h>
-#include <kiconloader.h>
-#include <kshortcut.h>
-#include <kaction.h>
-#include <kkeybutton.h>
-
-#include "snippetdlg.h"
-#include "snippetitem.h"
-#include "snippet_widget.h"
-
-#include <cassert>
-
-SnippetWidget::SnippetWidget(KMEdit* editor, KActionCollection* actionCollection, QWidget* parent)
-		: KListView(parent, "snippet widget"), QToolTip( viewport() ),
-		mEditor( editor ), mActionCollection( actionCollection )
-{
-    // init the QPtrList
-    _list.setAutoDelete(TRUE);
-
-    // init the KListView
-    setSorting( -1 );
-    addColumn( "" );
-    setFullWidth(true);
-    header()->hide();
-    setAcceptDrops(true);
-    setDragEnabled(true);
-    setDropVisualizer(false);
-    setRootIsDecorated(true);
-
-    //connect the signals
-    connect( this, SIGNAL( contextMenuRequested ( QListViewItem *, const QPoint & , int ) ),
-             this, SLOT( showPopupMenu(QListViewItem *, const QPoint & , int ) ) );
-
-    connect( this, SIGNAL( doubleClicked (QListViewItem *) ),
-             this, SLOT( slotEdit( QListViewItem *) ) );
-    connect( this, SIGNAL( returnPressed (QListViewItem *) ),
-             this, SLOT( slotExecuted( QListViewItem *) ) );
-
-    connect( this, SIGNAL( dropped(QDropEvent *, QListViewItem *) ),
-             this, SLOT( slotDropped(QDropEvent *, QListViewItem *) ) );
-
-    connect( editor, SIGNAL( insertSnippet() ), this, SLOT( slotExecute() ));
-
-    _cfg = 0;
-
-    QTimer::singleShot(0, this, SLOT(initConfig()));
-}
-
-SnippetWidget::~SnippetWidget()
-{
-  writeConfig();
-  delete _cfg;
-
-  /* We need to delete the child items before the parent items
-     otherwise KDevelop would crash on exiting */
-  SnippetItem * item;
-  while (_list.count() > 0) {
-    for (item=_list.first(); item; item=_list.next()) {
-      if (item->childCount() == 0)
-          _list.remove(item);
-    }
-  }
-}
-
-
-/*!
-    \fn SnippetWidget::slotAdd()
-    Opens the dialog to add a snippet
- */
-void SnippetWidget::slotAdd()
-{
-  //kdDebug(5006) << "Ender slotAdd()" << endl;
-  SnippetDlg dlg( mActionCollection, this, "SnippetDlg");
-
-  /*check if the user clicked a SnippetGroup
-    If not, we set the group variable to the SnippetGroup
-    which the selected item is a child of*/
-  SnippetGroup * group = dynamic_cast<SnippetGroup*>(selectedItem());
-  if ( !group && selectedItem() )
-    group = dynamic_cast<SnippetGroup*>(selectedItem()->parent());
-
-  /* still no group, let's make a default one */
-  if (!group ) {
-    if ( _list.isEmpty() ) {
-      group = new SnippetGroup(this, i18n("General"), SnippetGroup::getMaxId() );
-      _list.append( group );
-    } else {
-      group = dynamic_cast<SnippetGroup*>( _list.first() );
-    }
-  }
-  assert( group );
-
-  /*fill the combobox with the names of all SnippetGroup entries*/
-  for (SnippetItem *it=_list.first(); it; it=_list.next()) {
-    if (dynamic_cast<SnippetGroup*>(it)) {
-      dlg.cbGroup->insertItem(it->getName());
-    }
-  }
-  dlg.cbGroup->setCurrentText(group->getName());
-
-  if (dlg.exec() == QDialog::Accepted) {
-      group = dynamic_cast<SnippetGroup*>(SnippetItem::findItemByName(dlg.cbGroup->currentText(), _list));
-      _list.append( makeItem( group, dlg.snippetName->text(), dlg.snippetText->text(), dlg.keyButton->shortcut() ) );
-  }
-}
-
-/*!
-    \fn SnippetWidget::makeItem( SnippetItem* parent, const QString& name, const QString& text )
-    Helper factory method.
- */
-SnippetItem* SnippetWidget::makeItem( SnippetItem* parent, const QString& name, const QString& text, const KShortcut& shortcut )
-{
-    SnippetItem * item = new SnippetItem(parent, name, text);
-    const QString actionName = i18n("Snippet %1").arg(name);
-    const QString normalizedName = QString(actionName).replace(" ", "_");
-    if ( !mActionCollection->action(normalizedName.utf8() ) ) {
-        KAction * action = new KAction( actionName, shortcut, item,
-                                        SLOT( slotExecute() ), mActionCollection,
-                                        normalizedName.utf8() );
-        item->setAction(action);
-        connect( item, SIGNAL( execute( QListViewItem* ) ),
-                 this, SLOT( slotExecuted( QListViewItem* ) ) );
-    }
-    return item;
-}
-
-/*!
-    \fn SnippetWidget::slotAddGroup()
-    Opens the didalog to add a snippet
- */
-void SnippetWidget::slotAddGroup()
-{
-  //kdDebug(5006) << "Ender slotAddGroup()" << endl;
-  SnippetDlg dlg( mActionCollection, this, "SnippetDlg");
-  dlg.setShowShortcut( false );
-  dlg.snippetText->setEnabled(false);
-  dlg.snippetText->setText("GROUP");
-  dlg.setCaption(i18n("Add Group"));
-  dlg.cbGroup->insertItem(i18n("All"));
-  dlg.cbGroup->setCurrentText(i18n("All"));
-
-  if (dlg.exec() == QDialog::Accepted) {
-    _list.append( new SnippetGroup(this, dlg.snippetName->text(), SnippetGroup::getMaxId() ) );
-  }
-}
-
-
-/*!
-    \fn SnippetWidget::slotRemove()
-    Removes the selected snippet
- */
-void SnippetWidget::slotRemove()
-{
-  //get current data
-  QListViewItem * item = currentItem();
-  SnippetItem *snip = dynamic_cast<SnippetItem*>( item );
-  SnippetGroup *group = dynamic_cast<SnippetGroup*>( item );
-  if (!snip)
-    return;
-
-  if (group) {
-    if (group->childCount() > 0 &&
-        KMessageBox::warningContinueCancel(this, i18n("Do you really want to remove this group and all its snippets?"),QString::null,KStdGuiItem::del())
-        == KMessageBox::Cancel)
-      return;
-
-    SnippetItem *it=_list.first();
-    while ( it ) {
-      if (it->getParent() == group->getId()) {
-        SnippetItem *doomed = it;
-        it = _list.next();
-        //kdDebug(5006) << "remove " << doomed->getName() << endl;
-        _list.remove(doomed);
-      } else {
-        it = _list.next();
-      }
-    }
-  }
-
-  //kdDebug(5006) << "remove " << snip->getName() << endl;
-  _list.remove(snip);
-}
-
-
-
-/*!
-    \fn SnippetWidget::slotEdit()
-    Opens the dialog of editing the selected snippet
- */
-void SnippetWidget::slotEdit( QListViewItem* item )
-{
-    if( item == 0 ) {
-	item = currentItem();
-    }
-
-  SnippetGroup *pGroup = dynamic_cast<SnippetGroup*>(item);
-  SnippetItem *pSnippet = dynamic_cast<SnippetItem*>( item );
-  if (!pSnippet || pGroup) /*selected item must be a SnippetItem but MUST not be a SnippetGroup*/
-    return;
-
-  //init the dialog
-  SnippetDlg dlg( mActionCollection, this, "SnippetDlg");
-  dlg.snippetName->setText(pSnippet->getName());
-  dlg.snippetText->setText(pSnippet->getText());
-  dlg.keyButton->setShortcut( pSnippet->getAction()->shortcut(), false );
-  dlg.btnAdd->setText(i18n("&Apply"));
-
-  dlg.setCaption(i18n("Edit Snippet"));
-  /*fill the combobox with the names of all SnippetGroup entries*/
-  for (SnippetItem *it=_list.first(); it; it=_list.next()) {
-    if (dynamic_cast<SnippetGroup*>(it)) {
-      dlg.cbGroup->insertItem(it->getName());
-    }
-  }
-  dlg.cbGroup->setCurrentText(SnippetItem::findGroupById(pSnippet->getParent(), _list)->getName());
-
-  if (dlg.exec() == QDialog::Accepted) {
-    //update the KListView and the SnippetItem
-    item->setText( 0, dlg.snippetName->text() );
-    pSnippet->setName( dlg.snippetName->text() );
-    pSnippet->setText( dlg.snippetText->text() );
-    pSnippet->getAction()->setShortcut( dlg.keyButton->shortcut());
-
-    /* if the user changed the parent we need to move the snippet */
-    if ( SnippetItem::findGroupById(pSnippet->getParent(), _list)->getName() != dlg.cbGroup->currentText() ) {
-      SnippetGroup * newGroup = dynamic_cast<SnippetGroup*>(SnippetItem::findItemByName(dlg.cbGroup->currentText(), _list));
-      pSnippet->parent()->takeItem(pSnippet);
-      newGroup->insertItem(pSnippet);
-      pSnippet->resetParent();
-    }
-
-    setSelected(item, TRUE);
-  }
-}
-
-/*!
-    \fn SnippetWidget::slotEditGroup()
-    Opens the dialog of editing the selected snippet-group
- */
-void SnippetWidget::slotEditGroup()
-{
-  //get current data
-  QListViewItem * item = currentItem();
-
-  SnippetGroup *pGroup = dynamic_cast<SnippetGroup*>( item );
-  if (!pGroup) /*selected item MUST be a SnippetGroup*/
-    return;
-
-  //init the dialog
-  SnippetDlg dlg( mActionCollection, this, "SnippetDlg" );
-  dlg.setShowShortcut( false );
-  dlg.snippetName->setText(pGroup->getName());
-  dlg.snippetText->setText(pGroup->getText());
-  dlg.btnAdd->setText(i18n("&Apply"));
-  dlg.snippetText->setEnabled(FALSE);
-  dlg.setCaption(i18n("Edit Group"));
-  dlg.cbGroup->insertItem(i18n("All"));
-
-  if (dlg.exec() == QDialog::Accepted) {
-    //update the KListView and the SnippetGroup
-    item->setText( 0, dlg.snippetName->text() );
-    pGroup->setName( dlg.snippetName->text() );
-
-    setSelected(item, TRUE);
-  }
-}
-
-void SnippetWidget::slotExecuted(QListViewItem * item)
-{
-    if( item == 0 )
-    {
-	item = currentItem();
-    }
-
-  SnippetItem *pSnippet = dynamic_cast<SnippetItem*>( item );
-  if (!pSnippet || dynamic_cast<SnippetGroup*>(item))
-      return;
-
-  //process variables if any, then insert into the active view
-  insertIntoActiveView( parseText(pSnippet->getText(), _SnippetConfig.getDelimiter()) );
-}
-
-
-/*!
-    \fn SnippetWidget::insertIntoActiveView(QString text)
-    Inserts the parameter text into the activ view
- */
-void SnippetWidget::insertIntoActiveView( const QString &text )
-{
-    mEditor->insert( text );
-}
-
-
-/*!
-    \fn SnippetWidget::writeConfig()
-    Write the cofig file
- */
-void SnippetWidget::writeConfig()
-{
-  if( !_cfg )
-    return;
-  _cfg->deleteGroup("SnippetPart");  //this is neccessary otherwise delete entries will stay in list until
-                                     //they get overwritten by a more recent entry
-  _cfg->setGroup("SnippetPart");
-
-  QString strKeyName="";
-  QString strKeyText="";
-  QString strKeyId="";
-
-  int iSnipCount = 0;
-  int iGroupCount = 0;
-
-  SnippetItem* item=_list.first();
-  while ( item != 0) {
-
-    //kdDebug(5006) << "-->ERROR " << item->getName() << endl;
-    //kdDebug(5006) << "SnippetWidget::writeConfig() " << item->getName() << endl;
-    SnippetGroup * group = dynamic_cast<SnippetGroup*>(item);
-    if (group) {
-      //kdDebug(5006) << "-->GROUP " << item->getName() << group->getId() << " " << iGroupCount<< endl;
-      strKeyName=QString("snippetGroupName_%1").arg(iGroupCount);
-      strKeyId=QString("snippetGroupId_%1").arg(iGroupCount);
-
-      _cfg->writeEntry(strKeyName, group->getName());
-      _cfg->writeEntry(strKeyId, group->getId());
-
-      iGroupCount++;
-    } else if (dynamic_cast<SnippetItem*>(item)) {
-      //kdDebug(5006) << "-->ITEM " << item->getName() << item->getParent() << " " << iSnipCount << endl;
-      strKeyName=QString("snippetName_%1").arg(iSnipCount);
-      strKeyText=QString("snippetText_%1").arg(iSnipCount);
-      strKeyId=QString("snippetParent_%1").arg(iSnipCount);
-
-      _cfg->writeEntry(strKeyName, item->getName());
-      _cfg->writeEntry(strKeyText, item->getText());
-      _cfg->writeEntry(strKeyId, item->getParent());
-
-      KAction * action = item->getAction();
-      assert( action );
-      const KShortcut& sc = action->shortcut();
-      if (!sc.isNull() ) {
-          _cfg->writeEntry( QString("snippetShortcut_%1").arg(iSnipCount), sc.toString() );
-      }
-      iSnipCount++;
-    } else {
-      //kdDebug(5006) << "-->ERROR " << item->getName() << endl;
-    }
-    item = _list.next();
-  }
-  _cfg->writeEntry("snippetCount", iSnipCount);
-  _cfg->writeEntry("snippetGroupCount", iGroupCount);
-
-  int iCount = 1;
-  QMap<QString, QString>::Iterator it;
-  for ( it = _mapSaved.begin(); it != _mapSaved.end(); ++it ) {  //write the saved variable values
-    if (it.data().length()<=0) continue;  //is the saved value has no length -> no need to save it
-
-    strKeyName=QString("snippetSavedName_%1").arg(iCount);
-    strKeyText=QString("snippetSavedVal_%1").arg(iCount);
-
-    _cfg->writeEntry(strKeyName, it.key());
-    _cfg->writeEntry(strKeyText, it.data());
-
-    iCount++;
-  }
-  _cfg->writeEntry("snippetSavedCount", iCount-1);
-
-
-  _cfg->writeEntry( "snippetDelimiter", _SnippetConfig.getDelimiter() );
-  _cfg->writeEntry( "snippetVarInput", _SnippetConfig.getInputMethod() );
-  _cfg->writeEntry( "snippetToolTips", _SnippetConfig.useToolTips() );
-  _cfg->writeEntry( "snippetGroupAutoOpen", _SnippetConfig.getAutoOpenGroups() );
-
-  _cfg->writeEntry("snippetSingleRect", _SnippetConfig.getSingleRect() );
-  _cfg->writeEntry("snippetMultiRect", _SnippetConfig.getMultiRect() );
-
-  _cfg->sync();
-}
-
-/*!
-    \fn SnippetWidget::initConfig()
-    Initial read the cofig file
- */
-void SnippetWidget::initConfig()
-{
-  if (_cfg == NULL)
-    _cfg = new KConfig("kmailsnippetrc", false, false);
-
-  _cfg->setGroup("SnippetPart");
-
-  QString strKeyName="";
-  QString strKeyText="";
-  QString strKeyId="";
-  SnippetItem *item;
-  SnippetGroup *group;
-
-  //kdDebug(5006) << "SnippetWidget::initConfig() " << endl;
-
-  //if entry doesn't get found, this will return -1 which we will need a bit later
-  int iCount = _cfg->readNumEntry("snippetGroupCount", -1);
-
-  for ( int i=0; i<iCount; i++) {  //read the group-list
-    strKeyName=QString("snippetGroupName_%1").arg(i);
-    strKeyId=QString("snippetGroupId_%1").arg(i);
-
-    QString strNameVal="";
-    int iIdVal=-1;
-
-    strNameVal = _cfg->readEntry(strKeyName, "");
-    iIdVal = _cfg->readNumEntry(strKeyId, -1);
-    //kdDebug(5006) << "Read group "  << " " << iIdVal << endl;
-
-    if (strNameVal != "" && iIdVal != -1) {
-      group = new SnippetGroup(this, strNameVal, iIdVal);
-      //kdDebug(5006) << "Created group " << group->getName() << " " << group->getId() << endl;
-      _list.append(group);
-    }
-  }
-
-  /* Check if the snippetGroupCount property has been found
-     if iCount is -1 this means, that the user has his snippets
-     stored without groups. Therefore we will call the
-     initConfigOldVersion() function below */
-  // should not happen since this function has been removed
-
-  if (iCount != -1) {
-    iCount = _cfg->readNumEntry("snippetCount", 0);
-    for ( int i=0; i<iCount; i++) {  //read the snippet-list
-        strKeyName=QString("snippetName_%1").arg(i);
-        strKeyText=QString("snippetText_%1").arg(i);
-        strKeyId=QString("snippetParent_%1").arg(i);
-
-        QString strNameVal="";
-        QString strTextVal="";
-        int iParentVal = -1;
-
-        strNameVal = _cfg->readEntry(strKeyName, "");
-        strTextVal = _cfg->readEntry(strKeyText, "");
-        iParentVal = _cfg->readNumEntry(strKeyId, -1);
-        //kdDebug(5006) << "Read item " << strNameVal << " " << iParentVal << endl;
-
-        if (strNameVal != "" && strTextVal != "" && iParentVal != -1) {
-            KShortcut shortcut( _cfg->readEntry( QString("snippetShortcut_%1").arg(i), QString() ) );
-            item = makeItem( SnippetItem::findGroupById(iParentVal, _list), strNameVal, strTextVal, shortcut );
-            //kdDebug(5006) << "Created item " << item->getName() << " " << item->getParent() << endl;
-            _list.append(item);
-        }
-    }
-  } else {
-      //kdDebug() << "iCount is not -1";
-  }
-
-  iCount = _cfg->readNumEntry("snippetSavedCount", 0);
-
-  for ( int i=1; i<=iCount; i++) {  //read the saved-values and store in QMap
-    strKeyName=QString("snippetSavedName_%1").arg(i);
-    strKeyText=QString("snippetSavedVal_%1").arg(i);
-
-    QString strNameVal="";
-    QString strTextVal="";
-
-    strNameVal = _cfg->readEntry(strKeyName, "");
-    strTextVal = _cfg->readEntry(strKeyText, "");
-
-    if (strNameVal != "" && strTextVal != "") {
-      _mapSaved[strNameVal] = strTextVal;
-    }
-  }
-
-
-  _SnippetConfig.setDelimiter( _cfg->readEntry("snippetDelimiter", "$") );
-  _SnippetConfig.setInputMethod( _cfg->readNumEntry("snippetVarInput", 0) );
-  _SnippetConfig.setToolTips( _cfg->readBoolEntry("snippetToolTips", true) );
-  _SnippetConfig.setAutoOpenGroups( _cfg->readNumEntry("snippetGroupAutoOpen", 1) );
-
-  _SnippetConfig.setSingleRect( _cfg->readRectEntry("snippetSingleRect", 0L) );
-  _SnippetConfig.setMultiRect( _cfg->readRectEntry("snippetMultiRect", 0L) );
-}
-
-/*!
-    \fn SnippetWidget::maybeTip( const QPoint & p )
-    Shows the Snippet-Text as ToolTip
- */
-void SnippetWidget::maybeTip( const QPoint & p )
-{
-	SnippetItem * item = dynamic_cast<SnippetItem*>( itemAt( p ) );
-	if (!item)
-	  return;
-
-	QRect r = itemRect( item );
-
-	if (r.isValid() &&
-        _SnippetConfig.useToolTips() )
-	{
-	    tip( r, item->getText() );  //show the snippet's text
-	}
-}
-
-/*!
-    \fn SnippetWidget::showPopupMenu( QListViewItem * item, const QPoint & p, int )
-    Shows the Popup-Menu depending item is a valid pointer
-*/
-void SnippetWidget::showPopupMenu( QListViewItem * item, const QPoint & p, int )
-{
-    KPopupMenu popup;
-
-    SnippetItem * selectedItem = static_cast<SnippetItem *>(item);
-    if ( item ) {
-        popup.insertTitle( selectedItem->getName() );
-        if (dynamic_cast<SnippetGroup*>(item)) {
-            popup.insertItem( i18n("Edit &group..."), this, SLOT( slotEditGroup() ) );
-        } else {
-            popup.insertItem( SmallIconSet("editpaste"), i18n("&Paste"), this, SLOT( slotExecuted() ) );
-            popup.insertItem( SmallIconSet("edit"), i18n("&Edit..."), this, SLOT( slotEdit() ) );
-        }
-        popup.insertItem( SmallIconSet("editdelete"), i18n("&Remove"), this, SLOT( slotRemove() ) );
-        popup.insertSeparator();
-    } else {
-        popup.insertTitle(i18n("Text Snippets"));
-    }
-    popup.insertItem( i18n("&Add Snippet..."), this, SLOT( slotAdd() ) );
-    popup.insertItem( i18n("Add G&roup..."), this, SLOT( slotAddGroup() ) );
-
-    popup.exec(p);
-}
-
-
-//  fn SnippetWidget::parseText(QString text, QString del)
-/*!
-    This function is used to parse the given QString for variables. If found the user will be prompted
-    for a replacement value. It returns the string text with all replacements made
- */
-QString SnippetWidget::parseText(QString text, QString del)
-{
-  QString str = text;
-  QString strName = "";
-  QString strNew = "";
-  QString strMsg="";
-  int iFound = -1;
-  int iEnd = -1;
-  QMap<QString, QString> mapVar;
-  int iInMeth = _SnippetConfig.getInputMethod();
-  QRect rSingle = _SnippetConfig.getSingleRect();
-  QRect rMulti = _SnippetConfig.getMultiRect();
-
-  do {
-    iFound = text.find(QRegExp("\\"+del+"[A-Za-z-_0-9\\s]*\\"+del), iEnd+1);  //find the next variable by this QRegExp
-    if (iFound >= 0) {
-      iEnd = text.find(del, iFound+1)+1;
-      strName = text.mid(iFound, iEnd-iFound);
-
-      if ( strName != del+del  ) {  //if not doubel-delimiter
-        if (iInMeth == 0) { //if input-method "single" is selected
-          if ( mapVar[strName].length() <= 0 ) {  // and not already in map
-            strMsg=i18n("Please enter the value for <b>%1</b>:").arg(strName);
-            strNew = showSingleVarDialog( strName, &_mapSaved, rSingle );
-            if (strNew=="")
-              return ""; //user clicked Cancle
-          } else {
-            continue; //we have already handled this variable
-          }
-        } else {
-          strNew = ""; //for inputmode "multi" just reset new valaue
-        }
-      } else {
-        strNew = del; //if double-delimiter -> replace by single character
-      }
-
-      if (iInMeth == 0) {  //if input-method "single" is selected
-        str.replace(strName, strNew);
-      }
-
-      mapVar[strName] = strNew;
-    }
-  } while (iFound != -1);
-
-  if (iInMeth == 1) {  //check config, if input-method "multi" is selected
-    int w, bh, oh;
-    w = rMulti.width();
-    bh = rMulti.height();
-    oh = rMulti.top();
-    if (showMultiVarDialog( &mapVar, &_mapSaved, w, bh, oh )) {  //generate and show the dialog
-      QMap<QString, QString>::Iterator it;
-      for ( it = mapVar.begin(); it != mapVar.end(); ++it ) {  //walk through the map and do the replacement
-        str.replace(it.key(), it.data());
-      }
-    } else {
-      return "";
-    }
-
-    rMulti.setWidth(w);   //this is a hack to save the dialog's dimensions in only one QRect
-    rMulti.setHeight(bh);
-    rMulti.setTop(oh);
-    rMulti.setLeft(0);
-     _SnippetConfig.setMultiRect(rMulti);
-  }
-
-  _SnippetConfig.setSingleRect(rSingle);
-
-  return str;
-}
-
-
-//  fn SnippetWidget::showMultiVarDialog()
-/*!
-    This function constructs a dialog which contains a label and a linedit for every
-    variable that is stored in the given map except the double-delimiter entry
-    It return true if everything was ok and false if the user hit cancel
- */
-bool SnippetWidget::showMultiVarDialog(QMap<QString, QString> * map, QMap<QString, QString> * mapSave,
-                                       int & iWidth, int & iBasicHeight, int & iOneHeight)
-{
-  //if no var -> no need to show
-  if (map->count() == 0)
-    return true;
-
-  //if only var is the double-delimiter -> no need to show
-  QMap<QString, QString>::Iterator it = map->begin();
-  if ( map->count() == 1 && it.data()==_SnippetConfig.getDelimiter()+_SnippetConfig.getDelimiter() )
-    return true;
-
-  QMap<QString, KTextEdit *> mapVar2Te;  //this map will help keeping track which TEXTEDIT goes with which variable
-  QMap<QString, QCheckBox *> mapVar2Cb;  //this map will help keeping track which CHECKBOX goes with which variable
-
-  // --BEGIN-- building a dynamic dialog
-  QDialog dlg(this);
-  dlg.setCaption(i18n("Enter Values for Variables"));
-
-  QGridLayout * layout = new QGridLayout( &dlg, 1, 1, 11, 6, "layout");
-  QGridLayout * layoutTop = new QGridLayout( 0, 1, 1, 0, 6, "layoutTop");
-  QGridLayout * layoutVar = new QGridLayout( 0, 1, 1, 0, 6, "layoutVar");
-  QGridLayout * layoutBtn = new QGridLayout( 0, 1, 1, 0, 6, "layoutBtn");
-
-  KTextEdit *te = NULL;
-  QLabel * labTop = NULL;
-  QCheckBox * cb = NULL;
-
-  labTop = new QLabel( &dlg, "label" );
-  labTop->setSizePolicy( QSizePolicy( (QSizePolicy::SizeType)1, (QSizePolicy::SizeType)0, 0, 0,
-                         labTop->sizePolicy().hasHeightForWidth() ) );
-  labTop->setText(i18n("Enter the replacement values for these variables:"));
-  layoutTop->addWidget(labTop, 0, 0);
-  layout->addMultiCellLayout( layoutTop, 0, 0, 0, 1 );
-
-
-  int i = 0;                                           //walk through the variable map and add
-  for ( it = map->begin(); it != map->end(); ++it ) {  //a checkbox, a lable and a lineedit to the main layout
-    if (it.key() == _SnippetConfig.getDelimiter() + _SnippetConfig.getDelimiter())
-      continue;
-
-    cb = new QCheckBox( &dlg, "cbVar" );
-    cb->setChecked( FALSE );
-    cb->setText(it.key());
-    layoutVar->addWidget( cb, i ,0, Qt::AlignTop );
-
-    te = new KTextEdit( &dlg, "teVar" );
-    layoutVar->addWidget( te, i, 1, Qt::AlignTop );
-
-    if ((*mapSave)[it.key()].length() > 0) {
-      cb->setChecked( TRUE );
-      te->setText((*mapSave)[it.key()]);
-    }
-
-    mapVar2Te[it.key()] = te;
-    mapVar2Cb[it.key()] = cb;
-
-    QToolTip::add( cb, i18n("Enable this to save the value entered to the right as the default value for this variable") );
-    QWhatsThis::add( cb, i18n("If you enable this option, the value entered to the right will be saved. "
-                              "If you use the same variable later, even in another snippet, the value entered to the right "
-			      "will be the default value for that variable.") );
-
-    i++;
-  }
-  layout->addMultiCellLayout( layoutVar, 1, 1, 0, 1 );
-
-  KPushButton * btn1 = new KPushButton( KStdGuiItem::cancel(), &dlg, "pushButton1" );
-  btn1->setSizePolicy( QSizePolicy( (QSizePolicy::SizeType)1, (QSizePolicy::SizeType)0, 0, 0,
-                         btn1->sizePolicy().hasHeightForWidth() ) );
-  layoutBtn->addWidget( btn1, 0, 0 );
-
-  KPushButton * btn2 = new KPushButton( KStdGuiItem::apply(), &dlg, "pushButton2" );
-  btn2->setDefault( TRUE );
-  btn2->setSizePolicy( QSizePolicy( (QSizePolicy::SizeType)1, (QSizePolicy::SizeType)0, 0, 0,
-                         btn2->sizePolicy().hasHeightForWidth() ) );
-  layoutBtn->addWidget( btn2, 0, 1 );
-
-  layout->addMultiCellLayout( layoutBtn, 2, 2, 0, 1 );
-  // --END-- building a dynamic dialog
-
-  //connect the buttons to the QDialog default slots
-  connect(btn1, SIGNAL(clicked()), &dlg, SLOT(reject()) );
-  connect(btn2, SIGNAL(clicked()), &dlg, SLOT(accept()) );
-
-  //prepare to execute the dialog
-  bool bReturn = false;
-  //resize the textedits
-  if (iWidth > 1) {
-    QRect r = dlg.geometry();
-    r.setHeight(iBasicHeight + iOneHeight*mapVar2Te.count());
-    r.setWidth(iWidth);
-    dlg.setGeometry(r);
-  }
-  if ( i > 0 && // only if there are any variables
-    dlg.exec() == QDialog::Accepted ) {
-
-    QMap<QString, KTextEdit *>::Iterator it2;
-    for ( it2 = mapVar2Te.begin(); it2 != mapVar2Te.end(); ++it2 ) {
-      if (it2.key() == _SnippetConfig.getDelimiter() + _SnippetConfig.getDelimiter())
-        continue;
-      (*map)[it2.key()] = it2.data()->text();    //copy the entered values back to the given map
-
-      if (mapVar2Cb[it2.key()]->isChecked())     //if the checkbox is on; save the values for later
-        (*mapSave)[it2.key()] = it2.data()->text();
-      else
-        (*mapSave).erase(it2.key());
-    }
-    bReturn = true;
-
-    iBasicHeight = dlg.geometry().height() - layoutVar->geometry().height();
-    iOneHeight = layoutVar->geometry().height() / mapVar2Te.count();
-    iWidth = dlg.geometry().width();
-  }
-
-  //do some cleanup
-  QMap<QString, KTextEdit *>::Iterator it1;
-  for (it1 = mapVar2Te.begin(); it1 != mapVar2Te.end(); ++it1)
-    delete it1.data();
-  mapVar2Te.clear();
-  QMap<QString, QCheckBox *>::Iterator it2;
-  for (it2 = mapVar2Cb.begin(); it2 != mapVar2Cb.end(); ++it2)
-    delete it2.data();
-  mapVar2Cb.clear();
-  delete layoutTop;
-  delete layoutVar;
-  delete layoutBtn;
-  delete layout;
-
-  if (i==0) //if nothing happened this means, that there are no variables to translate
-    return true; //.. so just return OK
-
-  return bReturn;
-//  return true;
-}
-
-
-//  fn SnippetWidget::showSingleVarDialog(QString var, QMap<QString, QString> * mapSave)
-/*!
-    This function constructs a dialog which contains a label and a linedit for the given variable
-    It return either the entered value or an empty string if the user hit cancel
- */
-QString SnippetWidget::showSingleVarDialog(QString var, QMap<QString, QString> * mapSave, QRect & dlgSize)
-{
-  // --BEGIN-- building a dynamic dialog
-  QDialog dlg(this);
-  dlg.setCaption(i18n("Enter Values for Variables"));
-
-  QGridLayout * layout = new QGridLayout( &dlg, 1, 1, 11, 6, "layout");
-  QGridLayout * layoutTop = new QGridLayout( 0, 1, 1, 0, 6, "layoutTop");
-  QGridLayout * layoutVar = new QGridLayout( 0, 1, 1, 0, 6, "layoutVar");
-  QGridLayout * layoutBtn = new QGridLayout( 0, 2, 1, 0, 6, "layoutBtn");
-
-  KTextEdit *te = NULL;
-  QLabel * labTop = NULL;
-  QCheckBox * cb = NULL;
-
-  labTop = new QLabel( &dlg, "label" );
-  layoutTop->addWidget(labTop, 0, 0);
-  labTop->setText(i18n("Enter the replacement values for %1:").arg( var ));
-  layout->addMultiCellLayout( layoutTop, 0, 0, 0, 1 );
-
-
-  cb = new QCheckBox( &dlg, "cbVar" );
-  cb->setChecked( FALSE );
-  cb->setText(i18n( "Make value &default" ));
-
-  te = new KTextEdit( &dlg, "teVar" );
-  layoutVar->addWidget( te, 0, 1, Qt::AlignTop);
-  layoutVar->addWidget( cb, 1, 1, Qt::AlignTop);
-  if ((*mapSave)[var].length() > 0) {
-    cb->setChecked( TRUE );
-    te->setText((*mapSave)[var]);
-  }
-
-  QToolTip::add( cb, i18n("Enable this to save the value entered to the right as the default value for this variable") );
-  QWhatsThis::add( cb, i18n("If you enable this option, the value entered to the right will be saved. "
-                            "If you use the same variable later, even in another snippet, the value entered to the right "
-                            "will be the default value for that variable.") );
-
-  layout->addMultiCellLayout( layoutVar, 1, 1, 0, 1 );
-
-  KPushButton * btn1 = new KPushButton( KStdGuiItem::cancel(), &dlg, "pushButton1" );
-  layoutBtn->addWidget( btn1, 0, 0 );
-
-  KPushButton * btn2 = new KPushButton( KStdGuiItem::apply(), &dlg, "pushButton2" );
-  btn2->setDefault( TRUE );
-  layoutBtn->addWidget( btn2, 0, 1 );
-
-  layout->addMultiCellLayout( layoutBtn, 2, 2, 0, 1 );
-  te->setFocus();
-  // --END-- building a dynamic dialog
-
-  //connect the buttons to the QDialog default slots
-  connect(btn1, SIGNAL(clicked()), &dlg, SLOT(reject()) );
-  connect(btn2, SIGNAL(clicked()), &dlg, SLOT(accept()) );
-
-  //execute the dialog
-  QString strReturn = "";
-  if (dlgSize.isValid())
-    dlg.setGeometry(dlgSize);
-  if ( dlg.exec() == QDialog::Accepted ) {
-    if (cb->isChecked())     //if the checkbox is on; save the values for later
-      (*mapSave)[var] = te->text();
-    else
-      (*mapSave).erase(var);
-
-    strReturn = te->text();    //copy the entered values back the the given map
-
-    dlgSize = dlg.geometry();
-  }
-
-  //do some cleanup
-  delete cb;
-  delete te;
-  delete labTop;
-  delete btn1;
-  delete btn2;
-  delete layoutTop;
-  delete layoutVar;
-  delete layoutBtn;
-  delete layout;
-
-  return strReturn;
-}
-
-//  fn SnippetWidget::acceptDrag (QDropEvent *event) const
-/*!
-    Reimplementation from KListView.
-    Check here if the data the user is about to drop fits our restrictions.
-    We only accept dropps of plaintext, because from the dropped text
-    we will create a snippet.
- */
-bool SnippetWidget::acceptDrag (QDropEvent *event) const
-{
-  //kdDebug(5006) << "Format: " << event->format() << "" << event->pos() << endl;
-
-  QListViewItem * item = itemAt(event->pos());
-
-  if (item &&
-      QString(event->format()).startsWith("text/plain") &&
-      static_cast<SnippetWidget *>(event->source()) != this) {
-    ///kdDebug(5006) << "returning TRUE " << endl;
-    return TRUE;
-  } else if(item &&
-      QString(event->format()).startsWith("x-kmailsnippet") &&
-      static_cast<SnippetWidget *>(event->source()) != this)
-  {
-    //kdDebug(5006) << "returning TRUE " << endl;
-    return TRUE;
-  } else {
-    //kdDebug(5006) << "returning FALSE" << endl;
-    event->acceptAction(FALSE);
-    return FALSE;
-  }
-}
-
-//  fn SnippetWidget::slotDropped(QDropEvent *e, QListViewItem *after)
-/*!
-    This slot is connected to the dropped signal.
-    If it is emitted, we need to construct a new snippet entry with
-    the data given
- */
-void SnippetWidget::slotDropped(QDropEvent *e, QListViewItem *)
-{
-  QListViewItem * item2 = itemAt(e->pos());
-
-  SnippetGroup *group = dynamic_cast<SnippetGroup *>(item2);
-  if (!group)
-    group = dynamic_cast<SnippetGroup *>(item2->parent());
-
-  QCString dropped;
-  QByteArray data = e->encodedData("text/plain");
-  if ( e->provides("text/plain") && data.size()>0 ) {
-    //get the data from the event...
-    QString encData(data.data());
-    //kdDebug(5006) << "encData: " << encData << endl;
-
-    //... then fill the dialog with the given data
-    SnippetDlg dlg( mActionCollection, this, "SnippetDlg" );
-    dlg.snippetName->clear();
-    dlg.snippetText->setText(encData);
-
-    /*fill the combobox with the names of all SnippetGroup entries*/
-    for (SnippetItem *it=_list.first(); it; it=_list.next()) {
-      if (dynamic_cast<SnippetGroup*>(it)) {
-        dlg.cbGroup->insertItem(it->getName());
-      }
-    }
-    dlg.cbGroup->setCurrentText(group->getName());
-
-    if (dlg.exec() == QDialog::Accepted) {
-      /* get the group that the user selected with the combobox */
-      group = dynamic_cast<SnippetGroup*>(SnippetItem::findItemByName(dlg.cbGroup->currentText(), _list));
-      _list.append( makeItem(group, dlg.snippetName->text(), dlg.snippetText->text(), dlg.keyButton->shortcut() ) );
-    }
-  }
-}
-
-void SnippetWidget::startDrag()
-{
-    QString text = dynamic_cast<SnippetItem*>( currentItem() )->getText();
-    QTextDrag *drag = new QTextDrag(text, this);
-    drag->setSubtype("x-textsnippet");
-    drag->drag();
-}
-
-void SnippetWidget::slotExecute()
-{
-    slotExecuted(currentItem());
-}
-
-
-#include "snippet_widget.moc"
-
Index: kmail/searchwindow.h
===================================================================
--- kmail/searchwindow.h	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kmail/searchwindow.h	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -25,6 +25,7 @@
 #include <qptrlist.h>
 #include <qstringlist.h>
 #include <qguardedptr.h>
+#include <qtimer.h>
 
 #include <kdialogbase.h>
 #include <kxmlguiclient.h>
@@ -108,11 +109,13 @@
   virtual void slotClose();
   virtual void slotSearch();
   virtual void slotStop();
-  void updateCreateButton( const QString &);
+  void scheduleRename( const QString &);
   void renameSearchFolder();
   void openSearchFolder();
   void folderInvalidated(KMFolder *);
   virtual bool slotShowMsg(QListViewItem *);
+  void slotShowSelectedMsg();
+  void slotCurrentChanged(QListViewItem *);
   virtual void updateContextMenuActions();
   virtual void slotContextMenuRequested( QListViewItem*, const QPoint &, int );
   virtual void copySelectedToFolder( int menuId );
@@ -167,8 +170,8 @@
   KListView* mLbxMatches;
   QLabel *mSearchFolderLbl;
   QLineEdit *mSearchFolderEdt;
-  QPushButton *mSearchFolderBtn;
   QPushButton *mSearchFolderOpenBtn;
+  QPushButton *mSearchResultOpenBtn;
   KStatusBar* mStatusBar;
   QWidget* mLastFocus; // to remember the position of the focus
   QMap<int,KMFolder*> mMenuToFolder;
@@ -178,6 +181,7 @@
     *mCopyAction, *mCutAction;
   KActionMenu *mForwardActionMenu;
   QValueList<QGuardedPtr<KMFolder> > mFolders;
+  QTimer mRenameTimer;
 
   // not owned by us
   KMMainWidget* mKMMainWidget;
Index: kmail/sievejob.cpp
===================================================================
--- kmail/sievejob.cpp	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kmail/sievejob.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -37,12 +37,26 @@
 		      QObject * parent, const char * name )
     : QObject( parent, name ),
       mUrl( url ), mJob( 0 ), mDec( 0 ),
-      mScript( script ), mFileExists( DontKnow ), mCommands( commands )
+      mScript( script ), mFileExists( DontKnow ), mCommands( commands ),
+      mShowProgressInfo(true)
   {
     assert( !commands.isEmpty() );
-    schedule( commands.top() );
+    schedule( commands.top(), true );
   }
 
+  SieveJob::SieveJob( const KURL & url, const QString & script,
+		      const QValueStack<Command> & commands,
+                      bool showProgressInfo,
+		      QObject * parent, const char * name )
+    : QObject( parent, name ),
+      mUrl( url ), mJob( 0 ), mDec( 0 ),
+      mScript( script ), mFileExists( DontKnow ), mCommands( commands ),
+      mShowProgressInfo(showProgressInfo)
+  {
+    assert( !commands.isEmpty() );
+    schedule( commands.top(), showProgressInfo );
+  }
+
   SieveJob::~SieveJob() {
     kill();
     delete mDec;
@@ -53,17 +67,17 @@
     if ( mJob ) mJob->kill( quiet );
   }
 
-  void SieveJob::schedule( Command command ) {
+  void SieveJob::schedule( Command command, bool showProgressInfo ) {
     switch ( command ) {
     case Get:
       kdDebug(5006) << "SieveJob::schedule: get( " << mUrl.prettyURL() << " )" << endl;
-      mJob = KIO::get( mUrl );
+      mJob = KIO::get( mUrl, false /*reload*/, showProgressInfo );
       connect( mJob, SIGNAL(data(KIO::Job*,const QByteArray&)),
 	       SLOT(slotData(KIO::Job*,const QByteArray&)) );
       break;
     case Put:
       kdDebug(5006) << "SieveJob::schedule: put( " << mUrl.prettyURL() << " )" << endl;
-      mJob = KIO::put( mUrl, 0600, true /*overwrite*/, false /*resume*/ );
+      mJob = KIO::put( mUrl, 0600, true /*overwrite*/, false /*resume*/, showProgressInfo );
       connect( mJob, SIGNAL(dataReq(KIO::Job*,QByteArray&)),
 	       SLOT(slotDataReq(KIO::Job*,QByteArray&)) );
       break;
@@ -87,7 +101,7 @@
 	url.setQuery( query );
 	kdDebug(5006) << "SieveJob::schedule: listDir's real URL: " << url.prettyURL()
 		  << endl;
-	mJob = KIO::listDir( url );
+	mJob = KIO::listDir( url, showProgressInfo );
 	connect( mJob, SIGNAL(entries(KIO::Job*,const KIO::UDSEntryList&)),
 		 SLOT(slotEntries(KIO::Job*,const KIO::UDSEntryList&)) );
 	break;
@@ -95,18 +109,19 @@
     case List:
       kdDebug(5006) << "SieveJob::schedule: listDir( " << mUrl.prettyURL() << " )" << endl;
       {
-	mJob = KIO::listDir( mUrl );
+	mJob = KIO::listDir( mUrl, showProgressInfo );
 	connect( mJob, SIGNAL( entries(KIO::Job *, const KIO::UDSEntryList & ) ),
 		 SLOT( slotEntries( KIO::Job *, const KIO::UDSEntryList & ) ) );
 	break;
       }
     case Delete:
       kdDebug(5006) << "SieveJob::schedule: delete( " << mUrl.prettyURL() << " )" << endl;
-      mJob = KIO::del( mUrl );
+      mJob = KIO::del( mUrl, false/*shred*/, showProgressInfo );
       break;
     default:
       assert( 0 );
     }
+    mJob->setInteractive(showProgressInfo);
     // common to all jobs:
     connect( mJob, SIGNAL(result(KIO::Job*)), SLOT(slotResult(KIO::Job*)) );
   }
@@ -189,7 +204,9 @@
 
     // check for errors:
     if ( job->error() ) {
-      job->showErrorDialog( 0 );
+      if ( job->isInteractive() ) {
+        job->showErrorDialog( 0 );
+      }
 
       emit result( this, false, mScript, mUrl.fileName() == mActiveScriptName );
 
@@ -225,7 +242,7 @@
       return;
     } else {
       // schedule the next command:
-      schedule( mCommands.top() );
+      schedule( mCommands.top(), mShowProgressInfo );
     }
   }
 
@@ -240,11 +257,11 @@
     return new SieveJob( dest, script, commands );
   }
 
-  SieveJob * SieveJob::get( const KURL & src ) {
+  SieveJob * SieveJob::get( const KURL & src, bool showProgressInfo ) {
     QValueStack<Command> commands;
     commands.push( Get );
     commands.push( SearchActive );
-    return new SieveJob( src, QString::null, commands );
+    return new SieveJob( src, QString::null, commands, showProgressInfo );
   }
 
   SieveJob * SieveJob::list( const KURL & src ) {
Index: kmail/kmmainwin.cpp
===================================================================
--- kmail/kmmainwin.cpp	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kmail/kmmainwin.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -40,7 +40,7 @@
 		      actionCollection(), "new_mail_client" );
 
   mKMMainWidget = new KMMainWidget( this, "KMMainWidget", this, actionCollection() );
-  mKMMainWidget->resize( 450, 600 );
+  mKMMainWidget->resize( 725, 700 );
   setCentralWidget(mKMMainWidget);
   setupStatusBar();
   if (kmkernel->xmlGuiInstance())
Index: kmail/kmailicalifaceimpl.cpp
===================================================================
--- kmail/kmailicalifaceimpl.cpp	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kmail/kmailicalifaceimpl.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1301,7 +1301,8 @@
 
     // French
     folderNames[2][KFolderTreeItem::Calendar] = QString::fromLatin1("Calendrier");
-    folderNames[2][KFolderTreeItem::Tasks] = QString::fromLatin1("Tâches");
+    // Tasks = Tâches (â == 0xE2 in latin1)
+    folderNames[2][KFolderTreeItem::Tasks] = QString::fromLatin1("T\342ches");
     folderNames[2][KFolderTreeItem::Journals] = QString::fromLatin1("Journal");
     folderNames[2][KFolderTreeItem::Contacts] = QString::fromLatin1("Contacts");
     folderNames[2][KFolderTreeItem::Notes] = QString::fromLatin1("Notes");
@@ -1394,7 +1395,7 @@
     // Notify that the old folder resource is no longer available
     subresourceDeleted(folderContentsType( folder->storage()->contentsType() ), location );
 
-    if ( contentsType == 0 ) {
+    if ( contentsType == KMail::ContentsTypeMail ) {
       // Delete the old entry, stop listening and stop here
       mExtraFolders.remove( location );
       folder->disconnect( this );
@@ -1404,7 +1405,7 @@
   } else {
     if ( ef && !ef->folder ) // deleted folder, clean up
       mExtraFolders.remove( location );
-    if ( contentsType == 0 )
+    if ( contentsType == KMail::ContentsTypeMail )
         return;
 
     //kdDebug(5006) << "registering " << location << " as extra folder" << endl;
Index: kmail/kmheaders.cpp
===================================================================
--- kmail/kmheaders.cpp	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kmail/kmheaders.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1218,7 +1218,36 @@
 
 void KMHeaders::setThreadStatus(KMMsgStatus status, bool toggle)
 {
-  QPtrList<QListViewItem> curThread = currentThread();
+  QPtrList<QListViewItem> curThread;
+
+  if (mFolder) {
+    QPtrList<QListViewItem> topOfThreads;
+
+    // for each selected item...
+    for (QListViewItem *item = firstChild(); item; item = item->itemBelow())
+      if (item->isSelected() ) {
+        // ...find the top-level item:
+        QListViewItem *top = item;
+        while ( top->parent() )
+          top = top->parent();
+        if (!topOfThreads.contains(top)) {
+          topOfThreads.append(top);
+        }
+      }
+
+    // for each thread found...
+    for ( QPtrListIterator<QListViewItem> it( topOfThreads ) ;
+          it.current() ; ++ it ) {
+        QListViewItem *top = *it;
+
+        // collect the items in this thread:
+        QListViewItem *topOfNextThread = top->nextSibling();
+        for ( QListViewItemIterator it( top ) ;
+              it.current() && it.current() != topOfNextThread ; ++it )
+          curThread.append( it.current() );
+    }
+  }
+
   QPtrListIterator<QListViewItem> it( curThread );
   SerNumList serNums;
 
Index: kmail/dcopimap.desktop
===================================================================
--- kmail/dcopimap.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kmail/dcopimap.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,5 +1,4 @@
 [Desktop Entry]
-Encoding=UTF-8
 Type=ServiceType
 X-KDE-ServiceType=DCOP/ResourceBackend/IMAP
 Comment=Mail program with a DCOP interface
@@ -27,6 +26,7 @@
 Comment[is]=Póstforrit með DCOP viðmóti
 Comment[it]=Programma di posta con un'interfaccia DCOP
 Comment[ja]=DCOP インターフェース付のメールプログラム
+Comment[ka]=საფოსტო პროგრამა DCOP ინტერფეისით
 Comment[kk]=DCOP интерфейсті пошта бағдарламасы
 Comment[km]=កម្មវិធី​អ៊ីមែល​ដែល​មាន​ចំណុច​ប្រទាក់ DCOP
 Comment[lt]=Pašto programa su DCOP sąsaja
Index: kmail/encodingdetector.h
===================================================================
--- kmail/encodingdetector.h	(.../tags/KDE/3.5.9/kdepim)	(wersja 0)
+++ kmail/encodingdetector.h	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -0,0 +1,166 @@
+/*
+    This file was taken from the KDE 4.x libraries and backported to Qt 3.
+
+    Copyright (C) 1999 Lars Knoll (knoll@mpi-hd.mpg.de)
+    Copyright (C) 2007 Nick Shaforostoff (shafff@ukr.net)
+
+    This library is free software; you can redistribute it and/or
+    modify it under the terms of the GNU Library General Public
+    License as published by the Free Software Foundation; either
+    version 2 of the License, or (at your option) any later version.
+
+    This library is distributed in the hope that it will be useful,
+    but WITHOUT ANY WARRANTY; without even the implied warranty of
+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
+    Library General Public License for more details.
+
+    You should have received a copy of the GNU Library General Public License
+    along with this library; see the file COPYING.LIB.  If not, write to
+    the Free Software Foundation, Inc., 51 Franklin Street, Fifth Floor,
+    Boston, MA 02110-1301, USA.
+
+*/
+#ifndef ENCODINGDETECTOR_H
+#define ENCODINGDETECTOR_H
+
+#include <qstring.h>
+
+class QTextCodec;
+class QTextDecoder;
+class EncodingDetectorPrivate;
+
+/**
+ * @short Provides encoding detection capabilities.
+ *
+ * Searches for encoding declaration inside raw data -- meta and xml tags. 
+ * In the case it can't find it, uses heuristics for specified language.
+ *
+ * If it finds unicode BOM marks, it changes encoding regardless of what the user has told
+ *
+ * Intended lifetime of the object: one instance per document.
+ *
+ * Typical use:
+ * \code
+ * QByteArray data;
+ * ...
+ * EncodingDetector detector;
+ * detector.setAutoDetectLanguage(EncodingDetector::Cyrillic);
+ * QString out=detector.decode(data);
+ * \endcode
+ *
+ *
+ * Do not mix decode() with decodeWithBuffering()
+ *
+ * @short Guess encoding of char array
+ *
+ */
+class EncodingDetector
+{
+public:
+    enum EncodingChoiceSource
+    {
+        DefaultEncoding,
+        AutoDetectedEncoding,
+        BOM,
+        EncodingFromXMLHeader,
+        EncodingFromMetaTag,
+        EncodingFromHTTPHeader,
+        UserChosenEncoding
+    };
+
+    enum AutoDetectScript
+    {
+        None,
+        SemiautomaticDetection,
+        Arabic,
+        Baltic,
+        CentralEuropean,
+        ChineseSimplified,
+        ChineseTraditional,
+        Cyrillic,
+        Greek,
+        Hebrew,
+        Japanese,
+        Korean,
+        NorthernSaami,
+        SouthEasternEurope,
+        Thai,
+        Turkish,
+        Unicode,
+        WesternEuropean
+    };
+
+    /**
+     * Default codec is latin1 (as html spec says), EncodingChoiceSource is default, AutoDetectScript=Semiautomatic
+     */
+    EncodingDetector();
+
+    /**
+     * Allows to set Default codec, EncodingChoiceSource, AutoDetectScript
+     */
+    EncodingDetector(QTextCodec* codec, EncodingChoiceSource source, AutoDetectScript script=None);
+    ~EncodingDetector();
+
+    //const QTextCodec* codec() const;
+
+    /**
+    * @returns true if specified encoding was recognized
+    */
+    bool setEncoding(const char *encoding, EncodingChoiceSource type);
+
+    /**
+    * Convenience method.
+    * @returns mime name of detected encoding
+    */
+    const char* encoding() const;
+
+    bool visuallyOrdered() const;
+
+//     void setAutoDetectLanguage( const QString& );
+//     const QString& autoDetectLanguage() const;
+
+    void setAutoDetectLanguage( AutoDetectScript );
+    AutoDetectScript autoDetectLanguage() const;
+
+    EncodingChoiceSource encodingChoiceSource() const;
+
+    /**
+    * Analyze text data.
+    * @returns true if there was enough data for accurate detection
+    */
+    bool analyze( const char *data, int len );
+
+    /**
+    * Analyze text data.
+    * @returns true if there was enough data for accurate detection
+    */
+    bool analyze( const QByteArray &data );
+
+    /**
+     * Takes lang name _after_ it were i18n()'ed
+     */
+    static AutoDetectScript scriptForName(const QString& lang);
+    static QString nameForScript(AutoDetectScript);
+    static AutoDetectScript scriptForLanguageCode(const QString &lang);
+    static bool hasAutoDetectionForScript(AutoDetectScript);
+
+protected:
+    /**
+     * Check if we are really utf8. Taken from kate
+     *
+     * @returns true if current encoding is utf8 and the text cannot be in this encoding
+     *
+     * Please somebody read http://de.wikipedia.org/wiki/UTF-8 and check this code...
+     */
+    bool errorsIfUtf8 (const char* data, int length);
+
+    /**
+    * @returns QTextDecoder for detected encoding
+    */
+    QTextDecoder* decoder();
+
+private:
+    EncodingDetectorPrivate* const d;
+};
+
+#endif
Index: kmail/profiles/profile-high-contrast-rc.desktop
===================================================================
--- kmail/profiles/profile-high-contrast-rc.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kmail/profiles/profile-high-contrast-rc.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -27,6 +27,7 @@
 Name[is]=Mikil birtuskil
 Name[it]=Alto contrasto
 Name[ja]=ハイコントラスト
+Name[ka]=მაღალი კონტრასტი
 Name[kk]=Контрастығы жоғары
 Name[km]=កម្រិត​ពណ៌​ខ្ពស់
 Name[lt]=Didelis kontrastas
@@ -81,6 +82,7 @@
 Comment[is]=Stærra letur fyrir notendur með slæma sjón
 Comment[it]=Dimensioni più grandi dei caratteri per chi ha problemi di vista
 Comment[ja]=視力障害者のために大きなフォントを使用します
+Comment[ka]=შრიფტის გაზრდილი ზომა მხედველობაშეზღუდული მომხმარებლებისთვის
 Comment[kk]=Көру қабілеті нашарларға арналған ірі қаріпті көрініс
 Comment[km]=បង្កើន​ទំហំពុម្ពអក្សរ ដើម្បី​បង្ក​លក្ខណៈ​ងាយស្រួល​ដល់​ជន​ពិការ​ភ្នែក
 Comment[lt]=Padidinti šriftų dydžiai blogai matantiems naudotojams
Index: kmail/profiles/profile-default-rc.desktop
===================================================================
--- kmail/profiles/profile-default-rc.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kmail/profiles/profile-default-rc.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -31,6 +31,7 @@
 Name[is]=Sjálfgefið
 Name[it]=Predefinito
 Name[ja]=標準
+Name[ka]=ნაგულისხმევი
 Name[kk]=Әдетті
 Name[km]=លំនាំដើម
 Name[lt]=Numatytasis
@@ -61,7 +62,8 @@
 Name[th]=ค่าปริยาย
 Name[tr]=Öntanımlı
 Name[uk]=Типовий
-Name[uz]=Андоза
+Name[uz]=Andoza
+Name[uz@cyrillic]=Андоза
 Name[ven]=Zwi si zwavhudi
 Name[vi]=Mặc định 
 Name[xh]=Engagqibekanga
@@ -97,6 +99,7 @@
 Comment[is]=Venjulegt snið
 Comment[it]=Profilo standard
 Comment[ja]=標準プロファイル
+Comment[ka]=სტანდარტული პროფილი
 Comment[kk]=Стандартты профилі
 Comment[km]=ទម្រង់​ខ្នាត​គំរូ
 Comment[lt]=Standartinis profilis
@@ -124,7 +127,8 @@
 Comment[th]=โปรไฟล์มาตรฐาน
 Comment[tr]=Standart profil
 Comment[uk]=Типовий профіль
-Comment[uz]=Андоза профили
+Comment[uz]=Andoza profili
+Comment[uz@cyrillic]=Андоза профили
 Comment[ven]=Zwithu zwo doweleaho
 Comment[vi]=Hồ sơ chuẩn
 Comment[xh]=Imboniselo yabucala esezantsi
Index: kmail/profiles/profile-html-rc.desktop
===================================================================
--- kmail/profiles/profile-html-rc.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kmail/profiles/profile-html-rc.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -21,7 +21,7 @@
 Comment[eu]=HTML aurrebista gaituta duen profil estandarra - sekuritate gutxiago du
 Comment[fa]=profile استاندارد با پیش‌نمایش زنگام فعال‌شده - با ایمنی کمتر!
 Comment[fi]=Normaali profiili HTML-esikatselua käyttäville - vähemmän turvallinen.
-Comment[fr]=Profil standard avec l'aperçu HTML activé - Moins sécurisé !
+Comment[fr]=Profil standard avec l'aperçu HTML activé - Moins sécurisé !
 Comment[fy]=Standertprofyl mei HTML-foarbyld aktivearre - minder feilich!
 Comment[gl]=Perfil estándar con previsualización HTML activada - menos seguro!
 Comment[hi]=एचटीएमएल पूर्वावलोकन के साथ मानक प्रोफ़ाइल सक्षम है - कम सुरक्षित!
@@ -30,6 +30,7 @@
 Comment[is]=Staðlað snið með HTML forsýn - minna öryggi!
 Comment[it]=Profilo standard con l'anteprima HTML abilitata - meno sicuro!
 Comment[ja]=HTML プレビューを有効にした標準プロファイル - 安全度は下がります!
+Comment[ka]=სტანდარტული პროფილი HTML ესკიზით - ნაკლებად უსაფრთხო!
 Comment[kk]=Стандартты, HTML көрінісі бар профилі - қауіпсізігі төмен!
 Comment[km]=ទម្រង់​ខ្នាត​គំរូ​ដែល​អាច​មើល HTML ជាមុន - មិន​សូវ​មាន​សុវត្ថិភាព​ឡើយ !
 Comment[lt]=Standartinis profilis su HTML peržiūra – mažiau saugus!
Index: kmail/profiles/profile-purist-rc.desktop
===================================================================
--- kmail/profiles/profile-purist-rc.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kmail/profiles/profile-purist-rc.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -18,6 +18,7 @@
 Name[hu]=Egyszerűsített
 Name[it]=Purista
 Name[ja]=純正
+Name[ka]=პურისტი
 Name[kk]=Пурист
 Name[km]=បរិសុទ្ធ
 Name[lt]=Itin paprastas
@@ -71,6 +72,7 @@
 Comment[is]=Slökkt á flestum aukahlutum, notast við víðværar stillingar KDE
 Comment[it]=La maggior parte delle funzioni sono disabilitate, vengono usate le impostazioni globali di KDE
 Comment[ja]=ほとんどの機能を無効にし、KDE の全体設定を使用します
+Comment[ka]=უმეტესობა შესაძლებლობებისა ამორთულია, გამოიყენება KDE-ს ზოგადი პარამეტრები
 Comment[kk]=Мүмкіндіктердің көбі, KDE жалпылары ғана қалдырып, өшірілген
 Comment[km]=លក្ខណៈ​ពិសេស​ភាគ​ច្រើន​ត្រូវ​បាន​បិទ ដោយ​ប្រើ​តែ​ការ​កំណត់​សកល​របស់ KDE ប៉ុណ្ណោះ
 Comment[lt]=Dauguma savybių išjungta, naudojami globalūs KDE nustatymai
@@ -81,7 +83,7 @@
 Comment[nds]=Mehrste Funkschonen utmaakt, globaal KDE-Vörinstellen warrt bruukt
 Comment[ne]=धेरै विशेषता बन्द गरिएका छन, केडीई विश्वव्यापी सेटिङ प्रयोग गरिएका छन्
 Comment[nl]=Meeste mogelijkheden uitgezet, de globale KDE-instellingen worden gebruikt
-Comment[nn]=Dei fleste funksjonar er slått av, globale KDE-innstillingar vert brukt
+Comment[nn]=Dei fleste funksjonar er slått av, globale KDE-innstillingar vert bruka
 Comment[pl]=Większość opcji wyłączona, używane są domyślne ustawienia KDE
 Comment[pt]=A maioria das funcionalidades desligada, sendo usadas as opções globais do KDE
 Comment[pt_BR]=Maioria dos recursos desligados, são usadas configurações globais do KDE
Index: kmail/profiles/profile-secure-rc.desktop
===================================================================
--- kmail/profiles/profile-secure-rc.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kmail/profiles/profile-secure-rc.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -26,6 +26,7 @@
 Name[is]=Öruggast
 Name[it]=Massima sicurezza
 Name[ja]=最も安全
+Name[ka]=ყველაზე უსაფრთხო
 Name[kk]=Ең қауіпсіз
 Name[km]=សុវត្ថិភាព​បំផុត
 Name[lt]=Saugiausias
@@ -51,7 +52,8 @@
 Name[tg]=Аз ҳама бехавфнокаш
 Name[tr]=En Güvenli
 Name[uk]=Найбільш безпечний
-Name[uz]=Жуда хавфсиз
+Name[uz]=Juda xavfsiz
+Name[uz@cyrillic]=Жуда хавфсиз
 Name[zh_CN]=最安全
 Name[zh_TW]=最安全
 Comment=Sets all necessary options to achieve maximum security
@@ -79,6 +81,7 @@
 Comment[is]=Setur allar stillingar þannig að öryggið sé mest
 Comment[it]=Imposta tutte le opzioni necessario per ottenere la massima sicurezza
 Comment[ja]=最大のセキュリティ確保のために必要なすべてのオプションを設定します
+Comment[ka]=აყენებს ყველა საჭირო ოპციას მაქსიმალური უსაფრთხოების მისაღწევად
 Comment[kk]=Қауіпсіздігі мейілінше арттырып бапталғаны
 Comment[km]=កំណត់​ជម្រើស​ចាំបាច់​ទាំងអស់ ដើម្បី​ទទួល​បាន​សុវត្ថិភាព​ខ្ពស់​បំផុត
 Comment[lt]=Nustato visas būtinas maksimaliam saugumui parinktis
Index: kmail/application_octetstream.desktop
===================================================================
--- kmail/application_octetstream.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kmail/application_octetstream.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,5 +1,4 @@
 [Misc]
-Encoding=UTF-8
 Name=Application Octetstream
 Name[af]=Application/Octet-stream
 Name[ca]=Aplicació Octetstream
@@ -15,6 +14,7 @@
 Name[gl]=Aplicación Octetstream
 Name[hu]=Alkalmazás-adatfolyam
 Name[ja]=アプリケーション オクテット ストリーム
+Name[ka]=რვადინებიანი პროგრამა
 Name[kk]=Қолданбаның бинарлы ағымы
 Name[km]=Octetstream កម្មវិធី
 Name[ms]=Aliran Oktet  Aplikasi
@@ -55,6 +55,7 @@
 Comment[is]=Sniðmátstól fyrir application/octet-stream
 Comment[it]=Un plugin per formattare application/octet-stream
 Comment[ja]=application/octet-stream の Bodypart フォーマッタプラグイン
+Comment[ka]=ნაწილიბრივი დამფორმატებელი მოდული პროგრამისთვის/octet-stream
 Comment[kk]=Application/octet-stream үшін пішімдегіш модулі
 Comment[km]=កម្មវិធី​ជំនួយ​កម្មវិធី​ធ្វើ​ទ្រង់ទ្រាយ​ផ្នែក​តួ សម្រាប់​កម្មវិធី/octet-stream
 Comment[lt]=application/octet-stream formatavimo priedas
Index: kmail/pics/attachmentQuicklistClosed.png
===================================================================
Nie można wyświetlić: plik binarny.
svn:mime-type = application/octet-stream

Zmiany atrybutów dla: kmail/pics/attachmentQuicklistClosed.png
___________________________________________________________________
Dodane: svn:mime-type
   + application/octet-stream

Index: kmail/pics/attachmentQuicklistOpened.png
===================================================================
Nie można wyświetlić: plik binarny.
svn:mime-type = application/octet-stream

Zmiany atrybutów dla: kmail/pics/attachmentQuicklistOpened.png
___________________________________________________________________
Dodane: svn:mime-type
   + application/octet-stream

Index: kmail/pics/Makefile.am
===================================================================
--- kmail/pics/Makefile.am	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kmail/pics/Makefile.am	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -26,7 +26,9 @@
 	enterprise_top.png \
 	enterprise_top_right.png \
 	enterprise_sw.png \
-	enterprise_w.png
+	enterprise_w.png \
+	attachmentQuicklistClosed.png \
+	attachmentQuicklistOpened.png
 
 
 picsdir = $(kde_datadir)/kmail/pics
Index: kmail/kmmessage.h
===================================================================
--- kmail/kmmessage.h	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kmail/kmmessage.h	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -627,9 +627,6 @@
   /** Delete all body parts. */
   void deleteBodyParts();
 
-  /** Removes the given body part. */
-  void removeBodyPart( DwBodyPart * dwPart );
-
   /** Set "Status" and "X-Status" fields of the message from the
    * internal message status. */
   void setStatusFields();
Index: kmail/kmail_config_misc.desktop
===================================================================
--- kmail/kmail_config_misc.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kmail/kmail_config_misc.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,5 +1,4 @@
 [Desktop Entry]
-Encoding=UTF-8
 Icon=misc
 Type=Service
 ServiceTypes=KCModule
@@ -37,6 +36,7 @@
 Name[is]=Ýmislegt
 Name[it]=Varie
 Name[ja]=その他
+Name[ka]=სხვადასხვა
 Name[kk]=Басқалары
 Name[km]=ផ្សេងៗ
 Name[lt]=Įvairūs
@@ -62,7 +62,8 @@
 Name[tg]=Ғайра
 Name[tr]=Çeşitli
 Name[uk]=Різне
-Name[uz]=Ҳар хил
+Name[uz]=Har xil
+Name[uz@cyrillic]=Ҳар хил
 Name[zh_CN]=杂项
 Name[zh_TW]=其他
 Comment=Settings that don't fit elsewhere
@@ -88,6 +89,7 @@
 Comment[is]=Stillingar sem passa ekki annars staðar
 Comment[it]=Impostazioni che non rientrano in altre categorie
 Comment[ja]=その他の設定
+Comment[ka]=პარამეტრები,რომლებიც სხვას არ ერგება
 Comment[kk]=Басқа параметрлері
 Comment[km]=ការ​កំណត់​ដែល​មិន​ត្រូវ​នឹង​កន្លែង​ផ្សេង
 Comment[lt]=Kiti nustatymai
@@ -136,6 +138,7 @@
 Keywords[is]=kmail,ýmislegt
 Keywords[it]=kmail,varie
 Keywords[ja]=kmail,その他
+Keywords[ka]=kmail,სხვადასხვა
 Keywords[km]=kmail,ផ្សេងៗ
 Keywords[lt]=kmail,misc,įvairūs
 Keywords[mk]=kmail,misc,кпошта,разно
@@ -158,5 +161,6 @@
 Keywords[tg]=kmail,misc,ғайра,дигар
 Keywords[tr]=kmail,çeşitli
 Keywords[uk]=kmail,різне
-Keywords[uz]=kmail,ҳар хил
+Keywords[uz]=kmail,har xil
+Keywords[uz@cyrillic]=kmail,ҳар хил
 Keywords[zh_CN]=kmail,misc,杂项
Index: kmail/urlhandlermanager.cpp
===================================================================
--- kmail/urlhandlermanager.cpp	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kmail/urlhandlermanager.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -391,6 +391,20 @@
         return true;
       }
 
+      if ( url.path() == "showAttachmentQuicklist" ) {
+	  w->saveRelativePosition();
+	  w->setShowAttachmentQuicklist( true );
+	  w->update( true );
+	  return true;
+      }
+
+      if ( url.path() == "hideAttachmentQuicklist" ) {
+	  w->saveRelativePosition();
+	  w->setShowAttachmentQuicklist( false );
+	  w->update( true );
+	  return true;
+      }
+
 //       if ( url.path() == "startIMApp" )
 //       {
 //         kmkernel->imProxy()->startPreferredApp();
Index: kmail/newfolderdialog.cpp
===================================================================
--- kmail/newfolderdialog.cpp	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kmail/newfolderdialog.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -148,7 +148,7 @@
     }
     if ( mFolder->folderType() == KMFolderTypeCachedImap ) {
       ImapAccountBase* ai = static_cast<KMFolderCachedImap*>(mFolder->storage())->account();
-      if ( mFolder->storage() == ai->rootFolder() ) {
+      if ( ai && mFolder->storage() == ai->rootFolder() ) {
         rootFolder = true;
         namespaces = ai->namespaces()[ImapAccountBase::PersonalNS];
       }
@@ -212,10 +212,12 @@
     QString delimiter;
     if ( mFolder->folderType() == KMFolderTypeImap ) {
       KMAcctImap* ai = static_cast<KMFolderImap*>( mFolder->storage() )->account();
-      delimiter = ai->delimiterForFolder( mFolder->storage() );
+      if ( ai )
+        delimiter = ai->delimiterForFolder( mFolder->storage() );
     } else {
       KMAcctCachedImap* ai = static_cast<KMFolderCachedImap*>( mFolder->storage() )->account();
-      delimiter = ai->delimiterForFolder( mFolder->storage() );
+      if ( ai )
+        delimiter = ai->delimiterForFolder( mFolder->storage() );
     }
     if ( !delimiter.isEmpty() && fldName.find( delimiter ) != -1 ) {
       KMessageBox::error( this, i18n( "Your IMAP server does not allow the character '%1'; please choose another folder name." ).arg( delimiter ) );
Index: kmail/kmreadermainwin.cpp
===================================================================
--- kmail/kmreadermainwin.cpp	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kmail/kmreadermainwin.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -496,6 +496,7 @@
   f.setFamily( font );
   mReaderWin->cssHelper()->setBodyFont( f );
   mReaderWin->cssHelper()->setPrintFont( f );
+  mReaderWin->saveRelativePosition();
   mReaderWin->update();
 }
 
@@ -505,6 +506,7 @@
   f.setPointSize( size );
   mReaderWin->cssHelper()->setBodyFont( f );
   mReaderWin->cssHelper()->setPrintFont( f );
+  mReaderWin->saveRelativePosition();
   mReaderWin->update();
 }
 
Index: kmail/encodingdetector_ja_p.h
===================================================================
--- kmail/encodingdetector_ja_p.h	(.../tags/KDE/3.5.9/kdepim)	(wersja 0)
+++ kmail/encodingdetector_ja_p.h	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -0,0 +1,126 @@
+/*
+ * This file is part of the KDE libraries
+ *
+ * Copyright 2000-2003 Shiro Kawai <shiro@acm.org>, All rights reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ *
+ *  1. Redistributions of source code must retain the above copyright
+ *     notice, this list of conditions and the following disclaimer.
+ *
+ *  2. Redistributions in binary form must reproduce the above copyright
+ *     notice, this list of conditions and the following disclaimer in the
+ *     documentation and/or other materials provided with the distribution.
+ *
+ *  3. Neither the name of the authors nor the names of its contributors
+ *     may be used to endorse or promote products derived from this
+ *     software without specific prior written permission.
+ *
+ * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
+ * "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
+ * LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
+ * A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
+ * OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED
+ * TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
+ * PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
+ * LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
+ * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
+ * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
+ *
+ */
+/*
+ * original code is here.
+ * http://cvs.sourceforge.net/viewcvs.py/gauche/Gauche/ext/charconv/guess.c?view=markup
+ */
+#ifndef GUESS_JA_H
+#define GUESS_JA_H
+
+#include <qglobal.h>
+#ifdef Q_WS_WIN
+#undef UNICODE
+#endif 
+namespace khtml {
+    class guess_arc {
+    public:
+        unsigned int next;          /* next state */
+        double score;               /* score */
+    };
+}
+
+using namespace khtml;
+
+typedef signed char dfa_table[256];
+
+/* DFA tables declared in guess_ja.cpp */
+extern const dfa_table guess_eucj_st[];
+extern guess_arc guess_eucj_ar[7];
+extern const dfa_table guess_sjis_st[];
+extern guess_arc guess_sjis_ar[6];
+extern const dfa_table guess_utf8_st[];
+extern guess_arc guess_utf8_ar[11];
+
+namespace khtml {
+
+    class guess_dfa {
+    public:
+        const dfa_table *states;
+        const guess_arc *arcs;
+        int state;
+        double score;
+
+        guess_dfa (const dfa_table stable[], const guess_arc *atable) :
+            states(stable), arcs(atable)
+        {
+            state = 0;
+            score = 1.0;
+        }
+    };
+
+    class JapaneseCode
+    {
+    public:
+        enum Type {ASCII, JIS, EUC, SJIS, UNICODE, UTF8 };
+        enum Type guess_jp(const char* buf, int buflen);
+
+        JapaneseCode () {
+            eucj = new guess_dfa(guess_eucj_st, guess_eucj_ar);
+            sjis = new guess_dfa(guess_sjis_st, guess_sjis_ar);
+            utf8 = new guess_dfa(guess_utf8_st, guess_utf8_ar);
+            last_JIS_escape = false;
+        }
+
+        ~JapaneseCode () {
+            if (eucj) delete eucj;
+            if (sjis) delete sjis;
+            if (utf8) delete utf8;
+        }
+
+    protected:
+        guess_dfa *eucj;
+        guess_dfa *sjis;
+        guess_dfa *utf8;
+
+        bool last_JIS_escape;
+    };
+}
+
+#define DFA_NEXT(dfa, ch)                               \
+    do {                                                \
+        int arc__;                                      \
+        if (dfa->state >= 0) {                          \
+            arc__ = dfa->states[dfa->state][ch];        \
+            if (arc__ < 0) {                            \
+                dfa->state = -1;                        \
+            } else {                                    \
+                dfa->state = dfa->arcs[arc__].next;     \
+                dfa->score *= dfa->arcs[arc__].score;   \
+            }                                           \
+        }                                               \
+    } while (0)
+
+#define DFA_ALIVE(dfa)  (dfa->state >= 0)
+
+#endif  /* GUESS_JA_H */
Index: kmail/Makefile.am
===================================================================
--- kmail/Makefile.am	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kmail/Makefile.am	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -69,7 +69,8 @@
                 kmsystemtray.cpp kmacctlocal.cpp kmfolderdir.cpp \
                 kmfoldermgr.cpp kmfoldernode.cpp kmsender.cpp \
                 kmacctseldlg.cpp kmfiltermgr.cpp kmsearchpatternedit.cpp \
-		filterimporterexporter.cpp \
+                filterimporterexporter.cpp \
+                encodingdetector.cpp encodingdetector_ja.cpp \
                 kmfilteraction.cpp kmsearchpattern.cpp \
                 kmfolderseldlg.cpp kmfilter.cpp kmfilterdlg.cpp \
                 kmmsgbase.cpp kmmsglist.cpp kmaddrbook.cpp  \
@@ -141,7 +142,7 @@
                 favoritefolderview.cpp \
                 foldertreebase.cpp \
                 snippetdlgbase.ui \
-                snippet_widget.cpp \
+                snippetwidget.cpp \
                 snippetconfig.cpp \
                 snippetdlg.cpp \
                 snippetitem.cpp \
Index: kmail/kmaccount.h
===================================================================
--- kmail/kmaccount.h	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kmail/kmaccount.h	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -142,6 +142,7 @@
    * already properly set by the caller.
    */
   virtual void readConfig(KConfig& config);
+  void readTimerConfig();
 
   /**
    * Write all account information to given config file. The config group
Index: kmail/editorwatcher.cpp
===================================================================
--- kmail/editorwatcher.cpp	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kmail/editorwatcher.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -32,8 +32,12 @@
 #include <cassert>
 
 // inotify stuff taken from kdelibs/kio/kio/kdirwatch.cpp
-#ifdef HAVE_INOTIFY
+#ifdef HAVE_SYS_INOTIFY
 #include <sys/ioctl.h>
+#include <sys/inotify.h>
+#include <fcntl.h>
+#elif HAVE_INOTIFY
+#include <sys/ioctl.h>
 #include <unistd.h>
 #include <fcntl.h>
 #include <sys/syscall.h>
Index: kmail/recipientspicker.h
===================================================================
--- kmail/recipientspicker.h	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kmail/recipientspicker.h	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -45,6 +45,10 @@
 }
 #endif
 
+namespace KPIM {
+class  LDAPSearchDialog;
+}
+
 class RecipientItem
 {
   public:
@@ -52,10 +56,12 @@
 
 #ifdef KDEPIM_NEW_DISTRLISTS
     RecipientItem( KABC::AddressBook *ab );
-    void setDistributionList( const KPIM::DistributionList& );
+    void setDistributionList( KPIM::DistributionList& );
+    KPIM::DistributionList& distributionList();
 #else
     RecipientItem();
     void setDistributionList( KABC::DistributionList * );
+    KABC::DistributionList * distributionList();
 #endif
     void setAddressee( const KABC::Addressee &, const QString &email );
 
@@ -70,11 +76,19 @@
 
     QString key() const { return mKey; }
 
-    QString toolTip() const;
+    QString tooltip() const;
 
   private:
+#ifdef KDEPIM_NEW_DISTRLISTS
+    QString createTooltip( KPIM::DistributionList & ) const;
+#else
+    QString createTooltip( KABC::DistributionList * ) const;
+#endif
+
     KABC::Addressee mAddressee;
+    QString mName;
     QString mEmail;
+    QString mRecipient;
 #ifdef KDEPIM_NEW_DISTRLISTS
     KPIM::DistributionList mDistributionList;
     KABC::AddressBook *mAddressBook;
@@ -82,7 +96,8 @@
     KABC::DistributionList *mDistributionList;
 #endif
     QString mType;
-
+    QString mTooltip;
+    
     QPixmap mIcon;
 
     QString mKey;
@@ -114,9 +129,12 @@
 class RecipientsCollection
 {
   public:
-    RecipientsCollection();
+    RecipientsCollection( const QString & );
     ~RecipientsCollection();
 
+    void setReferenceContainer( bool );
+    bool isReferenceContainer() const;
+
     void setTitle( const QString & );
     QString title() const;
 
@@ -125,14 +143,20 @@
     RecipientItem::List items() const;
 
     bool hasEquivalentItem( RecipientItem * ) const;
+    RecipientItem * getEquivalentItem( RecipientItem *) const;
 
     void clear();
 
     void deleteAll();
 
+    QString id() const;
+
   private:
+    // flag to indicate if this collection contains just references
+    // or should manage memory (de)allocation as well.
+    bool mIsReferenceContainer;
+    QString mId;
     QString mTitle;
-    RecipientItem::List mItems;
     QMap<QString, RecipientItem *> mKeyMap;
 };
 
@@ -181,6 +205,8 @@
 
     void setDefaultButton( QPushButton *button );
 
+    void rebuildAllRecipientsList();
+
   protected slots:
     void updateList();
     void slotToClicked();
@@ -191,7 +217,8 @@
     void setFocusList();
     void resetSearch();
     void insertAddressBook( AddressBook * );
-
+    void slotSearchLDAP();
+    void ldapSearchResult();
   private:
     KABC::StdAddressBook *mAddressBook;
 
@@ -203,8 +230,12 @@
     QPushButton *mCcButton;
     QPushButton *mBccButton;
 
+    QPushButton *mSearchLDAPButton;
+    KPIM::LDAPSearchDialog *mLdapSearchDialog;
+
     QMap<int,RecipientsCollection *> mCollectionMap;
     RecipientsCollection *mAllRecipients;
+    RecipientsCollection *mDistributionLists;
     RecipientsCollection *mSelectedRecipients;
 
 #ifndef KDEPIM_NEW_DISTRLISTS
Index: kmail/kmail_config_composer.desktop
===================================================================
--- kmail/kmail_config_composer.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kmail/kmail_config_composer.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,5 +1,4 @@
 [Desktop Entry]
-Encoding=UTF-8
 Icon=edit
 Type=Service
 ServiceTypes=KCModule
@@ -36,6 +35,7 @@
 Name[hu]=Szerkesztő
 Name[it]=Compositore
 Name[ja]=メール作成
+Name[ka]=წერილების რედაქტორი
 Name[kk]=Құрастарғыш
 Name[km]=កម្មវិធី​តែង
 Name[lt]=Redaktorius
@@ -79,6 +79,7 @@
 Comment[fy]=Sjabloanen en algemien gedrach
 Comment[gl]=Planteis e Comportamento Xeral
 Comment[hu]=Sablonok, általános működési jellemzők
+Comment[is]=Forsnið & almenn hegðun
 Comment[it]=Modelli e comportamento generale
 Comment[ja]=テンプレートと全般的な動作
 Comment[kk]=Үлгілер мен Жалпы тәртібі
@@ -122,6 +123,7 @@
 Keywords[hu]=kmail,szerkesztő
 Keywords[is]=kmail,ritill
 Keywords[it]=kmail,compositore
+Keywords[ka]=kmail,წერილების რედაქტორი
 Keywords[km]=kmail កម្មវិធី​តែង
 Keywords[lt]=kmail,composer,redaktorius
 Keywords[mk]=kmail,composer,кпошта,составувач
Index: kmail/searchwindow.cpp
===================================================================
--- kmail/searchwindow.cpp	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kmail/searchwindow.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -239,6 +239,8 @@
 
   connect(mLbxMatches, SIGNAL(doubleClicked(QListViewItem *)),
           this, SLOT(slotShowMsg(QListViewItem *)));
+  connect(mLbxMatches, SIGNAL(currentChanged(QListViewItem *)),
+          this, SLOT(slotCurrentChanged(QListViewItem *)));
   connect( mLbxMatches, SIGNAL( contextMenuRequested( QListViewItem*, const QPoint &, int )),
            this, SLOT( slotContextMenuRequested( QListViewItem*, const QPoint &, int )));
   vbl->addWidget(mLbxMatches);
@@ -254,18 +256,20 @@
 
   mSearchFolderLbl->setBuddy(mSearchFolderEdt);
   hbl2->addWidget(mSearchFolderEdt);
-  mSearchFolderBtn = new QPushButton(i18n("&Rename"), searchWidget);
-  mSearchFolderBtn->setEnabled(false);
-  hbl2->addWidget(mSearchFolderBtn);
-  mSearchFolderOpenBtn = new QPushButton(i18n("Op&en"), searchWidget);
+  mSearchFolderOpenBtn = new QPushButton(i18n("Op&en Search Folder"), searchWidget);
   mSearchFolderOpenBtn->setEnabled(false);
   hbl2->addWidget(mSearchFolderOpenBtn);
   connect( mSearchFolderEdt, SIGNAL( textChanged( const QString &)),
-           this, SLOT( updateCreateButton( const QString & )));
-  connect( mSearchFolderBtn, SIGNAL( clicked() ),
+           this, SLOT( scheduleRename( const QString & )));
+  connect( &mRenameTimer, SIGNAL( timeout() ),
            this, SLOT( renameSearchFolder() ));
   connect( mSearchFolderOpenBtn, SIGNAL( clicked() ),
            this, SLOT( openSearchFolder() ));
+  mSearchResultOpenBtn = new QPushButton(i18n("Open &Message"), searchWidget);
+  mSearchResultOpenBtn->setEnabled(false);
+  hbl2->addWidget(mSearchResultOpenBtn);
+  connect( mSearchResultOpenBtn, SIGNAL( clicked() ),
+           this, SLOT( slotShowSelectedMsg() ));
   mStatusBar = new KStatusBar(searchWidget);
   mStatusBar->insertFixedItem(i18n("AMiddleLengthText..."), 0, true);
   mStatusBar->changeItem(i18n("Ready."), 0);
@@ -509,6 +513,7 @@
             this, SLOT(slotAddMsg(int)));
     connect(mFolder, SIGNAL(msgRemoved(KMFolder*, Q_UINT32)),
             this, SLOT(slotRemoveMsg(KMFolder*, Q_UINT32)));
+    mSearchFolderEdt->setEnabled(false);
     KMSearch *search = new KMSearch();
     connect(search, SIGNAL(finished(bool)),
             this, SLOT(searchDone()));
@@ -527,10 +532,6 @@
     mFolder->setSearch(search);
     enableGUI();
 
-    if (mFolder && !mFolders.contains(mFolder.operator->()->folder())) {
-        mFolder->open("searchwindow");
-        mFolders.append(mFolder.operator->()->folder());
-    }
     mTimer->start(200);
 }
 
@@ -548,6 +549,8 @@
 
     mLbxMatches->setSorting(mSortColumn, mSortOrder == Ascending);
     mLbxMatches->setShowSortIndicator(true);
+
+    mSearchFolderEdt->setEnabled(true);
 }
 
 void SearchWindow::slotAddMsg(int idx)
@@ -625,9 +628,15 @@
 }
 
 //-----------------------------------------------------------------------------
-void SearchWindow::updateCreateButton( const QString &s)
+void SearchWindow::scheduleRename( const QString &s)
 {
-    mSearchFolderBtn->setEnabled(s != i18n("Last Search") && mSearchFolderOpenBtn->isEnabled());
+    if (!s.isEmpty() && s != i18n("Last Search")) {
+      mRenameTimer.start(250, true);
+      mSearchFolderOpenBtn->setEnabled(false);
+    } else {
+      mRenameTimer.stop();
+      mSearchFolderOpenBtn->setEnabled(true);
+    }
 }
 
 //-----------------------------------------------------------------------------
@@ -647,6 +656,7 @@
             ++i;
         }
     }
+    mSearchFolderOpenBtn->setEnabled(true);
 }
 
 void SearchWindow::openSearchFolder()
@@ -693,6 +703,18 @@
 }
 
 //-----------------------------------------------------------------------------
+void SearchWindow::slotShowSelectedMsg()
+{
+    slotShowMsg(mLbxMatches->currentItem());
+}
+
+//-----------------------------------------------------------------------------
+void SearchWindow::slotCurrentChanged(QListViewItem *item)
+{
+  mSearchResultOpenBtn->setEnabled(item!=0);
+}
+
+//-----------------------------------------------------------------------------
 void SearchWindow::enableGUI()
 {
     KMSearch const *search = (mFolder) ? (mFolder->search()) : 0;
Index: kmail/recipientspicker.cpp
===================================================================
--- kmail/recipientspicker.cpp	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kmail/recipientspicker.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -24,7 +24,10 @@
 #include "globalsettings.h"
 
 #include <libkdepim/recentaddresses.h>
+#include <libkdepim/ldapsearchdialog.h>
 
+#include <libemailfunctions/email.h>
+
 #ifndef KDEPIM_NEW_DISTRLISTS
 #include <kabc/distributionlist.h>
 #endif
@@ -56,13 +59,21 @@
 #endif
 
 #ifdef KDEPIM_NEW_DISTRLISTS
-void RecipientItem::setDistributionList( const KPIM::DistributionList &list )
+void RecipientItem::setDistributionList( KPIM::DistributionList &list )
 {
   mDistributionList = list;
 
   mIcon = KGlobal::iconLoader()->loadIcon( "kdmconfig", KIcon::Small );
 
-  mKey = "D" + list.name();
+  mName = list.name();
+  mKey = list.name();
+
+  int count = list.entries( mAddressBook ).count();
+  mEmail = i18n( "1 email address", "%n email addresses", count );
+
+  mRecipient = mName;
+
+  mTooltip = createTooltip( list );
 }
 #else
 void RecipientItem::setDistributionList( KABC::DistributionList *list )
@@ -71,7 +82,15 @@
 
   mIcon = KGlobal::iconLoader()->loadIcon( "kdmconfig", KIcon::Small );
 
-  mKey = "D" + list->name();
+  mName = list->name();
+  mKey = list->name();
+
+  int count = list->entries().count();
+  mEmail = i18n( "1 email address", "%n email addresses", count );
+
+  mRecipient = mName;
+
+  mTooltip = createTooltip( list );
 }
 #endif
 
@@ -80,6 +99,7 @@
 {
   mAddressee = a;
   mEmail = email;
+  mRecipient = mAddressee.fullEmail( mEmail );
 
   QImage img = a.photo().data();
   if ( !img.isNull() )
@@ -87,7 +107,14 @@
   else
     mIcon = KGlobal::iconLoader()->loadIcon( "personal", KIcon::Small );
 
-  mKey = "A" + a.preferredEmail();
+  mName = mAddressee.realName();
+  mKey = mAddressee.realName() + '|' + mEmail;
+
+  mTooltip = "<qt>";
+  if ( !mAddressee.realName().isEmpty() ) {
+    mTooltip += mAddressee.realName() + "<br/>";
+  }
+  mTooltip += "<b>" + mEmail + "</b>";
 }
 
 QPixmap RecipientItem::icon() const
@@ -97,104 +124,81 @@
 
 QString RecipientItem::name() const
 {
-#ifdef KDEPIM_NEW_DISTRLISTS
-  if ( !mAddressee.isEmpty() ) return mAddressee.realName();
-  else if ( !mDistributionList.isEmpty() ) return mDistributionList.name();
-  else return QString::null;
-#else
-  if ( !mAddressee.isEmpty() ) return mAddressee.realName();
-  else if ( mDistributionList ) return mDistributionList->name();
-  else return QString::null;
-#endif
+  return mName;
 }
 
 QString RecipientItem::email() const
 {
-#ifdef KDEPIM_NEW_DISTRLISTS
-  if ( mAddressee.isEmpty() && !mDistributionList.isEmpty() ) {
-    int count = mDistributionList.entries( mAddressBook ).count();
-    return i18n( "1 email address", "%n email addresses", count );
-  } else {
-    return mEmail;
-  }
-#else
-  if ( mAddressee.isEmpty() &&  mDistributionList ) {
-    int count = mDistributionList->entries().count();
-    return i18n( "1 email address", "%n email addresses", count );
-  } else {
-    return mEmail;
-  }
-#endif
-  return QString::null;
+  return mEmail;
 }
 
-#ifdef KDEPIM_NEW_DISTRLISTS
 QString RecipientItem::recipient() const
 {
-  QString r;
-  if ( !mAddressee.isEmpty() ) r = mAddressee.fullEmail( mEmail );
-  else if ( !mDistributionList.isEmpty() ) r = mDistributionList.name();
-  return r;
+  return mRecipient;
 }
-#else
-QString RecipientItem::recipient() const
+
+QString RecipientItem::tooltip() const
 {
-  QString r;
-  if ( !mAddressee.isEmpty() ) r = mAddressee.fullEmail( mEmail );
-  else if ( mDistributionList ) r = mDistributionList->name();
-  return r;
+  return mTooltip;
 }
+
+#ifdef KDEPIM_NEW_DISTRLISTS
+KPIM::DistributionList& RecipientItem::distributionList() {
+  return mDistributionList;
+}
+#else
+KABC::DistributionList * RecipientItem::distributionList() {
+  return mDistributionList;
+}
 #endif
 
-QString RecipientItem::toolTip() const
+#ifdef KDEPIM_NEW_DISTRLISTS
+QString RecipientItem::createTooltip( KPIM::DistributionList &distributionList ) const
 {
   QString txt = "<qt>";
 
-  if ( !mAddressee.isEmpty() ) {
-    if ( !mAddressee.realName().isEmpty() ) {
-      txt += mAddressee.realName() + "<br/>";
-    }
-    txt += "<b>" + mEmail + "</b>";
-#ifdef KDEPIM_NEW_DISTRLISTS
-  } else if ( !mDistributionList.isEmpty() ) {
-    txt += "<b>" + i18n("Distribution List %1")
-      .arg( mDistributionList.name() ) + "</b>";
-    txt += "<ul>";
-    KPIM::DistributionList::Entry::List entries = mDistributionList.entries( mAddressBook );
-    KPIM::DistributionList::Entry::List::ConstIterator it;
-    for( it = entries.begin(); it != entries.end(); ++it ) {
-      txt += "<li>";
-      txt += (*it).addressee.realName() + " ";
-      txt += "<em>";
-      if ( (*it).email.isEmpty() ) txt += (*it).addressee.preferredEmail();
-      else txt += (*it).email;
-      txt += "</em>";
-      txt += "<li/>";
-    }
-    txt += "</ul>";
+  txt += "<b>" + i18n( "Distribution List %1" ).arg ( distributionList.name() ) + "</b>";
+  txt += "<ul>";
+  KPIM::DistributionList::Entry::List entries = distributionList.entries( mAddressBook );
+  KPIM::DistributionList::Entry::List::ConstIterator it;
+  for( it = entries.begin(); it != entries.end(); ++it ) {
+    txt += "<li>";
+    txt += (*it).addressee.realName() + ' ';
+    txt += "<em>";
+    if ( (*it).email.isEmpty() ) txt += (*it).addressee.preferredEmail();
+    else txt += (*it).email;
+    txt += "</em>";
+    txt += "<li/>";
   }
+  txt += "</ul>";
+  txt += "</qt>";
+
+  return txt;
+}
 #else
-  } else if ( mDistributionList ) {
-    txt += "<b>" + i18n("Distribution List %1")
-      .arg( mDistributionList->name() ) + "</b>";
-    txt += "<ul>";
-    KABC::DistributionList::Entry::List entries = mDistributionList->entries();
-    KABC::DistributionList::Entry::List::ConstIterator it;
-    for( it = entries.begin(); it != entries.end(); ++it ) {
-      txt += "<li>";
-      txt += (*it).addressee.realName() + " ";
-      txt += "<em>";
-      if ( (*it).email.isEmpty() ) txt += (*it).addressee.preferredEmail();
-      else txt += (*it).email;
-      txt += "</em>";
-      txt += "<li/>";
-    }
-    txt += "</ul>";
+QString RecipientItem::createTooltip( KABC::DistributionList *distributionList ) const
+{
+  QString txt = "<qt>";
+
+  txt += "<b>" + i18n("Distribution List %1" ).arg ( distributionList->name() ) + "</b>";
+  txt += "<ul>";
+  KABC::DistributionList::Entry::List entries = distributionList->entries();
+  KABC::DistributionList::Entry::List::ConstIterator it;
+  for( it = entries.begin(); it != entries.end(); ++it ) {
+    txt += "<li>";
+    txt += (*it).addressee.realName() + ' ';
+    txt += "<em>";
+    if ( (*it).email.isEmpty() ) txt += (*it).addressee.preferredEmail();
+    else txt += (*it).email;
+    txt += "</em>";
+    txt += "</li>";
   }
-#endif
+  txt += "</ul>";
+  txt += "</qt>";
 
   return txt;
 }
+#endif
 
 void RecipientItem::setRecipientType( const QString &type )
 {
@@ -238,7 +242,7 @@
 
   if( item ) {
     r = mListView->itemRect( item );
-    QString tipText( i->recipientItem()->toolTip() );
+    QString tipText( i->recipientItem()->tooltip() );
     if ( !tipText.isEmpty() ) {
       tip( r, tipText );
     }
@@ -246,15 +250,28 @@
 }
 
 
-RecipientsCollection::RecipientsCollection()
+RecipientsCollection::RecipientsCollection( const QString &id )
 {
+  mId = id;
+  mTitle = id;
+  mIsReferenceContainer = false;
 }
 
 RecipientsCollection::~RecipientsCollection()
 {
-  clear();
+  deleteAll();
 }
 
+void RecipientsCollection::setReferenceContainer( bool isReferenceContainer )
+{
+  mIsReferenceContainer = isReferenceContainer;
+}
+
+bool RecipientsCollection::isReferenceContainer() const
+{
+  return mIsReferenceContainer;
+}
+
 void RecipientsCollection::setTitle( const QString &title )
 {
   mTitle = title;
@@ -267,14 +284,12 @@
 
 void RecipientsCollection::addItem( RecipientItem *item )
 {
-  mItems.append( item );
-
   mKeyMap.insert( item->key(), item );
 }
 
 RecipientItem::List RecipientsCollection::items() const
 {
-  return mItems;
+  return mKeyMap.values();
 }
 
 bool RecipientsCollection::hasEquivalentItem( RecipientItem *item ) const
@@ -282,6 +297,15 @@
   return mKeyMap.find( item->key() ) != mKeyMap.end();
 }
 
+RecipientItem * RecipientsCollection::getEquivalentItem( RecipientItem *item) const
+{
+  QMap<QString, RecipientItem *>::ConstIterator it;
+  it = mKeyMap.find( item->key() );
+  if ( it == mKeyMap.end() )
+    return 0;
+  return (*it);
+}
+
 void RecipientsCollection::clear()
 {
   mKeyMap.clear();
@@ -289,13 +313,19 @@
 
 void RecipientsCollection::deleteAll()
 {
-  QMap<QString, RecipientItem *>::ConstIterator it;
-  for( it = mKeyMap.begin(); it != mKeyMap.end(); ++it ) {
-    delete *it;
+  if ( !isReferenceContainer() ) {
+    QMap<QString, RecipientItem *>::ConstIterator it;
+    for( it = mKeyMap.begin(); it != mKeyMap.end(); ++it ) {
+      delete *it;
+    }
   }
   clear();
 }
 
+QString RecipientsCollection::id() const
+{
+  return mId;
+}
 
 SearchLine::SearchLine( QWidget *parent, KListView *listView )
   : KListViewSearchLine( parent, listView )
@@ -315,6 +345,7 @@
 #ifndef KDEPIM_NEW_DISTRLISTS
     , mDistributionListManager( 0 )
 #endif
+    ,mLdapSearchDialog( 0 )
 {
 //  KWin::setType( winId(), NET::Dock );
 
@@ -333,8 +364,8 @@
   resLayout->addWidget( mCollectionCombo );
   resLayout->addItem(new QSpacerItem(1, 1, QSizePolicy::Expanding));
 
-  connect( mCollectionCombo, SIGNAL( highlighted( int ) ),
-    SLOT( updateList() ) );
+//  connect( mCollectionCombo, SIGNAL( highlighted( int ) ),
+//    SLOT( updateList() ) );
   connect( mCollectionCombo, SIGNAL( activated( int ) ),
     SLOT( updateList() ) );
 
@@ -369,6 +400,10 @@
   label->setBuddy( label );
   connect( mSearchLine, SIGNAL( downPressed() ), SLOT( setFocusList() ) );
 
+  mSearchLDAPButton = new QPushButton( i18n("Search &Directory Service"), this );
+  searchLayout->addWidget( mSearchLDAPButton );
+  connect( mSearchLDAPButton, SIGNAL( clicked() ), SLOT( slotSearchLDAP() ) );
+
   QBoxLayout *buttonLayout = new QHBoxLayout( topLayout );
 
   buttonLayout->addStretch( 1 );
@@ -421,8 +456,6 @@
   delete mDistributionListManager;
 #endif
 
-  mAllRecipients->deleteAll();
-
   QMap<int,RecipientsCollection *>::ConstIterator it;
   for( it = mCollectionMap.begin(); it != mCollectionMap.end(); ++it ) {
     delete *it;
@@ -431,19 +464,18 @@
 
 void RecipientsPicker::initCollections()
 {
-  mAllRecipients = new RecipientsCollection;
-  mAllRecipients->setTitle( i18n("All") );
+  mAllRecipients = new RecipientsCollection( i18n("All") );
+  mAllRecipients->setReferenceContainer( true );
+  mDistributionLists = new RecipientsCollection( i18n("Distribution Lists") );
+  mSelectedRecipients = new RecipientsCollection( i18n("Selected Recipients") );
+
   insertCollection( mAllRecipients );
-
   insertAddressBook( mAddressBook );
-
-  insertDistributionLists();
-
+  insertCollection( mDistributionLists );
   insertRecentAddresses();
+  insertCollection( mSelectedRecipients );
 
-  mSelectedRecipients = new RecipientsCollection;
-  mSelectedRecipients->setTitle( i18n("Selected Recipients") );
-  insertCollection( mSelectedRecipients );
+  rebuildAllRecipientsList();
 }
 
 void RecipientsPicker::insertAddressBook( KABC::AddressBook *addressbook )
@@ -453,7 +485,7 @@
   QPtrList<KABC::Resource> resources = addressbook->resources();
   KABC::Resource *res;
   for( res = resources.first(); res; res = resources.next() ) {
-    RecipientsCollection *collection = new RecipientsCollection;
+    RecipientsCollection *collection = new RecipientsCollection( res->identifier() );
     collectionMap.insert( res, collection );
     collection->setTitle( res->resourceName() );
   }
@@ -471,7 +503,6 @@
       RecipientItem *item = new RecipientItem;
 #endif
       item->setAddressee( *it, *it3 );
-      mAllRecipients->addItem( item );
 
       QMap<KABC::Resource *,RecipientsCollection *>::ConstIterator collIt;
       collIt = collectionMap.find( it->resource() );
@@ -486,8 +517,8 @@
         catMapIt = categoryMap.find( *catIt );
         RecipientsCollection *collection;
         if ( catMapIt == categoryMap.end() ) {
-          collection = new RecipientsCollection;
-          collection->setTitle( *catIt );
+          collection = new RecipientsCollection( *catIt );
+          collection->setReferenceContainer( true );
           categoryMap.insert( *catIt, collection );
         } else {
           collection = *catMapIt;
@@ -506,22 +537,22 @@
   for( it3 = categoryMap.begin(); it3 != categoryMap.end(); ++it3 ) {
     insertCollection( *it3 );
   }
-  
+
+  insertDistributionLists();
+  rebuildAllRecipientsList();
   updateList();
 }
 
 void RecipientsPicker::insertDistributionLists()
 {
-  RecipientsCollection *collection = new RecipientsCollection;
-  collection->setTitle( i18n("Distribution Lists") );
+  mDistributionLists->deleteAll();
 
 #ifdef KDEPIM_NEW_DISTRLISTS
   QValueList<KPIM::DistributionList> lists = KPIM::DistributionList::allDistributionLists( mAddressBook );
   for ( uint i = 0; i < lists.count(); ++i ) {
     RecipientItem *item = new RecipientItem( mAddressBook );
     item->setDistributionList( lists[ i ] );
-    mAllRecipients->addItem( item );
-    collection->addItem( item );
+    mDistributionLists->addItem( item );
   }
 #else
   delete mDistributionListManager;
@@ -537,18 +568,14 @@
     KABC::DistributionList *list = mDistributionListManager->list( *listIt );
     RecipientItem *item = new RecipientItem;
     item->setDistributionList( list );
-    mAllRecipients->addItem( item );
-    collection->addItem( item );
+    mDistributionLists->addItem( item );
   }
 #endif
-
-  insertCollection( collection );
 }
 
 void RecipientsPicker::insertRecentAddresses()
 {
-  RecipientsCollection *collection = new RecipientsCollection;
-  collection->setTitle( i18n("Recent Addresses") );
+  RecipientsCollection *collection = new RecipientsCollection( i18n("Recent Addresses") );
 
   KConfig config( "kmailrc" );
   KABC::Addressee::List recents =
@@ -562,9 +589,6 @@
     RecipientItem *item = new RecipientItem;
 #endif
     item->setAddressee( *it, (*it).preferredEmail() );
-    if ( !mAllRecipients->hasEquivalentItem( item ) ) {
-      mAllRecipients->addItem( item );
-    }
     collection->addItem( item );
   }
 
@@ -573,11 +597,18 @@
 
 void RecipientsPicker::insertCollection( RecipientsCollection *coll )
 {
-  int index = mCollectionMap.count();
+  int index = 0;
+  QMap<int,RecipientsCollection *>::ConstIterator it;
+  for ( it = mCollectionMap.begin(); it != mCollectionMap.end(); ++it ) {
+    if ( (*it)->id() == coll->id() ) {
+      delete *it;
+      mCollectionMap.remove( index );
+      mCollectionMap.insert( index, coll );
+      return;
+    }
+    index++;
+  }
 
-  kdDebug() << "RecipientsPicker::insertCollection() " << coll->title()
-    << "  index: " << index << endl;
-
   mCollectionCombo->insertItem( coll->title(), index );
   mCollectionMap.insert( index, coll );
 }
@@ -596,23 +627,32 @@
 
 void RecipientsPicker::setRecipients( const Recipient::List &recipients )
 {
-  RecipientItem::List allRecipients = mAllRecipients->items();
-  RecipientItem::List::ConstIterator itAll;
-  for( itAll = allRecipients.begin(); itAll != allRecipients.end(); ++itAll ) {
-    (*itAll)->setRecipientType( QString::null );
-  }
+  mSelectedRecipients->deleteAll();
 
-  mSelectedRecipients->clear();
-
   Recipient::List::ConstIterator it;
   for( it = recipients.begin(); it != recipients.end(); ++it ) {
     RecipientItem *item = 0;
-    for( itAll = allRecipients.begin(); itAll != allRecipients.end(); ++itAll ) {
-      if ( (*itAll)->recipient() == (*it).email() ) {
-        (*itAll)->setRecipientType( (*it).typeLabel() );
-        item = *itAll;
+
+    // if recipient is a distribution list, create
+    // a detached copy.
+    RecipientItem::List items = mDistributionLists->items();
+    RecipientItem::List::ConstIterator distIt;
+#ifdef KDEPIM_NEW_DISTRLISTS
+    for ( distIt = items.begin(); distIt != items.end(); ++distIt ) {
+      if ( (*it).email() == (*distIt)->name() ) {
+        item = new RecipientItem( mAddressBook );
+        item->setDistributionList( (*distIt)->distributionList() );
       }
     }
+#else
+    for ( distIt = items.begin(); distIt != items.end(); ++distIt ) {
+      if ( (*it).email() == (*distIt)->name() ) {
+        item = new RecipientItem();
+        item->setDistributionList( (*distIt)->distributionList() );
+      }
+    }
+#endif
+
     if ( !item ) {
       KABC::Addressee a;
       QString name;
@@ -627,9 +667,9 @@
       item = new RecipientItem;
 #endif
       item->setAddressee( a, a.preferredEmail() );
-      item->setRecipientType( (*it).typeLabel() );
-      mAllRecipients->addItem( item );
     }
+
+    item->setRecipientType( (*it).typeLabel() );
     mSelectedRecipients->addItem( item );
   }
 
@@ -655,6 +695,25 @@
   }
 }
 
+void RecipientsPicker::rebuildAllRecipientsList()
+{
+  mAllRecipients->clear();
+
+  QMap<int,RecipientsCollection *>::ConstIterator it;
+  for( it = mCollectionMap.begin(); it != mCollectionMap.end(); ++it ) {
+    // skip self
+    if ( (*it) == mAllRecipients )
+      continue;
+
+    RecipientItem::List coll = (*it)->items();
+
+    RecipientItem::List::ConstIterator rcptIt;
+    for ( rcptIt = coll.begin(); rcptIt != coll.end(); ++rcptIt ) {
+      mAllRecipients->addItem( *rcptIt );
+    }
+  }
+}
+
 void RecipientsPicker::updateList()
 {
   mRecipientList->clear();
@@ -664,6 +723,14 @@
   RecipientItem::List items = coll->items();
   RecipientItem::List::ConstIterator it;
   for( it = items.begin(); it != items.end(); ++it ) {
+    if ( coll != mSelectedRecipients ) {
+      RecipientItem *selItem = mSelectedRecipients->getEquivalentItem( *it );
+      if ( selItem ) {
+        (*it)->setRecipientType( selItem->recipientType() );
+      } else {
+        (*it)->setRecipientType( QString() );
+      }
+    }
     new RecipientViewItem( *it, mRecipientList );
   }
 
@@ -774,4 +841,38 @@
   mSearchLine->setText( QString::null );
 }
 
+void RecipientsPicker::slotSearchLDAP()
+{
+    if ( !mLdapSearchDialog ) {
+        mLdapSearchDialog = new KPIM::LDAPSearchDialog( this );
+        connect( mLdapSearchDialog, SIGNAL( addresseesAdded() ),
+                 SLOT(ldapSearchResult() ) );
+    }
+    mLdapSearchDialog->setSearchText( mSearchLine->text() );
+    mLdapSearchDialog->show();
+
+}
+
+void RecipientsPicker::ldapSearchResult()
+{
+    QStringList emails = QStringList::split(',', mLdapSearchDialog->selectedEMails() );
+    QStringList::iterator it( emails.begin() );
+    QStringList::iterator end( emails.end() );
+    for ( ; it != end; ++it ){
+        QString name;
+        QString email;
+        KPIM::getNameAndMail( (*it), name, email );
+        KABC::Addressee ad;
+        ad.setNameFromString( name );
+        ad.insertEmail( email );
+#ifdef KDEPIM_NEW_DISTRLISTS
+        RecipientItem *item = new RecipientItem( mAddressBook );
+#else
+        RecipientItem *item = new RecipientItem;
+#endif
+        item->setAddressee( ad, ad.preferredEmail() );
+        emit pickedRecipient( Recipient( item->recipient(), Recipient::Undefined ) );
+    }
+}
+
 #include "recipientspicker.moc"
Index: kmail/kmreaderwin.cpp
===================================================================
--- kmail/kmreaderwin.cpp	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kmail/kmreaderwin.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -516,7 +516,8 @@
     mHtmlWriter( 0 ),
     mSavedRelativePosition( 0 ),
     mDecrytMessageOverwrite( false ),
-    mShowSignatureDetails( false )
+    mShowSignatureDetails( false ),
+    mShowAttachmentQuicklist( true )
 {
   mSplitterSizes << 180 << 100;
   mMimeTreeMode = 1;
@@ -764,10 +765,9 @@
 void KMReaderWin::slotLevelQuote( int l )
 {
   kdDebug( 5006 ) << "Old Level: " << mLevelQuote << " New Level: " << l << endl;
-	mLevelQuote = l;
-  QScrollView * scrollview = static_cast<QScrollView *>(mViewer->widget());
-  mSavedRelativePosition = (float)scrollview->contentsY() / scrollview->contentsHeight();
 
+  mLevelQuote = l;
+  saveRelativePosition();
   update(true);
 }
 
@@ -1461,7 +1461,8 @@
   if (mSavedRelativePosition)
   {
     QScrollView * scrollview = static_cast<QScrollView *>(mViewer->widget());
-    scrollview->setContentsPos ( 0, qRound(  scrollview->contentsHeight() * mSavedRelativePosition ) );
+    scrollview->setContentsPos( 0,
+      qRound( scrollview->contentsHeight() * mSavedRelativePosition ) );
     mSavedRelativePosition = 0;
   }
 }
@@ -2049,10 +2050,8 @@
 //-----------------------------------------------------------------------------
 void KMReaderWin::slotToggleFixedFont()
 {
-  QScrollView * scrollview = static_cast<QScrollView *>(mViewer->widget());
-  mSavedRelativePosition = (float)scrollview->contentsY() / scrollview->contentsHeight();
-
   mUseFixedFont = !mUseFixedFont;
+  saveRelativePosition();
   update(true);
 }
 
@@ -2419,6 +2418,15 @@
 
 
 //-----------------------------------------------------------------------------
+void KMReaderWin::saveRelativePosition()
+{
+  const QScrollView * scrollview = static_cast<QScrollView *>( mViewer->widget() );
+  mSavedRelativePosition =
+    static_cast<float>( scrollview->contentsY() ) / scrollview->contentsHeight();
+}
+
+
+//-----------------------------------------------------------------------------
 void KMReaderWin::update( bool force )
 {
   KMMessage* msg = message();
@@ -2656,13 +2664,34 @@
   if ( injectionPoint.isNull() )
     return;
 
+  QString imgpath( locate("data","kmail/pics/") );
+  QString visibility;
+  QString urlHandle;
+  QString imgSrc;
+  if( !showAttachmentQuicklist() )
+    {
+      urlHandle.append( "kmail:showAttachmentQuicklist" );
+      imgSrc.append( "attachmentQuicklistClosed.png" );
+    } else {
+      urlHandle.append( "kmail:hideAttachmentQuicklist" );
+      imgSrc.append( "attachmentQuicklistOpened.png" );
+    }
+
   QString html = renderAttachments( mRootNode, QApplication::palette().active().background() );
   if ( html.isEmpty() )
     return;
-  if ( headerStyle() == HeaderStyle::fancy() )
-    html.prepend( QString::fromLatin1("<div style=\"float:left;\">%1&nbsp;</div>" ).arg(i18n("Attachments:")) );
-  assert( injectionPoint.tagName() == "div" );
-  static_cast<DOM::HTMLElement>( injectionPoint ).setInnerHTML( html );
+
+    if ( headerStyle() == HeaderStyle::fancy() )
+      html.prepend( QString::fromLatin1("<div style=\"float:left;\">%1&nbsp;</div>" ).arg(i18n("Attachments:")) );
+
+    if ( headerStyle() == HeaderStyle::enterprise() ) {
+      QString link("");
+      link += "<div style=\"text-align: right;\"><a href=\""+urlHandle+"\"><img src=\""+imgpath+imgSrc+"\"/></a></div>";
+      html.prepend( link );
+    }
+
+    assert( injectionPoint.tagName() == "div" );
+    static_cast<DOM::HTMLElement>( injectionPoint ).setInnerHTML( html );  
 }
 
 static QColor nextColor( const QColor & c )
@@ -2681,12 +2710,19 @@
   if ( node->firstChild() ) {
     QString subHtml = renderAttachments( node->firstChild(), nextColor( bgColor ) );
     if ( !subHtml.isEmpty() ) {
+
+      QString visibility;
+      if( !showAttachmentQuicklist() )
+	{
+	  visibility.append( "display:none;" );
+	}
+
       QString margin;
       if ( node != mRootNode || headerStyle() != HeaderStyle::enterprise() )
         margin = "padding:2px; margin:2px; ";
       if ( node->msgPart().typeStr() == "message" || node == mRootNode )
         html += QString::fromLatin1("<div style=\"background:%1; %2"
-            "vertical-align:middle; float:left;\">").arg( bgColor.name() ).arg( margin );
+            "vertical-align:middle; float:left; %3\">").arg( bgColor.name() ).arg( margin ).arg( visibility );
       html += subHtml;
       if ( node->msgPart().typeStr() == "message" || node == mRootNode )
         html += "</div>";
@@ -2709,7 +2745,7 @@
     typeBlacklisted = typeBlacklisted || node == mRootNode;
     if ( !label.isEmpty() && !icon.isEmpty() && !typeBlacklisted ) {
       html += "<div style=\"float:left;\">";
-      html += "<span style=\"white-space:nowrap;\">";
+      html += QString::fromLatin1( "<span style=\"white-space:nowrap; border-width: 0px; border-left-width: 5px; border-color: %1; 2px; border-left-style: solid;\">" ).arg( bgColor.name() );
       html += QString::fromLatin1( "<a href=\"#att%1\">" ).arg( node->nodeId() );
       html += "<img style=\"vertical-align:middle;\" src=\"" + icon + "\"/>&nbsp;";
       if ( headerStyle() == HeaderStyle::enterprise() ) {
@@ -2722,7 +2758,7 @@
     }
   }
 
-  html += renderAttachments( node->nextSibling(), bgColor );
+  html += renderAttachments( node->nextSibling(), nextColor ( bgColor ) );
   return html;
 }
 
Index: kmail/kmmessage.cpp
===================================================================
--- kmail/kmmessage.cpp	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kmail/kmmessage.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1875,7 +1875,12 @@
 QString KMMessage::to() const
 {
   // handle To same as Cc below, bug 80747
-  return KPIM::normalizeAddressesAndDecodeIDNs( headerFields( "To" ).join( ", " ) );
+  QValueList<QCString> rawHeaders = rawHeaderFields( "To" );
+  QStringList headers;
+  for ( QValueList<QCString>::Iterator it = rawHeaders.begin(); it != rawHeaders.end(); ++it ) {
+    headers << *it;
+  }
+  return KPIM::normalizeAddressesAndDecodeIDNs( headers.join( ", " ) );
 }
 
 
@@ -1894,7 +1899,7 @@
 //-----------------------------------------------------------------------------
 QString KMMessage::replyTo() const
 {
-  return KPIM::normalizeAddressesAndDecodeIDNs( headerField("Reply-To") );
+  return KPIM::normalizeAddressesAndDecodeIDNs( rawHeaderField("Reply-To") );
 }
 
 
@@ -1917,7 +1922,12 @@
 {
   // get the combined contents of all Cc headers (as workaround for invalid
   // messages with multiple Cc headers)
-  return KPIM::normalizeAddressesAndDecodeIDNs( headerFields( "Cc" ).join( ", " ) );
+  QValueList<QCString> rawHeaders = rawHeaderFields( "Cc" );
+  QStringList headers;
+  for ( QValueList<QCString>::Iterator it = rawHeaders.begin(); it != rawHeaders.end(); ++it ) {
+    headers << *it;
+  }
+  return KPIM::normalizeAddressesAndDecodeIDNs( headers.join( ", " ) );
 }
 
 
@@ -1938,7 +1948,7 @@
 //-----------------------------------------------------------------------------
 QString KMMessage::bcc() const
 {
-  return KPIM::normalizeAddressesAndDecodeIDNs( headerField("Bcc") );
+  return KPIM::normalizeAddressesAndDecodeIDNs( rawHeaderField("Bcc") );
 }
 
 
@@ -1977,7 +1987,7 @@
 QString KMMessage::who() const
 {
   if (mParent)
-    return KPIM::normalizeAddressesAndDecodeIDNs( headerField(mParent->whoField().utf8()) );
+    return KPIM::normalizeAddressesAndDecodeIDNs( rawHeaderField(mParent->whoField().utf8()) );
   return from();
 }
 
@@ -1985,7 +1995,7 @@
 //-----------------------------------------------------------------------------
 QString KMMessage::from() const
 {
-  return KPIM::normalizeAddressesAndDecodeIDNs( headerField("From") );
+  return KPIM::normalizeAddressesAndDecodeIDNs( rawHeaderField("From") );
 }
 
 
@@ -3126,12 +3136,6 @@
   mMsg->Body().DeleteBodyParts();
 }
 
-void KMMessage::removeBodyPart(DwBodyPart * dwPart)
-{
-  mMsg->Body().RemoveBodyPart( dwPart );
-  mNeedsAssembly = true;
-}
-
 //-----------------------------------------------------------------------------
 DwBodyPart* KMMessage::createDWBodyPart(const KMMessagePart* aPart)
 {
Index: kmail/snippetwidget.h
===================================================================
--- kmail/snippetwidget.h	(.../tags/KDE/3.5.9/kdepim)	(wersja 0)
+++ kmail/snippetwidget.h	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -0,0 +1,95 @@
+/***************************************************************************
+ *   snippet feature from kdevelop/plugins/snippet/                        *
+ *                                                                         * 
+ *   Copyright (C) 2007 by Robert Gruber                                   *
+ *   rgruber@users.sourceforge.net                                         *
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+#ifndef __SNIPPET_WIDGET_H__
+#define __SNIPPET_WIDGET_H__
+
+#include <qwidget.h>
+#include <qstring.h>
+#include <klistview.h>
+#include <qtooltip.h>
+#include <qrect.h>
+
+#include <ktexteditor/editinterface.h>
+#include <ktexteditor/view.h>
+#include "snippetconfig.h"
+
+class KDevProject;
+class SnippetPart;
+class QPushButton;
+class KListView;
+class QListViewItem;
+class QPoint;
+class SnippetDlg;
+class SnippetItem;
+class KTextEdit;
+class KConfig;
+class KMEdit;
+class KActionCollection;
+
+/**
+This is the widget which gets added to the right TreeToolView.
+It inherits KListView and QToolTip which is needed for showing the
+tooltips which contains the text of the snippet
+@author Robert Gruber
+*/
+class SnippetWidget : public KListView, public QToolTip
+{
+  Q_OBJECT
+
+public:
+    SnippetWidget(KMEdit* editor, KActionCollection* actionCollection, QWidget* parent = 0);
+    ~SnippetWidget();
+    QPtrList<SnippetItem> * getList() { return (&_list); }
+    void writeConfig();
+    SnippetConfig *  getSnippetConfig() { return (&_SnippetConfig); }
+
+
+private slots:
+    void initConfig();
+
+protected:
+    void maybeTip( const QPoint & );
+    bool acceptDrag (QDropEvent *event) const;
+
+private:
+    void insertIntoActiveView( const QString &text );
+    QString parseText(QString text, QString del="$");
+    bool showMultiVarDialog(QMap<QString, QString> * map, QMap<QString, QString> * mapSave,
+                            int & iWidth, int & iBasicHeight, int & iOneHeight);
+    QString showSingleVarDialog(QString var, QMap<QString, QString> * mapSave, QRect & dlgSize);
+    SnippetItem* makeItem( SnippetItem* parent, const QString& name, const QString& text, const KShortcut& shortcut );
+
+    QPtrList<SnippetItem> _list;
+    QMap<QString, QString> _mapSaved;
+    KConfig * _cfg;
+    SnippetConfig _SnippetConfig;
+    KMEdit* mEditor;
+    KActionCollection* mActionCollection;
+
+public slots:
+    void slotRemove();
+    void slotEdit( QListViewItem* item_ = 0 );
+    void slotEditGroup();
+    void slotAdd();
+    void slotAddGroup();
+    void slotExecute();
+
+protected slots:
+    void showPopupMenu( QListViewItem * item, const QPoint & p, int );
+    void slotExecuted(QListViewItem * item =  0);
+    void slotDropped(QDropEvent *e, QListViewItem *after);
+    void startDrag();
+};
+
+
+#endif
Index: kmail/messageactions.cpp
===================================================================
--- kmail/messageactions.cpp	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kmail/messageactions.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -70,7 +70,7 @@
     this, SLOT(slotNoQuoteReplyToMsg()), mActionCollection, "noquotereply" );
 
 
-  mCreateTodoAction = new KAction( i18n("Create Task..."), "mail_todo",
+  mCreateTodoAction = new KAction( i18n("Create Task/Reminder..."), "mail_todo",
                                    0, this, SLOT(slotCreateTodo()), mActionCollection,
                                    "create_todo" );
 
Index: kmail/kmail_config_identity.desktop
===================================================================
--- kmail/kmail_config_identity.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kmail/kmail_config_identity.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,5 +1,4 @@
 [Desktop Entry]
-Encoding=UTF-8
 Icon=identity
 Type=Service
 ServiceTypes=KCModule
@@ -38,6 +37,7 @@
 Name[is]=Auðkenni
 Name[it]=Identità
 Name[ja]=個人情報
+Name[ka]=პროფილები
 Name[kk]=Іс-әлпеттері
 Name[km]=អត្តសញ្ញាណ
 Name[lt]=Tapatybės
@@ -62,7 +62,8 @@
 Name[tg]=Профилҳо
 Name[tr]=Kimlikler
 Name[uk]=Профілі
-Name[uz]=Шахсиятлар
+Name[uz]=Shaxsiyatlar
+Name[uz@cyrillic]=Шахсиятлар
 Name[zh_CN]=身份
 Name[zh_TW]=身份
 Comment=Manage Identities
@@ -91,6 +92,7 @@
 Comment[is]=Stjórna auðkennum
 Comment[it]=Gestisce le identità
 Comment[ja]=個人情報の管理
+Comment[ka]=პროფილების მართვა
 Comment[kk]=Іс-әлпеттерді басқару
 Comment[km]=គ្រប់គ្រង​អត្តសញ្ញាណ
 Comment[lt]=Tvarkyti tapatybes
@@ -141,6 +143,7 @@
 Keywords[is]=kmail,auðkenni
 Keywords[it]=kmail,identità
 Keywords[ja]=kmail,個人情報
+Keywords[ka]=kmail,პროფილი
 Keywords[km]=kmail,អត្តសញ្ញាណ
 Keywords[lt]=kmail,identity,tapatybė
 Keywords[mk]=kmail,identity,кпошта,идентитет,идентитети
@@ -162,5 +165,6 @@
 Keywords[tg]=kmail,identity,профил
 Keywords[tr]=kmail,kimlikler
 Keywords[uk]=kmail,профіль
-Keywords[uz]=kmail,шахсият
+Keywords[uz]=kmail,shaxsiyat
+Keywords[uz@cyrillic]=kmail,шахсият
 Keywords[zh_CN]=kmail,identity, 身份
Index: kmail/kmaccount.cpp
===================================================================
--- kmail/kmaccount.cpp	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kmail/kmaccount.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -163,6 +163,16 @@
     installTimer();
 }
 
+void KMAccount::readTimerConfig()
+{
+  // Re-reads and checks check-interval value and deinstalls timer incase check-interval
+  // for mail check is disabled.
+  // Or else, the mail sync goes into a infinite loop (kolab/issue2607)
+  if (mInterval == 0)
+    deinstallTimer();
+  else
+    installTimer();
+}
 
 //-----------------------------------------------------------------------------
 void KMAccount::writeConfig(KConfig& config)
Index: kmail/kmcommands.cpp
===================================================================
--- kmail/kmcommands.cpp	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kmail/kmcommands.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -3369,7 +3369,29 @@
   deleteLater();
 }
 
+DwBodyPart * AttachmentModifyCommand::findPart(KMMessage* msg, int index)
+{
+  int accu = 0;
+  return findPartInternal( msg->getTopLevelPart(), index, accu );
+}
 
+DwBodyPart * AttachmentModifyCommand::findPartInternal(DwEntity * root, int index, int & accu)
+{
+  accu++;
+  if ( index < accu ) // should not happen
+    return 0;
+  DwBodyPart *current = dynamic_cast<DwBodyPart*>( root );
+  if ( index == accu )
+    return current;
+  DwBodyPart *rv = 0;
+  if ( root->Body().FirstBodyPart() )
+    rv = findPartInternal( root->Body().FirstBodyPart(), index, accu );
+  if ( !rv && current && current->Next() )
+    rv = findPartInternal( current->Next(), index, accu );
+  return rv;
+}
+
+
 KMDeleteAttachmentCommand::KMDeleteAttachmentCommand(partNode * node, KMMessage * msg, QWidget * parent) :
     AttachmentModifyCommand( node, msg, parent )
 {
@@ -3385,15 +3407,18 @@
 {
   KMMessage *msg = retrievedMessage();
   KMMessagePart part;
-  // -2 because partNode counts root and body of the message as well
-  DwBodyPart *dwpart = msg->dwBodyPart( mPartIndex - 2 );
+  DwBodyPart *dwpart = findPart( msg, mPartIndex );
   if ( !dwpart )
     return Failed;
   KMMessage::bodyPart( dwpart, &part, true );
   if ( !part.isComplete() )
      return Failed;
-  msg->removeBodyPart( dwpart );
 
+  DwBody *parentNode = dynamic_cast<DwBody*>( dwpart->Parent() );
+  if ( !parentNode )
+    return Failed;
+  parentNode->RemoveBodyPart( dwpart );
+
   // add dummy part to show that a attachment has been deleted
   KMMessagePart dummyPart;
   dummyPart.duplicate( part );
@@ -3409,7 +3434,9 @@
   } else if ( cd.isEmpty() ) {
     dummyPart.setContentDisposition( "attachment" );
   }
-  msg->addBodyPart( &dummyPart );
+  DwBodyPart* newDwPart = msg->createDWBodyPart( &dummyPart );
+  parentNode->AddBodyPart( newDwPart );
+  msg->getTopLevelPart()->Assemble();
 
   KMMessage *newMsg = new KMMessage();
   newMsg->fromDwString( msg->asDwString() );
@@ -3435,14 +3462,16 @@
 {
   KMMessage *msg = retrievedMessage();
   KMMessagePart part;
-  // -2 because partNode counts root and body of the message as well
-  DwBodyPart *dwpart = msg->dwBodyPart( mPartIndex - 2 );
+  DwBodyPart *dwpart = findPart( msg, mPartIndex );
   if ( !dwpart )
     return Failed;
   KMMessage::bodyPart( dwpart, &part, true );
   if ( !part.isComplete() )
      return Failed;
 
+  if( !dynamic_cast<DwBody*>( dwpart->Parent() ) )
+    return Failed;
+
   mTempFile.file()->writeBlock( part.bodyDecodedBinary() );
   mTempFile.file()->flush();
 
@@ -3472,16 +3501,21 @@
   // build the new message
   KMMessage *msg = retrievedMessage();
   KMMessagePart part;
-  // -2 because partNode counts root and body of the message as well
-  DwBodyPart *dwpart = msg->dwBodyPart( mPartIndex - 2 );
+  DwBodyPart *dwpart = findPart( msg, mPartIndex );
   KMMessage::bodyPart( dwpart, &part, true );
-  msg->removeBodyPart( dwpart );
 
+  DwBody *parentNode = dynamic_cast<DwBody*>( dwpart->Parent() );
+  assert( parentNode );
+  parentNode->RemoveBodyPart( dwpart );
+
   KMMessagePart att;
   att.duplicate( part );
   att.setBodyEncodedBinary( data );
-  msg->addBodyPart( &att );
 
+  DwBodyPart* newDwPart = msg->createDWBodyPart( &att );
+  parentNode->AddBodyPart( newDwPart );
+  msg->getTopLevelPart()->Assemble();
+
   KMMessage *newMsg = new KMMessage();
   newMsg->fromDwString( msg->asDwString() );
   newMsg->setStatus( msg->status() );
Index: kmail/kmfoldercachedimap.cpp
===================================================================
--- kmail/kmfoldercachedimap.cpp	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kmail/kmfoldercachedimap.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -301,6 +301,11 @@
 
 void KMFolderCachedImap::writeConfig()
 {
+  // don't re-write the config of a removed folder, this has just been deleted in
+  // the folder manager
+  if ( mFolderRemoved )
+    return;
+
   KConfigGroup configGroup( KMKernel::config(), "Folder-" + folder()->idString() );
   configGroup.writeEntry( "ImapPath", mImapPath );
   configGroup.writeEntry( "NoContent", mNoContent );
@@ -484,8 +489,15 @@
     uidMapDirty = true;
   }
 
+  KMFolderOpener openThis(folder(), "KMFolderCachedImap::addMsgInternal");
+  int rc = openThis.openResult();
+  if ( rc ) {
+    kdDebug(5006) << k_funcinfo << "open: " << rc << " of folder: " << label() << endl;
+    return rc;
+  }
+
   // Add the message
-  int rc = KMFolderMaildir::addMsg(msg, index_return);
+  rc = KMFolderMaildir::addMsg(msg, index_return);
 
   if( newMail && ( imapPath() == "/INBOX/" || ( !GlobalSettings::self()->filterOnlyDIMAPInbox()
       && (userRights() <= 0 || userRights() & ACLJobs::Administer )
@@ -2711,10 +2723,11 @@
   bool cont = true;
   if ( job->error() ) {
     // Don't show error if the server doesn't support ANNOTATEMORE and this folder only contains mail
-    if ( job->error() == KIO::ERR_UNSUPPORTED_ACTION && contentsType() == ContentsTypeMail )
+    if ( job->error() == KIO::ERR_UNSUPPORTED_ACTION && contentsType() == ContentsTypeMail ) {
       if (mAccount->slave()) mAccount->removeJob(job);
-    else
+    } else {
       cont = mAccount->handleJobError( job, i18n( "Error while setting annotation: " ) + '\n' );
+    }
   } else {
     if (mAccount->slave()) mAccount->removeJob(job);
   }
@@ -2733,7 +2746,10 @@
       // highest one as well. If not, our notion of the highest
       // uid we've seen thus far is wrong, which is dangerous, so
       // don't update the mLastUid, then.
-      bool sane = false;
+      // Not entirely true though, mails might have been moved out
+      // of the folder already by filters, thus giving us a higher tentative
+      // uid than we actually observe here.
+      bool sane = count() == 0;
 
       for (int i=0;i<count(); i++ ) {
           ulong uid = getMsgBase(i)->UID();
@@ -2743,11 +2759,8 @@
               kdWarning(5006) << "uid: " << uid << " mTentativeHighestUid: " << mTentativeHighestUid << endl;
               assert( false );
               break;
-          } else if ( uid == mTentativeHighestUid || lastUid() ) {
-              // we've found our highest uid, all is well
+          } else {
               sane = true;
-          } else {
-              // must be smaller, that's ok, let's wait for bigger fish
           }
       }
       if (sane) {
Index: kmail/eventsrc
===================================================================
--- kmail/eventsrc	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kmail/eventsrc	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -34,6 +34,7 @@
 Name[is]=Nýr póstur
 Name[it]=Nuova posta arrivata
 Name[ja]=新規メール着信
+Name[ka]=მიღებულია ახალი ფოსტა
 Name[kk]=Жаңа пошта келді
 Name[km]=មាន​អ៊ីមែល​ថ្មី​មក​ដល់
 Name[lt]=Atėjo naujas paštas
@@ -59,7 +60,8 @@
 Name[tg]=Почтаи нав қабул шуд
 Name[tr]=Yeni E-posta Geldi
 Name[uk]=Отримана нова пошта
-Name[uz]=Янги хат келди
+Name[uz]=Yangi xat keldi
+Name[uz@cyrillic]=Янги хат келди
 Name[zh_CN]=新邮件到达
 Name[zh_TW]=您有新郵件
 Comment=New mail arrived
@@ -88,6 +90,7 @@
 Comment[is]=Nýr póstur
 Comment[it]=Nuova posta
 Comment[ja]=新規メール着信
+Comment[ka]=მიღებულია ახალი ფოსტა
 Comment[kk]=Жаңа пошта келді
 Comment[km]=មាន​អ៊ីមែល​ថ្មី​មក​ដល់
 Comment[lt]=Atėjo naujas paštas
@@ -113,7 +116,8 @@
 Comment[tg]=Почтаи нав қабул шуд
 Comment[tr]=Yeni e-posta geldi
 Comment[uk]=Надійшла нова пошта
-Comment[uz]=Янги хат келди
+Comment[uz]=Yangi xat keldi
+Comment[uz@cyrillic]=Янги хат келди
 Comment[zh_CN]=新邮件到达
 Comment[zh_TW]=您有新郵件
 default_sound=
Index: kmail/kmkernel.cpp
===================================================================
--- kmail/kmkernel.cpp	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kmail/kmkernel.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1529,7 +1529,7 @@
   mBackgroundTasksTimer = new QTimer( this, "mBackgroundTasksTimer" );
   connect( mBackgroundTasksTimer, SIGNAL( timeout() ), this, SLOT( slotRunBackgroundTasks() ) );
 #ifdef DEBUG_SCHEDULER // for debugging, see jobscheduler.h
-  mBackgroundTasksTimer->start( 10000, true ); // 10s minute, singleshot
+  mBackgroundTasksTimer->start( 10000, true ); // 10s, singleshot
 #else
   mBackgroundTasksTimer->start( 5 * 60000, true ); // 5 minutes, singleshot
 #endif
Index: kmail/headerstyle.cpp
===================================================================
--- kmail/headerstyle.cpp	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kmail/headerstyle.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -290,7 +290,7 @@
       if ( fromStr.isEmpty() ) // no valid email in from, maybe just a name
         fromStr = message->fromStrip(); // let's use that
       headerStr.append(i18n("From: ") +
-          KMMessage::emailAddrAsAnchor( fromStr, "", false) );
+          KMMessage::emailAddrAsAnchor( fromStr, false, "", true ) );
       if ( !vCardName.isEmpty() )
         headerStr.append("&nbsp;&nbsp;<a href=\"" + vCardName +
               "\">" + i18n("[vCard]") + "</a>" );
@@ -894,7 +894,7 @@
     // kmail icon
     if(topLevel) {
         headerStr +=
-        "<div class=\"noprint\" style=\"position: absolute; top: -14px; left: 0px; width: 95%; height: 200px;\">\n"
+        "<div class=\"noprint\" style=\"position: absolute; top: -14px; right: 30px; width: 91px; height: 91px;\">\n"
         "<img style=\"float: right;\" src=\""+imgpath+"icon.png\">\n"
         "</div>\n";
 
Index: kmail/favoritefolderview.h
===================================================================
--- kmail/favoritefolderview.h	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kmail/favoritefolderview.h	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -55,6 +55,7 @@
 
     KMFolderTreeItem* addFolder( KMFolder *folder, const QString &name = QString::null,
                                  QListViewItem *after = 0 );
+    void addFolder( KMFolderTreeItem *fti );
 
   public slots:
     void folderTreeSelectionChanged( KMFolder *folder );
Index: kmail/callback.h
===================================================================
--- kmail/callback.h	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kmail/callback.h	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -69,6 +69,9 @@
   /** Get the receiver of the mail */
   QString receiver() const;
 
+  /** Returns the sender of the mail. */
+  QString sender() const;
+
   /** Close the main window showing this message, if it's a secondary window. */
   void closeIfSecondaryWindow() const;
 
Index: kmail/aboutdata.cpp
===================================================================
--- kmail/aboutdata.cpp	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kmail/aboutdata.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -211,7 +211,7 @@
   AboutData::AboutData()
     : KAboutData( "kmail", I18N_NOOP("KMail"),KMAIL_VERSION,
                   I18N_NOOP("KDE Email Client"), License_GPL,
-                  I18N_NOOP("(c) 1997-2005, The KMail developers"), 0,
+                  I18N_NOOP("(c) 1997-2008, The KMail developers"), 0,
                   "http://kontact.kde.org/kmail/" )
   {
     using KMail::authors;
Index: kmail/kmfoldercachedimap.h
===================================================================
--- kmail/kmfoldercachedimap.h	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kmail/kmfoldercachedimap.h	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -213,8 +213,11 @@
   void setSilentUpload( bool silent ) { mSilentUpload = silent; }
   bool silentUpload() { return mSilentUpload; }
 
-  virtual int createIndexFromContents()
-    { return KMFolderMaildir::createIndexFromContents(); }
+  virtual int createIndexFromContents() {
+    const int result = KMFolderMaildir::createIndexFromContents();
+    reloadUidMap();
+    return result;
+  }
 
   int createIndexFromContentsRecursive();
 
Index: kmail/composercryptoconfiguration.ui
===================================================================
--- kmail/composercryptoconfiguration.ui	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kmail/composercryptoconfiguration.ui	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -56,7 +56,7 @@
                         <cstring>mEncToSelf</cstring>
                     </property>
                     <property name="text">
-                        <string>Always encr&amp;ypt to self</string>
+                        <string>When encrypting emails, always also encr&amp;ypt to the certificate of my own identity</string>
                     </property>
                     <property name="whatsThis" stdset="0">
                         <string>When this option is enabled, the message/file will not only be encrypted with the receiver's public key, but also with your key. This will enable you to decrypt the message/file at a later time. This is generally a good idea.</string>
Index: kmail/listjob.h
===================================================================
--- kmail/listjob.h	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kmail/listjob.h	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -77,7 +77,7 @@
    * side subscription managed by the ctor parameter.
    */
   void setHonorLocalSubscription( bool value );
-  
+
   /**
    * Return whether the listing includes only folders that the
    * account is subscribed to locally. This is different from the server
@@ -97,18 +97,12 @@
   void setComplete( bool complete ) { mComplete = complete; }
 
   /** Set parent progress item */
-  void setParentProgressItem( KPIM::ProgressItem* it ) { 
+  void setParentProgressItem( KPIM::ProgressItem* it ) {
     mParentProgressItem = it; }
 
   /** Set the namespace for this listing */
   void setNamespace( const QString& ns ) { mNamespace = ns; }
 
-protected:
-  /**
-   * Does the actual KIO::listDir
-   */
-  void doListing( const KURL& url, const ImapAccountBase::jobData& jd );
-
 protected slots:
   /**
    * Is called when the listing is done
Index: kmail/kmmainwidget.cpp
===================================================================
--- kmail/kmmainwidget.cpp	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kmail/kmmainwidget.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -152,6 +152,7 @@
     mQuickSearchLine( 0 ),
     mShowBusySplashTimer( 0 ),
     mShowingOfflineScreen( false ),
+    mMsgActions( 0 ),
     mVacationIndicatorActive( false )
 {
   // must be the first line of the constructor:
@@ -642,6 +643,9 @@
 
   if (mReaderWindowActive) {
     mMsgView = new KMReaderWin(messageParent, this, actionCollection(), 0 );
+    if ( mMsgActions ) {
+      mMsgActions->setMessageView( mMsgView );
+    }
 
     connect(mMsgView, SIGNAL(replaceMsgByUnencryptedVersion()),
         this, SLOT(slotReplaceMsgByUnencryptedVersion()));
@@ -3302,15 +3306,10 @@
     bool allSelectedInCommonThread = false;
     if ( mHeaders->isThreaded() && count > 1 ) {
       allSelectedInCommonThread = true;
-      QListViewItem * curItemParent = mHeaders->currentItem();
-      while ( curItemParent->parent() )
-        curItemParent = curItemParent->parent();
       for ( QPtrListIterator<QListViewItem> it( selectedItems ) ;
             it.current() ; ++ it ) {
         QListViewItem * item = *it;
-        while ( item->parent() )
-          item = item->parent();
-        if ( item != curItemParent ) {
+        if ( item->parent()==0 && item->childCount()==0 ) {
           allSelectedInCommonThread = false;
           break;
         }
Index: kmail/imapjob.cpp
===================================================================
--- kmail/imapjob.cpp	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kmail/imapjob.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -650,8 +650,8 @@
     QString errStr = i18n("Error while copying messages.");
     if ( (*it).progressItem )
       (*it).progressItem->setStatus( errStr );
-    account->handleJobError( job, errStr  );
-    deleteLater();
+    if ( account->handleJobError( job, errStr  ) )
+      deleteLater();
     return;
   } else {
     if ( !(*it).msgList.isEmpty() )
Index: kmail/encodingdetector_ja.cpp
===================================================================
--- kmail/encodingdetector_ja.cpp	(.../tags/KDE/3.5.9/kdepim)	(wersja 0)
+++ kmail/encodingdetector_ja.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -0,0 +1,376 @@
+/*
+ * This file is part of the KDE libraries
+ *
+ * Copyright 2000-2003 Shiro Kawai <shiro@acm.org>, All rights reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ *
+ *  1. Redistributions of source code must retain the above copyright
+ *     notice, this list of conditions and the following disclaimer.
+ *
+ *  2. Redistributions in binary form must reproduce the above copyright
+ *     notice, this list of conditions and the following disclaimer in the
+ *     documentation and/or other materials provided with the distribution.
+ *
+ *  3. Neither the name of the authors nor the names of its contributors
+ *     may be used to endorse or promote products derived from this
+ *     software without specific prior written permission.
+ *
+ * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
+ * "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
+ * LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
+ * A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
+ * OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED
+ * TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
+ * PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
+ * LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
+ * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
+ * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
+ *
+ */
+/*
+ * original code is here.
+ * http://cvs.sourceforge.net/viewcvs.py/gauche/Gauche/ext/charconv/guess.c?view=markup
+ */
+
+/*
+ * Maybe we should use QTextCodec::heuristicContentMatch()
+ * But it fails detection. It's not useful.
+ */
+#include "encodingdetector_ja_p.h"
+
+/* DFA tables */
+const dfa_table guess_eucj_st[] = {
+ { /* state init */
+  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,
+  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,
+  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,
+  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,
+  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,
+  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,
+  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,
+  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,
+ -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,  1,  2,
+ -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,
+ -1,  3,  3,  3,  3,  3,  3,  3,  3,  3,  3,  3,  3,  3,  3,  3,
+  3,  3,  3,  3,  3,  3,  3,  3,  3,  3,  3,  3,  3,  3,  3,  3,
+  3,  3,  3,  3,  3,  3,  3,  3,  3,  3,  3,  3,  3,  3,  3,  3,
+  3,  3,  3,  3,  3,  3,  3,  3,  3,  3,  3,  3,  3,  3,  3,  3,
+  3,  3,  3,  3,  3,  3,  3,  3,  3,  3,  3,  3,  3,  3,  3,  3,
+  3,  3,  3,  3,  3,  3,  3,  3,  3,  3,  3,  3,  3,  3,  3, -1,
+ },
+ { /* state jis0201_kana */
+ -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,
+ -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,
+ -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,
+ -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,
+ -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,
+ -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,
+ -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,
+ -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,
+ -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,
+ -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,
+ -1,  4,  4,  4,  4,  4,  4,  4,  4,  4,  4,  4,  4,  4,  4,  4,
+  4,  4,  4,  4,  4,  4,  4,  4,  4,  4,  4,  4,  4,  4,  4,  4,
+  4,  4,  4,  4,  4,  4,  4,  4,  4,  4,  4,  4,  4,  4,  4,  4,
+  4,  4,  4,  4,  4,  4,  4,  4,  4,  4,  4,  4,  4,  4,  4,  4,
+ -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,
+ -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,
+ },
+ { /* state jis0213_1 */
+ -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,
+ -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,
+ -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,
+ -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,
+ -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,
+ -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,
+ -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,
+ -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,
+ -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,
+ -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,
+ -1,  5,  5,  5,  5,  5,  5,  5,  5,  5,  5,  5,  5,  5,  5,  5,
+  5,  5,  5,  5,  5,  5,  5,  5,  5,  5,  5,  5,  5,  5,  5,  5,
+  5,  5,  5,  5,  5,  5,  5,  5,  5,  5,  5,  5,  5,  5,  5,  5,
+  5,  5,  5,  5,  5,  5,  5,  5,  5,  5,  5,  5,  5,  5,  5,  5,
+  5,  5,  5,  5,  5,  5,  5,  5,  5,  5,  5,  5,  5,  5,  5,  5,
+  5,  5,  5,  5,  5,  5,  5,  5,  5,  5,  5,  5,  5,  5,  5, -1,
+ },
+ { /* state jis0213_2 */
+ -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,
+ -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,
+ -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,
+ -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,
+ -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,
+ -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,
+ -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,
+ -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,
+ -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,
+ -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,
+ -1,  6,  6,  6,  6,  6,  6,  6,  6,  6,  6,  6,  6,  6,  6,  6,
+  6,  6,  6,  6,  6,  6,  6,  6,  6,  6,  6,  6,  6,  6,  6,  6,
+  6,  6,  6,  6,  6,  6,  6,  6,  6,  6,  6,  6,  6,  6,  6,  6,
+  6,  6,  6,  6,  6,  6,  6,  6,  6,  6,  6,  6,  6,  6,  6,  6,
+  6,  6,  6,  6,  6,  6,  6,  6,  6,  6,  6,  6,  6,  6,  6,  6,
+  6,  6,  6,  6,  6,  6,  6,  6,  6,  6,  6,  6,  6,  6,  6, -1,
+ },
+};
+
+guess_arc guess_eucj_ar[7] = {
+ {  0, 1.0   }, /* init -> init */
+ {  1, 0.8   }, /* init -> jis0201_kana */
+ {  3, 0.95  }, /* init -> jis0213_2 */
+ {  2, 1.0   }, /* init -> jis0213_1 */
+ {  0, 1.0   }, /* jis0201_kana -> init */
+ {  0, 1.0   }, /* jis0213_1 -> init */
+ {  0, 1.0   }, /* jis0213_2 -> init */
+};
+
+const dfa_table guess_sjis_st[] = {
+ { /* state init */
+  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,
+  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,
+  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,
+  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,
+  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,
+  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,
+  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,
+  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,
+ -1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,
+  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,
+ -1,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,
+  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,
+  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,
+  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,
+ -1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,
+  3,  3,  3,  3,  3,  3,  3,  3,  3,  3,  3,  3,  3,  4,  4,  4,
+ },
+ { /* state jis0213 */
+ -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,
+ -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,
+ -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,
+ -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,
+  5,  5,  5,  5,  5,  5,  5,  5,  5,  5,  5,  5,  5,  5,  5,  5,
+  5,  5,  5,  5,  5,  5,  5,  5,  5,  5,  5,  5,  5,  5,  5,  5,
+  5,  5,  5,  5,  5,  5,  5,  5,  5,  5,  5,  5,  5,  5,  5,  5,
+  5,  5,  5,  5,  5,  5,  5,  5,  5,  5,  5,  5,  5,  5,  5, -1,
+  5,  5,  5,  5,  5,  5,  5,  5,  5,  5,  5,  5,  5,  5,  5,  5,
+  5,  5,  5,  5,  5,  5,  5,  5,  5,  5,  5,  5,  5,  5,  5,  5,
+  5,  5,  5,  5,  5,  5,  5,  5,  5,  5,  5,  5,  5,  5,  5,  5,
+  5,  5,  5,  5,  5,  5,  5,  5,  5,  5,  5,  5,  5,  5,  5,  5,
+  5,  5,  5,  5,  5,  5,  5,  5,  5,  5,  5,  5,  5,  5,  5,  5,
+  5,  5,  5,  5,  5,  5,  5,  5,  5,  5,  5,  5,  5,  5,  5,  5,
+  5,  5,  5,  5,  5,  5,  5,  5,  5,  5,  5,  5,  5,  5,  5,  5,
+  5,  5,  5,  5,  5,  5,  5,  5,  5,  5,  5,  5,  5, -1, -1, -1,
+ },
+};
+
+guess_arc guess_sjis_ar[6] = {
+ {  0, 1.0   }, /* init -> init */
+ {  1, 1.0   }, /* init -> jis0213 */
+ {  0, 0.8   }, /* init -> init */
+ {  1, 0.95  }, /* init -> jis0213 */
+ {  0, 0.8   }, /* init -> init */
+ {  0, 1.0   }, /* jis0213 -> init */
+};
+
+const dfa_table guess_utf8_st[] = {
+ { /* state init */
+  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,
+  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,
+  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,
+  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,
+  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,
+  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,
+  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,
+  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,
+ -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,
+ -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,
+ -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,
+ -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,
+ -1, -1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,
+  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,
+  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,
+  3,  3,  3,  3,  3,  3,  3,  3,  4,  4,  4,  4,  5,  5, -1, -1,
+ },
+ { /* state 1byte_more */
+ -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,
+ -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,
+ -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,
+ -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,
+ -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,
+ -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,
+ -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,
+ -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,
+  6,  6,  6,  6,  6,  6,  6,  6,  6,  6,  6,  6,  6,  6,  6,  6,
+  6,  6,  6,  6,  6,  6,  6,  6,  6,  6,  6,  6,  6,  6,  6,  6,
+  6,  6,  6,  6,  6,  6,  6,  6,  6,  6,  6,  6,  6,  6,  6,  6,
+  6,  6,  6,  6,  6,  6,  6,  6,  6,  6,  6,  6,  6,  6,  6,  6,
+ -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,
+ -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,
+ -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,
+ -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,
+ },
+ { /* state 2byte_more */
+ -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,
+ -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,
+ -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,
+ -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,
+ -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,
+ -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,
+ -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,
+ -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,
+  7,  7,  7,  7,  7,  7,  7,  7,  7,  7,  7,  7,  7,  7,  7,  7,
+  7,  7,  7,  7,  7,  7,  7,  7,  7,  7,  7,  7,  7,  7,  7,  7,
+  7,  7,  7,  7,  7,  7,  7,  7,  7,  7,  7,  7,  7,  7,  7,  7,
+  7,  7,  7,  7,  7,  7,  7,  7,  7,  7,  7,  7,  7,  7,  7,  7,
+ -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,
+ -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,
+ -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,
+ -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,
+ },
+ { /* state 3byte_more */
+ -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,
+ -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,
+ -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,
+ -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,
+ -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,
+ -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,
+ -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,
+ -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,
+  8,  8,  8,  8,  8,  8,  8,  8,  8,  8,  8,  8,  8,  8,  8,  8,
+  8,  8,  8,  8,  8,  8,  8,  8,  8,  8,  8,  8,  8,  8,  8,  8,
+  8,  8,  8,  8,  8,  8,  8,  8,  8,  8,  8,  8,  8,  8,  8,  8,
+  8,  8,  8,  8,  8,  8,  8,  8,  8,  8,  8,  8,  8,  8,  8,  8,
+ -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,
+ -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,
+ -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,
+ -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,
+ },
+ { /* state 4byte_more */
+ -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,
+ -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,
+ -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,
+ -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,
+ -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,
+ -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,
+ -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,
+ -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,
+  9,  9,  9,  9,  9,  9,  9,  9,  9,  9,  9,  9,  9,  9,  9,  9,
+  9,  9,  9,  9,  9,  9,  9,  9,  9,  9,  9,  9,  9,  9,  9,  9,
+  9,  9,  9,  9,  9,  9,  9,  9,  9,  9,  9,  9,  9,  9,  9,  9,
+  9,  9,  9,  9,  9,  9,  9,  9,  9,  9,  9,  9,  9,  9,  9,  9,
+ -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,
+ -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,
+ -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,
+ -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,
+ },
+ { /* state 5byte_more */
+ -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,
+ -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,
+ -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,
+ -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,
+ -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,
+ -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,
+ -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,
+ -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,
+ 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10,
+ 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10,
+ 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10,
+ 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10,
+ -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,
+ -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,
+ -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,
+ -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,
+ },
+};
+
+guess_arc guess_utf8_ar[11] = {
+ {  0, 1.0   }, /* init -> init */
+ {  1, 1.0   }, /* init -> 1byte_more */
+ {  2, 1.0   }, /* init -> 2byte_more */
+ {  3, 1.0   }, /* init -> 3byte_more */
+ {  4, 1.0   }, /* init -> 4byte_more */
+ {  5, 1.0   }, /* init -> 5byte_more */
+ {  0, 1.0   }, /* 1byte_more -> init */
+ {  1, 1.0   }, /* 2byte_more -> 1byte_more */
+ {  2, 1.0   }, /* 3byte_more -> 2byte_more */
+ {  3, 1.0   }, /* 4byte_more -> 3byte_more */
+ {  4, 1.0   }, /* 5byte_more -> 4byte_more */
+};
+
+/* Guessing Routine */
+enum JapaneseCode::Type JapaneseCode::guess_jp(const char *buf, int buflen)
+{
+    int i;
+    guess_dfa *top = 0;
+
+    for (i=0; i<buflen; i++) {
+        int c = (unsigned char)buf[i];
+
+        /* special treatment of jis escape sequence */
+        if (c == 0x1b || last_JIS_escape) {
+            if (i < buflen-1) {
+                if (last_JIS_escape)
+                    c = (unsigned char)buf[i];
+                else
+                    c = (unsigned char)buf[++i];
+                last_JIS_escape = false;
+
+                if (c == '$' || c == '(') {
+                    return JapaneseCode::JIS;
+                }
+            } else {
+                last_JIS_escape = true;
+            }
+        }
+
+        if (DFA_ALIVE(eucj)) {
+            if (!DFA_ALIVE(sjis) && !DFA_ALIVE(utf8)) return JapaneseCode::EUC;
+            DFA_NEXT(eucj, c);
+        }
+        if (DFA_ALIVE(sjis)) {
+            if (!DFA_ALIVE(eucj) && !DFA_ALIVE(utf8)) return JapaneseCode::SJIS;
+            DFA_NEXT(sjis, c);
+        }
+        if (DFA_ALIVE(utf8)) {
+            if (!DFA_ALIVE(sjis) && !DFA_ALIVE(eucj)) return JapaneseCode::UTF8;
+            DFA_NEXT(utf8, c);
+        }
+
+        if (!DFA_ALIVE(eucj) && !DFA_ALIVE(sjis) && !DFA_ALIVE(utf8)) {
+            /* we ran out the possibilities */
+            return JapaneseCode::ASCII;
+        }
+    }
+
+    /* ascii code check */
+    if (eucj->score == 1.0 && sjis->score == 1.0 && utf8->score == 1.0)
+        return JapaneseCode::ASCII;
+
+    /* Now, we have ambigous code.  Pick the highest score.  If more than
+       one candidate tie, pick the default encoding. */
+    if (DFA_ALIVE(eucj)) top = eucj;
+    if (DFA_ALIVE(utf8)) {
+        if (top) {
+            if (top->score <  utf8->score) top = utf8;
+        } else {
+            top = utf8;
+        }
+    }
+    if (DFA_ALIVE(sjis)) {
+        if (top) {
+            if (top->score <= sjis->score) top = sjis;
+        } else {
+            top = sjis;
+        }
+    }
+
+    if (top == eucj) return JapaneseCode::EUC;
+    if (top == utf8) return JapaneseCode::UTF8;
+    if (top == sjis) return JapaneseCode::SJIS;
+
+    return JapaneseCode::ASCII;
+}
Index: kmail/sievejob.h
===================================================================
--- kmail/sievejob.h	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kmail/sievejob.h	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -38,6 +38,10 @@
     SieveJob( const KURL & url, const QString & script,
 	      const QValueStack<Command> & commands,
 	      QObject * parent=0, const char * name=0 );
+    SieveJob( const KURL & url, const QString & script,
+	      const QValueStack<Command> & commands,
+	      bool showProgressInfo,
+	      QObject * parent=0, const char * name=0 );
     virtual ~SieveJob();
 
   public:
@@ -53,7 +57,7 @@
     /**
      * Get a specific Sieve script
      */
-    static SieveJob * get( const KURL & src );
+    static SieveJob * get( const KURL & src, bool showProgressInfo=true );
 
     /**
      * List all available scripts
@@ -87,14 +91,14 @@
      */
     void gotList( KMail::SieveJob *job, bool success,
                   const QStringList &scriptList, const QString &activeScript );
-    
+
     void result(  KMail::SieveJob * job, bool success,
                   const QString & script, bool active );
 
     void item( KMail::SieveJob * job, const QString & filename, bool active );
 
   protected:
-    void schedule( Command command );
+    void schedule( Command command, bool showProgressInfo );
 
   protected slots:
     void slotData( KIO::Job *, const QByteArray & ); // for get
@@ -111,6 +115,7 @@
     Existence mFileExists;
     QStringList mSieveCapabilities;
     QValueStack<Command> mCommands;
+    bool mShowProgressInfo;
 
     // List of Sieve scripts on the server, used by @ref list()
     QStringList mAvailableScripts;
Index: kmail/kmcomposewin.h
===================================================================
--- kmail/kmcomposewin.h	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kmail/kmcomposewin.h	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -348,7 +348,7 @@
   /**
    * Read settings from app's config file.
    */
-  void readConfig(void);
+  void readConfig( bool reload = false );
   /**
    * Change window title to given string.
    */
Index: kmail/kmcommands.h
===================================================================
--- kmail/kmcommands.h	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kmail/kmcommands.h	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -32,6 +32,8 @@
 class KMMsgBase;
 class KMReaderWin;
 class partNode;
+class DwBodyPart;
+class DwEntity;
 namespace KIO { class Job; }
 namespace KMail {
   class Composer;
@@ -1038,6 +1040,7 @@
 
   protected:
     void storeChangedMessage( KMMessage* msg );
+    DwBodyPart* findPart( KMMessage* msg, int index );
     virtual Result doAttachmentModify() = 0;
 
   protected:
@@ -1046,6 +1049,7 @@
 
   private:
     Result execute();
+    DwBodyPart* findPartInternal( DwEntity* root, int index, int &accu );
 
   private slots:
     void messageStoreResult( KMFolderImap* folder, bool success );
Index: kmail/vacation.cpp
===================================================================
--- kmail/vacation.cpp	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kmail/vacation.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -435,7 +435,7 @@
     kdDebug(5006) << "Vacation: found url \"" << mUrl.prettyURL() << "\"" << endl;
     if ( mUrl.isEmpty() ) // nothing to do...
       return;
-    mSieveJob = SieveJob::get( mUrl );
+    mSieveJob = SieveJob::get( mUrl, !checkOnly );
     connect( mSieveJob, SIGNAL(gotScript(KMail::SieveJob*,bool,const QString&,bool)),
 	     SLOT(slotGetResult(KMail::SieveJob*,bool,const QString&,bool)) );
   }
Index: kmail/kmcomposewin.cpp
===================================================================
--- kmail/kmcomposewin.cpp	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kmail/kmcomposewin.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -30,6 +30,7 @@
 #include "kmcommands.h"
 #include "kcursorsaver.h"
 #include "partNode.h"
+#include "encodingdetector.h"
 #include "attachmentlistview.h"
 #include "transportmanager.h"
 using KMail::AttachmentListView;
@@ -142,7 +143,7 @@
 
 #include "kmcomposewin.moc"
 
-#include "snippet_widget.h"
+#include "snippetwidget.h"
 
 KMail::Composer * KMail::makeComposer( KMMessage * msg, uint identitiy ) {
   return KMComposeWin::create( msg, identitiy );
@@ -646,7 +647,7 @@
 }
 
 //-----------------------------------------------------------------------------
-void KMComposeWin::readConfig(void)
+void KMComposeWin::readConfig( bool reload /* = false */ )
 {
   mDefCharset = KMMessage::defaultCharset();
   mBtnIdentity->setChecked( GlobalSettings::self()->stickyIdentity() );
@@ -689,20 +690,21 @@
   }
   mEdtSubject->setFont(mBodyFont);
 
-  QSize siz = GlobalSettings::self()->composerSize();
-  if (siz.width() < 200) siz.setWidth(200);
-  if (siz.height() < 200) siz.setHeight(200);
-  resize(siz);
+  if ( !reload ) {
+    QSize siz = GlobalSettings::self()->composerSize();
+    if (siz.width() < 200) siz.setWidth(200);
+    if (siz.height() < 200) siz.setHeight(200);
+    resize(siz);
 
-  if ( !GlobalSettings::self()->snippetSplitterPosition().isEmpty() ) {
-    mSnippetSplitter->setSizes( GlobalSettings::self()->snippetSplitterPosition() );
-  } else {
-    QValueList<int> defaults;
-    defaults << (int)(width() * 0.8) << (int)(width() * 0.2);
-    mSnippetSplitter->setSizes( defaults );
+    if ( !GlobalSettings::self()->snippetSplitterPosition().isEmpty() ) {
+      mSnippetSplitter->setSizes( GlobalSettings::self()->snippetSplitterPosition() );
+    } else {
+      QValueList<int> defaults;
+      defaults << (int)(width() * 0.8) << (int)(width() * 0.2);
+      mSnippetSplitter->setSizes( defaults );
+    }
   }
 
-
   mIdentity->setCurrentIdentity( mId );
 
   kdDebug(5006) << "KMComposeWin::readConfig. " << mIdentity->currentIdentityName() << endl;
@@ -2749,9 +2751,18 @@
       emit attachmentAdded(attachURL, true);
     return;
   }
-  const QCString partCharset = (*it).url.fileEncoding().isEmpty()
-                             ? mCharset
-                             : QCString((*it).url.fileEncoding().latin1());
+  QCString partCharset;
+  if ( !( *it ).url.fileEncoding().isEmpty() ) {
+    partCharset = QCString( ( *it ).url.fileEncoding().latin1() );
+  } else {
+    EncodingDetector ed;
+    KLocale *loc = KGlobal::locale();
+    ed.setAutoDetectLanguage( EncodingDetector::scriptForLanguageCode ( loc->language() ) );
+    ed.analyze( (*it).data );
+    partCharset = ed.encoding();
+    if ( partCharset.isEmpty() ) //shouldn't happen
+      partCharset = mCharset;
+  }
 
   KMMessagePart* msgPart;
 
@@ -2785,7 +2796,8 @@
 
   QCString encoding = KMMsgBase::autoDetectCharset(partCharset,
     KMMessage::preferredCharsets(), name);
-  if (encoding.isEmpty()) encoding = "utf-8";
+  if ( encoding.isEmpty() )
+    encoding = "utf-8";
 
   QCString encName;
   if ( GlobalSettings::self()->outlookCompatibleAttachments() )
@@ -4358,9 +4370,10 @@
    {
       mEditor->sync();
       if ( append ) {
-       mEditor->append(mOldSigText);
+        mEditor->setText( mEditor->text() + mOldSigText );
     } else {
-       mEditor->insertAt(mOldSigText, pos, 0);
+        mOldSigText = "\n\n"+mOldSigText+"\n";
+        mEditor->insertAt(mOldSigText, pos, 0);
     }
     mEditor->update();
     mEditor->setModified(mod);
@@ -4917,9 +4930,10 @@
 
 void KMComposeWin::slotConfigChanged()
 {
-  readConfig();
+  readConfig( true /*reload*/);
   updateAutoSave();
   rethinkFields();
+  slotWordWrapToggled( mWordWrapAction->isChecked() );
 }
 
 /*
Index: kmail/kmreaderwin.h
===================================================================
--- kmail/kmreaderwin.h	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kmail/kmreaderwin.h	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -162,6 +162,10 @@
   /** Clear the reader and discard the current message. */
   void clear(bool force = false) { setMsg(0, force); }
 
+  /** Saves the relative position of the scroll view. Call this before calling update()
+      if you want to preserve the current view. */
+  void saveRelativePosition();
+
   /** Re-parse the current message. */
   void update(bool force = false);
 
@@ -292,6 +296,12 @@
   /** Show signature details. */
   void setShowSignatureDetails( bool showDetails = true ) { mShowSignatureDetails = showDetails; }
 
+  /* show or hide the list that points to the attachments */
+  bool showAttachmentQuicklist() const { return mShowAttachmentQuicklist; }
+
+  /* show or hide the list that points to the attachments */
+  void setShowAttachmentQuicklist( bool showAttachmentQuicklist = true ) { mShowAttachmentQuicklist = showAttachmentQuicklist; }
+
 signals:
   /** Emitted after parsing of a message to have it stored
       in unencrypted state in it's folder. */
@@ -528,6 +538,7 @@
 	int mLevelQuote;
   bool mDecrytMessageOverwrite;
   bool mShowSignatureDetails;
+  bool mShowAttachmentQuicklist;
 };
 
 
Index: kmail/kmail_view.desktop
===================================================================
--- kmail/kmail_view.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kmail/kmail_view.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,5 +1,4 @@
 [Desktop Entry]
-Encoding=UTF-8
 Name=KMail
 Name[eo]=Retpoŝto
 Name[hi]=के-मेल
Index: kmail/popaccount.h
===================================================================
--- kmail/popaccount.h	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kmail/popaccount.h	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -150,6 +150,7 @@
   QMap<QString, int> mTimeOfNextSeenMsgsMap; // map of uid to times of seen messages
   QDict<int> mSizeOfNextSeenMsgsDict;
   QStringList idsOfMsgsToDelete;
+  QStringList idsOfForcedDeletes;
   int indexOfCurrentMsg;
 
   QValueList<KMMessage*> msgsAwaitingProcessing;
Index: kmail/callback.cpp
===================================================================
--- kmail/callback.cpp	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kmail/callback.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -171,6 +171,7 @@
           "receiver of this message,<br>please "
           "choose which of the following addresses "
           "is yours, if any:");
+      addrs += kmkernel->identityManager()->allEmails();
     } else {
       selectMessage = i18n("<qt>Several of your identities match the "
           "receiver of this message,<br>please "
@@ -211,3 +212,8 @@
 {
     return GlobalSettings::self()->deleteInvitationEmailsAfterSendingReply();
 }
+
+QString Callback::sender() const
+{
+  return mMsg->from();
+}
Index: kmail/configuredialog.cpp
===================================================================
--- kmail/configuredialog.cpp	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kmail/configuredialog.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -4985,6 +4985,24 @@
     KMFolder* folder = mFolderCombo->folder();
     if (  folder )
       folderId = folder->idString();
+    KMAccount* account = 0;
+    // Didn't find an easy way to find the account for a given folder...
+    // Fallback: iterate over accounts to select folderId if found (as an inbox folder)
+    for( KMAccount *a = kmkernel->acctMgr()->first();
+        a && !account; // stop when found
+        a = kmkernel->acctMgr()->next() ) {
+      if( a->folder() && a->folder()->child() ) {
+        KMFolderNode *node;
+        for ( node = a->folder()->child()->first(); node; node = a->folder()->child()->next() )
+        {
+          if ( static_cast<KMFolder*>(node) == folder ) {
+            account = a;
+            break;
+          }
+        }
+      }
+    }
+    GlobalSettings::self()->setTheIMAPResourceAccount( account ? account->id() : 0 );
   } else {
     // Inbox folder of the selected account
     KMAccount* acct = mAccountCombo->currentAccount();
Index: kmail/configure.in.in
===================================================================
--- kmail/configure.in.in	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kmail/configure.in.in	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -57,8 +57,30 @@
   AC_LANG_RESTORE
   ])
 
-  if test "$kde_cv_have_inotify" = "yes" ; then
+  AC_CACHE_VAL(kde_cv_have_sys_inotify,
+  [
+  kde_cv_have_sys_inotify=no
+  AC_LANG_SAVE
+  AC_LANG_C
+
+  AC_TRY_COMPILE(
+  [
+#include <sys/inotify.h>
+  ],
+  [
+#ifndef IN_ALL_EVENTS
+#error no inotify notification
+#endif
+  ],kde_cv_have_sys_inotify=yes,kde_cv_have_sys_inotify=no)
+
+  AC_LANG_RESTORE
+  ])
+
+  if test "$kde_cv_have_inotify" = "yes" -o "$kde_cv_have_sys_inotify" = "yes"; then
     AC_DEFINE_UNQUOTED(HAVE_INOTIFY, 1, [Define if your system has Linux Inode Notification])
+    if test "$kde_cv_have_sys_inotify" = "yes"; then
+      AC_DEFINE_UNQUOTED(HAVE_SYS_INOTIFY, 1, [Define if your system has glibc support for inotify])
+    fi
     AC_MSG_RESULT(yes)
   else
     AC_MSG_RESULT(no)
Index: kmail/kmfolderimap.cpp
===================================================================
--- kmail/kmfolderimap.cpp	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kmail/kmfolderimap.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -639,8 +639,9 @@
   for ( QStringList::Iterator it = personal.begin(); it != personal.end(); ++it )
   {
     KMail::ListJob* job = new KMail::ListJob( account(), type, this,
-	account()->addPathToNamespace( *it ) );
+    account()->addPathToNamespace( *it ) );
     job->setNamespace( *it );
+    job->setHonorLocalSubscription( true );
     connect( job, SIGNAL(receivedFolders(const QStringList&, const QStringList&,
             const QStringList&, const QStringList&, const ImapAccountBase::jobData&)),
         this, SLOT(slotListResult(const QStringList&, const QStringList&,
@@ -654,6 +655,7 @@
   for ( QStringList::Iterator it = ns.begin(); it != ns.end(); ++it )
   {
     KMail::ListJob* job = new  KMail::ListJob( account(), type, this, account()->addPathToNamespace( *it ) );
+    job->setHonorLocalSubscription( true );
     connect( job, SIGNAL(receivedFolders(const QStringList&, const QStringList&,
             const QStringList&, const QStringList&, const ImapAccountBase::jobData&)),
         this, SLOT(slotCheckNamespace(const QStringList&, const QStringList&,
Index: kmail/popaccount.cpp
===================================================================
--- kmail/popaccount.cpp	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kmail/popaccount.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -389,6 +389,8 @@
   idsOfMsgs.clear();
   mUidForIdMap.clear();
   idsOfMsgsToDelete.clear();
+  idsOfForcedDeletes.clear();
+
   //delete any headers if there are some this have to be done because of check again
   headersOnServer.clear();
   headers = false;
@@ -735,6 +737,12 @@
         idsOfMsgsToDelete.remove( it.key().second );
       }
     }
+
+    if ( !idsOfForcedDeletes.isEmpty() ) {
+      idsOfMsgsToDelete += idsOfForcedDeletes;
+      idsOfForcedDeletes.clear();
+    }
+
     // If there are messages to delete then delete them
     if ( !idsOfMsgsToDelete.isEmpty() ) {
       stage = Dele;
@@ -923,8 +931,8 @@
   QString qdata = data;
   qdata = qdata.simplifyWhiteSpace(); // Workaround for Maillennium POP3/UNIBOX
   int spc = qdata.find( ' ' );
-  if (spc > 0) {
-    if (stage == List) {
+  if ( stage == List ) {
+    if ( spc > 0 ) {
       QString length = qdata.mid(spc+1);
       if (length.find(' ') != -1) length.truncate(length.find(' '));
       int len = length.toInt();
@@ -933,46 +941,76 @@
       idsOfMsgs.append( id );
       mMsgsPendingDownload.insert( id, len );
     }
-    else { // stage == Uidl
-      const QString id = qdata.left(spc);
-      const QString uid = qdata.mid(spc + 1);
-      int *size = new int; //malloc(size_of(int));
-      *size = mMsgsPendingDownload[id];
-      mSizeOfNextSeenMsgsDict.insert( uid, size );
-      if ( mUidsOfSeenMsgsDict.find( uid ) != 0 ) {
+    else {
+      stage = Idle;
+      if ( job ) job->kill();
+      job = 0;
+      mSlave = 0;
+      KMessageBox::error( 0, i18n( "Unable to complete LIST operation." ),
+                             i18n( "Invalid Response From Server") );
+      return;
+    }
+  }
+  else { // stage == Uidl
+    Q_ASSERT ( stage == Uidl);
 
-        if ( mMsgsPendingDownload.contains( id ) ) {
-          mMsgsPendingDownload.remove( id );
-        }
-        else
-          kdDebug(5006) << "PopAccount::slotData synchronization failure." << endl;
-        idsOfMsgsToDelete.append( id );
-        mUidsOfNextSeenMsgsDict.insert( uid, (const int *)1 );
-        if ( mTimeOfSeenMsgsVector.empty() ) {
-          mTimeOfNextSeenMsgsMap.insert( uid, time(0) );
-        }
-        else {
-          // cast the int* with a long to can convert it to a int, BTW
-          // works with g++-4.0 and amd64
-          mTimeOfNextSeenMsgsMap.insert( uid,
-            mTimeOfSeenMsgsVector[(int)( long )mUidsOfSeenMsgsDict[uid] - 1] );
-        }
+    QString id;
+    QString uid;
+
+    if ( spc <= 0 ) {
+      // an invalid uidl line. we might just need to skip it, but
+      // some servers generate invalid uids with valid ids. in that
+      // case we will just make up a uid - which will cause us to
+      // not cache the document, but we will be able to interoperate
+
+      int testid = atoi ( qdata.ascii() );
+      if ( testid < 1 ) {
+        // we'll just have to skip this
+        kdDebug(5006) << "PopAccount::slotData skipping UIDL entry due to parse error "
+                      << endl << qdata.ascii() << endl;
+        return;
       }
-      mUidForIdMap.insert( id, uid );
+      id.setNum (testid, 10);
+
+      QString datestring, serialstring;
+
+      serialstring.setNum ( ++dataCounter, 10 );
+      datestring.setNum ( time(NULL),10 );
+      uid = QString( "uidlgen" ) + datestring + QString( "." ) + serialstring;
+      kdDebug(5006) << "PopAccount::slotData message " << id.ascii()
+                    <<  "%d has bad UIDL, cannot keep a copy on server" << endl;
+      idsOfForcedDeletes.append( id );
     }
+    else {
+      id = qdata.left( spc );
+      uid = qdata.mid( spc + 1 );
+    }
+
+    int *size = new int; //malloc(size_of(int));
+    *size = mMsgsPendingDownload[id];
+    mSizeOfNextSeenMsgsDict.insert( uid, size );
+    if ( mUidsOfSeenMsgsDict.find( uid ) != 0 ) {
+      if ( mMsgsPendingDownload.contains( id ) ) {
+        mMsgsPendingDownload.remove( id );
+      }
+      else
+        kdDebug(5006) << "PopAccount::slotData synchronization failure." << endl;
+      idsOfMsgsToDelete.append( id );
+      mUidsOfNextSeenMsgsDict.insert( uid, (const int *)1 );
+      if ( mTimeOfSeenMsgsVector.empty() ) {
+        mTimeOfNextSeenMsgsMap.insert( uid, time(0) );
+      }
+      else {
+        // cast the int* with a long to can convert it to a int, BTW
+        // works with g++-4.0 and amd64
+        mTimeOfNextSeenMsgsMap.insert( uid, mTimeOfSeenMsgsVector[(int)( long )
+                                                 mUidsOfSeenMsgsDict[uid] - 1] );
+      }
+    }
+    mUidForIdMap.insert( id, uid );
   }
-  else {
-    stage = Idle;
-    if (job) job->kill();
-    job = 0;
-    mSlave = 0;
-    KMessageBox::error(0, i18n( "Unable to complete LIST operation." ),
-                          i18n("Invalid Response From Server"));
-    return;
-  }
 }
 
-
 //-----------------------------------------------------------------------------
 void PopAccount::slotResult( KIO::Job* )
 {
Index: kmail/accountmanager.cpp
===================================================================
--- kmail/accountmanager.cpp	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kmail/accountmanager.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -7,6 +7,7 @@
 #include "accountmanager.h"
 
 #include "kmaccount.h"
+#include "kmacctfolder.h"
 #include "kmacctmaildir.h"
 #include "kmacctlocal.h"
 #include "popaccount.h"
@@ -113,6 +114,12 @@
   mNewMailArrived = false;
   mInteractive = interactive;
 
+ // if sync has been requested by the user then check if check-interval was disabled by user, if yes, then 
+ // de-install the timer
+ // Safe guard against an infinite sync loop (kolab/issue2607)
+  if ( mInteractive ) 
+      account->readTimerConfig();
+
   // queue the account
   mAcctTodo.append(account);
 
@@ -233,6 +240,11 @@
 {
   if ( account ) {
     mAcctList.append( account );
+    // init folder's account list
+    KMAcctFolder *folder = static_cast<KMAcctFolder*>( account->folder() );
+    if ( folder && !folder->hasAccounts() ) {
+      folder->addAccount( account );
+    }
     emit accountAdded( account );
     account->installTimer();
   }
Index: kmail/kmail_config_appearance.desktop
===================================================================
--- kmail/kmail_config_appearance.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kmail/kmail_config_appearance.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,5 +1,4 @@
 [Desktop Entry]
-Encoding=UTF-8
 Icon=looknfeel
 Type=Service
 ServiceTypes=KCModule
@@ -40,6 +39,7 @@
 Name[is]=Útlit
 Name[it]=Aspetto
 Name[ja]=外観
+Name[ka]=იერსახე
 Name[kk]=Сыртқы көрінісі
 Name[km]=រូបរាង
 Name[ko]=모양
@@ -66,7 +66,8 @@
 Name[tg]=Намуди зоҳирӣ
 Name[tr]=Görünüm
 Name[uk]=Вигляд
-Name[uz]=Кўриниши
+Name[uz]=Koʻrinishi
+Name[uz@cyrillic]=Кўриниши
 Name[zh_CN]=外观
 Comment=Customize Visual Appearance
 Comment[af]=Pasmaak die visuele voorkoms
@@ -92,6 +93,7 @@
 Comment[is]=Stilla útlit
 Comment[it]=Personalizza l'aspetto
 Comment[ja]=外観をカスタマイズ
+Comment[ka]=ვიზუალური იერსახის დაყენება
 Comment[kk]=Сыртқы көрінісін ыңғайлау
 Comment[km]=ប្ដូរ​រូបរាង​មើល​ឃើញ​តាម​បំណង
 Comment[lt]=Derinti vizualinę išvaizdą
@@ -141,6 +143,7 @@
 Keywords[is]=kmail,útlit
 Keywords[it]=kmail,aspetto
 Keywords[ja]=kmail,外観
+Keywords[ka]=kmail,იერსახე
 Keywords[km]=kmail,រូបរាង
 Keywords[lt]=kmail,appearance,išvaizda
 Keywords[mk]=kmail,appearance,кпошта,појава,изглед,визуелно
Index: kmail/kmfolder.cpp
===================================================================
--- kmail/kmfolder.cpp	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kmail/kmfolder.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -127,7 +127,7 @@
 
   connect( mStorage, SIGNAL( contentsTypeChanged( KMail::FolderContentsType ) ),
                 this, SLOT( slotContentsTypeChanged( KMail::FolderContentsType ) ) );
-  
+
   connect( mStorage, SIGNAL( folderSizeChanged() ),
            this, SLOT( slotFolderSizeChanged() ) );
 
@@ -148,6 +148,7 @@
 
 KMFolder::~KMFolder()
 {
+  mStorage->close( "~KMFolder", true );
   delete mAcctList;
   if ( mHasIndex ) mStorage->deregisterFromMessageDict();
   delete mStorage;
Index: kmail/encodingdetector.cpp
===================================================================
--- kmail/encodingdetector.cpp	(.../tags/KDE/3.5.9/kdepim)	(wersja 0)
+++ kmail/encodingdetector.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -0,0 +1,1377 @@
+/*
+    This file was taken from the KDE 4.x libraries and backported to Qt 3.
+
+    Copyright (C) 1999 Lars Knoll (knoll@kde.org)
+    Copyright (C) 2003 Dirk Mueller (mueller@kde.org)
+    Copyright (C) 2003 Apple Computer, Inc.
+    Copyright (C) 2007 Nick Shaforostoff (shafff@ukr.net)
+
+    This library is free software; you can redistribute it and/or
+    modify it under the terms of the GNU Library General Public
+    License as published by the Free Software Foundation; either
+    version 2 of the License, or (at your option) any later version.
+
+    This library is distributed in the hope that it will be useful,
+    but WITHOUT ANY WARRANTY; without even the implied warranty of
+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
+    Library General Public License for more details.
+
+    You should have received a copy of the GNU Library General Public License
+    along with this library; see the file COPYING.LIB.  If not, write to
+    the Free Software Foundation, Inc., 51 Franklin Street, Fifth Floor,
+    Boston, MA 02110-1301, USA.
+*/
+//----------------------------------------------------------------------------
+//
+// decoder for input stream
+
+#include "encodingdetector.h"
+
+#undef DECODE_DEBUG
+//#define DECODE_DEBUG
+
+#define MAX_BUFFER 16*1024
+
+#include <assert.h>
+#include <stdlib.h>
+
+#include "encodingdetector_ja_p.h"
+
+#include <qregexp.h>
+#include <qtextcodec.h>
+
+#include <kglobal.h>
+#include <kcharsets.h>
+#include <kdebug.h>
+#include <klocale.h>
+
+#include <ctype.h>
+
+// The following table was taken from libpango 1.19.3 and slightly modified.
+// Multiple scripts per language were removed and the entries were reordered so
+// that simple substring matching will work. For example, bam was put before ba
+// so that the first match will be likely the right match. Otherwise "ba" would
+// match "bam" but we would have to search on to find "bam" which is what we want.
+// The original file is called pango-script-lang-table.h
+
+/* pango-script-lang-table.h:
+ * 
+ * Generated by gen-script-for-lang-new.c
+ * Date: 2007-10-26
+ * Source: fontconfig-2.4.91
+ * 
+ * Do not edit. // I did. Sue me ;)
+ */
+typedef struct _PangoScriptForLang {
+  const char lang[6];
+  EncodingDetector::AutoDetectScript scripts[1];
+} PangoScriptForLang;
+
+//Unfortunately EncodingDetector does not know all scripts that Pango knows.
+//Also, using EncodingDetector::CentralEuropean for the appropriate countries
+//might give better results in some cases.
+//One especially important (many speakers/literates) omission is the lack of
+//Indian scripts.
+
+#define PANGO_SCRIPT_ARMENIAN EncodingDetector::None
+#define PANGO_SCRIPT_BENGALI EncodingDetector::None
+#define PANGO_SCRIPT_CANADIAN_ABORIGINAL EncodingDetector::None
+#define PANGO_SCRIPT_CHEROKEE EncodingDetector::None
+#define PANGO_SCRIPT_DEVANAGARI EncodingDetector::None
+#define PANGO_SCRIPT_ETHIOPIC EncodingDetector::None
+#define PANGO_SCRIPT_GUJARATI EncodingDetector::None
+#define PANGO_SCRIPT_GURMUKHI EncodingDetector::None
+#define PANGO_SCRIPT_KANNADA EncodingDetector::None
+#define PANGO_SCRIPT_KHMER EncodingDetector::None
+#define PANGO_SCRIPT_LAO EncodingDetector::None
+#define PANGO_SCRIPT_MALAYALAM EncodingDetector::None
+#define PANGO_SCRIPT_MONGOLIAN EncodingDetector::None
+#define PANGO_SCRIPT_MYANMAR EncodingDetector::None
+#define PANGO_SCRIPT_ORIYA EncodingDetector::None
+#define PANGO_SCRIPT_SINHALA EncodingDetector::None
+#define PANGO_SCRIPT_SYRIAC EncodingDetector::None
+#define PANGO_SCRIPT_TAGALOG EncodingDetector::None
+#define PANGO_SCRIPT_TAMIL EncodingDetector::None
+#define PANGO_SCRIPT_TIBETAN EncodingDetector::None
+#define PANGO_SCRIPT_TELUGU EncodingDetector::None
+
+//Instead of changing the table even more...
+#define PANGO_SCRIPT_ARABIC EncodingDetector::Arabic
+#define PANGO_SCRIPT_CYRILLIC EncodingDetector::Cyrillic
+#define PANGO_SCRIPT_GEORGIAN EncodingDetector::SouthEasternEurope
+#define PANGO_SCRIPT_GREEK EncodingDetector::Greek
+#define PANGO_SCRIPT_HEBREW EncodingDetector::Hebrew
+#define PANGO_SCRIPT_LATIN EncodingDetector::WesternEuropean
+#define PANGO_SCRIPT_THAI EncodingDetector::Thai
+
+
+static const PangoScriptForLang pango_script_for_lang[] = {
+  { "aa",    { PANGO_SCRIPT_LATIN/*62*/ } },
+  { "ab",    { PANGO_SCRIPT_CYRILLIC/*90*/ } },
+  { "af",    { PANGO_SCRIPT_LATIN/*69*/ } },
+  { "am",    { PANGO_SCRIPT_ETHIOPIC/*218*/ } },
+  { "ar",    { PANGO_SCRIPT_ARABIC/*125*/ } },
+  { "as",    { PANGO_SCRIPT_BENGALI/*89*/ } },
+  { "ast",   { PANGO_SCRIPT_LATIN/*66*/ } },
+  { "ava",   { PANGO_SCRIPT_CYRILLIC/*67*/ } },
+  { "ay",    { PANGO_SCRIPT_LATIN/*60*/ } },
+  { "az-ir", { PANGO_SCRIPT_ARABIC/*129*/ } },
+  { "az",    { PANGO_SCRIPT_CYRILLIC/*80*/ } }, //, PANGO_SCRIPT_LATIN/*68*/ } },
+  { "bam",   { PANGO_SCRIPT_LATIN/*60*/ } },
+  { "ba",    { PANGO_SCRIPT_CYRILLIC/*82*/ } },
+  { "be",    { PANGO_SCRIPT_CYRILLIC/*68*/ } },
+  { "bg",    { PANGO_SCRIPT_CYRILLIC/*60*/ } },
+  { "bh",    { PANGO_SCRIPT_DEVANAGARI/*68*/ } },
+  { "bho",   { PANGO_SCRIPT_DEVANAGARI/*68*/ } },
+  { "bi",    { PANGO_SCRIPT_LATIN/*58*/ } },
+  { "bin",   { PANGO_SCRIPT_LATIN/*76*/ } },
+  { "bn",    { PANGO_SCRIPT_BENGALI/*89*/ } },
+  { "bo",    { PANGO_SCRIPT_TIBETAN/*95*/ } },
+  { "br",    { PANGO_SCRIPT_LATIN/*64*/ } },
+  { "bs",    { PANGO_SCRIPT_LATIN/*62*/ } },
+  { "bua",   { PANGO_SCRIPT_CYRILLIC/*70*/ } },
+  { "ca",    { PANGO_SCRIPT_LATIN/*74*/ } },
+  { "ce",    { PANGO_SCRIPT_CYRILLIC/*67*/ } },
+  { "chm",   { PANGO_SCRIPT_CYRILLIC/*76*/ } },
+  { "chr",   { PANGO_SCRIPT_CHEROKEE/*85*/ } },
+  { "ch",    { PANGO_SCRIPT_LATIN/*58*/ } },
+  { "co",    { PANGO_SCRIPT_LATIN/*84*/ } },
+  { "cs",    { PANGO_SCRIPT_LATIN/*82*/ } },
+  { "cu",    { PANGO_SCRIPT_CYRILLIC/*103*/ } },
+  { "cv",    { PANGO_SCRIPT_CYRILLIC/*72*/ } }, //, PANGO_SCRIPT_LATIN/*2*/ } },
+  { "cy",    { PANGO_SCRIPT_LATIN/*78*/ } },
+  { "da",    { PANGO_SCRIPT_LATIN/*70*/ } },
+  { "de",    { PANGO_SCRIPT_LATIN/*59*/ } },
+  { "dz",    { PANGO_SCRIPT_TIBETAN/*95*/ } },
+  { "el",    { PANGO_SCRIPT_GREEK/*69*/ } },
+  { "en",    { PANGO_SCRIPT_LATIN/*72*/ } },
+  { "eo",    { PANGO_SCRIPT_LATIN/*64*/ } },
+  { "es",    { PANGO_SCRIPT_LATIN/*66*/ } },
+//  { "et",    { PANGO_SCRIPT_LATIN/*64*/ } },
+  { "et",    { EncodingDetector::Baltic } },
+  { "eu",    { PANGO_SCRIPT_LATIN/*56*/ } },
+  { "fa",    { PANGO_SCRIPT_ARABIC/*129*/ } },
+  { "fi",    { PANGO_SCRIPT_LATIN/*62*/ } },
+  { "fj",    { PANGO_SCRIPT_LATIN/*52*/ } },
+  { "fo",    { PANGO_SCRIPT_LATIN/*68*/ } },
+  { "fr",    { PANGO_SCRIPT_LATIN/*84*/ } },
+  { "ful",   { PANGO_SCRIPT_LATIN/*62*/ } },
+  { "fur",   { PANGO_SCRIPT_LATIN/*66*/ } },
+  { "fy",    { PANGO_SCRIPT_LATIN/*75*/ } },
+  { "ga",    { PANGO_SCRIPT_LATIN/*80*/ } },
+  { "gd",    { PANGO_SCRIPT_LATIN/*70*/ } },
+  { "gez",   { PANGO_SCRIPT_ETHIOPIC/*218*/ } },
+  { "gl",    { PANGO_SCRIPT_LATIN/*66*/ } },
+  { "gn",    { PANGO_SCRIPT_LATIN/*70*/ } },
+  { "gu",    { PANGO_SCRIPT_GUJARATI/*78*/ } },
+  { "gv",    { PANGO_SCRIPT_LATIN/*54*/ } },
+  { "ha",    { PANGO_SCRIPT_LATIN/*60*/ } },
+  { "haw",   { PANGO_SCRIPT_LATIN/*62*/ } },
+  { "he",    { PANGO_SCRIPT_HEBREW/*27*/ } },
+  { "hi",    { PANGO_SCRIPT_DEVANAGARI/*68*/ } },
+  { "ho",    { PANGO_SCRIPT_LATIN/*52*/ } },
+  { "hr",    { PANGO_SCRIPT_LATIN/*62*/ } },
+  { "hu",    { PANGO_SCRIPT_LATIN/*70*/ } },
+  { "hy",    { PANGO_SCRIPT_ARMENIAN/*77*/ } },
+  { "ia",    { PANGO_SCRIPT_LATIN/*52*/ } },
+  { "ibo",   { PANGO_SCRIPT_LATIN/*58*/ } },
+  { "id",    { PANGO_SCRIPT_LATIN/*54*/ } },
+  { "ie",    { PANGO_SCRIPT_LATIN/*52*/ } },
+  { "ik",    { PANGO_SCRIPT_CYRILLIC/*68*/ } },
+  { "io",    { PANGO_SCRIPT_LATIN/*52*/ } },
+  { "is",    { PANGO_SCRIPT_LATIN/*70*/ } },
+  { "it",    { PANGO_SCRIPT_LATIN/*72*/ } },
+  { "iu",    { PANGO_SCRIPT_CANADIAN_ABORIGINAL/*161*/ } },
+//  { "ja",    { PANGO_SCRIPT_HAN/*6356*/, PANGO_SCRIPT_KATAKANA/*88*/, PANGO_SCRIPT_HIRAGANA/*85*/ } },
+  { "ja",    { EncodingDetector::Japanese } },
+  { "kaa",   { PANGO_SCRIPT_CYRILLIC/*78*/ } },
+  { "ka",    { PANGO_SCRIPT_GEORGIAN/*33*/ } },
+  { "ki",    { PANGO_SCRIPT_LATIN/*56*/ } },
+  { "kk",    { PANGO_SCRIPT_CYRILLIC/*77*/ } },
+  { "kl",    { PANGO_SCRIPT_LATIN/*81*/ } },
+  { "km",    { PANGO_SCRIPT_KHMER/*70*/ } },
+  { "kn",    { PANGO_SCRIPT_KANNADA/*80*/ } },
+//  { "ko",    { PANGO_SCRIPT_HANGUL/*2443*/ } },
+  { "ko",    { EncodingDetector::Korean } },
+  { "kok",   { PANGO_SCRIPT_DEVANAGARI/*68*/ } },
+  { "ks",    { PANGO_SCRIPT_DEVANAGARI/*68*/ } },
+  { "ku-ir", { PANGO_SCRIPT_ARABIC/*32*/ } },
+  { "ku",    { PANGO_SCRIPT_CYRILLIC/*60*/ } }, //, PANGO_SCRIPT_LATIN/*4*/ } },
+  { "kum",   { PANGO_SCRIPT_CYRILLIC/*66*/ } },
+  { "kv",    { PANGO_SCRIPT_CYRILLIC/*70*/ } },
+  { "kw",    { PANGO_SCRIPT_LATIN/*64*/ } },
+  { "ky",    { PANGO_SCRIPT_CYRILLIC/*70*/ } },
+  { "la",    { PANGO_SCRIPT_LATIN/*68*/ } },
+  { "lb",    { PANGO_SCRIPT_LATIN/*75*/ } },
+  { "lez",   { PANGO_SCRIPT_CYRILLIC/*67*/ } },
+  { "ln",    { PANGO_SCRIPT_LATIN/*78*/ } },
+  { "lo",    { PANGO_SCRIPT_LAO/*65*/ } },
+//  { "lt",    { PANGO_SCRIPT_LATIN/*70*/ } },
+  { "lt",    { EncodingDetector::Baltic } },
+//  { "lv",    { PANGO_SCRIPT_LATIN/*78*/ } },
+  { "lv",    { EncodingDetector::Baltic } },
+  { "mg",    { PANGO_SCRIPT_LATIN/*56*/ } },
+  { "mh",    { PANGO_SCRIPT_LATIN/*62*/ } },
+  { "mi",    { PANGO_SCRIPT_LATIN/*64*/ } },
+  { "mk",    { PANGO_SCRIPT_CYRILLIC/*42*/ } },
+  { "ml",    { PANGO_SCRIPT_MALAYALAM/*78*/ } },
+  { "mn",    { PANGO_SCRIPT_MONGOLIAN/*130*/ } },
+  { "mo",    { PANGO_SCRIPT_CYRILLIC/*66*/ } }, //, PANGO_SCRIPT_LATIN/*62*/ } },
+  { "mr",    { PANGO_SCRIPT_DEVANAGARI/*68*/ } },
+  { "mt",    { PANGO_SCRIPT_LATIN/*72*/ } },
+  { "my",    { PANGO_SCRIPT_MYANMAR/*48*/ } },
+  { "nb",    { PANGO_SCRIPT_LATIN/*70*/ } },
+  { "nds",   { PANGO_SCRIPT_LATIN/*59*/ } },
+  { "ne",    { PANGO_SCRIPT_DEVANAGARI/*68*/ } },
+  { "nl",    { PANGO_SCRIPT_LATIN/*82*/ } },
+  { "nn",    { PANGO_SCRIPT_LATIN/*76*/ } },
+  { "no",    { PANGO_SCRIPT_LATIN/*70*/ } },
+  { "nr",    { PANGO_SCRIPT_LATIN/*52*/ } },
+  { "nso",   { PANGO_SCRIPT_LATIN/*58*/ } },
+  { "ny",    { PANGO_SCRIPT_LATIN/*54*/ } },
+  { "oc",    { PANGO_SCRIPT_LATIN/*70*/ } },
+  { "om",    { PANGO_SCRIPT_LATIN/*52*/ } },
+  { "or",    { PANGO_SCRIPT_ORIYA/*79*/ } },
+  { "os",    { PANGO_SCRIPT_CYRILLIC/*66*/ } },
+  { "pa",    { PANGO_SCRIPT_GURMUKHI/*63*/ } },
+  { "pl",    { PANGO_SCRIPT_LATIN/*70*/ } },
+  { "ps-af", { PANGO_SCRIPT_ARABIC/*49*/ } },
+  { "ps-pk", { PANGO_SCRIPT_ARABIC/*49*/ } },
+  { "pt",    { PANGO_SCRIPT_LATIN/*82*/ } },
+  { "rm",    { PANGO_SCRIPT_LATIN/*66*/ } },
+  { "ro",    { PANGO_SCRIPT_LATIN/*62*/ } },
+  { "ru",    { PANGO_SCRIPT_CYRILLIC/*66*/ } },
+  { "sah",   { PANGO_SCRIPT_CYRILLIC/*76*/ } },
+  { "sa",    { PANGO_SCRIPT_DEVANAGARI/*68*/ } },
+  { "sco",   { PANGO_SCRIPT_LATIN/*56*/ } },
+  { "sel",   { PANGO_SCRIPT_CYRILLIC/*66*/ } },
+  { "se",    { PANGO_SCRIPT_LATIN/*66*/ } },
+  { "sh",    { PANGO_SCRIPT_CYRILLIC/*76*/ } },
+  { "si",    { PANGO_SCRIPT_SINHALA/*77*/ } },
+  { "sk",    { PANGO_SCRIPT_LATIN/*86*/ } },
+  { "sl",    { PANGO_SCRIPT_LATIN/*62*/ } },
+  { "sma",   { PANGO_SCRIPT_LATIN/*60*/ } },
+  { "smj",   { PANGO_SCRIPT_LATIN/*60*/ } },
+  { "smn",   { PANGO_SCRIPT_LATIN/*68*/ } },
+  { "sms",   { PANGO_SCRIPT_LATIN/*80*/ } },
+  { "sm",    { PANGO_SCRIPT_LATIN/*52*/ } },
+  { "so",    { PANGO_SCRIPT_LATIN/*52*/ } },
+  { "sq",    { PANGO_SCRIPT_LATIN/*56*/ } },
+  { "sr",    { PANGO_SCRIPT_CYRILLIC/*76*/ } },
+  { "ss",    { PANGO_SCRIPT_LATIN/*52*/ } },
+  { "st",    { PANGO_SCRIPT_LATIN/*52*/ } },
+  { "sv",    { PANGO_SCRIPT_LATIN/*68*/ } },
+  { "sw",    { PANGO_SCRIPT_LATIN/*52*/ } },
+  { "syr",   { PANGO_SCRIPT_SYRIAC/*45*/ } },
+  { "ta",    { PANGO_SCRIPT_TAMIL/*48*/ } },
+  { "te",    { PANGO_SCRIPT_TELUGU/*80*/ } },
+  { "tg",    { PANGO_SCRIPT_CYRILLIC/*78*/ } },
+  { "th",    { PANGO_SCRIPT_THAI/*86*/ } },
+  { "ti-er", { PANGO_SCRIPT_ETHIOPIC/*255*/ } },
+  { "ti-et", { PANGO_SCRIPT_ETHIOPIC/*255*/ } },
+  { "tig",   { PANGO_SCRIPT_ETHIOPIC/*221*/ } },
+  { "tk",    { PANGO_SCRIPT_CYRILLIC/*74*/ } },
+  { "tl",    { PANGO_SCRIPT_TAGALOG/*19*/ } },
+  { "tn",    { PANGO_SCRIPT_LATIN/*58*/ } },
+  { "to",    { PANGO_SCRIPT_LATIN/*52*/ } },
+//  { "tr",    { PANGO_SCRIPT_LATIN/*70*/ } },
+  { "tr",    { EncodingDetector::Turkish } },
+  { "ts",    { PANGO_SCRIPT_LATIN/*52*/ } },
+  { "tt",    { PANGO_SCRIPT_CYRILLIC/*76*/ } },
+  { "tw",    { PANGO_SCRIPT_LATIN/*70*/ } },
+  { "tyv",   { PANGO_SCRIPT_CYRILLIC/*70*/ } },
+  { "ug",    { PANGO_SCRIPT_ARABIC/*125*/ } },
+  { "uk",    { PANGO_SCRIPT_CYRILLIC/*72*/ } },
+  { "ur",    { PANGO_SCRIPT_ARABIC/*145*/ } },
+  { "uz",    { PANGO_SCRIPT_CYRILLIC/*68*/ } },
+  { "ven",   { PANGO_SCRIPT_LATIN/*62*/ } },
+  { "vi",    { PANGO_SCRIPT_LATIN/*186*/ } },
+  { "vot",   { PANGO_SCRIPT_LATIN/*62*/ } },
+  { "vo",    { PANGO_SCRIPT_LATIN/*54*/ } },
+  { "wa",    { PANGO_SCRIPT_LATIN/*70*/ } },
+  { "wen",   { PANGO_SCRIPT_LATIN/*76*/ } },
+  { "wo",    { PANGO_SCRIPT_LATIN/*66*/ } },
+  { "xh",    { PANGO_SCRIPT_LATIN/*52*/ } },
+  { "yap",   { PANGO_SCRIPT_LATIN/*58*/ } },
+  { "yi",    { PANGO_SCRIPT_HEBREW/*27*/ } },
+  { "yo",    { PANGO_SCRIPT_LATIN/*114*/ } },
+//  { "zh-cn", { PANGO_SCRIPT_HAN/*6763*/ } },
+  { "zh-cn", { EncodingDetector::ChineseSimplified } },
+//  { "zh-hk", { PANGO_SCRIPT_HAN/*2213*/ } },
+  { "zh-hk", { EncodingDetector::ChineseTraditional } },
+//  { "zh-mo", { PANGO_SCRIPT_HAN/*2213*/ } },
+  { "zh-mo", { EncodingDetector::ChineseTraditional } },
+//  { "zh-sg", { PANGO_SCRIPT_HAN/*6763*/ } },
+  { "zh-sg", { EncodingDetector::ChineseSimplified } },
+//  { "zh-tw", { PANGO_SCRIPT_HAN/*13063*/ } },
+  { "zh-tw", { EncodingDetector::ChineseTraditional } },
+  { "zu",    { PANGO_SCRIPT_LATIN/*52*/ } },
+  { "\x00",    { EncodingDetector::None } }      //end mark
+};
+
+enum MIB
+{
+    MibLatin1  = 4,
+    Mib8859_8  = 85,
+    MibUtf8    = 106,
+    MibUcs2    = 1000,
+    MibUtf16   = 1015,
+    MibUtf16BE = 1013,
+    MibUtf16LE = 1014
+};
+
+static bool is16Bit(QTextCodec* codec)
+{
+    switch (codec->mibEnum())
+    {
+    case MibUtf16:
+    case MibUtf16BE:
+    case MibUtf16LE:
+    case MibUcs2:
+        return true;
+    default:
+        return false;
+    }
+}
+
+class EncodingDetectorPrivate
+{
+public:
+    QTextCodec *m_codec;
+    QTextDecoder *m_decoder; // utf16
+    QTextCodec *m_defaultCodec;
+    QCString  m_storeDecoderName;
+
+    EncodingDetector::EncodingChoiceSource m_source;
+    EncodingDetector::AutoDetectScript m_autoDetectLanguage;
+
+    bool m_visualRTL : 1;
+    bool m_seenBody : 1;
+    bool m_writtingHappened : 1;
+    bool m_analyzeCalled : 1; //for decode()
+    int m_multiByte;
+
+    QCString m_bufferForDefferedEncDetection;
+
+    EncodingDetectorPrivate()
+            : m_codec(QTextCodec::codecForMib(MibLatin1))
+            , m_decoder(m_codec->makeDecoder())
+            , m_defaultCodec(m_codec)
+            , m_source(EncodingDetector::DefaultEncoding)
+            , m_autoDetectLanguage(EncodingDetector::SemiautomaticDetection)
+            , m_visualRTL(false)
+            , m_seenBody(false)
+            , m_writtingHappened(false)
+            , m_analyzeCalled(false)
+            , m_multiByte(0)
+    {
+    }
+
+    EncodingDetectorPrivate(QTextCodec* codec,EncodingDetector::EncodingChoiceSource source, EncodingDetector::AutoDetectScript script)
+            : m_codec(codec)
+            , m_decoder(m_codec->makeDecoder())
+            , m_defaultCodec(m_codec)
+            , m_source(source)
+            , m_autoDetectLanguage(script)
+            , m_visualRTL(false)
+            , m_seenBody(false)
+            , m_writtingHappened(false)
+            , m_analyzeCalled(false)
+            , m_multiByte(0)
+    {
+    }
+
+    ~EncodingDetectorPrivate()
+    {
+        delete m_decoder;
+    }
+};
+
+
+static QCString automaticDetectionForArabic( const unsigned char* ptr, int size )
+{
+    for ( int i = 0; i < size; ++i ) {
+        if ( ( ptr[ i ] >= 0x80 && ptr[ i ] <= 0x9F ) || ptr[ i ] == 0xA1 || ptr[ i ] == 0xA2 || ptr[ i ] == 0xA3
+             || ( ptr[ i ] >= 0xA5 && ptr[ i ] <= 0xAB ) || ( ptr[ i ] >= 0xAE && ptr[ i ] <= 0xBA )
+             || ptr[ i ] == 0xBC || ptr[ i ] == 0xBD || ptr[ i ] == 0xBE || ptr[ i ] == 0xC0
+             || ( ptr[ i ] >= 0xDB && ptr[ i ] <= 0xDF ) || ( ptr[ i ] >= 0xF3 ) ) {
+            return "cp1256";
+        }
+    }
+
+    return "iso-8859-6";
+}
+
+static QCString automaticDetectionForBaltic( const unsigned char* ptr, int size )
+{
+    for ( int i = 0; i < size; ++i ) {
+        if ( ( ptr[ i ] >= 0x80 && ptr[ i ] <= 0x9E ) )
+             return "cp1257";
+
+        if ( ptr[ i ] == 0xA1 || ptr[ i ] == 0xA5 )
+            return "iso-8859-13";
+    }
+
+    return "iso-8859-13";
+}
+
+static QCString automaticDetectionForCentralEuropean(const unsigned char* ptr, int size )
+{
+    QCString charset;
+    for ( int i = 0; i < size; ++i ) {
+        if ( ptr[ i ] >= 0x80 && ptr[ i ] <= 0x9F ) {
+            if ( ptr[ i ] == 0x81 || ptr[ i ] == 0x83 || ptr[ i ] == 0x90 || ptr[ i ] == 0x98 )
+                return "ibm852";
+
+            if ( i + 1 > size )
+                return "cp1250";
+            else { // maybe ibm852 ?
+                charset = "cp1250";
+                continue;
+            }
+        }
+        if ( ptr[ i ] == 0xA5 || ptr[ i ] == 0xAE || ptr[ i ] == 0xBE || ptr[ i ] == 0xC3 || ptr[ i ] == 0xD0 || ptr[ i ] == 0xE3 || ptr[ i ] == 0xF0 ) {
+            if ( i + 1 > size )
+                return "iso-8859-2";
+            else {  // maybe ibm852 ?
+                if ( charset.isNull() )
+                    charset = "iso-8859-2";
+                continue;
+            }
+        }
+    }
+
+    if ( charset.isNull() )
+        charset = "iso-8859-3";
+
+    return charset.data();
+}
+
+static QCString automaticDetectionForCyrillic( const unsigned char* ptr, int size)
+{
+#ifdef DECODE_DEBUG
+        kWarning() << "EncodingDetector: Cyr heuristics";
+#endif
+
+//     if (ptr[0]==0xef && ptr[1]==0xbb && ptr[2]==0xbf)
+//         return "utf8";
+    int utf8_mark=0;
+    int koi_score=0;
+    int cp1251_score=0;
+
+    int koi_st=0;
+    int cp1251_st=0;
+
+//     int koi_na=0;
+//     int cp1251_na=0;
+
+    int koi_o_capital=0;
+    int koi_o=0;
+    int cp1251_o_capital=0;
+    int cp1251_o=0;
+
+    int koi_a_capital=0;
+    int koi_a=0;
+    int cp1251_a_capital=0;
+    int cp1251_a=0;
+
+    int koi_s_capital=0;
+    int koi_s=0;
+    int cp1251_s_capital=0;
+    int cp1251_s=0;
+
+    int koi_i_capital=0;
+    int koi_i=0;
+    int cp1251_i_capital=0;
+    int cp1251_i=0;
+
+    int cp1251_small_range=0;
+    int koi_small_range=0;
+    int ibm866_small_range=0;
+
+    int i;
+    for (i=1; (i<size) && (cp1251_small_range+koi_small_range<1000) ;++i)
+    {
+        if (ptr[i]>0xdf)
+        {
+            ++cp1251_small_range;
+
+            if (ptr[i]==0xee)//small o
+                ++cp1251_o;
+            else if (ptr[i]==0xe0)//small a
+                ++cp1251_a;
+            else if (ptr[i]==0xe8)//small i
+                ++cp1251_i;
+            else if (ptr[i]==0xf1)//small s
+                ++cp1251_s;
+            else if (ptr[i]==0xf2 && ptr[i-1]==0xf1)//small st
+                ++cp1251_st;
+
+            else if (ptr[i]==0xef)
+                ++koi_o_capital;
+            else if (ptr[i]==0xe1)
+                ++koi_a_capital;
+            else if (ptr[i]==0xe9)
+                ++koi_i_capital;
+            else if (ptr[i]==0xf3)
+                ++koi_s_capital;
+
+        }
+        else if (ptr[i]>0xbf)
+        {
+            ++koi_small_range;
+
+            if (ptr[i]==0xd0||ptr[i]==0xd1)//small o
+                ++utf8_mark;
+            else if (ptr[i]==0xcf)//small o
+                ++koi_o;
+            else if (ptr[i]==0xc1)//small a
+                ++koi_a;
+            else if (ptr[i]==0xc9)//small i
+                ++koi_i;
+            else if (ptr[i]==0xd3)//small s
+                ++koi_s;
+            else if (ptr[i]==0xd4 && ptr[i-1]==0xd3)//small st
+                ++koi_st;
+
+            else if (ptr[i]==0xce)
+                ++cp1251_o_capital;
+            else if (ptr[i]==0xc0)
+                ++cp1251_a_capital;
+            else if (ptr[i]==0xc8)
+                ++cp1251_i_capital;
+            else if (ptr[i]==0xd1)
+                ++cp1251_s_capital;
+        }
+        else if (ptr[i]>0x9f && ptr[i]<0xb0) //first 16 letterz is 60%
+            ++ibm866_small_range;
+
+    }
+
+    //cannot decide?
+    if (cp1251_small_range+koi_small_range+ibm866_small_range<8)
+    {
+        return "";
+    }
+
+    if (3*utf8_mark>cp1251_small_range+koi_small_range+ibm866_small_range)
+    {
+#ifdef DECODE_DEBUG
+        kWarning() << "Cyr Enc Detection: UTF8";
+#endif
+        return "UTF-8";
+    }
+
+    if (ibm866_small_range>cp1251_small_range+koi_small_range)
+        return "ibm866";
+
+//     QCString koi_string = "koi8-u";
+//     QCString cp1251_string = "cp1251";
+
+    if (cp1251_st==0 && koi_st>1)
+        koi_score+=10;
+    else if (koi_st==0 && cp1251_st>1)
+        cp1251_score+=10;
+
+    if (cp1251_st && koi_st)
+    {
+        if (cp1251_st/koi_st>2)
+            cp1251_score+=20;
+        else if (koi_st/cp1251_st>2)
+            koi_score+=20;
+    }
+
+    if (cp1251_a>koi_a)
+        cp1251_score+=10;
+    else if (cp1251_a || koi_a)
+        koi_score+=10;
+
+    if (cp1251_o>koi_o)
+        cp1251_score+=10;
+    else if (cp1251_o || koi_o)
+        koi_score+=10;
+
+    if (cp1251_i>koi_i)
+        cp1251_score+=10;
+    else if (cp1251_i || koi_i)
+        koi_score+=10;
+
+    if (cp1251_s>koi_s)
+        cp1251_score+=10;
+    else if (cp1251_s || koi_s)
+        koi_score+=10;
+
+    if (cp1251_a_capital>koi_a_capital)
+        cp1251_score+=9;
+    else if (cp1251_a_capital || koi_a_capital)
+        koi_score+=9;
+
+    if (cp1251_o_capital>koi_o_capital)
+        cp1251_score+=9;
+    else if (cp1251_o_capital || koi_o_capital)
+        koi_score+=9;
+
+    if (cp1251_i_capital>koi_i_capital)
+        cp1251_score+=9;
+    else if (cp1251_i_capital || koi_i_capital)
+        koi_score+=9;
+
+    if (cp1251_s_capital>koi_s_capital)
+        cp1251_score+=9;
+    else if (cp1251_s_capital || koi_s_capital)
+        koi_score+=9;
+#ifdef DECODE_DEBUG
+    kWarning()<<"koi_score " << koi_score << " cp1251_score " << cp1251_score;
+#endif
+    if (abs(koi_score-cp1251_score)<10)
+    {
+        //fallback...
+        cp1251_score=cp1251_small_range;
+        koi_score=koi_small_range;
+    }
+    if (cp1251_score>koi_score)
+        return "cp1251";
+    else
+        return "koi8-u";
+
+
+//     if (cp1251_score>koi_score)
+//         setEncoding("cp1251",AutoDetectedEncoding);
+//     else
+//         setEncoding("koi8-u",AutoDetectedEncoding);
+//     return true;
+
+}
+
+static QCString automaticDetectionForGreek( const unsigned char* ptr, int size )
+{
+    for ( int i = 0; i < size; ++i ) {
+        if ( ptr[ i ] == 0x80 || ( ptr[ i ] >= 0x82 && ptr[ i ] <= 0x87 ) || ptr[ i ] == 0x89 || ptr[ i ] == 0x8B
+             || ( ptr[ i ] >= 0x91 && ptr[ i ] <= 0x97 ) || ptr[ i ] == 0x99 || ptr[ i ] == 0x9B || ptr[ i ] == 0xA4
+             || ptr[ i ] == 0xA5 || ptr[ i ] == 0xAE ) {
+            return "cp1253";
+        }
+    }
+
+    return "iso-8859-7";
+}
+
+static QCString automaticDetectionForHebrew( const unsigned char* ptr, int size )
+{
+    for ( int i = 0; i < size; ++i ) {
+        if ( ptr[ i ] == 0x80 || ( ptr[ i ] >= 0x82 && ptr[ i ] <= 0x89 ) || ptr[ i ] == 0x8B
+             || ( ptr[ i ] >= 0x91 && ptr[ i ] <= 0x99 ) || ptr[ i ] == 0x9B || ptr[ i ] == 0xA1 || ( ptr[ i ] >= 0xBF && ptr[ i ] <= 0xC9 )
+             || ( ptr[ i ] >= 0xCB && ptr[ i ] <= 0xD8 ) ) {
+            return "cp1255";
+        }
+
+        if ( ptr[ i ] == 0xDF )
+            return "iso-8859-8-i";
+    }
+
+    return "iso-8859-8-i";
+}
+
+static QCString automaticDetectionForJapanese( const unsigned char* ptr, int size )
+{
+    JapaneseCode kc;
+
+    switch ( kc.guess_jp( (const char*)ptr, size ) ) {
+    case JapaneseCode::JIS:
+        return "jis7";
+    case JapaneseCode::EUC:
+        return "eucjp";
+    case JapaneseCode::SJIS:
+        return "sjis";
+     case JapaneseCode::UTF8:
+        return "utf8";
+    default:
+        break;
+    }
+
+    return "";
+}
+
+static QCString automaticDetectionForTurkish( const unsigned char* ptr, int size )
+{
+    for ( int i = 0; i < size; ++i ) {
+        if ( ptr[ i ] == 0x80 || ( ptr[ i ] >= 0x82 && ptr[ i ] <= 0x8C ) || ( ptr[ i ] >= 0x91 && ptr[ i ] <= 0x9C ) || ptr[ i ] == 0x9F ) {
+            return "cp1254";
+        }
+    }
+
+    return "iso-8859-9";
+}
+
+static QCString automaticDetectionForWesternEuropean( const unsigned char* ptr, int size )
+{
+    uint nonansi_count=0;
+    for (int i=0; i<size; ++i)
+    {
+        if (ptr[i]>0x79)
+        {
+             ++nonansi_count;
+            if ( ptr[i]>0xc1 && ptr[i]<0xf0 && i+1<size && ptr[i+1]>0x7f && ptr[i+1]<0xc0)
+            {
+                return "UTF-8";
+            }
+            if (ptr[i] >= 0x78 && ptr[i] <= 0x9 )
+            {
+                return "cp1252";
+            }
+        }
+
+    }
+
+    if (nonansi_count>0)
+        return "iso-8859-15";
+
+    return "";
+}
+
+// Other browsers allow comments in the head section, so we need to also.
+// It's important not to look for tags inside the comments.
+static void skipComment(const char *&ptr, const char *pEnd)
+{
+    const char *p = ptr;
+    // Allow <!-->; other browsers do.
+    if (*p=='>')
+    {
+        p++;
+    }
+    else
+    {
+        while (p!=pEnd)
+        {
+            if (*p=='-')
+            {
+                // This is the real end of comment, "-->".
+                if (p[1]=='-' && p[2]=='>')
+                {
+                    p += 3;
+                    break;
+                }
+                // This is the incorrect end of comment that other browsers allow, "--!>".
+                if (p[1] == '-' && p[2] == '!' && p[3] == '>')
+                {
+                    p += 4;
+                    break;
+                }
+            }
+            p++;
+        }
+    }
+    ptr=p;
+}
+
+// Returns the position of the encoding string.
+static int findXMLEncoding(const QCString &str, int &encodingLength)
+{
+    int len = str.length();
+    int pos = str.find("encoding");
+    if (pos == -1)
+        return -1;
+    pos += 8;
+
+    // Skip spaces and stray control characters.
+    while (pos<len && str[pos]<=' ')
+        ++pos;
+
+    //Bail out if nothing after
+    // Skip equals sign.
+    if (pos>=len || str[pos] != '=')
+        return -1;
+    ++pos;
+
+    // Skip spaces and stray control characters.
+    while (pos<len && str[pos]<=' ')
+        ++pos;
+
+    //Bail out if nothing after
+    if (pos >= len)
+        return -1;
+
+    // Skip quotation mark.
+    char quoteMark = str[pos];
+    if (quoteMark != '"' && quoteMark != '\'')
+        return -1;
+    ++pos;
+
+    // Find the trailing quotation mark.
+    int end=pos;
+    while (end<len && str[end]!=quoteMark)
+        ++end;
+
+    if (end>=len)
+        return -1;
+
+    encodingLength = end-pos;
+    return pos;
+}
+
+
+bool EncodingDetector::errorsIfUtf8 (const char* data, int length)
+{
+    if (d->m_codec->mibEnum()!=MibUtf8)
+        return false; //means no errors
+// #define highest1Bits (unsigned char)0x80
+// #define highest2Bits (unsigned char)0xC0
+// #define highest3Bits (unsigned char)0xE0
+// #define highest4Bits (unsigned char)0xF0
+// #define highest5Bits (unsigned char)0xF8
+static const unsigned char highest1Bits = 0x80;
+static const unsigned char highest2Bits = 0xC0;
+static const unsigned char highest3Bits = 0xE0;
+static const unsigned char highest4Bits = 0xF0;
+static const unsigned char highest5Bits = 0xF8;
+
+    for (int i=0; i<length; ++i)
+    {
+        unsigned char c = data[i];
+
+        if (d->m_multiByte>0)
+        {
+            if ((c & highest2Bits) == 0x80)
+            {
+                --(d->m_multiByte);
+                continue;
+            }
+#ifdef DECODE_DEBUG
+            kWarning() << "EncDetector: Broken UTF8";
+#endif
+            return true;
+        }
+
+        // most significant bit zero, single char
+        if ((c & highest1Bits) == 0x00)
+            continue;
+
+        // 110xxxxx => init 1 following bytes
+        if ((c & highest3Bits) == 0xC0)
+        {
+            d->m_multiByte = 1;
+            continue;
+        }
+
+        // 1110xxxx => init 2 following bytes
+        if ((c & highest4Bits) == 0xE0)
+        {
+            d->m_multiByte = 2;
+            continue;
+        }
+
+        // 11110xxx => init 3 following bytes
+        if ((c & highest5Bits) == 0xF0)
+        {
+            d->m_multiByte = 3;
+            continue;
+        }
+#ifdef DECODE_DEBUG
+        kWarning() << "EncDetector:_Broken UTF8";
+#endif
+        return true;
+    }
+    return false;
+}
+
+EncodingDetector::EncodingDetector() : d(new EncodingDetectorPrivate)
+{
+}
+
+EncodingDetector::EncodingDetector(QTextCodec* codec, EncodingChoiceSource source, AutoDetectScript script) :
+    d(new EncodingDetectorPrivate(codec,source,script))
+{
+}
+
+EncodingDetector::~EncodingDetector()
+{
+    delete d;
+}
+
+void EncodingDetector::setAutoDetectLanguage( EncodingDetector::AutoDetectScript lang)
+{
+    d->m_autoDetectLanguage=lang;
+}
+EncodingDetector::AutoDetectScript EncodingDetector::autoDetectLanguage() const
+{
+    return d->m_autoDetectLanguage;
+}
+
+EncodingDetector::EncodingChoiceSource EncodingDetector::encodingChoiceSource() const
+{
+    return d->m_source;
+}
+
+const char* EncodingDetector::encoding() const
+{
+    d->m_storeDecoderName = d->m_codec->name();
+    return d->m_storeDecoderName.data();
+}
+
+bool EncodingDetector::visuallyOrdered() const
+{
+    return d->m_visualRTL;
+}
+
+// const QTextCodec* EncodingDetector::codec() const
+// {
+//     return d->m_codec;
+// }
+
+QTextDecoder* EncodingDetector::decoder()
+{
+    return d->m_decoder;
+}
+
+bool EncodingDetector::setEncoding(const char *_encoding, EncodingChoiceSource type)
+{
+    QTextCodec *codec;
+    QCString enc(_encoding);
+    if(/*enc.isNull() || */enc.isEmpty())
+    {
+        if (type==DefaultEncoding)
+            codec=d->m_defaultCodec;
+        else
+            return false;
+    }
+    else
+    {
+        //QString->QTextCodec
+
+        enc = enc.lower();
+         // hebrew visually ordered
+        if(enc=="visual")
+            enc="iso8859-8";
+        bool b;
+        codec = KGlobal::charsets()->codecForName(enc, b);
+        if (!b)
+        return false;
+    }
+
+    if (d->m_codec->mibEnum()==codec->mibEnum())
+        return true;
+
+    if ((type==EncodingFromMetaTag || type==EncodingFromXMLHeader) && is16Bit(codec))
+    {
+        //Sometimes the codec specified is absurd, i.e. UTF-16 despite
+        //us decoding a meta tag as ASCII. In that case, ignore it.
+        return false;
+    }
+
+    if (codec->mibEnum() == Mib8859_8)
+    {
+        //We do NOT want to use Qt's QHebrewCodec, since it tries to reorder itself.
+        codec = QTextCodec::codecForName("iso8859-8-i");
+
+        // visually ordered unless one of the following
+        if(!(enc=="iso-8859-8-i"||enc=="iso_8859-8-i"||enc=="csiso88598i"||enc=="logical"))
+            d->m_visualRTL = true;
+    }
+
+    d->m_codec = codec;
+    d->m_source = type;
+    delete d->m_decoder;
+    d->m_decoder = d->m_codec->makeDecoder();
+#ifdef DECODE_DEBUG
+    kDebug(6005) << "EncodingDetector::encoding used is" << d->m_codec->name();
+#endif
+    return true;
+}
+
+bool EncodingDetector::analyze(const QByteArray &data)
+{
+    return analyze( data.data(), data.size() );
+}
+
+bool EncodingDetector::analyze(const char *data, int len)
+{
+    // Check for UTF-16 or UTF-8 BOM mark at the beginning, which is a sure sign of a Unicode encoding.
+    // maximumBOMLength = 10
+    // Even if the user has chosen utf16 we still need to auto-detect the endianness
+    if (len >= 10 && ((d->m_source != UserChosenEncoding) || is16Bit(d->m_codec)))
+    {
+        // Extract the first three bytes.
+        const uchar *udata = (const uchar *)data;
+        uchar c1 = *udata++;
+        uchar c2 = *udata++;
+        uchar c3 = *udata++;
+
+        // Check for the BOM
+        const char *autoDetectedEncoding;
+        if ((c1 == 0xFE && c2 == 0xFF) || (c1 == 0xFF && c2 == 0xFE))
+        {
+            autoDetectedEncoding = "ISO-10646-UCS-2";
+        }
+        else if (c1 == 0xEF && c2 == 0xBB && c3 == 0xBF)
+        {
+            autoDetectedEncoding = "UTF-8";
+        }
+        else if (c1 == 0x00 || c2 == 0x00)
+        {
+            uchar c4 = *udata++;
+            uchar c5 = *udata++;
+            uchar c6 = *udata++;
+            uchar c7 = *udata++;
+            uchar c8 = *udata++;
+            uchar c9 = *udata++;
+            uchar c10 = *udata++;
+
+            int nul_count_even = (c2 != 0) + (c4 != 0) + (c6 != 0) + (c8 != 0) + (c10 != 0);
+            int nul_count_odd = (c1 != 0) + (c3 != 0) + (c5 != 0) + (c7 != 0) + (c9 != 0);
+            if ((nul_count_even==0 && nul_count_odd==5) || (nul_count_even==5 && nul_count_odd==0))
+                autoDetectedEncoding = "ISO-10646-UCS-2";
+            else
+                autoDetectedEncoding = 0;
+        }
+        else
+        {
+            autoDetectedEncoding = 0;
+        }
+
+        // If we found a BOM, use the encoding it implies.
+        if (autoDetectedEncoding != 0)
+        {
+            d->m_source = BOM;
+            d->m_codec = QTextCodec::codecForName(autoDetectedEncoding);
+            assert(d->m_codec);
+            //enc = d->m_codec->name();
+            delete d->m_decoder;
+            d->m_decoder = d->m_codec->makeDecoder();
+#ifdef DECODE_DEBUG
+            kWarning() << "Detection by BOM";
+#endif
+            if (is16Bit(d->m_codec) && c2==0x00)
+            {
+                // utf16LE, we need to put the decoder in LE mode
+                char reverseUtf16[3] = {(char)0xFF, (char)0xFE, 0x00};
+                d->m_decoder->toUnicode(reverseUtf16, 2);
+            }
+            return true;
+        }
+    }
+
+    //exit from routine in case it was called to only detect byte order for utf-16
+    if (d->m_source==UserChosenEncoding)
+    {
+#ifdef DECODE_DEBUG
+        kWarning() << "EncodingDetector: UserChosenEncoding exit ";
+#endif
+
+        if (errorsIfUtf8(data, len))
+            setEncoding("",DefaultEncoding);
+        return true;
+    }
+#if 0  //This is for plaintext, so don't try to parse HTML headers -- ahartmetz
+    if (!d->m_seenBody)
+    {
+        // we still don't have an encoding, and are in the head
+        // the following tags are allowed in <head>:
+        // SCRIPT|STYLE|META|LINK|OBJECT|TITLE|BASE
+        const char *ptr = data;
+        const char *pEnd = data+len;
+
+        while(ptr != pEnd)
+        {
+            if(*ptr!='<')
+            {
+                ++ptr;
+                continue;
+            }
+            ++ptr;
+            // Handle comments.
+            if (ptr[0] == '!' && ptr[1] == '-' && ptr[2] == '-')
+            {
+                ptr += 3;
+                skipComment(ptr, pEnd);
+                continue;
+            }
+
+            // Handle XML header, which can have encoding in it.
+            if (ptr[0]=='?' && ptr[1]=='x' && ptr[2]=='m' && ptr[3]=='l')
+            {
+                const char *end = ptr;
+                while (*end != '>' && end < pEnd)
+                    end++;
+                if (*end == '\0' || end == pEnd)
+                    break;
+                QCString str(ptr, end - ptr + 1);
+                int length;
+                int pos = findXMLEncoding(str, length);
+                // also handles the case when specified encoding aint correct
+                if (pos!=-1 && setEncoding(str.mid(pos, length), EncodingFromXMLHeader))
+                {
+                    return true;
+                }
+            }
+
+            //look for <meta>, stop if we reach <body>
+            while (
+                        !((*ptr >= 'a') && (*ptr <= 'z') ||
+                        (*ptr >= 'A') && (*ptr <= 'Z'))
+                        && ptr < pEnd
+                )
+                ++ptr;
+
+            char tmp[5];
+            int length=0;
+            const char* max=ptr+4;
+            if (pEnd<max)
+                max=pEnd;
+            while (
+                        ((*ptr >= 'a') && (*ptr <= 'z') ||
+                        (*ptr >= 'A') && (*ptr <= 'Z') ||
+                        (*ptr >= '0') && (*ptr <= '9'))
+                        && ptr < max
+                )
+            {
+                tmp[length] = tolower( *ptr );
+                ++ptr;
+                ++length;
+            }
+            tmp[length] = 0;
+            if (tmp[0]=='m'&&tmp[1]=='e'&&tmp[2]=='t'&&tmp[3]=='a')
+            {
+                // found a meta tag...
+                const char* end = ptr;
+                while(*end != '>' && *end != '\0' && end<pEnd)
+                    end++;
+                //if ( *end == '\0' ) break;
+                QCString str( ptr, (end-ptr)+1);
+                str = str.lower();
+                int pos=0;
+                        //if( (pos = str.find("http-equiv", pos)) == -1) break;
+                        //if( (pos = str.find("content-type", pos)) == -1) break;
+                if( (pos = str.find("charset")) == -1)
+                    continue;
+                pos+=6;
+                // skip to '='
+                if( (pos = str.find('=', pos)) == -1)
+                    continue;
+
+                // skip whitespace before encoding itself
+                while (pos < (int)str.length() && str[pos] <= ' ')
+                    ++pos;
+                if ( pos == (int)str.length())
+                    continue;
+
+                int endpos = pos;
+                while( endpos < str.length() &&
+                        (str[endpos] != ' ' && str[endpos] != '"' && str[endpos] != '\''
+                                    && str[endpos] != ';' && str[endpos] != '>') )
+                    ++endpos;
+    #ifdef DECODE_DEBUG
+                kDebug( 6005 ) << "EncodingDetector: found charset in <meta>: " << str.mid(pos,endpos-pos).data();
+    #endif
+                if (setEncoding(str.mid(pos,endpos-pos), EncodingFromMetaTag))
+                    return true;
+            }
+            else if (tmp[0]=='b'&&tmp[1]=='o'&&tmp[2]=='d'&&tmp[3]=='y')
+            {
+                d->m_seenBody=true;
+                break;
+            }
+        }
+    }
+
+    if (d->m_source==EncodingFromHTTPHeader)
+        return true;
+#endif
+    //if (len<20)     //make a guess even if the file is short -- ahartmetz
+    if (len < 1)
+    {
+        setEncoding("",DefaultEncoding);
+        return false;
+    }
+#ifdef DECODE_DEBUG
+    kDebug( 6005 ) << "EncodingDetector: using heuristics (" << strlen(data) << ")";
+#endif
+
+    switch ( d->m_autoDetectLanguage )
+    {
+        case EncodingDetector::Arabic:
+            return setEncoding(automaticDetectionForArabic( (const unsigned char*) data, len ), AutoDetectedEncoding);
+//             break;
+        case EncodingDetector::Baltic:
+            return setEncoding(automaticDetectionForBaltic( (const unsigned char*) data, len ), AutoDetectedEncoding);
+//             break;
+        case EncodingDetector::CentralEuropean:
+            return setEncoding(automaticDetectionForCentralEuropean( (const unsigned char*) data, len ), AutoDetectedEncoding);
+            break;
+        case EncodingDetector::Cyrillic:
+            return setEncoding(automaticDetectionForCyrillic( (const unsigned char*) data, len), AutoDetectedEncoding);
+//             break;
+        case EncodingDetector::Greek:
+            return setEncoding(automaticDetectionForGreek( (const unsigned char*) data, len ), AutoDetectedEncoding);
+//             break;
+        case EncodingDetector::Hebrew:
+            return setEncoding(automaticDetectionForHebrew( (const unsigned char*) data, len ), AutoDetectedEncoding);
+//             break;
+        case EncodingDetector::Japanese:
+            return setEncoding(automaticDetectionForJapanese( (const unsigned char*) data, len ), AutoDetectedEncoding);
+//             break;
+        case EncodingDetector::Turkish:
+            return setEncoding(automaticDetectionForTurkish( (const unsigned char*) data, len ), AutoDetectedEncoding);
+//             break;
+        case EncodingDetector::WesternEuropean:
+            if (setEncoding(automaticDetectionForWesternEuropean( (const unsigned char*) data, len ), AutoDetectedEncoding))
+                return true;
+            else if (d->m_defaultCodec->mibEnum()==MibLatin1) //detection for khtml
+            {
+                return setEncoding("iso-8859-15",AutoDetectedEncoding);
+            }
+            else //use default provided by eg katepart
+            {
+                return setEncoding("",DefaultEncoding);
+            }
+//             break;
+        case EncodingDetector::SemiautomaticDetection:
+        case EncodingDetector::ChineseSimplified:
+        case EncodingDetector::ChineseTraditional:
+        case EncodingDetector::Korean:
+        case EncodingDetector::Thai:
+        case EncodingDetector::Unicode:
+        case EncodingDetector::NorthernSaami:
+        case EncodingDetector::SouthEasternEurope:
+        case EncodingDetector::None:
+            // huh. somethings broken in this code ### FIXME
+            //enc = 0; //Reset invalid codec we tried, so we get back to latin1 fallback.
+            break;
+        }
+
+        setEncoding("",DefaultEncoding);
+        return true;
+}
+
+
+EncodingDetector::AutoDetectScript EncodingDetector::scriptForName(const QString& lang)
+{
+    if (lang.isEmpty())
+        return EncodingDetector::None;
+    else if (lang==i18n("@item Text character set", "Unicode"))
+        return EncodingDetector::Unicode;
+    else if (lang==i18n("@item Text character set", "Cyrillic"))
+        return EncodingDetector::Cyrillic;
+    else if (lang==i18n("@item Text character set", "Western European"))
+        return EncodingDetector::WesternEuropean;
+    else if (lang==i18n("@item Text character set", "Central European"))
+        return EncodingDetector::CentralEuropean;
+    else if (lang==i18n("@item Text character set", "Greek"))
+        return EncodingDetector::Greek;
+    else if (lang==i18n("@item Text character set", "Hebrew"))
+        return EncodingDetector::Hebrew;
+    else if (lang==i18n("@item Text character set", "Turkish"))
+        return EncodingDetector::Turkish;
+    else if (lang==i18n("@item Text character set", "Japanese"))
+        return EncodingDetector::Japanese;
+    else if (lang==i18n("@item Text character set", "Baltic"))
+        return EncodingDetector::Baltic;
+    else if (lang==i18n("@item Text character set", "Arabic"))
+        return EncodingDetector::Arabic;
+
+    return EncodingDetector::None;
+}
+
+bool EncodingDetector::hasAutoDetectionForScript(EncodingDetector::AutoDetectScript script)
+{
+    switch (script)
+    {
+        case EncodingDetector::Arabic:
+            return true;
+        case EncodingDetector::Baltic:
+            return true;
+        case EncodingDetector::CentralEuropean:
+            return true;
+        case EncodingDetector::Cyrillic:
+            return true;
+        case EncodingDetector::Greek:
+            return true;
+        case EncodingDetector::Hebrew:
+            return true;
+        case EncodingDetector::Japanese:
+            return true;
+        case EncodingDetector::Turkish:
+            return true;
+        case EncodingDetector::WesternEuropean:
+            return true;
+        case EncodingDetector::ChineseTraditional:
+            return true;
+        case EncodingDetector::ChineseSimplified:
+            return true;
+        case EncodingDetector::Unicode:
+            return true;
+            break;
+        default:
+            return false;
+    }
+}
+
+QString EncodingDetector::nameForScript(EncodingDetector::AutoDetectScript script)
+{
+    switch (script)
+    {
+        case EncodingDetector::Arabic:
+            return i18n("@item Text character set", "Arabic");
+            break;
+        case EncodingDetector::Baltic:
+            return i18n("@item Text character set", "Baltic");
+            break;
+        case EncodingDetector::CentralEuropean:
+            return i18n("@item Text character set", "Central European");
+            break;
+        case EncodingDetector::Cyrillic:
+            return i18n("@item Text character set", "Cyrillic");
+            break;
+        case EncodingDetector::Greek:
+            return i18n("@item Text character set", "Greek");
+            break;
+        case EncodingDetector::Hebrew:
+            return i18n("@item Text character set", "Hebrew");
+            break;
+        case EncodingDetector::Japanese:
+            return i18n("@item Text character set", "Japanese");
+            break;
+        case EncodingDetector::Turkish:
+            return i18n("@item Text character set", "Turkish");
+            break;
+        case EncodingDetector::WesternEuropean:
+            return i18n("@item Text character set", "Western European");
+            break;
+        case EncodingDetector::ChineseTraditional:
+            return i18n("@item Text character set", "Chinese Traditional");
+            break;
+        case EncodingDetector::ChineseSimplified:
+            return i18n("@item Text character set", "Chinese Simplified");
+            break;
+        case EncodingDetector::Korean:
+            return i18n("@item Text character set", "Korean");
+            break;
+        case EncodingDetector::Thai:
+            return i18n("@item Text character set", "Thai");
+            break;
+        case EncodingDetector::Unicode:
+            return i18n("@item Text character set", "Unicode");
+            break;
+        //case EncodingDetector::SemiautomaticDetection:
+        default:
+            return QString();
+
+        }
+}
+
+EncodingDetector::AutoDetectScript EncodingDetector::scriptForLanguageCode(const QString &lc)
+{
+  // It might make sense to do something special if the locale ends with
+  // ".UTF-8" or "@utf8"
+  const char *langStr = pango_script_for_lang[0].lang;
+  // There is obvious optimization potential...
+  for ( int i = 0; langStr; i++ ) {
+     langStr = pango_script_for_lang[i].lang;
+     // startsWith() works for empty strings: every string "starts with" an empty string.
+     if ( lc.startsWith( QString::fromAscii( langStr ) ) )
+       return pango_script_for_lang[i].scripts[0];
+  }
+  return None;
+}
+
+#undef DECODE_DEBUG
+
Index: kmail/KMail.desktop
===================================================================
--- kmail/KMail.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kmail/KMail.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,5 +1,4 @@
 [Desktop Entry]
-Encoding=UTF-8
 Name=KMail
 Name[eo]=Retpoŝto
 Name[hi]=के-मेल
@@ -47,6 +46,7 @@
 GenericName[is]=Póstforrit
 GenericName[it]=Programma di posta elettronica
 GenericName[ja]=メールクライアント
+GenericName[ka]=ფოსტის კლიენტი
 GenericName[kk]=Эл.пошта клиент бағдарламасы
 GenericName[km]=កម្មវិធី​អ៊ីមែល
 GenericName[lt]=Pašto klientas
@@ -77,7 +77,8 @@
 GenericName[th]=ไคลเอนต์จดหมายอิเล็กทรอนิกส์
 GenericName[tr]=E-posta İstemcisi
 GenericName[uk]=Поштовий клієнт
-GenericName[uz]=Хат-хабар клиенти
+GenericName[uz]=Xat-xabar klienti
+GenericName[uz@cyrillic]=Хат-хабар клиенти
 GenericName[ven]=Mushumisani na poso
 GenericName[xh]=Umxhasi Weposi
 GenericName[zh_CN]=邮件客户程序
Index: kmail/snippetwidget.cpp
===================================================================
--- kmail/snippetwidget.cpp	(.../tags/KDE/3.5.9/kdepim)	(wersja 0)
+++ kmail/snippetwidget.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -0,0 +1,957 @@
+/***************************************************************************
+ *   snippet feature from kdevelop/plugins/snippet/                        *
+ *                                                                         * 
+ *   Copyright (C) 2007 by Robert Gruber                                   *
+ *   rgruber@users.sourceforge.net                                         *
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+
+#include <kurl.h>
+#include <kdebug.h>
+#include <klocale.h>
+#include <qlayout.h>
+#include <kpushbutton.h>
+#include <klistview.h>
+#include <qheader.h>
+#include <klineedit.h>
+#include <ktextedit.h>
+#include <kmessagebox.h>
+#include <kconfig.h>
+#include <qtooltip.h>
+#include <kpopupmenu.h>
+#include <qregexp.h>
+#include <qinputdialog.h>
+#include <qlabel.h>
+#include <qcheckbox.h>
+#include <qwhatsthis.h>
+#include <qdragobject.h>
+#include <qtimer.h>
+#include <kcombobox.h>
+#include <kmedit.h>
+#include <kiconloader.h>
+#include <kshortcut.h>
+#include <kaction.h>
+#include <kkeybutton.h>
+
+#include "snippetdlg.h"
+#include "snippetitem.h"
+#include "snippetwidget.h"
+
+#include <cassert>
+
+SnippetWidget::SnippetWidget(KMEdit* editor, KActionCollection* actionCollection, QWidget* parent)
+		: KListView(parent, "snippet widget"), QToolTip( viewport() ),
+		mEditor( editor ), mActionCollection( actionCollection )
+{
+    // init the QPtrList
+    _list.setAutoDelete(TRUE);
+
+    // init the KListView
+    setSorting( -1 );
+    addColumn( "" );
+    setFullWidth(true);
+    header()->hide();
+    setAcceptDrops(true);
+    setDragEnabled(true);
+    setDropVisualizer(false);
+    setRootIsDecorated(true);
+
+    //connect the signals
+    connect( this, SIGNAL( contextMenuRequested ( QListViewItem *, const QPoint & , int ) ),
+             this, SLOT( showPopupMenu(QListViewItem *, const QPoint & , int ) ) );
+
+    connect( this, SIGNAL( doubleClicked (QListViewItem *) ),
+             this, SLOT( slotEdit( QListViewItem *) ) );
+    connect( this, SIGNAL( returnPressed (QListViewItem *) ),
+             this, SLOT( slotExecuted( QListViewItem *) ) );
+
+    connect( this, SIGNAL( dropped(QDropEvent *, QListViewItem *) ),
+             this, SLOT( slotDropped(QDropEvent *, QListViewItem *) ) );
+
+    connect( editor, SIGNAL( insertSnippet() ), this, SLOT( slotExecute() ));
+
+    _cfg = 0;
+
+    QTimer::singleShot(0, this, SLOT(initConfig()));
+}
+
+SnippetWidget::~SnippetWidget()
+{
+  writeConfig();
+  delete _cfg;
+
+  /* We need to delete the child items before the parent items
+     otherwise KDevelop would crash on exiting */
+  SnippetItem * item;
+  while (_list.count() > 0) {
+    for (item=_list.first(); item; item=_list.next()) {
+      if (item->childCount() == 0)
+          _list.remove(item);
+    }
+  }
+}
+
+
+/*!
+    \fn SnippetWidget::slotAdd()
+    Opens the dialog to add a snippet
+ */
+void SnippetWidget::slotAdd()
+{
+  //kdDebug(5006) << "Ender slotAdd()" << endl;
+  SnippetDlg dlg( mActionCollection, this, "SnippetDlg");
+
+  /*check if the user clicked a SnippetGroup
+    If not, we set the group variable to the SnippetGroup
+    which the selected item is a child of*/
+  SnippetGroup * group = dynamic_cast<SnippetGroup*>(selectedItem());
+  if ( !group && selectedItem() )
+    group = dynamic_cast<SnippetGroup*>(selectedItem()->parent());
+
+  /* still no group, let's make a default one */
+  if (!group ) {
+    if ( _list.isEmpty() ) {
+      group = new SnippetGroup(this, i18n("General"), SnippetGroup::getMaxId() );
+      _list.append( group );
+    } else {
+      group = dynamic_cast<SnippetGroup*>( _list.first() );
+    }
+  }
+  assert( group );
+
+  /*fill the combobox with the names of all SnippetGroup entries*/
+  for (SnippetItem *it=_list.first(); it; it=_list.next()) {
+    if (dynamic_cast<SnippetGroup*>(it)) {
+      dlg.cbGroup->insertItem(it->getName());
+    }
+  }
+  dlg.cbGroup->setCurrentText(group->getName());
+
+  if (dlg.exec() == QDialog::Accepted) {
+      group = dynamic_cast<SnippetGroup*>(SnippetItem::findItemByName(dlg.cbGroup->currentText(), _list));
+      _list.append( makeItem( group, dlg.snippetName->text(), dlg.snippetText->text(), dlg.keyButton->shortcut() ) );
+  }
+}
+
+/*!
+    \fn SnippetWidget::makeItem( SnippetItem* parent, const QString& name, const QString& text )
+    Helper factory method.
+ */
+SnippetItem* SnippetWidget::makeItem( SnippetItem* parent, const QString& name, const QString& text, const KShortcut& shortcut )
+{
+    SnippetItem * item = new SnippetItem(parent, name, text);
+    const QString actionName = i18n("Snippet %1").arg(name);
+    const QString normalizedName = QString(actionName).replace(" ", "_");
+    if ( !mActionCollection->action(normalizedName.utf8() ) ) {
+        KAction * action = new KAction( actionName, shortcut, item,
+                                        SLOT( slotExecute() ), mActionCollection,
+                                        normalizedName.utf8() );
+        item->setAction(action);
+        connect( item, SIGNAL( execute( QListViewItem* ) ),
+                 this, SLOT( slotExecuted( QListViewItem* ) ) );
+    }
+    return item;
+}
+
+/*!
+    \fn SnippetWidget::slotAddGroup()
+    Opens the didalog to add a snippet
+ */
+void SnippetWidget::slotAddGroup()
+{
+  //kdDebug(5006) << "Ender slotAddGroup()" << endl;
+  SnippetDlg dlg( mActionCollection, this, "SnippetDlg");
+  dlg.setShowShortcut( false );
+  dlg.snippetText->setEnabled(false);
+  dlg.snippetText->setText("GROUP");
+  dlg.setCaption(i18n("Add Group"));
+  dlg.cbGroup->insertItem(i18n("All"));
+  dlg.cbGroup->setCurrentText(i18n("All"));
+
+  if (dlg.exec() == QDialog::Accepted) {
+    _list.append( new SnippetGroup(this, dlg.snippetName->text(), SnippetGroup::getMaxId() ) );
+  }
+}
+
+
+/*!
+    \fn SnippetWidget::slotRemove()
+    Removes the selected snippet
+ */
+void SnippetWidget::slotRemove()
+{
+  //get current data
+  QListViewItem * item = currentItem();
+  SnippetItem *snip = dynamic_cast<SnippetItem*>( item );
+  SnippetGroup *group = dynamic_cast<SnippetGroup*>( item );
+  if (!snip)
+    return;
+
+  if (group) {
+    if (group->childCount() > 0 &&
+        KMessageBox::warningContinueCancel(this, i18n("Do you really want to remove this group and all its snippets?"),QString::null,KStdGuiItem::del())
+        == KMessageBox::Cancel)
+      return;
+
+    SnippetItem *it=_list.first();
+    while ( it ) {
+      if (it->getParent() == group->getId()) {
+        SnippetItem *doomed = it;
+        it = _list.next();
+        //kdDebug(5006) << "remove " << doomed->getName() << endl;
+        _list.remove(doomed);
+      } else {
+        it = _list.next();
+      }
+    }
+  }
+
+  //kdDebug(5006) << "remove " << snip->getName() << endl;
+  _list.remove(snip);
+}
+
+
+
+/*!
+    \fn SnippetWidget::slotEdit()
+    Opens the dialog of editing the selected snippet
+ */
+void SnippetWidget::slotEdit( QListViewItem* item )
+{
+    if( item == 0 ) {
+	item = currentItem();
+    }
+
+  SnippetGroup *pGroup = dynamic_cast<SnippetGroup*>(item);
+  SnippetItem *pSnippet = dynamic_cast<SnippetItem*>( item );
+  if (!pSnippet || pGroup) /*selected item must be a SnippetItem but MUST not be a SnippetGroup*/
+    return;
+
+  //init the dialog
+  SnippetDlg dlg( mActionCollection, this, "SnippetDlg");
+  dlg.snippetName->setText(pSnippet->getName());
+  dlg.snippetText->setText(pSnippet->getText());
+  dlg.keyButton->setShortcut( pSnippet->getAction()->shortcut(), false );
+  dlg.btnAdd->setText(i18n("&Apply"));
+
+  dlg.setCaption(i18n("Edit Snippet"));
+  /*fill the combobox with the names of all SnippetGroup entries*/
+  for (SnippetItem *it=_list.first(); it; it=_list.next()) {
+    if (dynamic_cast<SnippetGroup*>(it)) {
+      dlg.cbGroup->insertItem(it->getName());
+    }
+  }
+  dlg.cbGroup->setCurrentText(SnippetItem::findGroupById(pSnippet->getParent(), _list)->getName());
+
+  if (dlg.exec() == QDialog::Accepted) {
+    //update the KListView and the SnippetItem
+    item->setText( 0, dlg.snippetName->text() );
+    pSnippet->setName( dlg.snippetName->text() );
+    pSnippet->setText( dlg.snippetText->text() );
+    pSnippet->getAction()->setShortcut( dlg.keyButton->shortcut());
+
+    /* if the user changed the parent we need to move the snippet */
+    if ( SnippetItem::findGroupById(pSnippet->getParent(), _list)->getName() != dlg.cbGroup->currentText() ) {
+      SnippetGroup * newGroup = dynamic_cast<SnippetGroup*>(SnippetItem::findItemByName(dlg.cbGroup->currentText(), _list));
+      pSnippet->parent()->takeItem(pSnippet);
+      newGroup->insertItem(pSnippet);
+      pSnippet->resetParent();
+    }
+
+    setSelected(item, TRUE);
+  }
+}
+
+/*!
+    \fn SnippetWidget::slotEditGroup()
+    Opens the dialog of editing the selected snippet-group
+ */
+void SnippetWidget::slotEditGroup()
+{
+  //get current data
+  QListViewItem * item = currentItem();
+
+  SnippetGroup *pGroup = dynamic_cast<SnippetGroup*>( item );
+  if (!pGroup) /*selected item MUST be a SnippetGroup*/
+    return;
+
+  //init the dialog
+  SnippetDlg dlg( mActionCollection, this, "SnippetDlg" );
+  dlg.setShowShortcut( false );
+  dlg.snippetName->setText(pGroup->getName());
+  dlg.snippetText->setText(pGroup->getText());
+  dlg.btnAdd->setText(i18n("&Apply"));
+  dlg.snippetText->setEnabled(FALSE);
+  dlg.setCaption(i18n("Edit Group"));
+  dlg.cbGroup->insertItem(i18n("All"));
+
+  if (dlg.exec() == QDialog::Accepted) {
+    //update the KListView and the SnippetGroup
+    item->setText( 0, dlg.snippetName->text() );
+    pGroup->setName( dlg.snippetName->text() );
+
+    setSelected(item, TRUE);
+  }
+}
+
+void SnippetWidget::slotExecuted(QListViewItem * item)
+{
+    if( item == 0 )
+    {
+	item = currentItem();
+    }
+
+  SnippetItem *pSnippet = dynamic_cast<SnippetItem*>( item );
+  if (!pSnippet || dynamic_cast<SnippetGroup*>(item))
+      return;
+
+  //process variables if any, then insert into the active view
+  insertIntoActiveView( parseText(pSnippet->getText(), _SnippetConfig.getDelimiter()) );
+}
+
+
+/*!
+    \fn SnippetWidget::insertIntoActiveView(QString text)
+    Inserts the parameter text into the activ view
+ */
+void SnippetWidget::insertIntoActiveView( const QString &text )
+{
+    mEditor->insert( text );
+}
+
+
+/*!
+    \fn SnippetWidget::writeConfig()
+    Write the cofig file
+ */
+void SnippetWidget::writeConfig()
+{
+  if( !_cfg )
+    return;
+  _cfg->deleteGroup("SnippetPart");  //this is neccessary otherwise delete entries will stay in list until
+                                     //they get overwritten by a more recent entry
+  _cfg->setGroup("SnippetPart");
+
+  QString strKeyName="";
+  QString strKeyText="";
+  QString strKeyId="";
+
+  int iSnipCount = 0;
+  int iGroupCount = 0;
+
+  SnippetItem* item=_list.first();
+  while ( item != 0) {
+
+    //kdDebug(5006) << "-->ERROR " << item->getName() << endl;
+    //kdDebug(5006) << "SnippetWidget::writeConfig() " << item->getName() << endl;
+    SnippetGroup * group = dynamic_cast<SnippetGroup*>(item);
+    if (group) {
+      //kdDebug(5006) << "-->GROUP " << item->getName() << group->getId() << " " << iGroupCount<< endl;
+      strKeyName=QString("snippetGroupName_%1").arg(iGroupCount);
+      strKeyId=QString("snippetGroupId_%1").arg(iGroupCount);
+
+      _cfg->writeEntry(strKeyName, group->getName());
+      _cfg->writeEntry(strKeyId, group->getId());
+
+      iGroupCount++;
+    } else if (dynamic_cast<SnippetItem*>(item)) {
+      //kdDebug(5006) << "-->ITEM " << item->getName() << item->getParent() << " " << iSnipCount << endl;
+      strKeyName=QString("snippetName_%1").arg(iSnipCount);
+      strKeyText=QString("snippetText_%1").arg(iSnipCount);
+      strKeyId=QString("snippetParent_%1").arg(iSnipCount);
+
+      _cfg->writeEntry(strKeyName, item->getName());
+      _cfg->writeEntry(strKeyText, item->getText());
+      _cfg->writeEntry(strKeyId, item->getParent());
+
+      KAction * action = item->getAction();
+      assert( action );
+      const KShortcut& sc = action->shortcut();
+      if (!sc.isNull() ) {
+          _cfg->writeEntry( QString("snippetShortcut_%1").arg(iSnipCount), sc.toString() );
+      }
+      iSnipCount++;
+    } else {
+      //kdDebug(5006) << "-->ERROR " << item->getName() << endl;
+    }
+    item = _list.next();
+  }
+  _cfg->writeEntry("snippetCount", iSnipCount);
+  _cfg->writeEntry("snippetGroupCount", iGroupCount);
+
+  int iCount = 1;
+  QMap<QString, QString>::Iterator it;
+  for ( it = _mapSaved.begin(); it != _mapSaved.end(); ++it ) {  //write the saved variable values
+    if (it.data().length()<=0) continue;  //is the saved value has no length -> no need to save it
+
+    strKeyName=QString("snippetSavedName_%1").arg(iCount);
+    strKeyText=QString("snippetSavedVal_%1").arg(iCount);
+
+    _cfg->writeEntry(strKeyName, it.key());
+    _cfg->writeEntry(strKeyText, it.data());
+
+    iCount++;
+  }
+  _cfg->writeEntry("snippetSavedCount", iCount-1);
+
+
+  _cfg->writeEntry( "snippetDelimiter", _SnippetConfig.getDelimiter() );
+  _cfg->writeEntry( "snippetVarInput", _SnippetConfig.getInputMethod() );
+  _cfg->writeEntry( "snippetToolTips", _SnippetConfig.useToolTips() );
+  _cfg->writeEntry( "snippetGroupAutoOpen", _SnippetConfig.getAutoOpenGroups() );
+
+  _cfg->writeEntry("snippetSingleRect", _SnippetConfig.getSingleRect() );
+  _cfg->writeEntry("snippetMultiRect", _SnippetConfig.getMultiRect() );
+
+  _cfg->sync();
+}
+
+/*!
+    \fn SnippetWidget::initConfig()
+    Initial read the cofig file
+ */
+void SnippetWidget::initConfig()
+{
+  if (_cfg == NULL)
+    _cfg = new KConfig("kmailsnippetrc", false, false);
+
+  _cfg->setGroup("SnippetPart");
+
+  QString strKeyName="";
+  QString strKeyText="";
+  QString strKeyId="";
+  SnippetItem *item;
+  SnippetGroup *group;
+
+  //kdDebug(5006) << "SnippetWidget::initConfig() " << endl;
+
+  //if entry doesn't get found, this will return -1 which we will need a bit later
+  int iCount = _cfg->readNumEntry("snippetGroupCount", -1);
+
+  for ( int i=0; i<iCount; i++) {  //read the group-list
+    strKeyName=QString("snippetGroupName_%1").arg(i);
+    strKeyId=QString("snippetGroupId_%1").arg(i);
+
+    QString strNameVal="";
+    int iIdVal=-1;
+
+    strNameVal = _cfg->readEntry(strKeyName, "");
+    iIdVal = _cfg->readNumEntry(strKeyId, -1);
+    //kdDebug(5006) << "Read group "  << " " << iIdVal << endl;
+
+    if (strNameVal != "" && iIdVal != -1) {
+      group = new SnippetGroup(this, strNameVal, iIdVal);
+      //kdDebug(5006) << "Created group " << group->getName() << " " << group->getId() << endl;
+      _list.append(group);
+    }
+  }
+
+  /* Check if the snippetGroupCount property has been found
+     if iCount is -1 this means, that the user has his snippets
+     stored without groups. Therefore we will call the
+     initConfigOldVersion() function below */
+  // should not happen since this function has been removed
+
+  if (iCount != -1) {
+    iCount = _cfg->readNumEntry("snippetCount", 0);
+    for ( int i=0; i<iCount; i++) {  //read the snippet-list
+        strKeyName=QString("snippetName_%1").arg(i);
+        strKeyText=QString("snippetText_%1").arg(i);
+        strKeyId=QString("snippetParent_%1").arg(i);
+
+        QString strNameVal="";
+        QString strTextVal="";
+        int iParentVal = -1;
+
+        strNameVal = _cfg->readEntry(strKeyName, "");
+        strTextVal = _cfg->readEntry(strKeyText, "");
+        iParentVal = _cfg->readNumEntry(strKeyId, -1);
+        //kdDebug(5006) << "Read item " << strNameVal << " " << iParentVal << endl;
+
+        if (strNameVal != "" && strTextVal != "" && iParentVal != -1) {
+            KShortcut shortcut( _cfg->readEntry( QString("snippetShortcut_%1").arg(i), QString() ) );
+            item = makeItem( SnippetItem::findGroupById(iParentVal, _list), strNameVal, strTextVal, shortcut );
+            //kdDebug(5006) << "Created item " << item->getName() << " " << item->getParent() << endl;
+            _list.append(item);
+        }
+    }
+  } else {
+      //kdDebug() << "iCount is not -1";
+  }
+
+  iCount = _cfg->readNumEntry("snippetSavedCount", 0);
+
+  for ( int i=1; i<=iCount; i++) {  //read the saved-values and store in QMap
+    strKeyName=QString("snippetSavedName_%1").arg(i);
+    strKeyText=QString("snippetSavedVal_%1").arg(i);
+
+    QString strNameVal="";
+    QString strTextVal="";
+
+    strNameVal = _cfg->readEntry(strKeyName, "");
+    strTextVal = _cfg->readEntry(strKeyText, "");
+
+    if (strNameVal != "" && strTextVal != "") {
+      _mapSaved[strNameVal] = strTextVal;
+    }
+  }
+
+
+  _SnippetConfig.setDelimiter( _cfg->readEntry("snippetDelimiter", "$") );
+  _SnippetConfig.setInputMethod( _cfg->readNumEntry("snippetVarInput", 0) );
+  _SnippetConfig.setToolTips( _cfg->readBoolEntry("snippetToolTips", true) );
+  _SnippetConfig.setAutoOpenGroups( _cfg->readNumEntry("snippetGroupAutoOpen", 1) );
+
+  _SnippetConfig.setSingleRect( _cfg->readRectEntry("snippetSingleRect", 0L) );
+  _SnippetConfig.setMultiRect( _cfg->readRectEntry("snippetMultiRect", 0L) );
+}
+
+/*!
+    \fn SnippetWidget::maybeTip( const QPoint & p )
+    Shows the Snippet-Text as ToolTip
+ */
+void SnippetWidget::maybeTip( const QPoint & p )
+{
+	SnippetItem * item = dynamic_cast<SnippetItem*>( itemAt( p ) );
+	if (!item)
+	  return;
+
+	QRect r = itemRect( item );
+
+	if (r.isValid() &&
+        _SnippetConfig.useToolTips() )
+	{
+	    tip( r, item->getText() );  //show the snippet's text
+	}
+}
+
+/*!
+    \fn SnippetWidget::showPopupMenu( QListViewItem * item, const QPoint & p, int )
+    Shows the Popup-Menu depending item is a valid pointer
+*/
+void SnippetWidget::showPopupMenu( QListViewItem * item, const QPoint & p, int )
+{
+    KPopupMenu popup;
+
+    SnippetItem * selectedItem = static_cast<SnippetItem *>(item);
+    if ( item ) {
+        popup.insertTitle( selectedItem->getName() );
+        if (dynamic_cast<SnippetGroup*>(item)) {
+            popup.insertItem( i18n("Edit &group..."), this, SLOT( slotEditGroup() ) );
+        } else {
+            popup.insertItem( SmallIconSet("editpaste"), i18n("&Paste"), this, SLOT( slotExecuted() ) );
+            popup.insertItem( SmallIconSet("edit"), i18n("&Edit..."), this, SLOT( slotEdit() ) );
+        }
+        popup.insertItem( SmallIconSet("editdelete"), i18n("&Remove"), this, SLOT( slotRemove() ) );
+        popup.insertSeparator();
+    } else {
+        popup.insertTitle(i18n("Text Snippets"));
+    }
+    popup.insertItem( i18n("&Add Snippet..."), this, SLOT( slotAdd() ) );
+    popup.insertItem( i18n("Add G&roup..."), this, SLOT( slotAddGroup() ) );
+
+    popup.exec(p);
+}
+
+
+//  fn SnippetWidget::parseText(QString text, QString del)
+/*!
+    This function is used to parse the given QString for variables. If found the user will be prompted
+    for a replacement value. It returns the string text with all replacements made
+ */
+QString SnippetWidget::parseText(QString text, QString del)
+{
+  QString str = text;
+  QString strName = "";
+  QString strNew = "";
+  QString strMsg="";
+  int iFound = -1;
+  int iEnd = -1;
+  QMap<QString, QString> mapVar;
+  int iInMeth = _SnippetConfig.getInputMethod();
+  QRect rSingle = _SnippetConfig.getSingleRect();
+  QRect rMulti = _SnippetConfig.getMultiRect();
+
+  do {
+    iFound = text.find(QRegExp("\\"+del+"[A-Za-z-_0-9\\s]*\\"+del), iEnd+1);  //find the next variable by this QRegExp
+    if (iFound >= 0) {
+      iEnd = text.find(del, iFound+1)+1;
+      strName = text.mid(iFound, iEnd-iFound);
+
+      if ( strName != del+del  ) {  //if not doubel-delimiter
+        if (iInMeth == 0) { //if input-method "single" is selected
+          if ( mapVar[strName].length() <= 0 ) {  // and not already in map
+            strMsg=i18n("Please enter the value for <b>%1</b>:").arg(strName);
+            strNew = showSingleVarDialog( strName, &_mapSaved, rSingle );
+            if (strNew=="")
+              return ""; //user clicked Cancle
+          } else {
+            continue; //we have already handled this variable
+          }
+        } else {
+          strNew = ""; //for inputmode "multi" just reset new valaue
+        }
+      } else {
+        strNew = del; //if double-delimiter -> replace by single character
+      }
+
+      if (iInMeth == 0) {  //if input-method "single" is selected
+        str.replace(strName, strNew);
+      }
+
+      mapVar[strName] = strNew;
+    }
+  } while (iFound != -1);
+
+  if (iInMeth == 1) {  //check config, if input-method "multi" is selected
+    int w, bh, oh;
+    w = rMulti.width();
+    bh = rMulti.height();
+    oh = rMulti.top();
+    if (showMultiVarDialog( &mapVar, &_mapSaved, w, bh, oh )) {  //generate and show the dialog
+      QMap<QString, QString>::Iterator it;
+      for ( it = mapVar.begin(); it != mapVar.end(); ++it ) {  //walk through the map and do the replacement
+        str.replace(it.key(), it.data());
+      }
+    } else {
+      return "";
+    }
+
+    rMulti.setWidth(w);   //this is a hack to save the dialog's dimensions in only one QRect
+    rMulti.setHeight(bh);
+    rMulti.setTop(oh);
+    rMulti.setLeft(0);
+     _SnippetConfig.setMultiRect(rMulti);
+  }
+
+  _SnippetConfig.setSingleRect(rSingle);
+
+  return str;
+}
+
+
+//  fn SnippetWidget::showMultiVarDialog()
+/*!
+    This function constructs a dialog which contains a label and a linedit for every
+    variable that is stored in the given map except the double-delimiter entry
+    It return true if everything was ok and false if the user hit cancel
+ */
+bool SnippetWidget::showMultiVarDialog(QMap<QString, QString> * map, QMap<QString, QString> * mapSave,
+                                       int & iWidth, int & iBasicHeight, int & iOneHeight)
+{
+  //if no var -> no need to show
+  if (map->count() == 0)
+    return true;
+
+  //if only var is the double-delimiter -> no need to show
+  QMap<QString, QString>::Iterator it = map->begin();
+  if ( map->count() == 1 && it.data()==_SnippetConfig.getDelimiter()+_SnippetConfig.getDelimiter() )
+    return true;
+
+  QMap<QString, KTextEdit *> mapVar2Te;  //this map will help keeping track which TEXTEDIT goes with which variable
+  QMap<QString, QCheckBox *> mapVar2Cb;  //this map will help keeping track which CHECKBOX goes with which variable
+
+  // --BEGIN-- building a dynamic dialog
+  QDialog dlg(this);
+  dlg.setCaption(i18n("Enter Values for Variables"));
+
+  QGridLayout * layout = new QGridLayout( &dlg, 1, 1, 11, 6, "layout");
+  QGridLayout * layoutTop = new QGridLayout( 0, 1, 1, 0, 6, "layoutTop");
+  QGridLayout * layoutVar = new QGridLayout( 0, 1, 1, 0, 6, "layoutVar");
+  QGridLayout * layoutBtn = new QGridLayout( 0, 1, 1, 0, 6, "layoutBtn");
+
+  KTextEdit *te = NULL;
+  QLabel * labTop = NULL;
+  QCheckBox * cb = NULL;
+
+  labTop = new QLabel( &dlg, "label" );
+  labTop->setSizePolicy( QSizePolicy( (QSizePolicy::SizeType)1, (QSizePolicy::SizeType)0, 0, 0,
+                         labTop->sizePolicy().hasHeightForWidth() ) );
+  labTop->setText(i18n("Enter the replacement values for these variables:"));
+  layoutTop->addWidget(labTop, 0, 0);
+  layout->addMultiCellLayout( layoutTop, 0, 0, 0, 1 );
+
+
+  int i = 0;                                           //walk through the variable map and add
+  for ( it = map->begin(); it != map->end(); ++it ) {  //a checkbox, a lable and a lineedit to the main layout
+    if (it.key() == _SnippetConfig.getDelimiter() + _SnippetConfig.getDelimiter())
+      continue;
+
+    cb = new QCheckBox( &dlg, "cbVar" );
+    cb->setChecked( FALSE );
+    cb->setText(it.key());
+    layoutVar->addWidget( cb, i ,0, Qt::AlignTop );
+
+    te = new KTextEdit( &dlg, "teVar" );
+    layoutVar->addWidget( te, i, 1, Qt::AlignTop );
+
+    if ((*mapSave)[it.key()].length() > 0) {
+      cb->setChecked( TRUE );
+      te->setText((*mapSave)[it.key()]);
+    }
+
+    mapVar2Te[it.key()] = te;
+    mapVar2Cb[it.key()] = cb;
+
+    QToolTip::add( cb, i18n("Enable this to save the value entered to the right as the default value for this variable") );
+    QWhatsThis::add( cb, i18n("If you enable this option, the value entered to the right will be saved. "
+                              "If you use the same variable later, even in another snippet, the value entered to the right "
+			      "will be the default value for that variable.") );
+
+    i++;
+  }
+  layout->addMultiCellLayout( layoutVar, 1, 1, 0, 1 );
+
+  KPushButton * btn1 = new KPushButton( KStdGuiItem::cancel(), &dlg, "pushButton1" );
+  btn1->setSizePolicy( QSizePolicy( (QSizePolicy::SizeType)1, (QSizePolicy::SizeType)0, 0, 0,
+                         btn1->sizePolicy().hasHeightForWidth() ) );
+  layoutBtn->addWidget( btn1, 0, 0 );
+
+  KPushButton * btn2 = new KPushButton( KStdGuiItem::apply(), &dlg, "pushButton2" );
+  btn2->setDefault( TRUE );
+  btn2->setSizePolicy( QSizePolicy( (QSizePolicy::SizeType)1, (QSizePolicy::SizeType)0, 0, 0,
+                         btn2->sizePolicy().hasHeightForWidth() ) );
+  layoutBtn->addWidget( btn2, 0, 1 );
+
+  layout->addMultiCellLayout( layoutBtn, 2, 2, 0, 1 );
+  // --END-- building a dynamic dialog
+
+  //connect the buttons to the QDialog default slots
+  connect(btn1, SIGNAL(clicked()), &dlg, SLOT(reject()) );
+  connect(btn2, SIGNAL(clicked()), &dlg, SLOT(accept()) );
+
+  //prepare to execute the dialog
+  bool bReturn = false;
+  //resize the textedits
+  if (iWidth > 1) {
+    QRect r = dlg.geometry();
+    r.setHeight(iBasicHeight + iOneHeight*mapVar2Te.count());
+    r.setWidth(iWidth);
+    dlg.setGeometry(r);
+  }
+  if ( i > 0 && // only if there are any variables
+    dlg.exec() == QDialog::Accepted ) {
+
+    QMap<QString, KTextEdit *>::Iterator it2;
+    for ( it2 = mapVar2Te.begin(); it2 != mapVar2Te.end(); ++it2 ) {
+      if (it2.key() == _SnippetConfig.getDelimiter() + _SnippetConfig.getDelimiter())
+        continue;
+      (*map)[it2.key()] = it2.data()->text();    //copy the entered values back to the given map
+
+      if (mapVar2Cb[it2.key()]->isChecked())     //if the checkbox is on; save the values for later
+        (*mapSave)[it2.key()] = it2.data()->text();
+      else
+        (*mapSave).erase(it2.key());
+    }
+    bReturn = true;
+
+    iBasicHeight = dlg.geometry().height() - layoutVar->geometry().height();
+    iOneHeight = layoutVar->geometry().height() / mapVar2Te.count();
+    iWidth = dlg.geometry().width();
+  }
+
+  //do some cleanup
+  QMap<QString, KTextEdit *>::Iterator it1;
+  for (it1 = mapVar2Te.begin(); it1 != mapVar2Te.end(); ++it1)
+    delete it1.data();
+  mapVar2Te.clear();
+  QMap<QString, QCheckBox *>::Iterator it2;
+  for (it2 = mapVar2Cb.begin(); it2 != mapVar2Cb.end(); ++it2)
+    delete it2.data();
+  mapVar2Cb.clear();
+  delete layoutTop;
+  delete layoutVar;
+  delete layoutBtn;
+  delete layout;
+
+  if (i==0) //if nothing happened this means, that there are no variables to translate
+    return true; //.. so just return OK
+
+  return bReturn;
+//  return true;
+}
+
+
+//  fn SnippetWidget::showSingleVarDialog(QString var, QMap<QString, QString> * mapSave)
+/*!
+    This function constructs a dialog which contains a label and a linedit for the given variable
+    It return either the entered value or an empty string if the user hit cancel
+ */
+QString SnippetWidget::showSingleVarDialog(QString var, QMap<QString, QString> * mapSave, QRect & dlgSize)
+{
+  // --BEGIN-- building a dynamic dialog
+  QDialog dlg(this);
+  dlg.setCaption(i18n("Enter Values for Variables"));
+
+  QGridLayout * layout = new QGridLayout( &dlg, 1, 1, 11, 6, "layout");
+  QGridLayout * layoutTop = new QGridLayout( 0, 1, 1, 0, 6, "layoutTop");
+  QGridLayout * layoutVar = new QGridLayout( 0, 1, 1, 0, 6, "layoutVar");
+  QGridLayout * layoutBtn = new QGridLayout( 0, 2, 1, 0, 6, "layoutBtn");
+
+  KTextEdit *te = NULL;
+  QLabel * labTop = NULL;
+  QCheckBox * cb = NULL;
+
+  labTop = new QLabel( &dlg, "label" );
+  layoutTop->addWidget(labTop, 0, 0);
+  labTop->setText(i18n("Enter the replacement values for %1:").arg( var ));
+  layout->addMultiCellLayout( layoutTop, 0, 0, 0, 1 );
+
+
+  cb = new QCheckBox( &dlg, "cbVar" );
+  cb->setChecked( FALSE );
+  cb->setText(i18n( "Make value &default" ));
+
+  te = new KTextEdit( &dlg, "teVar" );
+  layoutVar->addWidget( te, 0, 1, Qt::AlignTop);
+  layoutVar->addWidget( cb, 1, 1, Qt::AlignTop);
+  if ((*mapSave)[var].length() > 0) {
+    cb->setChecked( TRUE );
+    te->setText((*mapSave)[var]);
+  }
+
+  QToolTip::add( cb, i18n("Enable this to save the value entered to the right as the default value for this variable") );
+  QWhatsThis::add( cb, i18n("If you enable this option, the value entered to the right will be saved. "
+                            "If you use the same variable later, even in another snippet, the value entered to the right "
+                            "will be the default value for that variable.") );
+
+  layout->addMultiCellLayout( layoutVar, 1, 1, 0, 1 );
+
+  KPushButton * btn1 = new KPushButton( KStdGuiItem::cancel(), &dlg, "pushButton1" );
+  layoutBtn->addWidget( btn1, 0, 0 );
+
+  KPushButton * btn2 = new KPushButton( KStdGuiItem::apply(), &dlg, "pushButton2" );
+  btn2->setDefault( TRUE );
+  layoutBtn->addWidget( btn2, 0, 1 );
+
+  layout->addMultiCellLayout( layoutBtn, 2, 2, 0, 1 );
+  te->setFocus();
+  // --END-- building a dynamic dialog
+
+  //connect the buttons to the QDialog default slots
+  connect(btn1, SIGNAL(clicked()), &dlg, SLOT(reject()) );
+  connect(btn2, SIGNAL(clicked()), &dlg, SLOT(accept()) );
+
+  //execute the dialog
+  QString strReturn = "";
+  if (dlgSize.isValid())
+    dlg.setGeometry(dlgSize);
+  if ( dlg.exec() == QDialog::Accepted ) {
+    if (cb->isChecked())     //if the checkbox is on; save the values for later
+      (*mapSave)[var] = te->text();
+    else
+      (*mapSave).erase(var);
+
+    strReturn = te->text();    //copy the entered values back the the given map
+
+    dlgSize = dlg.geometry();
+  }
+
+  //do some cleanup
+  delete cb;
+  delete te;
+  delete labTop;
+  delete btn1;
+  delete btn2;
+  delete layoutTop;
+  delete layoutVar;
+  delete layoutBtn;
+  delete layout;
+
+  return strReturn;
+}
+
+//  fn SnippetWidget::acceptDrag (QDropEvent *event) const
+/*!
+    Reimplementation from KListView.
+    Check here if the data the user is about to drop fits our restrictions.
+    We only accept dropps of plaintext, because from the dropped text
+    we will create a snippet.
+ */
+bool SnippetWidget::acceptDrag (QDropEvent *event) const
+{
+  //kdDebug(5006) << "Format: " << event->format() << "" << event->pos() << endl;
+
+  QListViewItem * item = itemAt(event->pos());
+
+  if (item &&
+      QString(event->format()).startsWith("text/plain") &&
+      static_cast<SnippetWidget *>(event->source()) != this) {
+    ///kdDebug(5006) << "returning TRUE " << endl;
+    return TRUE;
+  } else if(item &&
+      QString(event->format()).startsWith("x-kmailsnippet") &&
+      static_cast<SnippetWidget *>(event->source()) != this)
+  {
+    //kdDebug(5006) << "returning TRUE " << endl;
+    return TRUE;
+  } else {
+    //kdDebug(5006) << "returning FALSE" << endl;
+    event->acceptAction(FALSE);
+    return FALSE;
+  }
+}
+
+//  fn SnippetWidget::slotDropped(QDropEvent *e, QListViewItem *after)
+/*!
+    This slot is connected to the dropped signal.
+    If it is emitted, we need to construct a new snippet entry with
+    the data given
+ */
+void SnippetWidget::slotDropped(QDropEvent *e, QListViewItem *)
+{
+  QListViewItem * item2 = itemAt(e->pos());
+
+  SnippetGroup *group = dynamic_cast<SnippetGroup *>(item2);
+  if (!group)
+    group = dynamic_cast<SnippetGroup *>(item2->parent());
+
+  QCString dropped;
+  QByteArray data = e->encodedData("text/plain");
+  if ( e->provides("text/plain") && data.size()>0 ) {
+    //get the data from the event...
+    QString encData(data.data());
+    //kdDebug(5006) << "encData: " << encData << endl;
+
+    //... then fill the dialog with the given data
+    SnippetDlg dlg( mActionCollection, this, "SnippetDlg" );
+    dlg.snippetName->clear();
+    dlg.snippetText->setText(encData);
+
+    /*fill the combobox with the names of all SnippetGroup entries*/
+    for (SnippetItem *it=_list.first(); it; it=_list.next()) {
+      if (dynamic_cast<SnippetGroup*>(it)) {
+        dlg.cbGroup->insertItem(it->getName());
+      }
+    }
+    dlg.cbGroup->setCurrentText(group->getName());
+
+    if (dlg.exec() == QDialog::Accepted) {
+      /* get the group that the user selected with the combobox */
+      group = dynamic_cast<SnippetGroup*>(SnippetItem::findItemByName(dlg.cbGroup->currentText(), _list));
+      _list.append( makeItem(group, dlg.snippetName->text(), dlg.snippetText->text(), dlg.keyButton->shortcut() ) );
+    }
+  }
+}
+
+void SnippetWidget::startDrag()
+{
+    QString text = dynamic_cast<SnippetItem*>( currentItem() )->getText();
+    QTextDrag *drag = new QTextDrag(text, this);
+    drag->setSubtype("x-textsnippet");
+    drag->drag();
+}
+
+void SnippetWidget::slotExecute()
+{
+    slotExecuted(currentItem());
+}
+
+
+#include "snippetwidget.moc"
+
Index: kmail/snippetsettings.cpp
===================================================================
--- kmail/snippetsettings.cpp	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kmail/snippetsettings.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -17,7 +17,7 @@
 #include <qbuttongroup.h>
 
 #include "snippetsettings.h"
-#include "snippet_widget.h"
+#include "snippetwidget.h"
 
 
 SnippetSettings::SnippetSettings(QWidget *parent, const char *name)
Index: kmail/acljobs.cpp
===================================================================
--- kmail/acljobs.cpp	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kmail/acljobs.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -175,7 +175,7 @@
 void ACLJobs::GetACLJob::slotInfoMessage( KIO::Job*, const QString& str )
 {
   // Parse the result
-  QStringList lst = QStringList::split( " ", str, true );
+  QStringList lst = QStringList::split( "\"", str, true );
   while ( lst.count() >= 2 ) // we take items 2 by 2
   {
     QString user = lst.front(); lst.pop_front();
Index: kmail/dcopmail.desktop
===================================================================
--- kmail/dcopmail.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kmail/dcopmail.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,5 +1,4 @@
 [Desktop Entry]
-Encoding=UTF-8
 Type=ServiceType
 X-KDE-ServiceType=DCOP/Mailer
 Comment=Mail program with a DCOP interface
@@ -27,6 +26,7 @@
 Comment[is]=Póstforrit með DCOP viðmóti
 Comment[it]=Programma di posta con un'interfaccia DCOP
 Comment[ja]=DCOP インターフェース付のメールプログラム
+Comment[ka]=საფოსტო პროგრამა DCOP ინტერფეისით
 Comment[kk]=DCOP интерфейсті пошта бағдарламасы
 Comment[km]=កម្មវិធី​អ៊ីមែល​ដែល​មាន​ចំណុច​ប្រទាក់ DCOP
 Comment[lt]=Pašto programa su DCOP sąsaja
Index: kmail/favoritefolderview.cpp
===================================================================
--- kmail/favoritefolderview.cpp	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kmail/favoritefolderview.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -450,6 +450,13 @@
   addFolder( folder, fti ? prettyName( fti ) : folder->label() );
 }
 
+void KMail::FavoriteFolderView::addFolder(KMFolderTreeItem * fti)
+{
+  if ( !fti || !fti->folder() )
+    return;
+  addFolder( fti->folder(), prettyName( fti ) );
+}
+
 KMFolderTreeItem * FavoriteFolderView::findFolderTreeItem(KMFolder * folder) const
 {
   assert( folder );
Index: kmail/kmfoldertree.cpp
===================================================================
--- kmail/kmfoldertree.cpp	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kmail/kmfoldertree.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -432,6 +432,9 @@
   connect(kmkernel->acctMgr(), SIGNAL(accountRemoved(KMAccount*)),
           this, SLOT(slotAccountRemoved(KMAccount*)));
 
+  connect(kmkernel->acctMgr(), SIGNAL(accountAdded(KMAccount*)),
+          this, SLOT(slotUnhideLocalInbox()));
+
   connect(kmkernel->searchFolderMgr(), SIGNAL(folderRemoved(KMFolder*)),
           this, SLOT(slotFolderRemoved(KMFolder*)));
 
@@ -1358,9 +1361,13 @@
     {
       KMFolder* folder = kmkernel->findFolderById( name );
       if ( folder ) {
-          if ( kmkernel->iCalIface().hideResourceFolder( folder )
+        if ( kmkernel->iCalIface().hideResourceFolder( folder )
            ||  kmkernel->iCalIface().hideResourceAccountRoot( folder ) )
-        continue; // hidden IMAP resource folder, don't delete info
+          continue; // hidden IMAP resource folder, don't delete info
+        if ( folder->noContent() )
+          continue; // we hide nocontent folders if they have no child folders
+        if ( folder == kmkernel->inboxFolder() )
+          continue; // local inbox can be hidden as well
       }
 
       //KMessageBox::error( 0, "cleanupConfigFile: Deleting group " + *grpIt );
@@ -1540,8 +1547,8 @@
   {
     KMFolderImap *folder = static_cast<KMFolderImap*>( fti->folder()->storage() );
     // if we should list all folders we limit this to the root folder
-    if ( !folder->account()->listOnlyOpenFolders() &&
-         fti->parent() )
+    if ( !folder->account() || ( !folder->account()->listOnlyOpenFolders() &&
+         fti->parent() ) )
       return;
     if ( folder->getSubfolderState() == KMFolderImap::imapNoInformation )
     {
@@ -2101,11 +2108,12 @@
 
 void KMFolderTree::slotAddToFavorites()
 {
-  QValueList<QGuardedPtr<KMFolder> > folders = selectedFolders();
   KMail::FavoriteFolderView *favView = mMainWidget->favoriteFolderView();
   assert( favView );
-  for ( QValueList<QGuardedPtr<KMFolder> >::ConstIterator it = folders.constBegin(); it != folders.constEnd(); ++it )
-    favView->addFolder( *it );
+  for ( QListViewItemIterator it( this ); it.current(); ++it ) {
+    if ( it.current()->isSelected() )
+      favView->addFolder( static_cast<KMFolderTreeItem*>( it.current() ) );
+  }
 }
 
 void KMFolderTree::slotUnhideLocalInbox()
Index: kmail/kmail_config_security.desktop
===================================================================
--- kmail/kmail_config_security.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kmail/kmail_config_security.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,5 +1,4 @@
 [Desktop Entry]
-Encoding=UTF-8
 Icon=encrypted
 Type=Service
 ServiceTypes=KCModule
@@ -39,6 +38,7 @@
 Name[is]=Öryggi
 Name[it]=Sicurezza
 Name[ja]=セキュリティ
+Name[ka]=უსაფრთხოება
 Name[kk]=Қауіпсіздік
 Name[km]=សុវត្ថិភាព
 Name[lt]=Saugumas
@@ -64,7 +64,8 @@
 Name[tg]=Амният
 Name[tr]=Güvenlik
 Name[uk]=Безпека
-Name[uz]=Хавфсизлик
+Name[uz]=Xavfsizlik
+Name[uz@cyrillic]=Хавфсизлик
 Name[zh_CN]=安全
 Name[zh_TW]=安全性
 Comment=Security & Privacy Settings
@@ -92,6 +93,7 @@
 Comment[is]=Öryggis & einkalífsstillingar
 Comment[it]=Impostazioni sicurezza e privacy
 Comment[ja]=セキュリティ & プライバシーの設定
+Comment[ka]=უსაფრთხოებისა და პირადულობის პარამეტრები
 Comment[kk]=Қауіпсіздігі пен Дербестік параметрлері
 Comment[km]=ការ​កំណត់​សុវត្ថិភាព & ភាព​ឯកជន
 Comment[lt]=Saugumo ir privatumo nustatymai
@@ -142,6 +144,7 @@
 Keywords[is]=kmail,öryggi
 Keywords[it]=kmail,sicurezza
 Keywords[ja]=kmail,セキュリティ
+Keywords[ka]=kmail,უსაფრთხოება
 Keywords[km]=kmail,សុវត្ថិភាព
 Keywords[lt]=kmail,security,saugumas
 Keywords[mk]=kmail,security,кпошта,безбедност
@@ -164,5 +167,6 @@
 Keywords[tg]=kmail,security,амният
 Keywords[tr]=kmail,güvenlik
 Keywords[uk]=kmail,безпека
-Keywords[uz]=kmail,хавфсизлик
+Keywords[uz]=kmail,xavfsizlik
+Keywords[uz@cyrillic]=kmail,хавфсизлик
 Keywords[zh_CN]=kmail,security,安全
Index: kmail/objecttreeparser.cpp
===================================================================
--- kmail/objecttreeparser.cpp	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kmail/objecttreeparser.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2086,7 +2086,7 @@
   url.setPath( "showAuditLog" );
   url.addQueryItem( "log", auditLog );
 
-  return "<a href=\"" + url.htmlURL() + "\">" + i18n("Show Audit Log") + "</a>";
+  return "<a href=\"" + url.htmlURL() + "\">" + i18n("The Audit Log is a detailed error log from the gnupg backend", "Show Audit Log") + "</a>";
 }
 
 static QString endVerboseSigstatHeader( const PartMetaData & pmd )
@@ -2230,11 +2230,9 @@
                     QString msgFrom( KPIM::getEmailAddress(fromAddress) );
                     QString certificate;
                     if( block.keyId.isEmpty() )
-                        certificate = "certificate";
+                        certificate = i18n("certificate");
                     else
-                        certificate = QString("%1%2</a>")
-                                      .arg( startKeyHREF,
-                                            "certificate" );
+                        certificate = startKeyHREF + i18n("certificate") + "</a>"; 
                     if( !blockAddrs.empty() ){
                         if( blockAddrs.grep(
                                 msgFrom,
Index: kmail/kmail_config_accounts.desktop
===================================================================
--- kmail/kmail_config_accounts.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kmail/kmail_config_accounts.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,5 +1,4 @@
 [Desktop Entry]
-Encoding=UTF-8
 Icon=network
 Type=Service
 ServiceTypes=KCModule
@@ -40,6 +39,7 @@
 Name[is]=Tengingar
 Name[it]=Account
 Name[ja]=アカウント
+Name[ka]=ანგარიშები
 Name[kk]=Тіркелгілері
 Name[km]=គណនី
 Name[lt]=Paskyros
@@ -64,7 +64,8 @@
 Name[tg]=Қайдҳои баҳисобгирӣ
 Name[tr]=Hesaplar
 Name[uk]=Рахунки
-Name[uz]=Ҳисоблар
+Name[uz]=Hisoblar
+Name[uz@cyrillic]=Ҳисоблар
 Name[zh_CN]=账户
 Name[zh_TW]=帳號
 Comment=Setup for Sending and Receiving Messages
@@ -90,6 +91,7 @@
 Comment[is]=Uppsetning fyrir sendingu og móttöku af tölvupósti
 Comment[it]=Impostazioni per spedire e ricevere messaggi
 Comment[ja]=メッセージを送受信するための設定
+Comment[ka]=შეტყობინებების გაგზავნისა და მიღების კონფიგურაცია
 Comment[kk]=Хаттарды жіберу мен қабылдауды баптау
 Comment[km]=រៀបចំ​ដើម្បី​ផ្ញើ និង​ទទួល​សារ
 Comment[lt]=Laiškų siuntimo ir gavimo sąranka
@@ -137,6 +139,7 @@
 Keywords[hu]=kmail,azonosítók
 Keywords[is]=kmail,accounts,tengingar
 Keywords[it]=kmail,account
+Keywords[ka]=kmail,ანგარიშები
 Keywords[km]=kmail,គណនី
 Keywords[lt]=kmail,accounts,paskyros
 Keywords[mk]=kmail,accounts,кпошта,сметка,сметки
Index: kmail/kmversion.h
===================================================================
--- kmail/kmversion.h	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kmail/kmversion.h	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -3,6 +3,6 @@
 #ifndef kmversion_h
 #define kmversion_h
 
-#define KMAIL_VERSION "1.9.9"
+#define KMAIL_VERSION "1.9.10"
 
 #endif /*kmversion_h*/
Index: networkstatus/networkstatus.desktop
===================================================================
--- networkstatus/networkstatus.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ networkstatus/networkstatus.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,5 +1,4 @@
 [Desktop Entry]
-Encoding=UTF-8
 Name=Network Status Daemon
 Name[af]=Netwerk status bediener
 Name[ar]=مراقب القرص و التنفيذ لحالة الشبكة
@@ -22,6 +21,7 @@
 Name[is]=Netstöðupúki
 Name[it]=Demone dello stato della rete
 Name[ja]=ネットワークステータスデーモン
+Name[ka]=ქსელის მდგომარეობის დემონი
 Name[kk]=Желі күйінің қызметі
 Name[km]=ដេមិន​ស្ថានភាព​បណ្ដាញ
 Name[ko]=네트워크 상태 데몬
@@ -67,6 +67,7 @@
 Comment[is]=Fylgist með stöðu netkorta og sendir tilkynningar til forrita sem nota netið.
 Comment[it]=Controlla lo stato delle interfacce di rete e fornisce notifiche alle applicazioni che usano al rete.
 Comment[ja]=ネットワークインターフェースの状態を追跡し、ネットワークを用いるアプリケーションに通知します
+Comment[ka]=იძიებს ქსელის ინტერფეისის სტატუსებს და უზრუნველჰყოფს ქსელის მომხმარებელი პროგრამებისათვის შეტყობინებების მიწოდებას.
 Comment[kk]=Желі интерфейстерінің күйін бақылап, желіні қолданатын бағдарламаларын құлақтандыру қызметі.
 Comment[km]=តាមដាន​ស្ថានភាព​របស់​ចំណុច​ប្រទាក់​បណ្ដាញ ព្រម​ទាំង​ផ្ដល់​នូវ​ការ​ជូនដំណឹង​ទៅ​កម្មវិធី ដែល​ប្រើ​បណ្ដាញ ។
 Comment[lt]=Seka tinklo sąsajų būseną ir informuoja apie jas programas, naudojančias tinklą
Index: knode/knode_config_identity.desktop
===================================================================
--- knode/knode_config_identity.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ knode/knode_config_identity.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,5 +1,4 @@
 [Desktop Entry]
-Encoding=UTF-8
 Icon=identity
 Type=Service
 ServiceTypes=KCModule
@@ -39,6 +38,7 @@
 Name[is]=Auðkenni
 Name[it]=Identità
 Name[ja]=個人情報
+Name[ka]=პროფილი
 Name[kk]=Іс-әлпеті
 Name[km]=អត្តសញ្ញាណ
 Name[lt]=Tapatybė
@@ -63,7 +63,8 @@
 Name[tg]=Профил
 Name[tr]=Kimlik
 Name[uk]=Профіль
-Name[uz]=Шахсият
+Name[uz]=Shaxsiyat
+Name[uz@cyrillic]=Шахсият
 Name[zh_CN]=身份
 Name[zh_TW]=身份
 Comment=Personal Information
@@ -93,6 +94,7 @@
 Comment[is]=Persónuupplýsingar
 Comment[it]=Informazioni personali
 Comment[ja]=個人の情報
+Comment[ka]=პირადი ინფორმაცია
 Comment[kk]=Дербес мәліметтер
 Comment[km]=ព័ត៌មាន​ផ្ទាល់​ខ្លួន
 Comment[lt]=Asmeninė informacija
Index: knode/knode_config_accounts.desktop
===================================================================
--- knode/knode_config_accounts.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ knode/knode_config_accounts.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,5 +1,4 @@
 [Desktop Entry]
-Encoding=UTF-8
 Icon=network
 Type=Service
 ServiceTypes=KCModule
@@ -40,6 +39,7 @@
 Name[is]=Tengingar
 Name[it]=Account
 Name[ja]=アカウント
+Name[ka]=ანგარიშები
 Name[kk]=Тіркелгілері
 Name[km]=គណនី
 Name[lt]=Paskyros
@@ -64,7 +64,8 @@
 Name[tg]=Қайдҳои баҳисобгирӣ
 Name[tr]=Hesaplar
 Name[uk]=Рахунки
-Name[uz]=Ҳисоблар
+Name[uz]=Hisoblar
+Name[uz@cyrillic]=Ҳисоблар
 Name[zh_CN]=账户
 Name[zh_TW]=帳號
 Comment=Setup for Newsgroup and Mail Servers
@@ -88,6 +89,7 @@
 Comment[is]=Uppsetning fyrir fréttahópa og póstþjóna
 Comment[it]=Impostazioni per newsgroup e server di posta
 Comment[ja]=ニュースグループとメールサーバの設定
+Comment[ka]=სიახლეთა ჯგუფებისა და საფოსტო სერვერის კონფიგურაცია
 Comment[kk]=Жаңалық топтар мен Пошта серверлері
 Comment[km]=រៀបចំម៉ាស៊ីន​បម្រើ​វេទិកា​ព័ត៌មាន និង​សំបុត្រ
 Comment[lt]=Naujienų grupių ir pašto serverių nustatymai
Index: knode/knprotocolclient.cpp
===================================================================
--- knode/knprotocolclient.cpp	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ knode/knprotocolclient.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -93,7 +93,6 @@
   timeval tv;
   int selectRet;
 
-  int holdTime = 1000 * account.hold();
   while (true) {
     if (isConnected()) {  // we are connected, hold the connection for xx secs
       FD_ZERO(&fdsR);
@@ -101,24 +100,21 @@
       FD_SET(tcpSocket, &fdsR);
       FD_ZERO(&fdsE);
       FD_SET(tcpSocket, &fdsE);
-      tv.tv_sec = 0;
-      tv.tv_usec = 1000;
-      --holdTime;
+      tv.tv_sec = account.hold();
+      tv.tv_usec = 0;
       selectRet = KSocks::self()->select(FD_SETSIZE, &fdsR, NULL, &fdsE, &tv);
+      if ( mTerminate ) {
+        clearPipe();
+        closeConnection();
+        return;
+      }
+      // In addition to the timeout, this will also happen
+      // if select() returns early because of a signal
       if (selectRet == 0) {
-        if (holdTime <= 0) {
 #ifndef NDEBUG
           qDebug("knode: KNProtocolClient::waitForWork(): hold time elapsed, closing connection.");
 #endif
           closeConnection();               // nothing happend...
-          holdTime = 1000 * account.hold();
-        } else {
-          if ( mTerminate ) {
-            closeConnection();
-            return;
-          }
-          continue;
-        }
       } else {
         if (((selectRet > 0)&&(!FD_ISSET(fdPipeIn,&fdsR)))||(selectRet == -1)) {
 #ifndef NDEBUG
@@ -129,18 +125,16 @@
       }
     }
 
-    struct timeval timeout;
     do {
-      timeout.tv_sec = 0;
-      timeout.tv_usec = 1000;
       FD_ZERO(&fdsR);
       FD_SET(fdPipeIn, &fdsR);
-      if (mTerminate)
-        return;
-    } while (select(FD_SETSIZE, &fdsR, NULL, NULL, &timeout) <= 0);  // don't get tricked by signals
+    } while (select(FD_SETSIZE, &fdsR, NULL, NULL, NULL) <= 0);  // don't get tricked by signals
 
     clearPipe();      // remove start signal
 
+    if (mTerminate)
+      return;
+
     timer.start();
 
     sendSignal(TSjobStarted);
Index: knode/knode_config_read_news.desktop
===================================================================
--- knode/knode_config_read_news.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ knode/knode_config_read_news.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,5 +1,4 @@
 [Desktop Entry]
-Encoding=UTF-8
 Icon=mail_get
 Type=Service
 ServiceTypes=KCModule
@@ -36,6 +35,7 @@
 Name[is]=Lestur frétta
 Name[it]=Lettura News
 Name[ja]=ニュースを読む
+Name[ka]=სიახლეების კითხვა
 Name[kk]=Жаңалықтарды оқу
 Name[km]=អាន​ព័ត៌មាន
 Name[lt]=Naujienų skaitymas
@@ -59,7 +59,8 @@
 Name[tg]=Хондани ахборот
 Name[tr]=Haber Okuma
 Name[uk]=Читання новин
-Name[uz]=Янгиликларни ўқиш
+Name[uz]=Yangiliklarni oʻqish
+Name[uz@cyrillic]=Янгиликларни ўқиш
 Name[zh_CN]=阅读新闻
 Name[zh_TW]=閱讀新聞
 
Index: knode/knode_config_privacy.desktop
===================================================================
--- knode/knode_config_privacy.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ knode/knode_config_privacy.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,5 +1,4 @@
 [Desktop Entry]
-Encoding=UTF-8
 Icon=password
 Type=Service
 ServiceTypes=KCModule
@@ -35,6 +34,7 @@
 Name[is]=Undirrita/staðfesta
 Name[it]=Firma/verifica
 Name[ja]=署名/検証
+Name[ka]=ხელმოწერა/დამოწმება
 Name[kk]=Қолтаңбалау/Тексеру
 Name[km]=ចុះហត្ថលេខា/ផ្ទៀងផ្ទាត់
 Name[lt]=Pasirašoma/tikrinama
@@ -81,6 +81,7 @@
 Comment[is]=Verndaðu einkalífið þitt með því að undirrita og staðfesta sendingar
 Comment[it]=Proteggi la tua privacy firmando e verificando i messaggi
 Comment[ja]=投稿の署名と検証によりあなたのプライバシーを保護します
+Comment[ka]=დაიცავით თქვენი პირადულობა ხელმოწერითა და განთავსებული სტატიების დამოწმებით
 Comment[kk]=Жарияланғанды қолтаңбалап/тексеріп қорғану
 Comment[km]=ការពារ​ភាព​ឯកជន​របស់​អ្នក​ដោយ​ចុះហត្ថលេខា និង​​ផ្ទៀងផ្ទាត់​ការ​ប្រកាស
 Comment[lt]=Saugokite savo privatumą pasirašydami ir patikrindami skelbimus
Index: knode/knode_config_cleanup.desktop
===================================================================
--- knode/knode_config_cleanup.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ knode/knode_config_cleanup.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,5 +1,4 @@
 [Desktop Entry]
-Encoding=UTF-8
 Icon=wizard
 Type=Service
 ServiceTypes=KCModule
@@ -36,6 +35,7 @@
 Name[is]=Hreinsun
 Name[it]=Pulizia
 Name[ja]=整理
+Name[ka]=გაწმენდა
 Name[kk]=Тазалау
 Name[km]=សម្អាត
 Name[lt]=Išvalymas
@@ -85,6 +85,7 @@
 Comment[is]=Varðveita diskpláss
 Comment[it]=Risparmia lo spazio su disco
 Comment[ja]=ディスクスペースを維持
+Comment[ka]=სივრცის შენახვა დისკზე
 Comment[kk]=Дискідегі орынды үнемдеу
 Comment[km]=បង្ការ​ទំហំ​ថាស
 Comment[lt]=Disko erdvės išsaugojimas
Index: knode/knode_config_appearance.desktop
===================================================================
--- knode/knode_config_appearance.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ knode/knode_config_appearance.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,5 +1,4 @@
 [Desktop Entry]
-Encoding=UTF-8
 Icon=looknfeel
 Type=Service
 ServiceTypes=KCModule
@@ -40,6 +39,7 @@
 Name[is]=Útlit
 Name[it]=Aspetto
 Name[ja]=外観
+Name[ka]=იერსახე
 Name[kk]=Сыртқы көрінісі
 Name[km]=រូបរាង
 Name[ko]=모양
@@ -66,7 +66,8 @@
 Name[tg]=Намуди зоҳирӣ
 Name[tr]=Görünüm
 Name[uk]=Вигляд
-Name[uz]=Кўриниши
+Name[uz]=Koʻrinishi
+Name[uz@cyrillic]=Кўриниши
 Name[zh_CN]=外观
 Comment=Customize Visual Appearance
 Comment[af]=Pasmaak die visuele voorkoms
@@ -92,6 +93,7 @@
 Comment[is]=Stilla útlit
 Comment[it]=Personalizza l'aspetto
 Comment[ja]=外観をカスタマイズ
+Comment[ka]=ვიზუალური იერსახის დაყენება
 Comment[kk]=Сыртқы көрінісін ыңғайлау
 Comment[km]=ប្ដូរ​រូបរាង​មើល​ឃើញ​តាម​បំណង
 Comment[lt]=Derinti vizualinę išvaizdą
Index: knode/knode_config_post_news.desktop
===================================================================
--- knode/knode_config_post_news.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ knode/knode_config_post_news.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,5 +1,4 @@
 [Desktop Entry]
-Encoding=UTF-8
 Icon=mail_forward
 Type=Service
 ServiceTypes=KCModule
@@ -34,6 +33,7 @@
 Name[is]=Senda fréttir
 Name[it]=Invio news
 Name[ja]=ニュースを投稿
+Name[ka]=სიახლეების განთავსება
 Name[kk]=Жариялау
 Name[km]=ប្រកាស​ព័ត៌មាន​
 Name[lt]=Naujienų skelbimas
Index: knode/knnetaccess.cpp
===================================================================
--- knode/knnetaccess.cpp	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ knode/knnetaccess.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -70,6 +70,7 @@
   disconnect(nntpNotifier, SIGNAL(activated(int)), this, SLOT(slotThreadSignal(int)));
 
   nntpClient->terminateClient();
+  triggerAsyncThread(nntpOutPipe[1]);
   nntpClient->wait();
 
   delete nntpClient;
Index: knode/KNode.desktop
===================================================================
--- knode/KNode.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ knode/KNode.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,5 +1,4 @@
 [Desktop Entry]
-Encoding=UTF-8
 Type=Application
 Exec=knode -caption "%c" %i %m
 Icon=knode
@@ -45,6 +44,7 @@
 GenericName[is]=Fréttaforrit
 GenericName[it]=Lettore newsgroup
 GenericName[ja]=ニュースリーダー
+GenericName[ka]=სიახლეების წამკითხველი
 GenericName[kk]=Жаңалықтарды оқу құралы
 GenericName[km]=កម្មវិធី​អាន​ព័ត៌មាន
 GenericName[lt]=Naujienų skaityklė
Index: kioslaves/imap4/imapparser.cc
===================================================================
--- kioslaves/imap4/imapparser.cc	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kioslaves/imap4/imapparser.cc	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -280,7 +280,7 @@
   while ( true )
   {
     //read the next line
-    while (parseLoop() == 0);
+    while (parseLoop() == 0) ;
     if ( cmd->isComplete() ) break;
 
     if (!continuation.isEmpty())
@@ -788,7 +788,7 @@
     QCString word = parseLiteralC (result, false, false, &outlen);
     roots.append (word);
   }
-  lastResults.append( roots.join(" ") );
+  lastResults.append( roots.isEmpty()? "" : roots.join(" ") );
 }
 
 void imapParser::parseCustom (parseString & result)
@@ -895,6 +895,8 @@
 
 void imapParser::parseAddressList (parseString & inWords, QPtrList<mailAddress>& list)
 {
+  if (inWords.isEmpty())
+    return;
   if (inWords[0] != '(')
   {
     parseOneWordC (inWords);     // parse NIL
@@ -915,7 +917,7 @@
       }
     }
 
-    if (inWords[0] == ')')
+    if (!inWords.isEmpty() && inWords[0] == ')')
       inWords.pos++;
     skipWS (inWords);
   }
@@ -931,7 +933,7 @@
   retVal.setUser(parseLiteralC(inWords));
   retVal.setHost(parseLiteralC(inWords));
 
-  if (inWords[0] == ')')
+  if (!inWords.isEmpty() && inWords[0] == ')')
     inWords.pos++;
   skipWS (inWords);
 
@@ -1004,7 +1006,7 @@
       parseLiteralC (inWords);
   }
 
-  if (inWords[0] == ')')
+  if (!inWords.isEmpty() && inWords[0] == ')')
     inWords.pos++;
   skipWS (inWords);
 
@@ -1531,7 +1533,7 @@
             parseBodyStructure (inWords, section, envelope);
           QByteArray data;
           QDataStream stream( data, IO_WriteOnly );
-          body->serialize(stream);
+          if (body) body->serialize(stream);
           parseRelay(data);
 
           delete body;
@@ -1613,7 +1615,7 @@
       parseLiteralC(inWords);
   }
 
-  if (inWords[0] != ')')
+  if (inWords.isEmpty() || inWords[0] != ')')
     return;
   inWords.pos++;
   skipWS (inWords);
@@ -1906,7 +1908,7 @@
 
 QCString imapParser::parseLiteralC(parseString & inWords, bool relay, bool stopAtBracket, int *outlen) {
 
-  if (inWords[0] == '{')
+  if (!inWords.isEmpty() && inWords[0] == '{')
   {
     QCString retVal;
     ulong runLen = inWords.find ('}', 1);
Index: kioslaves/imap4/imap4.cc
===================================================================
--- kioslaves/imap4/imap4.cc	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kioslaves/imap4/imap4.cc	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -313,7 +313,7 @@
         cmd = sendCommand (imapCommand::clientFetch (aSequence, mySection));
         do
         {
-          while (!parseLoop ());
+          while (!parseLoop ()) ;
         }
         while (!cmd->isComplete ());
         completeQueue.removeRef (cmd);
@@ -332,7 +332,7 @@
       aUpper = aSection.upper();
       do
       {
-        while (!(res = parseLoop()));
+        while (!(res = parseLoop())) ;
         if (res == -1) break;
 
         mailHeader *lastone = 0;
@@ -595,7 +595,7 @@
         imapCache *cache;
         do
         {
-          while (!parseLoop ());
+          while (!parseLoop ()) ;
 
           cache = getLastHandled ();
 
@@ -824,7 +824,7 @@
 
     imapCommand *cmd =
       sendCommand (imapCommand::clientAppend (aBox, aSection, length));
-    while (!parseLoop ());
+    while (!parseLoop ()) ;
 
     // see if server is waiting
     if (!cmd->isComplete () && !getContinuation ().isEmpty ())
@@ -1493,10 +1493,10 @@
     }
     // Returning information to the application from a special() command isn't easy.
     // I'm reusing the infoMessage trick seen above (for capabilities), but this
-    // limits me to a string instead of a stringlist. I'm using space as separator,
-    // since I don't think it can be used in login names.
+    // limits me to a string instead of a stringlist. Using DQUOTE as separator,
+    // because it's forbidden in userids by rfc3501
     kdDebug(7116) << getResults() << endl;
-    infoMessage(getResults().join( " " ));
+    infoMessage(getResults().join( "\"" ));
     finished();
     break;
   }
@@ -1603,7 +1603,7 @@
   if ( type == 'E' ) {
     kdDebug(7116) << "IMAP4Protocol::specialCustomCommand: extended mode" << endl;
     imapCommand *cmd = sendCommand (imapCommand::clientCustom( command, QString() ));
-    while ( !parseLoop () );
+    while ( !parseLoop () ) ;
 
     // see if server is waiting
     if (!cmd->isComplete () && !getContinuation ().isEmpty ())
@@ -1626,7 +1626,7 @@
 
     do
     {
-      while (!parseLoop ());
+      while (!parseLoop ()) ;
     }
     while (!cmd->isComplete ());
 
@@ -2032,7 +2032,7 @@
     imapCommand *cmd;
 
     unhandled.clear ();
-    if (!alreadyConnected) while (!parseLoop ());    //get greeting
+    if (!alreadyConnected) while (!parseLoop ()) ;    //get greeting
     QString greeting;
     if (!unhandled.isEmpty()) greeting = unhandled.first().stripWhiteSpace();
     unhandled.clear ();       //get rid of it
Index: kioslaves/sieve/sieve.cpp
===================================================================
--- kioslaves/sieve/sieve.cpp	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kioslaves/sieve/sieve.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -17,7 +17,7 @@
 /**
  * Portions adapted from the SMTP ioslave.
  * Copyright (c) 2000, 2001 Alex Zepeda <jazepeda@pacbell.net>
- * Copyright (c) 2001 Michael Hckel <Michael@Haeckel.Net>
+ * Copyright (c) 2001 Michael Häckel <Michael@Haeckel.Net>
  * All rights reserved.
  *
  * Policy: the function where the error occurs calls error(). A result of
@@ -41,6 +41,7 @@
 #include <kglobal.h>
 
 #include <qcstring.h>
+#include <qregexp.h>
 
 #include <cstdlib>
 using std::exit;
@@ -252,6 +253,7 @@
 				ksDebug() << "Connected to Sieve server: " << r.getVal() << endl;
 				ret = true;
 				setMetaData("implementation", r.getVal());
+				m_implementation = r.getVal();
 			}
 
 		} else if (r.getKey() == "SASL") {
@@ -357,7 +359,7 @@
 			if (retval == 1) {
 				ksDebug() << "TLS enabled successfully." << endl;
 				// reparse capabilities:
-				parseCapabilities(false);
+				parseCapabilities( requestCapabilitiesAfterStartTLS() );
 			} else {
 				ksDebug() << "TLS initiation failed, code " << retval << endl;
 				disconnect(true);
@@ -393,8 +395,11 @@
 	if (!forcibly) {
 		sendData("LOGOUT");
 
-		if (!operationSuccessful())
-			ksDebug() << "Server did not logout cleanly." << endl;
+		// This crashes under certain conditions as described in
+		// http://intevation.de/roundup/kolab/issue2442
+		// Fixing KIO::TCPSlaveBase::atEnd() for !fd would also work but 3.x is on life support.
+		//if (!operationSuccessful())
+		//	ksDebug() << "Server did not logout cleanly." << endl;
 	}
 
 	closeDescriptor();
@@ -1188,7 +1193,10 @@
 		  {
 			// expecting {quantity}
 			start = 0;
-			end = interpret.find('}', start + 1)-1;
+			end = interpret.find("+}", start + 1);
+			// some older versions of Cyrus enclose the literal size just in { } instead of { +}
+			if ( end == -1 )
+				end = interpret.find('}', start + 1);
 
 			bool ok = false;
 			r.setQuantity(interpret.mid(start + 1, end - start - 1).toUInt( &ok ));
@@ -1270,3 +1278,22 @@
 
 	return OTHER;
 }
+
+bool kio_sieveProtocol::requestCapabilitiesAfterStartTLS() const
+{
+  // Cyrus didn't send CAPABILITIES after STARTTLS until 2.3.11, which is
+  // not standard conform, but we need to support that anyway.
+  // m_implementation looks like this 'Cyrus timsieved v2.2.12' for Cyrus btw.
+  QRegExp regExp( "Cyrus\\stimsieved\\sv(\\d+)\\.(\\d+)\\.(\\d+)([-\\w]*)", false );
+  if ( regExp.search( m_implementation ) >= 0 ) {
+    const int major = regExp.cap( 1 ).toInt();
+    const int minor = regExp.cap( 2 ).toInt();
+    const int patch = regExp.cap( 3 ).toInt();
+    const QString vendor = regExp.cap( 4 );
+    if ( major < 2 || (major == 2 && (minor < 3 || (minor == 3 && patch < 11))) || (vendor == "-kolab-nocaps") ) {
+      ksDebug() << k_funcinfo << "Enabling compat mode for Cyrus < 2.3.11 or Cyrus marked as \"kolab-nocaps\"" << endl;
+      return true;
+    }
+  }
+  return false;
+}
Index: kioslaves/sieve/sieve.h
===================================================================
--- kioslaves/sieve/sieve.h	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kioslaves/sieve/sieve.h	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -122,6 +122,11 @@
 	QString				m_sPass;
 	QString				m_sAuth;
 	bool				m_shouldBeConnected;
+
+private:
+	bool requestCapabilitiesAfterStartTLS() const;
+
+	QString m_implementation;
 };
 
 #endif
Index: kioslaves/sieve/sieve.protocol
===================================================================
--- kioslaves/sieve/sieve.protocol	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kioslaves/sieve/sieve.protocol	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -23,13 +23,14 @@
 Description[eu]=Sieve posta iragazketa protokoloarentztko  irteerako/sarrerako mendeko bat
 Description[fa]=یک  ioslave برای قرارداد پالایش نامۀ Sieve
 Description[fi]=Siirräntätyöskentelijä Sieve-sähköpostiensuodatusyhteyskäytännölle
-Description[fr]=Un ioslave pour le protocole de filtrage de messagerie Sieve
+Description[fr]=Un module d'entrées / sorties pour le protocole de filtrage de messagerie Sieve
 Description[fy]=In ioslave foar it Sieve-mailfilterprotokol
 Description[gl]=Un esclavo io para o protocolo de filtraxe de correo Sieve
 Description[hu]=KDE-protokoll a Sieve levélszűrő protokollhoz
 Description[is]=Ioslave fyrir Sieve tölvupóstsíu samskiptaregluna
 Description[it]=Un ioslave per il protocollo di filtraggio posta Sieve
 Description[ja]=Sieve メールフィルタプロトコル用 ioslave
+Description[ka]=Sieve ფოსტის ფილტრის შეტანა-გამოტანის განაწესი
 Description[kk]=Sieve поштаны сүзгілеу протоколының ioslave модулі
 Description[km]=ioslave សម្រាប់​ពិធីការ​ត្រង​សំបុត្រ Sieve
 Description[ms]=Hamba io untuk protokol tapisan mel saringan 
Index: libkdenetwork/gpgmepp/keylistresult.cpp
===================================================================
--- libkdenetwork/gpgmepp/keylistresult.cpp	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkdenetwork/gpgmepp/keylistresult.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -29,6 +29,7 @@
 #include <gpgme.h>
 
 #include <cstring>
+#include <cassert>
 
 class GpgME::KeyListResult::Private : public GpgME::Shared {
 public:
@@ -60,7 +61,7 @@
 make_standard_stuff(KeyListResult)
 
 void GpgME::KeyListResult::detach() {
-  if ( isNull() || d->refCount() <= 1 )
+  if ( !d || d->refCount() <= 1 )
     return;
   d->unref();
   d = new Private( *d );
@@ -74,9 +75,13 @@
     return;
   }
   // merge the truncated flag (try to keep detaching to a minimum):
-  if ( other.d->res.truncated && !d->res.truncated ) {
+  if ( other.isTruncated() && !this->isTruncated() ) {
+    assert( other.d );
     detach();
-    d->res.truncated = true;
+    if ( !d )
+        d = new Private( *other.d );
+    else
+        d->res.truncated = true;
   }
   if ( !error() ) // only merge the error when there was none yet.
     Result::operator=( other );
Index: doc/kaddressbook/index.docbook
===================================================================
--- doc/kaddressbook/index.docbook	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ doc/kaddressbook/index.docbook	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1134,6 +1134,34 @@
 <userinput><option>--help-qt</option></userinput>.</para>
 </chapter>
 
+<chapter id="configure-non-gui-options">
+<title>Options Without a User Interface Representation</title>
+<para>
+Apart from the options presented in the configuration dialog, some options
+can only be set directly in the configuration file ($KDEHOME/share/config/kaddressbookrc)
+or through KIOSK.
+</para>
+
+<variablelist>
+
+<varlistentry>
+<term><guilabel>ContactListAboveExtensions</guilabel></term>
+<listitem>
+<para>
+If enabled, extensions (e.g. the distribution list editor) are shown below the contact list, 
+not in an separate column. By default, this option is disabled.
+
+To enable this option, add a line reading (under [MainWindow] section):
+</para>
+<programlisting>ContactListAboveExtensions=true
+</programlisting>
+</listitem>
+</varlistentry>
+
+</variablelist>
+
+</chapter>
+
 <chapter id="credits">
 <title>Credits and License</title>
 
Index: kalarm/alarmevent.cpp
===================================================================
--- kalarm/alarmevent.cpp	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kalarm/alarmevent.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,7 +1,7 @@
 /*
  *  alarmevent.cpp  -  represents calendar alarms and events
  *  Program:  kalarm
- *  Copyright © 2001-2008 by David Jarvie <software@astrojar.org.uk>
+ *  Copyright © 2001-2008 by David Jarvie <djarvie@kde.org>
  *
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the GNU General Public License as published by
@@ -822,25 +822,6 @@
 	mUpdated                = false;
 }
 
-/******************************************************************************
- * Initialise a command KAEvent.
- */
-void KAEvent::setCommand(const QDate& d, const QString& command, int lateCancel, int flags, const QString& logfile)
-{
-	if (!logfile.isEmpty())
-		flags &= ~EXEC_IN_XTERM;
-	set(d, command, QColor(), QColor(), QFont(), COMMAND, lateCancel, flags | ANY_TIME);
-	mLogFile = logfile;
-}
-
-void KAEvent::setCommand(const QDateTime& dt, const QString& command, int lateCancel, int flags, const QString& logfile)
-{
-	if (!logfile.isEmpty())
-		flags &= ~EXEC_IN_XTERM;
-	set(dt, command, QColor(), QColor(), QFont(), COMMAND, lateCancel, flags);
-	mLogFile = logfile;
-}
-
 void KAEvent::setLogFile(const QString& logfile)
 {
 	mLogFile = logfile;
@@ -848,29 +829,6 @@
 		mCommandXterm = false;
 }
 
-/******************************************************************************
- * Initialise an email KAEvent.
- */
-void KAEvent::setEmail(const QDate& d, uint from, const EmailAddressList& addresses, const QString& subject,
-			    const QString& message, const QStringList& attachments, int lateCancel, int flags)
-{
-	set(d, message, QColor(), QColor(), QFont(), EMAIL, lateCancel, flags | ANY_TIME);
-	mEmailFromIdentity = from;
-	mEmailAddresses    = addresses;
-	mEmailSubject      = subject;
-	mEmailAttachments  = attachments;
-}
-
-void KAEvent::setEmail(const QDateTime& dt, uint from, const EmailAddressList& addresses, const QString& subject,
-			    const QString& message, const QStringList& attachments, int lateCancel, int flags)
-{
-	set(dt, message, QColor(), QColor(), QFont(), EMAIL, lateCancel, flags);
-	mEmailFromIdentity = from;
-	mEmailAddresses    = addresses;
-	mEmailSubject      = subject;
-	mEmailAttachments  = attachments;
-}
-
 void KAEvent::setEmail(uint from, const EmailAddressList& addresses, const QString& subject, const QStringList& attachments)
 {
 	mEmailFromIdentity = from;
Index: kalarm/templatemenuaction.cpp
===================================================================
--- kalarm/templatemenuaction.cpp	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kalarm/templatemenuaction.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,7 +1,7 @@
 /*
  *  templatemenuaction.cpp  -  menu action to select a template
  *  Program:  kalarm
- *  Copyright (C) 2005 by David Jarvie <software@astrojar.org.uk>
+ *  Copyright © 2005,2008 by David Jarvie <djarvie@kde.org>
  *
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the GNU General Public License as published by
@@ -41,8 +41,8 @@
 }
 
 /******************************************************************************
-*  Called when the New From Template action is clicked.
-*  Creates a popup menu listing all alarm templates.
+* Called when the New From Template action is clicked.
+* Creates a popup menu listing all alarm templates, in sorted name order.
 */
 void TemplateMenuAction::slotInitMenu()
 {
@@ -50,12 +50,18 @@
 	menu->clear();
 	mOriginalTexts.clear();
 	QValueList<KAEvent> templates = KAlarm::templateList();
-	for (QValueList<KAEvent>::Iterator it = templates.begin();  it != templates.end();  ++it)
+	for (QValueList<KAEvent>::ConstIterator it = templates.constBegin();  it != templates.constEnd();  ++it)
 	{
 		QString name = (*it).templateName();
-		menu->insertItem(name);
-		mOriginalTexts += name;
+		// Insert the template in sorted order
+		QStringList::Iterator tit;
+		for (tit = mOriginalTexts.begin();
+		     tit != mOriginalTexts.end()  &&  QString::localeAwareCompare(name, *tit) > 0;
+		     ++tit);
+		mOriginalTexts.insert(tit, name);
 	}
+	for (QStringList::ConstIterator tit = mOriginalTexts.constBegin();  tit != mOriginalTexts.constEnd();  ++tit)
+		menu->insertItem(*tit);
 }
 
 /******************************************************************************
Index: kalarm/templatepickdlg.cpp
===================================================================
--- kalarm/templatepickdlg.cpp	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kalarm/templatepickdlg.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,7 +1,7 @@
 /*
  *  templatepickdlg.cpp  -  dialogue to choose an alarm template
  *  Program:  kalarm
- *  Copyright (C) 2004 by David Jarvie <software@astrojar.org.uk>
+ *  Copyright © 2004,2008 by David Jarvie <djarvie@kde.org>
  *
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the GNU General Public License as published by
@@ -47,7 +47,8 @@
 	mTemplateList->setSelectionMode(QListView::Single);
 	mTemplateList->refresh();      // populate the template list
 	connect(mTemplateList, SIGNAL(selectionChanged()), SLOT(slotSelectionChanged()));
-	connect(mTemplateList, SIGNAL(executed(QListViewItem*)), SLOT(slotOk()));
+	// Require a real double click (even if KDE is in single-click mode) to accept the selection
+	connect(mTemplateList, SIGNAL(doubleClicked(QListViewItem*, const QPoint&, int)), SLOT(slotOk()));
 	topLayout->addWidget(mTemplateList);
 
 	slotSelectionChanged();        // enable or disable the OK button
Index: kalarm/editdlg.cpp
===================================================================
--- kalarm/editdlg.cpp	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kalarm/editdlg.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -446,8 +446,18 @@
 	mFontColourButton->setMaximumHeight(mFontColourButton->sizeHint().height());
 	frameLayout->addWidget(mFontColourButton);
 
+	QHBoxLayout* layout = new QHBoxLayout(frameLayout, 0, 0);
+	mBgColourBox = new QHBox(mDisplayAlarmsFrame);
+	mBgColourBox->setSpacing(spacingHint());
+	layout->addWidget(mBgColourBox);
+	layout->addStretch();
+	QLabel* label = new QLabel(i18n("&Background color:"), mBgColourBox);
+	mBgColourButton = new ColourCombo(mBgColourBox);
+	label->setBuddy(mBgColourButton);
+	QWhatsThis::add(mBgColourBox, i18n("Select the alarm message background color"));
+
 	// Sound checkbox and file selector
-	QHBoxLayout* layout = new QHBoxLayout(frameLayout);
+	layout = new QHBoxLayout(frameLayout);
 	mSoundPicker = new SoundPicker(mDisplayAlarmsFrame);
 	mSoundPicker->setFixedSize(mSoundPicker->sizeHint());
 	layout->addWidget(mSoundPicker);
@@ -676,6 +686,7 @@
 			mFontColourButton->setFont(event->font());
 		mFontColourButton->setBgColour(event->bgColour());
 		mFontColourButton->setFgColour(event->fgColour());
+		mBgColourButton->setColour(event->bgColour());
 		if (mTemplate)
 		{
 			// Editing a template
@@ -717,8 +728,8 @@
 			else
 			{
 				mExpiredRecurrence = recurs && event->mainExpired();
-				mTimeWidget->setDateTime(!event->mainExpired() ? event->mainDateTime()
-				                         : recurs ? DateTime() : event->deferDateTime());
+				mTimeWidget->setDateTime(recurs || event->uidStatus() == KAEvent::EXPIRED ? event->startDateTime()
+				                         : event->mainExpired() ? event->deferDateTime() : event->mainDateTime());
 			}
 		}
 
@@ -759,7 +770,7 @@
 		mReminder->enableOnceOnly(event->recurs());
 		if (mSpecialActionsButton)
 			mSpecialActionsButton->setActions(event->preAction(), event->postAction());
-		mRecurrenceEdit->set(*event);   // must be called after mTimeWidget is set up, to ensure correct date-only enabling
+		mRecurrenceEdit->set(*event, (mTemplate || event->isTemplate()));   // must be called after mTimeWidget is set up, to ensure correct date-only enabling
 		mTabs->setTabLabel(mTabs->page(mRecurPageIndex), recurText(*event));
 		SoundPicker::Type soundType = event->speak()                ? SoundPicker::SPEAK
 		                            : event->beep()                 ? SoundPicker::BEEP
@@ -792,6 +803,7 @@
 		mFontColourButton->setDefaultFont();
 		mFontColourButton->setBgColour(Preferences::defaultBgColour());
 		mFontColourButton->setFgColour(Preferences::defaultFgColour());
+		mBgColourButton->setColour(Preferences::defaultBgColour());
 		QDateTime defaultTime = QDateTime::currentDateTime().addSecs(60);
 		if (mTemplate)
 		{
@@ -860,6 +872,7 @@
 	mTextMessageEdit->setReadOnly(mReadOnly);
 	mFileMessageEdit->setReadOnly(mReadOnly);
 	mFontColourButton->setReadOnly(mReadOnly);
+	mBgColourButton->setReadOnly(mReadOnly);
 	mSoundPicker->setReadOnly(mReadOnly);
 	mConfirmAck->setReadOnly(mReadOnly);
 	mReminder->setReadOnly(mReadOnly);
@@ -991,7 +1004,7 @@
 	mSavedConfirmAck       = mConfirmAck->isChecked();
 	mSavedFont             = mFontColourButton->font();
 	mSavedFgColour         = mFontColourButton->fgColour();
-	mSavedBgColour         = mFontColourButton->bgColour();
+	mSavedBgColour         = mFileRadio->isOn() ? mBgColourButton->colour() : mFontColourButton->bgColour();
 	mSavedReminder         = mReminder->minutes();
 	mSavedOnceOnly         = mReminder->isOnceOnly();
 	if (mSpecialActionsButton)
@@ -1058,7 +1071,7 @@
 		||  mSavedConfirmAck != mConfirmAck->isChecked()
 		||  mSavedFont       != mFontColourButton->font()
 		||  mSavedFgColour   != mFontColourButton->fgColour()
-		||  mSavedBgColour   != mFontColourButton->bgColour()
+		||  mSavedBgColour   != (mFileRadio->isOn() ? mBgColourButton->colour() : mFontColourButton->bgColour())
 		||  mSavedReminder   != mReminder->minutes()
 		||  mSavedOnceOnly   != mReminder->isOnceOnly()
 		||  mSavedAutoClose  != mLateCancel->isAutoClose())
@@ -1160,7 +1173,8 @@
 			dt = QDateTime(QDate(2000,1,1), mTemplateTime->time());
 	}
 	KAEvent::Action type = getAlarmType();
-	event.set(dt, text, mFontColourButton->bgColour(), mFontColourButton->fgColour(), mFontColourButton->font(),
+	event.set(dt, text, (mFileRadio->isOn() ? mBgColourButton->colour() : mFontColourButton->bgColour()),
+	          mFontColourButton->fgColour(), mFontColourButton->font(),
 	          type, (trial ? 0 : mLateCancel->minutes()), getAlarmFlags());
 	switch (type)
 	{
@@ -1403,7 +1417,6 @@
 		int reminder = mReminder->minutes();
 		if (reminder  &&  !mReminder->isOnceOnly())
 		{
-			getEvent(recurEvent);     // this may adjust mAlarmDateTime
 			mRecurrenceEdit->updateEvent(recurEvent, false);
 			longestRecurInterval = recurEvent.longestRecurrenceInterval();
 			if (longestRecurInterval  &&  reminder >= longestRecurInterval)
@@ -1419,11 +1432,11 @@
 		{
 			if (longestRecurInterval < 0)
 			{
-				getEvent(recurEvent);     // this may adjust mAlarmDateTime
 				mRecurrenceEdit->updateEvent(recurEvent, false);
 				longestRecurInterval = recurEvent.longestRecurrenceInterval();
 			}
-			if (recurEvent.repeatInterval() * recurEvent.repeatCount() >= longestRecurInterval - reminder)
+			if (longestRecurInterval > 0
+			&&  recurEvent.repeatInterval() * recurEvent.repeatCount() >= longestRecurInterval - reminder)
 			{
 				KMessageBox::sorry(this, i18n("The duration of a repetition within the recurrence must be less than the recurrence interval minus any reminder period"));
 				mRecurrenceEdit->activateSubRepetition();   // display the alarm repetition dialog again
@@ -1509,7 +1522,8 @@
 	bool limit = true;
 	int repeatInterval;
 	int repeatCount = mRecurrenceEdit->subRepeatCount(&repeatInterval);
-	DateTime start = mTimeWidget->getDateTime(0, !repeatCount, !mExpiredRecurrence);
+	DateTime start = mSavedEvent->recurs() ? (mExpiredRecurrence ? DateTime() : mSavedEvent->mainDateTime())
+	               : mTimeWidget->getDateTime(0, !repeatCount, !mExpiredRecurrence);
 	if (!start.isValid())
 	{
 		if (!mExpiredRecurrence)
@@ -1760,6 +1774,7 @@
 		mFilePadding->hide();
 		mTextMessageEdit->show();
 		mFontColourButton->show();
+		mBgColourBox->hide();
 		mSoundPicker->showSpeak(true);
 		mDisplayAlarmsFrame->show();
 		mCommandFrame->hide();
@@ -1776,6 +1791,7 @@
 		mFileBox->show();
 		mFilePadding->show();
 		mFontColourButton->hide();
+		mBgColourBox->show();
 		mSoundPicker->showSpeak(false);
 		mDisplayAlarmsFrame->show();
 		mCommandFrame->hide();
Index: kalarm/fontcolour.h
===================================================================
--- kalarm/fontcolour.h	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kalarm/fontcolour.h	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,7 +1,7 @@
 /*
  *  fontcolour.h  -  font and colour chooser widget
  *  Program:  kalarm
- *  Copyright © 2001,2003 by David Jarvie <software@astrojar.org.uk>
+ *  Copyright © 2001,2003,2008 by David Jarvie <djarvie@kde.org>
  *
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the GNU General Public License as published by
@@ -57,6 +57,7 @@
 	void              setSampleText(const QString& text);
 	bool              isReadOnly() const     { return mReadOnly; }
 	void              setReadOnly(bool);
+	virtual bool      eventFilter(QObject*, QEvent*);
 
 private slots:
 	void              setSampleColour();
Index: kalarm/templatedlg.cpp
===================================================================
--- kalarm/templatedlg.cpp	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kalarm/templatedlg.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -59,26 +59,22 @@
 
 	layout = new QVBoxLayout(topLayout);
 	QPushButton* button = new QPushButton(i18n("&New..."), topWidget);
-	button->setFixedSize(button->sizeHint());
 	connect(button, SIGNAL(clicked()), SLOT(slotNew()));
 	QWhatsThis::add(button, i18n("Create a new alarm template"));
 	layout->addWidget(button);
 
 	mEditButton = new QPushButton(i18n("&Edit..."), topWidget);
-	mEditButton->setFixedSize(mEditButton->sizeHint());
 	connect(mEditButton, SIGNAL(clicked()), SLOT(slotEdit()));
 	QWhatsThis::add(mEditButton, i18n("Edit the currently highlighted alarm template"));
 	layout->addWidget(mEditButton);
 
 	mCopyButton = new QPushButton(i18n("Co&py"), topWidget);
-	mCopyButton->setFixedSize(mCopyButton->sizeHint());
 	connect(mCopyButton, SIGNAL(clicked()), SLOT(slotCopy()));
 	QWhatsThis::add(mCopyButton,
 	      i18n("Create a new alarm template based on a copy of the currently highlighted template"));
 	layout->addWidget(mCopyButton);
 
 	mDeleteButton = new QPushButton(i18n("&Delete"), topWidget);
-	mDeleteButton->setFixedSize(mDeleteButton->sizeHint());
 	connect(mDeleteButton, SIGNAL(clicked()), SLOT(slotDelete()));
 	QWhatsThis::add(mDeleteButton, i18n("Delete the currently highlighted alarm template"));
 	layout->addWidget(mDeleteButton);
Index: kalarm/alarmevent.h
===================================================================
--- kalarm/alarmevent.h	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kalarm/alarmevent.h	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -317,23 +317,7 @@
 		~KAEvent()         { delete mRecurrence; }
 		KAEvent&           operator=(const KAEvent& e)       { if (&e != this) copy(e);  return *this; }
 		void               set(const KCal::Event&);
-		void               set(const QDate& d, const QString& message, const QColor& bg, const QColor& fg, const QFont& f, Action action, int lateCancel, int flags)
-		                            { set(d, message, bg, fg, f, action, lateCancel, flags | ANY_TIME); }
 		void               set(const QDateTime&, const QString& message, const QColor& bg, const QColor& fg, const QFont&, Action, int lateCancel, int flags);
-		void               setMessage(const QDate& d, const QString& message, const QColor& bg, const QColor& fg, const QFont& f, int lateCancel, int flags)
-		                            { set(d, message, bg, fg, f, MESSAGE, lateCancel, flags | ANY_TIME); }
-		void               setMessage(const QDateTime& dt, const QString& message, const QColor& bg, const QColor& fg, const QFont& f, int lateCancel, int flags)
-		                            { set(dt, message, bg, fg, f, MESSAGE, lateCancel, flags); }
-		void               setFileName(const QDate& d, const QString& filename, const QColor& bg, const QColor& fg, const QFont& f, int lateCancel, int flags)
-		                            { set(d, filename, bg, fg, f, FILE, lateCancel, flags | ANY_TIME); }
-		void               setFileName(const QDateTime& dt, const QString& filename, const QColor& bg, const QColor& fg, const QFont& f, int lateCancel, int flags)
-		                            { set(dt, filename, bg, fg, f, FILE, lateCancel, flags); }
-		void               setCommand(const QDate&, const QString& command, int lateCancel, int flags, const QString& logfile = QString::null);
-		void               setCommand(const QDateTime&, const QString& command, int lateCancel, int flags, const QString& logfile = QString::null);
-		void               setEmail(const QDate&, uint from, const EmailAddressList&, const QString& subject,
-		                            const QString& message, const QStringList& attachments, int lateCancel, int flags);
-		void               setEmail(const QDateTime&, uint from, const EmailAddressList&, const QString& subject,
-		                            const QString& message, const QStringList& attachments, int lateCancel, int flags);
 		void               setEmail(uint from, const EmailAddressList&, const QString& subject, const QStringList& attachments);
 		void               setAudioFile(const QString& filename, float volume, float fadeVolume, int fadeSeconds);
 		void               setTemplate(const QString& name, int afterTime = -1)  { mTemplateName = name;  mTemplateAfterTime = afterTime;  mUpdated = true; }
Index: kalarm/kalarm.h
===================================================================
--- kalarm/kalarm.h	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kalarm/kalarm.h	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -26,7 +26,7 @@
 #include <config.h>
 #endif
 
-#define KALARM_VERSION "1.5.1"
+#define KALARM_VERSION "1.5.5"
 #define KALARM_NAME "KAlarm"
 
 #include <kdeversion.h>
Index: kalarm/mainwindow.cpp
===================================================================
--- kalarm/mainwindow.cpp	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kalarm/mainwindow.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -253,7 +253,7 @@
 */
 void MainWindow::closeAll()
 {
-	while (mWindowList.first())
+	while (!mWindowList.isEmpty())
 		delete mWindowList.first();    // N.B. the destructor removes the window from the list
 }
 
Index: kalarm/editdlg.h
===================================================================
--- kalarm/editdlg.h	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kalarm/editdlg.h	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -39,6 +39,7 @@
 class QHBox;
 class EmailIdCombo;
 class FontColourButton;
+class ColourCombo;
 class ButtonGroup;
 class TimeEdit;
 class RadioButton;
@@ -160,7 +161,9 @@
 		QHBox*              mFilePadding;
 		SoundPicker*        mSoundPicker;
 		CheckBox*           mConfirmAck;
-		FontColourButton*   mFontColourButton;
+		FontColourButton*   mFontColourButton;   // for text display option
+		ColourCombo*        mBgColourButton;     // for file display option
+		QHBox*              mBgColourBox;
 		SpecialActionsButton* mSpecialActionsButton;
 		Reminder*           mReminder;
 		bool                mReminderDeferral;
Index: kalarm/sounddlg.h
===================================================================
--- kalarm/sounddlg.h	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kalarm/sounddlg.h	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,7 +1,7 @@
 /*
  *  sounddlg.h  -  sound file selection and configuration dialog
  *  Program:  kalarm
- *  Copyright © 2005,2007 by David Jarvie <software@astrojar.org.uk>
+ *  Copyright © 2005,2007,2008 by David Jarvie <djarvie@kde.org>
  *
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the GNU General Public License as published by
@@ -91,7 +91,6 @@
 		KDE::PlayObject* mPlayObject;
 		QTimer*          mPlayTimer;       // timer for playing the sound file
 		QString          mLocalAudioFile;  // local copy of audio file
-		QTime            mAudioFileStart;  // time when audio file loading started, or when play started
 		bool             mPlayStarted;      // the sound file has started playing
 };
 
Index: kalarm/kalarmd/kalarmd.desktop
===================================================================
--- kalarm/kalarmd/kalarmd.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kalarm/kalarmd/kalarmd.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,6 +1,5 @@
 # KDE Config File
 [Desktop Entry]
-Encoding=UTF-8
 Name=KAlarm Daemon
 Name[af]=KAlarm Bediener
 Name[bg]=Демон на KAlarm
@@ -24,6 +23,7 @@
 Name[is]=KAlarm þjónn
 Name[it]=Demone degli avvisi
 Name[ja]=KAlarm デーモン
+Name[ka]=KAlarm დემონი
 Name[kk]=KAlarm қызметі
 Name[km]=ដេមិន KAlarm
 Name[lt]=KAlarm tarnyba
@@ -52,3 +52,4 @@
 Type=Application
 Terminal=false
 X-DCOP-ServiceType=Unique
+NoDisplay=true
Index: kalarm/kalarmd/kalarmd.autostart.desktop
===================================================================
--- kalarm/kalarmd/kalarmd.autostart.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kalarm/kalarmd/kalarmd.autostart.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,6 +1,5 @@
 # KDE Config File
 [Desktop Entry]
-Encoding=UTF-8
 Name=KAlarm Daemon
 Name[af]=KAlarm Bediener
 Name[bg]=Демон на KAlarm
@@ -24,6 +23,7 @@
 Name[is]=KAlarm þjónn
 Name[it]=Demone degli avvisi
 Name[ja]=KAlarm デーモン
+Name[ka]=KAlarm დემონი
 Name[kk]=KAlarm қызметі
 Name[km]=ដេមិន KAlarm
 Name[lt]=KAlarm tarnyba
@@ -71,6 +71,7 @@
 Comment[is]=Ræsa KAlarm áminningaþjónn sjálfkrafa við byrjun setu
 Comment[it]=Avvio automatico del demone degli avvisi
 Comment[ja]=KAlarm アラームデーモンのログイン時の自動起動
+Comment[ka]=KAlarm მაღვიძარას დემონის ავტოდაწყება შესვლისას
 Comment[kk]=KAlarm қызметі жүйеге кіргенде жегіледі
 Comment[km]=ចាប់ផ្ដើម​ដេមិន​រោទ៍​របស់ KAlarm ពេល​ចូល
 Comment[lt]=KOrganizer/KAlarm priminimų tarnybos automatinis paleidimas prisiregistruojant
Index: kalarm/Changelog
===================================================================
--- kalarm/Changelog	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kalarm/Changelog	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,8 +1,31 @@
 KAlarm Change Log
 
+=== Version 1.5.5 --- 13 October 2008 ===
+- Require a real double click to accept the selected template in pick list.
+- Fix inability to change or cancel alarm deferral times.
+- Prevent defer dialogue date being set outside the allowed range.
+
+=== Version 1.5.4 (KDE 3.5.10) --- 18 August 2008 ===
+- Show background colour selector for file display alarms.
+- Display default font correctly in alarm edit dialogue sample text.
+- Expand font selection control when dialogue is expanded.
+- Fix potential crash when KAlarm quits, if birthday dialogue was opened.
+
+=== Version 1.5.3 --- 22 May 2008 ===
+- In New From Template menu, show list of template names in sorted order.
+- Fix recurrence count being lost when using alarm templates.
+- Prevent invalid negative values appearing in 'Time from now' edit field.
+- Fix time shown in alarm edit dialogue for recurring alarms.
+- Fix recurrence count shown in alarm edit dialogue once alarm has triggered.
+- Fix Find not working with a new search text after a failed search.
+- Display correct error message when a search fails.
+- Prevent user changing font/colour dialogue when editing read-only alarms.
+
+=== Version 1.5.2 --- 13 February 2008 ===
+- Prevent repetition duration error message when saving alarm which never recurs.
+
 === Version 1.5.1 (KDE 3.5.9) --- 13 February 2008 ===
 - Fix inability to set up sub-repetitions for simple yearly recurrences.
-- Fix wrong error message when changing recurrence frequency.
 
 === Version 1.5.0 --- 27 January 2008 ===
 - Replace simple repetitions with recurrence sub-repetitions, to save confusion.
Index: kalarm/kalarmapp.cpp
===================================================================
--- kalarm/kalarmapp.cpp	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kalarm/kalarmapp.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -49,6 +49,7 @@
 
 #include "alarmcalendar.h"
 #include "alarmlistview.h"
+#include "birthdaydlg.h"
 #include "editdlg.h"
 #include "daemon.h"
 #include "dcophandler.h"
@@ -806,6 +807,7 @@
 
 	// This was the last/only running "instance" of the program, so exit completely.
 	kdDebug(5950) << "KAlarmApp::quitIf(" << exitCode << "): quitting" << endl;
+	BirthdayDlg::close();
 	exit(exitCode);
 }
 
Index: kalarm/recurrenceedit.h
===================================================================
--- kalarm/recurrenceedit.h	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kalarm/recurrenceedit.h	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -66,7 +66,7 @@
 		/** Set widgets to default values */
 		void          setDefaults(const QDateTime& from);
 		/** Initialise according to a specified event */
-		void          set(const KAEvent&);
+		void          set(const KAEvent&, bool keepDuration);
 		/** Write recurrence settings into an event */
 		void          updateEvent(KAEvent&, bool adjustStart);
 		QWidget*      checkData(const QDateTime& startDateTime, QString& errorMessage) const;
Index: kalarm/sounddlg.cpp
===================================================================
--- kalarm/sounddlg.cpp	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kalarm/sounddlg.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,7 +1,7 @@
 /*
  *  sounddlg.cpp  -  sound file selection and configuration dialog
  *  Program:  kalarm
- *  Copyright © 2005,2007 by David Jarvie <software@astrojar.org.uk>
+ *  Copyright © 2005,2007,2008 by David Jarvie <djarvie@kde.org>
  *
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the GNU General Public License as published by
@@ -114,7 +114,7 @@
 	QGroupBox* group = new QGroupBox(i18n("Volume"), page);
 	layout->addWidget(group);
 	QGridLayout* grid = new QGridLayout(group, 4, 3, marginHint(), spacingHint());
-	grid->addRowSpacing(0, fontMetrics().lineSpacing()/2);
+	grid->addRowSpacing(0, fontMetrics().height() - marginHint() + spacingHint());
 	grid->setColStretch(2, 1);
 	int indentWidth = 3 * KDialog::spacingHint();
 	grid->addColSpacing(0, indentWidth);
@@ -306,7 +306,6 @@
 	connect(mPlayTimer, SIGNAL(timeout()), SLOT(checkAudioPlay()));
 	mArtsDispatcher = new KArtsDispatcher;
 	mPlayStarted = false;
-	mAudioFileStart = QTime::currentTime();
 	KArtsServer aserver;
 	Arts::SoundServerV2 sserver = aserver.server();
 	KDE::PlayObjectFactory factory(sserver);
Index: kalarm/find.cpp
===================================================================
--- kalarm/find.cpp	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kalarm/find.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,7 +1,7 @@
 /*
  *  find.cpp  -  search facility 
  *  Program:  kalarm
- *  Copyright © 2005,2006 by David Jarvie <software@astrojar.org.uk>
+ *  Copyright © 2005,2006,2008 by David Jarvie <djarvie@kde.org>
  *
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the GNU General Public License as published by
@@ -228,47 +228,50 @@
 
 	// Supply KFind with only those options which relate to the text within alarms
 	long options = mOptions & (KFindDialog::WholeWordsOnly | KFindDialog::CaseSensitive | KFindDialog::RegularExpression);
+	bool newFind = !mFind;
+	bool newPattern = (mDialog->pattern() != mLastPattern);
+	mLastPattern = mDialog->pattern();
 	if (mFind)
 	{
-		mFind->setPattern(mDialog->pattern());
+		mFind->resetCounts();
+		mFind->setPattern(mLastPattern);
 		mFind->setOptions(options);
-		delete mDialog;    // automatically set to 0
-		findNext(true, true, false);
 	}
 	else
 	{
 #ifdef MODAL_FIND
-		mFind = new KFind(mDialog->pattern(), options, mListView);
+		mFind = new KFind(mLastPattern, options, mListView);
+		mDialog->deleteLater();    // automatically set to 0
 #else
-		mFind = new KFind(mDialog->pattern(), options, mListView, mDialog);
+		mFind = new KFind(mLastPattern, options, mListView, mDialog);
 #endif
 		connect(mFind, SIGNAL(destroyed()), SLOT(slotKFindDestroyed()));
-		delete mDialog;                  // close the Find dialogue. Automatically set to 0.
 		mFind->closeFindNextDialog();    // prevent 'Find Next' dialog appearing
+	}
 
-		// Set the starting point for the search
-		mListView->sort();     // ensure the whole list is sorted, not just the visible items
-		mStartID       = QString::null;
-		mNoCurrentItem = true;
-		bool fromCurrent = false;
-		EventListViewItemBase* item = 0;
+	// Set the starting point for the search
+	mStartID       = QString::null;
+	mNoCurrentItem = newPattern;
+	bool checkEnd = false;
+	if (newPattern)
+	{
+		mFound = false;
 		if (mOptions & KFindDialog::FromCursor)
 		{
-			item = mListView->currentItem();
+			EventListViewItemBase* item = mListView->currentItem();
 			if (item)
 			{
 				mStartID       = item->event().id();
 				mNoCurrentItem = false;
-				fromCurrent    = true;
+				checkEnd = true;
 			}
 		}
+	}
 
-		// Execute the search
-		mFound = false;
-		findNext(true, false, fromCurrent);
-		if (mFind)
-			emit active(true);
-	}
+	// Execute the search
+	findNext(true, true, checkEnd, false);
+	if (mFind  &&  newFind)
+		emit active(true);
 }
 
 /******************************************************************************
@@ -276,7 +279,7 @@
 *  If 'fromCurrent' is true, the search starts with the current search item;
 *  otherwise, it starts from the next item.
 */
-void Find::findNext(bool forward, bool sort, bool fromCurrent)
+void Find::findNext(bool forward, bool sort, bool checkEnd, bool fromCurrent)
 {
 	if (sort)
 		mListView->sort();    // ensure the whole list is sorted, not just the visible items
@@ -287,11 +290,12 @@
 
 	// Search successive alarms until a match is found or the end is reached
 	bool found = false;
-	for ( ;  item;  item = nextItem(item, forward))
+	bool last = false;
+	for ( ;  item && !last;  item = nextItem(item, forward))
 	{
 		const KAEvent& event = item->event();
 		if (!fromCurrent  &&  !mStartID.isNull()  &&  mStartID == event.id())
-			break;    // we've wrapped round and reached the starting alarm again
+			last = true;    // we've wrapped round and reached the starting alarm again
 		fromCurrent = false;
 		bool live = !event.expired();
 		if (live  &&  !(mOptions & FIND_LIVE)
@@ -357,12 +361,13 @@
 	else
 	{
 		// No match was found
-		if (mFound)
+		if (mFound  ||  checkEnd)
 		{
 			QString msg = forward ? i18n("End of alarm list reached.\nContinue from the beginning?")
 			                      : i18n("Beginning of alarm list reached.\nContinue from the end?");
 			if (KMessageBox::questionYesNo(mListView, msg, QString::null, KStdGuiItem::cont(), KStdGuiItem::cancel()) == KMessageBox::Yes)
 			{
+				mNoCurrentItem = true;
 				findNext(forward, false);
 				return;
 			}
Index: kalarm/repetition.cpp
===================================================================
--- kalarm/repetition.cpp	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kalarm/repetition.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -96,8 +96,10 @@
 */
 void RepetitionButton::initialise(int interval, int count, bool dateOnly, int maxDuration)
 {
-	mInterval    = (maxDuration > 0 && interval > maxDuration) ? 1 : interval;
+	if (maxDuration > 0 && interval > maxDuration)
+		count = 0;
 	mCount       = count;
+	mInterval    = interval;
 	mMaxDuration = maxDuration;
 	mDateOnly    = dateOnly;
 	if (mDialog)
Index: kalarm/prefdlg.cpp
===================================================================
--- kalarm/prefdlg.cpp	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kalarm/prefdlg.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -233,7 +233,7 @@
 	  mPage(frame)
 {
 	if (!mIndentWidth)
-		mIndentWidth = 3 * KDialog::spacingHint();
+		mIndentWidth = style().subRect(QStyle::SR_RadioButtonIndicator, this).width();
 }
 
 void PrefsTabBase::apply(bool syncToDisc)
@@ -823,44 +823,32 @@
 	: PrefsTabBase(frame)
 {
 	mFontChooser = new FontColourChooser(mPage, 0, false, QStringList(), i18n("Message Font && Color"), true, false);
+	mPage->setStretchFactor(mFontChooser, 1);
 
-	QHBox* layoutBox = new QHBox(mPage);
+	QFrame* layoutBox = new QFrame(mPage);
+	QHBoxLayout* hlayout = new QHBoxLayout(layoutBox);
+	QVBoxLayout* colourLayout = new QVBoxLayout(hlayout, KDialog::spacingHint());
+	hlayout->addStretch();
+
 	QHBox* box = new QHBox(layoutBox);    // to group widgets for QWhatsThis text
-	box->setSpacing(KDialog::spacingHint());
+	box->setSpacing(KDialog::spacingHint()/2);
+	colourLayout->addWidget(box);
 	QLabel* label1 = new QLabel(i18n("Di&sabled alarm color:"), box);
-//	label1->setMinimumSize(label1->sizeHint());
 	box->setStretchFactor(new QWidget(box), 1);
 	mDisabledColour = new KColorCombo(box);
-	mDisabledColour->setMinimumSize(mDisabledColour->sizeHint());
 	label1->setBuddy(mDisabledColour);
 	QWhatsThis::add(box,
 	      i18n("Choose the text color in the alarm list for disabled alarms."));
-	layoutBox->setStretchFactor(new QWidget(layoutBox), 1);    // left adjust the controls
-	layoutBox->setFixedHeight(layoutBox->sizeHint().height());
 
-	layoutBox = new QHBox(mPage);
 	box = new QHBox(layoutBox);    // to group widgets for QWhatsThis text
-	box->setSpacing(KDialog::spacingHint());
+	box->setSpacing(KDialog::spacingHint()/2);
+	colourLayout->addWidget(box);
 	QLabel* label2 = new QLabel(i18n("E&xpired alarm color:"), box);
-//	label2->setMinimumSize(label2->sizeHint());
 	box->setStretchFactor(new QWidget(box), 1);
 	mExpiredColour = new KColorCombo(box);
-	mExpiredColour->setMinimumSize(mExpiredColour->sizeHint());
 	label2->setBuddy(mExpiredColour);
 	QWhatsThis::add(box,
 	      i18n("Choose the text color in the alarm list for expired alarms."));
-	layoutBox->setStretchFactor(new QWidget(layoutBox), 1);    // left adjust the controls
-	layoutBox->setFixedHeight(layoutBox->sizeHint().height());
-
-	// Line up the two sets of colour controls
-	QSize size = label1->sizeHint();
-	QSize size2 = label2->sizeHint();
-	if (size2.width() > size.width())
-		size.setWidth(size2.width());
-	label1->setFixedSize(size);
-	label2->setFixedSize(size);
-
-	mPage->setStretchFactor(new QWidget(mPage), 1);    // top adjust the widgets
 }
 
 void FontColourPrefTab::restore()
Index: kalarm/lib/timespinbox.cpp
===================================================================
--- kalarm/lib/timespinbox.cpp	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kalarm/lib/timespinbox.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -205,12 +205,12 @@
 		if (value() < mMinimumValue)
 			SpinBox2::setValue(mMinimumValue);
 		setSpecialValueText(QString());
-		setMinValue(mMinimumValue);
+		SpinBox2::setMinValue(mMinimumValue);
 	}
 	else if (!valid  &&  !mInvalid)
 	{
 		mInvalid = true;
-		setMinValue(mMinimumValue - 1);
+		SpinBox2::setMinValue(mMinimumValue - 1);
 		setSpecialValueText(QString::fromLatin1("**:**"));
 		SpinBox2::setValue(mMinimumValue - 1);
 	}
@@ -221,8 +221,8 @@
 */
 void TimeSpinBox::setMinValue(int minutes)
 {
-        mMinimumValue = minutes;
-        SpinBox2::setMinValue(mMinimumValue - (mInvalid ? 1 : 0));
+	mMinimumValue = minutes;
+	SpinBox2::setMinValue(mMinimumValue - (mInvalid ? 1 : 0));
 }
 
 /******************************************************************************
@@ -242,7 +242,7 @@
 			{
 				mInvalid = false;
 				setSpecialValueText(QString());
-				setMinValue(mMinimumValue);
+				SpinBox2::setMinValue(mMinimumValue);
 			}
 			SpinBox2::setValue(minutes);
 			mEnteredSetValue = false;
Index: kalarm/lib/spinbox2.h
===================================================================
--- kalarm/lib/spinbox2.h	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kalarm/lib/spinbox2.h	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -138,9 +138,9 @@
 		/** Returns the maximum value of the spin box. */
 		int                 maxValue() const            { return mMaxValue; }
 		/** Sets the minimum value of the spin box. */
-		void                setMinValue(int val);
+		virtual void        setMinValue(int val);
 		/** Sets the maximum value of the spin box. */
-		void                setMaxValue(int val);
+		virtual void        setMaxValue(int val);
 		/** Sets the minimum and maximum values of the spin box. */
 		void                setRange(int minValue, int maxValue)   { setMinValue(minValue);  setMaxValue(maxValue); }
 		/** Returns the current value of the spin box. */
Index: kalarm/lib/timespinbox.h
===================================================================
--- kalarm/lib/timespinbox.h	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kalarm/lib/timespinbox.h	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -117,7 +117,7 @@
 	private:
 		class TimeValidator;
 		TimeValidator*  mValidator;
-		int             mMinimumValue;
+		int             mMinimumValue;       // real minimum value, excluding special value for "**:**"
 		bool            m12Hour;             // use 12-hour clock
 		bool            mPm;                 // use PM for manually entered values (with 12-hour clock)
 		bool            mInvalid;            // value is currently invalid (asterisks)
Index: kalarm/lib/dateedit.cpp
===================================================================
--- kalarm/lib/dateedit.cpp	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kalarm/lib/dateedit.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -61,11 +61,13 @@
 		{
 			pastLimitMessage(mMinDate, mMinDateErrString,
 					 i18n("Date cannot be earlier than %1"));
+			setDate(mMinDate);
 		}
 		else if (mMaxDate.isValid()  &&  newDate > mMaxDate)
 		{
 			pastLimitMessage(mMaxDate, mMaxDateErrString,
 					 i18n("Date cannot be later than %1"));
+			setDate(mMaxDate);
 		}
 	}
 }
Index: kalarm/kalarm.desktop
===================================================================
--- kalarm/kalarm.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kalarm/kalarm.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,6 +1,5 @@
 # KDE Config File
 [Desktop Entry]
-Encoding=UTF-8
 Name=KAlarm
 Name[af]=K-alarm
 Name[cy]=KLarwm
@@ -45,6 +44,7 @@
 GenericName[is]=Áminningakerfi
 GenericName[it]=Programmatore degli avvisi personali
 GenericName[ja]=個人アラームスケジューラ
+GenericName[ka]=პერსონალური მაღვიძარას მგეგმავი
 GenericName[kk]=Дербес ескертулер жоспарлағышы
 GenericName[km]=កម្មវិធី​កំណត់​ម៉ោង​រោទ៍​ផ្ទាល់​ខ្លួន
 GenericName[lt]=Asmeninių žinučių-priminimų planuoklis
Index: kalarm/uninstall.desktop
===================================================================
--- kalarm/uninstall.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kalarm/uninstall.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,3 +1,2 @@
 [Desktop Entry]
-Encoding=UTF-8
 Hidden=true
Index: kalarm/birthdaydlg.h
===================================================================
--- kalarm/birthdaydlg.h	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kalarm/birthdaydlg.h	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -46,6 +46,7 @@
 	public:
 		BirthdayDlg(QWidget* parent = 0);
 		QValueList<KAEvent> events() const;
+		static void close();
 
 	protected slots:
 		virtual void      slotOk();
Index: kalarm/recurrenceedit.cpp
===================================================================
--- kalarm/recurrenceedit.cpp	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kalarm/recurrenceedit.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -732,9 +732,11 @@
 }
 
 /******************************************************************************
- * Set the state of all controls to reflect the data in the specified event.
- */
-void RecurrenceEdit::set(const KAEvent& event)
+* Set the state of all controls to reflect the data in the specified event.
+* Set 'keepDuration' true to prevent the recurrence count being adjusted to the
+* remaining number of recurrences.
+*/
+void RecurrenceEdit::set(const KAEvent& event, bool keepDuration)
 {
 	setDefaults(event.mainDateTime().dateTime());
 	if (event.repeatAtLogin())
@@ -839,17 +841,7 @@
 	else if (duration)
 	{
 		mRepeatCountButton->setChecked(true);
-		int repeatCount;
-		if (event.expired())
-			repeatCount = duration;
-		else if (event.mainExpired())
-		{
-			mRepeatCountEntry->setMinValue(0);
-			repeatCount = 0;
-		}
-		else
-			repeatCount = duration - recurrence->durationTo(QDateTime::currentDateTime());
-		mRepeatCountEntry->setValue(repeatCount);
+		mRepeatCountEntry->setValue(duration);
 	}
 	else
 	{
Index: kalarm/karecurrence.cpp
===================================================================
--- kalarm/karecurrence.cpp	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kalarm/karecurrence.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -296,7 +296,10 @@
 
 	// Remove surplus rules
 	for ( ;  rr != rrulelist.end();  ++rr)
+	{
 		removeRRule(*rr);
+		delete *rr;
+	}
 
 	QDate end;
 	int count;
@@ -709,7 +712,7 @@
 				return freq * 1440;
 
 			// It recurs only on certain days of the week, so the maximum interval
-			// will be greater than the frequency.
+			// may be greater than the frequency.
 			bool ds[7] = { false, false, false, false, false, false, false };
 			for (QValueList<RecurrenceRule::WDayPos>::ConstIterator it = days.begin();  it != days.end();  ++it)
 				if ((*it).pos() == 0)
Index: kalarm/kalarm.tray.desktop
===================================================================
--- kalarm/kalarm.tray.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kalarm/kalarm.tray.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,6 +1,5 @@
 # KDE Config File
 [Desktop Entry]
-Encoding=UTF-8
 Name=KAlarm
 Name[af]=K-alarm
 Name[cy]=KLarwm
@@ -35,7 +34,7 @@
 Comment[eu]=Alarma pertsonalen programatzailea: abiatu sistemaren bandejako ikono bezala
 Comment[fa]=زمان‌بند هشدار شخصی: آغاز به عنوان شمایل سینی سیستم
 Comment[fi]=Henkilökohtainen hälytysajastin: käynnistä paneelikuvake
-Comment[fr]=Planificateur d'alarme personnel : démarre dans la boîte à miniatures
+Comment[fr]=Planificateur d'alarme personnel : démarre dans la boîte à miniatures
 Comment[fy]=Persoanlike alarmplanner: begjinne yn it systeemfak
 Comment[gl]=Programador persoal de alarmas: iniciar como icona na bandexa do sistema
 Comment[he]=מתזמן הודעות תזכורת: הפעלה בתור סמל במגש המערכת
@@ -44,6 +43,7 @@
 Comment[is]=Áminningakerfi: ræsir sem táknmynd á spjaldinu
 Comment[it]=Programmatore personale degli avvisi: all'avvio si mette nel vassoio di sistema
 Comment[ja]=個人アラームスケジューラ: システムトレイアイコンで起動
+Comment[ka]=პესონალური მაღვიძარას მგეგმავი: სისტემურ პანელის ხატულად იწყება
 Comment[kk]=Дербес ескертулер жоспарлағышы: жүйелік сөреде орналасады
 Comment[km]=កម្មវិធី​កំណត់​ម៉ោង​រោទ៍​ផ្ទាល់​ខ្លួន ៖ ចាប់ផ្ដើម​ជា​រូបតំណាង​ក្នុង​ថាស​ប្រព័ន្ធ
 Comment[lt]=Žinučių-priminimų planuoklis: paleisti kaip sisteminio dėklo ženkliuką
Index: kalarm/find.h
===================================================================
--- kalarm/find.h	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kalarm/find.h	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,7 +1,7 @@
 /*
  *  find.h  -  search facility 
  *  Program:  kalarm
- *  Copyright © 2005,2006 by David Jarvie <software@astrojar.org.uk>
+ *  Copyright © 2005,2006,2008 by David Jarvie <djarvie@kde.org>
  *
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the GNU General Public License as published by
@@ -50,7 +50,7 @@
 		void         slotKFindDestroyed()       { emit active(false); }
 
 	private:
-		void         findNext(bool forward, bool sort, bool fromCurrent = false);
+		void         findNext(bool forward, bool sort, bool checkEnd = false, bool fromCurrent = false);
 		EventListViewItemBase* nextItem(EventListViewItemBase*, bool forward) const;
 
 		EventListViewBase* mListView;        // parent list view
@@ -64,6 +64,7 @@
 		QCheckBox*         mEmailType;
 		KFind*             mFind;
 		QStringList        mHistory;         // list of history items for Find dialog
+		QString            mLastPattern;     // pattern used in last search
 		QString            mStartID;         // ID of first alarm searched if 'from cursor' was selected
 		long               mOptions;         // OR of find dialog options
 		bool               mNoCurrentItem;   // there is no current item for the purposes of searching
Index: kalarm/fontcolourbutton.cpp
===================================================================
--- kalarm/fontcolourbutton.cpp	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kalarm/fontcolourbutton.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,7 +1,7 @@
 /*
  *  fontcolourbutton.cpp  -  pushbutton widget to select a font and colour
  *  Program:  kalarm
- *  Copyright © 2003-2005,2007 by David Jarvie <djarvie@kde.org>
+ *  Copyright © 2003-2005,2007,2008 by David Jarvie <djarvie@kde.org>
  *
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the GNU General Public License as published by
@@ -28,6 +28,7 @@
 #include <kdebug.h>
 
 #include "fontcolour.h"
+#include "preferences.h"
 #include "pushbutton.h"
 #include "fontcolourbutton.moc"
 
@@ -67,7 +68,7 @@
 void FontColourButton::setDefaultFont()
 {
 	mDefaultFont = true;
-	mSample->setFont(QFont());
+	mSample->setFont(Preferences::messageFont());
 }
 
 void FontColourButton::setFont(const QFont& font)
@@ -142,7 +143,10 @@
 void FontColourDlg::slotOk()
 {
 	if (mReadOnly)
+	{
 		reject();
+		return;
+	}
 	mDefaultFont = mChooser->defaultFont();
 	mFont        = mChooser->font();
 	mBgColour    = mChooser->bgColour();
Index: kalarm/Makefile.am
===================================================================
--- kalarm/Makefile.am	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kalarm/Makefile.am	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -12,12 +12,12 @@
 # Don't change the order of the kalarm_SOURCES files without first checking
 # that it builds with --enable-final !!!
 kalarm_SOURCES = birthdaydlg.cpp main.cpp alarmevent.cpp editdlg.cpp \
-	soundpicker.cpp sounddlg.cpp alarmcalendar.cpp daemon.cpp undo.cpp \
+	fontcolour.cpp soundpicker.cpp sounddlg.cpp alarmcalendar.cpp daemon.cpp undo.cpp \
 	kalarmapp.cpp mainwindowbase.cpp mainwindow.cpp messagewin.cpp \
 	preferences.cpp prefdlg.cpp kalarmiface.skel \
 	traywindow.cpp dcophandler.cpp alarmguiiface.skel \
 	recurrenceedit.cpp karecurrence.cpp deferdlg.cpp functions.cpp \
-	fontcolour.cpp fontcolourbutton.cpp alarmtimewidget.cpp \
+	fontcolourbutton.cpp alarmtimewidget.cpp \
 	specialactions.cpp reminder.cpp startdaytimer.cpp \
 	eventlistviewbase.cpp alarmlistview.cpp kamail.cpp timeselector.cpp \
 	templatelistview.cpp templatepickdlg.cpp templatedlg.cpp \
Index: kalarm/fontcolour.cpp
===================================================================
--- kalarm/fontcolour.cpp	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kalarm/fontcolour.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,7 +1,7 @@
 /*
  *  fontcolour.cpp  -  font and colour chooser widget
  *  Program:  kalarm
- *  Copyright (C) 2001 - 2003, 2005 by David Jarvie <software@astrojar.org.uk>
+ *  Copyright © 2001-2003,2005,2008 by David Jarvie <software@astrojar.org.uk>
  *
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the GNU General Public License as published by
@@ -55,42 +55,39 @@
 		page = new QGroupBox(frameLabel, this);
 		topLayout->addWidget(page);
 		topLayout = new QVBoxLayout(page, KDialog::marginHint(), KDialog::spacingHint());
-		topLayout->addSpacing(fontMetrics().lineSpacing()/2);
+		topLayout->addSpacing(fontMetrics().height() - KDialog::marginHint() + KDialog::spacingHint());
 	}
+	QHBoxLayout* hlayout = new QHBoxLayout(topLayout);
+	QVBoxLayout* colourLayout = new QVBoxLayout(hlayout);
 	if (fg)
 	{
-		QBoxLayout* layout = new QHBoxLayout(topLayout);
 		QHBox* box = new QHBox(page);    // to group widgets for QWhatsThis text
-		box->setSpacing(KDialog::spacingHint());
-		layout->addWidget(box);
+		box->setSpacing(KDialog::spacingHint()/2);
+		colourLayout->addWidget(box);
 
 		QLabel* label = new QLabel(i18n("&Foreground color:"), box);
-		label->setMinimumSize(label->sizeHint());
+		box->setStretchFactor(new QWidget(box), 0);
 		mFgColourButton = new ColourCombo(box);
-		mFgColourButton->setMinimumSize(mFgColourButton->sizeHint());
 		connect(mFgColourButton, SIGNAL(activated(const QString&)), SLOT(setSampleColour()));
 		label->setBuddy(mFgColourButton);
 		QWhatsThis::add(box, i18n("Select the alarm message foreground color"));
-		layout->addStretch();
 	}
 
-	QBoxLayout* layout = new QHBoxLayout(topLayout);
 	QHBox* box = new QHBox(page);    // to group widgets for QWhatsThis text
-	box->setSpacing(KDialog::spacingHint());
-	layout->addWidget(box);
+	box->setSpacing(KDialog::spacingHint()/2);
+	colourLayout->addWidget(box);
 
 	QLabel* label = new QLabel(i18n("&Background color:"), box);
-	label->setMinimumSize(label->sizeHint());
+	box->setStretchFactor(new QWidget(box), 0);
 	mBgColourButton = new ColourCombo(box);
-	mBgColourButton->setMinimumSize(mBgColourButton->sizeHint());
 	connect(mBgColourButton, SIGNAL(activated(const QString&)), SLOT(setSampleColour()));
 	label->setBuddy(mBgColourButton);
 	QWhatsThis::add(box, i18n("Select the alarm message background color"));
-	layout->addStretch();
+	hlayout->addStretch();
 
 	if (editColours)
 	{
-		layout = new QHBoxLayout(topLayout);
+		QHBoxLayout* layout = new QHBoxLayout(topLayout);
 		QPushButton* button = new QPushButton(i18n("Add Co&lor..."), page);
 		button->setFixedSize(button->sizeHint());
 		connect(button, SIGNAL(clicked()), SLOT(slotAddColour()));
@@ -107,7 +104,7 @@
 
 	if (defaultFont)
 	{
-		layout = new QHBoxLayout(topLayout);
+		QHBoxLayout* layout = new QHBoxLayout(topLayout);
 		mDefaultFont = new CheckBox(i18n("Use &default font"), page);
 		mDefaultFont->setMinimumSize(mDefaultFont->sizeHint());
 		connect(mDefaultFont, SIGNAL(toggled(bool)), SLOT(slotDefaultFontToggled(bool)));
@@ -120,6 +117,10 @@
 		mDefaultFont = 0;
 
 	mFontChooser = new KFontChooser(page, name, onlyFixed, fontList, false, visibleListSize);
+	mFontChooser->installEventFilter(this);   // for read-only mode
+	const QObjectList* kids = mFontChooser->queryList();
+	for (QObjectList::ConstIterator it = kids->constBegin();  it != kids->constEnd();  ++it)
+		(*it)->installEventFilter(this);
 	topLayout->addWidget(mFontChooser);
 
 	slotDefaultFontToggled(false);
@@ -212,6 +213,25 @@
 	}
 }
 
+bool FontColourChooser::eventFilter(QObject*, QEvent* e)
+{
+	if (mReadOnly)
+	{
+		switch (e->type())
+		{
+			case QEvent::MouseButtonPress:
+			case QEvent::MouseButtonRelease:
+			case QEvent::MouseButtonDblClick:
+			case QEvent::KeyPress:
+			case QEvent::KeyRelease:
+				return true;   // prevent the event being handled
+			default:
+				break;
+		}
+	}
+	return false;
+}
+
 void FontColourChooser::slotDefaultFontToggled(bool on)
 {
 	mFontChooser->setEnabled(!on);
Index: kalarm/birthdaydlg.cpp
===================================================================
--- kalarm/birthdaydlg.cpp	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kalarm/birthdaydlg.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -88,7 +88,6 @@
 	QGroupBox* textGroup = new QGroupBox(2, Qt::Horizontal, i18n("Alarm Text"), topWidget);
 	topLayout->addWidget(textGroup);
 	QLabel* label = new QLabel(i18n("Pre&fix:"), textGroup);
-	label->setFixedSize(label->sizeHint());
 	mPrefix = new BLineEdit(mPrefixText, textGroup);
 	mPrefix->setMinimumSize(mPrefix->sizeHint());
 	label->setBuddy(mPrefix);
@@ -98,7 +97,6 @@
 	           "including any necessary trailing spaces."));
 
 	label = new QLabel(i18n("S&uffix:"), textGroup);
-	label->setFixedSize(label->sizeHint());
 	mSuffix = new BLineEdit(mSuffixText, textGroup);
 	mSuffix->setMinimumSize(mSuffix->sizeHint());
 	label->setBuddy(mSuffix);
@@ -152,7 +150,6 @@
 	// Acknowledgement confirmation required - default = no confirmation
 	QHBoxLayout* layout = new QHBoxLayout(groupLayout, 2*spacingHint());
 	mConfirmAck = EditAlarmDlg::createConfirmAckCheckbox(group);
-	mConfirmAck->setFixedSize(mConfirmAck->sizeHint());
 	layout->addWidget(mConfirmAck);
 	layout->addSpacing(2*spacingHint());
 	layout->addStretch();
@@ -161,20 +158,17 @@
 	{
 		// Special actions button
 		mSpecialActionsButton = new SpecialActionsButton(i18n("Special Actions..."), group);
-		mSpecialActionsButton->setFixedSize(mSpecialActionsButton->sizeHint());
 		layout->addWidget(mSpecialActionsButton);
 	}
 
 	// Late display checkbox - default = allow late display
 	layout = new QHBoxLayout(groupLayout, 2*spacingHint());
 	mLateCancel = new LateCancelSelector(false, group);
-	mLateCancel->setFixedSize(mLateCancel->sizeHint());
 	layout->addWidget(mLateCancel);
 	layout->addStretch();
 
 	// Sub-repetition button
 	mSubRepetition = new RepetitionButton(i18n("Sub-Repetition"), false, group);
-	mSubRepetition->setFixedSize(mSubRepetition->sizeHint());
 	mSubRepetition->set(0, 0, true, 364*24*60);
 	QWhatsThis::add(mSubRepetition, i18n("Set up an additional alarm repetition"));
 	layout->addWidget(mSubRepetition);
@@ -218,6 +212,18 @@
 }
 
 /******************************************************************************
+* Close the address book.This is called at program termination.
+*/
+void BirthdayDlg::close()
+{
+	if (mAddressBook)
+	{
+		KABC::StdAddressBook::close();
+		mAddressBook = 0;
+	}
+}
+
+/******************************************************************************
 * Initialise or update the birthday selection list by fetching all birthdays
 * from the address book and displaying those which do not already have alarms.
 */
Index: libemailfunctions/tests/testemail.cpp
===================================================================
--- libemailfunctions/tests/testemail.cpp	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libemailfunctions/tests/testemail.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -144,6 +144,13 @@
   return true;
 }
 
+static bool checkNormalizeAddressesAndDecodeIDNs( const QString& input, const QString& expResult )
+{
+  QString result = KPIM::normalizeAddressesAndDecodeIDNs( input );
+  check( "normalizeAddressesAndDecodeIDNs( \"" + input + "\" ) result ", result, expResult );
+  return true;
+}
+
 static bool checkQuoteIfNecessary( const QString& input, const QString& expResult )
 {
   QString result = quoteNameIfNecessary( input );
@@ -458,6 +465,10 @@
   checkNormalizeAddressesAndEncodeIDNs( "matt@fruitsalad.org (jongel,fibbel)", "\"jongel,fibbel\" <matt@fruitsalad.org>" );
   checkNormalizeAddressesAndEncodeIDNs( "matt@fruitsalad.org (\"jongel,fibbel\")", "\"jongel,fibbel\" <matt@fruitsalad.org>" );
 
+  // check checkNormalizeAddressesAndDecodeIDNs
+  checkNormalizeAddressesAndDecodeIDNs( "=?us-ascii?Q?Surname=2C=20Name?= <nobody@example.org>", "\"Surname, Name\" <nobody@example.org>" );
+  checkNormalizeAddressesAndDecodeIDNs( "=?iso-8859-1?B?5Hf8b2xmLPZBbmRyZWFz?= <nobody@example.org>", QString::fromUtf8("\"äwüolf,öAndreas\" <nobody@example.org>") );
+
   // check the "quote if necessary" method
   checkQuoteIfNecessary( "Matt Douhan", "Matt Douhan");
   checkQuoteIfNecessary( "Douhan, Matt", "\"Douhan, Matt\"");
Index: libemailfunctions/tests/Makefile.am
===================================================================
--- libemailfunctions/tests/Makefile.am	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libemailfunctions/tests/Makefile.am	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,5 +1,5 @@
 AM_CPPFLAGS = -I$(top_srcdir)/libemailfunctions $(all_includes)
-LDADD = ../libemailfunctions.la $(LIB_KDECORE)
+LDADD = ../libemailfunctions.la ../../libkmime/libkmime.la $(LIB_KDECORE)
 
 check_PROGRAMS = testidmapper testemail
 TESTS = testemail
Index: libemailfunctions/email.cpp
===================================================================
--- libemailfunctions/email.cpp	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libemailfunctions/email.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -23,6 +23,7 @@
 #include <kdebug.h>
 #include <klocale.h>
 #include <kidna.h>
+#include <kmime_util.h>
 
 #include <qregexp.h>
 
@@ -803,7 +804,7 @@
   if ( displayName.isEmpty() && comment.isEmpty() )
     return addrSpec;
   else if ( comment.isEmpty() )
-    return displayName + " <" + addrSpec + ">";
+    return quoteNameIfNecessary( displayName ) + " <" + addrSpec + ">";
   else if ( displayName.isEmpty() ) {
     QString commentStr = comment;
     return quoteNameIfNecessary( commentStr ) + " <" + addrSpec + ">";
@@ -863,6 +864,9 @@
       if ( KPIM::splitAddress( (*it).utf8(), displayName, addrSpec, comment )
            == AddressOk ) {
 
+        displayName = KMime::decodeRFC2047String(displayName).utf8();
+        comment = KMime::decodeRFC2047String(comment).utf8();
+
         normalizedAddressList <<
           normalizedAddress( QString::fromUtf8( displayName ),
                              decodeIDN( QString::fromUtf8( addrSpec ) ),
Index: libemailfunctions/Makefile.am
===================================================================
--- libemailfunctions/Makefile.am	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libemailfunctions/Makefile.am	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,4 +1,4 @@
-INCLUDES = $(all_includes)
+INCLUDES = $(all_includes) -I$(srcdir)/../libkmime/
 
 noinst_LTLIBRARIES = libemailfunctions.la
 libemailfunctions_la_SOURCES = email.cpp idmapper.cpp kasciistricmp.cpp \
@@ -7,7 +7,7 @@
 libemailfunctions_la_LDFLAGS = $(all_libraries) -no-undefined
 ## Since this is a noinst library, in case of --enable-closure we need
 ## to link it explicitly to the libraries that it uses.
-libemailfunctions_la_LIBADD = $(LIB_QT) $(LIB_KDECORE)
+libemailfunctions_la_LIBADD = ../libkmime/libkmime.la $(LIB_QT) $(LIB_KDECORE)
 
 emailfunctionsincludedir = $(includedir)/libemailfunctions
 emailfunctionsinclude_HEADERS = idmapper.h
Index: korn/KOrn.desktop
===================================================================
--- korn/KOrn.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ korn/KOrn.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,5 +1,4 @@
 [Desktop Entry]
-Encoding=UTF-8
 GenericName=Mail Alert
 GenericName[af]=Pos inkennis stel
 GenericName[ar]=منبه للبريد الألكتروني
@@ -27,6 +26,7 @@
 GenericName[is]=Póst áminning
 GenericName[it]=Programma per controllare la posta
 GenericName[ja]=メールの通知
+GenericName[ka]=საფოსტო სიგნალი
 GenericName[kk]=Пошта келген туралы хабарлау
 GenericName[km]=សញ្ញា​ជូនដំណឹងសំបុត្រ
 GenericName[lt]=Pašto pranešėjas
@@ -55,7 +55,8 @@
 GenericName[th]=แจ้งเตือนจดหมาย
 GenericName[tr]=Midi Uyarısı
 GenericName[uk]=Нагадування пошти
-GenericName[uz]=Янги хат ҳақида хабар берувчи
+GenericName[uz]=Yangi xat haqida xabar beruvchi
+GenericName[uz@cyrillic]=Янги хат ҳақида хабар берувчи
 GenericName[ven]=U sedzesa poso
 GenericName[xh]=Umposi Wokulumkisa
 GenericName[zh_CN]=邮件警告
Index: korn/uninstall.desktop
===================================================================
--- korn/uninstall.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ korn/uninstall.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,3 +1,2 @@
 [Desktop Entry]
-Encoding=UTF-8
 Hidden=true
Index: kmailcvt/uninstall.desktop
===================================================================
--- kmailcvt/uninstall.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kmailcvt/uninstall.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,3 +1,2 @@
 [Desktop Entry]
-Encoding=UTF-8
 Hidden=true
Index: kaddressbook/interfaces/kaddressbook_extension.desktop
===================================================================
--- kaddressbook/interfaces/kaddressbook_extension.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kaddressbook/interfaces/kaddressbook_extension.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,5 +1,4 @@
 [Desktop Entry]
-Encoding=UTF-8
 Type=ServiceType
 X-KDE-ServiceType=KAddressBook/Extension
 Comment=KAddressBook Extension Plugin
@@ -28,6 +27,7 @@
 Comment[is]=KAddressbook viðbótar íforrit
 Comment[it]=Plugin estensione di KAddressbook
 Comment[ja]=KAddressbook 拡張プラグイン
+Comment[ka]=KDE წიგნაკის გაფართოების მოდული
 Comment[kk]=KAddressBook кеңейту модулі
 Comment[km]=កម្មវិធី​ជំនួយ​ផ្នែក​បន្ថែម​របស់ KAddressBook 
 Comment[lt]=KAddressBook praplėtimo priedas
Index: kaddressbook/interfaces/kaddressbook_xxport.desktop
===================================================================
--- kaddressbook/interfaces/kaddressbook_xxport.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kaddressbook/interfaces/kaddressbook_xxport.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,5 +1,4 @@
 [Desktop Entry]
-Encoding=UTF-8
 Type=ServiceType
 X-KDE-ServiceType=KAddressBook/XXPort
 Comment=KAddressBook Import/Export Plugin
@@ -29,6 +28,7 @@
 Comment[is]=KAddressbook flytja inn/út íforrit
 Comment[it]=Plugin importa/esporta di KAddressbook
 Comment[ja]=KAddressbook インポート/エクスポートプラグイン
+Comment[ka]=წიგნაკის იმპორტ/ექსპორტის მოდული
 Comment[kk]=KAddressBook импорт/экспорт модулі
 Comment[km]=កម្មវិធី​ជំនួយ​នាំចូល/នាំចេញ​របស់ KAddressBook
 Comment[lt]=KAddressBook importo/eksporto priedas
@@ -52,7 +52,8 @@
 Comment[tg]=Содирот ва воридоти китоби адрес
 Comment[tr]=KAdresDefteri Al/Gönder Eklentisi
 Comment[uk]=Втулок імпорту/експорту адресної книги KAddressBook
-Comment[uz]=Манзиллар дафтари учун импорт/экспорт плагини
+Comment[uz]=Manzillar daftari uchun import/eksport plagini
+Comment[uz@cyrillic]=Манзиллар дафтари учун импорт/экспорт плагини
 Comment[zh_CN]=KAddressBook 导入/导出插件
 Comment[zh_TW]=KAddressBook 匯入/匯出外掛程式
 
Index: kaddressbook/interfaces/kaddressbook_contacteditorwidget.desktop
===================================================================
--- kaddressbook/interfaces/kaddressbook_contacteditorwidget.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kaddressbook/interfaces/kaddressbook_contacteditorwidget.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,5 +1,4 @@
 [Desktop Entry]
-Encoding=UTF-8
 Type=ServiceType
 X-KDE-ServiceType=KAddressBook/ContactEditorWidget
 Comment=KAddressBook Contact Editor Widget Plugin
@@ -25,6 +24,7 @@
 Comment[is]=KAddressbook tengiliðaritils íforrit
 Comment[it]=Plugin editor dei contatti di KAddressbook
 Comment[ja]=KAddressbook 連絡先エディタ ウィジェット プラグイン
+Comment[ka]= KDE-ს წიგნაკის კონტაქტთა რედაქტირების ელემენტის მოდული
 Comment[kk]=Адрестік кітапшаның контактты өңдеу модулі
 Comment[km]=កម្មវិធី​ជំនួយ​ធាតុ​ក្រាហ្វិក​កម្មវិធី​និពន្ធ​ទំនាក់ទំនង​របស់ KAddressBook
 Comment[lt]=KAddressBook kontaktų redaktoriaus valdiklių priedas
Index: kaddressbook/customfieldswidget.cpp
===================================================================
--- kaddressbook/customfieldswidget.cpp	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kaddressbook/customfieldswidget.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -27,6 +27,7 @@
 #include <qlabel.h>
 #include <qlayout.h>
 #include <qpushbutton.h>
+#include <qvalidator.h>
 #include <qspinbox.h>
 
 #include <kaccelmanager.h>
@@ -53,6 +54,7 @@
   layout->addWidget( label, 0, 0 );
 
   mTitle = new KLineEdit( page );
+  mTitle->setValidator( new QRegExpValidator( QRegExp( "([a-zA-Z]|\\d|-)+" ), mTitle ) );
   label->setBuddy( mTitle );
   layout->addWidget( mTitle, 0, 1 );
 
Index: kaddressbook/extensionmanager.cpp
===================================================================
--- kaddressbook/extensionmanager.cpp	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kaddressbook/extensionmanager.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -46,10 +46,10 @@
 
 ExtensionManager::ExtensionManager( QWidget* extensionBar, QWidgetStack* detailsStack, KAB::Core *core, QObject *parent,
                                     const char *name )
-    : QObject( parent, name ), mExtensionBar( extensionBar ), mCore( core ), 
+    : QObject( parent, name ), mExtensionBar( extensionBar ), mCore( core ),
       mMapper( 0 ), mDetailsStack( detailsStack ), mActiveDetailsWidget( 0 )
 {
-  Q_ASSERT( mExtensionBar ); 
+  Q_ASSERT( mExtensionBar );
   QVBoxLayout* layout = new QVBoxLayout( mExtensionBar );
   mSplitter = new QSplitter( mExtensionBar );
   mSplitter->setOrientation( QSplitter::Vertical );
@@ -68,7 +68,7 @@
 }
 
 
-void ExtensionManager::restoreSettings() 
+void ExtensionManager::restoreSettings()
 {
   const QStringList activeExtensions = KABPrefs::instance()->activeExtensions();
 
@@ -110,7 +110,7 @@
   for ( QStringList::ConstIterator it = mActiveExtensions.begin(), end = mActiveExtensions.end(); it != end; ++it ) {
     if ( mExtensionMap.contains( *it ) && mExtensionMap[*it].widget )
       mExtensionMap[*it].widget->contactsSelectionChanged();
-  } 
+  }
 }
 
 void ExtensionManager::activationToggled( const QString &extid )
@@ -127,7 +127,7 @@
   if ( !mExtensionMap.contains( extid ) )
     return;
   if ( mActiveExtensions.contains( extid ) == active )
-    return; 
+    return;
   const ExtensionData data = mExtensionMap[ extid ];
   if ( active ) {
     mActiveExtensions.append( extid );
@@ -152,7 +152,7 @@
   }
   mExtensionBar->setShown( !mActiveExtensions.isEmpty() );
 }
- 
+
 void ExtensionManager::createActions()
 {
   mCore->guiClient()->unplugActionList( "extensions_list" );
@@ -178,6 +178,7 @@
       data.action->setChecked( true );
   }
 
+  mActionList.append( new KActionSeparator( mActionCollection ) );
   mCore->guiClient()->plugActionList( "extensions_list", mActionList );
 }
 
@@ -235,6 +236,8 @@
 
     wdg = extensionFactory->extension( mCore, mSplitter );
     if ( wdg ) {
+      if ( wdg->identifier() == "distribution_list_editor_ng" )
+          mSplitter->moveToFirst( wdg );
       wdg->hide();
       connect( wdg, SIGNAL( modified( const KABC::Addressee::List& ) ),
                SIGNAL( modified( const KABC::Addressee::List& ) ) );
Index: kaddressbook/kaddressbookui.rc
===================================================================
--- kaddressbook/kaddressbookui.rc	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kaddressbook/kaddressbookui.rc	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,5 +1,5 @@
 <!DOCTYPE kpartgui>
-<kpartgui name="kaddressbook" version="22">
+<kpartgui name="kaddressbook" version="23">
 
   <MenuBar>
     <Menu name="file" noMerge="1"><text>&amp;File</text>
@@ -47,6 +47,8 @@
       <Action name="view_modify"/>
       <Action name="view_delete"/>
       <Separator/>
+      <ActionList name="extensions_list"/>
+      <Separator/>
       <Action name="view_refresh"/>
     </Menu>
 
@@ -56,9 +58,6 @@
 
     <Menu name="settings" noMerge="1"><text>&amp;Settings</text>
       <Merge name="StandardToolBarMenuHandler" />
-      <Menu name="show_extensions_menu"><text>Show Extension</text>
-        <ActionList name="extensions_list"/>
-      </Menu>
       <Action name="options_show_jump_bar"/>
       <Action name="options_show_details"/>
       <Action name="options_show_statusbar"/>
Index: kaddressbook/dcopaddressbook.desktop
===================================================================
--- kaddressbook/dcopaddressbook.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kaddressbook/dcopaddressbook.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,5 +1,4 @@
 [Desktop Entry]
-Encoding=UTF-8
 Type=ServiceType
 X-KDE-ServiceType=DCOP/AddressBook
 Comment=Address Book with a DCOP interface
@@ -29,6 +28,7 @@
 Comment[is]=Vistfangaskrá með DCOP tengingu
 Comment[it]=Rubrica indirizzi con un'interfaccia DCOP
 Comment[ja]=DCOP インターフェースを持つアドレス帳
+Comment[ka]=წიგნაკი DCOP-ის ინტერფეისით
 Comment[kk]=DCOP интерфейсті адрестік кітапшасы
 Comment[km]=សៀវភៅ​អាសយដ្ឋាន​ដែល​មាន​ចំណុច​ប្រទាក់ DCOP
 Comment[ko]=DCOP 인터페이스를 사용하는 주소록
@@ -54,6 +54,7 @@
 Comment[tg]=Китоби адрес бо интерфейси DCOP
 Comment[tr]=DCOP Arayüzü Olan Adres Defteri
 Comment[uk]=Адресна книга з інтерфейсом DCOP
-Comment[uz]=DCOP интерфейсли манзиллар дафтари
+Comment[uz]=DCOP interfeysli manzillar daftari
+Comment[uz@cyrillic]=DCOP интерфейсли манзиллар дафтари
 Comment[zh_CN]=具有 DCOP 接口的地址簿
 Comment[zh_TW]=有 DCOP 介面的通訊錄
Index: kaddressbook/kaddressbook.desktop
===================================================================
--- kaddressbook/kaddressbook.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kaddressbook/kaddressbook.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,5 +1,4 @@
 [Desktop Entry]
-Encoding=UTF-8
 Name=KAddressBook
 Name[cy]=KAddressBook/LlyfrKyfeiriadau
 Name[de]=Adressbuch
@@ -43,6 +42,7 @@
 GenericName[is]=Vistfangastjóri
 GenericName[it]=Gestore degli indirizzi
 GenericName[ja]=アドレスマネージャ
+GenericName[ka]=წიგნაკის მმართველი
 GenericName[kk]=Адрестік кітапшасы
 GenericName[km]=កម្មវិធី​គ្រប់គ្រង​អាសយដ្ឋាន
 GenericName[lt]=Adresų tvarkyklė
Index: kaddressbook/csv-templates/kaddressbook.desktop
===================================================================
--- kaddressbook/csv-templates/kaddressbook.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kaddressbook/csv-templates/kaddressbook.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -19,6 +19,7 @@
 Name[hr]=KAdressBook (KDE 3.1)
 Name[hu]=Címjegyzék (KDE 3.1)
 Name[it]=Rubrica indirizzi (KDE 3.1)
+Name[ka]=წიგნაკი (KDE 3.1)
 Name[mk]=КАдресар (KDE 3.1)
 Name[nb]=Adressebok (KDE 3.1)
 Name[nds]=KAdressbook (KDE 3.1)
Index: kaddressbook/csv-templates/yahoo.desktop
===================================================================
--- kaddressbook/csv-templates/yahoo.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kaddressbook/csv-templates/yahoo.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -32,6 +32,7 @@
 Name[is]=Yahoo! póstfangaskrá
 Name[it]=Rubrica indirizzi Yahoo!
 Name[ja]=Yahoo! アドレス帳
+Name[ka]=წიგნაკი Yahoo!
 Name[kk]=Yahoo! адрестік кітапшасы
 Name[km]=សៀវភៅ​អាសយដ្ឋាន​របស់​យ៉ាហ៊ូ
 Name[ko]=Yahoo! 주소록
@@ -57,7 +58,8 @@
 Name[tg]=Китоби адресии Yahoo!
 Name[tr]=Yahoo! Adres Defteri
 Name[uk]=Адресна книга Yahoo
-Name[uz]=Yahoo! манзиллар дафтари
+Name[uz]=Yahoo! manzillar daftari
+Name[uz@cyrillic]=Yahoo! манзиллар дафтари
 Name[zh_CN]=Yahoo! 地址簿
 Name[zh_TW]=Yahoo! 通訊錄
 
Index: kaddressbook/distributionlisteditor_p.h
===================================================================
--- kaddressbook/distributionlisteditor_p.h	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kaddressbook/distributionlisteditor_p.h	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -26,8 +26,11 @@
 #include <libkdepim/addresseelineedit.h>
 #include <libkdepim/distributionlist.h>
 
+#include <qpushbutton.h>
 #include <qstring.h>
 
+class QToolButton;
+
 namespace KABC {
     class Addressee;
     class AddressBook;
@@ -52,7 +55,8 @@
 
     void setEntry( const KPIM::DistributionList::Entry& entry );
     KPIM::DistributionList::Entry entry() const; 
-
+    void setFocusToLineEdit();
+    
 signals:
     void cleared();
     void textChanged();
@@ -67,6 +71,7 @@
     QString m_uid;
     QString m_initialText;
     LineEdit* m_lineEdit;
+    QToolButton* m_clearButton;
     KABC::AddressBook* m_addressBook;
 };
 
Index: kaddressbook/views/tableview.desktop
===================================================================
--- kaddressbook/views/tableview.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kaddressbook/views/tableview.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,5 +1,4 @@
 [Desktop Entry]
-Encoding=UTF-8
 X-KDE-Library=libkaddrbk_tableview
 Name=Table View
 Name[af]=Tabel Aansig
@@ -29,6 +28,7 @@
 Name[is]=Töflusýn
 Name[it]=Vista tabella
 Name[ja]=テーブルビュー
+Name[ka]=ცხრილი
 Name[kk]=Кесте
 Name[km]=ទិដ្ឋភាព​តារាង
 Name[lt]=Lentelės vaizdas
@@ -55,7 +55,8 @@
 Name[tg]=Ҷадвал
 Name[tr]=Tablo Görünümü
 Name[uk]=Вигляд таблицею
-Name[uz]=Жадвал кўринишида
+Name[uz]=Jadval koʻrinishida
+Name[uz@cyrillic]=Жадвал кўринишида
 Name[zh_CN]=表格视图
 Name[zh_TW]=表格檢視
 Type=Service
Index: kaddressbook/views/iconview.desktop
===================================================================
--- kaddressbook/views/iconview.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kaddressbook/views/iconview.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,5 +1,4 @@
 [Desktop Entry]
-Encoding=UTF-8
 X-KDE-Library=libkaddrbk_iconview
 Name=Icon View
 Name[af]=Ikoon Aansig
@@ -33,6 +32,7 @@
 Name[is]=Táknmyndasýn
 Name[it]=Vista a icone
 Name[ja]=アイコンビュー
+Name[ka]=ხატულების ჩვენება
 Name[kk]=Таңбаша
 Name[km]=ទិដ្ឋភាព​រូបតំណាង
 Name[lt]=Rodyti piktogramas
@@ -63,7 +63,8 @@
 Name[th]=มุมมองแบบไอคอน
 Name[tr]=Simge Görünümü
 Name[uk]=Вигляд піктограмами
-Name[uz]=Нишонча кўринишида
+Name[uz]=Nishoncha koʻrinishida
+Name[uz@cyrillic]=Нишонча кўринишида
 Name[ven]=Mbonalelo ya aikhono
 Name[vi]=Xem icon 
 Name[xh]=Imboniselo ye Icon
Index: kaddressbook/views/cardview.desktop
===================================================================
--- kaddressbook/views/cardview.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kaddressbook/views/cardview.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,5 +1,4 @@
 [Desktop Entry]
-Encoding=UTF-8
 X-KDE-Library=libkaddrbk_cardview
 Name=Card View
 Name[af]=Kaard Aansig
@@ -29,6 +28,7 @@
 Name[is]=Spjaldsýn
 Name[it]=Vista scheda
 Name[ja]=カードビュー
+Name[ka]=ბარათების ჩვენება
 Name[kk]=Визитка
 Name[km]=ទិដ្ឋភាព​កាត
 Name[lt]=Kortelės vaizdas
Index: kaddressbook/kaddressbook_part.rc
===================================================================
--- kaddressbook/kaddressbook_part.rc	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kaddressbook/kaddressbook_part.rc	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,5 +1,5 @@
 <!DOCTYPE kpartgui>
-<kpartgui name="kaddressbook" version="22">
+<kpartgui name="kaddressbook" version="23">
 
   <MenuBar>
     <Menu name="file" noMerge="1"><text>&amp;File</text>
@@ -47,6 +47,8 @@
       <Action name="view_modify"/>
       <Action name="view_delete"/>
       <Separator/>
+      <ActionList name="extensions_list"/>
+      <Separator/>
       <Action name="view_refresh"/>
     </Menu>
 
@@ -56,9 +58,6 @@
 
     <Menu name="settings" noMerge="1"><text>&amp;Settings</text>
       <Merge name="StandardToolBarMenuHandler" />
-      <Menu name="show_extensions_menu"><text>Show Extension</text>
-        <ActionList name="extensions_list"/>
-      </Menu>
       <Action name="options_show_jump_bar"/>
       <Action name="options_show_details"/>
       <Action name="options_show_statusbar"/>
Index: kaddressbook/xxport/kde2_xxport.desktop
===================================================================
--- kaddressbook/xxport/kde2_xxport.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kaddressbook/xxport/kde2_xxport.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,5 +1,4 @@
 [Desktop Entry]
-Encoding=UTF-8
 X-KDE-Library=libkaddrbk_kde2_xxport
 Name=KAB KDE2 XXPort Plugin
 Name[af]=KAB KDE2 XXPort inprop module
@@ -26,6 +25,7 @@
 Name[hu]=KAB KDE2 XXPort bővítőmodul
 Name[is]=Íforrit fyrir KAB KDE2 XXPort
 Name[ja]=KAB KDE2 インポート/プラグイン
+Name[ka]=KAB KDE2-ს ექსპორტის მოდული
 Name[kk]=KDE2 пішімінен импорт ету
 Name[km]=កម្មវិធី​ជំនួយ KAB KDE2 XXPort
 Name[lt]=KAB KDE2 XXPort priedas
@@ -73,6 +73,7 @@
 Comment[is]=Íforrit til að færa inn gömlu KDE2 vistfangaskrána
 Comment[it]=Plugin per importare le vecchie voci della rubrica di KDE2
 Comment[ja]=古い KDE 2 アドレス帳をインポートするプラグイン
+Comment[ka]=ძველი KDE2-ს წიგნაკის იმპორტის მოდული
 Comment[kk]=Ескі KDE2 адр.кітапшасынан импорт ету модулі
 Comment[km]=កម្មវិធី​ជំនួយ​ដើម្បី​នាំចូល​សៀវភៅ​អាសយដ្ឋាន KDE 2 ចាស់ៗ
 Comment[lt]=Priedas senosios KDE 2 adresų knygelės importui
@@ -96,7 +97,8 @@
 Comment[tg]=Модул барои воридоти файлҳои китобиадресии KDE2
 Comment[tr]=KDE 2 adres defteri bilgilerini alma eklentisi
 Comment[uk]=Втулок для імпорту адресної книги старого формату часів KDE 2
-Comment[uz]=Эски KDE 2 манзиллар дафтарини импорт қилиш учун плагин
+Comment[uz]=Eski KDE 2 manzillar daftarini import qilish uchun plagin
+Comment[uz@cyrillic]=Эски KDE 2 манзиллар дафтарини импорт қилиш учун плагин
 Comment[zh_CN]=导入旧的 KDE 2 地址簿的插件
 Comment[zh_TW]=匯入舊的 KDE2 通訊錄的外掛程式
 Type=Service
Index: kaddressbook/xxport/csv_xxport.desktop
===================================================================
--- kaddressbook/xxport/csv_xxport.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kaddressbook/xxport/csv_xxport.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,5 +1,4 @@
 [Desktop Entry]
-Encoding=UTF-8
 X-KDE-Library=libkaddrbk_csv_xxport
 Name=KAB CSV XXPort Plugin
 Name[af]=KAB CSV XXPort inprop module
@@ -25,6 +24,7 @@
 Name[hu]=KAB XXPort bővítőmodul
 Name[is]=Íforrit fyrir KAV CSV XXPort
 Name[ja]=KAB CSV インポート/エクスポートプラグイン
+Name[ka]=KAB CSV ექსპორტის მოდული
 Name[kk]=CSV файлды экспорт/импорт ету
 Name[km]=កម្មវិធី​ជំនួយ KAB CSV XXPort
 Name[lt]=KAB CSV XXPort priedas
@@ -71,6 +71,7 @@
 Comment[is]=Íforrit til að flytja tengiliði inn og út í CSV sniði
 Comment[it]=Plugin per importare ed esportare contatti in formato CSV
 Comment[ja]=CSV フォーマットで連絡先をインポート/エクスポートするプラグイン
+Comment[ka]=კონტაქტების  CSV ფორმატით იმპორტ/ექსპორტის მოდული
 Comment[kk]=Контакттарды CSV пішіміне экспорт/импорт ету модулі
 Comment[km]=កម្មវិធី ជំនួយ​ដើម្បី​នាំចូល និង​នាំចេញ​ទំនាក់ទំនង​ក្នុង​ទ្រង់ទ្រាយ​ជា CSV ។
 Comment[lt]=Priedas, skirtas kontaktų eksportui ir importui CSV formatu
Index: kaddressbook/xxport/vcard_xxport.desktop
===================================================================
--- kaddressbook/xxport/vcard_xxport.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kaddressbook/xxport/vcard_xxport.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,5 +1,4 @@
 [Desktop Entry]
-Encoding=UTF-8
 X-KDE-Library=libkaddrbk_vcard_xxport
 Name=KAB vCard XXPort Plugin
 Name[af]=KAB vCard XXPort inprop module
@@ -26,6 +25,7 @@
 Name[hu]=KAB vCard XXPort bővítőmodul
 Name[is]=Íforrit fyrir KAB vCard XXPort
 Name[ja]=KAB vCazrd インポート/エクスポートプラグイン
+Name[ka]=KAB vCard ექსპორტის მოდული
 Name[kk]=vCard-ты экспорт/импорт ету
 Name[km]=កម្មវិធី​ជំនួយ KAB vCard XXPort
 Name[lt]=KAB vCard XXPort priedas
@@ -74,6 +74,7 @@
 Comment[is]=Íforrit til að flytja inn eða út tengiliði í vCard sniði
 Comment[it]=Plugin per importare ed esportare contatti in formato vCard
 Comment[ja]=vCard フォーマットで連絡先をインポート/エクスポートするプラグイン
+Comment[ka]=კონტაქტების vCard-ის ფორმატით იმპორტ/ექსპორტის მოდული
 Comment[kk]=vCard пішіміне экспорт/импорт ету модулі
 Comment[km]=កម្មវិធី​ជំនួយ​ដើម្បី​នាំចូល និង​នាំចេញ​ទំនាក់ទំនង​ក្នុង​ទ្រង់ទ្រាយ​ជា vCard
 Comment[lt]=Įskiepis kontaktų importavimui ir eksportavimui vCard formatu
Index: kaddressbook/xxport/pab_xxport.desktop
===================================================================
--- kaddressbook/xxport/pab_xxport.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kaddressbook/xxport/pab_xxport.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,5 +1,4 @@
 [Desktop Entry]
-Encoding=UTF-8
 X-KDE-Library=libkaddrbk_pab_xxport
 Name=KAB MS Exchange Personal Addressbook XXPort Plugin
 Name[af]=KAB MS Exchange adresboek XXPort inprop module
@@ -24,6 +23,7 @@
 Name[hu]=KAB XXPort bővítőmodul MS Exchange személyes címjegyzékekhez
 Name[is]=Íforrit fyrir KAB MS Exchange Personal Addressbook XXPort
 Name[ja]=KAB MS Exchange パーソナルアドレス帳インポート/エクスポートプラグイン
+Name[ka]= MS Exchange-ის პერსონალური წიგნაკის ექსპორტის მოდული
 Name[kk]=MS Exchange адрестік кітапшасына экспорт/импорт ету
 Name[km]=កម្មវិធី​ជំនួយ KAB MS Exchange Personal Addressbook XXPort
 Name[lt]=KAB MS Exchange asmeninės adresų knygelės XXPort priedas
@@ -72,6 +72,7 @@
 Comment[is]=Íforrit til að flytja tengiliði í eða úr MS Exchange Personal Address Book
 Comment[it]=Plugin per importare rubriche personali da MS Exchange
 Comment[ja]=MS Exchange パーソナルアドレス帳をインポートするプラグイン
+Comment[ka]=MS Exchange-ის პერსონალური წიგნაკის იმპორტის მოდული
 Comment[kk]=MS Exchange адрестік кітапшасына экспорт/импорт ету модулі
 Comment[km]=កម្មវិធី​ជំនួយ​ដើម្បី​នាំចូល​សៀវភៅ​អាសយដ្ឋាន​ផ្ទាល់​ខ្លួន​របស់ MS Exchange
 Comment[lt]=Priedas leidžiantis importuoti MS Exchange asmenines adresų knygeles
Index: kaddressbook/xxport/opera_xxport.desktop
===================================================================
--- kaddressbook/xxport/opera_xxport.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kaddressbook/xxport/opera_xxport.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,5 +1,4 @@
 [Desktop Entry]
-Encoding=UTF-8
 X-KDE-Library=libkaddrbk_opera_xxport
 Name=KAB Opera XXPort Plugin
 Name[af]=KAB Opera XXPort inprop module
@@ -25,6 +24,7 @@
 Name[hu]=KAB Opera XXPort bővítőmodul
 Name[is]=Íforrit fyrir KAP Opera XXPort
 Name[ja]=KAB Opera インポート/エクスポートプラグイン
+Name[ka]=KAB Opera-ს ექსპორტის მოდული
 Name[kk]=Opera пішіміне экспорт/импорт ету
 Name[km]=កម្មវិធី​ជំនួយ KAB Opera XXPort
 Name[lt]=KAB Opera XXPort priedas
@@ -72,6 +72,7 @@
 Comment[is]=Íforrit til flytja inn eða út Opera tengiliði
 Comment[it]=Plugin per importare contatti da Opera
 Comment[ja]=Opera の連絡先をインポートするプラグイン
+Comment[ka]=Opera-ს კონტაქტების იმპორტის მოდული
 Comment[kk]=Opera контактарын экспорт/импорт ету модулі
 Comment[km]=កម្មវិធី​ជំនួយ​ដើម្បី​នាំចូល​ទំនាក់ទំនង​របស់ Opera
 Comment[lt]=Priedas Opera kontaktų importui
Index: kaddressbook/xxport/gnokii_xxport.desktop
===================================================================
--- kaddressbook/xxport/gnokii_xxport.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kaddressbook/xxport/gnokii_xxport.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,5 +1,4 @@
 [Desktop Entry]
-Encoding=UTF-8
 X-KDE-Library=libkaddrbk_gnokii_xxport
 Name=KAB Mobile Phone XXPort Plugin
 Name[af]=KAB selfoon XXPort inprop module
@@ -25,6 +24,7 @@
 Name[is]=Íforrit fyrir KAB farsíma XXPort
 Name[it]=Plugin KAB telefono cellulare XXPort
 Name[ja]=KAB 携帯電話インポート/エクスポートプラグイン
+Name[ka]=KAB მობილურ ტელეფონთან ექსპორტის მოდული
 Name[kk]=Қалта телефонға экспорт/импорт ету
 Name[km]=កម្មវិធី​ជំនួយ KAB Mobile Phone XXPort
 Name[lt]=KAB mobilaus telefono XXPort priedas
@@ -72,6 +72,7 @@
 Comment[is]=Íforrit til að færa tengilið milli póstfangaskrár og farsíma
 Comment[it]=Plugin per importare ed esportare voci della rubrica da un telefono cellulare
 Comment[ja]=アドレス帳のエントリをインポート/エクスポートする携帯電話用プラグイン
+Comment[ka]=მობილური ტელეფონის მოდული წიგნაკის ელემენტების იმპორტ/ექსპორტისათვის
 Comment[kk]=Қалта телефонға адр. кітапша жазуын экспорт/импорт ету модулі
 Comment[km]=កម្មវិធី​ជំនួយ​ទូរស័ព្ទ​ចល័ត​ដើម្បី​នាំចូល និង​នាំចេញ​ធាតុ​សៀវភៅ​អាសយដ្ឋាន
 Comment[lt]=Priedas skirtas importuoti ir eksportuoti adresų knygelės įrašus į mobiliuosius telefonus
Index: kaddressbook/xxport/bookmark_xxport.desktop
===================================================================
--- kaddressbook/xxport/bookmark_xxport.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kaddressbook/xxport/bookmark_xxport.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,5 +1,4 @@
 [Desktop Entry]
-Encoding=UTF-8
 X-KDE-Library=libkaddrbk_bookmark_xxport
 Name=KAB Bookmark XXPort Plugin
 Name[af]=KAB boekmerk XXPort inprop module
@@ -25,6 +24,7 @@
 Name[hu]=KAB könyvjelzőkezelő XXPort bővítőmodul
 Name[is]=Íforrit fyrir KAB XXPort bókarmerki
 Name[ja]=KAB ブックマーク インポート/エクスポートプラグイン
+Name[ka]=KAB სანიშნეების ექსპორტის მოდული
 Name[kk]=Бетбелгіні экспорт ету
 Name[km]=កម្មវិធី​ជំនួយ KAB Bookmark XXPort
 Name[lt]=KAB žymelių XXPort priedas
@@ -72,6 +72,7 @@
 Comment[is]=Íforrit til að skrá vefföng tengiliða sem bókarmerki
 Comment[it]=Plugin per esportare come segnalibro gli indirizzi web dei contatti
 Comment[ja]=連絡先のウェブアドレスをブックマークとしてエクスポートするプラグイン 
+Comment[ka]= კონტაქტების ვებ-მისამართების სანიშნეებად ექსპორტის მოდული
 Comment[kk]=Контакттың веб адрестерін бетбелгіге экспорттау модулі
 Comment[km]=កម្មវិធី​ជំនួយ​ដើម្បី​នាំចេញ​អាសយដ្ឋាន​បណ្ដាញ​របស់​ទំនាក់ទំនង ជា​ចំណាំ
 Comment[lt]=Priedas skirtas žiniatinklio adresų kontaktuose eksportavimui į žymeles
Index: kaddressbook/xxport/ldif_xxport.desktop
===================================================================
--- kaddressbook/xxport/ldif_xxport.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kaddressbook/xxport/ldif_xxport.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,5 +1,4 @@
 [Desktop Entry]
-Encoding=UTF-8
 X-KDE-Library=libkaddrbk_ldif_xxport
 Name=KAB LDIF XXPort Plugin
 Name[af]=KAB LDIF XXPort inprop module
@@ -26,6 +25,7 @@
 Name[hu]=KAB LDIF XXPort bővítőmodul
 Name[is]=Íforrit fyrir KAB LDIF XXPort
 Name[ja]=KAB LDIF インポート/エクスポートプラグイン
+Name[ka]=KAB LDIF-ის ექსპორტის მოდული
 Name[kk]=LDIF пішіміне экспорт/импорт ету
 Name[km]=កម្មវិធី​ជំនួយ KAB LDIF XXPort
 Name[lt]=KAB LDIF XXPort priedas
@@ -74,6 +74,7 @@
 Comment[is]=Íforrit sem flytur flytja inn eða út tengiliði í Netscape og Mozilla LDIF sniði
 Comment[it]=Plugin per importare ed esportare contatti in formato Netscape e Mozilla LDIF 
 Comment[ja]=Netscape と Mozilla の LDIF フォーマットで連絡先をインポート/エクスポートするプラグイン
+Comment[ka]= Netscape-სა და  Mozilla-ს კონტაქტების იმპორტ/ექსპორტის მოდული LDIF ფორმატით
 Comment[kk]=Netscape пен Mozilla LDIF пішіміне экспорт/импорт ету модулі
 Comment[km]=កម្មវិធី​ជំនួយ​ដើម្បី​នាំចូល និង​នាំចេញ​ទំនាក់ទំនង​ក្នុង​ទ្រង់ទ្រាយ​ជា Netscape និង Mozilla LDIF
 Comment[lt]=Priedas, skirtas kontaktų importavimui ir eksportavimui Netscape ir Mozilla LDIFF formatu
Index: kaddressbook/xxport/eudora_xxport.desktop
===================================================================
--- kaddressbook/xxport/eudora_xxport.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kaddressbook/xxport/eudora_xxport.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,5 +1,4 @@
 [Desktop Entry]
-Encoding=UTF-8
 X-KDE-Library=libkaddrbk_eudora_xxport
 Name=KAB Eudora XXPort Plugin
 Name[af]=KAB Eudora XXPort inprop module
@@ -25,6 +24,7 @@
 Name[hu]=KAB Eudora XXPort bővítőmodul
 Name[is]=Íforrit fyrir KAB Eudora XXPort
 Name[ja]=KAB Eudora インポート/エクスポートプラグイン
+Name[ka]= KAB Eudora-სთან ექსპორტის მოდული
 Name[kk]=Eudora-ға экспорт/импорт ету
 Name[km]=កម្មវិធី​ជំនួយ KAB Eudora XXPort
 Name[lt]=KAB Eudora XXPort priedas
@@ -72,6 +72,7 @@
 Comment[is]=Íforrit til að flytja inn og út Eudora tengiliði
 Comment[it]=Plugin importare ed esportare contatti Eudora
 Comment[ja]=Eudora の連絡先をインポート/エクスポートするプラグイン
+Comment[ka]=Eudora-ს კონტაქტების იმპორტ/ექსპორტის მოდული
 Comment[kk]=Eudora контакттарды экспорт/импорт ету модулі
 Comment[km]=កម្មវិធី​ជំនួយ​ដើម្បី​នាំចូល និង​នាំចេញ​ទំនាក់ទំនង​របស់ Eudora
 Comment[lt]=Priedas Eudora kontaktų importui ir eksportui
Index: kaddressbook/editors/protocols/jabberprotocol.desktop
===================================================================
--- kaddressbook/editors/protocols/jabberprotocol.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kaddressbook/editors/protocols/jabberprotocol.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,5 +1,4 @@
 [Desktop Entry]
-Encoding=UTF-8
 Type=Service
 Icon=jabber_protocol
 ServiceTypes=KABC/IMProtocol,KPluginInfo
@@ -31,6 +30,7 @@
 Comment[is]=Jabber samskiptamátinn
 Comment[it]=Protocollo Jabber
 Comment[ja]=Jabber プロトコル
+Comment[ka]=Jabber ოქმი
 Comment[kk]=Jabber протоколы
 Comment[km]=ពិធីការ Jabber
 Comment[lt]=Jabber protokolas
Index: kaddressbook/editors/protocols/aimprotocol.desktop
===================================================================
--- kaddressbook/editors/protocols/aimprotocol.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kaddressbook/editors/protocols/aimprotocol.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,5 +1,4 @@
 [Desktop Entry]
-Encoding=UTF-8
 Type=Service
 Icon=aim_protocol
 ServiceTypes=KABC/IMProtocol,KPluginInfo
@@ -30,6 +29,7 @@
 Comment[is]=AIM samskiptamátinn
 Comment[it]=Protocollo AIM
 Comment[ja]=AIM プロトコル
+Comment[ka]=AIM ოქმი
 Comment[kk]=AIM протоколы
 Comment[km]=ពិធីការ AIM
 Comment[ko]=AIM 프로토콜
Index: kaddressbook/editors/protocols/meanwhileprotocol.desktop
===================================================================
--- kaddressbook/editors/protocols/meanwhileprotocol.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kaddressbook/editors/protocols/meanwhileprotocol.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,5 +1,4 @@
 [Desktop Entry]
-Encoding=UTF-8
 Type=Service
 Icon=meanwhile_protocol
 ServiceTypes=KABC/IMProtocol,KPluginInfo
@@ -30,6 +29,7 @@
 Comment[is]=Meanwhile samskiptamátinn
 Comment[it]=Protocollo Meanwhile
 Comment[ja]=Meanwhile プロトコル
+Comment[ka]=Meanwhile ოქმი
 Comment[kk]=Meanwhile протоколы
 Comment[km]=ពិធីការ Meanwhile
 Comment[lt]=Meanwhile protokolas
Index: kaddressbook/editors/protocols/skypeprotocol.desktop
===================================================================
--- kaddressbook/editors/protocols/skypeprotocol.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kaddressbook/editors/protocols/skypeprotocol.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,5 +1,4 @@
 [Desktop Entry]
-Encoding=UTF-8
 Type=Service
 Icon=skype_protocol
 ServiceTypes=KABC/IMProtocol,KPluginInfo
@@ -25,6 +24,7 @@
 Comment[is]=Skype Internet sími
 Comment[it]=Telefonia internet Skype
 Comment[ja]=Skype インターネット電話
+Comment[ka]=Skype ინტერნეტ ტელეფონი
 Comment[kk]=Skype Интернет телефониясы
 Comment[km]=ទូរស័ព្ទ​តាម​អ៊ីនធឺណិត​ដោយ​ប្រើ Skype
 Comment[lt]=Skype Interneto telefonija
Index: kaddressbook/editors/protocols/icqprotocol.desktop
===================================================================
--- kaddressbook/editors/protocols/icqprotocol.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kaddressbook/editors/protocols/icqprotocol.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,5 +1,4 @@
 [Desktop Entry]
-Encoding=UTF-8
 Type=Service
 Icon=icq_protocol
 ServiceTypes=KABC/IMProtocol,KPluginInfo
@@ -30,6 +29,7 @@
 Comment[is]=ICQ samskiptamátinn
 Comment[it]=Protocollo ICQ
 Comment[ja]=ICQ プロトコル
+Comment[ka]=ICQ ოქმი
 Comment[kk]=ICQ протоколы
 Comment[km]=ពិធីការ ICQ
 Comment[lt]=ICQ protokolas
Index: kaddressbook/editors/protocols/ircprotocol.desktop
===================================================================
--- kaddressbook/editors/protocols/ircprotocol.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kaddressbook/editors/protocols/ircprotocol.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,5 +1,4 @@
 [Desktop Entry]
-Encoding=UTF-8
 Type=Service
 Icon=irc_protocol
 ServiceTypes=KABC/IMProtocol,KPluginInfo
@@ -10,6 +9,7 @@
 Comment[hu]=IRC (Internet Relay Chat)
 Comment[is]=Internet spjall
 Comment[ja]=インターネットリレーチャット
+Comment[ka]=IRC
 Comment[kk]=Internet Relay Chat хабарласу
 Comment[km]=ជជែក​កំសាន្ត​តាមអ៊ីនធឺណិត
 Comment[lt]=Estafetinis Interneto pokalbis
Index: kaddressbook/editors/protocols/msnprotocol.desktop
===================================================================
--- kaddressbook/editors/protocols/msnprotocol.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kaddressbook/editors/protocols/msnprotocol.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,5 +1,4 @@
 [Desktop Entry]
-Encoding=UTF-8
 Type=Service
 Icon=msn_protocol
 ServiceTypes=KABC/IMProtocol,KPluginInfo
@@ -13,6 +12,7 @@
 Comment[fr]=Messagerie MSN
 Comment[is]=MSN spjallforritið
 Comment[ja]=MSN メッセンジャー
+Comment[ka]=MSN შიკრიკი
 Comment[km]=កម្មវិធី​ផ្ញើ​សារ MSN
 Comment[nds]=MSN-Kortnarichtenmaker
 Comment[ne]=एमएसएन म्यासेन्जर
@@ -25,6 +25,7 @@
 Name[eo]=MSN Mesaĝilo
 Name[fa]=پیام‌رسان MSN
 Name[ja]=MSN メッセンジャー
+Name[ka]=MSN შიკრიკი
 Name[km]=កម្មវិធី​ផ្ញើសារ MSN
 Name[nds]=MSN-Kortnarichtenmaker
 Name[ne]=एमएसएन म्यासेन्जर
Index: kaddressbook/editors/protocols/yahooprotocol.desktop
===================================================================
--- kaddressbook/editors/protocols/yahooprotocol.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kaddressbook/editors/protocols/yahooprotocol.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,5 +1,4 @@
 [Desktop Entry]
-Encoding=UTF-8
 Type=Service
 Icon=yahoo_protocol
 ServiceTypes=KABC/IMProtocol,KPluginInfo
@@ -31,6 +30,7 @@
 Comment[is]=Yahoo samskiptamátinn
 Comment[it]=Protocollo Yahoo
 Comment[ja]=Yahoo プロトコル
+Comment[ka]=Yahoo ოქმი
 Comment[kk]=Yahoo протоколы
 Comment[km]=ពិធីការ​យ៉ាហ៊ូ
 Comment[lt]=Yahoo protokolas
Index: kaddressbook/editors/protocols/gaduprotocol.desktop
===================================================================
--- kaddressbook/editors/protocols/gaduprotocol.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kaddressbook/editors/protocols/gaduprotocol.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,5 +1,4 @@
 [Desktop Entry]
-Encoding=UTF-8
 Type=Service
 Icon=gadu_protocol
 ServiceTypes=KABC/IMProtocol,KPluginInfo
@@ -31,6 +30,7 @@
 Comment[is]=Gadu-Gadu samskiptamátinn
 Comment[it]=Protocollo Gadu-Gadu
 Comment[ja]=Gadu-Gadu プロトコル
+Comment[ka]=Gadu-Gadu ოქმი
 Comment[kk]=Gadu-Gadu протоколы
 Comment[km]=ពិធីការ Gadu-Gadu
 Comment[lt]=Gadu-Gadu protokolas
Index: kaddressbook/editors/protocols/smsprotocol.desktop
===================================================================
--- kaddressbook/editors/protocols/smsprotocol.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kaddressbook/editors/protocols/smsprotocol.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,5 +1,4 @@
 [Desktop Entry]
-Encoding=UTF-8
 Type=Service
 Icon=sms_protocol
 ServiceTypes=KABC/IMProtocol,KPluginInfo
@@ -30,6 +29,7 @@
 Comment[is]=SMS samskiptamátinn
 Comment[it]=Protocollo SMS
 Comment[ja]=SMS プロトコル
+Comment[ka]= SMS ოქმი
 Comment[kk]=SMS протоколы
 Comment[km]=ពិធីការ​សេវា​សារ​ខ្លីៗ
 Comment[lt]=SMS protokolas
Index: kaddressbook/editors/protocols/groupwiseprotocol.desktop
===================================================================
--- kaddressbook/editors/protocols/groupwiseprotocol.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kaddressbook/editors/protocols/groupwiseprotocol.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,5 +1,4 @@
 [Desktop Entry]
-Encoding=UTF-8
 Type=Service
 Icon=groupwise_protocol
 ServiceTypes=KABC/IMProtocol,KPluginInfo
@@ -19,6 +18,7 @@
 Comment[he]=מסנג'ר של Novell GroupWise
 Comment[is]=Novell GroupWise Samskiptatólið
 Comment[ja]=Novell GroupWise メッセンジャー
+Comment[ka]= Novell GroupWise მყისიერი შეტყობინებების მაცნე
 Comment[kk]=Novell GroupWise хабарласу
 Comment[km]=កម្មវិធី​ផ្ញើ​សារ​របស់​ណូវែល - GroupWise
 Comment[lt]=Novell GroupWise momentinių žinučių klientas
Index: kaddressbook/editors/cryptosettings.desktop
===================================================================
--- kaddressbook/editors/cryptosettings.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kaddressbook/editors/cryptosettings.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,5 +1,4 @@
 [Desktop Entry]
-Encoding=UTF-8
 X-KDE-Library=libkaddrbk_cryptosettings
 Name=Crypto Preferences
 Name[af]=Kripto Voorkeure
@@ -25,6 +24,7 @@
 Name[is]=Stillingar dulritunar
 Name[it]=Preferenze crittografia
 Name[ja]=暗号の設定
+Name[ka]=დაშიფრვის პარამეტრები
 Name[kk]=Шифрлау параметрлері
 Name[km]=ចំណង់​ចំណូល​ចិត្ត Crypto
 Name[ko]=암호화 설정
Index: kaddressbook/editors/imaddresseditor.desktop
===================================================================
--- kaddressbook/editors/imaddresseditor.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kaddressbook/editors/imaddresseditor.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,5 +1,4 @@
 [Desktop Entry]
-Encoding=UTF-8
 Type=Service
 Name=Instant Messaging
 Name[af]=Kits bootskap
@@ -22,6 +21,7 @@
 Name[is]=Skilaboðaforrit
 Name[it]=Messaggistica istantanea
 Name[ja]=インスタントメッセージ
+Name[ka]=მყისიერი შეტყობინებები
 Name[kk]=Лезде хабарласу
 Name[km]=ផ្ញើ​សារ​បន្ទាន់
 Name[ko]=인스턴트 페시징
@@ -45,7 +45,8 @@
 Name[tg]=Хизматгоҳи мубодилаи иттилоот
 Name[tr]=Hızlı Mesajlaşma
 Name[uk]=Миттєвий зв'язок
-Name[uz]=Хабар алмашиш
+Name[uz]=Xabar almashish
+Name[uz@cyrillic]=Хабар алмашиш
 Name[zh_CN]=即时通讯
 Name[zh_TW]=即時通訊
 Comment=Instant Messaging Address Editor
@@ -71,6 +72,7 @@
 Comment[is]=Vistfangaritill fyrir skilaboðaforrit
 Comment[it]=Editor degli indirizzi per messaggi istantanei
 Comment[ja]=インスタントメッセージのアドレスを編集
+Comment[ka]=მყისიერი შეტყობინებების წიგნაკის რედაქტორი
 Comment[kk]=Лезде хабарласу адрестер өңдегіші
 Comment[km]=កម្មវិធី​និពន្ធ​អាសយដ្ឋាន​ដើម្បី​ផ្ញើ​សារ​បន្ទាន់
 Comment[ko]=인스턴트 메시징 주소 편집기
Index: kaddressbook/editors/kaddressbookimprotocol.desktop
===================================================================
--- kaddressbook/editors/kaddressbookimprotocol.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kaddressbook/editors/kaddressbookimprotocol.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -25,6 +25,7 @@
 Name[is]=KAddressbook skilaboðaforritið
 Name[it]=KAddressbook protocollo messaggistica istantanea
 Name[ja]=KAddressbook インスタントメッセージプロトコル
+Name[ka]=KDE ოქმი მყისიერი შეტყობინებებისათვისწიგნაკითვის
 Name[kk]=KAddressbook лезде хабарласу протоколы
 Name[km]=ពិធីការ​ផ្ញើសារ​បន្ទាន់​របស់ KAddressbook
 Name[ko]=KAddressbook 인스턴트 메시징 프로토콜
Index: kaddressbook/kabcore.cpp
===================================================================
--- kaddressbook/kabcore.cpp	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kaddressbook/kabcore.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -65,6 +65,7 @@
 #include <libkdepim/addresseeview.h>
 #include <libkdepim/categoryeditdialog.h>
 #include <libkdepim/categoryselectdialog.h>
+#include <libkdepim/resourceabc.h>
 #include "distributionlisteditor.h"
 
 #include "addresseeutil.h"
@@ -224,6 +225,9 @@
   }
   mDetailsSplitter->setSizes( splitterSize );
 
+  const QValueList<int> leftSplitterSizes = KABPrefs::instance()->leftSplitter();
+  if ( !leftSplitterSizes.isEmpty() )    
+      mLeftSplitter->setSizes( leftSplitterSizes );
 }
 
 void KABCore::saveSettings()
@@ -231,7 +235,8 @@
   KABPrefs::instance()->setJumpButtonBarVisible( mActionJumpBar->isChecked() );
   KABPrefs::instance()->setDetailsPageVisible( mActionDetails->isChecked() );
   KABPrefs::instance()->setDetailsSplitter( mDetailsSplitter->sizes() );
-
+  KABPrefs::instance()->setLeftSplitter( mLeftSplitter->sizes() );
+  
   mExtensionManager->saveSettings();
   mViewManager->saveSettings();
 
@@ -273,14 +278,13 @@
   while ( ( resource = resIt.current() ) != 0 ) {
     ++resIt;
     if ( !resource->readOnly() ) {
-      KRES::Resource *res = static_cast<KRES::Resource*>( resource );
-      if ( res )
-        kresResources.append( res );
+      KRES::Resource *res = resource; // downcast
+      kresResources.append( res );
     }
   }
 
   KRES::Resource *res = KRES::SelectDialog::getResource( kresResources, parent );
-  return static_cast<KABC::Resource*>( res );
+  return static_cast<KABC::Resource*>( res ); // upcast
 }
 
 QWidget *KABCore::widget() const
@@ -291,7 +295,7 @@
 KAboutData *KABCore::createAboutData()
 {
   KAboutData *about = new KAboutData( "kaddressbook", I18N_NOOP( "KAddressBook" ),
-                                      "3.5.9", I18N_NOOP( "The KDE Address Book" ),
+                                      "3.5.10", I18N_NOOP( "The KDE Address Book" ),
                                       KAboutData::License_GPL_V2,
                                       I18N_NOOP( "(c) 1997-2005, The KDE PIM Team" ) );
   about->addAuthor( "Tobias Koenig", I18N_NOOP( "Current maintainer" ), "tokoe@kde.org" );
@@ -333,32 +337,84 @@
 #endif
   mExtensionManager->setSelectionChanged();
 
+  KABC::Addressee::List list = mViewManager->selectedAddressees();
+  const bool someSelected = list.size() > 0;
+  const bool singleSelected = list.size() == 1;
+  bool writable = mReadWrite;
+
+  if ( writable ) {
+    //check if every single (sub)resource is writable
+    //### We have a performance problem here - everytime *one* item is added or
+    //    removed we re-check *all* items. If this turns out to be a bottleneck
+    //    we need to keep some state and check new items only.
+    KABC::Addressee::List::ConstIterator addrIt = list.constBegin();
+    for ( ; addrIt != list.constEnd(); ++addrIt ) {
+      KABC::Resource *res = ( *addrIt ).resource();
+      if ( !res ) {
+        kdDebug() << "KABCore::setContactSelected: this addressee has no resource!" << endl;
+        writable = false;
+        break;
+      }
+      if ( res->readOnly() ) {
+        writable = false;
+        break;
+      }
+      //HACK: manual polymorphism
+      if ( res->inherits( "KPIM::ResourceABC" ) ) {
+        KPIM::ResourceABC *resAbc = static_cast<KPIM::ResourceABC *>( res );
+
+        QString subresource = resAbc->uidToResourceMap()[ ( *addrIt ).uid() ];
+        if ( !subresource.isEmpty() && !resAbc->subresourceWritable( subresource ) ) {
+          writable = false;
+          break;
+        }
+      }
+    }
+  }
+
+  bool moreThanOneResource = mAddressBook->resources().count() > 1;
+  if ( !moreThanOneResource && !mAddressBook->resources().isEmpty() ) {
+      KABC::Resource *res = mAddressBook->resources().first();
+      if ( res->inherits( "KPIM::ResourceABC" ) ) {
+        KPIM::ResourceABC *resAbc = static_cast<KPIM::ResourceABC *>( res );
+        const QStringList subresources = resAbc->subresources();
+        int writeables = 0;
+        for ( QStringList::ConstIterator it = subresources.begin(); it != subresources.end(); ++it ) {
+            if ( resAbc->subresourceActive(*it) && resAbc->subresourceWritable(*it) ) {
+                writeables++;
+            }
+        }
+        moreThanOneResource = ( writeables >= 2 );
+      }
+  }
+
   // update the actions
-  bool selected = !uid.isEmpty();
 
+  mActionCopy->setEnabled( someSelected );
+  mActionCut->setEnabled( someSelected && writable );
+  mActionDelete->setEnabled( someSelected && writable );
+  // the "edit" dialog doubles as the details dialog and it knows when the addressee is read-only
+  // (### this does not make much sense from the user perspective!)
+  mActionEditAddressee->setEnabled( singleSelected );
+  mActionCopyAddresseeTo->setEnabled( someSelected && moreThanOneResource );
+  mActionMoveAddresseeTo->setEnabled( someSelected && moreThanOneResource && writable );
+  mActionMail->setEnabled( someSelected );
+  mActionMailVCard->setEnabled( someSelected );
+  mActionChat->setEnabled( singleSelected && mKIMProxy && mKIMProxy->initialize() );
+  mActionWhoAmI->setEnabled( singleSelected );
+  mActionCategories->setEnabled( someSelected && writable );
+  mActionMerge->setEnabled( ( list.size() == 2 ) && writable );
+
   if ( mReadWrite ) {
-    mActionCut->setEnabled( selected );
-
     QClipboard *cb = QApplication::clipboard();
-    KABC::Addressee::List list = AddresseeUtil::clipboardToAddressees( cb->text() );
+    list = AddresseeUtil::clipboardToAddressees( cb->text() );
     mActionPaste->setEnabled( !list.isEmpty() );
   }
-
-  mActionCopy->setEnabled( selected );
-  mActionDelete->setEnabled( selected );
-  mActionEditAddressee->setEnabled( selected );
-  mActionCopyAddresseeTo->setEnabled( selected );
-  mActionMoveAddresseeTo->setEnabled( selected );
-  mActionMail->setEnabled( selected );
-  mActionMailVCard->setEnabled( selected );
-  mActionChat->setEnabled( selected && mKIMProxy && mKIMProxy->initialize() );
-  mActionWhoAmI->setEnabled( selected );
-  mActionCategories->setEnabled( selected );
-  mActionMerge->setEnabled( selected );
 }
 
 void KABCore::sendMail()
 {
+  //FIXME: breaks with email addresses containing ","
   sendMail( mViewManager->selectedEmails().join( ", " ) );
 }
 
@@ -529,6 +585,7 @@
   KABC::Addressee::List addrList = mViewManager->selectedAddressees();
 
   if ( addrList.count() > 1 ) {
+    // can probably be removed because we now check the selection in setContactSelected().
     KMessageBox::sorry( mWidget, i18n( "Please select only one contact." ) );
     return;
   }
@@ -776,7 +833,8 @@
       newAddr.setUid( KApplication::randomString( 10 ) );
       newAddr.setResource( resource );
       addressBook()->insertAddressee( newAddr );
-      if ( !copy ) {
+      const bool inserted = addressBook()->find( newAddr ) != addressBook()->end();
+      if ( !copy && inserted ) {
           KABLock::self( mAddressBook )->lock( addr.resource() );
           addressBook()->removeAddressee( addr );
           KABLock::self( mAddressBook )->unlock( addr.resource() );
@@ -1094,18 +1152,23 @@
            SLOT( incrementalTextSearch( const QString& ) ) );
 
   mDetailsSplitter = new QSplitter( mWidget );
+
+  mLeftSplitter = new QSplitter( mDetailsSplitter );
+  mLeftSplitter->setOrientation( KABPrefs::instance()->contactListAboveExtensions() ? Qt::Vertical : Qt::Horizontal );
+
   topLayout->addWidget( searchTB );
   topLayout->addWidget( mDetailsSplitter );
-
+  
   mDetailsStack = new QWidgetStack( mDetailsSplitter );
-  mExtensionManager = new ExtensionManager( new QWidget( mDetailsSplitter ), mDetailsStack, this, this );
+  mExtensionManager = new ExtensionManager( new QWidget( mLeftSplitter ), mDetailsStack, this, this );
   connect( mExtensionManager, SIGNAL( detailsWidgetDeactivated( QWidget* ) ), 
            this, SLOT( deactivateDetailsWidget( QWidget* ) ) );
   connect( mExtensionManager, SIGNAL( detailsWidgetActivated( QWidget* ) ), 
            this, SLOT( activateDetailsWidget( QWidget* ) ) );
-
   
-  QWidget *viewWidget = new QWidget( mDetailsSplitter );
+  QWidget *viewWidget = new QWidget( mLeftSplitter );
+  if ( KABPrefs::instance()->contactListAboveExtensions() )
+    mLeftSplitter->moveToFirst( viewWidget );
   QVBoxLayout *viewLayout = new QVBoxLayout( viewWidget );
   viewLayout->setSpacing( KDialog::spacingHint() );
 
@@ -1544,7 +1607,7 @@
     return;
   QGuardedPtr<KPIM::DistributionListEditor::EditorWidget> dlg = new KPIM::DistributionListEditor::EditorWidget( addressBook(), widget() );
   dlg->setDistributionList( dist );
-  if ( dlg->exec() == QDialog::Accepted ) {
+  if ( dlg->exec() == QDialog::Accepted && dlg ) {
     const KPIM::DistributionList newDist = dlg->distributionList();
     if ( newDist != dist ) {
       addressBook()->insertAddressee( newDist );
Index: kaddressbook/distributionlisteditor.cpp
===================================================================
--- kaddressbook/distributionlisteditor.cpp	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kaddressbook/distributionlisteditor.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -56,7 +56,7 @@
     QVBoxLayout* addresseeLayout;
     QValueList<KPIM::DistributionListEditor::Line*> addressees;
     KPIM::DistributionList distributionList;
-    void addLineForEntry( const KPIM::DistributionList::Entry& entry );
+    KPIM::DistributionListEditor::Line* addLineForEntry( const KPIM::DistributionList::Entry& entry );
     int lastLineId;
 };
 
@@ -70,21 +70,26 @@
     connect( m_lineEdit, SIGNAL( textChanged( const QString& ) ),
              this, SLOT( textChanged( const QString& ) ) );
     layout->addWidget( m_lineEdit );
-    QToolButton *button = new QToolButton( this );
-    button->setIconSet( KApplication::reverseLayout() ? SmallIconSet("locationbar_erase") : SmallIconSet( "clear_left" ) );
- 
-
-    layout->addWidget( button );
-    connect( button, SIGNAL( clicked() ), m_lineEdit, SLOT( clear() ) );
+    m_clearButton = new QToolButton( this );
+    m_clearButton->setIconSet( KApplication::reverseLayout() ? SmallIconSet("locationbar_erase") : SmallIconSet( "clear_left" ) );
+    m_clearButton->setEnabled( false );
+    layout->addWidget( m_clearButton );
+    connect( m_clearButton, SIGNAL( clicked() ), m_lineEdit, SLOT( clear() ) );
 }
 
 void KPIM::DistributionListEditor::Line::textChanged( const QString& text )
 {
+    m_clearButton->setEnabled( !text.isEmpty() );
     if ( text.isEmpty() )
         emit cleared();
     emit textChanged();
 }
 
+void KPIM::DistributionListEditor::Line::setFocusToLineEdit()
+{
+    m_lineEdit->setFocus();
+}
+
 void KPIM::DistributionListEditor::Line::setEntry( const KPIM::DistributionList::Entry& entry )
 {
     m_uid = entry.addressee.uid();
@@ -155,13 +160,12 @@
              this, SLOT( lineTextChanged( int ) ) ); 
     setCaption( i18n( "Edit Distribution List" ) );
     QWidget* main = new QWidget( this );
-    QGridLayout* mainLayout = new QGridLayout( main );
+    QVBoxLayout* mainLayout = new QVBoxLayout( main );
     mainLayout->setMargin( KDialog::marginHint() );
     mainLayout->setSpacing( KDialog::spacingHint() );
 
     QHBoxLayout* nameLayout = new QHBoxLayout;
     nameLayout->setSpacing( KDialog::spacingHint() );
-
     d->nameLabel = new QLabel( main );
     d->nameLabel->setText( i18n( "Name:" ) );
     nameLayout->addWidget( d->nameLabel );
@@ -169,15 +173,16 @@
     d->nameLineEdit = new KLineEdit( main );
     nameLayout->addWidget( d->nameLineEdit );
 
-    mainLayout->addLayout( nameLayout, 0, 0 );
+    mainLayout->addLayout( nameLayout );
+    mainLayout->addSpacing( 30 );
 
     d->memberListLabel = new QLabel( main );
     d->memberListLabel->setText( i18n( "Distribution list members:" ) );
-    mainLayout->addWidget( d->memberListLabel, 1, 0 );
+    mainLayout->addWidget( d->memberListLabel );
 
     d->scrollView = new QScrollView( main );
     d->scrollView->setFrameShape( QFrame::NoFrame );
-    mainLayout->addWidget( d->scrollView, 2, 0 );
+    mainLayout->addWidget( d->scrollView );
     d->memberListWidget = new QWidget( d->scrollView->viewport() );
     d->memberListWidget->setSizePolicy( QSizePolicy::MinimumExpanding, QSizePolicy::MinimumExpanding );
     QVBoxLayout* memberLayout = new QVBoxLayout( d->memberListWidget );
@@ -190,7 +195,9 @@
     
     setMainWidget( main );
 
-    d->addLineForEntry( KPIM::DistributionList::Entry() );
+    KPIM::DistributionListEditor::Line* const last = d->addLineForEntry( KPIM::DistributionList::Entry() );
+    const QSize hint = sizeHint();
+    resize( hint.width() * 1.5, hint.height() );
 }
 
 KPIM::DistributionListEditor::EditorWidget::~EditorWidget()
@@ -226,10 +233,11 @@
     {
         d->addLineForEntry( *it );
     }
-    d->addLineForEntry( Entry() );
+    KPIM::DistributionListEditor::Line* const last = d->addLineForEntry( Entry() );
+    last->setFocusToLineEdit();
 }
 
-void KPIM::DistributionListEditor::EditorWidgetPrivate::addLineForEntry( const KPIM::DistributionList::Entry& entry )
+KPIM::DistributionListEditor::Line* KPIM::DistributionListEditor::EditorWidgetPrivate::addLineForEntry( const KPIM::DistributionList::Entry& entry )
 {  
     KPIM::DistributionListEditor::Line* line = new KPIM::DistributionListEditor::Line( addressBook, memberListWidget );
     line->setEntry( entry );
@@ -239,6 +247,7 @@
                       mapper, SLOT( map() ) );
     mapper->setMapping( line, ++lastLineId );
     line->setShown( true );
+    return line;
 }
 
 void KPIM::DistributionListEditor::EditorWidget::slotOk()
Index: kaddressbook/kaddressbook_view.desktop
===================================================================
--- kaddressbook/kaddressbook_view.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kaddressbook/kaddressbook_view.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,5 +1,4 @@
 [Desktop Entry]
-Encoding=UTF-8
 Type=ServiceType
 X-KDE-ServiceType=KAddressBook/View
 Comment=KAddressBook View Plugin
@@ -29,6 +28,7 @@
 Comment[is]=KAddressbook birtingar íforrit
 Comment[it]=Plugin visualizzazione di KAddressbook
 Comment[ja]=Addressbook ビュープラグイン
+Comment[ka]= KDE წიგნაკის ჩვენების მოდული
 Comment[kk]=Адрестік кітапшасын қарау модулі
 Comment[km]=កម្មវិធី​ជំនួយ​ទិដ្ឋភាព​របស់ KAddressBook
 Comment[lt]=KAddressBook peržiūros priedas
Index: kaddressbook/kcmconfigs/kabcustomfields.desktop
===================================================================
--- kaddressbook/kcmconfigs/kabcustomfields.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kaddressbook/kcmconfigs/kabcustomfields.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,5 +1,4 @@
 [Desktop Entry]
-Encoding=UTF-8
 Icon=dlgedit
 Type=Service
 ServiceTypes=KCModule
@@ -38,6 +37,7 @@
 Name[is]=Sérsniðnar síður
 Name[it]=Pagine personalizzate
 Name[ja]=カスタムページ
+Name[ka]=სამომხმარებლო გვერდები
 Name[kk]=Қосымша парақтар
 Name[km]=ទំព័រ​ផ្ទាល់​ខ្លួន
 Name[lt]=Pasirinkti puslapiai
@@ -89,6 +89,7 @@
 Comment[is]=Stilla sérsniðnu síðurnar
 Comment[it]=Configura le pagine personalizzate
 Comment[ja]=カスタムページの設定
+Comment[ka]=სამომხმარებლო გვერდების კონფიგურაცია
 Comment[kk]=Қосымша парақтарды баптау
 Comment[km]=កំណត់​រចនាសម្ព័ន្ធ​ទំព័រ​ផ្ទាល់​ខ្លួន
 Comment[lt]=Konfigūruoti darbastalių skaičių ir pavadinimus
@@ -136,6 +137,7 @@
 Keywords[is]=kaddressbook, stillingar, stilla, sérsniðnir reitir
 Keywords[it]=kaddressbook, configura, impostazioni, campi personalizzati
 Keywords[ja]=kaddressbook、設定、設定,カスタムフィールド
+Keywords[ka]=kaddressbook,კონფიგურაცია,პარამეტრები,სამომხმარებლო ველები
 Keywords[km]=kaddressbook,កំណត់​រចនាសម្ព័ន្ធ,ការ​កំណត់,វាល​ផ្ទាល់​ខ្លួន
 Keywords[lt]=kaddressbook, configure, settings, custom fields, pasirinkti laukai,konfigūruoti, nustatymai
 Keywords[mk]=kaddressbook, configure, settings, custom fields, КАдресар, конфигурација, конфигурирање, сопствени полиња
Index: kaddressbook/kcmconfigs/kabconfig.desktop
===================================================================
--- kaddressbook/kcmconfigs/kabconfig.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kaddressbook/kcmconfigs/kabconfig.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,5 +1,4 @@
 [Desktop Entry]
-Encoding=UTF-8
 Icon=kaddressbook
 Type=Service
 ServiceTypes=KCModule
@@ -37,6 +36,7 @@
 Name[is]=Almennt
 Name[it]=Generale
 Name[ja]=全般
+Name[ka]=ზოგადი
 Name[kk]=Жалпы
 Name[km]=ទូទៅ
 Name[lt]=Bendras
@@ -62,7 +62,8 @@
 Name[th]=ทั่วไป
 Name[tr]=Genel
 Name[uk]=Загальні
-Name[uz]=Умумий
+Name[uz]=Umumiy
+Name[uz@cyrillic]=Умумий
 Name[zh_CN]=常规
 Comment=Configure the Address Book
 Comment[af]=Stel die adres boek op
@@ -93,6 +94,7 @@
 Comment[is]=Stilla vistfangaskrána
 Comment[it]=Configura la rubrica indirizzi
 Comment[ja]=アドレス帳設定
+Comment[ka]=წიგნაკის კონფიგურაცია
 Comment[kk]=Адрестік кітапшаны баптау
 Comment[km]=កំណត់​រចនាសម្ព័ន្ធ​សៀវភៅ​អាសយដ្ឋាន
 Comment[lt]=Konfigūruoti adresų knygelę
@@ -118,7 +120,8 @@
 Comment[tg]=Танзимоти китоби адрес
 Comment[tr]=Adres Defterini Yapılandır
 Comment[uk]=Налаштування адресної книги
-Comment[uz]=Манзиллар дафтарини мослаш
+Comment[uz]=Manzillar daftarini moslash
+Comment[uz@cyrillic]=Манзиллар дафтарини мослаш
 Comment[zh_CN]=配置地址簿
 Comment[zh_TW]=設定通訊錄
 Keywords=kaddressbook, configure, settings
@@ -148,6 +151,7 @@
 Keywords[is]=kaddressbook, stillingar, stilla
 Keywords[it]=kaddressbook, configura, impostazioni
 Keywords[ja]=kaddressbook 設定
+Keywords[ka]=kaddressbook,კონფიგურაცია, პარამეტრები
 Keywords[km]=kaddressbook,កំណត់​រចនាសម្ព័ន្ធ,ការ​កំណត់
 Keywords[lt]=kaddressbook, configure, settings, konfigūravimas, nustatymai
 Keywords[mk]=kaddressbook, configure, settings, КАдресар, конфигурирање, конфигурација, поставување
@@ -171,5 +175,6 @@
 Keywords[tg]=kaddressbook,китоби адрес,танзимот
 Keywords[tr]=kadresdefteri, yapılandırma, ayarlar
 Keywords[uk]=kaddressbook, налаштування, параметри
-Keywords[uz]=kaddressbook, мослаш, мосламалар, манзиллар дафтари
+Keywords[uz]=kaddressbook, moslash, moslamalar, manzillar daftari
+Keywords[uz@cyrillic]=kaddressbook, мослаш, мосламалар, манзиллар дафтари
 Keywords[zh_CN]=kaddressbook, configure, settings, 配置, 设置
Index: kaddressbook/kcmconfigs/kabldapconfig.desktop
===================================================================
--- kaddressbook/kcmconfigs/kabldapconfig.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kaddressbook/kcmconfigs/kabldapconfig.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,5 +1,4 @@
 [Desktop Entry]
-Encoding=UTF-8
 Icon=find
 Type=Service
 ServiceTypes=KCModule
@@ -39,6 +38,7 @@
 Name[is]=LDAP uppfletting
 Name[it]=Ricerca LDAP
 Name[ja]=LDAP 検索
+Name[ka]= ძებნა LDAP-ში
 Name[kk]=LDAP іздеу
 Name[km]=ស្វែងរក LDAP
 Name[lt]=LDAP paieška
@@ -89,6 +89,7 @@
 Comment[is]=Breyta LDAP stillingum vistfangaskráarinnar
 Comment[it]=Configurare le impostazioni LDAP della rubrica indirizzi
 Comment[ja]=アドレス帳 LDAP 設定
+Comment[ka]=LDAP წიგნაკის პარამეტრების კონფიგურაცია
 Comment[kk]=Адрестік кітапшаның LDAP параметрлерін баптау
 Comment[km]=កំណត់​រចនាសម្ព័ន្ធ​ការ​កំណត់ LDAP របស់​សៀវភៅ​អាសយដ្ឋាន
 Comment[lt]=Konfigūruoti adresų knygelės LDAP nustatymus
@@ -112,7 +113,8 @@
 Comment[tg]=Танзимоти серверҳои LDAP-и китоби адрес
 Comment[tr]=Adres Defteri LDAP Ayarlarını Yapılandır
 Comment[uk]=Налаштування параметрів LDAP для адресної книги
-Comment[uz]=LDAP манзиллар дафтарини мослаш
+Comment[uz]=LDAP manzillar daftarini moslash
+Comment[uz@cyrillic]=LDAP манзиллар дафтарини мослаш
 Comment[zh_CN]=配置地址簿 LDAP 设置
 Comment[zh_TW]=設定通訊錄 LDAP 設定
 Keywords=kaddressbook, configure, settings, LDAP
@@ -140,6 +142,7 @@
 Keywords[is]=kaddressbook, stillingar, stilla, LDAP
 Keywords[it]=kaddressbook, configura, impostazioni, LDAP
 Keywords[ja]=kaddressbook LDAP 設定
+Keywords[ka]=kaddressbook,კონფიგურაცია,პარამეტრები, LDAP
 Keywords[km]=kaddressbook,កំណត់​រចនាសម្ព័ន្ធ,ការ​កំណត់,LDAP
 Keywords[lt]=kaddressbook, configure, settings, LDAP, nustatymai, konfigūruoti
 Keywords[mk]=kaddressbook, configure, settings, LDAP, кадресар, конфигурација, конфигурирање, поставувања
@@ -163,5 +166,6 @@
 Keywords[tg]=kaddressbook, configure, settings, LDAP, китоби адрес, танзимот
 Keywords[tr]=adres defteri,yapılandırma,ayarlar,LDAP
 Keywords[uk]=kaddressbook, налаштування, параметри, LDAP
-Keywords[uz]=kaddressbook, мослаш, мосламалар, манзиллар дафтари, LDAP
+Keywords[uz]=kaddressbook, moslash, moslamalar, manzillar daftari, LDAP
+Keywords[uz@cyrillic]=kaddressbook, мослаш, мосламалар, манзиллар дафтари, LDAP
 Keywords[zh_CN]=kaddressbook, configure, settings, LDAP, 配置, 设置
Index: kaddressbook/common/kaddressbook.kcfg
===================================================================
--- kaddressbook/common/kaddressbook.kcfg	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kaddressbook/common/kaddressbook.kcfg	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -50,17 +50,24 @@
     <entry type="Bool" name="DetailsPageVisible">
       <default>true</default>
     </entry>
-    <entry type="IntList" name="ExtensionsSplitter">
-    </entry>
     <entry type="IntList" name="DetailsSplitter">
     </entry>
+    <entry type="IntList" name="LeftSplitter">
+    </entry>
+    <entry type="Bool" name="ContactListAboveExtensions">
+      <default>true</default>
+       <whatsthis>If true, the contact list will be placed above the extensions on the left (distribution list editor etc.) instead of in the middle of the main window</whatsthis>
+
+    </entry>
   </group>
 
   <group name="ExtensionsGeneral">
     <entry type="String" name="CurrentExtension">
       <default>resourceselection</default>
     </entry>
-    <entry type="StringList" name="activeExtensions"/>
+    <entry type="StringList" name="activeExtensions">
+      <default>distribution_list_editor_ng,resourceselection</default>
+    </entry>
     <entry type="IntList" name="ExtensionsSplitterSizes"/>
   </group>
 
Index: kaddressbook/common/kabprefs.cpp
===================================================================
--- kaddressbook/common/kabprefs.cpp	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kaddressbook/common/kabprefs.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -36,9 +36,7 @@
   KConfigSkeleton::setCurrentGroup( "General" );
 
   QStringList defaultMap;
-  defaultMap << "http://world.maporama.com/idl/maporama/drawaddress.aspx?MD_scale=0.0002&MD_size=500x380&GC_country=%c&GC_address=%s&GC_zip=%z&GC_state=%r&GC_city=%l";
-  defaultMap << "http://link2.map24.com/?lid=9cc343ae&maptype=CGI&lang=%1&street0=%s&zip0=%z&city0=%l&country0=%c";
-  defaultMap << "http://www.mapquest.com/maps/map.adp?country=%c&address=%s&state=%r&zipcode=%z&city=%l";
+  defaultMap << "http://maps.google.com/maps?f=q&hl=%1&q=%n,%l,%s";
   addItemString( "LocationMapURL", mLocationMapURL, defaultMap[ 0 ] );
   addItemStringList( "LocationMapURLs", mLocationMapURLs, defaultMap );
 }
Index: kaddressbook/kabcore.h
===================================================================
--- kaddressbook/kabcore.h	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kaddressbook/kabcore.h	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -455,6 +455,7 @@
     QWidget *mDetailsWidget;
     QHBoxLayout *mDetailsLayout;
     QSplitter *mDetailsSplitter;
+    QSplitter *mLeftSplitter;
     QWidgetStack *mDetailsStack;
     LDAPSearchDialog *mLdapSearchDialog;
     QDict<AddresseeEditorDialog> mEditorDict;
Index: kaddressbook/thumbnailcreator/ldifvcardthumbnail.desktop
===================================================================
--- kaddressbook/thumbnailcreator/ldifvcardthumbnail.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kaddressbook/thumbnailcreator/ldifvcardthumbnail.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,5 +1,4 @@
 [Desktop Entry]
-Encoding=UTF-8
 Type=Service
 Name=Electronic Business Card Files
 Name[af]=Elektroniese Besigheid kaartjie lêers
@@ -26,6 +25,7 @@
 Name[is]=Skrár með rafrænum nafnspjöldum
 Name[it]=Biglietto da visita elettronico
 Name[ja]=電子ビジネスカードファイル
+Name[ka]=ელექტრონული სავიზიტო ბარათების ფაილები
 Name[kk]=Электрондық визитка файлдары
 Name[km]=ឯកសារ​នាមប័ណ្ណ​អេឡិចត្រូនិច
 Name[lt]=Elektroninės verslo kortelės bylos
Index: kaddressbook/features/distributionlist.desktop
===================================================================
--- kaddressbook/features/distributionlist.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kaddressbook/features/distributionlist.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,5 +1,4 @@
 [Desktop Entry]
-Encoding=UTF-8
 X-KDE-Library=libkaddrbk_distributionlist
 Name=KAB Distribution List Plugin
 Name[af]=KAB verspreiding lys inprop module
@@ -28,6 +27,7 @@
 Name[is]=Íforrit fyrir KAB dreifilista
 Name[it]=Plugin lista di distribuzione KAB
 Name[ja]=KAB 配布リストプラグイン
+Name[ka]=KAB დისტრიბუციის სიის მოდული
 Name[kk]=KAB тарату тізімінің плагин модулі
 Name[km]=កម្មវិធី​ជំនួយ​បញ្ជី​ចែកចាយ​របស់ KAB
 Name[lt]=KAB platinimo sąrašo priedas
@@ -51,7 +51,8 @@
 Name[tg]=Рӯйхати ба ҳар тараф мефиристодагӣ
 Name[tr]=KAB Dağıtım Listesi Eklentisi
 Name[uk]=Втулок списку розповсюдження KAB
-Name[uz]=Тарқатиш рўйхат плагини
+Name[uz]=Tarqatish roʻyxat plagini
+Name[uz@cyrillic]=Тарқатиш рўйхат плагини
 Name[zh_CN]=KAB 分发列表插件
 Comment=Plugin for managing distribution lists
 Comment[af]=Inprop module vir die bestuur van verspreiding lyste
@@ -81,6 +82,7 @@
 Comment[is]=Íforrit til að sjá um dreifilista
 Comment[it]=Plugin per gestire liste di distribuzione
 Comment[ja]=配布リスト管理用プラグイン
+Comment[ka]=სადისტრიბუციო სიათა მართვის მოდული
 Comment[kk]=Тарату тізімімен айналысу плагин модулі
 Comment[km]=កម្មវិធី​ជំនួយ​ដើម្បី​គ្រប់គ្រង​បញ្ជី​ចែកចាយ
 Comment[lt]=Priedas platinimo sąrašų tvarkymui
@@ -105,7 +107,8 @@
 Comment[tg]=Кор бо рӯйхати ба ҳар тараф мефиристодагӣ
 Comment[tr]=Dağıtım listelerini yönetmek için eklenti
 Comment[uk]=Втулок для керування списками розповсюдження
-Comment[uz]=Тарқатиш рўйхатларни бошқариш учу плагин
+Comment[uz]=Tarqatish roʻyxatlarni boshqarish uchu plagin
+Comment[uz@cyrillic]=Тарқатиш рўйхатларни бошқариш учу плагин
 Comment[zh_CN]=管理分发列表的插件
 Comment[zh_TW]=管理分配清單外掛程式
 Type=Service
Index: kaddressbook/features/resourceselection.desktop
===================================================================
--- kaddressbook/features/resourceselection.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kaddressbook/features/resourceselection.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,5 +1,4 @@
 [Desktop Entry]
-Encoding=UTF-8
 X-KDE-Library=libkaddrbk_resourceselection
 Name=Address Book Management Plugin
 Name[af]=Adres boek bestuur inprop module
@@ -27,6 +26,7 @@
 Name[is]=Umsjónaríforrit vistfangaflettis
 Name[it]=Plugin per gestire rubriche indirizzi
 Name[ja]=アドレス帳管理プラグイン
+Name[ka]=წიგნაკის მართვის მოდული
 Name[kk]=Адрестік кітапшамен айналысу плагин модулі
 Name[km]=កម្មវិធី​ជំនួយ​ការ​គ្រប់គ្រង​សៀវភៅ​អាសយដ្ឋាន
 Name[lt]=Adresų knygelės tvarkymo priedas
@@ -78,6 +78,7 @@
 Comment[is]=Íforrit til að sjá um vistfangaskrár
 Comment[it]=Plugin per gestire rubriche indirizzi
 Comment[ja]=アドレス帳管理用プラグイン
+Comment[ka]=წიგნაკის მართვის მოდული
 Comment[kk]=Адрестік кітапшамен айналысу плагин модулі
 Comment[km]=កម្មវិធី​ជំនួយ​ដើម្បី​គ្រប់គ្រង​សៀវភៅ​អាសយដ្ឋាន
 Comment[lt]=Priedas adresų knygelių tvarkymui
Index: kaddressbook/features/distributionlistng.desktop
===================================================================
--- kaddressbook/features/distributionlistng.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kaddressbook/features/distributionlistng.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,5 +1,4 @@
 [Desktop Entry]
-Encoding=UTF-8
 X-KDE-Library=libkaddrbk_distributionlistng
 Name=KAB Distribution List Next Generation Plugin
 Name[bg]=Приставка от следващо поколение за списъка за разпращане на KAB
@@ -7,15 +6,22 @@
 Name[da]=Næste generations-plugin til KAB-Distribution-liste
 Name[de]=Verteilerlisten-Modul für neues Adressbuch
 Name[el]=Πρόσθετο επόμενης γενιάς λίστας διανομής του KAB
+Name[es]=Complemento de nueva generación KAB para listas de distribución
 Name[et]=KAB postiloendi järgmise põlvkonna plugin
+Name[fr]=Module de liste de diffusion nouvelle génération pour KAB
+Name[is]=Næstu kynslóðar íforrit fyrir KAB dreifilista
 Name[it]=Plugin lista di distribuzione KAB di nuova generazione
 Name[ja]=KAB 配布リスト次世代プラグイン
+Name[km]=កម្មវិធី​ជំនួយ​ជំនាន់​ក្រោយ​របស់​​បញ្ជី​ចែកចាយ​ KAB
 Name[nds]=Verbetert Verdeellist-Moduul för KAdressbook
 Name[nl]=Plugin voor KAB Distributielijst (Nieuwe Generatie)
+Name[pl]=Wtyczka KAB do obsługi list wysyłkowych
+Name[ru]=Списки рассылки (новая версия)
 Name[sk]=KAB plugin distribučného zoznamu ďaľšej generácie
 Name[sr]=Прикључак KAB-а наредне генерације за дистрибуционе листе
 Name[sr@Latn]=Priključak KAB-a naredne generacije za distribucione liste
 Name[sv]=Adressbokens nästa generation insticksprogram för distributionslistor
+Name[tr]=KAB Dağıtım Listesi Sonraki Kuşak Eklentisi
 Name[zh_CN]=KAB 分发列表生成插件
 Name[zh_TW]=KAB 分派清單下一代外掛程式
 Comment=Plugin for managing distribution lists
@@ -46,6 +52,7 @@
 Comment[is]=Íforrit til að sjá um dreifilista
 Comment[it]=Plugin per gestire liste di distribuzione
 Comment[ja]=配布リスト管理用プラグイン
+Comment[ka]=სადისტრიბუციო სიათა მართვის მოდული
 Comment[kk]=Тарату тізімімен айналысу плагин модулі
 Comment[km]=កម្មវិធី​ជំនួយ​ដើម្បី​គ្រប់គ្រង​បញ្ជី​ចែកចាយ
 Comment[lt]=Priedas platinimo sąrašų tvarkymui
@@ -70,7 +77,8 @@
 Comment[tg]=Кор бо рӯйхати ба ҳар тараф мефиристодагӣ
 Comment[tr]=Dağıtım listelerini yönetmek için eklenti
 Comment[uk]=Втулок для керування списками розповсюдження
-Comment[uz]=Тарқатиш рўйхатларни бошқариш учу плагин
+Comment[uz]=Tarqatish roʻyxatlarni boshqarish uchu plagin
+Comment[uz@cyrillic]=Тарқатиш рўйхатларни бошқариш учу плагин
 Comment[zh_CN]=管理分发列表的插件
 Comment[zh_TW]=管理分配清單外掛程式
 Type=Service
Index: kaddressbook/features/Makefile.am
===================================================================
--- kaddressbook/features/Makefile.am	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kaddressbook/features/Makefile.am	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -4,6 +4,8 @@
 if compile_newdistrlists
 TARGET_DISTRIBUTIONLISTNG=libkaddrbk_distributionlistng.la
 DISTRIBUTIONLISTNG_DESKTOPFILE=distributionlistng.desktop
+else
+DISTRIBUTIONLIST_DESKTOPFILE=distributionlist.desktop
 endif
 
 kde_module_LTLIBRARIES = $(TARGET_DISTRIBUTIONLISTNG) libkaddrbk_distributionlist.la libkaddrbk_resourceselection.la
@@ -11,14 +13,15 @@
 XXLIBS = $(top_builddir)/kaddressbook/interfaces/libkabinterfaces.la \
          $(top_builddir)/libkdepim/libkdepim.la
 
-libkaddrbk_distributionlist_la_SOURCES = distributionlistwidget.cpp
-libkaddrbk_distributionlist_la_LDFLAGS = -module $(KDE_PLUGIN) $(KDE_RPATH) $(all_libraries) -no-undefined
-libkaddrbk_distributionlist_la_LIBADD = $(XXLIBS)
 
 if compile_newdistrlists
 libkaddrbk_distributionlistng_la_SOURCES = distributionlistngwidget.cpp
 libkaddrbk_distributionlistng_la_LDFLAGS = -module $(KDE_PLUGIN) $(KDE_RPATH) $(all_libraries) -no-undefined
 libkaddrbk_distributionlistng_la_LIBADD = $(XXLIBS)
+else
+libkaddrbk_distributionlist_la_SOURCES = distributionlistwidget.cpp
+libkaddrbk_distributionlist_la_LDFLAGS = -module $(KDE_PLUGIN) $(KDE_RPATH) $(all_libraries) -no-undefined
+libkaddrbk_distributionlist_la_LIBADD = $(XXLIBS)
 endif
 
 libkaddrbk_resourceselection_la_SOURCES = resourceselection.cpp
@@ -30,4 +33,4 @@
 METASOURCES = AUTO
 
 servicedir  = $(kde_servicesdir)/kaddressbook
-service_DATA = $(DISTRIBUTIONLISTNG_DESKTOPFILE) distributionlist.desktop resourceselection.desktop
+service_DATA = $(DISTRIBUTIONLISTNG_DESKTOPFILE) $(DISTRIBUTIONLIST_DESKTOPFILE)  resourceselection.desktop
Index: kaddressbook/features/resourceselection.cpp
===================================================================
--- kaddressbook/features/resourceselection.cpp	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kaddressbook/features/resourceselection.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -353,10 +353,8 @@
                                                 const QString& /*type*/,
                                                 const QString& subResource )
 {
-  kdDebug(5720) << k_funcinfo << resource->resourceName() << " " << subResource << endl;
-  // TODO
-  //delete findItemByIdentifier( resource );
-  //emitResourcesChanged();
+  core()->addressBook()->emitAddressBookChanged();
+  updateView();
 }
 
 ResourceItem* ResourceSelection::selectedItem() const
Index: Makefile.am.in
===================================================================
--- Makefile.am.in	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ Makefile.am.in	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -8,6 +8,7 @@
 # don't change these in Makefile.am, but rather in Makefile.am.in!
 #
 # Libraries and their upwards dependencies
+COMPILE_AFTER_libkmime = libemailfunctions
 COMPILE_AFTER_libemailfunctions = libkcal libkpimidentities kmail korganizer
 COMPILE_AFTER_libkholidays = korganizer kontact
 COMPILE_AFTER_libkcal = kalarm kitchensync konsolekalendar korganizer libkpimexchange kpilot libkdepim karm knotes kresources kfile-plugins
@@ -37,6 +38,7 @@
 COMPILE_BEFORE_akregator = libkdepim
 COMPILE_BEFORE_knotes = libkdepim
 COMPILE_BEFORE_konsolekalendar = libkdepim
+COMPILE_BEFORE_kabc = libkdepim
 
 AUTOMAKE_OPTIONS = foreign 1.6.1
 DISTCLEANFILES = inst-apps
Index: libkholidays/holidays/holiday_ja
===================================================================
--- libkholidays/holidays/holiday_ja	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkholidays/holidays/holiday_ja	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,80 +0,0 @@
-:
-: Japanese holiday file. Copy to ~/.holiday
-: Author: Toyohiro Asukai <toyohiro@ksmplus.com>
-: Last modified on Nov 16 2004
-:
-: National Holidays. (English Messages)
-:small "New Year's Day" weekend on 1/1
-:small "Coming of Age" weekend on second monday in january
-:small "National Foundation Day" weekend on 2/11
-:small "Vernal Equinox Day" weekend on 3/20/2005
-:small "Vernal Equinox Day" weekend on 3/21/2006
-:small "Vernal Equinox Day" weekend on 3/21/2007
-:small "Vernal Equinox Day" weekend on 3/20/2008
-:small "Vernal Equinox Day" weekend on 3/20/2009
-:small "Vernal Equinox Day" weekend on 3/21/2010
-:small "Greenery Day" weekend on 4/29
-:small "Constitution Day" weekend on 5/3
-:small "Holiday" weekend on 5/4
-:small "Children's Day" weekend on 5/5
-:small "Oceans' Day" weekend on third monday in july
-:small "Respect for Senior Citizens Day" weekend on third monday in september
-:small "Autumnal Equinox Day" weekend on 9/23
-:small "Sports Day" weekend on second monday in october
-:small "Culture Day" weekend on 11/3
-:small "Labor Thanksgiving Day" weekend on 11/23
-:small "The Emperor's Birthday" weekend on 12/23
-
-: National Holidays. (Japanese and English messages)
-small "元旦(New Year's Day)" weekend on 1/1
-small "成人の日(Coming of Age)" weekend on second monday in january
-small "建国記念日(National Foundation Day)" weekend on 2/11
-small "春分の日(Vernal Equinox Day)" weekend on 3/20/2005
-small "春分の日(Vernal Equinox Day)" weekend on 3/21/2006
-small "春分の日(Vernal Equinox Day)" weekend on 3/21/2007
-small "春分の日(Vernal Equinox Day)" weekend on 3/20/2008
-small "春分の日(Vernal Equinox Day)" weekend on 3/20/2009
-small "春分の日(Vernal Equinox Day)" weekend on 3/21/2010
-small "みどりの日(Greenery Day)" weekend on 4/29
-small "憲法記念日(Constitution Day)" weekend on 5/3
-small "休日(Holiday)" weekend on 5/4
-small "こどもの日(Children's Day)" weekend on 5/5
-small "海の日(Oceans' Day)" weekend on third monday in july
-small "敬老の日(Respect for Senior Citizens Day)" weekend on third monday in september
-small "秋分の日(Autumnal Equinox Day)" weekend on 9/23
-small "体育の日(Sports Day)" weekend on second monday in october
-small "文化の日(Culture Day)" weekend on 11/3
-small "勤労感謝の日(Labor Thanksgiving Day)" weekend on 11/23
-small "天皇誕生日(The Emperor's Birthday)" weekend on 12/23
-
-: If a "National Holiday" is on Sunday,the following day
-: shall be a substitute holiday.
-:small "Substitute holiday" weekend on 3/21/2005
-:small "Substitute holiday" weekend on 1/2/2006
-:small "Substitute holiday" weekend on 2/12/2007
-:small "Substitute holiday" weekend on 4/30/2007
-:small "Substitute holiday" weekend on 9/24/2007
-:small "Substitute holiday" weekend on 12/24/2007
-:small "Substitute holiday" weekend on 11/24/2008
-:small "Substitute holiday" weekend on 3/22/2010
-
-small "振替休日(Substitute holiday)" weekend on 3/21/2005
-small "振替休日(Substitute holiday)" weekend on 1/2/2006
-small "振替休日(Substitute holiday)" weekend on 2/12/2007
-small "振替休日(Substitute holiday)" weekend on 4/30/2007
-small "振替休日(Substitute holiday)" weekend on 9/24/2007
-small "振替休日(Substitute holiday)" weekend on 12/24/2007
-small "振替休日(Substitute holiday)" weekend on 11/24/2008
-small "振替休日(Substitute holiday)" weekend on 3/22/2010
-
-
-: Japanese Events , not National Holidays.
-:small "St. Valentine's Day" on february 14
-:small "Girls' Festival" on march 3
-:small "Buddha's Birthday" on april 8
-:small "May Day" on may 1
-:small "Boys' Festival" on may 5
-:small "Mother's Day" on second sunday in may
-:small "Father's Day" on third sunday in june
-:small "Festival of the Weaver Star" on july 7
-:small "Christmas" on december 25
Index: libkholidays/holidays/holiday_jp
===================================================================
--- libkholidays/holidays/holiday_jp	(.../tags/KDE/3.5.9/kdepim)	(wersja 0)
+++ libkholidays/holidays/holiday_jp	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -0,0 +1,80 @@
+:
+: Japanese holiday file. Copy to ~/.holiday
+: Author: Toyohiro Asukai <toyohiro@ksmplus.com>
+: Last modified on Nov 16 2004
+:
+: National Holidays. (English Messages)
+:small "New Year's Day" weekend on 1/1
+:small "Coming of Age" weekend on second monday in january
+:small "National Foundation Day" weekend on 2/11
+:small "Vernal Equinox Day" weekend on 3/20/2005
+:small "Vernal Equinox Day" weekend on 3/21/2006
+:small "Vernal Equinox Day" weekend on 3/21/2007
+:small "Vernal Equinox Day" weekend on 3/20/2008
+:small "Vernal Equinox Day" weekend on 3/20/2009
+:small "Vernal Equinox Day" weekend on 3/21/2010
+:small "Greenery Day" weekend on 4/29
+:small "Constitution Day" weekend on 5/3
+:small "Holiday" weekend on 5/4
+:small "Children's Day" weekend on 5/5
+:small "Oceans' Day" weekend on third monday in july
+:small "Respect for Senior Citizens Day" weekend on third monday in september
+:small "Autumnal Equinox Day" weekend on 9/23
+:small "Sports Day" weekend on second monday in october
+:small "Culture Day" weekend on 11/3
+:small "Labor Thanksgiving Day" weekend on 11/23
+:small "The Emperor's Birthday" weekend on 12/23
+
+: National Holidays. (Japanese and English messages)
+small "元旦(New Year's Day)" weekend on 1/1
+small "成人の日(Coming of Age)" weekend on second monday in january
+small "建国記念日(National Foundation Day)" weekend on 2/11
+small "春分の日(Vernal Equinox Day)" weekend on 3/20/2005
+small "春分の日(Vernal Equinox Day)" weekend on 3/21/2006
+small "春分の日(Vernal Equinox Day)" weekend on 3/21/2007
+small "春分の日(Vernal Equinox Day)" weekend on 3/20/2008
+small "春分の日(Vernal Equinox Day)" weekend on 3/20/2009
+small "春分の日(Vernal Equinox Day)" weekend on 3/21/2010
+small "みどりの日(Greenery Day)" weekend on 4/29
+small "憲法記念日(Constitution Day)" weekend on 5/3
+small "休日(Holiday)" weekend on 5/4
+small "こどもの日(Children's Day)" weekend on 5/5
+small "海の日(Oceans' Day)" weekend on third monday in july
+small "敬老の日(Respect for Senior Citizens Day)" weekend on third monday in september
+small "秋分の日(Autumnal Equinox Day)" weekend on 9/23
+small "体育の日(Sports Day)" weekend on second monday in october
+small "文化の日(Culture Day)" weekend on 11/3
+small "勤労感謝の日(Labor Thanksgiving Day)" weekend on 11/23
+small "天皇誕生日(The Emperor's Birthday)" weekend on 12/23
+
+: If a "National Holiday" is on Sunday,the following day
+: shall be a substitute holiday.
+:small "Substitute holiday" weekend on 3/21/2005
+:small "Substitute holiday" weekend on 1/2/2006
+:small "Substitute holiday" weekend on 2/12/2007
+:small "Substitute holiday" weekend on 4/30/2007
+:small "Substitute holiday" weekend on 9/24/2007
+:small "Substitute holiday" weekend on 12/24/2007
+:small "Substitute holiday" weekend on 11/24/2008
+:small "Substitute holiday" weekend on 3/22/2010
+
+small "振替休日(Substitute holiday)" weekend on 3/21/2005
+small "振替休日(Substitute holiday)" weekend on 1/2/2006
+small "振替休日(Substitute holiday)" weekend on 2/12/2007
+small "振替休日(Substitute holiday)" weekend on 4/30/2007
+small "振替休日(Substitute holiday)" weekend on 9/24/2007
+small "振替休日(Substitute holiday)" weekend on 12/24/2007
+small "振替休日(Substitute holiday)" weekend on 11/24/2008
+small "振替休日(Substitute holiday)" weekend on 3/22/2010
+
+
+: Japanese Events , not National Holidays.
+:small "St. Valentine's Day" on february 14
+:small "Girls' Festival" on march 3
+:small "Buddha's Birthday" on april 8
+:small "May Day" on may 1
+:small "Boys' Festival" on may 5
+:small "Mother's Day" on second sunday in may
+:small "Father's Day" on third sunday in june
+:small "Festival of the Weaver Star" on july 7
+:small "Christmas" on december 25

Zmiany atrybutów dla: libkholidays/holidays/holiday_jp
___________________________________________________________________
Dodane: svn:keywords
   + Author Date Id Revision
Dodane: svn:mergeinfo

Index: libkholidays/holidays/holiday_BelgiumFrench
===================================================================
--- libkholidays/holidays/holiday_BelgiumFrench	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkholidays/holidays/holiday_BelgiumFrench	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,32 +1,34 @@
 :
-: Belgian holiday file. Copy to ~/.holiday
+: Belgian (in french) holiday file. Copy to ~/.holiday
 :
-: Author: Guido van Rossum, CWI, Amsterdam <Guido.van.Rossum cwi nl>
-: Adapted from Dutch holiday by Danny Backx <u27113 kb be>
-: Adapted to french by JM Remacle  <jmremacle tiscali be> and David Mathy <david.mathy@gmail.com>
+: Author: Guido van Rossum, CWI, Amsterdam <Guido.van.Rossum@cwi.nl>
+: Adapted from Dutch holiday by Danny Backx <u27113@kb.be> and Jean Cayron <jean.cayron@gmail.com>
 :
-: Is Jan 1 "Jour de l'An" or "Nouvel-An"???
-small	"Nouvel-An"		weekend on 1.1.
-small	"Les trois rois"	weekend on 3.1
-small	"Chandeleur"		weekend on 2.2
-small	"Mardi Gras"		weekend on easter minus 47 days
-small	"Mercredi des cendres"	weekend on easter minus 46 days
-small	"Les rameaux"		on easter minus 7 days
-small	"Jeudi saint"		weekend on easter minus 3 days
-small	"Vendredi Saint"        weekend on easter minus 2 days
-small	"Pâques"		weekend on easter
+small	"Jour de l'an"		weekend on 1.1.
+small	"Épiphanie"		on 6.1
+small	"Chandeleur"		on 2.2
+small	"Mardi-gras"		on easter minus 47 days
+small	"Mercredi des cendres"	on easter minus 46 days
+small	"Dimanche des rameaux"	on easter minus 7 days
+small	"Jeudi saint"		on easter minus 3 days
+small	"Vendredi saint"		on easter minus 2 days
+small	"Pâques"			weekend on easter
 small	"Lundi de Pâques"	weekend on easter plus 1 day
-small	"Fête du travail"	on 1.5
-small	"Ascension"		weekend on easter plus 39 days
-small	"Fête des mères"	on every second sunday in may
+small	"Fête du travail" 	weekend on 1.5
+small	"Ascencion"		weekend on easter plus 39 days
+small	"Fête des mères"		on every second sunday in may
 small	"Pentecôte"		weekend on easter plus 49 days
 small	"Lundi de Pentecôte"	weekend on easter plus 50 days
-small	"Fête des pères"	on every third sunday in june
-small	"Vlaamse feestdag"	weekend on 11.7
-small	"Fête Nationale Belge"	on 21.7
-small	"Assomption"		on 15.8
-small	"Fête de Wallonie"	weekend on 27.9
-small	"Toussaint"		on 1.11
-small	"Jour des morts"	weekend on 2.11
-small	"Armistice de 1918"	weekend on 11.11
-small	"Noël"			on 25.12.
+small	"Fête des pères"		on every third sunday in june
+small	"Fête de la Communauté flamande"	on 11.7
+small	"Fête nationale - Férié"	weekend on 21.7
+small	"Assomption"		weekend on 15.8
+small	"Fête de la Communauté française de Belgique"	on 27.9
+small	"Fêtes de Wallonie"	on every third sunday in september
+small	"Toussaint"		weekend on 1.11
+small	"Jour des morts"		on 2.11
+small	"Armistice"		weekend on 11.11
+smaal	"Fête de la Communauté germanophone de Belgique"	on 15.11
+small	"Saint Nicolas"		on 06.12
+small	"Noël"			weekend on 25.12.
+small	"Saint-Sylvestre"	on 31.12
Index: libkholidays/holidays/holiday_BelgiumWalloon
===================================================================
--- libkholidays/holidays/holiday_BelgiumWalloon	(.../tags/KDE/3.5.9/kdepim)	(wersja 0)
+++ libkholidays/holidays/holiday_BelgiumWalloon	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -0,0 +1,34 @@
+:
+: Belgian (in walloon) holiday file. Copy to ~/.holiday
+:
+: Author: Guido van Rossum, CWI, Amsterdam <Guido.van.Rossum@cwi.nl>
+: Adapted from Dutch holiday by Danny Backx <u27113@kb.be> and Djan Cayron <jean.cayron@gmail.com>
+:
+small	"Novelan"		weekend on 1.1.
+small	"Fiesse des Rwès"	on 6.1
+small	"Tchandleuse"		on 2.2
+small	"Crås mårdi"		on easter minus 47 days
+small	"Mierkidi des cindes"	on easter minus 46 days
+small	"Floreye Påke"		on easter minus 7 days
+small	"Djudi sint"		on easter minus 3 days
+small	"Bon vénrdi"		on easter minus 2 days
+small	"Påke"			weekend on easter
+small	"Londi d' Påke"		weekend on easter plus 1 day
+small	"Fiesse do boutaedje"	weekend on 1.5
+small	"Assincion"		weekend on easter plus 39 days
+small	"Fiesse des méres"	on every second sunday in may
+small	"Céncweme (Pintcosse)"	weekend on easter plus 49 days
+small	"Londi d' Céncweme"	weekend on easter plus 50 days
+small	"Fiesse des péres"	on every third sunday in june
+small	"Fiesse del Cominålté flaminde"	on 11.7
+small	"Fiesse nacionåle"	weekend on 21.7
+small	"Grande Notru Dame"	weekend on 15.8
+small	"Fiesse del Cominålté francesse di Beldjike"	on 27.9
+small	"Fiesses di Walonreye"	on every third sunday in september
+small	"Tossint"		weekend on 1.11
+small	"Djoû des åmes"		on 2.11
+small	"Årmistice"		weekend on 11.11
+smaal	"Fiesse del Cominålté Tîxhon-cåzante di Belgjike"	on 15.11
+small	"Sint Nicolai"		on 06.12
+small	"Noyé"			weekend on 25.12.
+small	"Sint Silvesse"		on 31.12
Index: libkholidays/holidays/holiday_nz
===================================================================
--- libkholidays/holidays/holiday_nz	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkholidays/holidays/holiday_nz	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -4,6 +4,7 @@
 : Author: Miles Leonard-Taylor (m.leonardtaylor@irl.cri.nz)
 : 13 September 2000 (first version)
 : 24 September 2004 (update with spelling corrections)
+: 11 February  2008 (change to daylight-savings rules by government)
 : Thanks to various people for pointing out all my spelling mistakes...
 
 : Holidays as defined by the government's "Holidays Acts, 1981-1991"
@@ -35,8 +36,9 @@
 small "Melbourne Cup" on first tuesday in november
 
 : Daylight Savings Reminders, defined by Internal Affairs
-small "Clocks Forward" on first sunday in october
-small "Clocks Back" on third sunday in march
+: see http://www.dia.govt.nz/diawebsite.nsf/wpg_URL/Services-Daylight-Saving-Index?OpenDocument
+small "Clocks Forward" on last sunday in september
+small "Clocks Back" on first sunday in april
 
 : Additional Easter dates and other Solemneties, defined by Catholic Church
 :small "Epiphany on sunday after january 2
Index: libkholidays/holidays/holiday_ar
===================================================================
--- libkholidays/holidays/holiday_ar	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkholidays/holidays/holiday_ar	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -7,6 +7,7 @@
 : Related national laws
 : http://www.uncu.edu.ar/contenido/skins/unc/download/Ley%2023555.pdf
 : http://www.uncu.edu.ar/contenido/skins/unc/download/Ley%2024445.pdf
+: http://www.puntoprofesional.com/P/0650/LEY_26416.HTM
 :
 : Author: Daniel Vega <dv5a@dc.uba.ar>
 
@@ -22,9 +23,8 @@
 small "Día de Manuel Belgrano" weekend on third monday in june
 small "Día de la Independencia" weekend on 7/9
 small "Día de San Martín" weekend on third monday in august
-small "Día de la Raza" weekend on (([10/12] == [friday  after ([10/11])] || [10/12] == [thursday  after ([10/11])]) ? [monday after  ([10/12])] : 
-                                  (([10/12] == [tuesday after ([10/11])] || [10/12] == [wednesday after ([10/11])]) ? [monday before ([10/12])] :
-                                    [10/12]))
+small "Día de la Raza" weekend on  (([10/12] == [tuesday after ([10/11])] || [10/12] == [wednesday after ([10/11])]) ? [monday before ([10/12])] :
+                                    [monday after  ([10/11])])
 small "Inmaculada Concepción de María" weekend on 12/8
 small "Navidad" weekend on 12/25
 
Index: libkholidays/holidays/holiday_at
===================================================================
--- libkholidays/holidays/holiday_at	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkholidays/holidays/holiday_at	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -21,6 +21,7 @@
 
 small "Tag der Arbeit"	weekend on 1.5.
 small "Muttertag"		on second sunday in may
+small "Vatertag"		on second sunday in june
 
 small "Maria Himmelfahrt" weekend on 15.8.
 
Index: libkholidays/holidays/holiday_ua
===================================================================
--- libkholidays/holidays/holiday_ua	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkholidays/holidays/holiday_ua	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,17 +1,118 @@
 :
 : Ukrainian holiday file. Copy to ~/.holiday
 :
-: Author: Andriy Gapon <avg@icyb.net.ua>, April 2007.
+: Authors: Andriy Gapon <avg@icyb.net.ua>, April 2007.
+:          Oleg Ivashchenko <ol_iva@i.ua>, October 2006.
 :
 
 : Official holidays
-
 small	"Новий Рік" weekend on 1.1
 small	"Різдво Христове" weekend on 7.1
 small	"8 Березня - Міжнародний Жіночий День" weekend on 8.3
 small	"Великдень" weekend on pascha
 small	"1 Травня - День Праці" weekend on 1.5 length 2 days
 small	"День Перемоги" weekend on 9.5
-small	"Трійця" weekend on pascha plus 46 days
+small	"Трійця" weekend on pascha plus 49 days
 small	"День Конституції України" weekend on 28.6
 small	"День Незалежності України" weekend on 24.8
+
+: Other holidays
+blue	"Хрещення" on 19.1
+blue	"День соборності України" on 22.1
+blue	"День пам’яті Крутів" on 29.1
+blue	"День працівників пожежної охорони" on 29.1
+blue	"День вшанування учасників бойових дій на території інших держав" on 15.2
+blue	"День захисника Вітчизни" on 23.2
+blue	"День землевпорядника" on second saturday in march
+blue	"День працівників житлово-комунального господарства і побутового обслуговування населення" on third sunday in march
+blue	"Всеукраїнський день працівників культури та аматорів народного мистецтва" on 23.3
+blue	"Всеукраїнський день боротьби із захворюванням на туберкульоз" on 24.3
+blue	"День Служби безпеки України" on 25.3
+blue	"День внутрішніх військ Міністерства внутрішніх справ України" on 26.3
+blue	"День геолога" on first sunday in april
+blue	"День працівників ракетно-космічної галузі України" on 12.4
+blue	"День пам'яток історії та культури" on 18.4
+blue	"День довкілля" on third saturday in april
+blue	"День охорони праці" on 28.4
+blue	"День матері" on second sunday in may
+blue	"День банківських працівників" on 20.5
+blue	"День науки" on third saturday in may
+blue	"День Європи" on third saturday in may
+blue	"День працівників видавництв, поліграфії і книгорозповсюдження" on last saturday in may
+blue	"День хіміка" on last sunday in may
+blue	"Міжнародний день миротворців Організації Об'єднаних Націй" on 29.5
+blue	"День слов'янської писемності і культури" 24.5
+blue	"День прикордонника" on 28.5
+blue	"День захисту дітей" on 1.6
+blue	"День журналіста" on 6.6
+blue	"День працівників місцевої промисловості" on first sunday in june
+blue	"День працівників водного господарства" on first sunday in june
+blue	"День працівників легкої промисловості" on second sunday in june
+blue	"День медичного працівника" on third sunday in june
+blue	"День скорботи і вшанування пам'яті жертв війни в Україні" on 22.6
+blue	"День державної служби" on 23.6
+blue	"День митної служби України" on 25.6
+blue	"День молоді" on last sunday in june
+blue	"День архітектури України" on 1.7
+blue	"День працівника державної податкової служби України" on 2.7
+blue	"День Військ Протиповітряної оборони" on first sunday in july
+blue	"День Військово-Морських Сил" on first sunday in july
+blue	"День працівників морського та річкового флоту" on first sunday in july
+blue	"День рибалки" on second sunday in july
+blue	"День бухгалтера" on 16.7
+blue	"День працівників металургійної та гірничодобувної промисловості" on third sunday in july
+blue	"День працівників торгівлі" on last sunday in july
+blue	"День аеромобільних військ" on 2.8
+blue	"День військ зв'язку" on 8.8
+blue	"День будівельника" on second sunday in august
+blue	"День працівників ветеринарної медицини" on second sunday in august
+blue	"День пасічника" on 19.8
+blue	"День Державного Прапора України" on 23.8
+blue	"День авіації" on last saturday in august
+blue	"День шахтаря" on last sunday in august
+blue	"День підприємця" on first sunday in september
+blue	"День фізичної культури і спорту" on second saturday in september
+blue	"День танкістів" on second sunday in september
+blue	"День працівників нафтової, газової та нафтопереробної промисловості" on second sunday in september
+blue	"День українського кіно" on second saturday in september
+blue	"День працівників цивільного захисту" on 17.9
+blue	"День миру" on 21.9
+blue	"День партизанської слави" on 22.9
+blue	"День фармацевтичного працівника" on third saturday in september
+blue	"День винахідника і раціоналізатора" on third saturday in september
+blue	"День працівника лісу" on third sunday in september
+blue	"День машинобудівника" on fourth sunday in september
+blue	"День туризму" on 27.9
+blue	"Всеукраїнський день бібліотек" on 30.9
+blue	"День працівників освіти" on first sunday in october
+blue	"День юриста" on 8.10
+blue	"День працівників стандартизації та метрології" on 10.10
+blue	"День працівників державної санітарно-епідеміологічної служби" on second sunday in october
+blue	"День художника" on second sunday in october
+blue	"День Українського козацтва" on 14.10
+blue	"День працівників харчової промисловості" on third sunday in october
+blue	"День автомобіліста і дорожника" on last sunday in october
+blue	"День інженерних військ" on 3.11
+blue	"День ракетних військ і артилерії" on 3.11
+blue	"День залізничника" on 4.11
+blue	"День працівника соціальної сфери" on first sunday in november
+blue	"День української писемності та мови" on 9.11
+blue	"День працівників радіо, телебачення та зв'язку" on 16.11
+blue	"День студента" on 17.11
+blue	"День працівників гідрометеорологічної служби" on 19.11
+blue	"День скловиробника" on 19.11
+blue	"День Свободи" on 22.11
+blue	"День працівників сільського господарства" on third sunday in november
+blue	"День пам'яті жертв голодоморів та політичних репресій" on fourth saturday in november
+blue	"День працівників прокуратури" on 1.12
+blue	"День працівників статистики" on 5.12
+blue	"День Збройних Сил України" on 6.12
+blue	"День місцевого самоврядування" on 7.12
+blue	"День Сухопутних військ  України" on 12.12
+blue	"День вшанування учасників ліквідації  наслідків аварії на Чорнобильській АЕС" on 14.12
+blue	"День працівників суду" on 15.12
+blue	"День адвокатури" on 19.12
+blue	"День міліції" on 20.12
+blue	"День працівників дипломатичної служби" on 22.12
+blue	"День енергетика" on 22.12
+blue	"День працівників архівних установ" on 24.12
Index: libkholidays/holidays/holiday_BelgiumDutch
===================================================================
--- libkholidays/holidays/holiday_BelgiumDutch	(.../tags/KDE/3.5.9/kdepim)	(wersja 0)
+++ libkholidays/holidays/holiday_BelgiumDutch	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -0,0 +1,34 @@
+:
+: Belgian (in Dutch) holiday file. Copy to ~/.holiday
+:
+: Author: Guido van Rossum, CWI, Amsterdam <Guido.van.Rossum@cwi.nl>
+: Adapted from Dutch holiday by Danny Backx <u27113@kb.be> and Jean Cayron <jean.cayron@gmail.com>
+:
+small	"Nieuwjaar"		weekend on 1.1.
+small	"Driekoningen"		on 6.1
+small	"Lichtmis"		on 2.2
+small	"Vastenavond"		on easter minus 47 days
+small	"Aswoensdag"		on easter minus 46 days
+small	"Palmzondag"		on easter minus 7 days
+small	"Witte Donderdag"	on easter minus 3 days
+small	"Goede Vrijdag"		on easter minus 2 days
+small	"Pasen - Feestdag"	weekend on easter
+small	"Paasmaandag"		weekend on easter plus 1 day
+small	"Feest van de Arbeid"	weekend on 1.5
+small	"Hemelvaart"		weekend on easter plus 39 days
+small	"Moederdag"		on every second sunday in may
+small	"Pinksteren"		weekend on easter plus 49 days length 2 days
+small	"Vaderdag"		on every third sunday in june
+small	"Vlaamse Gemeenschap feestdag"	on 11.7
+small	"Nationale feestdag"	weekend on 21.7
+small	"OLV Hemelvaart"		weekend on 15.8
+small	"Franse Gemeenschap feestdag"	on 27.9
+small	"Waalse feesten"		on every third sunday in september
+small	"Allerheiligen"		weekend on 1.11
+small	"Allerzielen"		on 2.11
+small	"Wapenstilstand"		weekend on 11.11
+smaal	"Duitstalige Gemeenschap feestdag"	on 15.11
+small	"Sinterklaas"		on 06.12
+small	"Kerstmis"		weekend on 25.12.
+small	"Tweede kerstdag"	on 26.12.
+small	"Oudjaar"		on 31.12

Zmiany atrybutów dla: libkholidays/holidays/holiday_BelgiumDutch
___________________________________________________________________
Dodane: svn:keywords
   + Author Date Id Revision

Index: libkholidays/holidays/Makefile.am
===================================================================
--- libkholidays/holidays/Makefile.am	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkholidays/holidays/Makefile.am	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,12 +2,13 @@
 holidaysdir = $(kde_datadir)/libkholidays
 
 holidays_DATA = holiday_ar holiday_at holiday_au \
-                holiday_bavarian holiday_be holiday_br \
+                holiday_bavarian holiday_br \
+                holiday_BelgiumDutch holiday_BelgiumFrench holiday_BelgiumWalloon \
                 holiday_ca holiday_catalan holiday_co \
                 holiday_ch holiday_cz holiday_de holiday_dk holiday_ee \
                 holiday_es holiday_fi holiday_fr holiday_frswiss holiday_gb \
                 holiday_gr holiday_gt \
-                holiday_hu holiday_is holiday_il holiday_it holiday_ja \
+                holiday_hu holiday_is holiday_il holiday_it holiday_jp \
                 holiday_lt holiday_mx \
                 holiday_nl \
                 holiday_no holiday_nz holiday_pl holiday_pt holiday_py \
Index: plugins/kmail/bodypartformatter/text_calendar.desktop
===================================================================
--- plugins/kmail/bodypartformatter/text_calendar.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ plugins/kmail/bodypartformatter/text_calendar.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,5 +1,4 @@
 [Misc]
-Encoding=UTF-8
 Name=Application Octetstream
 Name[af]=Application/Octet-stream
 Name[ca]=Aplicació Octetstream
@@ -15,6 +14,7 @@
 Name[gl]=Aplicación Octetstream
 Name[hu]=Alkalmazás-adatfolyam
 Name[ja]=アプリケーション オクテット ストリーム
+Name[ka]=რვადინებიანი პროგრამა
 Name[kk]=Қолданбаның бинарлы ағымы
 Name[km]=Octetstream កម្មវិធី
 Name[ms]=Aliran Oktet  Aplikasi
@@ -55,6 +55,7 @@
 Comment[is]=Sniðmátstól fyrir text/calendar
 Comment[it]=Un plugin per formattare il corpo di text/calendar
 Comment[ja]=text/calendar 用の Bodypart フォーマッタ プラグイン
+Comment[ka]=კომპონენტური დამფორმატებელი მოდული text/calendar
 Comment[kk]=Text/calendar бөлімін пішімдеу модулі
 Comment[km]=កម្មវិធី​ជំនួយ​កម្មវិធី​ធ្វើ​ទ្រង់ទ្រាយ​ផ្នែក​តួ សម្រាប់​អត្ថបទ/ប្រតិទិន
 Comment[lt]=text/calendar formatavimo priedas
Index: plugins/kmail/bodypartformatter/text_vcard.desktop
===================================================================
--- plugins/kmail/bodypartformatter/text_vcard.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ plugins/kmail/bodypartformatter/text_vcard.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,5 +1,4 @@
 [Misc]
-Encoding=UTF-8
 Name=Application Octetstream
 Name[af]=Application/Octet-stream
 Name[ca]=Aplicació Octetstream
@@ -15,6 +14,7 @@
 Name[gl]=Aplicación Octetstream
 Name[hu]=Alkalmazás-adatfolyam
 Name[ja]=アプリケーション オクテット ストリーム
+Name[ka]=რვადინებიანი პროგრამა
 Name[kk]=Қолданбаның бинарлы ағымы
 Name[km]=Octetstream កម្មវិធី
 Name[ms]=Aliran Oktet  Aplikasi
@@ -56,6 +56,7 @@
 Comment[is]=Sniðmátstól fyrir text/vcard
 Comment[it]=Un plugin per formattare il corpo di text/vcard
 Comment[ja]=text/vcard 用の Bodypart フォーマッタ プラグイン
+Comment[ka]=კომპონენტური დამფორმატებელი მოდული text/vcard
 Comment[kk]=Text/vcard бөлімін пішімдеу модулі
 Comment[km]=កម្មវិធី​ជំនួយ​កម្មវិធី​ធ្វើ​ទ្រង់ទ្រាយ​ផ្នែក​តួ សម្រាប់​អត្ថបទ/vcard
 Comment[lt]= Teksto/vcard formatavimo priedas
Index: plugins/kmail/bodypartformatter/text_xdiff.desktop
===================================================================
--- plugins/kmail/bodypartformatter/text_xdiff.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ plugins/kmail/bodypartformatter/text_xdiff.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,5 +1,4 @@
 [Misc]
-Encoding=UTF-8
 Name=Application Octetstream
 Name[af]=Application/Octet-stream
 Name[ca]=Aplicació Octetstream
@@ -15,6 +14,7 @@
 Name[gl]=Aplicación Octetstream
 Name[hu]=Alkalmazás-adatfolyam
 Name[ja]=アプリケーション オクテット ストリーム
+Name[ka]=რვადინებიანი პროგრამა
 Name[kk]=Қолданбаның бинарлы ағымы
 Name[km]=Octetstream កម្មវិធី
 Name[ms]=Aliran Oktet  Aplikasi
@@ -54,6 +54,7 @@
 Comment[is]=Sniðmátstól fyrir text/x-diff
 Comment[it]=Un plugin per formattare il corpo di text/x-diff
 Comment[ja]=text/x-diff 用の bodypart フォーマッタプラグイン
+Comment[ka]=კომპონენტური დამფორმატებელი მოდული text/x-diff
 Comment[kk]=Text/x-diff бөлімін пішімдеу модулі
 Comment[km]=កម្មវិធី​ជំនួយ​កម្មវិធី​ធ្វើ​ទ្រង់ទ្រាយ​ផ្នែក​តួ សម្រាប់​អត្ថបទ/x-diff
 Comment[lt]=text/x-diff formatavimo priedas
Index: plugins/kmail/bodypartformatter/text_calendar.cpp
===================================================================
--- plugins/kmail/bodypartformatter/text_calendar.cpp	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ plugins/kmail/bodypartformatter/text_calendar.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -101,6 +101,27 @@
   mCalendar = new CalendarResources( KPimPrefs::timezone() );
   mCalendar->readConfig();
   mCalendar->load();
+  bool multipleKolabResources = false;
+  CalendarResourceManager *mgr = mCalendar->resourceManager();
+  for ( CalendarResourceManager::ActiveIterator it = mgr->activeBegin(); it != mgr->activeEnd(); ++it ) {
+    if ( (*it)->type() == "imap" || (*it)->type() == "kolab" ) {
+      const QStringList subResources = (*it)->subresources();
+      QMap<QString, int> prefixSet; // KDE4: QSet
+      for ( QStringList::ConstIterator subIt = subResources.begin(); subIt != subResources.end(); ++subIt ) {
+        if ( !(*subIt).contains( "/.INBOX.directory/" ) )
+          // we don't care about shared folders
+          continue;
+        prefixSet.insert( (*subIt).left( (*subIt).find( "/.INBOX.directory/" ) ), 0 );
+      }
+      if ( prefixSet.count() > 1 )
+        multipleKolabResources = true;
+    }
+  }
+  if ( multipleKolabResources ) {
+    kdDebug() << k_funcinfo << "disabling calendar lookup because multiple active Kolab resources" << endl;
+    delete mCalendar;
+    mCalendar = 0;
+  }
 }
 
 CalendarManager::~CalendarManager()
@@ -288,7 +309,8 @@
     enum MailType {
       Answer,
       Delegation,
-      Forward
+      Forward,
+      DeclineCounter
     };
 
     bool mail( Incidence* incidence, KMail::Callback& callback,
@@ -313,6 +335,11 @@
         case Forward:
           subject = i18n( "Forwarded: %1" ).arg( summary );
           break;
+        case DeclineCounter:
+          // ### string freeze
+          //subject = i18n( "Declined Counter Proposal: %1" ).arg( summary );
+          subject = i18n( "Answer: %1" ).arg( summary );
+          break;
       }
 
       QString recv = to;
@@ -517,14 +544,34 @@
       return true;
     }
 
+    bool handleDeclineCounter( const QString &iCal, KMail::Callback &callback ) const
+    {
+      const QString receiver = callback.receiver();
+      if ( receiver.isEmpty() )
+        return true;
+      Incidence* incidence = icalToString( iCal );
+      if ( callback.askForComment( Attendee::Declined ) ) {
+        bool ok = false;
+        // ### string freeze
+        QString comment = KInputDialog::getMultiLineText( i18n("Reaction to Invitation") /* i18n("Decline Counter Proposal") */,
+            i18n("Comment:"), QString(), &ok );
+        if ( !ok )
+          return true;
+        if ( !comment.isEmpty() )
+          incidence->addComment( comment );
+      }
+      return mail( incidence, callback, Attendee::NeedsAction, Scheduler::Declinecounter,
+                   callback.sender(), DeclineCounter );
+    }
+
     bool counterProposal( const QString &iCal, KMail::Callback &callback ) const
     {
       const QString receiver = callback.receiver();
       if ( receiver.isEmpty() )
         return true;
       saveFile( receiver, iCal, "counter" );
-      if ( callback.deleteInvitationAfterReply() )
-        ( new KMDeleteMsgCommand( callback.getMsg()->getMsgSerNum() ) )->start();
+      // Don't delete the invitation here in any case, if the counter proposal
+      // is declined you might need it again.
       return true;
     }
 
@@ -552,6 +599,9 @@
         result = handleIgnore( iCal, c );
       if ( path == "decline" )
         result = handleInvitation( iCal, Attendee::Declined, c );
+      if ( path == "decline_counter" ) {
+        result = handleDeclineCounter( iCal, c );
+      }
       if ( path == "delegate" )
         result = handleInvitation( iCal, Attendee::Delegated, c );
       if ( path == "forward" ) {
@@ -569,9 +619,10 @@
         Incidence* incidence = icalToString( iCal );
         showCalendar( incidence->dtStart().date() );
       }
-      if ( path == "reply" || path == "cancel" ) {
+      if ( path == "reply" || path == "cancel" || path == "accept_counter" ) {
         // These should just be saved with their type as the dir
-        if ( saveFile( "Receiver Not Searched", iCal, path ) ) {
+        const QString p = (path == "accept_counter" ? QString("reply") : path);
+        if ( saveFile( "Receiver Not Searched", iCal, p ) ) {
           if ( c.deleteInvitationAfterReply() )
             ( new KMDeleteMsgCommand( c.getMsg()->getMsgSerNum() ) )->start();
           result = true;
@@ -597,12 +648,18 @@
           return i18n("Accept incidence");
         if ( path == "accept_conditionally" )
           return i18n( "Accept incidence conditionally" );
+// ### string freeze
+//        if ( path == "accept_counter" )
+//          return i18n( "Accept counter proposal" );
         if ( path == "counter" )
           return i18n( "Create a counter proposal..." );
         if ( path == "ignore" )
           return i18n( "Throw mail away" );
         if ( path == "decline" )
           return i18n( "Decline incidence" );
+// ### string freeze
+//        if ( path == "decline_counter" )
+//          return i18n( "Decline counter proposal" );
         if ( path == "check_calendar" )
           return i18n("Check my calendar..." );
         if ( path == "reply" )
Index: kitchensync/src/kitchensync.desktop
===================================================================
--- kitchensync/src/kitchensync.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kitchensync/src/kitchensync.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,5 +1,4 @@
 [Desktop Entry]
-Encoding=UTF-8
 Name=KitchenSync
 Name[pt]=KitchenSyncFilter
 Name[sv]=Kitchensync
@@ -27,6 +26,7 @@
 GenericName[is]=Samstilling
 GenericName[it]=Sincronizzazione
 GenericName[ja]=同期
+GenericName[ka]=სინქრონიზაცია
 GenericName[kk]=Қадамдастыру
 GenericName[km]=ការ​​ធ្វើ​សមកាលកម្ម
 GenericName[lt]=Sinchronizacija
Index: kabc/kabcdistlistupdater/kabcdistlistupdater.cpp
===================================================================
--- kabc/kabcdistlistupdater/kabcdistlistupdater.cpp	(.../tags/KDE/3.5.9/kdepim)	(wersja 0)
+++ kabc/kabcdistlistupdater/kabcdistlistupdater.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -0,0 +1,95 @@
+/*
+    This file is part of libkabc.
+    Copyright (c) 2008 Tobias Koenig <tokoe@kde.org>
+
+    This library is free software; you can redistribute it and/or
+    modify it under the terms of the GNU Library General Public
+    License as published by the Free Software Foundation; either
+    version 2 of the License, or (at your option) any later version.
+
+    This library is distributed in the hope that it will be useful,
+    but WITHOUT ANY WARRANTY; without even the implied warranty of
+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
+    Library General Public License for more details.
+
+    You should have received a copy of the GNU Library General Public License
+    along with this library; see the file COPYING.LIB.  If not, write to
+    the Free Software Foundation, Inc., 51 Franklin Street, Fifth Floor,
+    Boston, MA 02110-1301, USA.
+*/
+
+#include <kaboutdata.h>
+#include <kapplication.h>
+#include <kcmdlineargs.h>
+#include <ksimpleconfig.h>
+#include <kdebug.h>
+#include <kglobal.h>
+#include <klocale.h>
+#include <kstandarddirs.h>
+
+#include <kabc/stdaddressbook.h>
+#include <libkdepim/distributionlist.h>
+
+static const KCmdLineOptions options[] =
+{
+  { "disable-autostart", "Disable automatic startup on login", 0 },
+  KCmdLineLastOption
+};
+
+void convertDistributionLists()
+{
+  KSimpleConfig cfg( locateLocal( "data", "kabc/distlists" ) );
+  const QMap<QString, QString> entryMap = cfg.entryMap( "DistributionLists" );
+
+  if ( entryMap.isEmpty() ) // nothing to convert
+    return;
+
+  QMapConstIterator<QString, QString> it;
+  for ( it = entryMap.begin(); it != entryMap.end(); ++it ) {
+    const QString listName = it.key();
+    const QStringList entries = QStringList::split( ',', it.data(), true );
+
+    KPIM::DistributionList distList;
+    distList.setUid( KApplication::randomString( 10 ) );
+    distList.setName( listName );
+
+    if ( entries.count() > 1 ) {
+      for ( uint i = 0; i < entries.count(); i += 2 ) {
+        const QString uid = entries[ i ];
+        const QString preferredEMail = entries[ i + 1 ];
+
+        distList.insertEntry( uid, preferredEMail );
+      }
+    }
+
+    KABC::StdAddressBook::self()->insertAddressee( distList );
+  }
+
+  KABC::StdAddressBook::self()->save();
+}
+
+int main( int argc, char **argv )
+{
+  KApplication::disableAutoDcopRegistration();
+
+  KAboutData aboutData( "kabcdistlistupdater", "Converter tool for distribution lists", "0.1" );
+  aboutData.addAuthor( "Tobias Koenig", 0, "tokoe@kde.org" );
+
+  KCmdLineArgs::init( argc, argv, &aboutData );
+  KCmdLineArgs::addCmdLineOptions( options );
+
+  KApplication app( false, false );
+
+  KCmdLineArgs *args = KCmdLineArgs::parsedArgs();
+
+  if ( args->isSet( "disable-autostart" ) ) {
+    kdDebug() << "Disable autostart." << endl;
+
+    KConfig *config = app.config();
+    config->setGroup( "Startup" );
+    config->writeEntry( "EnableAutostart", false );
+  }
+
+  convertDistributionLists();
+}
+
Index: kabc/kabcdistlistupdater/Makefile.am
===================================================================
--- kabc/kabcdistlistupdater/Makefile.am	(.../tags/KDE/3.5.9/kdepim)	(wersja 0)
+++ kabc/kabcdistlistupdater/Makefile.am	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -0,0 +1,12 @@
+INCLUDES = -I$(includedir)/kabc -I$(top_srcdir) $(all_includes)
+
+METASOURCES = AUTO
+
+bin_PROGRAMS = kabcdistlistupdater
+
+kabcdistlistupdater_LDFLAGS = $(all_libraries) $(KDE_RPATH)
+kabcdistlistupdater_LDADD = $(LIB_KABC) $(top_builddir)/libkdepim/libkdepim.la
+kabcdistlistupdater_SOURCES = kabcdistlistupdater.cpp
+
+autostart_DATA = kabcdistlistupdater.desktop
+autostartdir = $(datadir)/autostart
Index: kabc/kabcdistlistupdater/kabcdistlistupdater.desktop
===================================================================
--- kabc/kabcdistlistupdater/kabcdistlistupdater.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 0)
+++ kabc/kabcdistlistupdater/kabcdistlistupdater.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -0,0 +1,21 @@
+# KDE Config File
+[Desktop Entry]
+Name=kabcdistlistupdater
+Name[nl]=kabcdistlijstbijwerker
+Exec=kabcdistlistupdater --disable-autostart
+Icon=misc
+Type=Application
+Comment=Tool to update the old distribution lists to the new ones.
+Comment[ca]=Eina per actualitzar les llistes de distribució antigues a les noves.
+Comment[es]=Herramienta para actualizar las antiguas listas de distribución al nuevo formato.
+Comment[et]=Tööriist vanade postiloendite uuendamiseks uue vormi kohaselt.
+Comment[nds]=Warktüüch, dat ole Verdeellisten to niege opfrischt
+Comment[nl]=Hulpmiddel om de oude distributielijsten bij te werken tot de nieuwe.
+Comment[sk]=Nástroj na aktualizáciu starých ditribučných zoznamov na nové.
+Comment[sr]=Алат за ажурирање старих дистрибуционих листи новима.
+Comment[sr@Latn]=Алат за ажурирање старих дистрибуционих листи новима.
+Comment[sv]=Verktyg för att uppdatera gamla distributionslistor till nya.
+Terminal=false
+NoDisplay=true
+X-KDE-autostart-condition=kabcdistlistupdaterrc:Startup:EnableAutostart:true
+OnlyShowIn=KDE;
Index: kabc/Makefile.am
===================================================================
--- kabc/Makefile.am	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kabc/Makefile.am	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1 +1,5 @@
-SUBDIRS = kabc2mutt
+if compile_newdistrlists
+KABCDISTLISTUPDATER=kabcdistlistupdater
+endif
+
+SUBDIRS = kabc2mutt $(KABCDISTLISTUPDATER)
Index: libkdepim/ldapclient.h
===================================================================
--- libkdepim/ldapclient.h	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkdepim/ldapclient.h	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,5 +1,5 @@
 /* kldapclient.h - LDAP access
- *      Copyright (C) 2002 Klarlvdalens Datakonsult AB
+ *      Copyright (C) 2002 Klar�vdalens Datakonsult AB
  *
  *      Author: Steffen Hansen <hansen@kde.org>
  *
@@ -33,6 +33,7 @@
 
 #include <kio/job.h>
 #include <kabc/ldif.h>
+#include <kconfig.h>
 
 #include <kdepimmacros.h>
 
@@ -45,7 +46,14 @@
 class LdapServer
 {
   public:
-    LdapServer() : mPort( 389 ) {}
+    LdapServer()
+    : mPort( 389 ),
+      mTimeLimit(0),
+      mSizeLimit(0),
+      mVersion(2),
+      mSecurity(Sec_None),
+      mAuth( LdapServer::Anonymous )
+    {}
 
     enum Security{ Sec_None, TLS, SSL };
     enum Auth{ Anonymous, Simple, SASL };
Index: libkdepim/ldapsearchdialog.h
===================================================================
--- libkdepim/ldapsearchdialog.h	(.../tags/KDE/3.5.9/kdepim)	(wersja 0)
+++ libkdepim/ldapsearchdialog.h	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -0,0 +1,92 @@
+/* ldapsearchdialogimpl.h - LDAP access
+ *      Copyright (C) 2002 Klarälvdalens Datakonsult AB
+ *
+ *      Author: Steffen Hansen <hansen@kde.org>
+ *
+ * This file is free software; you can redistribute it and/or modify
+ * it under the terms of the GNU General Public License as published by
+ * the Free Software Foundation; either version 2 of the License, or
+ * (at your option) any later version.
+ *
+ * This file is distributed in the hope that it will be useful,
+ * but WITHOUT ANY WARRANTY; without even the implied warranty of
+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+ * GNU General Public License for more details.
+ *
+ * You should have received a copy of the GNU General Public License
+ * along with this program; if not, write to the Free Software
+ * Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA 02111-1307, USA
+ */
+
+#ifndef LDAPSEARCHDIALOG_H
+#define LDAPSEARCHDIALOG_H
+
+#include <qptrlist.h>
+
+#include <ldapclient.h>
+#include <kdialogbase.h>
+#include <klineedit.h>
+
+class KComboBox;
+
+class QCheckBox;
+class QListView;
+class QPushButton;
+
+namespace KPIM {
+
+class LDAPSearchDialog : public KDialogBase
+{ 
+  Q_OBJECT
+
+  public:
+    LDAPSearchDialog( QWidget* parent, const char* name = 0 );
+    ~LDAPSearchDialog();
+
+    bool isOK() const { return mIsOK; }
+
+    void restoreSettings();
+
+    void setSearchText( const QString &text ) { mSearchEdit->setText( text ); }
+    QString selectedEMails() const;
+  signals:
+    void addresseesAdded();
+
+  protected slots:
+    void slotAddResult( const KPIM::LdapObject& obj );
+    void slotSetScope( bool rec );
+    void slotStartSearch();
+    void slotStopSearch();
+    void slotSearchDone();
+    void slotError( const QString& );
+    virtual void slotHelp();
+    virtual void slotUser1();
+    virtual void slotUser2();
+    virtual void slotUser3();
+
+  protected:
+
+    virtual void closeEvent( QCloseEvent* );
+
+  private:
+    void saveSettings();
+
+    QString makeFilter( const QString& query, const QString& attr, bool startsWith );
+
+    void cancelQuery();
+
+    int mNumHosts;
+    QPtrList<KPIM::LdapClient> mLdapClientList;
+    bool mIsOK;
+    KComboBox* mFilterCombo;
+    KComboBox* mSearchType;
+    KLineEdit* mSearchEdit;
+
+    QCheckBox* mRecursiveCheckbox;
+    QListView* mResultListView;
+    QPushButton* mSearchButton;
+};
+
+
+}
+#endif
Index: libkdepim/addressesdialog.cpp
===================================================================
--- libkdepim/addressesdialog.cpp	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkdepim/addressesdialog.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -24,9 +24,12 @@
 
 #include "addressesdialog.h"
 #include "addresspicker.h"
+#include "ldapsearchdialog.h"
 
 #include <config.h>
 
+#include <libemailfunctions/email.h>
+
 #ifdef KDEPIM_NEW_DISTRLISTS
 #include "distributionlist.h"
 #include <kresources/selectdialog.h>
@@ -64,7 +67,10 @@
 };
 
 struct AddressesDialog::AddressesDialogPrivate {
-  AddressesDialogPrivate() : ui(0), personal(0), recent(0), toItem(0), ccItem(0), bccItem(0)
+  AddressesDialogPrivate() : 
+    ui(0), personal(0), recent(0),
+    toItem(0), ccItem(0), bccItem(0),
+    ldapSearchDialog(0)
   {}
 
   AddressPickerUI             *ui;
@@ -79,6 +85,7 @@
   QDict<AddresseeViewItem>     groupDict;
 
   KABC::Addressee::List       recentAddresses;
+  LDAPSearchDialog            *ldapSearchDialog;
 };
 // privates end
 
@@ -565,6 +572,8 @@
            SLOT(addSelectedBCC())  );
   connect( d->ui->mSaveAs, SIGNAL(clicked()),
            SLOT(saveAs())  );
+  connect( d->ui->mLdapSearch, SIGNAL(clicked()),
+           SLOT(searchLdap())  );
   connect( d->ui->mRemoveButton, SIGNAL(clicked()),
            SLOT(removeEntry()) );
   connect( d->ui->mAvailableView, SIGNAL(selectionChanged()),
@@ -928,6 +937,34 @@
 }
 
 void
+AddressesDialog::searchLdap()
+{
+    if ( !d->ldapSearchDialog ) {
+      d->ldapSearchDialog = new LDAPSearchDialog( this );
+      connect( d->ldapSearchDialog, SIGNAL( addresseesAdded() ),
+               SLOT(ldapSearchResult() ) );
+    }
+    d->ldapSearchDialog->show();
+}
+
+void
+AddressesDialog::ldapSearchResult()
+{
+  QStringList emails = QStringList::split(',', d->ldapSearchDialog->selectedEMails() );
+  QStringList::iterator it( emails.begin() );
+  QStringList::iterator end( emails.end() );
+  for ( ; it != end; ++it ){
+      QString name;
+      QString email;
+      KPIM::getNameAndMail( (*it), name, email );
+      KABC::Addressee ad;
+      ad.setNameFromString( name );
+      ad.insertEmail( email );
+      addAddresseeToSelected( ad, selectedToItem() );
+  }
+}
+
+void
 AddressesDialog::launchAddressBook()
 {
   kapp->startServiceByDesktopName( "kaddressbook", QString() );
Index: libkdepim/addresspicker.ui
===================================================================
--- libkdepim/addresspicker.ui	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkdepim/addresspicker.ui	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,4 +1,4 @@
-<!DOCTYPE UI><UI version="3.2" stdsetdef="1">
+<!DOCTYPE UI><UI version="3.3" stdsetdef="1">
 <class>AddressPickerUI</class>
 <widget class="QWidget">
     <property name="name">
@@ -9,7 +9,7 @@
             <x>0</x>
             <y>0</y>
             <width>591</width>
-            <height>350</height>
+            <height>442</height>
         </rect>
     </property>
     <property name="caption">
@@ -169,17 +169,6 @@
                 </spacer>
             </vbox>
         </widget>
-        <widget class="QPushButton" row="2" column="2">
-            <property name="name">
-                <cstring>mSaveAs</cstring>
-            </property>
-            <property name="enabled">
-                <bool>false</bool>
-            </property>
-            <property name="text">
-                <string>Save as &amp;Distribution List...</string>
-            </property>
-        </widget>
         <widget class="QLabel" row="0" column="2">
             <property name="name">
                 <cstring>textLabel2</cstring>
@@ -300,8 +289,32 @@
                 <bool>true</bool>
             </property>
         </widget>
+        <widget class="QPushButton" row="2" column="2">
+            <property name="name">
+                <cstring>mSaveAs</cstring>
+            </property>
+            <property name="enabled">
+                <bool>false</bool>
+            </property>
+            <property name="text">
+                <string>Save as &amp;Distribution List...</string>
+            </property>
+            <property name="accel">
+                <string>Alt+D</string>
+            </property>
+        </widget>
+        <widget class="QPushButton" row="3" column="0">
+            <property name="name">
+                <cstring>mLdapSearch</cstring>
+            </property>
+            <property name="text">
+                <string>&amp;Search Directory Service</string>
+            </property>
+        </widget>
     </grid>
 </widget>
+<customwidgets>
+</customwidgets>
 <layoutdefaults spacing="6" margin="11"/>
 <includehints>
     <includehint>klistview.h</includehint>
Index: libkdepim/configure.in.in
===================================================================
--- libkdepim/configure.in.in	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkdepim/configure.in.in	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,20 +1,14 @@
 AC_MSG_CHECKING([whether to use new-style distribution lists])
 AC_ARG_ENABLE(newdistrlists,
-[AC_HELP_STRING([--enable-newdistrlists],
-                [Whether to use new distribution lists, to store them like normal contacts; useful for Kolab])],
-[case "${enableval}" in
-        yes)
-                AC_MSG_RESULT([yes])
-                AC_DEFINE(KDEPIM_NEW_DISTRLISTS, 1, [Define to 1 if you want to use the new distribution lists])
-                enable_new_distrlists="yes"
-                ;;
-        no)
-                AC_MSG_RESULT([no])
-                ;;
-        *)
-                AC_MSG_ERROR([bad value ${enableval} for --enable-newdistrlists])
-                ;;
-esac
-], [AC_MSG_RESULT([no])])
+AC_HELP_STRING([--disable-newdistrlists],
+                [Disables the new distribution lists (which are saved as addressee in the address book as normal contacts, useful for Kolab)]),
+                [ enable_new_distrlists=$enableval], [enable_new_distrlists=yes])dnl
+if test "$enable_new_distrlists" = "yes" ; then
+  AC_DEFINE_UNQUOTED(KDEPIM_NEW_DISTRLISTS, 1, [Define if you want to use the new distribution lists])
+  AC_MSG_RESULT(yes)
+else
+  AC_MSG_RESULT(no)
+fi
 
 AM_CONDITIONAL(compile_newdistrlists, test "x$enable_new_distrlists" = "xyes")
+
Index: libkdepim/komposer/plugins/default/defaulteditor.desktop
===================================================================
--- libkdepim/komposer/plugins/default/defaulteditor.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkdepim/komposer/plugins/default/defaulteditor.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,5 +1,4 @@
 [Desktop Entry]
-Encoding=UTF-8
 Type=Service
 Icon=editor
 ServiceTypes=Komposer/Editor
@@ -39,6 +38,7 @@
 Name[is]=Komposer ritill
 Name[it]=Editor Komposer
 Name[ja]=Komposer エディタ
+Name[ka]=Komposer რედაქტორი
 Name[kk]=Komposer өңдегіші
 Name[km]=កម្មវិធី​និពន្ធ Komposer
 Name[lt]=Komposer redaktorius
@@ -84,6 +84,7 @@
 Comment[is]=Sjálfgefinn ritill Komposer
 Comment[it]=Editor di default per Komposer
 Comment[ja]=Komposer 標準エディタ
+Comment[ka]=Komposer ნაგულისხმევი რედაქტორი
 Comment[kk]=Komposer әдетті өңдегіші
 Comment[km]=កម្មវិធី​និពន្ធ​លំនាំដើម​របស់ Komposer
 Comment[ko]=Komposer 기본 편집기
Index: libkdepim/komposer/core/komposerplugin.desktop
===================================================================
--- libkdepim/komposer/core/komposerplugin.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkdepim/komposer/core/komposerplugin.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -29,6 +29,7 @@
 Name[is]=Komposer íforrit
 Name[it]=Plugin Komposer
 Name[ja]=Komposer プラグイン
+Name[ka]=Komposer მოდული
 Name[kk]=Komposer плагин модулі
 Name[km]=កម្មវិធី​ជំនួយ Komposer
 Name[ko]=Komposer 플러그인
Index: libkdepim/komposer/core/komposerconfig.desktop
===================================================================
--- libkdepim/komposer/core/komposerconfig.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkdepim/komposer/core/komposerconfig.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,5 +1,4 @@
 [Desktop Entry]
-Encoding=UTF-8
 Exec=kcmshell komposerconfig
 Icon=komposer
 Type=Application
@@ -28,6 +27,7 @@
 Comment[fr]=Komposer KDE
 Comment[ga]=Komposer KDE
 Comment[hi]=केडीई कम्पोज़र
+Comment[ka]=KDE კომპოზიტორი
 Comment[ms]=Penggubah KDE
 Comment[nds]=Nettbreef-Editor vun KDE
 Comment[ne]=केडीई कम्पोजर
@@ -46,6 +46,7 @@
 Keywords[de]=Komposer
 Keywords[fy]=komposer,opstellen, opsteller
 Keywords[hi]=कम्पोज़र
+Keywords[ka]=komposer,ნოტები
 Keywords[nds]=Komposer
 Keywords[ne]=कम्पोजर
 Keywords[nl]=komposer,opstellen
Index: libkdepim/komposer/core/komposereditor.desktop
===================================================================
--- libkdepim/komposer/core/komposereditor.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkdepim/komposer/core/komposereditor.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,5 +1,4 @@
 [Desktop Entry]
-Encoding=UTF-8
 Type=ServiceType
 X-KDE-ServiceType=Komposer/Editor
 X-KDE-Derived=Komposer/Plugin
@@ -27,6 +26,7 @@
 Comment[is]=Komposer ritill
 Comment[it]=Komposer editor
 Comment[ja]=Komposer,エディタ
+Comment[ka]=Komposer-ის რედაქტორი
 Comment[kk]=Komposer өңдегіші
 Comment[km]=កម្មវិធី​និពន្ធ Komposer
 Comment[ko]=Komposer 편집기
Index: libkdepim/Makefile.am
===================================================================
--- libkdepim/Makefile.am	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkdepim/Makefile.am	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -23,7 +23,7 @@
   overlaywidget.cpp progressmanager.cpp progressdialog.cpp \
   statusbarprogresswidget.cpp ssllabel.cpp completionordereditor.cpp \
   resourceabc.cpp diffalgo.cpp addresseediffalgo.cpp calendardiffalgo.cpp \
-  htmldiffalgodisplay.cpp broadcaststatus.cpp kresourceprefs.cpp \
+  htmldiffalgodisplay.cpp ldapsearchdialog.cpp broadcaststatus.cpp kresourceprefs.cpp \
   kpixmapregionselectorwidget.cpp kpixmapregionselectordialog.cpp \
   kabcresourcecached.cpp kxface.cpp \
   kaccount.cpp kaddrbook.cpp kfoldertree.cpp kregexp3.cpp \
Index: libkdepim/addressesdialog.h
===================================================================
--- libkdepim/addressesdialog.h	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkdepim/addressesdialog.h	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -169,6 +169,8 @@
 
     void removeEntry();
     void saveAs();
+    void searchLdap();
+    void ldapSearchResult();
     void launchAddressBook();
 
     void filterChanged( const QString & );
Index: libkdepim/addresseelineedit.cpp
===================================================================
--- libkdepim/addresseelineedit.cpp	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkdepim/addresseelineedit.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -539,9 +539,8 @@
       int weight = config.readNumEntry( resource->identifier(), 60 );
       s_completionSources->append( resource->resourceName() );
       KABC::Resource::Iterator it;
-      if ( resource->type() != "ldapkio" )
-        for ( it = resource->begin(); it != resource->end(); ++it )
-          addContact( *it, weight, s_completionSources->size()-1 );
+      for ( it = resource->begin(); it != resource->end(); ++it )
+        addContact( *it, weight, s_completionSources->size()-1 );
     }
   }
 
Index: libkdepim/ldapsearchdialog.cpp
===================================================================
--- libkdepim/ldapsearchdialog.cpp	(.../tags/KDE/3.5.9/kdepim)	(wersja 0)
+++ libkdepim/ldapsearchdialog.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -0,0 +1,468 @@
+/* ldapsearchdialogimpl.cpp - LDAP access
+ *      Copyright (C) 2002 Klarälvdalens Datakonsult AB
+ *
+ *      Author: Steffen Hansen <hansen@kde.org>
+ *
+ * This file is free software; you can redistribute it and/or modify
+ * it under the terms of the GNU General Public License as published by
+ * the Free Software Foundation; either version 2 of the License, or
+ * (at your option) any later version.
+ *
+ * This file is distributed in the hope that it will be useful,
+ * but WITHOUT ANY WARRANTY; without even the implied warranty of
+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+ * GNU General Public License for more details.
+ *
+ * You should have received a copy of the GNU General Public License
+ * along with this program; if not, write to the Free Software
+ * Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA 02111-1307, USA
+ */
+
+#include "ldapsearchdialog.h"
+#include "ldapclient.h"
+
+#include <qcheckbox.h>
+#include <qgroupbox.h>
+#include <qheader.h>
+#include <qlabel.h>
+#include <qlayout.h>
+#include <qlistview.h>
+#include <qpushbutton.h>
+
+#include <kabc/addresslineedit.h>
+#include <kapplication.h>
+#include <kcombobox.h>
+#include <kconfig.h>
+#include <klineedit.h>
+#include <klocale.h>
+#include <kmessagebox.h>
+
+using namespace KPIM;
+
+static QString asUtf8( const QByteArray &val )
+{
+  if ( val.isEmpty() )
+    return QString::null;
+
+  const char *data = val.data();
+
+  //QString::fromUtf8() bug workaround
+  if ( data[ val.size() - 1 ] == '\0' )
+    return QString::fromUtf8( data, val.size() - 1 );
+  else
+    return QString::fromUtf8( data, val.size() );
+}
+
+static QString join( const KPIM::LdapAttrValue& lst, const QString& sep )
+{
+  QString res;
+  bool alredy = false;
+  for ( KPIM::LdapAttrValue::ConstIterator it = lst.begin(); it != lst.end(); ++it ) {
+    if ( alredy )
+      res += sep;
+    alredy = TRUE;
+    res += asUtf8( *it );
+  }
+  return res;
+}
+
+static QMap<QString, QString>& adrbookattr2ldap()
+{
+  static QMap<QString, QString> keys;
+
+  if ( keys.isEmpty() ) {
+    keys[ i18n( "Title" ) ] = "title";
+    keys[ i18n( "Full Name" ) ] = "cn";
+    keys[ i18n( "Email" ) ] = "mail";
+    keys[ i18n( "Home Number" ) ] = "homePhone";
+    keys[ i18n( "Work Number" ) ] = "telephoneNumber";
+    keys[ i18n( "Mobile Number" ) ] = "mobile";
+    keys[ i18n( "Fax Number" ) ] = "facsimileTelephoneNumber";
+    keys[ i18n( "Pager" ) ] = "pager";
+    keys[ i18n( "Street") ] = "street";
+    keys[ i18n( "State" ) ] = "st";
+    keys[ i18n( "Country" ) ] = "co";
+    keys[ i18n( "City" ) ] = "l";
+    keys[ i18n( "Organization" ) ] = "o";
+    keys[ i18n( "Company" ) ] = "Company";
+    keys[ i18n( "Department" ) ] = "department";
+    keys[ i18n( "Zip Code" ) ] = "postalCode";
+    keys[ i18n( "Postal Address" ) ] = "postalAddress";
+    keys[ i18n( "Description" ) ] = "description";
+    keys[ i18n( "User ID" ) ] = "uid";
+  }
+  return keys;
+}
+
+class ContactListItem : public QListViewItem
+{
+  public:
+    ContactListItem( QListView* parent, const KPIM::LdapAttrMap& attrs )
+      : QListViewItem( parent ), mAttrs( attrs )
+    { }
+
+    KPIM::LdapAttrMap mAttrs;
+
+    virtual QString text( int col ) const
+    {
+      // Look up a suitable attribute for column col
+      const QString colName = listView()->columnText( col );
+      const QString ldapAttrName = adrbookattr2ldap()[ colName ];
+      return join( mAttrs[ ldapAttrName ], ", " );
+    }
+};
+
+LDAPSearchDialog::LDAPSearchDialog( QWidget* parent, const char* name )
+  : KDialogBase( Plain, i18n( "Search for Addresses in Directory" ), Help | User1 |
+    User2 | User3 | Cancel, Default, parent, name, false, true )
+{
+  setButtonCancel( KStdGuiItem::close() );
+  QFrame *page = plainPage();
+  QVBoxLayout *topLayout = new QVBoxLayout( page, marginHint(), spacingHint() );
+
+  QGroupBox *groupBox = new QGroupBox( i18n( "Search for Addresses in Directory" ),
+                                       page );
+  groupBox->setFrameShape( QGroupBox::Box );
+  groupBox->setFrameShadow( QGroupBox::Sunken );
+  groupBox->setColumnLayout( 0, Qt::Vertical );
+  QGridLayout *boxLayout = new QGridLayout( groupBox->layout(), 2,
+                                            5, spacingHint() );
+  boxLayout->setColStretch( 1, 1 );
+
+  QLabel *label = new QLabel( i18n( "Search for:" ), groupBox );
+  boxLayout->addWidget( label, 0, 0 );
+
+  mSearchEdit = new KLineEdit( groupBox );
+  boxLayout->addWidget( mSearchEdit, 0, 1 );
+  label->setBuddy( mSearchEdit );
+
+  label = new QLabel( i18n( "in" ), groupBox );
+  boxLayout->addWidget( label, 0, 2 );
+
+  mFilterCombo = new KComboBox( groupBox );
+  mFilterCombo->insertItem( i18n( "Name" ) );
+  mFilterCombo->insertItem( i18n( "Email" ) );
+  mFilterCombo->insertItem( i18n( "Home Number" ) );
+  mFilterCombo->insertItem( i18n( "Work Number" ) );
+  boxLayout->addWidget( mFilterCombo, 0, 3 );
+
+  QSize buttonSize;
+  mSearchButton = new QPushButton( i18n( "Stop" ), groupBox );
+  buttonSize = mSearchButton->sizeHint();
+  mSearchButton->setText( i18n( "Search" ) );
+  if ( buttonSize.width() < mSearchButton->sizeHint().width() )
+    buttonSize = mSearchButton->sizeHint();
+  mSearchButton->setFixedWidth( buttonSize.width() );
+
+  mSearchButton->setDefault( true );
+  boxLayout->addWidget( mSearchButton, 0, 4 );
+
+  mRecursiveCheckbox = new QCheckBox( i18n( "Recursive search" ), groupBox  );
+  mRecursiveCheckbox->setChecked( true );
+  boxLayout->addMultiCellWidget( mRecursiveCheckbox, 1, 1, 0, 4 );
+
+  mSearchType = new KComboBox( groupBox );
+  mSearchType->insertItem( i18n( "Contains" ) );
+  mSearchType->insertItem( i18n( "Starts With" ) );
+  boxLayout->addMultiCellWidget( mSearchType, 1, 1, 3, 4 );
+
+  topLayout->addWidget( groupBox );
+
+  mResultListView = new QListView( page );
+  mResultListView->setSelectionMode( QListView::Multi );
+  mResultListView->setAllColumnsShowFocus( true );
+  mResultListView->setShowSortIndicator( true );
+  topLayout->addWidget( mResultListView );
+
+  resize( QSize( 600, 400).expandedTo( minimumSizeHint() ) );
+
+  setButtonText( User1, i18n( "Unselect All" ) );
+  setButtonText( User2, i18n( "Select All" ) );
+  setButtonText( User3, i18n( "Add Selected" ) );
+
+  mNumHosts = 0;
+  mIsOK = false;
+
+  connect( mRecursiveCheckbox, SIGNAL( toggled( bool ) ),
+	   this, SLOT( slotSetScope( bool ) ) );
+  connect( mSearchButton, SIGNAL( clicked() ),
+	   this, SLOT( slotStartSearch() ) );
+
+  setTabOrder(mSearchEdit, mFilterCombo);
+  setTabOrder(mFilterCombo, mSearchButton);
+  mSearchEdit->setFocus();
+
+  restoreSettings();
+}
+
+LDAPSearchDialog::~LDAPSearchDialog()
+{
+  saveSettings();
+}
+
+void LDAPSearchDialog::restoreSettings()
+{
+  // Create one KPIM::LdapClient per selected server and configure it.
+
+  // First clean the list to make sure it is empty at
+  // the beginning of the process
+  mLdapClientList.setAutoDelete( true );
+  mLdapClientList.clear();
+
+  KConfig kabConfig( "kaddressbookrc" );
+  kabConfig.setGroup( "LDAPSearch" );
+  mSearchType->setCurrentItem( kabConfig.readNumEntry( "SearchType", 0 ) );
+
+  // then read the config file and register all selected
+  // server in the list
+  KConfig* config = KABC::AddressLineEdit::config(); // singleton kabldaprc config object
+  KConfigGroupSaver saver( config, "LDAP" );
+  mNumHosts = config->readUnsignedNumEntry( "NumSelectedHosts" );
+  if ( !mNumHosts ) {
+    KMessageBox::error( this, i18n( "You must select a LDAP server before searching.\nYou can do this from the menu Settings/Configure KAddressBook." ) );
+    mIsOK = false;
+  } else {
+    mIsOK = true;
+    for ( int j = 0; j < mNumHosts; ++j ) {
+        KPIM::LdapServer ldapServer;
+
+      QString host = config->readEntry( QString( "SelectedHost%1" ).arg( j ), "" );
+      if ( !host.isEmpty() )
+          ldapServer.setHost( host );
+
+      int port = config->readUnsignedNumEntry( QString( "SelectedPort%1" ).arg( j ) );
+      if ( port )
+        ldapServer.setPort( port );
+
+      QString base = config->readEntry( QString( "SelectedBase%1" ).arg( j ), "" );
+      if ( !base.isEmpty() )
+        ldapServer.setBaseDN( base );
+
+      QString bindDN = config->readEntry( QString( "SelectedBind%1" ).arg( j ), "" );
+      if ( !bindDN.isEmpty() )
+        ldapServer.setBindDN( bindDN );
+
+      QString pwdBindDN = config->readEntry( QString( "SelectedPwdBind%1" ).arg( j ), "" );
+      if ( !pwdBindDN.isEmpty() )
+        ldapServer.setPwdBindDN( pwdBindDN );
+
+      KPIM::LdapClient* ldapClient = new KPIM::LdapClient( 0, this, "ldapclient" );
+      ldapClient->setServer( ldapServer );
+      
+      QStringList attrs;
+
+      for ( QMap<QString,QString>::Iterator it = adrbookattr2ldap().begin(); it != adrbookattr2ldap().end(); ++it )
+        attrs << *it;
+
+      ldapClient->setAttrs( attrs );
+
+      connect( ldapClient, SIGNAL( result( const KPIM::LdapObject& ) ),
+	       this, SLOT( slotAddResult( const KPIM::LdapObject& ) ) );
+      connect( ldapClient, SIGNAL( done() ),
+	       this, SLOT( slotSearchDone() ) );
+      connect( ldapClient, SIGNAL( error( const QString& ) ),
+	       this, SLOT( slotError( const QString& ) ) );
+
+      mLdapClientList.append( ldapClient );
+    }
+
+/** CHECKIT*/
+    while ( mResultListView->header()->count() > 0 ) {
+      mResultListView->removeColumn(0);
+    }
+
+    mResultListView->addColumn( i18n( "Full Name" ) );
+    mResultListView->addColumn( i18n( "Email" ) );
+    mResultListView->addColumn( i18n( "Home Number" ) );
+    mResultListView->addColumn( i18n( "Work Number" ) );
+    mResultListView->addColumn( i18n( "Mobile Number" ) );
+    mResultListView->addColumn( i18n( "Fax Number" ) );
+    mResultListView->addColumn( i18n( "Company" ) );
+    mResultListView->addColumn( i18n( "Organization" ) );
+    mResultListView->addColumn( i18n( "Street" ) );
+    mResultListView->addColumn( i18n( "State" ) );
+    mResultListView->addColumn( i18n( "Country" ) );
+    mResultListView->addColumn( i18n( "Zip Code" ) );
+    mResultListView->addColumn( i18n( "Postal Address" ) );
+    mResultListView->addColumn( i18n( "City" ) );
+    mResultListView->addColumn( i18n( "Department" ) );
+    mResultListView->addColumn( i18n( "Description" ) );
+    mResultListView->addColumn( i18n( "User ID" ) );
+    mResultListView->addColumn( i18n( "Title" ) );
+
+    mResultListView->clear();
+  }
+}
+
+void LDAPSearchDialog::saveSettings()
+{
+  KConfig config( "kaddressbookrc" );
+  config.setGroup( "LDAPSearch" );
+  config.writeEntry( "SearchType", mSearchType->currentItem() );
+  config.sync();
+}
+
+void LDAPSearchDialog::cancelQuery()
+{
+  for ( KPIM::LdapClient* client = mLdapClientList.first(); client; client = mLdapClientList.next() ) {
+    client->cancelQuery();
+  }
+}
+
+void LDAPSearchDialog::slotAddResult( const KPIM::LdapObject& obj )
+{
+  new ContactListItem( mResultListView, obj.attrs );
+}
+
+void LDAPSearchDialog::slotSetScope( bool rec )
+{
+  for ( KPIM::LdapClient* client = mLdapClientList.first(); client; client = mLdapClientList.next() ) {
+    if ( rec )
+      client->setScope( "sub" );
+    else
+      client->setScope( "one" );
+  }
+}
+
+QString LDAPSearchDialog::makeFilter( const QString& query, const QString& attr,
+                                      bool startsWith )
+{
+  /* The reasoning behind this filter is:
+   * If it's a person, or a distlist, show it, even if it doesn't have an email address.
+   * If it's not a person, or a distlist, only show it if it has an email attribute.
+   * This allows both resource accounts with an email address which are not a person and
+   * person entries without an email address to show up, while still not showing things
+   * like structural entries in the ldap tree. */
+  QString result( "&(|(objectclass=person)(objectclass=groupofnames)(mail=*))(" );
+  if( query.isEmpty() )
+    // Return a filter that matches everything
+    return result + "|(cn=*)(sn=*)" + ")";
+
+  if ( attr == i18n( "Name" ) ) {
+    result += startsWith ? "|(cn=%1*)(sn=%2*)" : "|(cn=*%1*)(sn=*%2*)";
+    result = result.arg( query ).arg( query );
+  } else {
+    result += (startsWith ? "%1=%2*" : "%1=*%2*");
+    if ( attr == i18n( "Email" ) ) {
+      result = result.arg( "mail" ).arg( query );
+    } else if ( attr == i18n( "Home Number" ) ) {
+      result = result.arg( "homePhone" ).arg( query );
+    } else if ( attr == i18n( "Work Number" ) ) {
+      result = result.arg( "telephoneNumber" ).arg( query );
+    } else {
+      // Error?
+      result = QString::null;
+      return result;
+    }
+  }
+  result += ")";
+  return result;
+}
+
+void LDAPSearchDialog::slotStartSearch()
+{
+  cancelQuery();
+
+  QApplication::setOverrideCursor( Qt::waitCursor );
+  mSearchButton->setText( i18n( "Stop" ) );
+
+  disconnect( mSearchButton, SIGNAL( clicked() ),
+              this, SLOT( slotStartSearch() ) );
+  connect( mSearchButton, SIGNAL( clicked() ),
+           this, SLOT( slotStopSearch() ) );
+
+  bool startsWith = (mSearchType->currentItem() == 1);
+
+  QString filter = makeFilter( mSearchEdit->text().stripWhiteSpace(), mFilterCombo->currentText(), startsWith );
+
+   // loop in the list and run the KPIM::LdapClients
+  mResultListView->clear();
+  for( KPIM::LdapClient* client = mLdapClientList.first(); client; client = mLdapClientList.next() ) {
+    client->startQuery( filter );
+  }
+
+  saveSettings();
+}
+
+void LDAPSearchDialog::slotStopSearch()
+{
+  cancelQuery();
+  slotSearchDone();
+}
+
+void LDAPSearchDialog::slotSearchDone()
+{
+  // If there are no more active clients, we are done.
+  for ( KPIM::LdapClient* client = mLdapClientList.first(); client; client = mLdapClientList.next() ) {
+    if ( client->isActive() )
+      return;
+  }
+
+  disconnect( mSearchButton, SIGNAL( clicked() ),
+              this, SLOT( slotStopSearch() ) );
+  connect( mSearchButton, SIGNAL( clicked() ),
+           this, SLOT( slotStartSearch() ) );
+
+  mSearchButton->setText( i18n( "Search" ) );
+  QApplication::restoreOverrideCursor();
+}
+
+void LDAPSearchDialog::slotError( const QString& error )
+{
+  QApplication::restoreOverrideCursor();
+  KMessageBox::error( this, error );
+}
+
+void LDAPSearchDialog::closeEvent( QCloseEvent* e )
+{
+  slotStopSearch();
+  e->accept();
+}
+
+/*!
+ * Returns a ", " separated list of email addresses that were
+ * checked by the user
+ */
+QString LDAPSearchDialog::selectedEMails() const
+{
+  QStringList result;
+  ContactListItem* cli = static_cast<ContactListItem*>( mResultListView->firstChild() );
+  while ( cli ) {
+    if ( cli->isSelected() ) {
+      QString email = asUtf8( cli->mAttrs[ "mail" ].first() ).stripWhiteSpace();
+      if ( !email.isEmpty() ) {
+        QString name = asUtf8( cli->mAttrs[ "cn" ].first() ).stripWhiteSpace();
+        if ( name.isEmpty() ) {
+          result << email;
+        } else {
+          result << name + " <" + email + ">";
+        }
+      }
+    }
+    cli = static_cast<ContactListItem*>( cli->nextSibling() );
+  }
+
+  return result.join( ", " );
+}
+
+void LDAPSearchDialog::slotHelp()
+{
+  kapp->invokeHelp( "ldap-queries" );
+}
+
+void LDAPSearchDialog::slotUser1()
+{
+  mResultListView->selectAll( false );
+}
+
+void LDAPSearchDialog::slotUser2()
+{
+  mResultListView->selectAll( true );
+}
+
+void LDAPSearchDialog::slotUser3()
+{
+  emit addresseesAdded();
+}
+
+#include "ldapsearchdialog.moc"
Index: libkcal/resourcelocaldir.cpp
===================================================================
--- libkcal/resourcelocaldir.cpp	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/resourcelocaldir.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -23,6 +23,7 @@
 #include <stdlib.h>
 
 #include <qdatetime.h>
+#include <qfileinfo.h>
 #include <qstring.h>
 #include <qptrlist.h>
 
@@ -112,39 +113,50 @@
   delete mLock;
 }
 
+bool ResourceLocalDir::doOpen()
+{
+  QFileInfo dirInfo( mURL.path() );
+  return dirInfo.isDir() && dirInfo.isReadable() &&
+         ( dirInfo.isWritable() || readOnly() );
+}
+
 bool ResourceLocalDir::doLoad()
 {
   kdDebug(5800) << "ResourceLocalDir::load()" << endl;
 
   mCalendar.close();
   QString dirName = mURL.path();
-  bool success = true;
 
   if ( !( KStandardDirs::exists( dirName ) || KStandardDirs::exists( dirName + "/") ) ) {
-    kdDebug(5800) << "ResourceLocalDir::load(): Directory '" << dirName << "' doesn't exist yet. Creating it..." << endl;
-
+    kdDebug(5800) << "ResourceLocalDir::load(): Directory '" << dirName 
+                  << "' doesn't exist yet. Creating it..." << endl;
     // Create the directory. Use 0775 to allow group-writable if the umask
     // allows it (permissions will be 0775 & ~umask). This is desired e.g. for
     // group-shared directories!
-    success = KStandardDirs::makeDir( dirName, 0775 );
-  } else {
+    return KStandardDirs::makeDir( dirName, 0775 );
+  }
 
-    kdDebug(5800) << "ResourceLocalDir::load(): '" << dirName << "'" << endl;
-    QDir dir( dirName );
+  // The directory exists. Now try to open (the files in) it.
+  kdDebug(5800) << "ResourceLocalDir::load(): '" << dirName << "'" << endl;
+  QFileInfo dirInfo( dirName );
+  if ( !( dirInfo.isDir() && dirInfo.isReadable() && 
+          ( dirInfo.isWritable() || readOnly() ) ) )
+    return false;
 
-    QStringList entries = dir.entryList( QDir::Files | QDir::Readable );
+  QDir dir( dirName );
+  QStringList entries = dir.entryList( QDir::Files | QDir::Readable );
 
-    QStringList::ConstIterator it;
-    for( it = entries.begin(); it != entries.end(); ++it ) {
-      if ( (*it).endsWith( "~" ) ) // is backup file, ignore it
-        continue;
+  bool success = true;
+  QStringList::ConstIterator it;
+  for( it = entries.constBegin(); it != entries.constEnd(); ++it ) {
+    if ( (*it).endsWith( "~" ) ) // is backup file, ignore it
+      continue;
 
-      QString fileName = dirName + "/" + *it;
-      kdDebug(5800) << " read '" << fileName << "'" << endl;
-      CalendarLocal cal( mCalendar.timeZoneId() );
-      if ( !doFileLoad( cal, fileName ) ) {
-        success = false;
-      }
+    QString fileName = dirName + "/" + *it;
+    kdDebug(5800) << " read '" << fileName << "'" << endl;
+    CalendarLocal cal( mCalendar.timeZoneId() );
+    if ( !doFileLoad( cal, fileName ) ) {
+      success = false;
     }
   }
 
Index: libkcal/localdir.desktop
===================================================================
--- libkcal/localdir.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/localdir.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,5 +1,4 @@
 [Desktop Entry]
-Encoding=UTF-8
 Name=Calendar in Local Directory
 Name[af]=Kalender in plaaslike gids
 Name[be]=Каляндар у лякальным каталёгу
@@ -27,6 +26,7 @@
 Name[is]=Dagatal í staðbundinni möppu
 Name[it]=Calendario nella directory locale
 Name[ja]=ローカルディレクトリのカレンダー
+Name[ka]=კალენდარი ლოკალურ დირექტორიაში
 Name[kk]=Жергілікті каталогтағы күнтізбе
 Name[km]=ប្រតិទិន​នៅ​ក្នុង​ថត​មូលដ្ឋាន
 Name[lt]=Kalendorius vietiniame aplanke
Index: libkcal/local.desktop
===================================================================
--- libkcal/local.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/local.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,5 +1,4 @@
 [Desktop Entry]
-Encoding=UTF-8
 Name=Calendar in Local File
 Name[af]=Kalender in plaaslike lêer
 Name[be]=Каляндар у лякальным файле
@@ -27,6 +26,7 @@
 Name[is]=Dagatal í staðbundinni skrá
 Name[it]=Calendario in file locale
 Name[ja]=ローカルファイルのカレンダー
+Name[ka]=კალენდარი ლოკალურ ფაილში
 Name[kk]=Жергілікті файлдағы күнтізбе
 Name[km]=ប្រតិទិន​នៅ​ក្នុង​ឯកសារ​មូលដ្ឋាន
 Name[lt]=Kalendorius vietinėje byloje
Index: libkcal/kcal_manager.desktop
===================================================================
--- libkcal/kcal_manager.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/kcal_manager.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,6 +1,5 @@
 # KDE Config File
 [Desktop Entry]
-Encoding=UTF-8
 Name=Calendar
 Name[af]=Kalender
 Name[ar]=التقويم
@@ -30,6 +29,7 @@
 Name[is]=Dagatal
 Name[it]=Calendario
 Name[ja]=カレンダー
+Name[ka]=კალენდარი
 Name[kk]=Күнтізбе
 Name[km]=ប្រតិទិន
 Name[lt]=Kalendorius
@@ -56,7 +56,8 @@
 Name[th]=บันทึกประจำวัน
 Name[tr]=Takvim
 Name[uk]=Календар
-Name[uz]=Календар
+Name[uz]=Kalendar
+Name[uz@cyrillic]=Календар
 Name[zh_CN]=日历
 Name[zh_TW]=行事曆
 Type=Service
Index: libkcal/calendarresources.cpp
===================================================================
--- libkcal/calendarresources.cpp	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/calendarresources.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -183,12 +183,12 @@
 {
   return mDestinationPolicy->parent();
 }
+
 void CalendarResources::setDialogParentWidget( QWidget *parent )
 {
   mDestinationPolicy->setParent( parent );
 }
 
-
 void CalendarResources::close()
 {
   kdDebug(5800) << "CalendarResources::close" << endl;
Index: libkcal/libical/tzdata/iso3166.tab
===================================================================
--- libkcal/libical/tzdata/iso3166.tab	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/tzdata/iso3166.tab	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,12 +1,12 @@
 # ISO 3166 alpha-2 country codes
 #
-# @(#)iso3166.tab	8.4
+# @(#)iso3166.tab	8.5
 #
 # From Paul Eggert (2006-09-27):
 #
 # This file contains a table with the following columns:
 # 1.  ISO 3166-1 alpha-2 country code, current as of
-#     ISO 3166-1 Newsletter No. V-12 (2006-09-26).  See:
+#     ISO 3166-1 Newsletter VI-1 (2007-09-21).  See:
 #     <a href="http://www.iso.org/iso/en/prods-services/iso3166ma/index.html">
 #     ISO 3166 Maintenance agency (ISO 3166/MA)
 #     </a>.
@@ -47,6 +47,7 @@
 BH	Bahrain
 BI	Burundi
 BJ	Benin
+BL	St Barthelemy
 BM	Bermuda
 BN	Brunei
 BO	Bolivia
@@ -159,6 +160,7 @@
 MC	Monaco
 MD	Moldova
 ME	Montenegro
+MF	St Martin (French part)
 MG	Madagascar
 MH	Marshall Islands
 MK	Macedonia
Index: libkcal/libical/tzdata/zone.tab
===================================================================
--- libkcal/libical/tzdata/zone.tab	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/tzdata/zone.tab	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,4 +1,4 @@
-# @(#)zone.tab	8.11
+# @(#)zone.tab	8.16
 #
 # TZ zone descriptions
 #
@@ -42,7 +42,8 @@
 AQ	-6640+14001	Antarctica/DumontDUrville	Dumont-d'Urville Station, Terre Adelie
 AQ	-690022+0393524	Antarctica/Syowa	Syowa Station, E Ongul I
 AR	-3436-05827	America/Argentina/Buenos_Aires	Buenos Aires (BA, CF)
-AR	-3124-06411	America/Argentina/Cordoba	most locations (CB, CC, CN, ER, FM, LP, MN, NQ, RN, SA, SE, SF, SL)
+AR	-3124-06411	America/Argentina/Cordoba	most locations (CB, CC, CN, ER, FM, LP, MN, NQ, RN, SA, SE, SF)
+AR	-3319-06621	America/Argentina/San_Luis	San Luis (SL)
 AR	-2411-06518	America/Argentina/Jujuy	Jujuy (JY)
 AR	-2649-06513	America/Argentina/Tucuman	Tucuman (TM)
 AR	-2828-06547	America/Argentina/Catamarca	Catamarca (CT), Chubut (CH)
@@ -77,6 +78,7 @@
 BH	+2623+05035	Asia/Bahrain
 BI	-0323+02922	Africa/Bujumbura
 BJ	+0629+00237	Africa/Porto-Novo
+BL	+1753-06251	America/St_Barthelemy
 BM	+3217-06446	Atlantic/Bermuda
 BN	+0456+11455	Asia/Brunei
 BO	-1630-06809	America/La_Paz
@@ -208,7 +210,7 @@
 IE	+5320-00615	Europe/Dublin
 IL	+3146+03514	Asia/Jerusalem
 IM	+5409-00428	Europe/Isle_of_Man
-IN	+2232+08822	Asia/Calcutta
+IN	+2232+08822	Asia/Kolkata
 IO	-0720+07225	Indian/Chagos
 IQ	+3321+04425	Asia/Baghdad
 IR	+3540+05126	Asia/Tehran
@@ -250,6 +252,7 @@
 MC	+4342+00723	Europe/Monaco
 MD	+4700+02850	Europe/Chisinau
 ME	+4226+01916	Europe/Podgorica
+MF	+1804-06305	America/Marigot
 MG	-1855+04731	Indian/Antananarivo
 MH	+0709+17112	Pacific/Majuro	most locations
 MH	+0905+16720	Pacific/Kwajalein	Kwajalein
@@ -339,8 +342,7 @@
 SG	+0117+10351	Asia/Singapore
 SH	-1555-00542	Atlantic/St_Helena
 SI	+4603+01431	Europe/Ljubljana
-SJ	+7800+01600	Arctic/Longyearbyen	Svalbard
-SJ	+7059-00805	Atlantic/Jan_Mayen	Jan Mayen
+SJ	+7800+01600	Arctic/Longyearbyen
 SK	+4809+01707	Europe/Bratislava
 SL	+0830-01315	Africa/Freetown
 SM	+4355+01228	Europe/San_Marino
@@ -410,7 +412,7 @@
 VE	+1030-06656	America/Caracas
 VG	+1827-06437	America/Tortola
 VI	+1821-06456	America/St_Thomas
-VN	+1045+10640	Asia/Saigon
+VN	+1045+10640	Asia/Ho_Chi_Minh
 VU	-1740+16825	Pacific/Efate
 WF	-1318-17610	Pacific/Wallis
 WS	-1350-17144	Pacific/Apia
Index: libkcal/libical/tzdata/southamerica
===================================================================
--- libkcal/libical/tzdata/southamerica	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/tzdata/southamerica	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,4 +1,4 @@
-# @(#)southamerica	8.12
+# @(#)southamerica	8.19
 # <pre>
 
 # This data is by no means authoritative; if you think you know better,
@@ -105,7 +105,11 @@
 # which did not result in the switch of a time zone, as they stayed 9 hours
 # from the International Date Line.
 Rule	Arg	1999	only	-	Oct	Sun>=1	0:00	1:00	S
-Rule	Arg	2000	only	-	Mar	Sun>=1	0:00	0	-
+# From Paul Eggert (2007-12-28):
+# DST was set to expire on March 5, not March 3, but since it was converted
+# to standard time on March 3 it's more convenient for us to pretend that
+# it ended on March 3.
+Rule	Arg	2000	only	-	Mar	3	0:00	0	-
 #
 # From Peter Gradelski via Steffen Thorsen (2000-03-01):
 # We just checked with our Sao Paulo office and they say the government of
@@ -140,6 +144,30 @@
 # This kind of things had always been done this way in Argentina.
 # We are still -03:00 all year round in all of the country.
 #
+# From Steffen Thorsen (2007-12-21):
+# A user (Leonardo Chaim) reported that Argentina will adopt DST....
+# all of the country (all Zone-entries) are affected.  News reports like
+# http://www.lanacion.com.ar/opinion/nota.asp?nota_id=973037 indicate
+# that Argentina will use DST next year as well, from October to
+# March, although exact rules are not given.
+#
+# From Jesper Norgaard Welen (2007-12-26)
+# The last hurdle of Argentina DST is over, the proposal was approved in
+# the lower chamber too (Deputados) with a vote 192 for and 2 against.
+# By the way thanks to Mariano Absatz and Daniel Mario Vega for the link to
+# the original scanned proposal, where the dates and the zero hours are
+# clear and unambiguous...This is the article about final approval:
+# <a href="http://www.lanacion.com.ar/politica/nota.asp?nota_id=973996">
+# http://www.lanacion.com.ar/politica/nota.asp?nota_id=973996
+# </a>
+#
+# From Paul Eggert (2007-12-22):
+# For dates after mid-2008, the following rules are my guesses and
+# are quite possibly wrong, but are more likely than no DST at all.
+Rule	Arg	2007	only	-	Dec	30	0:00	1:00	S
+Rule	Arg	2008	max	-	Mar	Sun>=15	0:00	0	-
+Rule	Arg	2008	max	-	Oct	Sun>=1	0:00	1:00	S
+ 
 # From Mariano Absatz (2004-05-21):
 # Today it was officially published that the Province of Mendoza is changing
 # its timezone this winter... starting tomorrow night....
@@ -200,6 +228,76 @@
 # http://www.sanjuan.gov.ar/prensa/archivo/000426.html
 # http://www.sanjuan.gov.ar/prensa/archivo/000441.html
 
+# From Alex Krivenyshev (2008-01-17):
+# Here are articles that Argentina Province San Luis is planning to end DST
+# as earlier as upcoming Monday January 21, 2008 or February 2008:
+#
+# Provincia argentina retrasa reloj y marca diferencia con resto del pais
+# (Argentine Province delayed clock and mark difference with the rest of the
+# country)
+# <a href="http://cl.invertia.com/noticias/noticia.aspx?idNoticia=200801171849_EFE_ET4373&idtel">
+# http://cl.invertia.com/noticias/noticia.aspx?idNoticia=200801171849_EFE_ET4373&idtel
+# </a>
+#
+# Es inminente que en San Luis atrasen una hora los relojes
+# (It is imminent in San Luis clocks one hour delay)
+# <a href="http://www.lagaceta.com.ar/vernotae.asp?id_nota=253414">
+# http://www.lagaceta.com.ar/vernotae.asp?id_nota=253414
+# </a>
+#
+# <a href="http://www.worldtimezone.net/dst_news/dst_news_argentina02.html">
+# http://www.worldtimezone.net/dst_news/dst_news_argentina02.html
+# </a>
+
+# From Jesper Norgaard Welen (2008-01-18):
+# The page of the San Luis provincial government
+# <a href="http://www.sanluis.gov.ar/notas.asp?idCanal=0&id=22812">
+# http://www.sanluis.gov.ar/notas.asp?idCanal=0&id=22812
+# </a>
+# confirms what Alex Krivenyshev has earlier sent to the tz
+# emailing list about that San Luis plans to return to standard
+# time much earlier than the rest of the country. It also
+# confirms that upon request the provinces San Juan and Mendoza 
+# refused to follow San Luis in this change. 
+# 
+# The change is supposed to take place Monday the 21.st at 0:00
+# hours. As far as I understand it if this goes ahead, we need
+# a new timezone for San Luis (although there are also documented
+# independent changes in the southamerica file of San Luis in
+# 1990 and 1991 which has not been confirmed).
+
+# From Jesper Norgaard Welen (2008-01-25):
+# Unfortunately the below page has become defunct, about the San Luis
+# time change. Perhaps because it now is part of a group of pages "Most
+# important pages of 2008."
+#
+# You can use
+# <a href="http://www.sanluis.gov.ar/notas.asp?idCanal=8141&id=22834">
+# http://www.sanluis.gov.ar/notas.asp?idCanal=8141&id=22834
+# </a>
+# instead it seems. Or use "Buscador" from the main page of the San Luis
+# government, and fill in "huso" and click OK, and you will get 3 pages
+# from which the first one is identical to the above.
+
+# From Mariano Absatz (2008-01-28):
+# I can confirm that the Province of San Luis (and so far only that
+# province) decided to go back to UTC-3 effective midnight Jan 20th 2008
+# (that is, Monday 21st at 0:00 is the time the clocks were delayed back
+# 1 hour), and they intend to keep UTC-3 as their timezone all year round
+# (that is, unless they change their mind any minute now).
+#
+# So we'll have to add yet another city to 'southamerica' (I think San
+# Luis city is the mos populated city in the Province, so it'd be
+# America/Argentina/San_Luis... of course I can't remember if San Luis's
+# history of particular changes goes along with Mendoza or San Juan :-(
+# (I only remember not being able to collect hard facts about San Luis
+# back in 2004, when these provinces changed to UTC-4 for a few days, I
+# mailed them personally and never got an answer).
+
+# From Arthur David Olson (2008-03-15):
+# Until there's better information, asssume San Luis was like San Juan
+# rather than Mendoza (since San Juan has a simpler DST history).
+
 # Unless otherwise specified, data are from Shanks & Pottenger through 1992,
 # from the IATA otherwise.  As noted below, Shanks & Pottenger say that
 # America/Cordoba split into 6 subregions during 1991/1992, but we
@@ -214,7 +312,7 @@
 			-4:00	Arg	AR%sT	1969 Oct  5
 			-3:00	Arg	AR%sT	1999 Oct  3
 			-4:00	Arg	AR%sT	2000 Mar  3
-			-3:00	-	ART
+			-3:00	Arg	AR%sT
 #
 # Santa Fe (SF), Entre Rios (ER), Corrientes (CN), Misiones (MN), Chaco (CC),
 # Formosa (FM), Salta (SA), Santiago del Estero (SE), Cordoba (CB),
@@ -237,7 +335,7 @@
 			-4:00	-	WART	1991 Oct 20
 			-3:00	Arg	AR%sT	1999 Oct  3
 			-4:00	Arg	AR%sT	2000 Mar  3
-			-3:00	-	ART
+			-3:00	Arg	AR%sT
 #
 # Tucuman (TM)
 Zone America/Argentina/Tucuman -4:20:52 - LMT	1894 Oct 31
@@ -250,7 +348,7 @@
 			-4:00	Arg	AR%sT	2000 Mar  3
 			-3:00	-	ART	2004 Jun  1
 			-4:00	-	WART	2004 Jun 13
-			-3:00	-	ART
+			-3:00	Arg	AR%sT
 #
 # La Rioja (LR)
 Zone America/Argentina/La_Rioja -4:27:24 - LMT	1894 Oct 31
@@ -263,7 +361,7 @@
 			-4:00	Arg	AR%sT	2000 Mar  3
 			-3:00	-	ART	2004 Jun  1
 			-4:00	-	WART	2004 Jun 20
-			-3:00	-	ART
+			-3:00	Arg	AR%sT
 #
 # San Juan (SJ)
 Zone America/Argentina/San_Juan -4:34:04 - LMT	1894 Oct 31
@@ -276,7 +374,7 @@
 			-4:00	Arg	AR%sT	2000 Mar  3
 			-3:00	-	ART	2004 May 31
 			-4:00	-	WART	2004 Jul 25
-			-3:00	-	ART
+			-3:00	Arg	AR%sT
 #
 # Jujuy (JY)
 Zone America/Argentina/Jujuy -4:21:12 -	LMT	1894 Oct 31
@@ -290,7 +388,7 @@
 			-3:00	1:00	ARST	1992
 			-3:00	Arg	AR%sT	1999 Oct  3
 			-4:00	Arg	AR%sT	2000 Mar  3
-			-3:00	-	ART
+			-3:00	Arg	AR%sT
 #
 # Catamarca (CT), Chubut (CH)
 Zone America/Argentina/Catamarca -4:23:08 - LMT	1894 Oct 31
@@ -303,7 +401,7 @@
 			-4:00	Arg	AR%sT	2000 Mar  3
 			-3:00	-	ART	2004 Jun  1
 			-4:00	-	WART	2004 Jun 20
-			-3:00	-	ART
+			-3:00	Arg	AR%sT
 #
 # Mendoza (MZ)
 Zone America/Argentina/Mendoza -4:35:16 - LMT	1894 Oct 31
@@ -320,6 +418,20 @@
 			-4:00	Arg	AR%sT	2000 Mar  3
 			-3:00	-	ART	2004 May 23
 			-4:00	-	WART	2004 Sep 26
+			-3:00	Arg	AR%sT
+#
+# San Luis (SL)
+Zone America/Argentina/San_Luis -4:25:24 - LMT	1894 Oct 31
+			-4:16:48 -	CMT	1920 May
+			-4:00	-	ART	1930 Dec
+			-4:00	Arg	AR%sT	1969 Oct  5
+			-3:00	Arg	AR%sT	1991 Mar  1
+			-4:00	-	WART	1991 May  7
+			-3:00	Arg	AR%sT	1999 Oct  3
+			-4:00	Arg	AR%sT	2000 Mar  3
+			-3:00	-	ART	2004 May 31
+			-4:00	-	WART	2004 Jul 25
+			-3:00	Arg	AR%sT	2008 Jan 21
 			-3:00	-	ART
 #
 # Santa Cruz (SC)
@@ -331,7 +443,7 @@
 			-4:00	Arg	AR%sT	2000 Mar  3
 			-3:00	-	ART	2004 Jun  1
 			-4:00	-	WART	2004 Jun 20
-			-3:00	-	ART
+			-3:00	Arg	AR%sT
 #
 # Tierra del Fuego, Antartida e Islas del Atlantico Sur (TF)
 Zone America/Argentina/Ushuaia -4:33:12 - LMT 1894 Oct 31
@@ -342,7 +454,7 @@
 			-4:00	Arg	AR%sT	2000 Mar  3
 			-3:00	-	ART	2004 May 30
 			-4:00	-	WART	2004 Jun 20
-			-3:00	-	ART
+			-3:00	Arg	AR%sT
 
 # Aruba
 # Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
@@ -731,6 +843,26 @@
 # America/Santiago.  The pre-1980 Pacific/Easter data are dubious,
 # but we have no other source.
 
+# From German Poo-Caaman~o (2008-03-03):
+# Due to drought, Chile extends Daylight Time in three weeks.  This
+# is one-time change (Saturday 3/29 at 24:00 for America/Santiago
+# and Saturday 3/29 at 22:00 for Pacific/Easter)
+# The Supreme Decree is located at 
+# <a href="http://www.shoa.cl/servicios/supremo316.pdf">
+# http://www.shoa.cl/servicios/supremo316.pdf
+# </a>
+# and the instructions for 2008 are located in:
+# <a href="http://www.horaoficial.cl/cambio.htm">
+# http://www.horaoficial.cl/cambio.htm
+# </a>.
+
+# From Jos Miguel Garrido (2008-03-05):
+# ...
+# You could see the announces of the change on 
+# <a href="http://www.shoa.cl/noticias/2008/04hora/hora.htm">
+# http://www.shoa.cl/noticias/2008/04hora/hora.htm
+# </a>.
+
 # Rule	NAME	FROM	TO	TYPE	IN	ON	AT	SAVE	LETTER/S
 Rule	Chile	1927	1932	-	Sep	 1	0:00	1:00	S
 Rule	Chile	1928	1932	-	Apr	 1	0:00	0	-
@@ -761,7 +893,11 @@
 Rule	Chile	1998	only	-	Sep	27	4:00u	1:00	S
 Rule	Chile	1999	only	-	Apr	 4	3:00u	0	-
 Rule	Chile	1999	max	-	Oct	Sun>=9	4:00u	1:00	S
-Rule	Chile	2000	max	-	Mar	Sun>=9	3:00u	0	-
+Rule	Chile	2000	2007	-	Mar	Sun>=9	3:00u	0	-
+# N.B.: the end of March 29 in Chile is March 30 in Universal time,
+# which is used below in specifying the transition.
+Rule	Chile	2008	only	-	Mar	30	3:00u	0	-
+Rule	Chile	2009	max	-	Mar	Sun>=9	3:00u	0	-
 # IATA SSIM anomalies: (1992-02) says 1992-03-14;
 # (1996-09) says 1998-03-08.  Ignore these.
 # Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
@@ -1107,19 +1243,17 @@
 
 # Venezuela
 #
-# From Kiraz Janicke (2007-09-25), in
-# http://www.venezuelanalysis.com/analysis/2645:
-# The proposal ... involves turning the clock back half an hour from
-# +4.00 Greenwich Mean Time (GMT), to +4.30GMT, the time zone
-# Venezuela had until December 31, 1964, when the current time zone
-# was adopted. The change was due to take place on September 17 and
-# then on September 24, but has since been postponed until December
-# 31, to allow for compliance with international organizations, such
-# as the International Office of Weights and Measures.
+# From John Stainforth (2007-11-28):
+# ... the change for Venezuela originally expected for 2007-12-31 has
+# been brought forward to 2007-12-09.  The official announcement was
+# published today in the "Gaceta Oficial de la Republica Bolivariana
+# de Venezuela, numero 38.819" (official document for all laws or
+# resolution publication)
+# http://www.globovision.com/news.php?nid=72208
 
 # Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
 Zone	America/Caracas	-4:27:44 -	LMT	1890
 			-4:27:40 -	CMT	1912 Feb 12 # Caracas Mean Time?
 			-4:30	-	VET	1965	     # Venezuela Time
-			-4:00	-	VET	2008
+			-4:00	-	VET	2007 Dec  9 03:00
 			-4:30	-	VET
Index: libkcal/libical/tzdata/europe
===================================================================
--- libkcal/libical/tzdata/europe	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/tzdata/europe	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,4 +1,4 @@
-# @(#)europe	8.11
+# @(#)europe	8.12
 # <pre>
 
 # This data is by no means authoritative; if you think you know better,
@@ -1714,7 +1714,6 @@
 # come up with more definitive info about the timekeeping during the
 # war years it's probably best just do do the following for now:
 Link	Europe/Oslo	Arctic/Longyearbyen
-Link	Europe/Oslo	Atlantic/Jan_Mayen
 
 # Poland
 # Rule	NAME	FROM	TO	TYPE	IN	ON	AT	SAVE	LETTER/S
Index: libkcal/libical/tzdata/leapseconds
===================================================================
--- libkcal/libical/tzdata/leapseconds	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/tzdata/leapseconds	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,4 +1,4 @@
-# @(#)leapseconds	8.4
+# @(#)leapseconds	8.5
 
 # Allowance for leapseconds added to each timezone file.
 
@@ -46,26 +46,27 @@
 Leap	2005	Dec	31	23:59:60	+	S
 
 # INTERNATIONAL EARTH ROTATION AND REFERENCE SYSTEMS SERVICE (IERS)
+#
 # SERVICE INTERNATIONAL DE LA ROTATION TERRESTRE ET DES SYSTEMES DE REFERENCE
 #
 # SERVICE DE LA ROTATION TERRESTRE
-# OBSERVATOIRE DE PARIS
+# OBSERVATOIRE DE PARIS				
 # 61, Av. de l'Observatoire 75014 PARIS (France)
 # Tel.      : 33 (0) 1 40 51 22 26
 # FAX       : 33 (0) 1 40 51 22 91
 # Internet  : services.iers@obspm.fr
 #
-# Paris, 28 June 2007
+# Paris, 18 January 2008
 #
-# Bulletin C 34
+# Bulletin C 35
 #
-# To authorities responsible
+# To authorities responsible		
 # for the measurement and
-# distribution of time
+# distribution of time	
 #
 # INFORMATION ON UTC - TAI
 #
-# NO positive leap second will be introduced at the end of December 2007.
+# NO positive leap second will be introduced at the end of June 2008.
 # The difference between Coordinated Universal Time UTC and the
 # International Atomic Time TAI is :		
 #
@@ -77,6 +78,6 @@
 # will be no time step at the next possible date.
 #
 # Daniel GAMBIS
-# Director			
-# Earth Orientation Center of IERS
+# Head			
+# Earth Orientation Center of the IERS
 # Observatoire de Paris, France
Index: libkcal/libical/tzdata/northamerica
===================================================================
--- libkcal/libical/tzdata/northamerica	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/tzdata/northamerica	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,4 +1,4 @@
-# @(#)northamerica	8.18
+# @(#)northamerica	8.23
 # <pre>
 
 # also includes Central America and the Caribbean
@@ -2187,7 +2187,70 @@
 # says Cuban clocks will advance at midnight on March 10.
 # For lack of better information, assume Cuba will use US rules,
 # except that it switches at midnight standard time as usual.
+#
+# From Steffen Thorsen (2007-10-25):
+# Carlos Alberto Fonseca Arauz informed me that Cuba will end DST one week 
+# earlier - on the last Sunday of October, just like in 2006.
+# 
+# He supplied these references:
+# 
+# http://www.prensalatina.com.mx/article.asp?ID=%7B4CC32C1B-A9F7-42FB-8A07-8631AFC923AF%7D&language=ES
+# http://actualidad.terra.es/sociedad/articulo/cuba_llama_ahorrar_energia_cambio_1957044.htm
+# 
+# From Alex Kryvenishev (2007-10-25):
+# Here is also article from Granma (Cuba):
+# 
+# [Regira] el Horario Normal desde el [proximo] domingo 28 de octubre
+# http://www.granma.cubaweb.cu/2007/10/24/nacional/artic07.html
+# 
+# http://www.worldtimezone.com/dst_news/dst_news_cuba03.html
 
+# From Arthur David Olson (2008-03-09):
+# I'm in Maryland which is now observing United States Eastern Daylight
+# Time. At 9:44 local time I used RealPlayer to listen to
+# <a href="http://media.enet.cu/radioreloj">
+# http://media.enet.cu/radioreloj
+# </a>, a Cuban information station, and heard
+# the time announced as "ocho cuarenta y cuatro" ("eight forty-four"),
+# indicating that Cuba is still on standard time.
+
+# From Steffen Thorsen (2008-03-12):
+# It seems that Cuba will start DST on Sunday, 2007-03-16...
+# It was announced yesterday, according to this source (in Spanish):
+# <a href="http://www.nnc.cubaweb.cu/marzo-2008/cien-1-11-3-08.htm">
+# http://www.nnc.cubaweb.cu/marzo-2008/cien-1-11-3-08.htm
+# </a>
+#
+# Some more background information is posted here:
+# <a href="http://www.timeanddate.com/news/time/cuba-starts-dst-march-16.html">
+# http://www.timeanddate.com/news/time/cuba-starts-dst-march-16.html
+# </a>
+#
+# The article also says that Cuba has been observing DST since 1963,
+# while Shanks (and tzdata) has 1965 as the first date (except in the
+# 1940's). Many other web pages in Cuba also claim that it has been
+# observed since 1963, but with the exception of 1970 - an exception
+# which is not present in tzdata/Shanks. So there is a chance we need to
+# change some historic records as well.
+#
+# One example:
+# <a href="http://www.radiohc.cu/espanol/noticias/mar07/11mar/hor.htm">
+# http://www.radiohc.cu/espanol/noticias/mar07/11mar/hor.htm
+# </a>
+
+# From Jesper Norgaard Welen (2008-03-13):
+# The Cuban time change has just been confirmed on the most authoritative
+# web site, the Granma.  Please check out
+# <a href="http://www.granma.cubaweb.cu/2008/03/13/nacional/artic10.html">
+# http://www.granma.cubaweb.cu/2008/03/13/nacional/artic10.html
+# </a>
+#
+# Basically as expected after Steffen Thorsens information, the change
+# will take place midnight between Saturday and Sunday.
+
+# From Arthur David Olson (2008-03-12):
+# Assume Sun>=15 (third Sunday) going forward.
+
 # Rule	NAME	FROM	TO	TYPE	IN	ON	AT	SAVE	LETTER/S
 Rule	Cuba	1928	only	-	Jun	10	0:00	1:00	D
 Rule	Cuba	1928	only	-	Oct	10	0:00	0	S
@@ -2218,9 +2281,9 @@
 Rule	Cuba	1998	1999	-	Mar	lastSun	0:00s	1:00	D
 Rule	Cuba	1998	2003	-	Oct	lastSun	0:00s	0	S
 Rule	Cuba	2000	2006	-	Apr	Sun>=1	0:00s	1:00	D
-Rule	Cuba	2006	only	-	Oct	lastSun	0:00s	0	S
-Rule	Cuba	2007	max	-	Mar	Sun>=8	0:00s	1:00	D
-Rule	Cuba	2007	max	-	Nov	Sun>=1	0:00s	0	S
+Rule	Cuba	2006	max	-	Oct	lastSun	0:00s	0	S
+Rule	Cuba	2007	only	-	Mar	Sun>=8	0:00s	1:00	D
+Rule	Cuba	2008	max	-	Mar	Sun>=15	0:00s	1:00	D
 
 # Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
 Zone	America/Havana	-5:29:28 -	LMT	1890
@@ -2287,6 +2350,10 @@
 # Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
 Zone America/Guadeloupe	-4:06:08 -	LMT	1911 Jun 8	# Pointe a Pitre
 			-4:00	-	AST
+# St Barthelemy
+Link America/Guadeloupe	America/St_Barthelemy
+# St Martin (French part)
+Link America/Guadeloupe	America/Marigot
 
 # Guatemala
 #
Index: libkcal/libical/tzdata/asia
===================================================================
--- libkcal/libical/tzdata/asia	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/tzdata/asia	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,4 +1,4 @@
-# @(#)asia	8.12
+# @(#)asia	8.18
 # <pre>
 
 # This data is by no means authoritative; if you think you know better,
@@ -446,13 +446,13 @@
 
 # India
 # Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
-Zone	Asia/Calcutta	5:53:28 -	LMT	1880	# Kolkata
+Zone	Asia/Kolkata	5:53:28 -	LMT	1880	# Kolkata
 			5:53:20	-	HMT	1941 Oct    # Howrah Mean Time?
 			6:30	-	BURT	1942 May 15 # Burma Time
 			5:30	-	IST	1942 Sep
 			5:30	1:00	IST	1945 Oct 15
 			5:30	-	IST
-# The following are like Asia/Calcutta:
+# The following are like Asia/Kolkata:
 #	Andaman Is
 #	Lakshadweep (Laccadive, Minicoy and Amindivi Is)
 #	Nicobar Is
@@ -577,6 +577,15 @@
 # daylight saving time ...
 # http://uk.reuters.com/article/oilRpt/idUKBLA65048420070916
 #
+# From Roozbeh Pournader (2007-11-05):
+# This is quoted from Official Gazette of the Islamic Republic of
+# Iran, Volume 63, Number 18242, dated Tuesday 1386/6/24
+# [2007-10-16]. I am doing the best translation I can:...
+# The official time of the country will be moved forward for one hour
+# on the 24 hours of the first day of the month of Farvardin and will
+# be changed back to its previous state on the 24 hours of the
+# thirtieth day of Shahrivar.
+#
 # Rule	NAME	FROM	TO	TYPE	IN	ON	AT	SAVE	LETTER/S
 Rule	Iran	1978	1980	-	Mar	21	0:00	1:00	D
 Rule	Iran	1978	only	-	Oct	21	0:00	0	S
@@ -651,6 +660,21 @@
 #
 # So we'll ignore the Economist's claim.
 
+# From Steffen Thorsen (2008-03-10):
+# The cabinet in Iraq abolished DST last week, according to the following
+# news sources (in Arabic):
+# <a href="http://www.aljeeran.net/wesima_articles/news-20080305-98602.html">
+# http://www.aljeeran.net/wesima_articles/news-20080305-98602.html
+# </a>
+# <a href="http://www.aswataliraq.info/look/article.tpl?id=2047&IdLanguage=17&IdPublication=4&NrArticle=71743&NrIssue=1&NrSection=10">
+# http://www.aswataliraq.info/look/article.tpl?id=2047&IdLanguage=17&IdPublication=4&NrArticle=71743&NrIssue=1&NrSection=10
+# </a>
+#
+# We have published a short article in English about the change:
+# <a href="http://www.timeanddate.com/news/time/iraq-dumps-daylight-saving.html">
+# http://www.timeanddate.com/news/time/iraq-dumps-daylight-saving.html
+# </a>
+
 # Rule	NAME	FROM	TO	TYPE	IN	ON	AT	SAVE	LETTER/S
 Rule	Iraq	1982	only	-	May	1	0:00	1:00	D
 Rule	Iraq	1982	1984	-	Oct	1	0:00	0	S
@@ -661,8 +685,8 @@
 # IATA SSIM (1991/1996) says Apr 1 12:01am UTC; guess the `:01' is a typo.
 # Shanks & Pottenger say Iraq did not observe DST 1992/1997; ignore this.
 #
-Rule	Iraq	1991	max	-	Apr	 1	3:00s	1:00	D
-Rule	Iraq	1991	max	-	Oct	 1	3:00s	0	S
+Rule	Iraq	1991	2007	-	Apr	 1	3:00s	1:00	D
+Rule	Iraq	1991	2007	-	Oct	 1	3:00s	0	S
 # Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
 Zone	Asia/Baghdad	2:57:40	-	LMT	1890
 			2:57:36	-	BMT	1918	    # Baghdad Mean Time?
@@ -1678,7 +1702,7 @@
 # kept their clocks set five and a half hours ahead of Greenwich Mean
 # Time (GMT), in line with neighbor India.
 # From Paul Eggert (2006-04-18):
-# People who live in regions under Tamil control can use TZ='Asia/Calcutta',
+# People who live in regions under Tamil control can use [TZ='Asia/Kolkata'],
 # as that zone has agreed with the Tamil areas since our cutoff date of 1970.
 
 # From K Sethu (2006-04-25):
@@ -1768,10 +1792,62 @@
 # From Paul Eggert (2007-03-29):
 # Today the AP reported "Syria will switch to summertime at midnight Thursday."
 # http://www.iht.com/articles/ap/2007/03/29/africa/ME-GEN-Syria-Time-Change.php
-# For lack of better info, assume the rule changed to "last Friday in March"
-# this year.
-Rule	Syria	2007	max	-	Mar	lastFri	0:00	1:00	S
-Rule	Syria	2007	max	-	Oct	 1	0:00	0	-
+Rule	Syria	2007	only	-	Mar	lastFri	0:00	1:00	S
+# From Jesper Norgard (2007-10-27):
+# The sister center ICARDA of my work CIMMYT is confirming that Syria DST will
+# not take place 1.st November at 0:00 o'clock but 1.st November at 24:00 or
+# rather Midnight between Thursday and Friday. This does make more sence than
+# having it between Wednesday and Thursday (two workdays in Syria) since the
+# weekend in Syria is not Saturday and Sunday, but Friday and Saturday. So now
+# it is implemented at midnight of the last workday before weekend...
+# 
+# From Steffen Thorsen (2007-10-27):
+# Jesper Norgaard Welen wrote:
+# 
+# > "Winter local time in Syria will be observed at midnight of Thursday 1
+# > November 2007, and the clock will be put back 1 hour."
+# 
+# I found confirmation on this in this gov.sy-article (Arabic):
+# http://wehda.alwehda.gov.sy/_print_veiw.asp?FileName=12521710520070926111247
+# 
+# which using Google's translate tools says:
+# Council of Ministers also approved the commencement of work on 
+# identifying the winter time as of Friday, 2/11/2007 where the 60th 
+# minute delay at midnight Thursday 1/11/2007.
+Rule	Syria	2007	only	-	Nov	 Fri>=1	0:00	0	-
+
+# From Stephen Colebourne (2008-03-17):
+# For everyone's info, I saw an IATA time zone change for [Syria] for
+# this month (March 2008) in the last day or so...This is the data IATA
+# are now using:
+# Country     Time Standard   --- DST Start ---   --- DST End ---  DST
+# Name        Zone Variation   Time    Date        Time    Date
+# Variation
+# Syrian Arab
+# Republic    SY    +0200      2200  03APR08       2100  30SEP08   +0300
+#                              2200  02APR09       2100  30SEP09   +0300
+#                              2200  01APR10       2100  30SEP10   +0300
+
+# From Arthur David Olson (2008-03-17):
+# Here's a link to English-language coverage by the Syrian Arab News
+# Agency (SANA)...
+# <a href="http://www.sana.sy/eng/21/2008/03/11/165173.htm">
+# http://www.sana.sy/eng/21/2008/03/11/165173.htm
+# </a>...which reads (in part) "The Cabinet approved the suggestion of the
+# Ministry of Electricity to begin daylight savings time on Friday April
+# 4th, advancing clocks one hour ahead on midnight of Thursday April 3rd."
+# Since Syria is two hours east of UTC, the 2200 and 2100 transition times
+# shown above match up with midnight in Syria.
+
+# From Arthur David Olson (2008-03-18):
+# My buest guess at a Syrian rule is "the Friday nearest April 1";
+# coding that involves either using a "Mar Fri>=29" construct that old time zone
+# compilers can't handle  or having multiple Rules (a la Israel).
+# For now, use "Apr Fri>=1", and go with IATA on a uniform Sep 30 end.
+
+Rule	Syria	2008	max	-	Apr	Fri>=1	0:00	1:00	S
+Rule	Syria	2008	max	-	Oct	1	0:00	0	-
+
 # Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
 Zone	Asia/Damascus	2:25:12 -	LMT	1920	# Dimashq
 			2:00	Syria	EE%sT
@@ -1825,13 +1901,13 @@
 
 # Vietnam
 
-# From Paul Eggert (1993-11-18):
-# Saigon's official name is Thanh-Pho Ho Chi Minh, but it's too long.
-# We'll stick with the traditional name for now.
+# From Arthur David Olson (2008-03-18):
+# The English-language name of Vietnam's most populous city is "Ho Chi Min City";
+# we use Ho_Chi_Minh below to avoid a name of more than 14 characters.
 
 # From Shanks & Pottenger:
 # Zone	NAME		GMTOFF	RULES	FORMAT	[UNTIL]
-Zone	Asia/Saigon	7:06:40 -	LMT	1906 Jun  9
+Zone	Asia/Ho_Chi_Minh	7:06:40 -	LMT	1906 Jun  9
 			7:06:20	-	SMT	1911 Mar 11 0:01 # Saigon MT?
 			7:00	-	ICT	1912 May
 			8:00	-	ICT	1931 May
Index: libkcal/libical/tzdata/backward
===================================================================
--- libkcal/libical/tzdata/backward	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/tzdata/backward	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,4 +1,4 @@
-# @(#)backward	8.3
+# @(#)backward	8.6
 
 # This file provides links between current names for time zones
 # and their old names.  Many names changed in late 1993.
@@ -24,12 +24,15 @@
 Link	Asia/Ashgabat		Asia/Ashkhabad
 Link	Asia/Chongqing		Asia/Chungking
 Link	Asia/Dhaka		Asia/Dacca
+Link	Asia/Kolkata		Asia/Calcutta
 Link	Asia/Macau		Asia/Macao
 Link	Asia/Jerusalem		Asia/Tel_Aviv
+Link	Asia/Ho_Chi_Minh	Asia/Saigon
 Link	Asia/Thimphu		Asia/Thimbu
 Link	Asia/Makassar		Asia/Ujung_Pandang
 Link	Asia/Ulaanbaatar	Asia/Ulan_Bator
 Link	Atlantic/Faroe		Atlantic/Faeroe
+Link	Europe/Oslo		Atlantic/Jan_Mayen
 Link	Australia/Sydney	Australia/ACT
 Link	Australia/Sydney	Australia/Canberra
 Link	Australia/Lord_Howe	Australia/LHI
Index: libkcal/libical/zoneinfo/Atlantic/Madeira.ics
===================================================================
--- libkcal/libical/zoneinfo/Atlantic/Madeira.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Atlantic/Madeira.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Atlantic/Madeira
+TZID:/kde.org/Olson_20080523_1/Atlantic/Madeira
 X-LIC-LOCATION:Atlantic/Madeira
 BEGIN:DAYLIGHT
 TZOFFSETFROM:+0000
Index: libkcal/libical/zoneinfo/Atlantic/St_Helena.ics
===================================================================
--- libkcal/libical/zoneinfo/Atlantic/St_Helena.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Atlantic/St_Helena.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Atlantic/St_Helena
+TZID:/kde.org/Olson_20080523_1/Atlantic/St_Helena
 X-LIC-LOCATION:Atlantic/St_Helena
 BEGIN:STANDARD
 TZOFFSETFROM:-002248
Index: libkcal/libical/zoneinfo/Atlantic/Azores.ics
===================================================================
--- libkcal/libical/zoneinfo/Atlantic/Azores.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Atlantic/Azores.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Atlantic/Azores
+TZID:/kde.org/Olson_20080523_1/Atlantic/Azores
 X-LIC-LOCATION:Atlantic/Azores
 BEGIN:DAYLIGHT
 TZOFFSETFROM:-0100
Index: libkcal/libical/zoneinfo/Atlantic/Faroe.ics
===================================================================
--- libkcal/libical/zoneinfo/Atlantic/Faroe.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Atlantic/Faroe.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Atlantic/Faroe
+TZID:/kde.org/Olson_20080523_1/Atlantic/Faroe
 X-LIC-LOCATION:Atlantic/Faroe
 BEGIN:DAYLIGHT
 TZOFFSETFROM:+0000
Index: libkcal/libical/zoneinfo/Atlantic/Canary.ics
===================================================================
--- libkcal/libical/zoneinfo/Atlantic/Canary.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Atlantic/Canary.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Atlantic/Canary
+TZID:/kde.org/Olson_20080523_1/Atlantic/Canary
 X-LIC-LOCATION:Atlantic/Canary
 BEGIN:DAYLIGHT
 TZOFFSETFROM:+0000
Index: libkcal/libical/zoneinfo/Atlantic/Cape_Verde.ics
===================================================================
--- libkcal/libical/zoneinfo/Atlantic/Cape_Verde.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Atlantic/Cape_Verde.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Atlantic/Cape_Verde
+TZID:/kde.org/Olson_20080523_1/Atlantic/Cape_Verde
 X-LIC-LOCATION:Atlantic/Cape_Verde
 BEGIN:STANDARD
 TZOFFSETFROM:-013404
Index: libkcal/libical/zoneinfo/Atlantic/Bermuda.ics
===================================================================
--- libkcal/libical/zoneinfo/Atlantic/Bermuda.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Atlantic/Bermuda.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Atlantic/Bermuda
+TZID:/kde.org/Olson_20080523_1/Atlantic/Bermuda
 X-LIC-LOCATION:Atlantic/Bermuda
 BEGIN:DAYLIGHT
 TZOFFSETFROM:-0400
Index: libkcal/libical/zoneinfo/Atlantic/Reykjavik.ics
===================================================================
--- libkcal/libical/zoneinfo/Atlantic/Reykjavik.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Atlantic/Reykjavik.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Atlantic/Reykjavik
+TZID:/kde.org/Olson_20080523_1/Atlantic/Reykjavik
 X-LIC-LOCATION:Atlantic/Reykjavik
 BEGIN:STANDARD
 TZOFFSETFROM:-012724
Index: libkcal/libical/zoneinfo/Atlantic/South_Georgia.ics
===================================================================
--- libkcal/libical/zoneinfo/Atlantic/South_Georgia.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Atlantic/South_Georgia.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Atlantic/South_Georgia
+TZID:/kde.org/Olson_20080523_1/Atlantic/South_Georgia
 X-LIC-LOCATION:Atlantic/South_Georgia
 BEGIN:STANDARD
 TZOFFSETFROM:-022608
Index: libkcal/libical/zoneinfo/Atlantic/Stanley.ics
===================================================================
--- libkcal/libical/zoneinfo/Atlantic/Stanley.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Atlantic/Stanley.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Atlantic/Stanley
+TZID:/kde.org/Olson_20080523_1/Atlantic/Stanley
 X-LIC-LOCATION:Atlantic/Stanley
 BEGIN:STANDARD
 TZOFFSETFROM:-0300
Index: libkcal/libical/zoneinfo/Europe/Rome.ics
===================================================================
--- libkcal/libical/zoneinfo/Europe/Rome.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Europe/Rome.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Europe/Rome
+TZID:/kde.org/Olson_20080523_1/Europe/Rome
 X-LIC-LOCATION:Europe/Rome
 BEGIN:DAYLIGHT
 TZOFFSETFROM:+0100
Index: libkcal/libical/zoneinfo/Europe/Chisinau.ics
===================================================================
--- libkcal/libical/zoneinfo/Europe/Chisinau.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Europe/Chisinau.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Europe/Chisinau
+TZID:/kde.org/Olson_20080523_1/Europe/Chisinau
 X-LIC-LOCATION:Europe/Chisinau
 BEGIN:DAYLIGHT
 TZOFFSETFROM:+0200
Index: libkcal/libical/zoneinfo/Europe/Warsaw.ics
===================================================================
--- libkcal/libical/zoneinfo/Europe/Warsaw.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Europe/Warsaw.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Europe/Warsaw
+TZID:/kde.org/Olson_20080523_1/Europe/Warsaw
 X-LIC-LOCATION:Europe/Warsaw
 BEGIN:DAYLIGHT
 TZOFFSETFROM:+0100
Index: libkcal/libical/zoneinfo/Europe/Helsinki.ics
===================================================================
--- libkcal/libical/zoneinfo/Europe/Helsinki.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Europe/Helsinki.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Europe/Helsinki
+TZID:/kde.org/Olson_20080523_1/Europe/Helsinki
 X-LIC-LOCATION:Europe/Helsinki
 BEGIN:DAYLIGHT
 TZOFFSETFROM:+0200
Index: libkcal/libical/zoneinfo/Europe/Podgorica.ics
===================================================================
--- libkcal/libical/zoneinfo/Europe/Podgorica.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Europe/Podgorica.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Europe/Podgorica
+TZID:/kde.org/Olson_20080523_1/Europe/Podgorica
 X-LIC-LOCATION:Europe/Podgorica
 BEGIN:DAYLIGHT
 TZOFFSETFROM:+0100
Index: libkcal/libical/zoneinfo/Europe/Berlin.ics
===================================================================
--- libkcal/libical/zoneinfo/Europe/Berlin.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Europe/Berlin.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Europe/Berlin
+TZID:/kde.org/Olson_20080523_1/Europe/Berlin
 X-LIC-LOCATION:Europe/Berlin
 BEGIN:DAYLIGHT
 TZOFFSETFROM:+0100
Index: libkcal/libical/zoneinfo/Europe/Oslo.ics
===================================================================
--- libkcal/libical/zoneinfo/Europe/Oslo.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Europe/Oslo.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Europe/Oslo
+TZID:/kde.org/Olson_20080523_1/Europe/Oslo
 X-LIC-LOCATION:Europe/Oslo
 BEGIN:DAYLIGHT
 TZOFFSETFROM:+0100
Index: libkcal/libical/zoneinfo/Europe/Dublin.ics
===================================================================
--- libkcal/libical/zoneinfo/Europe/Dublin.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Europe/Dublin.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Europe/Dublin
+TZID:/kde.org/Olson_20080523_1/Europe/Dublin
 X-LIC-LOCATION:Europe/Dublin
 BEGIN:DAYLIGHT
 TZOFFSETFROM:+0000
Index: libkcal/libical/zoneinfo/Europe/Paris.ics
===================================================================
--- libkcal/libical/zoneinfo/Europe/Paris.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Europe/Paris.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Europe/Paris
+TZID:/kde.org/Olson_20080523_1/Europe/Paris
 X-LIC-LOCATION:Europe/Paris
 BEGIN:DAYLIGHT
 TZOFFSETFROM:+0100
Index: libkcal/libical/zoneinfo/Europe/Simferopol.ics
===================================================================
--- libkcal/libical/zoneinfo/Europe/Simferopol.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Europe/Simferopol.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Europe/Simferopol
+TZID:/kde.org/Olson_20080523_1/Europe/Simferopol
 X-LIC-LOCATION:Europe/Simferopol
 BEGIN:STANDARD
 TZOFFSETFROM:+0300
Index: libkcal/libical/zoneinfo/Europe/Vienna.ics
===================================================================
--- libkcal/libical/zoneinfo/Europe/Vienna.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Europe/Vienna.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Europe/Vienna
+TZID:/kde.org/Olson_20080523_1/Europe/Vienna
 X-LIC-LOCATION:Europe/Vienna
 BEGIN:DAYLIGHT
 TZOFFSETFROM:+0100
Index: libkcal/libical/zoneinfo/Europe/Minsk.ics
===================================================================
--- libkcal/libical/zoneinfo/Europe/Minsk.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Europe/Minsk.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Europe/Minsk
+TZID:/kde.org/Olson_20080523_1/Europe/Minsk
 X-LIC-LOCATION:Europe/Minsk
 BEGIN:DAYLIGHT
 TZOFFSETFROM:+0200
Index: libkcal/libical/zoneinfo/Europe/Istanbul.ics
===================================================================
--- libkcal/libical/zoneinfo/Europe/Istanbul.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Europe/Istanbul.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Europe/Istanbul
+TZID:/kde.org/Olson_20080523_1/Europe/Istanbul
 X-LIC-LOCATION:Europe/Istanbul
 BEGIN:DAYLIGHT
 TZOFFSETFROM:+0200
Index: libkcal/libical/zoneinfo/Europe/Athens.ics
===================================================================
--- libkcal/libical/zoneinfo/Europe/Athens.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Europe/Athens.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Europe/Athens
+TZID:/kde.org/Olson_20080523_1/Europe/Athens
 X-LIC-LOCATION:Europe/Athens
 BEGIN:DAYLIGHT
 TZOFFSETFROM:+0200
Index: libkcal/libical/zoneinfo/Europe/Kaliningrad.ics
===================================================================
--- libkcal/libical/zoneinfo/Europe/Kaliningrad.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Europe/Kaliningrad.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Europe/Kaliningrad
+TZID:/kde.org/Olson_20080523_1/Europe/Kaliningrad
 X-LIC-LOCATION:Europe/Kaliningrad
 BEGIN:DAYLIGHT
 TZOFFSETFROM:+0200
Index: libkcal/libical/zoneinfo/Europe/Bratislava.ics
===================================================================
--- libkcal/libical/zoneinfo/Europe/Bratislava.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Europe/Bratislava.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Europe/Bratislava
+TZID:/kde.org/Olson_20080523_1/Europe/Bratislava
 X-LIC-LOCATION:Europe/Bratislava
 BEGIN:DAYLIGHT
 TZOFFSETFROM:+0100
Index: libkcal/libical/zoneinfo/Europe/London.ics
===================================================================
--- libkcal/libical/zoneinfo/Europe/London.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Europe/London.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Europe/London
+TZID:/kde.org/Olson_20080523_1/Europe/London
 X-LIC-LOCATION:Europe/London
 BEGIN:DAYLIGHT
 TZOFFSETFROM:+0000
Index: libkcal/libical/zoneinfo/Europe/Vaduz.ics
===================================================================
--- libkcal/libical/zoneinfo/Europe/Vaduz.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Europe/Vaduz.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Europe/Vaduz
+TZID:/kde.org/Olson_20080523_1/Europe/Vaduz
 X-LIC-LOCATION:Europe/Vaduz
 BEGIN:DAYLIGHT
 TZOFFSETFROM:+0100
Index: libkcal/libical/zoneinfo/Europe/Malta.ics
===================================================================
--- libkcal/libical/zoneinfo/Europe/Malta.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Europe/Malta.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Europe/Malta
+TZID:/kde.org/Olson_20080523_1/Europe/Malta
 X-LIC-LOCATION:Europe/Malta
 BEGIN:DAYLIGHT
 TZOFFSETFROM:+0100
Index: libkcal/libical/zoneinfo/Europe/Kiev.ics
===================================================================
--- libkcal/libical/zoneinfo/Europe/Kiev.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Europe/Kiev.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Europe/Kiev
+TZID:/kde.org/Olson_20080523_1/Europe/Kiev
 X-LIC-LOCATION:Europe/Kiev
 BEGIN:DAYLIGHT
 TZOFFSETFROM:+0200
Index: libkcal/libical/zoneinfo/Europe/Madrid.ics
===================================================================
--- libkcal/libical/zoneinfo/Europe/Madrid.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Europe/Madrid.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Europe/Madrid
+TZID:/kde.org/Olson_20080523_1/Europe/Madrid
 X-LIC-LOCATION:Europe/Madrid
 BEGIN:DAYLIGHT
 TZOFFSETFROM:+0100
Index: libkcal/libical/zoneinfo/Europe/Jersey.ics
===================================================================
--- libkcal/libical/zoneinfo/Europe/Jersey.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Europe/Jersey.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Europe/Jersey
+TZID:/kde.org/Olson_20080523_1/Europe/Jersey
 X-LIC-LOCATION:Europe/Jersey
 BEGIN:DAYLIGHT
 TZOFFSETFROM:+0000
Index: libkcal/libical/zoneinfo/Europe/Ljubljana.ics
===================================================================
--- libkcal/libical/zoneinfo/Europe/Ljubljana.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Europe/Ljubljana.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Europe/Ljubljana
+TZID:/kde.org/Olson_20080523_1/Europe/Ljubljana
 X-LIC-LOCATION:Europe/Ljubljana
 BEGIN:DAYLIGHT
 TZOFFSETFROM:+0100
Index: libkcal/libical/zoneinfo/Europe/Brussels.ics
===================================================================
--- libkcal/libical/zoneinfo/Europe/Brussels.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Europe/Brussels.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Europe/Brussels
+TZID:/kde.org/Olson_20080523_1/Europe/Brussels
 X-LIC-LOCATION:Europe/Brussels
 BEGIN:DAYLIGHT
 TZOFFSETFROM:+0100
Index: libkcal/libical/zoneinfo/Europe/Stockholm.ics
===================================================================
--- libkcal/libical/zoneinfo/Europe/Stockholm.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Europe/Stockholm.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Europe/Stockholm
+TZID:/kde.org/Olson_20080523_1/Europe/Stockholm
 X-LIC-LOCATION:Europe/Stockholm
 BEGIN:DAYLIGHT
 TZOFFSETFROM:+0100
Index: libkcal/libical/zoneinfo/Europe/Samara.ics
===================================================================
--- libkcal/libical/zoneinfo/Europe/Samara.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Europe/Samara.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Europe/Samara
+TZID:/kde.org/Olson_20080523_1/Europe/Samara
 X-LIC-LOCATION:Europe/Samara
 BEGIN:DAYLIGHT
 TZOFFSETFROM:+0400
Index: libkcal/libical/zoneinfo/Europe/Zurich.ics
===================================================================
--- libkcal/libical/zoneinfo/Europe/Zurich.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Europe/Zurich.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Europe/Zurich
+TZID:/kde.org/Olson_20080523_1/Europe/Zurich
 X-LIC-LOCATION:Europe/Zurich
 BEGIN:DAYLIGHT
 TZOFFSETFROM:+0100
Index: libkcal/libical/zoneinfo/Europe/Belgrade.ics
===================================================================
--- libkcal/libical/zoneinfo/Europe/Belgrade.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Europe/Belgrade.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Europe/Belgrade
+TZID:/kde.org/Olson_20080523_1/Europe/Belgrade
 X-LIC-LOCATION:Europe/Belgrade
 BEGIN:DAYLIGHT
 TZOFFSETFROM:+0100
Index: libkcal/libical/zoneinfo/Europe/Moscow.ics
===================================================================
--- libkcal/libical/zoneinfo/Europe/Moscow.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Europe/Moscow.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Europe/Moscow
+TZID:/kde.org/Olson_20080523_1/Europe/Moscow
 X-LIC-LOCATION:Europe/Moscow
 BEGIN:DAYLIGHT
 TZOFFSETFROM:+0300
Index: libkcal/libical/zoneinfo/Europe/Budapest.ics
===================================================================
--- libkcal/libical/zoneinfo/Europe/Budapest.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Europe/Budapest.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Europe/Budapest
+TZID:/kde.org/Olson_20080523_1/Europe/Budapest
 X-LIC-LOCATION:Europe/Budapest
 BEGIN:DAYLIGHT
 TZOFFSETFROM:+0100
Index: libkcal/libical/zoneinfo/Europe/Copenhagen.ics
===================================================================
--- libkcal/libical/zoneinfo/Europe/Copenhagen.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Europe/Copenhagen.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Europe/Copenhagen
+TZID:/kde.org/Olson_20080523_1/Europe/Copenhagen
 X-LIC-LOCATION:Europe/Copenhagen
 BEGIN:DAYLIGHT
 TZOFFSETFROM:+0100
Index: libkcal/libical/zoneinfo/Europe/Gibraltar.ics
===================================================================
--- libkcal/libical/zoneinfo/Europe/Gibraltar.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Europe/Gibraltar.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Europe/Gibraltar
+TZID:/kde.org/Olson_20080523_1/Europe/Gibraltar
 X-LIC-LOCATION:Europe/Gibraltar
 BEGIN:DAYLIGHT
 TZOFFSETFROM:+0100
Index: libkcal/libical/zoneinfo/Europe/Sarajevo.ics
===================================================================
--- libkcal/libical/zoneinfo/Europe/Sarajevo.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Europe/Sarajevo.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Europe/Sarajevo
+TZID:/kde.org/Olson_20080523_1/Europe/Sarajevo
 X-LIC-LOCATION:Europe/Sarajevo
 BEGIN:DAYLIGHT
 TZOFFSETFROM:+0100
Index: libkcal/libical/zoneinfo/Europe/Zagreb.ics
===================================================================
--- libkcal/libical/zoneinfo/Europe/Zagreb.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Europe/Zagreb.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Europe/Zagreb
+TZID:/kde.org/Olson_20080523_1/Europe/Zagreb
 X-LIC-LOCATION:Europe/Zagreb
 BEGIN:DAYLIGHT
 TZOFFSETFROM:+0100
Index: libkcal/libical/zoneinfo/Europe/Zaporozhye.ics
===================================================================
--- libkcal/libical/zoneinfo/Europe/Zaporozhye.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Europe/Zaporozhye.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Europe/Zaporozhye
+TZID:/kde.org/Olson_20080523_1/Europe/Zaporozhye
 X-LIC-LOCATION:Europe/Zaporozhye
 BEGIN:DAYLIGHT
 TZOFFSETFROM:+0200
Index: libkcal/libical/zoneinfo/Europe/Isle_of_Man.ics
===================================================================
--- libkcal/libical/zoneinfo/Europe/Isle_of_Man.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Europe/Isle_of_Man.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Europe/Isle_of_Man
+TZID:/kde.org/Olson_20080523_1/Europe/Isle_of_Man
 X-LIC-LOCATION:Europe/Isle_of_Man
 BEGIN:DAYLIGHT
 TZOFFSETFROM:+0000
Index: libkcal/libical/zoneinfo/Europe/Monaco.ics
===================================================================
--- libkcal/libical/zoneinfo/Europe/Monaco.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Europe/Monaco.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Europe/Monaco
+TZID:/kde.org/Olson_20080523_1/Europe/Monaco
 X-LIC-LOCATION:Europe/Monaco
 BEGIN:DAYLIGHT
 TZOFFSETFROM:+0100
Index: libkcal/libical/zoneinfo/Europe/Amsterdam.ics
===================================================================
--- libkcal/libical/zoneinfo/Europe/Amsterdam.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Europe/Amsterdam.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Europe/Amsterdam
+TZID:/kde.org/Olson_20080523_1/Europe/Amsterdam
 X-LIC-LOCATION:Europe/Amsterdam
 BEGIN:DAYLIGHT
 TZOFFSETFROM:+0100
Index: libkcal/libical/zoneinfo/Europe/Bucharest.ics
===================================================================
--- libkcal/libical/zoneinfo/Europe/Bucharest.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Europe/Bucharest.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Europe/Bucharest
+TZID:/kde.org/Olson_20080523_1/Europe/Bucharest
 X-LIC-LOCATION:Europe/Bucharest
 BEGIN:DAYLIGHT
 TZOFFSETFROM:+0200
Index: libkcal/libical/zoneinfo/Europe/Riga.ics
===================================================================
--- libkcal/libical/zoneinfo/Europe/Riga.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Europe/Riga.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Europe/Riga
+TZID:/kde.org/Olson_20080523_1/Europe/Riga
 X-LIC-LOCATION:Europe/Riga
 BEGIN:DAYLIGHT
 TZOFFSETFROM:+0200
Index: libkcal/libical/zoneinfo/Europe/Tirane.ics
===================================================================
--- libkcal/libical/zoneinfo/Europe/Tirane.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Europe/Tirane.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Europe/Tirane
+TZID:/kde.org/Olson_20080523_1/Europe/Tirane
 X-LIC-LOCATION:Europe/Tirane
 BEGIN:DAYLIGHT
 TZOFFSETFROM:+0100
Index: libkcal/libical/zoneinfo/Europe/Prague.ics
===================================================================
--- libkcal/libical/zoneinfo/Europe/Prague.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Europe/Prague.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Europe/Prague
+TZID:/kde.org/Olson_20080523_1/Europe/Prague
 X-LIC-LOCATION:Europe/Prague
 BEGIN:DAYLIGHT
 TZOFFSETFROM:+0100
Index: libkcal/libical/zoneinfo/Europe/Volgograd.ics
===================================================================
--- libkcal/libical/zoneinfo/Europe/Volgograd.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Europe/Volgograd.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Europe/Volgograd
+TZID:/kde.org/Olson_20080523_1/Europe/Volgograd
 X-LIC-LOCATION:Europe/Volgograd
 BEGIN:DAYLIGHT
 TZOFFSETFROM:+0300
Index: libkcal/libical/zoneinfo/Europe/Nicosia.ics
===================================================================
--- libkcal/libical/zoneinfo/Europe/Nicosia.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Europe/Nicosia.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Europe/Nicosia
+TZID:/kde.org/Olson_20080523_1/Europe/Nicosia
 X-LIC-LOCATION:Europe/Nicosia
 BEGIN:STANDARD
 TZOFFSETFROM:+0300
Index: libkcal/libical/zoneinfo/Europe/Vatican.ics
===================================================================
--- libkcal/libical/zoneinfo/Europe/Vatican.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Europe/Vatican.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Europe/Vatican
+TZID:/kde.org/Olson_20080523_1/Europe/Vatican
 X-LIC-LOCATION:Europe/Vatican
 BEGIN:DAYLIGHT
 TZOFFSETFROM:+0100
Index: libkcal/libical/zoneinfo/Europe/Lisbon.ics
===================================================================
--- libkcal/libical/zoneinfo/Europe/Lisbon.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Europe/Lisbon.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Europe/Lisbon
+TZID:/kde.org/Olson_20080523_1/Europe/Lisbon
 X-LIC-LOCATION:Europe/Lisbon
 BEGIN:STANDARD
 TZOFFSETFROM:+0100
Index: libkcal/libical/zoneinfo/Europe/Andorra.ics
===================================================================
--- libkcal/libical/zoneinfo/Europe/Andorra.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Europe/Andorra.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Europe/Andorra
+TZID:/kde.org/Olson_20080523_1/Europe/Andorra
 X-LIC-LOCATION:Europe/Andorra
 BEGIN:DAYLIGHT
 TZOFFSETFROM:+0100
Index: libkcal/libical/zoneinfo/Europe/San_Marino.ics
===================================================================
--- libkcal/libical/zoneinfo/Europe/San_Marino.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Europe/San_Marino.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Europe/San_Marino
+TZID:/kde.org/Olson_20080523_1/Europe/San_Marino
 X-LIC-LOCATION:Europe/San_Marino
 BEGIN:DAYLIGHT
 TZOFFSETFROM:+0100
Index: libkcal/libical/zoneinfo/Europe/Luxembourg.ics
===================================================================
--- libkcal/libical/zoneinfo/Europe/Luxembourg.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Europe/Luxembourg.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Europe/Luxembourg
+TZID:/kde.org/Olson_20080523_1/Europe/Luxembourg
 X-LIC-LOCATION:Europe/Luxembourg
 BEGIN:DAYLIGHT
 TZOFFSETFROM:+0100
Index: libkcal/libical/zoneinfo/Europe/Vilnius.ics
===================================================================
--- libkcal/libical/zoneinfo/Europe/Vilnius.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Europe/Vilnius.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Europe/Vilnius
+TZID:/kde.org/Olson_20080523_1/Europe/Vilnius
 X-LIC-LOCATION:Europe/Vilnius
 BEGIN:DAYLIGHT
 TZOFFSETFROM:+0200
Index: libkcal/libical/zoneinfo/Europe/Skopje.ics
===================================================================
--- libkcal/libical/zoneinfo/Europe/Skopje.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Europe/Skopje.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Europe/Skopje
+TZID:/kde.org/Olson_20080523_1/Europe/Skopje
 X-LIC-LOCATION:Europe/Skopje
 BEGIN:DAYLIGHT
 TZOFFSETFROM:+0100
Index: libkcal/libical/zoneinfo/Europe/Mariehamn.ics
===================================================================
--- libkcal/libical/zoneinfo/Europe/Mariehamn.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Europe/Mariehamn.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Europe/Mariehamn
+TZID:/kde.org/Olson_20080523_1/Europe/Mariehamn
 X-LIC-LOCATION:Europe/Mariehamn
 BEGIN:DAYLIGHT
 TZOFFSETFROM:+0200
Index: libkcal/libical/zoneinfo/Europe/Guernsey.ics
===================================================================
--- libkcal/libical/zoneinfo/Europe/Guernsey.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Europe/Guernsey.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Europe/Guernsey
+TZID:/kde.org/Olson_20080523_1/Europe/Guernsey
 X-LIC-LOCATION:Europe/Guernsey
 BEGIN:DAYLIGHT
 TZOFFSETFROM:+0000
Index: libkcal/libical/zoneinfo/Europe/Sofia.ics
===================================================================
--- libkcal/libical/zoneinfo/Europe/Sofia.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Europe/Sofia.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Europe/Sofia
+TZID:/kde.org/Olson_20080523_1/Europe/Sofia
 X-LIC-LOCATION:Europe/Sofia
 BEGIN:DAYLIGHT
 TZOFFSETFROM:+0200
Index: libkcal/libical/zoneinfo/Europe/Tallinn.ics
===================================================================
--- libkcal/libical/zoneinfo/Europe/Tallinn.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Europe/Tallinn.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Europe/Tallinn
+TZID:/kde.org/Olson_20080523_1/Europe/Tallinn
 X-LIC-LOCATION:Europe/Tallinn
 BEGIN:DAYLIGHT
 TZOFFSETFROM:+0200
Index: libkcal/libical/zoneinfo/Europe/Uzhgorod.ics
===================================================================
--- libkcal/libical/zoneinfo/Europe/Uzhgorod.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Europe/Uzhgorod.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Europe/Uzhgorod
+TZID:/kde.org/Olson_20080523_1/Europe/Uzhgorod
 X-LIC-LOCATION:Europe/Uzhgorod
 BEGIN:DAYLIGHT
 TZOFFSETFROM:+0200
Index: libkcal/libical/zoneinfo/America/Marigot.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Marigot.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 0)
+++ libkcal/libical/zoneinfo/America/Marigot.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -0,0 +1,15 @@
+BEGIN:VCALENDAR
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
+VERSION:2.0
+BEGIN:VTIMEZONE
+TZID:/kde.org/Olson_20080523_1/America/Marigot
+X-LIC-LOCATION:America/Marigot
+BEGIN:STANDARD
+TZOFFSETFROM:-040608
+TZOFFSETTO:-0400
+TZNAME:AST
+DTSTART:19110608T000000
+RDATE:19110608T000000
+END:STANDARD
+END:VTIMEZONE
+END:VCALENDAR
Index: libkcal/libical/zoneinfo/America/Port_of_Spain.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Port_of_Spain.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/America/Port_of_Spain.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/America/Port_of_Spain
+TZID:/kde.org/Olson_20080523_1/America/Port_of_Spain
 X-LIC-LOCATION:America/Port_of_Spain
 BEGIN:STANDARD
 TZOFFSETFROM:-040604
Index: libkcal/libical/zoneinfo/America/Regina.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Regina.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/America/Regina.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/America/Regina
+TZID:/kde.org/Olson_20080523_1/America/Regina
 X-LIC-LOCATION:America/Regina
 BEGIN:STANDARD
 TZOFFSETFROM:-065836
Index: libkcal/libical/zoneinfo/America/Glace_Bay.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Glace_Bay.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/America/Glace_Bay.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/America/Glace_Bay
+TZID:/kde.org/Olson_20080523_1/America/Glace_Bay
 X-LIC-LOCATION:America/Glace_Bay
 BEGIN:DAYLIGHT
 TZOFFSETFROM:-0400
Index: libkcal/libical/zoneinfo/America/Mazatlan.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Mazatlan.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/America/Mazatlan.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/America/Mazatlan
+TZID:/kde.org/Olson_20080523_1/America/Mazatlan
 X-LIC-LOCATION:America/Mazatlan
 BEGIN:DAYLIGHT
 TZOFFSETFROM:-0700
Index: libkcal/libical/zoneinfo/America/St_Vincent.ics
===================================================================
--- libkcal/libical/zoneinfo/America/St_Vincent.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/America/St_Vincent.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/America/St_Vincent
+TZID:/kde.org/Olson_20080523_1/America/St_Vincent
 X-LIC-LOCATION:America/St_Vincent
 BEGIN:STANDARD
 TZOFFSETFROM:-040456
Index: libkcal/libical/zoneinfo/America/Asuncion.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Asuncion.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/America/Asuncion.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/America/Asuncion
+TZID:/kde.org/Olson_20080523_1/America/Asuncion
 X-LIC-LOCATION:America/Asuncion
 BEGIN:DAYLIGHT
 TZOFFSETFROM:-0400
Index: libkcal/libical/zoneinfo/America/Campo_Grande.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Campo_Grande.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/America/Campo_Grande.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/America/Campo_Grande
+TZID:/kde.org/Olson_20080523_1/America/Campo_Grande
 X-LIC-LOCATION:America/Campo_Grande
 BEGIN:DAYLIGHT
 TZOFFSETFROM:-0400
Index: libkcal/libical/zoneinfo/America/Montreal.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Montreal.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/America/Montreal.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/America/Montreal
+TZID:/kde.org/Olson_20080523_1/America/Montreal
 X-LIC-LOCATION:America/Montreal
 BEGIN:DAYLIGHT
 TZOFFSETFROM:-0500
Index: libkcal/libical/zoneinfo/America/Thule.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Thule.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/America/Thule.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/America/Thule
+TZID:/kde.org/Olson_20080523_1/America/Thule
 X-LIC-LOCATION:America/Thule
 BEGIN:DAYLIGHT
 TZOFFSETFROM:-0400
Index: libkcal/libical/zoneinfo/America/Cayenne.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Cayenne.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/America/Cayenne.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/America/Cayenne
+TZID:/kde.org/Olson_20080523_1/America/Cayenne
 X-LIC-LOCATION:America/Cayenne
 BEGIN:STANDARD
 TZOFFSETFROM:-032920
Index: libkcal/libical/zoneinfo/America/Yakutat.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Yakutat.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/America/Yakutat.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/America/Yakutat
+TZID:/kde.org/Olson_20080523_1/America/Yakutat
 X-LIC-LOCATION:America/Yakutat
 BEGIN:DAYLIGHT
 TZOFFSETFROM:-0900
Index: libkcal/libical/zoneinfo/America/Denver.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Denver.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/America/Denver.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/America/Denver
+TZID:/kde.org/Olson_20080523_1/America/Denver
 X-LIC-LOCATION:America/Denver
 BEGIN:DAYLIGHT
 TZOFFSETFROM:-0700
Index: libkcal/libical/zoneinfo/America/Scoresbysund.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Scoresbysund.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/America/Scoresbysund.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/America/Scoresbysund
+TZID:/kde.org/Olson_20080523_1/America/Scoresbysund
 X-LIC-LOCATION:America/Scoresbysund
 BEGIN:DAYLIGHT
 TZOFFSETFROM:-0100
Index: libkcal/libical/zoneinfo/America/Monterrey.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Monterrey.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/America/Monterrey.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/America/Monterrey
+TZID:/kde.org/Olson_20080523_1/America/Monterrey
 X-LIC-LOCATION:America/Monterrey
 BEGIN:DAYLIGHT
 TZOFFSETFROM:-0600
Index: libkcal/libical/zoneinfo/America/Jamaica.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Jamaica.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/America/Jamaica.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/America/Jamaica
+TZID:/kde.org/Olson_20080523_1/America/Jamaica
 X-LIC-LOCATION:America/Jamaica
 BEGIN:STANDARD
 TZOFFSETFROM:-050712
Index: libkcal/libical/zoneinfo/America/Indiana/Petersburg.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Indiana/Petersburg.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/America/Indiana/Petersburg.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/America/Indiana/Petersburg
+TZID:/kde.org/Olson_20080523_1/America/Indiana/Petersburg
 X-LIC-LOCATION:America/Indiana/Petersburg
 BEGIN:DAYLIGHT
 TZOFFSETFROM:-0500
Index: libkcal/libical/zoneinfo/America/Indiana/Marengo.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Indiana/Marengo.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/America/Indiana/Marengo.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/America/Indiana/Marengo
+TZID:/kde.org/Olson_20080523_1/America/Indiana/Marengo
 X-LIC-LOCATION:America/Indiana/Marengo
 BEGIN:DAYLIGHT
 TZOFFSETFROM:-0500
Index: libkcal/libical/zoneinfo/America/Indiana/Tell_City.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Indiana/Tell_City.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/America/Indiana/Tell_City.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/America/Indiana/Tell_City
+TZID:/kde.org/Olson_20080523_1/America/Indiana/Tell_City
 X-LIC-LOCATION:America/Indiana/Tell_City
 BEGIN:DAYLIGHT
 TZOFFSETFROM:-0600
Index: libkcal/libical/zoneinfo/America/Indiana/Vincennes.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Indiana/Vincennes.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/America/Indiana/Vincennes.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/America/Indiana/Vincennes
+TZID:/kde.org/Olson_20080523_1/America/Indiana/Vincennes
 X-LIC-LOCATION:America/Indiana/Vincennes
 BEGIN:DAYLIGHT
 TZOFFSETFROM:-0500
Index: libkcal/libical/zoneinfo/America/Indiana/Indianapolis.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Indiana/Indianapolis.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/America/Indiana/Indianapolis.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/America/Indiana/Indianapolis
+TZID:/kde.org/Olson_20080523_1/America/Indiana/Indianapolis
 X-LIC-LOCATION:America/Indiana/Indianapolis
 BEGIN:DAYLIGHT
 TZOFFSETFROM:-0500
Index: libkcal/libical/zoneinfo/America/Indiana/Vevay.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Indiana/Vevay.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/America/Indiana/Vevay.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/America/Indiana/Vevay
+TZID:/kde.org/Olson_20080523_1/America/Indiana/Vevay
 X-LIC-LOCATION:America/Indiana/Vevay
 BEGIN:DAYLIGHT
 TZOFFSETFROM:-0500
Index: libkcal/libical/zoneinfo/America/Indiana/Knox.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Indiana/Knox.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/America/Indiana/Knox.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/America/Indiana/Knox
+TZID:/kde.org/Olson_20080523_1/America/Indiana/Knox
 X-LIC-LOCATION:America/Indiana/Knox
 BEGIN:DAYLIGHT
 TZOFFSETFROM:-0600
Index: libkcal/libical/zoneinfo/America/Indiana/Winamac.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Indiana/Winamac.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/America/Indiana/Winamac.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/America/Indiana/Winamac
+TZID:/kde.org/Olson_20080523_1/America/Indiana/Winamac
 X-LIC-LOCATION:America/Indiana/Winamac
 BEGIN:STANDARD
 TZOFFSETFROM:-0400
Index: libkcal/libical/zoneinfo/America/Juneau.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Juneau.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/America/Juneau.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/America/Juneau
+TZID:/kde.org/Olson_20080523_1/America/Juneau
 X-LIC-LOCATION:America/Juneau
 BEGIN:DAYLIGHT
 TZOFFSETFROM:-0900
Index: libkcal/libical/zoneinfo/America/Fortaleza.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Fortaleza.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/America/Fortaleza.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/America/Fortaleza
+TZID:/kde.org/Olson_20080523_1/America/Fortaleza
 X-LIC-LOCATION:America/Fortaleza
 BEGIN:STANDARD
 TZOFFSETFROM:-0234
Index: libkcal/libical/zoneinfo/America/Araguaina.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Araguaina.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/America/Araguaina.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/America/Araguaina
+TZID:/kde.org/Olson_20080523_1/America/Araguaina
 X-LIC-LOCATION:America/Araguaina
 BEGIN:STANDARD
 TZOFFSETFROM:-031248
Index: libkcal/libical/zoneinfo/America/Yellowknife.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Yellowknife.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/America/Yellowknife.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/America/Yellowknife
+TZID:/kde.org/Olson_20080523_1/America/Yellowknife
 X-LIC-LOCATION:America/Yellowknife
 BEGIN:DAYLIGHT
 TZOFFSETFROM:-0700
Index: libkcal/libical/zoneinfo/America/Miquelon.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Miquelon.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/America/Miquelon.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/America/Miquelon
+TZID:/kde.org/Olson_20080523_1/America/Miquelon
 X-LIC-LOCATION:America/Miquelon
 BEGIN:DAYLIGHT
 TZOFFSETFROM:-0300
Index: libkcal/libical/zoneinfo/America/Guadeloupe.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Guadeloupe.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/America/Guadeloupe.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/America/Guadeloupe
+TZID:/kde.org/Olson_20080523_1/America/Guadeloupe
 X-LIC-LOCATION:America/Guadeloupe
 BEGIN:STANDARD
 TZOFFSETFROM:-040608
Index: libkcal/libical/zoneinfo/America/Los_Angeles.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Los_Angeles.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/America/Los_Angeles.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/America/Los_Angeles
+TZID:/kde.org/Olson_20080523_1/America/Los_Angeles
 X-LIC-LOCATION:America/Los_Angeles
 BEGIN:DAYLIGHT
 TZOFFSETFROM:-0800
Index: libkcal/libical/zoneinfo/America/Tijuana.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Tijuana.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/America/Tijuana.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/America/Tijuana
+TZID:/kde.org/Olson_20080523_1/America/Tijuana
 X-LIC-LOCATION:America/Tijuana
 BEGIN:STANDARD
 TZOFFSETFROM:-0700
Index: libkcal/libical/zoneinfo/America/Anguilla.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Anguilla.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/America/Anguilla.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/America/Anguilla
+TZID:/kde.org/Olson_20080523_1/America/Anguilla
 X-LIC-LOCATION:America/Anguilla
 BEGIN:STANDARD
 TZOFFSETFROM:-041216
Index: libkcal/libical/zoneinfo/America/Caracas.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Caracas.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/America/Caracas.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/America/Caracas
+TZID:/kde.org/Olson_20080523_1/America/Caracas
 X-LIC-LOCATION:America/Caracas
 BEGIN:STANDARD
 TZOFFSETFROM:-042744
@@ -29,8 +29,8 @@
 TZOFFSETFROM:-0400
 TZOFFSETTO:-0430
 TZNAME:VET
-DTSTART:20080101T000000
-RDATE:20080101T000000
+DTSTART:20071209T030000
+RDATE:20071209T030000
 END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR
Index: libkcal/libical/zoneinfo/America/Montserrat.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Montserrat.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/America/Montserrat.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/America/Montserrat
+TZID:/kde.org/Olson_20080523_1/America/Montserrat
 X-LIC-LOCATION:America/Montserrat
 BEGIN:STANDARD
 TZOFFSETFROM:-040852
Index: libkcal/libical/zoneinfo/America/Chihuahua.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Chihuahua.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/America/Chihuahua.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/America/Chihuahua
+TZID:/kde.org/Olson_20080523_1/America/Chihuahua
 X-LIC-LOCATION:America/Chihuahua
 BEGIN:DAYLIGHT
 TZOFFSETFROM:-0700
Index: libkcal/libical/zoneinfo/America/Porto_Velho.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Porto_Velho.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/America/Porto_Velho.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/America/Porto_Velho
+TZID:/kde.org/Olson_20080523_1/America/Porto_Velho
 X-LIC-LOCATION:America/Porto_Velho
 BEGIN:STANDARD
 TZOFFSETFROM:-041536
Index: libkcal/libical/zoneinfo/America/Santo_Domingo.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Santo_Domingo.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/America/Santo_Domingo.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/America/Santo_Domingo
+TZID:/kde.org/Olson_20080523_1/America/Santo_Domingo
 X-LIC-LOCATION:America/Santo_Domingo
 BEGIN:STANDARD
 TZOFFSETFROM:-043936
Index: libkcal/libical/zoneinfo/America/Guatemala.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Guatemala.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/America/Guatemala.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/America/Guatemala
+TZID:/kde.org/Olson_20080523_1/America/Guatemala
 X-LIC-LOCATION:America/Guatemala
 BEGIN:STANDARD
 TZOFFSETFROM:-060204
Index: libkcal/libical/zoneinfo/America/North_Dakota/New_Salem.ics
===================================================================
--- libkcal/libical/zoneinfo/America/North_Dakota/New_Salem.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/America/North_Dakota/New_Salem.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/America/North_Dakota/New_Salem
+TZID:/kde.org/Olson_20080523_1/America/North_Dakota/New_Salem
 X-LIC-LOCATION:America/North_Dakota/New_Salem
 BEGIN:DAYLIGHT
 TZOFFSETFROM:-0600
Index: libkcal/libical/zoneinfo/America/North_Dakota/Center.ics
===================================================================
--- libkcal/libical/zoneinfo/America/North_Dakota/Center.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/America/North_Dakota/Center.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/America/North_Dakota/Center
+TZID:/kde.org/Olson_20080523_1/America/North_Dakota/Center
 X-LIC-LOCATION:America/North_Dakota/Center
 BEGIN:DAYLIGHT
 TZOFFSETFROM:-0600
Index: libkcal/libical/zoneinfo/America/St_Thomas.ics
===================================================================
--- libkcal/libical/zoneinfo/America/St_Thomas.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/America/St_Thomas.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/America/St_Thomas
+TZID:/kde.org/Olson_20080523_1/America/St_Thomas
 X-LIC-LOCATION:America/St_Thomas
 BEGIN:STANDARD
 TZOFFSETFROM:-041944
Index: libkcal/libical/zoneinfo/America/St_Barthelemy.ics
===================================================================
--- libkcal/libical/zoneinfo/America/St_Barthelemy.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 0)
+++ libkcal/libical/zoneinfo/America/St_Barthelemy.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -0,0 +1,15 @@
+BEGIN:VCALENDAR
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
+VERSION:2.0
+BEGIN:VTIMEZONE
+TZID:/kde.org/Olson_20080523_1/America/St_Barthelemy
+X-LIC-LOCATION:America/St_Barthelemy
+BEGIN:STANDARD
+TZOFFSETFROM:-040608
+TZOFFSETTO:-0400
+TZNAME:AST
+DTSTART:19110608T000000
+RDATE:19110608T000000
+END:STANDARD
+END:VTIMEZONE
+END:VCALENDAR
Index: libkcal/libical/zoneinfo/America/St_Lucia.ics
===================================================================
--- libkcal/libical/zoneinfo/America/St_Lucia.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/America/St_Lucia.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/America/St_Lucia
+TZID:/kde.org/Olson_20080523_1/America/St_Lucia
 X-LIC-LOCATION:America/St_Lucia
 BEGIN:STANDARD
 TZOFFSETFROM:-0404
Index: libkcal/libical/zoneinfo/America/Bahia.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Bahia.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/America/Bahia.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/America/Bahia
+TZID:/kde.org/Olson_20080523_1/America/Bahia
 X-LIC-LOCATION:America/Bahia
 BEGIN:STANDARD
 TZOFFSETFROM:-023404
Index: libkcal/libical/zoneinfo/America/Noronha.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Noronha.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/America/Noronha.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/America/Noronha
+TZID:/kde.org/Olson_20080523_1/America/Noronha
 X-LIC-LOCATION:America/Noronha
 BEGIN:STANDARD
 TZOFFSETFROM:-020940
Index: libkcal/libical/zoneinfo/America/Santiago.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Santiago.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/America/Santiago.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/America/Santiago
+TZID:/kde.org/Olson_20080523_1/America/Santiago
 X-LIC-LOCATION:America/Santiago
 BEGIN:DAYLIGHT
 TZOFFSETFROM:-0400
@@ -15,7 +15,7 @@
 TZOFFSETFROM:-0300
 TZOFFSETTO:-0400
 TZNAME:CLT
-DTSTART:20000312T000000
+DTSTART:20090315T000000
 RRULE:FREQ=YEARLY;BYMONTH=3;BYMONTHDAY=9,10,11,12,13,14,15;BYDAY=SU
 END:STANDARD
 BEGIN:STANDARD
@@ -179,6 +179,15 @@
 RDATE:19970330T000000
 RDATE:19980315T000000
 RDATE:19990404T000000
+RDATE:20000312T000000
+RDATE:20010311T000000
+RDATE:20020310T000000
+RDATE:20030309T000000
+RDATE:20040314T000000
+RDATE:20050313T000000
+RDATE:20060312T000000
+RDATE:20070311T000000
+RDATE:20080330T000000
 END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR
Index: libkcal/libical/zoneinfo/America/Boa_Vista.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Boa_Vista.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/America/Boa_Vista.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/America/Boa_Vista
+TZID:/kde.org/Olson_20080523_1/America/Boa_Vista
 X-LIC-LOCATION:America/Boa_Vista
 BEGIN:STANDARD
 TZOFFSETFROM:-040240
Index: libkcal/libical/zoneinfo/America/Cancun.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Cancun.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/America/Cancun.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/America/Cancun
+TZID:/kde.org/Olson_20080523_1/America/Cancun
 X-LIC-LOCATION:America/Cancun
 BEGIN:DAYLIGHT
 TZOFFSETFROM:-0600
Index: libkcal/libical/zoneinfo/America/Costa_Rica.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Costa_Rica.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/America/Costa_Rica.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/America/Costa_Rica
+TZID:/kde.org/Olson_20080523_1/America/Costa_Rica
 X-LIC-LOCATION:America/Costa_Rica
 BEGIN:STANDARD
 TZOFFSETFROM:-053620
Index: libkcal/libical/zoneinfo/America/Cambridge_Bay.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Cambridge_Bay.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/America/Cambridge_Bay.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/America/Cambridge_Bay
+TZID:/kde.org/Olson_20080523_1/America/Cambridge_Bay
 X-LIC-LOCATION:America/Cambridge_Bay
 BEGIN:DAYLIGHT
 TZOFFSETFROM:-0700
Index: libkcal/libical/zoneinfo/America/Managua.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Managua.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/America/Managua.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/America/Managua
+TZID:/kde.org/Olson_20080523_1/America/Managua
 X-LIC-LOCATION:America/Managua
 BEGIN:STANDARD
 TZOFFSETFROM:-054508
Index: libkcal/libical/zoneinfo/America/Phoenix.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Phoenix.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/America/Phoenix.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/America/Phoenix
+TZID:/kde.org/Olson_20080523_1/America/Phoenix
 X-LIC-LOCATION:America/Phoenix
 BEGIN:STANDARD
 TZOFFSETFROM:-072818
Index: libkcal/libical/zoneinfo/America/Halifax.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Halifax.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/America/Halifax.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/America/Halifax
+TZID:/kde.org/Olson_20080523_1/America/Halifax
 X-LIC-LOCATION:America/Halifax
 BEGIN:DAYLIGHT
 TZOFFSETFROM:-0400
Index: libkcal/libical/zoneinfo/America/Menominee.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Menominee.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/America/Menominee.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/America/Menominee
+TZID:/kde.org/Olson_20080523_1/America/Menominee
 X-LIC-LOCATION:America/Menominee
 BEGIN:DAYLIGHT
 TZOFFSETFROM:-0600
Index: libkcal/libical/zoneinfo/America/Hermosillo.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Hermosillo.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/America/Hermosillo.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/America/Hermosillo
+TZID:/kde.org/Olson_20080523_1/America/Hermosillo
 X-LIC-LOCATION:America/Hermosillo
 BEGIN:STANDARD
 TZOFFSETFROM:-072352
Index: libkcal/libical/zoneinfo/America/Curacao.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Curacao.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/America/Curacao.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/America/Curacao
+TZID:/kde.org/Olson_20080523_1/America/Curacao
 X-LIC-LOCATION:America/Curacao
 BEGIN:STANDARD
 TZOFFSETFROM:-043544
Index: libkcal/libical/zoneinfo/America/Paramaribo.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Paramaribo.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/America/Paramaribo.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/America/Paramaribo
+TZID:/kde.org/Olson_20080523_1/America/Paramaribo
 X-LIC-LOCATION:America/Paramaribo
 BEGIN:STANDARD
 TZOFFSETFROM:-034040
Index: libkcal/libical/zoneinfo/America/Martinique.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Martinique.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/America/Martinique.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/America/Martinique
+TZID:/kde.org/Olson_20080523_1/America/Martinique
 X-LIC-LOCATION:America/Martinique
 BEGIN:STANDARD
 TZOFFSETFROM:-040420
Index: libkcal/libical/zoneinfo/America/Winnipeg.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Winnipeg.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/America/Winnipeg.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/America/Winnipeg
+TZID:/kde.org/Olson_20080523_1/America/Winnipeg
 X-LIC-LOCATION:America/Winnipeg
 BEGIN:DAYLIGHT
 TZOFFSETFROM:-0600
Index: libkcal/libical/zoneinfo/America/Lima.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Lima.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/America/Lima.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/America/Lima
+TZID:/kde.org/Olson_20080523_1/America/Lima
 X-LIC-LOCATION:America/Lima
 BEGIN:STANDARD
 TZOFFSETFROM:-050812
Index: libkcal/libical/zoneinfo/America/Shiprock.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Shiprock.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/America/Shiprock.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/America/Shiprock
+TZID:/kde.org/Olson_20080523_1/America/Shiprock
 X-LIC-LOCATION:America/Shiprock
 BEGIN:DAYLIGHT
 TZOFFSETFROM:-0700
Index: libkcal/libical/zoneinfo/America/Edmonton.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Edmonton.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/America/Edmonton.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/America/Edmonton
+TZID:/kde.org/Olson_20080523_1/America/Edmonton
 X-LIC-LOCATION:America/Edmonton
 BEGIN:DAYLIGHT
 TZOFFSETFROM:-0700
Index: libkcal/libical/zoneinfo/America/Dominica.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Dominica.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/America/Dominica.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/America/Dominica
+TZID:/kde.org/Olson_20080523_1/America/Dominica
 X-LIC-LOCATION:America/Dominica
 BEGIN:STANDARD
 TZOFFSETFROM:-040536
Index: libkcal/libical/zoneinfo/America/Belem.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Belem.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/America/Belem.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/America/Belem
+TZID:/kde.org/Olson_20080523_1/America/Belem
 X-LIC-LOCATION:America/Belem
 BEGIN:STANDARD
 TZOFFSETFROM:-031356
Index: libkcal/libical/zoneinfo/America/Anchorage.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Anchorage.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/America/Anchorage.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/America/Anchorage
+TZID:/kde.org/Olson_20080523_1/America/Anchorage
 X-LIC-LOCATION:America/Anchorage
 BEGIN:DAYLIGHT
 TZOFFSETFROM:-0900
Index: libkcal/libical/zoneinfo/America/Rainy_River.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Rainy_River.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/America/Rainy_River.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/America/Rainy_River
+TZID:/kde.org/Olson_20080523_1/America/Rainy_River
 X-LIC-LOCATION:America/Rainy_River
 BEGIN:DAYLIGHT
 TZOFFSETFROM:-0600
Index: libkcal/libical/zoneinfo/America/Argentina/Jujuy.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Argentina/Jujuy.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/America/Argentina/Jujuy.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,9 +2,23 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/America/Argentina/Jujuy
+TZID:/kde.org/Olson_20080523_1/America/Argentina/Jujuy
 X-LIC-LOCATION:America/Argentina/Jujuy
 BEGIN:STANDARD
+TZOFFSETFROM:-0200
+TZOFFSETTO:-0300
+TZNAME:ART
+DTSTART:20080316T000000
+RRULE:FREQ=YEARLY;BYMONTH=3;BYDAY=3SU
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0300
+TZOFFSETTO:-0200
+TZNAME:ARST
+DTSTART:20081005T000000
+RRULE:FREQ=YEARLY;BYMONTH=10;BYDAY=1SU
+END:DAYLIGHT
+BEGIN:STANDARD
 TZOFFSETFROM:-042112
 TZOFFSETTO:-041648
 TZNAME:CMT
@@ -86,6 +100,7 @@
 RDATE:19881201T000000
 RDATE:19891015T000000
 RDATE:19921018T000000
+RDATE:20071230T000000
 END:DAYLIGHT
 BEGIN:STANDARD
 TZOFFSETFROM:-0200
Index: libkcal/libical/zoneinfo/America/Argentina/Rio_Gallegos.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Argentina/Rio_Gallegos.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/America/Argentina/Rio_Gallegos.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,9 +2,23 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/America/Argentina/Rio_Gallegos
+TZID:/kde.org/Olson_20080523_1/America/Argentina/Rio_Gallegos
 X-LIC-LOCATION:America/Argentina/Rio_Gallegos
 BEGIN:STANDARD
+TZOFFSETFROM:-0200
+TZOFFSETTO:-0300
+TZNAME:ART
+DTSTART:20080316T000000
+RRULE:FREQ=YEARLY;BYMONTH=3;BYDAY=3SU
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0300
+TZOFFSETTO:-0200
+TZNAME:ARST
+DTSTART:20081005T000000
+RRULE:FREQ=YEARLY;BYMONTH=10;BYDAY=1SU
+END:DAYLIGHT
+BEGIN:STANDARD
 TZOFFSETFROM:-043652
 TZOFFSETTO:-041648
 TZNAME:CMT
@@ -89,6 +103,7 @@
 RDATE:19901021T000000
 RDATE:19911020T000000
 RDATE:19921018T000000
+RDATE:20071230T000000
 END:DAYLIGHT
 BEGIN:STANDARD
 TZOFFSETFROM:-0200
Index: libkcal/libical/zoneinfo/America/Argentina/Cordoba.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Argentina/Cordoba.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/America/Argentina/Cordoba.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,9 +2,23 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/America/Argentina/Cordoba
+TZID:/kde.org/Olson_20080523_1/America/Argentina/Cordoba
 X-LIC-LOCATION:America/Argentina/Cordoba
 BEGIN:STANDARD
+TZOFFSETFROM:-0200
+TZOFFSETTO:-0300
+TZNAME:ART
+DTSTART:20080316T000000
+RRULE:FREQ=YEARLY;BYMONTH=3;BYDAY=3SU
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0300
+TZOFFSETTO:-0200
+TZNAME:ARST
+DTSTART:20081005T000000
+RRULE:FREQ=YEARLY;BYMONTH=10;BYDAY=1SU
+END:DAYLIGHT
+BEGIN:STANDARD
 TZOFFSETFROM:-041648
 TZOFFSETTO:-041648
 TZNAME:CMT
@@ -87,6 +101,7 @@
 RDATE:19891015T000000
 RDATE:19901021T000000
 RDATE:19921018T000000
+RDATE:20071230T000000
 END:DAYLIGHT
 BEGIN:STANDARD
 TZOFFSETFROM:-0200
Index: libkcal/libical/zoneinfo/America/Argentina/Catamarca.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Argentina/Catamarca.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/America/Argentina/Catamarca.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,9 +2,23 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/America/Argentina/Catamarca
+TZID:/kde.org/Olson_20080523_1/America/Argentina/Catamarca
 X-LIC-LOCATION:America/Argentina/Catamarca
 BEGIN:STANDARD
+TZOFFSETFROM:-0200
+TZOFFSETTO:-0300
+TZNAME:ART
+DTSTART:20080316T000000
+RRULE:FREQ=YEARLY;BYMONTH=3;BYDAY=3SU
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0300
+TZOFFSETTO:-0200
+TZNAME:ARST
+DTSTART:20081005T000000
+RRULE:FREQ=YEARLY;BYMONTH=10;BYDAY=1SU
+END:DAYLIGHT
+BEGIN:STANDARD
 TZOFFSETFROM:-042308
 TZOFFSETTO:-041648
 TZNAME:CMT
@@ -88,6 +102,7 @@
 RDATE:19891015T000000
 RDATE:19901021T000000
 RDATE:19921018T000000
+RDATE:20071230T000000
 END:DAYLIGHT
 BEGIN:STANDARD
 TZOFFSETFROM:-0200
Index: libkcal/libical/zoneinfo/America/Argentina/Tucuman.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Argentina/Tucuman.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/America/Argentina/Tucuman.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,9 +2,23 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/America/Argentina/Tucuman
+TZID:/kde.org/Olson_20080523_1/America/Argentina/Tucuman
 X-LIC-LOCATION:America/Argentina/Tucuman
 BEGIN:STANDARD
+TZOFFSETFROM:-0200
+TZOFFSETTO:-0300
+TZNAME:ART
+DTSTART:20080316T000000
+RRULE:FREQ=YEARLY;BYMONTH=3;BYDAY=3SU
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0300
+TZOFFSETTO:-0200
+TZNAME:ARST
+DTSTART:20081005T000000
+RRULE:FREQ=YEARLY;BYMONTH=10;BYDAY=1SU
+END:DAYLIGHT
+BEGIN:STANDARD
 TZOFFSETFROM:-042052
 TZOFFSETTO:-041648
 TZNAME:CMT
@@ -88,6 +102,7 @@
 RDATE:19891015T000000
 RDATE:19901021T000000
 RDATE:19921018T000000
+RDATE:20071230T000000
 END:DAYLIGHT
 BEGIN:STANDARD
 TZOFFSETFROM:-0200
Index: libkcal/libical/zoneinfo/America/Argentina/Mendoza.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Argentina/Mendoza.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/America/Argentina/Mendoza.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,9 +2,23 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/America/Argentina/Mendoza
+TZID:/kde.org/Olson_20080523_1/America/Argentina/Mendoza
 X-LIC-LOCATION:America/Argentina/Mendoza
 BEGIN:STANDARD
+TZOFFSETFROM:-0200
+TZOFFSETTO:-0300
+TZNAME:ART
+DTSTART:20080316T000000
+RRULE:FREQ=YEARLY;BYMONTH=3;BYDAY=3SU
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0300
+TZOFFSETTO:-0200
+TZNAME:ARST
+DTSTART:20081005T000000
+RRULE:FREQ=YEARLY;BYMONTH=10;BYDAY=1SU
+END:DAYLIGHT
+BEGIN:STANDARD
 TZOFFSETFROM:-043516
 TZOFFSETTO:-041648
 TZNAME:CMT
@@ -86,6 +100,7 @@
 RDATE:19740123T000000
 RDATE:19881201T000000
 RDATE:19891015T000000
+RDATE:20071230T000000
 END:DAYLIGHT
 BEGIN:STANDARD
 TZOFFSETFROM:-0200
Index: libkcal/libical/zoneinfo/America/Argentina/San_Luis.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Argentina/San_Luis.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 0)
+++ libkcal/libical/zoneinfo/America/Argentina/San_Luis.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -0,0 +1,141 @@
+BEGIN:VCALENDAR
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
+VERSION:2.0
+BEGIN:VTIMEZONE
+TZID:/kde.org/Olson_20080523_1/America/Argentina/San_Luis
+X-LIC-LOCATION:America/Argentina/San_Luis
+BEGIN:STANDARD
+TZOFFSETFROM:-042524
+TZOFFSETTO:-041648
+TZNAME:CMT
+DTSTART:18941031T000000
+RDATE:18941031T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-041648
+TZOFFSETTO:-0400
+TZNAME:ART
+DTSTART:19200501T000000
+RDATE:19200501T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0400
+TZOFFSETTO:-0300
+TZNAME:ARST
+DTSTART:19301201T000000
+RDATE:19301201T000000
+RDATE:19311015T000000
+RDATE:19321101T000000
+RDATE:19331101T000000
+RDATE:19341101T000000
+RDATE:19351101T000000
+RDATE:19361101T000000
+RDATE:19371101T000000
+RDATE:19381101T000000
+RDATE:19391101T000000
+RDATE:19400701T000000
+RDATE:19411015T000000
+RDATE:19431015T000000
+RDATE:19461001T000000
+RDATE:19631215T000000
+RDATE:19641015T000000
+RDATE:19651015T000000
+RDATE:19661015T000000
+RDATE:19671001T000000
+RDATE:19681006T000000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:-0300
+TZOFFSETTO:-0400
+TZNAME:ART
+DTSTART:19310401T000000
+RDATE:19310401T000000
+RDATE:19320301T000000
+RDATE:19330301T000000
+RDATE:19340301T000000
+RDATE:19350301T000000
+RDATE:19360301T000000
+RDATE:19370301T000000
+RDATE:19380301T000000
+RDATE:19390301T000000
+RDATE:19400301T000000
+RDATE:19410615T000000
+RDATE:19430801T000000
+RDATE:19460301T000000
+RDATE:19631001T000000
+RDATE:19640301T000000
+RDATE:19650301T000000
+RDATE:19660301T000000
+RDATE:19670402T000000
+RDATE:19680407T000000
+RDATE:19690406T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-0400
+TZOFFSETTO:-0300
+TZNAME:ART
+DTSTART:19691005T000000
+RDATE:19691005T000000
+RDATE:19910507T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0300
+TZOFFSETTO:-0200
+TZNAME:ARST
+DTSTART:19740123T000000
+RDATE:19740123T000000
+RDATE:19881201T000000
+RDATE:19891015T000000
+RDATE:19901021T000000
+RDATE:19911020T000000
+RDATE:19921018T000000
+RDATE:20071230T000000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:-0200
+TZOFFSETTO:-0300
+TZNAME:ART
+DTSTART:19740501T000000
+RDATE:19740501T000000
+RDATE:19890305T000000
+RDATE:19900304T000000
+RDATE:19920301T000000
+RDATE:19930307T000000
+RDATE:20080121T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-0200
+TZOFFSETTO:-0400
+TZNAME:WART
+DTSTART:19910301T000000
+RDATE:19910301T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0300
+TZOFFSETTO:-0300
+TZNAME:ARST
+DTSTART:19991003T000000
+RDATE:19991003T000000
+END:DAYLIGHT
+BEGIN:STANDARD
+TZOFFSETFROM:-0300
+TZOFFSETTO:-0300
+TZNAME:ART
+DTSTART:20000303T000000
+RDATE:20000303T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-0300
+TZOFFSETTO:-0400
+TZNAME:WART
+DTSTART:20040531T000000
+RDATE:20040531T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:-0400
+TZOFFSETTO:-0300
+DTSTART:20040725T000000
+RDATE:20040725T000000
+END:STANDARD
+END:VTIMEZONE
+END:VCALENDAR
Index: libkcal/libical/zoneinfo/America/Argentina/Buenos_Aires.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Argentina/Buenos_Aires.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/America/Argentina/Buenos_Aires.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,9 +2,23 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/America/Argentina/Buenos_Aires
+TZID:/kde.org/Olson_20080523_1/America/Argentina/Buenos_Aires
 X-LIC-LOCATION:America/Argentina/Buenos_Aires
 BEGIN:STANDARD
+TZOFFSETFROM:-0200
+TZOFFSETTO:-0300
+TZNAME:ART
+DTSTART:20080316T000000
+RRULE:FREQ=YEARLY;BYMONTH=3;BYDAY=3SU
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0300
+TZOFFSETTO:-0200
+TZNAME:ARST
+DTSTART:20081005T000000
+RRULE:FREQ=YEARLY;BYMONTH=10;BYDAY=1SU
+END:DAYLIGHT
+BEGIN:STANDARD
 TZOFFSETFROM:-035348
 TZOFFSETTO:-041648
 TZNAME:CMT
@@ -88,6 +102,7 @@
 RDATE:19901021T000000
 RDATE:19911020T000000
 RDATE:19921018T000000
+RDATE:20071230T000000
 END:DAYLIGHT
 BEGIN:STANDARD
 TZOFFSETFROM:-0200
Index: libkcal/libical/zoneinfo/America/Argentina/San_Juan.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Argentina/San_Juan.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/America/Argentina/San_Juan.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,9 +2,23 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/America/Argentina/San_Juan
+TZID:/kde.org/Olson_20080523_1/America/Argentina/San_Juan
 X-LIC-LOCATION:America/Argentina/San_Juan
 BEGIN:STANDARD
+TZOFFSETFROM:-0200
+TZOFFSETTO:-0300
+TZNAME:ART
+DTSTART:20080316T000000
+RRULE:FREQ=YEARLY;BYMONTH=3;BYDAY=3SU
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0300
+TZOFFSETTO:-0200
+TZNAME:ARST
+DTSTART:20081005T000000
+RRULE:FREQ=YEARLY;BYMONTH=10;BYDAY=1SU
+END:DAYLIGHT
+BEGIN:STANDARD
 TZOFFSETFROM:-043404
 TZOFFSETTO:-041648
 TZNAME:CMT
@@ -90,6 +104,7 @@
 RDATE:19901021T000000
 RDATE:19911020T000000
 RDATE:19921018T000000
+RDATE:20071230T000000
 END:DAYLIGHT
 BEGIN:STANDARD
 TZOFFSETFROM:-0200
Index: libkcal/libical/zoneinfo/America/Argentina/Ushuaia.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Argentina/Ushuaia.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/America/Argentina/Ushuaia.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,9 +2,23 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/America/Argentina/Ushuaia
+TZID:/kde.org/Olson_20080523_1/America/Argentina/Ushuaia
 X-LIC-LOCATION:America/Argentina/Ushuaia
 BEGIN:STANDARD
+TZOFFSETFROM:-0200
+TZOFFSETTO:-0300
+TZNAME:ART
+DTSTART:20080316T000000
+RRULE:FREQ=YEARLY;BYMONTH=3;BYDAY=3SU
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0300
+TZOFFSETTO:-0200
+TZNAME:ARST
+DTSTART:20081005T000000
+RRULE:FREQ=YEARLY;BYMONTH=10;BYDAY=1SU
+END:DAYLIGHT
+BEGIN:STANDARD
 TZOFFSETFROM:-043312
 TZOFFSETTO:-041648
 TZNAME:CMT
@@ -89,6 +103,7 @@
 RDATE:19901021T000000
 RDATE:19911020T000000
 RDATE:19921018T000000
+RDATE:20071230T000000
 END:DAYLIGHT
 BEGIN:STANDARD
 TZOFFSETFROM:-0200
Index: libkcal/libical/zoneinfo/America/Argentina/La_Rioja.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Argentina/La_Rioja.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/America/Argentina/La_Rioja.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,9 +2,23 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/America/Argentina/La_Rioja
+TZID:/kde.org/Olson_20080523_1/America/Argentina/La_Rioja
 X-LIC-LOCATION:America/Argentina/La_Rioja
 BEGIN:STANDARD
+TZOFFSETFROM:-0200
+TZOFFSETTO:-0300
+TZNAME:ART
+DTSTART:20080316T000000
+RRULE:FREQ=YEARLY;BYMONTH=3;BYDAY=3SU
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:-0300
+TZOFFSETTO:-0200
+TZNAME:ARST
+DTSTART:20081005T000000
+RRULE:FREQ=YEARLY;BYMONTH=10;BYDAY=1SU
+END:DAYLIGHT
+BEGIN:STANDARD
 TZOFFSETFROM:-042724
 TZOFFSETTO:-041648
 TZNAME:CMT
@@ -90,6 +104,7 @@
 RDATE:19901021T000000
 RDATE:19911020T000000
 RDATE:19921018T000000
+RDATE:20071230T000000
 END:DAYLIGHT
 BEGIN:STANDARD
 TZOFFSETFROM:-0200
Index: libkcal/libical/zoneinfo/America/Pangnirtung.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Pangnirtung.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/America/Pangnirtung.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/America/Pangnirtung
+TZID:/kde.org/Olson_20080523_1/America/Pangnirtung
 X-LIC-LOCATION:America/Pangnirtung
 BEGIN:DAYLIGHT
 TZOFFSETFROM:-0500
Index: libkcal/libical/zoneinfo/America/Maceio.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Maceio.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/America/Maceio.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/America/Maceio
+TZID:/kde.org/Olson_20080523_1/America/Maceio
 X-LIC-LOCATION:America/Maceio
 BEGIN:STANDARD
 TZOFFSETFROM:-022252
Index: libkcal/libical/zoneinfo/America/New_York.ics
===================================================================
--- libkcal/libical/zoneinfo/America/New_York.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/America/New_York.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/America/New_York
+TZID:/kde.org/Olson_20080523_1/America/New_York
 X-LIC-LOCATION:America/New_York
 BEGIN:DAYLIGHT
 TZOFFSETFROM:-0500
Index: libkcal/libical/zoneinfo/America/Panama.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Panama.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/America/Panama.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/America/Panama
+TZID:/kde.org/Olson_20080523_1/America/Panama
 X-LIC-LOCATION:America/Panama
 BEGIN:STANDARD
 TZOFFSETFROM:-051808
Index: libkcal/libical/zoneinfo/America/Adak.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Adak.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/America/Adak.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/America/Adak
+TZID:/kde.org/Olson_20080523_1/America/Adak
 X-LIC-LOCATION:America/Adak
 BEGIN:DAYLIGHT
 TZOFFSETFROM:-1000
Index: libkcal/libical/zoneinfo/America/Merida.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Merida.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/America/Merida.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/America/Merida
+TZID:/kde.org/Olson_20080523_1/America/Merida
 X-LIC-LOCATION:America/Merida
 BEGIN:DAYLIGHT
 TZOFFSETFROM:-0600
Index: libkcal/libical/zoneinfo/America/Resolute.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Resolute.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/America/Resolute.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/America/Resolute
+TZID:/kde.org/Olson_20080523_1/America/Resolute
 X-LIC-LOCATION:America/Resolute
 BEGIN:STANDARD
 TZOFFSETFROM:+0000
Index: libkcal/libical/zoneinfo/America/Nipigon.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Nipigon.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/America/Nipigon.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/America/Nipigon
+TZID:/kde.org/Olson_20080523_1/America/Nipigon
 X-LIC-LOCATION:America/Nipigon
 BEGIN:DAYLIGHT
 TZOFFSETFROM:-0500
Index: libkcal/libical/zoneinfo/America/Dawson_Creek.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Dawson_Creek.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/America/Dawson_Creek.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/America/Dawson_Creek
+TZID:/kde.org/Olson_20080523_1/America/Dawson_Creek
 X-LIC-LOCATION:America/Dawson_Creek
 BEGIN:STANDARD
 TZOFFSETFROM:-080056
Index: libkcal/libical/zoneinfo/America/Thunder_Bay.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Thunder_Bay.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/America/Thunder_Bay.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/America/Thunder_Bay
+TZID:/kde.org/Olson_20080523_1/America/Thunder_Bay
 X-LIC-LOCATION:America/Thunder_Bay
 BEGIN:DAYLIGHT
 TZOFFSETFROM:-0500
Index: libkcal/libical/zoneinfo/America/Toronto.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Toronto.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/America/Toronto.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/America/Toronto
+TZID:/kde.org/Olson_20080523_1/America/Toronto
 X-LIC-LOCATION:America/Toronto
 BEGIN:DAYLIGHT
 TZOFFSETFROM:-0500
Index: libkcal/libical/zoneinfo/America/Port-au-Prince.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Port-au-Prince.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/America/Port-au-Prince.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/America/Port-au-Prince
+TZID:/kde.org/Olson_20080523_1/America/Port-au-Prince
 X-LIC-LOCATION:America/Port-au-Prince
 BEGIN:STANDARD
 TZOFFSETFROM:-044920
Index: libkcal/libical/zoneinfo/America/La_Paz.ics
===================================================================
--- libkcal/libical/zoneinfo/America/La_Paz.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/America/La_Paz.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/America/La_Paz
+TZID:/kde.org/Olson_20080523_1/America/La_Paz
 X-LIC-LOCATION:America/La_Paz
 BEGIN:STANDARD
 TZOFFSETFROM:-043236
Index: libkcal/libical/zoneinfo/America/Goose_Bay.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Goose_Bay.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/America/Goose_Bay.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/America/Goose_Bay
+TZID:/kde.org/Olson_20080523_1/America/Goose_Bay
 X-LIC-LOCATION:America/Goose_Bay
 BEGIN:DAYLIGHT
 TZOFFSETFROM:-0400
Index: libkcal/libical/zoneinfo/America/Godthab.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Godthab.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/America/Godthab.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/America/Godthab
+TZID:/kde.org/Olson_20080523_1/America/Godthab
 X-LIC-LOCATION:America/Godthab
 BEGIN:DAYLIGHT
 TZOFFSETFROM:-0300
Index: libkcal/libical/zoneinfo/America/Cayman.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Cayman.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/America/Cayman.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/America/Cayman
+TZID:/kde.org/Olson_20080523_1/America/Cayman
 X-LIC-LOCATION:America/Cayman
 BEGIN:STANDARD
 TZOFFSETFROM:-052532
Index: libkcal/libical/zoneinfo/America/Vancouver.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Vancouver.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/America/Vancouver.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/America/Vancouver
+TZID:/kde.org/Olson_20080523_1/America/Vancouver
 X-LIC-LOCATION:America/Vancouver
 BEGIN:DAYLIGHT
 TZOFFSETFROM:-0800
Index: libkcal/libical/zoneinfo/America/Bogota.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Bogota.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/America/Bogota.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/America/Bogota
+TZID:/kde.org/Olson_20080523_1/America/Bogota
 X-LIC-LOCATION:America/Bogota
 BEGIN:STANDARD
 TZOFFSETFROM:-045620
Index: libkcal/libical/zoneinfo/America/Moncton.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Moncton.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/America/Moncton.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/America/Moncton
+TZID:/kde.org/Olson_20080523_1/America/Moncton
 X-LIC-LOCATION:America/Moncton
 BEGIN:DAYLIGHT
 TZOFFSETFROM:-0400
Index: libkcal/libical/zoneinfo/America/Rio_Branco.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Rio_Branco.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/America/Rio_Branco.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/America/Rio_Branco
+TZID:/kde.org/Olson_20080523_1/America/Rio_Branco
 X-LIC-LOCATION:America/Rio_Branco
 BEGIN:STANDARD
 TZOFFSETFROM:-043112
Index: libkcal/libical/zoneinfo/America/Whitehorse.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Whitehorse.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/America/Whitehorse.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/America/Whitehorse
+TZID:/kde.org/Olson_20080523_1/America/Whitehorse
 X-LIC-LOCATION:America/Whitehorse
 BEGIN:DAYLIGHT
 TZOFFSETFROM:-0800
Index: libkcal/libical/zoneinfo/America/Cuiaba.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Cuiaba.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/America/Cuiaba.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/America/Cuiaba
+TZID:/kde.org/Olson_20080523_1/America/Cuiaba
 X-LIC-LOCATION:America/Cuiaba
 BEGIN:DAYLIGHT
 TZOFFSETFROM:-0400
Index: libkcal/libical/zoneinfo/America/Tortola.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Tortola.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/America/Tortola.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/America/Tortola
+TZID:/kde.org/Olson_20080523_1/America/Tortola
 X-LIC-LOCATION:America/Tortola
 BEGIN:STANDARD
 TZOFFSETFROM:-041828
Index: libkcal/libical/zoneinfo/America/St_Johns.ics
===================================================================
--- libkcal/libical/zoneinfo/America/St_Johns.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/America/St_Johns.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/America/St_Johns
+TZID:/kde.org/Olson_20080523_1/America/St_Johns
 X-LIC-LOCATION:America/St_Johns
 BEGIN:DAYLIGHT
 TZOFFSETFROM:-0330
Index: libkcal/libical/zoneinfo/America/Antigua.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Antigua.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/America/Antigua.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/America/Antigua
+TZID:/kde.org/Olson_20080523_1/America/Antigua
 X-LIC-LOCATION:America/Antigua
 BEGIN:STANDARD
 TZOFFSETFROM:-040712
Index: libkcal/libical/zoneinfo/America/Puerto_Rico.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Puerto_Rico.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/America/Puerto_Rico.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/America/Puerto_Rico
+TZID:/kde.org/Olson_20080523_1/America/Puerto_Rico
 X-LIC-LOCATION:America/Puerto_Rico
 BEGIN:STANDARD
 TZOFFSETFROM:-042425
Index: libkcal/libical/zoneinfo/America/Havana.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Havana.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/America/Havana.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,23 +2,23 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/America/Havana
+TZID:/kde.org/Olson_20080523_1/America/Havana
 X-LIC-LOCATION:America/Havana
+BEGIN:STANDARD
+TZOFFSETFROM:-0400
+TZOFFSETTO:-0500
+TZNAME:CST
+DTSTART:20061029T010000
+RRULE:FREQ=YEARLY;BYMONTH=10;BYDAY=-1SU
+END:STANDARD
 BEGIN:DAYLIGHT
 TZOFFSETFROM:-0500
 TZOFFSETTO:-0400
 TZNAME:CDT
-DTSTART:20070311T000000
-RRULE:FREQ=YEARLY;BYMONTH=3;BYDAY=2SU
+DTSTART:20080316T000000
+RRULE:FREQ=YEARLY;BYMONTH=3;BYDAY=3SU
 END:DAYLIGHT
 BEGIN:STANDARD
-TZOFFSETFROM:-0400
-TZOFFSETTO:-0500
-TZNAME:CST
-DTSTART:20071104T010000
-RRULE:FREQ=YEARLY;BYMONTH=11;BYDAY=1SU
-END:STANDARD
-BEGIN:STANDARD
 TZOFFSETFROM:-052928
 TZOFFSETTO:-052936
 TZNAME:HMT
@@ -83,6 +83,7 @@
 RDATE:20020407T000000
 RDATE:20030406T000000
 RDATE:20040404T000000
+RDATE:20070311T000000
 END:DAYLIGHT
 BEGIN:STANDARD
 TZOFFSETFROM:-0400
@@ -134,7 +135,6 @@
 RDATE:20011028T010000
 RDATE:20021027T010000
 RDATE:20031026T010000
-RDATE:20061029T010000
 END:STANDARD
 BEGIN:DAYLIGHT
 TZOFFSETFROM:-0400
Index: libkcal/libical/zoneinfo/America/St_Kitts.ics
===================================================================
--- libkcal/libical/zoneinfo/America/St_Kitts.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/America/St_Kitts.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/America/St_Kitts
+TZID:/kde.org/Olson_20080523_1/America/St_Kitts
 X-LIC-LOCATION:America/St_Kitts
 BEGIN:STANDARD
 TZOFFSETFROM:-041052
Index: libkcal/libical/zoneinfo/America/Inuvik.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Inuvik.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/America/Inuvik.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/America/Inuvik
+TZID:/kde.org/Olson_20080523_1/America/Inuvik
 X-LIC-LOCATION:America/Inuvik
 BEGIN:DAYLIGHT
 TZOFFSETFROM:-0700
Index: libkcal/libical/zoneinfo/America/Iqaluit.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Iqaluit.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/America/Iqaluit.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/America/Iqaluit
+TZID:/kde.org/Olson_20080523_1/America/Iqaluit
 X-LIC-LOCATION:America/Iqaluit
 BEGIN:DAYLIGHT
 TZOFFSETFROM:-0500
Index: libkcal/libical/zoneinfo/America/Montevideo.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Montevideo.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/America/Montevideo.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/America/Montevideo
+TZID:/kde.org/Olson_20080523_1/America/Montevideo
 X-LIC-LOCATION:America/Montevideo
 BEGIN:DAYLIGHT
 TZOFFSETFROM:-0300
Index: libkcal/libical/zoneinfo/America/Detroit.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Detroit.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/America/Detroit.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/America/Detroit
+TZID:/kde.org/Olson_20080523_1/America/Detroit
 X-LIC-LOCATION:America/Detroit
 BEGIN:DAYLIGHT
 TZOFFSETFROM:-0500
Index: libkcal/libical/zoneinfo/America/Belize.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Belize.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/America/Belize.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/America/Belize
+TZID:/kde.org/Olson_20080523_1/America/Belize
 X-LIC-LOCATION:America/Belize
 BEGIN:STANDARD
 TZOFFSETFROM:-055248
Index: libkcal/libical/zoneinfo/America/Eirunepe.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Eirunepe.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/America/Eirunepe.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/America/Eirunepe
+TZID:/kde.org/Olson_20080523_1/America/Eirunepe
 X-LIC-LOCATION:America/Eirunepe
 BEGIN:STANDARD
 TZOFFSETFROM:-043928
Index: libkcal/libical/zoneinfo/America/Mexico_City.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Mexico_City.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/America/Mexico_City.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/America/Mexico_City
+TZID:/kde.org/Olson_20080523_1/America/Mexico_City
 X-LIC-LOCATION:America/Mexico_City
 BEGIN:DAYLIGHT
 TZOFFSETFROM:-0600
Index: libkcal/libical/zoneinfo/America/Barbados.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Barbados.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/America/Barbados.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/America/Barbados
+TZID:/kde.org/Olson_20080523_1/America/Barbados
 X-LIC-LOCATION:America/Barbados
 BEGIN:STANDARD
 TZOFFSETFROM:-035828
Index: libkcal/libical/zoneinfo/America/Danmarkshavn.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Danmarkshavn.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/America/Danmarkshavn.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/America/Danmarkshavn
+TZID:/kde.org/Olson_20080523_1/America/Danmarkshavn
 X-LIC-LOCATION:America/Danmarkshavn
 BEGIN:STANDARD
 TZOFFSETFROM:-011440
Index: libkcal/libical/zoneinfo/America/Rankin_Inlet.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Rankin_Inlet.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/America/Rankin_Inlet.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/America/Rankin_Inlet
+TZID:/kde.org/Olson_20080523_1/America/Rankin_Inlet
 X-LIC-LOCATION:America/Rankin_Inlet
 BEGIN:DAYLIGHT
 TZOFFSETFROM:-0600
Index: libkcal/libical/zoneinfo/America/Kentucky/Monticello.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Kentucky/Monticello.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/America/Kentucky/Monticello.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/America/Kentucky/Monticello
+TZID:/kde.org/Olson_20080523_1/America/Kentucky/Monticello
 X-LIC-LOCATION:America/Kentucky/Monticello
 BEGIN:DAYLIGHT
 TZOFFSETFROM:-0500
Index: libkcal/libical/zoneinfo/America/Kentucky/Louisville.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Kentucky/Louisville.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/America/Kentucky/Louisville.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/America/Kentucky/Louisville
+TZID:/kde.org/Olson_20080523_1/America/Kentucky/Louisville
 X-LIC-LOCATION:America/Kentucky/Louisville
 BEGIN:DAYLIGHT
 TZOFFSETFROM:-0500
Index: libkcal/libical/zoneinfo/America/Sao_Paulo.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Sao_Paulo.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/America/Sao_Paulo.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/America/Sao_Paulo
+TZID:/kde.org/Olson_20080523_1/America/Sao_Paulo
 X-LIC-LOCATION:America/Sao_Paulo
 BEGIN:DAYLIGHT
 TZOFFSETFROM:-0300
Index: libkcal/libical/zoneinfo/America/Manaus.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Manaus.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/America/Manaus.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/America/Manaus
+TZID:/kde.org/Olson_20080523_1/America/Manaus
 X-LIC-LOCATION:America/Manaus
 BEGIN:STANDARD
 TZOFFSETFROM:-040004
Index: libkcal/libical/zoneinfo/America/Guyana.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Guyana.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/America/Guyana.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/America/Guyana
+TZID:/kde.org/Olson_20080523_1/America/Guyana
 X-LIC-LOCATION:America/Guyana
 BEGIN:STANDARD
 TZOFFSETFROM:-035240
Index: libkcal/libical/zoneinfo/America/Tegucigalpa.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Tegucigalpa.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/America/Tegucigalpa.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/America/Tegucigalpa
+TZID:/kde.org/Olson_20080523_1/America/Tegucigalpa
 X-LIC-LOCATION:America/Tegucigalpa
 BEGIN:STANDARD
 TZOFFSETFROM:-054852
Index: libkcal/libical/zoneinfo/America/Aruba.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Aruba.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/America/Aruba.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/America/Aruba
+TZID:/kde.org/Olson_20080523_1/America/Aruba
 X-LIC-LOCATION:America/Aruba
 BEGIN:STANDARD
 TZOFFSETFROM:-044024
Index: libkcal/libical/zoneinfo/America/Nassau.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Nassau.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/America/Nassau.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/America/Nassau
+TZID:/kde.org/Olson_20080523_1/America/Nassau
 X-LIC-LOCATION:America/Nassau
 BEGIN:DAYLIGHT
 TZOFFSETFROM:-0500
Index: libkcal/libical/zoneinfo/America/El_Salvador.ics
===================================================================
--- libkcal/libical/zoneinfo/America/El_Salvador.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/America/El_Salvador.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/America/El_Salvador
+TZID:/kde.org/Olson_20080523_1/America/El_Salvador
 X-LIC-LOCATION:America/El_Salvador
 BEGIN:STANDARD
 TZOFFSETFROM:-055648
Index: libkcal/libical/zoneinfo/America/Blanc-Sablon.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Blanc-Sablon.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/America/Blanc-Sablon.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/America/Blanc-Sablon
+TZID:/kde.org/Olson_20080523_1/America/Blanc-Sablon
 X-LIC-LOCATION:America/Blanc-Sablon
 BEGIN:STANDARD
 TZOFFSETFROM:-034828
Index: libkcal/libical/zoneinfo/America/Dawson.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Dawson.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/America/Dawson.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/America/Dawson
+TZID:/kde.org/Olson_20080523_1/America/Dawson
 X-LIC-LOCATION:America/Dawson
 BEGIN:DAYLIGHT
 TZOFFSETFROM:-0800
Index: libkcal/libical/zoneinfo/America/Chicago.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Chicago.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/America/Chicago.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/America/Chicago
+TZID:/kde.org/Olson_20080523_1/America/Chicago
 X-LIC-LOCATION:America/Chicago
 BEGIN:DAYLIGHT
 TZOFFSETFROM:-0600
Index: libkcal/libical/zoneinfo/America/Recife.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Recife.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/America/Recife.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/America/Recife
+TZID:/kde.org/Olson_20080523_1/America/Recife
 X-LIC-LOCATION:America/Recife
 BEGIN:STANDARD
 TZOFFSETFROM:-021936
Index: libkcal/libical/zoneinfo/America/Nome.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Nome.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/America/Nome.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/America/Nome
+TZID:/kde.org/Olson_20080523_1/America/Nome
 X-LIC-LOCATION:America/Nome
 BEGIN:DAYLIGHT
 TZOFFSETFROM:-0900
Index: libkcal/libical/zoneinfo/America/Swift_Current.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Swift_Current.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/America/Swift_Current.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/America/Swift_Current
+TZID:/kde.org/Olson_20080523_1/America/Swift_Current
 X-LIC-LOCATION:America/Swift_Current
 BEGIN:STANDARD
 TZOFFSETFROM:-071120
Index: libkcal/libical/zoneinfo/America/Grand_Turk.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Grand_Turk.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/America/Grand_Turk.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/America/Grand_Turk
+TZID:/kde.org/Olson_20080523_1/America/Grand_Turk
 X-LIC-LOCATION:America/Grand_Turk
 BEGIN:DAYLIGHT
 TZOFFSETFROM:-0500
Index: libkcal/libical/zoneinfo/America/Guayaquil.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Guayaquil.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/America/Guayaquil.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/America/Guayaquil
+TZID:/kde.org/Olson_20080523_1/America/Guayaquil
 X-LIC-LOCATION:America/Guayaquil
 BEGIN:STANDARD
 TZOFFSETFROM:-051920
Index: libkcal/libical/zoneinfo/America/Grenada.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Grenada.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/America/Grenada.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/America/Grenada
+TZID:/kde.org/Olson_20080523_1/America/Grenada
 X-LIC-LOCATION:America/Grenada
 BEGIN:STANDARD
 TZOFFSETFROM:-0407
Index: libkcal/libical/zoneinfo/America/Atikokan.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Atikokan.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/America/Atikokan.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/America/Atikokan
+TZID:/kde.org/Olson_20080523_1/America/Atikokan
 X-LIC-LOCATION:America/Atikokan
 BEGIN:STANDARD
 TZOFFSETFROM:-060628
Index: libkcal/libical/zoneinfo/America/Boise.ics
===================================================================
--- libkcal/libical/zoneinfo/America/Boise.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/America/Boise.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/America/Boise
+TZID:/kde.org/Olson_20080523_1/America/Boise
 X-LIC-LOCATION:America/Boise
 BEGIN:DAYLIGHT
 TZOFFSETFROM:-0700
Index: libkcal/libical/zoneinfo/Indian/Mauritius.ics
===================================================================
--- libkcal/libical/zoneinfo/Indian/Mauritius.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Indian/Mauritius.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Indian/Mauritius
+TZID:/kde.org/Olson_20080523_1/Indian/Mauritius
 X-LIC-LOCATION:Indian/Mauritius
 BEGIN:STANDARD
 TZOFFSETFROM:+0350
Index: libkcal/libical/zoneinfo/Indian/Mayotte.ics
===================================================================
--- libkcal/libical/zoneinfo/Indian/Mayotte.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Indian/Mayotte.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Indian/Mayotte
+TZID:/kde.org/Olson_20080523_1/Indian/Mayotte
 X-LIC-LOCATION:Indian/Mayotte
 BEGIN:STANDARD
 TZOFFSETFROM:+030056
Index: libkcal/libical/zoneinfo/Indian/Chagos.ics
===================================================================
--- libkcal/libical/zoneinfo/Indian/Chagos.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Indian/Chagos.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Indian/Chagos
+TZID:/kde.org/Olson_20080523_1/Indian/Chagos
 X-LIC-LOCATION:Indian/Chagos
 BEGIN:STANDARD
 TZOFFSETFROM:+044940
Index: libkcal/libical/zoneinfo/Indian/Maldives.ics
===================================================================
--- libkcal/libical/zoneinfo/Indian/Maldives.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Indian/Maldives.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Indian/Maldives
+TZID:/kde.org/Olson_20080523_1/Indian/Maldives
 X-LIC-LOCATION:Indian/Maldives
 BEGIN:STANDARD
 TZOFFSETFROM:+0454
Index: libkcal/libical/zoneinfo/Indian/Cocos.ics
===================================================================
--- libkcal/libical/zoneinfo/Indian/Cocos.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Indian/Cocos.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Indian/Cocos
+TZID:/kde.org/Olson_20080523_1/Indian/Cocos
 X-LIC-LOCATION:Indian/Cocos
 BEGIN:STANDARD
 TZOFFSETFROM:+062740
Index: libkcal/libical/zoneinfo/Indian/Mahe.ics
===================================================================
--- libkcal/libical/zoneinfo/Indian/Mahe.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Indian/Mahe.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Indian/Mahe
+TZID:/kde.org/Olson_20080523_1/Indian/Mahe
 X-LIC-LOCATION:Indian/Mahe
 BEGIN:STANDARD
 TZOFFSETFROM:+034148
Index: libkcal/libical/zoneinfo/Indian/Christmas.ics
===================================================================
--- libkcal/libical/zoneinfo/Indian/Christmas.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Indian/Christmas.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Indian/Christmas
+TZID:/kde.org/Olson_20080523_1/Indian/Christmas
 X-LIC-LOCATION:Indian/Christmas
 BEGIN:STANDARD
 TZOFFSETFROM:+070252
Index: libkcal/libical/zoneinfo/Indian/Comoro.ics
===================================================================
--- libkcal/libical/zoneinfo/Indian/Comoro.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Indian/Comoro.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Indian/Comoro
+TZID:/kde.org/Olson_20080523_1/Indian/Comoro
 X-LIC-LOCATION:Indian/Comoro
 BEGIN:STANDARD
 TZOFFSETFROM:+025304
Index: libkcal/libical/zoneinfo/Indian/Reunion.ics
===================================================================
--- libkcal/libical/zoneinfo/Indian/Reunion.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Indian/Reunion.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Indian/Reunion
+TZID:/kde.org/Olson_20080523_1/Indian/Reunion
 X-LIC-LOCATION:Indian/Reunion
 BEGIN:STANDARD
 TZOFFSETFROM:+034152
Index: libkcal/libical/zoneinfo/Indian/Antananarivo.ics
===================================================================
--- libkcal/libical/zoneinfo/Indian/Antananarivo.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Indian/Antananarivo.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Indian/Antananarivo
+TZID:/kde.org/Olson_20080523_1/Indian/Antananarivo
 X-LIC-LOCATION:Indian/Antananarivo
 BEGIN:STANDARD
 TZOFFSETFROM:+031004
Index: libkcal/libical/zoneinfo/Indian/Kerguelen.ics
===================================================================
--- libkcal/libical/zoneinfo/Indian/Kerguelen.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Indian/Kerguelen.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Indian/Kerguelen
+TZID:/kde.org/Olson_20080523_1/Indian/Kerguelen
 X-LIC-LOCATION:Indian/Kerguelen
 BEGIN:STANDARD
 TZOFFSETFROM:+0000
Index: libkcal/libical/zoneinfo/zones.tab
===================================================================
--- libkcal/libical/zoneinfo/zones.tab	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/zones.tab	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -62,6 +62,7 @@
 -0325300 -0684900 America/Argentina/Mendoza
 -0513800 -0691300 America/Argentina/Rio_Gallegos
 -0313200 -0683100 America/Argentina/San_Juan
+-0331900 -0662100 America/Argentina/San_Luis
 -0264900 -0651300 America/Argentina/Tucuman
 -0544800 -0681800 America/Argentina/Ushuaia
 +0123000 -0695800 America/Aruba
@@ -128,6 +129,7 @@
 -0094000 -0354300 America/Maceio
 +0120900 -0861700 America/Managua
 -0030800 -0600100 America/Manaus
++0180400 -0630500 America/Marigot
 +0143600 -0610500 America/Martinique
 +0231300 -1062500 America/Mazatlan
 +0450628 -0873651 America/Menominee
@@ -165,6 +167,7 @@
 -0233200 -0463700 America/Sao_Paulo
 +0702900 -0215800 America/Scoresbysund
 +0364708 -1084111 America/Shiprock
++0175300 -0625100 America/St_Barthelemy
 +0473400 -0524300 America/St_Johns
 +0171800 -0624300 America/St_Kitts
 +0140100 -0610000 America/St_Lucia
@@ -207,7 +210,6 @@
 +0335300 +0353000 Asia/Beirut
 +0425400 +0743600 Asia/Bishkek
 +0045600 +1145500 Asia/Brunei
-+0223200 +0882200 Asia/Calcutta
 +0480400 +1143000 Asia/Choibalsan
 +0293400 +1063500 Asia/Chongqing
 +0065600 +0795100 Asia/Colombo
@@ -218,6 +220,7 @@
 +0383500 +0684800 Asia/Dushanbe
 +0313000 +0342800 Asia/Gaza
 +0454500 +1264100 Asia/Harbin
++0104500 +1064000 Asia/Ho_Chi_Minh
 +0221700 +1140900 Asia/Hong_Kong
 +0480100 +0913900 Asia/Hovd
 +0521600 +1042000 Asia/Irkutsk
@@ -230,6 +233,7 @@
 +0245200 +0670300 Asia/Karachi
 +0392900 +0755900 Asia/Kashgar
 +0274300 +0851900 Asia/Katmandu
++0223200 +0882200 Asia/Kolkata
 +0560100 +0925000 Asia/Krasnoyarsk
 +0031000 +1014200 Asia/Kuala_Lumpur
 +0013300 +1102000 Asia/Kuching
@@ -250,7 +254,6 @@
 +0444800 +0652800 Asia/Qyzylorda
 +0164700 +0961000 Asia/Rangoon
 +0243800 +0464300 Asia/Riyadh
-+0104500 +1064000 Asia/Saigon
 +0465800 +1424200 Asia/Sakhalin
 +0394000 +0664800 Asia/Samarkand
 +0373300 +1265800 Asia/Seoul
@@ -274,7 +277,6 @@
 +0280600 -0152400 Atlantic/Canary
 +0145500 -0233100 Atlantic/Cape_Verde
 +0620100 -0064600 Atlantic/Faroe
-+0705900 -0080500 Atlantic/Jan_Mayen
 +0323800 -0165400 Atlantic/Madeira
 +0640900 -0215100 Atlantic/Reykjavik
 -0541600 -0363200 Atlantic/South_Georgia
Index: libkcal/libical/zoneinfo/zones.h
===================================================================
--- libkcal/libical/zoneinfo/zones.h	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/zones.h	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -62,6 +62,7 @@
 N_("America/Argentina/Mendoza");
 N_("America/Argentina/Rio_Gallegos");
 N_("America/Argentina/San_Juan");
+N_("America/Argentina/San_Luis");
 N_("America/Argentina/Tucuman");
 N_("America/Argentina/Ushuaia");
 N_("America/Aruba");
@@ -128,6 +129,7 @@
 N_("America/Maceio");
 N_("America/Managua");
 N_("America/Manaus");
+N_("America/Marigot");
 N_("America/Martinique");
 N_("America/Mazatlan");
 N_("America/Menominee");
@@ -165,6 +167,7 @@
 N_("America/Sao_Paulo");
 N_("America/Scoresbysund");
 N_("America/Shiprock");
+N_("America/St_Barthelemy");
 N_("America/St_Johns");
 N_("America/St_Kitts");
 N_("America/St_Lucia");
@@ -207,7 +210,6 @@
 N_("Asia/Beirut");
 N_("Asia/Bishkek");
 N_("Asia/Brunei");
-N_("Asia/Calcutta");
 N_("Asia/Choibalsan");
 N_("Asia/Chongqing");
 N_("Asia/Colombo");
@@ -218,6 +220,7 @@
 N_("Asia/Dushanbe");
 N_("Asia/Gaza");
 N_("Asia/Harbin");
+N_("Asia/Ho_Chi_Minh");
 N_("Asia/Hong_Kong");
 N_("Asia/Hovd");
 N_("Asia/Irkutsk");
@@ -230,6 +233,7 @@
 N_("Asia/Karachi");
 N_("Asia/Kashgar");
 N_("Asia/Katmandu");
+N_("Asia/Kolkata");
 N_("Asia/Krasnoyarsk");
 N_("Asia/Kuala_Lumpur");
 N_("Asia/Kuching");
@@ -250,7 +254,6 @@
 N_("Asia/Qyzylorda");
 N_("Asia/Rangoon");
 N_("Asia/Riyadh");
-N_("Asia/Saigon");
 N_("Asia/Sakhalin");
 N_("Asia/Samarkand");
 N_("Asia/Seoul");
@@ -274,7 +277,6 @@
 N_("Atlantic/Canary");
 N_("Atlantic/Cape_Verde");
 N_("Atlantic/Faroe");
-N_("Atlantic/Jan_Mayen");
 N_("Atlantic/Madeira");
 N_("Atlantic/Reykjavik");
 N_("Atlantic/South_Georgia");
Index: libkcal/libical/zoneinfo/Africa/Luanda.ics
===================================================================
--- libkcal/libical/zoneinfo/Africa/Luanda.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Africa/Luanda.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Africa/Luanda
+TZID:/kde.org/Olson_20080523_1/Africa/Luanda
 X-LIC-LOCATION:Africa/Luanda
 BEGIN:STANDARD
 TZOFFSETFROM:+005256
Index: libkcal/libical/zoneinfo/Africa/Lagos.ics
===================================================================
--- libkcal/libical/zoneinfo/Africa/Lagos.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Africa/Lagos.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Africa/Lagos
+TZID:/kde.org/Olson_20080523_1/Africa/Lagos
 X-LIC-LOCATION:Africa/Lagos
 BEGIN:STANDARD
 TZOFFSETFROM:+001336
Index: libkcal/libical/zoneinfo/Africa/Douala.ics
===================================================================
--- libkcal/libical/zoneinfo/Africa/Douala.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Africa/Douala.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Africa/Douala
+TZID:/kde.org/Olson_20080523_1/Africa/Douala
 X-LIC-LOCATION:Africa/Douala
 BEGIN:STANDARD
 TZOFFSETFROM:+003848
Index: libkcal/libical/zoneinfo/Africa/Bangui.ics
===================================================================
--- libkcal/libical/zoneinfo/Africa/Bangui.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Africa/Bangui.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Africa/Bangui
+TZID:/kde.org/Olson_20080523_1/Africa/Bangui
 X-LIC-LOCATION:Africa/Bangui
 BEGIN:STANDARD
 TZOFFSETFROM:+011420
Index: libkcal/libical/zoneinfo/Africa/Sao_Tome.ics
===================================================================
--- libkcal/libical/zoneinfo/Africa/Sao_Tome.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Africa/Sao_Tome.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Africa/Sao_Tome
+TZID:/kde.org/Olson_20080523_1/Africa/Sao_Tome
 X-LIC-LOCATION:Africa/Sao_Tome
 BEGIN:STANDARD
 TZOFFSETFROM:+002656
Index: libkcal/libical/zoneinfo/Africa/Windhoek.ics
===================================================================
--- libkcal/libical/zoneinfo/Africa/Windhoek.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Africa/Windhoek.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Africa/Windhoek
+TZID:/kde.org/Olson_20080523_1/Africa/Windhoek
 X-LIC-LOCATION:Africa/Windhoek
 BEGIN:DAYLIGHT
 TZOFFSETFROM:+0100
Index: libkcal/libical/zoneinfo/Africa/Djibouti.ics
===================================================================
--- libkcal/libical/zoneinfo/Africa/Djibouti.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Africa/Djibouti.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Africa/Djibouti
+TZID:/kde.org/Olson_20080523_1/Africa/Djibouti
 X-LIC-LOCATION:Africa/Djibouti
 BEGIN:STANDARD
 TZOFFSETFROM:+025236
Index: libkcal/libical/zoneinfo/Africa/Accra.ics
===================================================================
--- libkcal/libical/zoneinfo/Africa/Accra.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Africa/Accra.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Africa/Accra
+TZID:/kde.org/Olson_20080523_1/Africa/Accra
 X-LIC-LOCATION:Africa/Accra
 BEGIN:STANDARD
 TZOFFSETFROM:-000052
Index: libkcal/libical/zoneinfo/Africa/Banjul.ics
===================================================================
--- libkcal/libical/zoneinfo/Africa/Banjul.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Africa/Banjul.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Africa/Banjul
+TZID:/kde.org/Olson_20080523_1/Africa/Banjul
 X-LIC-LOCATION:Africa/Banjul
 BEGIN:STANDARD
 TZOFFSETFROM:-010636
Index: libkcal/libical/zoneinfo/Africa/El_Aaiun.ics
===================================================================
--- libkcal/libical/zoneinfo/Africa/El_Aaiun.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Africa/El_Aaiun.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Africa/El_Aaiun
+TZID:/kde.org/Olson_20080523_1/Africa/El_Aaiun
 X-LIC-LOCATION:Africa/El_Aaiun
 BEGIN:STANDARD
 TZOFFSETFROM:-005248
Index: libkcal/libical/zoneinfo/Africa/Ndjamena.ics
===================================================================
--- libkcal/libical/zoneinfo/Africa/Ndjamena.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Africa/Ndjamena.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Africa/Ndjamena
+TZID:/kde.org/Olson_20080523_1/Africa/Ndjamena
 X-LIC-LOCATION:Africa/Ndjamena
 BEGIN:STANDARD
 TZOFFSETFROM:+010012
Index: libkcal/libical/zoneinfo/Africa/Ouagadougou.ics
===================================================================
--- libkcal/libical/zoneinfo/Africa/Ouagadougou.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Africa/Ouagadougou.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Africa/Ouagadougou
+TZID:/kde.org/Olson_20080523_1/Africa/Ouagadougou
 X-LIC-LOCATION:Africa/Ouagadougou
 BEGIN:STANDARD
 TZOFFSETFROM:-000604
Index: libkcal/libical/zoneinfo/Africa/Mogadishu.ics
===================================================================
--- libkcal/libical/zoneinfo/Africa/Mogadishu.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Africa/Mogadishu.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Africa/Mogadishu
+TZID:/kde.org/Olson_20080523_1/Africa/Mogadishu
 X-LIC-LOCATION:Africa/Mogadishu
 BEGIN:STANDARD
 TZOFFSETFROM:+030128
Index: libkcal/libical/zoneinfo/Africa/Porto-Novo.ics
===================================================================
--- libkcal/libical/zoneinfo/Africa/Porto-Novo.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Africa/Porto-Novo.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Africa/Porto-Novo
+TZID:/kde.org/Olson_20080523_1/Africa/Porto-Novo
 X-LIC-LOCATION:Africa/Porto-Novo
 BEGIN:STANDARD
 TZOFFSETFROM:+001028
Index: libkcal/libical/zoneinfo/Africa/Johannesburg.ics
===================================================================
--- libkcal/libical/zoneinfo/Africa/Johannesburg.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Africa/Johannesburg.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Africa/Johannesburg
+TZID:/kde.org/Olson_20080523_1/Africa/Johannesburg
 X-LIC-LOCATION:Africa/Johannesburg
 BEGIN:STANDARD
 TZOFFSETFROM:+0152
Index: libkcal/libical/zoneinfo/Africa/Brazzaville.ics
===================================================================
--- libkcal/libical/zoneinfo/Africa/Brazzaville.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Africa/Brazzaville.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Africa/Brazzaville
+TZID:/kde.org/Olson_20080523_1/Africa/Brazzaville
 X-LIC-LOCATION:Africa/Brazzaville
 BEGIN:STANDARD
 TZOFFSETFROM:+010108
Index: libkcal/libical/zoneinfo/Africa/Abidjan.ics
===================================================================
--- libkcal/libical/zoneinfo/Africa/Abidjan.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Africa/Abidjan.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Africa/Abidjan
+TZID:/kde.org/Olson_20080523_1/Africa/Abidjan
 X-LIC-LOCATION:Africa/Abidjan
 BEGIN:STANDARD
 TZOFFSETFROM:-001608
Index: libkcal/libical/zoneinfo/Africa/Libreville.ics
===================================================================
--- libkcal/libical/zoneinfo/Africa/Libreville.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Africa/Libreville.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Africa/Libreville
+TZID:/kde.org/Olson_20080523_1/Africa/Libreville
 X-LIC-LOCATION:Africa/Libreville
 BEGIN:STANDARD
 TZOFFSETFROM:+003748
Index: libkcal/libical/zoneinfo/Africa/Freetown.ics
===================================================================
--- libkcal/libical/zoneinfo/Africa/Freetown.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Africa/Freetown.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Africa/Freetown
+TZID:/kde.org/Olson_20080523_1/Africa/Freetown
 X-LIC-LOCATION:Africa/Freetown
 BEGIN:STANDARD
 TZOFFSETFROM:-0053
Index: libkcal/libical/zoneinfo/Africa/Addis_Ababa.ics
===================================================================
--- libkcal/libical/zoneinfo/Africa/Addis_Ababa.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Africa/Addis_Ababa.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Africa/Addis_Ababa
+TZID:/kde.org/Olson_20080523_1/Africa/Addis_Ababa
 X-LIC-LOCATION:Africa/Addis_Ababa
 BEGIN:STANDARD
 TZOFFSETFROM:+023448
Index: libkcal/libical/zoneinfo/Africa/Bamako.ics
===================================================================
--- libkcal/libical/zoneinfo/Africa/Bamako.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Africa/Bamako.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Africa/Bamako
+TZID:/kde.org/Olson_20080523_1/Africa/Bamako
 X-LIC-LOCATION:Africa/Bamako
 BEGIN:STANDARD
 TZOFFSETFROM:-0032
Index: libkcal/libical/zoneinfo/Africa/Lubumbashi.ics
===================================================================
--- libkcal/libical/zoneinfo/Africa/Lubumbashi.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Africa/Lubumbashi.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Africa/Lubumbashi
+TZID:/kde.org/Olson_20080523_1/Africa/Lubumbashi
 X-LIC-LOCATION:Africa/Lubumbashi
 BEGIN:STANDARD
 TZOFFSETFROM:+014952
Index: libkcal/libical/zoneinfo/Africa/Gaborone.ics
===================================================================
--- libkcal/libical/zoneinfo/Africa/Gaborone.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Africa/Gaborone.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Africa/Gaborone
+TZID:/kde.org/Olson_20080523_1/Africa/Gaborone
 X-LIC-LOCATION:Africa/Gaborone
 BEGIN:STANDARD
 TZOFFSETFROM:+014340
Index: libkcal/libical/zoneinfo/Africa/Cairo.ics
===================================================================
--- libkcal/libical/zoneinfo/Africa/Cairo.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Africa/Cairo.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Africa/Cairo
+TZID:/kde.org/Olson_20080523_1/Africa/Cairo
 X-LIC-LOCATION:Africa/Cairo
 BEGIN:DAYLIGHT
 TZOFFSETFROM:+0200
Index: libkcal/libical/zoneinfo/Africa/Kigali.ics
===================================================================
--- libkcal/libical/zoneinfo/Africa/Kigali.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Africa/Kigali.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Africa/Kigali
+TZID:/kde.org/Olson_20080523_1/Africa/Kigali
 X-LIC-LOCATION:Africa/Kigali
 BEGIN:STANDARD
 TZOFFSETFROM:+020016
Index: libkcal/libical/zoneinfo/Africa/Ceuta.ics
===================================================================
--- libkcal/libical/zoneinfo/Africa/Ceuta.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Africa/Ceuta.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Africa/Ceuta
+TZID:/kde.org/Olson_20080523_1/Africa/Ceuta
 X-LIC-LOCATION:Africa/Ceuta
 BEGIN:DAYLIGHT
 TZOFFSETFROM:+0100
Index: libkcal/libical/zoneinfo/Africa/Harare.ics
===================================================================
--- libkcal/libical/zoneinfo/Africa/Harare.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Africa/Harare.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Africa/Harare
+TZID:/kde.org/Olson_20080523_1/Africa/Harare
 X-LIC-LOCATION:Africa/Harare
 BEGIN:STANDARD
 TZOFFSETFROM:+020412
Index: libkcal/libical/zoneinfo/Africa/Tunis.ics
===================================================================
--- libkcal/libical/zoneinfo/Africa/Tunis.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Africa/Tunis.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Africa/Tunis
+TZID:/kde.org/Olson_20080523_1/Africa/Tunis
 X-LIC-LOCATION:Africa/Tunis
 BEGIN:DAYLIGHT
 TZOFFSETFROM:+0100
Index: libkcal/libical/zoneinfo/Africa/Asmara.ics
===================================================================
--- libkcal/libical/zoneinfo/Africa/Asmara.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Africa/Asmara.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Africa/Asmara
+TZID:/kde.org/Olson_20080523_1/Africa/Asmara
 X-LIC-LOCATION:Africa/Asmara
 BEGIN:STANDARD
 TZOFFSETFROM:+023532
Index: libkcal/libical/zoneinfo/Africa/Maputo.ics
===================================================================
--- libkcal/libical/zoneinfo/Africa/Maputo.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Africa/Maputo.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Africa/Maputo
+TZID:/kde.org/Olson_20080523_1/Africa/Maputo
 X-LIC-LOCATION:Africa/Maputo
 BEGIN:STANDARD
 TZOFFSETFROM:+021020
Index: libkcal/libical/zoneinfo/Africa/Kampala.ics
===================================================================
--- libkcal/libical/zoneinfo/Africa/Kampala.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Africa/Kampala.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Africa/Kampala
+TZID:/kde.org/Olson_20080523_1/Africa/Kampala
 X-LIC-LOCATION:Africa/Kampala
 BEGIN:STANDARD
 TZOFFSETFROM:+020940
Index: libkcal/libical/zoneinfo/Africa/Conakry.ics
===================================================================
--- libkcal/libical/zoneinfo/Africa/Conakry.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Africa/Conakry.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Africa/Conakry
+TZID:/kde.org/Olson_20080523_1/Africa/Conakry
 X-LIC-LOCATION:Africa/Conakry
 BEGIN:STANDARD
 TZOFFSETFROM:-005452
Index: libkcal/libical/zoneinfo/Africa/Casablanca.ics
===================================================================
--- libkcal/libical/zoneinfo/Africa/Casablanca.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Africa/Casablanca.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Africa/Casablanca
+TZID:/kde.org/Olson_20080523_1/Africa/Casablanca
 X-LIC-LOCATION:Africa/Casablanca
 BEGIN:STANDARD
 TZOFFSETFROM:-003020
Index: libkcal/libical/zoneinfo/Africa/Dar_es_Salaam.ics
===================================================================
--- libkcal/libical/zoneinfo/Africa/Dar_es_Salaam.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Africa/Dar_es_Salaam.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Africa/Dar_es_Salaam
+TZID:/kde.org/Olson_20080523_1/Africa/Dar_es_Salaam
 X-LIC-LOCATION:Africa/Dar_es_Salaam
 BEGIN:STANDARD
 TZOFFSETFROM:+023708
Index: libkcal/libical/zoneinfo/Africa/Nouakchott.ics
===================================================================
--- libkcal/libical/zoneinfo/Africa/Nouakchott.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Africa/Nouakchott.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Africa/Nouakchott
+TZID:/kde.org/Olson_20080523_1/Africa/Nouakchott
 X-LIC-LOCATION:Africa/Nouakchott
 BEGIN:STANDARD
 TZOFFSETFROM:-010348
Index: libkcal/libical/zoneinfo/Africa/Blantyre.ics
===================================================================
--- libkcal/libical/zoneinfo/Africa/Blantyre.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Africa/Blantyre.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Africa/Blantyre
+TZID:/kde.org/Olson_20080523_1/Africa/Blantyre
 X-LIC-LOCATION:Africa/Blantyre
 BEGIN:STANDARD
 TZOFFSETFROM:+0220
Index: libkcal/libical/zoneinfo/Africa/Lusaka.ics
===================================================================
--- libkcal/libical/zoneinfo/Africa/Lusaka.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Africa/Lusaka.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Africa/Lusaka
+TZID:/kde.org/Olson_20080523_1/Africa/Lusaka
 X-LIC-LOCATION:Africa/Lusaka
 BEGIN:STANDARD
 TZOFFSETFROM:+015308
Index: libkcal/libical/zoneinfo/Africa/Dakar.ics
===================================================================
--- libkcal/libical/zoneinfo/Africa/Dakar.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Africa/Dakar.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Africa/Dakar
+TZID:/kde.org/Olson_20080523_1/Africa/Dakar
 X-LIC-LOCATION:Africa/Dakar
 BEGIN:STANDARD
 TZOFFSETFROM:-010944
Index: libkcal/libical/zoneinfo/Africa/Niamey.ics
===================================================================
--- libkcal/libical/zoneinfo/Africa/Niamey.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Africa/Niamey.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Africa/Niamey
+TZID:/kde.org/Olson_20080523_1/Africa/Niamey
 X-LIC-LOCATION:Africa/Niamey
 BEGIN:STANDARD
 TZOFFSETFROM:+000828
Index: libkcal/libical/zoneinfo/Africa/Tripoli.ics
===================================================================
--- libkcal/libical/zoneinfo/Africa/Tripoli.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Africa/Tripoli.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Africa/Tripoli
+TZID:/kde.org/Olson_20080523_1/Africa/Tripoli
 X-LIC-LOCATION:Africa/Tripoli
 BEGIN:STANDARD
 TZOFFSETFROM:+005244
Index: libkcal/libical/zoneinfo/Africa/Nairobi.ics
===================================================================
--- libkcal/libical/zoneinfo/Africa/Nairobi.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Africa/Nairobi.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Africa/Nairobi
+TZID:/kde.org/Olson_20080523_1/Africa/Nairobi
 X-LIC-LOCATION:Africa/Nairobi
 BEGIN:STANDARD
 TZOFFSETFROM:+022716
Index: libkcal/libical/zoneinfo/Africa/Mbabane.ics
===================================================================
--- libkcal/libical/zoneinfo/Africa/Mbabane.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Africa/Mbabane.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Africa/Mbabane
+TZID:/kde.org/Olson_20080523_1/Africa/Mbabane
 X-LIC-LOCATION:Africa/Mbabane
 BEGIN:STANDARD
 TZOFFSETFROM:+020424
Index: libkcal/libical/zoneinfo/Africa/Algiers.ics
===================================================================
--- libkcal/libical/zoneinfo/Africa/Algiers.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Africa/Algiers.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Africa/Algiers
+TZID:/kde.org/Olson_20080523_1/Africa/Algiers
 X-LIC-LOCATION:Africa/Algiers
 BEGIN:STANDARD
 TZOFFSETFROM:+001212
Index: libkcal/libical/zoneinfo/Africa/Bissau.ics
===================================================================
--- libkcal/libical/zoneinfo/Africa/Bissau.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Africa/Bissau.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Africa/Bissau
+TZID:/kde.org/Olson_20080523_1/Africa/Bissau
 X-LIC-LOCATION:Africa/Bissau
 BEGIN:STANDARD
 TZOFFSETFROM:-010220
Index: libkcal/libical/zoneinfo/Africa/Khartoum.ics
===================================================================
--- libkcal/libical/zoneinfo/Africa/Khartoum.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Africa/Khartoum.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Africa/Khartoum
+TZID:/kde.org/Olson_20080523_1/Africa/Khartoum
 X-LIC-LOCATION:Africa/Khartoum
 BEGIN:STANDARD
 TZOFFSETFROM:+021008
Index: libkcal/libical/zoneinfo/Africa/Monrovia.ics
===================================================================
--- libkcal/libical/zoneinfo/Africa/Monrovia.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Africa/Monrovia.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Africa/Monrovia
+TZID:/kde.org/Olson_20080523_1/Africa/Monrovia
 X-LIC-LOCATION:Africa/Monrovia
 BEGIN:STANDARD
 TZOFFSETFROM:-004308
Index: libkcal/libical/zoneinfo/Africa/Malabo.ics
===================================================================
--- libkcal/libical/zoneinfo/Africa/Malabo.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Africa/Malabo.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Africa/Malabo
+TZID:/kde.org/Olson_20080523_1/Africa/Malabo
 X-LIC-LOCATION:Africa/Malabo
 BEGIN:STANDARD
 TZOFFSETFROM:+003508
Index: libkcal/libical/zoneinfo/Africa/Lome.ics
===================================================================
--- libkcal/libical/zoneinfo/Africa/Lome.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Africa/Lome.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Africa/Lome
+TZID:/kde.org/Olson_20080523_1/Africa/Lome
 X-LIC-LOCATION:Africa/Lome
 BEGIN:STANDARD
 TZOFFSETFROM:+000452
Index: libkcal/libical/zoneinfo/Africa/Bujumbura.ics
===================================================================
--- libkcal/libical/zoneinfo/Africa/Bujumbura.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Africa/Bujumbura.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Africa/Bujumbura
+TZID:/kde.org/Olson_20080523_1/Africa/Bujumbura
 X-LIC-LOCATION:Africa/Bujumbura
 BEGIN:STANDARD
 TZOFFSETFROM:+015728
Index: libkcal/libical/zoneinfo/Africa/Maseru.ics
===================================================================
--- libkcal/libical/zoneinfo/Africa/Maseru.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Africa/Maseru.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Africa/Maseru
+TZID:/kde.org/Olson_20080523_1/Africa/Maseru
 X-LIC-LOCATION:Africa/Maseru
 BEGIN:STANDARD
 TZOFFSETFROM:+0150
Index: libkcal/libical/zoneinfo/Africa/Kinshasa.ics
===================================================================
--- libkcal/libical/zoneinfo/Africa/Kinshasa.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Africa/Kinshasa.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Africa/Kinshasa
+TZID:/kde.org/Olson_20080523_1/Africa/Kinshasa
 X-LIC-LOCATION:Africa/Kinshasa
 BEGIN:STANDARD
 TZOFFSETFROM:+010112
Index: libkcal/libical/zoneinfo/Arctic/Longyearbyen.ics
===================================================================
--- libkcal/libical/zoneinfo/Arctic/Longyearbyen.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Arctic/Longyearbyen.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Arctic/Longyearbyen
+TZID:/kde.org/Olson_20080523_1/Arctic/Longyearbyen
 X-LIC-LOCATION:Arctic/Longyearbyen
 BEGIN:DAYLIGHT
 TZOFFSETFROM:+0100
Index: libkcal/libical/zoneinfo/Australia/Lord_Howe.ics
===================================================================
--- libkcal/libical/zoneinfo/Australia/Lord_Howe.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Australia/Lord_Howe.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Australia/Lord_Howe
+TZID:/kde.org/Olson_20080523_1/Australia/Lord_Howe
 X-LIC-LOCATION:Australia/Lord_Howe
 BEGIN:STANDARD
 TZOFFSETFROM:+1100
Index: libkcal/libical/zoneinfo/Australia/Perth.ics
===================================================================
--- libkcal/libical/zoneinfo/Australia/Perth.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Australia/Perth.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Australia/Perth
+TZID:/kde.org/Olson_20080523_1/Australia/Perth
 X-LIC-LOCATION:Australia/Perth
 BEGIN:STANDARD
 TZOFFSETFROM:+074324
Index: libkcal/libical/zoneinfo/Australia/Darwin.ics
===================================================================
--- libkcal/libical/zoneinfo/Australia/Darwin.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Australia/Darwin.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Australia/Darwin
+TZID:/kde.org/Olson_20080523_1/Australia/Darwin
 X-LIC-LOCATION:Australia/Darwin
 BEGIN:STANDARD
 TZOFFSETFROM:+084320
Index: libkcal/libical/zoneinfo/Australia/Brisbane.ics
===================================================================
--- libkcal/libical/zoneinfo/Australia/Brisbane.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Australia/Brisbane.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Australia/Brisbane
+TZID:/kde.org/Olson_20080523_1/Australia/Brisbane
 X-LIC-LOCATION:Australia/Brisbane
 BEGIN:STANDARD
 TZOFFSETFROM:+101208
Index: libkcal/libical/zoneinfo/Australia/Lindeman.ics
===================================================================
--- libkcal/libical/zoneinfo/Australia/Lindeman.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Australia/Lindeman.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Australia/Lindeman
+TZID:/kde.org/Olson_20080523_1/Australia/Lindeman
 X-LIC-LOCATION:Australia/Lindeman
 BEGIN:STANDARD
 TZOFFSETFROM:+095556
Index: libkcal/libical/zoneinfo/Australia/Adelaide.ics
===================================================================
--- libkcal/libical/zoneinfo/Australia/Adelaide.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Australia/Adelaide.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Australia/Adelaide
+TZID:/kde.org/Olson_20080523_1/Australia/Adelaide
 X-LIC-LOCATION:Australia/Adelaide
 BEGIN:STANDARD
 TZOFFSETFROM:+1030
Index: libkcal/libical/zoneinfo/Australia/Broken_Hill.ics
===================================================================
--- libkcal/libical/zoneinfo/Australia/Broken_Hill.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Australia/Broken_Hill.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Australia/Broken_Hill
+TZID:/kde.org/Olson_20080523_1/Australia/Broken_Hill
 X-LIC-LOCATION:Australia/Broken_Hill
 BEGIN:STANDARD
 TZOFFSETFROM:+1030
Index: libkcal/libical/zoneinfo/Australia/Melbourne.ics
===================================================================
--- libkcal/libical/zoneinfo/Australia/Melbourne.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Australia/Melbourne.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Australia/Melbourne
+TZID:/kde.org/Olson_20080523_1/Australia/Melbourne
 X-LIC-LOCATION:Australia/Melbourne
 BEGIN:STANDARD
 TZOFFSETFROM:+1100
Index: libkcal/libical/zoneinfo/Australia/Currie.ics
===================================================================
--- libkcal/libical/zoneinfo/Australia/Currie.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Australia/Currie.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Australia/Currie
+TZID:/kde.org/Olson_20080523_1/Australia/Currie
 X-LIC-LOCATION:Australia/Currie
 BEGIN:DAYLIGHT
 TZOFFSETFROM:+1000
Index: libkcal/libical/zoneinfo/Australia/Eucla.ics
===================================================================
--- libkcal/libical/zoneinfo/Australia/Eucla.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Australia/Eucla.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Australia/Eucla
+TZID:/kde.org/Olson_20080523_1/Australia/Eucla
 X-LIC-LOCATION:Australia/Eucla
 BEGIN:STANDARD
 TZOFFSETFROM:+083528
Index: libkcal/libical/zoneinfo/Australia/Sydney.ics
===================================================================
--- libkcal/libical/zoneinfo/Australia/Sydney.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Australia/Sydney.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Australia/Sydney
+TZID:/kde.org/Olson_20080523_1/Australia/Sydney
 X-LIC-LOCATION:Australia/Sydney
 BEGIN:STANDARD
 TZOFFSETFROM:+1100
Index: libkcal/libical/zoneinfo/Australia/Hobart.ics
===================================================================
--- libkcal/libical/zoneinfo/Australia/Hobart.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Australia/Hobart.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Australia/Hobart
+TZID:/kde.org/Olson_20080523_1/Australia/Hobart
 X-LIC-LOCATION:Australia/Hobart
 BEGIN:DAYLIGHT
 TZOFFSETFROM:+1000
Index: libkcal/libical/zoneinfo/Antarctica/Syowa.ics
===================================================================
--- libkcal/libical/zoneinfo/Antarctica/Syowa.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Antarctica/Syowa.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Antarctica/Syowa
+TZID:/kde.org/Olson_20080523_1/Antarctica/Syowa
 X-LIC-LOCATION:Antarctica/Syowa
 BEGIN:STANDARD
 TZOFFSETFROM:+0000
Index: libkcal/libical/zoneinfo/Antarctica/Casey.ics
===================================================================
--- libkcal/libical/zoneinfo/Antarctica/Casey.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Antarctica/Casey.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Antarctica/Casey
+TZID:/kde.org/Olson_20080523_1/Antarctica/Casey
 X-LIC-LOCATION:Antarctica/Casey
 BEGIN:STANDARD
 TZOFFSETFROM:+0000
Index: libkcal/libical/zoneinfo/Antarctica/Mawson.ics
===================================================================
--- libkcal/libical/zoneinfo/Antarctica/Mawson.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Antarctica/Mawson.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Antarctica/Mawson
+TZID:/kde.org/Olson_20080523_1/Antarctica/Mawson
 X-LIC-LOCATION:Antarctica/Mawson
 BEGIN:STANDARD
 TZOFFSETFROM:+0000
Index: libkcal/libical/zoneinfo/Antarctica/Rothera.ics
===================================================================
--- libkcal/libical/zoneinfo/Antarctica/Rothera.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Antarctica/Rothera.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Antarctica/Rothera
+TZID:/kde.org/Olson_20080523_1/Antarctica/Rothera
 X-LIC-LOCATION:Antarctica/Rothera
 BEGIN:STANDARD
 TZOFFSETFROM:+0000
Index: libkcal/libical/zoneinfo/Antarctica/Vostok.ics
===================================================================
--- libkcal/libical/zoneinfo/Antarctica/Vostok.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Antarctica/Vostok.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Antarctica/Vostok
+TZID:/kde.org/Olson_20080523_1/Antarctica/Vostok
 X-LIC-LOCATION:Antarctica/Vostok
 BEGIN:STANDARD
 TZOFFSETFROM:+0000
Index: libkcal/libical/zoneinfo/Antarctica/Davis.ics
===================================================================
--- libkcal/libical/zoneinfo/Antarctica/Davis.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Antarctica/Davis.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Antarctica/Davis
+TZID:/kde.org/Olson_20080523_1/Antarctica/Davis
 X-LIC-LOCATION:Antarctica/Davis
 BEGIN:STANDARD
 TZOFFSETFROM:+0000
Index: libkcal/libical/zoneinfo/Antarctica/McMurdo.ics
===================================================================
--- libkcal/libical/zoneinfo/Antarctica/McMurdo.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Antarctica/McMurdo.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Antarctica/McMurdo
+TZID:/kde.org/Olson_20080523_1/Antarctica/McMurdo
 X-LIC-LOCATION:Antarctica/McMurdo
 BEGIN:DAYLIGHT
 TZOFFSETFROM:+1200
Index: libkcal/libical/zoneinfo/Antarctica/DumontDUrville.ics
===================================================================
--- libkcal/libical/zoneinfo/Antarctica/DumontDUrville.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Antarctica/DumontDUrville.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Antarctica/DumontDUrville
+TZID:/kde.org/Olson_20080523_1/Antarctica/DumontDUrville
 X-LIC-LOCATION:Antarctica/DumontDUrville
 BEGIN:STANDARD
 TZOFFSETFROM:+0000
Index: libkcal/libical/zoneinfo/Antarctica/Palmer.ics
===================================================================
--- libkcal/libical/zoneinfo/Antarctica/Palmer.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Antarctica/Palmer.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Antarctica/Palmer
+TZID:/kde.org/Olson_20080523_1/Antarctica/Palmer
 X-LIC-LOCATION:Antarctica/Palmer
 BEGIN:DAYLIGHT
 TZOFFSETFROM:-0400
Index: libkcal/libical/zoneinfo/Antarctica/South_Pole.ics
===================================================================
--- libkcal/libical/zoneinfo/Antarctica/South_Pole.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Antarctica/South_Pole.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Antarctica/South_Pole
+TZID:/kde.org/Olson_20080523_1/Antarctica/South_Pole
 X-LIC-LOCATION:Antarctica/South_Pole
 BEGIN:DAYLIGHT
 TZOFFSETFROM:+1200
Index: libkcal/libical/zoneinfo/Asia/Makassar.ics
===================================================================
--- libkcal/libical/zoneinfo/Asia/Makassar.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Asia/Makassar.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Asia/Makassar
+TZID:/kde.org/Olson_20080523_1/Asia/Makassar
 X-LIC-LOCATION:Asia/Makassar
 BEGIN:STANDARD
 TZOFFSETFROM:+075736
Index: libkcal/libical/zoneinfo/Asia/Karachi.ics
===================================================================
--- libkcal/libical/zoneinfo/Asia/Karachi.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Asia/Karachi.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Asia/Karachi
+TZID:/kde.org/Olson_20080523_1/Asia/Karachi
 X-LIC-LOCATION:Asia/Karachi
 BEGIN:STANDARD
 TZOFFSETFROM:+042812
Index: libkcal/libical/zoneinfo/Asia/Rangoon.ics
===================================================================
--- libkcal/libical/zoneinfo/Asia/Rangoon.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Asia/Rangoon.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Asia/Rangoon
+TZID:/kde.org/Olson_20080523_1/Asia/Rangoon
 X-LIC-LOCATION:Asia/Rangoon
 BEGIN:STANDARD
 TZOFFSETFROM:+062440
Index: libkcal/libical/zoneinfo/Asia/Harbin.ics
===================================================================
--- libkcal/libical/zoneinfo/Asia/Harbin.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Asia/Harbin.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Asia/Harbin
+TZID:/kde.org/Olson_20080523_1/Asia/Harbin
 X-LIC-LOCATION:Asia/Harbin
 BEGIN:STANDARD
 TZOFFSETFROM:+082644
Index: libkcal/libical/zoneinfo/Asia/Novosibirsk.ics
===================================================================
--- libkcal/libical/zoneinfo/Asia/Novosibirsk.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Asia/Novosibirsk.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Asia/Novosibirsk
+TZID:/kde.org/Olson_20080523_1/Asia/Novosibirsk
 X-LIC-LOCATION:Asia/Novosibirsk
 BEGIN:DAYLIGHT
 TZOFFSETFROM:+0600
Index: libkcal/libical/zoneinfo/Asia/Yerevan.ics
===================================================================
--- libkcal/libical/zoneinfo/Asia/Yerevan.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Asia/Yerevan.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Asia/Yerevan
+TZID:/kde.org/Olson_20080523_1/Asia/Yerevan
 X-LIC-LOCATION:Asia/Yerevan
 BEGIN:DAYLIGHT
 TZOFFSETFROM:+0400
Index: libkcal/libical/zoneinfo/Asia/Ashgabat.ics
===================================================================
--- libkcal/libical/zoneinfo/Asia/Ashgabat.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Asia/Ashgabat.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Asia/Ashgabat
+TZID:/kde.org/Olson_20080523_1/Asia/Ashgabat
 X-LIC-LOCATION:Asia/Ashgabat
 BEGIN:STANDARD
 TZOFFSETFROM:+035332
Index: libkcal/libical/zoneinfo/Asia/Ulaanbaatar.ics
===================================================================
--- libkcal/libical/zoneinfo/Asia/Ulaanbaatar.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Asia/Ulaanbaatar.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Asia/Ulaanbaatar
+TZID:/kde.org/Olson_20080523_1/Asia/Ulaanbaatar
 X-LIC-LOCATION:Asia/Ulaanbaatar
 BEGIN:STANDARD
 TZOFFSETFROM:+070732
Index: libkcal/libical/zoneinfo/Asia/Jakarta.ics
===================================================================
--- libkcal/libical/zoneinfo/Asia/Jakarta.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Asia/Jakarta.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Asia/Jakarta
+TZID:/kde.org/Olson_20080523_1/Asia/Jakarta
 X-LIC-LOCATION:Asia/Jakarta
 BEGIN:STANDARD
 TZOFFSETFROM:+070712
Index: libkcal/libical/zoneinfo/Asia/Thimphu.ics
===================================================================
--- libkcal/libical/zoneinfo/Asia/Thimphu.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Asia/Thimphu.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Asia/Thimphu
+TZID:/kde.org/Olson_20080523_1/Asia/Thimphu
 X-LIC-LOCATION:Asia/Thimphu
 BEGIN:STANDARD
 TZOFFSETFROM:+055836
Index: libkcal/libical/zoneinfo/Asia/Riyadh.ics
===================================================================
--- libkcal/libical/zoneinfo/Asia/Riyadh.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Asia/Riyadh.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Asia/Riyadh
+TZID:/kde.org/Olson_20080523_1/Asia/Riyadh
 X-LIC-LOCATION:Asia/Riyadh
 BEGIN:STANDARD
 TZOFFSETFROM:+030652
Index: libkcal/libical/zoneinfo/Asia/Bishkek.ics
===================================================================
--- libkcal/libical/zoneinfo/Asia/Bishkek.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Asia/Bishkek.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Asia/Bishkek
+TZID:/kde.org/Olson_20080523_1/Asia/Bishkek
 X-LIC-LOCATION:Asia/Bishkek
 BEGIN:STANDARD
 TZOFFSETFROM:+045824
Index: libkcal/libical/zoneinfo/Asia/Dili.ics
===================================================================
--- libkcal/libical/zoneinfo/Asia/Dili.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Asia/Dili.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Asia/Dili
+TZID:/kde.org/Olson_20080523_1/Asia/Dili
 X-LIC-LOCATION:Asia/Dili
 BEGIN:STANDARD
 TZOFFSETFROM:+082220
Index: libkcal/libical/zoneinfo/Asia/Istanbul.ics
===================================================================
--- libkcal/libical/zoneinfo/Asia/Istanbul.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Asia/Istanbul.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Asia/Istanbul
+TZID:/kde.org/Olson_20080523_1/Asia/Istanbul
 X-LIC-LOCATION:Asia/Istanbul
 BEGIN:DAYLIGHT
 TZOFFSETFROM:+0200
Index: libkcal/libical/zoneinfo/Asia/Pontianak.ics
===================================================================
--- libkcal/libical/zoneinfo/Asia/Pontianak.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Asia/Pontianak.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Asia/Pontianak
+TZID:/kde.org/Olson_20080523_1/Asia/Pontianak
 X-LIC-LOCATION:Asia/Pontianak
 BEGIN:STANDARD
 TZOFFSETFROM:+071720
Index: libkcal/libical/zoneinfo/Asia/Kamchatka.ics
===================================================================
--- libkcal/libical/zoneinfo/Asia/Kamchatka.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Asia/Kamchatka.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Asia/Kamchatka
+TZID:/kde.org/Olson_20080523_1/Asia/Kamchatka
 X-LIC-LOCATION:Asia/Kamchatka
 BEGIN:DAYLIGHT
 TZOFFSETFROM:+1200
Index: libkcal/libical/zoneinfo/Asia/Kolkata.ics
===================================================================
--- libkcal/libical/zoneinfo/Asia/Kolkata.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 0)
+++ libkcal/libical/zoneinfo/Asia/Kolkata.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -0,0 +1,37 @@
+BEGIN:VCALENDAR
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
+VERSION:2.0
+BEGIN:VTIMEZONE
+TZID:/kde.org/Olson_20080523_1/Asia/Kolkata
+X-LIC-LOCATION:Asia/Kolkata
+BEGIN:STANDARD
+TZOFFSETFROM:+055328
+TZOFFSETTO:+055320
+TZNAME:HMT
+DTSTART:18800101T000000
+RDATE:18800101T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+055320
+TZOFFSETTO:+0630
+TZNAME:BURT
+DTSTART:19411001T000000
+RDATE:19411001T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0630
+TZOFFSETTO:+0530
+TZNAME:IST
+DTSTART:19420515T000000
+RDATE:19420515T000000
+RDATE:19451015T000000
+END:STANDARD
+BEGIN:DAYLIGHT
+TZOFFSETFROM:+0530
+TZOFFSETTO:+0630
+TZNAME:IST
+DTSTART:19420901T000000
+RDATE:19420901T000000
+END:DAYLIGHT
+END:VTIMEZONE
+END:VCALENDAR
Index: libkcal/libical/zoneinfo/Asia/Seoul.ics
===================================================================
--- libkcal/libical/zoneinfo/Asia/Seoul.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Asia/Seoul.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Asia/Seoul
+TZID:/kde.org/Olson_20080523_1/Asia/Seoul
 X-LIC-LOCATION:Asia/Seoul
 BEGIN:STANDARD
 TZOFFSETFROM:+082752
Index: libkcal/libical/zoneinfo/Asia/Oral.ics
===================================================================
--- libkcal/libical/zoneinfo/Asia/Oral.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Asia/Oral.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Asia/Oral
+TZID:/kde.org/Olson_20080523_1/Asia/Oral
 X-LIC-LOCATION:Asia/Oral
 BEGIN:STANDARD
 TZOFFSETFROM:+032524
Index: libkcal/libical/zoneinfo/Asia/Choibalsan.ics
===================================================================
--- libkcal/libical/zoneinfo/Asia/Choibalsan.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Asia/Choibalsan.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Asia/Choibalsan
+TZID:/kde.org/Olson_20080523_1/Asia/Choibalsan
 X-LIC-LOCATION:Asia/Choibalsan
 BEGIN:STANDARD
 TZOFFSETFROM:+0738
Index: libkcal/libical/zoneinfo/Asia/Kuwait.ics
===================================================================
--- libkcal/libical/zoneinfo/Asia/Kuwait.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Asia/Kuwait.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Asia/Kuwait
+TZID:/kde.org/Olson_20080523_1/Asia/Kuwait
 X-LIC-LOCATION:Asia/Kuwait
 BEGIN:STANDARD
 TZOFFSETFROM:+031156
Index: libkcal/libical/zoneinfo/Asia/Krasnoyarsk.ics
===================================================================
--- libkcal/libical/zoneinfo/Asia/Krasnoyarsk.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Asia/Krasnoyarsk.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Asia/Krasnoyarsk
+TZID:/kde.org/Olson_20080523_1/Asia/Krasnoyarsk
 X-LIC-LOCATION:Asia/Krasnoyarsk
 BEGIN:DAYLIGHT
 TZOFFSETFROM:+0700
Index: libkcal/libical/zoneinfo/Asia/Omsk.ics
===================================================================
--- libkcal/libical/zoneinfo/Asia/Omsk.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Asia/Omsk.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Asia/Omsk
+TZID:/kde.org/Olson_20080523_1/Asia/Omsk
 X-LIC-LOCATION:Asia/Omsk
 BEGIN:DAYLIGHT
 TZOFFSETFROM:+0600
Index: libkcal/libical/zoneinfo/Asia/Baghdad.ics
===================================================================
--- libkcal/libical/zoneinfo/Asia/Baghdad.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Asia/Baghdad.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,23 +2,9 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Asia/Baghdad
+TZID:/kde.org/Olson_20080523_1/Asia/Baghdad
 X-LIC-LOCATION:Asia/Baghdad
-BEGIN:DAYLIGHT
-TZOFFSETFROM:+0300
-TZOFFSETTO:+0400
-TZNAME:ADT
-DTSTART:19910401T030000
-RRULE:FREQ=YEARLY
-END:DAYLIGHT
 BEGIN:STANDARD
-TZOFFSETFROM:+0400
-TZOFFSETTO:+0300
-TZNAME:AST
-DTSTART:19911001T040000
-RRULE:FREQ=YEARLY
-END:STANDARD
-BEGIN:STANDARD
 TZOFFSETFROM:+025740
 TZOFFSETTO:+025736
 TZNAME:BMT
@@ -46,6 +32,23 @@
 RDATE:19880327T010000
 RDATE:19890326T010000
 RDATE:19900325T010000
+RDATE:19910401T030000
+RDATE:19920401T030000
+RDATE:19930401T030000
+RDATE:19940401T030000
+RDATE:19950401T030000
+RDATE:19960401T030000
+RDATE:19970401T030000
+RDATE:19980401T030000
+RDATE:19990401T030000
+RDATE:20000401T030000
+RDATE:20010401T030000
+RDATE:20020401T030000
+RDATE:20030401T030000
+RDATE:20040401T030000
+RDATE:20050401T030000
+RDATE:20060401T030000
+RDATE:20070401T030000
 END:DAYLIGHT
 BEGIN:STANDARD
 TZOFFSETFROM:+0400
@@ -61,6 +64,23 @@
 RDATE:19880925T020000
 RDATE:19890924T020000
 RDATE:19900930T020000
+RDATE:19911001T040000
+RDATE:19921001T040000
+RDATE:19931001T040000
+RDATE:19941001T040000
+RDATE:19951001T040000
+RDATE:19961001T040000
+RDATE:19971001T040000
+RDATE:19981001T040000
+RDATE:19991001T040000
+RDATE:20001001T040000
+RDATE:20011001T040000
+RDATE:20021001T040000
+RDATE:20031001T040000
+RDATE:20041001T040000
+RDATE:20051001T040000
+RDATE:20061001T040000
+RDATE:20071001T040000
 END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR
Index: libkcal/libical/zoneinfo/Asia/Taipei.ics
===================================================================
--- libkcal/libical/zoneinfo/Asia/Taipei.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Asia/Taipei.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Asia/Taipei
+TZID:/kde.org/Olson_20080523_1/Asia/Taipei
 X-LIC-LOCATION:Asia/Taipei
 BEGIN:STANDARD
 TZOFFSETFROM:+0806
Index: libkcal/libical/zoneinfo/Asia/Yekaterinburg.ics
===================================================================
--- libkcal/libical/zoneinfo/Asia/Yekaterinburg.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Asia/Yekaterinburg.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Asia/Yekaterinburg
+TZID:/kde.org/Olson_20080523_1/Asia/Yekaterinburg
 X-LIC-LOCATION:Asia/Yekaterinburg
 BEGIN:DAYLIGHT
 TZOFFSETFROM:+0500
Index: libkcal/libical/zoneinfo/Asia/Jayapura.ics
===================================================================
--- libkcal/libical/zoneinfo/Asia/Jayapura.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Asia/Jayapura.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Asia/Jayapura
+TZID:/kde.org/Olson_20080523_1/Asia/Jayapura
 X-LIC-LOCATION:Asia/Jayapura
 BEGIN:STANDARD
 TZOFFSETFROM:+092248
Index: libkcal/libical/zoneinfo/Asia/Baku.ics
===================================================================
--- libkcal/libical/zoneinfo/Asia/Baku.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Asia/Baku.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Asia/Baku
+TZID:/kde.org/Olson_20080523_1/Asia/Baku
 X-LIC-LOCATION:Asia/Baku
 BEGIN:DAYLIGHT
 TZOFFSETFROM:+0400
Index: libkcal/libical/zoneinfo/Asia/Urumqi.ics
===================================================================
--- libkcal/libical/zoneinfo/Asia/Urumqi.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Asia/Urumqi.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Asia/Urumqi
+TZID:/kde.org/Olson_20080523_1/Asia/Urumqi
 X-LIC-LOCATION:Asia/Urumqi
 BEGIN:STANDARD
 TZOFFSETFROM:+055020
Index: libkcal/libical/zoneinfo/Asia/Vientiane.ics
===================================================================
--- libkcal/libical/zoneinfo/Asia/Vientiane.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Asia/Vientiane.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Asia/Vientiane
+TZID:/kde.org/Olson_20080523_1/Asia/Vientiane
 X-LIC-LOCATION:Asia/Vientiane
 BEGIN:STANDARD
 TZOFFSETFROM:+065024
Index: libkcal/libical/zoneinfo/Asia/Dubai.ics
===================================================================
--- libkcal/libical/zoneinfo/Asia/Dubai.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Asia/Dubai.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Asia/Dubai
+TZID:/kde.org/Olson_20080523_1/Asia/Dubai
 X-LIC-LOCATION:Asia/Dubai
 BEGIN:STANDARD
 TZOFFSETFROM:+034112
Index: libkcal/libical/zoneinfo/Asia/Nicosia.ics
===================================================================
--- libkcal/libical/zoneinfo/Asia/Nicosia.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Asia/Nicosia.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Asia/Nicosia
+TZID:/kde.org/Olson_20080523_1/Asia/Nicosia
 X-LIC-LOCATION:Asia/Nicosia
 BEGIN:STANDARD
 TZOFFSETFROM:+0300
Index: libkcal/libical/zoneinfo/Asia/Singapore.ics
===================================================================
--- libkcal/libical/zoneinfo/Asia/Singapore.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Asia/Singapore.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Asia/Singapore
+TZID:/kde.org/Olson_20080523_1/Asia/Singapore
 X-LIC-LOCATION:Asia/Singapore
 BEGIN:STANDARD
 TZOFFSETFROM:+065525
Index: libkcal/libical/zoneinfo/Asia/Dushanbe.ics
===================================================================
--- libkcal/libical/zoneinfo/Asia/Dushanbe.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Asia/Dushanbe.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Asia/Dushanbe
+TZID:/kde.org/Olson_20080523_1/Asia/Dushanbe
 X-LIC-LOCATION:Asia/Dushanbe
 BEGIN:STANDARD
 TZOFFSETFROM:+043512
Index: libkcal/libical/zoneinfo/Asia/Sakhalin.ics
===================================================================
--- libkcal/libical/zoneinfo/Asia/Sakhalin.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Asia/Sakhalin.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Asia/Sakhalin
+TZID:/kde.org/Olson_20080523_1/Asia/Sakhalin
 X-LIC-LOCATION:Asia/Sakhalin
 BEGIN:STANDARD
 TZOFFSETFROM:+1100
Index: libkcal/libical/zoneinfo/Asia/Qyzylorda.ics
===================================================================
--- libkcal/libical/zoneinfo/Asia/Qyzylorda.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Asia/Qyzylorda.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Asia/Qyzylorda
+TZID:/kde.org/Olson_20080523_1/Asia/Qyzylorda
 X-LIC-LOCATION:Asia/Qyzylorda
 BEGIN:STANDARD
 TZOFFSETFROM:+042152
Index: libkcal/libical/zoneinfo/Asia/Kabul.ics
===================================================================
--- libkcal/libical/zoneinfo/Asia/Kabul.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Asia/Kabul.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Asia/Kabul
+TZID:/kde.org/Olson_20080523_1/Asia/Kabul
 X-LIC-LOCATION:Asia/Kabul
 BEGIN:STANDARD
 TZOFFSETFROM:+043648
Index: libkcal/libical/zoneinfo/Asia/Samarkand.ics
===================================================================
--- libkcal/libical/zoneinfo/Asia/Samarkand.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Asia/Samarkand.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Asia/Samarkand
+TZID:/kde.org/Olson_20080523_1/Asia/Samarkand
 X-LIC-LOCATION:Asia/Samarkand
 BEGIN:STANDARD
 TZOFFSETFROM:+042712
Index: libkcal/libical/zoneinfo/Asia/Manila.ics
===================================================================
--- libkcal/libical/zoneinfo/Asia/Manila.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Asia/Manila.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Asia/Manila
+TZID:/kde.org/Olson_20080523_1/Asia/Manila
 X-LIC-LOCATION:Asia/Manila
 BEGIN:STANDARD
 TZOFFSETFROM:-1556
Index: libkcal/libical/zoneinfo/Asia/Kuala_Lumpur.ics
===================================================================
--- libkcal/libical/zoneinfo/Asia/Kuala_Lumpur.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Asia/Kuala_Lumpur.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Asia/Kuala_Lumpur
+TZID:/kde.org/Olson_20080523_1/Asia/Kuala_Lumpur
 X-LIC-LOCATION:Asia/Kuala_Lumpur
 BEGIN:STANDARD
 TZOFFSETFROM:+064646
Index: libkcal/libical/zoneinfo/Asia/Katmandu.ics
===================================================================
--- libkcal/libical/zoneinfo/Asia/Katmandu.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Asia/Katmandu.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Asia/Katmandu
+TZID:/kde.org/Olson_20080523_1/Asia/Katmandu
 X-LIC-LOCATION:Asia/Katmandu
 BEGIN:STANDARD
 TZOFFSETFROM:+054116
Index: libkcal/libical/zoneinfo/Asia/Bahrain.ics
===================================================================
--- libkcal/libical/zoneinfo/Asia/Bahrain.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Asia/Bahrain.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Asia/Bahrain
+TZID:/kde.org/Olson_20080523_1/Asia/Bahrain
 X-LIC-LOCATION:Asia/Bahrain
 BEGIN:STANDARD
 TZOFFSETFROM:+032220
Index: libkcal/libical/zoneinfo/Asia/Aden.ics
===================================================================
--- libkcal/libical/zoneinfo/Asia/Aden.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Asia/Aden.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Asia/Aden
+TZID:/kde.org/Olson_20080523_1/Asia/Aden
 X-LIC-LOCATION:Asia/Aden
 BEGIN:STANDARD
 TZOFFSETFROM:+030048
Index: libkcal/libical/zoneinfo/Asia/Qatar.ics
===================================================================
--- libkcal/libical/zoneinfo/Asia/Qatar.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Asia/Qatar.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Asia/Qatar
+TZID:/kde.org/Olson_20080523_1/Asia/Qatar
 X-LIC-LOCATION:Asia/Qatar
 BEGIN:STANDARD
 TZOFFSETFROM:+032608
Index: libkcal/libical/zoneinfo/Asia/Dhaka.ics
===================================================================
--- libkcal/libical/zoneinfo/Asia/Dhaka.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Asia/Dhaka.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Asia/Dhaka
+TZID:/kde.org/Olson_20080523_1/Asia/Dhaka
 X-LIC-LOCATION:Asia/Dhaka
 BEGIN:STANDARD
 TZOFFSETFROM:+060140
Index: libkcal/libical/zoneinfo/Asia/Pyongyang.ics
===================================================================
--- libkcal/libical/zoneinfo/Asia/Pyongyang.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Asia/Pyongyang.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Asia/Pyongyang
+TZID:/kde.org/Olson_20080523_1/Asia/Pyongyang
 X-LIC-LOCATION:Asia/Pyongyang
 BEGIN:STANDARD
 TZOFFSETFROM:+0823
Index: libkcal/libical/zoneinfo/Asia/Aqtobe.ics
===================================================================
--- libkcal/libical/zoneinfo/Asia/Aqtobe.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Asia/Aqtobe.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Asia/Aqtobe
+TZID:/kde.org/Olson_20080523_1/Asia/Aqtobe
 X-LIC-LOCATION:Asia/Aqtobe
 BEGIN:STANDARD
 TZOFFSETFROM:+034840
Index: libkcal/libical/zoneinfo/Asia/Aqtau.ics
===================================================================
--- libkcal/libical/zoneinfo/Asia/Aqtau.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Asia/Aqtau.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Asia/Aqtau
+TZID:/kde.org/Olson_20080523_1/Asia/Aqtau
 X-LIC-LOCATION:Asia/Aqtau
 BEGIN:STANDARD
 TZOFFSETFROM:+032104
Index: libkcal/libical/zoneinfo/Asia/Chongqing.ics
===================================================================
--- libkcal/libical/zoneinfo/Asia/Chongqing.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Asia/Chongqing.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Asia/Chongqing
+TZID:/kde.org/Olson_20080523_1/Asia/Chongqing
 X-LIC-LOCATION:Asia/Chongqing
 BEGIN:STANDARD
 TZOFFSETFROM:+070620
Index: libkcal/libical/zoneinfo/Asia/Anadyr.ics
===================================================================
--- libkcal/libical/zoneinfo/Asia/Anadyr.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Asia/Anadyr.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Asia/Anadyr
+TZID:/kde.org/Olson_20080523_1/Asia/Anadyr
 X-LIC-LOCATION:Asia/Anadyr
 BEGIN:DAYLIGHT
 TZOFFSETFROM:+1200
Index: libkcal/libical/zoneinfo/Asia/Kashgar.ics
===================================================================
--- libkcal/libical/zoneinfo/Asia/Kashgar.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Asia/Kashgar.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Asia/Kashgar
+TZID:/kde.org/Olson_20080523_1/Asia/Kashgar
 X-LIC-LOCATION:Asia/Kashgar
 BEGIN:STANDARD
 TZOFFSETFROM:+050356
Index: libkcal/libical/zoneinfo/Asia/Tashkent.ics
===================================================================
--- libkcal/libical/zoneinfo/Asia/Tashkent.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Asia/Tashkent.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Asia/Tashkent
+TZID:/kde.org/Olson_20080523_1/Asia/Tashkent
 X-LIC-LOCATION:Asia/Tashkent
 BEGIN:STANDARD
 TZOFFSETFROM:+043712
Index: libkcal/libical/zoneinfo/Asia/Tehran.ics
===================================================================
--- libkcal/libical/zoneinfo/Asia/Tehran.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Asia/Tehran.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Asia/Tehran
+TZID:/kde.org/Olson_20080523_1/Asia/Tehran
 X-LIC-LOCATION:Asia/Tehran
 BEGIN:STANDARD
 TZOFFSETFROM:+032544
Index: libkcal/libical/zoneinfo/Asia/Magadan.ics
===================================================================
--- libkcal/libical/zoneinfo/Asia/Magadan.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Asia/Magadan.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Asia/Magadan
+TZID:/kde.org/Olson_20080523_1/Asia/Magadan
 X-LIC-LOCATION:Asia/Magadan
 BEGIN:DAYLIGHT
 TZOFFSETFROM:+1100
Index: libkcal/libical/zoneinfo/Asia/Colombo.ics
===================================================================
--- libkcal/libical/zoneinfo/Asia/Colombo.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Asia/Colombo.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Asia/Colombo
+TZID:/kde.org/Olson_20080523_1/Asia/Colombo
 X-LIC-LOCATION:Asia/Colombo
 BEGIN:STANDARD
 TZOFFSETFROM:+051924
Index: libkcal/libical/zoneinfo/Asia/Phnom_Penh.ics
===================================================================
--- libkcal/libical/zoneinfo/Asia/Phnom_Penh.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Asia/Phnom_Penh.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Asia/Phnom_Penh
+TZID:/kde.org/Olson_20080523_1/Asia/Phnom_Penh
 X-LIC-LOCATION:Asia/Phnom_Penh
 BEGIN:STANDARD
 TZOFFSETFROM:+065940
Index: libkcal/libical/zoneinfo/Asia/Yakutsk.ics
===================================================================
--- libkcal/libical/zoneinfo/Asia/Yakutsk.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Asia/Yakutsk.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Asia/Yakutsk
+TZID:/kde.org/Olson_20080523_1/Asia/Yakutsk
 X-LIC-LOCATION:Asia/Yakutsk
 BEGIN:DAYLIGHT
 TZOFFSETFROM:+0900
Index: libkcal/libical/zoneinfo/Asia/Muscat.ics
===================================================================
--- libkcal/libical/zoneinfo/Asia/Muscat.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Asia/Muscat.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Asia/Muscat
+TZID:/kde.org/Olson_20080523_1/Asia/Muscat
 X-LIC-LOCATION:Asia/Muscat
 BEGIN:STANDARD
 TZOFFSETFROM:+035420
Index: libkcal/libical/zoneinfo/Asia/Damascus.ics
===================================================================
--- libkcal/libical/zoneinfo/Asia/Damascus.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Asia/Damascus.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,20 +2,20 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Asia/Damascus
+TZID:/kde.org/Olson_20080523_1/Asia/Damascus
 X-LIC-LOCATION:Asia/Damascus
 BEGIN:DAYLIGHT
 TZOFFSETFROM:+0200
 TZOFFSETTO:+0300
 TZNAME:EEST
-DTSTART:20070330T000000
-RRULE:FREQ=YEARLY;BYMONTH=3;BYDAY=-1FR
+DTSTART:20080404T000000
+RRULE:FREQ=YEARLY;BYMONTH=4;BYDAY=1FR
 END:DAYLIGHT
 BEGIN:STANDARD
 TZOFFSETFROM:+0300
 TZOFFSETTO:+0200
 TZNAME:EET
-DTSTART:20071001T000000
+DTSTART:20081001T000000
 RRULE:FREQ=YEARLY
 END:STANDARD
 BEGIN:STANDARD
@@ -74,6 +74,7 @@
 RDATE:20040401T000000
 RDATE:20050401T000000
 RDATE:20060401T000000
+RDATE:20070330T000000
 END:DAYLIGHT
 BEGIN:STANDARD
 TZOFFSETFROM:+0300
@@ -124,6 +125,7 @@
 RDATE:20041001T000000
 RDATE:20051001T000000
 RDATE:20060922T000000
+RDATE:20071102T000000
 END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR
Index: libkcal/libical/zoneinfo/Asia/Hovd.ics
===================================================================
--- libkcal/libical/zoneinfo/Asia/Hovd.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Asia/Hovd.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Asia/Hovd
+TZID:/kde.org/Olson_20080523_1/Asia/Hovd
 X-LIC-LOCATION:Asia/Hovd
 BEGIN:STANDARD
 TZOFFSETFROM:+060636
Index: libkcal/libical/zoneinfo/Asia/Ho_Chi_Minh.ics
===================================================================
--- libkcal/libical/zoneinfo/Asia/Ho_Chi_Minh.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 0)
+++ libkcal/libical/zoneinfo/Asia/Ho_Chi_Minh.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -0,0 +1,36 @@
+BEGIN:VCALENDAR
+PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
+VERSION:2.0
+BEGIN:VTIMEZONE
+TZID:/kde.org/Olson_20080523_1/Asia/Ho_Chi_Minh
+X-LIC-LOCATION:Asia/Ho_Chi_Minh
+BEGIN:STANDARD
+TZOFFSETFROM:+070640
+TZOFFSETTO:+070620
+TZNAME:SMT
+DTSTART:19060609T000000
+RDATE:19060609T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+070620
+TZOFFSETTO:+0700
+TZNAME:ICT
+DTSTART:19110311T000100
+RDATE:19110311T000100
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0700
+TZOFFSETTO:+0800
+TZNAME:ICT
+DTSTART:19120501T000000
+RDATE:19120501T000000
+END:STANDARD
+BEGIN:STANDARD
+TZOFFSETFROM:+0800
+TZOFFSETTO:+0700
+TZNAME:ICT
+DTSTART:19310501T000000
+RDATE:19310501T000000
+END:STANDARD
+END:VTIMEZONE
+END:VCALENDAR
Index: libkcal/libical/zoneinfo/Asia/Tokyo.ics
===================================================================
--- libkcal/libical/zoneinfo/Asia/Tokyo.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Asia/Tokyo.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Asia/Tokyo
+TZID:/kde.org/Olson_20080523_1/Asia/Tokyo
 X-LIC-LOCATION:Asia/Tokyo
 BEGIN:STANDARD
 TZOFFSETFROM:+091859
Index: libkcal/libical/zoneinfo/Asia/Vladivostok.ics
===================================================================
--- libkcal/libical/zoneinfo/Asia/Vladivostok.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Asia/Vladivostok.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Asia/Vladivostok
+TZID:/kde.org/Olson_20080523_1/Asia/Vladivostok
 X-LIC-LOCATION:Asia/Vladivostok
 BEGIN:DAYLIGHT
 TZOFFSETFROM:+1000
Index: libkcal/libical/zoneinfo/Asia/Hong_Kong.ics
===================================================================
--- libkcal/libical/zoneinfo/Asia/Hong_Kong.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Asia/Hong_Kong.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Asia/Hong_Kong
+TZID:/kde.org/Olson_20080523_1/Asia/Hong_Kong
 X-LIC-LOCATION:Asia/Hong_Kong
 BEGIN:STANDARD
 TZOFFSETFROM:+073636
Index: libkcal/libical/zoneinfo/Asia/Bangkok.ics
===================================================================
--- libkcal/libical/zoneinfo/Asia/Bangkok.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Asia/Bangkok.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Asia/Bangkok
+TZID:/kde.org/Olson_20080523_1/Asia/Bangkok
 X-LIC-LOCATION:Asia/Bangkok
 BEGIN:STANDARD
 TZOFFSETFROM:+064204
Index: libkcal/libical/zoneinfo/Asia/Shanghai.ics
===================================================================
--- libkcal/libical/zoneinfo/Asia/Shanghai.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Asia/Shanghai.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Asia/Shanghai
+TZID:/kde.org/Olson_20080523_1/Asia/Shanghai
 X-LIC-LOCATION:Asia/Shanghai
 BEGIN:STANDARD
 TZOFFSETFROM:+080552
Index: libkcal/libical/zoneinfo/Asia/Gaza.ics
===================================================================
--- libkcal/libical/zoneinfo/Asia/Gaza.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Asia/Gaza.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Asia/Gaza
+TZID:/kde.org/Olson_20080523_1/Asia/Gaza
 X-LIC-LOCATION:Asia/Gaza
 BEGIN:DAYLIGHT
 TZOFFSETFROM:+0200
Index: libkcal/libical/zoneinfo/Asia/Brunei.ics
===================================================================
--- libkcal/libical/zoneinfo/Asia/Brunei.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Asia/Brunei.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Asia/Brunei
+TZID:/kde.org/Olson_20080523_1/Asia/Brunei
 X-LIC-LOCATION:Asia/Brunei
 BEGIN:STANDARD
 TZOFFSETFROM:+073940
Index: libkcal/libical/zoneinfo/Asia/Macau.ics
===================================================================
--- libkcal/libical/zoneinfo/Asia/Macau.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Asia/Macau.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Asia/Macau
+TZID:/kde.org/Olson_20080523_1/Asia/Macau
 X-LIC-LOCATION:Asia/Macau
 BEGIN:STANDARD
 TZOFFSETFROM:+073420
Index: libkcal/libical/zoneinfo/Asia/Jerusalem.ics
===================================================================
--- libkcal/libical/zoneinfo/Asia/Jerusalem.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Asia/Jerusalem.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Asia/Jerusalem
+TZID:/kde.org/Olson_20080523_1/Asia/Jerusalem
 X-LIC-LOCATION:Asia/Jerusalem
 BEGIN:STANDARD
 TZOFFSETFROM:+022056
Index: libkcal/libical/zoneinfo/Asia/Almaty.ics
===================================================================
--- libkcal/libical/zoneinfo/Asia/Almaty.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Asia/Almaty.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Asia/Almaty
+TZID:/kde.org/Olson_20080523_1/Asia/Almaty
 X-LIC-LOCATION:Asia/Almaty
 BEGIN:STANDARD
 TZOFFSETFROM:+050748
Index: libkcal/libical/zoneinfo/Asia/Kuching.ics
===================================================================
--- libkcal/libical/zoneinfo/Asia/Kuching.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Asia/Kuching.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Asia/Kuching
+TZID:/kde.org/Olson_20080523_1/Asia/Kuching
 X-LIC-LOCATION:Asia/Kuching
 BEGIN:STANDARD
 TZOFFSETFROM:+072120
Index: libkcal/libical/zoneinfo/Asia/Amman.ics
===================================================================
--- libkcal/libical/zoneinfo/Asia/Amman.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Asia/Amman.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Asia/Amman
+TZID:/kde.org/Olson_20080523_1/Asia/Amman
 X-LIC-LOCATION:Asia/Amman
 BEGIN:DAYLIGHT
 TZOFFSETFROM:+0200
Index: libkcal/libical/zoneinfo/Asia/Beirut.ics
===================================================================
--- libkcal/libical/zoneinfo/Asia/Beirut.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Asia/Beirut.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Asia/Beirut
+TZID:/kde.org/Olson_20080523_1/Asia/Beirut
 X-LIC-LOCATION:Asia/Beirut
 BEGIN:DAYLIGHT
 TZOFFSETFROM:+0200
Index: libkcal/libical/zoneinfo/Asia/Irkutsk.ics
===================================================================
--- libkcal/libical/zoneinfo/Asia/Irkutsk.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Asia/Irkutsk.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Asia/Irkutsk
+TZID:/kde.org/Olson_20080523_1/Asia/Irkutsk
 X-LIC-LOCATION:Asia/Irkutsk
 BEGIN:DAYLIGHT
 TZOFFSETFROM:+0800
Index: libkcal/libical/zoneinfo/Asia/Tbilisi.ics
===================================================================
--- libkcal/libical/zoneinfo/Asia/Tbilisi.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Asia/Tbilisi.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Asia/Tbilisi
+TZID:/kde.org/Olson_20080523_1/Asia/Tbilisi
 X-LIC-LOCATION:Asia/Tbilisi
 BEGIN:STANDARD
 TZOFFSETFROM:+025916
Index: libkcal/libical/zoneinfo/Pacific/Palau.ics
===================================================================
--- libkcal/libical/zoneinfo/Pacific/Palau.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Pacific/Palau.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Pacific/Palau
+TZID:/kde.org/Olson_20080523_1/Pacific/Palau
 X-LIC-LOCATION:Pacific/Palau
 BEGIN:STANDARD
 TZOFFSETFROM:+085756
Index: libkcal/libical/zoneinfo/Pacific/Tongatapu.ics
===================================================================
--- libkcal/libical/zoneinfo/Pacific/Tongatapu.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Pacific/Tongatapu.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Pacific/Tongatapu
+TZID:/kde.org/Olson_20080523_1/Pacific/Tongatapu
 X-LIC-LOCATION:Pacific/Tongatapu
 BEGIN:STANDARD
 TZOFFSETFROM:+121920
Index: libkcal/libical/zoneinfo/Pacific/Fakaofo.ics
===================================================================
--- libkcal/libical/zoneinfo/Pacific/Fakaofo.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Pacific/Fakaofo.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Pacific/Fakaofo
+TZID:/kde.org/Olson_20080523_1/Pacific/Fakaofo
 X-LIC-LOCATION:Pacific/Fakaofo
 BEGIN:STANDARD
 TZOFFSETFROM:-112456
Index: libkcal/libical/zoneinfo/Pacific/Gambier.ics
===================================================================
--- libkcal/libical/zoneinfo/Pacific/Gambier.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Pacific/Gambier.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Pacific/Gambier
+TZID:/kde.org/Olson_20080523_1/Pacific/Gambier
 X-LIC-LOCATION:Pacific/Gambier
 BEGIN:STANDARD
 TZOFFSETFROM:-085948
Index: libkcal/libical/zoneinfo/Pacific/Norfolk.ics
===================================================================
--- libkcal/libical/zoneinfo/Pacific/Norfolk.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Pacific/Norfolk.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Pacific/Norfolk
+TZID:/kde.org/Olson_20080523_1/Pacific/Norfolk
 X-LIC-LOCATION:Pacific/Norfolk
 BEGIN:STANDARD
 TZOFFSETFROM:+111152
Index: libkcal/libical/zoneinfo/Pacific/Apia.ics
===================================================================
--- libkcal/libical/zoneinfo/Pacific/Apia.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Pacific/Apia.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Pacific/Apia
+TZID:/kde.org/Olson_20080523_1/Pacific/Apia
 X-LIC-LOCATION:Pacific/Apia
 BEGIN:STANDARD
 TZOFFSETFROM:+123304
Index: libkcal/libical/zoneinfo/Pacific/Saipan.ics
===================================================================
--- libkcal/libical/zoneinfo/Pacific/Saipan.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Pacific/Saipan.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Pacific/Saipan
+TZID:/kde.org/Olson_20080523_1/Pacific/Saipan
 X-LIC-LOCATION:Pacific/Saipan
 BEGIN:STANDARD
 TZOFFSETFROM:-1417
Index: libkcal/libical/zoneinfo/Pacific/Tarawa.ics
===================================================================
--- libkcal/libical/zoneinfo/Pacific/Tarawa.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Pacific/Tarawa.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Pacific/Tarawa
+TZID:/kde.org/Olson_20080523_1/Pacific/Tarawa
 X-LIC-LOCATION:Pacific/Tarawa
 BEGIN:STANDARD
 TZOFFSETFROM:+113204
Index: libkcal/libical/zoneinfo/Pacific/Fiji.ics
===================================================================
--- libkcal/libical/zoneinfo/Pacific/Fiji.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Pacific/Fiji.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Pacific/Fiji
+TZID:/kde.org/Olson_20080523_1/Pacific/Fiji
 X-LIC-LOCATION:Pacific/Fiji
 BEGIN:STANDARD
 TZOFFSETFROM:+115340
Index: libkcal/libical/zoneinfo/Pacific/Funafuti.ics
===================================================================
--- libkcal/libical/zoneinfo/Pacific/Funafuti.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Pacific/Funafuti.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Pacific/Funafuti
+TZID:/kde.org/Olson_20080523_1/Pacific/Funafuti
 X-LIC-LOCATION:Pacific/Funafuti
 BEGIN:STANDARD
 TZOFFSETFROM:+115652
Index: libkcal/libical/zoneinfo/Pacific/Easter.ics
===================================================================
--- libkcal/libical/zoneinfo/Pacific/Easter.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Pacific/Easter.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Pacific/Easter
+TZID:/kde.org/Olson_20080523_1/Pacific/Easter
 X-LIC-LOCATION:Pacific/Easter
 BEGIN:DAYLIGHT
 TZOFFSETFROM:-0600
@@ -15,7 +15,7 @@
 TZOFFSETFROM:-0500
 TZOFFSETTO:-0600
 TZNAME:EAST
-DTSTART:20000311T220000
+DTSTART:20090314T220000
 RRULE:FREQ=YEARLY;BYMONTH=3;BYDAY=2SA
 END:STANDARD
 BEGIN:STANDARD
@@ -140,6 +140,15 @@
 RDATE:19970329T220000
 RDATE:19980314T220000
 RDATE:19990403T220000
+RDATE:20000311T220000
+RDATE:20010310T220000
+RDATE:20020309T220000
+RDATE:20030308T220000
+RDATE:20040313T220000
+RDATE:20050312T220000
+RDATE:20060311T220000
+RDATE:20070310T220000
+RDATE:20080329T220000
 END:STANDARD
 END:VTIMEZONE
 END:VCALENDAR
Index: libkcal/libical/zoneinfo/Pacific/Port_Moresby.ics
===================================================================
--- libkcal/libical/zoneinfo/Pacific/Port_Moresby.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Pacific/Port_Moresby.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Pacific/Port_Moresby
+TZID:/kde.org/Olson_20080523_1/Pacific/Port_Moresby
 X-LIC-LOCATION:Pacific/Port_Moresby
 BEGIN:STANDARD
 TZOFFSETFROM:+094840
Index: libkcal/libical/zoneinfo/Pacific/Kosrae.ics
===================================================================
--- libkcal/libical/zoneinfo/Pacific/Kosrae.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Pacific/Kosrae.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Pacific/Kosrae
+TZID:/kde.org/Olson_20080523_1/Pacific/Kosrae
 X-LIC-LOCATION:Pacific/Kosrae
 BEGIN:STANDARD
 TZOFFSETFROM:+105156
Index: libkcal/libical/zoneinfo/Pacific/Truk.ics
===================================================================
--- libkcal/libical/zoneinfo/Pacific/Truk.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Pacific/Truk.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Pacific/Truk
+TZID:/kde.org/Olson_20080523_1/Pacific/Truk
 X-LIC-LOCATION:Pacific/Truk
 BEGIN:STANDARD
 TZOFFSETFROM:+100708
Index: libkcal/libical/zoneinfo/Pacific/Wake.ics
===================================================================
--- libkcal/libical/zoneinfo/Pacific/Wake.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Pacific/Wake.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Pacific/Wake
+TZID:/kde.org/Olson_20080523_1/Pacific/Wake
 X-LIC-LOCATION:Pacific/Wake
 BEGIN:STANDARD
 TZOFFSETFROM:+110628
Index: libkcal/libical/zoneinfo/Pacific/Guam.ics
===================================================================
--- libkcal/libical/zoneinfo/Pacific/Guam.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Pacific/Guam.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Pacific/Guam
+TZID:/kde.org/Olson_20080523_1/Pacific/Guam
 X-LIC-LOCATION:Pacific/Guam
 BEGIN:STANDARD
 TZOFFSETFROM:-1421
Index: libkcal/libical/zoneinfo/Pacific/Pago_Pago.ics
===================================================================
--- libkcal/libical/zoneinfo/Pacific/Pago_Pago.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Pacific/Pago_Pago.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Pacific/Pago_Pago
+TZID:/kde.org/Olson_20080523_1/Pacific/Pago_Pago
 X-LIC-LOCATION:Pacific/Pago_Pago
 BEGIN:STANDARD
 TZOFFSETFROM:+123712
Index: libkcal/libical/zoneinfo/Pacific/Majuro.ics
===================================================================
--- libkcal/libical/zoneinfo/Pacific/Majuro.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Pacific/Majuro.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Pacific/Majuro
+TZID:/kde.org/Olson_20080523_1/Pacific/Majuro
 X-LIC-LOCATION:Pacific/Majuro
 BEGIN:STANDARD
 TZOFFSETFROM:+112448
Index: libkcal/libical/zoneinfo/Pacific/Galapagos.ics
===================================================================
--- libkcal/libical/zoneinfo/Pacific/Galapagos.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Pacific/Galapagos.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Pacific/Galapagos
+TZID:/kde.org/Olson_20080523_1/Pacific/Galapagos
 X-LIC-LOCATION:Pacific/Galapagos
 BEGIN:STANDARD
 TZOFFSETFROM:-055824
Index: libkcal/libical/zoneinfo/Pacific/Enderbury.ics
===================================================================
--- libkcal/libical/zoneinfo/Pacific/Enderbury.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Pacific/Enderbury.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Pacific/Enderbury
+TZID:/kde.org/Olson_20080523_1/Pacific/Enderbury
 X-LIC-LOCATION:Pacific/Enderbury
 BEGIN:STANDARD
 TZOFFSETFROM:-112420
Index: libkcal/libical/zoneinfo/Pacific/Johnston.ics
===================================================================
--- libkcal/libical/zoneinfo/Pacific/Johnston.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Pacific/Johnston.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Pacific/Johnston
+TZID:/kde.org/Olson_20080523_1/Pacific/Johnston
 X-LIC-LOCATION:Pacific/Johnston
 BEGIN:STANDARD
 TZOFFSETFROM:-1000
Index: libkcal/libical/zoneinfo/Pacific/Kwajalein.ics
===================================================================
--- libkcal/libical/zoneinfo/Pacific/Kwajalein.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Pacific/Kwajalein.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Pacific/Kwajalein
+TZID:/kde.org/Olson_20080523_1/Pacific/Kwajalein
 X-LIC-LOCATION:Pacific/Kwajalein
 BEGIN:STANDARD
 TZOFFSETFROM:+110920
Index: libkcal/libical/zoneinfo/Pacific/Chatham.ics
===================================================================
--- libkcal/libical/zoneinfo/Pacific/Chatham.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Pacific/Chatham.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Pacific/Chatham
+TZID:/kde.org/Olson_20080523_1/Pacific/Chatham
 X-LIC-LOCATION:Pacific/Chatham
 BEGIN:DAYLIGHT
 TZOFFSETFROM:+1245
Index: libkcal/libical/zoneinfo/Pacific/Honolulu.ics
===================================================================
--- libkcal/libical/zoneinfo/Pacific/Honolulu.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Pacific/Honolulu.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Pacific/Honolulu
+TZID:/kde.org/Olson_20080523_1/Pacific/Honolulu
 X-LIC-LOCATION:Pacific/Honolulu
 BEGIN:STANDARD
 TZOFFSETFROM:-103126
Index: libkcal/libical/zoneinfo/Pacific/Kiritimati.ics
===================================================================
--- libkcal/libical/zoneinfo/Pacific/Kiritimati.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Pacific/Kiritimati.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Pacific/Kiritimati
+TZID:/kde.org/Olson_20080523_1/Pacific/Kiritimati
 X-LIC-LOCATION:Pacific/Kiritimati
 BEGIN:STANDARD
 TZOFFSETFROM:-102920
Index: libkcal/libical/zoneinfo/Pacific/Pitcairn.ics
===================================================================
--- libkcal/libical/zoneinfo/Pacific/Pitcairn.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Pacific/Pitcairn.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Pacific/Pitcairn
+TZID:/kde.org/Olson_20080523_1/Pacific/Pitcairn
 X-LIC-LOCATION:Pacific/Pitcairn
 BEGIN:STANDARD
 TZOFFSETFROM:-084020
Index: libkcal/libical/zoneinfo/Pacific/Ponape.ics
===================================================================
--- libkcal/libical/zoneinfo/Pacific/Ponape.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Pacific/Ponape.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Pacific/Ponape
+TZID:/kde.org/Olson_20080523_1/Pacific/Ponape
 X-LIC-LOCATION:Pacific/Ponape
 BEGIN:STANDARD
 TZOFFSETFROM:+103252
Index: libkcal/libical/zoneinfo/Pacific/Auckland.ics
===================================================================
--- libkcal/libical/zoneinfo/Pacific/Auckland.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Pacific/Auckland.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Pacific/Auckland
+TZID:/kde.org/Olson_20080523_1/Pacific/Auckland
 X-LIC-LOCATION:Pacific/Auckland
 BEGIN:DAYLIGHT
 TZOFFSETFROM:+1200
Index: libkcal/libical/zoneinfo/Pacific/Tahiti.ics
===================================================================
--- libkcal/libical/zoneinfo/Pacific/Tahiti.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Pacific/Tahiti.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Pacific/Tahiti
+TZID:/kde.org/Olson_20080523_1/Pacific/Tahiti
 X-LIC-LOCATION:Pacific/Tahiti
 BEGIN:STANDARD
 TZOFFSETFROM:-095816
Index: libkcal/libical/zoneinfo/Pacific/Noumea.ics
===================================================================
--- libkcal/libical/zoneinfo/Pacific/Noumea.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Pacific/Noumea.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Pacific/Noumea
+TZID:/kde.org/Olson_20080523_1/Pacific/Noumea
 X-LIC-LOCATION:Pacific/Noumea
 BEGIN:STANDARD
 TZOFFSETFROM:+110548
Index: libkcal/libical/zoneinfo/Pacific/Efate.ics
===================================================================
--- libkcal/libical/zoneinfo/Pacific/Efate.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Pacific/Efate.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Pacific/Efate
+TZID:/kde.org/Olson_20080523_1/Pacific/Efate
 X-LIC-LOCATION:Pacific/Efate
 BEGIN:STANDARD
 TZOFFSETFROM:+111316
Index: libkcal/libical/zoneinfo/Pacific/Nauru.ics
===================================================================
--- libkcal/libical/zoneinfo/Pacific/Nauru.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Pacific/Nauru.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Pacific/Nauru
+TZID:/kde.org/Olson_20080523_1/Pacific/Nauru
 X-LIC-LOCATION:Pacific/Nauru
 BEGIN:STANDARD
 TZOFFSETFROM:+110740
Index: libkcal/libical/zoneinfo/Pacific/Midway.ics
===================================================================
--- libkcal/libical/zoneinfo/Pacific/Midway.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Pacific/Midway.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Pacific/Midway
+TZID:/kde.org/Olson_20080523_1/Pacific/Midway
 X-LIC-LOCATION:Pacific/Midway
 BEGIN:STANDARD
 TZOFFSETFROM:-114928
Index: libkcal/libical/zoneinfo/Pacific/Wallis.ics
===================================================================
--- libkcal/libical/zoneinfo/Pacific/Wallis.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Pacific/Wallis.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Pacific/Wallis
+TZID:/kde.org/Olson_20080523_1/Pacific/Wallis
 X-LIC-LOCATION:Pacific/Wallis
 BEGIN:STANDARD
 TZOFFSETFROM:+121520
Index: libkcal/libical/zoneinfo/Pacific/Rarotonga.ics
===================================================================
--- libkcal/libical/zoneinfo/Pacific/Rarotonga.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Pacific/Rarotonga.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Pacific/Rarotonga
+TZID:/kde.org/Olson_20080523_1/Pacific/Rarotonga
 X-LIC-LOCATION:Pacific/Rarotonga
 BEGIN:STANDARD
 TZOFFSETFROM:-103904
Index: libkcal/libical/zoneinfo/Pacific/Guadalcanal.ics
===================================================================
--- libkcal/libical/zoneinfo/Pacific/Guadalcanal.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Pacific/Guadalcanal.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Pacific/Guadalcanal
+TZID:/kde.org/Olson_20080523_1/Pacific/Guadalcanal
 X-LIC-LOCATION:Pacific/Guadalcanal
 BEGIN:STANDARD
 TZOFFSETFROM:+103948
Index: libkcal/libical/zoneinfo/Pacific/Niue.ics
===================================================================
--- libkcal/libical/zoneinfo/Pacific/Niue.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Pacific/Niue.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Pacific/Niue
+TZID:/kde.org/Olson_20080523_1/Pacific/Niue
 X-LIC-LOCATION:Pacific/Niue
 BEGIN:STANDARD
 TZOFFSETFROM:-111940
Index: libkcal/libical/zoneinfo/Pacific/Marquesas.ics
===================================================================
--- libkcal/libical/zoneinfo/Pacific/Marquesas.ics	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/libical/zoneinfo/Pacific/Marquesas.ics	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -2,7 +2,7 @@
 PRODID:-//KDE//NONSGML KCal Olson-VTIMEZONE Converter//EN
 VERSION:2.0
 BEGIN:VTIMEZONE
-TZID:/kde.org/Olson_20071016_1/Pacific/Marquesas
+TZID:/kde.org/Olson_20080523_1/Pacific/Marquesas
 X-LIC-LOCATION:Pacific/Marquesas
 BEGIN:STANDARD
 TZOFFSETFROM:-0918

Zmiany atrybutów dla: libkcal/libical/zoneinfo
___________________________________________________________________
Usunięte: svn:ignore
   - Makefile
Makefile.in


Index: libkcal/calendarlocal.cpp
===================================================================
--- libkcal/calendarlocal.cpp	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/calendarlocal.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -194,7 +194,7 @@
   }
 
   mTodoList.setAutoDelete( true );
-  mTodoList.clear();
+  mTodoList.clearAll();
   mTodoList.setAutoDelete( false );
 }
 
@@ -542,7 +542,7 @@
   }
 
   mJournalList.setAutoDelete( true );
-  mJournalList.clear();
+  mJournalList.clearAll();
   mJournalList.setAutoDelete( false );
 }
 
Index: libkcal/recurrence.cpp
===================================================================
--- libkcal/recurrence.cpp	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/recurrence.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -426,15 +426,15 @@
 void Recurrence::unsetRecurs()
 {
   if ( mRecurReadOnly ) return;
-  mRRules.clear();
+  mRRules.clearAll();
   updated();
 }
 
 void Recurrence::clear()
 {
   if ( mRecurReadOnly ) return;
-  mRRules.clear();
-  mExRules.clear();
+  mRRules.clearAll();
+  mExRules.clearAll();
   mRDates.clear();
   mRDateTimes.clear();
   mExDates.clear();
@@ -561,7 +561,7 @@
 RecurrenceRule *Recurrence::setNewRecurrenceType( RecurrenceRule::PeriodType type, int freq )
 {
   if ( mRecurReadOnly || freq <= 0 ) return 0;
-  mRRules.clear();
+  mRRules.clearAll();
   updated();
   RecurrenceRule *rrule = defaultRRule( true );
   if ( !rrule ) return 0;
Index: libkcal/icalformatimpl.cpp
===================================================================
--- libkcal/icalformatimpl.cpp	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/icalformatimpl.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1036,14 +1036,9 @@
   }
 
   QString msade = event->nonKDECustomProperty("X-MICROSOFT-CDO-ALLDAYEVENT");
-  if (!msade.isNull()) {
+  if (!msade.isEmpty()) {
     bool floats = (msade == QString::fromLatin1("TRUE"));
-//    kdDebug(5800) << "ICALFormat::readEvent(): all day event: " << floats << endl;
     event->setFloats(floats);
-    if (floats) {
-      QDateTime endDate = event->dtEnd();
-      event->setDtEnd(endDate.addDays(-1));
-    }
   }
 
   if ( mCompat ) mCompat->fixEmptySummary( event );
Index: libkcal/incidenceformatter.cpp
===================================================================
--- libkcal/incidenceformatter.cpp	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/incidenceformatter.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1201,6 +1201,21 @@
   return res;
 }
 
+// Check if the given incidence is likely one that we own instead one from
+// a shared calendar (Kolab-specific)
+static bool incidenceOwnedByMe( Calendar* calendar, Incidence *incidence )
+{
+  CalendarResources* cal = dynamic_cast<CalendarResources*>( calendar );
+  if ( !cal || !incidence )
+    return true;
+  ResourceCalendar* res = cal->resource( incidence );
+  if ( !res )
+    return true;
+  const QString subRes = res->subresourceIdentifier( incidence );
+  if ( !subRes.contains( "/.INBOX.directory/" ) )
+    return false;
+  return true;
+}
 
 QString IncidenceFormatter::formatICalInvitation( QString invitation, Calendar *mCalendar,
     InvitationFormatterHelper *helper )
@@ -1223,10 +1238,12 @@
   Incidence* existingIncidence = 0;
   if ( helper->calendar() ) {
     existingIncidence = helper->calendar()->incidence( incBase->uid() );
+    if ( !incidenceOwnedByMe( helper->calendar(), existingIncidence ) )
+      existingIncidence = 0;
     if ( !existingIncidence ) {
       const Incidence::List list = helper->calendar()->incidences();
       for ( Incidence::List::ConstIterator it = list.begin(), end = list.end(); it != end; ++it ) {
-        if ( (*it)->schedulingID() == incBase->uid() ) {
+        if ( (*it)->schedulingID() == incBase->uid() && incidenceOwnedByMe( helper->calendar(), *it ) ) {
           existingIncidence = *it;
           break;
         }
@@ -1293,7 +1310,7 @@
         }
         html += "<td>";
 
-        if ( helper->calendar() && !existingIncidence ) {
+        if ( !existingIncidence ) {
           // Accept
           html += helper->makeLink( "accept", i18n( "[Accept]" ) );
           html += "</td><td> &nbsp; </td><td>";
@@ -1337,6 +1354,12 @@
         break;
 
     case Scheduler::Counter:
+        html += helper->makeLink( "accept_counter", i18n("[Accept]") );
+        html += "&nbsp;";
+        html += helper->makeLink( "decline_counter", i18n("[Decline]") );
+        html += "&nbsp;";
+        html += helper->makeLink( "check_calendar", i18n("[Check my calendar]" ) );
+        break;
     case Scheduler::Declinecounter:
     case Scheduler::NoMethod:
         break;
@@ -1867,15 +1890,16 @@
     ret += "<br>"+i18n("<i>Date:</i>&nbsp;%1").
         arg( event->dtStartDateStr().replace(" ", "&nbsp;") );
     if ( !event->doesFloat() ) {
-      if ( event->dtStartTimeStr() == event->dtEndTimeStr() ) { // to prevent 'Time: 17:00 - 17:00'
+      const QString dtStartTime = event->dtStartTimeStr().replace( " ", "&nbsp;" );
+      const QString dtEndTime = event->dtEndTimeStr().replace( " ", "&nbsp;" );
+      if ( dtStartTime == dtEndTime ) { // to prevent 'Time: 17:00 - 17:00'
         tmp = "<br>" + i18n("time for event, &nbsp; to prevent ugly line breaks",
         "<i>Time:</i>&nbsp;%1").
-        arg( event->dtStartTimeStr().replace(" ", "&nbsp;") );
+        arg( dtStartTime );
       } else {
         tmp = "<br>" + i18n("time range for event, &nbsp; to prevent ugly line breaks",
         "<i>Time:</i>&nbsp;%1&nbsp;-&nbsp;%2").
-        arg( event->dtStartTimeStr().replace(" ", "&nbsp;") ).
-        arg( event->dtEndTimeStr().replace(" ", "&nbsp;") );
+        arg( dtStartTime, dtEndTime );
       }
       ret += tmp;
     }
Index: libkcal/resourcelocaldir.h
===================================================================
--- libkcal/resourcelocaldir.h	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/resourcelocaldir.h	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -77,6 +77,7 @@
     void reload( const QString & );
 
   protected:
+    virtual bool doOpen();
     virtual bool doLoad();
     virtual bool doSave();
     bool doSave( Incidence * );
Index: libkcal/listbase.h
===================================================================
--- libkcal/listbase.h	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/listbase.h	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -77,6 +77,17 @@
       }
     }
 
+    void clearAll()
+    {
+      if ( mAutoDelete ) {
+        for ( QValueListIterator<T*> it = QValueList<T*>::begin();
+              it != QValueList<T*>::end(); ++it ) {
+          delete *it;
+        }
+      }
+      QValueList<T*>::clear();
+    }
+
   private:
     bool mAutoDelete;
 };
Index: libkcal/incidencebase.cpp
===================================================================
--- libkcal/incidencebase.cpp	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/incidencebase.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -59,10 +59,6 @@
   mSyncStatus = i.mSyncStatus;
   mComments = i.mComments;
 
-  // The copied object is a new one, so it isn't observed by the observer
-  // of the original object.
-  mObservers.clear();
-
   mAttendees.setAutoDelete( true );
 }
 
@@ -91,9 +87,6 @@
   mSyncStatus = i.mSyncStatus;
   mComments = i.mComments;
 
-  // The copied object is a new one, so it isn't observed by the observer
-  // of the original object.
-  mObservers.clear();
   return *this;
 }
 
Index: libkcal/incidence.cpp
===================================================================
--- libkcal/incidence.cpp	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/incidence.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -107,6 +107,8 @@
 
 Incidence& Incidence::operator=( const Incidence &i )
 {
+  if ( &i == this )
+    return *this;
   IncidenceBase::operator=( i );
   mRevision = i.mRevision;
   mCreated = i.mCreated;
@@ -123,7 +125,7 @@
   mPriority = i.mPriority;
   mLocation = i.mLocation;
 
-  mAlarms.clear();
+  mAlarms.clearAll();
   Alarm::List::ConstIterator it;
   for( it = i.mAlarms.begin(); it != i.mAlarms.end(); ++it ) {
     Alarm *b = new Alarm( **it );
@@ -131,7 +133,7 @@
     mAlarms.append( b );
   }
 
-  mAttachments.clear();
+  mAttachments.clearAll();
   Attachment::List::ConstIterator it1;
   for ( it1 = i.mAttachments.begin(); it1 != i.mAttachments.end(); ++it1 ) {
     Attachment *a = new Attachment( **it1 );
@@ -654,7 +656,7 @@
 
 void Incidence::clearAttachments()
 {
-  mAttachments.clear();
+  mAttachments.clearAll();
 }
 
 void Incidence::setResources(const QStringList &resources)
@@ -796,7 +798,7 @@
 
 void Incidence::clearAlarms()
 {
-  mAlarms.clear();
+  mAlarms.clearAll();
   updated();
 }
 
Index: libkcal/resourcecalendar.cpp
===================================================================
--- libkcal/resourcecalendar.cpp	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ libkcal/resourcecalendar.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -109,8 +109,6 @@
   return true;
 }
 
-
-
 bool ResourceCalendar::load()
 {
   kdDebug(5800) << "Loading resource " + resourceName() << endl;
@@ -118,12 +116,14 @@
   mReceivedLoadError = false;
 
   bool success = true;
-  if ( !isOpen() ) success = open();
-  if ( success ) {
+  if ( !isOpen() )
+    success = open();
+  if ( success )
     success = doLoad();
-  }
-  if ( !success && !mReceivedLoadError ) loadError();
 
+  if ( !success && !mReceivedLoadError )
+    loadError();
+
   // If the resource is read-only, we need to set its incidences to read-only,
   // too. This can't be done at a lower-level, since the read-only setting
   // happens at this level
Index: kpilot/conduits/sysinfoconduit/sysinfo_conduit.desktop
===================================================================
--- kpilot/conduits/sysinfoconduit/sysinfo_conduit.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kpilot/conduits/sysinfoconduit/sysinfo_conduit.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,5 +1,4 @@
 [Desktop Entry]
-Encoding=UTF-8
 Type=Service
 Comment=This conduit writes information about your handheld and the sync to a file.
 Comment[af]=Hierdie pad skryf informasie aangaande die draagbare toestel en sinkronisasie na 'n lêer.
@@ -24,6 +23,7 @@
 Comment[is]=Þessi rás skrifar upplýsingar um lófatölvuna þína og samstillinguna í skrá.
 Comment[it]=Questo conduit scrive in un file informazioni sul tuo palmare.
 Comment[ja]=このコンジットはあなたのハンドヘルドの情報を書き出し、ファイルに同期します。
+Comment[ka]=ეს არხი ინფორმაციას წერს თქვენი პორტატიული მოწყობილობის შესახებ და ახდენს მის სინქრონიზაციას ფაილთან.
 Comment[kk]=Қалта құрылғыңыз туралы мәліметті файла жазу арнасы.
 Comment[km]=បំពង់​នេះ​សរសេរ​ព័ត៌មាន​អំពី​ឧបករណ៍​យួរដៃ​របស់​អ្នក និង​ការ​ធ្វើ​សមកាលកម្ម ទៅ​ឯកសារ​មួយ ។
 Comment[lt]=Šis kanalas įrašo informaciją apie delninuką ir sinchronizavimą į bylą.
@@ -76,6 +76,7 @@
 Name[is]=Kerfisupplýsingar
 Name[it]=Informazioni di sistema
 Name[ja]=システム情報
+Name[ka]=სისტემის ინფორმაცია
 Name[kk]=Жүйелік мәлімет
 Name[km]=ព័ត៌មាន​អំពី​ប្រព័ន្ធ
 Name[lt]=Sistemos informacija
@@ -101,7 +102,8 @@
 Name[tg]=Иттилоот дар бораи система
 Name[tr]=Sistem Bilgisi
 Name[uk]=Системна інформація
-Name[uz]=Тизим ҳақида маълумот
+Name[uz]=Tizim haqida maʼlumot
+Name[uz@cyrillic]=Тизим ҳақида маълумот
 Name[zh_CN]=系统信息
 Name[zh_TW]=系統資訊
 Implemented=file
Index: kpilot/conduits/notepadconduit/notepad-conduit.desktop
===================================================================
--- kpilot/conduits/notepadconduit/notepad-conduit.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kpilot/conduits/notepadconduit/notepad-conduit.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,5 +1,4 @@
 [Desktop Entry]
-Encoding=UTF-8
 Type=Service
 Name=NotePad
 Name[cs]=Poznámkový blok
@@ -31,13 +30,14 @@
 Comment[eu]=Kanal honek Ohar-blokaren marrazkiak karpeta lokal batera gordetzen ditu.
 Comment[fa]=این لوله، ترسیمهای NotePad را در پوشه‌ای محلی پشتیبانی می‌کند.
 Comment[fi]=Tämä yhdyskäytävä tekee varmuuskopion NotePad -piirroksista paikalliseen kansioon.
-Comment[fr]=Ce conduit sauvegarde les dessins (Notes) dans un dossier local
+Comment[fr]=Ce conduit enregistre les dessins (Notes) dans un dossier local.
 Comment[fy]=Dit conduit makket in reservekopy fan de notysje fan de notysje-oantekenings nei in lokale map.
 Comment[gl]=Este conducto pon de volta os debuxos do NotePad a un cartafol local.
 Comment[hu]=Bővítőmodul NotePad-rajzok helyi könyvtárba való lementéséhez.
 Comment[is]=Þessi rás afritar NotePad teikningar í staðbundna möppu.
 Comment[it]=Questo conduit archivia i disegni NotePad in una cartella locale.
 Comment[ja]=このコンジットは NotePad の絵をローカルのフォルダにバックアップします。
+Comment[ka]=ეს არხი ლოკალურ საქაღალდეში ინახავს NotePad-ის სარეზერვო  მონახაზებს 
 Comment[kk]=NotePad файлдарының сақтық көшірмелерін жергілікті қапшықта жасау арнасы.
 Comment[km]=បំពង់​នេះ​អាច​បម្រុង​ទុក​គំនូរ NotePad ទៅ​ថត​មូលដ្ឋាន ។
 Comment[lt]=Šis kanalas padaro NotePad piešinių atsargines kopijas į vietinį aplanką.
Index: kpilot/conduits/memofileconduit/memofile-conduit.desktop
===================================================================
--- kpilot/conduits/memofileconduit/memofile-conduit.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kpilot/conduits/memofileconduit/memofile-conduit.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,5 +1,4 @@
 [Desktop Entry]
-Encoding=UTF-8
 Type=Service
 Name=Memo File
 Name[af]=Memo Lêer
@@ -23,6 +22,7 @@
 Name[is]=Minnismiðaskrá
 Name[it]=File appunti
 Name[ja]=メモファイル
+Name[ka]=ჩანიშვნა
 Name[kk]=Жазба файлы
 Name[km]=ឯកសារ​អនុស្សរណៈ
 Name[lt]=Memo byla
@@ -65,6 +65,7 @@
 Comment[is]=Þessi rás samstillir minnismiða lófatölvunnar þinnar við staðbundna möppu.
 Comment[it]=Questo condotto sincronizza gli appunti del tuo palmare con una cartella locale.
 Comment[ja]=このコンジットはハンドヘルドのメモをローカルのディレクトリと同期させます。
+Comment[ka]=ეს არხი თქვენი პორტატიული მოწყობილობის ლოკალურ დირექტორიასთან სინქრონიზაციას ახდენს .
 Comment[kk]=Қалта құрылғыдағы жазбаларды қапшықтағы файлымен қадамдастыру арнасы.
 Comment[km]=បំពង់​នេះ​អាច​ឲ្យ​អនុស្សរណៈ​ឧបករណ៍​យួរ​ដៃ​របស់​អ្នក ធ្វើ​សមកាលកម្ម​ជាមួយ​នឹង​ថត​មូលដ្ឋាន ។​
 Comment[lt]=Šis kanalas sinchronizuoja Jūsų užrašus su vietiniu aplanku.
Index: kpilot/conduits/timeconduit/time_conduit.desktop
===================================================================
--- kpilot/conduits/timeconduit/time_conduit.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kpilot/conduits/timeconduit/time_conduit.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,5 +1,4 @@
 [Desktop Entry]
-Encoding=UTF-8
 Type=Service
 Comment=This conduit sets the time on your handheld from the PC clock.
 Comment[af]=Hierdie pad stel die tyd op jou draagbare toestel vanaf die PC horlosie.
@@ -24,6 +23,7 @@
 Comment[is]=Þessi rás stillir klukku lófatölvunnar eftir klukku PC tölvunnar.
 Comment[it]=Questo conduit imposta l'ora sul tuo palmare prendendola dall'orologio del PC
 Comment[ja]=このコンジットはハンドヘルドの時間をPCの時計に合わせます。
+Comment[ka]=დროის მითითება კომპიუტერის საათისთვის.
 Comment[km]=បំពង់​នេះ​កំណត់​ពេលវេលា​នៅ​លើ​ឧបករណ៍​យួរដៃ​របស់​អ្នក ពី​នាឡិកា​កុំព្យូទ័រ ។
 Comment[lt]=Šis kanalas nustato delninuko laiką pagal PC laiką.
 Comment[mk]=Овој канал го поставува времето на рачниот уред според времето на компјутерот.
@@ -75,6 +75,7 @@
 Name[is]=Tíma samstilling
 Name[it]=Sincronizzazione temporale
 Name[ja]=時間同期
+Name[ka]=დროის სინქრონიზაცია
 Name[kk]=Уақытты қадамдастыру
 Name[km]=សមកាលកម្ម​ពេលវេលា
 Name[lt]=Laiko sinchronizavimas
Index: kpilot/conduits/docconduit/kpalmdoc.desktop
===================================================================
--- kpilot/conduits/docconduit/kpalmdoc.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kpilot/conduits/docconduit/kpalmdoc.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,6 +1,5 @@
 # KDE Config File
 [Desktop Entry]
-Encoding=UTF-8
 Name=KPalmDOC
 Name[hi]=के-पॉम-डॉक
 Name[sv]=Kpalm DOC
@@ -30,6 +29,7 @@
 GenericName[is]=PalmDOC umbreytir
 GenericName[it]=Convertitore PalmDOC
 GenericName[ja]= PalmDOC コンバータ
+GenericName[ka]=კონვერტორი PalmDOC
 GenericName[kk]=PalmDOC аударғышы
 GenericName[km]=កម្មវិធី​បម្លែង PalmDOC
 GenericName[lt]=PalmDOC konverteris
Index: kpilot/conduits/docconduit/doc_conduit.desktop
===================================================================
--- kpilot/conduits/docconduit/doc_conduit.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kpilot/conduits/docconduit/doc_conduit.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,5 +1,4 @@
 [Desktop Entry]
-Encoding=UTF-8
 Type=Service
 Comment=Adds text files to your handheld, suitable for DOC readers.
 Comment[af]=Voeg teks lêers by jou draagbare toestel in DOC leser formaat.
@@ -21,6 +20,7 @@
 Comment[is]=Bætir textaskrám, sem hægt er að lesa í DOC lesara, við lófatölvuna þína.
 Comment[it]=Aggiunge file di testo al tuo Pilot, adatti per lettori DOC.
 Comment[ja]=テキストファイルを DOC リーダーに適した形式でハンドヘルドに追加します。
+Comment[ka]=უმატებს ტექსტურ ფაილებს თქვენს პროტატიულ მოწყობილობას, რომელიც შესაფერისია DOC წამკითხავებისთვის
 Comment[kk]=DOC файлды оқи алатын қалта құрылғыға мәтінді көшіру.
 Comment[km]=បន្ថែម​ឯកសារ​អត្ថបទ​ទៅ​ឧបករណ៍​យួរ​ដៃ​របស់​អ្នក (សមស្រប​សម្រាប់​កម្មវិធី​អាន DOC) ។
 Comment[lt]=Prideda teksto bylas prie Jūsų nešiojamos knygelės, tinka DOC skaityklėms.
Index: kpilot/conduits/malconduit/mal_conduit.desktop
===================================================================
--- kpilot/conduits/malconduit/mal_conduit.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kpilot/conduits/malconduit/mal_conduit.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,5 +1,4 @@
 [Desktop Entry]
-Encoding=UTF-8
 Type=Service
 Name=MAL (AvantGo) Conduit
 Name[af]=MAL (AvantGo) pad
@@ -23,6 +22,7 @@
 Name[is]=MAL (AvantGo)-rás
 Name[it]=Conduit MAL (AvantGo)
 Name[ja]=MAL (AvantGo) コンジット
+Name[ka]=არხი MAL (AvantGo)
 Name[kk]=MAL (AvantGo) арнасы
 Name[km]=បំពង់ MAL (AvantGo)
 Name[lt]=MAL (AvantGo) kanalas
@@ -68,6 +68,7 @@
 Comment[is]=Samstillir AvantGo (eða venjulega innihald MAL þjóns) við lófatölvuna. Þetta gerir þér kleyft að skoða vefsíður þegar þú ert ótengd(ur) vefnum, t.d. kvikmynda eða sjónvarpsdagskrá.
 Comment[it]=Sincronizza AvantGo (o il contenuto di un generico server MAL) con il palmare. In questo modo potrai visualizzare le pagine web offline sul palmare come per esempio la programmazione di un cinema o una TV o qualsiasi altra pagina web.
 Comment[ja]=AvantGo (または一般に MAL サーバのコンテンツ) とハンドヘルドを同期させます。これにより、ハンドヘルドで映画や TV 番組表、その他のウェブページをオフラインで閲覧できるようになります。
+Comment[ka]= AvantGo-ს სინქრონიზაცია (ძირითადად MAL სერვერების შემადგენლობით) პორტატიულ მოწყობილობასთან. ეს ვებ-გვერდების ავტონომიურ რეჟიმში დათვალიერების საშუალებას იძლევა,მაგ.: თქვენი კინო ან ტელე პროგრამა, ან სხვა ვებ-გვერდები.
 Comment[kk]=AvantGo (немесе жалпы MAL сервердің мазмұнын) қалта құрылғымен қадамдастыру арнасы. Бұл сол құрылғыда кино, ТВ кестеңізді немесе басқа веб парақтарды желіге қосылмай көруге мүмкіндік береді.
 Comment[km]=ធ្វើ​សមកាលកម្ម AvantGo (ជាទូទៅ​គឺ មាតិកា​របស់​ម៉ាស៊ីន​បម្រើ MAL) ទៅ​នឹង​ឧបករណ៍​យួរ​ដៃ ។ វា​អនុញ្ញាត​ឲ្យ​អ្នក​មើល​ទំព័រ​បណ្ដាញ (កាលវិភាគ​រោង​ភាពយន្ត ឬ ទូរទស្សន៍...) នៅ​ក្រៅ​បណ្ដាញ នៅ​លើ​ឧបករណ៍​យួរ​ដៃ​របស់​អ្នក ។
 Comment[lt]=Sinchronizuoti AvantGo (ar MAL serverio turinį apskritai) su nešiojamu įrenginiu. Tai leis jums peržiūrėti žiniatinklio puslapius nešiojamame įrenginyje, tokius kaip kino teatro ar TV programas, bei bet kokį kitą puslapį, neprisijungus prie Interneto.
Index: kpilot/conduits/popmail/popmail-conduit.desktop
===================================================================
--- kpilot/conduits/popmail/popmail-conduit.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kpilot/conduits/popmail/popmail-conduit.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,5 +1,4 @@
 [Desktop Entry]
-Encoding=UTF-8
 Type=Service
 Comment=Send mail from your handheld through KMail.
 Comment[af]=Stuur pos vanaf jou draagbare toestel deur KMail.
@@ -22,6 +21,7 @@
 Comment[is]=Sendu tölvupóst frá lófatölvunni þinni gegnum KMail.
 Comment[it]=Invia la posta dal tuo palmare tramite KMail.
 Comment[ja]=KMail 経由でハンドヘルドからメールを送信します。
+Comment[ka]= ფოსტის გაგზავნა პორტატიული მოწყობილობიდან KMail-ის საშუალებით.
 Comment[kk]=Қалта құрылғының поштасын KMail арқылы жіберу.
 Comment[km]=ផ្ញើ​សំបុត្រ​ទៅ​ឧបករណ៍​យួរដៃ​របស់​អ្នក​តាម​រយៈ KMail ។
 Comment[lt]=Siųsti paštą iš nešiojamo įrenginio per KMail.
@@ -72,6 +72,7 @@
 Name[is]=Póstur
 Name[it]=Posta
 Name[ja]=メール
+Name[ka]=ფოსტა
 Name[kk]=Пошта
 Name[km]=សំបុត្រ
 Name[lt]=Paštas
@@ -99,7 +100,8 @@
 Name[th]=จดหมาย
 Name[tr]=Posta
 Name[uk]=Пошта
-Name[uz]=Хат-хабар
+Name[uz]=Xat-xabar
+Name[uz@cyrillic]=Хат-хабар
 Name[zh_CN]=邮件
 Name[zh_TW]=郵件
 Implemented=file
Index: kpilot/conduits/knotes/knotes-conduit.desktop
===================================================================
--- kpilot/conduits/knotes/knotes-conduit.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kpilot/conduits/knotes/knotes-conduit.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,5 +1,4 @@
 [Desktop Entry]
-Encoding=UTF-8
 Type=Service
 Comment=This conduit syncs the Memo Pad application with KNotes.
 Comment[af]=Hierdie pad synkroniseer die Memo Pad program met KNotes.
@@ -25,6 +24,7 @@
 Comment[is]=Þessi rás samstillir lófatölvuna þína við KNotes.
 Comment[it]=Questo condotto sincronizza l'applicazione Memo Pad con KNotes.
 Comment[ja]=このコンジットはメモ帳アプリケーションを KNotes と同期させます。
+Comment[ka]=ეს არხი ახდენს Memo Pad პროგრამის სინქრონიზაციას  KNotes-თან.
 Comment[kk]=Memo Pad қолданбаны KNotes жазбаларымен қадамдастыру арнасы.
 Comment[km]=បំពង់​នេះ​អាច​ឲ្យ​កម្មវិធី Memo Pad ធ្វើ​សមកាលកម្ម​ជាមួយ​នឹង KNotes ។
 Comment[lt]=Šis kanalas sinchronizuoja Memo Pad programą su KNotes.
@@ -68,6 +68,7 @@
 Name[hu]=KNotes / memók
 Name[is]=KNotes / minnisblöð
 Name[it]=KNotes / Memo
+Name[ka]=KNotes / ჩანიშვნები
 Name[kk]=KNotes / Жазбалар
 Name[km]=KNotes / អនុស្សរណៈ
 Name[lt]=KNotes / Memo
Index: kpilot/conduits/recordconduit/record-conduit.desktop
===================================================================
--- kpilot/conduits/recordconduit/record-conduit.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kpilot/conduits/recordconduit/record-conduit.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,5 +1,4 @@
 [Desktop Entry]
-Encoding=UTF-8
 Type=Service
 Name=Records (Experimental)
 Name[af]=Rekords (Eksperimenteel)
@@ -15,6 +14,7 @@
 Name[fy]=Opnames (eksperimenteel)
 Name[gl]=Grava (Experimental)
 Name[hu]=Rekordok (kísérleti)
+Name[is]=Færslur (á tilraunastigi)
 Name[it]=Record (sperimentale)
 Name[ja]=レコード (実験中)
 Name[kk]=Жазулар (Эксперименталдық)
@@ -61,6 +61,7 @@
 Comment[is]=Þessi rás gerir ekki neitt.
 Comment[it]=Questo conduit non fa nulla.
 Comment[ja]=このコンジットは未知です。
+Comment[ka]=ეს არხი არაფერს არ აკეთებს.
 Comment[kk]=Ештеңе істемейтін арна.
 Comment[km]=បំពង់​នេះ​មិន​ធ្វើ​អ្វី​ទាំងអស់ ។
 Comment[lt]=Šis kanalas nieko neatlieka.
Index: kpilot/conduits/null/null-conduit.desktop
===================================================================
--- kpilot/conduits/null/null-conduit.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kpilot/conduits/null/null-conduit.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,5 +1,4 @@
 [Desktop Entry]
-Encoding=UTF-8
 Type=Service
 Name=NULL
 Name[ca]=NUL
@@ -33,6 +32,7 @@
 Comment[is]=Þessi rás gerir ekki neitt.
 Comment[it]=Questo conduit non fa nulla.
 Comment[ja]=このコンジットは未知です。
+Comment[ka]=ეს არხი არაფერს არ აკეთებს.
 Comment[kk]=Ештеңе істемейтін арна.
 Comment[km]=បំពង់​នេះ​មិន​ធ្វើ​អ្វី​ទាំងអស់ ។
 Comment[lt]=Šis kanalas nieko neatlieka.
Index: kpilot/conduits/vcalconduit/todo-conduit.desktop
===================================================================
--- kpilot/conduits/vcalconduit/todo-conduit.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kpilot/conduits/vcalconduit/todo-conduit.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,5 +1,4 @@
 [Desktop Entry]
-Encoding=UTF-8
 Type=Service
 Comment=This conduit syncs the ToDo list from your handheld to KOrganizer.
 Comment[af]=Hierdie pad sinkroniseer die Te-doen lys vanaf jou draagbare toestel na KOrganizer.
@@ -25,6 +24,7 @@
 Comment[is]=Þessi rás samstillir verkþáttalista lófatölvunnar þinnar og KOrganizer.
 Comment[it]=Questo condotto sincronizza il tuo Pilot con la lista delle cose da fare di KOrganizer.
 Comment[ja]=このコンジットはハンドヘルドの To-Do と KOrganizer を同期させます。
+Comment[ka]=ამოცანათა სიების სინქრონიზაცია KOrganizer-ისთვის.
 Comment[kk]=Қалта құрылғыдағы жоспар тізімін KOrganizer-мен қадамдастыру арнасы.
 Comment[km]=បំពង់​នេះ​ធ្វើ​សមកាលកម្ម​បញ្ជី​ការងារ​ត្រូវ​ធ្វើ​ពី​ឧបករណ៍​យួរ​ដៃ​របស់​អ្នកទៅ KOrganizer ។
 Comment[lt]=Šis kanalas sinchronizuoja Jūsų darbų sąrašą iš delninuko su su KOrganizer sąrašu.
@@ -76,6 +76,7 @@
 Name[is]=Verkþáttalistar (KOrganizer)
 Name[it]=Cose da fare (KOrganizer)
 Name[ja]=To-Do (KOrganizer)
+Name[ka]=ამოცანები (KOrganizer)
 Name[kk]=Жоспарлар (KOrganizer)
 Name[km]=ការងារ​ត្រូវ​ធ្វើ (KOrganizer)
 Name[lt]=Darbai (KOrganizer)
Index: kpilot/conduits/vcalconduit/vcal-conduit.desktop
===================================================================
--- kpilot/conduits/vcalconduit/vcal-conduit.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kpilot/conduits/vcalconduit/vcal-conduit.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,5 +1,4 @@
 [Desktop Entry]
-Encoding=UTF-8
 Type=Service
 Name=Calendar (KOrganizer)
 Name[af]=Kalender (KOrganizer)
@@ -28,6 +27,7 @@
 Name[is]=Dagbók (KOrganizer)
 Name[it]=Calendario (KOrganizer)
 Name[ja]=カレンダー (KOrganizer)
+Name[ka]=კალენდარი (KOrganizer)
 Name[kk]=Күнтізбе (KOrganizer)
 Name[km]=ប្រតិទិន (KOrganizer)
 Name[lt]=Kalendorius (KOrganizer)
@@ -76,6 +76,7 @@
 Comment[is]=Þessi rás samstillir lófatölvuna þína við dagbók KOrganizer.
 Comment[it]=Questo conduit sincronizza il tuo palmare con il calendario di KOrganizer.
 Comment[ja]=このコンジットはハンドヘルドを KOrganizer の手帳と同期させます。
+Comment[ka]=სინქრონიზაცია KOrganizer-ისთვის.
 Comment[kk]=Қалта құрылғыдағы күнтізбені KOrganizer-мен қадамдастыру арнасы.
 Comment[km]=បំពង់​នេះ​ធ្វើ​សមកាលកម្ម​ឧបករណ៍​យួរ​ដៃ​របស់​អ្នក​ជាមួយ​នឹង​សៀវភៅ​កាលបរិច្ឆេទ KOrganizer ។
 Comment[lt]=Šis kanalas sinchronizuoja jūsų delninuką su KOrganizer datų knyga.
Index: kpilot/conduits/abbrowserconduit/abbrowser_conduit.desktop
===================================================================
--- kpilot/conduits/abbrowserconduit/abbrowser_conduit.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kpilot/conduits/abbrowserconduit/abbrowser_conduit.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,5 +1,4 @@
 [Desktop Entry]
-Encoding=UTF-8
 Type=Service
 Comment=This conduit syncs the handheld addressbook with KDE's addressbook.
 Comment[af]=Hierdie pad sinkroniseer die draagbare toestel adresboek met KDE se adresboek.
@@ -25,6 +24,7 @@
 Comment[is]=Þessi rás samstillir póstfangaskrár KDE og lófatölvunnar
 Comment[it]=Questo condotto sincronizza il tuo palmare con la rubrica indirizzi di KDE
 Comment[ja]=このコンジットはハンドヘルドのアドレス帳をKDEのアドレス帳と同期させます。
+Comment[ka]=ეს არხი KDE-ს  წიგნაკის სინქრონიზაციას ახდენს პორტატიულ წიგნაკთან.
 Comment[kk]=Қалта құрылғыдағы адрестік кітапшамен KDE-нің адрестік кітапшаларды қадамдастыру арнасы.
 Comment[km]=បំពង់​នេះ​អាច​ឲ្យ​សៀវភៅ​អាសយដ្ឋាន​របស់​ឧបករណ៍​យួរដៃ ធ្វើ​សមកាលកម្ម​ជាមួយ​នឹង​សៀវភៅ​អាសយដ្ឋាន​របស់ KDE
 Comment[lt]=Šis kanalas sinchronizuoja nešiojamą adresų knygelę su KDE adresų knygele.
@@ -81,6 +81,7 @@
 Name[is]=Póstfangaskrá
 Name[it]=Rubrica degli indirizzi
 Name[ja]=アドレス帳
+Name[ka]=წიგნაკი
 Name[kk]=Адрестік кітапшасы
 Name[km]=សៀវភៅ​អាសយដ្ឋាន
 Name[lt]=Adresų knygelė
@@ -106,7 +107,8 @@
 Name[tg]=Китоби адресӣ
 Name[tr]=Adresdefteri
 Name[uk]=Адресна книга
-Name[uz]=Манзиллар дафтари
+Name[uz]=Manzillar daftari
+Name[uz@cyrillic]=Манзиллар дафтари
 Name[zh_CN]=地址簿
 Name[zh_TW]=通訊錄
 Implemented=file
Index: kpilot/conduits/abbrowserconduit/abbrowser-conduit.cc
===================================================================
--- kpilot/conduits/abbrowserconduit/abbrowser-conduit.cc	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kpilot/conduits/abbrowserconduit/abbrowser-conduit.cc	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1582,11 +1582,12 @@
 	{
 		backupAddrCategoryLabel = fAddressAppInfo->categoryName(backupAddr->category());
 	}
+	int category = palmAddr ? palmAddr->category() : 0;
 	tab->append(new ResolutionItem(
 		i18n("Category"),
 		tab->fExistItems,
 		!pcAddr.isEmpty() ?
-			KABCSync::bestMatchedCategoryName(pcAddr.categories(), *fAddressAppInfo,palmAddr->category()) :
+			KABCSync::bestMatchedCategoryName(pcAddr.categories(), *fAddressAppInfo, category) :
 			QString::null,
 		palmAddrCategoryLabel,
 		backupAddrCategoryLabel));
Index: kpilot/kpilot/kpilot_config.desktop
===================================================================
--- kpilot/kpilot/kpilot_config.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kpilot/kpilot/kpilot_config.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,5 +1,4 @@
 [Desktop Entry]
-Encoding=UTF-8
 Icon=kpilot
 Type=Service
 ServiceTypes=KCModule
@@ -37,6 +36,7 @@
 Name[is]=KPilot stillingar
 Name[it]=Configurazione KPilot
 Name[ja]=KPilot の設定
+Name[ka]=KPilot  კონფიგურაცია
 Name[kk]=KPilot параметрлері
 Name[km]=ការ​កំណត់​រចនាសម្ព័ន្ធ KPilot
 Name[lt]=Kpilot konfigūracija
@@ -87,6 +87,7 @@
 Comment[is]=Aðalstillingar KPilot
 Comment[it]=Configurazione principale di KPilot
 Comment[ja]=KPilot 主要設定
+Comment[ka]=KPilot ძირითადი კონფიგურაცია
 Comment[kk]=KPilot негізгі параметрлері
 Comment[km]=ការ​កំណត់​រចនាសម្ព័ន្ធ​សំខាន់ៗ​របស់ KPilot
 Comment[lt]=KPilot bendrasis konfigūravimas
@@ -133,6 +134,7 @@
 Keywords[is]=kpilot,aðal
 Keywords[it]=kpilot,principale
 Keywords[ja]=kpilot,主要
+Keywords[ka]=kpilot,ძირითადი
 Keywords[km]=kpilot,សំខាន់
 Keywords[lt]=kpilot,main,pagrindinis
 Keywords[mk]=kpilot,main.кпилот,главно
Index: kpilot/kpilot/kpilot.desktop
===================================================================
--- kpilot/kpilot/kpilot.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kpilot/kpilot/kpilot.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,6 +1,5 @@
 # KDE Config File
 [Desktop Entry]
-Encoding=UTF-8
 Name=KPilot
 Name[af]=Kpilot
 Name[eo]=Palm-Piloto
@@ -43,6 +42,7 @@
 GenericName[is]=PalmPilot tól
 GenericName[it]=Strumento per PalmPilot
 GenericName[ja]=PalmPilot ツール
+GenericName[ka]=Palm Pilot ხელსაწყო
 GenericName[kk]=PalmPilot құрылғысы
 GenericName[km]=ឧបករណ៍ PalmPilot
 GenericName[lt]=PalmPilot įrankis
Index: kpilot/kpilot/kpilotconduit.desktop
===================================================================
--- kpilot/kpilot/kpilotconduit.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kpilot/kpilot/kpilotconduit.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,5 +1,4 @@
 [Desktop Entry]
-Encoding=UTF-8
 Type=ServiceType
 X-KDE-ServiceType=KPilotConduit
 Comment=KPilot Conduit
@@ -29,6 +28,7 @@
 Comment[is]=KPilot rásir
 Comment[it]=Conduit KPilot
 Comment[ja]=KPilot コンジット
+Comment[ka]=არხი KPilot
 Comment[kk]=KPilot арнасы
 Comment[km]=បំពង់ KPilot
 Comment[lt]=KPilot kanalas
Index: kpilot/kpilot/kpilotdaemon.desktop
===================================================================
--- kpilot/kpilot/kpilotdaemon.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kpilot/kpilot/kpilotdaemon.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,6 +1,5 @@
 # KDE Config File
 [Desktop Entry]
-Encoding=UTF-8
 Name=KPilotDaemon
 Name[af]=Kpilotdaemon
 Name[ar]=مراقب KPilot
@@ -16,6 +15,7 @@
 Name[is]=KPilot þjónn
 Name[it]=Demone KPilot
 Name[ja]=KPilot デーモン
+Name[ka]=KPilot-ის დემონი
 Name[lt]=KPilot tarnyba
 Name[lv]=KPilotDēmons
 Name[ms]=Daemon KPilot
Index: kpilot/tests/mergecalendars.cc
===================================================================
--- kpilot/tests/mergecalendars.cc	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kpilot/tests/mergecalendars.cc	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -35,10 +35,13 @@
 #include <libkcal/calendar.h>
 #include <libkcal/calendarlocal.h>
 
+#include "options.h"
+
 static const KCmdLineOptions options[] =
 {
 	{"korgfile <path>","KOrganizer master file", 0},
 	{"newfile <path>","Calendar file to merge into korganizer", 0},
+	{"category <string>","Category to remove from 'korgfile' and to add to events in 'newfile' for synch purposes", 0},
 	{"verbose", "Verbose debugging", 0},
 	KCmdLineLastOption
 };
@@ -62,54 +65,58 @@
 
 	QString korgfile = args->getOption("korgfile");
 	QString newfile = args->getOption("newfile");
+	QString category = args->getOption("category");
 
 	if (korgfile.isEmpty())
 	{
-		kdError() << "! Must provide a korganizer file." << endl;
+		WARNINGKPILOT << "! Must provide a korganizer file." << endl;
 	}
 	if (newfile.isEmpty())
 	{
-		kdError() << "! Must provide a newfile file." << endl;
+		WARNINGKPILOT << "! Must provide a newfile file." << endl;
 	}
-	if (korgfile.isEmpty() || newfile.isEmpty())
+	if (category.isEmpty())
 	{
+		WARNINGKPILOT << "! Must provide a category to use." << endl;
+	}
+	if (korgfile.isEmpty() || newfile.isEmpty() || category.isEmpty())
+	{
 		return 1;
 	}
 
 	QString korgsave = QString("%1.updated").arg(korgfile);
 	QString newfilesave = QString("%1.updated").arg(newfile);
 
-	kdDebug() << "Using korgfile: [" << korgfile 
+	DEBUGKPILOT << "Using korgfile: [" << korgfile 
 		<< "]" << endl;
-	kdDebug() << "Using newfile: [" << newfile
+	DEBUGKPILOT << "Using newfile: [" << newfile
 		<< "]" << endl;
-	kdDebug() << "Will save korgfile to: [" << korgsave 
+	DEBUGKPILOT << "Will save korgfile to: [" << korgsave 
 		<< "]" << endl;
-	kdDebug() << "Will save newfile to: [" << newfilesave
+	DEBUGKPILOT << "Will save newfile to: [" << newfilesave
 		<< "]" << endl << endl;
 
 	KCal::CalendarLocal *calkorg = new KCal::CalendarLocal( QString::fromLatin1("UTC") );
 	KCal::CalendarLocal *calnew = new KCal::CalendarLocal( QString::fromLatin1("UTC") );
 	if (!calkorg || !calnew)
 	{
-		kdError() << "Unable to create base calendar objects." << endl;
+		WARNINGKPILOT << "Unable to create base calendar objects." << endl;
 		return 1;
 	}
 
 	if (!calkorg->load(korgfile) || !calnew->load(newfile))
 	{
-		kdError() << "Unable to load calendar files." << endl;
+		WARNINGKPILOT << "Unable to load calendar files." << endl;
 		return 1;
 	}
 
 	int numkorgstart = calkorg->incidences().count();
 	int numnewstart = calnew->incidences().count();
 
-	kdDebug() << "  - Opened korganizer calendar with: [" 
+	DEBUGKPILOT << "  - Opened korganizer calendar with: [" 
 		<< numkorgstart << "] incidences." << endl;
-	kdDebug() << "  - Opened newfile calendar with: [" 
+	DEBUGKPILOT << "  - Opened newfile calendar with: [" 
 		<< numnewstart << "] incidences." << endl;
-	
 
 	KCal::Event::List korgEvents;
 	KCal::Event::List::ConstIterator korgIt;
@@ -121,7 +128,7 @@
 	newEvents = calnew->events();
 	newEvents.setAutoDelete(false);
 
-	kdDebug() << "Looking for previous pilot ids for exchange events..." << endl;
+	DEBUGKPILOT << "Looking for previous pilot ids for exchange events..." << endl;
 
 	// iterate through all events and try to find a korganizer event
 	// that matches up with this external event's UID
@@ -132,7 +139,7 @@
 		ev = *newIt;
 		QString uid = ev->uid();
 		if (debug_level)
-			kdDebug() << "  - Looking at event: [" 
+			DEBUGKPILOT << "  - Looking at event: [" 
 			<< ev->summary() << "], uid: ["
 			<< uid << "]" << endl;
 
@@ -142,7 +149,7 @@
 			unsigned long pilotId = evkorg->pilotId();
 
 			if (debug_level)
-				kdDebug() << "Found korg event for uid: ["
+				DEBUGKPILOT << "Found korg event for uid: ["
 				<< uid << "], pilotId: [" 
 				<< pilotId << "]" << endl;
 
@@ -153,15 +160,15 @@
 		}
 	}
 
-	kdDebug() << "Matched: [" << numkorgpilotids << "] events."<< endl;
+	DEBUGKPILOT << "Matched: [" << numkorgpilotids << "] events."<< endl;
 
-	kdDebug() << "Now searching for previous WorkXChange events in korganizer's calendar." << endl;
+	DEBUGKPILOT << "Now searching for previous events of category: [" << category << "] in korganizer's calendar." << endl;
 
 	// iterate through all events and try to find a korganizer event
 	// that matches up with this external event's UID
 	unsigned int numkorgremoved = 0;
 
-	QString categoryToken = QString("WorkXChange");
+	QString categoryToken = category;
 
 	// careful iterating and removing...
 	KCal::Event *next = 0;
@@ -169,7 +176,7 @@
 	korgIt = korgEvents.begin();
 	for ( ev = *korgIt; ev != 0; ev = next )
 	{
-		if (++korgIt == korgEvents.end()) 
+		if (++korgIt == korgEvents.end())
 		{
 			next = 0;
 		}
@@ -181,7 +188,7 @@
 		if (ev->categoriesStr().contains(categoryToken))
 		{
 			if (debug_level)
-				kdDebug() << "  - Found matching event: [" 
+				DEBUGKPILOT << "  - Found matching event: [" 
 				<< ev->summary() << "], uid: ["
 				<< ev->uid() << "]. Removing." << endl;
 
@@ -192,27 +199,28 @@
 		}
 	}
 
-	kdDebug() << "  - Found: [" << numkorgremoved
+	DEBUGKPILOT << "  - Found: [" << numkorgremoved
 		<< "] prior: [" << categoryToken 
 		<< "] category events." << endl;
 	
-	kdDebug() << "Merging new events into korganizer calendar..." 
+	DEBUGKPILOT << "Merging new events into korganizer calendar..." 
 		<< endl;
 
 	for (newIt = newEvents.begin(); newIt != newEvents.end(); ++newIt ) 
 	{
 		ev = *newIt;
+		ev->setCategories(category);
 		korgEvents.append(ev);
 		calkorg->addEvent(ev);
 	}
 
-	kdDebug() << "Ended up with: [" << korgEvents.count() 
+	DEBUGKPILOT << "Ended up with: [" << korgEvents.count() 
 		<< "] events in korganizer calendar." << endl;
 
-	kdDebug() << "Saving updated korganizer file..." << endl;
+	DEBUGKPILOT << "Saving updated korganizer file..." << endl;
 	calkorg->save(korgsave);
 
-	kdDebug() << "Saving updated newfile file..." << endl;
+	DEBUGKPILOT << "Saving updated newfile file..." << endl;
 	calnew->save(newfilesave);
 
 	return 0;
Index: kpilot/lib/options.h
===================================================================
--- kpilot/lib/options.h	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kpilot/lib/options.h	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -140,7 +140,7 @@
 #define FUNCTIONSETUPL(a) const int fname = a; Q_UNUSED(fname);
 #endif
 
-#define KPILOT_VERSION	"4.9.3-359 (palo alto)"
+#define KPILOT_VERSION	"4.9.4-3510 (elsewhere)"
 
 
 // Function to expand newlines in rich text to <br>\n
Index: kpilot/lib/pilotLocalDatabase.cc
===================================================================
--- kpilot/lib/pilotLocalDatabase.cc	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kpilot/lib/pilotLocalDatabase.cc	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -746,7 +746,7 @@
 		return false;
 	}
 
-	const char * fileName = QFile::encodeName( path );
+	QCString fileName = QFile::encodeName( path );
 	f = pi_file_open( fileName );
 	if (!f)
 	{
Index: knotes/local.desktop
===================================================================
--- knotes/local.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ knotes/local.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,5 +1,4 @@
 [Desktop Entry]
-Encoding=UTF-8
 Name=Notes in Local File
 Name[af]=Notas in plaaslike lêer
 Name[ar]=الملاحظات في الملف المحلّي
@@ -27,6 +26,7 @@
 Name[is]=Minnismiðar í staðbundinni skrá
 Name[it]=Note in file locale
 Name[ja]=ローカルファイルのメモ
+Name[ka]=ჩანიშვნები ლოკალურ ფაილში
 Name[kk]=Жергілікті файлдағы жазбалар
 Name[km]=ចំណាំ​ក្នុង​ឯកសារ​មូលដ្ឋាន
 Name[lt]=Užrašai vietinėje byloje
Index: knotes/knotes_manager.desktop
===================================================================
--- knotes/knotes_manager.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ knotes/knotes_manager.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,6 +1,5 @@
 # KDE Config File
 [Desktop Entry]
-Encoding=UTF-8
 Name=Notes
 Name[af]=Notas
 Name[ar]=الملاحظات
@@ -28,6 +27,7 @@
 Name[is]=Minnismiðar
 Name[it]=Note
 Name[ja]=メモ
+Name[ka]=ჩანიშვნები
 Name[kk]=Жазбалар
 Name[km]=ចំណាំ
 Name[lt]=Užrašai
@@ -53,7 +53,8 @@
 Name[th]=บันทึกช่วยจำ
 Name[tr]=Notlar
 Name[uk]=Примітки
-Name[uz]=Ёзма хотира
+Name[uz]=Yozma xotira
+Name[uz@cyrillic]=Ёзма хотира
 Name[zh_CN]=便笺
 Name[zh_TW]=備忘錄
 Type=Service
Index: knotes/knotes.desktop
===================================================================
--- knotes/knotes.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ knotes/knotes.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,5 +1,4 @@
 [Desktop Entry]
-Encoding=UTF-8
 DocPath=knotes/index.html
 Exec=knotes
 Icon=knotes
@@ -33,6 +32,7 @@
 GenericName[is]=Litlir gulir miðar
 GenericName[it]=Note a comparsa
 GenericName[ja]=ポップアップメモ
+GenericName[ka]=მოტივტივე შენიშვნები
 GenericName[kk]=Қалқымалы жазбалар
 GenericName[km]=ចំណាំ​លេចឡើង
 GenericName[lt]=Pastabos lapeliuose
Index: kdepim.lsm
===================================================================
--- kdepim.lsm	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kdepim.lsm	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,7 +1,7 @@
 Begin4
 Title:          kdepim
-Version:        3.5.9
-Entered-date:   2008-02-13
+Version:        3.5.10
+Entered-date:   2008-08-26
 Description:    PIM (Personal Information Management) programs 
                 for the K Desktop Environment (KDE)
 Keywords:       KDE X11 desktop Qt 
Index: kontact/plugins/akregator/akregatorplugin.desktop
===================================================================
--- kontact/plugins/akregator/akregatorplugin.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kontact/plugins/akregator/akregatorplugin.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,5 +1,4 @@
 [Desktop Entry]
-Encoding=UTF-8
 Type=Service
 Icon=akregator
 ServiceTypes=Kontact/Plugin,KPluginInfo
@@ -20,14 +19,22 @@
 Comment[da]=Feed-læserkomponent (Akregator-plugin)
 Comment[de]=News-Leser (Akregator-Modul)
 Comment[el]=Συστατικό ανάγνωσης ροών (Πρόσθετο του Akregator)
+Comment[es]=Componente de lectura de fuentes (complemento de Akregator)
 Comment[et]=Uudistevoogude plugin (Akregator)
+Comment[fr]=Composant du lecteur de flux (Module pour Akregator)
+Comment[is]=Fréttastraumalestur (Akregator íforrit)
 Comment[it]=Componente lettore fonti (plugin Akregator)
 Comment[ja]=フィードリーダーコンポーネント (Akregator プラグイン)
+Comment[km]=មមាសភាគ​កម្មវិធី​អាន​មតិព័ត៌មាន (កម្មវិធី​ជំនួយ Akregator​)
 Comment[nds]=Stroomleser-Komponent (Akregator-Moduul)
 Comment[nl]=Component om feeds te lezen (Akregator-plugin)
+Comment[pl]=Składnik do czytania kanałów RSS (wtyczka Akregator)
+Comment[ru]=Просмотр лент новостей (модуль Akregator)
+Comment[sk]=Komponent na čítanie kanálov (Modul pre Akregator)
 Comment[sr]=Компонента читања довода (прикључак Akregator-а)
 Comment[sr@Latn]=Komponenta čitanja dovoda (priključak Akregator-a)
 Comment[sv]=Komponent för läsning av kanaler (Akregator-insticksprogram)
+Comment[tr]=Kaynak Okuyucu Bileşeni (Akregator Eklentisi)
 Comment[zh_CN]=新闻源阅读器组件(Akregator 插件)
 Comment[zh_TW]=Feed 閱讀器組件（Akregator 外掛程式）
 Name=Feeds
@@ -53,6 +60,7 @@
 Name[is]=Fréttastraumar
 Name[it]=Fonti
 Name[ja]=フィード
+Name[ka]=კვება
 Name[kk]=Ақпарлар
 Name[km]=មតិព័ត៌មាន
 Name[lt]=Kanalai
@@ -65,7 +73,7 @@
 Name[pt]=Fontes
 Name[pt_BR]=Fontes de Notícias
 Name[ru]=Ленты новостей
-Name[sk]=Kŕmitka
+Name[sk]=Kanály
 Name[sl]=Viri
 Name[sr]=Доводи
 Name[sr@Latn]=Dovodi
@@ -73,6 +81,7 @@
 Name[ta]=உள்ளீடுகள்
 Name[tr]=Haberler
 Name[uk]=Подачі
-Name[uz]=Янгиликлар тасмалари
+Name[uz]=Yangiliklar tasmalari
+Name[uz@cyrillic]=Янгиликлар тасмалари
 Name[zh_CN]=种子
 
Index: kontact/plugins/akregator/akregatorplugin3.2.desktop
===================================================================
--- kontact/plugins/akregator/akregatorplugin3.2.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kontact/plugins/akregator/akregatorplugin3.2.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,5 +1,4 @@
 [Desktop Entry]
-Encoding=UTF-8
 Type=Service
 Icon=akregator
 ServiceTypes=Kontact/Plugin,KPluginInfo
@@ -36,6 +35,7 @@
 Comment[is]=Akregator íforrit
 Comment[it]=Plugin aKregator
 Comment[ja]=Akregator プラグイン
+Comment[ka]=Akregator-ის მოდული
 Comment[kk]=Akregator модулі
 Comment[km]=កម្មវិធី​ជំនួយ Akregator
 Comment[lt]=Akregator priedas
@@ -58,7 +58,8 @@
 Comment[ta]=Akregator சொருகுப்பொருள்
 Comment[tr]=Akregator Eklentisi
 Comment[uk]=Втулок Akregator
-Comment[uz]=Akregator плагини
+Comment[uz]=Akregator plagini
+Comment[uz@cyrillic]=Akregator плагини
 Comment[zh_CN]=Akregator 插件
 Comment[zh_TW]=Akregator 外掛程式
 Name=Feeds
@@ -84,6 +85,7 @@
 Name[is]=Fréttastraumar
 Name[it]=Fonti
 Name[ja]=フィード
+Name[ka]=კვება
 Name[kk]=Ақпарлар
 Name[km]=មតិព័ត៌មាន
 Name[lt]=Kanalai
@@ -96,7 +98,7 @@
 Name[pt]=Fontes
 Name[pt_BR]=Fontes de Notícias
 Name[ru]=Ленты новостей
-Name[sk]=Kŕmitka
+Name[sk]=Kanály
 Name[sl]=Viri
 Name[sr]=Доводи
 Name[sr@Latn]=Dovodi
@@ -104,6 +106,7 @@
 Name[ta]=உள்ளீடுகள்
 Name[tr]=Haberler
 Name[uk]=Подачі
-Name[uz]=Янгиликлар тасмалари
+Name[uz]=Yangiliklar tasmalari
+Name[uz@cyrillic]=Янгиликлар тасмалари
 Name[zh_CN]=种子
 
Index: kontact/plugins/test/kptestplugin.desktop
===================================================================
--- kontact/plugins/test/kptestplugin.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kontact/plugins/test/kptestplugin.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,5 +1,4 @@
 [Desktop Entry]
-Encoding=UTF-8
 Type=Service
 Icon=konsole
 ServiceTypes=Kontact/Plugin,KPluginInfo
@@ -36,6 +35,7 @@
 Comment[is]=Kontact prufu íforrit
 Comment[it]=Plugin test Kontact
 Comment[ja]=Kontact テストプラグイン
+Comment[ka]=Kontact სატესტო მოდული
 Comment[kk]=Сынақ модулі
 Comment[km]=កម្មវិធី​ជំនួយ​ការ​សាកល្បង​ក្នុង Kontact
 Comment[lt]=Kontact bandymo priedas
@@ -60,7 +60,8 @@
 Comment[tg]=Модули матнии Kontact
 Comment[tr]=Kontact Test Eklentisi
 Comment[uk]=Тестовий втулок Kontact
-Comment[uz]=Kontact учун синаш плагини
+Comment[uz]=Kontact uchun sinash plagini
+Comment[uz@cyrillic]=Kontact учун синаш плагини
 Comment[zh_CN]=Kontact Test 插件
 Comment[zh_TW]=Kontact 測試外掛程式
 Name=TestPlugin
@@ -82,6 +83,7 @@
 Name[is]=Prufu íforrit
 Name[it]=Plugin Test
 Name[ja]=テストプラグイン
+Name[ka]=სატესტო მოდული
 Name[kk]=Сынақ модулі
 Name[km]=កម្មវិធី​ជំនួយ​ការ​សាកល្បង
 Name[mk]=Приклучок за тест
Index: kontact/plugins/weather/weatherplugin.desktop
===================================================================
--- kontact/plugins/weather/weatherplugin.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kontact/plugins/weather/weatherplugin.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,5 +1,4 @@
 [Desktop Entry]
-Encoding=UTF-8
 Type=Service
 Icon=kweather
 ServiceTypes=Kontact/Plugin,KPluginInfo
@@ -22,14 +21,21 @@
 Comment[da]=Vejrkomponent til Kontact
 Comment[de]=Wetter-Komponente für Kontact
 Comment[el]=Συστατικό καιρού του Kontact
+Comment[es]=Extensión de meteorología para Kontact
 Comment[et]=Kontacti ilmaplugin
+Comment[fr]=Composant météo pour Kontact
+Comment[is]=Kontact veðurfréttaeining
 Comment[it]=Componente meteorologico di Kontact
 Comment[ja]=Kontact 気象情報コンポーネント
+Comment[km]=សមាសភាគ​អាកាសធាតុ Kontact
 Comment[nds]=Kontact-Wederkomponent
 Comment[nl]=Kontact Weercomponent
+Comment[pl]=Składnik Kontaktu wiadomości o pogodzie
+Comment[ru]=Компонент информации о погоде для Kontact
 Comment[sr]=Компонента времена за Kontact
 Comment[sr@Latn]=Komponenta vremena za Kontact
 Comment[sv]=Kontacts väderkomponent
+Comment[tr]=Kontact Hava Durumu Bileşeni
 Comment[zh_CN]=Kontact 天气插件
 Comment[zh_TW]=Kontact 天氣組件
 Name=Weather Service
@@ -58,6 +64,7 @@
 Name[is]=Veðurþjónusta
 Name[it]=Servizio meteorologico
 Name[ja]=気象サービス
+Name[ka]=ამინდის მომსახურება
 Name[kk]=Ауа райы қызметі
 Name[km]=សេវា​អាកាសធាតុ
 Name[lt]=Orų tarnyba
@@ -79,6 +86,7 @@
 Name[th]=รายงานอากาศ
 Name[tr]=Hava Durumu Servisi
 Name[uk]=Служба погоди
-Name[uz]=Об-ҳаво хизмати
+Name[uz]=Ob-havo xizmati
+Name[uz@cyrillic]=Об-ҳаво хизмати
 Name[zh_CN]=天气服务
 Name[zh_TW]=天氣服務
Index: kontact/plugins/knode/knodeplugin.desktop
===================================================================
--- kontact/plugins/knode/knodeplugin.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kontact/plugins/knode/knodeplugin.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,5 +1,4 @@
 [Desktop Entry]
-Encoding=UTF-8
 Type=Service
 Icon=kontact_news
 ServiceTypes=Kontact/Plugin,KPluginInfo
@@ -20,14 +19,21 @@
 Comment[da]=Nyhedskomponent (KNode-plugin)
 Comment[de]=News-Komponente (KNode-Modul)
 Comment[el]=Συστατικό ανάγνωσης νέων (Πρόσθετο του KNode)
+Comment[es]=Componente de noticias (complemento de KNode)
 Comment[et]=Uudistelugeja plugin (KNode)
+Comment[fr]=Composant de lecteur de nouvelles (Module pour KNode)
+Comment[is]=Fréttaeining (KNode íforrit)
 Comment[it]=Componente lettore di news (plugin KNode)
 Comment[ja]=ニュースリーダーコンポーネント (KNode プラグイン)
+Comment[km]=សមាសភាគ Newsreader (កម្មវិធី​ជំនួយ KNode)
 Comment[nds]=Narichtenkieker-Komponent (KNode-Moduul)
 Comment[nl]=Nieuwscomponent (KNode-plugin)
+Comment[pl]=Składnik wiadomości (wtyczka KNode)
+Comment[ru]=Новости (модуль KNode)
 Comment[sr]=Компонента вести (прикључак KNode-а)
 Comment[sr@Latn]=Komponenta vesti (priključak KNode-a)
 Comment[sv]=Komponent för läsning av diskussionsgrupper (Knode-insticksprogram)
+Comment[tr]=Haber Okuyucu Bileşeni (KNode Eklentisi)
 Comment[zh_CN]=新闻组阅读器组件(KNode 插件)
 Comment[zh_TW]=新聞閱讀器組件（KNode 外掛程式）
 Name=News
@@ -58,6 +64,7 @@
 Name[hu]=Hírek
 Name[is]=Fréttir
 Name[ja]=ニュース
+Name[ka]=სიახლეები
 Name[kk]=Жаңалықтар
 Name[km]=ព័ត៌មាន
 Name[lt]=Naujienos
@@ -85,6 +92,7 @@
 Name[th]=ข่าว
 Name[tr]=Haberler
 Name[uk]=Новини
-Name[uz]=Янгиликлар
+Name[uz]=Yangiliklar
+Name[uz@cyrillic]=Янгиликлар
 Name[zh_CN]=新闻
 Name[zh_TW]=新聞
Index: kontact/plugins/specialdates/kcmsdsummary.desktop
===================================================================
--- kontact/plugins/specialdates/kcmsdsummary.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kontact/plugins/specialdates/kcmsdsummary.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,5 +1,4 @@
 [Desktop Entry]
-Encoding=UTF-8
 Icon=cookie
 Type=Service
 ServiceTypes=KCModule
@@ -17,14 +16,21 @@
 Name[da]=Oversigt over særlige datoer
 Name[de]=Übersicht über besondere Termine
 Name[el]=Επισκόπηση σημαντικών ημερομηνιών
+Name[es]=Resumen de fechas especiales
 Name[et]=Tähtpäevade ülevaade
+Name[fr]=Aperçu des dates importantes
+Name[is]=Yfirlit sérstakra daga
 Name[it]=Panoramica delle date speciali
 Name[ja]=特別な日の要約
+Name[km]=ទិដ្ឋភាព​កាលបរិច្ឆេទ​ពិសេស
 Name[nds]=Översicht besünner Daten
 Name[nl]=Overzicht van speciale data
+Name[pl]=Daty specjalne
+Name[ru]=Сводка особых дат
 Name[sr]=Преглед посебних датума
 Name[sr@Latn]=Pregled posebnih datuma
 Name[sv]=Översikt av speciella datum
+Name[tr]=Özel Tarihlere Genel Bakış
 Name[zh_CN]=特殊日期概览
 Name[zh_TW]=特殊日期概觀
 Comment=Special Dates Summary Setup
@@ -48,6 +54,7 @@
 Comment[is]=Yfirlitsuppsetning sérstakra daga
 Comment[it]=Impostazioni per le date speciali
 Comment[ja]=特別な日の要約設定
+Comment[ka]=განსაკუთრებულ თარიღთა დაიჯესტის კონფიგურაცია
 Comment[kk]=Ерекше күндер тұжырымының баптауы
 Comment[km]=រៀបចំ​សេចក្ដី​សង្ខេប​ថ្ងៃ​ពិសេស
 Comment[lt]=Ypatingų datų santraukos sąranka
@@ -94,6 +101,7 @@
 Keywords[is]=afmæli, frídagar, stillingar, stilla
 Keywords[it]=compleanno, anniversario, vacanze, configura, impostazioni
 Keywords[ja]=誕生日,記念日,休日,設定,設定
+Keywords[ka]=დაბადების დღე,სახელობის დღე,დასვენების დღე,კონფიგურაცია,პარამეტრები
 Keywords[km]=ថ្ងៃ​ខួប​កំណើត,បុណ្យ​ខួប,វិស្សមកាល,កំណត់​រចនាសម្ព័ន្ធ,ការ​កំណត់
 Keywords[lt]=birthday, anniversary, holiday, configure, settings, konfigūruoti, nustatymai, gimtadieniai, išeiginės,sukaktys
 Keywords[mk]=birthday, anniversary, holiday, configure, settings, роденден, годишнина, конфигурирање, конфигурација, поставувања
Index: kontact/plugins/specialdates/specialdatesplugin.desktop
===================================================================
--- kontact/plugins/specialdates/specialdatesplugin.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kontact/plugins/specialdates/specialdatesplugin.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,5 +1,4 @@
 [Desktop Entry]
-Encoding=UTF-8
 Type=Service
 Icon=cookie
 ServiceTypes=Kontact/Plugin,KPluginInfo
@@ -30,7 +29,7 @@
 Name[eu]=Data bereziak
 Name[fa]=تاریخهای ویژه
 Name[fi]=Erikoispäivät
-Name[fr]=Dates particulières
+Name[fr]=Dates importantes
 Name[fy]=Spesjale datums
 Name[ga]=Dátaí Speisialta
 Name[gl]=Datas Especiais
@@ -39,6 +38,7 @@
 Name[is]=Sérstakir dagar
 Name[it]=Date speciali
 Name[ja]=特別な日
+Name[ka]=განსაკუტრებული თარიღები
 Name[kk]=Ерекше күндер
 Name[km]=ថ្ងៃ​ពិសេស
 Name[lt]=Ypatingos datos
@@ -62,7 +62,8 @@
 Name[th]=วันพิเศษ
 Name[tr]=Özel Tarihler
 Name[uk]=Особливі дати
-Name[uz]=Махсус кунлар
+Name[uz]=Maxsus kunlar
+Name[uz@cyrillic]=Махсус кунлар
 Name[zh_CN]=特殊日期
 Name[zh_TW]=特殊日期
 Comment=Special Dates Component
@@ -71,13 +72,20 @@
 Comment[da]=Komponent til særlige datoer
 Comment[de]=Komponente für Übersicht über besondere Termine
 Comment[el]=Συστατικό σημαντικών ημερομηνιών
+Comment[es]=Componente de fechas especiales
 Comment[et]=Tähtpäevade plugin
+Comment[fr]=Composant des dates importantes
+Comment[is]=Eining fyrir sérstaka daga
 Comment[it]=Componente per le date speciali
 Comment[ja]=特別な日コンポーネント
+Comment[km]=សមាសភាគ​កាលបរិច្ឆេទ​ពិសេស
 Comment[nds]=Komponent för besünner Daten
 Comment[nl]=Component voor overzicht van speciale data
+Comment[pl]=Składnik dat specjalnych
+Comment[ru]=Особые даты
 Comment[sr]=Компонента посебних датума
 Comment[sr@Latn]=Komponenta posebnih datuma
 Comment[sv]=Speciella datumkomponent
+Comment[tr]=Özel Tarihler Bileşeni
 Comment[zh_CN]=特殊日期组件
 Comment[zh_TW]=特殊日期組件
Index: kontact/plugins/kitchensync/kitchensync.desktop
===================================================================
--- kontact/plugins/kitchensync/kitchensync.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kontact/plugins/kitchensync/kitchensync.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,5 +1,4 @@
 [Desktop Entry]
-Encoding=UTF-8
 Type=Service
 Icon=kitchensync
 ServiceTypes=Kontact/Plugin,KPluginInfo
@@ -19,14 +18,22 @@
 Comment[da]=Synkronisergingskomponent (Kitchensync-plugin)
 Comment[de]=Abgleich-Komponente (KitchenSync-Modul)
 Comment[el]=Συστατικό συγχρονισμού (Πρόσθετο του Kitchensynk)
+Comment[es]=Componente de sincronización (complemento de KitchenSync)
 Comment[et]=Sünkroniseerimise plugin (KitchenSync)
+Comment[fr]=Composant de synchronisation (Module KitchenSync)
+Comment[is]=Samstillingareining (KitchenSync íforrit)
 Comment[it]=Componente di sincronizzazione (plugin KitchenSync)
 Comment[ja]=同期コンポーネント (KitchenSync プラグイン)
+Comment[km]=ការ​ធ្វើ​សមកាលកម្ម​សមាសភាគ (កម្មវិធី​ជំនួយ Kitchensynk​)
 Comment[nds]=Synkroniseer-Komponent (Kitchensynk-Moduul)
 Comment[nl]=Synchronisatiecomponent (Kitchensynk-plugin)
+Comment[pl]=Składnik synchronizacji (wtyczka KitchenSync)
+Comment[ru]=Синхронизация (модуль KitchenSync)
+Comment[sk]=Synchronizačný komponent (Modul pre Kitchensynk)
 Comment[sr]=Компонента синхронизације (прикључак KitchenSync-а)
 Comment[sr@Latn]=Komponenta sinhronizacije (priključak KitchenSync-a)
 Comment[sv]=Synkroniseringskomponent (Kitchensynk-insticksprogram)
+Comment[tr]=Eşzamanlama Eklentisi (Kitchensynk Eklentisi)
 Comment[zh_CN]=同步组件(KitchenSync 插件)
 Comment[zh_TW]=同步組件（KitchenSynk 外掛程式）
 Name=Sync
@@ -34,7 +41,11 @@
 Name[de]=Abgleich
 Name[el]=Συγχρονισμός
 Name[et]=Sünkroniseerimine
+Name[fr]=Synchroniser
+Name[is]=Samstilling
 Name[ja]=同期
 Name[nds]=Synkroniseren
+Name[pl]=Synchronizacja
+Name[ru]=Синхронизация
 Name[sv]=Synkronisering
 Name[zh_TW]=同步
Index: kontact/plugins/kpilot/kpilotplugin.desktop
===================================================================
--- kontact/plugins/kpilot/kpilotplugin.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kontact/plugins/kpilot/kpilotplugin.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,5 +1,4 @@
 [Desktop Entry]
-Encoding=UTF-8
 Type=Service
 Icon=kpilot
 ServiceTypes=Kontact/Plugin,KPluginInfo
@@ -22,14 +21,21 @@
 Comment[da]=Komponent til palm-værktøjer (KPilot-plugin)
 Comment[de]=Palm-Komponente (KPilot-Modul)
 Comment[el]=Συστατικό εργαλείων Palm (Πρόσθετο του KPilot)
+Comment[es]=Componente de herramientas de Palm (complemento KPilot)
 Comment[et]=Palmi tööriistade plugin (KPilot)
+Comment[fr]=Composant d'outils pour Palms (Module KPilot)
+Comment[is]=Palm verkfæraeining (KPilot íforrit)
 Comment[it]=Componente strumenti Palm (plugin KPilot)
 Comment[ja]=Palm ツールコンポーネント (KPilot プラグイン)
+Comment[km]=សមាសភាគ​ឧបករណ៍ Palm (កម្មវិធី​ជំនួយ KPilot​)
 Comment[nds]=Palmreekner-Warktüüchkomponent (KPilot-Moduul)
 Comment[nl]=Component met hulpmiddelen voor PalmOS(tm)-apparaten (KPilot-plugin)
+Comment[pl]=Składnik narzędzi Palma (wtyczka KPilot)
+Comment[ru]=Синхронизация с Palm (модуль KPilot)
 Comment[sr]=Компонента алата за Palm (прикључак KPilot-а)
 Comment[sr@Latn]=Komponenta alata za Palm (priključak KPilot-a)
 Comment[sv]=Palm Pilot-verktygskomponent (Kpilot-insticksprogram)
+Comment[tr]=Palm Araçları Bileşeni (KPilot Eklentisi)
 Comment[zh_CN]=Palm 工具组件(KPilot 插件)
 Comment[zh_TW]=Palm 工具組件（KPilot 外掛程式）
 Name=Palm
Index: kontact/plugins/knotes/knotesplugin.desktop
===================================================================
--- kontact/plugins/knotes/knotesplugin.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kontact/plugins/knotes/knotesplugin.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,5 +1,4 @@
 [Desktop Entry]
-Encoding=UTF-8
 Type=Service
 Icon=kontact_notes
 ServiceTypes=Kontact/Plugin,KPluginInfo
@@ -20,14 +19,21 @@
 Comment[da]=Notatkomponent (KNotes-plugin)
 Comment[de]=Notizen-Komponente (KNotes-Modul)
 Comment[el]=Συσταικό σημειώσεων (Πρόσθετο του KNotes)
+Comment[es]=Componente de notas (complemento de KNotes)
 Comment[et]=Märkmete plugin (KNotes)
+Comment[fr]=Composant de notes (Module KNotes)
+Comment[is]=Minnismiðaeining (KNotes íforrit)
 Comment[it]=Componente note (plugin KNotes)
 Comment[ja]=メモコンポーネント (KNotes プラグイン)
+Comment[km]=សមាសភាគ​ចំណាំ (កម្មវិធី​ជំនួយ KNotes​)
 Comment[nds]=Notizen-Komponent (KNotes-Moduul)
 Comment[nl]=Notitiecomponent (KNotes-plugin)
+Comment[pl]=Składnik notatek (wtyczka KNotes)
+Comment[ru]=Заметки (модуль KNotes)
 Comment[sr]=Компонента белешки (прикључак KNotes-а)
 Comment[sr@Latn]=Komponenta beleški (priključak KNotes-a)
 Comment[sv]=Anteckningskomponent (Knotes-insticksprogram)
+Comment[tr]=Notlar Bileşeni (KNotes Eklentisi)
 Comment[zh_CN]=便笺组件(KNotes 插件)
 Comment[zh_TW]=便條組件（KNotes 外掛程式）
 Name=Notes
@@ -57,6 +63,7 @@
 Name[is]=Minnismiðar
 Name[it]=Note
 Name[ja]=メモ
+Name[ka]=ჩანიშვნები
 Name[kk]=Жазбалар
 Name[km]=ចំណាំ
 Name[lt]=Užrašai
@@ -82,6 +89,7 @@
 Name[th]=บันทึกช่วยจำ
 Name[tr]=Notlar
 Name[uk]=Примітки
-Name[uz]=Ёзма хотира
+Name[uz]=Yozma xotira
+Name[uz@cyrillic]=Ёзма хотира
 Name[zh_CN]=便笺
 Name[zh_TW]=備忘錄
Index: kontact/plugins/karm/karmplugin.desktop
===================================================================
--- kontact/plugins/karm/karmplugin.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kontact/plugins/karm/karmplugin.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,5 +1,4 @@
 [Desktop Entry]
-Encoding=UTF-8
 Type=Service
 Icon=karm
 ServiceTypes=Kontact/Plugin,KPluginInfo
@@ -19,14 +18,21 @@
 Comment[da]=Time Tracker-komponent (KArm-plugin)
 Comment[de]=Zeitplaner-Komponente (KArm-Modul)
 Comment[el]=Συστατικό γραμμής χρόνου (Πρόσθετο του KArm)
+Comment[es]=Componente de seguimiento de tiempos (complemento de KArm)
 Comment[et]=Ajaarvestaja plugin (KArm)
+Comment[fr]=Composant de suivi temporel (Module pour KArm)
+Comment[is]=Tímastjórnunareining (KArm íforrit)
 Comment[it]=Componente segna-tempo (plugin Karm)
 Comment[ja]=タイムトラッカーコンポーネント (KArm プラグイン)
+Comment[km]=សមាសភាគ​កម្មវិធី​តាមដាន​ពេលវេលា (កម្មវិធី​ជំនួយ KArm​)
 Comment[nds]=Tietlogbook-Komponent (KArm-Moduul)
 Comment[nl]=Tijdsregistratiecomponent (KArm-plugin)
+Comment[pl]=Składnik śledzenia czasu (wtyczka KArm)
+Comment[ru]=Отслеживание времени (модуль KArm)
 Comment[sr]=Компонента праћења времена (прикључак KArm-а)
 Comment[sr@Latn]=Komponenta praćenja vremena (priključak KArm-a)
 Comment[sv]=Komponent för tidmätning (Karm-insticksprogram)
+Comment[tr]=Zaman İzleyici Bileşeni (KArm Eklentisi)
 Comment[zh_CN]=时间追踪组件(KArm 插件)
 Comment[zh_TW]=時間追蹤器組件（KArm 外掛程式）
 
@@ -35,10 +41,17 @@
 Name[ca]=Cronòmetre
 Name[de]=Stoppuhr
 Name[el]=Χρονόμετρο
+Name[es]=Temporizador
 Name[et]=Ajaarvestaja
+Name[fr]=Minuteur
+Name[is]=Tímamælir
 Name[ja]=タイマー
+Name[km]=កម្មវិធី​កំណត់​ពេលវេលា
 Name[nds]=Tietgever
 Name[nl]=Tijdklok
+Name[pl]=Stoper
+Name[ru]=Таймер
+Name[sk]=Časovač
 Name[sr]=Тајмер
 Name[sr@Latn]=Tajmer
 Name[sv]=Tidmätning
Index: kontact/plugins/kaddressbook/kaddressbookplugin.desktop
===================================================================
--- kontact/plugins/kaddressbook/kaddressbookplugin.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kontact/plugins/kaddressbook/kaddressbookplugin.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,5 +1,4 @@
 [Desktop Entry]
-Encoding=UTF-8
 Type=Service
 Icon=kontact_contacts
 ServiceTypes=Kontact/Plugin,KPluginInfo
@@ -22,14 +21,21 @@
 Comment[da]=Kontaktkomponent (KAddressbook-plugin)
 Comment[de]=Kontakte-Komponente (Adressbuch-Modul)
 Comment[el]=Συστατικό επαφών (Πρόσθετο του KAdressbook)
+Comment[es]=Componente de contactos (complemento de KAddressbook)
 Comment[et]=Kontaktide plugin (KDE aadressiraamat)
+Comment[fr]=Composant des contacts (module externe KAdressBook)
+Comment[is]=Vistfangaskráreining (KAddressBook íforrit)
 Comment[it]=Componente contatti (plugin KAddressbook)
 Comment[ja]=アドレス帳コンポーネント (KAddressbook プラグイン)
+Comment[km]=សមាសភាគ​ទំនាក់ទំន​ង (កម្មវិធី​ជំនួយ KAdressbook​)
 Comment[nds]=Kontakten-Komponent (KAddressbook-Moduul)
 Comment[nl]=Adresboekcomponent (KAddressbook-plugin)
+Comment[pl]=Składnik wizytówek (wtyczka KAddressBook)
+Comment[ru]=Контакты (модуль KAddressBook)
 Comment[sr]=Компонента контаката (прикључак KAddressBook-а)
 Comment[sr@Latn]=Komponenta kontakata (priključak KAddressBook-a)
 Comment[sv]=Kontaktkomponent (adressboksinsticksprogram)
+Comment[tr]=Kişiler Bileşeni (KAdresDefteri Eklentisi)
 Comment[zh_CN]=联系人组件(KAddressbook 插件)
 Comment[zh_TW]=聯絡人組件（KAddressBook 外掛程式）
 Name=Contacts
@@ -60,6 +66,7 @@
 Name[is]=Tengiliðir
 Name[it]=Contatti
 Name[ja]=コンタクト
+Name[ka]=კონტაქტები
 Name[kk]=Контакттар
 Name[km]=ទំនាក់ទំនង
 Name[lt]=Kontaktai
@@ -85,8 +92,9 @@
 Name[ta]=தொடர்புகள்
 Name[tg]=Алоқот
 Name[th]=ที่อยู่ติดต่อ
-Name[tr]=Bağlantılar
+Name[tr]=Kişiler
 Name[uk]=Контакти
-Name[uz]=Алоқалар
+Name[uz]=Aloqalar
+Name[uz@cyrillic]=Алоқалар
 Name[zh_CN]=联系人
 Name[zh_TW]=聯絡人
Index: kontact/plugins/korganizer/kcmkorgsummary.desktop
===================================================================
--- kontact/plugins/korganizer/kcmkorgsummary.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kontact/plugins/korganizer/kcmkorgsummary.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,5 +1,4 @@
 [Desktop Entry]
-Encoding=UTF-8
 Icon=kontact_date
 Type=Service
 ServiceTypes=KCModule
@@ -17,14 +16,21 @@
 Name[da]=Oversigt over møder og gøremål
 Name[de]=Übersicht über Termine und Aufgaben
 Name[el]=Επισκόπηση ραντεβού και προς υλοποίηση εργασιών
+Name[es]=Resumen de citas y tareas pendientes
 Name[et]=Kohtumised ja ülesannete ülevaade
+Name[fr]=Aperçu des rendez-vous et des tâches
+Name[is]=Yfirlit um fundi og verkþætti
 Name[it]=Panoramica appuntamenti e cose da fare
 Name[ja]=約束と To-Do の要約
+Name[km]=ទិដ្ឋភាព​ការ​ណាត់ និង​ការងារ​ត្រូវ​ធ្វើ
 Name[nds]=Termin- un Opgaven-Översicht
 Name[nl]=Overzicht van evenementen en taken
+Name[pl]=Spotkania i zadania
+Name[ru]=Сводка встреч и задач
 Name[sr]=Преглед састанака и обавеза
 Name[sr@Latn]=Pregled sastanaka i obaveza
 Name[sv]=Översikt av möten och uppgifter
+Name[tr]=Randevulara ve Yapılacaklara Genel Bakış
 Name[zh_CN]=约会和待办概览
 Name[zh_TW]=約會與待辦事項概觀
 Comment=Appointments and To-dos Summary Setup
@@ -44,9 +50,10 @@
 Comment[fy]=Oersichtsynstellings foar eveneminten en taken
 Comment[gl]=Configuración de sumarios de tarefas e notas
 Comment[hu]=A találkozók és feladatok áttekintőjének beállítása
-Comment[is]=Uppsetning á yfirliti yfir fundi og verkþætti
+Comment[is]=Uppsetning á yfirliti yfir fundi og verkefni
 Comment[it]=Impostazioni sommario appuntamenti e cose da fare
 Comment[ja]=約束と To-Do の要約設定
+Comment[ka]=შეხვედრათა და გასაკეთებელთა რეზიუმეს დაყენება
 Comment[kk]=Кездесулер мен Жоспарлар тұжырымының баптау
 Comment[km]=រៀបចំ​សេចក្ដី​សង្ខេប​ការ​ណាត់ និង​ការងារ​ត្រូវ​ធ្វើ
 Comment[lt]=Susitikimų ir užduočių santraukos nustatymai
@@ -59,7 +66,7 @@
 Comment[pl]=Ustawienia podsumowania spotkań i zadań
 Comment[pt]=Configuração do Sumário de Compromissos e A-fazeres
 Comment[pt_BR]=Configuração do Resumo de Compromissos e Tarefas
-Comment[ru]=Настройка показа встреч и задач
+Comment[ru]=Настройка сводки встреч и задач
 Comment[sk]=Nastavenie súhrnu pripomienok a úloh
 Comment[sl]=Nastavitve povzetka sestankov in opravil
 Comment[sr]=Подешавање сажетка састанака и обавеза
@@ -90,9 +97,10 @@
 Keywords[gl]=calendario, pendentes, configurar, opcións
 Keywords[he]=calendar, todos, configure, settings, יומן, יומנים, משימות, מטלות, הגדרות, תצורה
 Keywords[hu]=naptár,feladatok,konfigurálás,beállítások
-Keywords[is]=dagatal, verkþættir, stillingar, stilla
+Keywords[is]=dagatal, verkefni, stillingar, stilla
 Keywords[it]=calendario, cose da fare, configura, impostazioni
 Keywords[ja]=カレンダー, To-Do, 設定
+Keywords[ka]=კალენდარი,გასაკეთებლები,კონფიგურაცია,პარამეტრები
 Keywords[km]=ប្រតិទិន,ការងារ​ត្រូវ​ធ្វើ,កំណត់​រចនាសម្ព័ន្ធ,ការ​កំណត់
 Keywords[lt]=calendar, todos, configure, settings, kalendorius, darbai, konfigūruoti, nustatymai
 Keywords[ms]=kalendar, tugasan, konfigur, seting
Index: kontact/plugins/korganizer/todoplugin.desktop
===================================================================
--- kontact/plugins/korganizer/todoplugin.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kontact/plugins/korganizer/todoplugin.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,5 +1,4 @@
 [Desktop Entry]
-Encoding=UTF-8
 Type=Service
 Icon=kontact_todo
 ServiceTypes=Kontact/Plugin
@@ -22,14 +21,22 @@
 Comment[da]=Komponent til gøremålsliste (KOrganizer-plugin)
 Comment[de]=Aufgabenlisten-Komponente (KOrganizer-Modul)
 Comment[el]=Συστατικό λίστα προς υλοποίηση εργασιών (Πρόσθετο του KOrganizer)
+Comment[es]=Componente de tareas pendientes (complemento de KOrganizer)
 Comment[et]=Ülesannete nimekirja plugin (KOrganizer)
+Comment[fr]=Composant de la liste des tâches (Module KOrganizer)
+Comment[is]=Verkefnaeining (KOrganizer íforrit)
 Comment[it]=Componente elenco delle cose da fare (plugin KOrganizer)
 Comment[ja]=To-Do リストコンポーネント (KOrganizer プラグイン)
+Comment[km]=សមាសភាគ​បញ្ជី​ការងារ​ត្រូវ​ធ្វើ (កម្មវិធី​ជំនួយ KOrganizer​)
 Comment[nds]=Opgavenlist-Komponent (KOrganizer-Moduul)
 Comment[nl]=Takenlijstcomponent (KOrganizer-plugin)
+Comment[pl]=Składnik zadań (wtyczka KOrganizer)
+Comment[ru]=Задачи (модуль KOrganizer)
+Comment[sk]=Komponent zoznamu úloh (Modul pre KOrganizer)
 Comment[sr]=Прикључак листе обавеза (прикључак KOrganizer-а)
 Comment[sr@Latn]=Priključak liste obaveza (priključak KOrganizer-a)
 Comment[sv]=Uppgiftslistkomponent (Korganizer-insticksprogram)
+Comment[tr]=Yapılacak İşler Bileşeni (KOrganizer eklentisi)
 Comment[zh_CN]=待办清单组件(KOrganizer 插件)
 Comment[zh_TW]=待辦事項清單組件（KOrganizer 外掛程式）
 Name=To-do
@@ -38,13 +45,21 @@
 Name[da]=Gøremål
 Name[de]=Aufgaben
 Name[el]=Προς υλοποίηση εργασίες
+Name[es]=Tareas pendientes
 Name[et]=Ülesanded
+Name[fr]=Tâches
+Name[is]=Verkefni
 Name[it]=Cose da fare
 Name[ja]=To-Do
+Name[km]=​ការងារ​ត្រូវ​ធ្វើ
 Name[nds]=Opgaav
 Name[nl]=Takenlijst
+Name[pl]=Lista zadań
+Name[ru]=Задачи
+Name[sk]=Zoznam úloh
 Name[sr]=Обавезе
 Name[sr@Latn]=Obaveze
 Name[sv]=Uppgift
+Name[tr]=Yapılacak Ögeleri
 Name[zh_CN]=待办清单
 Name[zh_TW]=待辦事項
Index: kontact/plugins/korganizer/journalplugin.desktop
===================================================================
--- kontact/plugins/korganizer/journalplugin.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kontact/plugins/korganizer/journalplugin.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,5 +1,4 @@
 [Desktop Entry]
-Encoding=UTF-8
 Type=Service
 Icon=kontact_journal
 ServiceTypes=Kontact/Plugin
@@ -22,14 +21,21 @@
 Comment[da]=Journalkomponent (KOrganizer-plugin)
 Comment[de]=Journal-Komponente (KOrganizer-Modul)
 Comment[el]=Συστατικό χρονικών (Πρόσθετο του KOrganizer)
+Comment[es]=Componente de diario (Complemento de KOrganizer)
 Comment[et]=Päevikuplugin (KOrganizer)
+Comment[fr]= Composant de journal (Module KOrganizer)
+Comment[is]=Dagbókareining (Journal KOrganizer íforrit)
 Comment[it]=Componente diario (plugin KOrganizer)
 Comment[ja]=ジャーナルコンポーネント (KOrganizer プラグイン)
+Comment[km]=សមាភាគទិនានុប្បវត្តិ (កម្មវិធី​ជំនួយ KOrganizer​)
 Comment[nds]=Daagböker-Komponent (KOrganizer-Moduul)
 Comment[nl]=Journaalcomponent (KOrganizer-plugin)
+Comment[pl]=Składnik dziennika (wtyczka Korganizer)
+Comment[ru]=Журнал (модуль KOrganizer)
 Comment[sr]=Компонента дневника (прикључак KOrganizer-а)
 Comment[sr@Latn]=Komponenta dnevnika (priključak KOrganizer-a)
 Comment[sv]=Journalkomponent (Korganizer-insticksprogram)
+Comment[tr]=Günlük Bileşeni (KOrganizer Eklentisi)
 Comment[zh_CN]=日记组件(KOrganizer 插件)
 Comment[zh_TW]=日誌組件（KOrganizer 外掛程式）
 Name=Journal
@@ -55,6 +61,7 @@
 Name[is]=Dagbók
 Name[it]=Diario
 Name[ja]=ジャーナル
+Name[ka]=ჟურნალი
 Name[kk]=Күнделік
 Name[km]=ទិនានុប្បវត្តិ
 Name[lt]=Dienynas
@@ -76,6 +83,7 @@
 Name[th]=วารสาร
 Name[tr]=Günlük
 Name[uk]=Журнал
-Name[uz]=Кундалик
+Name[uz]=Kundalik
+Name[uz@cyrillic]=Кундалик
 Name[zh_CN]=日记
 Name[zh_TW]=日誌
Index: kontact/plugins/korganizer/korganizerplugin.desktop
===================================================================
--- kontact/plugins/korganizer/korganizerplugin.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kontact/plugins/korganizer/korganizerplugin.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,5 +1,4 @@
 [Desktop Entry]
-Encoding=UTF-8
 Type=Service
 Icon=kontact_date
 ServiceTypes=Kontact/Plugin,KPluginInfo
@@ -22,14 +21,22 @@
 Comment[da]=Kalenderkomponent (KOrganizer-plugin)
 Comment[de]=Kalender-Komponente (KOrganizer-Modul)
 Comment[el]=Συστατικό ημερολογίου (Πρόσθετο του KOrganizer)
+Comment[es]=Componente de calendario (complemento de KOrganizer)
 Comment[et]=Kalendriplugin (KOrganizer)
+Comment[fr]= Composant de calendrier (Module KOrganizer)
+Comment[is]=Dagatalseining (KOrganizer íforrit)
 Comment[it]=Componente calendario (plugin KOrganizer)
 Comment[ja]=カレンダーコンポーネント (KOrganizer プラグイン)
+Comment[km]=សមាសភាគ​ប្រតិទិន (កម្មវិធីជំនួយ​ KOrganizer​)
 Comment[nds]=Kalenner-Komponent (KOrganizer-Moduul)
 Comment[nl]=Agendacomponent (KOrganizer-plugin)
+Comment[pl]=Składnik kalendarza (wtyczka KOrganizer)
+Comment[ru]=Календарь (модуль KOrganizer)
+Comment[sk]=Kalendárový komponent (Modeul pre KOrganizer)
 Comment[sr]=Компонента календара (прикључак KOrganizer-а)
 Comment[sr@Latn]=Komponenta kalendara (priključak KOrganizer-a)
 Comment[sv]=Kalenderkomponent (Korganizer-insticksprogram)
+Comment[tr]=Takvim Bileşeni (KOrganizer Eklentisi)
 Comment[zh_CN]=日历组件(KOrganizer 插件)
 Comment[zh_TW]=行事曆組件（KOrganizer 外掛程式）
 Name=Calendar
@@ -61,6 +68,7 @@
 Name[is]=Dagatal
 Name[it]=Calendario
 Name[ja]=カレンダー
+Name[ka]=კალენდარი
 Name[kk]=Күнтізбе
 Name[km]=ប្រតិទិន
 Name[lt]=Kalendorius
@@ -87,6 +95,7 @@
 Name[th]=บันทึกประจำวัน
 Name[tr]=Takvim
 Name[uk]=Календар
-Name[uz]=Календар
+Name[uz]=Kalendar
+Name[uz@cyrillic]=Календар
 Name[zh_CN]=日历
 Name[zh_TW]=行事曆
Index: kontact/plugins/kmail/kmailplugin.desktop
===================================================================
--- kontact/plugins/kmail/kmailplugin.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kontact/plugins/kmail/kmailplugin.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,5 +1,4 @@
 [Desktop Entry]
-Encoding=UTF-8
 Type=Service
 Icon=kontact_mail
 ServiceTypes=Kontact/Plugin,KPluginInfo
@@ -23,14 +22,22 @@
 Comment[da]=Post-komponent (KMail-plugin)
 Comment[de]=E-Mail-Komponente (KMail-Modul)
 Comment[el]=Συστατικό αλληλογραφίας (Πρόσθετο του KMail)
+Comment[es]=Componente de correo electrónico (complemento de KMail)
 Comment[et]=E-posti plugin (KMail)
+Comment[fr]=Composant de courriel (Module pour KMail)
+Comment[is]=Pósteining (KMail íforrit)
 Comment[it]=Componente posta elettronica (plugin KMail)
 Comment[ja]=メールコンポーネント (KMail プラグイン)
+Comment[km]=សមាសភាគ​អ៊ីមែល (កម្មវិធី​ជំនួយ KMail)
 Comment[nds]=Nettpost-Komponent (KMail-Moduul)
 Comment[nl]=E-mailcomponent (KMail-plugin)
+Comment[pl]=Składnik poczty (wtyczka KMail)
+Comment[ru]=Электронная почта (модуль KMail)
+Comment[sk]=Poštový komponent (Model pre KMail)
 Comment[sr]=Компонента е-поште (прикључак KMail-а)
 Comment[sr@Latn]=Komponenta e-pošte (priključak KMail-a)
 Comment[sv]=E-postkomponent (Kmail-insticksprogram)
+Comment[tr]=E-Posta Bileşeni (KMail Eklentisi)
 Comment[zh_CN]=邮件组件(KMail 插件)
 Comment[zh_TW]=電子郵件組件（KMail 外掛程式）
 Name=E-Mail
@@ -38,13 +45,21 @@
 Name[ca]=Correu
 Name[da]=E-mail
 Name[el]=Αλληλογραφία
+Name[es]=Correo electrónico
 Name[et]=E-post
+Name[fr]=Courriel
+Name[is]=Tölvupóstur
 Name[it]=Posta elettronica
 Name[ja]=メール
+Name[km]=អ៊ីមែល
 Name[nds]=Nettpost
 Name[nl]=E-mail
+Name[pl]=E-mail
+Name[ru]=Электронная почта
+Name[sk]=Pošta
 Name[sr]=Е-пошта
 Name[sr@Latn]=E-pošta
 Name[sv]=E-post
+Name[tr]=E-Posta
 Name[zh_CN]=邮件
 Name[zh_TW]=電子郵件
Index: kontact/plugins/kmail/kcmkmailsummary.desktop
===================================================================
--- kontact/plugins/kmail/kcmkmailsummary.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kontact/plugins/kmail/kcmkmailsummary.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,5 +1,4 @@
 [Desktop Entry]
-Encoding=UTF-8
 Icon=kontact_mail
 Type=Service
 ServiceTypes=KCModule
@@ -17,14 +16,22 @@
 Name[da]=Oversigt over e-mail
 Name[de]=E-Mail-Übersicht
 Name[el]=Επισκόπηση αλληλογραφίας
+Name[es]=Resumen de correo electrónico
 Name[et]=E-posti ülevaade
+Name[fr]=Aperçu du courriel
+Name[is]=Yfirsýn á tölvupóst
 Name[it]=Panoramica posta elettronica
 Name[ja]=メールの要約
+Name[km]=ទិដ្ឋភាព​ទូទៅ​របស់​អ៊ីមែល
 Name[nds]=Nettpost-Översicht
 Name[nl]=E-mailoverzicht
+Name[pl]=Poczta
+Name[ru]=Сведения о почте
+Name[sk]=Prehľad pošty
 Name[sr]=Преглед е-поште
 Name[sr@Latn]=Pregled e-pošte
 Name[sv]=E-postöversikt
+Name[tr]=E-Postalara Genel Bakış
 Name[zh_CN]=邮件概览
 Name[zh_TW]=郵件概要
 Comment=E-Mail Summary Setup
@@ -33,14 +40,22 @@
 Comment[da]=Opsætning af post-opsummering
 Comment[de]=Einstellungen für E-Mail-Übersicht
 Comment[el]=Ρύθμιση σύνοψης αλληλογραφίας
+Comment[es]=Configuración del resumen de correo electrónico
 Comment[et]=E-posti kokkuvõtte seadistus
+Comment[fr]=Configuration du résumé des courriels
+Comment[is]=Uppsetning póstyfirlits
 Comment[it]=Impostazioni sommario posta elettronica
 Comment[ja]=メール要約の設定
+Comment[km]=រៀបចំ​សេចក្ដី​សង្ខេប​អ៊ីមែល
 Comment[nds]=Instellen för Nettpost-Översicht
 Comment[nl]=Instellingen voor e-mailoverzicht
+Comment[pl]=Ustawienia podsumowania e-maili
+Comment[ru]=Настройка сводки почты
+Comment[sk]=Nastavenie súhrnu pošty
 Comment[sr]=Подешавање сажетка е-поште
 Comment[sr@Latn]=Podešavanje sažetka e-pošte
 Comment[sv]=Inställning av e-postöversikt
+Comment[tr]=E-Posta Özet Yapılandırması
 Comment[zh_CN]=邮件摘要设置
 Comment[zh_TW]=郵件摘要設定
 Keywords=email, summary, configure, settings
@@ -57,7 +72,7 @@
 Keywords[eu]=eposta, laburpena, konfiguratu, ezarpenak
 Keywords[fa]=email، خلاصه، پیکربندی، تنظیمات
 Keywords[fi]=sähköposti, yhteenveto, asetukset
-Keywords[fr]=message,messagerie,courrier,résumé,vue,configurer,paramètres,paramètre
+Keywords[fr]=message,messagerie,courriel,résumé,vue,configurer,paramètres,paramètre
 Keywords[fy]=email,e-mail,e-post,oersicht,gearfetting,ynstellings, konfiguraasje
 Keywords[ga]=ríomhphost, achoimre, cumraigh, socruithe
 Keywords[gl]=email, resumo, configurar, opcións
@@ -66,6 +81,7 @@
 Keywords[is]=tölvupóstur, yfirlit, stillingar, stilla
 Keywords[it]=posta elettronica, email, sommario, configura, impostazioni
 Keywords[ja]=メール,要約,設定,設定
+Keywords[ka]=ელფოსტა,დაიჯესტი,კონფიგურაცია,პარამეტრები
 Keywords[km]=អ៊ីមែល,សង្ខេប,កំណត់​រចនាសម្ព័ន្ធ,ការ​កំណត់
 Keywords[lt]=email, summary, configure, settings, e. paštas, santrauka, konfigūruoti, nustatymai
 Keywords[mk]=email, summary, configure, settings, е-пошта, преглед, конфигурација, поставувања
@@ -75,10 +91,10 @@
 Keywords[ne]=इमेल, सारांश, कन्फिगर, सेटिङ
 Keywords[nl]=email,e-mail,overzicht,samenvatting,instellingen,configuratie
 Keywords[nn]=e-post,samandrag,oppsett,innstillingar
-Keywords[pl]=email,list,podsumowanie,konfiguracja,ustawienia
+Keywords[pl]=e-mail,list,podsumowanie,konfiguracja,ustawienia
 Keywords[pt]=e-mail, sumário, configurar, configuração
 Keywords[pt_BR]=e-mail, resumo, configurar, configurações
-Keywords[ru]=email,summary,configure,settings,настройки,дайджест,почта
+Keywords[ru]=email,summary,configure,settings,настройки,сводка,почта
 Keywords[sk]=email,súhrn,nastavenie
 Keywords[sl]=e-pošta,pošta,povzetek,nastavi,nastavitve
 Keywords[sr]=емаил, сажетак, подеси, поставке
Index: kontact/plugins/summary/kcmkontactsummary.desktop
===================================================================
--- kontact/plugins/summary/kcmkontactsummary.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kontact/plugins/summary/kcmkontactsummary.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,5 +1,4 @@
 [Desktop Entry]
-Encoding=UTF-8
 Icon=kontact_summary
 Type=Service
 ServiceTypes=KCModule
@@ -14,17 +13,23 @@
 Name=Summary View Items
 Name[bg]=Обобщение
 Name[ca]=Vista resum d'elements
+Name[da]=Elementer i opsummeringsvisning
 Name[de]=Elemente der Zusammenfassungsansicht
 Name[el]=Αντικείμενα προβολής σύνοψης
+Name[es]=Elementos de la vista de sumario
 Name[et]=Kokkuvõttevaate elemendid
 Name[it]=Elementi vista sommario
 Name[ja]=要約ビューの項目
+Name[km]=ធាតុ​ទិដ្ឋភាព​សង្ខេប
 Name[nds]=Översicht-Indrääg
 Name[nl]=Overzichtsweergave-items
+Name[pl]=Elementy widoku podsumowania
 Name[sr]=Ставке приказа сажетка
 Name[sr@Latn]=Stavke prikaza sažetka
 Name[sv]=Objekt i översiktsvy
+Name[tr]=Özet Görünüm Ögeleri
 Name[zh_CN]=摘要视图项目
+Name[zh_TW]=摘要檢視項目
 Comment=General Configuration of Kontact's Summary View
 Comment[af]=Algemene opstelling van Kontact se opsomming aansig
 Comment[bg]=Настройка на обобщението
@@ -46,6 +51,7 @@
 Comment[is]=Almennar stillingar fyrir Kontact yfirlitssýn
 Comment[it]=Configurazione generale della vista sommario di Kontact
 Comment[ja]=Kontact の要約表示の一般的な設定
+Comment[ka]=Kontact დაიჯესტის ხედის ზოგადი პარამეტრები
 Comment[kk]=Тұжырымдаманың жалпы параметрлері
 Comment[km]=ការ​កំណត់​រចនាសម្ព័ន្ធ​ទូទៅ​នៃ​ទិដ្ឋភាព​សង្ខេប​របស់ Kontact
 Comment[lt]=Kontact Santraukos vaizdo bendrasis konfigūravimas
@@ -59,7 +65,7 @@
 Comment[pl]=Ogólna konfiguracja widoku podsumowania w Kontact
 Comment[pt]=Configuração Geral da Vista Sumária do Kontact
 Comment[pt_BR]=Configuração Geral da Visão de Resumo do Kontact
-Comment[ru]=Общие настройки дайджеста Kontact
+Comment[ru]=Настройка сводок Kontact
 Comment[sk]=Všeobecné nastavenie súhrnu Kontact
 Comment[sl]=Splošne nastavitve za prikaz povzetka v Kontract
 Comment[sr]=Опште подешавање Kontact-овог приказа сажетка
Index: kontact/plugins/summary/summaryplugin.desktop
===================================================================
--- kontact/plugins/summary/summaryplugin.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kontact/plugins/summary/summaryplugin.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,5 +1,4 @@
 [Desktop Entry]
-Encoding=UTF-8
 Type=Service
 Icon=kontact_summary
 ServiceTypes=Kontact/Plugin,KPluginInfo
@@ -18,14 +17,21 @@
 Comment[da]=Komponent for opsummeringsvisning
 Comment[de]=Zusammenfassungsansicht-Komponente
 Comment[el]=Συστατικό προβολής σύνοψης
+Comment[es]=Componente Vista de resumen
 Comment[et]=Kokkuvõttevaate plugin
+Comment[fr]=Composant de la vue résumée
+Comment[is]=Eining fyrir yfirlitssýn
 Comment[it]=Componente vista sommario
 Comment[ja]=要約ビューコンポーネント
+Comment[km]=សមាសភាគ​ទិដ្ឋភាព​សង្ខេប
 Comment[nds]=Översicht-Komponent
 Comment[nl]=Overzichtsweergaveitem
+Comment[pl]=Składnik widoku podsumowania
+Comment[ru]=Просмотр сводок
 Comment[sr]=Компонента приказа сажетка
 Comment[sr@Latn]=Komponenta prikaza sažetka
 Comment[sv]=Översiktsvykomponent
+Comment[tr]=Özet Görünüm Bileşeni
 Comment[zh_CN]=摘要视图组件
 Comment[zh_TW]=摘要檢視組件
 Name=Summary
@@ -56,6 +62,7 @@
 Name[is]=Yfirlit
 Name[it]=Sommario
 Name[ja]=要約
+Name[ka]=დაიჯესტი
 Name[kk]=Тұжырым
 Name[km]=សង្ខេប
 Name[lt]=Santrauka
@@ -70,7 +77,7 @@
 Name[pt]=Resumo
 Name[pt_BR]=Resumo
 Name[ro]=Sumar
-Name[ru]=Дайджест
+Name[ru]=Сводки
 Name[se]=Čoahkkáigeassu
 Name[sk]=Súhrn
 Name[sl]=Povzetek
@@ -82,7 +89,8 @@
 Name[th]=หน้าสรุป
 Name[tr]=Özet
 Name[uk]=Зведення
-Name[uz]=Ҳисобот
+Name[uz]=Hisobot
+Name[uz@cyrillic]=Ҳисобот
 Name[zh_CN]=概览
 Name[zh_TW]=摘要
 #Always last
Index: kontact/plugins/newsticker/kcmkontactknt.desktop
===================================================================
--- kontact/plugins/newsticker/kcmkontactknt.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kontact/plugins/newsticker/kcmkontactknt.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,5 +1,4 @@
 [Desktop Entry]
-Encoding=UTF-8
 Icon=knode
 Type=Service
 ServiceTypes=KCModule
@@ -37,6 +36,7 @@
 Name[is]=Fréttastrimill
 Name[it]=Ticker notizie
 Name[ja]=ニュースティッカー
+Name[ka]=სიახლეთა ტიკერი
 Name[kk]=Жаңалық таспасы
 Name[km]=កម្មវិធី​ទទួល​ព័ត៌មាន
 Name[lt]=News pranešėjas
@@ -88,6 +88,7 @@
 Comment[is]=Uppsetning á yfirliti yfir fréttastrimla
 Comment[it]=Impostazioni sommario ticker notizie
 Comment[ja]=ニュースティッカーの設定
+Comment[ka]=სიახლეთა ტიკერის დაიჯესტის კონფიგურაცია
 Comment[kk]=Жаңалық таспасының тұжырымынын баптау
 Comment[km]=រៀបចំ​សេចក្ដី​សង្ខេប​កម្មវិធី​ទទួល​ព័ត៌មាន
 Comment[lt]=News Ticker santraukos nustatymai
@@ -99,7 +100,7 @@
 Comment[pl]=Ustawienia podsumowania wiadomości
 Comment[pt]=Configuração do Sumário do Extractor de Notícias
 Comment[pt_BR]=Configuração de Resumo de Notícias
-Comment[ru]=Настройка дайджеста новостей
+Comment[ru]=Настройка сводки новостей
 Comment[sk]=Nastavenie súhrnu správ
 Comment[sl]=Nastavitve povzetka novic
 Comment[sr]=Подешавање сажетка приказивања вести
@@ -130,6 +131,7 @@
 Keywords[is]=fréttastrimill, stillingar, stilla
 Keywords[it]=ticker notizie, configura, impostazioni
 Keywords[ja]=ニュースティッカー,設定,設定
+Keywords[ka]=სიახლეთა ტიკერი, კონფიგურაცია, პარამეტრები
 Keywords[km]=កម្មវិធី​ទទួល​ព័ត៌មាន,កំណត់​រចនាសម្ព័ន្ធ,ការ​កំណត់
 Keywords[lt]=news ticker, configure, settings, konfigūravimas, nustatymai, naujienų pranešėjas
 Keywords[ms]=Pengetik  berita, konfigur, seting
Index: kontact/plugins/newsticker/newstickerplugin.desktop
===================================================================
--- kontact/plugins/newsticker/newstickerplugin.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kontact/plugins/newsticker/newstickerplugin.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,5 +1,4 @@
 [Desktop Entry]
-Encoding=UTF-8
 Type=Service
 Icon=knewsticker
 ServiceTypes=Kontact/Plugin,KPluginInfo
@@ -21,14 +20,21 @@
 Comment[da]=Nyhedstelegraf-komponent
 Comment[de]=Newsticker-Komponente
 Comment[el]=Συστατικό προβολέα ειδήσεων
+Comment[es]=Componente de teletipo de noticias
 Comment[et]=Uudistejälgija plugin
+Comment[fr]=Composant Newsticker
+Comment[is]=Fréttastrimilseining
 Comment[it]=Componente ticker notizie
 Comment[ja]=ニュースティッカーコンポーネント
+Comment[km]=សមាសភាគ Newsticker
 Comment[nds]=Narichtentelegraaf-Komponent
 Comment[nl]=Nieuwstickercomponent
+Comment[pl]=Składnik paska wiadomości
+Comment[ru]=Компонент новостей
 Comment[sr]=Компонента откуцавача вести
 Comment[sr@Latn]=Komponenta otkucavača vesti
 Comment[sv]=Nyhetsövervakningskomponent
+Comment[tr]=Haber İzleyici Bileşeni
 Comment[zh_CN]=新闻点点通组件
 Comment[zh_TW]=新聞顯示組件
 Name=News
@@ -59,6 +65,7 @@
 Name[hu]=Hírek
 Name[is]=Fréttir
 Name[ja]=ニュース
+Name[ka]=სიახლეები
 Name[kk]=Жаңалықтар
 Name[km]=ព័ត៌មាន
 Name[lt]=Naujienos
@@ -86,6 +93,7 @@
 Name[th]=ข่าว
 Name[tr]=Haberler
 Name[uk]=Новини
-Name[uz]=Янгиликлар
+Name[uz]=Yangiliklar
+Name[uz@cyrillic]=Янгиликлар
 Name[zh_CN]=新闻
 Name[zh_TW]=新聞
Index: kontact/interfaces/kontactplugin.desktop
===================================================================
--- kontact/interfaces/kontactplugin.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kontact/interfaces/kontactplugin.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -28,6 +28,7 @@
 Name[is]=Kontact íforrit
 Name[it]=Plugin Kontact
 Name[ja]=Kontact プラグイン
+Name[ka]=Kontact მოდული
 Name[kk]=Kontact модулі
 Name[km]=កម្មវិធី​ជំនួយ Kontact
 Name[lt]=Kontact priedas
@@ -37,7 +38,7 @@
 Name[nds]=Kontact-Moduul
 Name[ne]=सम्पर्क प्लगइन
 Name[nn]=Kontact-programtillegg
-Name[pl]=Wtyczka Kontact
+Name[pl]=Wtyczka Kontakt
 Name[pt]='Plugin' do Kontact
 Name[pt_BR]=Plug-in do Kontact
 Name[ro]=Modul Kontact
@@ -51,7 +52,8 @@
 Name[tg]=Модули Kontact
 Name[tr]=Kontact Eklentisi
 Name[uk]=Втулок Kontact
-Name[uz]=Kontact учун плагин
+Name[uz]=Kontact uchun plagin
+Name[uz@cyrillic]=Kontact учун плагин
 Name[zh_CN]=Kontact 插件
 Name[zh_TW]=Kontack 外掛程式
 
Index: kontact/src/kontactdcop.desktop
===================================================================
--- kontact/src/kontactdcop.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kontact/src/kontactdcop.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,5 +1,4 @@
 [Desktop Entry]
-Encoding=UTF-8
 Name=Kontact
 Name[be]=Кантакт
 Name[hi]=कॉन्टेक्ट
Index: kontact/src/kontact.setdlg
===================================================================
--- kontact/src/kontact.setdlg	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kontact/src/kontact.setdlg	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -5,14 +5,21 @@
 Name[da]=Opsummeringsvisning
 Name[de]=Übersicht
 Name[el]=Προβολή σύνοψης
+Name[es]=Vista de resumen
 Name[et]=Kokkuvõttevaade
+Name[fr]=Vue résumée
+Name[is]=Yfirlitssýn
 Name[it]=Vista sommario
 Name[ja]=要約ビュー
+Name[km]=ទិដ្ឋភាព​សង្ខេប
 Name[nds]=Översicht
 Name[nl]=Overzichtsweergave
+Name[pl]=Podsumowanie
+Name[ru]=Просмотр сводок
 Name[sr]=Приказ сажетка
 Name[sr@Latn]=Prikaz sažetka
 Name[sv]=Översiktsvy
+Name[tr]=Özet Görünümü
 Name[zh_CN]=摘要视图
 Name[zh_TW]=摘要檢視
 Comment=Configuration of Kontact's <b>Summary View</b>. Some plugins provide <i>Summary View</i> items, choose the ones you would like to list.
@@ -21,11 +28,17 @@
 Comment[da]=Konfiguration af Kontacts <b>Opsummeringsvisning</b>. Nogle plugins giver <i>Opsummeringsvisning</i>-elementer, vælg dem du ønsker på listen.
 Comment[de]=Einrichtung der <b>Zusammenfassungsansicht</b> von Kontact. Einige Kontact-Module stellen Elemente für die <i>Zusammenfassungsansicht</i> zur Verfügung. Wählen Sie hier, welche Elemente angezeigt werden sollen.
 Comment[el]=Ρύθμιση της <b>Προβολής σύνοψης</b> του  Kontact. Κάποια πρόσθετα παρέχουν αντικείμενα <i>Προβολή σύνοψης</i>· επιλέξτε αυτά που θέλετε να εμφανίζονται.
+Comment[es]=Configuración de Kontact <b>Vista de resumen</b>. Algunos complementos proveen elementos para la <i>Vista de resumen</i>, elija los que quiera listar.
 Comment[et]=Kontacti <b>kokkuvõttevaate</b> seadistamine. Mõned pluginad pakuvad <i>kokkuvõttevaate</i> elemente. Vali nimekirjas need, mida soovid näha.
+Comment[fr]=Configuration de Kontact <b> Vue résumée</b>. Certains modules fournissent des éléments de <i>Vue Résumée</i>, choisissez ceux que vous voulez voir listés.
+Comment[is]=Stillingar á <b>Yfirlitssýn</b>í Kontact. Sum íforrit koma með hluti í <i>Yfirlitssýn</i>, veldu þá sem þú vilt hafa á síðunni.
 Comment[it]=Configurazione della <b>vista sommario</b> di Kontact. Alcuni plugin forniscono elementi di <i>vista sommario</i>, scegli quelli che desideri vedere nell'elenco.
 Comment[ja]=Kontact の要約ビューの設定。要約ビューの項目を提供するプラグインがいくつかあります。要約ビューに表示させる項目を選択してください。
+Comment[km]=កា​រកំណត់​រចនាសម្ព័ន្ធ​របស់ Kontact <b>ទិដ្ឋភាព​សង្ខេប</b> ។ កម្មវិធី​ជំនួយ​មួយ​ចំនួនផ្ដល់​នូវ​ធាតុ<i>ទិដ្ឋភាព​សង្ខេប</i> ជ្រើស​ទិដ្ឋភាព​មួយ​ក្នុង​ចំណោម​ទិដ្ឋភាព​ទាំងនេះ​ដែល​អ្នក​ចង់​រាយ ។
 Comment[nds]=Kontact sien <b>Översicht</b> instellen. En Reeg Modulen stellt Indrääg för de <i>Översicht</i> praat. Hier kannst Du de utsöken, de Du hebben wullt.
 Comment[nl]=Configuratie van Kontacts <b>Overzichtsweergave</b>. Sommige plugins bieden ook items aan voor de <i>Overzichtweergave</i>, kies welke u wilt zien.
+Comment[pl]=Konfiguracja <b>Podsumowania</b> Kontaktu. Niektóre wtyczki zapewniają elementy <i>Widok podsumowania</i>, wybierz te które chcesz zobaczyć.
+Comment[ru]=Настройка показа сводок различных компонентов.
 Comment[sr]=Подешавање Kontact-овог <b>приказа сажетка</b>. Неки прикључци дају ставке <i>приказа сажетка</i>, изаберите оне које желите.
 Comment[sr@Latn]=Podešavanje Kontact-ovog <b>prikaza sažetka</b>. Neki priključci daju stavke <i>prikaza sažetka</i>, izaberite one koje želite.
 Comment[sv]=Inställning av Kontacts <b>översiktsvy</b>. Vissa insticksprogram tillhandahåller objekt för <i>översiktsvyn</i>. Välj de du skulle vilja visa.
@@ -40,14 +53,22 @@
 Name[ca]=Correu
 Name[da]=E-mail
 Name[el]=Αλληλογραφία
+Name[es]=Correo electrónico
 Name[et]=E-post
+Name[fr]=Courriel
+Name[is]=Tölvupóstur
 Name[it]=Posta elettronica
 Name[ja]=メール
+Name[km]=អ៊ីមែល
 Name[nds]=Nettpost
 Name[nl]=E-mail
+Name[pl]=E-mail
+Name[ru]=Электронная почта
+Name[sk]=Pošta
 Name[sr]=Е-пошта
 Name[sr@Latn]=E-pošta
 Name[sv]=E-post
+Name[tr]=E-Posta
 Name[zh_CN]=邮件
 Name[zh_TW]=電子郵件
 Comment=Configuration of Kontact's E-Mail Plugin <b>KMail</b>, includes a <i>Summary View Item</i> and represents a <i>Kontact Component</i>.
@@ -56,10 +77,16 @@
 Comment[da]=Konfiguration af Kontacts e-mail-plugin <b>KMail</b>, inkluderer et <i>Opsummeringsvisnings-element</i> og repræsenterer en <i>Kontact-komponent</i>.
 Comment[de]=Einrichtung des E-Mail-Moduls <b>KMail</b> für Kontact. Die E-Mail-Komponente kann als <i>Kontact-Komponente<i> in die <i>Zusammenfassungsansicht</i> integriert werden.
 Comment[el]=Η ρύθμιση του προσθέτου αλληλογραφίας <b>KMail</b> του Kontact, περιέχει ένα <i>Αντικείμενο προβολής σύνοψης</i> και αντιπροσωπεύει ένα <i>Συστατικό του Kontact</i>.
+Comment[es]=Configuración del complemento de correo-e de Kontact <b>KMail</b>, incluye una <i>Vista de resumen</i> y representa un <i>Componente de Kontact</i>.
 Comment[et]=Kontacti e-posti plugina <b>KMaili</b> seadistamine, mis sisaldab <i>kokkuvõttevaate elementi</i>.
+Comment[fr]=Configuration du Module de Courriel de Kontact <b>KMail</b>, inclut un <i>Élément de Vue Résumée</i> et correspond à un <i>Composant de Kontact</i>.
+Comment[is]=Stillingar fyrir tölvupóstíforrit Kontact <b>KMail</b>, inniheldur <i>yfirlitssýnarhlut</i> sem stendur fyrir <i>Kontact einingu</i>.
 Comment[it]=Configurazione del plugin di posta elettronica <b>KMail</b> di Kontact, include una <i>vista sommario</i> e rappresenta un <i>componente Kontact</i>. 
+Comment[km]=ការ​កំណត់​រចនាសម្ព័ន្ធ​របស់​កម្មវិធី​ជំនួយ​​អ៊ីមែល​របស់ Kontact​ <b>KMail</b> រួម​មាន<i>ធាតុ​ទិដ្ឋភាព​សង្ខេប</i> និង​បង្ហាញ <i>សមាសភាគ Kontact​</i> ។
 Comment[nds]=Kontact sien Nettpost-Moduul <b>KMail</b> instellen. Stellt en <i>Översicht-Indrag</i> praat un is en <i>Kontact-Komponent</i>.
 Comment[nl]=Instellingen voor Kontacts e-mailplugin <b>KMail</b>. Bevat een <i>Overzichtsweergaveplugin</i> en een <i>Kontact-component</i>.
+Comment[pl]=Konfiguracja wtyczki poczty Kontaktu <b>KMail</b>, zawiera <i>element Podsumowanie</i> i jest <i>Składnikiem Kontaktu</i>.
+Comment[ru]=Настройка модуля электронной почты <b>KMail</b> для показа в виде сводки.
 Comment[sr]=Подешавање Kontact-овог прикључка за е-пошту преко <b>KMail-</b>, укључујући <i>приказ сажетка</i>, и дат као <i>компонента Kontact-а</i>.
 Comment[sr@Latn]=Podešavanje Kontact-ovog priključka za e-poštu preko <b>KMail-</b>, uključujući <i>prikaz sažetka</i>, i dat kao <i>komponenta Kontact-a</i>.
 Comment[sv]=Inställning av Kontacts e-postinsticksprogram <b>Kmail</b>, omfattar ett objekt för <i>översiktsvyn</i> och representerar en <i>Kontactkomponent</i>.
@@ -97,6 +124,7 @@
 Name[is]=Tengiliðir
 Name[it]=Contatti
 Name[ja]=コンタクト
+Name[ka]=კონტაქტები
 Name[kk]=Контакттар
 Name[km]=ទំនាក់ទំនង
 Name[lt]=Kontaktai
@@ -122,9 +150,10 @@
 Name[ta]=தொடர்புகள்
 Name[tg]=Алоқот
 Name[th]=ที่อยู่ติดต่อ
-Name[tr]=Bağlantılar
+Name[tr]=Kişiler
 Name[uk]=Контакти
-Name[uz]=Алоқалар
+Name[uz]=Aloqalar
+Name[uz@cyrillic]=Алоқалар
 Name[zh_CN]=联系人
 Name[zh_TW]=聯絡人
 Comment=Configuration of Kontact's Adress Book Plugin <b>KAdressbook</b> which represents a <i>Kontact Component</i>.
@@ -133,10 +162,16 @@
 Comment[da]=Konfiguration af Kontacts adressebog-plugin <b>KAdressbook</b> som repræsenterer en <i>Kontact-komponent</i>.
 Comment[de]=Einrichtung des Adressbuch-Moduls für Kontact, welches eine <i>Kontact-Komponente</i> repräsentiert.
 Comment[el]=Ρύθμιση του πρόσθετου βιβλίου διευθύνσεων <b>KAdressbook</b> του Kontact που αντιπροσωπεύει ένα <i>Συστατικό του Kontact</i>.
+Comment[es]=Configuración del complemento de libreta de direcciones de Kontact <b> KAddressbok</b>, el cual representa un <i>Componente de Kontact</i>.
 Comment[et]=Kontacti aadressiraamatu plugina <b>KAdressbook</b> seaditamine.
+Comment[fr]=Configuration du Module de Carnet d'Adresses de Kontact <b> KAdressbook</b> qui correspond à un <i>Composant de Kontact</i>.
+Comment[is]=Stillingar fyrir vistfangaskráríforrit Kontact <b>KAdressbook</b>, inniheldur <i>yfirlitssýnarhlut</i> sem stendur fyrir <i>Kontact einingu</i>.
 Comment[it]=Configurazione del plugin rubrica di <b>KAddressbook</b> che rappresenta un <i>componente Kontact</i>.
+Comment[km]=កា​រកំណត់​រចនាសម្ព័ន្ធ​របស់​កម្មវិធី​ជំនួយ​សៀវភៅ​អាសយដ្ឋាន​របស់ Kontact <b>KAdressbook</b> ដែល​បង្ហាញ <i>សមាសភាគ Kontact​</i> ។
 Comment[nds]=Kontact sien Adressbook-Moduul <b>KAddressbook</b> instellende, dat en <i>Kontact-Komponent</i> is.
 Comment[nl]=Instellingen voor Kontacts adresboekplugin <b>KMail</b>. Bevat een <i>Kontact-component</i>.
+Comment[pl]=Konfiguracja wtyczki książki adresowej Kontaktu <b>KAddressBook</b>, która jest <i>Składnikiem Kontaktu</i>.
+Comment[ru]=Настройка модуля адресной книги <b>KAdressbook</b> для показа в виде сводки.
 Comment[sr]=Подешавање Kontact-овог прикључка за адресар преко <b>KAdressbook</b> у облику <i>компоненте Kontact-а</i>.
 Comment[sr@Latn]=Podešavanje Kontact-ovog priključka za adresar preko <b>KAdressbook</b> u obliku <i>komponente Kontact-a</i>.
 Comment[sv]=Inställning av Kontacts adressboksinsticksprogram <b>Kaddressbook</b>, som representerar en <i>Kontactkomponent</i>.
@@ -169,6 +204,7 @@
 Name[is]=Yfirlit sérstakra daga
 Name[it]=Sommario date speciali
 Name[ja]=特別な日の要約
+Name[ka]=განსაკუთრებულ თარიღთა დაიჯესტი
 Name[kk]=Ерекше күндер тұжырымы
 Name[km]=សង្ខេប​ថ្ងៃ​ពិសេស
 Name[lt]=Ypatingų dienų santrauka
@@ -182,7 +218,7 @@
 Name[pl]=Podsumowanie dat specjalnych
 Name[pt]=Sumário de Datas Especiais
 Name[pt_BR]=Resumo de Datas Especiais
-Name[ru]=Дайджест особых дат
+Name[ru]=Сводка особых дат
 Name[sk]=Súhrn špeciálnych dátumov
 Name[sl]=Povzetek posebnih datumov
 Name[sr]=Сажетак посебних датума
@@ -216,6 +252,7 @@
 Comment[is]=Yfirlitshluti sérstakra daga
 Comment[it]=Componente sommario per le date speciali
 Comment[ja]=特別な日の要約コンポーネント
+Comment[ka]=განაკუთრებულ თარიღთა დაიჯესტის კომპონენტი
 Comment[kk]=Ерекше күндер тұжырымының компоненті
 Comment[km]=សមាសភាគ​សង្ខេប​នៃ​ថ្ងៃ​ពិសេស
 Comment[lt]=Ypatingų dienų santraukos komponentas
@@ -229,7 +266,7 @@
 Comment[pl]=Składnik podsumowania dat specjalnych
 Comment[pt]=Componente de Sumário de Datas Especiais
 Comment[pt_BR]=Componente de Datas Especiais
-Comment[ru]=Компонент дайджеста особых дат
+Comment[ru]=Компонент сводки особых дат
 Comment[sk]=Komponent súhrnu špeciálnych dátumov
 Comment[sl]=Komponenta za povzetke posebnih datumov
 Comment[sr]=Компонента сажетка посебних датума
@@ -273,6 +310,7 @@
 Name[is]=Dagatal
 Name[it]=Calendario
 Name[ja]=カレンダー
+Name[ka]=კალენდარი
 Name[kk]=Күнтізбе
 Name[km]=ប្រតិទិន
 Name[lt]=Kalendorius
@@ -299,7 +337,8 @@
 Name[th]=บันทึกประจำวัน
 Name[tr]=Takvim
 Name[uk]=Календар
-Name[uz]=Календар
+Name[uz]=Kalendar
+Name[uz@cyrillic]=Календар
 Name[zh_CN]=日历
 Name[zh_TW]=行事曆
 Comment=Configuration of Kontact's Calendar Plugin <b>KOrganizer</b>, includes a <i>Summary View Item</i> and represents a <i>Kontact Component</i>.
@@ -308,10 +347,16 @@
 Comment[da]=Konfiguration af Kontacts kalender-plugin <b>KOrganizer</b>, inkluderer et <i>Opsummeringsvisningselement</i> og repræsenterer en <i>Kontact-komponent</i>.
 Comment[de]=Einrichtung des Kalender-Moduls <b>KOrganizer</b> für Kontact, einschließlich der <i>Zusammenfassungsansicht</i>; repräsentiert eine <i>Kontact-Komponente</i>
 Comment[el]=Η ρύθμιση του προσθέτου ημερολογίου του <b>KOrganizer</b> του Kontact, περιέχει ένα <i>Αντικείμενο προβολής σύνοψης</i> και αντιπροσωπεύει ένα <i>Συστατικό του Kontact</i>.
+Comment[es]=Configuración del complemento de calendario de Kontact, <b> KOrganizer</b>, incluye una <i>Vista de resumen</i> y representa un <i>Componente de Kontact</i>.
 Comment[et]=Kontacti kalendriplugina <b>KOrganizeri</b> seadistamine, mis sisaldab <i>kokkuvõttevaate elementi</i>.
+Comment[fr]=Configuration du Module de Calendrier de Kontact <b>KOrganizer</b>, inclut un <i>Élément de Vue Résumée</i> et correspond à un <i>Composant de Kontact</i>.
+Comment[is]=Stillingar fyrir dagatalsíforrit Kontact <b>KOrganizer</b>, inniheldur <i>yfirlitssýnarhlut</i> sem stendur fyrir <i>Kontact einingu</i>.
 Comment[it]=Configurazione del plugin calendario <b>KOrganizer</b> di Kontact, include una <i>vista sommario</i> e rappresenta un <i>componente Kontact</i>.
+Comment[km]=កា​រកំណត់​រចនាសម្ព័ន្ធ​របស់​កម្មវិធី​ជំនួយ​ប្រតិទិន​របស់ Kontact <b>KOrganizer</b>រួម​មាន <i>ធាតុទិដ្ឋភាព​សង្ខេប</i> និង​បង្ហាញ <i>សមាសភាគ​ Kontact​</i>.
 Comment[nds]=Kontact sien Kalenner-Moduul <b>KOrganizer</b> instellen. Stellt en <i>Översicht-Indrag</i> praat un is en <i>Kontact-Komponent</i>.
 Comment[nl]=Instellingen voor Kontacts agendaplugin <b>KOrganizer</b>. Bevat een <i>Overzichtsweergaveplugin</i> en een <i>Kontact-component</i>.
+Comment[pl]=Konfiguracja wtyczki kalendarza Kontaktu <b>KOrganizer</b>, zawiera <i>element Podsumowanie</i> i jest <i>Składnikiem Kontaktu</i>.
+Comment[ru]=Настройка модуля календаря <b>KOrganizer</b> для показа в виде сводки.
 Comment[sr]=Подешавање Kontact-овог прикључка за календар преко <b>KOrganizer-а</b>, укључујући <i>приказ сажетка</i>, и дат као <i>компонента Kontact-а</i>.
 Comment[sr@Latn]=Podešavanje Kontact-ovog priključka za kalendar preko <b>KOrganizer-a</b>, uključujući <i>prikaz sažetka</i>, i dat kao <i>komponenta Kontact-a</i>.
 Comment[sv]=Inställning av Kontacts kalenderinsticksprogram <b>Korganizer</b>, omfattar ett objekt för <i>översiktsvyn</i> och representerar en <i>Kontactkomponent</i>.
@@ -349,6 +394,7 @@
 Name[hu]=Hírek
 Name[is]=Fréttir
 Name[ja]=ニュース
+Name[ka]=სიახლეები
 Name[kk]=Жаңалықтар
 Name[km]=ព័ត៌មាន
 Name[lt]=Naujienos
@@ -376,7 +422,8 @@
 Name[th]=ข่าว
 Name[tr]=Haberler
 Name[uk]=Новини
-Name[uz]=Янгиликлар
+Name[uz]=Yangiliklar
+Name[uz@cyrillic]=Янгиликлар
 Name[zh_CN]=新闻
 Name[zh_TW]=新聞
 Comment=Configuration of Kontact's News Plugin <b>KNode</b> which represents a <i>Kontact Component</i>.
@@ -385,10 +432,16 @@
 Comment[da]=Konfiguration af Kontacts nyheds-plugin <b>KNode</b> som repræsenterer en <i>Kontact-komponent</i>.
 Comment[de]=Einrichtung des News-Moduls <b>KNode</b> für Kontact; repräsentiert eine <i>Kontact-Komponente</i>
 Comment[el]=Ρύθμιση του πρόσθετου νέων <b>KNode</b> του Kontact που αντιπροσωπεύει ένα <i>Συστατικό του Kontact</i>.
+Comment[es]=Configuración del complemento de noticias de Kontact <b>KNode</b> , el cual representa un <i>Componente de Kontact</i>.
 Comment[et]=Kontacti uudisteplugina <b>KNode</b> seadistamine.
+Comment[fr]=Configuration du Module de Nouvelles de Kontact <b>KNode</b> qui correspond à un <i>Composant de Kontact</i>.
+Comment[is]=Stillingar fyrir fréttastraumsíforrit Kontact <b>KNode</b>, inniheldur <i>yfirlitssýnarhlut</i> sem stendur fyrir <i>Kontact einingu</i>.
 Comment[it]=Configurazione del plugin notizie <b>KNode</b> di Kontact, che rappresenta un <i>componente Kontact</i>.
+Comment[km]=កា​រកំណត់​រចនាសម្ព័ន្ធ​របស់​កម្មវិធី​ជំនួយ​ព័ត៌មាន​របស់ Kontact <b>KNode</b> ដែល​បង្ហាញ <i>សមាភាគ​​របស់ Kontact​</i>​ ។
 Comment[nds]=Kontact sien Narichten-Moduul <b>KNode</b> instellen, dat en <i>Kontact-Komponent</i> is.
 Comment[nl]=Instellingen voor Kontacts nieuwsplugin <b>KNode</b>. Bevat een <i>Kontact-component</i>.
+Comment[pl]=Konfiguracja wtyczki wiadomości Kontaktu <b>KNode</b>, która jest <i>składnikiem Kontaktu</i>.
+Comment[ru]=Настройка модуля новостей <b>KNode</b> для показа в виде сводки.
 Comment[sr]=Подешавање Kontact-овог прикључка за вести преко <b>KNode-а</b> у облику <i>компненте Kontact-а</i>.
 Comment[sr@Latn]=Podešavanje Kontact-ovog priključka za vesti preko <b>KNode-a</b> u obliku <i>kompnente Kontact-a</i>.
 Comment[sv]=Inställning av Kontacts nyhetsinsticksprogram <b>Knode</b>, som representerar en <i>Kontactkomponent</i>.
@@ -427,6 +480,7 @@
 Name[is]=Veður
 Name[it]=Tempo meteorologico
 Name[ja]=気象情報
+Name[ka]=ამინდი
 Name[kk]=Ауа райы
 Name[km]=អាកាសធាតុ
 Name[lt]=Orų pranešėjas
@@ -453,7 +507,8 @@
 Name[th]=รายงานอากาศ
 Name[tr]=Hava Durumu
 Name[uk]=Погода
-Name[uz]=Об-ҳаво
+Name[uz]=Ob-havo
+Name[uz@cyrillic]=Об-ҳаво
 Name[zh_CN]=天气
 Name[zh_TW]=天氣
 Comment=Weather Information Component
@@ -462,14 +517,22 @@
 Comment[da]=Komponent til vejrinformation
 Comment[de]=Komponente für Wetterinformationen
 Comment[el]=Συστατικό πληροφοριών καιρού
+Comment[es]=Componente de información meteorológica
 Comment[et]=Ilmateate komponent
+Comment[fr]=Composant d'Informations météorologiques
+Comment[is]=Eining fyrir veðurupplýsingar
 Comment[it]=Informazioni meteorologiche
 Comment[ja]=気象情報コンポーネント
+Comment[km]=សមាសភាគ​ព័ត៌មាន​អាកាសធាតុ
 Comment[nds]=Wederinformatschonen-Komponent
 Comment[nl]=Weerinformatiecomponent
+Comment[pl]=Składnik informacji o pogodzie
+Comment[ru]=Информация о погоде
+Comment[sk]=Informácie o počasí
 Comment[sr]=Компонента информација о времену
 Comment[sr@Latn]=Komponenta informacija o vremenu
 Comment[sv]=Komponent med väderrapport
+Comment[tr]=Hava Durumu Bilgisi Bileşeni
 Comment[zh_CN]=天气信息组件
 Comment[zh_TW]=天氣資訊組件
 Weight=1000
@@ -502,6 +565,7 @@
 Name[is]=Fréttastrimill
 Name[it]=Ticker notizie
 Name[ja]=ニュースティッカー
+Name[ka]=სიახლეთა ტიკერი
 Name[kk]=Жаңалық таспасы
 Name[km]=កម្មវិធី​ទទួល​ព័ត៌មាន
 Name[lt]=News pranešėjas
@@ -553,6 +617,7 @@
 Comment[is]=Fréttastrimilshluti
 Comment[it]=Ticker notizie
 Comment[ja]=ニュースティッカーコンポーネント
+Comment[ka]=სიახლეთა ტიკერის კომპონენტი
 Comment[kk]=Жаңалық таспасының компоненті
 Comment[km]=សមាសភាគ​កម្មវិធី​ទទួល​ព័ត៌មាន
 Comment[lt]=Naujienų pranešėjo komponentas
Index: kontact/src/kontactconfig.desktop
===================================================================
--- kontact/src/kontactconfig.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kontact/src/kontactconfig.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,5 +1,4 @@
 [Desktop Entry]
-Encoding=UTF-8
 Exec=kcmshell kontactconfig
 Icon=kontact
 Type=Service
Index: kontact/src/main.cpp
===================================================================
--- kontact/src/main.cpp	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kontact/src/main.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -123,7 +123,7 @@
 int main( int argc, char **argv )
 {
   KAboutData about( "kontact", I18N_NOOP( "Kontact" ), version, description,
-                    KAboutData::License_GPL, I18N_NOOP("(C) 2001-2004 The Kontact developers"), 0, "http://kontact.org" );
+                    KAboutData::License_GPL, I18N_NOOP("(C) 2001-2008 The Kontact developers"), 0, "http://kontact.org" );
   about.addAuthor( "Daniel Molkentin", 0, "molkentin@kde.org" );
   about.addAuthor( "Don Sanders", 0, "sanders@kde.org" );
   about.addAuthor( "Cornelius Schumacher", 0, "schumacher@kde.org" );
Index: kontact/src/Kontact.desktop
===================================================================
--- kontact/src/Kontact.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kontact/src/Kontact.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,5 +1,4 @@
 [Desktop Entry]
-Encoding=UTF-8
 Name=Kontact
 Name[be]=Кантакт
 Name[hi]=कॉन्टेक्ट
@@ -37,6 +36,7 @@
 GenericName[is]=Persónulegur upplýsingastjórnandi
 GenericName[it]=Gestione informazioni personali 
 GenericName[ja]=個人情報マネージャ
+GenericName[ka]=პირადი ინფორმაციის მმართველი
 GenericName[kk]=Дербес Ақпарат Менеджері
 GenericName[km]=កម្មវិធី​គ្រប់គ្រង​ព័ត៌មាន​ផ្ទាល់​ខ្លួន
 GenericName[lt]=Asmeninės informacijos tvarkyklė
@@ -61,7 +61,8 @@
 GenericName[tg]=Мудири маълумоти шахсӣ
 GenericName[tr]=Kişisel Bilgi Yöneticisi
 GenericName[uk]=Менеджер особистої інформації
-GenericName[uz]=Шахсий маълумот бошқарувчиси
+GenericName[uz]=Shaxsiy maʼlumot boshqaruvchisi
+GenericName[uz@cyrillic]=Шахсий маълумот бошқарувчиси
 GenericName[zh_CN]=个人信息管理器
 GenericName[zh_TW]=個人資訊管理者
 Terminal=false
Index: kandy/src/uninstall.desktop
===================================================================
--- kandy/src/uninstall.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kandy/src/uninstall.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,3 +1,2 @@
 [Desktop Entry]
-Encoding=UTF-8
 Hidden=true
Index: kandy/src/kandy.desktop
===================================================================
--- kandy/src/kandy.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kandy/src/kandy.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,5 +1,4 @@
 [Desktop Entry]
-Encoding=UTF-8
 Name=Kandy
 Name[hi]=केंडी
 Name[ne]=केन्डी
@@ -25,6 +24,7 @@
 Comment[is]=Tól sem samstillir vistfangagögn við farsíma
 Comment[it]=Strumento per sincronizzare i dati della rubrica indirizzi con i telefoni cellulari
 Comment[ja]=アドレス帳のデータを携帯電話と同期するためのツール
+Comment[ka]=მობილურ ტელეფონთან წიგნაკის მონაცემების სინქრონიზაციის ხელსაწყო
 Comment[kk]=Адрестік кітапшаны қалта телефонмен қадамдастыру құралы
 Comment[km]=ឧបករណ៍​សម្រាប់​ធ្វើ​សមកាលកម្ម​ទិន្នន័យ​សៀវភៅ​អាសយដ្ឋាន​ជាមួយ​នឹង​ទូរស័ព្ទ​ចល័ត
 Comment[lt]=Įrankis adresų knygelės sinchronizavimui su mobiliaisiais telefonais
@@ -79,6 +79,7 @@
 GenericName[is]=Farsímatól
 GenericName[it]=Strumento per i telefoni cellulari
 GenericName[ja]=携帯電話ツール
+GenericName[ka]=მობილურ ტელეფონთან სამუშაო ხელსაწყო
 GenericName[kk]=Қалта телефон құралы
 GenericName[km]=ឧបករណ៍​ទូរស័ព្ទ​ចល័ត
 GenericName[lt]=Mobilaus telefono įrankis
@@ -107,7 +108,8 @@
 GenericName[th]=เครื่องมือสำหรับโทรศัพท์เคลื่อนที่
 GenericName[tr]=Cep Telefonu Aracı
 GenericName[uk]=Засіб для мобільних телефонів
-GenericName[uz]=Уяли телефон учун восита
+GenericName[uz]=Uyali telefon uchun vosita
+GenericName[uz@cyrillic]=Уяли телефон учун восита
 GenericName[ven]=Tshishumiswa tsha lutingo thendeleki
 GenericName[vi]=Công cụ điện thoại di động 
 GenericName[xh]=Isixhobo Semfono-mfono Ekuhanjwa nayo
Index: ktnef/gui/ktnef.desktop
===================================================================
--- ktnef/gui/ktnef.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ ktnef/gui/ktnef.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,5 +1,4 @@
 [Desktop Entry]
-Encoding=UTF-8
 Name=KTnef
 Name[sv]=Ktnef
 GenericName=TNEF File Viewer
@@ -26,6 +25,7 @@
 GenericName[is]=TNEF skráarskoðari
 GenericName[it]=Visualizzatore file TNEF
 GenericName[ja]=TNEF ファイルビュー
+GenericName[ka]=TNEF ფაილების დამთვალიერებელი
 GenericName[kk]=TNEF файлды қарау құралы
 GenericName[km]=កម្មវិធី​មើល​ឯកសារ TNEF
 GenericName[lt]=TNEF bylų žiūryklė
@@ -78,6 +78,7 @@
 Comment[is]=Sýnir/lesari fyrir TNEF skrár
 Comment[it]=Un visualizzatore/estrattore di file TNEF
 Comment[ja]=TNEF ファイルのためのビューア/展開ツール
+Comment[ka]= TNEF ფაილების ექსტრაქტორი/დამთვალიერებელი
 Comment[kk]=TNEF файдарды қарау/тарқату
 Comment[km]=កម្មវិធី​មើល និង​ស្រង់​ឯកសារ TNEF
 Comment[lt]=TNEF bylų žiūryklė - išpakuotojas
Index: ktnef/gui/ms-tnef.desktop
===================================================================
--- ktnef/gui/ms-tnef.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ ktnef/gui/ms-tnef.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -31,6 +31,7 @@
 Comment[is]=TNEF skrá
 Comment[it]=File TNEF
 Comment[ja]=TNEF ファイル
+Comment[ka]=TNEF ფაილი
 Comment[kk]=TNEF файлы
 Comment[km]=ឯកសារ TNEF
 Comment[lt]=TNEF byla
@@ -55,6 +56,7 @@
 Comment[tg]=Файли TNEF 
 Comment[tr]=TNEF Dosyası
 Comment[uk]=Файл TNEF
-Comment[uz]=TNEF-файли
+Comment[uz]=TNEF-fayli
+Comment[uz@cyrillic]=TNEF-файли
 Comment[zh_CN]=TNEF 文件
 Comment[zh_TW]=TNEF 檔案
Index: kfile-plugins/rfc822/kfile_rfc822.desktop
===================================================================
--- kfile-plugins/rfc822/kfile_rfc822.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kfile-plugins/rfc822/kfile_rfc822.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,5 +1,4 @@
 [Desktop Entry]
-Encoding=UTF-8
 Type=Service
 Name=Email Info
 Name[af]=E-pos informasie
@@ -28,6 +27,7 @@
 Name[is]=Tölvupóst upplýsingar
 Name[it]=Informazioni di posta elettronica
 Name[ja]=Eメール 情報
+Name[ka]=ელფოსტის ინფორმაცია
 Name[kk]=Эл.пошта мәліметі
 Name[km]=ព័ត៌មាន​អ៊ីមែល
 Name[lt]=E. pašto info
Index: kfile-plugins/ics/kfile_ics.desktop
===================================================================
--- kfile-plugins/ics/kfile_ics.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kfile-plugins/ics/kfile_ics.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,5 +1,4 @@
 [Desktop Entry]
-Encoding=UTF-8
 Type=Service
 Name=ICS information
 Name[af]=ICS informasie
@@ -25,6 +24,7 @@
 Name[is]=ICS upplýsingar
 Name[it]=Informazioni ICS
 Name[ja]=ICS 情報
+Name[ka]=ICS ინფორმაცია
 Name[kk]=ICS ақпараты
 Name[km]=ព័ត៌មាន ICS
 Name[lt]=ICS informacija
Index: kfile-plugins/palm-databases/kfile_palm.desktop
===================================================================
--- kfile-plugins/palm-databases/kfile_palm.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kfile-plugins/palm-databases/kfile_palm.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,5 +1,4 @@
 [Desktop Entry]
-Encoding=UTF-8
 Type=Service
 Name=PalmOS Database Info
 Name[af]=PalmOS databasis informasie
@@ -27,6 +26,7 @@
 Name[is]=PalmOS gagnagrunnsupplýsingar
 Name[it]=Informazioni database PalmOs
 Name[ja]=PalmOS データベース 情報
+Name[ka]=PalmOS-ს მონაცემთა ბაზის ინფორმაცია
 Name[kk]=PalmOS деректер қорының мәліметі
 Name[km]=ព័ត៌មាន​មូលដ្ឋាន​ទិន្នន័យ PalmOS
 Name[lt]=PalmOS duomenų bazės info
Index: kfile-plugins/vcf/kfile_vcf.desktop
===================================================================
--- kfile-plugins/vcf/kfile_vcf.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ kfile-plugins/vcf/kfile_vcf.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,5 +1,4 @@
 [Desktop Entry]
-Encoding=UTF-8
 Type=Service
 Name=vCard Info
 Name[af]=Vkaart Inligting
@@ -27,6 +26,7 @@
 Name[is]=vCard upplýsingar
 Name[it]=Informazioni vCard
 Name[ja]=vCard 情報
+Name[ka]=vCard ინფორმაცია
 Name[kk]=vCard мәліметі
 Name[km]=ព័ត៌មាន vCard
 Name[lt]=vCard informacija
Index: korganizer/korganizer_configfonts.desktop
===================================================================
--- korganizer/korganizer_configfonts.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ korganizer/korganizer_configfonts.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,5 +1,4 @@
 [Desktop Entry]
-Encoding=UTF-8
 Icon=fonts
 Type=Service
 ServiceTypes=KCModule
@@ -43,6 +42,7 @@
 Name[is]=Letur
 Name[it]=Tipi di carattere
 Name[ja]=フォント
+Name[ka]=შრიფტები
 Name[kk]=Қаріптері
 Name[km]=ពុម្ពអក្សរ
 Name[lt]=Šriftai
@@ -71,7 +71,8 @@
 Name[th]=รูปแบบตัวอักษร
 Name[tr]=Yazı tipleri
 Name[uk]=Шрифти
-Name[uz]=Шрифтлар
+Name[uz]=Shriftlar
+Name[uz@cyrillic]=Шрифтлар
 Name[ven]=Fontu
 Name[vi]=Phông 
 Name[xh]=Ubungakanani bamagama
@@ -104,6 +105,7 @@
 Comment[is]=KOrganizer leturstillingar
 Comment[it]=Configurazione font di KOrganizer
 Comment[ja]=KOrganizer フォント設定
+Comment[ka]=KOrganizer შრიფტთა კონფიგურაცია
 Comment[kk]=KOrganizer-дің қаріптер параметрлері
 Comment[km]=ការ​កំណត់​រចនាសម្ព័ន្ធ​ពុម្ពអក្សរ KOrganizer
 Comment[lt]=KOrganizer šriftų konfigūravimas
@@ -149,7 +151,7 @@
 Keywords[eu]=korganizer,letra-tipoak
 Keywords[fa]=korganizer،قلمها
 Keywords[fi]=korganizer,kirjasimet
-Keywords[fr]=KOrganizer,polices
+Keywords[fr]=korganizer,polices
 Keywords[fy]=korganizer,fonts,lettertypen
 Keywords[ga]=korganizer,clónna,clófhoirne
 Keywords[gl]=korganizer,fontes
@@ -159,6 +161,7 @@
 Keywords[is]=korganizer,letur
 Keywords[it]=korganizer,font
 Keywords[ja]=korganizer,フォント
+Keywords[ka]=korganizer,შრიფტები
 Keywords[km]=korganizer,ពុម្ពអក្សរ
 Keywords[lt]=korganizer,fonts, šriftai
 Keywords[mk]=korganizer,fonts,корганизатор,фонтови
@@ -182,5 +185,6 @@
 Keywords[tg]=korganizer,fonts,органайзер,ҳуруфҳо
 Keywords[tr]=korganizer,yazıtipleri
 Keywords[uk]=korganizer,шрифти
-Keywords[uz]=korganizer,органайзер,шрифтлар
+Keywords[uz]=korganizer,organayzer,shriftlar
+Keywords[uz@cyrillic]=korganizer,органайзер,шрифтлар
 Keywords[zh_CN]=korganizer,fonts,字体
Index: korganizer/kogroupware.cpp
===================================================================
--- korganizer/kogroupware.cpp	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ korganizer/kogroupware.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -190,24 +190,34 @@
       if( (*it)->email() == receiver ) {
         if ( action.startsWith( "accepted" ) )
           (*it)->setStatus( KCal::Attendee::Accepted );
-        else if ( action.startsWith( "tentative" ) || action.startsWith( "counter" ) )
+        else if ( action.startsWith( "tentative" ) )
           (*it)->setStatus( KCal::Attendee::Tentative );
+        else if ( KOPrefs::instance()->outlookCompatCounterProposals() && action.startsWith( "counter" ) )
+          (*it)->setStatus( KCal::Attendee::Tentative );
         else if ( action.startsWith( "delegated" ) )
           (*it)->setStatus( KCal::Attendee::Delegated );
         break;
       }
     }
-    scheduler.acceptTransaction( incidence, method, status );
+    if ( KOPrefs::instance()->outlookCompatCounterProposals() || !action.startsWith( "counter" ) )
+      scheduler.acceptTransaction( incidence, method, status );
   } else if ( action.startsWith( "cancel" ) )
     // Delete the old incidence, if one is present
     scheduler.acceptTransaction( incidence, KCal::Scheduler::Cancel, status );
-  else if ( action.startsWith( "reply" ) )
-    scheduler.acceptTransaction( incidence, method, status );
-  else
+  else if ( action.startsWith( "reply" ) ) {
+    if ( method != Scheduler::Counter ) {
+      scheduler.acceptTransaction( incidence, method, status );
+    } else {
+      // accept counter proposal
+      scheduler.acceptCounterProposal( incidence );
+      // send update to all attendees
+      sendICalMessage( mView, Scheduler::Request, incidence );
+    }
+  } else
     kdError(5850) << "Unknown incoming action " << action << endl;
 
   if ( action.startsWith( "counter" ) ) {
-    mView->editIncidence( incidence );
+    mView->editIncidence( incidence, true );
     KOIncidenceEditor *tmp = mView->editorDialog( incidence );
     tmp->selectInvitationCounterProposal( true );
   }
@@ -323,5 +333,22 @@
     return false;
 }
 
+void KOGroupware::sendCounterProposal(KCal::Calendar *calendar, KCal::Event * oldEvent, KCal::Event * newEvent) const
+{
+  if ( !oldEvent || !newEvent || *oldEvent == *newEvent || !KOPrefs::instance()->mUseGroupwareCommunication )
+    return;
+  if ( KOPrefs::instance()->outlookCompatCounterProposals() ) {
+    Incidence* tmp = oldEvent->clone();
+    tmp->setSummary( i18n("Counter proposal: %1").arg( newEvent->summary() ) );
+    tmp->setDescription( newEvent->description() );
+    tmp->addComment( i18n("Proposed new meeting time: %1 - %2").arg( newEvent->dtStartStr(), newEvent->dtEndStr() ) );
+    KCal::MailScheduler scheduler( calendar );
+    scheduler.performTransaction( tmp, Scheduler::Reply );
+    delete tmp;
+  } else {
+    KCal::MailScheduler scheduler( calendar );
+    scheduler.performTransaction( newEvent, Scheduler::Counter );
+  }
+}
 
 #include "kogroupware.moc"
Index: korganizer/komailclient.cpp
===================================================================
--- korganizer/komailclient.cpp	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ korganizer/komailclient.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -87,16 +87,17 @@
   return send(from,to,subject,body,bcc,attachment);
 }
 
-bool KOMailClient::mailOrganizer(IncidenceBase *incidence,const QString &attachment)
+bool KOMailClient::mailOrganizer(IncidenceBase *incidence,const QString &attachment, const QString &sub)
 {
   QString to = incidence->organizer().fullName();
 
   QString from = KOPrefs::instance()->email();
 
-  QString subject;
+  QString subject = sub;
   if(incidence->type()!="FreeBusy") {
     Incidence *inc = static_cast<Incidence *>(incidence);
-    subject = inc->summary();
+    if ( subject.isEmpty() )
+      subject = inc->summary();
   } else {
     subject = "Free Busy Message";
   }
Index: korganizer/koeditorgeneralevent.h
===================================================================
--- korganizer/koeditorgeneralevent.h	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ korganizer/koeditorgeneralevent.h	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -67,6 +67,8 @@
 
     void updateRecurrenceSummary( const QString &summary );
 
+    QFrame* invitationBar() const { return mInvitationBar; }
+
   public slots:
     void setDateTimes( const QDateTime &start, const QDateTime &end );
     void setDuration();
Index: korganizer/mailscheduler.h
===================================================================
--- korganizer/mailscheduler.h	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ korganizer/mailscheduler.h	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -52,7 +52,10 @@
 
     /** Returns the directory where the free-busy information is stored */
     virtual QString freeBusyDir();
-  
+
+    /** Accepts a counter proposal */
+    bool acceptCounterProposal( Incidence *incidence );
+
   private:
     QMap<IncidenceBase *, QString> mEventMap;
 };
Index: korganizer/timelabels.h
===================================================================
--- korganizer/timelabels.h	(.../tags/KDE/3.5.9/kdepim)	(wersja 0)
+++ korganizer/timelabels.h	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -0,0 +1,84 @@
+/*
+    This file is part of KOrganizer.
+
+    Copyright (c) 2000,2001,2003 Cornelius Schumacher <schumacher@kde.org>
+    Copyright (C) 2003-2004 Reinhold Kainhofer <reinhold@kainhofer.com>
+
+    This program is free software; you can redistribute it and/or modify
+    it under the terms of the GNU General Public License as published by
+    the Free Software Foundation; either version 2 of the License, or
+    (at your option) any later version.
+
+    This program is distributed in the hope that it will be useful,
+    but WITHOUT ANY WARRANTY; without even the implied warranty of
+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
+    GNU General Public License for more details.
+
+    You should have received a copy of the GNU General Public License
+    along with this program; if not, write to the Free Software
+    Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301, USA.
+
+    As a special exception, permission is given to link this program
+    with any edition of Qt, and distribute the resulting executable,
+    without including the source code for Qt in the source distribution.
+*/
+#ifndef TIMELABELS_H
+#define TIMELABELS_H
+
+#include <qscrollview.h>
+#include <qlabel.h>
+
+class QHBox;
+class QPushButton;
+class QBoxLayout;
+
+class KOAgenda;
+class KOAgendaItem;
+class KConfig;
+
+class TimeLabels : public QScrollView
+{
+    Q_OBJECT
+  public:
+    TimeLabels( int rows, QWidget *parent = 0, const char *name = 0,
+                WFlags f = 0 );
+
+    /** Calculates the minimum width */
+    virtual int minimumWidth() const;
+
+    /** updates widget's internal state */
+    void updateConfig();
+
+    /**  */
+    void setAgenda( KOAgenda *agenda );
+
+    /**  */
+    virtual void paintEvent( QPaintEvent *e );
+
+  public slots:
+    /** update time label positions */
+    void positionChanged();
+    void positionChanged( int pos );
+
+  protected:
+    void drawContents( QPainter *p, int cx, int cy, int cw, int ch );
+
+  private slots:
+    /** update the position of the marker showing the mouse position */
+    void mousePosChanged(const QPoint &pos);
+
+    void showMousePos();
+    void hideMousePos();
+
+    void setCellHeight( double height );
+
+  private:
+    int mRows;
+    double mCellHeight;
+    int mMiniWidth;
+    KOAgenda* mAgenda;
+
+    QFrame *mMousePos;  // shows a marker for the current mouse position in y direction
+};
+
+#endif

Zmiany atrybutów dla: korganizer/timelabels.h
___________________________________________________________________
Dodane: svn:mime-type
   + text/x-chdr
Dodane: svn:keywords
   + Author Date Id Revision
Dodane: svn:eol-style
   + native

Index: korganizer/korganizer_configplugins.desktop
===================================================================
--- korganizer/korganizer_configplugins.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ korganizer/korganizer_configplugins.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,5 +1,4 @@
 [Desktop Entry]
-Encoding=UTF-8
 Icon=identity
 Type=Service
 ServiceTypes=KCModule
@@ -38,6 +37,7 @@
 Name[is]=Íforrit
 Name[it]=Plugin
 Name[ja]=プラグイン
+Name[ka]=მოდულები
 Name[kk]=Плагин модульдері
 Name[km]=កម្មវិធី​ជំនួយ
 Name[lt]=Priedai
@@ -59,7 +59,8 @@
 Name[ta]=சொருகுப்பொருள்கள்
 Name[tr]=Eklentiler
 Name[uk]=Втулки
-Name[uz]=Плагинлар
+Name[uz]=Plaginlar
+Name[uz@cyrillic]=Плагинлар
 Name[zh_CN]=插件
 Name[zh_TW]=外掛程式
 Comment=KOrganizer Plugin Configuration
@@ -86,6 +87,7 @@
 Comment[is]=Stillingar KOrganizer íforrita
 Comment[it]=Configurazione plugin KOrganizer
 Comment[ja]=KOrganizer プラグイン設定
+Comment[ka]=KOrganizer მოდულების კონფიგურაცია
 Comment[kk]=KOrganizer-дің плагин модульдерінің параметрлері
 Comment[km]=ការ​កំណត់​រចនាសម្ព័ន្ធ​កម្មវិធី​ជំនួយ KOrganizer
 Comment[lt]=KOrganizer priedų konfigūravimas
@@ -123,7 +125,7 @@
 Keywords[eu]=korganizer,plugin-a,modulua
 Keywords[fa]=korganizer،وصله، پیمانه
 Keywords[fi]=korganizer,liitännäinen,moduuli
-Keywords[fr]=KOrganizer,module
+Keywords[fr]=korganizer,module
 Keywords[ga]=korganizer,breiseán,modúl
 Keywords[gl]=korganizer,extensión,módulo
 Keywords[he]=korganizer,plugin,module,מודול,תוסף,ארגונית
@@ -131,6 +133,7 @@
 Keywords[is]=korganizer,íforrit,eining
 Keywords[it]=korganizer,plugin,modulo
 Keywords[ja]=korganizer,プラグイン,モジュール
+Keywords[ka]=korganizer,მოდული
 Keywords[km]=korganizer,កម្មវិធី​ជំនួយ,ម៉ូឌុល
 Keywords[lt]=korganizer,plugin,module,modulis,priedas
 Keywords[mk]=korganizer,plugin,module,корганизатор,приклучок,приклучоци,модул.модули
Index: korganizer/koattendeeeditor.cpp
===================================================================
--- korganizer/koattendeeeditor.cpp	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ korganizer/koattendeeeditor.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -263,6 +263,7 @@
   Attendee *a = new Attendee( i18n("Firstname Lastname"),
                               i18n("name") + "@example.net", true );
   insertAttendee( a, false );
+  mnewAttendees.append(a);
   updateAttendeeInput();
   // We don't want the hint again
   mNameEdit->setClickMessage( "" );
@@ -273,6 +274,7 @@
 void KOAttendeeEditor::readEvent(KCal::Incidence * incidence)
 {
   mdelAttendees.clear();
+  mnewAttendees.clear();
   if ( KOPrefs::instance()->thatIsMe( incidence->organizer().email() ) ) {
     if ( !mOrganizerCombo ) {
       mOrganizerCombo = new QComboBox( mOrganizerHBox );
@@ -418,7 +420,16 @@
   incidence->clearAttendees();
   Attendee * att;
   for (att=mdelAttendees.first();att;att=mdelAttendees.next()) {
-    incidence->addAttendee(new Attendee(*att));
+    bool isNewAttendee = false;
+    for (Attendee *newAtt=mnewAttendees.first();newAtt;newAtt=mnewAttendees.next()) {
+      if (*att==*newAtt) {
+        isNewAttendee = true;
+        break;
+      }
+    }
+    if (!isNewAttendee) {
+      incidence->addAttendee(new Attendee(*att));
+    }
   }
   mdelAttendees.clear();
 }
Index: korganizer/koincidencetooltip.h
===================================================================
--- korganizer/koincidencetooltip.h	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ korganizer/koincidencetooltip.h	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -31,18 +31,28 @@
 }
 using namespace KCal;
 
+class KOAgendaItem;
+
 /**
 @author Reinhold Kainhofer
 */
 class KOIncidenceToolTip : public QToolTip
 {
   public:
-    KOIncidenceToolTip(QWidget * widget, QToolTipGroup * group = 0 ):QToolTip (widget, group) {}
+    KOIncidenceToolTip(QWidget * widget, QToolTipGroup * group = 0 ):QToolTip (widget, group),mText(0) {}
 /*    ~KOIncidenceToolTip();*/
 
   public:
     static void add ( QWidget * widget, Incidence *incidence,
         QToolTipGroup * group = 0, const QString & longText = "" );
+    static void add( KOAgendaItem *item, Incidence *incidence = 0,
+                     QToolTipGroup *group = 0 );
+
+    /* reimplmented from QToolTip */
+    void maybeTip( const QPoint &pos );
+
+  private:
+    QString mText;
 };
 
 #endif
Index: korganizer/koeditorgeneraltodo.cpp
===================================================================
--- korganizer/koeditorgeneraltodo.cpp	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ korganizer/koeditorgeneraltodo.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -185,8 +185,10 @@
   topLayout->addWidget(mCompletedLabel);
   mCompletedLabel->setBuddy( mCompletedCombo );
   mCompletionDateEdit = new KDateEdit( parent );
+  mCompletionDateEdit->hide();
   topLayout->addWidget( mCompletionDateEdit );
   mCompletionTimeEdit = new KTimeEdit( parent, QTime() );
+  mCompletionTimeEdit->hide();
   topLayout->addWidget( mCompletionTimeEdit );
 }
 
Index: korganizer/koeventview.cpp
===================================================================
--- korganizer/koeventview.cpp	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ korganizer/koeventview.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -71,6 +71,8 @@
                      SIGNAL(cutIncidenceSignal(Incidence *)));
   connect(eventPopup,SIGNAL(copyIncidenceSignal(Incidence *)),
                      SIGNAL(copyIncidenceSignal(Incidence *)));
+  connect(eventPopup,SIGNAL(pasteIncidenceSignal()),
+                     SIGNAL(pasteIncidenceSignal()));
   connect(eventPopup,SIGNAL(toggleAlarmSignal(Incidence *)),
                      SIGNAL(toggleAlarmSignal(Incidence*)));
   connect(eventPopup,SIGNAL(dissociateOccurrenceSignal( Incidence *, const QDate & )),
Index: korganizer/korganizer_configtime.desktop
===================================================================
--- korganizer/korganizer_configtime.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ korganizer/korganizer_configtime.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,5 +1,4 @@
 [Desktop Entry]
-Encoding=UTF-8
 Icon=clock
 Type=Service
 ServiceTypes=KCModule
@@ -41,6 +40,7 @@
 Name[is]=Tími og dagsetning
 Name[it]=Data e ora
 Name[ja]=日付と時間
+Name[ka]=დრო და თარიღი
 Name[kk]=Уақыт пен Күн
 Name[km]=កាលបរិច្ឆេទ & ពេលវេលា
 Name[lt]=Laikas ir data
@@ -66,7 +66,8 @@
 Name[tg]=Сана ва вақт
 Name[tr]=Saat & Tarih
 Name[uk]=Час та дата
-Name[uz]=Сана ва вақт
+Name[uz]=Sana va vaqt
+Name[uz@cyrillic]=Сана ва вақт
 Name[zh_CN]=时间和日期
 Name[zh_TW]=時間與日期
 Comment=KOrganizer Time Configuration
@@ -96,6 +97,7 @@
 Comment[is]=KOrganizer tímastillingar
 Comment[it]=Configurazione data di KOrganizer
 Comment[ja]=KOrganizer 時間設定
+Comment[ka]=KOrganizer  დროის კონფიგურაცია
 Comment[kk]=KOrganizer-дің уақыт параметрлері
 Comment[km]=ការ​កំណត់​រចនាសម្ព័ន្ធ​ពេលវេលា​របស់ KOrganizer
 Comment[lt]=KOrganizer laiko konfigūravimas
@@ -139,7 +141,7 @@
 Keywords[eu]=korganizer,ordua,data
 Keywords[fa]=korganizer،زمان
 Keywords[fi]=korganizer,aika
-Keywords[fr]=KOrganizer,date
+Keywords[fr]=korganizer,date
 Keywords[fy]=datum,tijd,tiid,korganizer
 Keywords[ga]=korganizer,am
 Keywords[gl]=korganizer,hora
@@ -149,6 +151,7 @@
 Keywords[is]=korganizer,tími
 Keywords[it]=korganizer,data,ora
 Keywords[ja]=korganizer,時間
+Keywords[ka]=korganizer,დრო
 Keywords[km]=korganizer,ពេលវេលា
 Keywords[lt]=korganizer,time,laikas
 Keywords[mk]=korganizer,time,корганизатор,датум,време
@@ -172,5 +175,6 @@
 Keywords[tg]=korganizer,time,органайзер,вақт
 Keywords[tr]=korganizer,zaman
 Keywords[uk]=korganizer,час,дата
-Keywords[uz]=korganizer,органайзер,сана,вақт
+Keywords[uz]=korganizer,organayzer,sana,vaqt
+Keywords[uz@cyrillic]=korganizer,органайзер,сана,вақт
 Keywords[zh_CN]=korganizer,time,时间
Index: korganizer/agendaview.cpp
===================================================================
--- korganizer/agendaview.cpp	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ korganizer/agendaview.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -18,11 +18,19 @@
 
 #include "agendaview.h"
 
+#include <libkcal/calendarresources.h>
+
 using namespace KOrg;
 
 AgendaView::AgendaView(Calendar * cal, QWidget * parent, const char * name) :
     KOEventView( cal, parent, name )
 {
+  KCal::CalendarResources *calres = dynamic_cast<KCal::CalendarResources*>( cal );
+  if ( calres ) {
+    connect( calres, SIGNAL(signalResourceAdded(ResourceCalendar *)), SLOT(resourcesChanged()) );
+    connect( calres, SIGNAL(signalResourceModified( ResourceCalendar *)), SLOT(resourcesChanged()) );
+    connect( calres, SIGNAL(signalResourceDeleted(ResourceCalendar *)), SLOT(resourcesChanged()) );
+  }
 }
 
 #include "agendaview.moc"
Index: korganizer/koeditorgeneral.cpp
===================================================================
--- korganizer/koeditorgeneral.cpp	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ korganizer/koeditorgeneral.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -304,6 +304,12 @@
   mAlarmEditButton->setEnabled( enable );
 }
 
+
+void KOEditorGeneral::toggleAlarm( bool on )
+{
+    mAlarmButton->setChecked( on );
+}
+
 void KOEditorGeneral::setCategories( const QStringList &categories )
 {
   mCategoriesLabel->setText( categories.join(",") );
Index: korganizer/koprefs.h
===================================================================
--- korganizer/koprefs.h	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ korganizer/koprefs.h	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -106,6 +106,8 @@
     QFont mDefaultTimeBarFont;
     QFont mDefaultMonthViewFont;
 
+    QStringList mMyAddrBookMails;
+
   public: // Do not use - except in KOPrefsDialogMain
     QString mName;
     QString mEmail;
Index: korganizer/koeventeditor.cpp
===================================================================
--- korganizer/koeventeditor.cpp	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ korganizer/koeventeditor.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -59,7 +59,8 @@
 
 KOEventEditor::~KOEventEditor()
 {
-  emit dialogClose( mEvent );
+  if ( !mIsCounter )
+    emit dialogClose( mEvent );
 }
 
 void KOEventEditor::init()
@@ -277,14 +278,25 @@
     writeEvent( event );
     kdDebug(5850) << "KOEventEditor::processInput() event written." << endl;
 
-    if( *event == *mEvent )
+    if( *event == *mEvent ) {
       // Don't do anything
       kdDebug(5850) << "Event not changed\n";
-    else {
+      if ( mIsCounter )
+        KMessageBox::information( this, i18n("You didn't change the event, thus no counter proposal has been sent to the organizer."), i18n("No changes") );
+    } else {
       kdDebug(5850) << "Event changed\n";
       //IncidenceChanger::assignIncidence( mEvent, event );
       writeEvent( mEvent );
-      mChanger->changeIncidence( oldEvent, mEvent, -1, mIsCounter );
+      if ( mIsCounter ) {
+        KOGroupware::instance()->sendCounterProposal( mCalendar, oldEvent, mEvent );
+        // add dummy event at the position of the counter proposal
+        Event *event = mEvent->clone();
+        event->clearAttendees();
+        event->setSummary( i18n("My counter proposal for: %1").arg( mEvent->summary() ) );
+        mChanger->addIncidence( event );
+      } else {
+        mChanger->changeIncidence( oldEvent, mEvent );
+      }
     }
     delete event;
     delete oldEvent;
@@ -312,7 +324,6 @@
   kdDebug(5850) << "KOEventEditor::processCancel()" << endl;
 
   if ( mFreeBusy ) mFreeBusy->cancelReload();
-  if ( mIsCounter ) deleteEvent();
 }
 
 void KOEventEditor::deleteEvent()
@@ -337,6 +348,9 @@
 
   createEmbeddedURLPages( event );
   readDesignerFields( event );
+
+  if ( mIsCounter )
+    mGeneral->invitationBar()->hide();
 }
 
 void KOEventEditor::writeEvent( Event *event )
@@ -406,4 +420,11 @@
   delete ev;
 }
 
+void KOEventEditor::selectInvitationCounterProposal(bool enable)
+{
+  KOIncidenceEditor::selectInvitationCounterProposal( enable );
+  if ( enable )
+    mGeneral->invitationBar()->hide();
+}
+
 #include "koeventeditor.moc"
Index: korganizer/koeditorfreebusy.cpp
===================================================================
--- korganizer/koeditorfreebusy.cpp	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ korganizer/koeditorfreebusy.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -47,6 +47,8 @@
 #include <libkcal/event.h>
 #include <libkcal/freebusy.h>
 
+#include <libemailfunctions/email.h>
+
 #include <kdgantt/KDGanttView.h>
 #include <kdgantt/KDGanttViewTaskItem.h>
 #include <kdgantt/KDGanttViewSubwidgets.h>
@@ -254,13 +256,6 @@
   connect( button, SIGNAL( clicked() ), SLOT( slotCenterOnStart() ) );
   controlLayout->addWidget( button );
 
-  button = new QPushButton( i18n( "Zoom to Fit" ), this );
-  QWhatsThis::add( button,
-		   i18n("Zooms the Gantt chart so that you can see the "
-			"entire duration of the event on it.") );
-  connect( button, SIGNAL( clicked() ), SLOT( slotZoomToTime() ) );
-  controlLayout->addWidget( button );
-
   controlLayout->addStretch( 1 );
 
   button = new QPushButton( i18n( "Pick Date" ), this );
@@ -294,7 +289,7 @@
   }
   mGanttView->setHeaderVisible( true );
   mGanttView->setScale( KDGanttView::Hour );
-  mGanttView->setShowHeaderPopupMenu( true, true, true, false, false, true );
+  mGanttView->setShowHeaderPopupMenu( false, false, false, false, false, false );
   // Initially, show 15 days back and forth
   // set start to even hours, i.e. to 12:AM 0 Min 0 Sec
   QDateTime horizonStart = QDateTime( QDateTime::currentDateTime()
@@ -344,6 +339,13 @@
   initEditWidgets( this, topLayout );
   connect( mRemoveButton, SIGNAL(clicked()),
            SLOT(removeAttendee()) );
+
+  slotOrganizerChanged( mOrganizerCombo->currentText() );
+  connect( mOrganizerCombo, SIGNAL( activated(const QString&) ),
+           this, SLOT( slotOrganizerChanged(const QString&) ) );
+
+  //suppress the buggy consequences of clicks on the time header widget
+  mGanttView->timeHeaderWidget()->installEventFilter( this );
 }
 
 KOEditorFreeBusy::~KOEditorFreeBusy()
@@ -863,4 +865,67 @@
     addNewAttendee();
 }
 
+void KOEditorFreeBusy::slotOrganizerChanged(const QString & newOrganizer)
+{
+  if (newOrganizer==mCurrentOrganizer) return;
+
+  QString name;
+  QString email;
+  bool success = KPIM::getNameAndMail( newOrganizer, name, email );
+
+  if (!success) return;
+//
+
+  Attendee *currentOrganizerAttendee = 0;
+  Attendee *newOrganizerAttendee = 0;
+
+  FreeBusyItem *anItem =
+    static_cast<FreeBusyItem *>( mGanttView->firstChild() );
+  while( anItem ) {
+    Attendee *attendee = anItem->attendee();
+    if( attendee->fullName() == mCurrentOrganizer )
+      currentOrganizerAttendee = attendee;
+
+    if( attendee->fullName() == newOrganizer )
+      newOrganizerAttendee = attendee;
+
+    anItem = static_cast<FreeBusyItem *>( anItem->nextSibling() );
+  }
+
+  int answer = KMessageBox::No;
+
+  if (currentOrganizerAttendee) {
+    answer = KMessageBox::questionYesNo( this, i18n("You are changing the organiser of "
+                                                    "this event, who is also attending, "
+                                                    "do you want to change that attendee "
+                                                    "as well?") );
+  } else {
+    answer = KMessageBox::Yes;
+  }
+
+  if (answer==KMessageBox::Yes) {
+    if (currentOrganizerAttendee) {
+      removeAttendee( currentOrganizerAttendee );
+    }
+
+    if (!newOrganizerAttendee) {
+      Attendee *a = new Attendee( name, email, true );
+      insertAttendee( a, false );
+      updateAttendee();
+    }
+  }
+
+  mCurrentOrganizer = newOrganizer;
+}
+
+bool KOEditorFreeBusy::eventFilter( QObject *watched, QEvent *event )
+{
+  if ( watched == mGanttView->timeHeaderWidget() &&
+       event->type() >= QEvent::MouseButtonPress && event->type() <= QEvent::MouseMove ) {
+    return true;
+  } else {
+    return KOAttendeeEditor::eventFilter( watched, event );
+  }
+}
+
 #include "koeditorfreebusy.moc"
Index: korganizer/koattendeeeditor.h
===================================================================
--- korganizer/koattendeeeditor.h	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ korganizer/koattendeeeditor.h	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -115,6 +115,7 @@
     QPushButton* mAddressBookButton;
 
     QPtrList<KCal::Attendee> mdelAttendees;
+    QPtrList<KCal::Attendee> mnewAttendees;
 
   private:
     bool mDisableItemUpdate;
Index: korganizer/kodaymatrix.h
===================================================================
--- korganizer/kodaymatrix.h	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ korganizer/kodaymatrix.h	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -27,6 +27,7 @@
 #define KODAYMATRIX_H
 
 #include <libkcal/incidencebase.h>
+#include <libkcal/calendar.h>
 
 #include <qframe.h>
 #include <qcolor.h>
@@ -101,7 +102,7 @@
  *
  *  @author Eitzenberger Thomas
  */
-class KODayMatrix: public QFrame
+class KODayMatrix: public QFrame, public KCal::Calendar::Observer
 {
     Q_OBJECT
   public:
@@ -178,6 +179,11 @@
     bool isBeginningOfMonth() const { return mToday <= 8; }
     bool isEndOfMonth() const { return mToday >= 27; }
 
+    /* reimplmented from KCal::Calendar::Observer */
+    void calendarIncidenceAdded( Incidence *incidence );
+    void calendarIncidenceChanged( Incidence *incidence );
+    void calendarIncidenceRemoved( Incidence *incidence );
+
   public slots:
     /** Recalculates all the flags of the days in the matrix like holidays or events
      *  on a day (Actually calls above method with the actual startdate).
@@ -190,6 +196,11 @@
     */
     void recalculateToday();
 
+    /**
+     * Handle resource changes.
+     */
+    void resourcesChanged();
+
   signals:
     /** emitted if the user selects a block of days with the mouse by dragging a rectangle
      *  inside the matrix
@@ -297,6 +308,11 @@
      *  on every repaint.
      */
     QRect     mDaySize;
+
+    /**
+     * Indicate pending calendar changes.
+     */
+    bool mPendingChanges;
 };
 
 #endif
Index: korganizer/korganizer_configgroupscheduling.desktop
===================================================================
--- korganizer/korganizer_configgroupscheduling.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ korganizer/korganizer_configgroupscheduling.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,5 +1,4 @@
 [Desktop Entry]
-Encoding=UTF-8
 Icon=personal
 Type=Service
 ServiceTypes=KCModule
@@ -36,6 +35,7 @@
 Name[is]=Hópáætlun
 Name[it]=Programmazione gruppi
 Name[ja]=グループスケジューリング
+Name[ka]=ჯგუფის დაგეგმვა
 Name[kk]=Топтың жұмысын жоспарлау
 Name[km]=រៀបចំ​កាលវិភាគ​ក្រុម
 Name[lt]=Grupių tvarkaraščių tvarkymas
@@ -87,6 +87,7 @@
 Comment[is]=Stillingar fyrir KOrganizer hópáætlun
 Comment[it]=Configurazione del programmatore gruppi di KOrganizer
 Comment[ja]=KOrganizer グループスケジューリング設定
+Comment[ka]=KOrganizer გჯუფის დაგეგმვის კონფიგურაცია
 Comment[kk]=KOrganizer топтық жұмысты жоспрлаудың параметрлері
 Comment[km]=ការ​កំណត់​រចនាសម្ព័ន្ធ​ការ​រៀបចំ​កាលវិភាគ​ក្រុម​របស់ KOrganizer
 Comment[lt]=KOrganizer grupių tvarkaraščių tvarkymo konfigūravimas
@@ -127,13 +128,14 @@
 Keywords[eu]=korganizer,taldea,antolaketa
 Keywords[fa]=korganizer،گروه، زمان‌بندی
 Keywords[fi]=korganizer,ryhmä,ajastus
-Keywords[fr]=KOrganizer,groupes,planification
+Keywords[fr]=korganizer,groupes,planification
 Keywords[fy]=korganizer,group,scheduling,plannen,groep
 Keywords[gl]=korganizer,grupo,programar
 Keywords[hu]=korganizer,csoport,szervezés
 Keywords[is]=korganizer,hóp,áætlun
 Keywords[it]=korganizer,gruppo,programmazione
 Keywords[ja]=korganizer,グループ,スケジューリング
+Keywords[ka]=korganizer,გჯუფი,დაგეგმვა
 Keywords[km]=korganizer,ក្រុម,កាលវិភាគ
 Keywords[lt]=korganizer,group,scheduling,tvarkaraštis, grupė
 Keywords[mk]=korganizer,group,scheduling,корганизатор,група,групи,закажување
Index: korganizer/incidencechanger.h
===================================================================
--- korganizer/incidencechanger.h	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ korganizer/incidencechanger.h	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -38,7 +38,7 @@
   bool endChange( Incidence *incidence );
 
   bool addIncidence( Incidence *incidence, QWidget *parent = 0 );
-  bool changeIncidence( Incidence *oldinc, Incidence *newinc, int action = -1, bool counter = false );
+  bool changeIncidence( Incidence *oldinc, Incidence *newinc, int action = -1 );
   bool deleteIncidence( Incidence *incidence );
 
   bool cutIncidence( Incidence *incidence );
Index: korganizer/agendaview.h
===================================================================
--- korganizer/agendaview.h	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ korganizer/agendaview.h	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -34,6 +34,8 @@
 
   public slots:
     virtual void finishTypeAhead() = 0;
+
+    virtual void resourcesChanged() = 0;
 };
 
 }
Index: korganizer/koeditorgeneral.h
===================================================================
--- korganizer/koeditorgeneral.h	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ korganizer/koeditorgeneral.h	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -86,6 +86,7 @@
     bool validateInput() { return true; }
 
     void enableAlarm( bool enable );
+    void toggleAlarm( bool on );
 
     void setSummary( const QString & );
     void setDescription( const QString & );
Index: korganizer/timelineitem.cpp
===================================================================
--- korganizer/timelineitem.cpp	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ korganizer/timelineitem.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -119,13 +119,13 @@
     y = coordY;
   else
     y = getCoordY();
-  int startX = myGanttView->myTimeHeader->getCoordX(myStartTime);
-  int endX = myGanttView->myTimeHeader->getCoordX(myEndTime);
+  int startX = myGanttView->timeHeaderWidget()->getCoordX(myStartTime);
+  int endX = myGanttView->timeHeaderWidget()->getCoordX(myEndTime);
 
   const int mw = QMAX( 1, QMIN( 4, endX - startX ) );
   if ( !mLeft || mw != mMarkerWidth ) {
     if ( !mLeft ) {
-      mLeft = new KDCanvasPolygon( myGanttView->myTimeTable, this, Type_is_KDGanttViewItem );
+      mLeft = new KDCanvasPolygon( myGanttView->timeTableWidget(), this, Type_is_KDGanttViewItem );
       mLeft->setBrush( Qt::black );
     }
     QPointArray a = QPointArray( 4 );
@@ -137,7 +137,7 @@
   }
   if ( !mRight || mw != mMarkerWidth ) {
     if ( !mRight ) {
-      mRight = new KDCanvasPolygon( myGanttView->myTimeTable, this, Type_is_KDGanttViewItem );
+      mRight = new KDCanvasPolygon( myGanttView->timeTableWidget(), this, Type_is_KDGanttViewItem );
       mRight->setBrush( Qt::black );
     }
     QPointArray a = QPointArray( 4 );
Index: korganizer/koeventeditor.h
===================================================================
--- korganizer/koeventeditor.h	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ korganizer/koeventeditor.h	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -93,6 +93,8 @@
 
     QObject *typeAheadReceiver() const;
 
+    void selectInvitationCounterProposal( bool enable );
+
   signals:
     void focusReceivedSignal();
 
Index: korganizer/uninstall.desktop
===================================================================
--- korganizer/uninstall.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ korganizer/uninstall.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,3 +1,2 @@
 [Desktop Entry]
-Encoding=UTF-8
 Hidden=true
Index: korganizer/calendarview.h
===================================================================
--- korganizer/calendarview.h	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ korganizer/calendarview.h	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -287,7 +287,7 @@
     /** Create a read-only viewer dialog for the supplied incidence. It calls the correct showXXX method*/
     void showIncidence( Incidence * );
     /** Create an editor for the supplied incidence. It calls the correct editXXX method*/
-    bool editIncidence( Incidence * );
+    bool editIncidence( Incidence *incidence, bool isCounter = false );
     /**
       Delete the supplied incidence. It calls the correct deleteXXX method
       @param force If true, all recurrences and sub-todos (if applicable) will be
@@ -302,6 +302,11 @@
       Copies the selected incidence using the edit_copy() method
     */
     void copyIncidence( Incidence *);
+    /**
+      Pastes the curren incidence using the edit_paste() method
+    */
+    void pasteIncidence();
+
     /** Delete the supplied todo and all sub-todos */
     void deleteSubTodosIncidence ( Todo *todo );
     /**
@@ -517,6 +522,9 @@
     void addIncidenceOn( Incidence *, const QDate & );
     void moveIncidenceTo( Incidence *, const QDate & );
     void filterActivated( int filterNum );
+
+    void resourcesChanged();
+
   protected slots:
     /** Select a view or adapt the current view to display the specified dates. */
     void showDates( const KCal::DateList & );
Index: korganizer/kogroupware.h
===================================================================
--- korganizer/kogroupware.h	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ korganizer/kogroupware.h	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -76,6 +76,13 @@
                           Incidence* incidence, bool isDeleting = false,
                           bool statusChanged = false );
 
+    /**
+      Send counter proposal message.
+      @param oldEvent The original event provided in the invitations.
+      @param newEvent The new event as edited by the user.
+    */
+    void sendCounterProposal( KCal::Calendar* calendar, KCal::Event* oldEvent, KCal::Event *newEvent ) const;
+
     // THIS IS THE ACTUAL KM/KO API
     enum EventState { Accepted, ConditionallyAccepted, Declined, Request };
 
Index: korganizer/korgac/testalarmdlg.cpp
===================================================================
--- korganizer/korgac/testalarmdlg.cpp	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ korganizer/korgac/testalarmdlg.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -39,20 +39,33 @@
 
   KApplication app;
 
-  Event *e = new Event;
-  e->setSummary( "This is a summary." );
-  e->setDtStart( QDateTime::currentDateTime() );
-  e->setDtEnd( QDateTime::currentDateTime().addDays( 1 ) );
-
-  Alarm *a = e->newAlarm();
+  Event *e1 = new Event;
+  e1->setSummary( "This is a summary." );
+  QDateTime now = QDateTime::currentDateTime();
+  e1->setDtStart( now );
+  e1->setDtEnd( now.addDays( 1 ) );
+  Alarm *a = e1->newAlarm();
 //  a->setProcedureAlarm( "/usr/X11R6/bin/xeyes" );
   a->setAudioAlarm( "/opt/kde/share/apps/korganizer/sounds/spinout.wav" );
 
+  Todo *t1 = new Todo;
+  t1->setSummary( "To-do A" );
+  t1->setDtDue( now );
+  t1->newAlarm();
+
+  Event *e2 = new Event;
+  e2->setSummary( "This is another summary." );
+  e2->setDtStart( now );
+  e2->setDtEnd( now.addDays( 1 ) );
+  e2->newAlarm();
+
   AlarmDialog dlg;
   app.setMainWidget( &dlg );
-  dlg.addIncidence( e, QDateTime::currentDateTime() );
+  dlg.addIncidence( e1, QDateTime::currentDateTime() );
+  dlg.addIncidence( t1, QDateTime::currentDateTime() );
+  dlg.addIncidence( e2, QDateTime::currentDateTime() );
   dlg.show();
   dlg.eventNotification();
-    
+
   app.exec();
 }
Index: korganizer/korgac/alarmdialog.cpp
===================================================================
--- korganizer/korgac/alarmdialog.cpp	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ korganizer/korgac/alarmdialog.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -162,8 +162,13 @@
 void AlarmDialog::slotOk()
 {
   ItemList selection = selectedItems();
-  for ( ItemList::Iterator it = selection.begin(); it != selection.end(); ++it )
+  for ( ItemList::Iterator it = selection.begin(); it != selection.end(); ++it ) {
+    if ( (*it)->itemBelow() )
+      (*it)->itemBelow()->setSelected( true );
+    else if ( (*it)->itemAbove() )
+      (*it)->itemAbove()->setSelected( true );
     delete *it;
+  }
   if ( activeCount() == 0 )
     accept();
   else {
@@ -282,10 +287,12 @@
 
 void AlarmDialog::dismissAll()
 {
-  for ( QListViewItemIterator it( mIncidenceListView ) ; it.current() ; ++it ) {
+  for ( QListViewItemIterator it( mIncidenceListView ) ; it.current() ; ) {
     AlarmListItem *item = static_cast<AlarmListItem*>( it.current() );
-    if ( !item->isVisible() )
+    if ( !item->isVisible() ) {
+      ++it;
       continue;
+    }
     delete item;
   }
   setTimer();
@@ -295,6 +302,10 @@
 
 void AlarmDialog::show()
 {
+  mIncidenceListView->clearSelection();
+  if ( mIncidenceListView->firstChild() )
+    mIncidenceListView->firstChild()->setSelected( true );
+  updateButtons();
   KDialogBase::show();
   KWin::setState( winId(), NET::KeepAbove );
   KWin::setOnAllDesktops( winId(), true );
Index: korganizer/korgac/korgac.desktop
===================================================================
--- korganizer/korgac/korgac.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ korganizer/korgac/korgac.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,6 +1,5 @@
 # KDE Config File
 [Desktop Entry]
-Encoding=UTF-8
 Name=KOrganizer Reminder Client
 Name[af]=KOrganizer herhinner kliënt
 Name[ar]=زبون المنبه لِــ KOrganizer
@@ -23,6 +22,7 @@
 Name[is]=Áminningarforrit fyrir KOrganizer
 Name[it]=Client degli avvisi di KOrganizer
 Name[ja]=KOrganizer リマインダクライアント
+Name[ka]=KOrganizer შემხსენებელის კლიენტი
 Name[kk]=KOrganizer-дің еске салу клиенті
 Name[km]=កម្មវិធី​រំលឹក​របស់ KOrganizer
 Name[lt]=KOrganizer priminimų klientas
@@ -69,6 +69,7 @@
 GenericName[is]=Áminningarpúki fyrir KOrganizer
 GenericName[it]=Client del demone degli avvisi di KOrganizer
 GenericName[ja]=KOrganizer リマインダデーモンクライアント
+GenericName[ka]=KOrganizer შემხსენებელის დემონის კლიენტი
 GenericName[kk]=Organizer-дің еске салу қызметінің клиенті
 GenericName[km]=កម្មវិធី​ដេមិន​អ្នក​រំលឹក​របស់ KOrganizer
 GenericName[lt]=KOrganizer priminimų tarnybos klientas
Index: korganizer/multiagendaview.cpp
===================================================================
--- korganizer/multiagendaview.cpp	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ korganizer/multiagendaview.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -19,9 +19,14 @@
 #include "multiagendaview.h"
 
 #include "koagendaview.h"
+#include "koagenda.h"
+#include "koprefs.h"
+#include "timelabels.h"
 
 #include <libkcal/calendarresources.h>
 
+#include <kglobalsettings.h>
+
 #include <qlayout.h>
 #include <qvbox.h>
 #include <qobjectlist.h>
@@ -35,21 +40,66 @@
 using namespace KOrg;
 
 MultiAgendaView::MultiAgendaView(Calendar * cal, QWidget * parent, const char *name ) :
-    AgendaView( cal, parent, name )
+    AgendaView( cal, parent, name ),
+    mLastMovedSplitter( 0 ),
+    mUpdateOnShow( false ),
+    mPendingChanges( true )
 {
   QBoxLayout *topLevelLayout = new QHBoxLayout( this );
+
+  QFontMetrics fm( font() );
+  int topLabelHeight = 2 * fm.height();
+
+  QVBox *topSideBox = new QVBox( this );
+  QWidget *topSideSpacer = new QWidget( topSideBox );
+  topSideSpacer->setFixedHeight( topLabelHeight );
+  mLeftSplitter = new QSplitter( Qt::Vertical, topSideBox );
+  mLeftSplitter->setOpaqueResize( KGlobalSettings::opaqueResize() );
+  QLabel *label = new QLabel( i18n("All Day"), mLeftSplitter );
+  label->setAlignment( Qt::AlignRight | Qt::AlignVCenter | Qt::WordBreak );
+  QVBox *sideBox = new QVBox( mLeftSplitter );
+  EventIndicator *eiSpacer = new EventIndicator( EventIndicator::Top, sideBox );
+  eiSpacer->changeColumns( 0 );
+  mTimeLabels = new TimeLabels( 24, sideBox );
+  eiSpacer = new EventIndicator( EventIndicator::Bottom, sideBox );
+  eiSpacer->changeColumns( 0 );
+  mLeftBottomSpacer = new QWidget( topSideBox );
+  topLevelLayout->addWidget( topSideBox );
+
   mScrollView = new QScrollView( this );
   mScrollView->setResizePolicy( QScrollView::Manual );
   mScrollView->setVScrollBarMode( QScrollView::AlwaysOff );
   mScrollView->setFrameShape( QFrame::NoFrame );
-  topLevelLayout->addWidget( mScrollView );
+  topLevelLayout->addWidget( mScrollView, 100 );
   mTopBox = new QHBox( mScrollView->viewport() );
   mScrollView->addChild( mTopBox );
+
+  topSideBox = new QVBox( this );
+  topSideSpacer = new QWidget( topSideBox );
+  topSideSpacer->setFixedHeight( topLabelHeight );
+  mRightSplitter = new QSplitter( Qt::Vertical, topSideBox );
+  mRightSplitter->setOpaqueResize( KGlobalSettings::opaqueResize() );
+  new QWidget( mRightSplitter );
+  sideBox = new QVBox( mRightSplitter );
+  eiSpacer = new EventIndicator( EventIndicator::Top, sideBox );
+  eiSpacer->setFixedHeight( eiSpacer->minimumHeight() );
+  eiSpacer->changeColumns( 0 );
+  mScrollBar = new QScrollBar( Qt::Vertical, sideBox );
+  eiSpacer = new EventIndicator( EventIndicator::Bottom, sideBox );
+  eiSpacer->setFixedHeight( eiSpacer->minimumHeight() );
+  eiSpacer->changeColumns( 0 );
+  mRightBottomSpacer = new QWidget( topSideBox );
+  topLevelLayout->addWidget( topSideBox );
+
   recreateViews();
 }
 
 void MultiAgendaView::recreateViews()
 {
+  if ( !mPendingChanges )
+    return;
+  mPendingChanges = false;
+
   deleteViews();
 
   CalendarResources *calres = dynamic_cast<CalendarResources*>( calendar() );
@@ -75,8 +125,29 @@
       }
     }
   }
+
+  // no resources activated, so stop here to avoid crashing somewhere down the line, TODO: show a nice message instead
+  if ( mAgendaViews.isEmpty() )
+    return;
+
   setupViews();
-  resizeScrollView( size() );
+  QTimer::singleShot( 0, this, SLOT(slotResizeScrollView()) );
+  mTimeLabels->updateConfig();
+
+  QScrollBar *scrollBar = mAgendaViews.first()->agenda()->verticalScrollBar();
+  mScrollBar->setMinValue( scrollBar->minValue() );
+  mScrollBar->setMaxValue( scrollBar->maxValue() );
+  mScrollBar->setLineStep( scrollBar->lineStep() );
+  mScrollBar->setPageStep( scrollBar->pageStep() );
+  mScrollBar->setValue( scrollBar->value() );
+  connect( mTimeLabels->verticalScrollBar(), SIGNAL(valueChanged(int)),
+           mScrollBar, SLOT(setValue(int)) );
+  connect( mScrollBar, SIGNAL(valueChanged(int)),
+           mTimeLabels, SLOT(positionChanged(int)) );
+
+  installSplitterEventFilter( mLeftSplitter );
+  installSplitterEventFilter( mRightSplitter );
+  resizeSplitters();
 }
 
 void MultiAgendaView::deleteViews()
@@ -87,6 +158,7 @@
   }
   mAgendaViews.clear();
   mAgendaWidgets.clear();
+  mLastMovedSplitter = 0;
 }
 
 void MultiAgendaView::setupViews()
@@ -112,6 +184,8 @@
              SIGNAL(cutIncidenceSignal(Incidence*)) );
     connect( agenda, SIGNAL(copyIncidenceSignal(Incidence*)),
              SIGNAL(copyIncidenceSignal(Incidence*)) );
+    connect( agenda, SIGNAL(pasteIncidenceSignal()),
+             SIGNAL(pasteIncidenceSignal()) );
     connect( agenda, SIGNAL(toggleAlarmSignal(Incidence*)),
              SIGNAL(toggleAlarmSignal(Incidence*)) );
     connect( agenda, SIGNAL(dissociateOccurrenceSignal(Incidence*, const QDate&)),
@@ -134,11 +208,20 @@
     connect( agenda, SIGNAL(timeSpanSelectionChanged()),
              SLOT(slotClearTimeSpanSelection()) );
 
+    disconnect( agenda->agenda(), SIGNAL(zoomView(const int,const QPoint&,const Qt::Orientation)), agenda, 0 );
+    connect( agenda->agenda(), SIGNAL(zoomView(const int,const QPoint&,const Qt::Orientation)),
+             SLOT(zoomView(const int,const QPoint&,const Qt::Orientation)) );
   }
 
   FOREACH_VIEW( agenda ) {
     agenda->readSettings();
   }
+
+  int minWidth = 0;
+  for ( QValueList<QWidget*>::ConstIterator it = mAgendaWidgets.constBegin(); it != mAgendaWidgets.constEnd(); ++it )
+    minWidth = QMAX( minWidth, (*it)->minimumSizeHint().width() );
+  for ( QValueList<QWidget*>::ConstIterator it = mAgendaWidgets.constBegin(); it != mAgendaWidgets.constEnd(); ++it )
+    (*it)->setMinimumWidth( minWidth );
 }
 
 MultiAgendaView::~ MultiAgendaView()
@@ -172,7 +255,8 @@
 
 void MultiAgendaView::showDates(const QDate & start, const QDate & end)
 {
-  kdDebug() << k_funcinfo << endl;
+  mStartDate = start;
+  mEndDate = end;
   recreateViews();
   FOREACH_VIEW( agendaView )
     agendaView->showDates( start, end );
@@ -186,7 +270,6 @@
 
 void MultiAgendaView::updateView()
 {
-  kdDebug() << k_funcinfo << endl;
   recreateViews();
   FOREACH_VIEW( agendaView )
     agendaView->updateView();
@@ -248,12 +331,21 @@
   QVBox *box = new QVBox( mTopBox );
   QLabel *l = new QLabel( label, box );
   l->setAlignment( AlignVCenter | AlignHCenter );
-  KOAgendaView* av = new KOAgendaView( calendar(), box );
+  KOAgendaView* av = new KOAgendaView( calendar(), box, 0, true );
   av->setResource( res, subRes );
   av->setIncidenceChanger( mChanger );
+  av->agenda()->setVScrollBarMode( QScrollView::AlwaysOff );
   mAgendaViews.append( av );
   mAgendaWidgets.append( box );
   box->show();
+  mTimeLabels->setAgenda( av->agenda() );
+
+  connect( av->agenda()->verticalScrollBar(), SIGNAL(valueChanged(int)),
+           mTimeLabels, SLOT(positionChanged(int)) );
+  connect( mTimeLabels->verticalScrollBar(), SIGNAL(valueChanged(int)),
+           av, SLOT(setContentsPos(int)) );
+
+  installSplitterEventFilter( av->splitter() );
 }
 
 void MultiAgendaView::resizeEvent(QResizeEvent * ev)
@@ -264,10 +356,18 @@
 
 void MultiAgendaView::resizeScrollView(const QSize & size)
 {
-  int width = QMAX( mTopBox->sizeHint().width(), size.width() );
+  const int widgetWidth = size.width() - mTimeLabels->width() - mScrollBar->width();
+  int width = QMAX( mTopBox->sizeHint().width(), widgetWidth );
   int height = size.height();
-  if ( width > size.width() )
-    height -= mScrollView->horizontalScrollBar()->height();
+  if ( width > widgetWidth ) {
+    const int sbHeight = mScrollView->horizontalScrollBar()->height();
+    height -= sbHeight;
+    mLeftBottomSpacer->setFixedHeight( sbHeight );
+    mRightBottomSpacer->setFixedHeight( sbHeight );
+  } else {
+    mLeftBottomSpacer->setFixedHeight( 0 );
+    mRightBottomSpacer->setFixedHeight( 0 );
+  }
   mScrollView->resizeContents( width, height );
   mTopBox->resize( width, height );
 }
@@ -279,4 +379,106 @@
     agenda->setIncidenceChanger( changer );
 }
 
+void MultiAgendaView::updateConfig()
+{
+  AgendaView::updateConfig();
+  mTimeLabels->updateConfig();
+  FOREACH_VIEW( agenda )
+    agenda->updateConfig();
+}
+
+// KDE4: not needed anymore, QSplitter has a moved signal there
+bool MultiAgendaView::eventFilter(QObject * obj, QEvent * event)
+{
+  if ( obj->className() == QCString("QSplitterHandle") ) {
+    if ( (event->type() == QEvent::MouseMove && KGlobalSettings::opaqueResize())
+           || event->type() == QEvent::MouseButtonRelease ) {
+      FOREACH_VIEW( agenda ) {
+        if ( agenda->splitter() == obj->parent() )
+          mLastMovedSplitter = agenda->splitter();
+      }
+      if ( mLeftSplitter == obj->parent() )
+        mLastMovedSplitter = mLeftSplitter;
+      else if ( mRightSplitter == obj->parent() )
+        mLastMovedSplitter = mRightSplitter;
+      QTimer::singleShot( 0, this, SLOT(resizeSplitters()) );
+    }
+  }
+  return AgendaView::eventFilter( obj, event );
+}
+
+void MultiAgendaView::resizeSplitters()
+{
+  if ( !mLastMovedSplitter )
+    mLastMovedSplitter = mAgendaViews.first()->splitter();
+  FOREACH_VIEW( agenda ) {
+    if ( agenda->splitter() == mLastMovedSplitter )
+      continue;
+    agenda->splitter()->setSizes( mLastMovedSplitter->sizes() );
+  }
+  if ( mLastMovedSplitter != mLeftSplitter )
+    mLeftSplitter->setSizes( mLastMovedSplitter->sizes() );
+  if ( mLastMovedSplitter != mRightSplitter )
+    mRightSplitter->setSizes( mLastMovedSplitter->sizes() );
+}
+
+void MultiAgendaView::zoomView( const int delta, const QPoint & pos, const Qt::Orientation ori )
+{
+  if ( ori == Qt::Vertical ) {
+    if ( delta > 0 ) {
+      if ( KOPrefs::instance()->mHourSize > 4 )
+        KOPrefs::instance()->mHourSize--;
+    } else {
+      KOPrefs::instance()->mHourSize++;
+    }
+  }
+
+  FOREACH_VIEW( agenda )
+    agenda->zoomView( delta, pos, ori );
+
+  mTimeLabels->updateConfig();
+  mTimeLabels->positionChanged();
+  mTimeLabels->repaint();
+}
+
+// KDE4: not needed, use existing QSplitter signals instead
+void MultiAgendaView::installSplitterEventFilter(QSplitter * splitter)
+{
+  QObjectList *objlist = splitter->queryList( "QSplitterHandle" );
+  // HACK: when not being visible, the splitter handle is sometimes not found
+  // for unknown reasons, so trigger an update when we are shown again
+  if ( objlist->count() == 0 && !isVisible() )
+    mUpdateOnShow = true;
+  QObjectListIt it( *objlist );
+  QObject *obj;
+  while ( (obj = it.current()) != 0 ) {
+    obj->removeEventFilter( this );
+    obj->installEventFilter( this );
+    ++it;
+  }
+  delete objlist;
+}
+
+void MultiAgendaView::slotResizeScrollView()
+{
+  resizeScrollView( size() );
+}
+
+void MultiAgendaView::show()
+{
+  AgendaView::show();
+  if ( mUpdateOnShow ) {
+    mUpdateOnShow = false;
+    mPendingChanges = true; // force a full view recreation
+    showDates( mStartDate, mEndDate );
+  }
+}
+
+void MultiAgendaView::resourcesChanged()
+{
+  mPendingChanges = true;
+  FOREACH_VIEW( agenda )
+    agenda->resourcesChanged();
+}
+
 #include "multiagendaview.moc"
Index: korganizer/Makefile.am
===================================================================
--- korganizer/Makefile.am	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ korganizer/Makefile.am	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -109,7 +109,8 @@
 	agendaview.cpp multiagendaview.cpp \
 	timelineitem.cpp \
 	kotimelineview.cpp \
-	koattendeeeditor.cpp
+	koattendeeeditor.cpp \
+	timelabels.cpp
 
 
 libkorganizer_eventviewer_la_LDFLAGS = $(all_libraries) $(KDE_RPATH) \
Index: korganizer/koeventpopupmenu.h
===================================================================
--- korganizer/koeventpopupmenu.h	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ korganizer/koeventpopupmenu.h	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -51,6 +51,7 @@
   protected slots:
     void popupShow();
     void popupEdit();
+    void popupPaste();
     void print();
     void popupDelete();
     void popupCut();
@@ -66,6 +67,7 @@
     void deleteIncidenceSignal(Incidence *);
     void cutIncidenceSignal(Incidence *);
     void copyIncidenceSignal(Incidence *);
+    void pasteIncidenceSignal();
     void toggleAlarmSignal(Incidence *);
     void dissociateOccurrenceSignal( Incidence *, const QDate & );
     void dissociateFutureOccurrenceSignal( Incidence *, const QDate & );
Index: korganizer/interfaces/calendar/calendarplugin.desktop
===================================================================
--- korganizer/interfaces/calendar/calendarplugin.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ korganizer/interfaces/calendar/calendarplugin.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,5 +1,4 @@
 [Desktop Entry]
-Encoding=UTF-8
 Type=ServiceType
 X-KDE-ServiceType=Calendar/Plugin
 Comment=Calendar Plugin
@@ -31,6 +30,7 @@
 Comment[is]=Dagatals íforrit
 Comment[it]=Plugin calendario
 Comment[ja]=カレンダープラグイン
+Comment[ka]=კალენდრის მოდული
 Comment[kk]=Күнтізбе модулі
 Comment[km]=កម្មវិធី​ជំនួយ​ប្រតិទិន
 Comment[ko]=달력 플러그인
@@ -61,7 +61,8 @@
 Comment[th]=โปรแกรมเสริมบันทึกประจำวัน
 Comment[tr]=Takvim Eklentisi
 Comment[uk]=Втулок календаря
-Comment[uz]=Календар плагини
+Comment[uz]=Kalendar plagini
+Comment[uz@cyrillic]=Календар плагини
 Comment[ven]=U pulaga ha khalenda
 Comment[vi]=Plugin lịch
 Comment[xh]=Ikhalenda ye Plugin
Index: korganizer/interfaces/calendar/calendardecoration.desktop
===================================================================
--- korganizer/interfaces/calendar/calendardecoration.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ korganizer/interfaces/calendar/calendardecoration.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,5 +1,4 @@
 [Desktop Entry]
-Encoding=UTF-8
 Type=ServiceType
 X-KDE-ServiceType=Calendar/Decoration
 Comment=Calendar Decoration Plugin
@@ -29,6 +28,7 @@
 Comment[is]=Íforrit til að skreyta texta dagatals
 Comment[it]=Plugin di decorazione del calendario
 Comment[ja]=カレンダー装飾プラグイン
+Comment[ka]=კალენდრის გაფორმების მოდული
 Comment[kk]=Күнтізбені безендіру модулі
 Comment[km]=កម្មវិធី​ជំនួយ​សម្រាប់​តុបតែង​ប្រតិទិន
 Comment[lt]=vCalendar dekoracijų priedas
Index: korganizer/interfaces/korganizer/korgprintplugin.desktop
===================================================================
--- korganizer/interfaces/korganizer/korgprintplugin.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ korganizer/interfaces/korganizer/korgprintplugin.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,5 +1,4 @@
 [Desktop Entry]
-Encoding=UTF-8
 Type=ServiceType
 X-KDE-ServiceType=KOrganizer/PrintPlugin
 Comment=KOrganizer Part
@@ -26,6 +25,7 @@
 Comment[is]=KOrganizer hluti
 Comment[it]=Parte di KOrganizer
 Comment[ja]=KOrganizer パート
+Comment[ka]=KOrganizer კომპონენტი
 Comment[kk]=KOrganizer бөлшегі
 Comment[km]=ផ្នែក​របស់ KOrganizer
 Comment[lt]=KOrganizer dalis
Index: korganizer/interfaces/korganizer/incidencechangerbase.h
===================================================================
--- korganizer/interfaces/korganizer/incidencechangerbase.h	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ korganizer/interfaces/korganizer/incidencechangerbase.h	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -49,7 +49,7 @@
 
   virtual bool addIncidence( Incidence *incidence, QWidget *parent = 0 ) = 0;
   virtual bool changeIncidence( Incidence *newinc, Incidence *oldinc,
-                                int action = -1, bool counter = false ) = 0;
+                                int action = -1 ) = 0;
   virtual bool deleteIncidence( Incidence *incidence ) = 0;
   virtual bool cutIncidence( Incidence *incidence ) = 0;
 
Index: korganizer/interfaces/korganizer/korganizerpart.desktop
===================================================================
--- korganizer/interfaces/korganizer/korganizerpart.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ korganizer/interfaces/korganizer/korganizerpart.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,5 +1,4 @@
 [Desktop Entry]
-Encoding=UTF-8
 Type=ServiceType
 X-KDE-ServiceType=KOrganizer/Part
 Comment=KOrganizer Part
@@ -26,6 +25,7 @@
 Comment[is]=KOrganizer hluti
 Comment[it]=Parte di KOrganizer
 Comment[ja]=KOrganizer パート
+Comment[ka]=KOrganizer კომპონენტი
 Comment[kk]=KOrganizer бөлшегі
 Comment[km]=ផ្នែក​របស់ KOrganizer
 Comment[lt]=KOrganizer dalis
Index: korganizer/interfaces/korganizer/baseview.h
===================================================================
--- korganizer/interfaces/korganizer/baseview.h	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ korganizer/interfaces/korganizer/baseview.h	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -198,6 +198,11 @@
     void copyIncidenceSignal(Incidence *);
 
     /**
+    * instructs the receiver to paste the incidence
+    */
+    void pasteIncidenceSignal();
+
+    /**
      * instructs the receiver to toggle the alarms of the Incidence.
      */
     void toggleAlarmSignal(Incidence *);
Index: korganizer/kotodoeditor.cpp
===================================================================
--- korganizer/kotodoeditor.cpp	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ korganizer/kotodoeditor.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -47,7 +47,6 @@
 #include "koeditorgeneraltodo.h"
 #include "koeditordetails.h"
 #include "koeditorrecurrence.h"
-#include "koeditoralarms.h"
 
 #include "kotodoeditor.h"
 #include "kocore.h"
@@ -117,8 +116,7 @@
     mGeneral->initCompletion(topFrame2,completionLayout);
 
     mGeneral->initAlarm(topFrame,topLayout);
-    mGeneral->enableAlarm( false );
-
+ 
     mGeneral->initSecrecy( topFrame2, topLayout2 );
     mGeneral->initDescription(topFrame2,topLayout2);
   } else {
@@ -132,7 +130,6 @@
     mGeneral->initStatus(topFrame,topLayout);
     QBoxLayout *alarmLineLayout = new QHBoxLayout(topLayout);
     mGeneral->initAlarm(topFrame,alarmLineLayout);
-    mGeneral->enableAlarm( false );
     alarmLineLayout->addStretch( 1 );
     mGeneral->initDescription(topFrame,topLayout);
     mGeneral->initAttachments(topFrame,topLayout);
@@ -141,9 +138,7 @@
     connect( this, SIGNAL( signalAddAttachments( const QStringList&, const QStringList&, bool ) ),
              mGeneral, SLOT( addAttachments( const QStringList&, const QStringList&, bool ) ) );
   }
-  // By default, the To-do has no time associated and
-  // neither a start nor end time.
-  mGeneral->setDefaults( QDateTime(), false );
+  mGeneral->enableAlarm( true );
 
   mGeneral->finishSetup();
 }
@@ -185,6 +180,7 @@
   mTodo = 0;
   mCalendar = 0;
   setCaption( i18n("New To-do") );
+  loadDefaults();
 }
 
 void KOTodoEditor::setTexts( const QString &summary, const QString &description )
@@ -205,6 +201,7 @@
 {
   kdDebug(5850) << k_funcinfo << endl;
   setDates( QDateTime::currentDateTime().addDays(7), true, 0 );
+  mGeneral->toggleAlarm( true );
 }
 
 bool KOTodoEditor::processInput()
@@ -287,7 +284,6 @@
   kdDebug(5850)<<"read todo"<<endl;
   mGeneral->readTodo( todo, calendar );
   mDetails->readEvent( todo );
-//  mAlarms->readIncidence( todo );
   mRecurrence->readIncidence( todo );
 
   createEmbeddedURLPages( todo );
Index: korganizer/koagenda.cpp
===================================================================
--- korganizer/koagenda.cpp	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ korganizer/koagenda.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -182,6 +182,7 @@
   mRows = 1;
   mGridSpacingY = 24;
   mAllDayMode = true;
+  setVScrollBarMode( AlwaysOff );
 
   init();
 }
@@ -1783,7 +1784,8 @@
     mGridSpacingX = double( newSize.width() - 2 * frameWidth() ) / (double)mColumns;
     mGridSpacingY = newSize.height() - 2 * frameWidth();
   } else {
-    mGridSpacingX = double( newSize.width() - verticalScrollBar()->width() - 2 * frameWidth()) / double(mColumns);
+    int scrollbarWidth = vScrollBarMode() != AlwaysOff ? verticalScrollBar()->width() : 0;
+    mGridSpacingX = double( newSize.width() - scrollbarWidth - 2 * frameWidth()) / double(mColumns);
     // make sure that there are not more than 24 per day
     mGridSpacingY = double(newSize.height() - 2 * frameWidth()) / double(mRows);
     if ( mGridSpacingY < mDesiredGridSpacingY )
Index: korganizer/koagendaview.h
===================================================================
--- korganizer/koagendaview.h	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ korganizer/koagendaview.h	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -28,6 +28,8 @@
 #include <qscrollview.h>
 #include <qlabel.h>
 
+#include <libkcal/calendar.h>
+
 #include "calprinter.h"
 
 #include "agendaview.h"
@@ -38,6 +40,7 @@
 
 class KOAgenda;
 class KOAgendaItem;
+class TimeLabels;
 class KConfig;
 
 namespace KCal {
@@ -48,50 +51,6 @@
   class IncidenceChangerBase;
 }
 
-class TimeLabels : public QScrollView
-{
-    Q_OBJECT
-  public:
-    TimeLabels( int rows, QWidget *parent = 0, const char *name = 0,
-                WFlags f = 0 );
-
-    /** Calculates the minimum width */
-    virtual int minimumWidth() const;
-
-    /** updates widget's internal state */
-    void updateConfig();
-
-    /**  */
-    void setAgenda( KOAgenda *agenda );
-
-    /**  */
-    virtual void paintEvent( QPaintEvent *e );
-
-  public slots:
-    /** update time label positions */
-    void positionChanged();
-
-  protected:
-    void drawContents( QPainter *p, int cx, int cy, int cw, int ch );
-
-  private slots:
-    /** update the position of the marker showing the mouse position */
-    void mousePosChanged(const QPoint &pos);
-
-    void showMousePos();
-    void hideMousePos();
-
-    void setCellHeight( double height );
-
-  private:
-    int mRows;
-    double mCellHeight;
-    int mMiniWidth;
-    KOAgenda* mAgenda;
-
-    QFrame *mMousePos;  // shows a marker for the current mouse position in y direction
-};
-
 class EventIndicator : public QFrame
 {
     Q_OBJECT
@@ -110,8 +69,6 @@
 
   private:
     int mColumns;
-    QHBox *mTopBox;
-    QBoxLayout *mTopLayout;
     Location mLocation;
     QPixmap mPixmap;
     QMemArray<bool> mEnabled;
@@ -146,11 +103,11 @@
   KOAgendaView is the agenda-like view used to display events in a single one or
   multi-day view.
 */
-class KOAgendaView : public KOrg::AgendaView
+class KOAgendaView : public KOrg::AgendaView, public KCal::Calendar::Observer
 {
     Q_OBJECT
   public:
-    KOAgendaView( Calendar *cal, QWidget *parent = 0, const char *name = 0 );
+    KOAgendaView( Calendar *cal, QWidget *parent = 0, const char *name = 0, bool isSideBySide = false );
     virtual ~KOAgendaView();
 
 
@@ -191,6 +148,14 @@
     /** Show only incidences from the given resource. */
     void setResource( KCal::ResourceCalendar *res, const QString &subResource = QString::null );
 
+    KOAgenda* agenda() const { return mAgenda; }
+    QSplitter* splitter() const { return mSplitterAgenda; }
+
+    /* reimplmented from KCal::Calendar::Observer */
+    void calendarIncidenceAdded( Incidence *incidence );
+    void calendarIncidenceChanged( Incidence *incidence );
+    void calendarIncidenceRemoved( Incidence *incidence );
+
   public slots:
     virtual void updateView();
     virtual void updateConfig();
@@ -231,6 +196,9 @@
       const Qt::Orientation orient=Qt::Horizontal );
 
     void clearTimeSpanSelection();
+
+    void resourcesChanged();
+
   signals:
     void toggleExpand();
     void zoomViewHorizontally(const QDate &, int count );
@@ -319,6 +287,9 @@
 
     KCal::ResourceCalendar *mResource;
     QString mSubResource;
+
+    bool mIsSideBySide;
+    bool mPendingChanges;
 };
 
 #endif
Index: korganizer/koeditorfreebusy.h
===================================================================
--- korganizer/koeditorfreebusy.h	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ korganizer/koeditorfreebusy.h	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -96,7 +96,10 @@
     void updateCurrentItem();
     void clearSelection() const;
     void changeStatusForMe( KCal::Attendee::PartStat status );
+    virtual bool eventFilter( QObject *watched, QEvent *event );
 
+  private slots:
+    void slotOrganizerChanged( const QString &newOrganizer );
   private:
     void updateFreeBusyData( FreeBusyItem * );
 
@@ -117,6 +120,8 @@
     QTimer mReloadTimer;
 
     bool mForceDownload;
+
+    QString mCurrentOrganizer;
 };
 
 #endif
Index: korganizer/kodaymatrix.cpp
===================================================================
--- korganizer/kodaymatrix.cpp	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ korganizer/kodaymatrix.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -54,6 +54,7 @@
 #include <qcursor.h>
 #include <kpopupmenu.h>
 #include <X11/Xlib.h>
+#undef FocusIn
 #undef KeyPress
 #undef None
 #undef Status
@@ -99,7 +100,7 @@
 const int KODayMatrix::NUMDAYS = 42;
 
 KODayMatrix::KODayMatrix( QWidget *parent, const char *name )
-  : QFrame( parent, name ), mCalendar( 0 ), mStartDate()
+  : QFrame( parent, name ), mCalendar( 0 ), mStartDate(), mPendingChanges( false )
 {
   // initialize dynamic arrays
   mDays = new QDate[ NUMDAYS ];
@@ -115,7 +116,19 @@
 
 void KODayMatrix::setCalendar( Calendar *cal )
 {
+  if ( mCalendar ) {
+    mCalendar->unregisterObserver( this );
+    mCalendar->disconnect( this );
+  }
+
   mCalendar = cal;
+  mCalendar->registerObserver( this );
+  CalendarResources *calres = dynamic_cast<CalendarResources*>( cal );
+  if ( calres ) {
+    connect( calres, SIGNAL(signalResourceAdded(ResourceCalendar *)), SLOT(resourcesChanged()) );
+    connect( calres, SIGNAL(signalResourceModified( ResourceCalendar *)), SLOT(resourcesChanged()) );
+    connect( calres, SIGNAL(signalResourceDeleted(ResourceCalendar *)), SLOT(resourcesChanged()) );
+  }
 
   setAcceptDrops( mCalendar );
 
@@ -138,6 +151,8 @@
 
 KODayMatrix::~KODayMatrix()
 {
+  if ( mCalendar )
+    mCalendar->unregisterObserver( this );
   delete [] mDays;
   delete [] mDayLabels;
   delete [] mEvents;
@@ -248,6 +263,11 @@
     recalculateToday();
   }
 
+  // the calendar hasn't changed in the meantime and the selected range is still the same
+  // so we can safe the expensive updateEvents() call
+  if ( !daychanged && !mPendingChanges )
+    return;
+
   // TODO_Recurrence: If we just change the selection, but not the data, there's
   // no need to update the whole list of events... This is just a waste of
   // computational power (and it takes forever!)
@@ -269,6 +289,7 @@
 
 void KODayMatrix::updateEvents()
 {
+  kdDebug( 5850 ) << k_funcinfo << endl;
   if ( !mCalendar ) return;
 
   for( int i = 0; i < NUMDAYS; i++ ) {
@@ -288,6 +309,8 @@
     }
     mEvents[ i ] = numEvents;
   }
+
+  mPendingChanges = false;
 }
 
 const QDate& KODayMatrix::getDate( int offset )
@@ -315,6 +338,27 @@
            6 - x / mDaySize.width() : x / mDaySize.width() );
 }
 
+void KODayMatrix::calendarIncidenceAdded(Incidence * incidence)
+{
+  mPendingChanges = true;
+}
+
+void KODayMatrix::calendarIncidenceChanged(Incidence * incidence)
+{
+  mPendingChanges = true;
+}
+
+void KODayMatrix::calendarIncidenceRemoved(Incidence * incidence)
+{
+  mPendingChanges = true;
+}
+
+void KODayMatrix::resourcesChanged()
+{
+  mPendingChanges = true;
+}
+
+
 // ----------------------------------------------------------------------------
 //  M O U S E   E V E N T   H A N D L I N G
 // ----------------------------------------------------------------------------
Index: korganizer/plugins/datenums/datenums.desktop
===================================================================
--- korganizer/plugins/datenums/datenums.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ korganizer/plugins/datenums/datenums.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,5 +1,4 @@
 [Desktop Entry]
-Encoding=UTF-8
 X-KDE-Library=libkorg_datenums
 Name=Date Numbers Plugin for Calendars
 Name[af]=Dag nommer inprop module vir kalenders
@@ -25,6 +24,7 @@
 Name[is]=Íforrit fyrir númer dags á dagatali
 Name[it]=Plugin delle date per i calendari
 Name[ja]=日数表示カレンダープラグイン
+Name[ka]=თარიღის რიცხვების მოდული კალენდრებისათვის
 Name[kk]=Күнтізбедегі күн нөмірінің модулі
 Name[km]=កម្មវិធី​ជំនួយ​លេខ​កាលបរិច្ឆេទ​សម្រាប់​ប្រតិទិន
 Name[lt]=Datų numerių priedas kalendoriams
@@ -69,6 +69,7 @@
 Comment[is]=Þetta íforrit sýnir efst í fundarskránni númer hvers dags í árinu. T.d. er 1. febrúar 32. dagurinn í árinu.
 Comment[it]=Per ciascun giorno, questo plugin mostra la data giuliana (numero progressivo a partire dal primo gennaio dell'anno corrente). Per esempio al primo di febbraio corrisponde il numero 32.
 Comment[ja]=このプラグインは予定表ビューの上に、それぞれの日がその年の何日目であるかを表示します。例えば、2 月 1 日はその年の 32 日目です。
+Comment[ka]= გეგმის ზედა ხედში ეს მოდული თვითეული დღისათვის  აჩვენებს მის დღის ნომერს ამ წლისათვის . მაგალითად,1 თებერვალი წლის 32-ე დღეა.
 Comment[kk]=Бұл модуль күн тәртібі бетінің жоғарында жыл басынан өткен күндер санын көрсетеді. Мысалы, 1-ақпан жылдың 32-күні.
 Comment[km]=សម្រាប់​ថ្ងៃ​នីមួយៗ កម្មវិធី​ជំនួយ​នេះ​នឹង​បង្ហាញ​លេខ​ថ្ងៃ​នៃ​ឆ្នាំ នៅ​ផ្នែក​ខាង​លើ​នៃ​ទិដ្ឋភាព​របៀបវារៈ ។ ឧទាហរណ៍ ថ្ងៃ​ទី ១ ខែ កុម្ភៈ នឹង​ត្រូវ​ជា​ថ្ងៃ​ទី ៣២ នៃ​ឆ្នាំ ។
 Comment[lt]=Kiekvienai dienai šis priedas rodo metų dienos numerį tvarkyklės viršuje. Pvz., Vasario 1 yra32 metų diena.
Index: korganizer/plugins/projectview/projectview.desktop
===================================================================
--- korganizer/plugins/projectview/projectview.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ korganizer/plugins/projectview/projectview.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,5 +1,4 @@
 [Desktop Entry]
-Encoding=UTF-8
 X-KDE-Library=libkorg_projectview
 Name=Project View Plugin for KOrganizer
 Name[af]=Projek Besigtig Inplak vir Korganizer
@@ -26,9 +25,10 @@
 Name[hi]=के-आर्गेनाइज़र के लिए परियोजना दृश्य प्लगइन
 Name[hr]=KOrganizer dodatak za pogled na projekt
 Name[hu]=Projektnézegető bővítőmodul a KOrganizerhez
-Name[is]=Verkefnasýnar íforrit fyrir KOrganizer
+Name[is]=Verkefnasýnaríforrit fyrir KOrganizer
 Name[it]=Plugin di vista dei progetti per KOrganizer
 Name[ja]=KOrganizer プロジェクトビュー プラグイン
+Name[ka]= KOrganizer-ის პროექტის ხედის მოდული
 Name[kk]=KOrganizer-дің жоба көрінісінің модулі
 Name[km]=កម្មវិធី​ជំនួយ​ទិដ្ឋភាព​គម្រោង​សម្រាប់ KOrganizer
 Name[lt]=Projekto peržiūros priedas, skirtas KOrganizer
@@ -73,13 +73,14 @@
 Comment[eu]=Plugin honek KOrganizer-en proiektuaren plangintza ikuspegi bat eskeintzen du (egiteko edo hilabete ikupegien antzera). Plugin hau gaitzen baduzu, proiektuaren ikuspegira alda zaitezke eta egitekoak proiektu plangintza batean bezala ikus dezakezu.
 Comment[fa]=این وصله، برای KOrganizer یک نمای طراحی پروژه )مثل نماهای کارهای انجامی یا ماهانه( فراهم می‌‌کند. اگر این وصله را فعال کنید، می‌توانید به نمای پروژه سودهی کرده و مانند طراح پروژه، فهرست کارهای انجامی خود را مشاهده کنید.
 Comment[fi]=Tämä liitännäinen mahdollistaa projektin suunnittelunäkymän KOrganizeriin (kuten tehtävälista- tai kuukausinäkymän). Jos kytket tämän päälle, voit vaihtaa projektinäkymään ja katsoa tehtävälistaa kuten projektin suunnittelussa.
-Comment[fr]=Ce module propose une vue en projet pour KOrganizer. Si vous activez ce module, vous pourrez visualiser vos tâches sous la forme d'un planning projet.
+Comment[fr]=Ce module propose une vue en projet pour KOrganizer. Si vous activez ce module, vous pourrez afficher vos tâches sous la forme d'un planning projet.
 Comment[fy]=Dizze plugin jout jo in projektwerjefte foar KOrganizer (krekt as in takenlist of moannewerjefte). Wannear jo dizze plugin ynskeakelje, kinne jo dizze werjefte oansette om jo takenlist te besjen as projektplanner.
 Comment[gl]=Este engadido fornece unha vista planificadora de proxectos para KOrganizer (como as vistas de tarefas ou mensuais). Se habilita este engadid, pode trocar á vista de proxecto e ver a súa lista de tarefas nun planificador de proxectos.
 Comment[hu]=Ezzel a modullal projekttervező nézet alakítható ki a KOrganizerben (például a feladatokhoz vagy a havi nézetekhez). Ha aktiválja ezt a modult, átválthat projektnézetbe, hogy a feladatok projekttervként legyenek megtekinthetők.
 Comment[is]=Þetta íforrit veitir verkskipulagssýn fyrir KOrganizer (svipað og verkþátta eða mánaðarsýn). Ef þú virkjar þetta íforrit, getur þú á einfaldan hátt skipt yfir í verkefnasýn og skoðað verkþáttalistann þinn í skipuleggjara.
 Comment[it]=Questo plugin fornisce una vista di pianificazione progetto per KOrganizer (come la vista delle cose da fare o quella mensile). Se abiliti questo plugin, puoi passare dalla vista progetto alla vista delle cose da fare come in un pianificatore di progetti.
 Comment[ja]=このプラグインは KOrganizer にプロジェクト計画ビューを提供します (To-Do ビューや月ビューなど)。このプラグインを有効にすると、プロジェクトビューに切り替えて、スケジュール管理ソフトのように To-Do リストを見ることができます。
+Comment[ka]=ეს მოდული უზრუნველყოფს პროექტის დაგეგმარების ხედს KOrganizer-სთვის(მაგ.: დავალებები ან თვიური მიმოხილვა). თუ ამ მოდულს გაააქტიურებთ,შეგიძლიათ გადართოთ პროექტის ხედზე და იხილოთ თქვენი დავალებათა სია პროექტის მგეგმავის სახით.
 Comment[kk]=Бұл KOrganizer-нің жобаны жоспарлау көрінісінің модулі. Модулін орнатсаңыз, осы көрініске ауысып жоспар тізімініңізді жоба жоспарлағышындағы түріне келтіре аласыз.
 Comment[km]=កម្មវិធី​ជំនួយ​នេះ​ផ្ដល់​នូវ​ទិដ្ឋភាព​រៀបចំ​គម្រោង​សម្រាប់ korganizer (ដូចជា ទិដ្ឋភាព​ការងារ​ត្រូវ​ធ្វើ ឬ ទិដ្ឋភាព​ខែ​ជាដើម) ។ បើ​អ្នក​ធ្វើ​ឲ្យ​កម្មវិធី​ជំនួយ​នេះ​ប្រើ​បាន អ្នក​នឹង​អាច​ប្ដូរ​ទិដ្ឋភាព​គម្រោង ហើយ​មើល​ព្រឹត្តិការណ៍​របស់​អ្នក​ដូចជា​នៅ​ក្នុងកម្មវិធី​រៀបចំ​គម្រោង​អញ្ចឹង​ដែរ ។
 Comment[lt]=Šis priedas pateikia KOrganizaer projekto planavimo vaizdą (panašiai kaip darbų ar mėnesio vaizdai). Jei įjungsite šį įskiepį, galėsite peršokti į projekto vaizdą ir peržiūrėti savo darbų sąrašą kaip projektą.
Index: korganizer/plugins/exchange/exchange.desktop
===================================================================
--- korganizer/plugins/exchange/exchange.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ korganizer/plugins/exchange/exchange.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,5 +1,4 @@
 [Desktop Entry]
-Encoding=UTF-8
 X-KDE-Library=libkorg_exchange
 Name=Microsoft Exchange 2000 Plugin for KOrganizer
 Name[af]=Microsoft Exchange 2000 inprop module vir KOrganizer
@@ -25,6 +24,7 @@
 Name[is]=Microsoft Exchange 2000 íforrit fyrir KOrganizer
 Name[it]=Plugin Microsoft Exchange 2000 per KOrganizer
 Name[ja]=KOrganizer の Microsoft Exchange 2000 プラグイン
+Name[ka]=Microsoft Exchange 2000-ის მოდული KOrganizer-სთვის
 Name[kk]=KOrganizer-дің Microsoft Exchange 2000 модулі
 Name[km]=កម្មវិធី​ជំនួយ​ម៉ៃក្រូសូហ្វ Exchange ២០០០ សម្រាប់ KOrganizer
 Name[lt]=Microsoft Exchange 2000 priedas, skirtas KOrganizer
@@ -70,6 +70,7 @@
 Comment[is]=Þetta íforrit gerir KOrganizer kleyft að vinna með Microsoft Exchange 2000 hópvinnuþjónum.
 Comment[it]=Questo plugin permette agli utenti di korganizer di lavorare con i server groupware Microsoft Exchange 2000.
 Comment[ja]=このプラグインにより、korganizer のユーザが Microsoft Exchange 2000 グループウェアサーバと同期できるようになります。
+Comment[ka]=ეს მოდული korganizer-ის მომხმარებლებს საშუალებას აძლევს იმუშაონ Microsoft Exchange 2000 ჯგუფურ სერვერებთან.
 Comment[kk]=Бұл модуль korganizer-мен MS Exchange 2000 біріккен жұмыс сервермен істеуге мүмкіндік береді.
 Comment[km]=កម្មវិធី​ជំនួយ​នេះ​អនុញ្ញាត​ឲ្យ​អ្នក​ប្រើ​របស់ korganizer ធ្វើការ​ជាមួយ​ម៉ាស៊ីន​បម្រើ​កម្មវិធី​ពហុ​អ្នកប្រើ​របស់​ម៉ៃក្រូសូហ្វ Exchange ២០០០ ។
 Comment[lt]=Šis priedas leidžia korganizer dirbti su Microsoft Exchange 2000 groupware serveriais.
Index: korganizer/plugins/printing/year/yearprint.desktop
===================================================================
--- korganizer/plugins/printing/year/yearprint.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ korganizer/plugins/printing/year/yearprint.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,5 +1,4 @@
 [Desktop Entry]
-Encoding=UTF-8
 X-KDE-Library=libkorg_yearlyprint
 Name=Yearly Print Style
 Name[af]=Druk styl: Jaarliks
@@ -17,6 +16,7 @@
 Name[fy]=Printstyl foar jierkalinder
 Name[gl]=Estilo de impresión anual
 Name[hu]=Éves naptár nyomtatási stílus
+Name[is]=Ársyfirlitsprentstíll
 Name[it]=Stile di stampa annuale
 Name[ja]=年毎印刷スタイル
 Name[kk]=Жылдық басу стилі
@@ -54,6 +54,7 @@
 Comment[fy]=Dizze plugin makket it mooglik om in jierkalinder út te printsjen.
 Comment[gl]=Este engadido permítelle imprimir un calendario anual.
 Comment[hu]=Ez a modul egy egész éves naptár kinyomtatását teszi lehetővé.
+Comment[is]=Þetta íforrit gerir þér kleyft að prenta út dagbókarfærslur fyrir allt árið.
 Comment[it]=Questo plugin ti permette di stampare un calendario annuale.
 Comment[ja]=このプラグインにより、年毎のカレンダーを印刷できるようになります。
 Comment[kk]=Бұл жылдық күнтізбені басып шығаратын модулі.
Index: korganizer/plugins/printing/whatsnext/whatsnextprint.desktop
===================================================================
--- korganizer/plugins/printing/whatsnext/whatsnextprint.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ korganizer/plugins/printing/whatsnext/whatsnextprint.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,5 +1,4 @@
 [Desktop Entry]
-Encoding=UTF-8
 X-KDE-Library=libkorg_whatsnextprint
 Name=What's Next Print Style
 Name[af]=Wat is volgende - druk styl
@@ -22,6 +21,7 @@
 Name[is]=Hvað er næst prentstíll
 Name[it]=Stile di stampa "cosa viene dopo"
 Name[ja]=次は何？ 印刷スタイル
+Name[ka]=ბეჭდვის სტილი "შემდეგი რა არის?"
 Name[kk]="Не істеу?" бетін басу стилі
 Name[km]=រចនាប័ទ្ម​បោះពុម្ព​ការងារ​បន្តបន្ទាប់
 Name[lt]=Ateinančių įvykių spausdinimo stilius
@@ -34,7 +34,7 @@
 Name[pl]=Styl drukowania "Do dalej"
 Name[pt]=Estilo de Impressão "O Que Se Segue"
 Name[pt_BR]=Estilo de impressão "A Seguir"
-Name[ru]=Даджест
+Name[ru]=Предстоящие задачи
 Name[sk]=Štýl tlače Čo nasleduje
 Name[sl]=Slog tiskanja v obliki »Kaj je naslednje«
 Name[sr]=Стил штампе „Шта је следеће“
@@ -65,6 +65,7 @@
 Comment[is]=Þetta íforrit gerir þér kleyft að prenta út lista yfir alla væntanlega atburði og verkþætti.
 Comment[it]=Questo plugin vi permette di stampare una lista dei prossimi eventi e cose da fare.
 Comment[ja]=このプラグインにより、将来のすべてのイベントや To-Do のリストを印刷できるようになります。
+Comment[ka]=ეს  მოდული საშუალებას გაძლევთ ამობეჭდოთ მომავალი მოვლენები და დავალებები.
 Comment[kk]=Бұл келер оқиғалар мен жоспарлар тізімін басып шығаратын модулі.
 Comment[km]=កម្មវិធី​ជំនួយ​នេះ​អនុញ្ញាត​ឲ្យ​អ្នក​បោះពុម្ព​បញ្ជី​នៃ​ព្រឹត្តិការណ៍ និង​ការងារ​ត្រូវ​ធ្វើ​បន្តបន្ទាប់
 Comment[lt]=Šis priedas leidžia spausdinti sąrašą visų artėjančių įvykių ir darbų.
Index: korganizer/plugins/printing/journal/journalprint.desktop
===================================================================
--- korganizer/plugins/printing/journal/journalprint.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ korganizer/plugins/printing/journal/journalprint.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,5 +1,4 @@
 [Desktop Entry]
-Encoding=UTF-8
 X-KDE-Library=libkorg_journalprint
 Name=Journal Print Style
 Name[af]=Joernaal druk styl
@@ -22,6 +21,7 @@
 Name[is]=Dagbókarprentstíll
 Name[it]=Stile di stampa a diario
 Name[ja]=ジャーナル印刷スタイル
+Name[ka]=ჟურნალის ბეჭდვის სტილი
 Name[kk]=Күнделікті басу стилі
 Name[km]=រចនាប័ទ្ម​បោះពុម្ព​ទិនានុប្បវត្តិ
 Name[lt]=Dienyno spausdinimo stilius
@@ -65,6 +65,7 @@
 Comment[is]=Þetta íforrit gerir þér kleyft að prenta út dagbókarfærslur.
 Comment[it]=Questo plugin ti permette di stampare le registrazioni del diario.
 Comment[ja]=このプラグインにより、ジャーナル (日誌) のエントリを印刷できるようになります。
+Comment[ka]=ეს მოდული საშუალებას გაძლევთ ამობეჭდოთ ჟურნალის შემადგენლობა (დღიურის ელემენტები)
 Comment[kk]=Бұл күнделіктің жазуларын басып шығаратын модулі.
 Comment[km]=កម្មវិធី​ជំនួយ​នេះ​អនុញ្ញាត​ឲ្យ​អ្នក​បោះពុម្ព​ធាតុ​ទិនានុប្បវត្តិ (ធាតុ​កំណត់ហេតុ​ប្រចាំ​ថ្ងៃ) ។
 Comment[lt]=Šis priedas leidžia spausdinti dienyno įrašus.
Index: korganizer/plugins/printing/list/listprint.desktop
===================================================================
--- korganizer/plugins/printing/list/listprint.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ korganizer/plugins/printing/list/listprint.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,5 +1,4 @@
 [Desktop Entry]
-Encoding=UTF-8
 X-KDE-Library=libkorg_listprint
 Name=List Print Style
 Name[af]=Lys druk styl
@@ -22,6 +21,7 @@
 Name[is]=Listaprentstíll
 Name[it]=Stile di stampa ad elenco
 Name[ja]=リスト印刷スタイル
+Name[ka]=ბეჭდვის სტილის სია
 Name[kk]=Тізімді басу стилі
 Name[km]=រចនាប័ទ្ម​បោះពុម្ព​បញ្ជី
 Name[lt]=Sąrašo spausdinimo stilius
@@ -65,6 +65,7 @@
 Comment[is]=Þetta íforrit gerir þér kleyft að prenta út lista með atburðum og verkþáttum.
 Comment[it]=Questo plugin ti permette di stampare eventi e cose da fare in modalità elenco.
 Comment[ja]=このプラグインにより、リストフォーム内のイベントや To-Do を印刷できるようになります。
+Comment[ka]=ეს მოდული საშუალებას გაძლევთ სიის ფორმით ამობეჭდოთ მოვლენები და დავალებები.
 Comment[kk]=Бұл оқиғалар мен жоспарларды тізім түрінде басатын модулі.
 Comment[km]=កម្មវិធី​ជំនួយ​នេះ​អនុញ្ញាត​ឲ្យ​អ្នក​បោះពុម្ព​ព្រឹត្តិការណ៍ និង​ការងារ​ត្រូវ​ធ្វើក្នុង​ទម្រង់​ជា​បញ្ជី ។
 Comment[lt]=Šis priedas leidžia spausdinti įvykius ir darbus sąrašo forma.
Index: korganizer/plugins/timespanview/timespanview.desktop
===================================================================
--- korganizer/plugins/timespanview/timespanview.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ korganizer/plugins/timespanview/timespanview.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,5 +1,4 @@
 [Desktop Entry]
-Encoding=UTF-8
 X-KDE-Library=libkorg_timespanview
 Name=Timespan View Plugin for KOrganizer
 Name[af]=Tydlyn aansig inprop module vir KOrganizer
@@ -22,6 +21,7 @@
 Name[is]=Tímabilsskoðunar íforrit fyrir KOrganizer
 Name[it]=Plugin vista intervalli temporali per KOrganizer
 Name[ja]=KOrganizer タイムスパンビュー プラグイン
+Name[ka]=დროის დიაგრამიანი ხედის მოდული KOrganizer-სთვის
 Name[kk]=KOrganizer-дің уақыт аралығы көрініс модулі
 Name[km]=កម្មវិធី​ជំនួយ​ទិដ្ឋភាព​រយៈពេល​សម្រាប់ KOrganizer
 Name[lt]=Laiko tarpsnio vaizdo KOrganizer priedas
@@ -65,6 +65,7 @@
 Comment[is]=Þetta íforrit veitir tímabilssýn fyrir KOrganizer (svipað og verkþátta eða mánaðarsýn). Ef þú virkjar þetta íforrit getur þú skipt yfir í tímabilssýn og skoðað atburðina þína eins og á Gantt skýringarmynd.
 Comment[it]=Questo plugin fornisce una vista a intervalli temporali. Se abiliti questo plugin, potrai passare alla vista a intervalli temporali e vedere i tuoi eventi come in un diagramma di Gantt.
 Comment[ja]=このプラグインは KOrganizer にタイムスパンビューを提供します (To-Do ビューや月ビューなど)。このプラグインを有効にすると、タイムスパンビューに切り替えて、ガントチャートのようにイベントを見ることができます。
+Comment[ka]=ეს მოდული უზრუნველჰყოფს korganizer-ს დროის დიაგრამიანი ხედით (მაგ.:დავალებები ან თვიური მიმოხილვა). თუ ამ მოდულს გაააქტიურებთ,თქვენ შეგიძლიათ გადართოთ დროის დიაგრამიან ხედზე და იხილოთ მოვლენები განტის დიაგრამის სახით. 
 Comment[kk]=Бұл KOrganizer-нің уақыт аралығы көрінісінің модулі. Модулін орнатсаңыз, осы көрініске ауысып оқиғаларыңызды Гант диаграмма түріне келтре аласыз.
 Comment[km]=កម្មវិធី​ជំនួយ​នេះ​ផ្ដល់​នូវ​ទិដ្ឋភាព​រយៈពេល​សម្រាប់ korganizer (ដូចជា ទិដ្ឋភាព​ការងារ​ត្រូវ​ធ្វើ ឬ ទិដ្ឋភាព​ខែ​ជាដើម) ។ បើ​អ្នក​ធ្វើ​ឲ្យ​កម្មវិធី​ជំនួយ​នេះ​ប្រើ​បាន អ្នក​នឹង​អាច​ប្ដូរ​ទិដ្ឋភាព​រយៈពេល ហើយ​មើល​ព្រឹត្តិការណ៍​របស់​អ្នក​ដូចជា​នៅ​ក្នុងដ្យាក្រាម Gantt អញ្ចឹង​ដែរ ។
 Comment[lt]=Šis priedas korganizer programoje sudaro galimybę apžvelgti laiko tarpą (pvz., darbų arba mėnesio peržiūra). Įgalinus šį priedą galėsite persijungti į laiko tarpo peržiūrą ir žiūrėti įvykius tarsi Gantt diagramoje.
Index: korganizer/plugins/hebrew/hebrew.desktop
===================================================================
--- korganizer/plugins/hebrew/hebrew.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ korganizer/plugins/hebrew/hebrew.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,5 +1,4 @@
 [Desktop Entry]
-Encoding=UTF-8
 X-KDE-Library=libkorg_hebrew
 Name=Jewish Calendar Plugin
 Name[af]=Joodse kalender inprop module
@@ -24,6 +23,7 @@
 Name[is]=Gyðinga dagatalsíforrit
 Name[it]=Plugin calendario ebraico
 Name[ja]=ユダヤ歴カレンダープラグイン
+Name[ka]=ებრაული კალენდრის მოდული
 Name[kk]=Яһуди күнтізбесінің модулі
 Name[km]=កម្មវិធី​ជំនួយ​ប្រតិទិន Jewish
 Name[lt]=Žydų kalendoriaus priedas
@@ -70,6 +70,7 @@
 Comment[is]=Sýna alla dagsetningar í KOrganizer sem eru einnig í dagatali gyðinga.
 Comment[it]=Mostra tutte le date in korganizer secondo il calendario ebraico.
 Comment[ja]=korganizer のすべての日付をユダヤ暦でも表示します。
+Comment[ka]=ყველა თარიღს ებრაული კალენდრის მიხედვითაც აჩვენებს
 Comment[kk]=Яһуди күнтізбе күндерін korganizer-де көрсететін модулі.
 Comment[km]=បង្ហាញ​កាលបរិច្ឆេទ​ទាំងអស់​ក្នុង korganizer នៅ​ក្នុង​ប្រព័ន្ធ​ប្រតិទិន Jewish ។
 Comment[lt]=Rodo visas dienas kalendoriuje taip pat ir žydų kalendoriaus sistema.
Index: korganizer/korganizer.kcfg
===================================================================
--- korganizer/korganizer.kcfg	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ korganizer/korganizer.kcfg	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -222,7 +222,7 @@
           <label>Only calendar</label>
         </choice>
       </choices>
-      <default>ResourceInsideCategoryOutside</default>
+      <default>CategoryInsideResourceOutside</default>
     </entry>
 
     <entry type="Enum" name="Agenda View Calendar Display">
@@ -353,6 +353,11 @@
     <entry type="StringList" name="AdditionalMails">
     </entry>
 
+    <entry name="OutlookCompatCounterProposals" type="Bool">
+      <label>Send Outlook-like pseudo counter proposals</label>
+      <default>false</default>
+    </entry>
+
   </group>
 
   <group name="Colors">
Index: korganizer/mailscheduler.cpp
===================================================================
--- korganizer/mailscheduler.cpp	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ korganizer/mailscheduler.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -26,13 +26,16 @@
 #include <qfile.h>
 #include <qregexp.h>
 
+#include <klocale.h>
 #include <kstandarddirs.h>
 #include <kdebug.h>
 
+#include <libkcal/calendar.h>
 #include <libkcal/event.h>
 #include <libkcal/icalformat.h>
 
 #include "komailclient.h"
+#include "incidencechanger.h"
 
 #include "mailscheduler.h"
 
@@ -80,7 +83,11 @@
        method == Declinecounter ) {
     status = mailer.mailAttendees( incidence, messageText );
   } else {
-    status = mailer.mailOrganizer( incidence, messageText );
+    QString subject;
+    Incidence *inc = dynamic_cast<Incidence*>( incidence );
+    if ( inc && method == Counter )
+      subject = i18n( "Counter proposal: %1" ).arg( inc->summary() );
+    status = mailer.mailOrganizer( incidence, messageText, subject );
   }
   return status;
 }
@@ -158,3 +165,28 @@
 {
   return locateLocal( "data", "korganizer/freebusy" );
 }
+
+bool MailScheduler::acceptCounterProposal( Incidence *incidence )
+{
+  if ( !incidence )
+    return false;
+
+  Incidence *exInc = mCalendar->incidence( incidence->uid() );
+  if ( !exInc )
+    exInc = mCalendar->incidenceFromSchedulingID( incidence->uid() );
+  incidence->setRevision( incidence->revision() + 1 );
+  if ( exInc ) {
+    incidence->setRevision( QMAX( incidence->revision(), exInc->revision() + 1 ) );
+    // some stuff we don't want to change, just to be safe
+    incidence->setSchedulingID( exInc->schedulingID() );
+    incidence->setUid( exInc->uid() );
+
+    mCalendar->beginChange( exInc );
+    IncidenceChanger::assignIncidence( exInc, incidence );
+    exInc->updated();
+    mCalendar->endChange( exInc );
+  } else {
+    mCalendar->addIncidence( incidence );
+  }
+  return true;
+}
Index: korganizer/timelabels.cpp
===================================================================
--- korganizer/timelabels.cpp	(.../tags/KDE/3.5.9/kdepim)	(wersja 0)
+++ korganizer/timelabels.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -0,0 +1,241 @@
+/*
+    This file is part of KOrganizer.
+    Copyright (c) 2001 Cornelius Schumacher <schumacher@kde.org>
+    Copyright (C) 2003-2004 Reinhold Kainhofer <reinhold@kainhofer.com>
+
+    This program is free software; you can redistribute it and/or modify
+    it under the terms of the GNU General Public License as published by
+    the Free Software Foundation; either version 2 of the License, or
+    (at your option) any later version.
+
+    This program is distributed in the hope that it will be useful,
+    but WITHOUT ANY WARRANTY; without even the implied warranty of
+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
+    GNU General Public License for more details.
+
+    You should have received a copy of the GNU General Public License
+    along with this program; if not, write to the Free Software
+    Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301, USA.
+
+    As a special exception, permission is given to link this program
+    with any edition of Qt, and distribute the resulting executable,
+    without including the source code for Qt in the source distribution.
+*/
+
+#include "timelabels.h"
+
+#include <qhbox.h>
+#include <qvbox.h>
+#include <qlabel.h>
+#include <qframe.h>
+#include <qlayout.h>
+#include <qfont.h>
+#include <qfontmetrics.h>
+#include <qpainter.h>
+#include <qstringlist.h>
+#include <qdatetime.h>
+
+#include <kglobal.h>
+
+#include "koglobals.h"
+#include "kocore.h"
+#include "koprefs.h"
+#include "koagenda.h"
+
+TimeLabels::TimeLabels(int rows,QWidget *parent,const char *name,WFlags f) :
+  QScrollView(parent,name,f)
+{
+  mRows = rows;
+  mMiniWidth = 0;
+
+  mCellHeight = KOPrefs::instance()->mHourSize*4;
+
+  enableClipper(true);
+
+  setHScrollBarMode(AlwaysOff);
+  setVScrollBarMode(AlwaysOff);
+
+  resizeContents(50, int(mRows * mCellHeight) );
+
+  viewport()->setBackgroundMode( PaletteBackground );
+
+  mMousePos = new QFrame(this);
+  mMousePos->setLineWidth(0);
+  mMousePos->setMargin(0);
+  mMousePos->setBackgroundColor(Qt::red);
+  mMousePos->setFixedSize(width(), 1);
+  addChild(mMousePos, 0, 0);
+}
+
+void TimeLabels::mousePosChanged(const QPoint &pos)
+{
+  moveChild(mMousePos, 0, pos.y());
+}
+
+void TimeLabels::showMousePos()
+{
+  mMousePos->show();
+}
+
+void TimeLabels::hideMousePos()
+{
+  mMousePos->hide();
+}
+
+void TimeLabels::setCellHeight(double height)
+{
+  mCellHeight = height;
+}
+
+/*
+  Optimization so that only the "dirty" portion of the scroll view
+  is redrawn.  Unfortunately, this is not called by default paintEvent() method.
+*/
+void TimeLabels::drawContents(QPainter *p,int cx, int cy, int cw, int ch)
+{
+  // bug:  the parameters cx and cw are the areas that need to be
+  //       redrawn, not the area of the widget.  unfortunately, this
+  //       code assumes the latter...
+
+  // now, for a workaround...
+  cx = contentsX() + frameWidth()*2;
+  cw = contentsWidth() ;
+  // end of workaround
+
+  int cell = ((int)(cy/mCellHeight));
+  double y = cell * mCellHeight;
+  QFontMetrics fm = fontMetrics();
+  QString hour;
+  QString suffix = "am";
+  int timeHeight =  fm.ascent();
+  QFont nFont = font();
+  p->setFont( font() );
+
+  if (!KGlobal::locale()->use12Clock()) {
+      suffix = "00";
+  } else
+      if (cell > 11) suffix = "pm";
+
+  if ( timeHeight >  mCellHeight ) {
+    timeHeight = int(mCellHeight-1);
+    int pointS = nFont.pointSize();
+    while ( pointS > 4 ) {
+      nFont.setPointSize( pointS );
+      fm = QFontMetrics( nFont );
+      if ( fm.ascent() < mCellHeight )
+        break;
+      -- pointS;
+    }
+    fm = QFontMetrics( nFont );
+    timeHeight = fm.ascent();
+  }
+  //timeHeight -= (timeHeight/4-2);
+  QFont sFont = nFont;
+  sFont.setPointSize( sFont.pointSize()/2 );
+  QFontMetrics fmS(  sFont );
+  int startW = mMiniWidth - frameWidth()-2 ;
+  int tw2 = fmS.width(suffix);
+  int divTimeHeight = (timeHeight-1) /2 - 1;
+  //testline
+  //p->drawLine(0,0,0,contentsHeight());
+  while (y < cy + ch+mCellHeight) {
+    // hour, full line
+    p->drawLine( cx, int(y), cw+2, int(y) );
+    hour.setNum(cell);
+    // handle 24h and am/pm time formats
+    if (KGlobal::locale()->use12Clock()) {
+      if (cell == 12) suffix = "pm";
+      if (cell == 0) hour.setNum(12);
+      if (cell > 12) hour.setNum(cell - 12);
+    }
+
+    // center and draw the time label
+    int timeWidth = fm.width(hour);
+    int offset = startW - timeWidth - tw2 -1 ;
+    p->setFont( nFont );
+    p->drawText( offset, int(y+timeHeight), hour);
+    p->setFont( sFont );
+    offset = startW - tw2;
+    p->drawText( offset, int(y+timeHeight-divTimeHeight), suffix);
+
+    // increment indices
+    y += mCellHeight;
+    cell++;
+  }
+
+}
+
+/**
+   Calculates the minimum width.
+*/
+int TimeLabels::minimumWidth() const
+{
+  return mMiniWidth;
+}
+
+/** updates widget's internal state */
+void TimeLabels::updateConfig()
+{
+  setFont(KOPrefs::instance()->mTimeBarFont);
+
+  QString test = "20";
+  if ( KGlobal::locale()->use12Clock() )
+      test = "12";
+  mMiniWidth = fontMetrics().width( test );
+  if ( KGlobal::locale()->use12Clock() )
+      test = "pm";
+  else {
+      test = "00";
+  }
+  QFont sFont = font();
+  sFont.setPointSize(  sFont.pointSize()/2 );
+  QFontMetrics fmS(   sFont );
+  mMiniWidth += fmS.width(  test ) + frameWidth()*2+4 ;
+  // update geometry restrictions based on new settings
+  setFixedWidth(  mMiniWidth );
+
+  // update HourSize
+  mCellHeight = KOPrefs::instance()->mHourSize*4;
+  // If the agenda is zoomed out so that more then 24 would be shown,
+  // the agenda only shows 24 hours, so we need to take the cell height
+  // from the agenda, which is larger than the configured one!
+  if ( mCellHeight < 4*mAgenda->gridSpacingY() )
+       mCellHeight = 4*mAgenda->gridSpacingY();
+  resizeContents( mMiniWidth, int(mRows * mCellHeight+1) );
+}
+
+/** update time label positions */
+void TimeLabels::positionChanged()
+{
+  int adjustment = mAgenda->contentsY();
+  setContentsPos(0, adjustment);
+}
+
+void TimeLabels::positionChanged( int pos )
+{
+  setContentsPos( 0, pos );
+}
+
+/**  */
+void TimeLabels::setAgenda(KOAgenda* agenda)
+{
+  mAgenda = agenda;
+
+  connect(mAgenda, SIGNAL(mousePosSignal(const QPoint &)), this, SLOT(mousePosChanged(const QPoint &)));
+  connect(mAgenda, SIGNAL(enterAgenda()), this, SLOT(showMousePos()));
+  connect(mAgenda, SIGNAL(leaveAgenda()), this, SLOT(hideMousePos()));
+  connect(mAgenda, SIGNAL(gridSpacingYChanged( double ) ), this, SLOT( setCellHeight( double ) ) );
+}
+
+
+/** This is called in response to repaint() */
+void TimeLabels::paintEvent(QPaintEvent*)
+{
+//  kdDebug(5850) << "paintevent..." << endl;
+  // this is another hack!
+//  QPainter painter(this);
+  //QString c
+  repaintContents(contentsX(), contentsY(), visibleWidth(), visibleHeight());
+}
+
+#include "timelabels.moc"

Zmiany atrybutów dla: korganizer/timelabels.cpp
___________________________________________________________________
Dodane: svn:mime-type
   + text/x-c++src
Dodane: svn:keywords
   + Author Date Id Revision
Dodane: svn:eol-style
   + native

Index: korganizer/korganizer_configfreebusy.desktop
===================================================================
--- korganizer/korganizer_configfreebusy.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ korganizer/korganizer_configfreebusy.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,5 +1,4 @@
 [Desktop Entry]
-Encoding=UTF-8
 Icon=personal
 Type=Service
 ServiceTypes=KCModule
@@ -36,6 +35,7 @@
 Name[is]=Tímaráðstöfun
 Name[it]=Libero/Occupato
 Name[ja]=動静情報
+Name[ka]=თავისუფალი/დაკავებული
 Name[kk]=Бос/Істе
 Name[km]=ទំនេរ/រវល់
 Name[lt]=Užimtumas
@@ -59,7 +59,8 @@
 Name[tg]=Озод/машғул аст
 Name[tr]=Boş/Meşgul
 Name[uk]=Вільний/зайнятий час
-Name[uz]=Бўш/Банд
+Name[uz]=Boʻsh/Band
+Name[uz@cyrillic]=Бўш/Банд
 Name[zh_CN]=忙/闲
 Name[zh_TW]=行程資訊
 Comment=KOrganizer Free/Busy Configuration
@@ -86,6 +87,7 @@
 Comment[is]=KOrganizer stillingar fyrir tímaráðstöfun
 Comment[it]=Configurazione Libero/Occupato di KOrganizer
 Comment[ja]=KOrganizer 動静情報の設定
+Comment[ka]=KOrganizer-ის თავისუფალი/დაკავებულობის კონფიგურაცია
 Comment[kk]=KOrganizer--дің Бос/Істе мәлімет параметрлері
 Comment[km]=ការ​កំណត់​រចនាសម្ព័ន្ធ​ទំនេរ/រវល់ របស់ KOrganizer
 Comment[lt]=KOrganizer užimtumo konfigūravimas
@@ -126,7 +128,7 @@
 Keywords[eu]=korganizer,libre, lanpetuta,antolaketa
 Keywords[fa]=korganizer،آزاد اشغال، زمان‌بندی
 Keywords[fi]=korganizer,vapaa,varattu,ajastus
-Keywords[fr]=KOrganizer,disponibilité, planification
+Keywords[fr]=korganizer,disponibilité, planification
 Keywords[fy]=korganizer,freebusy,scheduling,plannen,frij,beset,roaster
 Keywords[gl]=korganizer,dispoñibilidade,axenda
 Keywords[hi]=के-आर्गेनाइज़र,फ्री-बिज़ी,समय-सारणी
@@ -134,6 +136,7 @@
 Keywords[is]=korganizer,tímaráðstöfun,áætlun
 Keywords[it]=korganizer,libero/occupato,pianificazione
 Keywords[ja]=korganizer,動静,スケジューラ
+Keywords[ka]=korganizer,თავისუფალიდაკავებული,დაგეგმვა
 Keywords[km]=korganizer,ទំនេរ,រវល់,កាលវិភាគ
 Keywords[mk]=korganizer,freebusy,scheduling,корганизатор,слободно,зафатено,закажување
 Keywords[ms]=korganizer,lapang sibuk,penjadualan
Index: korganizer/korganizer.desktop
===================================================================
--- korganizer/korganizer.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ korganizer/korganizer.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,5 +1,4 @@
 [Desktop Entry]
-Encoding=UTF-8
 MimeType=text/calendar;text/x-vcalendar;
 Comment=Calendar and Scheduling Program
 Comment[af]=Kalender en Skedulering Program
@@ -28,6 +27,7 @@
 Comment[is]=Dagbók og skipulag
 Comment[it]=Programma di calendario e di agenda
 Comment[ja]=カレンダーとスケジュール管理プログラム
+Comment[ka]=კალენდრის და მგეგმავის პროგრამა
 Comment[kk]=Күнтізбе және Жоспарлау бағдарламасы
 Comment[km]=កម្មវិធី​ប្រតិទិន និង​កាលវិភាគ
 Comment[lt]=Kalendoriaus ir planavimo programa
@@ -57,7 +57,8 @@
 Comment[th]=โปรแกรมจัดการบันทึกประจำวันและตารางการนัดหมาย
 Comment[tr]=Takvim ve Zamanlama Programı
 Comment[uk]=Програма календаря та розкладу
-Comment[uz]=Календар ва режалаштириш дастури
+Comment[uz]=Kalendar va rejalashtirish dasturi
+Comment[uz@cyrillic]=Календар ва режалаштириш дастури
 Comment[ven]=Khalenda na mbekanyamushumo ya u shedula
 Comment[vi]=Chương trình lịch và kế hoạch
 Comment[xh]=Ikhalenda no Dweliso lwenkqubo Yokucwangcisa
@@ -112,6 +113,7 @@
 GenericName[is]=Persónuleg skipulagsbók
 GenericName[it]=Organizzatore personale
 GenericName[ja]=個人向けスケジュール管理
+GenericName[ka]=პირადი ორგანიზატორი
 GenericName[kk]=Дербес ұйымдастырғышы
 GenericName[km]=កម្មវិធី​រៀបចំ​ផ្ទាល់​ខ្លួន
 GenericName[lt]=Asmeninės informacijos tvarkyklė
@@ -136,7 +138,8 @@
 GenericName[tg]=Органайзери инфиродӣ
 GenericName[tr]=Kişisel Bilgi Yöneticisi
 GenericName[uk]=Персональний тижневик
-GenericName[uz]=Шахсий органайзер
+GenericName[uz]=Shaxsiy organayzer
+GenericName[uz@cyrillic]=Шахсий органайзер
 GenericName[zh_CN]=个人日程安排
 GenericName[zh_TW]=個人行程組織軟體
 ServiceTypes=Browser/View,DCOP/Organizer
Index: korganizer/calendarview.cpp
===================================================================
--- korganizer/calendarview.cpp	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ korganizer/calendarview.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1015,7 +1015,6 @@
   KOTodoEditor *todoEditor = mDialogManager->getTodoEditor();
   connectIncidenceEditor( todoEditor );
   todoEditor->newTodo();
-  todoEditor->setDates( QDateTime(), false );
   todoEditor->setTexts( summary, description );
   todoEditor->addAttachments( attachments, attachmentMimetypes, inlineAttachment );
   todoEditor->addAttendees( attendees );
@@ -1884,6 +1883,11 @@
   edit_copy();
 }
 
+void CalendarView::pasteIncidence()
+{
+  edit_paste();
+}
+
 void CalendarView::showIncidence( Incidence *incidence )
 {
   KOEventViewerDialog *eventViewer = new KOEventViewerDialog( this );
@@ -1891,7 +1895,7 @@
   eventViewer->show();
 }
 
-bool CalendarView::editIncidence( Incidence *incidence )
+bool CalendarView::editIncidence( Incidence *incidence, bool isCounter )
 {
   kdDebug(5850) << "CalendarView::editEvent()" << endl;
 
@@ -1913,7 +1917,7 @@
     return true;
   }
 
-  if ( !mChanger->beginChange( incidence ) ) {
+  if ( !isCounter && !mChanger->beginChange( incidence ) ) {
     warningChangeFailed( incidence );
     showIncidence( incidence );
     return false;
@@ -2278,4 +2282,10 @@
   delete oldIncidence;
 }
 
+void CalendarView::resourcesChanged()
+{
+  mViewManager->resourcesChanged();
+  updateView();
+}
+
 #include "calendarview.moc"
Index: korganizer/koviewmanager.h
===================================================================
--- korganizer/koviewmanager.h	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ korganizer/koviewmanager.h	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -107,6 +107,9 @@
     void zoomOutHorizontally();
     void zoomInVertically();
     void zoomOutVertically();
+
+    void resourcesChanged();
+
   private slots:
     void currentAgendaViewTabChanged( QWidget* );
   private:
Index: korganizer/dcopcalendar.desktop
===================================================================
--- korganizer/dcopcalendar.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ korganizer/dcopcalendar.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,5 +1,4 @@
 [Desktop Entry]
-Encoding=UTF-8
 Type=ServiceType
 X-KDE-ServiceType=DCOP/Organizer
 Comment=Organizer with a DCOP interface
@@ -30,6 +29,7 @@
 Comment[is]=Skipuleggjari með DCOP viðmóti
 Comment[it]=Organizer con un'interfaccia DCOP
 Comment[ja]=DCOP インターフェースを持つオーガナイザ
+Comment[ka]=ორგანიზატორი DCOP ინტერფეისით
 Comment[kk]=DCOP интерфейсті Ұйымдастырғыш
 Comment[km]=កម្មវិធី​រៀបចំ​ដែល​មាន​ចំណុច​ប្រទាក់ DCOP
 Comment[lt]=Tvarkyklė su DCOP sąsaja
Index: korganizer/koprefs.cpp
===================================================================
--- korganizer/koprefs.cpp	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ korganizer/koprefs.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -42,6 +42,8 @@
 #include <kstaticdeleter.h>
 #include <kstringhandler.h>
 
+#include <libkmime/kmime_header_parsing.h>
+
 #include "koprefs.h"
 #include <libkpimidentities/identitymanager.h>
 #include <libkpimidentities/identity.h>
@@ -89,7 +91,7 @@
   eventColorItem()->setDefaultValue( mDefaultCategoryColor );
 
   // Load it now, not deep within some painting code
-  KABC::StdAddressBook::self();
+  mMyAddrBookMails = KABC::StdAddressBook::self()->whoAmI().emails();
 }
 
 
@@ -342,7 +344,7 @@
   // Add emails configured in korganizer
   lst += mAdditionalMails;
   // Add emails from the user's kaddressbook entry
-  lst += KABC::StdAddressBook::self()->whoAmI().emails();
+  lst += mMyAddrBookMails;
   // Add the email entered as the userEmail here
   lst += email();
 
@@ -382,13 +384,36 @@
 
 bool KOPrefs::thatIsMe( const QString& _email )
 {
+  // NOTE: this method is called for every created agenda view item, so we need to keep
+  // performance in mind
+
+  /* identityManager()->thatIsMe() is quite expensive since it does parsing of
+     _email in a way which is unnecessarily complex for what we can have here,
+     so we do that ourselves. This makes sense since this
+
   if ( KOCore::self()->identityManager()->thatIsMe( _email ) )
     return true;
+  */
+
   // in case email contains a full name, strip it out
-  QString email = KPIM::getEmailAddress( _email );
+  // the below is the simpler but slower version of the following KMime code
+  // const QString email = KPIM::getEmailAddress( _email );
+  const QCString tmp = _email.utf8();
+  const char *cursor = tmp.data();
+  const char *end = tmp.data() + tmp.length();
+  KMime::Types::Mailbox mbox;
+  KMime::HeaderParsing::parseMailbox( cursor, end, mbox );
+  const QString email = mbox.addrSpec.asString();
+
+  for ( KPIM::IdentityManager::ConstIterator it = KOCore::self()->identityManager()->begin();
+        it != KOCore::self()->identityManager()->end(); ++it ) {
+    if ( email == (*it).emailAddr() )
+      return true;
+  }
+
   if ( mAdditionalMails.find( email ) != mAdditionalMails.end() )
     return true;
-  QStringList lst = KABC::StdAddressBook::self()->whoAmI().emails();
+  QStringList lst = mMyAddrBookMails;
   if ( lst.find( email ) != lst.end() )
     return true;
   return false;
Index: korganizer/korganizer_configcolors.desktop
===================================================================
--- korganizer/korganizer_configcolors.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ korganizer/korganizer_configcolors.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,5 +1,4 @@
 [Desktop Entry]
-Encoding=UTF-8
 Icon=colors
 Type=Service
 ServiceTypes=KCModule
@@ -44,6 +43,7 @@
 Name[is]=Litir
 Name[it]=Colori
 Name[ja]=色
+Name[ka]=ფერები
 Name[kk]=Түстері
 Name[km]=ពណ៌
 Name[lt]=Spalvos
@@ -73,7 +73,8 @@
 Name[th]=สี
 Name[tr]=Renkler
 Name[uk]=Кольори
-Name[uz]=Ранглар
+Name[uz]=Ranglar
+Name[uz@cyrillic]=Ранглар
 Name[ven]=Mivhala
 Name[vi]=Màu 
 Name[xh]=Imibala
@@ -108,6 +109,7 @@
 Comment[is]=KOrganizer litastillingar
 Comment[it]=Configurazione dei colori di Korganizer
 Comment[ja]=KOrganizer 色設定
+Comment[ka]=KDE-ს ორგანიზატორის ფერთა კონფიგურაცია
 Comment[kk]=KOrganizer-дің түстер параметрлері
 Comment[km]=ការ​កំណត់​រចនាសម្ព័ន្ធ​ពណ៌ KOrganizer
 Comment[lt]=KOrganizer spalvų konfigūravimas
@@ -152,7 +154,7 @@
 Keywords[eu]=korganizer,koloreak
 Keywords[fa]=korganizer،رنگها
 Keywords[fi]=korganizer,värit
-Keywords[fr]=KOrganizer,couleurs
+Keywords[fr]=korganizer,couleurs
 Keywords[fy]=korganizer,colors,kleuren
 Keywords[ga]=korganizer,dathanna
 Keywords[gl]=korganizer,cores
@@ -162,6 +164,7 @@
 Keywords[is]=korganizer,litir
 Keywords[it]=korganizer,colori
 Keywords[ja]=korganizer,色
+Keywords[ka]=korganizer,ფერები
 Keywords[km]=korganizer,ពណ៌
 Keywords[lt]=korganizer,colors, spalvos
 Keywords[mk]=korganizer,colors,корганизатор,бои
@@ -185,5 +188,6 @@
 Keywords[tg]=korganizer,colors,органайзер,рангҳо
 Keywords[tr]=korganizer,renkler
 Keywords[uk]=korganizer,кольори
-Keywords[uz]=korganizer,органайзер,ранглар
+Keywords[uz]=korganizer,organayzer,ranglar
+Keywords[uz@cyrillic]=korganizer,органайзер,ранглар
 Keywords[zh_CN]=korganizer,colors,颜色
Index: korganizer/resourceview.cpp
===================================================================
--- korganizer/resourceview.cpp	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ korganizer/resourceview.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -63,7 +63,7 @@
   mResourceView = new ResourceView( mCalendar, parent );
 
   QObject::connect( mResourceView, SIGNAL( resourcesChanged() ),
-                    mView, SLOT( updateView() ) );
+                    mView, SLOT( resourcesChanged() ) );
   QObject::connect( mResourceView, SIGNAL( resourcesChanged() ),
                     mView, SLOT( updateCategories() ) );
 
@@ -359,22 +359,35 @@
   KRES::ConfigDialog *dlg = new KRES::ConfigDialog( this, QString("calendar"), resource,
                           "KRES::ConfigDialog" );
 
-  if ( dlg && dlg->exec() ) {
+  bool success = true;
+  if ( !dlg || !dlg->exec() )
+    success = false;
+
+  if ( success ) {
     resource->setTimeZoneId( KOPrefs::instance()->mTimeZoneId );
-    if ( resource->isActive() ) {
-      resource->open();
-      resource->load();
+    if ( resource->isActive() && ( !resource->open() || !resource->load() ) ) {
+      // ### There is a resourceLoadError() signal declared in ResourceCalendar
+      //     but no subclass seems to make use of it. We could do better.
+      KMessageBox::error( this, i18n("Unable to create the resource.")
+                                .arg( type ) );
+      success = false;
     }
+  }
+
+  if ( success ) {
     manager->add( resource );
     // we have to call resourceAdded manually, because for in-process changes
     // the dcop signals are not connected, so the resource's signals would not
     // be connected otherwise
     mCalendar->resourceAdded( resource );
-  } else {
+  }
+
+  if ( !success )
     delete resource;
-    resource = 0;
-  }
-  if ( dlg ) delete dlg;
+
+  delete dlg;
+
+  //### maybe only do this if ( success )
   emitResourcesChanged();
 }
 
Index: korganizer/korganizer_part.rc
===================================================================
--- korganizer/korganizer_part.rc	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ korganizer/korganizer_part.rc	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,5 +1,5 @@
 <!DOCTYPE kpartgui>
-<kpartgui name="korganizer" version="42">
+<kpartgui name="korganizer" version="43">
 
   <MenuBar>
     <Menu name="file"><text>&amp;File</text>
@@ -167,7 +167,7 @@
     <Action name="new_event"/>
     <Action name="new_todo"/>
     <Separator/>
-    <Action name="edit_paste"/>
+    <Action name="korganizer_paste"/>
     <Merge/>
   </Menu>
 
Index: korganizer/koeventpopupmenu.cpp
===================================================================
--- korganizer/koeventpopupmenu.cpp	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ korganizer/koeventpopupmenu.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -64,6 +64,9 @@
   mEditOnlyItems.append(
     insertItem( KOGlobals::self()->smallIcon("editcopy"), i18n("&Copy"),
                 this, SLOT( popupCopy() ) ) );
+  // paste is always possible
+  insertItem( KOGlobals::self()->smallIcon("editpaste"), i18n("&Paste"),
+                this, SLOT( popupPaste() ) );
   mEditOnlyItems.append(
     insertItem( KOGlobals::self()->smallIcon("editdelete"), i18n("&Delete"),
                 this, SLOT( popupDelete() ) ) );
@@ -158,7 +161,12 @@
   if (mCurrentIncidence) emit copyIncidenceSignal(mCurrentIncidence);
 }
 
+void KOEventPopupMenu::popupPaste()
+{
+  emit pasteIncidenceSignal();
+}
 
+
 void KOEventPopupMenu::popupAlarm()
 {
   if (mCurrentIncidence) emit toggleAlarmSignal( mCurrentIncidence );
Index: korganizer/multiagendaview.h
===================================================================
--- korganizer/multiagendaview.h	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ korganizer/multiagendaview.h	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -23,7 +23,10 @@
 
 class QScrollView;
 class QHBox;
+class QSplitter;
 class KOAgendaView;
+class TimeLabels;
+class QScrollBar;
 
 namespace KCal {
   class ResourceCalendar;
@@ -55,13 +58,19 @@
     void showIncidences( const Incidence::List &incidenceList );
     void updateView();
     void changeIncidenceDisplay( Incidence *incidence, int mode );
+    void updateConfig();
 
     void setIncidenceChanger( IncidenceChangerBase *changer );
 
     void finishTypeAhead();
 
+    void show();
+
+    void resourcesChanged();
+
   protected:
     void resizeEvent( QResizeEvent *ev );
+    bool eventFilter( QObject *obj, QEvent *event );
 
   private:
     void addView( const QString &label, KCal::ResourceCalendar *res, const QString &subRes = QString::null );
@@ -69,16 +78,28 @@
     void recreateViews();
     void setupViews();
     void resizeScrollView( const QSize &size );
+    void installSplitterEventFilter( QSplitter *splitter );
 
   private slots:
     void slotSelectionChanged();
     void slotClearTimeSpanSelection();
+    void resizeSplitters();
+    void zoomView( const int delta, const QPoint &pos, const Qt::Orientation ori );
+    void slotResizeScrollView();
 
   private:
     QValueList<KOAgendaView*> mAgendaViews;
     QValueList<QWidget*> mAgendaWidgets;
     QHBox *mTopBox;
     QScrollView *mScrollView;
+    TimeLabels *mTimeLabels;
+    QSplitter *mLeftSplitter, *mRightSplitter;
+    QSplitter *mLastMovedSplitter;
+    QScrollBar *mScrollBar;
+    QWidget *mLeftBottomSpacer, *mRightBottomSpacer;
+    QDate mStartDate, mEndDate;
+    bool mUpdateOnShow;
+    bool mPendingChanges;
 };
 
 }
Index: korganizer/korganizer_configdesignerfields.desktop
===================================================================
--- korganizer/korganizer_configdesignerfields.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ korganizer/korganizer_configdesignerfields.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,5 +1,4 @@
 [Desktop Entry]
-Encoding=UTF-8
 Icon=dlgedit
 Type=Service
 ServiceTypes=KCModule
@@ -38,6 +37,7 @@
 Name[is]=Sérsniðnar síður
 Name[it]=Pagine personalizzate
 Name[ja]=カスタムページ
+Name[ka]=სამომხმარებლო გვერდები
 Name[kk]=Қосымша парақтар
 Name[km]=ទំព័រ​ផ្ទាល់​ខ្លួន
 Name[lt]=Pasirinkti puslapiai
@@ -89,6 +89,7 @@
 Comment[is]=Stilla sérsniðnu síðurnar
 Comment[it]=Configura le pagine personalizzate
 Comment[ja]=カスタムページの設定
+Comment[ka]=სამომხმარებლო გვერდების კონფიგურაცია
 Comment[kk]=Қосымша парақтарды баптау
 Comment[km]=កំណត់​រចនាសម្ព័ន្ធ​ទំព័រ​ផ្ទាល់​ខ្លួន
 Comment[lt]=Konfigūruoti darbastalių skaičių ir pavadinimus
@@ -127,7 +128,7 @@
 Keywords[eu]=korganizer, konfiguratu, ezarpenak, eremu pertsonalizatuak
 Keywords[fa]=korganizer، پیکربندی، تنظیمات، حوزه‌های سفارشی
 Keywords[fi]=kaddressbook, aseta, asetukset,omat kentät
-Keywords[fr]=KOrganizer, configuration, configurer, champs personnalisés
+Keywords[fr]=korganizer, configuration, configurer, champs personnalisés
 Keywords[fy]=korganizer, configuratie, instellingen, ynstellings, oanpaste fjilden, aangepaste velden
 Keywords[ga]=korganizer, cumraigh, socruithe, réimsí saincheaptha
 Keywords[gl]=korganizer, configurar, opcións, campos personalizados
@@ -136,6 +137,7 @@
 Keywords[is]=korganizer, stillingar, stilla, sérsniðnir reitir
 Keywords[it]=korganizer, configura, impostazioni, campi personalizzati
 Keywords[ja]=korganizer、設定、設定,カスタムフィールド
+Keywords[ka]=korganizer, კონფიგურაცია,პარამეტრები,სამომხმარებლო ველები
 Keywords[km]=korganizer,កំណត់​រចនាសម្ព័ន្ធ,ការ​កំណត់,វាល​ផ្ទាល់​ខ្លួន
 Keywords[lt]=korganizer, configure, settings, custom fields, konfigūruoti, nustatymai, pasirinkti laukai
 Keywords[mk]=korganizer, configure, settings, custom fields, корганизатор, конфигурација, конфигурирање, поставувања, сопствени полиња
Index: korganizer/koviewmanager.cpp
===================================================================
--- korganizer/koviewmanager.cpp	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ korganizer/koviewmanager.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -184,6 +184,8 @@
           mMainView, SLOT(copyIncidence(Incidence *)));
   connect(view, SIGNAL(cutIncidenceSignal(Incidence *)),
           mMainView, SLOT(cutIncidence(Incidence *)));
+  connect(view, SIGNAL(pasteIncidenceSignal()),
+          mMainView, SLOT(pasteIncidence()));
   connect(view, SIGNAL(toggleAlarmSignal(Incidence *)),
           mMainView, SLOT(toggleAlarm(Incidence *)));
   connect(view,SIGNAL(dissociateOccurrenceSignal( Incidence *, const QDate & )),
@@ -465,3 +467,11 @@
 {
   showView( static_cast<KOrg::BaseView*>( widget ) );
 }
+
+void KOViewManager::resourcesChanged()
+{
+  if ( mAgendaView )
+    mAgendaView->resourcesChanged();
+  if ( mAgendaSideBySideView )
+    mAgendaSideBySideView->resourcesChanged();
+}
Index: korganizer/koagendaview.cpp
===================================================================
--- korganizer/koagendaview.cpp	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ korganizer/koagendaview.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -63,6 +63,7 @@
 #include "koprefs.h"
 #include "koagenda.h"
 #include "koagendaitem.h"
+#include "timelabels.h"
 
 #include "koincidencetooltip.h"
 #include "kogroupware.h"
@@ -74,206 +75,13 @@
 
 using namespace KOrg;
 
-TimeLabels::TimeLabels(int rows,QWidget *parent,const char *name,WFlags f) :
-  QScrollView(parent,name,f)
-{
-  mRows = rows;
-  mMiniWidth = 0;
 
-  mCellHeight = KOPrefs::instance()->mHourSize*4;
-
-  enableClipper(true);
-
-  setHScrollBarMode(AlwaysOff);
-  setVScrollBarMode(AlwaysOff);
-
-  resizeContents(50, int(mRows * mCellHeight) );
-
-  viewport()->setBackgroundMode( PaletteBackground );
-
-  mMousePos = new QFrame(this);
-  mMousePos->setLineWidth(0);
-  mMousePos->setMargin(0);
-  mMousePos->setBackgroundColor(Qt::red);
-  mMousePos->setFixedSize(width(), 1);
-  addChild(mMousePos, 0, 0);
-}
-
-void TimeLabels::mousePosChanged(const QPoint &pos)
-{
-  moveChild(mMousePos, 0, pos.y());
-}
-
-void TimeLabels::showMousePos()
-{
-  mMousePos->show();
-}
-
-void TimeLabels::hideMousePos()
-{
-  mMousePos->hide();
-}
-
-void TimeLabels::setCellHeight(double height)
-{
-  mCellHeight = height;
-}
-
-/*
-  Optimization so that only the "dirty" portion of the scroll view
-  is redrawn.  Unfortunately, this is not called by default paintEvent() method.
-*/
-void TimeLabels::drawContents(QPainter *p,int cx, int cy, int cw, int ch)
-{
-  // bug:  the parameters cx and cw are the areas that need to be
-  //       redrawn, not the area of the widget.  unfortunately, this
-  //       code assumes the latter...
-
-  // now, for a workaround...
-  cx = contentsX() + frameWidth()*2;
-  cw = contentsWidth() ;
-  // end of workaround
-
-  int cell = ((int)(cy/mCellHeight));
-  double y = cell * mCellHeight;
-  QFontMetrics fm = fontMetrics();
-  QString hour;
-  QString suffix = "am";
-  int timeHeight =  fm.ascent();
-  QFont nFont = font();
-  p->setFont( font() );
-
-  if (!KGlobal::locale()->use12Clock()) {
-      suffix = "00";
-  } else
-      if (cell > 11) suffix = "pm";
-
-  if ( timeHeight >  mCellHeight ) {
-    timeHeight = int(mCellHeight-1);
-    int pointS = nFont.pointSize();
-    while ( pointS > 4 ) {
-      nFont.setPointSize( pointS );
-      fm = QFontMetrics( nFont );
-      if ( fm.ascent() < mCellHeight )
-        break;
-      -- pointS;
-    }
-    fm = QFontMetrics( nFont );
-    timeHeight = fm.ascent();
-  }
-  //timeHeight -= (timeHeight/4-2);
-  QFont sFont = nFont;
-  sFont.setPointSize( sFont.pointSize()/2 );
-  QFontMetrics fmS(  sFont );
-  int startW = mMiniWidth - frameWidth()-2 ;
-  int tw2 = fmS.width(suffix);
-  int divTimeHeight = (timeHeight-1) /2 - 1;
-  //testline
-  //p->drawLine(0,0,0,contentsHeight());
-  while (y < cy + ch+mCellHeight) {
-    // hour, full line
-    p->drawLine( cx, int(y), cw+2, int(y) );
-    hour.setNum(cell);
-    // handle 24h and am/pm time formats
-    if (KGlobal::locale()->use12Clock()) {
-      if (cell == 12) suffix = "pm";
-      if (cell == 0) hour.setNum(12);
-      if (cell > 12) hour.setNum(cell - 12);
-    }
-
-    // center and draw the time label
-    int timeWidth = fm.width(hour);
-    int offset = startW - timeWidth - tw2 -1 ;
-    p->setFont( nFont );
-    p->drawText( offset, int(y+timeHeight), hour);
-    p->setFont( sFont );
-    offset = startW - tw2;
-    p->drawText( offset, int(y+timeHeight-divTimeHeight), suffix);
-
-    // increment indices
-    y += mCellHeight;
-    cell++;
-  }
-
-}
-
-/**
-   Calculates the minimum width.
-*/
-int TimeLabels::minimumWidth() const
-{
-  return mMiniWidth;
-}
-
-/** updates widget's internal state */
-void TimeLabels::updateConfig()
-{
-  setFont(KOPrefs::instance()->mTimeBarFont);
-
-  QString test = "20";
-  if ( KGlobal::locale()->use12Clock() )
-      test = "12";
-  mMiniWidth = fontMetrics().width( test );
-  if ( KGlobal::locale()->use12Clock() )
-      test = "pm";
-  else {
-      test = "00";
-  }
-  QFont sFont = font();
-  sFont.setPointSize(  sFont.pointSize()/2 );
-  QFontMetrics fmS(   sFont );
-  mMiniWidth += fmS.width(  test ) + frameWidth()*2+4 ;
-  // update geometry restrictions based on new settings
-  setFixedWidth(  mMiniWidth );
-
-  // update HourSize
-  mCellHeight = KOPrefs::instance()->mHourSize*4;
-  // If the agenda is zoomed out so that more then 24 would be shown,
-  // the agenda only shows 24 hours, so we need to take the cell height
-  // from the agenda, which is larger than the configured one!
-  if ( mCellHeight < 4*mAgenda->gridSpacingY() )
-       mCellHeight = 4*mAgenda->gridSpacingY();
-  resizeContents( mMiniWidth, int(mRows * mCellHeight+1) );
-}
-
-/** update time label positions */
-void TimeLabels::positionChanged()
-{
-  int adjustment = mAgenda->contentsY();
-  setContentsPos(0, adjustment);
-}
-
-/**  */
-void TimeLabels::setAgenda(KOAgenda* agenda)
-{
-  mAgenda = agenda;
-
-  connect(mAgenda, SIGNAL(mousePosSignal(const QPoint &)), this, SLOT(mousePosChanged(const QPoint &)));
-  connect(mAgenda, SIGNAL(enterAgenda()), this, SLOT(showMousePos()));
-  connect(mAgenda, SIGNAL(leaveAgenda()), this, SLOT(hideMousePos()));
-  connect(mAgenda, SIGNAL(gridSpacingYChanged( double ) ), this, SLOT( setCellHeight( double ) ) );
-}
-
-
-/** This is called in response to repaint() */
-void TimeLabels::paintEvent(QPaintEvent*)
-{
-//  kdDebug(5850) << "paintevent..." << endl;
-  // this is another hack!
-//  QPainter painter(this);
-  //QString c
-  repaintContents(contentsX(), contentsY(), visibleWidth(), visibleHeight());
-}
-
-////////////////////////////////////////////////////////////////////////////
-
 EventIndicator::EventIndicator(Location loc,QWidget *parent,const char *name)
   : QFrame(parent,name)
 {
   mColumns = 1;
-  mTopBox = 0;
+  mEnabled.resize( mColumns );
   mLocation = loc;
-  mTopLayout = 0;
 
   if (mLocation == Top) mPixmap = KOGlobals::self()->smallIcon("upindicator");
   else mPixmap = KOGlobals::self()->smallIcon("downindicator");
@@ -413,10 +221,12 @@
 ////////////////////////////////////////////////////////////////////////////
 ////////////////////////////////////////////////////////////////////////////
 
-KOAgendaView::KOAgendaView(Calendar *cal,QWidget *parent,const char *name) :
+KOAgendaView::KOAgendaView(Calendar *cal,QWidget *parent,const char *name, bool isSideBySide ) :
   KOrg::AgendaView (cal,parent,name), mExpandButton( 0 ), mAllowAgendaUpdate( true ),
   mUpdateItem( 0 ),
-  mResource( 0 )
+  mResource( 0 ),
+  mIsSideBySide( isSideBySide ),
+  mPendingChanges( true )
 {
   mSelectedDates.append(QDate::currentDate());
 
@@ -467,6 +277,8 @@
 
   // Create all-day agenda widget
   mDummyAllDayLeft = new QVBox( mAllDayFrame );
+  if ( isSideBySide )
+    mDummyAllDayLeft->hide();
 
   if ( KOPrefs::instance()->compactDialogs() ) {
     mExpandButton = new QPushButton(mDummyAllDayLeft);
@@ -512,15 +324,19 @@
 
   // make connections between dependent widgets
   mTimeLabels->setAgenda(mAgenda);
+  if ( isSideBySide )
+    mTimeLabels->hide();
 
   // Update widgets to reflect user preferences
 //  updateConfig();
 
   createDayLabels();
 
-  // these blank widgets make the All Day Event box line up with the agenda
-  dummyAllDayRight->setFixedWidth(mAgenda->verticalScrollBar()->width());
-  dummyAgendaRight->setFixedWidth(mAgenda->verticalScrollBar()->width());
+  if ( !isSideBySide ) {
+    // these blank widgets make the All Day Event box line up with the agenda
+    dummyAllDayRight->setFixedWidth(mAgenda->verticalScrollBar()->width());
+    dummyAgendaRight->setFixedWidth(mAgenda->verticalScrollBar()->width());
+  }
 
   updateTimeBarWidth();
 
@@ -549,11 +365,16 @@
 
   connectAgenda( mAgenda, mAgendaPopup, mAllDayAgenda );
   connectAgenda( mAllDayAgenda, mAllDayAgendaPopup, mAgenda);
+
+  if ( cal )
+    cal->registerObserver( this );
 }
 
 
 KOAgendaView::~KOAgendaView()
 {
+  if ( calendar() )
+    calendar()->unregisterObserver( this );
   delete mAgendaPopup;
   delete mAllDayAgendaPopup;
 }
@@ -612,7 +433,8 @@
 
 void KOAgendaView::zoomInVertically( )
 {
-  KOPrefs::instance()->mHourSize++;
+  if ( !mIsSideBySide )
+    KOPrefs::instance()->mHourSize++;
   mAgenda->updateConfig();
   mAgenda->checkScrollBoundaries();
 
@@ -626,9 +448,10 @@
 void KOAgendaView::zoomOutVertically( )
 {
 
-  if ( KOPrefs::instance()->mHourSize > 4 ) {
+  if ( KOPrefs::instance()->mHourSize > 4 || mIsSideBySide ) {
 
-    KOPrefs::instance()->mHourSize--;
+    if ( !mIsSideBySide )
+      KOPrefs::instance()->mHourSize--;
     mAgenda->updateConfig();
     mAgenda->checkScrollBoundaries();
 
@@ -705,7 +528,7 @@
   const Qt::Orientation orient )
 {
   static QDate zoomDate;
-  static QTimer t( this );
+  static QTimer *t = new QTimer( this );
 
 
   //Zoom to the selected incidence, on the other way
@@ -715,10 +538,10 @@
     if ( date.isValid() )
       zoomDate=date;
     else{
-      if ( !t.isActive() ) {
+      if ( !t->isActive() ) {
         zoomDate= mSelectedDates[pos.x()];
       }
-      t.start ( 1000,true );
+      t->start ( 1000,true );
     }
     if ( delta > 0 )
       zoomOutHorizontally( zoomDate );
@@ -748,7 +571,8 @@
 
   mDayLabels = new QFrame (mDayLabelsFrame);
   mLayoutDayLabels = new QHBoxLayout(mDayLabels);
-  mLayoutDayLabels->addSpacing(mTimeLabels->width());
+  if ( !mIsSideBySide )
+    mLayoutDayLabels->addSpacing(mTimeLabels->width());
 
   const KCalendarSystem*calsys=KOGlobals::self()->calendarSystem();
 
@@ -812,7 +636,8 @@
 #endif
   }
 
-  mLayoutDayLabels->addSpacing(mAgenda->verticalScrollBar()->width());
+  if ( !mIsSideBySide )
+    mLayoutDayLabels->addSpacing(mAgenda->verticalScrollBar()->width());
   mDayLabels->show();
 }
 
@@ -1217,6 +1042,9 @@
 void KOAgendaView::showDates( const QDate &start, const QDate &end )
 {
 //  kdDebug(5850) << "KOAgendaView::selectDates" << endl;
+  if ( !mSelectedDates.isEmpty() && mSelectedDates.first() == start
+        && mSelectedDates.last() == end && !mPendingChanges )
+    return;
 
   mSelectedDates.clear();
 
@@ -1400,6 +1228,8 @@
 
 void KOAgendaView::fillAgenda()
 {
+  mPendingChanges = false;
+
   /* Remember the uids of the selected items. In case one of the
    * items was deleted and re-added, we want to reselect it. */
   const QString &selectedAgendaUid = mAgenda->lastSelectedUid();
@@ -1680,8 +1510,8 @@
 
   mTimeSpanInAllDay = false;
 
-  QDate dayStart = mSelectedDates[start.x()];
-  QDate dayEnd = mSelectedDates[end.x()];
+  QDate dayStart = mSelectedDates[ kClamp( start.x(), 0, (int)mSelectedDates.size() - 1 ) ];
+  QDate dayEnd = mSelectedDates[ kClamp( end.x(), 0, (int)mSelectedDates.size() - 1 ) ];
 
   QTime timeStart = mAgenda->gyToTime(start.y());
   QTime timeEnd = mAgenda->gyToTime( end.y() + 1 );
@@ -1763,3 +1593,26 @@
   }
   return true;
 }
+
+void KOAgendaView::resourcesChanged()
+{
+  mPendingChanges = true;
+}
+
+void KOAgendaView::calendarIncidenceAdded(Incidence * incidence)
+{
+  Q_UNUSED( incidence );
+  mPendingChanges = true;
+}
+
+void KOAgendaView::calendarIncidenceChanged(Incidence * incidence)
+{
+  Q_UNUSED( incidence );
+  mPendingChanges = true;
+}
+
+void KOAgendaView::calendarIncidenceRemoved(Incidence * incidence)
+{
+  Q_UNUSED( incidence );
+  mPendingChanges = true;
+}
Index: korganizer/korganizer_configgroupautomation.desktop
===================================================================
--- korganizer/korganizer_configgroupautomation.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ korganizer/korganizer_configgroupautomation.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,5 +1,4 @@
 [Desktop Entry]
-Encoding=UTF-8
 Icon=personal
 Type=Service
 ServiceTypes=KCModule
@@ -36,6 +35,7 @@
 Name[is]=Hópsjálfvirkni
 Name[it]=Automazione gruppi
 Name[ja]=グループ自動化
+Name[ka]=ჯგუფური ავტომატიზაცია
 Name[kk]=Топтың біріккен жұмысы
 Name[km]=ស្វ័យប្រតិកម្ម​ក្រុម
 Name[lt]=Grupių automatizavimas
@@ -86,6 +86,7 @@
 Comment[is]=Stillingar KOrganizer hópsjálfvirkni
 Comment[it]=Configurazione automazione gruppi di KOrganizer
 Comment[ja]=KOrganizer グループ自動化設定
+Comment[ka]=KOrganizer-ის ჯგუფური ავტომატიზაციის კონფიგურაცია
 Comment[kk]=KOrganizer топтық жұмысының параметрлері
 Comment[km]=ការ​កំណត់​រចនាសម្ព័ន្ធ​ស្វ័យប្រតិកម្ម​ក្រុម​របស់ KOrganizer
 Comment[lt]=KOrganizer grupių automatizavimo konfigūravimas
@@ -128,7 +129,7 @@
 Keywords[eu]=korganizer,taldea,automatizazioa
 Keywords[fa]=korganizer،گروه، خودکارسازی
 Keywords[fi]=korganizer,ryhmä,automaatio
-Keywords[fr]=KOrganizer,groupes,automatisation
+Keywords[fr]=korganizer,groupes,automatisation
 Keywords[fy]=korganizer,groep,automatisearring
 Keywords[gl]=korganizer,grupo,automatización
 Keywords[hi]=के-आर्गेनाइज़र,समूह,स्वचालन
@@ -136,6 +137,7 @@
 Keywords[is]=korganizer,hópar,sjálfvirkni
 Keywords[it]=korganizer,gruppi,automazione
 Keywords[ja]=korganizer,グループ,自動化
+Keywords[ka]=korganizer,ჯგუფი,ავტომატიზაცია
 Keywords[km]=korganizer,ក្រុម,ស្វ័យប្រតិកម្ម
 Keywords[lt]=korganizer,group,automation, grupės,automatizavimas
 Keywords[mk]=korganizer,group,automation,корганизатор,група,групи,автоматизација
Index: korganizer/korganizer_configviews.desktop
===================================================================
--- korganizer/korganizer_configviews.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ korganizer/korganizer_configviews.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,5 +1,4 @@
 [Desktop Entry]
-Encoding=UTF-8
 Icon=viewmag
 Type=Service
 ServiceTypes=KCModule
@@ -38,9 +37,10 @@
 Name[he]=תצוגות
 Name[hi]=दृश्य
 Name[hu]=Nézetek
-Name[is]=Sýn
+Name[is]=Sýnir
 Name[it]=Viste
 Name[ja]=ビューア
+Name[ka]=ხედები
 Name[kk]=Көріністері
 Name[km]=ទិដ្ឋភាព
 Name[lt]=Žiūrikliai
@@ -66,7 +66,8 @@
 Name[tg]=Намудҳо
 Name[tr]=Görünümler
 Name[uk]=Перегляди
-Name[uz]=Кўринишлар
+Name[uz]=Koʻrinishlar
+Name[uz@cyrillic]=Кўринишлар
 Name[zh_CN]=视图
 Name[zh_TW]=檢視
 Comment=KOrganizer View Configuration
@@ -94,6 +95,7 @@
 Comment[is]=Stillingar KOrganizer sýna
 Comment[it]=Configurazione viste di KOrganizer
 Comment[ja]=KOrganizer ビューア設定
+Comment[ka]=KOrganizer  ხედის კონფიგურაცია
 Comment[kk]=KOrganizer-дің көрінісінің параметрлері
 Comment[km]=ការ​កំណត់​រចនាសម្ព័ន្ធ​ទិដ្ឋភាព​របស់ KOrganizer
 Comment[lt]=KOrganizer žiūriklių konfigūravimas
@@ -136,7 +138,7 @@
 Keywords[eu]=korganizer,ikuspegia
 Keywords[fa]=korganizer،نما
 Keywords[fi]=korganizer,näkymä
-Keywords[fr]=KOrganizer,vues
+Keywords[fr]=korganizer,vues
 Keywords[fy]=korganizer,weergave, werjefte
 Keywords[ga]=korganizer,amharc
 Keywords[gl]=korganizer,vista
@@ -144,6 +146,7 @@
 Keywords[hu]=korganizer,nézet
 Keywords[is]=korganizer,sýn
 Keywords[it]=korganizer,viste
+Keywords[ka]=korganizer,ხედი
 Keywords[km]=korganizer,ទិដ្ឋភាព
 Keywords[lt]=korganizer,view,žiūrikliai
 Keywords[mk]=korganizer,view,корганизатор,приказ
@@ -167,5 +170,6 @@
 Keywords[tg]=korganizer,view,органайзер,намудҳо
 Keywords[tr]=korganizer,görünüm
 Keywords[uk]=korganizer,перегляд
-Keywords[uz]=korganizer,органайзер,кўриниш
+Keywords[uz]=korganizer,organayzer,koʻrinish
+Keywords[uz@cyrillic]=korganizer,органайзер,кўриниш
 Keywords[zh_CN]=korganizer,view,视图
Index: korganizer/incidencechanger.cpp
===================================================================
--- korganizer/incidencechanger.cpp	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ korganizer/incidencechanger.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -93,8 +93,31 @@
   bool doDelete = sendGroupwareMessage( incidence, KCal::Scheduler::Cancel );
   if( doDelete ) {
     // @TODO: let Calendar::deleteIncidence do the locking...
+    Incidence* tmp = incidence->clone();
     emit incidenceToBeDeleted( incidence );
     doDelete = mCalendar->deleteIncidence( incidence );
+    if ( !KOPrefs::instance()->thatIsMe( tmp->organizer().email() ) ) {
+      const QStringList myEmails = KOPrefs::instance()->allEmails();
+      bool notifyOrganizer = false;
+      for ( QStringList::ConstIterator it = myEmails.begin(); it != myEmails.end(); ++it ) {
+        QString email = *it;
+        Attendee *me = tmp->attendeeByMail(email);
+        if ( me ) {
+          if ( me->status() == KCal::Attendee::Accepted || me->status() == KCal::Attendee::Delegated )
+            notifyOrganizer = true;
+          Attendee *newMe = new Attendee( *me );
+          newMe->setStatus( KCal::Attendee::Declined );
+          tmp->clearAttendees();
+          tmp->addAttendee( newMe );
+          break;
+        }
+      }
+
+      if ( notifyOrganizer ) {
+          KCal::MailScheduler scheduler( mCalendar );
+          scheduler.performTransaction( tmp, Scheduler::Reply );
+      }
+    }
     emit incidenceDeleted( incidence );
   }
   return doDelete;
@@ -254,16 +277,12 @@
 }
 
 bool IncidenceChanger::changeIncidence( Incidence *oldinc, Incidence *newinc,
-                                        int action, bool counter )
+                                        int action )
 {
 kdDebug(5850)<<"IncidenceChanger::changeIncidence for incidence \""<<newinc->summary()<<"\" ( old one was \""<<oldinc->summary()<<"\")"<<endl;
   if( incidencesEqual( newinc, oldinc ) ) {
     // Don't do anything
     kdDebug(5850) << "Incidence not changed\n";
-    if ( counter ) {
-      KCal::MailScheduler scheduler( mCalendar );
-      scheduler.performTransaction( newinc, Scheduler::Reply );
-    }
   } else {
     kdDebug(5850) << "Incidence changed\n";
     bool statusChanged = myAttendeeStatusChanged( oldinc, newinc );
@@ -274,7 +293,7 @@
     //        it wants with the event. If no groupware is used,use the null
     //        pattern...
     bool revert = KOPrefs::instance()->mUseGroupwareCommunication;
-    if ( !counter && revert &&
+    if ( revert &&
         KOGroupware::instance()->sendICalMessage( 0,
                                                   KCal::Scheduler::Request,
                                                   newinc, false, statusChanged ) ) {
@@ -286,20 +305,6 @@
       }
       revert = false;
     }
-    if ( counter && revert ) {
-      // pseudo counter as done by outlook
-      Event *e = dynamic_cast<Event*>( newinc );
-      if ( e ) {
-        Incidence* tmp = oldinc->clone();
-        tmp->setSummary( i18n("Counter proposal: %1").arg( e->summary() ) );
-        tmp->setDescription( e->description() );
-        tmp->addComment( i18n("Proposed new meeting time: %1 - %2").arg( e->dtStartStr() ).arg( e->dtEndStr() ) );
-        KCal::MailScheduler scheduler( mCalendar );
-        scheduler.performTransaction( tmp, Scheduler::Reply );
-      } else {
-        kdWarning(5850) << k_funcinfo << "Counter proposals only supported for events" << endl;
-      }
-    }
 
     if ( revert ) {
       assignIncidence( newinc, oldinc );
Index: korganizer/komailclient.h
===================================================================
--- korganizer/komailclient.h	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ korganizer/komailclient.h	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -37,9 +37,9 @@
   public:
     KOMailClient();
     virtual ~KOMailClient();
-    
+
     bool mailAttendees(IncidenceBase *,const QString &attachment=QString::null);
-    bool mailOrganizer(IncidenceBase *,const QString &attachment=QString::null);
+    bool mailOrganizer(IncidenceBase *,const QString &attachment=QString::null, const QString &sub = QString::null);
     bool mailTo(IncidenceBase *,const QString &recipients,const QString &attachment=QString::null);
 
   protected:
Index: korganizer/koincidencetooltip.cpp
===================================================================
--- korganizer/koincidencetooltip.cpp	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ korganizer/koincidencetooltip.cpp	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -26,6 +26,7 @@
 #include <libkcal/incidenceformatter.h>
 
 #include "koincidencetooltip.h"
+#include "koagendaitem.h"
 
 /**
 @author Reinhold Kainhofer
@@ -33,9 +34,27 @@
 */
 
 void KOIncidenceToolTip::add ( QWidget * widget, Incidence *incidence,
-        QToolTipGroup * group, const QString & longText )
+                               QToolTipGroup * group, const QString & longText )
 {
   if ( !widget || !incidence ) return;
   QToolTip::add(widget, IncidenceFormatter::toolTipString( incidence ), group, longText);
 }
 
+void KOIncidenceToolTip::add(KOAgendaItem * item, Incidence * incidence, QToolTipGroup * group)
+{
+  Q_UNUSED( incidence );
+  Q_UNUSED( group );
+  QToolTip::remove( item );
+  new KOIncidenceToolTip( item );
+}
+
+void KOIncidenceToolTip::maybeTip(const QPoint & pos)
+{
+  Q_UNUSED( pos );
+  KOAgendaItem *item = dynamic_cast<KOAgendaItem*>( parentWidget() );
+  if ( !item )
+    return;
+  if ( !mText )
+    mText = IncidenceFormatter::toolTipString( item->incidence() );
+  tip( QRect( QPoint( 0, 0 ), item->size() ), mText );
+}
Index: korganizer/koincidenceeditor.h
===================================================================
--- korganizer/koincidenceeditor.h	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ korganizer/koincidenceeditor.h	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -68,7 +68,7 @@
 
     virtual void reload() = 0;
 
-    void selectInvitationCounterProposal( bool enable );
+    virtual void selectInvitationCounterProposal( bool enable );
 
   public slots:
     /** Edit an existing todo. */
Index: korganizer/korganizer_configmain.desktop
===================================================================
--- korganizer/korganizer_configmain.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ korganizer/korganizer_configmain.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,5 +1,4 @@
 [Desktop Entry]
-Encoding=UTF-8
 Icon=identity
 Type=Service
 ServiceTypes=KCModule
@@ -39,6 +38,7 @@
 Name[is]=Persónulegt
 Name[it]=Personale
 Name[ja]=個人設定
+Name[ka]=პირადი
 Name[kk]=Дербес
 Name[km]=ផ្ទាល់​ខ្លួន
 Name[lt]=Suasmeninimas
@@ -63,7 +63,8 @@
 Name[tg]=Танзимотҳои шахсӣ
 Name[tr]=Kişisel
 Name[uk]=Особисті
-Name[uz]=Шахсий
+Name[uz]=Shaxsiy
+Name[uz@cyrillic]=Шахсий
 Name[zh_CN]=个人
 Name[zh_TW]=個人 
 Comment=KOrganizer Main Configuration
@@ -93,6 +94,7 @@
 Comment[is]=Aðalstillingar KOrganizer
 Comment[it]=Configurazione principale di KOrganizer
 Comment[ja]=KOrganizer 主要設定
+Comment[ka]=KOrganizer ძირითადი კონფიგურაცია
 Comment[kk]=KOrganizer-дің негізгі параметрлері
 Comment[km]=ការ​កំណត់​រចនាសម្ព័ន្ធ​សំខាន់ៗ​របស់ KOrganizer
 Comment[lt]=KOrganizer bendroji konfigūravimas
@@ -133,7 +135,7 @@
 Keywords[eu]=korganizer,nagusia,pertsonala
 Keywords[fa]=korganizer،اصلی، شخصی
 Keywords[fi]=korganizer,pää,henkilökohtainen
-Keywords[fr]=KOrganizer,principal,personnel
+Keywords[fr]=korganizer,principal,personnel
 Keywords[fy]=korganizer,algemien, persoanlik
 Keywords[gl]=korganizer,principal,persoal
 Keywords[he]=korganizer,main,personal,ארגונית,תצורה,הגדרה,הגדרות
@@ -142,6 +144,7 @@
 Keywords[is]=korganizer,aðal,persónulegt
 Keywords[it]=korganizer,principale,personale
 Keywords[ja]=korganizer,メイン,個人
+Keywords[ka]=korganizer,ძირითადი,პირადი
 Keywords[km]=korganizer,សំខាន់,ផ្ទាល់​ខ្លួន
 Keywords[lt]=korganizer,main,personal,pagrindinis,asmeninis,bendroji
 Keywords[mk]=korganizer,main,personal,корганизатор,главно,лично
@@ -165,5 +168,6 @@
 Keywords[tg]=korganizer,main,personal,почта,танзимотҳои шахсӣ,органайзер
 Keywords[tr]=korganizer,temel,kişisel
 Keywords[uk]=korganizer,особистий,Персональний
-Keywords[uz]=korganizer,органайзер,асосий,шахсий
+Keywords[uz]=korganizer,organayzer,asosiy,shaxsiy
+Keywords[uz@cyrillic]=korganizer,органайзер,асосий,шахсий
 Keywords[zh_CN]=korganizer,main,personal,主要,个人
Index: konsolekalendar/konsolekalendar.desktop
===================================================================
--- konsolekalendar/konsolekalendar.desktop	(.../tags/KDE/3.5.9/kdepim)	(wersja 892664)
+++ konsolekalendar/konsolekalendar.desktop	(.../branches/KDE/3.5/kdepim)	(wersja 892664)
@@ -1,5 +1,4 @@
 [Desktop Entry]
-Encoding=UTF-8
 Name=KonsoleKalendar
 Name[af]=Konsole Kalender
 Name[cs]=Konzolový kalendář

Zmiany atrybutów dla: .
___________________________________________________________________
Zmienione: svnmerge-blocked
   - /branches/kdepim/enterprise/kdepim:703472,703877,703925,704210,704221,704225-704226,704228-704229,704237,704988,704991-704992,704995,705006-705008,705190,705626,705751,705754-705758,705836,705995,706309,706493,706548-706549,706556,706560,706564,706572,706775,706802,767041,767555,767557
   + /branches/kdepim/enterprise/kdepim:703472,703877,703925,704210,704221,704225-704226,704228-704229,704237,704988,704991-704992,704995,705006-705008,705190,705626,705751,705754-705758,705836,705995,706309,706493,706548-706549,706556,706560,706564,706572,706775,706802,767041,767555,767557,767947,769319,769355,771106,771252,772312,772317,775195,775203,775205-775206,775212,778002,778005-778006,778008-778009,778012,778030,778728,779449,779483,779506,779853,780453,780496,780498,780530,783128,783246-783247,784427,785479,785563,785570,788243-788244,791441-791442,793472,793539,795764,795766,798446,798449,798496,802149,802152,803260,803300,803309,803382,803398,805825,805827,810303,810305,814373,814375,816025,821379,821649,825076,825084,827945,827950,830876,830933,836276-836277,836429,837232,837782,837785,840707,840711,846420,846427,850907,850914,851185-851186,854246-854247
Zmienione: svnmerge-integrated
   - /branches/kdepim/enterprise/kdepim:1-767022,767233-767554,767556,767558-767946,767948-768069,768071-768401,768403-768683,768685-768705,768707-768737,768739-768793,768795-768898,768900-768902,768904-768928,768930-769032,769034,769036-769040,769043-769044,769046,769048-769050,769052-769057,769059-769139,769142-769318,769320-769354,769356-769462,769464-769924,769926-771105,771107-771251,771253-771345,771705,772039,774162
   + /branches/kdepim/enterprise/kdepim:1-767022,767033,767233-767554,767556,767558-767946,767948-769318,769320-769354,769356-771105,771107-771251,771253-772311,772313-772316,772318-775194,775196-775202,775204,775207-775211,775213-778001,778003-778004,778007,778010-778011,778013-778029,778031-778727,778729-779448,779450-779482,779484-779505,779507-779852,779854-779994,780211,780250-780452,780454-780495,780497,780499-780529,780531-782028,782030-783127,783129-783243,783245,783248-783477,783479-784380,784382-784426,784428-784691,784693-785478,785480-785558,787827,788582-791440,791443-792201,792203-793304,793306-793471,793473-793538,793540-795763,795765,795767-798445,798447-798448,798450-798495,798497-802148,802150-802151,802153-803259,803261-803299,803301-803308,803310-803380,803383-803397,803399-804993,804995-805347,805349-805427,805429-805459,805461-805824,805826,805828-809708,809710-810236,810238-810302,810304,810306-811205,811207-813547,813549-814372,814374,814376-816024,816026-816313,816315-816322,816324-817070,817072-817087,817089-819076,819078-821035,821037-821124,821126-821378,821380-821648,821650-822268,822270-824277,824279-825075,825077-825083,825085-826354,826356-827612,827614-827891,827893-827944,827946-827949,827951-830477,830479-830875,830877-830932,830934-836103,836105-836275,836278-836391,836393-836428,836430-837231,837233-837624,837626,840224-840428,840430-840706,840708-840710,840712-843750,843760,858460,882936
Usunięte: svn:mergeinfo
Dodane: svn:externals
   + admin https://svn.kde.org/home/kde/branches/KDE/3.5/kde-common/admin


